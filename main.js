!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__await",(function(){return y})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return S})),n.d(t,"__importDefault",(function(){return I}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|u>>6,f=63&u;c||(f=64,a||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==c)throw Error();var u=o<<2|a>>4;if(r.push(u),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==c){var h=s<<6&192|c;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=function(e){try{return c.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f="FirebaseError",p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=f,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?g(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",c=new p(i,s),u=0,l=Object.keys(r);u<l.length;u++){var h=l[u];"_"!==h.slice(-1)&&(h in c&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),c[h]=r[h])}return c},e}();function g(e,t){return e.replace(y,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){return JSON.parse(e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var b=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(u(o[0])||""),n=v(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],c=this.chain_[1],u=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^c&(u^l),a=1518500249):(o=c^u^l,a=1859775393):r<60?(o=c&u|l&(c|u),a=2400959708):(o=c^u^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=u,u=4294967295&(c<<30|c>>>2),c=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var T=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function S(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.Sha1=w,t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=c,t.base64Decode=u,t.base64Encode=function(e){var t=s(e);return c.encodeByteArray(t,!0)},t.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new T(e,t);return n.subscribe.bind(n)},t.decode=b,t.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=I,t.getUA=d,t.isAdmin=function(e){var t=b(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=b(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=b(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(I(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(I(e,t,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(I(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(e){if(i)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService(a)}catch(e){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),c=s[0],u=s[1],l=this.normalizeInstanceIdentifier(c);try{var h=this.getOrInitializeService(l);u.resolve(h)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return e===a?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e}();var c=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=c,t.Provider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(0),a=n(1),s=n(2),c=n(6),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",u),h="@firebase/app",d="0.5.0",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),m=new c.Logger("@firebase/app"),g=function(){function e(e,t,n){var r,i,c=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return c}),"PUBLIC"));try{for(var u=o.__values(this.firebase_.INTERNAL.components.values()),l=u.next();!l.done;l=u.next()){var h=l.value;this._addComponent(h)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=f),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){m.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y="7.6.0";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw l.create("duplicate-app",{appName:s});var c=new e(n,o,r);return t[s]=c,c},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=p[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void m.warn(u.join(" "))}c(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:y,INTERNAL:{registerComponent:c,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(e=e||f,!a.contains(t,e))throw l.create("no-app",{appName:e});return t[e]}function c(s){var c,u,h=s.name;if(n.has(h))return m.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var d=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[h]=d,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?e:[])}}try{for(var f=o.__values(Object.keys(t)),p=f.next();!p.done;p=f.next()){var g=p.value;t[g]._addComponent(s)}}catch(e){c={error:e}}finally{try{p&&!p.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return"PUBLIC"===s.type?r[h]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r)}(g);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),b=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t,n=e.getComponent();return"VERSION"===(null===(t=n)||void 0===t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(a.isBrowser()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var w=self.firebase.SDK_VERSION;w&&w.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,e)};var S=v;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new b(e)}),"PRIVATE")),e.registerVersion(h,d,t),e.registerVersion("fire-js","")}(S),t.default=S,t.firebase=S},function(e,t,n){"use strict";var r,i=(r=n(3))&&"object"==typeof r&&"default"in r?r.default:r;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.registerVersion("firebase","7.6.1","app"),e.exports=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.r(t),n.d(t,"LogLevel",(function(){return i})),n.d(t,"Logger",(function(){return c})),n.d(t,"setLogLevel",(function(){return u}));var i,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},c=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.ERROR],e))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(e){o.forEach((function(t){t.logLevel=e}))}},function(e,t,n){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function c(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function u(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function f(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function p(e){this._db=e}o(u,"_index",["name","keyPath","multiEntry","unique"]),a(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(d,"_tx",["objectStoreNames","mode"]),s(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(f,"_db",["name","version","objectStoreNames"]),s(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,u].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[u,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new f(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){var r=n(9),i=n(10);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],c=t.base?o[0]+t.base:o[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var h=s(l),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(a[h].references++,a[h].updater(d)):a.push({identifier:l,updater:g(d,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function g(e,t){var n,r,i;if(t.singleton){var o=m++;n=p||(p=u(t)),r=d.bind(null,n,o,!1),i=d.bind(null,n,o,!0)}else n=u(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var o=c(e,t),u=0;u<n.length;u++){var l=s(n[u]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(e,t,n){var r=n(11),i=n(12),o=n(13),a=n(14),s=n(15);t=r(!1);var c=i(o),u=i(a),l=i(s);t.push([e.i,'.mainPanel{display:flex;position:absolute;background-color:rgba(246,246,246,.9);transition:right 1s,bottom 1s;--width: 250px;--height: 200px}.mainPanel.right{height:100%;width:var(--width);top:0;right:calc(var(--width) * -1)}.mainPanel.bottom{flex-direction:column;height:var(--height);width:100%;bottom:calc(var(--height) * -1)}.mainPanel.right>.panel-content{width:100%}.mainPanel.bottom>.panel-content{display:flex;height:100%}.mainPanel.right.open{right:0}.mainPanel.bottom.open{bottom:0}.mainPanel>.panel-grip{background:#2a8fb1}.mainPanel.right>.panel-grip{display:flex;align-items:center;padding:0 5px;cursor:col-resize}.mainPanel.bottom>.panel-grip{padding:5px 0;cursor:row-resize}.mainPanel>.panel-grip::before{content:"";display:block}.mainPanel.right>.panel-grip::before{height:27px;border-right:3px double #fff}.mainPanel.bottom>.panel-grip::before{width:27px;border-top:3px double #fff;margin:auto}.mainPanel>.panel-content>.panel-header{display:flex;justify-content:space-around;align-items:center;text-align:center}.mainPanel.bottom>.panel-content>.panel-header{flex-direction:column}.mainPanel>.panel-content>.panel-header>span{padding:.2rem;flex-grow:1}.mainPanel.bottom>.panel-content>.panel-header>span{width:35px;writing-mode:vertical-rl;-webkit-writing-mode:vertical-rl}.mainPanel>.panel-content>.panel-header>span:not(.active){cursor:pointer;background-color:#e4e4e4}.mainPanel.right>.panel-content>.panel-header>span:not(.active){border-bottom:1px solid #a6a6a6}.mainPanel.bottom>.panel-content>.panel-header>span:not(.active){border-right:1px solid #a6a6a6}.mainPanel.right>.panel-content>.panel-header>span:not(:last-child){border-right:1px solid #a6a6a6}.mainPanel.bottom>.panel-content>.panel-header>span:not(:last-child){border-bottom:1px solid #a6a6a6}.mainPanel>.panel-content>.panel-body{flex-grow:1;padding:.5rem}.mainPanel>.panel-content>.panel-body>.hidden{display:none}#projectsListContainer{height:100%;width:100%;position:absolute;background-color:#fff}#projectsListContainer>div:first-child{display:flex;justify-content:space-between;padding:1rem}#projectsListContainer>div:first-child>span{width:20%}@media(max-width: 500px){#closeProjectsListBtn{display:none}}#closeProjectsListBtn{float:right}#projectsListContainer>div:first-child>h4{overflow-x:hidden;font-weight:normal;font-size:1.6rem}#projectsList{display:flex;flex-wrap:wrap;margin-left:1rem;--items-h: 6;--item-width: calc((100% / var(--items-h)) - 1rem);--remaining-items: unset}@media(max-width: 1000px){#projectsList{--items-h: 5}}@media(max-width: 800px){#projectsList{--items-h: 4}}@media(max-width: 600px){#projectsList{--items-h: 3}}@media(max-width: 400px){#projectsList{--items-h: 2}}@media(max-width: 280px){#projectsList{--items-h: 1}}#projectsList::after{content:"";flex-grow:var(--remaining-items);width:calc((var(--item-width) + 1rem) * var(--remaining-items))}#projectsList>.empty-msg{width:100%;margin-top:3rem;margin-bottom:3rem;text-align:center}.projectItem{flex-grow:1;width:var(--item-width);margin-bottom:1rem;margin-right:1rem;position:relative;cursor:pointer;font-family:inherit;box-shadow:2px 2px 7px #b2b2b2}.projectItem>h4{background-color:#f9f9f9}.projectItem.current{cursor:auto;outline:4px solid #7da5b6;box-shadow:none}.projectItem.unsync{opacity:.5}.projectItem:not(.current):hover{box-shadow:2px 2px 7px #6b6b6b}.projectItem>.sharedIcon{position:absolute;width:30px;height:30px;right:6px;top:6px;background-color:#eee;padding:5px;border-radius:50%}.projectItem>.thumb{display:block;width:100%;height:150px;object-fit:cover}.projectItem>h4{padding:.6rem;font-weight:normal}#loadMoreProjBtn{display:block;margin:auto}#modalDialogContainer{justify-content:center;align-items:center;position:absolute;top:0;right:0;bottom:0;left:0}#modalDialogContainer>div{padding:1rem;background-color:#fff}#modalDialogContainer.grayTranslucent{background-color:rgba(216,216,216,.8)}#modalDialogContainer.lightOpaque{background-color:#fff}#closeModalBtn{float:right}#modalDialogContainer .modal-main-btns{display:flex;align-items:flex-end;justify-content:flex-end;margin-top:.3rem}#modalDialogContainer .modal-main-btns>button:not(:first-child){margin-left:.5rem}#authorizeDialog{display:flex;flex-direction:column;padding:1rem}#authorizeDialog>img{align-self:center}#authorizeDialog>h2{font-size:1.6rem;text-align:center;font-weight:normal;margin-bottom:1.5rem;margin-top:1rem}#authorizeDialog>div:last-child{display:flex;flex-direction:column;flex-grow:1;justify-content:end}#authorizeDialog>div:last-child>button{font-size:1.2rem}#authorizeDialog>div:last-child>button:not(:last-child){margin-bottom:.4rem}#uploadFileForm{display:flex;flex-direction:column;min-width:200px;padding:1rem;background-color:#fff}#uploadFileForm>input{font-family:inherit}#uploadFileForm>label{margin-top:1rem;text-align:center;cursor:pointer;font-size:.9rem}#uploadFileForm>button:last-child{margin-top:.5rem}#loadingFile{padding:1rem;text-align:center}#sideNavContainer{display:flex;flex-direction:column;position:absolute;height:100vh;width:314px;top:0;right:0;z-index:999;transform:translateX(314px);background-color:#fff}#sideNavContainer.active{transform:translateX(0)}.side-nav-header{padding-right:1rem;padding-left:1rem}#user-info{display:flex;align-items:flex-end;margin-top:var(--header-height)}#user-info>img{margin-right:.6rem}#user-info>span{overflow-x:hidden}#user-info>span>span{display:block}#user-info .email{font-weight:lighter}.side-nav-body{display:flex;flex-direction:column;align-items:center;flex-grow:1;padding:1rem;text-align:center}.side-nav-body button{width:80%}.side-nav-body>.side-nav-section{width:100%;padding-bottom:1rem}.side-nav-body>.side-nav-section.grow{flex-grow:1}#sideNavToggle{width:24px;height:24px;margin:.4rem;cursor:pointer;border-style:none;background-image:url('+c+");background-repeat:no-repeat;background-position:center}#sideNavToggle.active{background-image:url("+u+')}#sideNavContainer+.side-nav-shade{position:absolute;z-index:10;background-color:#000;width:100%;height:100vh;top:0;opacity:0;left:100%;transition:opacity .25s ease-out,left 0s linear .25s}#sideNavContainer.active+.side-nav-shade{opacity:.7;left:0;transition:opacity .25s ease-out,left 0s linear}.side-nav-footer{padding:1rem;font-weight:lighter}#commentForm>.inputs{margin-bottom:.8rem}#commentForm>.inputs>textarea{width:100%;min-height:150px}#commentForm.horizontal{display:flex}#commentForm.horizontal>.inputs{flex-grow:1}#commentForm.horizontal>.inputs>textarea{min-height:60px}#commentForm>.inputs>.members{margin-top:.5rem}#commentForm>.inputs>.members.hidden{display:none}#commentForm>.inputs>.members>p:first-child{font-weight:lighter;margin-bottom:.2rem}#commentForm>.inputs>.members>select{width:100%}#commentForm .info{margin-top:.1rem;font-size:.7rem;font-weight:lighter}#commentForm>.formButtonsModes>.buttonsContainer{display:flex;justify-content:space-between}#commentForm.horizontal>.formButtonsModes{margin-left:.5rem}#commentForm.horizontal>.formButtonsModes>.buttonsContainer{flex-direction:column}#commentForm.horizontal>.formButtonsModes>.buttonsContainer>button{height:50px}#commentForm.horizontal>.formButtonsModes>.buttonsContainer>button:first-child{margin-top:.6rem;order:1}#shareProjectDialog{display:flex;flex-direction:column;position:relative;min-height:350px;min-width:400px;background-color:#fff}#shareProjectDialog .table-wrapper{margin-top:.5rem;margin-bottom:1rem;background-color:#f1f1f1}#shareProjectDialog .table-wrapper.fixed-height{height:100px;overflow-y:auto}#shareProjectDialog .table-wrapper>table{width:100%;border-collapse:collapse;background-color:#eee}#shareProjectDialog .table-wrapper>.empty-msg{display:none;height:100%;align-items:center;justify-content:center;padding:1rem}#shareProjectDialog>.users-container.empty .empty-msg{display:flex}#shareProjectDialog>.users-container.empty table{display:none}#shareProjectDialog>.users-container.hidden{visibility:hidden}#shareProjectDialog td:last-child{width:40px;text-align:center}#shareProjectDialog td:last-child>svg{width:12px;height:12px}#shareProjectDialog td.action-btn{cursor:pointer}#shareProjectDialog td.action-btn:hover{background-color:#dbdbdb}#shareProjectDialog tr{border-bottom:2px solid #fff}#shareProjectDialog tr.to-delete>td:first-child{opacity:.4}#shareProjectDialog td.user-data>img{float:left;height:64px;width:64px;margin-right:.5rem}#shareProjectDialog td.user-data>div{display:flex;height:64px;padding:.4rem;flex-direction:column;justify-content:space-around}#shareProjectDialog td.user-data>div>span:nth-child(2){font-weight:lighter}#shareProjectDialog>.pending-users td.user-data{padding:.4rem}#shareProjectDialog>form>label{display:block}#shareProjectDialog>form>div{display:flex}#shareProjectDialog>form input{flex-grow:1}#shareProjectDialog>form button{width:60px}#shareProjectDialog>.loader-container{display:flex;align-items:center;justify-content:center;position:absolute;width:100%;height:100%;top:0;left:0;background-color:rgba(255,255,255,.7)}#shareProjectDialog>.loader-container.hidden{display:none}#shareProjectDialog .share-notification{position:absolute;bottom:0}#shareProjectDialog .share-notification.hidden{visibility:hidden}div#propsTablesContainer{display:flex}.mainPanel.right div#propsTablesContainer{flex-direction:column}.data-table{text-align:left;width:100%}.data-table>thead th{padding-left:.3rem;padding-right:.3rem;background-color:#ddd}.data-table>tbody th{width:50%;font-weight:normal}.data-table td{font-weight:lighter}#messageContainer{position:absolute;padding:1rem;max-width:300px;flex-direction:column;align-items:flex-end;bottom:2rem;right:2rem;box-shadow:2px 2px 6px #b2b2b2}#messageContainer>button{margin-bottom:.5rem}#messageContainer>button>img{width:1rem}#messageContainer.success{background-color:#aef5ad}#messageContainer.error{background-color:#dc9393}#messageContainer.warning{background-color:#ecdaa4}#viewportMessage{display:none;position:absolute;width:100%;height:100%;top:0;justify-content:center;align-items:center;text-align:center;font-weight:lighter;background-color:rgba(255,255,255,.95)}#viewportMessage.active{display:flex}#viewportMessage p{padding-bottom:1rem}#viewportMessage .btns-container{display:flex;justify-content:space-around}#notificationsContainer{display:none;position:absolute;width:450px;top:calc(var(--header-height) + 1rem);right:1rem;opacity:0;transition:opacity .2s ease-in;background-color:#f6f6f6;box-shadow:0 0 12px rgba(0,0,0,.2)}#notificationsContainer>.empty-msg{display:none;padding:2rem .8rem;text-align:center}#notificationsContainer.open{display:unset;opacity:1}#notificationsContainer.empty>.notifications-body{display:none}#notificationsContainer.empty>.empty-msg{display:block}.notifications-header{padding:.8rem;background-color:#fbfbfb;border-bottom:2px solid #dbdbdb}.notifications-body{max-height:350px;overflow:auto}.notifications-body>li{display:flex;padding:.8rem;cursor:pointer;border-bottom:1px solid #dbdbdb}.notifications-body>li.pending{background-color:#cbeaf5}.notifications-body>li.pending:hover{background-color:#c2e0ea}.notifications-body>li:hover{background-color:#eaeaea}.notification-thumb{height:50px;margin-right:1rem}.notification-content>h4{margin-bottom:.2rem;font-weight:500}.notification-content>p{font-weight:lighter}#contextMenu{width:120px;position:absolute;padding-top:.5rem;background-color:#fff;box-shadow:2px 2px 7px rgba(0,0,0,.2)}#contextMenu>ul>li{padding:.6rem;cursor:pointer}#contextMenu>ul>li:hover{background-color:rgba(0,0,0,.2)}.selected{--fill: #ffbd00;--stroke: #e89807;--stroke-w: 8px}.selected.fill.stroke>path,.selected.fill.stroke>polygon,.selected.fill.stroke>circle,.selected.fill.stroke>rect{fill:var(--fill);stroke:var(--stroke);stroke-width:var(--stroke-w)}.selected.stroke>path,.selected.stroke>polyline,.selected.stroke>line{stroke:var(--stroke);stroke-width:var(--stroke-w)}.selected.fill>path,.selected.fill>polygon,.selected.fill>circle{fill:var(--fill)}.selected.stroke>.hatch>line{stroke:var(--stroke);stroke-width:var(--stroke-w)}:root{--header-height: 2.5rem;--theme-blue: #2a8fb1;--theme-yellow: #ea8c15}*,*::before,*::after{box-sizing:border-box}h1,h2,h3,h4,h5,p{margin-top:0;margin-bottom:0}ul,ol{list-style-type:none;margin-top:0;margin-bottom:0;padding-left:0}button{border-style:none;padding:0;background-color:unset}body{display:flex;flex-direction:column;margin:0;overflow:hidden;color:#545454;font-family:"Oswald",sans-serif}svg.svg-loader{width:130px;height:90px}.buttonBase{padding:.4rem;cursor:pointer;border-width:1px;border-style:solid;font-family:inherit}.buttonBase.sides{border-top-style:none;border-bottom-style:none}.buttonBase.light{color:#373737;border-color:#cfcfcf}.buttonBase.light:not(.disabled):hover{background-color:#ececec}.buttonBase.emphasize{border-color:#e0e0e0;background-color:#d1f0ec}.buttonBase.emphasize:not(.disabled):hover{background-color:#acd3ce}.buttonBase.danger{color:#f55252;border-color:#fba4a4}.buttonBase.danger:not(.disabled):hover{background-color:#ffe9e9}.buttonBase.disabled{cursor:unset;opacity:.5}button.disabled:focus{outline-style:none}.buttonBase.locked{cursor:unset}.buttonBase.locked:hover{background-color:unset}.icon-btn{cursor:pointer}header .icon-btn{padding:calc(((var(--header-height) - 2px) - 24px) / 2);height:calc(var(--header-height) - 2px);width:calc(var(--header-height) - 2px)}.icon-btn:not(.disabled):not(.btn-tool-enabled):hover{background-color:#ececec}.icon-btn>svg{display:block;width:24px;height:24px}.icon-btn.disabled{opacity:.1;cursor:auto}.icon-btn.hidden{display:none}.btn-tool-enabled{background-color:#96cbdb}.btn-bg-img{background-repeat:no-repeat;background-position-y:center;background-position-x:.8rem}.google-logo{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+c3VwZXIgZzwvdGl0bGU+PGcgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNOSAzLjQ4YzEuNjkgMCAyLjgzLjczIDMuNDggMS4zNGwyLjU0LTIuNDhDMTMuNDYuODkgMTEuNDMgMCA5IDAgNS40OCAwIDIuNDQgMi4wMi45NiA0Ljk2bDIuOTEgMi4yNkM0LjYgNS4wNSA2LjYyIDMuNDggOSAzLjQ4eiIgZmlsbD0iI0VBNDMzNSIvPjxwYXRoIGQ9Ik0xNy42NCA5LjJjMC0uNzQtLjA2LTEuMjgtLjE5LTEuODRIOXYzLjM0aDQuOTZjLS4xLjgzLS42NCAyLjA4LTEuODQgMi45MmwyLjg0IDIuMmMxLjctMS41NyAyLjY4LTMuODggMi42OC02LjYyeiIgZmlsbD0iIzQyODVGNCIvPjxwYXRoIGQ9Ik0zLjg4IDEwLjc4QTUuNTQgNS41NCAwIDAgMSAzLjU4IDljMC0uNjIuMTEtMS4yMi4yOS0xLjc4TC45NiA0Ljk2QTkuMDA4IDkuMDA4IDAgMCAwIDAgOWMwIDEuNDUuMzUgMi44Mi45NiA0LjA0bDIuOTItMi4yNnoiIGZpbGw9IiNGQkJDMDUiLz48cGF0aCBkPSJNOSAxOGMyLjQzIDAgNC40Ny0uOCA1Ljk2LTIuMThsLTIuODQtMi4yYy0uNzYuNTMtMS43OC45LTMuMTIuOS0yLjM4IDAtNC40LTEuNTctNS4xMi0zLjc0TC45NyAxMy4wNEMyLjQ1IDE1Ljk4IDUuNDggMTggOSAxOHoiIGZpbGw9IiMzNEE4NTMiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDE4djE4SDB6Ii8+PC9nPjwvc3ZnPg==)}#saveBtn.enabled>svg,#notificationBtn.enabled>svg{fill:var(--theme-yellow);transform:scale(1.2)}#saveBtn>svg.progress-icon{display:none}#saveBtn.progress:hover{cursor:auto;background-color:unset}#saveBtn.progress>svg.save-icon{display:none}#saveBtn.progress>svg.progress-icon{display:block}header{height:var(--header-height);padding-right:8rem;align-items:stretch;z-index:1;background-color:#f6f6f6;border-bottom:2px solid var(--theme-blue)}header>span:first-child{width:4rem}header>span:first-child>img{height:100%;padding:.3rem;margin:auto;display:block}header>h1{position:absolute;right:100%}#projectsListBtn{min-width:10rem;font-size:1rem;font-weight:normal}#projectsListBtn>span{display:inline-block;width:100%;text-align:center}@media(max-width: 500px){#projectsListBtn{display:unset;min-width:unset;width:2.5rem;font-size:0;border-left-style:none;background-repeat:no-repeat;background-position:center;background-image:url('+l+");background-size:24px}}#toolbarsContainer{flex-grow:1;justify-content:flex-end}#drawingsBtns{min-width:8rem;text-align:center}#drawingsBtns>button{height:calc(var(--header-height) - 2px);width:100%;border-left-style:none}#drawingsBtns>ul{font-size:.9rem;font-weight:lighter;cursor:pointer;background-color:#f6f6f6;box-shadow:0px 2px 5px #b6b6b6}#drawingsBtns>ul>li{padding:.4rem}#drawingsBtns>ul>li.active{background-color:#c2c2c2;cursor:auto}#drawingsBtns>ul>li:not(.active):hover{background-color:#dfdfdf}.global-nav-btns{display:flex;position:absolute;top:0;right:0;z-index:1000;border-left:1px solid #c8c8c8}@media(max-width: 500px){header{order:1;border-top:2px solid var(--theme-blue);border-bottom:unset}header>span:first-child{display:none}#toolbarsContainer{position:absolute;right:0}#drawingsBtns>ul{box-shadow:0px -2px 7px #b6b6b6}}.dropdown-container{z-index:1;position:relative}.dropdown-container>.dropdown-content{display:flex;flex-direction:column;transition:.6s;transform:translateY(-100%);opacity:0;z-index:-1;position:absolute;right:0;left:0;top:calc(var(--header-height) - 2px)}.dropdown-container.responsive>.dropdown-content{display:inline;opacity:unset;z-index:unset;position:unset}@media(max-width: 800px){.dropdown-container.responsive>.dropdown-content{display:flex;opacity:0;z-index:-1;position:absolute}}.dropdown-container.open>.dropdown-content{transform:translateY(0%);opacity:1}@media(max-width: 500px){.dropdown-container>.dropdown-content{transform:unset}.dropdown-container.open>.dropdown-content{transform:translateY(calc(-100% - 2.5rem + 2px))}}main{position:relative;height:calc(100vh - var(--header-height))}#workspaces{height:100%}.workspace{height:100%}form .top-label{margin-bottom:.5rem}form .base-input{padding:.4rem}form .error-msg{font-size:.9rem;font-weight:lighter;color:red}form .error-msg.hidden{visibility:hidden}#renameProjectForm .rename-form-content{display:flex;width:100%;flex-direction:column}.drawingsContainer{height:100%}.drawingsContainer>div{height:100%}.drawingsContainer>div>svg{height:100%;width:100%}@media all and (display-mode: standalone){header{border-top:1px solid #dedede}}",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,n){"use strict";n.r(t),t.default=n.p+"6a516ff5fac28139a5f05c592974ad7a.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"e2684d217a882ae02c861b7fc5314e72.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"699485ad424f68ff9068a111deaba047.svg"},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=(r=n(3))&&"object"==typeof r&&"default"in r?r.default:r,a=n(0),s=n(6),c=n(1),u=n(2),l=n(18),h=o.SDK_VERSION,d=new s.Logger("@firebase/firestore");function f(){return d.logLevel===s.LogLevel.DEBUG?i.DEBUG:d.logLevel===s.LogLevel.SILENT?i.SILENT:i.ERROR}function p(e){switch(e){case i.DEBUG:d.logLevel=s.LogLevel.DEBUG;break;case i.ERROR:d.logLevel=s.LogLevel.ERROR;break;case i.SILENT:d.logLevel=s.LogLevel.SILENT;break;default:d.error("Firestore ("+h+"): Invalid value passed to `setLogLevel`")}}function m(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(d.logLevel<=s.LogLevel.DEBUG){var i=n.map(y);d.debug.apply(d,a.__spreadArrays(["Firestore ("+h+") ["+e+"]: "+t],i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.ERROR){var r=t.map(y);d.error.apply(d,a.__spreadArrays(["Firestore ("+h+"): "+e],r))}}function y(e){if("string"==typeof e)return e;var t=w.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e){var t="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function b(e,t){e||v(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(i||(i={}));var w=function(){function e(){}return e.setPlatform=function(t){e.platform&&v("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||v("Platform not set"),e.platform},e}();function T(){return w.getPlatform().emptyByteString}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},I=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(t,e),t}(Error);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new I(S.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){return void 0!==e?e:t}function D(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function k(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function N(e){for(var t in b(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function A(e,t){if(0!==t.length)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Y(t.length,"argument")+".")}function x(e,t,n){if(t.length!==n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function M(e,t,n){if(t.length<n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Y(n,"argument")+", but was called with "+Y(t.length,"argument")+".")}function L(e,t,n,r){if(t.length<n||t.length>r)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Y(t.length,"argument")+".")}function P(e,t,n,r){q(e,t,H(n)+" argument",r)}function O(e,t,n,r){void 0!==r&&P(e,t,n,r)}function R(e,t,n,r){q(e,t,n+" option",r)}function j(e,t,n,r){void 0!==r&&R(e,t,n,r)}function B(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+W(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+W(r[o]))}(e,t,n,r,i)}function F(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var c=s[a];if(c===r)return;o.push(W(c))}var u=W(r);throw new I(S.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function V(e,t,n,r){if(!t.some((function(e){return e===r})))throw new I(S.INVALID_ARGUMENT,"Invalid value "+W(r)+" provided to function "+e+"() for its "+H(n)+" argument. Acceptable values: "+t.join(", "))}function q(e,t,n,r){if(!("object"===t?U(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=W(r);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function U(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function W(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":v("Unknown wrong type: "+typeof e)}function z(e,t,n){if(void 0===n)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+H(t)+" argument, but it was undefined.")}function K(e,t,n){k(t,(function(t,r){if(n.indexOf(t)<0)throw new I(S.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function G(e,t,n,r){var i=W(r);return new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+H(n)+" argument to be a "+t+", but it was: "+i)}function Q(e,t,n){if(n<=0)throw new I(S.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+H(t)+" argument to be a positive number, but it was: "+n+".")}function H(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Y(e,t){return e+" "+t+(1===e?"":"s")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return b(20===t.length,"Invalid auto ID: "+t),t},e}();function X(e,t){return e<t?-1:e>t?1:0}function $(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Z(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(){if("undefined"==typeof Uint8Array)throw new I(S.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function te(){if(!w.getPlatform().base64Available)throw new I(S.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ne,re=function(){function e(e){te(),this._binaryString=e}return e.fromBase64String=function(t){x("Blob.fromBase64String",arguments,1),P("Blob.fromBase64String","string",1,t),te();try{var n=w.getPlatform().atob(t);return new e(n)}catch(e){throw new I(S.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(x("Blob.fromUint8Array",arguments,1),ee(),!(t instanceof Uint8Array))throw G("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return x("Blob.toBase64",arguments,0),te(),w.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){x("Blob.toUint8Array",arguments,0),ee();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return X(this._binaryString,e._binaryString)},e}(),ie=E(re,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),oe=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},ae="(default)",se=function(){function e(e,t){this.projectId=e,this.database=t||ae}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===ae},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return X(this.projectId,e.projectId)||X(this.database,e.database)},e}(),ce=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ue=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&v("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&v("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,b(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return b(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return b(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return b(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new I(S.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(ue),he=/^[_a-zA-Z][_a-zA-Z0-9]*$/,de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return he.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new I(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new I(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new I(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ue),fe=function(){function e(t){this.path=t,b(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===le.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return le.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new le(t.slice()))},e.fromPathString=function(t){return new e(le.fromString(t))},e.EMPTY=new e(new le([])),e}(),pe=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction"}(ne||(ne={}));var me=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new I(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),ge=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),b(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=me.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&v("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){b(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){b(e===ne.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==ne.All&&i.timerId===e)break}return t.drain()}))},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);b(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),ye="",ve="",be="",we="";function Te(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ie(t)),t=Se(e.get(n),t);return Ie(t)}function Se(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=ye+be;break;case ye:n+=ye+we;break;default:n+=o}}return n}function Ie(e){return e+ye+ve}function Ee(e){var t=e.length;if(b(t>=2,"Invalid path "+e),2===t)return b(e.charAt(0)===ye&&e.charAt(1)===ve,"Non-empty path "+e+" had length 2"),le.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(ye,o);switch((a<0||a>n)&&v('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case ve:var s=e.substring(o,a),c=void 0;0===i.length?c=s:(c=i+=s,i=""),r.push(c);break;case be:i+=e.substring(o,a),i+="\0";break;case we:i+=e.substring(o,a+1);break;default:v('Invalid encoded resource path: "'+e+'"')}o=a+2}return new le(r)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new I(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new I(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new I(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),_e=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new Ce(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new Ce(0,0)),e}(),De=function(){function e(e,t){this.comparator=e,this.root=t||Ne.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ne.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new ke(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new ke(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new ke(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new ke(this.root,e,this.comparator,!0)},e}(),ke=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){b(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Ne=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw v("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw v("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Ae=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw v("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw v("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw v("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw v("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw v("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Ne(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ne.EMPTY=new Ae;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xe=function(){function e(e){this.comparator=e,this.data=new De(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Me(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Me(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Me=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Le=new De(fe.comparator);function Pe(){return Le}function Oe(){return Pe()}var Re=new De(fe.comparator);function je(){return Re}var Be=new De(fe.comparator);function Fe(){return Be}var Ve=new xe(fe.comparator);function qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ve,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ue=new xe(X);function We(){return Ue}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,b(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&b(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;b(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&b(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime))}for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qe())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&$(this.mutations,e.mutations)&&$(this.baseMutations,e.baseMutations)},e}(),Ke=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){b(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Fe(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),Ge=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&v("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++){r(o[i])}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),Qe="SimpleDb",He=function(){function t(e){this.db=e,12.2===t.getIOSVersion(c.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return b(t.isAvailable(),"IndexedDB not supported in current environment."),m(Qe,"Opening database:",e),new Ge((function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new I(S.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;"VersionError"===t.name?o(new I(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(t)},a.onupgradeneeded=function(t){m(Qe,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,rn).next((function(){m(Qe,"Database upgrade to version "+rn+" complete")}))}})).toPromise()},t.delete=function(e){return m(Qe,"Removing database:",e),$e(window.indexedDB.deleteDatabase(e)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=c.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.isMockPersistence=function(){var t;return void 0!==e&&"YES"===(null===(t=Object({GOOGLE_CLIENT_ID:"344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com",GOOGLE_API_KEY_DEV:"AIzaSyBuHx9BXXCRFSKiLzjinZgK_2ys58ynGew",GOOGLE_API_KEY_PROD:"AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c"}))||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},t.getStore=function(e,t){return e.store(t)},t.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},t.prototype.runTransaction=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,c,u;return a.__generator(this,(function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,s=function(){var e,s,u,l;return a.__generator(this,(function(a){switch(a.label){case 0:++o,e=Je.open(c.db,r?"readonly":"readwrite",t),a.label=1;case 1:return a.trys.push([1,3,,4]),(s=n(e).catch((function(t){return e.abort(t),Ge.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return a.sent(),[2,{value:s}];case 3:return u=a.sent(),l=i&&"FirebaseError"!==u.name&&o<3,m(Qe,"Transaction failed with error: %s. Retrying: %s.",u.message,l),l?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},c=this,l.label=1;case 1:return[5,s()];case 2:return"object"==typeof(u=l.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),Ye=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return $e(this.dbCursor.delete())},e}(),Je=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new pe,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=et(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(m(Qe,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return b(!!t,"Object store not part of transaction: "+e),new Xe(t)},e}(),Xe=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(m(Qe,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(m(Qe,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$e(n)},e.prototype.add=function(e){return m(Qe,"ADD",this.store.name,e,e),$e(this.store.add(e))},e.prototype.get=function(e){var t=this;return $e(this.store.get(e)).next((function(n){return void 0===n&&(n=null),m(Qe,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return m(Qe,"DELETE",this.store.name,e),$e(this.store.delete(e))},e.prototype.count=function(){return m(Qe,"COUNT",this.store.name),$e(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){m(Qe,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Ge((function(n,r){t.onerror=function(e){var t=et(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new Ge((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Ye(i),a=t(i.primaryKey,i.value,o);if(a instanceof Ge){var s=a.catch((function(e){return o.done(),Ge.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return Ge.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(b(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function $e(e){return new Ge((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=et(e.target.error);n(t)}}))}var Ze=!1;function et(e){var t=He.getIOSVersion(c.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new I("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ze||(Ze=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return b(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ot(e).iterate({index:un.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=it(n),st(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=it(t),st(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=at(e),a=ot(e);return a.add({}).next((function(s){b("number"==typeof s,"Auto-generated key is not a number");for(var c=new ze(s,t,n,r),u=i.serializer.toDbMutationBatch(i.userId,c),l=[],h=new xe((function(e,t){return X(e.canonicalString(),t.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],m=ln.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(u)),l.push(o.put(m,ln.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=c.keys()})),Ge.waitFor(l).next((function(){return c}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return ot(e).get(t).next((function(e){return e?(b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Ge.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ot(e).iterate({index:un.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(b(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ot(e).iterate({index:un.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ot(e).loadAll(un.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=ln.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return at(e).iterate({range:i},(function(r,i,a){var s=r[0],c=r[1],u=r[2],l=Ee(c);if(s===n.userId&&t.path.isEqual(l))return ot(e).get(u).next((function(e){if(!e)throw v("Dangling document-mutation reference found: "+r+" which points to "+u);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(X),i=[];return t.forEach((function(t){var o=ln.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=at(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],c=e[2],u=Ee(s);a===n.userId&&t.path.isEqual(u)?r=r.add(c):o.done()}));i.push(s)})),Ge.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;b(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=ln.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new xe(X);return at(e).iterate({range:a},(function(e,t,o){var a=e[0],c=e[1],u=e[2],l=Ee(c);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(ot(e).get(t).next((function(e){if(null===e)throw v("Dangling document-mutation reference found, which points to "+t);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),Ge.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return rt(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),Ge.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ge.resolve();var r=IDBKeyRange.lowerBound(ln.prefixForUser(t.userId)),i=[];return at(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ee(e[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return nt(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return st(e).get(this.userId).next((function(e){return e||new cn(t.userId,-1,"")}))},e}();function nt(e,t,n){var r=ln.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return at(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function rt(e,t,n){var r=e.store(un.store),i=e.store(ln.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,c=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(c.next((function(){b(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=ln.key(t,d.key.path,n.batchId);o.push(i.delete(f)),u.push(d.key)}return Ge.waitFor(o).next((function(){return u}))}function it(e){return e instanceof Uint8Array?(b(He.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function ot(e){return qn.getStore(e,un.store)}function at(e){return qn.getStore(e,ln.store)}function st(e){return qn.getStore(e,cn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,ut=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(ct||(ct={}));var lt=function(){function e(e,t){this.generatorId=e,b((e&ut)===e,"Generator ID "+e+" contains more than "+ut+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<ut,e},e.prototype.after=function(e){return this.seek(e+(1<<ut)),this.next()},e.prototype.seek=function(e){b((e&ut)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){return new e(ct.QueryCache,2)},e.forSyncEngine=function(){return new e(ct.SyncEngine)},e}(),ht=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return _e.fromTimestamp(new Ce(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return pt(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return dt(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return b(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return dt(e).iterate((function(a,s){var c=r.serializer.fromDbTarget(s);c.sequenceNumber<=t&&null===n.get(c.targetId)&&(i++,o.push(r.removeTargetData(e,c)))})).next((function(){return Ge.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){var n=this;return dt(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},e.prototype.retrieveMetadata=function(e){return ft(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,qn.getStore(n,yn.store)).put(yn.key,t);var n},e.prototype.saveTargetData=function(e,t){return dt(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return dt(e).iterate({range:i,index:mn.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=mt(e);return t.forEach((function(t){var a=Te(t.path);i.push(o.put(new gn(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=mt(e);return Ge.forEach(t,(function(t){var o=Te(t.path);return Ge.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=mt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=mt(e),i=qe();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=Ee(e[1]),o=new fe(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Te(t.path),r=IDBKeyRange.bound([n],[Z(n)],!1,!0),i=0;return mt(e).iterate({index:gn.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return dt(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(e){return qn.getStore(e,mn.store)}function ft(e){return He.getStore(e,yn.store).get(yn.key).next((function(e){return b(null!==e,"Missing metadata row."),e}))}function pt(e){return ft(e).next((function(e){return e.highestListenSequenceNumber}))}function mt(e){return qn.getStore(e,gn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,yt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new xe(de.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),vt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),bt=function(e,t){this.version=e,this.transformResults=t};!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(gt||(gt={}));var wt,Tt,St=function(){function e(e,t){this.updateTime=e,this.exists=t,b(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Kt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Kt:(b(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),It=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&b(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Kt?e.version:_e.MIN},e}(),Et=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=gt.Set,i}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Kt(this.key,n,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=It.getPostMutationVersion(e);return new Kt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(It),Ct=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=gt.Patch,o}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Qt(this.key,t.version);var n=this.patchDocument(e);return new Kt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=It.getPostMutationVersion(e),i=this.patchDocument(e);return new Kt(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Kt?e.data():Ut.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},t}(It),_t=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=gt.Transform,r.precondition=St.exists(!0),r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Qt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Kt(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Kt(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Kt?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?Ut.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&$(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){return b(e instanceof Kt,"Unknown MaybeDocument type "+e),b(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},t.prototype.serverTransformResults=function(e,t){var n=[];b(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Kt&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,c=null;t instanceof Kt&&(c=t.field(a.field)),null===c&&n instanceof Kt&&(c=n.field(a.field)),r.push(s.applyToLocalView(c,e))}return r},t.prototype.transformObject=function(e,t){b(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},t}(It),Dt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=gt.Delete,r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by DeleteMutation."),new Gt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&b(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Gt(this.key,_e.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(It);!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(wt||(wt={})),function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(Tt||(Tt={}));var kt=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(Tt.Estimate,n);case"previous":return new e(Tt.Previous,n);case"none":case void 0:return new e(Tt.Default,n);default:return v("fromSnapshotOptions() called with invalid options.")}},e}(),Nt=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return b(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),X(this.typeOrder,e.typeOrder)},e}(),At=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=wt.NullValue,t.internalValue=null,t}return a.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(Nt),xt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BooleanValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?X(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(Nt),Mt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.NumberValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t}(Nt);function Lt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Lt(this.internalValue,e.internalValue)},t}(Mt),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Lt(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Mt),Rt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.StringValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?X(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(Nt),jt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.TimestampValue,n}return a.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Bt?-1:this.defaultCompareTo(e)},t}(Nt),Bt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=wt.TimestampValue,r}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===Tt.Estimate?new jt(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Tt.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof jt?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(Nt),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.BlobValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),Vt=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=wt.RefValue,r}return a.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:fe.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(Nt),qt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.GeoPointValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(Nt),Ut=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ObjectValue,n}return a.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=X(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return X(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(b(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(b(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){b(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t?n.internalValue.get(e):null})),n},t.prototype.fieldMask=function(){var e=new xe(de.comparator);return this.internalValue.forEach((function(n,r){var i=new de([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach((function(t){e=e.add(i.child(t))}))}else e=e.add(i)})),yt.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new De(X)),t}(Nt),Wt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=wt.ArrayValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){if(n[t].isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return X(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(Nt),zt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return fe.comparator(e.key,t.key)},e}(),Kt=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,b(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=Ut.EMPTY;k(this.proto.fields||{},(function(n,r){t=t.set(new de([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){b(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):v("Trying to compare documents on fields that don't exist")},t}(zt),Gt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(zt),Ht=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){k(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return N(this.inner)},e}(),Yt=function(){function e(){this.changes=new Ht((function(e){return e.toString()})),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return b(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){b(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ge.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){b(!this.changesApplied,"Changes have already been applied.")},e}(),Jt=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){return $t(e).put(Zt(t),n)},e.prototype.removeEntry=function(e,t){var n=$t(e),r=Zt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return $t(e).get(Zt(t)).next((function(e){return n.maybeDecodeDocument(e)}))},e.prototype.getSizedEntry=function(e,t){var n=this;return $t(e).get(Zt(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:en(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=Oe(),i=new De(fe.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);o?(r=r.insert(e,o),i=i.insert(e,en(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Ge.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return $t(e).iterate({range:r},(function(e,t,r){for(var a=fe.fromSegments(e);o&&fe.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=je(),o=t.path.length+1,a={};if(n.isEqual(_e.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var c=t.path.toArray(),u=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([c,u],!0),a.index=fn.collectionReadTimeIndex}return $t(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof Kt&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Pe(),i=this.serializer.toDbTimestampKey(t),o=$t(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:fn.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},e.prototype.getLastDocumentChange=function(e){var t,n=this,r=$t(e),i=_e.MIN;return r.iterate({index:fn.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Xt(e).get(pn.key).next((function(e){return b(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return Xt(e).put(pn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Gt&&t.version.isEqual(_e.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new Ht((function(e){return e.toString()})),r}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new xe((function(e,t){return X(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(b(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){b(!t.readTime.isEqual(_e.MIN),"Cannot add a document with a read time of zero");var c=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var u=en(c);r+=u-s,n.push(t.documentCache.addEntry(e,o,c))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new Gt(o,_e.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},t}(Yt),e}();function Xt(e){return qn.getStore(e,pn.store)}function $t(e){return qn.getStore(e,fn.store)}function Zt(e){return e.path.toArray()}function en(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn=function(){function e(){this.collectionParentIndex=new nn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Ge.resolve()},e.prototype.getCollectionParents=function(e,t){return Ge.resolve(this.collectionParentIndex.getEntries(t))},e}(),nn=function(){function e(){this.index={}}return e.prototype.add=function(e){b(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xe(le.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new xe(le.comparator)).toArray()},e}(),rn=9,on=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;b(n<r&&n>=0&&r<=rn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Je(t);n<1&&r>=1&&(function(e){e.createObjectStore(sn.store)}(e),function(e){e.createObjectStore(cn.store,{keyPath:cn.keyPath}),e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0}).createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ln.store)}(e),bn(e),function(e){e.createObjectStore(fn.store)}(e));var a=Ge.resolve();return n<3&&r>=3&&(0!==n&&(!function(e){e.deleteObjectStore(gn.store),e.deleteObjectStore(mn.store),e.deleteObjectStore(yn.store)}(e),bn(e)),a=a.next((function(){return function(e){var t=e.store(yn.store),n=new yn(0,0,_e.MIN.toTimestamp(),0);return t.put(yn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(un.store).loadAll().next((function(n){e.deleteObjectStore(un.store),e.createObjectStore(un.store,{keyPath:un.keyPath,autoIncrement:!0}).createIndex(un.userMutationsIndex,un.userMutationsKeyPath,{unique:!0});var r=t.store(un.store),i=n.map((function(e){return r.put(e)}));return Ge.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(wn.store,{keyPath:wn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(pn.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(fn.store);t.createIndex(fn.readTimeIndex,fn.readTimeIndexPath,{unique:!1}),t.createIndex(fn.collectionReadTimeIndex,fn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(fn.store).iterate((function(e,n){t+=en(n)})).next((function(){var n=new pn(t);return e.store(pn.store).put(pn.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(cn.store),r=e.store(un.store);return n.loadAll().next((function(n){return Ge.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(un.userMutationsIndex,i).next((function(r){return Ge.forEach(r,(function(r){b(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return rt(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(gn.store),n=e.store(fn.store);return pt(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new le(n),a=function(e){return[0,Te(e)]}(o);r.push(t.get(a).next((function(n){return n?Ge.resolve():function(n){return t.put(new gn(0,Te(n),e))}(o)})))})).next((function(){return Ge.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(vn.store,{keyPath:vn.keyPath});var n=t.store(vn.store),r=new nn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Te(i)})}};return t.store(fn.store).iterate({keysOnly:!0},(function(e,t){var n=new le(e);return i(n.popLast())})).next((function(){return t.store(ln.store).iterate({keysOnly:!0},(function(e,t){e[0];var n=e[1],r=(e[2],Ee(n));return i(r.popLast())}))}))},e}();var an=function(e,t){this.seconds=e,this.nanoseconds=t},sn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();var cn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),un=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();var ln=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Te(t)]},e.key=function(e,t,n){return[e,Te(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();var hn=function(e,t){this.path=e,this.readTime=t},dn=function(e,t){this.path=e,this.version=t},fn=function(){function e(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),pn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();var mn=function(){function e(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),gn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,b(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),yn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),vn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function bn(e){e.createObjectStore(gn.store,{keyPath:gn.keyPath}).createIndex(gn.documentTargetsIndex,gn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(mn.store,{keyPath:mn.keyPath}).createIndex(mn.queryTargetsIndexName,mn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(yn.store)}var wn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}();var Tn,Sn=[cn.store,un.store,ln.store,fn.store,mn.store,sn.store,yn.store,gn.store],In=a.__spreadArrays(Sn,[wn.store]),En=a.__spreadArrays(In,[pn.store]),Cn=a.__spreadArrays(En,[vn.store]),_n=function(){function e(){this.collectionParentsCache=new nn}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(b(t.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:Te(i)};return Dn(e).put(o)}return Ge.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Z(t),""],!1,!0);return Dn(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ee(o.parent))}return n}))},e}();function Dn(e){return qn.getStore(e,vn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(Tn||(Tn={}));var kn=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=_e.MIN),void 0===o&&(o=_e.MIN),void 0===a&&(a=T()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),Nn=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=fe.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Gt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=fe.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new Qt(t,n)}return v("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Kt){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new fn(null,null,i,o,n,r)}if(e instanceof Gt){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);o=e.hasCommittedMutations;return new fn(null,new hn(a,s),null,o,n,r)}if(e instanceof Qt){a=e.key.path.toArray();var c=this.toDbTimestamp(e.version);return new fn(new dn(a,c),null,null,!0,n,r)}return v("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new Ce(e[0],e[1]);return _e.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new an(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new Ce(e.seconds,e.nanoseconds);return _e.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new un(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=Ce.fromMillis(e.localWriteTimeMs);return new ze(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(Te(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=qe(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new fe(Ee(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):_e.MIN,i=e.resumeToken;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new kn(t,e.targetId,Tn.Listen,e.lastListenSequenceNumber,n,r,i)},e.prototype.toDbTarget=function(e){b(Tn.Listen===e.purpose,"Only queries with purpose "+Tn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(b(He.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new mn(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function An(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=X(n,i);return 0===a?X(r,o):a}var xn=function(){function e(e){this.maxElements=e,this.buffer=new xe(An),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();An(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Mn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ln=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Pn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){b(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Ln.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;b(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;m("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ne.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(Un)}))},e}(),On=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Ge.resolve(ce.INVALID);var r=new xn(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Ln.COLLECTION_DISABLED?(m("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(Mn)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Mn):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,o,a,s,c,u,l=this,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(m("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return o=t,c=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){(u=Date.now(),f()<=i.DEBUG)&&m("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(c-s)+"ms\n\tRemoved "+e+" documents in "+(u-c)+"ms\nTotal Duration: "+(u-h)+"ms");return Ge.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})}))},e}(),Rn=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),jn="IndexedDbPersistence",Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Vn=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return a.__extends(t,e),t}(Rn),qn=function(){function e(t,n,r,i,o,a,s,c){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=c,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new Kn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new Nn(s),this.document=i.document,this.targetCache=new ht(this.referenceDelegate,this.serializer),this.indexManager=new _n,this.remoteDocumentCache=new Jt(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new I(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Vn)return He.getStore(e.simpleDbTransaction,t);throw v("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:if(!e.isAvailable())throw new I(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){var e=this;return b(!this.started,"IndexedDbPersistence double-started!"),b(null!==this.window,"Expected 'window' to be defined"),He.openOrCreate(this.dbName,rn,new on(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[yn.store],(function(e){return pt(e)}))})).then((function(t){e.listenSequence=new ce(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",Cn,(function(t){return zn(t).put(new wn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return m(jn,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return Wn(e).get(sn.key).next((function(e){return Ge.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return zn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=e.getStore(n,wn.store);return r.loadAll().next((function(e){var n=t.filterActiveClients(e,18e5),i=e.filter((function(e){return-1===n.indexOf(e)}));return Ge.forEach(i,(function(e){return r.delete(e.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),n.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ne.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Wn(e).get(sn.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new I(S.FAILED_PRECONDITION,Fn);return!1}}return!(!t.networkEnabled||!t.inForeground)||zn(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&m(jn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[sn.store,wn.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[wn.store],(function(t){return zn(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},e.clearPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,He.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return b(this.started,"Cannot initialize MutationQueue before persistence is started."),tt.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return b(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return b(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return b(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;m(jn,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,Cn,(function(o){return i=new Vn(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw g("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new I(S.FAILED_PRECONDITION,Bn);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Wn(e).get(sn.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new I(S.FAILED_PRECONDITION,Fn)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new sn(this.clientId,this.allowTabSynchronization,Date.now());return Wn(e).put(sn.key,t)},e.isAvailable=function(){return He.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Wn(e);return n.get(sn.key).next((function(e){return t.isLocalClient(e)?(m(jn,"Releasing primary lease."),n.delete(sn.key)):Ge.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(g("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(b(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(b("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return m(jn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return g(jn,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Un(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){if(!function(e){return e.code===S.FAILED_PRECONDITION&&e.message===Bn}(e))throw e;return m(jn,"Unexpectedly lost primary lease"),[2]}))}))}function Wn(e){return e.store(sn.store)}function zn(e){return e.store(wn.store)}var Kn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new On(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Gn(e,t)},e.prototype.removeReference=function(e,t){return Gn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Gn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Ge.resolve(!0):function(e,t){var n=!1;return st(e).iterateSerial((function(r){return nt(e,r,t).next((function(e){return e&&(n=!0),Ge.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var c=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),mt(e).delete([0,Te(a.path)])}))}));i.push(c)}})).next((function(){return Ge.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Gn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=mt(e),i=ce.INVALID;return r.iterate({index:gn.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==ce.INVALID&&t(new fe(Ee(n)),i),i=s,n=a):i=ce.INVALID})).next((function(){i!==ce.INVALID&&t(new fe(Ee(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Gn(e,t){return mt(e).put(function(e,t){return new gn(0,Te(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn=Number,Hn=Qn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Yn=Qn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Jn=Qn.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Xn(e){return null==e}function $n(e){return Jn(e)&&e<=Yn&&e>=Hn}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn,er=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){e+=i[r].canonicalId(),e+=","}Xn(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Xn(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.isDocumentQuery=function(){return fe.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.First="F",e.Last="L"}(Zn||(Zn={}));var tr=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Zn.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[fr]:this.memoizedOrderBy=[new dr(e),fr];else{b(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:lr.ASCENDING;this.memoizedOrderBy.push(a===lr.ASCENDING?fr:pr)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){b(null==this.getInequalityFilterField()||!(t instanceof ir)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),b(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){b(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Zn.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Zn.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return b(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!Xn(this.limit)&&this.limitType===Zn.First},e.prototype.hasLimitToLast=function(){return!Xn(this.limit)&&this.limitType===Zn.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof ir&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof ir&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Zn.First)this.memoizedTarget=new er(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===lr.DESCENDING?lr.ASCENDING:lr.DESCENDING;e.push(new dr(r.field,i))}var o=this.endAt?new hr(this.endAt.position,!this.endAt.before):null,a=this.startAt?new hr(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new er(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):fe.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){b(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),nr=function(){},rr=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return v("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),ir=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return a.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===rr.IN?(b(r instanceof Wt,"Comparing on key with IN, but filter value not an ArrayValue"),b(r.internalValue.every((function(e){return e instanceof Vt})),"Comparing on key with IN, but an array value was not a RefValue"),new ar(e,r)):(b(r instanceof Vt,"Comparing on key, but filter value not a RefValue"),b(n!==rr.ARRAY_CONTAINS&&n!==rr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new or(e,n,r));if(r.isEqual(At.INSTANCE)){if(n!==rr.EQUAL)throw new I(S.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Ot.NAN)){if(n!==rr.EQUAL)throw new I(S.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===rr.ARRAY_CONTAINS?new sr(e,r):n===rr.IN?(b(r instanceof Wt,"IN filter has invalid value: "+r.toString()),new cr(e,r)):n===rr.ARRAY_CONTAINS_ANY?(b(r instanceof Wt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new ur(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case rr.LESS_THAN:return e<0;case rr.LESS_THAN_OR_EQUAL:return e<=0;case rr.EQUAL:return 0===e;case rr.GREATER_THAN:return e>0;case rr.GREATER_THAN_OR_EQUAL:return e>=0;default:return v("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[rr.LESS_THAN,rr.LESS_THAN_OR_EQUAL,rr.GREATER_THAN,rr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(nr),or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=fe.comparator(e.key,t.key);return this.matchesComparison(n)},t}(ir),ar=function(e){function t(t,n){var r=e.call(this,t,rr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},t}(ir),sr=function(e){function t(t,n){return e.call(this,t,rr.ARRAY_CONTAINS,n)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Wt&&t.contains(this.value)},t}(ir),cr=function(e){function t(t,n){var r=e.call(this,t,rr.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(ir),ur=function(e){function t(t,n){var r=e.call(this,t,rr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Wt&&n.internalValue.some((function(e){return t.value.contains(e)}))},t}(ir),lr=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),hr=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){b(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())b(o instanceof Vt,"Bound has a non-key value where the key path is being used."),n=fe.comparator(o.key,t.key);else{var a=t.field(i.field);b(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===lr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},e}(),dr=function(){function e(e,t){this.field=e,void 0===t&&(t=lr.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Kt.compareByKey(e,t):Kt.compareByField(this.field,e,t);switch(this.dir){case lr.ASCENDING:return n;case lr.DESCENDING:return-1*n;default:return v("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),fr=new dr(de.keyField(),lr.ASCENDING),pr=new dr(de.keyField(),lr.DESCENDING),mr=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var o=this;return b(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(_e.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(a){var s=o.applyQuery(t,a);return(t.hasLimitToFirst()||t.hasLimitToLast())&&o.needsRefill(t.limitType,s,r,n)?o.executeFullCollectionScan(e,t):(f()<=i.DEBUG&&m("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),o.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.applyQuery=function(e,t){var n=new xe((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof Kt&&e.matches(r)&&(n=n.add(r))})),n},e.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Zn.First?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.executeFullCollectionScan=function(e,t){return f()<=i.DEBUG&&m("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,_e.MIN)},e}(),gr=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++){e=i[r].applyToLocalView(t,e)}return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Oe();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++){t=o[i].applyToLocalView(e,t)}r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Pe();return i.forEach((function(e,t){t||(t=new Gt(e,_e.forDeletedDoc())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new fe(t)).next((function(e){var t=je();return e instanceof Kt&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;b(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=je();return this.indexManager.getCollectionParents(e,i).next((function(a){return Ge.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var c=s[a],u=c.key,l=r.get(u),h=c.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Kt?r.insert(u,h):r.remove(u)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=qe(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var c=s[a];c instanceof Ct&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Kt&&(u=u.insert(e,t))})),u}))},e}(),yr=function(){function e(){this.refsByKey=new xe(vr.compareByKey),this.refsByTarget=new xe(vr.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new vr(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new vr(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=fe.EMPTY,r=new vr(n,e),i=new vr(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=fe.EMPTY,n=new vr(t,e),r=new vr(t,e+1),i=qe();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new vr(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),vr=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return fe.comparator(e.key,t.key)||X(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return X(e.targetOrBatchId,t.targetOrBatchId)||fe.comparator(e.key,t.key)},e}(),br=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new yr,this.targetDataByTarget=new De(X),this.targetIdByTarget=new Ht((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=_e.MIN,b(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new gr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i=this;return a.__generator(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new gr(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=qe(),s=0,c=o;s<c.length;s++){var u=c[s];t.push(u.batchId);for(var l=0,h=u.mutations;l<h.length;l++){var d=h[l];a=a.add(d.key)}}for(var f=0,p=e;f<p.length;f++){u=p[f];i.push(u.batchId);for(var m=0,g=u.mutations;m<g.length;m++){d=g[m];a=a.add(d.key)}}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},e.prototype.localWrite=function(e){var t,n=this,r=Ce.now(),i=e.reduce((function(e,t){return e.add(t.key)}),qe());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,c=e;s<c.length;s++){var u=c[s],l=u.extractBaseValue(t.get(u.key));null!=l&&a.push(new Ct(u.key,l,l.fieldMask(),St.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):Ge.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return b(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var s=[];D(t.targetChanges,(function(t,a){var c=i.get(t);if(c){s.push(n.targetCache.removeMatchingKeys(o,a.removedDocuments,t).next((function(){return n.targetCache.addMatchingKeys(o,a.addedDocuments,t)})));var u=a.resumeToken;if(u.length>0){var l=c.withResumeToken(u,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(t,l),e.shouldPersistTargetData(c,l,a)&&s.push(n.targetCache.updateTargetData(o,l))}}}));var c=Pe(),u=qe();if(t.documentUpdates.forEach((function(e,t){u=u.add(e)})),s.push(a.getEntries(o,u).next((function(e){t.documentUpdates.forEach((function(i,u){var l=e.get(i);u instanceof Gt&&u.version.isEqual(_e.MIN)?(a.removeEntry(i,r),c=c.insert(i,u)):null==l||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(b(!_e.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.addEntry(u,r),c=c.insert(i,u)):m("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",u.version),t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(_e.MIN)){var l=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(e){return b(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));s.push(l)}return Ge.waitFor(s).next((function(){return a.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,c)}))})).then((function(e){return n.targetDataByTarget=i,e}))},e.shouldPersistTargetData=function(e,t,n){return b(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);b(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,c=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,c)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Ge.forEach(e,(function(e){return Ge.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,Ge.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new kn(e,i,Tn.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?Ge.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);b(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?Ge.resolve():Ge.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},e.prototype.executeQuery=function(e,t){var n=this,r=_e.MIN,i=qe();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:_e.MIN,t?i:qe())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Ge.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);b(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):b(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t=this;return a.__generator(this,(function(n){return this.remoteDocuments instanceof Jt?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){var n=e.readTime;t.lastDocumentChangeReadTime=n}))]):[2]}))}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),wr=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=T(),this.batchesByDocumentKey=new xe(vr.compareByKey)}return e.prototype.checkEmpty=function(e){return Ge.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");b(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return b(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Ge.resolve()},e.prototype.getLastStreamToken=function(e){return Ge.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Ge.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){b(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&b(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new ze(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var c=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new vr(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast())}return Ge.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Ge.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return b(null!=n,"Failed to find local mutation batch."),Ge.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Ge.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Ge.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return Ge.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new vr(t,0),i=new vr(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){b(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);b(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Ge.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xe(X);return t.forEach((function(e){var t=new vr(e,0),i=new vr(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){b(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),Ge.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;fe.isDocumentKey(i)||(i=i.child(""));var o=new vr(new fe(i),0),a=new xe(X);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),Ge.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;b(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Ge.forEach(t.mutations,(function(i){var o=new vr(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new vr(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ge.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&b(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ge.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return b(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return b(n.batchId===e,"If found batch must match"),n},e}();var Tr,Sr=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new De(fe.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){b(!n.isEqual(_e.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Ge.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=Oe();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),Ge.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=je(),i=new fe(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,c=a.value,u=c.maybeDocument,l=c.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||u instanceof Kt&&t.matches(u)&&(r=r.insert(u.key,u))}return Ge.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return Ge.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return Ge.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),Ge.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Yt),e}(),Ir=function(){function e(e){this.persistence=e,this.targets=new Ht((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=_e.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new yr,this.targetCount=0,this.targetIdGenerator=lt.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),Ge.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Ge.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Ge.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Ge.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Ge.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return b(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,Ge.resolve()},e.prototype.updateTargetData=function(e,t){return b(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),Ge.resolve()},e.prototype.removeTargetData=function(e,t){return b(this.targetCount>0,"Removing a target from an empty cache"),b(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Ge.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Ge.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return Ge.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return Ge.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return v("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),Ge.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Ge.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Ge.resolve(n)},e.prototype.containsKey=function(e,t){return Ge.resolve(this.references.containsKey(t))},e}(),Er=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new ce(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new Ir(this);this.indexManager=new tn,this.remoteDocumentCache=new Sr(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n,r){return new e(t,(function(e){return new Dr(e,new Nn(n),r)}))},e.createEagerPersistence=function(t){return new e(t,(function(e){return new _r(e)}))},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new wr(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;m("MemoryPersistence","Starting transaction:",e);var i=new Cr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.mutationQueuesContainKey=function(e,t){return Ge.or((n=this.mutationQueues,r=[],k(n,(function(e,t){return r.push(t)})),r).map((function(n){return function(){return n.containsKey(e,t)}})));var n,r},e}(),Cr=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return a.__extends(t,e),t}(Rn),_r=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw v("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Ge.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Dr=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Ht((function(e){return Te(e.path)})),this.garbageCollector=new On(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Ge.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Ge.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?Ge.resolve():t(i)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ge.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw v("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Ge.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Ge.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Ge.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),kr=1e3,Nr=1.5,Ar=6e4,xr=function(){function e(e,t,n,r,i){void 0===n&&(n=kr),void 0===r&&(r=Nr),void 0===i&&(i=Ar),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&m("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(Tr||(Tr={}));var Mr,Lr,Pr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Tr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new xr(e,t)}return e.prototype.isStarted=function(){return this.state===Tr.Starting||this.state===Tr.Open||this.state===Tr.Backoff},e.prototype.isOpen=function(){return this.state===Tr.Open},e.prototype.start=function(){this.state!==Tr.Error?(b(this.state===Tr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Tr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){b(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Tr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.isOpen()?[2,this.close(Tr.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return b(this.isStarted(),"Only started streams should be closed."),b(e===Tr.Error||Xn(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Tr.Error?this.backoff.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===S.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;b(this.state===Tr.Initial,"Must be in initial state to auth"),this.state=Tr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new I(S.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;b(this.state===Tr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return b(t.state===Tr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Tr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;b(this.state===Tr.Error,"Should only perform backoff when in Error state"),this.state=Tr.Backoff,this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return b(this.state===Tr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Tr.Initial,this.start(),b(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return b(this.isStarted(),"Can't handle server close on non-started stream"),m("PersistentStream","close with error: "+e),this.stream=null,this.close(Tr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(m("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Or=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ne.ListenStreamConnectionBackoff,ne.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Pr),Rr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,ne.WriteStreamConnectionBackoff,ne.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=T(),a}return a.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(b(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return b(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){b(this.isOpen(),"Writing handshake requires an opened stream"),b(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;b(this.isOpen(),"Writing mutations requires an opened stream"),b(this.handshakeComplete_,"Handshake must be complete before writing mutations"),b(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(Pr),jr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Rr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Or(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Pe();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);b(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===S.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e}(),Br=function(){function e(e){this.datastore=e,this.readVersions=Fe(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new I(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Gt||e instanceof Kt?n.recordVersion(e):v("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new Dt(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new I(S.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof Kt)t=e.version;else{if(!(e instanceof Gt))throw v("Document in a transaction was a "+e.constructor.name);t=_e.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new I(S.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?St.updateTime(t):St.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(_e.forDeletedDoc()))throw new I(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return St.updateTime(t)}return St.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){b(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(Mr||(Mr={})),function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(Lr||(Lr={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fr,Vr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Mr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Mr.Unknown),b(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ne.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,b(e.state===Mr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Mr.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===Mr.Online?(this.setAndBroadcast(Mr.Unknown),b(0===this.watchStreamFailures,"watchStreamFailures must be 0"),b(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Mr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Mr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(t),this.shouldWarnClientIsOffline=!1):m("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function qr(e){switch(e){case S.OK:return v("Treated status OK as error");case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return v("Unknown status code: "+e)}}function Ur(e){if(void 0===e)return g("GRPC error has no .code"),S.UNKNOWN;switch(e){case Fr.OK:return S.OK;case Fr.CANCELLED:return S.CANCELLED;case Fr.UNKNOWN:return S.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return S.INTERNAL;case Fr.UNAVAILABLE:return S.UNAVAILABLE;case Fr.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Fr.NOT_FOUND:return S.NOT_FOUND;case Fr.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Fr.ABORTED:return S.ABORTED;case Fr.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Fr.DATA_LOSS:return S.DATA_LOSS;default:return v("Unknown status code: "+e)}}function Wr(e){if(void 0===e)return Fr.OK;switch(e){case S.OK:return Fr.OK;case S.CANCELLED:return Fr.CANCELLED;case S.UNKNOWN:return Fr.UNKNOWN;case S.DEADLINE_EXCEEDED:return Fr.DEADLINE_EXCEEDED;case S.RESOURCE_EXHAUSTED:return Fr.RESOURCE_EXHAUSTED;case S.INTERNAL:return Fr.INTERNAL;case S.UNAVAILABLE:return Fr.UNAVAILABLE;case S.UNAUTHENTICATED:return Fr.UNAUTHENTICATED;case S.INVALID_ARGUMENT:return Fr.INVALID_ARGUMENT;case S.NOT_FOUND:return Fr.NOT_FOUND;case S.ALREADY_EXISTS:return Fr.ALREADY_EXISTS;case S.PERMISSION_DENIED:return Fr.PERMISSION_DENIED;case S.FAILED_PRECONDITION:return Fr.FAILED_PRECONDITION;case S.ABORTED:return Fr.ABORTED;case S.OUT_OF_RANGE:return Fr.OUT_OF_RANGE;case S.UNIMPLEMENTED:return Fr.UNIMPLEMENTED;case S.DATA_LOSS:return Fr.DATA_LOSS;default:return v("Unknown status code: "+e)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(Fr||(Fr={}));
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zr,Kr,Gr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||fe.comparator(t.key,n.key)}:function(e,t){return fe.comparator(e.key,t.key)},this.keyedMap=je(),this.sortedSet=new De(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(zr||(zr={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Kr||(Kr={}));var Qr,Hr=function(){function e(){this.changeMap=new De(fe.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==zr.Added&&n.type===zr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===zr.Metadata&&n.type!==zr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):e.type===zr.Modified&&n.type===zr.Added?this.changeMap=this.changeMap.insert(t,{type:zr.Added,doc:e.doc}):e.type===zr.Removed&&n.type===zr.Added?this.changeMap=this.changeMap.remove(t):e.type===zr.Removed&&n.type===zr.Modified?this.changeMap=this.changeMap.insert(t,{type:zr.Removed,doc:n.doc}):e.type===zr.Added&&n.type===zr.Removed?this.changeMap=this.changeMap.insert(t,{type:zr.Modified,doc:e.doc}):v("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Yr=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:zr.Added,doc:e})})),new e(t,n,Gr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Jr=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Xr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(_e.MIN,i,We(),Pe(),qe())},e}(),Xr=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(T(),n,qe(),qe(),qe())},e}(),$r=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Zr=function(e,t){this.targetId=e,this.existenceFilter=t};!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(Qr||(Qr={}));var ei=function(e,t,n,r){void 0===n&&(n=T()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},ti=function(){function e(){this.pendingResponses=0,this.documentChanges=ii(),this._resumeToken=T(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=qe(),t=qe(),n=qe();return this.documentChanges.forEach((function(r,i){switch(i){case zr.Added:e=e.add(r);break;case zr.Modified:t=t.add(r);break;case zr.Removed:n=n.add(r);break;default:v("Encountered invalid change type: "+i)}})),new Xr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ii()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),ni=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ri(),this.pendingTargetResets=new xe(X)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Kt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Gt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Qr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Qr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Qr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),b(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Qr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Qr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:v("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):D(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new fe(i.path);this.removeDocumentFromTarget(t,o,new Gt(o,_e.forDeletedDoc()))}else b(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};D(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new fe(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Gt(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=qe();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===Tn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Jr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Pe(),this.pendingDocumentTargetMapping=ri(),this.pendingTargetResets=new xe(X),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?zr.Modified:zr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,zr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new ti),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new xe(X),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||m("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;b(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new ti,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function ri(){return new De(fe.comparator)}function ii(){return new De(fe.comparator)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi="RemoteStore",ai=function(){function e(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return a.__awaiter(o,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(oi,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Vr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Mr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(m(oi,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return m(oi,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Mr.Unknown),[2]}}))}))},e.prototype.listen=function(e){C(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){b(C(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),N(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Mr.Unknown))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){b(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new ni(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!N(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){return D(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return void 0===e&&b(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Mr.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Mr.Online),e instanceof ei&&e.state===Qr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof $r?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Zr?this.watchChangeAggregator.handleExistenceFilter(e):(b(e instanceof ei,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(_e.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;b(!e.isEqual(_e.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return D(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(T(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new kn(n.target,e,Tn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;b(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return C(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t;return a.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){b(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){b(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(Un)},e.prototype.onMutationResult=function(e,t){var n=this;b(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Ke.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){return void 0===e&&b(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]):[2]}))}))},e.prototype.handleHandshakeError=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return qr(e.code)?(m(oi,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=T(),[2,this.localStore.setLastStreamToken(T()).catch(Un)]):[2]}))}))},e.prototype.handleWriteError=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){return qr(i=e.code)&&i!==S.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},e.prototype.createTransaction=function(){return new Br(this.datastore)},e.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Mr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},e.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m(oi,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Mr.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),si=function(){function e(e,t){if(x("GeoPoint",arguments,2),P("GeoPoint","number",1,e),P("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new I(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new I(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return X(this._lat,e._lat)||X(this._long,e._long)},e}(),ci=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Bt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ui=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=di(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Wt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),li=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=di(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Wt(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),hi=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Pt&&this.operand instanceof Pt){var r=n.internalValue+this.operand.internalValue;return new Pt(r)}r=n.internalValue+this.operand.internalValue;return new Ot(r)},e.prototype.applyToRemoteDocument=function(e,t){return b(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Mt?e:new Pt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function di(e){return e instanceof Wt?e.internalValue.slice():[]}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi,pi,mi=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),gi=((fi={})[lr.ASCENDING.name]="ASCENDING",fi[lr.DESCENDING.name]="DESCENDING",fi),yi=((pi={})[rr.LESS_THAN.name]="LESS_THAN",pi[rr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",pi[rr.GREATER_THAN.name]="GREATER_THAN",pi[rr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",pi[rr.EQUAL.name]="EQUAL",pi[rr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",pi[rr.IN.name]="IN",pi[rr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",pi),vi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(e,t){b(!Xn(e),t+" is missing")}function wi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):v("can't parse "+e)}var Ti=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?S.UNKNOWN:Ur(e.code);return new I(t,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||Xn(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return Xn(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);b(!!e,"Cannot deserialize null or undefined timestamp.");var t=wi(e.seconds||"0"),n=e.nanos||0;return new Ce(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=vi.exec(e);if(b(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ce(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(b(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),re.fromBase64String(e)):(b(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),re.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return b(!!e,"Trying to deserialize version that isn't set"),_e.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=le.fromString(e);return b(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return b(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),b(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new fe(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?le.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new le(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new le(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return b(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof At)return{nullValue:"NULL_VALUE"};if(e instanceof xt)return{booleanValue:e.value()};if(e instanceof Pt)return{integerValue:""+e.value()};if(e instanceof Ot){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Rt?{stringValue:e.value()}:e instanceof Ut?{mapValue:this.toMapValue(e)}:e instanceof Wt?{arrayValue:this.toArrayValue(e)}:e instanceof jt?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof qt?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Ft?{bytesValue:this.toBytes(e.value())}:e instanceof Vt?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:v("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return At.INSTANCE;if("booleanValue"in e)return xt.of(e.booleanValue);if("integerValue"in e)return new Pt(wi(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Ot.NAN;if("Infinity"===e.doubleValue)return Ot.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Ot.NEGATIVE_INFINITY}return new Ot(e.doubleValue)}if("stringValue"in e)return new Rt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){bi(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Wt(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return bi(e.timestampValue,"timestampValue"),new jt(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){bi(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new qt(new si(r,i))}if("bytesValue"in e){bi(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Ft(o)}if("referenceValue"in e){bi(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new se(a.get(1),a.get(3)),c=new fe(this.extractLocalPathFromResourceName(a));return new Vt(s,c)}return v("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return b(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Kt(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=e,r=Ut.EMPTY;return k(n,(function(e,n){r=r.set(new de([e]),t.fromValue(n))})),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){var t=this;b(!!e.found,"Tried to deserialize a found document from a missing document."),bi(e.found.name,"doc.found.name"),bi(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Kt(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},e.prototype.fromMissing=function(e){b(!!e.missing,"Tried to deserialize a missing document from a found document."),b(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Gt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):v("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Qr.Added:return"ADD";case Qr.Current:return"CURRENT";case Qr.NoChange:return"NO_CHANGE";case Qr.Removed:return"REMOVE";case Qr.Reset:return"RESET";default:return v("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Zr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof $r){if(e.newDoc instanceof Kt){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Gt){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof ei){var n=void 0;return e.cause&&(n={code:Wr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return v("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){bi(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new ei(r,i,o,s||null)}else if("documentChange"in e){bi(e.documentChange,"documentChange");var c=e.documentChange;bi(c.document,"documentChange.name"),bi(c.document.name,"documentChange.document.name"),bi(c.document.updateTime,"documentChange.document.updateTime");var u=this.fromName(c.document.name),l=this.fromVersion(c.document.updateTime),h=new Kt(u,l,{},void 0,c.document,(function(e){return n.fromValue(e)})),d=c.targetIds||[],f=c.removedTargetIds||[];t=new $r(d,f,h.key,h)}else if("documentDelete"in e){bi(e.documentDelete,"documentDelete");var p=e.documentDelete;bi(p.document,"documentDelete.document");u=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):_e.forDeletedDoc(),h=new Gt(u,l),f=p.removedTargetIds||[];t=new $r([],f,h.key,h)}else if("documentRemove"in e){bi(e.documentRemove,"documentRemove");var m=e.documentRemove;bi(m.document,"documentRemove");u=this.fromName(m.document),f=m.removedTargetIds||[];t=new $r([],f,u,null)}else{if(!("filter"in e))return v("Unknown change type "+JSON.stringify(e));bi(e.filter,"filter");var g=e.filter;bi(g.targetId,"filter.targetId");var y=g.count||0,b=new mi(y),w=g.targetId;t=new Zr(w,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Qr.NoChange:"ADD"===e?Qr.Added:"REMOVE"===e?Qr.Removed:"CURRENT"===e?Qr.Current:"RESET"===e?Qr.Reset:v("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return _e.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?_e.MIN:t.readTime?this.fromVersion(t.readTime):_e.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof Et)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Dt)t={delete:this.toName(e.key)};else if(e instanceof Ct)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof _t))return v("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):St.NONE;if(e.update){bi(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new Ct(r,i,o,n)}return new Et(r,i,n)}if(e.delete){r=this.fromName(e.delete);return new Dt(r,n)}if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return b(!0===n.exists,'Transforms only support precondition "exists == true"'),new _t(r,a)}return v("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return b(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?St.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?St.exists(e.exists):St.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(_e.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new bt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(b(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof ci)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ui)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof li)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof hi)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw v("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=ci.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ui(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e){r=e.removeAllFromArray.values||[];n=new li(r.map((function(e){return t.fromValue(e)})))}else if("increment"in e){var i=this.fromValue(e.increment);b(i instanceof Mt,"NUMERIC_ADD transform requires a NumberValue"),n=new hi(i)}else v("Unknown transform proto: "+JSON.stringify(e));var o=de.fromServerFormat(e.fieldPath);return new vt(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;b(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return tr.atPath(this.fromQueryPath(n)).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(b(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(b(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var c=null;n.limit&&(c=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new tr(t,i,s,a,c,Zn.First,u,l).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Tn.Listen:return null;case Tn.ExistenceFilterMismatch:return"existence-filter-mismatch";case Tn.LimboResolution:return"limbo-document";default:return v("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof ir?t.toUnaryOrFieldFilter(e):v("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):v("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new hr(r,n)},e.prototype.toDirection=function(e){return gi[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return lr.ASCENDING;case"DESCENDING":return lr.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return yi[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return rr.EQUAL;case"GREATER_THAN":return rr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return rr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return rr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return rr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return rr.ARRAY_CONTAINS;case"IN":return rr.IN;case"ARRAY_CONTAINS_ANY":return rr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return v("Unspecified operator");default:return v("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return de.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new dr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return ir.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===rr.EQUAL){if(e.value.isEqual(Ot.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(At.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return ir.create(t,rr.EQUAL,Ot.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return ir.create(n,rr.EQUAL,At.INSTANCE);case"OPERATOR_UNSPECIFIED":return v("Unspecified filter");default:return v("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return de.fromServerFormat(e)}));return yt.fromArray(t)},e}(),Si=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},Ii=function(){function e(e){this.syncEngine=e,this.queries=new Ht((function(e){return e.canonicalId()})),this.onlineState=Mr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);(r||(n=!0,r=new Si,this.queries.set(t,r)),r.listeners.push(e),b(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return a.__generator(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,c=a.listeners;s<c.length;s++){c[s].onViewSnapshot(i)&&(t=!0)}a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++){o[i].applyOnlineStateChange(e)&&(t=!0)}})),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},e}(),Ei=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Mr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(b(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==zr.Metadata&&t.push(i)}e=new Yr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){if(b(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Mr.Offline;return this.options.waitForSyncWhenOnline&&n?(b(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Mr.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){b(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Ci=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=qe(),i=qe(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case zr.Added:r=r.add(s.doc.key);break;case zr.Removed:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),_i=function(e){this.key=e},Di=function(e){this.key=e},ki=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=qe(),this.mutatedKeys=qe(),this.documentSet=new Gr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Hr,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,c=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,u=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof Kt?t:null;h&&(b(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:zr.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:zr.Modified,doc:h}),p=!0,(c&&n.query.docComparator(h,c)>0||u&&n.query.docComparator(h,u)<0)&&(s=!0)):!l&&h?(r.track({type:zr.Added,doc:h}),p=!0):l&&!h&&(r.track({type:zr.Removed,doc:l}),p=!0,(c||u)&&(s=!0));p&&(h?(a=a.add(h),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:zr.Removed,doc:l})}return b(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;b(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case zr.Added:return 1;case zr.Modified:case zr.Metadata:return 2;case zr.Removed:return 0;default:return v("Unknown ChangeType: "+e)}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Kr.Synced:Kr.Local,c=s!==this.syncState;return this.syncState=s,0!==o.length||c?{snapshot:new Yr(this.query,e.documentSet,i,o,e.mutatedKeys,s===Kr.Local,c,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Mr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Hr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return b(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=qe(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new Di(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new _i(e))})),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=qe();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return Yr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Kr.Local)},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni=5,Ai=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=Ni,this.backoff=new xr(this.asyncQueue,ne.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return a.__generator(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!Xn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!qr(t)}return!1},e}(),xi=function(e,t,n){this.query=e,this.targetId=t,this.view=n},Mi=function(e){this.key=e,this.receivedDocument=!1},Li=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ht((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new De(fe.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new yr,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=lt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Mr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){b(null!==e,"SyncEngine listener cannot be null"),b(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,c,u;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=a.sent(),i=new ki(e,r.remoteKeys),o=i.computeDocChanges(r.documents),s=Xr.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Mr.Offline),b(0===(c=i.applyChanges(o,!0===this.isPrimary,s)).limboChanges.length,"View returned limbo docs before target ack from the server."),b(!!c.snapshot,"applyChanges for new view should always return a snapshot"),u=new xi(e,t,i),this.queryViewsByQuery.set(e,u),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,c.snapshot]}}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),b(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),(n=this.queriesByTarget[t.targetId]).length>1?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(Un)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},e.prototype.runTransaction=function(e,t,n){new Ai(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),k(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(b(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?b(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(b(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Lr.RemoteStore||!this.isPrimary&&t===Lr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);b(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,c=this;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new De(fe.comparator)).insert(r,new Gt(r,_e.forDeletedDoc())),o=qe().add(r),s=new Jr(_e.MIN,{},new xe(X),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return c.removeAndCleanupTarget(e,t)})).catch(Un)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(m("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):v("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.rejectFailedWrite=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Un(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.registerPendingWritesCallback=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||m("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}}))}))},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new I(S.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new De(X)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(b(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),b(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof _i)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof Di){m("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else v("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){m("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=tr.atPath(t.path);this.limboResolutionsByTarget[n]=new Mi(t),this.remoteStore.listen(new kn(r.toTarget(),n,Tn.LimboResolution,ce.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return a.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var c=Ci.fromSnapshot(s.targetId,a.snapshot);r.push(c)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){b(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,c,u=this;return a.__generator(this,(function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],c=Promise.resolve(),D(this.queriesByTarget,(function(e,t){u.sharedClientState.isLocalQueryTarget(e)?s.push(e):c=c.then((function(){return u.removeAndCleanupTarget(e),u.localStore.releaseTarget(e,!0)})),u.remoteStore.unlisten(e)})),[4,c]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;D(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new De(fe.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,c,u,l,h,d,f,p;return a.__generator(this,(function(a){switch(a.label){case 0:t=[],n=[],r=0,i=e,a.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(c=this.queriesByTarget[o])&&0!==c.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return a.sent(),[4,this.localStore.allocateTarget(c[0].toTarget())];case 3:s=a.sent(),u=0,l=c,a.label=4;case 4:return u<l.length?(h=l[u],b(!!(d=this.queryViewsByQuery.get(h)),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(d)]):[3,7];case 5:(f=a.sent()).snapshot&&n.push(f.snapshot),a.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return b(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return b(!!(p=a.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:a.sent(),a.label=12;case 12:t.push(s),a.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},e.prototype.synthesizeTargetToQuery=function(e){return new tr(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Zn.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i;return a.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return m("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=Jr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:v("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,c,u,l,h,d=this;return a.__generator(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(h=r[n],b(!this.queriesByTarget[h],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return b(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(e){return a.__generator(this,(function(t){switch(t.label){case 0:return c.queriesByTarget[e]?[4,c.localStore.releaseTarget(e,!1).then((function(){d.remoteStore.unlisten(e),d.removeAndCleanupTarget(e)})).catch(Un)]:[2,"continue"];case 1:return t.sent(),[2]}}))},c=this,u=0,l=t,f.label=7;case 7:return u<l.length?(h=l[u],[5,s(h)]):[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return qe().add(t.key);var n=qe(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);b(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},e}(),Pi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Oi="firestore_clients";function Ri(e,t){return b(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Oi+"_"+e+"_"+t}var ji="firestore_mutations";function Bi(e,t,n){var r=ji+"_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}var Fi="firestore_targets";function Vi(e,t){return Fi+"_"+e+"_"+t}var qi="firestore_online_state";var Ui="firestore_sequence_number";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wi="SharedClientState",zi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,b(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new I(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(g(Wi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ki=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,b(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new I(r.error.code,r.error.message)),i?new e(t,r.state,o):(g(Wi,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Gi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=We(),a=0;i&&a<r.activeTargetIds.length;++a)i=$n(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(g(Wi,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Qi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in Mr&&"string"==typeof n.clientId?new e(n.clientId,Mr[n.onlineState]):(g(Wi,"Failed to parse online state: "+t),null)},e}(),Hi=function(){function e(){this.activeTargetIds=We()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Yi=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new I(S.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=Ri(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return Ui+"_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new Hi,this.clientStateKeyRe=new RegExp("^"+Oi+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+ji+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Fi+"_"+a+"_(\\d+)$"),this.onlineStateKey=function(e){return qi+"_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,c,u,l,h,d=this;return a.__generator(this,(function(a){switch(a.label){case 0:return b(!this.started,"WebStorageSharedClientState already started"),b(null!==this.syncEngine,"syncEngine property must be set before calling start()"),b(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(Ri(this.persistenceKey,r)))&&(o=Gi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(c=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(c),u=0,l=this.earlyEvents;u<l.length;u++)h=l[u],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return d.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=We();return k(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Vi(this.persistenceKey,e));if(n){var r=Ki.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Vi(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return m(Wi,"READ",e,t),t},e.prototype.setItem=function(e,t){m(Wi,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){m(Wi,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(m(Wi,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r,i,o,s;return a.__generator(this,(function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(b(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=ce.INVALID;if(null!=e)try{var n=JSON.parse(e);b("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){g(Wi,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==ce.INVALID&&this.sequenceNumberHandler(s));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new zi(this.currentUser,e,t,n),i=Bi(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=Bi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Mr[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=Vi(this.persistenceKey,e),i=new Ki(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return b(null!==n,"Cannot parse client state key '"+e+"'"),Gi.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);b(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zi.fromWebStorageEntry(new Pi(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);b(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Ki.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Qi.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(m(Wi,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return i.has(e)||s.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,s)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();var Ji=function(){function e(){this.localState=new Hi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Hi,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Xi=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return Ln.withCacheSize(this.cacheSizeBytes)},e}(),$i=function(){},Zi=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=J.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new pe,r=new pe,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Xi?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof I?e.code===S.FAILED_PRECONDITION||e.code===S.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new I(S.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=qn.buildStoragePrefix(this.databaseInfo),i=new Ti(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return a.__awaiter(n,void 0,void 0,(function(){var n,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Yi.isAvailable(this.platform))throw new I(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Yi(this.asyncQueue,this.platform,r,this.clientId,e):new Ji,[4,qn.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=Er.createEagerPersistence(this.clientId),this.sharedClientState=new Ji,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return m("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return a.__awaiter(n,void 0,void 0,(function(){var n,i,o,s,c,u,l=this;return a.__generator(this,(function(h){switch(h.label){case 0:return n=new mr,this.localStore=new br(this.persistence,n,e),[4,this.localStore.start()];case 1:return h.sent(),t&&(this.lruScheduler=new Pn(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),s=new jr(this.asyncQueue,r,this.credentials,o),c=function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.RemoteStore)},u=function(e){return l.syncEngine.applyOnlineStateChange(e,Lr.SharedClientState)},this.remoteStore=new ai(this.localStore,s,this.asyncQueue,c,i),this.syncEngine=new Li(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Ii(this.syncEngine),[4,this.sharedClientState.start()];case 2:return h.sent(),[4,this.remoteStore.start()];case 3:return h.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return h.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return h.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),m("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new pe;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new Ei(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Kt)return e;if(e instanceof Gt)return null;throw new I(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new ki(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},e}(),eo=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),to=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+Y(r,"element")+".")}("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(P("FieldPath","string",n,e[n]),0===e[n].length)throw new I(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(de.keyField().canonicalString()),e}(),no=new RegExp("[~\\*/\\[\\]]");
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ro=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},io=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Pi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){b(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),oo=function(){function e(e){var t=this;this.tokenListener=null,this.currentUser=Pi.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}return e.prototype.getToken=function(){var e=this;b(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new I(S.ABORTED,"getToken aborted due to token change.");return n?(b("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new ro(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){b(null!=this.tokenListener,"removeChangeListener() called twice"),b(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return b(null===e||"string"==typeof e,"Received invalid UID: "+e),new Pi(e)},e}(),ao=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Pi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),so=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new ao(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Pi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function co(e){if(!e)return new io;switch(e.type){case"gapi":var t=e.client;return b(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new so(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new I(S.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}var lo,ho=function(){function e(e){this._methodName=e}return e.delete=function(){return A("FieldValue.delete",arguments),fo.instance},e.serverTimestamp=function(){return A("FieldValue.serverTimestamp",arguments),po.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M("FieldValue.arrayUnion",arguments,1),new mo(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M("FieldValue.arrayRemove",arguments,1),new go(e)},e.increment=function(e){return P("FieldValue.increment","number",1,e),x("FieldValue.increment",arguments,1),new yo(e)},e.prototype.isEqual=function(e){return this===e},e}(),fo=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return a.__extends(t,e),t.instance=new t,t}(ho),po=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(t,e),t.instance=new t,t}(ho),mo=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return a.__extends(t,e),t}(ho),go=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return a.__extends(t,e),t}(ho),yo=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return a.__extends(t,e),t}(ho),vo=E(ho,"Use FieldValue.<field>() instead."),bo=/^__.*__$/,wo=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Ct(e,this.data,this.fieldMask,t)):n.push(new Et(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new _t(e,this.fieldTransforms)),n},e}(),To=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new Ct(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new _t(e,this.fieldTransforms)),n},e}();function So(e){switch(e){case lo.Set:case lo.MergeSet:case lo.Update:return!0;case lo.Argument:case lo.ArrayArgument:return!1;default:throw v("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e[e.ArrayArgument=4]="ArrayArgument"}(lo||(lo={}));var Io=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new I(S.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(So(this.dataSource)&&bo.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),Eo=function(e,t){this.databaseId=e,this.key=t},Co=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new Io(lo.Set,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new wo(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new Io(lo.MergeSet,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new xe(de.comparator),c=0,u=n;c<u.length;c++){var l=u[c],h=void 0;if(l instanceof to)h=l._internalPath;else{if("string"!=typeof l)throw v("Expected stringOrFieldPath to be a string or a FieldPath");h=No(e,l)}if(!r.contains(h))throw new I(S.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=yt.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=yt.fromArray(r.fieldMask),o=r.fieldTransforms;return new wo(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new Io(lo.Update,e,de.EMPTY_PATH);Do("Data must be an object, but it was:",r,t);var i=new xe(de.comparator),o=Ut.EMPTY;k(t,(function(t,a){var s=No(e,t),c=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,c))instanceof fo)i=i.add(s);else{var u=n.parseData(a,c);null!=u&&(i=i.add(s),o=o.set(s,u))}}));var a=yt.fromSet(i);return new To(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Io(lo.Update,e,de.EMPTY_PATH),o=[ko(e,t)],a=[n];if(r.length%2!=0)throw new I(S.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(ko(e,r[s])),a.push(r[s+1]);var c=new xe(de.comparator),u=Ut.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),d=this.runPreConverter(a[s],h);if(d instanceof fo)c=c.add(l);else{var f=this.parseData(d,h);null!=f&&(c=c.add(l),u=u.set(l,f))}}var p=yt.fromSet(c);return new To(u,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new Io(n?lo.ArrayArgument:lo.Argument,e,de.EMPTY_PATH),i=this.parseData(t,r);return b(null!=i,"Parsed data should not be null."),b(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Ao(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(_o(e=this.runPreConverter(e,t)))return Do("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof ho)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==lo.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new De(X);return N(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):k(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new Ut(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=At.INSTANCE),n.push(s),r++}return new Wt(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!So(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof fo){if(t.dataSource!==lo.MergeSet)throw t.dataSource===lo.Update?(b(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof po)t.fieldTransforms.push(new vt(t.path,ci.instance));else if(e instanceof mo){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ui(n);t.fieldTransforms.push(new vt(t.path,r))}else if(e instanceof go){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new li(n);t.fieldTransforms.push(new vt(t.path,i))}else if(e instanceof yo){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new hi(o);t.fieldTransforms.push(new vt(t.path,a))}else v("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return At.INSTANCE;if("number"==typeof e)return $n(e)?new Pt(e):new Ot(e);if("boolean"==typeof e)return xt.of(e);if("string"==typeof e)return new Rt(e);if(e instanceof Date)return new jt(Ce.fromDate(e));if(e instanceof Ce)return new jt(new Ce(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof si)return new qt(e);if(e instanceof re)return new Ft(e);if(e instanceof Eo)return new Vt(e.databaseId,e.key);throw t.createError("Unsupported field value: "+W(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new Io(lo.Argument,e,de.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},e}();function _o(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ce||e instanceof si||e instanceof re||e instanceof Eo||e instanceof ho)}function Do(e,t,n){if(!_o(n)||!U(n)){var r=W(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function ko(e,t){if(t instanceof to)return t._internalPath;if("string"==typeof t)return No(e,t);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function No(e,t){try{return function(e){if(e.search(no)>=0)throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(to.bind.apply(to,a.__spreadArrays([void 0],e.split("."))))}catch(t){throw new I(S.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Ao(t);throw new I(S.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Ao(e){return e instanceof Error?e.message:e.toString()}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xo="firestore.googleapis.com",Mo=!0,Lo=!0,Po=!1,Oo=Ln.COLLECTION_DISABLED,Ro=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new I(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xo,this.ssl=Mo}else R("settings","non-empty string","host",e.host),this.host=e.host,j("settings","boolean","ssl",e.ssl),this.ssl=_(e.ssl,Mo);if(K("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),j("settings","object","credentials",e.credentials),this.credentials=e.credentials,j("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=_(e.timestampsInSnapshots,Lo),j("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ln.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Oo&&e.cacheSizeBytes<Ln.MINIMUM_CACHE_SIZE_BYTES)throw new I(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ln.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}j("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?Po:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),jo=function(){function e(t,n){var r=this;if(this._firebaseApp=null,this._queue=new ge,this.INTERNAL={delete:function(){return a.__awaiter(r,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof t.options){var i=t;this._firebaseApp=i,this._databaseId=e.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new oo(n)}else{var o=t;if(!o.projectId)throw new I(S.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new se(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new io}this._settings=new Ro({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(x("Firestore.settings",arguments,1),P("Firestore.settings","object",1,e),C(e,"persistence"))throw new I(S.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Ro(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new I(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=co(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new I(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=_(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Xi(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=qn.buildStoragePrefix(this.makeDatabaseInfo()),n=new pe;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){var e;return a.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new I(S.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,qn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),uo(e))return this.onSnapshotsInSyncInternal(e);P("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new eo({next:function(){e.next&&e.next()},error:function(e){throw v("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new $i),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new oe(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){b(!!this._settings.host,"FirestoreSettings.host is not set"),b(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Zi(w.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new Co((function(t){if(t instanceof Vo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new I(S.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Eo(e,t._key)}return t}))},e.databaseIdFromApp=function(e){var t=e.options;if(!C(t,"projectId"))throw new I(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new I(S.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new se(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new I(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return x("Firestore.collection",arguments,1),P("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Go(le.fromString(e),this)},e.prototype.doc=function(e){return x("Firestore.doc",arguments,1),P("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Vo.forPath(le.fromString(e),this)},e.prototype.collectionGroup=function(e){if(x("Firestore.collectionGroup",arguments,1),P("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new I(S.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new zo(new tr(le.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return x("Firestore.runTransaction",arguments,1),P("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new Bo(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new Fo(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(f()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return v("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(x("Firestore.setLogLevel",arguments,1),P("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(i.DEBUG);break;case"error":p(i.ERROR);break;case"silent":p(i.SILENT);break;default:throw new I(S.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Bo=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;x("Transaction.get",arguments,1);var n=Jo("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return v("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Gt)return new Uo(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Kt)return new Uo(t._firestore,n._key,r,!1,!1,n._converter);throw v("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){L("Transaction.set",arguments,2,3);var r=Jo("Transaction.set",e,this._firestore);n=Qo("Transaction.set",n);var i=$o(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof to?(M("Transaction.update",arguments,3),r=Jo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(x("Transaction.update",arguments,2),r=Jo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){x("Transaction.delete",arguments,1);var t=Jo("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Fo=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){L("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Jo("WriteBatch.set",e,this._firestore);n=Qo("WriteBatch.set",n);var i=$o(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,St.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof t||t instanceof to?(M("WriteBatch.update",arguments,3),r=Jo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(x("WriteBatch.update",arguments,2),r=Jo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,St.exists(!0))),this},e.prototype.delete=function(e){x("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Jo("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Dt(t._key,St.NONE)),this},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new I(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Vo=function(){function e(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n,r){if(t.length%2!=0)throw new I(S.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new fe(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Go(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(x("DocumentReference.collection",arguments,1),P("DocumentReference.collection","non-empty string",1,e),!e)throw new I(S.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=le.fromString(e);return new Go(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},e.prototype.set=function(e,t){L("DocumentReference.set",arguments,1,2),t=Qo("DocumentReference.set",t);var n=$o(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,St.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof to?(M("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(x("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,St.exists(!0)))},e.prototype.delete=function(){return x("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Dt(this._key,St.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||uo(e[i])||(K("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),j("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return uo(e[i])?n=e[i]:(P("DocumentReference.onSnapshot","function",i,e[i]),O("DocumentReference.onSnapshot","function",i+1,e[i+1]),O("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new eo({next:function(e){if(t.next){b(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Uo(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(tr.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return L("DocumentReference.get",arguments,0,1),Yo("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new Uo(t.firestore,t._key,e,!0,e instanceof Kt&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new I(S.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new I(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e.prototype.withConverter=function(t){return new e(this._key,this.firestore,t)},e}(),qo=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Uo=function(){function e(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}return e.prototype.data=function(e){if(L("DocumentSnapshot.data",arguments,0,1),e=Ho("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new Wo(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),kt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},e.prototype.get=function(e,t){if(L("DocumentSnapshot.get",arguments,1,2),t=Ho("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(ko("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,kt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Vo(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new qo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},e.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},e.prototype.toJSValue=function(e,t){if(e instanceof Ut)return this.toJSObject(e,t);if(e instanceof Wt)return this.toJSArray(e,t);if(e instanceof Vt){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Vo(n,this._firestore,this._converter)}return e.value(t)},e.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},e}(),Wo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return b(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Uo),zo=function(){function e(e,t,n){this._query=e,this.firestore=t,this._converter=n}return e.prototype.where=function(t,n,r){x("Query.where",arguments,3),z("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];V("Query.where",o,2,n);var a=ko("Query.where",t),s=rr.fromString(n);if(a.isKeyField()){if(s===rr.ARRAY_CONTAINS||s===rr.ARRAY_CONTAINS_ANY)throw new I(S.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===rr.IN){this.validateDisjunctiveFilterElements(r,s);for(var c=[],u=0,l=r;u<l.length;u++){var h=l[u];c.push(this.parseDocumentIdValue(h))}i=new Wt(c)}else i=this.parseDocumentIdValue(r)}else s!==rr.IN&&s!==rr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,s===rr.IN);var d=ir.create(a,s,i);return this.validateNewFilter(d),new e(this._query.addFilter(d),this.firestore,this._converter)},e.prototype.orderBy=function(t,n){var r;if(L("Query.orderBy",arguments,1,2),O("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=lr.ASCENDING;else{if("desc"!==n)throw new I(S.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=lr.DESCENDING}if(null!==this._query.startAt)throw new I(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new I(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=ko("Query.orderBy",t),o=new dr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore,this._converter)},e.prototype.limit=function(t){return x("Query.limit",arguments,1),P("Query.limit","number",1,t),Q("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore,this._converter)},e.prototype.limitToLast=function(t){return x("Query.limitToLast",arguments,1),P("Query.limitToLast","number",1,t),Q("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore,this._converter)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];M("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.withConverter=function(t){return new e(this._query,this.firestore,t)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(z(e,1,t),t instanceof Uo){if(n.length>0)throw new I(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new I(S.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Vt(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Bt)throw new I(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var c=a.field.canonicalString();throw new I(S.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}r.push(s)}}return new hr(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new I(S.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new I(S.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(le.fromString(a));if(!fe.isDocumentKey(s))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var c=new fe(s);i.push(new Vt(this.firestore._databaseId,c))}else{var u=this.firestore._dataConverter.parseQueryValue(e,a);i.push(u)}}return new hr(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];L("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||uo(e[i])||(K("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),j("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),uo(e[i])?n=e[i]:(P("Query.onSnapshot","function",i,e[i]),O("Query.onSnapshot","function",i+1,e[i+1]),O("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new eo({next:function(e){t.next&&t.next(new Ko(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new I(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return L("Query.get",arguments,0,1),Yo("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new Ko(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new I(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(le.fromString(e));if(!fe.isDocumentKey(t))throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Vt(this.firestore._databaseId,new fe(t))}if(e instanceof Vo){var n=e;return new Vt(this.firestore._databaseId,n._key)}throw new I(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+W(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new I(S.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new I(S.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof ir){var t=[rr.ARRAY_CONTAINS,rr.ARRAY_CONTAINS_ANY],n=[rr.IN,rr.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new I(S.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new I(S.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new I(S.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new I(S.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Ko=function(){function e(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new qo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;L("QuerySnapshot.forEach",arguments,1,2),P("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new zo(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(K("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),j("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new I(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new Wo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return b(t.type===zr.Added,"Invalid event type for first snapshot"),b(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==zr.Metadata})).map((function(t){var i=new Wo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==zr.Added&&(b((o=a.indexOf(t.doc.key))>=0,"Index for document not found"),a=a.delete(t.doc.key)),t.type!==zr.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:Xo(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},e.prototype.convertToDocumentImpl=function(e){return new Wo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},e}();a.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(Ko.prototype.docChanges,e,{get:function(){return function(){throw new I(S.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var Go=function(e){function t(t,n,r){var i=e.call(this,tr.atPath(t),n,r)||this;if(i._path=t,t.length%2!=1)throw new I(S.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return i}return a.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Vo(new fe(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(L("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=J.newId()),P("CollectionReference.doc","non-empty string",1,e),""===e)throw new I(S.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=le.fromString(e);return Vo.forPath(this._query.path.child(t),this.firestore,this._converter)},t.prototype.add=function(e){x("CollectionReference.add",arguments,1),P("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},t.prototype.withConverter=function(e){return new t(this._path,this.firestore,e)},t}(zo);function Qo(e,t){if(void 0===t)return{merge:!1};if(K(e,t,["merge","mergeFields"]),j(e,"boolean","merge",t.merge),B(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(e){return"string"==typeof e||e instanceof to})),void 0!==t.mergeFields&&void 0!==t.merge)throw new I(S.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Ho(e,t){return void 0===t?{}:(K(e,t,["serverTimestamps"]),F(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Yo(e,t){O(e,"object",1,t),t&&(K(e,t,["source"]),F(e,0,"source",t.source,["default","server","cache"]))}function Jo(e,t,n){if(t instanceof Vo){if(t.firestore!==n)throw new I(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw G(e,"DocumentReference",1,t)}function Xo(e){switch(e){case zr.Added:return"added";case zr.Modified:case zr.Metadata:return"modified";case zr.Removed:return"removed";default:return v("Unknown change type: "+e)}}function $o(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Zo=E(jo,"Use firebase.firestore() instead."),ea=E(Bo,"Use firebase.firestore().runTransaction() instead."),ta=E(Fo,"Use firebase.firestore().batch() instead."),na=E(Vo,"Use firebase.firestore().doc() instead."),ra=E(Uo),ia=E(Wo),oa=E(zo),aa=E(Ko),sa=E(Go,"Use firebase.firestore().collection() instead."),ca={Firestore:Zo,GeoPoint:si,Timestamp:Ce,Blob:ie,Transaction:ea,WriteBatch:ta,DocumentReference:na,DocumentSnapshot:ra,Query:oa,QueryDocumentSnapshot:ia,QuerySnapshot:aa,CollectionReference:sa,FieldPath:to,FieldValue:vo,setLogLevel:jo.setLogLevel,CACHE_SIZE_UNLIMITED:Oo};function ua(e){e.INTERNAL.registerComponent(new u.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new jo(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){b(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(ca)))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var la=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),ha=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){m("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(0)}},e.prototype.onNetworkUnavailable=function(){m("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(1)}},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),da=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){b(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){b(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){b(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){b(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){b(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){b(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),fa="Connection",pa={BatchGetDocuments:"batchGet",Commit:"commit"},ma="gl-js/ fire/"+h,ga=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=ma},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,s){var c=new l.XhrIo;c.listenOnce(l.EventType.COMPLETE,(function(){try{switch(c.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var t=c.getResponseJson();m(fa,"XHR received:",JSON.stringify(t)),o(t);break;case l.ErrorCode.TIMEOUT:m(fa,'RPC "'+e+'" timed out'),s(new I(S.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=c.getStatus();if(m(fa,'RPC "'+e+'" failed with status:',n,"response text:",c.getResponseText()),n>0){var r=c.getResponseJson().error;if(r&&r.status&&r.message){var i=(a=r.status,u=a.toLowerCase().replace("_","-"),Object.values(S).indexOf(u)>=0?u:S.UNKNOWN);s(new I(i,r.message))}else s(new I(S.UNKNOWN,"Server responded with status "+c.getStatus()))}else m(fa,'RPC "'+e+'" failed'),s(new I(S.UNAVAILABLE,"Connection failed."));break;default:v('RPC "'+e+'" failed with unanticipated webchannel error '+c.getLastErrorCode()+": "+c.getLastError()+", giving up.")}}finally{m(fa,'RPC "'+e+'" completed.')}var a,u}));var u=a.__assign({},t);delete u.database;var h=JSON.stringify(u);m(fa,"XHR sending: ",i+" "+h);var d={"Content-Type":"text/plain"};r.modifyHeadersForRequest(d,n),c.send(i,"POST",h,d,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=l.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),c.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");m(fa,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,u=!1,h=new da({sendFn:function(e){u?m(fa,"Not sending because WebChannel is closed:",e):(s||(m(fa,"Opening WebChannel transport."),a.open(),s=!0),m(fa,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),d=function(e,t){a.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(l.WebChannel.EventType.OPEN,(function(){u||m(fa,"WebChannel transport opened.")})),d(l.WebChannel.EventType.CLOSE,(function(){u||(u=!0,m(fa,"WebChannel transport closed"),h.callOnClose())})),d(l.WebChannel.EventType.ERROR,(function(e){u||(u=!0,m(fa,"WebChannel transport errored:",e),h.callOnClose(new I(S.UNAVAILABLE,"The operation could not be completed")))})),d(l.WebChannel.EventType.MESSAGE,(function(e){var t;if(!u){var n=e.data[0];b(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){m(fa,"WebChannel received error:",i);var o=i.status,s=function(e){var t=Fr[e];if(void 0!==t)return Ur(t)}(o),c=i.message;void 0===s&&(s=S.INTERNAL,c="Unknown error status: "+o+" with message "+i.message),u=!0,h.callOnClose(new I(s,c)),a.close()}else m(fa,"WebChannel received:",n),h.callOnMessage(n)}})),setTimeout((function(){h.callOnOpen()}),0),h},e.prototype.makeUrl=function(e){var t=pa[e];return b(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}(),ya=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new ga(e))},e.prototype.newConnectivityMonitor=function(){return ha.isAvailable()?new ha:new la},e.prototype.newSerializer=function(e){return new Ti(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
w.setPlatform(new ya);var va="@firebase/firestore",ba="1.9.1";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wa(e){ua(e),e.registerVersion(va,ba)}wa(o),t.registerFirestore=wa}).call(this,n(17))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return ur})),n.d(t,"EventType",(function(){return lr})),n.d(t,"WebChannel",(function(){return hr})),n.d(t,"XhrIo",(function(){return dr})),n.d(t,"createWebChannelTransport",(function(){return cr}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function c(e){return"number"==typeof e}function u(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function d(e){return"array"==h(e)}function f(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now||function(){return+new Date};function S(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function I(){this.j=this.j,this.i=this.i}I.prototype.j=!1,I.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[m]||(this[m]=++g)},I.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},C=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function _(e){return Array.prototype.concat.apply([],arguments)}function D(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e){return/^[\s\xa0]*$/.test(e)}var N,A=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function x(e,t){return-1!=e.indexOf(t)}function M(e,t){return e<t?-1:e>t?1:0}e:{var L=a.navigator;if(L){var P=L.userAgent;if(P){N=P;break e}}N=""}function O(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function R(e){var t,n={};for(t in e)n[t]=e[t];return n}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){return F[" "](e),e}F[" "]=l;var V,q,U=x(N,"Opera"),W=x(N,"Trident")||x(N,"MSIE"),z=x(N,"Edge"),K=z||W,G=x(N,"Gecko")&&!(x(N.toLowerCase(),"webkit")&&!x(N,"Edge"))&&!(x(N,"Trident")||x(N,"MSIE"))&&!x(N,"Edge"),Q=x(N.toLowerCase(),"webkit")&&!x(N,"Edge");function H(){var e=a.document;return e?e.documentMode:void 0}e:{var Y="",J=(q=N,G?/rv:([^\);]+)(\)|;)/.exec(q):z?/Edge\/([\d\.]+)/.exec(q):W?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):Q?/WebKit\/(\S+)/.exec(q):U?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(J&&(Y=J?J[1]:""),W){var X=H();if(null!=X&&X>parseFloat(Y)){V=String(X);break e}}V=Y}var $,Z={};function ee(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=A(String(V)).split("."),r=A(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=M(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||M(0==a[2].length,0==s[2].length)||M(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var te=a.document;$=te&&W?H()||("CSS1Compat"==te.compatMode?parseInt(V,10):5):void 0;var ne=!W||9<=Number($),re=W&&!ee("9"),ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(e){}return e}();function oe(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function ae(e,t){if(oe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(G){e:{try{F(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:se[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}oe.prototype.b=function(){this.Ia=!1},S(ae,oe);var se={2:"touch",3:"pen",4:"mouse"};ae.prototype.b=function(){ae.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,re)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var ce="closure_listenable_"+(1e6*Math.random()|0),ue=0;function le(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ue,this.X=this.Z=!1}function he(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function de(e){this.src=e,this.a={},this.b=0}function fe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(he(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function pe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}de.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=pe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new le(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ge={};function ye(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(d(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ce(r),t&&t[ce]?t.Aa(n,r,p(i)?!!i.capture:!!i,o):ve(t,n,r,!0,i,o)}(e,t,n,r,i);if(d(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Ce(n),e&&e[ce]?e.za(t,n,p(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!ne)return null;var s=Ie(e);if(s||(e[me]=s=new de(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Se,t=ne?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ie||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function be(e){if(!c(e)&&e&&!e.X){var t=e.src;if(t&&t[ce])fe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ie(t))?(fe(n,e),0==n.b&&(n.src=null,t[me]=null)):he(e)}}}function we(e){return e in ge?ge[e]:ge[e]="on"+e}function Te(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&be(e),n.call(r,t)}function Se(e,t){return!!e.X||(ne?Te(e,new ae(t,this)):Te(e,t=new ae(t||u("window.event"),this)))}function Ie(e){return(e=e[me])instanceof de?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(e){return"function"==h(e)?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function _e(){I.call(this),this.c=new de(this),this.J=this,this.B=null}function De(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,c=a.da||a.src;a.Z&&fe(e.c,a),i=!1!==s.call(c,r)&&i}}return i&&0!=r.Ia}S(_e,I),_e.prototype[ce]=!0,(r=_e.prototype).addEventListener=function(e,t,n,r){ye(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(d(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Ce(r),t&&t[ce]?(t=t.c,(n=String(n).toString())in t.a&&(-1<(r=pe(a=t.a[n],r,i,o))&&(he(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--)))):t&&(t=Ie(t))&&(n=t.a[n.toString()],t=-1,n&&(t=pe(n,r,i,o)),(r=-1<t?n[t]:null)&&be(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new oe(e,n);else if(e instanceof oe)e.target=e.target||n;else{var i=e;B(e=new oe(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=De(a,r,!0,e)&&i}if(i=De(a=e.a=n,r,!0,e)&&i,i=De(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=De(a=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(_e.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)he(n[r]);delete t.a[e],t.b--}}this.B=null},r.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var ke=a.JSON.stringify;function Ne(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ae(){this.b=this.a=null}Ne.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var xe,Me=new Ne((function(){return new Pe}),(function(e){e.reset()}));function Le(){var e=Be,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Pe(){this.next=this.b=this.a=null}function Oe(e){a.setTimeout((function(){throw e}),0)}function Re(e,t){xe||function(){var e=a.Promise.resolve(void 0);xe=function(){e.then(Fe)}}(),je||(xe(),je=!0),Be.add(e,t)}Ae.prototype.add=function(e,t){var n=Me.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Pe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var je=!1,Be=new Ae;function Fe(){for(var e;e=Le();){try{e.a.call(e.b)}catch(e){Oe(e)}var t=Me;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}je=!1}function Ve(e,t){_e.call(this),this.b=e||1,this.a=t||a,this.f=b(this.fb,this),this.g=T()}function qe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function Ue(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function We(e,t,n){I.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.$a,this),this.a=[]}function ze(e){e.U=Ue(e.b,e.c),e.f.apply(null,e.a)}function Ke(e){I.call(this),this.b=e,this.a={}}S(Ve,_e),(r=Ve.prototype).ba=!1,r.L=null,r.fb=function(){if(this.ba){var e=T()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(qe(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=T())},r.G=function(){Ve.N.G.call(this),qe(this),delete this.a},S(We,I),(r=We.prototype).ea=!1,r.U=null,r.Ta=function(e){this.a=arguments,this.U?this.ea=!0:ze(this)},r.G=function(){We.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,ze(this))},S(Ke,I);var Ge=[];function Qe(e,t,n,r){d(n)||(n&&(Ge[0]=n.toString()),n=Ge);for(var i=0;i<n.length;i++){var o=ye(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function He(e){O(e.a,(function(e,t){this.a.hasOwnProperty(t)&&be(e)}),e),e.a={}}function Ye(){}Ke.prototype.G=function(){Ke.N.G.call(this),He(this)},Ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=new _e;function Xe(e){oe.call(this,"serverreachability",e)}function $e(e){Je.dispatchEvent(new Xe(Je,e))}function Ze(e){oe.call(this,"statevent",e)}function et(e){Je.dispatchEvent(new Ze(Je,e))}function tt(e){oe.call(this,"timingevent",e)}function nt(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}S(Xe,oe),S(Ze,oe),S(tt,oe);var rt={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},it={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function ot(){}function at(e){var t;return(t=e.a)||(t=e.a={}),t}function st(){}ot.prototype.a=null;var ct,ut={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function lt(){oe.call(this,"d")}function ht(){oe.call(this,"c")}function dt(){}function ft(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new Ke(this),this.O=pt,e=K?125:void 0,this.P=new Ve(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}S(lt,oe),S(ht,oe),S(dt,ot),ct=new dt;var pt=45e3,mt={},gt={};function yt(e,t,n){e.F=1,e.f=Ut(Ot(t)),e.l=n,e.H=!0,bt(e,null)}function vt(e,t,n,r){e.F=1,e.f=Ut(Ot(t)),e.l=null,e.H=n,bt(e,r)}function bt(e,t){e.v=T(),St(e),e.D=Ot(e.f),qt(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new We(b(e.Ja,e,e.a),e.J)),Qe(e.I,e.a,"readystatechange",e.cb),t=e.h?R(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),$e(1)}function wt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=Tt(e,n);if(i==gt){4==t&&(e.c=4,et(14),r=!1);break}if(i==mt){e.c=4,et(15),r=!1;break}Dt(e,i)}4==t&&0==n.length&&(e.c=1,et(16),r=!1),e.b=e.b&&r,r||(_t(e),Ct(e))}function Tt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?gt:(n=Number(t.substring(n,r)),isNaN(n)?mt:(r+=1)+n>t.length?gt:(t=t.substr(r,n),e.A=r+n,t))}function St(e){e.R=T()+e.O,It(e,e.O)}function It(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=nt(b(e.ab,e),t)}function Et(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function Ct(e){e.g.Ca()||e.m||e.g.na(e)}function _t(e){Et(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,qe(e.P),He(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Dt(e,t){try{e.g.Fa(e,t),$e(4)}catch(e){}}function kt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||s(e))C(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(f(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Nt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Nt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function At(e,t){Mt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&xt(e))}function xt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Mt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Mt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Mt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ft.prototype).setTimeout=function(e){this.O=e},r.cb=function(e){e=e.target;var t=this.B;t&&3==On(e)?t.Ta():this.Ja(e)},r.Ja=function(e){try{if(e==this.a)e:{var t=On(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!K&&!this.a.aa())){this.m||4!=t||7==n||$e(8==n||0>=r?3:2),Et(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=Rn(this.a,"X-HTTP-Initial-Response");if(a&&!k(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,et(12),_t(this),Ct(this);break e}this.s=!0,Dt(this,s)}this.H?(wt(this,t,o),K&&this.b&&3==t&&(Qe(this.I,this.P,"tick",this.bb),this.P.start())):Dt(this,o),4==t&&_t(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,St(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,et(12)):(this.c=0,et(13)),_t(this),Ct(this)}}}catch(e){}},r.bb=function(){if(this.a){var e=On(this.a),t=this.a.aa();this.A<t.length&&(Et(this),wt(this,e,t),this.b&&4!=e&&St(this))}},r.cancel=function(){this.m=!0,_t(this)},r.ab=function(){this.i=null;var e=T();0<=e-this.R?(2!=this.F&&($e(3),et(17)),_t(this),this.c=2,Ct(this)):It(this,this.R-e)},(r=Nt.prototype).C=function(){xt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return xt(this),this.a.concat()},r.get=function(e,t){return Mt(this.b,e)?this.b[e]:t},r.set=function(e,t){Mt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Lt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Pt?(this.h=void 0!==t?t:e.h,Rt(this,e.f),this.j=e.j,jt(this,e.b),Bt(this,e.i),this.a=e.a,Ft(this,nn(e.c)),this.g=e.g):e&&(n=String(e).match(Lt))?(this.h=!!t,Rt(this,n[1]||"",!0),this.j=Wt(n[2]||""),jt(this,n[3]||"",!0),Bt(this,n[4]),this.a=Wt(n[5]||"",!0),Ft(this,n[6]||"",!0),this.g=Wt(n[7]||"")):(this.h=!!t,this.c=new Xt(null,this.h))}function Ot(e){return new Pt(e)}function Rt(e,t,n){e.f=n?Wt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function jt(e,t,n){e.b=n?Wt(t,!0):t}function Bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ft(e,t,n){t instanceof Xt?(e.c=t,function(e,t){t&&!e.f&&($t(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zt(this,t),tn(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=zt(t,Yt)),e.c=new Xt(t,e.h))}function Vt(e,t,n){e.c.set(t,n)}function qt(e,t,n){d(n)||(n=[String(n)]),tn(e.c,t,n)}function Ut(e){return Vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(zt(t,Gt,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(zt(t,Gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(zt(n,"/"==n.charAt(0)?Ht:Qt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",zt(n,Jt)),e.join("")},Pt.prototype.resolve=function(e){var t=Ot(this),n=!!e.f;n?Rt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?jt(t,e.b):n=null!=e.i;var r=e.a;if(n)Bt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(x(i,"./")||x(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ft(t,nn(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Gt=/[#\/\?@]/g,Qt=/[#\?:]/g,Ht=/[#\?]/g,Yt=/[#\?@]/g,Jt=/#/g;function Xt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function $t(e){e.a||(e.a=new Nt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zt(e,t){$t(e),t=rn(e,t),Mt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,At(e.a,t))}function en(e,t){return $t(e),t=rn(e,t),Mt(e.a.b,t)}function tn(e,t,n){Zt(e,t),0<n.length&&(e.c=null,e.a.set(rn(e,t),D(n)),e.b+=n.length)}function nn(e){var t=new Xt;return t.c=e.c,e.a&&(t.a=new Nt(e.a),t.b=e.b),t}function rn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function on(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function an(e){var t=e.a.F.a;if(null!=t)et(4),t?(et(10),Hn(e.a,e,!1)):(et(11),Hn(e.a,e,!0));else{e.b=new ft(e,void 0,void 0),e.b.h=e.h,t=Zn(t=e.a,t.Y()?e.f:null,e.i),et(4),qt(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Vt(t,n,r),vt(e.b,t,!1,e.f)}}function sn(){this.a=this.b=null}function cn(){this.a=new Nt}function un(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++g)):t.charAt(0)+e}function ln(e,t){this.b=e,this.a=t}function hn(e){this.g=e||dn,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new cn),this.b=null,this.c=[]}(r=Xt.prototype).add=function(e,t){$t(this),this.c=null,e=rn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){$t(this),this.a.forEach((function(n,r){C(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){$t(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){$t(this);var t=[];if(s(e))en(this,e)&&(t=_(t,this.a.get(rn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=_(t,e[n])}return t},r.set=function(e,t){return $t(this),this.c=null,en(this,e=rn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},S((function(){}),(function(){})),(r=on.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Rn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Rn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Xn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Xn(t,2)}else 1==this.M&&(this.g?et(6):"11111"==t?(et(5),this.g=!0,(!W||10<=Number($))&&(this.c=200,this.b.cancel(),et(11),Hn(this.a,this,!0))):(et(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,an(this)):1==this.M&&(this.g?(et(11),Hn(this.a,this,!0)):(et(10),Hn(this.a,this,!1)));else{0==this.M?et(8):1==this.M&&et(9);var e=this.a;e.m=this.c,Xn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},cn.prototype.add=function(e){this.a.set(un(e),e)},cn.prototype.C=function(){return this.a.C()};var dn=10;function fn(e,t){!e.a&&(x(t,"spdy")||x(t,"quic")||x(t,"h2"))&&(e.f=e.g,e.a=new cn,e.b&&(yn(e,e.b),e.b=null))}function pn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function mn(e){return e.b?1:e.a?e.a.a.c:0}function gn(e,t){return e.b?e=e.b==t:e.a?(t=un(t),e=Mt(e.a.a.b,t)):e=!1,e}function yn(e,t){e.a?e.a.add(t):e.b=t}function vn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=un(t),n=Mt(e.a.a.b,n)),n&&At(e.a.a,un(t)))}function bn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return C(e.a.C(),(function(e){t=t.concat(e.j)})),t}return D(e.c)}function wn(){}function Tn(){this.a=new wn}function Sn(e,t,n){var r=n||"";try{kt(e,(function(e,n){var i=e;p(e)&&(i=ke(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function In(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}hn.prototype.cancel=function(){this.c=bn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(C(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},wn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},wn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var En=a.JSON.parse;function Cn(e){_e.call(this),this.headers=new Nt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}S(Cn,_e);var _n="",Dn=/^https?$/i,kn=["POST","PUT"];function Nn(e){return"content-type"==e.toLowerCase()}function An(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,xn(e),Ln(e)}function xn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Mn(e){if(e.b&&void 0!==o&&(!e.s[1]||4!=On(e)||2!=e.T()))if(e.l&&4==On(e))Ue(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==On(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(Lt)[1]||null;if(!s&&a.self&&a.self.location){var c=a.self.location.protocol;s=c.substr(0,c.length-1)}i=!Dn.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var u=2<On(e)?e.a.statusText:""}catch(e){u=""}e.f=u+" ["+e.T()+"]",xn(e)}}finally{Ln(e)}}}function Ln(e,t){if(e.a){Pn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Pn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function On(e){return e.a?e.a.readyState:0}function Rn(e,t){return e.a?e.a.getResponseHeader(t):null}function jn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return O(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Vt(e,t,n),e}function Bn(e){this.f=[],this.F=new sn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!u("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=u("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=u("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=u("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=u("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new hn(e&&e.concurrentRequestLimit),this.ja=new Tn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(e){if(Vn(e),3==e.u){var t=e.P++,n=Ot(e.B);Vt(n,"SID",e.H),Vt(n,"RID",t),Vt(n,"TYPE","terminate"),zn(e,n),(t=new ft(e,t,void 0)).F=2,t.f=Ut(Ot(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=T(),St(t)}$n(e)}function Vn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Yn(e),e.b.cancel(),e.h&&(c(e.h)&&a.clearTimeout(e.h),e.h=null)}function qn(e,t){e.f.push(new ln(e.Qa++,t)),3==e.u&&Un(e)}function Un(e){pn(e.b)||e.h||(e.h=!0,Re(e.Ha,e),e.A=0)}function Wn(e,t){var n;n=t?t.W:e.P++;var r=Ot(e.B);Vt(r,"SID",e.H),Vt(r,"RID",n),Vt(r,"AID",e.O),zn(e,r),e.g&&e.i&&jn(r,e.g,e.i),n=new ft(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Kn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),yn(e.b,n),yt(n,r,t)}function zn(e,t){e.c&&kt({},(function(e,n){Vt(t,n,e)}))}function Kn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,c=0;c<n;c++){var u=i[c].b,l=i[c].a;if(0>(u-=o))o=Math.max(0,i[c].b-100),s=!1;else try{Sn(l,a,"req"+u+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Gn(e){e.a||e.l||(e.S=1,Re(e.Ga,e),e.v=0)}function Qn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=nt(b(e.Ga,e),Jn(e,e.v)),e.v++,!0)}function Hn(e,t,n){var r=t.l;r&&fn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Zn(e,null,e.ha),Un(e)}function Yn(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function Jn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function Xn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.eb,e);n||(n=new Pt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Rt(n,"https"),Ut(n)),function(e,t){var n=new Ye;if(a.Image){var r=new Image;r.onload=w(In,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(In,n,r,"TestLoadImage: error",!1,t),r.onabort=w(In,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(In,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else et(2);e.u=0,e.c&&e.c.ta(t),$n(e),Vn(e)}function $n(e){e.u=0,e.m=-1,e.c&&(0==bn(e.b).length&&0==e.f.length||(e.b.c.length=0,D(e.f),e.f.length=0),e.c.sa())}function Zn(e,t,n){var r=function(e){return e instanceof Pt?Ot(e):new Pt(e,void 0)}(n);if(""!=r.b)t&&jt(r,t+"."+r.b),Bt(r,r.i);else{var i,o=a.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new Pt(null,void 0);return e&&Rt(i,e),t&&jt(i,t),n&&Bt(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&O(e.V,(function(e,t){Vt(r,t,e)})),t=e.j,n=e.I,t&&n&&Vt(r,t,n),Vt(r,"VER",e.wa),zn(e,r),r}function er(){}function tr(){if(W&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function nr(e,t){_e.call(this),this.a=new Bn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))t=i;else(r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!k(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new or(this)}function rr(e){lt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function ir(){ht.call(this),this.status=1}function or(e){this.a=e}(r=Cn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?at(this.H):at(ct),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void An(this,e)}e=n||"";var i=new Nt(this.headers);r&&kt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Nn,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(i.K()),n=a.FormData&&e instanceof a.FormData,!(0<=E(kn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Pn(this),0<this.o&&((this.D=function(e){return W&&ee(9)&&c(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=Ue(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){An(this,e)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ln(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ln(this,!0)),Cn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?Mn(this):this.Za())},r.Za=function(){Mn(this)},r.T=function(){try{return 2<On(this)?this.a.status:-1}catch(e){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),En(t)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Bn.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ft(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?B(r=R(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Kn(this,n,t),Vt(i=Ot(this.B),"RID",e),Vt(i,"CVER",22),this.o&&this.j&&Vt(i,"X-HTTP-Session-Id",this.j),zn(this,i),this.g&&r&&jn(i,this.g,r),yn(this.b,n),this.W?(Vt(i,"$req",t),Vt(i,"SID","null"),n.S=!0,yt(n,i,null)):yt(n,i,t),this.u=2}}else 3==this.u&&(e?Wn(this,e):0==this.f.length||pn(this.b)||Wn(this))},r.Ga=function(){this.l=null,this.a=new ft(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Ot(this.pa);Vt(e,"RID","rpc"),Vt(e,"SID",this.H),Vt(e,"CI",this.ia?"0":"1"),Vt(e,"AID",this.O),zn(this,e),Vt(e,"TYPE","xmlhttp"),this.g&&this.i&&jn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),vt(this.a,e,!0,this.ga)},r.Fa=function(e,t){if(0!=this.u&&(this.a==e||gn(this.b,e)))if(this.m=e.o,!e.s&&gn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(d(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Yn(this),this.a.cancel(),this.a=null}Qn(this),et(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=nt(b(this.Ya,this),6e3));if(1>=mn(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Xn(this,11)}else if((e.s||this.a==e)&&Yn(this),!k(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&c(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Rn(r,"X-Client-Wire-Protocol"))&&fn(this.b,i),this.j&&(r=Rn(r,"X-HTTP-Session-Id")))&&(this.I=r,Vt(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Zn(this,this.Y()?this.ga:null,this.ha),r.s?(vn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Et(r),St(r)),this.a=r):Gn(this),0<this.f.length&&Un(this)}else"stop"!=r[0]&&"close"!=r[0]||Xn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Xn(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Qn(this),et(19))},r.na=function(e){var t=null;if(this.a==e){Yn(this),this.a=null;var n=2}else{if(!gn(this.b,e))return;t=e.j,vn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=T()-e.v,Je.dispatchEvent(new tt(Je,e.l?e.l.length:0,t,this.A)),Un(this)):Gn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(mn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa))&&(e.h=nt(b(e.Ha,e,t),Jn(e,e.A)),e.A++,!0))}(this,e)||2==n&&Qn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Xn(this,5);break;case 4:Xn(this,10);break;case 3:Xn(this,6);break;default:Xn(this,2)}}},r.eb=function(e){et(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cn(this.Ka)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=er.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},tr.prototype.a=function(e,t){return new nr(e,t)},S(nr,_e),(r=nr.prototype).addEventListener=function(e,t,n,r){nr.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){nr.N.removeEventListener.call(this,e,t,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;et(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new on(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=jn(t,e.g,e.i)),(e=e.w).i=n,t=Zn(e.a,null,e.i),et(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,an(e)):(qt(t,"MODE","init"),!e.a.o&&e.a.j&&qt(t,"X-HTTP-Session-Id",e.a.j),e.b=new ft(e,void 0,void 0),e.b.h=e.h,vt(e.b,t,!1,null),e.M=0)},r.close=function(){Fn(this.a)},r.Wa=function(e){if(s(e)){var t={};t.__data__=e,qn(this.a,t)}else this.h?((t={}).__data__=ke(e),qn(this.a,t)):qn(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,nr.N.G.call(this)},S(rr,lt),S(ir,ht),S(or,er),or.prototype.va=function(){this.a.dispatchEvent("a")},or.prototype.ua=function(e){this.a.dispatchEvent(new rr(e))},or.prototype.ta=function(e){this.a.dispatchEvent(new ir(e))},or.prototype.sa=function(){this.a.dispatchEvent("b")};var ar=w((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),tr);tr.prototype.createWebChannel=tr.prototype.a,nr.prototype.send=nr.prototype.Wa,nr.prototype.open=nr.prototype.Va,nr.prototype.close=nr.prototype.close,rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,it.COMPLETE="complete",st.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",_e.prototype.listen=_e.prototype.za,Cn.prototype.listenOnce=Cn.prototype.Aa,Cn.prototype.getLastError=Cn.prototype.Xa,Cn.prototype.getLastErrorCode=Cn.prototype.ya,Cn.prototype.getStatus=Cn.prototype.T,Cn.prototype.getResponseJson=Cn.prototype.Ua,Cn.prototype.getResponseText=Cn.prototype.aa,Cn.prototype.send=Cn.prototype.ca;var sr={createWebChannelTransport:ar,ErrorCode:rt,EventType:it,WebChannel:st,XhrIo:Cn},cr=sr.createWebChannelTransport,ur=sr.ErrorCode,lr=sr.EventType,hr=sr.WebChannel,dr=sr.XhrIo;t.default=sr}.call(this,n(5))},function(e,t,n){"use strict";n.r(t);var r,i;n(8);!function(e){e[e.Nothing=0]="Nothing",e[e.Intersect=1]="Intersect",e[e.Overlap=2]="Overlap"}(r||(r={})),function(e){e[e.Disjoint=0]="Disjoint",e[e.Match=1]="Match",e[e.Intersect=2]="Intersect",e[e.AInsideB=3]="AInsideB",e[e.BInsideA=4]="BInsideA",e[e.Tangent=5]="Tangent"}(i||(i={}));var o=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0),this.type=e,this.intersection=t,this.overlap=n},a=function(){function e(){}return e.ptsDistance=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.lineMiddlePt=function(e){return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}},e.areLinesEqual=function(e,t){return this.arePointsEqual(e[0],t[0])&&this.arePointsEqual(e[1],t[1])||this.arePointsEqual(e[0],t[1])&&this.arePointsEqual(e[1],t[0])},e.arePointsEqual=function(e,t){return e.x===t.x&&e.y===t.y},e}(),s=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},c=function(){function e(){}return e.readInputFile=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsText(e,"UTF-8"),r.onload=function(){t(r.result)},r.onerror=function(){console.log("Error reading the file.")}}))},e.getUrlParams=function(e){var t={},n=document.createElement("a");n.href=e;for(var r=n.search.substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].split("=");t[o[0]]=decodeURIComponent(o[1])}return t},e.emptyNode=function(e){for(;e.firstChild&&e.removeChild(e.firstChild););},e.createBBox=function(e,t,n){void 0===t&&(t=5),void 0===n&&(n=5);var r=document.createElementNS("http://www.w3.org/2000/svg","rect");return r.setAttribute("x",(e.getBBox().x-t).toString()),r.setAttribute("y",(e.getBBox().y-t).toString()),r.setAttribute("width",(e.getBBox().width+2*t).toString()),r.setAttribute("height",(e.getBBox().height+2*t).toString()),r.setAttribute("rx",n.toString()),r.setAttribute("ry",n.toString()),r},e.createBBox2=function(e,t){return void 0===t&&(t=0),0!==t?{x:e.getBBox().x-t,y:e.getBBox().y-t,width:e.getBBox().width+2*t,height:e.getBBox().height+2*t}:e.getBBox()},e.getRelativeCoords=function(e,t){var n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n.matrixTransform(t.getScreenCTM().inverse())},e.uuidv4=function(){return(1e7.toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)}))},e.getRectSegments=function(e){var t={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y},r={x:e.x+e.width,y:e.y+e.height},i={x:e.x,y:e.y+e.height};return[[t,n],[n,r],[r,i],[i,t]]},e.isPtInRect=function(e,t,n){return void 0===n&&(n=!0),n?t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height:t.x>e.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height},e.isLineInRect=function(e,t){return this.isPtInRect(t,e[0])&&this.isPtInRect(t,e[1])},e.isNumBetween=function(e,t,n,r){return void 0===r&&(r=!0),r?e>=Math.min(t,n)&&e<=Math.max(t,n):e>Math.min(t,n)&&e<Math.max(t,n)},e.isLineHorizontal=function(e){return e[0].y===e[1].y},e.isLineVertical=function(e){return e[0].x===e[1].x},e.sortPtsByDistance=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!1);var r=void 0!==t?t:e[0],i=e.sort((function(e,t){return a.ptsDistance(r,e)<a.ptsDistance(r,t)?-1:a.ptsDistance(r,e)>a.ptsDistance(r,t)?1:0}));return void 0!==t&&!0===n?s([t],i):i},e.linesBetweenPts=function(e){if(e.length>1){for(var t=[],n=0;n<e.length-1;n++)t.push([e[n],e[n+1]]);return t}return null},e.rectRectRelationship=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height?i.Match:this.isPtInRect(t,{x:e.x,y:e.y})&&this.isPtInRect(t,{x:e.x+e.width,y:e.y})&&this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height})&&this.isPtInRect(t,{x:e.x,y:e.y+e.height})?i.AInsideB:this.isPtInRect(e,{x:t.x,y:t.y})&&this.isPtInRect(e,{x:t.x+t.width,y:t.y})&&this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height})&&this.isPtInRect(e,{x:t.x,y:t.y+t.height})?i.BInsideA:this.isPtInRect(t,{x:e.x,y:e.y},!1)||this.isPtInRect(t,{x:e.x+e.width,y:e.y},!1)||this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height},!1)||this.isPtInRect(t,{x:e.x,y:e.y+e.height},!1)||this.isPtInRect(e,{x:t.x,y:t.y},!1)||this.isPtInRect(e,{x:t.x+t.width,y:t.y},!1)||this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height},!1)||this.isPtInRect(e,{x:t.x,y:t.y+t.height},!1)||this.isNumBetween(e.y,t.y,t.y+t.height,!1)&&e.x<=t.x&&e.x+e.width>=t.x+t.width||this.isNumBetween(t.y,e.y,e.y+e.height,!1)&&t.x<=e.x&&t.x+t.width>=e.x+e.width?i.Intersect:this.isPtInRect(t,{x:e.x,y:e.y})||this.isPtInRect(t,{x:e.x+e.width,y:e.y})||this.isPtInRect(t,{x:e.x+e.width,y:e.y+e.height})||this.isPtInRect(t,{x:e.x,y:e.y+e.height})||this.isPtInRect(e,{x:t.x,y:t.y})||this.isPtInRect(e,{x:t.x+t.width,y:t.y})||this.isPtInRect(e,{x:t.x+t.width,y:t.y+t.height})||this.isPtInRect(e,{x:t.x,y:t.y+t.height})?i.Tangent:i.Disjoint},e.getOrthoLineLineRelationship=function(e,t){if(this.isLineHorizontal(e)&&this.isLineVertical(t))return this.isNumBetween(e[0].y,t[0].y,t[1].y)&&this.isNumBetween(t[0].x,e[0].x,e[1].x)?new o(r.Intersect,{x:t[0].x,y:e[0].y}):new o(r.Nothing);if(this.isLineHorizontal(t)&&this.isLineVertical(e))return this.isNumBetween(t[0].y,e[0].y,e[1].y)&&this.isNumBetween(e[0].x,t[0].x,t[1].x)?new o(r.Intersect,{x:e[0].x,y:t[0].y}):new o(r.Nothing);if(this.isLineHorizontal(e)&&this.isLineHorizontal(t)){if(e[0].y===t[0].y){var n=Math.min(Math.max(e[0].x,e[1].x),Math.max(t[0].x,t[1].x)),i=Math.max(Math.min(e[0].x,e[1].x),Math.min(t[0].x,t[1].x));return n>=i?new o(r.Overlap,void 0,[{x:n,y:e[0].y},{x:i,y:e[0].y}]):new o(r.Nothing)}return new o(r.Nothing)}if(this.isLineVertical(e)&&this.isLineVertical(t)){if(e[0].x===t[0].x){var a=Math.min(Math.max(e[0].y,e[1].y),Math.max(t[0].y,t[1].y)),s=Math.max(Math.min(e[0].y,e[1].y),Math.min(t[0].y,t[1].y));return a>=s?new o(r.Overlap,void 0,[{x:e[0].x,y:a},{x:e[0].x,y:s}]):new o(r.Nothing)}return new o(r.Nothing)}return new o(r.Nothing)},e.rectanglesSilhouette=function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.getRectSegments(e[n]));var o=[],c=[];for(n=0;n<e.length;n++){for(var u=this.getRectSegments(e[n]),l=function(o){if(o!=n){var l=[],d=h.rectRectRelationship(e[o],e[n]);if(d===i.BInsideA||n>o&&d===i.Match)return u.length=0,"break";if(d===i.Intersect||d===i.Tangent){for(var f=[],p=0;p<u.length;p++){var m=[],g=u[p];if(!h.isLineInRect(g,e[o])){for(var y=0;y<t[o].length;y++){var v=t[o][y],b=h.getOrthoLineLineRelationship(g,v);b.type===r.Intersect?b.intersection&&m.push(b.intersection):b.type===r.Overlap&&b.overlap&&f.push(b.overlap)}if(m.length>0)for(var w=h.sortPtsByDistance(m,u[p][0],!0),T=h.linesBetweenPts(s(w,[u[p][1]])),S=0;S<T.length;S++)h.isPtInRect(e[o],a.lineMiddlePt(T[S]))||l.push(T[S]);else l.push(u[p])}}if(f.length>0&&d!==i.Tangent)for(var I=function(e){c.find((function(t){return a.areLinesEqual(t,f[e])}))||c.push(f[e])},E=0;E<f.length;E++)I(E);u=l}}},h=this,d=0;d<e.length;d++){if("break"===l(d))break}u.length>0&&o.push.apply(o,u)}return c.length>0&&o.push.apply(o,c),o},e.svgPathFromLines=function(e){for(var t=document.createElementNS("http://www.w3.org/2000/svg","path"),n=[],r=0;r<e.length;r++)n.push("M"+e[r][0].x.toFixed(3)+","+e[r][0].y.toFixed(3)+" "+e[r][1].x.toFixed(3)+","+e[r][1].y.toFixed(3));return t.setAttribute("d",n.join("")),t},e}(),u=function(){function e(e,t){this.SVGWIDTH=500,this.ZOOMSPEED=1.25,this.allowPanning=!1,this.name=e,this.id=t,this.content,this.zoom=this.zoom.bind(this)}return e.prototype.setContent=function(e){var t=this;this.content=document.createElement("div");var n=new DOMParser;this.svgCanvas=n.parseFromString(e,"image/svg+xml").documentElement,this.content.appendChild(this.svgCanvas),this.svgCanvas.addEventListener("wheel",this.zoom),this.svgCanvas.addEventListener("mousedown",(function(e){2===e.buttons&&(t.allowPanning=!0,t.svgInitialClick=c.getRelativeCoords(e,t.svgCanvas),t.prevViewBox=t.svgCanvas.viewBox.baseVal)})),this.svgCanvas.addEventListener("mouseup",(function(){return t.allowPanning=!1})),this.svgCanvas.addEventListener("mouseleave",(function(){return t.allowPanning=!1})),this.svgCanvas.addEventListener("mousemove",(function(e){2===e.buttons&&!1===t.allowPanning&&(t.allowPanning=!0,t.svgInitialClick=c.getRelativeCoords(e,t.svgCanvas),t.prevViewBox=t.svgCanvas.viewBox.baseVal),t.allowPanning&&(t.mousePosition=c.getRelativeCoords(e,t.svgCanvas),t.svgCanvas.viewBox.baseVal.x=-t.mousePosition.x-(-t.svgInitialClick.x-t.prevViewBox.x),t.svgCanvas.viewBox.baseVal.y=-t.mousePosition.y-(-t.svgInitialClick.y-t.prevViewBox.y))}))},e.prototype.createCommentsGroup=function(){this.commentsGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svgCanvas.appendChild(this.commentsGroup)},e.prototype.zoom=function(e){e.preventDefault(),this.mousePosition=c.getRelativeCoords(e,this.svgCanvas);var t=e.deltaY>0?this.ZOOMSPEED:1/this.ZOOMSPEED,n=(this.mousePosition.x-this.svgCanvas.viewBox.baseVal.x)/this.svgCanvas.viewBox.baseVal.width,r=this.svgCanvas.viewBox.baseVal.width*t-this.svgCanvas.viewBox.baseVal.width,i=(this.mousePosition.y-this.svgCanvas.viewBox.baseVal.y)/this.svgCanvas.viewBox.baseVal.height,o=this.svgCanvas.viewBox.baseVal.height*t-this.svgCanvas.viewBox.baseVal.height;(e.deltaY>0?this.svgCanvas.viewBox.baseVal.width<10*this.SVGWIDTH:this.svgCanvas.viewBox.baseVal.width>this.SVGWIDTH/10)&&(this.svgCanvas.viewBox.baseVal.x-=r*n,this.svgCanvas.viewBox.baseVal.width+=r,this.svgCanvas.viewBox.baseVal.y-=o*i,this.svgCanvas.viewBox.baseVal.height+=o)},e}(),l=class{static listFiles(e,t){const n=[];e.name&&n.push("name='"+e.name+"'"),e.parentId&&n.push("'"+e.parentId+"' in parents"),!1===e.trashed&&n.push("trashed=false"),e.excludeName&&n.push("not name contains '"+e.excludeName+"'"),e.onlyFolder&&n.push("mimeType='application/vnd.google-apps.folder'");let r=gapi.client.drive.files.list({pageSize:15,fields:`nextPageToken, files(id, name${t?", "+t:""})`,q:n.join(" and ")});return r.then(e=>{const t=e.result.files;t&&t.length>0?console.log(t):console.log("No files found with this query:",n.join(" and "))},e=>{console.error(e.body)}),r}static getFileContent(e){let t=gapi.client.drive.files.get({fileId:e,alt:"media"});return t.then(t=>{200===t.status&&console.log("File with id "+e+" fetched successfully.")},e=>{console.error(e.body)}),t}static getFileData(e,t){let n=gapi.client.drive.files.get({fileId:e,fields:t});return n.then(e=>{200===e.status&&console.log("File data fetched succesfully.")},e=>{console.error(e)}),n}static createFolder(e,t="drive"){const n={name:e,mimeType:"application/vnd.google-apps.folder",parents:"drive"!==t?[t]:[]},r=gapi.client.request({path:"https://www.googleapis.com/drive/v3/files/",method:"POST",body:n});return r.then(t=>{console.log(e+" folder created. Id: "+JSON.parse(t.body).id)}),r}static uploadFile(e,t,n,r){const i=new Blob([e],{type:t}),o={name:n,mimeType:t,parents:[r]},a=gapi.auth.getToken().access_token,s=new FormData;s.append("metadata",new Blob([JSON.stringify(o)],{type:"application/json"})),s.append("file",i);let c=fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",{method:"POST",headers:new Headers({Authorization:"Bearer "+a}),body:s});return c.then(e=>{!0===e.ok&&200===e.status&&console.log("Upload of "+n+" successful.")},e=>{console.error(e)}),c}static updateFileContent(e,t,n){const r=new Blob([e],{type:t}),i={mimeType:t},o=gapi.auth.getToken().access_token,a=new FormData;a.append("metadata",new Blob([JSON.stringify(i)],{type:"application/json"})),a.append("file",r);let s=fetch(`https://www.googleapis.com/upload/drive/v3/files/${n}?uploadType=multipart`,{method:"PATCH",headers:new Headers({Authorization:"Bearer "+o}),body:a});return s.then(e=>{!0===e.ok&&200===e.status&&console.log("Update successful.")},e=>{console.error(e)}),s}static renameFile(e,t){const n=gapi.client.drive.files.update({fileId:e,name:t,uploadType:"media"});return n.then(e=>{},t=>{console.error("Error renaming file: "+e,t)}),n}static moveFileV2(e,t){const n=gapi.client.request({path:"https://www.googleapis.com/drive/v2/files/"+e+"/parents",method:"POST",headers:{"Content-Type":"application/json"},body:{id:t}});return n.then(e=>{console.log(e)},e=>{console.log(e)}),n}static moveFile(e,t){const n={id:t};gapi.client.drive.parents.insert({fileId:e,resource:n}).execute((function(e){}))}static deleteFile(e){let t=gapi.client.drive.files.delete({fileId:e});return t.then(e=>{console.log(e)},e=>{console.log(e)}),t}static shareFile(e,t,n=0){return new Promise(e=>setTimeout(e,n)).then(n=>{const r=gapi.client.request({path:`https://www.googleapis.com/drive/v3/files/${e}/permissions?sendNotificationEmail=false&fields=id,displayName,emailAddress,photoLink,role`,method:"POST",headers:{"Content-Type":"application/json"},body:{role:"writer",type:"user",emailAddress:t}});return r.then(e=>{console.log(e)}),r})}static stopSharingFile(e,t){const n=gapi.client.request({path:"https://www.googleapis.com/drive/v3/files/"+e+"/permissions/"+t,method:"DELETE",headers:{"Content-Type":"application/json"}});return n.then(e=>{console.log(e)}),n}static getProjectTeamData(e){const t=gapi.client.request({path:`https://www.googleapis.com/drive/v3/files/${e}/permissions?fields=permissions(id,displayName,emailAddress,role,photoLink)`,method:"GET",headers:{"Content-Type":"application/json"}});return t.then(e=>{console.log(e)},e=>{console.log(e)}),t}static getUserInfo(){const e=gapi.client.drive.about.get({fields:"user"});return e.then(e=>{console.log(JSON.parse(e.body).user)}),e}static sendSharingProjectEmail(e,t,n,r){const i=fetch("https://us-central1-testgdproject-1570036439931.cloudfunctions.net/sendMail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sharer:e,recipients:t,projectName:n,projectId:r})});return i.then(e=>{console.log(e)},e=>{console.error(e)}),i}static sendNotification(e,t,n,r,i,o){const a=fetch("https://us-central1-testgdproject-1570036439931.cloudfunctions.net/sendPushNotification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emails:e,author:t,photoLink:n,text:r,projectName:i,projectId:o})});return a.then(e=>{console.log(e)},e=>{console.error(e)}),a}static async createProject(e,t,n){let r;const i=await c.readInputFile(e),o=JSON.parse(i);if(console.log("File contents:",o),n.name=o.projectInfo.title,!t.appMainFolderId){const e=(await this.listFiles({name:"VAviewerData",onlyFolder:!0,trashed:!1})).result.files;if(e&&e.length>0)t.appMainFolderId=e[0].id;else{const e=await this.createFolder("VAviewerData");t.appMainFolderId=JSON.parse(e.body).id,console.log("No appFolder found, one is going to be created.")}}let a;if(void 0!==t.projectsData&&t.projectsData.find(e=>e.name===o.projectInfo.title))t.projectsData.find(e=>e.name===o.projectInfo.title)?r="No project was created because there is already a project with this name.":console.error("Unknown error while attempting to create the project folder.");else try{const e=await this.createFolder(o.projectInfo.title,t.appMainFolderId);a=JSON.parse(e.body).id,n.id=a;const r={id:a,name:o.projectInfo.title};void 0===t.projectsData?t.projectsData=[r]:t.projectsData.find(e=>e.name===o.projectInfo.title)||t.projectsData.push(r)}catch(e){console.log(e),n.id="temporal",r=JSON.parse(e.body).error.message}if(a&&o.drawings){const e=await this.createFolder("drawings",a),r=JSON.parse(e.body).id;t.projectsData[t.projectsData.length-1].drawingsFolderId=r;const i=[];n.drawings=[];for(const e in o.drawings){const t=this.uploadFile(o.drawings[e],"image/svg+xml",e.concat(".svg"),r);i.push(t);const a=new u(e,void 0);a.setContent(o.drawings[e]),n.drawings.push(a)}const s=new TextDecoder("utf-8");await Promise.all(i).then(e=>{e.forEach((e,t)=>{!0===e.ok&&200===e.status&&e.body.getReader().read().then(({value:e,done:r})=>{const i=JSON.parse(s.decode(e)).id;n.drawings[t].id=i,console.log("Drawing with id "+i+" uploaded successfully.")})})},e=>{console.error(e)})}if(a&&o.elementsData){const e=await this.createFolder("elementsData",a),r=JSON.parse(e.body).id;t.projectsData[t.projectsData.length-1].elementsDataFolderId=r,n.elementsData=o.elementsData;const i=[];for(const e in o.elementsData){const t=this.uploadFile(JSON.stringify(o.elementsData[e]),"application/json",e.concat(".json"),r);i.push(t)}await Promise.all(i).then(e=>{console.log("ElementsData files uploaded successfully.")},e=>{console.error(e)})}return a?(console.log("Upload successful. Uploaded "+Object.keys(o.drawings).length+" drawings."),{id:a,name:o.projectInfo.title}):Promise.reject(new Error("Project upload failed. "+r))}static async listProjectItems(e){if(!e.appMainFolderId){const t=(await this.listFiles({name:"VAviewerData",onlyFolder:!0,trashed:!1})).result.files;if(!(t&&t.length>0))return console.log("No appFolder found."),Promise.reject(new Error("No appFolder found."));e.appMainFolderId=t[0].id}const t=await this.listFiles({parentId:e.appMainFolderId,onlyFolder:!0,excludeName:"appSettings",trashed:!1},"shared, permissions");let n;const r=t.result.files;r&&r.length>0&&(void 0===e.projectsData?(n=r,e.projectsData=n):Array.isArray(e.projectsData)&&(n=t.result.files.filter(t=>void 0===e.projectsData.find(e=>e.id===t.id))).forEach(t=>{e.projectsData.push(t)})),console.assert(e.projectsData.length>0,"There are no project folders.");const i=(await this.listFiles({parentId:e.appMainFolderId,name:"appSettings",onlyFolder:!0})).result.files;i&&i.length>0?e.appSettingsFolderId=i[0].id:console.log("No settings folder found.");const o=(await this.listFiles({parentId:e.appSettingsFolderId,name:"projectsThumbs",onlyFolder:!0})).result.files;o&&o.length>0?e.thumbsFolderId=o[0].id:console.log("No thumbs folder found.");const a=(await this.listFiles({parentId:e.thumbsFolderId})).result.files;return e.projectsData.forEach(e=>{const t=a.find(t=>e.id===t.name.replace(".jpg",""));t&&(e.thumbId=t.id)}),console.assert(a.length>0,"There are no thumbnails."),n}static async fetchProject(e,t){let n;if(console.log("Fetching project: "+e),void 0===t.projectsData){const r=await this.getFileData(e,"name, trashed");JSON.parse(r.body).trashed||(t.projectsData=[{id:e,name:JSON.parse(r.body).name}],n=0)}else"temporal"!==e&&(n=t.projectsData.findIndex(t=>t.id===e));if(n>=0&&!t.projectsData[n].permissions)try{const r=(await this.getProjectTeamData(e)).result.permissions;r&&r.length>0?t.projectsData[n].permissions=r:console.log("No project team members found.")}catch(e){console.log("Error fetching the team members data.")}if(n>=0&&!t.projectsData[n].projSettings){const r=(await this.listFiles({parentId:e,name:"projectSettings.json"})).result.files;if(r&&r.length>0){const e=await this.getFileContent(r[0].id);t.projectsData[n].projSettings=e.body}else console.log("No projectSettings.json found.")}if(n>=0&&!t.projectsData[n].drawings){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"drawings"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id,trashed:!1});t.projectsData[n].drawings=[],e.result.files.forEach(e=>{"drawingsStyles.css"===e.name?t.projectsData[n].drawingsStylesId=e.id:t.projectsData[n].drawings.push(new u(e.name.replace(/.svg$/,""),e.id))})}else console.log("No drawings folder found.")}if(n>=0&&!t.projectsData[n].elementsData){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"elementsData"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id,trashed:!1});t.projectsData[n].elementsData=e.result.files}else console.log("No elementsData folder found.")}if(n>=0&&!t.projectsData[n].comments){const r=(await this.listFiles({parentId:e,name:"comments.json",trashed:!1})).result.files;if(r&&r.length>0){t.projectsData[n].commentsFileId=r[0].id;const e=await this.getFileContent(r[0].id);t.projectsData[n].comments=JSON.parse(e.body)}else console.log("No comments.json file found.")}if(n>=0&&!t.projectsData[n].images){const r=(await this.listFiles({parentId:e,onlyFolder:!0,name:"images"})).result.files;if(r&&r.length>0){const e=await this.listFiles({parentId:r[0].id});t.projectsData[n].images=e.result.files}else console.log("No images folder found.")}return n>=0?(console.log("Project resources fetched succesfully."),t.projectsData[n]):Promise.reject(new Error("Project resources could not be fetched."))}},h=function(){function e(e,t,n){var r;void 0===n&&(n=[]),this.elementsIds=[],this.representations=[],(r=this.elementsIds).push.apply(r,e),this.content=t,this.mentions=n,this.id="c-"+c.uuidv4()}return e.prototype.createRepresentation=function(e,t){for(var n=[],r=0;r<t.length;r++)n.push(c.createBBox2(t[r],15));var i=c.rectanglesSilhouette(n),o=c.svgPathFromLines(i);o.setAttribute("style","fill:none;stroke:#e22a2a;stroke-width:8px;stroke-dasharray:30;stroke-linecap:round;"),o.dataset.id=this.id,e.appendChild(o),this.representations.push(o)},e}();class d{constructor(e,t){this.panelsStorage=e,this.panelContainer=document.createElement("div"),this.panelContainer.classList.add("mainPanel","right"),this.panelGrip=document.createElement("div"),this.panelGrip.classList.add("panel-grip"),this.panelContainer.appendChild(this.panelGrip),this.panelContent=document.createElement("div"),this.panelContent.classList.add("panel-content"),this.panelHeader=document.createElement("div"),this.panelHeader.classList.add("panel-header"),this.panelBody=document.createElement("div"),this.panelBody.classList.add("panel-body"),this.panelFooter=document.createElement("div"),this.panelFooter.classList.add("panel-footer"),this.panelContent.appendChild(this.panelHeader),this.panelContent.appendChild(this.panelBody),this.panelContent.appendChild(this.panelFooter),this.panelContainer.appendChild(this.panelContent),t.workspaceContainer.addEventListener("mousemove",e=>{this.resizingWidth?this.resizeWidth(e):this.resizingHeight&&this.resizeHeight(e)}),t.workspaceContainer.addEventListener("mouseup",()=>{this.resizingWidth=!1,this.resizingHeight=!1}),this.activeSection,this.isOpen,this.panelSide,this.sections=[],this.setActive=this.setActive.bind(this),this.panelHeader.onclick=e=>{const t=e.target.closest("[data-btn]");t&&!t.classList.contains("active")&&this.setActive(t.innerText)},this.mediumBreakpoint=window.matchMedia("(max-width: 700px)"),this.panelPositon=this.panelPositon.bind(this),this.mediumBreakpoint.addListener(this.panelPositon),this.panelSides={right:"r",bottom:"b"},this.panelPositon(this.mediumBreakpoint),this.panelWidth=250,this.panelContainer.style.setProperty("--width",this.panelWidth+"px"),this.panelHeight=200,this.panelContainer.style.setProperty("--height",this.panelHeight+"px"),this.resizingWidth=!1,this.resizingHeight=!1,this.startX,this.startWidth,this.startY,this.startHeight,this.panelGrip.onmousedown=e=>{this.panelSide===this.panelSides.right?(this.resizingWidth=!0,this.resizingHeight=!1,this.startX=e.pageX,this.startWidth=this.panelWidth):this.panelSide===this.panelSides.bottom&&(this.resizingHeight=!0,this.resizingWidth=!1,this.startY=e.pageY,this.startHeight=this.panelHeight)},t.workspaceContainer.appendChild(this.panelContainer)}resizeWidth(e){this.panelWidth=this.startWidth-(e.pageX-this.startX),this.panelContainer.style.setProperty("--width",this.panelWidth+"px")}resizeHeight(e){this.panelHeight=this.startHeight-(e.pageY-this.startY),this.panelContainer.style.setProperty("--height",this.panelHeight+"px")}open(){this.panelContainer.classList.add("open"),this.panelPositon(this.mediumBreakpoint),this.isOpen=!0}close(){this.panelContainer.classList.remove("open"),this.isOpen=!1}dockTo(e){e===this.panelSides.right?(this.panelSide=e,this.panelContainer.classList.remove("bottom"),this.panelContainer.classList.add("right"),this.panelBody.childNodes.forEach(e=>{e.classList.remove("horizontal"),e.classList.add("vertical")})):e===this.panelSides.bottom&&(this.panelSide=e,this.panelContainer.classList.remove("right"),this.panelContainer.classList.add("bottom"),this.panelBody.childNodes.forEach(e=>{e.classList.remove("vertical"),e.classList.add("horizontal")}))}setActive(e){this.activeSection&&this.setInactive(this.activeSection),this.activeSection=this.sections.find(t=>t.name===e),this.activeSection.button.classList.add("active"),this.activeSection.body.classList.remove("hidden")}setInactive(e){e.button.classList.remove("active"),e.body.classList.add("hidden")}addSection(e,t,n=!0,r=!1){let i=this.sections.find(t=>t.name===e);if(void 0===i){const n=document.createElement("span");n.innerText=e,n.dataset.btn="",this.panelHeader.appendChild(n),this.panelBody.appendChild(t),i={name:e,button:n,body:t},r?this.sections.unshift(i):this.sections.push(i)}n?this.setActive(i.name):this.setInactive(i)}addSections(e){for(let t=0;t<e.length;t++)this.addSection(e[t].name,e[t].body,0===t)}removeSection(e){const t=this.sections.findIndex(t=>t.name===e);if(t>=0){const e=this.sections.splice(t,1)[0];e.button.remove(),this.panelsStorage.appendChild(e.body),this.sections.length>0?this.setActive(this.sections[0].name):this.close()}else console.warn("Impossible to remove the section. No section was found with that name.")}panelPositon(e){e.matches?this.dockTo(this.panelSides.bottom):this.dockTo(this.panelSides.right)}kill(){this.panelHeader.onclick=null,this.panelGrip.onmousedown=null}}class f{constructor(e,t){this.formElement=e,this.workspace=t,e.onsubmit=e=>{e.preventDefault()},this.cancelCreateBtn=document.getElementById("commentFormCancel"),this.addCommentBtn=document.getElementById("addCommentBtn"),this.deleteBtn=document.getElementById("commentFormDelete"),this.deleteBtn.onclick=()=>this.deleteComment(this.commentId),this.editBtn=document.getElementById("commentFormEdit"),this.editBtn.onclick=()=>this.enableEditComment(this.commentId),this.cancelUpdateBtn=document.getElementById("discardChanges"),this.cancelUpdateBtn.onclick=()=>this.discardUpdate(),this.confirmUpdateBtn=document.getElementById("confirmChanges"),this.textInput=e.elements.comment,this.mentionsSection=e.querySelector(".members"),this.mentionsInput=e.elements.members,this.buttonsModes=e.querySelector(".formButtonsModes"),this.commentId}showMentionsSection(){this.mentionsSection.classList.remove("hidden")}hideMentionsSection(){this.mentionsSection.classList.add("hidden")}buttonsVisibilityMode(e){for(let t=0;t<this.buttonsModes.children.length;t++)this.buttonsModes.children[t].dataset.mode!==e?this.buttonsModes.children[t].style.display="none":this.buttonsModes.children[t].style.display="flex"}deleteComment(e){const t=this.workspace.comments.findIndex(t=>t.id===e);this.workspace.comments[t].representations.forEach(e=>e.remove()),this.workspace.comments.splice(t,1),this.workspace.unsavedCommentsData(),this.workspace.mainPanel.removeSection("Comment")}disableForm(){this.textInput.disabled=!0,this.mentionsInput.disabled=!0}enableForm(){this.textInput.disabled=!1,this.mentionsInput.disabled=!1}viewComment(e){const t=this.workspace.comments.find(t=>t.id===e);t?(this.fillInputs(t),this.commentId=t.id,this.disableForm(),this.buttonsVisibilityMode("view")):console.warn("No comment found with that id:",e)}enableEditComment(e){const t=this.workspace.comments.find(t=>t.id===e);t?(this.fillInputs(t),this.commentId=e,this.enableForm(),this.buttonsVisibilityMode("edit"),this.formElement.onchange=()=>{this.confirmUpdateBtn.classList.remove("disabled"),this.confirmUpdateBtn.onclick=()=>this.updateComment(e,this.textInput.value,this.getSelectedMembers())}):console.warn("No comment found with that id:",e)}updateComment(e,t,n){const r=this.workspace.comments.find(t=>t.id===e);r?(r.content=t,r.mentions=n,this.workspace.unsavedCommentsData(),this.formElement.onchange=null,this.disableForm(),this.buttonsVisibilityMode("view"),this.confirmUpdateBtn.classList.add("disabled"),this.cancelUpdateBtn.classList.add("disabled"),this.confirmUpdateBtn.onclick=null,this.cancelUpdateBtn.onclick=null):console.warn("No comment found with that id:",e)}discardUpdate(){const e=this.workspace.comments.find(e=>e.id===this.commentId);e?(this.textInput.value=e.content,this.formElement.onchange=null,this.disableForm(),this.buttonsVisibilityMode("view"),this.confirmUpdateBtn.classList.add("disabled"),this.confirmUpdateBtn.onclick=null):console.warn("No comment found with that id:",commentId)}getSelectedMembers(){const e=[];for(let t=0;t<this.mentionsInput.selectedOptions.length;t++)e.push(this.mentionsInput.selectedOptions[t].value);return e}fillInputs(e){if(this.textInput.value=e.content,e.mentions.length>0){const t=[];e.mentions.forEach(e=>{const n=this.workspace.permissions.find(t=>t.emailAddress===e);t.push(`<option value="${e}">${n?n.displayName:"Removed user"}</option>`)}),this.mentionsInput.innerHTML=t.join("")}else c.emptyNode(this.mentionsInput)}reset(){this.formElement.reset()}}var p,m=function(){function e(e,t){var n=this;this.appendedDrawingsIds=[],this.comments=[],this.elementsComments={},this.workspaceContainer=document.createElement("div"),this.workspaceContainer.classList.add("workspace"),this.projectName=e.name,this.projectId=e.id,this.permissions=e.permissions,this.projectIndex=t.projectsData.findIndex((function(t){return t.name===e.name})),t.lastUploadedProject&&e.id===t.lastUploadedProject.id?this.elementsData=t.lastUploadedProject.elementsData:(this.drawings=e.drawings,this.drawingsStylesId=e.drawingsStylesId,this.elementsData={}),t.projectsListBtn.innerHTML="<span>"+e.name+"</span>",this.drawingsBtns=t.drawingsBtns,this.saveBtn=t.saveBtn,this.createDrawingsBtns(this.drawings),this.drawingsBtns.children[0].innerText="Pick a drawing",this.drawingsBtns.style.display="unset",t.toolbarsContainer.style.display="flex",this.projectsData=t.projectsData,this.propsTablesContainer=document.getElementById("propsTablesContainer"),this.paramsTablesContainer=document.getElementById("paramsTablesContainer"),e.commentsFileId&&(this.commentsFileId=e.commentsFileId),e.comments&&(e.comments.forEach((function(e){var t=new h(e.elementsIds,e.content,e.mentions);n.comments.push(t);for(var r=0;r<e.elementsIds.length;r++)n.elementsComments.hasOwnProperty(e.elementsIds[r])||(n.elementsComments[e.elementsIds[r]]=[]),n.elementsComments[e.elementsIds[r]].push(t.id)})),this.drawings.forEach((function(e){return e.commentsChanged=!0}))),this.mainPanel=new d(t.panelsStorage,this),this.commentForm=new f(document.getElementById("commentForm"),this),this.drawingsContainer=document.createElement("div"),this.drawingsContainer.classList.add("drawingsContainer"),this.workspaceContainer.appendChild(this.drawingsContainer),t.workspacesContainer.appendChild(this.workspaceContainer)}return e.prototype.manageTools=function(e,t,n){void 0!==this.activeDrawing?void 0===this.activeTool?this.activeTool=new t(n,e.currentTarget,this):this.activeTool.name!==n?(this.activeTool.kill(),this.activeTool=new t(n,e.currentTarget,this)):this.activeTool.name===n&&(this.activeTool.kill(),this.activeTool=void 0):console.log("A drawing must be active.")},e.prototype.unsavedCommentsData=function(){this.commentsChangesUnsaved=!0,this.saveBtn.classList.remove("disabled"),this.saveBtn.classList.add("enabled")},e.prototype.setDrawing=function(e){if(this.activeDrawing&&this.activeDrawing.name!==e.name)this.activeTool&&this.activeTool.currentSelection.length>0&&this.activeTool.removeDrawingSelectionAppearance(this.activeDrawing),this.activeDrawing.content.style.display="none";else if(this.activeDrawing&&this.activeDrawing.name===e.name)return;if(e.content.style.visibility="hidden",this.appendedDrawingsIds.includes(e.id)?e.content.style.display="unset":(this.appendedDrawingsIds.push(e.id),this.drawingsContainer.append(e.content)),e.commentsChanged){if(void 0===e.commentsGroup)for(var t=!1,n=0;n<this.comments.length;n++){for(var r=[],i=0;i<this.comments[n].elementsIds.length;i++){null!==(o=e.content.querySelector('[data-id="'+this.comments[n].elementsIds[i]+'"]'))&&r.push(o)}r.length>0&&(t||(e.createCommentsGroup(),t=!0),this.comments[n].createRepresentation(e.commentsGroup,r))}else for(n=0;n<this.comments.length;n++)if(null===e.commentsGroup.querySelector('[data-id="'+this.comments[n].id+'"]')){for(r=[],i=0;i<this.comments[n].elementsIds.length;i++){var o;null!==(o=e.content.querySelector('[data-id="'+this.comments[n].elementsIds[i]+'"]'))&&r.push(o)}r.length>0&&this.comments[n].createRepresentation(e.commentsGroup,r)}e.commentsChanged=!1}this.activeTool&&this.activeTool.currentSelection.length>0&&this.activeTool.addDrawingSelectionAppearance(e),e.content.style.visibility="unset",this.activeDrawing=e},e.prototype.createDrawingsBtns=function(e){var t=[];e.forEach((function(e){t.push("<li "+(e.id?'data-id="'+e.id+'"':"")+">"+e.name+"</li>")})),this.drawingsBtns.querySelector(".dropdown-content").innerHTML=t.join("")},e.prototype.close=function(){c.emptyNode(this.drawingsBtns.querySelector(".dropdown-content")),void 0!==this.drawingsStylesTag&&this.drawingsStylesTag.remove(),this.drawingsContainer.innerHTML=""},e}(),g=function(){function e(e,t,n){this.name=e,this.toolBtn=t,this.workspace=n,this.toolBtn.classList.add("btn-tool-enabled")}return e.prototype.kill=function(){this.toolBtn.classList.remove("btn-tool-enabled")},e}(),y=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.currentSelection=[],i.multipleSelection=!1,i.manageSelection=i.manageSelection.bind(i),r.drawingsContainer.addEventListener("click",i.manageSelection),i}return y(t,e),t.prototype.manageSelection=function(e){(this.selection=e.target.closest("[selectable]"),null!==this.selection)?this.multipleSelection?-1===this.currentSelection.indexOf(this.selection.dataset.id)?this.select(this.selection):this.deselect(this.selection.dataset.id):0===this.currentSelection.length?this.select(this.selection):this.selection.dataset.id!==this.currentSelection[0]?(this.deselect(this.currentSelection[0]),this.select(this.selection)):this.selection.dataset.id===this.currentSelection[0]&&this.deselect(this.currentSelection[0]):this.clearAllSelection();console.log("Selection ",this.currentSelection)},t.prototype.select=function(e){this.currentSelection.push(e.dataset.id),this.addSelectionAppearance(e)},t.prototype.deselect=function(e){var t=this.currentSelection.indexOf(e);if(t>-1){this.currentSelection.splice(t,1);var n=this.workspace.activeDrawing.content.querySelector('[data-id="'+e+'"]');n&&this.clearSelectionAppearance(n)}},t.prototype.removeDrawingSelectionAppearance=function(e){for(var t=0;t<this.currentSelection.length;t++){var n=e.content.querySelector('[data-id="'+this.currentSelection[t]+'"]');n&&this.clearSelectionAppearance(n)}},t.prototype.addDrawingSelectionAppearance=function(e){for(var t=0;t<this.currentSelection.length;t++){var n=e.content.querySelector('[data-id="'+this.currentSelection[t]+'"]');n&&this.addSelectionAppearance(n)}},t.prototype.clearSelectionAppearance=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.remove("selected")},t.prototype.addSelectionAppearance=function(e){for(var t=0;t<e.children.length;t++)e.children[t].classList.add("selected")},t.prototype.clearAllSelection=function(){if(this.currentSelection.length>0){for(var e=0;e<this.currentSelection.length;e++){var t=this.workspace.activeDrawing.content.querySelector('[data-id="'+this.currentSelection[e]+'"]');t&&this.clearSelectionAppearance(t)}this.currentSelection.length=0}},t.prototype.getDrawingSelectedElementsRefs=function(e){for(var t=[],n=0;n<this.currentSelection.length;n++){var r=e.content.querySelector('[data-id="'+this.currentSelection[n]+'"]');r&&t.push(r)}return t},t.prototype.kill=function(){e.prototype.kill.call(this),this.workspace.drawingsContainer.removeEventListener("click",this.manageSelection),this.clearAllSelection()},t}(g);class b extends v{constructor(e,t,n){if(super(e,t,n),console.log("Comment element tool enabled."),this.multipleSelection=!0,this.boundingBox,this.waitingForComment=!1,this.cancelComment=this.cancelComment.bind(this),n.commentForm.cancelCreateBtn.onclick=this.cancelComment,n.permissions.length>1){const e=[],t=window.getCurrentUser().emailAddress;n.permissions.forEach(n=>{n.emailAddress!==t&&e.push(`<option value="${n.emailAddress}">${n.displayName}</option>`)}),n.commentForm.mentionsInput.innerHTML=e.join(""),n.commentForm.showMentionsSection()}else n.commentForm.hideMentionsSection();this.addComment=this.addComment.bind(this),n.commentForm.addCommentBtn.onclick=this.addComment,n.commentForm.enableForm(),n.commentForm.reset(),this.hasUsedPanel=!1}manageSelection(e){super.manageSelection(e),this.currentSelection.length>0?(this.waitingForComment=!0,this.workspace.commentForm.buttonsVisibilityMode("create"),this.workspace.mainPanel.addSection("Comment",this.workspace.commentForm.formElement),this.workspace.mainPanel.open(),this.hasUsedPanel=!0):this.waitingForComment=!1}addComment(){if(0===this.currentSelection.length)return;let e;if(void 0===this.workspace.activeDrawing.commentsGroup&&this.workspace.activeDrawing.createCommentsGroup(),this.workspace.permissions.length>1&&(e=this.workspace.commentForm.getSelectedMembers()).length>0){const t=window.getCurrentUser().displayName,n=window.getCurrentUser().photoLink;this.workspace.pendingNotificationsToSend.push({emails:e,userName:t,userPhoto:n,textContent:this.workspace.commentForm.textInput.value,projectName:this.workspace.projectName,projectId:this.workspace.projectId})}const t=new h(this.currentSelection,this.workspace.commentForm.textInput.value,e),n=this.getDrawingSelectedElementsRefs(this.workspace.activeDrawing);t.createRepresentation(this.workspace.activeDrawing.commentsGroup,n);for(let e=0;e<this.currentSelection.length;e++)this.workspace.elementsComments.hasOwnProperty(this.currentSelection[e])||(this.workspace.elementsComments[this.currentSelection[e]]=[]),this.workspace.elementsComments[this.currentSelection[e]].push(t.id);console.log("elementsComments ",this.workspace.elementsComments),this.workspace.comments.push(t),console.log(this.workspace.comments),this.workspace.commentForm.reset(),this.workspace.mainPanel.close(),this.waitingForComment=!1,this.workspace.unsavedCommentsData(),this.workspace.drawings.forEach(e=>{e.id!==this.workspace.activeDrawing.id&&(e.commentsChanged=!0)}),super.clearAllSelection()}cancelComment(){this.workspace.mainPanel.close(),this.workspace.commentForm.reset(),this.waitingForComment=!1,super.clearAllSelection()}kill(){super.kill(),console.log("Comment element tool disabled."),this.waitingForComment&&(this.workspace.commentForm.reset(),this.workspace.mainPanel.close()),this.hasUsedPanel&&this.workspace.mainPanel.removeSection("Comment"),this.workspace.commentForm.addCommentBtn.onclick=null,this.workspace.commentForm.cancelCreateBtn.onclick=null}}class w extends v{constructor(e,t,n){super(e,t,n),console.log("Elements data tool enabled."),this.elementsData=n.elementsData,this.projectsData=n.projectsData,this.projectIndex=n.projectIndex,this.currentElementData,this.hasUsedPanel=!1}manageSelection(e){super.manageSelection(e),null!==this.selection&&this.currentSelection.length>0?(this.showElementData(this.selection.dataset.category,this.selection.dataset.id),this.selection.dataset.comment?(this.workspace.commentForm.viewComment(this.selection.dataset.comment),this.workspace.mainPanel.addSection("Comment",this.workspace.commentForm.formElement)):this.workspace.mainPanel.sections.find(e=>"Comment"===e.name)&&this.workspace.mainPanel.removeSection("Comment")):this.currentElementData&&(this.currentElementData=void 0,this.workspace.mainPanel.close(),console.log("Data table cleaned."))}async showElementData(e,t){let n=!0;if(this.elementsData[e])this.currentElementData=this.elementsData[e].instances[t],console.log(this.currentElementData);else{const r=this.projectsData[this.projectIndex].elementsData.find(t=>t.name.replace(".json","")===e);void 0!==r?await l.getFileContent(r.id).then(n=>{this.elementsData[e]=JSON.parse(n.body),this.currentElementData=this.elementsData[e].instances[t],console.log(this.currentElementData)},e=>{n=!1,console.log(e)}):console.log("There is no data for that element.")}if(n){this.workspace.propsTablesContainer.innerHTML=this.createDataTable(this.currentElementData.properties);const e=[{name:"Properties",body:this.workspace.propsTablesContainer}];this.currentElementData.parameters.length>0&&(this.workspace.paramsTablesContainer.innerHTML=this.createDataTable(this.currentElementData.parameters),e.push({name:"Parameters",body:this.workspace.paramsTablesContainer})),this.workspace.mainPanel.addSections(e),this.workspace.mainPanel.open(),this.hasUsedPanel=!0}}createDataTable(e){const t=[],n=[];for(let r=0;r<e.length;r++){const i=e[r].category,o=t.indexOf(i),a=`<tr><th>${e[r].name}</th><td>${e[r].value}</td></tr>`;-1!==o?n[o].push(a):(n.push([`<table class="data-table"><thead><tr><th colspan="2">${i}</th></tr></thead>`,a]),t.push(i))}const r=[];for(let e=0;e<n.length;e++)r.push(n[e].join("")+"</tbody></table>");return r.join("")}kill(){super.kill(),this.workspace.mainPanel.isOpen&&this.workspace.mainPanel.close(),this.hasUsedPanel&&(this.workspace.mainPanel.removeSection("Properties"),this.workspace.mainPanel.removeSection("Parameters")),console.log("Elements data tool disabled.")}}var T=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},I=function(){function e(e,t){var n=this;this.pendingToRemove=[],this.pendingToAdd=[],this.htmlContainer=e,this.shareForm=e.querySelector(".share-form"),this.shareFormErrorMsg=e.querySelector(".share-form > .error-msg"),this.confirmChangesBtns=e.querySelector(".modal-main-btns"),this.saveChangesBtn=e.querySelector(".save-changes-btn"),this.cancelChangesBtn=e.querySelector(".cancel-changes-btn"),this.waitingAnimation=e.querySelector(".loader-container"),this.currentUsersContent=e.querySelector(".current-users"),this.currentUsersTable=e.querySelector(".current-users tbody"),this.pendingUsersContent=e.querySelector(".pending-users"),this.pendingUsersToAddTable=e.querySelector(".pending-users tbody"),this.shareNotificationContainer=e.querySelector(".share-notification"),this.shareNotificationInput=e.querySelector(".share-notification > input"),this.app=t,this.projectsList=t.projectsList,this.currentUsersTable.addEventListener("click",(function(e){if(e.target.closest("[data-action]")){var t=e.target.closest("[data-action]");"stage"===t.dataset.action?n.stageMemberToRemove(t.parentElement):n.unstageMemberToRemove(t.parentElement)}})),this.pendingUsersToAddTable.addEventListener("click",(function(e){e.target.closest("[data-action]")&&n.unstageMemberToAdd(e.target.closest("[data-action]").parentElement)})),this.saveChanges=this.saveChanges.bind(this),this.stageMemberToAdd=this.stageMemberToAdd.bind(this),this.shareForm.onsubmit=this.stageMemberToAdd}return e.prototype.setUpDialog=function(e){this.pendingToRemove=[],c.emptyNode(this.currentUsersTable),this.pendingToAdd=[],c.emptyNode(this.pendingUsersToAddTable),this.pendingUsersContent.classList.add("hidden"),this.shareNotificationContainer.classList.add("hidden");for(var t=0;t<this.confirmChangesBtns.children.length;t++)this.confirmChangesBtns.children[t].classList.add("disabled");if(this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null,this.projectData=e,this.projectItem=this.projectsList.querySelector('button[data-proj-id="'+e.id+'"]'),e.shared){var n=[],r=window.getCurrentUser().emailAddress;e.permissions.forEach((function(e){n.push('\n          <tr data-permission="'+e.id+'">\n            <td class="user-data">\n              <img src="'+e.photoLink+'">\n              <div>\n                <span>'+(e.emailAddress===r?"You":e.displayName)+"</span>\n                <span>"+e.emailAddress+"</span>\n              </div>\n            </td>\n            "+("owner"===e.role?'<td title="Project owner"><svg><use href="#keyIcon"></use></svg></td>':'<td class="action-btn" data-action="stage"><svg><use href="#crossIcon"></use></svg></td>')+"\n          </tr>")})),this.currentUsersTable.innerHTML=n.join(""),this.currentUsersContent.classList.remove("empty")}else this.currentUsersContent.classList.add("empty")},e.prototype.stageMemberToAdd=function(e){e.preventDefault();var t=e.target.elements.namedItem("email").value;if(""===t||this.pendingToAdd.includes(t)||void 0!==this.projectData.permissions.find((function(e){return e.emailAddress===t})))this.shareFormErrorMsg.classList.remove("hidden"),console.log("Not valid input.");else if(this.shareFormErrorMsg.classList.add("hidden"),this.pendingToAdd.push(t),this.pendingUsersToAddTable.insertAdjacentHTML("beforeend",'\n        <tr data-email="'+t+'">\n          <td class="user-data"><span>'+t+'</span></td>\n          <td class="action-btn" data-action="stage"><svg><use href="#crossIcon"></use></svg></td>\n        </tr>'),e.target.elements.namedItem("email").value="",1===this.pendingToAdd.length&&(this.pendingUsersContent.classList.remove("hidden"),this.shareNotificationContainer.classList.remove("hidden"),this.shareNotificationInput.checked=!0,0===this.pendingToRemove.length)){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.remove("disabled");this.saveChangesBtn.onclick=this.saveChanges,this.cancelChangesBtn.onclick=this.app.closeModalDialog}},e.prototype.unstageMemberToAdd=function(e){var t=this.pendingToAdd.indexOf(e.dataset.email);if(this.pendingToAdd.splice(t,1),e.remove(),0===this.pendingToAdd.length&&(this.pendingUsersContent.classList.add("hidden"),this.shareNotificationContainer.classList.add("hidden"),0===this.pendingToRemove.length)){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.add("disabled");this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null}},e.prototype.stageMemberToRemove=function(e){this.pendingToRemove.push(e.dataset.permission),e.classList.add("to-delete");var t=e.querySelector(".action-btn");if(t.innerHTML='<svg><use href="#reloadIcon"></use></svg>',t.dataset.action="unstage",0===this.pendingToAdd.length&&1===this.pendingToRemove.length){for(var n=0;n<this.confirmChangesBtns.children.length;n++)this.confirmChangesBtns.children[n].classList.remove("disabled");this.saveChangesBtn.onclick=this.saveChanges,this.cancelChangesBtn.onclick=this.app.closeModalDialog}},e.prototype.unstageMemberToRemove=function(e){var t=this.pendingToRemove.indexOf(e.dataset.permission);this.pendingToRemove.splice(t,1),e.classList.remove("to-delete");var n=e.querySelector(".action-btn");if(n.innerHTML='<svg><use href="#crossIcon"></use></svg>',n.dataset.action="stage",0===this.pendingToRemove.length&&0===this.pendingToAdd.length){for(var r=0;r<this.confirmChangesBtns.children.length;r++)this.confirmChangesBtns.children[r].classList.add("disabled");this.saveChangesBtn.onclick=null,this.cancelChangesBtn.onclick=null}},e.prototype.addStagedMembers=function(){var e=this,t=[];return this.pendingToAdd.forEach((function(n,r){t.push(l.shareFile(e.projectData.id,n,600*r))})),Promise.all(t)},e.prototype.removeStagedMembers=function(){var e=this,t=[];return this.pendingToRemove.forEach((function(n){t.push(l.stopSharingFile(e.projectData.id,n))})),Promise.all(t)},e.prototype.saveChanges=function(){return T(this,void 0,void 0,(function(){var e,t,n=this;return S(this,(function(r){switch(r.label){case 0:return this.waitingAnimation.classList.remove("hidden"),e=!0,t=!0,this.pendingToRemove.length>0?[4,this.removeStagedMembers().then((function(e){n.pendingToRemove.forEach((function(e){var t=n.projectData.permissions.findIndex((function(t){return t.id===e}));n.projectData.permissions.splice(t,1)}))}),(function(e){console.log(e),t=!1}))]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.pendingToAdd.length>0?[4,this.addStagedMembers().then((function(e){e.forEach((function(e,t){n.projectData.permissions.push({id:e.result.id,emailAddress:n.pendingToAdd[t],role:e.result.role,displayName:e.result.displayName,photoLink:e.result.photoLink})})),n.shareNotificationInput.checked&&l.sendSharingProjectEmail(window.getCurrentUser().displayName,n.pendingToAdd,n.projectData.name,n.projectData.id),window.saveMessagingDeviceToken()}),(function(t){console.log(t),e=!1}))]:[3,4];case 3:r.sent(),r.label=4;case 4:return e&&t?(1===this.projectData.permissions.length?(this.projectData.shared=!1,this.projectItem.querySelector(".sharedIcon")&&this.projectItem.querySelector(".sharedIcon").remove()):(this.projectData.shared=!0,this.projectItem.querySelector(".sharedIcon")||this.projectItem.insertAdjacentHTML("afterbegin",'<img class="sharedIcon" src="src/assets/icons/shareIcon.svg">')),this.app.showMessage("success","Project members updated successfully.",5e3)):this.app.showMessage("error","Something went wrong, member changes could no be saved."),this.waitingAnimation.classList.add("hidden"),this.app.closeModalDialog(),[2]}}))}))},e}();class E{constructor(){this.notificationsBtn=document.getElementById("notificationBtn"),this.notificationsContainer=document.getElementById("notificationsContainer"),this.notificationsList=document.querySelector("#notificationsContainer > .notifications-body"),this.notificationsBtn.onclick=()=>this.notificationsContainer.classList.toggle("open"),this.notificationsList.addEventListener("click",e=>{e.target.closest("li")&&this.viewNotification(e.target.closest("li").dataset.id)}),this.notifications=[]}createNotificaction(e){const t=document.createElement("li"),n=c.uuidv4();t.dataset.id=n,t.classList.add("pending"),t.innerHTML=`\n      <img class="notification-thumb" src="${e.photoLink}">\n      <div class="notification-content">\n        <h4>${e.author} mentioned you in a comment on the project ${e.projectName}</h4>\n        <p>${e.text}</p>\n      </div>`,this.notificationsList.prepend(t),this.notifications.push({id:n,representation:t,state:"pending",data:e}),this.notificationsBtn.classList.add("enabled"),1===this.notifications.length&&this.notificationsContainer.classList.remove("empty")}deleteNotificaction(e){const t=this.notifications.findIndex(t=>t.id===e);this.notifications[t].representation.remove(),this.notifications.splice(t,1)}viewNotification(e){const t=this.notifications.find(t=>t.id===e);t.state="read",t.representation.classList.remove("pending"),void 0===this.notifications.find(e=>"pending"===e.state)&&this.notificationsBtn.classList.remove("enabled")}}class C{constructor(e,t){this.htmlContainer=e,this.renameForm=e.querySelector("form"),this.input=e.querySelector("form > div:first-child > input"),this.renameProjectErrorMsg=e.querySelector(".error-msg"),this.cancelBtn=e.querySelector("form > div:last-child > .cancel-btn"),this.app=t,this.projectListItem,this.projectId,this.currentName,this.emptyInputValue=new RegExp(/^(\s|\t)*$/),this.renameProject=this.renameProject.bind(this),this.renameForm.onsubmit=this.renameProject,this.cancelBtn.onclick=e=>{e.preventDefault(),this.setInputValue(""),t.closeModalDialog()}}setUpDialog(e){this.projectListItem=e,this.projectId=e.dataset.projId,this.currentName=e.dataset.name,this.renameProjectErrorMsg.classList.add("hidden"),this.setInputValue(this.currentName)}async renameProject(e){if(e.preventDefault(),""===this.input.value||this.emptyInputValue.test(this.input.value))this.renameProjectErrorMsg.classList.remove("hidden");else if(this.input.value.trim()===this.currentName)this.setInputValue(""),this.app.closeModalDialog();else{this.renameProjectErrorMsg.classList.add("hidden");try{const e=await l.renameFile(this.projectId,this.input.value.trim());200===e.status?(this.projectListItem.querySelector("h4").innerText=e.result.name,this.projectListItem.dataset.name=e.result.name,this.setInputValue(""),this.app.closeModalDialog(),this.app.showMessage("success","Project renamed successfully.",5e3)):(this.app.showMessage("error","It was not possible to rename the project."),this.app.closeModalDialog(),console.error("Something went wrong renaming a project. ",e))}catch(e){this.app.showMessage("error","It was not possible to rename the project."),this.app.closeModalDialog(),console.error("Something went wrong renaming a project. ",e)}}}setInputValue(e){this.input.value=e}}class _{constructor(){this.HTMLContainer=document.createElement("div"),this.HTMLContainer.id="contextMenu",this.menuListContainer=document.createElement("ul"),this.HTMLContainer.appendChild(this.menuListContainer),this.HTMLContainer.style.display="none",this.visible=!1,window.addEventListener("click",()=>{this.visible&&this.toggleMenu("hide")}),window.addEventListener("contextmenu",e=>{e.preventDefault();const t=e.target.closest("[data-cxmenu]");t&&t.contextMenuData?(this.clearMenu(),this.generateMenu(t.contextMenuData),this.setPosition(e.pageY,e.pageX)):this.visible&&this.toggleMenu("hide")}),window.document.body.appendChild(this.HTMLContainer)}toggleMenu(e){this.HTMLContainer.style.display="show"===e?"block":"none",this.visible=!this.visible}setPosition(e,t){this.HTMLContainer.style.left=`${t}px`,this.HTMLContainer.style.top=`${e}px`,this.toggleMenu("show")}clearMenu(){this.menuListContainer.childNodes.forEach(e=>e.onclick=null),c.emptyNode(this.menuListContainer)}generateMenu(e){const t=new DocumentFragment;for(let n=0;n<e.length;n++){const r=document.createElement("li");r.innerText=e[n].name,r.onclick=e[n].action,t.appendChild(r)}this.menuListContainer.appendChild(t)}}class D{constructor(e,t){this.HTMLContainer=document.createElement("button"),"temporal"===e.id&&this.HTMLContainer.classList.add("unsync"),this.HTMLContainer.dataset.projId=e.id,this.HTMLContainer.dataset.name=e.name,this.HTMLContainer.classList.add("projectItem");let n=[];e.shared&&n.push('<svg class="sharedIcon"><use href="#sharedIcon" /></svg>'),e.thumbId?n.push(`<img class="thumb" src="https://drive.google.com/uc?id=${e.thumbId}">`):n.push('<svg class="thumb" xmlns="http://www.w3.org/2000/svg" viewBox="-100 -50 350 210"><path d="M143,10.44H65.27V7a7,7,0,0,0-7-7H7A7,7,0,0,0,0,7V103a7,7,0,0,0,7,7H65V70.18H85V110h58a7,7,0,0,0,7-7V17.41A7,7,0,0,0,143,10.44ZM125,53.49H105v-20h20Z" style="fill:#e6e6e6"/></svg>'),n.push(`<h4>${e.name}</h4>`),this.HTMLContainer.innerHTML=n.join(""),this.HTMLContainer.dataset.cxmenu="",this.HTMLContainer.contextMenuData=[{name:"Delete",action:()=>{t.showViewportDialog("action",`Are you sure you want to delete the ${e.name} project?`,[{name:"Delete",function:()=>{t.showViewportDialog("loader",`Deleting ${e.name} project.`),l.deleteFile(e.id).then(n=>{this.HTMLContainer.remove();const r=t.projectsData.findIndex(t=>t.id===e.id);t.projectsData.splice(r,1),t.hideViewportMessage(),t.showMessage("success","Project deleted successfully")})}},{name:"Cancel",function:()=>{t.hideViewportMessage()}}])}},{name:"Share project",action:()=>{t.shareProjectDialog.setUpDialog(e),t.showModalDialog(t.shareProjectDialog.htmlContainer),t.modalDialogContainer.classList.add("grayTranslucent")}},{name:"Rename",action:()=>{t.renameProjectDialog.setUpDialog(this.HTMLContainer),t.showModalDialog(t.renameProjectDialog.htmlContainer)}}]}}var k,N=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},x=function(){function e(){var e=this;this.userInfoContainer=document.getElementById("user-info"),this.workspacesContainer=document.getElementById("workspaces"),this.projectsListBtn=document.getElementById("projectsListBtn"),this.drawingsBtns=document.getElementById("drawingsBtns"),this.toolbarsContainer=document.getElementById("toolbarsContainer"),this.modalDialogContainer=document.getElementById("modalDialogContainer"),this.modalDialogContent=this.modalDialogContainer.querySelector(".modal-content"),this.modalDialogsStorage=document.getElementById("modalDialogsStorage"),this.closeModalBtn=document.getElementById("closeModalBtn"),this.closeModalDialog=this.closeModalDialog.bind(this),this.closeModalBtn.onclick=this.closeModalDialog,this.viewportMessage=document.getElementById("viewportMessage"),this.projectsListContainer=document.getElementById("projectsListContainer"),this.projectsList=document.getElementById("projectsList"),this.closeProjectsListBtn=document.getElementById("closeProjectsListBtn"),this.panelsStorage=document.getElementById("panelsStorage"),this.saveBtn=document.getElementById("saveBtn"),this.saveCommentsData=this.saveCommentsData.bind(this),this.saveBtn.onclick=this.saveCommentsData,this.closeProjectsList=this.closeProjectsList.bind(this),this.projectsListBtn.onclick=function(){"true"===e.projectsListBtn.dataset.open?e.closeProjectsList():"false"===e.projectsListBtn.dataset.open&&e.openProjectsList()},this.closeProjectsListBtn.addEventListener("click",this.closeProjectsList),this.goToProject=this.goToProject.bind(this),this.projectsList.addEventListener("click",this.goToProject),this.uploadFileForm=document.getElementById("uploadFileForm"),this.fileInput=document.getElementById("fileInput"),this.submitFileBtn=this.uploadFileForm.querySelector('button[type="submit"]'),document.getElementById("newProjectBtn").addEventListener("click",(function(){e.showModalDialog(e.uploadFileForm),e.modalDialogContainer.classList.add("grayTranslucent")})),this.fileInput.addEventListener("change",(function(){e.fileInput.files.length>0?(e.fileInput.nextElementSibling.innerHTML=e.fileInput.files[0].name,e.submitFileBtn.classList.remove("disabled")):(e.fileInput.nextElementSibling.innerHTML="Choose a file",e.submitFileBtn.classList.add("disabled"))})),this.uploadFileForm.onsubmit=function(t){t.preventDefault(),document.getElementById("loadingFile").style.display="unset",e.submitFileBtn.classList.add("disabled"),e.submitFileBtn.innerHTML="Uploading file",e.fileInput.nextElementSibling.style.display="none";var n=t.target.elements.namedItem("file").files[0];l.createProject(n,e,e.lastUploadedProject).then((function(t){e.updateProjectsList(t),e.closeModalDialog(),e.showMessage("success","Project uploaded successfully."),e.fileInput.value="",document.getElementById("loadingFile").style.display="none",e.fileInput.nextElementSibling.innerHTML="Choose a file",e.submitFileBtn.innerHTML="Upload",e.fileInput.nextElementSibling.style.display="unset"}),(function(t){e.closeModalDialog(),e.updateProjectsList(e.lastUploadedProject),console.error(t)}))},this.renameProjectDialog=new C(document.getElementById("renameProjectForm"),this),this.shareProjectDialog=new I(document.getElementById("shareProjectDialog"),this),this.messageContainer=document.getElementById("messageContainer"),this.closeMessage=this.closeMessage.bind(this),this.messageContainer.querySelector("button").onclick=this.closeMessage,window.onresize=this.adjustItems,document.getElementById("tool-4").addEventListener("click",(function(t){return e.currentWorkspace.manageTools(t,w,"elementsDataTool")})),document.getElementById("tool-5").addEventListener("click",(function(t){return e.currentWorkspace.manageTools(t,b,"commentsTool")})),this.notificationsManager=new E,this.contextMenu=new _}return e.prototype.setUserInfo=function(){return N(this,void 0,void 0,(function(){var e;return A(this,(function(t){switch(t.label){case 0:return[4,l.getUserInfo()];case 1:return e=t.sent(),this.userInfo=JSON.parse(e.body).user,this.userInfoContainer.innerHTML="\n      <img src="+this.userInfo.photoLink+">\n      <span>\n        <span>"+this.userInfo.displayName+'</span><span class="email">'+this.userInfo.emailAddress+"</span>\n      </span>",[2]}}))}))},e.prototype.saveCommentsData=function(){return N(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,c,u,h,d=this;return A(this,(function(f){switch(f.label){case 0:return this.currentWorkspace&&this.currentWorkspace.commentsChangesUnsaved?(this.commentsChangesUnsaved=!1,this.saveBtn.classList.remove("enabled"),this.saveBtn.classList.add("progress"),e=void 0,t=[],this.currentWorkspace.comments.forEach((function(e){t.push({elementsIds:e.elementsIds,content:e.content,mentions:e.mentions})})),n=JSON.stringify(t),this.currentWorkspace.commentsFileId?[3,8]:[4,l.uploadFile(n,"application/json","comments.json",this.currentWorkspace.projectId)]):[3,13];case 1:if(!(r=f.sent()).ok||200!==r.status)return[3,6];f.label=2;case 2:return f.trys.push([2,4,,5]),i=new TextDecoder("utf-8"),[4,r.body.getReader().read()];case 3:return o=f.sent(),a=o.value,o.done,s=JSON.parse(i.decode(a)).id,this.currentWorkspace.commentsFileId=s,e=!0,[3,5];case 4:return c=f.sent(),console.log("Error decoding the new comments.json file id: ",c),[3,5];case 5:return[3,7];case 6:e=!1,f.label=7;case 7:return[3,10];case 8:return[4,l.updateFileContent(n,"application/json",this.currentWorkspace.commentsFileId)];case 9:(u=f.sent()).ok&&200===u.status&&(e=!0),f.label=10;case 10:return e&&this.currentWorkspace.pendingNotificationsToSend.length>0?(h=[],this.currentWorkspace.pendingNotificationsToSend.forEach((function(e){var t=l.sendNotification(e.emails,e.userName,e.userPhoto,e.textContent,e.projectName,e.projectId);h.push(t)})),[4,Promise.all(h).then((function(e){console.log("Users notified successfully"),d.currentWorkspace.pendingNotificationsToSend.length=0}),(function(e){console.warn("Users couldn't be notified. ",e)}))]):[3,12];case 11:f.sent(),f.label=12;case 12:e?(this.saveBtn.classList.remove("progress"),this.saveBtn.classList.add("disabled"),console.log("Data saved successfully.")):(this.commentsChangesUnsaved=!0,this.saveBtn.classList.remove("progress"),this.saveBtn.classList.add("enabled"),this.showMessage("error","Something went wrong and data could not be saved."),console.error("Something went wrong trying to save. Retry again.")),f.label=13;case 13:return[2]}}))}))},e.prototype.goToProject=function(e){var t=this,n=e.target.closest("[data-proj-id]");null!==n&&(this.currentWorkspace&&this.currentWorkspace.projectId===n.dataset.projId||(this.lastUploadedProject&&n.dataset.projId===this.lastUploadedProject.id?("temporal"===this.lastUploadedProject.id&&console.log("Show a message indicating that the project can be accessed but in viewer mode because it couldnt be saved."),this.openProject(this.lastUploadedProject),this.previousActiveItem&&this.previousActiveItem.classList.remove("current"),n.classList.add("current"),this.previousActiveItem=n,this.projectsListBtn.style.display="unset"):(this.showViewportDialog("loader","Loading project "+n.dataset.name),l.fetchProject(n.dataset.projId,this).then((function(e){t.openProject(e),t.previousActiveItem&&t.previousActiveItem.classList.remove("current"),n.classList.add("current"),t.previousActiveItem=n,t.projectsListBtn.style.display="unset",t.hideViewportMessage()}),(function(e){console.log(e)})))))},e.prototype.openProject=function(e){this.currentWorkspace&&this.currentWorkspace.close(),this.currentWorkspace=new m(e,this),this.projectsListContainer.style.display="none",history.replaceState({projectTitle:e.name},e.name,"?id="+e.id)},e.prototype.closeProjectsList=function(){this.projectsListContainer.style.display="none",this.drawingsBtns.style.display="unset",this.toolbarsContainer.style.display="flex",this.projectsListBtn.dataset.open="false"},e.prototype.openProjectsList=function(){var e=this;void 0===this.currentWorkspace?this.closeProjectsListBtn.classList.add("hidden"):this.closeProjectsListBtn.classList.remove("hidden"),this.projectsListContainer.style.display="block",this.projectsListBtn.dataset.open="true",this.drawingsBtns.style.display="none",this.toolbarsContainer.style.display="none",(void 0===this.projectsData||this.projectsData.length<=1)&&(this.showViewportDialog("loader","Loading projects"),l.listProjectItems(this).then((function(t){e.createHTMLProjectsList(t),e.projectsList.childNodes.forEach((function(t){t.dataset&&t.dataset.projId===e.currentWorkspace.projectId&&(t.classList.add("current"),e.previousActiveItem=t)})),e.hideViewportMessage()}),(function(t){e.projectsList.innerHTML='<p class="empty-msg">There are no projects. Upload one!</p>',e.hideViewportMessage()})))},e.prototype.createHTMLProjectsList=function(e){var t=this;e.forEach((function(e){var n=new D(e,t);t.projectsList.appendChild(n.HTMLContainer)})),this.adjustItems()},e.prototype.adjustItems=function(){var e=Number(getComputedStyle(this.projectsList).getPropertyValue("--items-h")),t=this.projectsList.children.length;this.projectsList.style.setProperty("--remaining-items",(Math.ceil(t/e)*e-t).toString())},e.prototype.updateProjectsList=function(e){this.projectsData.length<=1&&this.projectsList.querySelector(".empty-msg").remove();var t=new D(e,this);this.projectsList.prepend(t.HTMLContainer),this.adjustItems()},e.prototype.showMessage=function(e,t,n){var r=this;switch(void 0===n&&(n=void 0),""!==this.messageContainer.dataset.type?(this.messageContainer.classList.remove(this.messageContainer.dataset.type),this.messageTimerId&&(window.clearTimeout(this.messageTimerId),this.messageTimerId=void 0)):this.messageContainer.style.display="flex",this.messageContainer.dataset.type=e,this.messageContainer.querySelector("p").innerText=t,e){case"success":this.messageContainer.classList.add("success");break;case"warning":this.messageContainer.classList.add("warning");break;case"error":this.messageContainer.classList.add("error")}n&&(this.messageTimerId=window.setTimeout((function(){return r.closeMessage()}),n))},e.prototype.closeMessage=function(){this.messageContainer.style.display="none",this.messageContainer.classList.remove(this.messageContainer.dataset.type),this.messageContainer.dataset.type="",this.messageTimerId&&(clearTimeout(this.messageTimerId),this.messageTimerId=void 0)},e.prototype.showViewportDialog=function(e,t,n){void 0===n&&(n=[]),this.viewportMessage.querySelector(".btns-container")&&this.viewportMessage.querySelectorAll(".btns-container > button").forEach((function(e){return e.onclick=null})),c.emptyNode(this.viewportMessage);var r=document.createElement("div");if("loader"===e)r.innerHTML="<p>"+t+'</p><svg class="svg-loader"><use href="#vaLoader"/></svg>';else if("action"===e&&n.length>0){r.innerHTML="<p>"+t+"</p>";var i=document.createElement("div");i.classList.add("btns-container"),n.forEach((function(e){var t=document.createElement("button");t.innerHTML=e.name,t.classList.add("buttonBase","light"),t.onclick=e.function,i.appendChild(t)})),r.appendChild(i)}else"message"===e&&(r.innerHTML="<p>"+t+"</p>");this.viewportMessage.appendChild(r),this.viewportMessage.classList.add("active")},e.prototype.hideViewportMessage=function(){this.viewportMessage.classList.remove("active")},e.prototype.showModalDialog=function(e,t,n){void 0===t&&(t="translucent"),void 0===n&&(n=!0),this.modalDialogContainer.classList.value="","translucent"===t?this.modalDialogContainer.classList.add("grayTranslucent"):"opaque"===t&&this.modalDialogContainer.classList.add("lightOpaque"),this.closeModalBtn.style.display=n?"unset":"none",this.modalDialogContent.appendChild(e),this.modalDialogContainer.style.display="flex"},e.prototype.closeModalDialog=function(){var e=this.modalDialogContent.firstElementChild;this.modalDialogContainer.style.display="none",this.modalDialogsStorage.appendChild(e)},e.prototype.start=function(e){var t=this;void 0===e&&(e=""),document.querySelector("header").style.display="flex",document.querySelector("main").style.display="block",""!==e?(this.showViewportDialog("loader","Loading project"),l.fetchProject(e,this).then((function(e){t.currentWorkspace=new m(e,t),t.createHTMLProjectsList([e]),t.projectsListBtn.style.display="unset",t.hideViewportMessage(),e.permissions.length>1&&window.saveMessagingDeviceToken()}),(function(e){console.log(e);var n=void 0===e.body?e:"Message: "+JSON.parse(e.body).error.message+" Code: "+JSON.parse(e.body).error.code;t.showViewportDialog("action",n,[{name:"View projects list",function:function(){t.openProjectsList(),""!==location.search&&history.replaceState({page:"Projects list"},"Projects list",location.href.replace(location.search,""))}}])}))):(""!==location.search&&history.replaceState({page:"Projects list"},"Projects list",location.href.replace(location.search,"")),this.projectsListContainer.style.display="block",this.showViewportDialog("loader","Loading projects"),l.listProjectItems(this).then((function(e){if(t.createHTMLProjectsList(e),t.hideViewportMessage(),window.thereIsMessaging)for(var n=0;n<e.length;n++)if(e[n].permissions.length>1){window.saveMessagingDeviceToken();break}}),(function(e){t.projectsList.innerHTML='<p class="empty-msg">There are no projects. Upload one!</p>',t.hideViewportMessage()})))},e}(),M=n(4),L=n(3),P=n.n(L),O=n(2),R=n(0),j=n(1),B=n(7),F="@firebase/installations",V="0.3.8",q=1e4,U="w:"+V,W="FIS_v2",z="https://firebaseinstallations.googleapis.com/v1",K=36e5,G=((k={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',k["not-registered"]="Firebase Installation is not registered.",k["installation-not-found"]="Firebase Installation not found.",k["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',k["app-offline"]="Could not process request. Application offline.",k["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",k),Q=new j.ErrorFactory("installations","Installations",G);function H(e){return e instanceof j.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(e){var t=e.projectId;return z+"/projects/"+t+"/installations"}function J(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function X(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(R.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Q.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function $(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Z(e,t){var n=t.refreshToken,r=$(e);return r.append("Authorization",function(e){return W+" "+e}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function ee(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t;return Object(R.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function te(e,t){var n=t.fid;return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,a,s;return Object(R.__generator)(this,(function(c){switch(c.label){case 0:return t=Y(e),r=$(e),i={fid:n,authVersion:W,appId:e.appId,sdkVersion:U},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,ee((function(){return fetch(t,o)}))];case 1:return(a=c.sent()).ok?[4,a.json()]:[3,3];case 2:return s=c.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:J(s.authToken)}];case 3:return[4,X("Create Installation",a)];case 4:throw c.sent()}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var re=/^[cdef][\w-]{21}$/,ie="";function oe(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(R.__spread)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return re.test(t)?t:ie}catch(e){return ie}}var ae,se="firebase-installations-database",ce=1,ue="firebase-installations-store",le=null;function he(){return le||(le=Object(B.openDb)(se,ce,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(ue)}}))),le}function de(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(R.__generator)(this,(function(o){switch(o.label){case 0:return n=me(e),[4,he()];case 1:return r=o.sent(),[4,(i=r.transaction(ue,"readwrite")).objectStore(ue).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function fe(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(R.__generator)(this,(function(i){switch(i.label){case 0:return t=me(e),[4,he()];case 1:return n=i.sent(),[4,(r=n.transaction(ue,"readwrite")).objectStore(ue).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function pe(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(R.__generator)(this,(function(c){switch(c.label){case 0:return n=me(e),[4,he()];case 1:return r=c.sent(),i=r.transaction(ue,"readwrite"),[4,(o=i.objectStore(ue)).get(n)];case 2:return a=c.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return c.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:c.sent(),c.label=6;case 6:return[4,i.complete];case 7:return c.sent(),[2,s]}}))}))}function me(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(R.__generator)(this,(function(i){switch(i.label){case 0:return[4,pe(e,(function(n){var r=function(e){return be(e||{fid:oe(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(Q.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(R.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,te(e,t)];case 1:return n=i.sent(),[2,de(e,n)];case 2:return H(r=i.sent())&&409===r.serverCode?[4,fe(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,de(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ye(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return(n=i.sent()).fid!==ie?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function ye(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(R.__generator)(this,(function(o){switch(o.label){case 0:return[4,ve(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,ne(100)];case 3:return o.sent(),[4,ve(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,ge(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function ve(e){return pe(e,(function(e){if(!e)throw Q.create("installation-not-found");return be(e)}))}function be(e){return 1===(t=e).registrationStatus&&t.registrationTime+q<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function we(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(R.__awaiter)(this,void 0,void 0,(function(){var e,i,o,a,s,c,u;return Object(R.__generator)(this,(function(l){switch(l.label){case 0:return e=function(e,t){var n=t.fid;return Y(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t),i=Z(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:U}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,ee((function(){return fetch(e,s)}))];case 1:return(c=l.sent()).ok?[4,c.json()]:[3,3];case 2:return u=l.sent(),[2,J(u)];case 3:return[4,X("Generate Auth Token",c)];case 4:throw l.sent()}}))}))}function Te(e,t){return void 0===t&&(t=!1),Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(R.__generator)(this,(function(o){switch(o.label){case 0:return[4,pe(e.appConfig,(function(r){if(!Ie(r))throw Q.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+K}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(R.__generator)(this,(function(i){switch(i.label){case 0:return[4,Se(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,ne(100)];case 3:return i.sent(),[4,Se(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Te(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw Q.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(R.__assign)(Object(R.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(R.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,we(e,t)];case 1:return n=o.sent(),i=Object(R.__assign)(Object(R.__assign)({},t),{authToken:n}),[4,de(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!H(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,fe(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(R.__assign)(Object(R.__assign)({},t),{authToken:{requestStatus:0}}),[4,de(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Se(e){return pe(e,(function(e){if(!Ie(e))throw Q.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+q<Date.now()?Object(R.__assign)(Object(R.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function Ie(e){return void 0!==e&&2===e.registrationStatus}function Ee(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t;return Object(R.__generator)(this,(function(n){switch(n.label){case 0:return[4,ge(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(R.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return Y(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t),r=Z(e,t),i={method:"DELETE",headers:r},[4,ee((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,X("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function _e(e){return Q.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(ae=P.a).INTERNAL.registerComponent(new O.Component("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t,n;if(!e||!e.options)throw _e("App Configuration");if(!e.name)throw _e("App Name");try{for(var r=Object(R.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw _e(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(R.__generator)(this,(function(i){switch(i.label){case 0:return[4,ge(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):Te(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ee(e.appConfig)];case 1:return n.sent(),[4,Te(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(R.__generator)(this,(function(r){switch(r.label){case 0:return[4,pe(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw Q.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw Q.create("app-offline");case 3:return[4,Ce(t,n)];case 4:return r.sent(),[4,fe(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)}}}),"PUBLIC")),ae.registerVersion(F,V);
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var De,ke,Ne,Ae="measurementId",xe="firebase_id",Me="origin",Le="https://www.googletagmanager.com/gtag/js";function Pe(e,t,n){var r=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];window[t].push(arguments)};return window[n]&&"function"==typeof window[n]&&(r=window[n]),window[n]=function(e,t){return function(n,r,i){if(n===De.EVENT){var o=[];if(i&&i.send_to){var a=i.send_to;Array.isArray(a)||(a=[a]);for(var s=0,c=a;s<c.length;s++){var u=c[s],l=t[u];if(!l){o=[];break}o.push(l)}}if(0===o.length)for(var h=0,d=Object.values(t);h<d.length;h++){var f=d[h];o.push(f)}Promise.all(o).then((function(){return e(De.EVENT,r,i||{})})).catch((function(e){return console.error(e)}))}else if(n===De.CONFIG){(t[r]||Promise.resolve()).then((function(){e(De.CONFIG,r,i)})).catch((function(e){return console.error(e)}))}else e(De.SET,r)}}(r,e),{gtagCore:r,wrappedGtag:window[n]}}!function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(De||(De={})),function(e){e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(ke||(ke={}));var Oe,Re,je=((Ne={})["no-ga-id"]='"'+Ae+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',Ne["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",Ne["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Ne["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",Ne),Be=new j.ErrorFactory("analytics","Analytics",je),Fe={},Ve="dataLayer",qe="gtag",Ue=!1;function We(e){if(Ue)throw Be.create("already-initialized");e.dataLayerName&&(Ve=e.dataLayerName),e.gtagName&&(qe=e.gtagName)}function ze(e,t){var n=e.options[Ae];if(!n)throw Be.create("no-ga-id");if(null!=Fe[n])throw Be.create("already-exists",{id:n});if(!Ue){(function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Le))return r}return null}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)()||function(e){var t=document.createElement("script");t.src=Le+"?l="+e,t.async=!0,document.head.appendChild(t)}(Ve),function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ve);var r=Pe(Fe,Ve,qe),i=r.wrappedGtag,o=r.gtagCore;Re=i,Oe=o,Ue=!0}return Fe[n]=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n){return Object(R.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(R.__generator)(this,(function(o){switch(o.label){case 0:return[4,t.getId()];case 1:return r=o.sent(),n("js",new Date),n(De.CONFIG,e.options[Ae],((i={})[xe]=r,i[Me]="firebase",i.update=!0,i)),[2]}}))}))}(e,t,Oe),{app:e,logEvent:function(e,t,r){
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e,t,n,r,i){var o=r||{};i&&i.global||(o=Object(R.__assign)(Object(R.__assign)({},r),{send_to:t})),e(De.EVENT,n,o||{})}(Re,n,e,t,r)},setCurrentScreen:function(e,t){return function(e,t,n,r){r&&r.global?e(De.SET,{screen_name:n}):e(De.CONFIG,t,{update:!0,screen_name:n})}(Re,n,e,t)},setUserId:function(e,t){return function(e,t,n,r){r&&r.global?e(De.SET,{user_id:n}):e(De.CONFIG,t,{update:!0,user_id:n})}(Re,n,e,t)},setUserProperties:function(e,t){return function(e,t,n,r){if(r&&r.global){for(var i={},o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];i["user_properties."+s]=n[s]}e(De.SET,i)}else e(De.CONFIG,t,{update:!0,user_properties:n})}(Re,n,e,t)},setAnalyticsCollectionEnabled:function(e){return function(e,t){window["ga-disable-"+e]=!t}(n,e)}}}var Ke="@firebase/analytics",Ge="0.2.9",Qe="analytics";!function(e){e.INTERNAL.registerComponent(new O.Component(Qe,(function(e){return ze(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:We,EventName:ke})),e.INTERNAL.registerComponent(new O.Component("analytics-internal",(function(e){try{return{logEvent:e.getProvider(Qe).getImmediate().logEvent}}catch(e){throw Be.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),e.registerVersion(Ke,Ge)}(P.a);n(16);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,Ye,Je=((He={})["only-available-in-window"]="This method is available in a Window context.",He["only-available-in-sw"]="This method is available in a service worker context.",He["should-be-overriden"]="This method should be overriden by extended classes.",He["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",He["permission-default"]="The required permissions were not granted and dismissed instead.",He["permission-blocked"]="The required permissions were not granted and blocked instead.",He["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",He["notifications-blocked"]="Notifications have been blocked.",He["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",He["sw-registration-expected"]="A service worker registration was the expected input.",He["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",He["invalid-saved-token"]="Unable to access details of the saved token.",He["sw-reg-redundant"]="The service worker being used for push was made redundant.",He["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",He["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",He["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",He["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",He["token-update-no-token"]="FCM returned no token when updating the user to push.",He["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",He["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",He["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",He["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",He["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",He["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",He["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",He["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",He["failed-to-delete-token"]="Unable to delete the currently saved token.",He["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",He["bad-scope"]="The service worker scope must be a string with at least one character.",He["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",He["bad-subscription"]="The subscription must be a valid PushSubscription.",He["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",He["failed-delete-vapid-key"]="The VAPID key could not be deleted.",He["invalid-public-vapid-key"]="The public VAPID key must be a string.",He["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",He["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",He),Xe=new j.ErrorFactory("messaging","Messaging",Je),$e=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),Ze="https://fcmregistrations.googleapis.com/v1";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function et(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(R.__spread)(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked"}(Ye||(Ye={}));var nt=function(){function e(){}return e.prototype.getToken=function(e,t,n){return Object(R.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,c;return Object(R.__generator)(this,(function(u){switch(u.label){case 0:return[4,it(e)];case 1:r=u.sent(),i=ot(t,n),o={method:"POST",headers:r,body:JSON.stringify(i)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(rt(e.app),o)];case 3:return[4,u.sent().json()];case 4:return a=u.sent(),[3,6];case 5:throw s=u.sent(),Xe.create("token-subscribe-failed",{errorInfo:s});case 6:if(a.error)throw c=a.error.message,Xe.create("token-subscribe-failed",{errorInfo:c});if(!a.token)throw Xe.create("token-subscribe-no-token");return[2,a.token]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(R.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,c,u;return Object(R.__generator)(this,(function(l){switch(l.label){case 0:return[4,it(t)];case 1:i=l.sent(),o=ot(n,r),a={method:"PATCH",headers:i,body:JSON.stringify(o)},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(rt(t.app)+"/"+e.fcmToken,a)];case 3:return[4,l.sent().json()];case 4:return s=l.sent(),[3,6];case 5:throw c=l.sent(),Xe.create("token-update-failed",{errorInfo:c});case 6:if(s.error)throw u=s.error.message,Xe.create("token-update-failed",{errorInfo:u});if(!s.token)throw Xe.create("token-update-no-token");return[2,s.token]}}))}))},e.prototype.deleteToken=function(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(R.__generator)(this,(function(s){switch(s.label){case 0:return[4,it(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(rt(e.app)+"/"+t.fcmToken,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,Xe.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),Xe.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))},e}();function rt(e){return Ze+"/projects/"+e.options.projectId+"/registrations"}function it(e){var t=e.app,n=e.installations;return Object(R.__awaiter)(this,void 0,void 0,(function(){var e;return Object(R.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.options.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function ot(e,t){var n=tt(e.getKey("p256dh")),r=tt(e.getKey("auth")),i={web:{endpoint:e.endpoint,p256dh:n,auth:r}};return et(t.buffer,$e.buffer)||(i.web.applicationPubKey=tt(t)),i}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st="undefined",ct="fcm_token_object_Store";function ut(e){var t=indexedDB.open(st);t.onerror=function(e){},t.onsuccess=function(n){!function(e,t){if(e.objectStoreNames.contains(ct)){var n=e.transaction(ct).objectStore(ct),r=new nt,i=n.openCursor();i.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},i.onsuccess=function(){var n=i.result;if(n){var o=n.value;r.deleteToken(t,o),n.continue()}else e.close(),indexedDB.deleteDatabase(st)}}}(t.result,e)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction((function(t){return t.get(e)}))},e.prototype.getIndex=function(e,t){return this.createTransaction((function(n){return n.index(e).get(t)}))},e.prototype.put=function(e){return this.createTransaction((function(t){return t.put(e)}),"readwrite")},e.prototype.delete=function(e){return this.createTransaction((function(t){return t.delete(e)}),"readwrite")},e.prototype.closeDatabase=function(){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}}))}))},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),Object(R.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(R.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,ht(e(i))];case 2:return o=a.sent(),[2,new Promise((function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}}))]}}))}))},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise((function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}}))),this.dbPromise},e}();function ht(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt=function(e){function t(t){var n=e.call(this)||this;return n.services=t,n.dbName="fcm_token_details_db",n.dbVersion=4,n.objectStoreName="fcm_token_object_Store",n}return Object(R.__extends)(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(i=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),i.createIndex("fcmToken","fcmToken",{unique:!0});case 1:ut(this.services);case 2:var r=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();r.onsuccess=function(){var e=r.result;if(e){var t=e.value,n=Object(R.__assign)({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=at(t.vapidKey)),"string"==typeof t.auth&&(n.auth=at(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=at(t.p256dh).buffer),"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}};break;case 3:var i,o=(i=e.transaction.objectStore(this.objectStoreName)).openCursor();o.onsuccess=function(){var e=o.result;if(e){var t=e.value,n=Object(R.__assign)({},t);"string"==typeof t.fcmPushSet&&delete n.fcmPushSet,e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(t){if(!e)throw Xe.create("bad-token");return ft({fcmToken:e}),[2,this.getIndex("fcmToken",e)]}))}))},t.prototype.getTokenDetailsFromSWScope=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(t){if(!e)throw Xe.create("bad-scope");return ft({swScope:e}),[2,this.get(e)]}))}))},t.prototype.saveTokenDetails=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(t){if(!e.swScope)throw Xe.create("bad-scope");if(!e.vapidKey)throw Xe.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw Xe.create("bad-subscription");if(!e.fcmSenderId)throw Xe.create("bad-sender-id");if(!e.fcmToken)throw Xe.create("bad-token");return ft(e),[2,this.put(e)]}))}))},t.prototype.deleteToken=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t;return Object(R.__generator)(this,(function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(Xe.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw Xe.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}}))}))},t}(lt);function ft(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw Xe.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw Xe.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw Xe.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw Xe.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw Xe.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw Xe.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw Xe.create("bad-sender-id")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return Object(R.__extends)(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t;return Object(R.__generator)(this,(function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw Xe.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}}))}))},t.prototype.saveVapidDetails=function(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n;return Object(R.__generator)(this,(function(r){if("string"!=typeof e||0===e.length)throw Xe.create("bad-scope");if(null===t||65!==t.length)throw Xe.create("bad-vapid-key");return n={swScope:e,vapidKey:t},[2,this.put(n)]}))}))},t.prototype.deleteVapidDetails=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t;return Object(R.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw Xe.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}}))}))},t}(lt),mt=function(){function e(e){var t=this;this.services=e,this.vapidDetailsModel=new pt,this.subscriptionManager=new nt;var n=e.app;if(this.app=n,!n.options.messagingSenderId||"string"!=typeof n.options.messagingSenderId)throw Xe.create("bad-sender-id");this.INTERNAL={delete:function(){return t.delete()}},this.tokenDetailsModel=new dt(e)}return e.prototype.getToken=function(){return Object(R.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(R.__generator)(this,(function(o){switch(o.label){case 0:return"default"!==(e=this.getNotificationPermission())?[3,2]:[4,this.requestNotificationPermission()];case 1:e=o.sent(),o.label=2;case 2:if("granted"!==e)throw Xe.create("notifications-blocked");return[4,this.getSWRegistration_()];case 3:return t=o.sent(),[4,this.getPublicVapidKey_()];case 4:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 5:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 6:return(i=o.sent())?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}}))}))},e.prototype.manageExistingToken=function(e,t,n,r){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(i){switch(i.label){case 0:return function(e,t,n){if(!n.vapidKey||!et(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=et(e.getKey("auth"),n.auth),o=et(e.getKey("p256dh"),n.p256dh);return r&&i&&o}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[3,1];case 1:return[4,this.deleteTokenFromDB(r.fcmToken)];case 2:return i.sent(),[2,this.getNewToken(e,t,n)];case 3:return[2]}}))}))},e.prototype.updateToken=function(e,t,n,r){return Object(R.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return Object(R.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.subscriptionManager.updateToken(r,this.services,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.services.app.options.messagingSenderId,fcmToken:i,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}}))}))},e.prototype.getNewToken=function(e,t,n){return Object(R.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(R.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.subscriptionManager.getToken(this.services,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.app.options.messagingSenderId,fcmToken:r,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r]}}))}))},e.prototype.deleteToken=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(R.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}}))}))},e.prototype.deleteTokenFromDB=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(R.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:t=r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.subscriptionManager.deleteToken(this.services,t)];case 3:return r.sent(),[3,5];case 4:return n=r.sent(),console.error(n),[3,5];case 5:return[2]}}))}))},e.prototype.getPushSubscription=function(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){var n;return Object(R.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})]}}))}))},e.prototype.requestPermission=function(){throw Xe.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw Xe.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw Xe.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw Xe.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw Xe.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw Xe.create("only-available-in-sw")},e.prototype.delete=function(){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}}))}))},e.prototype.getNotificationPermission=function(){return Notification.permission},e.prototype.requestNotificationPermission=function(){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(e){return Notification.requestPermission?[2,Notification.requestPermission()]:[2,Notification.permission]}))}))},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getSubscriptionManager=function(){return this.subscriptionManager},e}();var gt=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",(function(e){n.onPush(e)})),self.addEventListener("pushsubscriptionchange",(function(e){n.onSubChange(e)})),self.addEventListener("notificationclick",(function(e){n.onNotificationClick(e)})),n}return Object(R.__extends)(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,a;return Object(R.__generator)(this,(function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(e){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}}))}))},t.prototype.onSubChange_=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r;return Object(R.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),Xe.create("unable-to-resubscribe",{errorInfo:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}}))}))},t.prototype.onNotificationClick_=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(R.__generator)(this,(function(o){switch(o.label){case 0:if(!(e.notification&&e.notification.data&&e.notification.data.FCM_MSG))return[2];if(e.action)return[2];if(e.stopImmediatePropagation(),e.notification.close(),!(t=e.notification.data.FCM_MSG).notification)return[2];if(!(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)){if(!(t.data&&"google.c.a.c_id"in t.data))return[2];n=self.location.origin}return[4,this.getWindowClient_(n)];case 1:return(r=o.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[4,(a=3e3,new Promise((function(e){setTimeout(e,a)})))];case 3:return o.sent(),[3,6];case 4:return[4,r.focus()];case 5:r=o.sent(),o.label=6;case 6:return r?(delete t.notification,delete t.fcmOptions,i=vt(Ye.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}var a;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=Object(R.__assign)({},e.notification);return n.data=Object(R.__assign)(Object(R.__assign)({},e.notification.data),((t={}).FCM_MSG=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw Xe.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(R.__generator)(this,(function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,yt()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}}))}))},t.prototype.attemptToMessageClient_=function(e,t){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(n){if(!e)throw Xe.create("no-window-client-to-msg");return e.postMessage(t),[2]}))}))},t.prototype.hasVisibleClients_=function(){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(e){switch(e.label){case 0:return[4,yt()];case 1:return[2,e.sent().some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))]}}))}))},t.prototype.sendMessageToWindowClients_=function(e){return Object(R.__awaiter)(this,void 0,void 0,(function(){var t,n,r=this;return Object(R.__generator)(this,(function(i){switch(i.label){case 0:return[4,yt()];case 1:return t=i.sent(),n=vt(Ye.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map((function(e){return r.attemptToMessageClient_(e,n)})))];case 2:return i.sent(),[2]}}))}))},t.prototype.getSWRegistration_=function(){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(e){return[2,self.registration]}))}))},t.prototype.getPublicVapidKey_=function(){return Object(R.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(R.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw Xe.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,$e]:[2,t]}}))}))},t}(mt);function yt(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function vt(e,t){return{firebaseMessagingType:e,firebaseMessagingData:t}}var bt=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(j.createSubscribe)((function(e){n.messageObserver=e})),n.onTokenRefreshInternal=Object(j.createSubscribe)((function(e){n.tokenRefreshObserver=e})),n.setupSWMessageListener_(),n}return Object(R.__extends)(t,e),t.prototype.requestPermission=function(){return Object(R.__awaiter)(this,void 0,void 0,(function(){var e;return Object(R.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?Xe.create("permission-blocked"):Xe.create("permission-default")}}))}))},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw Xe.create("sw-registration-expected");if(null!=this.registrationToUse)throw Xe.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw Xe.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw Xe.create("use-public-key-before-get-token");var t=at(e);if(65!==t.length)throw Xe.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise((function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){var i=function(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(Xe.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)};t.addEventListener("statechange",i)}else r(Xe.create("sw-reg-redundant"));else n(e);else r(Xe.create("no-sw-in-reg"))}))},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(e){throw Xe.create("failed-serviceworker-registration",{browserErrorMessage:e.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return e.registrationToUse=t,t.update(),t}))})))},t.prototype.getPublicVapidKey_=function(){return Object(R.__awaiter)(this,void 0,void 0,(function(){return Object(R.__generator)(this,(function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,$e]}))}))},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){return Object(R.__awaiter)(e,void 0,void 0,(function(){var e,n,r,i,o;return Object(R.__generator)(this,(function(a){switch(a.label){case 0:return t.data&&t.data.firebaseMessagingType&&t.data.firebaseMessagingData?(e=t.data,n=e.firebaseMessagingType,r=e.firebaseMessagingData,this.messageObserver&&this.messageObserver.next(r),(i=r.data)&&"google.c.a.c_id"in i&&"1"===i["google.c.a.e"]?(o=function(e){switch(e){case Ye.NOTIFICATION_CLICKED:return"notification_open";case Ye.PUSH_MSG_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.services.analyticsProvider.get()]):[3,2]):[2];case 1:a.sent().logEvent(o,{message_name:i["google.c.a.c_l"],message_id:i["google.c.a.c_id"],message_time:i["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),a.label=2;case 2:return[2]}}))}))}),!1)},t}(mt);var wt="@firebase/messaging",Tt="0.6.0";function St(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}!
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t={isSupported:St};e.INTERNAL.registerComponent(new O.Component("messaging",(function(e){var t={app:e.getProvider("app").getImmediate(),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!St())throw Xe.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new gt(t):new bt(t)}),"PUBLIC").setServiceProps(t)),e.registerVersion(wt,Tt)}(P.a);M.initializeApp({apiKey:"AIzaSyB9KC9Q3NzMt7b6TspNcKxqWqnzzPLvdFg",authDomain:"testgdproject-1570036439931.firebaseapp.com",databaseURL:"https://testgdproject-1570036439931.firebaseio.com",projectId:"testgdproject-1570036439931",storageBucket:"testgdproject-1570036439931.appspot.com",messagingSenderId:"199844453643",appId:"1:199844453643:web:4aa7ba97d1ae2e428b560e"});var It=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Et=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ct=new x,_t=new class{constructor(e){this.messaging=M.messaging(),this.messaging.onMessage(t=>{console.log("Message received. ",t);const n=t.data;e.notificationsManager.createNotificaction(n)}),this.messaging.onTokenRefresh(()=>{this.messaging.getToken().then(t=>{console.log("FCM token refreshed:",t),M.firestore().collection("fcmTokens").doc(t).set({email:e.userInfo.emailAddress})}).catch(e=>{console.log("Unable to retrieve refreshed token ",e)})}),window.getMessagingToken=function(){M.messaging().getToken().then(e=>{console.log(e)}).catch(e=>{console.error(e)})},window.saveMessagingDeviceToken=function(){sessionStorage.getItem("deviceToken")||M.messaging().getToken().then(t=>{t?(console.log("FCM token generated:",t),M.firestore().collection("fcmTokens").doc(t).set({email:e.userInfo.emailAddress}),sessionStorage.setItem("deviceToken",t)):this.requestNotificationsPermissions()}).catch(e=>{console.error("Unable to get FCM token.",e)})}}requestNotificationsPermissions(){console.log("Requesting notifications permission..."),M.messaging().requestPermission().then(()=>{console.log("Notification permission granted."),window.saveMessagingDeviceToken()}).catch(e=>{console.error("Unable to get permission to notify:",e)})}}(Ct);(window.thereIsMessaging=!0,"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/service-worker.js").then((function(e){console.log("Service worker registered.",e),window.thereIsMessaging&&_t.messaging.useServiceWorker(e)})).catch((function(e){console.error("Service Worker Error",e)}))})),window.getCurrentUser=function(){return Ct.userInfo},window.BroadcastChannel)?new BroadcastChannel("app-channel").onmessage=function(e){"newNotification"===e.data.action&&(console.log("Add notification to the list."),Ct.notificationsManager.createNotificaction(e.data.content))}:console.warn("This browser does not support BroadcastChannel.");document.getElementById("sampleProjectBtn").onclick=function(){document.getElementById("projectsListBtn").onclick=null,Ct.saveBtn.style.visibility="hidden",Ct.projectsListBtn.classList.add("locked"),Ct.start("1D4ESY97zKvJoZ1BWeLWYq8GxhQNWsXpg")};var Dt,kt="344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com";Dt="production"===Object({GOOGLE_CLIENT_ID:"344446892746-36ebkcl04viq3poe73mb3dkhr79lspqk.apps.googleusercontent.com",GOOGLE_API_KEY_DEV:"AIzaSyBuHx9BXXCRFSKiLzjinZgK_2ys58ynGew",GOOGLE_API_KEY_PROD:"AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c"}).PROCESS?"AIzaSyDiGyyxn_sPAvr2Mox44J6lPurG0XhQa7c":"AIzaSyBuHx9BXXCRFSKiLzjinZgK_2ys58ynGew";var Nt,At=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],xt="https://www.googleapis.com/auth/drive",Mt=document.getElementById("authorizeBtn"),Lt=document.getElementById("signoutBtn");function Pt(){gapi.client.init({apiKey:Dt,clientId:kt,discoveryDocs:At,scope:xt}).then((function(){gapi.auth2.getAuthInstance().isSignedIn.listen(Ot),Ot(gapi.auth2.getAuthInstance().isSignedIn.get()),Mt.onclick=Rt,Lt.onclick=jt}),(function(e){console.log(JSON.stringify(e,null,2))}))}function Ot(e){if(e){console.log("Authorized.");var t=c.getUrlParams(window.location.href).id;Ct.modalDialogContent.firstElementChild&&Ct.closeModalDialog(),Ct.setUserInfo(),Ct.start(t)}else console.log("Not authorized"),Ct.showModalDialog(Bt,"opaque",!1),document.querySelector("header").style.display="none",document.querySelector("main").style.display="none",Ct.projectsListContainer.style.display="none",c.emptyNode(Ct.projectsList),history.replaceState({page:"Sign in dialog"},"Sign in dialog",location.href.replace(location.search,""))}function Rt(){gapi.auth2.getAuthInstance().signIn()}function jt(){gapi.auth2.getAuthInstance().signOut()}(Nt=document.createElement("script")).type="text/javascript",Nt.defer=!0,Nt.onload=function(){gapi.load("client:auth2",Pt)},Nt.src="https://apis.google.com/js/api.js",document.querySelector("body").appendChild(Nt);var Bt=document.getElementById("authorizeDialog");var Ft,Vt=null,qt=document.getElementById("installBtn");qt.addEventListener("click",(function(e){Vt.prompt(),e.target.hidden=!0,Vt.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt",e):console.log("User dismissed the A2HS prompt",e),Vt=null}))})),window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),Vt=e,qt.removeAttribute("hidden")})),window.addEventListener("appinstalled",(function(e){console.log("VisualARQ Drawings Viewer was installed.",e)})),Ct.drawingsBtns.querySelector(".dropdown-content").addEventListener("click",(function(e){return It(this,void 0,void 0,(function(){var t,n,r,i;return Et(this,(function(o){switch(o.label){case 0:if(Ft&&Ft.classList.remove("active"),Ft=e.target,t=Ft.dataset.id,Ct.drawingsBtns.children[0].innerText=Ft.innerText,Ft.classList.add("active"),n=Ct.currentWorkspace.drawings.find((function(e){return e.id===t})),void 0!==Ct.currentWorkspace.drawingsStylesTag)return[3,6];if(void 0===Ct.currentWorkspace.drawingsStylesId)return[3,5];r=void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,l.getFileContent(Ct.currentWorkspace.drawingsStylesId)];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),console.error("Error while trying to fetch the drawings styles."),[3,4];case 4:return r&&((i=document.createElement("style")).innerText=r.body,document.head.appendChild(i),Ct.currentWorkspace.drawingsStylesTag=i),[3,6];case 5:console.warn("This project doesn't have a css styles file for the drawings."),o.label=6;case 6:return void 0!==n.content?Ct.currentWorkspace.setDrawing(n):(Ct.showViewportDialog("loader","Loading drawing"),l.getFileContent(t).then((function(e){n.setContent(e.body),Ct.currentWorkspace.setDrawing(n),Ct.hideViewportMessage(),console.log("Drawing fetched.")}),(function(e){console.log(e)}))),[2]}}))}))}));for(var Ut=document.getElementsByClassName("dropdown-container"),Wt=function(e){Ut[e].children[0].addEventListener("click",(function(){Ut[e].classList.toggle("open")})),Ut[e].addEventListener("mouseleave",(function(e){e.currentTarget.classList.remove("open")}))},zt=0;zt<Ut.length;zt++)Wt(zt);var Kt=document.getElementById("sideNavToggle");Kt.addEventListener("click",(function(){document.getElementById("sideNavContainer").classList.toggle("active"),Kt.classList.toggle("active")}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9pbmRleC5janMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmNqcy5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvaWRiLmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvc3R5bGVzLnNjc3M/NDExYSIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlcy9zdHlsZXMuc2NzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9pY29ucy9oYW1idXJnZXJJY29uLnN2ZyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL2ljb25zL2Nyb3NzSWNvbi5zdmciLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9pY29ucy9wcm9qZWN0c0xpc3RJY29uLnN2ZyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmNqcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL3NyYy9nZW9tZXRyeS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2VuZXJpY3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RyYXdpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpblBhbmVsLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tZW50Rm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvd29ya3NwYWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy90b29sLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy9lbGVtZW50U2VsZWN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy9hZGRDb21tZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9hcHBUb29scy9lbGVtZW50RGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhcmVQcm9qZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9ub3RpZmljYXRpb25zTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuYW1lUHJvamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udGV4dE1lbnUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Byb2plY3RJdGVtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvaW5zdGFsbGF0aW9ucy9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYW5hbHl0aWNzL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbWVzc2FnaW5nL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovLy8uL3NyYy9tZXNzYWdpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXh0ZW5kU3RhdGljcyIsImIiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiX19leHRlbmRzIiwiX18iLCJ0aGlzIiwiY29uc3RydWN0b3IiLCJfX2Fzc2lnbiIsImFzc2lnbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsImFwcGx5IiwiX19yZXN0IiwiZSIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0IiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIlJlZmxlY3QiLCJkZWNvcmF0ZSIsIl9fcGFyYW0iLCJwYXJhbUluZGV4IiwiZGVjb3JhdG9yIiwiX19tZXRhZGF0YSIsIm1ldGFkYXRhS2V5IiwibWV0YWRhdGFWYWx1ZSIsIm1ldGFkYXRhIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJzdGVwIiwibmV4dCIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsInBvcCIsInB1c2giLCJfX2V4cG9ydFN0YXIiLCJfX3ZhbHVlcyIsIl9fcmVhZCIsImFyIiwiZXJyb3IiLCJfX3NwcmVhZCIsImNvbmNhdCIsIl9fc3ByZWFkQXJyYXlzIiwiaWwiLCJrIiwiYSIsImoiLCJqbCIsIl9fYXdhaXQiLCJfX2FzeW5jR2VuZXJhdG9yIiwiYXN5bmNJdGVyYXRvciIsInEiLCJyZXN1bWUiLCJmdWxmaWxsIiwic2V0dGxlIiwic2hpZnQiLCJfX2FzeW5jRGVsZWdhdG9yIiwiX19hc3luY1ZhbHVlcyIsIl9fbWFrZVRlbXBsYXRlT2JqZWN0IiwiY29va2VkIiwicmF3IiwiX19pbXBvcnRTdGFyIiwibW9kIiwiZGVmYXVsdCIsIl9faW1wb3J0RGVmYXVsdCIsInRzbGliIiwiQ09OU1RBTlRTIiwiTk9ERV9DTElFTlQiLCJOT0RFX0FETUlOIiwiU0RLX1ZFUlNJT04iLCJhc3NlcnQiLCJhc3NlcnRpb24iLCJtZXNzYWdlIiwiYXNzZXJ0aW9uRXJyb3IiLCJFcnJvciIsInN0cmluZ1RvQnl0ZUFycmF5Iiwic3RyIiwib3V0IiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJpc0FycmF5IiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsImJhc2U2NERlY29kZSIsImNvbnNvbGUiLCJkZWVwRXh0ZW5kIiwic291cmNlIiwiRGF0ZSIsImdldFRpbWUiLCJ1bmRlZmluZWQiLCJwcm9wIiwiRGVmZXJyZWQiLCJfdGhpcyIsInByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJjYWxsYmFjayIsImNhdGNoIiwiZ2V0VUEiLCJuYXZpZ2F0b3IiLCJFUlJPUl9OQU1FIiwiRmlyZWJhc2VFcnJvciIsIl9zdXBlciIsImNvZGUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJfaSIsImN1c3RvbURhdGEiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJfYSIsIl9iIiwia2V5cyIsInNsaWNlIiwid2FybiIsInJlcGxhY2UiLCJQQVRURVJOIiwidG9TdHJpbmciLCJqc29uRXZhbCIsIkpTT04iLCJwYXJzZSIsImRlY29kZSIsInRva2VuIiwiaGVhZGVyIiwiY2xhaW1zIiwic2lnbmF0dXJlIiwicGFydHMiLCJzcGxpdCIsIlNoYTEiLCJjaGFpbl8iLCJidWZfIiwiV18iLCJwYWRfIiwiaW5idWZfIiwidG90YWxfIiwiYmxvY2tTaXplIiwicmVzZXQiLCJjb21wcmVzc18iLCJidWYiLCJvZmZzZXQiLCJXIiwidXBkYXRlIiwibGVuZ3RoTWludXNCbG9jayIsImluYnVmIiwiZGlnZXN0IiwidG90YWxCaXRzIiwiT2JzZXJ2ZXJQcm94eSIsImV4ZWN1dG9yIiwib25Ob09ic2VydmVycyIsIm9ic2VydmVycyIsInVuc3Vic2NyaWJlcyIsIm9ic2VydmVyQ291bnQiLCJ0YXNrIiwiZmluYWxpemVkIiwiZm9yRWFjaE9ic2VydmVyIiwib2JzZXJ2ZXIiLCJjbG9zZSIsImNvbXBsZXRlIiwic3Vic2NyaWJlIiwibmV4dE9yT2JzZXJ2ZXIiLCJvYmoiLCJtZXRob2RzIiwibWV0aG9kc18xIiwibWV0aG9kIiwiaW1wbGVtZW50c0FueU1ldGhvZHMiLCJub29wIiwidW5zdWIiLCJ1bnN1YnNjcmliZU9uZSIsImZpbmFsRXJyb3IiLCJmbiIsInNlbmRPbmUiLCJlcnIiLCJlcnJvclByZWZpeCIsImZuTmFtZSIsImFyZ3VtZW50TnVtYmVyIiwib3B0aW9uYWwiLCJhcmdOYW1lIiwiYXN5bmMiLCJvbkVycm9yIiwiYXJncyIsImJhc2U2NEVuY29kZSIsInV0ZjhCeXRlcyIsImNvbnRhaW5zIiwiY3JlYXRlU3Vic2NyaWJlIiwicHJveHkiLCJkZWVwQ29weSIsImlzQWRtaW4iLCJpc0Jyb3dzZXIiLCJzZWxmIiwiaXNFbXB0eSIsImlzTW9iaWxlQ29yZG92YSIsIndpbmRvdyIsInRlc3QiLCJpc05vZGUiLCJnbG9iYWwiLCJwcm9jZXNzIiwiaXNOb2RlU2RrIiwiaXNSZWFjdE5hdGl2ZSIsImlzVmFsaWRGb3JtYXQiLCJpc1ZhbGlkVGltZXN0YW1wIiwibm93IiwiTWF0aCIsImZsb29yIiwidmFsaWRTaW5jZSIsInZhbGlkVW50aWwiLCJpc3N1ZWRBdFRpbWUiLCJtYXAiLCJjb250ZXh0T2JqIiwicmVzIiwicXVlcnlzdHJpbmciLCJxdWVyeXN0cmluZ1BhcmFtcyIsInBhcmFtcyIsIl9sb29wXzEiLCJmb3JFYWNoIiwiYXJyYXlWYWwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJlbnRyaWVzIiwicXVlcnlzdHJpbmdEZWNvZGUiLCJzYWZlR2V0Iiwic3RyaW5nTGVuZ3RoIiwiaGlnaCIsInN0cmluZ2lmeSIsInZhbGlkYXRlQXJnQ291bnQiLCJtaW5Db3VudCIsIm1heENvdW50IiwiYXJnQ291bnQiLCJhcmdFcnJvciIsInZhbGlkYXRlQ2FsbGJhY2siLCJ2YWxpZGF0ZUNvbnRleHRPYmplY3QiLCJjb250ZXh0IiwidmFsaWRhdGVOYW1lc3BhY2UiLCJuYW1lc3BhY2UiLCJ1dGlsIiwiQ29tcG9uZW50IiwiaW5zdGFuY2VGYWN0b3J5IiwidHlwZSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQcm92aWRlciIsImNvbnRhaW5lciIsImNvbXBvbmVudCIsImluc3RhbmNlcyIsIk1hcCIsImluc3RhbmNlc0RlZmVycmVkIiwiaWRlbnRpZmllciIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25zIiwiZ2V0Q29tcG9uZW50Iiwic2V0Q29tcG9uZW50IiwiZV8xIiwiaXNDb21wb25lbnRFYWdlciIsIl9jIiwiX2QiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiZV8xXzEiLCJyZXR1cm4iLCJjbGVhckluc3RhbmNlIiwiZGVsZXRlIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwiSU5URVJOQUwiLCJpc0NvbXBvbmVudFNldCIsIm5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5IiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwiYWRkQ29tcG9uZW50IiwicHJvdmlkZXIiLCJnZXRQcm92aWRlciIsImFkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiZ2V0UHJvdmlkZXJzIiwiX2EkMSIsImxvZ2dlciQxIiwiRVJST1JTIiwiRVJST1JfRkFDVE9SWSIsInZlcnNpb24iLCJQTEFURk9STV9MT0dfU1RSSU5HIiwibG9nZ2VyIiwiTG9nZ2VyIiwiRmlyZWJhc2VBcHBJbXBsIiwiY29uZmlnIiwiZmlyZWJhc2VfIiwiaXNEZWxldGVkXyIsIm5hbWVfIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXyIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIm9wdGlvbnNfIiwiX2FkZENvbXBvbmVudCIsImNvbXBvbmVudHMiLCJjb21wb25lbnQkMSIsImNoZWNrRGVzdHJveWVkXyIsInZhbCIsImNvbmZpZ3VyYWJsZSIsInJlbW92ZUFwcCIsIl9nZXRTZXJ2aWNlIiwiX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSIsImRlYnVnIiwiX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50IiwiYXBwTmFtZSIsImxvZyIsInZlcnNpb24kMSIsImZpcmViYXNlIiwiY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UiLCJmaXJlYmFzZUFwcEltcGwiLCJhcHBzIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImFwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeSIsImxpYnJhcnlNaXNtYXRjaCIsIm1hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsInJlZ2lzdGVyQ29tcG9uZW50IiwidXNlQXNTZXJ2aWNlIiwiY29tcG9uZW50TmFtZSIsInNlcnZpY2VOYW1lc3BhY2UiLCJhcHBBcmciLCJzZXJ2aWNlRnhuIiwiY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2VDb3JlIiwiZXh0ZW5kTmFtZXNwYWNlIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlIiwiZ2V0UGxhdGZvcm1JbmZvU3RyaW5nIiwiaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyIiwibG9nU3RyaW5nIiwic2RrVmVyc2lvbiIsImZpcmViYXNlJDEiLCJyZWdpc3RlckNvcmVDb21wb25lbnRzIiwiZXgiLCJGdW5jdGlvbiIsIkxvZ0xldmVsIiwiZGVmYXVsdExvZ0xldmVsIiwiSU5GTyIsImRlZmF1bHRMb2dIYW5kbGVyIiwibG9nVHlwZSIsImxvZ0xldmVsIiwidG9JU09TdHJpbmciLCJERUJVRyIsIlZFUkJPU0UiLCJpbmZvIiwiV0FSTiIsIkVSUk9SIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJzZXRMb2dMZXZlbCIsImxldmVsIiwiaW5zdCIsInRvQXJyYXkiLCJhcnIiLCJwcm9taXNpZnlSZXF1ZXN0IiwicmVxdWVzdCIsIm9uc3VjY2VzcyIsIm9uZXJyb3IiLCJwcm9taXNpZnlSZXF1ZXN0Q2FsbCIsInByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsIiwiQ3Vyc29yIiwicHJveHlQcm9wZXJ0aWVzIiwiUHJveHlDbGFzcyIsInRhcmdldFByb3AiLCJwcm9wZXJ0aWVzIiwicHJveHlSZXF1ZXN0TWV0aG9kcyIsIkNvbnN0cnVjdG9yIiwicHJveHlNZXRob2RzIiwicHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyIsIkluZGV4IiwiaW5kZXgiLCJfaW5kZXgiLCJjdXJzb3IiLCJfY3Vyc29yIiwiX3JlcXVlc3QiLCJPYmplY3RTdG9yZSIsInN0b3JlIiwiX3N0b3JlIiwiVHJhbnNhY3Rpb24iLCJpZGJUcmFuc2FjdGlvbiIsIl90eCIsIm9uY29tcGxldGUiLCJvbmFib3J0IiwiVXBncmFkZURCIiwiZGIiLCJvbGRWZXJzaW9uIiwidHJhbnNhY3Rpb24iLCJfZGIiLCJEQiIsIklEQkluZGV4IiwiSURCQ3Vyc29yIiwibWV0aG9kTmFtZSIsImNyZWF0ZUluZGV4IiwiSURCT2JqZWN0U3RvcmUiLCJvYmplY3RTdG9yZSIsIklEQlRyYW5zYWN0aW9uIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJJREJEYXRhYmFzZSIsImZ1bmNOYW1lIiwibmF0aXZlT2JqZWN0IiwiZ2V0QWxsIiwicXVlcnkiLCJjb3VudCIsIml0ZW1zIiwiaXRlcmF0ZUN1cnNvciIsImNvbnRpbnVlIiwib3BlbkRiIiwidXBncmFkZUNhbGxiYWNrIiwiaW5kZXhlZERCIiwib251cGdyYWRlbmVlZGVkIiwiZXZlbnQiLCJkZWxldGVEYiIsImZhY3RvcnkiLCJhcGkiLCJjb250ZW50IiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwiZG9jdW1lbnQiLCJnZXRUYXJnZXQiLCJzdHlsZVRhcmdldCIsInF1ZXJ5U2VsZWN0b3IiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJzdHlsZXNJbkRvbSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsIml0ZW0iLCJpZCIsImJhc2UiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnQiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwicmVtb3ZlIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJhcHBseVRvVGFnIiwicmVtb3ZlQXR0cmlidXRlIiwidW5lc2NhcGUiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsIm5ld0xhc3RJZGVudGlmaWVycyIsInNwbGljZSIsIl9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyIsIl9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18iLCJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyIsIl9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzJfX18iLCJ1c2VTb3VyY2VNYXAiLCJjc3NNYXBwaW5nIiwic291cmNlTWFwcGluZyIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlUm9vdCIsImNzc1dpdGhNYXBwaW5nVG9TdHJpbmciLCJtZWRpYVF1ZXJ5IiwiZGVkdXBlIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsInVybCIsImhhc2giLCJuZWVkUXVvdGVzIiwid2ViY2hhbm5lbFdyYXBwZXIiLCJsb2dDbGllbnQiLCJnZXRMb2dMZXZlbCIsIlNJTEVOVCIsIm5ld0xldmVsIiwidGFnIiwibXNnIiwiYXJnVG9TdHJpbmciLCJwbGF0Zm9ybSIsIlBsYXRmb3JtU3VwcG9ydCIsImdldFBsYXRmb3JtIiwiZm9ybWF0SlNPTiIsImZhaWwiLCJmYWlsdXJlIiwic2V0UGxhdGZvcm0iLCJlbXB0eUJ5dGVTdHJpbmciLCJDb2RlIiwiT0siLCJDQU5DRUxMRUQiLCJVTktOT1dOIiwiSU5WQUxJRF9BUkdVTUVOVCIsIkRFQURMSU5FX0VYQ0VFREVEIiwiTk9UX0ZPVU5EIiwiQUxSRUFEWV9FWElTVFMiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlVOQVVUSEVOVElDQVRFRCIsIlJFU09VUkNFX0VYSEFVU1RFRCIsIkZBSUxFRF9QUkVDT05ESVRJT04iLCJBQk9SVEVEIiwiT1VUX09GX1JBTkdFIiwiVU5JTVBMRU1FTlRFRCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiRmlyZXN0b3JlRXJyb3IiLCJtYWtlQ29uc3RydWN0b3JQcml2YXRlIiwiY2xzIiwib3B0aW9uYWxNZXNzYWdlIiwiUHVibGljQ29uc3RydWN0b3IiLCJzdGF0aWNQcm9wZXJ0eSIsImRlZmF1bHRlZCIsImRlZmF1bHRWYWx1ZSIsImZvckVhY2hOdW1iZXIiLCJudW0iLCJOdW1iZXIiLCJpc05hTiIsInZhbGlkYXRlTm9BcmdzIiwiZnVuY3Rpb25OYW1lIiwiZm9ybWF0UGx1cmFsIiwidmFsaWRhdGVFeGFjdE51bWJlck9mQXJncyIsIm51bWJlck9mQXJncyIsInZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncyIsIm1pbk51bWJlck9mQXJncyIsInZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncyIsIm1heE51bWJlck9mQXJncyIsInZhbGlkYXRlQXJnVHlwZSIsInBvc2l0aW9uIiwiYXJndW1lbnQiLCJ2YWxpZGF0ZVR5cGUiLCJvcmRpbmFsIiwidmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUiLCJ2YWxpZGF0ZU5hbWVkVHlwZSIsIm9wdGlvbk5hbWUiLCJ2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlIiwidmFsaWRhdGVPcHRpb25hbEFycmF5RWxlbWVudHMiLCJ0eXBlRGVzY3JpcHRpb24iLCJ2YWxpZGF0b3IiLCJ2YWx1ZURlc2NyaXB0aW9uIiwidmFsaWRhdGVBcnJheUVsZW1lbnRzIiwidmFsaWRhdGVOYW1lZE9wdGlvbmFsUHJvcGVydHlFcXVhbHMiLCJpbnB1dE5hbWUiLCJleHBlY3RlZCIsImV4cGVjdGVkRGVzY3JpcHRpb24iLCJleHBlY3RlZF8xIiwiYWN0dWFsRGVzY3JpcHRpb24iLCJ2YWxpZGF0ZU5hbWVkUHJvcGVydHlFcXVhbHMiLCJ2YWxpZGF0ZVN0cmluZ0VudW0iLCJlbnVtcyIsInNvbWUiLCJlbGVtZW50IiwiaXNQbGFpbk9iamVjdCIsImRlc2NyaXB0aW9uIiwiZ2V0UHJvdG90eXBlT2YiLCJzdWJzdHJpbmciLCJjdXN0b21PYmplY3ROYW1lIiwicmVzdWx0cyIsImV4ZWMiLCJ0cnlHZXRDdXN0b21PYmplY3RUeXBlIiwidmFsaWRhdGVEZWZpbmVkIiwidmFsaWRhdGVPcHRpb25OYW1lcyIsIm9wdGlvbk5hbWVzIiwiaW52YWxpZENsYXNzRXJyb3IiLCJ2YWxpZGF0ZVBvc2l0aXZlTnVtYmVyIiwiQXV0b0lkIiwibmV3SWQiLCJjaGFycyIsImF1dG9JZCIsInJhbmRvbSIsInByaW1pdGl2ZUNvbXBhcmF0b3IiLCJsZWZ0IiwicmlnaHQiLCJhcnJheUVxdWFscyIsImlzRXF1YWwiLCJpbW1lZGlhdGVTdWNjZXNzb3IiLCJhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlIiwiVWludDhBcnJheSIsImFzc2VydEJhc2U2NEF2YWlsYWJsZSIsImJhc2U2NEF2YWlsYWJsZSIsIlRpbWVySWQiLCJCbG9iIiwiYmluYXJ5U3RyaW5nIiwiX2JpbmFyeVN0cmluZyIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsImFycmF5IiwiY2hhciIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYnVmZmVyIiwib3RoZXIiLCJfY29tcGFyZVRvIiwiUHVibGljQmxvYiIsIkRhdGFiYXNlSW5mbyIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJmb3JjZUxvbmdQb2xsaW5nIiwiREVGQVVMVF9EQVRBQkFTRV9OQU1FIiwiRGF0YWJhc2VJZCIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiY29tcGFyZVRvIiwiTGlzdGVuU2VxdWVuY2UiLCJwcmV2aW91c1ZhbHVlIiwic2VxdWVuY2VOdW1iZXJTeW5jZXIiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJzZXF1ZW5jZU51bWJlciIsInNldFByZXZpb3VzVmFsdWUiLCJ3cml0ZU5ld1NlcXVlbmNlTnVtYmVyIiwid3JpdGVTZXF1ZW5jZU51bWJlciIsImV4dGVybmFsUHJldmlvdXNWYWx1ZSIsIm1heCIsIm5leHRWYWx1ZSIsIklOVkFMSUQiLCJCYXNlUGF0aCIsInNlZ21lbnRzIiwibGVuIiwiY29tcGFyYXRvciIsImNoaWxkIiwibmFtZU9yUGF0aCIsImxpbWl0Iiwic2VnbWVudCIsImNvbnN0cnVjdCIsInBvcEZpcnN0Iiwic2l6ZSIsInBvcExhc3QiLCJmaXJzdFNlZ21lbnQiLCJsYXN0U2VnbWVudCIsImlzUHJlZml4T2YiLCJpc0ltbWVkaWF0ZVBhcmVudE9mIiwicG90ZW50aWFsQ2hpbGQiLCJlbmQiLCJwMSIsInAyIiwibWluIiwiUmVzb3VyY2VQYXRoIiwiY2Fub25pY2FsU3RyaW5nIiwiZnJvbVN0cmluZyIsInBhdGgiLCJFTVBUWV9QQVRIIiwiaWRlbnRpZmllclJlZ0V4cCIsIkZpZWxkUGF0aCIsImlzVmFsaWRJZGVudGlmaWVyIiwiaXNLZXlGaWVsZCIsImtleUZpZWxkIiwiZnJvbVNlcnZlckZvcm1hdCIsImN1cnJlbnQiLCJhZGRDdXJyZW50U2VnbWVudCIsImluQmFja3RpY2tzIiwiRG9jdW1lbnRLZXkiLCJpc0RvY3VtZW50S2V5IiwiaGFzQ29sbGVjdGlvbklkIiwiY29sbGVjdGlvbklkIiwiazEiLCJrMiIsImZyb21TZWdtZW50cyIsImZyb21QYXRoU3RyaW5nIiwiRU1QVFkiLCJEZWxheWVkT3BlcmF0aW9uIiwiYXN5bmNRdWV1ZSIsInRpbWVySWQiLCJ0YXJnZXRUaW1lTXMiLCJyZW1vdmFsQ2FsbGJhY2siLCJjcmVhdGVBbmRTY2hlZHVsZSIsImRlbGF5TXMiLCJkZWxheWVkT3AiLCJzdGFydCIsInRpbWVySGFuZGxlIiwic2V0VGltZW91dCIsImhhbmRsZURlbGF5RWxhcHNlZCIsInNraXBEZWxheSIsImNhbmNlbCIsInJlYXNvbiIsImNsZWFyVGltZW91dCIsImVucXVldWVBbmRGb3JnZXQiLCJBc3luY1F1ZXVlIiwidGFpbCIsIl9pc1NodXR0aW5nRG93biIsImRlbGF5ZWRPcGVyYXRpb25zIiwib3BlcmF0aW9uSW5Qcm9ncmVzcyIsInRpbWVySWRzVG9Ta2lwIiwiZW5xdWV1ZSIsImVucXVldWVBbmRGb3JnZXRFdmVuQWZ0ZXJTaHV0ZG93biIsInZlcmlmeU5vdEZhaWxlZCIsImVucXVldWVJbnRlcm5hbCIsImVucXVldWVFdmVuQWZ0ZXJTaHV0ZG93biIsImVucXVldWVBbmRJbml0aWF0ZVNodXRkb3duIiwibmV3VGFpbCIsImVycm9yJDEiLCJzdGFjayIsImVucXVldWVBZnRlckRlbGF5IiwicmVtb3ZlZE9wIiwicmVtb3ZlRGVsYXllZE9wZXJhdGlvbiIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJkcmFpbiIsImNvbnRhaW5zRGVsYXllZE9wZXJhdGlvbiIsInJ1bkRlbGF5ZWRPcGVyYXRpb25zRWFybHkiLCJsYXN0VGltZXJJZCIsIkFsbCIsInNvcnQiLCJza2lwRGVsYXlzRm9yVGltZXJJZCIsImVzY2FwZUNoYXIiLCJlbmNvZGVkU2VwYXJhdG9yQ2hhciIsImVuY29kZWROdWwiLCJlbmNvZGVkRXNjYXBlIiwiZW5jb2RlIiwiZW5jb2RlU2VwYXJhdG9yIiwiZW5jb2RlU2VnbWVudCIsInJlc3VsdEJ1ZiIsImxhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXgiLCJzZWdtZW50QnVpbGRlciIsImN1cnJlbnRQaWVjZSIsIlRpbWVzdGFtcCIsInNlY29uZHMiLCJuYW5vc2Vjb25kcyIsImZyb21NaWxsaXMiLCJmcm9tRGF0ZSIsImRhdGUiLCJtaWxsaXNlY29uZHMiLCJ0b0RhdGUiLCJ0b01pbGxpcyIsIlNuYXBzaG90VmVyc2lvbiIsInRpbWVzdGFtcCIsImZyb21NaWNyb3NlY29uZHMiLCJmcm9tVGltZXN0YW1wIiwiZm9yRGVsZXRlZERvYyIsIk1JTiIsInRvTWljcm9zZWNvbmRzIiwidG9UaW1lc3RhbXAiLCJTb3J0ZWRNYXAiLCJyb290IiwiTExSQk5vZGUiLCJjb3B5IiwiQkxBQ0siLCJub2RlIiwiY21wIiwicHJ1bmVkTm9kZXMiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwiYWN0aW9uIiwiZGVzY3JpcHRpb25zIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiU29ydGVkTWFwSXRlcmF0b3IiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwic3RhcnRLZXkiLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJnZXROZXh0IiwiaGFzTmV4dCIsInBlZWsiLCJjb2xvciIsIlJFRCIsImZpeFVwIiwicmVtb3ZlTWluIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInNtYWxsZXN0Iiwicm90YXRlUmlnaHQiLCJtb3ZlUmVkUmlnaHQiLCJyb3RhdGVMZWZ0IiwiY29sb3JGbGlwIiwibmwiLCJuciIsImNoZWNrTWF4RGVwdGgiLCJibGFja0RlcHRoIiwiY2hlY2siLCJwb3ciLCJMTFJCRW1wdHlOb2RlIiwiU29ydGVkU2V0IiwiZnJvbU1hcEtleXMiLCJhZGQiLCJlbGVtIiwiZmlyc3QiLCJsYXN0IiwiY2IiLCJmb3JFYWNoSW5SYW5nZSIsInJhbmdlIiwiaXRlciIsImZvckVhY2hXaGlsZSIsImZpcnN0QWZ0ZXJPckVxdWFsIiwiU29ydGVkU2V0SXRlcmF0b3IiLCJ1bmlvbldpdGgiLCJ0aGlzSXQiLCJvdGhlckl0IiwidGhpc0VsZW0iLCJvdGhlckVsZW0iLCJ0YXJnZXRJZCIsIkVNUFRZX01BWUJFX0RPQ1VNRU5UX01BUCIsIm1heWJlRG9jdW1lbnRNYXAiLCJudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAiLCJFTVBUWV9ET0NVTUVOVF9NQVAiLCJkb2N1bWVudE1hcCIsIkVNUFRZX0RPQ1VNRU5UX1ZFUlNJT05fTUFQIiwiZG9jdW1lbnRWZXJzaW9uTWFwIiwiRU1QVFlfRE9DVU1FTlRfS0VZX1NFVCIsImRvY3VtZW50S2V5U2V0Iiwia2V5c18xIiwiRU1QVFlfVEFSR0VUX0lEX1NFVCIsInRhcmdldElkU2V0IiwiTXV0YXRpb25CYXRjaCIsImJhdGNoSWQiLCJsb2NhbFdyaXRlVGltZSIsImJhc2VNdXRhdGlvbnMiLCJtdXRhdGlvbnMiLCJhcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJkb2NLZXkiLCJtYXliZURvYyIsImJhdGNoUmVzdWx0IiwibXV0YXRpb25SZXN1bHRzIiwibXV0YXRpb24iLCJtdXRhdGlvblJlc3VsdCIsImFwcGx5VG9Mb2NhbFZpZXciLCJiYXNlRG9jIiwiYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQiLCJtYXliZURvY3MiLCJtdXRhdGVkRG9jdW1lbnRzIiwibXV0YXRlZERvY3VtZW50IiwicmVkdWNlIiwiTXV0YXRpb25CYXRjaFJlc3VsdCIsImJhdGNoIiwiY29tbWl0VmVyc2lvbiIsInN0cmVhbVRva2VuIiwiZG9jVmVyc2lvbnMiLCJ2ZXJzaW9uTWFwIiwiUGVyc2lzdGVuY2VQcm9taXNlIiwibmV4dENhbGxiYWNrIiwiY2F0Y2hDYWxsYmFjayIsImlzRG9uZSIsImNhbGxiYWNrQXR0YWNoZWQiLCJuZXh0Rm4iLCJjYXRjaEZuIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiZXhwZWN0ZWRDb3VudCIsInJlc29sdmVkQ291bnQiLCJvciIsInByZWRpY2F0ZXMiLCJwcmVkaWNhdGUiLCJpc1RydWUiLCJwcmVkaWNhdGVzXzEiLCJjb2xsZWN0aW9uIiwicHJvbWlzZXMiLCJMT0dfVEFHIiwiU2ltcGxlRGIiLCJnZXRJT1NWZXJzaW9uIiwib3Blbk9yQ3JlYXRlIiwic2NoZW1hQ29udmVydGVyIiwiaXNBdmFpbGFibGUiLCJvcGVuIiwib25ibG9ja2VkIiwiY3JlYXRlT3JVcGdyYWRlIiwiU0NIRU1BX1ZFUlNJT04iLCJ3cmFwUmVxdWVzdCIsImRlbGV0ZURhdGFiYXNlIiwiaXNNb2NrUGVyc2lzdGVuY2UiLCJ1YSIsImlPU1ZlcnNpb24iLCJpc1Vuc3VwcG9ydGVkSU9TIiwiYW5kcm9pZFZlcnNpb24iLCJnZXRBbmRyb2lkVmVyc2lvbiIsImlzVW5zdXBwb3J0ZWRBbmRyb2lkIiwiVVNFX01PQ0tfUEVSU0lTVEVOQ0UiLCJnZXRTdG9yZSIsInR4biIsImlPU1ZlcnNpb25SZWdleCIsImFuZHJvaWRWZXJzaW9uUmVnZXgiLCJzZXRWZXJzaW9uQ2hhbmdlTGlzdGVuZXIiLCJ2ZXJzaW9uQ2hhbmdlTGlzdGVuZXIiLCJvbnZlcnNpb25jaGFuZ2UiLCJydW5UcmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlcyIsInRyYW5zYWN0aW9uRm4iLCJyZWFkb25seSIsImlkZW1wb3RlbnQiLCJhdHRlbXB0TnVtYmVyIiwidGhpc18xIiwic3RhdGVfMSIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsInRyYW5zYWN0aW9uRm5SZXN1bHQiLCJlcnJvcl8xIiwicmV0cnlhYmxlIiwiU2ltcGxlRGJUcmFuc2FjdGlvbiIsImFib3J0IiwiY29tcGxldGlvblByb21pc2UiLCJJdGVyYXRpb25Db250cm9sbGVyIiwiZGJDdXJzb3IiLCJzaG91bGRTdG9wIiwibmV4dEtleSIsInNraXAiLCJhYm9ydGVkIiwiY29tcGxldGlvbkRlZmVycmVkIiwiY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvciIsIm9iamVjdFN0b3JlTmFtZXMiLCJzdG9yZU5hbWUiLCJTaW1wbGVEYlN0b3JlIiwicHV0Iiwia2V5T3JWYWx1ZSIsImxvYWRBbGwiLCJpbmRleE9yUmFuZ2UiLCJkZWxldGVBbGwiLCJrZXlzT25seSIsImNvbnRyb2wiLCJpdGVyYXRlIiwib3B0aW9uc09yQ2FsbGJhY2siLCJpdGVyYXRlU2VyaWFsIiwiY3Vyc29yUmVxdWVzdCIsInByaW1hcnlLZXkiLCJzaG91bGRDb250aW51ZSIsImNvbnRyb2xsZXIiLCJ1c2VyUmVzdWx0IiwidXNlclByb21pc2UiLCJza2lwVG9LZXkiLCJpbmRleE5hbWUiLCJkaXJlY3Rpb24iLCJyZXZlcnNlIiwib3BlbktleUN1cnNvciIsIm9wZW5DdXJzb3IiLCJyZXBvcnRlZElPU0Vycm9yIiwiSU9TX0VSUk9SIiwibmV3RXJyb3JfMSIsIkluZGV4ZWREYk11dGF0aW9uUXVldWUiLCJ1c2VySWQiLCJzZXJpYWxpemVyIiwiaW5kZXhNYW5hZ2VyIiwicmVmZXJlbmNlRGVsZWdhdGUiLCJkb2N1bWVudEtleXNCeUJhdGNoSWQiLCJmb3JVc2VyIiwidXNlciIsInVpZCIsImlzQXV0aGVudGljYXRlZCIsImNoZWNrRW1wdHkiLCJlbXB0eSIsIklEQktleVJhbmdlIiwiYm91bmQiLCJORUdBVElWRV9JTkZJTklUWSIsIlBPU0lUSVZFX0lORklOSVRZIiwibXV0YXRpb25zU3RvcmUiLCJEYk11dGF0aW9uQmF0Y2giLCJ1c2VyTXV0YXRpb25zSW5kZXgiLCJhY2tub3dsZWRnZUJhdGNoIiwiZ2V0TXV0YXRpb25RdWV1ZU1ldGFkYXRhIiwibGFzdFN0cmVhbVRva2VuIiwiY29udmVydFN0cmVhbVRva2VuIiwibXV0YXRpb25RdWV1ZXNTdG9yZSIsImdldExhc3RTdHJlYW1Ub2tlbiIsInNldExhc3RTdHJlYW1Ub2tlbiIsImFkZE11dGF0aW9uQmF0Y2giLCJkb2N1bWVudFN0b3JlIiwiZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSIsIm11dGF0aW9uU3RvcmUiLCJkYkJhdGNoIiwidG9EYk11dGF0aW9uQmF0Y2giLCJjb2xsZWN0aW9uUGFyZW50cyIsIm11dGF0aW9uc18xIiwiaW5kZXhLZXkiLCJEYkRvY3VtZW50TXV0YXRpb24iLCJQTEFDRUhPTERFUiIsInBhcmVudCIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiYWRkT25Db21taXR0ZWRMaXN0ZW5lciIsImxvb2t1cE11dGF0aW9uQmF0Y2giLCJmcm9tRGJNdXRhdGlvbkJhdGNoIiwibG9va3VwTXV0YXRpb25LZXlzIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJuZXh0QmF0Y2hJZCIsImxvd2VyQm91bmQiLCJmb3VuZEJhdGNoIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsInVwcGVyQm91bmQiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXMiLCJkYkJhdGNoZXMiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSIsImRvY3VtZW50S2V5IiwiaW5kZXhQcmVmaXgiLCJwcmVmaXhGb3JQYXRoIiwiaW5kZXhTdGFydCIsInVzZXJJRCIsImVuY29kZWRQYXRoIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwiZG9jdW1lbnRLZXlzIiwidW5pcXVlQmF0Y2hJRHMiLCJiYXRjaElEIiwibG9va3VwTXV0YXRpb25CYXRjaGVzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkiLCJpc0RvY3VtZW50UXVlcnkiLCJpc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5IiwicXVlcnlQYXRoIiwiaW1tZWRpYXRlQ2hpbGRyZW5MZW5ndGgiLCJiYXRjaElEcyIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJzaW1wbGVEYlRyYW5zYWN0aW9uIiwicmVtb3ZlZERvY3VtZW50cyIsInJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cyIsInJlbW92ZU11dGF0aW9uUmVmZXJlbmNlIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJzdGFydFJhbmdlIiwicHJlZml4Rm9yVXNlciIsImRhbmdsaW5nTXV0YXRpb25SZWZlcmVuY2VzIiwiY29udGFpbnNLZXkiLCJtdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkiLCJEYk11dGF0aW9uUXVldWUiLCJrZXlQYXRoIiwiaW5kZXhUeG4iLCJvbmx5IiwibnVtRGVsZXRlZCIsInJlbW92ZVByb21pc2UiLCJJbmRleGVkRGJQZXJzaXN0ZW5jZSIsIkdlbmVyYXRvcklkcyIsIlJFU0VSVkVEX0JJVFMiLCJUYXJnZXRJZEdlbmVyYXRvciIsImdlbmVyYXRvcklkIiwic2VlZCIsInNlZWsiLCJuZXh0SWQiLCJhZnRlciIsImZvclRhcmdldENhY2hlIiwiUXVlcnlDYWNoZSIsImZvclN5bmNFbmdpbmUiLCJTeW5jRW5naW5lIiwiSW5kZXhlZERiVGFyZ2V0Q2FjaGUiLCJ0YXJnZXRJZEdlbmVyYXRvciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJyZXRyaWV2ZU1ldGFkYXRhIiwiaGlnaGVzdFRhcmdldElkIiwic2F2ZU1ldGFkYXRhIiwiZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIiLCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJhZGRUYXJnZXREYXRhIiwidGFyZ2V0RGF0YSIsInNhdmVUYXJnZXREYXRhIiwidGFyZ2V0Q291bnQiLCJ1cGRhdGVNZXRhZGF0YUZyb21UYXJnZXREYXRhIiwidXBkYXRlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldERhdGEiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsInRhcmdldHNTdG9yZSIsInJlbW92ZVRhcmdldHMiLCJhY3RpdmVUYXJnZXRJZHMiLCJmcm9tRGJUYXJnZXQiLCJmb3JFYWNoVGFyZ2V0IiwiRGJUYXJnZXRHbG9iYWwiLCJ0b0RiVGFyZ2V0IiwidXBkYXRlZCIsImdldFRhcmdldENvdW50IiwiZ2V0VGFyZ2V0RGF0YSIsImNhbm9uaWNhbElkIiwiRGJUYXJnZXQiLCJxdWVyeVRhcmdldHNJbmRleE5hbWUiLCJmb3VuZCIsImFkZE1hdGNoaW5nS2V5cyIsImRvY3VtZW50VGFyZ2V0U3RvcmUiLCJEYlRhcmdldERvY3VtZW50IiwiYWRkUmVmZXJlbmNlIiwicmVtb3ZlTWF0Y2hpbmdLZXlzIiwicmVtb3ZlUmVmZXJlbmNlIiwiZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJkb2N1bWVudFRhcmdldHNJbmRleCIsImdldFRhcmdldERhdGFGb3JUYXJnZXQiLCJ0YXJnZXRHbG9iYWwiLCJNdXRhdGlvblR5cGUiLCJGaWVsZE1hc2siLCJmaWVsZHMiLCJmcm9tU2V0IiwiZnJvbUFycmF5IiwiZmllbGRzQXNTZXQiLCJmaWVsZFBhdGgiLCJjb3ZlcnMiLCJmaWVsZE1hc2tQYXRoIiwiRmllbGRUcmFuc2Zvcm0iLCJmaWVsZCIsInRyYW5zZm9ybSIsIk11dGF0aW9uUmVzdWx0IiwidHJhbnNmb3JtUmVzdWx0cyIsIlR5cGVPcmRlciIsIlNlcnZlclRpbWVzdGFtcEJlaGF2aW9yIiwiUHJlY29uZGl0aW9uIiwidXBkYXRlVGltZSIsImV4aXN0cyIsImlzVmFsaWRGb3IiLCJEb2N1bWVudCIsImlzTm9uZSIsIk5PTkUiLCJNdXRhdGlvbiIsInZlcmlmeUtleU1hdGNoZXMiLCJnZXRQb3N0TXV0YXRpb25WZXJzaW9uIiwiU2V0TXV0YXRpb24iLCJwcmVjb25kaXRpb24iLCJTZXQiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJoYXNMb2NhbE11dGF0aW9ucyIsImV4dHJhY3RCYXNlVmFsdWUiLCJQYXRjaE11dGF0aW9uIiwiZmllbGRNYXNrIiwiUGF0Y2giLCJVbmtub3duRG9jdW1lbnQiLCJuZXdEYXRhIiwicGF0Y2hEb2N1bWVudCIsIk9iamVjdFZhbHVlIiwicGF0Y2hPYmplY3QiLCJuZXdWYWx1ZSIsIlRyYW5zZm9ybU11dGF0aW9uIiwiZmllbGRUcmFuc2Zvcm1zIiwiVHJhbnNmb3JtIiwiZG9jIiwicmVxdWlyZURvY3VtZW50Iiwic2VydmVyVHJhbnNmb3JtUmVzdWx0cyIsInRyYW5zZm9ybU9iamVjdCIsImxvY2FsVHJhbnNmb3JtUmVzdWx0cyIsImJhc2VPYmplY3QiLCJmaWVsZFRyYW5zZm9ybSIsImV4aXN0aW5nVmFsdWUiLCJjb2VyY2VkVmFsdWUiLCJjb21wdXRlQmFzZVZhbHVlIiwiRGVsZXRlTXV0YXRpb24iLCJEZWxldGUiLCJOb0RvY3VtZW50IiwiRmllbGRWYWx1ZU9wdGlvbnMiLCJzZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciIsInRpbWVzdGFtcHNJblNuYXBzaG90cyIsImZyb21TbmFwc2hvdE9wdGlvbnMiLCJzZXJ2ZXJUaW1lc3RhbXBzIiwiRXN0aW1hdGUiLCJQcmV2aW91cyIsIkRlZmF1bHQiLCJGaWVsZFZhbHVlIiwiZGVmYXVsdENvbXBhcmVUbyIsInR5cGVPcmRlciIsIk51bGxWYWx1ZSIsImludGVybmFsVmFsdWUiLCJJTlNUQU5DRSIsIkJvb2xlYW5WYWx1ZSIsIm9mIiwiVFJVRSIsIkZBTFNFIiwiTnVtYmVyVmFsdWUiLCJudW1lcmljRXF1YWxzIiwiSW50ZWdlclZhbHVlIiwiRG91YmxlVmFsdWUiLCJOQU4iLCJOYU4iLCJJbmZpbml0eSIsIlN0cmluZ1ZhbHVlIiwiVGltZXN0YW1wVmFsdWUiLCJTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSIsIkJsb2JWYWx1ZSIsIlJlZlZhbHVlIiwiR2VvUG9pbnRWYWx1ZSIsIml0MSIsIml0MiIsIm5leHQxIiwibmV4dDIiLCJ0byIsInNldENoaWxkIiwibmV3Q2hpbGQiLCJwYXRoU2VnbWVudCIsImN1cnJlbnRQYXRoIiwibmVzdGVkRmllbGRzIiwibmVzdGVkUGF0aCIsImNoaWxkTmFtZSIsIkFycmF5VmFsdWUiLCJtaW5MZW5ndGgiLCJNYXliZURvY3VtZW50IiwiY29tcGFyZUJ5S2V5IiwiZDEiLCJkMiIsIm9iamVjdFZhbHVlIiwicHJvdG8iLCJjb252ZXJ0ZXIiLCJmaWVsZFZhbHVlQ2FjaGUiLCJjYW5vbmljYWxQYXRoIiwiZmllbGRWYWx1ZSIsInByb3RvVmFsdWUiLCJnZXRQcm90b0ZpZWxkIiwicmVzdWx0XzEiLCJtYXBWYWx1ZSIsImNvbXBhcmVCeUZpZWxkIiwidjEiLCJ2MiIsIk9iamVjdE1hcCIsIm1hcEtleUZuIiwiaW5uZXIiLCJtYXRjaGVzIiwibWF0Y2hlc18xIiwib3RoZXJLZXkiLCJlbnRyaWVzXzEiLCJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsIl9yZWFkVGltZSIsImFkZEVudHJ5IiwibWF5YmVEb2N1bWVudCIsInJlYWRUaW1lIiwiYXNzZXJ0Tm90QXBwbGllZCIsInJlbW92ZUVudHJ5IiwiZ2V0RW50cnkiLCJidWZmZXJlZEVudHJ5IiwiZ2V0RnJvbUNhY2hlIiwiZ2V0RW50cmllcyIsImdldEFsbEZyb21DYWNoZSIsImFwcGx5Q2hhbmdlcyIsIkluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUiLCJyZW1vdGVEb2N1bWVudHNTdG9yZSIsImRiS2V5IiwidXBkYXRlTWV0YWRhdGEiLCJzaXplRGVsdGEiLCJnZXRNZXRhZGF0YSIsImJ5dGVTaXplIiwic2V0TWV0YWRhdGEiLCJkYlJlbW90ZURvYyIsIm1heWJlRGVjb2RlRG9jdW1lbnQiLCJnZXRTaXplZEVudHJ5IiwiZGJEb2N1bWVudFNpemUiLCJmb3JFYWNoRGJFbnRyeSIsImdldFNpemVkRW50cmllcyIsInNpemVNYXAiLCJtYXliZURvY3VtZW50cyIsImtleUl0ZXIiLCJwb3RlbnRpYWxLZXlSYXciLCJwb3RlbnRpYWxLZXkiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5Iiwic2luY2VSZWFkVGltZSIsImltbWVkaWF0ZUNoaWxkcmVuUGF0aExlbmd0aCIsIml0ZXJhdGlvbk9wdGlvbnMiLCJjb2xsZWN0aW9uS2V5IiwicmVhZFRpbWVLZXkiLCJ0b0RiVGltZXN0YW1wS2V5IiwiRGJSZW1vdGVEb2N1bWVudCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4IiwiZnJvbURiUmVtb3RlRG9jdW1lbnQiLCJnZXROZXdEb2N1bWVudENoYW5nZXMiLCJjaGFuZ2VkRG9jcyIsImxhc3RSZWFkVGltZSIsImRvY3VtZW50c1N0b3JlIiwicmVhZFRpbWVJbmRleCIsImZyb21EYlRpbWVzdGFtcEtleSIsImdldExhc3REb2N1bWVudENoYW5nZSIsImNoYW5nZWREb2MiLCJuZXdDaGFuZ2VCdWZmZXIiLCJ0cmFja1JlbW92YWxzIiwiZ2V0U2l6ZSIsImRvY3VtZW50R2xvYmFsU3RvcmUiLCJEYlJlbW90ZURvY3VtZW50R2xvYmFsIiwiY2xhc3NfMSIsImRvY3VtZW50Q2FjaGUiLCJkb2N1bWVudFNpemVzIiwicHJldmlvdXNTaXplIiwidG9EYlJlbW90ZURvY3VtZW50IiwiZGVsZXRlZERvYyIsImdldFJlc3VsdCIsInVua25vd25Eb2N1bWVudCIsIm5vRG9jdW1lbnQiLCJNZW1vcnlJbmRleE1hbmFnZXIiLCJjb2xsZWN0aW9uUGFyZW50SW5kZXgiLCJNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgiLCJjb2xsZWN0aW9uUGF0aCIsImdldENvbGxlY3Rpb25QYXJlbnRzIiwicGFyZW50UGF0aCIsImV4aXN0aW5nUGFyZW50cyIsImFkZGVkIiwiU2NoZW1hQ29udmVydGVyIiwiZnJvbVZlcnNpb24iLCJ0b1ZlcnNpb24iLCJEYlByaW1hcnlDbGllbnQiLCJjcmVhdGVQcmltYXJ5Q2xpZW50U3RvcmUiLCJhdXRvSW5jcmVtZW50IiwidXNlck11dGF0aW9uc0tleVBhdGgiLCJ1bmlxdWUiLCJjcmVhdGVNdXRhdGlvblF1ZXVlIiwiY3JlYXRlUXVlcnlDYWNoZSIsImNyZWF0ZVJlbW90ZURvY3VtZW50Q2FjaGUiLCJkZWxldGVPYmplY3RTdG9yZSIsImRyb3BRdWVyeUNhY2hlIiwiZ2xvYmFsU3RvcmUiLCJ3cml0ZUVtcHR5VGFyZ2V0R2xvYmFsRW50cnkiLCJleGlzdGluZ011dGF0aW9ucyIsInYzTXV0YXRpb25zU3RvcmUiLCJ3cml0ZUFsbCIsInVwZ3JhZGVNdXRhdGlvbkJhdGNoU2NoZW1hQW5kTWlncmF0ZURhdGEiLCJEYkNsaWVudE1ldGFkYXRhIiwiY3JlYXRlQ2xpZW50TWV0YWRhdGFTdG9yZSIsInJlbW92ZUFja25vd2xlZGdlZE11dGF0aW9ucyIsImNyZWF0ZURvY3VtZW50R2xvYmFsU3RvcmUiLCJhZGREb2N1bWVudEdsb2JhbCIsImVuc3VyZVNlcXVlbmNlTnVtYmVycyIsImNyZWF0ZUNvbGxlY3Rpb25QYXJlbnRJbmRleCIsImRyb3BSZW1vdGVEb2N1bWVudENoYW5nZXNTdG9yZSIsInJlbW90ZURvY3VtZW50U3RvcmUiLCJyZWFkVGltZUluZGV4UGF0aCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCIsImNyZWF0ZVJlbW90ZURvY3VtZW50UmVhZFRpbWVJbmRleCIsImJ5dGVDb3VudCIsInF1ZXVlc1N0b3JlIiwicXVldWVzIiwicXVldWUiLCJsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCIsImN1cnJlbnRTZXF1ZW5jZU51bWJlciIsImRvY1NlbnRpbmVsS2V5Iiwic2VudGluZWxLZXkiLCJtYXliZVNlbnRpbmVsIiwid3JpdGVTZW50aW5lbEtleSIsIkRiQ29sbGVjdGlvblBhcmVudCIsImNvbGxlY3Rpb25QYXJlbnRzU3RvcmUiLCJjYWNoZSIsInBhdGhTZWdtZW50cyIsIkRiVGltZXN0YW1wIiwib3duZXJJZCIsImFsbG93VGFiU3luY2hyb25pemF0aW9uIiwibGVhc2VUaW1lc3RhbXBNcyIsImxvY2FsV3JpdGVUaW1lTXMiLCJEYk5vRG9jdW1lbnQiLCJEYlVua25vd25Eb2N1bWVudCIsInJlc3VtZVRva2VuIiwibGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsInF1ZXJ5VGFyZ2V0c0tleVBhdGgiLCJkb2N1bWVudFRhcmdldHNLZXlQYXRoIiwiY2xpZW50SWQiLCJ1cGRhdGVUaW1lTXMiLCJuZXR3b3JrRW5hYmxlZCIsImluRm9yZWdyb3VuZCIsIlRhcmdldFB1cnBvc2UiLCJWM19TVE9SRVMiLCJWNF9TVE9SRVMiLCJWNl9TVE9SRVMiLCJBTExfU1RPUkVTIiwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyIiwiY29sbGVjdGlvblBhcmVudHNDYWNoZSIsImNvbGxlY3Rpb25QYXJlbnQiLCJwYXJlbnRQYXRocyIsImVudHJ5IiwiVGFyZ2V0RGF0YSIsInB1cnBvc2UiLCJzbmFwc2hvdFZlcnNpb24iLCJ3aXRoU2VxdWVuY2VOdW1iZXIiLCJ3aXRoUmVzdW1lVG9rZW4iLCJ3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsIkxvY2FsU2VyaWFsaXplciIsInJlbW90ZVNlcmlhbGl6ZXIiLCJyZW1vdGVEb2MiLCJmcm9tRG9jdW1lbnQiLCJmcm9tRGJUaW1lc3RhbXAiLCJkYlJlYWRUaW1lIiwidG9Eb2N1bWVudCIsInJlYWRUaW1lXzEiLCJ0b0RiVGltZXN0YW1wIiwicmVhZFRpbWVfMiIsImRiVGltZXN0YW1wS2V5IiwiZGJUaW1lc3RhbXAiLCJzZXJpYWxpemVkQmFzZU11dGF0aW9ucyIsInRvTXV0YXRpb24iLCJzZXJpYWxpemVkTXV0YXRpb25zIiwiZnJvbU11dGF0aW9uIiwidG9EYlJlc291cmNlUGF0aHMiLCJlbmNvZGVkS2V5cyIsImZyb21EYlJlc291cmNlUGF0aHMiLCJlbmNvZGVkUGF0aHMiLCJlbmNvZGVkUGF0aHNfMSIsImRiVGFyZ2V0IiwiZG9jdW1lbnRzIiwiZnJvbURvY3VtZW50c1RhcmdldCIsImZyb21RdWVyeVRhcmdldCIsIkxpc3RlbiIsInF1ZXJ5UHJvdG8iLCJkYkxhc3RMaW1ib0ZyZWVUaW1lc3RhbXAiLCJ0b0RvY3VtZW50c1RhcmdldCIsInRvUXVlcnlUYXJnZXQiLCJidWZmZXJFbnRyeUNvbXBhcmF0b3IiLCJhU2VxdWVuY2UiLCJhSW5kZXgiLCJiU2VxdWVuY2UiLCJiSW5kZXgiLCJzZXFDbXAiLCJSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIiLCJtYXhFbGVtZW50cyIsInByZXZpb3VzSW5kZXgiLCJuZXh0SW5kZXgiLCJhZGRFbGVtZW50IiwiaGlnaGVzdFZhbHVlIiwiR0NfRElEX05PVF9SVU4iLCJkaWRSdW4iLCJzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQiLCJ0YXJnZXRzUmVtb3ZlZCIsImRvY3VtZW50c1JlbW92ZWQiLCJMcnVQYXJhbXMiLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJ3aXRoQ2FjaGVTaXplIiwiY2FjaGVTaXplIiwiREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUiLCJERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QiLCJDT0xMRUNUSU9OX0RJU0FCTEVEIiwiTUlOSU1VTV9DQUNIRV9TSVpFX0JZVEVTIiwiREVGQVVMVF9DQUNIRV9TSVpFX0JZVEVTIiwiREVGQVVMVCIsIkRJU0FCTEVEIiwiTHJ1U2NoZWR1bGVyIiwiZ2FyYmFnZUNvbGxlY3RvciIsImxvY2FsU3RvcmUiLCJoYXNSdW4iLCJnY1Rhc2siLCJzY2hlZHVsZUdDIiwic3RvcCIsImRlbGF5IiwiTHJ1R2FyYmFnZUNvbGxlY3Rpb24iLCJjb2xsZWN0R2FyYmFnZSIsImlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyIsIkxydUdhcmJhZ2VDb2xsZWN0b3IiLCJkZWxlZ2F0ZSIsImNhbGN1bGF0ZVRhcmdldENvdW50IiwicGVyY2VudGlsZSIsImdldFNlcXVlbmNlTnVtYmVyQ291bnQiLCJudGhTZXF1ZW5jZU51bWJlciIsImZvckVhY2hPcnBoYW5lZERvY3VtZW50U2VxdWVuY2VOdW1iZXIiLCJtYXhWYWx1ZSIsInJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzIiwiY29sbGVjdCIsImdldENhY2hlU2l6ZSIsInJ1bkdhcmJhZ2VDb2xsZWN0aW9uIiwidXBwZXJCb3VuZFNlcXVlbmNlTnVtYmVyIiwic2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0IiwiY291bnRlZFRhcmdldHNUcyIsImZvdW5kVXBwZXJCb3VuZFRzIiwicmVtb3ZlZFRhcmdldHNUcyIsInJlbW92ZWREb2N1bWVudHNUcyIsInN0YXJ0VHMiLCJzZXF1ZW5jZU51bWJlcnMiLCJudW1UYXJnZXRzUmVtb3ZlZCIsIlBlcnNpc3RlbmNlVHJhbnNhY3Rpb24iLCJvbkNvbW1pdHRlZExpc3RlbmVycyIsImxpc3RlbmVyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiTE9HX1RBRyQxIiwiUFJJTUFSWV9MRUFTRV9MT1NUX0VSUk9SX01TRyIsIlBSSU1BUllfTEVBU0VfRVhDTFVTSVZFX0VSUk9SX01TRyIsIkluZGV4ZWREYlRyYW5zYWN0aW9uIiwibHJ1UGFyYW1zIiwiX3N0YXJ0ZWQiLCJpc1ByaW1hcnkiLCJ3aW5kb3dVbmxvYWRIYW5kbGVyIiwiZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlciIsImNsaWVudE1ldGFkYXRhUmVmcmVzaGVyIiwibGFzdEdhcmJhZ2VDb2xsZWN0aW9uVGltZSIsInByaW1hcnlTdGF0ZUxpc3RlbmVyIiwiSW5kZXhlZERiTHJ1RGVsZWdhdGUiLCJkYk5hbWUiLCJNQUlOX0RBVEFCQVNFIiwidGFyZ2V0Q2FjaGUiLCJyZW1vdGVEb2N1bWVudENhY2hlIiwibG9jYWxTdG9yYWdlIiwid2ViU3RvcmFnZSIsImNyZWF0ZUluZGV4ZWREYlBlcnNpc3RlbmNlIiwicGVyc2lzdGVuY2UiLCJzdGFydGVkIiwic2ltcGxlRGIiLCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkiLCJhdHRhY2hWaXNpYmlsaXR5SGFuZGxlciIsImF0dGFjaFdpbmRvd1VubG9hZEhvb2siLCJzY2hlZHVsZUNsaWVudE1ldGFkYXRhQW5kUHJpbWFyeUxlYXNlUmVmcmVzaGVzIiwibGlzdGVuU2VxdWVuY2UiLCJzZXRQcmltYXJ5U3RhdGVMaXN0ZW5lciIsInByaW1hcnlTdGF0ZSIsInNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyIiwiZGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJuZXdWZXJzaW9uIiwic2V0TmV0d29ya0VuYWJsZWQiLCJjbGllbnRNZXRhZGF0YVN0b3JlIiwidmVyaWZ5UHJpbWFyeUxlYXNlIiwic3VjY2VzcyIsImNhbkFjdEFzUHJpbWFyeSIsInJlbGVhc2VQcmltYXJ5TGVhc2VJZkhlbGQiLCJhY3F1aXJlT3JFeHRlbmRQcmltYXJ5TGVhc2UiLCJwcmltYXJ5Q2xpZW50U3RvcmUiLCJwcmltYXJ5Q2xpZW50IiwiaXNMb2NhbENsaWVudCIsInJlbW92ZUNsaWVudE1ldGFkYXRhIiwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGUiLCJpc1dpdGhpbkFnZSIsIm1ldGFkYXRhU3RvcmUiLCJleGlzdGluZ0NsaWVudHMiLCJhY3RpdmUiLCJmaWx0ZXJBY3RpdmVDbGllbnRzIiwiaW5hY3RpdmUiLCJjbGllbnQiLCJpbmFjdGl2ZUNsaWVudCIsInJlbW92ZUl0ZW0iLCJ6b21iaWVkQ2xpZW50TG9jYWxTdG9yYWdlS2V5IiwiQ2xpZW50TWV0YWRhdGFSZWZyZXNoIiwiY3VycmVudFByaW1hcnkiLCJpc0NsaWVudFpvbWJpZWQiLCJmaW5kIiwib3RoZXJDbGllbnQiLCJvdGhlckNsaWVudEhhc0JldHRlck5ldHdvcmtTdGF0ZSIsIm90aGVyQ2xpZW50SGFzQmV0dGVyVmlzaWJpbGl0eSIsIm90aGVyQ2xpZW50SGFzU2FtZU5ldHdvcmtTdGF0ZSIsInNodXRkb3duIiwibWFya0NsaWVudFpvbWJpZWQiLCJkZXRhY2hWaXNpYmlsaXR5SGFuZGxlciIsImRldGFjaFdpbmRvd1VubG9hZEhvb2siLCJyZW1vdmVDbGllbnRab21iaWVkRW50cnkiLCJjbGllbnRzIiwiYWN0aXZpdHlUaHJlc2hvbGRNcyIsImdldEFjdGl2ZUNsaWVudHMiLCJjbGllbnRNZXRhZGF0YSIsImNsZWFyUGVyc2lzdGVuY2UiLCJnZXRNdXRhdGlvblF1ZXVlIiwiZ2V0VGFyZ2V0Q2FjaGUiLCJnZXRSZW1vdGVEb2N1bWVudENhY2hlIiwiZ2V0SW5kZXhNYW5hZ2VyIiwidHJhbnNhY3Rpb25PcGVyYXRpb24iLCJwZXJzaXN0ZW5jZVRyYW5zYWN0aW9uIiwic2ltcGxlRGJNb2RlIiwic2ltcGxlRGJUeG4iLCJob2xkc1ByaW1hcnlMZWFzZSIsInZlcmlmeUFsbG93VGFiU3luY2hyb25pemF0aW9uIiwibmV3UHJpbWFyeSIsImJ1aWxkU3RvcmFnZVByZWZpeCIsImRhdGFiYXNlSW5mbyIsImlzRGVmYXVsdERhdGFiYXNlIiwibWF4QWdlTXMiLCJhZGRFdmVudExpc3RlbmVyIiwidmlzaWJpbGl0eVN0YXRlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlzWm9tYmllZCIsImdldEl0ZW0iLCJzZXRJdGVtIiwiWk9NQklFRF9DTElFTlRTX0tFWV9QUkVGSVgiLCJpc1ByaW1hcnlMZWFzZUxvc3RFcnJvciIsImluTWVtb3J5UGlucyIsImRvY0NvdW50UHJvbWlzZSIsIm9ycGhhbmVkRG9jbWVudENvdW50IiwiZG9jQ291bnQiLCJvcnBoYW5lZENvdW50IiwiZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnQiLCJzZXRJbk1lbW9yeVBpbnMiLCJpc1Bpbm5lZCIsIm11dGF0aW9uUXVldWVzQ29udGFpbktleSIsImNoYW5nZUJ1ZmZlciIsImRvY3VtZW50Q291bnQiLCJyZW1vdmVUYXJnZXQiLCJ1cGRhdGVMaW1ib0RvY3VtZW50IiwibmV4dFBhdGgiLCJuZXh0VG9SZXBvcnQiLCJzZW50aW5lbFJvdyIsIk51bWJlckFzQW55IiwiTUlOX1NBRkVfSU5URUdFUiIsIk1BWF9TQUZFX0lOVEVHRVIiLCJpc0ludGVnZXIiLCJpc0Zpbml0ZSIsImlzTnVsbE9yVW5kZWZpbmVkIiwiaXNTYWZlSW50ZWdlciIsIkxpbWl0VHlwZSIsIlRhcmdldCIsImNvbGxlY3Rpb25Hcm91cCIsIm9yZGVyQnkiLCJmaWx0ZXJzIiwic3RhcnRBdCIsImVuZEF0IiwibWVtb2l6ZWRDYW5vbmljYWxJZCIsIlF1ZXJ5IiwiZXhwbGljaXRPcmRlckJ5IiwibGltaXRUeXBlIiwiRmlyc3QiLCJtZW1vaXplZE9yZGVyQnkiLCJtZW1vaXplZFRhcmdldCIsImFzc2VydFZhbGlkQm91bmQiLCJhdFBhdGgiLCJpbmVxdWFsaXR5RmllbGQiLCJnZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQiLCJmaXJzdE9yZGVyQnlGaWVsZCIsImdldEZpcnN0T3JkZXJCeUZpZWxkIiwiS0VZX09SREVSSU5HX0FTQyIsIk9yZGVyQnkiLCJmb3VuZEtleU9yZGVyaW5nIiwibGFzdERpcmVjdGlvbiIsImRpciIsIkRpcmVjdGlvbiIsIkFTQ0VORElORyIsIktFWV9PUkRFUklOR19ERVNDIiwiYWRkRmlsdGVyIiwiRmllbGRGaWx0ZXIiLCJpc0luZXF1YWxpdHkiLCJuZXdGaWx0ZXJzIiwiYWRkT3JkZXJCeSIsIm5ld09yZGVyQnkiLCJ3aXRoTGltaXRUb0ZpcnN0Iiwid2l0aExpbWl0VG9MYXN0IiwiTGFzdCIsIndpdGhTdGFydEF0Iiwid2l0aEVuZEF0IiwiYXNDb2xsZWN0aW9uUXVlcnlBdFBhdGgiLCJtYXRjaGVzQWxsRG9jdW1lbnRzIiwidG9UYXJnZXQiLCJkb2NDb21wYXJhdG9yIiwiY29tcGFyZWRPbktleUZpZWxkIiwiY29tcCIsImNvbXBhcmUiLCJtYXRjaGVzUGF0aEFuZENvbGxlY3Rpb25Hcm91cCIsIm1hdGNoZXNPcmRlckJ5IiwibWF0Y2hlc0ZpbHRlcnMiLCJtYXRjaGVzQm91bmRzIiwiaGFzTGltaXRUb0ZpcnN0IiwiaGFzTGltaXRUb0xhc3QiLCJmaW5kRmlsdGVyT3BlcmF0b3IiLCJvcGVyYXRvcnMiLCJvcmRlckJ5cyIsIkRFU0NFTkRJTkciLCJCb3VuZCIsImJlZm9yZSIsImRvY1BhdGgiLCJzb3J0c0JlZm9yZURvY3VtZW50IiwiRmlsdGVyIiwiT3BlcmF0b3IiLCJMRVNTX1RIQU4iLCJMRVNTX1RIQU5fT1JfRVFVQUwiLCJFUVVBTCIsIkdSRUFURVJfVEhBTl9PUl9FUVVBTCIsIkdSRUFURVJfVEhBTiIsIkFSUkFZX0NPTlRBSU5TIiwiSU4iLCJBUlJBWV9DT05UQUlOU19BTlkiLCJldmVyeSIsIktleUZpZWxkSW5GaWx0ZXIiLCJLZXlGaWVsZEZpbHRlciIsIkFycmF5Q29udGFpbnNGaWx0ZXIiLCJJbkZpbHRlciIsIkFycmF5Q29udGFpbnNBbnlGaWx0ZXIiLCJtYXRjaGVzQ29tcGFyaXNvbiIsImNvbXBhcmlzb24iLCJyZWZWYWx1ZSIsImFycmF5VmFsdWUiLCJsaHNFbGVtIiwib3JkZXJCeUNvbXBvbmVudCIsImRvY1ZhbHVlIiwidGhpc1Bvc2l0aW9uIiwib3RoZXJQb3NpdGlvbiIsImlzS2V5T3JkZXJCeSIsIkluZGV4RnJlZVF1ZXJ5RW5naW5lIiwic2V0TG9jYWxEb2N1bWVudHNWaWV3IiwibG9jYWxEb2N1bWVudHMiLCJsb2NhbERvY3VtZW50c1ZpZXciLCJyZW1vdGVLZXlzIiwiZXhlY3V0ZUZ1bGxDb2xsZWN0aW9uU2NhbiIsImdldERvY3VtZW50cyIsInByZXZpb3VzUmVzdWx0cyIsImFwcGx5UXVlcnkiLCJuZWVkc1JlZmlsbCIsInVwZGF0ZWRSZXN1bHRzIiwicXVlcnlSZXN1bHRzIiwic29ydGVkUHJldmlvdXNSZXN1bHRzIiwibGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiZG9jQXRMaW1pdEVkZ2UiLCJoYXNQZW5kaW5nV3JpdGVzIiwiTG9jYWxEb2N1bWVudHNWaWV3IiwibXV0YXRpb25RdWV1ZSIsImdldERvY3VtZW50IiwiYmF0Y2hlcyIsImdldERvY3VtZW50SW50ZXJuYWwiLCJpbkJhdGNoZXMiLCJpbkJhdGNoZXNfMSIsImFwcGx5TG9jYWxNdXRhdGlvbnNUb0RvY3VtZW50cyIsImRvY3MiLCJsb2NhbFZpZXciLCJiYXRjaGVzXzEiLCJnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyIsImJhc2VEb2NzIiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeSIsImdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5IiwicGFyZW50cyIsImNvbGxlY3Rpb25RdWVyeSIsIm11dGF0aW9uQmF0Y2hlcyIsIm1hdGNoaW5nTXV0YXRpb25CYXRjaGVzIiwiYWRkTWlzc2luZ0Jhc2VEb2N1bWVudHMiLCJtZXJnZWREb2N1bWVudHMiLCJtdXRhdGlvbkJhdGNoZXNfMSIsIm11dGF0ZWREb2MiLCJleGlzdGluZ0RvY3VtZW50cyIsIm1pc3NpbmdCYXNlRG9jRW50cmllc0ZvclBhdGNoaW5nIiwibWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXNfMSIsIm1pc3NpbmdCYXNlRG9jcyIsIlJlZmVyZW5jZVNldCIsInJlZnNCeUtleSIsIkRvY1JlZmVyZW5jZSIsInJlZnNCeVRhcmdldCIsImNvbXBhcmVCeVRhcmdldElkIiwicmVmIiwiYWRkUmVmZXJlbmNlcyIsInJlbW92ZVJlZiIsInJlbW92ZVJlZmVyZW5jZXMiLCJyZW1vdmVSZWZlcmVuY2VzRm9ySWQiLCJlbXB0eUtleSIsInN0YXJ0UmVmIiwiZW5kUmVmIiwicmVtb3ZlQWxsUmVmZXJlbmNlcyIsInJlZmVyZW5jZXNGb3JJZCIsImZpcnN0UmVmIiwidGFyZ2V0T3JCYXRjaElkIiwiTG9jYWxTdG9yZSIsInF1ZXJ5RW5naW5lIiwiaW5pdGlhbFVzZXIiLCJsb2NhbFZpZXdSZWZlcmVuY2VzIiwidGFyZ2V0RGF0YUJ5VGFyZ2V0IiwidGFyZ2V0SWRCeVRhcmdldCIsImxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lIiwicmVtb3RlRG9jdW1lbnRzIiwic3luY2hyb25pemVMYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSIsImhhbmRsZVVzZXJDaGFuZ2UiLCJuZXdNdXRhdGlvblF1ZXVlIiwibmV3TG9jYWxEb2N1bWVudHMiLCJvbGRCYXRjaGVzIiwicHJvbWlzZWRPbGRCYXRjaGVzIiwibmV3QmF0Y2hlcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJjaGFuZ2VkS2V5cyIsIm9sZEJhdGNoZXNfMSIsIm5ld0JhdGNoZXNfMSIsIl9lIiwiYWZmZWN0ZWREb2N1bWVudHMiLCJsb2NhbFdyaXRlIiwiZXhpc3RpbmdEb2NzIiwiYmFzZVZhbHVlIiwibG9va3VwTXV0YXRpb25Eb2N1bWVudHMiLCJhZmZlY3RlZCIsImRvY3VtZW50QnVmZmVyIiwiYXBwbHlXcml0ZVRvUmVtb3RlRG9jdW1lbnRzIiwicmVqZWN0QmF0Y2giLCJhZmZlY3RlZEtleXMiLCJhcHBseVJlbW90ZUV2ZW50IiwicmVtb3RlRXZlbnQiLCJyZW1vdGVWZXJzaW9uIiwibmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwIiwidGFyZ2V0Q2hhbmdlcyIsImNoYW5nZSIsIm9sZFRhcmdldERhdGEiLCJhZGRlZERvY3VtZW50cyIsIm5ld1RhcmdldERhdGEiLCJzaG91bGRQZXJzaXN0VGFyZ2V0RGF0YSIsInVwZGF0ZWRLZXlzIiwiZG9jdW1lbnRVcGRhdGVzIiwiZXhpc3RpbmdEb2MiLCJyZXNvbHZlZExpbWJvRG9jdW1lbnRzIiwidXBkYXRlUmVtb3RlVmVyc2lvbiIsIlJFU1VNRV9UT0tFTl9NQVhfQUdFX01JQ1JPUyIsIm1vZGlmaWVkRG9jdW1lbnRzIiwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlcyIsInZpZXdDaGFuZ2VzIiwidmlld0NoYW5nZXNfMSIsInZpZXdDaGFuZ2UiLCJhZGRlZEtleXMiLCJyZW1vdmVkS2V5cyIsImZyb21DYWNoZSIsInVwZGF0ZWRUYXJnZXREYXRhIiwibmV4dE11dGF0aW9uQmF0Y2giLCJhZnRlckJhdGNoSWQiLCJyZWFkRG9jdW1lbnQiLCJhbGxvY2F0ZVRhcmdldCIsImNhY2hlZCIsInJlbGVhc2VUYXJnZXQiLCJrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSIsInJlbW92ZWQiLCJleGVjdXRlUXVlcnkiLCJ1c2VQcmV2aW91c1Jlc3VsdHMiLCJyZW1vdGVEb2N1bWVudEtleXMiLCJyZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEiLCJkb2NLZXlzIiwicHJvbWlzZUNoYWluIiwiYWNrVmVyc2lvbiIsImNhY2hlZFRhcmdldERhdGEiLCJyZW1vdGVEb2N1bWVudENhY2hlXzEiLCJNZW1vcnlNdXRhdGlvblF1ZXVlIiwiYmF0Y2hlc0J5RG9jdW1lbnRLZXkiLCJiYXRjaEluZGV4IiwiaW5kZXhPZkV4aXN0aW5nQmF0Y2hJZCIsImZpbmRNdXRhdGlvbkJhdGNoIiwibXV0YXRpb25CYXRjaCIsInJhd0luZGV4IiwiaW5kZXhPZkJhdGNoSWQiLCJmaW5kTXV0YXRpb25CYXRjaGVzIiwicHJlZml4Iiwic3RhcnRQYXRoIiwicm93S2V5UGF0aCIsIlBlcnNpc3RlbnRTdHJlYW1TdGF0ZSIsIk1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUiLCJzaXplciIsImN1cnJlbnRTaXplIiwiZm9yRWFjaERvY3VtZW50S2V5IiwiTWVtb3J5VGFyZ2V0Q2FjaGUiLCJ0YXJnZXRzIiwiaGlnaGVzdFNlcXVlbmNlTnVtYmVyIiwibmV4dFRhcmdldElkIiwicmVtb3ZhbHMiLCJtYXRjaGluZ0tleXMiLCJNZW1vcnlQZXJzaXN0ZW5jZSIsInJlZmVyZW5jZURlbGVnYXRlRmFjdG9yeSIsIm11dGF0aW9uUXVldWVzIiwiZG9jdW1lbnRTaXplIiwiY3JlYXRlTHJ1UGVyc2lzdGVuY2UiLCJNZW1vcnlMcnVEZWxlZ2F0ZSIsImNyZWF0ZUVhZ2VyUGVyc2lzdGVuY2UiLCJNZW1vcnlFYWdlckRlbGVnYXRlIiwidG9LZXkiLCJNZW1vcnlUcmFuc2FjdGlvbiIsIm9uVHJhbnNhY3Rpb25TdGFydGVkIiwib25UcmFuc2FjdGlvbkNvbW1pdHRlZCIsInZzIiwiX29ycGhhbmVkRG9jdW1lbnRzIiwib3JwaGFuZWREb2N1bWVudHMiLCJpc1JlZmVyZW5jZWQiLCJvcnBoYW5lZFNlcXVlbmNlTnVtYmVycyIsIm9ycGhhbmVkRG9jdW1lbnRDb3VudCIsInJlbW90ZURvY3VtZW50Iiwib3JwaGFuZWRBdCIsIkRFRkFVTFRfQkFDS09GRl9JTklUSUFMX0RFTEFZX01TIiwiREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiIsIkRFRkFVTFRfQkFDS09GRl9NQVhfREVMQVlfTVMiLCJFeHBvbmVudGlhbEJhY2tvZmYiLCJpbml0aWFsRGVsYXlNcyIsImJhY2tvZmZGYWN0b3IiLCJtYXhEZWxheU1zIiwiY3VycmVudEJhc2VNcyIsInRpbWVyUHJvbWlzZSIsImxhc3RBdHRlbXB0VGltZSIsInJlc2V0VG9NYXgiLCJiYWNrb2ZmQW5kUnVuIiwiZGVzaXJlZERlbGF5V2l0aEppdHRlck1zIiwiaml0dGVyRGVsYXlNcyIsImRlbGF5U29GYXJNcyIsInJlbWFpbmluZ0RlbGF5TXMiLCJPbmxpbmVTdGF0ZSIsIk9ubGluZVN0YXRlU291cmNlIiwiUGVyc2lzdGVudFN0cmVhbSIsImNvbm5lY3Rpb25UaW1lcklkIiwiaWRsZVRpbWVySWQiLCJjb25uZWN0aW9uIiwiY3JlZGVudGlhbHNQcm92aWRlciIsInN0YXRlIiwiSW5pdGlhbCIsImNsb3NlQ291bnQiLCJpZGxlVGltZXIiLCJzdHJlYW0iLCJiYWNrb2ZmIiwiaXNTdGFydGVkIiwiU3RhcnRpbmciLCJPcGVuIiwiQmFja29mZiIsImlzT3BlbiIsImF1dGgiLCJwZXJmb3JtQmFja29mZiIsImluaGliaXRCYWNrb2ZmIiwibWFya0lkbGUiLCJoYW5kbGVJZGxlQ2xvc2VUaW1lciIsInNlbmRSZXF1ZXN0IiwiY2FuY2VsSWRsZUNoZWNrIiwic2VuZCIsImZpbmFsU3RhdGUiLCJpbnZhbGlkYXRlVG9rZW4iLCJ0ZWFyRG93biIsIm9uQ2xvc2UiLCJkaXNwYXRjaElmTm90Q2xvc2VkIiwiZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlciIsImdldFRva2VuIiwic3RhcnRTdHJlYW0iLCJycGNFcnJvciIsImhhbmRsZVN0cmVhbUNsb3NlIiwic3RhcnRScGMiLCJvbk9wZW4iLCJvbk1lc3NhZ2UiLCJzdGFydENsb3NlQ291bnQiLCJQZXJzaXN0ZW50TGlzdGVuU3RyZWFtIiwiY3JlZGVudGlhbHMiLCJMaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiIsIkxpc3RlblN0cmVhbUlkbGUiLCJvcGVuU3RyZWFtIiwid2F0Y2hDaGFuZ2VQcm90byIsIndhdGNoQ2hhbmdlIiwiZnJvbVdhdGNoQ2hhbmdlIiwic25hcHNob3QiLCJ2ZXJzaW9uRnJvbUxpc3RlblJlc3BvbnNlIiwib25XYXRjaENoYW5nZSIsIndhdGNoIiwiZW5jb2RlZERhdGFiYXNlSWQiLCJhZGRUYXJnZXQiLCJsYWJlbHMiLCJ0b0xpc3RlblJlcXVlc3RMYWJlbHMiLCJ1bndhdGNoIiwiUGVyc2lzdGVudFdyaXRlU3RyZWFtIiwiV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZiIsIldyaXRlU3RyZWFtSWRsZSIsImhhbmRzaGFrZUNvbXBsZXRlXyIsIndyaXRlTXV0YXRpb25zIiwicmVzcG9uc2VQcm90byIsImZyb21Xcml0ZVJlc3VsdHMiLCJ3cml0ZVJlc3VsdHMiLCJjb21taXRUaW1lIiwib25NdXRhdGlvblJlc3VsdCIsIm9uSGFuZHNoYWtlQ29tcGxldGUiLCJ3cml0ZUhhbmRzaGFrZSIsIndyaXRlcyIsIkRhdGFzdG9yZSIsIm5ld1BlcnNpc3RlbnRXcml0ZVN0cmVhbSIsIm5ld1BlcnNpc3RlbnRXYXRjaFN0cmVhbSIsImNvbW1pdCIsImludm9rZVJQQyIsInJlc3BvbnNlIiwibG9va3VwIiwidG9OYW1lIiwiaW52b2tlU3RyZWFtaW5nUlBDIiwiZnJvbU1heWJlRG9jdW1lbnQiLCJycGNOYW1lIiwiZGF0YXN0b3JlIiwicmVhZFZlcnNpb25zIiwiY29tbWl0dGVkIiwibGFzdFdyaXRlRXJyb3IiLCJ3cml0dGVuRG9jcyIsImVuc3VyZUNvbW1pdE5vdENhbGxlZCIsInJlY29yZFZlcnNpb24iLCJ3cml0ZSIsInRvTXV0YXRpb25zIiwicHJlY29uZGl0aW9uRm9yVXBkYXRlIiwidW53cml0dGVuIiwiZG9jVmVyc2lvbiIsImV4aXN0aW5nVmVyc2lvbiIsIlJwY0NvZGUiLCJPbmxpbmVTdGF0ZVRyYWNrZXIiLCJvbmxpbmVTdGF0ZUhhbmRsZXIiLCJVbmtub3duIiwid2F0Y2hTdHJlYW1GYWlsdXJlcyIsIm9ubGluZVN0YXRlVGltZXIiLCJzaG91bGRXYXJuQ2xpZW50SXNPZmZsaW5lIiwiaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCIsInNldEFuZEJyb2FkY2FzdCIsIk9ubGluZVN0YXRlVGltZW91dCIsImxvZ0NsaWVudE9mZmxpbmVXYXJuaW5nSWZOZWNlc3NhcnkiLCJPZmZsaW5lIiwiaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlIiwiT25saW5lIiwiY2xlYXJPbmxpbmVTdGF0ZVRpbWVyIiwibmV3U3RhdGUiLCJkZXRhaWxzIiwiaXNQZXJtYW5lbnRFcnJvciIsIm1hcENvZGVGcm9tUnBjQ29kZSIsIm1hcFJwY0NvZGVGcm9tQ29kZSIsIkNoYW5nZVR5cGUiLCJTeW5jU3RhdGUiLCJEb2N1bWVudFNldCIsImtleWVkTWFwIiwic29ydGVkU2V0IiwiZW1wdHlTZXQiLCJvbGRTZXQiLCJ0aGlzRG9jIiwib3RoZXJEb2MiLCJkb2NTdHJpbmdzIiwibmV3U2V0IiwiV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSIsIkRvY3VtZW50Q2hhbmdlU2V0IiwiY2hhbmdlTWFwIiwidHJhY2siLCJvbGRDaGFuZ2UiLCJBZGRlZCIsIk1ldGFkYXRhIiwiUmVtb3ZlZCIsIk1vZGlmaWVkIiwiZ2V0Q2hhbmdlcyIsIlZpZXdTbmFwc2hvdCIsIm9sZERvY3MiLCJkb2NDaGFuZ2VzIiwibXV0YXRlZEtleXMiLCJzeW5jU3RhdGVDaGFuZ2VkIiwiZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMiLCJmcm9tSW5pdGlhbERvY3VtZW50cyIsIm90aGVyQ2hhbmdlcyIsIlJlbW90ZUV2ZW50IiwidGFyZ2V0TWlzbWF0Y2hlcyIsImNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlIiwiVGFyZ2V0Q2hhbmdlIiwiY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlIiwiRG9jdW1lbnRXYXRjaENoYW5nZSIsInVwZGF0ZWRUYXJnZXRJZHMiLCJyZW1vdmVkVGFyZ2V0SWRzIiwibmV3RG9jIiwiRXhpc3RlbmNlRmlsdGVyQ2hhbmdlIiwiZXhpc3RlbmNlRmlsdGVyIiwiV2F0Y2hUYXJnZXRDaGFuZ2UiLCJ0YXJnZXRJZHMiLCJjYXVzZSIsIlRhcmdldFN0YXRlIiwicGVuZGluZ1Jlc3BvbnNlcyIsImRvY3VtZW50Q2hhbmdlcyIsInNuYXBzaG90Q2hhbmdlc01hcCIsIl9yZXN1bWVUb2tlbiIsIl9jdXJyZW50IiwiX2hhc1BlbmRpbmdDaGFuZ2VzIiwidXBkYXRlUmVzdW1lVG9rZW4iLCJ0b1RhcmdldENoYW5nZSIsImNoYW5nZVR5cGUiLCJjbGVhclBlbmRpbmdDaGFuZ2VzIiwiYWRkRG9jdW1lbnRDaGFuZ2UiLCJyZW1vdmVEb2N1bWVudENoYW5nZSIsInJlY29yZFBlbmRpbmdUYXJnZXRSZXF1ZXN0IiwicmVjb3JkVGFyZ2V0UmVzcG9uc2UiLCJtYXJrQ3VycmVudCIsIldhdGNoQ2hhbmdlQWdncmVnYXRvciIsIm1ldGFkYXRhUHJvdmlkZXIiLCJ0YXJnZXRTdGF0ZXMiLCJwZW5kaW5nRG9jdW1lbnRVcGRhdGVzIiwicGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZyIsImRvY3VtZW50VGFyZ2V0TWFwIiwicGVuZGluZ1RhcmdldFJlc2V0cyIsImhhbmRsZURvY3VtZW50Q2hhbmdlIiwiZG9jQ2hhbmdlIiwiYWRkRG9jdW1lbnRUb1RhcmdldCIsInJlbW92ZURvY3VtZW50RnJvbVRhcmdldCIsImhhbmRsZVRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZSIsInRhcmdldFN0YXRlIiwiZW5zdXJlVGFyZ2V0U3RhdGUiLCJOb0NoYW5nZSIsImlzQWN0aXZlVGFyZ2V0IiwiaXNQZW5kaW5nIiwiQ3VycmVudCIsIlJlc2V0IiwicmVzZXRUYXJnZXQiLCJoYW5kbGVFeGlzdGVuY2VGaWx0ZXIiLCJ0YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0IiwiZ2V0Q3VycmVudERvY3VtZW50Q291bnRGb3JUYXJnZXQiLCJjcmVhdGVSZW1vdGVFdmVudCIsInRhcmdldENvbnRhaW5zRG9jdW1lbnQiLCJoYXNQZW5kaW5nQ2hhbmdlcyIsImlzT25seUxpbWJvVGFyZ2V0IiwiTGltYm9SZXNvbHV0aW9uIiwiZW5zdXJlRG9jdW1lbnRUYXJnZXRNYXBwaW5nIiwidXBkYXRlZERvY3VtZW50IiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsInRhcmdldE1hcHBpbmciLCJ0YXJnZXRBY3RpdmUiLCJMT0dfVEFHJDgiLCJSZW1vdGVTdG9yZSIsImNvbm5lY3Rpdml0eU1vbml0b3IiLCJ3cml0ZVBpcGVsaW5lIiwibGlzdGVuVGFyZ2V0cyIsIndhdGNoQ2hhbmdlQWdncmVnYXRvciIsImFkZENhbGxiYWNrIiwic3RhdHVzIiwiY2FuVXNlTmV0d29yayIsInJlc3RhcnROZXR3b3JrIiwib25saW5lU3RhdGVUcmFja2VyIiwid2F0Y2hTdHJlYW0iLCJvbldhdGNoU3RyZWFtT3BlbiIsIm9uV2F0Y2hTdHJlYW1DbG9zZSIsIm9uV2F0Y2hTdHJlYW1DaGFuZ2UiLCJ3cml0ZVN0cmVhbSIsIm9uV3JpdGVTdHJlYW1PcGVuIiwib25Xcml0ZVN0cmVhbUNsb3NlIiwib25Xcml0ZUhhbmRzaGFrZUNvbXBsZXRlIiwiZW5hYmxlTmV0d29yayIsInNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0iLCJzdGFydFdhdGNoU3RyZWFtIiwiZmlsbFdyaXRlUGlwZWxpbmUiLCJkaXNhYmxlTmV0d29yayIsImRpc2FibGVOZXR3b3JrSW50ZXJuYWwiLCJjbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZSIsImxpc3RlbiIsInNlbmRXYXRjaFJlcXVlc3QiLCJ1bmxpc3RlbiIsInNlbmRVbndhdGNoUmVxdWVzdCIsInN5bmNFbmdpbmUiLCJoYW5kbGVUYXJnZXRFcnJvciIsInJhaXNlV2F0Y2hTbmFwc2hvdCIsInJlcXVlc3RUYXJnZXREYXRhIiwiRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2giLCJyZWplY3RMaXN0ZW4iLCJsYXN0QmF0Y2hJZFJldHJpZXZlZCIsImNhbkFkZFRvV3JpdGVQaXBlbGluZSIsImFkZFRvV3JpdGVQaXBlbGluZSIsInNob3VsZFN0YXJ0V3JpdGVTdHJlYW0iLCJzdGFydFdyaXRlU3RyZWFtIiwib3V0c3RhbmRpbmdXcml0ZXMiLCJoYW5kc2hha2VDb21wbGV0ZSIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiaGFuZGxlV3JpdGVFcnJvciIsImhhbmRsZUhhbmRzaGFrZUVycm9yIiwicmVqZWN0RmFpbGVkV3JpdGUiLCJjcmVhdGVUcmFuc2FjdGlvbiIsImhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJhcHBseVByaW1hcnlTdGF0ZSIsIkdlb1BvaW50IiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJfbGF0IiwiX2xvbmciLCJTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1SZXN1bHQiLCJBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIiwiZWxlbWVudHMiLCJjb2VyY2VkRmllbGRWYWx1ZXNBcnJheSIsInRvVW5pb24iLCJBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiIsIl9sb29wXzIiLCJ0b1JlbW92ZSIsIk51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24iLCJvcGVyYW5kIiwic3VtIiwiZGlycyIsIkV4aXN0ZW5jZUZpbHRlciIsIkRJUkVDVElPTlMiLCJPUEVSQVRPUlMiLCJJU09fUkVHX0VYUCIsIlJlZ0V4cCIsImFzc2VydFByZXNlbnQiLCJwYXJzZUludDY0IiwiSnNvblByb3RvU2VyaWFsaXplciIsInVzZVByb3RvM0pzb24iLCJ1bnNhZmVDYXN0UHJvdG9CeXRlU3RyaW5nIiwiYnl0ZVN0cmluZyIsImZyb21ScGNTdGF0dXMiLCJ0b0ludDMyVmFsdWUiLCJmcm9tSW50MzJWYWx1ZSIsIm5hbm9zIiwiZnJvbUlzbzg2MDFTdHJpbmciLCJ1dGMiLCJmcmFjdGlvbiIsIm5hbm9TdHIiLCJzdWJzdHIiLCJ0b0J5dGVzIiwiZnJvbUJsb2IiLCJibG9iIiwidG9SZXNvdXJjZU5hbWUiLCJmdWxseVF1YWxpZmllZFByZWZpeFBhdGgiLCJmcm9tUmVzb3VyY2VOYW1lIiwicmVzb3VyY2UiLCJpc1ZhbGlkUmVzb3VyY2VOYW1lIiwiZnJvbU5hbWUiLCJleHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZSIsInRvUXVlcnlQYXRoIiwiZnJvbVF1ZXJ5UGF0aCIsInJlc291cmNlTmFtZSIsInRvVmFsdWUiLCJudWxsVmFsdWUiLCJib29sZWFuVmFsdWUiLCJpbnRlZ2VyVmFsdWUiLCJkb3VibGVWYWx1ZSIsInN0cmluZ1ZhbHVlIiwidG9NYXBWYWx1ZSIsInRvQXJyYXlWYWx1ZSIsInRpbWVzdGFtcFZhbHVlIiwiZ2VvUG9pbnRWYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImZyb21WYWx1ZSIsImZyb21GaWVsZHMiLCJkYklkIiwidG9NdXRhdGlvbkRvY3VtZW50IiwidG9GaWVsZHMiLCJmcm9tRm91bmQiLCJmcm9tTWlzc2luZyIsIm1pc3NpbmciLCJ0b1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUiLCJ0b1Rlc3RXYXRjaENoYW5nZSIsImRvY3VtZW50Q2hhbmdlIiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsInRhcmdldENoYW5nZVR5cGUiLCJmcm9tV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSIsImNhdXNlUHJvdG8iLCJlbnRpdHlDaGFuZ2UiLCJkb2NEZWxldGUiLCJkb2NSZW1vdmUiLCJ1cGRhdGVNYXNrIiwidG9Eb2N1bWVudE1hc2siLCJ0b0ZpZWxkVHJhbnNmb3JtIiwiY3VycmVudERvY3VtZW50IiwidG9QcmVjb25kaXRpb24iLCJmcm9tUHJlY29uZGl0aW9uIiwiZnJvbURvY3VtZW50TWFzayIsImZyb21GaWVsZFRyYW5zZm9ybSIsImZyb21Xcml0ZVJlc3VsdCIsInByb3RvcyIsInNldFRvU2VydmVyVmFsdWUiLCJhcHBlbmRNaXNzaW5nRWxlbWVudHMiLCJyZW1vdmVBbGxGcm9tQXJyYXkiLCJpbmNyZW1lbnQiLCJkb2N1bWVudHNUYXJnZXQiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJhbGxEZXNjZW5kYW50cyIsIndoZXJlIiwidG9GaWx0ZXIiLCJ0b09yZGVyIiwidG9DdXJzb3IiLCJmcm9tQ291bnQiLCJmaWx0ZXJCeSIsImZyb21GaWx0ZXIiLCJmcm9tT3JkZXIiLCJmcm9tQ3Vyc29yIiwidG9MYWJlbCIsInRvVW5hcnlPckZpZWxkRmlsdGVyIiwiY29tcG9zaXRlRmlsdGVyIiwidW5hcnlGaWx0ZXIiLCJmcm9tVW5hcnlGaWx0ZXIiLCJmaWVsZEZpbHRlciIsImZyb21GaWVsZEZpbHRlciIsImFjY3VtIiwib3JkZXIiLCJ0b1Byb3BlcnR5T3JkZXIiLCJmcm9tUHJvcGVydHlPcmRlciIsInRvRGlyZWN0aW9uIiwiZnJvbURpcmVjdGlvbiIsInRvT3BlcmF0b3JOYW1lIiwiZnJvbU9wZXJhdG9yTmFtZSIsInRvRmllbGRQYXRoUmVmZXJlbmNlIiwiZnJvbUZpZWxkUGF0aFJlZmVyZW5jZSIsImZpZWxkUmVmZXJlbmNlIiwibmFuRmllbGQiLCJudWxsRmllbGQiLCJjYW5vbmljYWxGaWVsZHMiLCJmaWVsZFBhdGhzIiwiUXVlcnlMaXN0ZW5lcnNJbmZvIiwidmlld1NuYXAiLCJsaXN0ZW5lcnMiLCJFdmVudE1hbmFnZXIiLCJxdWVyaWVzIiwib25saW5lU3RhdGUiLCJzbmFwc2hvdHNJblN5bmNMaXN0ZW5lcnMiLCJmaXJzdExpc3RlbiIsInF1ZXJ5SW5mbyIsImFwcGx5T25saW5lU3RhdGVDaGFuZ2UiLCJvblZpZXdTbmFwc2hvdCIsInJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQiLCJsYXN0TGlzdGVuIiwidmlld1NuYXBzIiwicmFpc2VkRXZlbnQiLCJ2aWV3U25hcHNfMSIsIm9uV2F0Y2hFcnJvciIsIm9uT25saW5lU3RhdGVDaGFuZ2UiLCJhZGRTbmFwc2hvdHNJblN5bmNMaXN0ZW5lciIsInJlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyIiwiUXVlcnlMaXN0ZW5lciIsInF1ZXJ5T2JzZXJ2ZXIiLCJyYWlzZWRJbml0aWFsRXZlbnQiLCJzbmFwIiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsInNob3VsZFJhaXNlRXZlbnQiLCJzaG91bGRSYWlzZUluaXRpYWxFdmVudCIsInJhaXNlSW5pdGlhbEV2ZW50IiwibWF5YmVPbmxpbmUiLCJ3YWl0Rm9yU3luY1doZW5PbmxpbmUiLCJoYXNQZW5kaW5nV3JpdGVzQ2hhbmdlZCIsIkxvY2FsVmlld0NoYW5nZXMiLCJmcm9tU25hcHNob3QiLCJ2aWV3U25hcHNob3QiLCJBZGRlZExpbWJvRG9jdW1lbnQiLCJSZW1vdmVkTGltYm9Eb2N1bWVudCIsIlZpZXciLCJfc3luY2VkRG9jdW1lbnRzIiwic3luY1N0YXRlIiwibGltYm9Eb2N1bWVudHMiLCJkb2N1bWVudFNldCIsImNvbXB1dGVEb2NDaGFuZ2VzIiwicHJldmlvdXNDaGFuZ2VzIiwiY2hhbmdlU2V0Iiwib2xkRG9jdW1lbnRTZXQiLCJuZXdNdXRhdGVkS2V5cyIsIm5ld0RvY3VtZW50U2V0IiwibGFzdERvY0luTGltaXQiLCJmaXJzdERvY0luTGltaXQiLCJuZXdNYXliZURvYyIsIm9sZERvYyIsIm9sZERvY0hhZFBlbmRpbmdNdXRhdGlvbnMiLCJuZXdEb2NIYXNQZW5kaW5nTXV0YXRpb25zIiwiY2hhbmdlQXBwbGllZCIsInNob3VsZFdhaXRGb3JTeW5jZWREb2N1bWVudCIsInVwZGF0ZUxpbWJvRG9jdW1lbnRzIiwiY29tcGFyZUNoYW5nZVR5cGUiLCJhcHBseVRhcmdldENoYW5nZSIsImxpbWJvQ2hhbmdlcyIsIm5ld1N5bmNTdGF0ZSIsIlN5bmNlZCIsIkxvY2FsIiwic2hvdWxkQmVJbkxpbWJvIiwib2xkTGltYm9Eb2N1bWVudHMiLCJzeW5jaHJvbml6ZVdpdGhQZXJzaXN0ZWRTdGF0ZSIsInF1ZXJ5UmVzdWx0IiwiY29tcHV0ZUluaXRpYWxTbmFwc2hvdCIsIlJFVFJZX0NPVU5UIiwiVHJhbnNhY3Rpb25SdW5uZXIiLCJyZW1vdGVTdG9yZSIsInVwZGF0ZUZ1bmN0aW9uIiwicmV0cmllcyIsIlJldHJ5VHJhbnNhY3Rpb24iLCJydW4iLCJydW5XaXRoQmFja09mZiIsInRyeVJ1blVwZGF0ZUZ1bmN0aW9uIiwiY29tbWl0RXJyb3IiLCJoYW5kbGVUcmFuc2FjdGlvbkVycm9yIiwidXNlclByb21pc2VFcnJvciIsImlzUmV0cnlhYmxlVHJhbnNhY3Rpb25FcnJvciIsIlF1ZXJ5VmlldyIsInZpZXciLCJyZWNlaXZlZERvY3VtZW50Iiwic2hhcmVkQ2xpZW50U3RhdGUiLCJjdXJyZW50VXNlciIsInN5bmNFbmdpbmVMaXN0ZW5lciIsInF1ZXJ5Vmlld3NCeVF1ZXJ5IiwicXVlcmllc0J5VGFyZ2V0IiwibGltYm9UYXJnZXRzQnlLZXkiLCJsaW1ib1Jlc29sdXRpb25zQnlUYXJnZXQiLCJsaW1ib0RvY3VtZW50UmVmcyIsIm11dGF0aW9uVXNlckNhbGxiYWNrcyIsInBlbmRpbmdXcml0ZXNDYWxsYmFja3MiLCJsaW1ib1RhcmdldElkR2VuZXJhdG9yIiwicXVlcnlWaWV3Iiwic3RhdHVzXzEiLCJhc3NlcnRTdWJzY3JpYmVkIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsImluaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90Iiwidmlld0RvY0NoYW5nZXMiLCJzeW50aGVzaXplZFRhcmdldENoYW5nZSIsInN5bmNocm9uaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdCIsInVwZGF0ZVRyYWNrZWRMaW1ib3MiLCJyZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0IiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsInJlbW92ZUFuZENsZWFudXBUYXJnZXQiLCJ1c2VyQ2FsbGJhY2siLCJhZGRQZW5kaW5nTXV0YXRpb24iLCJhZGRNdXRhdGlvbkNhbGxiYWNrIiwiZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZSIsImxpbWJvUmVzb2x1dGlvbiIsIlNoYXJlZENsaWVudFN0YXRlIiwibmV3Vmlld1NuYXBzaG90c18xIiwic2V0T25saW5lU3RhdGUiLCJsaW1ib0tleSIsImV2ZW50XzEiLCJ1cGRhdGVRdWVyeVN0YXRlIiwiYXBwbHlCYXRjaFN0YXRlIiwiYmF0Y2hTdGF0ZSIsInByb2Nlc3NVc2VyQ2FsbGJhY2siLCJtdXRhdGlvbkJhdGNoUmVzdWx0IiwidHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MiLCJ1cGRhdGVNdXRhdGlvblN0YXRlIiwicmVnaXN0ZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2siLCJoaWdoZXN0QmF0Y2hJZCIsImNhbGxiYWNrcyIsInJlamVjdE91dHN0YW5kaW5nUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyIsImVycm9yTWVzc2FnZSIsImNsZWFyIiwibmV3Q2FsbGJhY2tzIiwibGltYm9LZXlzIiwicmVtb3ZlTGltYm9UYXJnZXQiLCJsaW1ib1RhcmdldElkIiwibGltYm9DaGFuZ2VzXzEiLCJsaW1ib0NoYW5nZSIsInRyYWNrTGltYm9DaGFuZ2UiLCJjdXJyZW50TGltYm9Eb2NzIiwibmV3U25hcHMiLCJkb2NDaGFuZ2VzSW5BbGxWaWV3cyIsInF1ZXJpZXNQcm9jZXNzZWQiLCJ1c2VyQ2hhbmdlZCIsImFjdGl2ZVRhcmdldHMiLCJhY3RpdmVRdWVyaWVzIiwiYWN0aXZlUXVlcmllc18xIiwiYWN0aXZlVGFyZ2V0c18xIiwicF8xIiwiZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzIiwic3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMiLCJpc0xvY2FsUXVlcnlUYXJnZXQiLCJyZXNldExpbWJvRG9jdW1lbnRzIiwibmV3Vmlld1NuYXBzaG90cyIsInRhcmdldHNfMSIsInF1ZXJpZXNfMSIsInN5bnRoZXNpemVUYXJnZXRUb1F1ZXJ5IiwiYXBwbHlUYXJnZXRTdGF0ZSIsInN5bnRoZXNpemVkUmVtb3RlRXZlbnQiLCJhcHBseUFjdGl2ZVRhcmdldHNDaGFuZ2UiLCJhZGRlZF8xIiwicmVtb3ZlZF8xIiwia2V5U2V0IiwicXVlcmllc18yIiwic3luY2VkRG9jdW1lbnRzIiwiVXNlciIsIm90aGVyVXNlciIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiQ0xJRU5UX1NUQVRFX0tFWV9QUkVGSVgiLCJjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkiLCJNVVRBVElPTl9CQVRDSF9LRVlfUFJFRklYIiwiY3JlYXRlV2ViU3RvcmFnZU11dGF0aW9uQmF0Y2hLZXkiLCJtdXRhdGlvbktleSIsIlFVRVJZX1RBUkdFVF9LRVlfUFJFRklYIiwiY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkiLCJPTkxJTkVfU1RBVEVfS0VZX1BSRUZJWCIsIlNFUVVFTkNFX05VTUJFUl9LRVlfUFJFRklYIiwiTE9HX1RBRyRhIiwiTXV0YXRpb25NZXRhZGF0YSIsImZyb21XZWJTdG9yYWdlRW50cnkiLCJ2YWxpZERhdGEiLCJmaXJlc3RvcmVFcnJvciIsInRvV2ViU3RvcmFnZUpTT04iLCJiYXRjaE1ldGFkYXRhIiwiUXVlcnlUYXJnZXRNZXRhZGF0YSIsIlJlbW90ZUNsaWVudFN0YXRlIiwiY2xpZW50U3RhdGUiLCJhY3RpdmVUYXJnZXRJZHNTZXQiLCJTaGFyZWRPbmxpbmVTdGF0ZSIsIkxvY2FsQ2xpZW50U3RhdGUiLCJhZGRRdWVyeVRhcmdldCIsInJlbW92ZVF1ZXJ5VGFyZ2V0IiwiV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlIiwibG9jYWxDbGllbnRJZCIsImFjdGl2ZUNsaWVudHMiLCJzdG9yYWdlTGlzdGVuZXIiLCJoYW5kbGVXZWJTdG9yYWdlRXZlbnQiLCJlYXJseUV2ZW50cyIsImVzY2FwZWRQZXJzaXN0ZW5jZUtleSIsInN0b3JhZ2UiLCJsb2NhbENsaWVudFN0b3JhZ2VLZXkiLCJzZXF1ZW5jZU51bWJlcktleSIsImNyZWF0ZVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcktleSIsImNsaWVudFN0YXRlS2V5UmUiLCJtdXRhdGlvbkJhdGNoS2V5UmUiLCJxdWVyeVRhcmdldEtleVJlIiwib25saW5lU3RhdGVLZXkiLCJjcmVhdGVXZWJTdG9yYWdlT25saW5lU3RhdGVLZXkiLCJleGlzdGluZ0NsaWVudHNfMSIsInN0b3JhZ2VJdGVtIiwib25saW5lU3RhdGVKU09OIiwicGVyc2lzdENsaWVudFN0YXRlIiwiZnJvbVdlYlN0b3JhZ2VPbmxpbmVTdGF0ZSIsImhhbmRsZU9ubGluZVN0YXRlRXZlbnQiLCJwZXJzaXN0TXV0YXRpb25TdGF0ZSIsInJlbW92ZU11dGF0aW9uU3RhdGUiLCJxdWVyeVN0YXRlIiwibG9jYWxDbGllbnRTdGF0ZSIsInBlcnNpc3RRdWVyeVRhcmdldFN0YXRlIiwicGVyc2lzdE9ubGluZVN0YXRlIiwic3RvcmFnZUFyZWEiLCJtdXRhdGlvbk1ldGFkYXRhIiwicXVlcnlUYXJnZXRNZXRhZGF0YSIsImZyb21XZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkiLCJoYW5kbGVDbGllbnRTdGF0ZUV2ZW50IiwiZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZSIsImZyb21XZWJTdG9yYWdlTXV0YXRpb25NZXRhZGF0YSIsImhhbmRsZU11dGF0aW9uQmF0Y2hFdmVudCIsImZyb21XZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YSIsImhhbmRsZVF1ZXJ5VGFyZ2V0RXZlbnQiLCJzZXFTdHJpbmciLCJwYXJzZWQiLCJmcm9tV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyIiwibXV0YXRpb25TdGF0ZSIsInRhcmdldEtleSIsInRhcmdldE1ldGFkYXRhIiwiZXhpc3RpbmdUYXJnZXRzIiwibmV3VGFyZ2V0cyIsImFkZGVkVGFyZ2V0cyIsInJlbW92ZWRUYXJnZXRzIiwiTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUiLCJsb2NhbFN0YXRlIiwiSW5kZXhlZERiUGVyc2lzdGVuY2VTZXR0aW5ncyIsImNhY2hlU2l6ZUJ5dGVzIiwic3luY2hyb25pemVUYWJzIiwiTWVtb3J5UGVyc2lzdGVuY2VTZXR0aW5ncyIsIkZpcmVzdG9yZUNsaWVudCIsInBlcnNpc3RlbmNlU2V0dGluZ3MiLCJ2ZXJpZnlOb3RUZXJtaW5hdGVkIiwiaW5pdGlhbGl6YXRpb25Eb25lIiwicGVyc2lzdGVuY2VSZXN1bHQiLCJpbml0aWFsaXplZCIsInNldENoYW5nZUxpc3RlbmVyIiwiaW5pdGlhbGl6ZVBlcnNpc3RlbmNlIiwibWF5YmVMcnVHYyIsImluaXRpYWxpemVSZXN0Iiwic3RhcnRJbmRleGVkRGJQZXJzaXN0ZW5jZSIsImNhbkZhbGxiYWNrIiwic3RhcnRNZW1vcnlQZXJzaXN0ZW5jZSIsIkRPTUV4Y2VwdGlvbiIsImlzU2h1dHRpbmdEb3duIiwic2V0dGluZ3MiLCJsb2FkQ29ubmVjdGlvbiIsInJlbW90ZVN0b3JlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciIsInNoYXJlZENsaWVudFN0YXRlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciIsImxydVNjaGVkdWxlciIsIm5ld0Nvbm5lY3Rpdml0eU1vbml0b3IiLCJuZXdTZXJpYWxpemVyIiwiZXZlbnRNZ3IiLCJ0ZXJtaW5hdGUiLCJyZW1vdmVDaGFuZ2VMaXN0ZW5lciIsIndhaXRGb3JQZW5kaW5nV3JpdGVzIiwiY2xpZW50VGVybWluYXRlZCIsImdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUiLCJnZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZSIsIkFzeW5jT2JzZXJ2ZXIiLCJtdXRlZCIsInNjaGVkdWxlRXZlbnQiLCJtdXRlIiwiZXZlbnRIYW5kbGVyIiwiRmllbGRQYXRoJDEiLCJmaWVsZE5hbWVzIiwibWluTnVtYmVyT2ZFbGVtZW50cyIsInZhbGlkYXRlTmFtZWRBcnJheUF0TGVhc3ROdW1iZXJPZkVsZW1lbnRzIiwiX2ludGVybmFsUGF0aCIsImRvY3VtZW50SWQiLCJfRE9DVU1FTlRfSUQiLCJSRVNFUlZFRCIsIk9BdXRoVG9rZW4iLCJhdXRoSGVhZGVycyIsIkVtcHR5Q3JlZGVudGlhbHNQcm92aWRlciIsImNoYW5nZUxpc3RlbmVyIiwiRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXV0aFByb3ZpZGVyIiwidG9rZW5MaXN0ZW5lciIsInJlY2VpdmVkSW5pdGlhbFVzZXIiLCJ0b2tlbkNvdW50ZXIiLCJmb3JjZVJlZnJlc2giLCJnZXRVc2VyIiwiYWRkQXV0aFRva2VuTGlzdGVuZXIiLCJpbml0aWFsVG9rZW5Db3VudGVyIiwidG9rZW5EYXRhIiwiYWNjZXNzVG9rZW4iLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImN1cnJlbnRVaWQiLCJnZXRVaWQiLCJGaXJzdFBhcnR5VG9rZW4iLCJnYXBpIiwic2Vzc2lvbkluZGV4IiwiaGVhZGVycyIsImF1dGhIZWFkZXIiLCJnZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5IiwiRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIiLCJtYWtlQ3JlZGVudGlhbHNQcm92aWRlciIsImlzUGFydGlhbE9ic2VydmVyIiwiVXNlckRhdGFTb3VyY2UiLCJGaWVsZFZhbHVlSW1wbCIsIl9tZXRob2ROYW1lIiwiRGVsZXRlRmllbGRWYWx1ZUltcGwiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCIsImFycmF5VW5pb24iLCJBcnJheVVuaW9uRmllbGRWYWx1ZUltcGwiLCJhcnJheVJlbW92ZSIsIkFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwiLCJOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwiLCJfZWxlbWVudHMiLCJfb3BlcmFuZCIsIlB1YmxpY0ZpZWxkVmFsdWUiLCJSRVNFUlZFRF9GSUVMRF9SRUdFWCIsIlBhcnNlZFNldERhdGEiLCJQYXJzZWRVcGRhdGVEYXRhIiwiaXNXcml0ZSIsImRhdGFTb3VyY2UiLCJNZXJnZVNldCIsIlVwZGF0ZSIsIkFyZ3VtZW50IiwiQXJyYXlBcmd1bWVudCIsIlBhcnNlQ29udGV4dCIsImFycmF5RWxlbWVudCIsInZhbGlkYXRlUGF0aCIsImNoaWxkQ29udGV4dEZvckZpZWxkIiwiY2hpbGRQYXRoIiwidmFsaWRhdGVQYXRoU2VnbWVudCIsImNoaWxkQ29udGV4dEZvckZpZWxkUGF0aCIsImNoaWxkQ29udGV4dEZvckFycmF5IiwiY3JlYXRlRXJyb3IiLCJmaWVsZERlc2NyaXB0aW9uIiwiRG9jdW1lbnRLZXlSZWZlcmVuY2UiLCJVc2VyRGF0YUNvbnZlcnRlciIsInByZUNvbnZlcnRlciIsInBhcnNlU2V0RGF0YSIsInZhbGlkYXRlUGxhaW5PYmplY3QiLCJ1cGRhdGVEYXRhIiwicGFyc2VEYXRhIiwicGFyc2VNZXJnZURhdGEiLCJ2YWxpZGF0ZWRGaWVsZFBhdGhzIiwiZmllbGRQYXRoc18xIiwic3RyaW5nT3JGaWVsZFBhdGgiLCJmaWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nIiwicGFyc2VVcGRhdGVEYXRhIiwiZmllbGRNYXNrUGF0aHMiLCJjaGlsZENvbnRleHQiLCJydW5QcmVDb252ZXJ0ZXIiLCJwYXJzZWRWYWx1ZSIsIm1hc2siLCJwYXJzZVVwZGF0ZVZhcmFyZ3MiLCJtb3JlRmllbGRzQW5kVmFsdWVzIiwiZmllbGRQYXRoRnJvbUFyZ3VtZW50IiwidmFsdWVfMSIsInBhcnNlUXVlcnlWYWx1ZSIsImFsbG93QXJyYXlzIiwibG9va3NMaWtlSnNvbk9iamVjdCIsInBhcnNlT2JqZWN0IiwicGFyc2VTZW50aW5lbEZpZWxkVmFsdWUiLCJwYXJzZUFycmF5IiwicGFyc2VTY2FsYXJWYWx1ZSIsImVudHJ5SW5kZXgiLCJhcnJheV8xIiwicGFyc2VkRW50cnkiLCJwYXJzZWRFbGVtZW50cyIsInBhcnNlQXJyYXlUcmFuc2Zvcm1FbGVtZW50cyIsIm51bWVyaWNJbmNyZW1lbnQiLCJzZWFyY2giLCJmcm9tRG90U2VwYXJhdGVkU3RyaW5nIiwiREVGQVVMVF9IT1NUIiwiREVGQVVMVF9TU0wiLCJERUZBVUxUX1RJTUVTVEFNUFNfSU5fU05BUFNIT1RTIiwiREVGQVVMVF9GT1JDRV9MT05HX1BPTExJTkciLCJDQUNIRV9TSVpFX1VOTElNSVRFRCIsIkZpcmVzdG9yZVNldHRpbmdzIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsIkZpcmVzdG9yZSIsImRhdGFiYXNlSWRPckFwcCIsIl9maXJlYmFzZUFwcCIsIl9xdWV1ZSIsImVuc3VyZUNsaWVudENvbmZpZ3VyZWQiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX2RhdGFiYXNlSWQiLCJkYXRhYmFzZUlkRnJvbUFwcCIsIl9wZXJzaXN0ZW5jZUtleSIsIl9jcmVkZW50aWFscyIsImV4dGVybmFsXzEiLCJfc2V0dGluZ3MiLCJfZGF0YUNvbnZlcnRlciIsImNyZWF0ZURhdGFDb252ZXJ0ZXIiLCJzZXR0aW5nc0xpdGVyYWwiLCJuZXdTZXR0aW5ncyIsImVuYWJsZVBlcnNpc3RlbmNlIiwiZXhwZXJpbWVudGFsVGFiU3luY2hyb25pemF0aW9uIiwiY29uZmlndXJlQ2xpZW50IiwibWFrZURhdGFiYXNlSW5mbyIsIm9uU25hcHNob3RzSW5TeW5jIiwiYXJnIiwib25TbmFwc2hvdHNJblN5bmNJbnRlcm5hbCIsImFzeW5jT2JzZXJ2ZXIiLCJEb2N1bWVudFJlZmVyZW5jZSIsInRoaXNEYiIsIm90aGVyRGIiLCJmaXJlc3RvcmUiLCJfa2V5IiwicGF0aFN0cmluZyIsIkNvbGxlY3Rpb25SZWZlcmVuY2UiLCJmb3JQYXRoIiwiUXVlcnkkMSIsIlRyYW5zYWN0aW9uJDEiLCJXcml0ZUJhdGNoIiwiX2FyZVRpbWVzdGFtcHNJblNuYXBzaG90c0VuYWJsZWQiLCJfZmlyZXN0b3JlIiwiX3RyYW5zYWN0aW9uIiwiZG9jdW1lbnRSZWYiLCJ2YWxpZGF0ZVJlZmVyZW5jZSIsIkRvY3VtZW50U25hcHNob3QiLCJfY29udmVydGVyIiwidmFsaWRhdGVTZXRPcHRpb25zIiwiYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyIiwiY29udmVydGVkVmFsdWUiLCJtZXJnZSIsIm1lcmdlRmllbGRzIiwiZmllbGRPclVwZGF0ZURhdGEiLCJfbXV0YXRpb25zIiwiX2NvbW1pdHRlZCIsInZlcmlmeU5vdENvbW1pdHRlZCIsIm9uU25hcHNob3QiLCJjdXJyQXJnIiwiaW50ZXJuYWxPcHRpb25zIiwib25TbmFwc2hvdEludGVybmFsIiwiZXJySGFuZGxlciIsImludGVybmFsTGlzdGVuZXIiLCJ2YWxpZGF0ZUdldE9wdGlvbnMiLCJnZXRWaWFTbmFwc2hvdExpc3RlbmVyIiwid2l0aENvbnZlcnRlciIsIlNuYXBzaG90TWV0YWRhdGEiLCJfZG9jdW1lbnQiLCJfZnJvbUNhY2hlIiwiX2hhc1BlbmRpbmdXcml0ZXMiLCJ2YWxpZGF0ZVNuYXBzaG90T3B0aW9ucyIsIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCIsImZyb21GaXJlc3RvcmUiLCJ0b0pTT2JqZWN0IiwidG9KU1ZhbHVlIiwidG9KU0FycmF5IiwiX3F1ZXJ5Iiwib3BTdHIiLCJ3aGVyZUZpbHRlck9wRW51bXMiLCJvcGVyYXRvciIsInZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyIsInJlZmVyZW5jZUxpc3QiLCJwYXJzZURvY3VtZW50SWRWYWx1ZSIsInZhbGlkYXRlTmV3RmlsdGVyIiwiZGlyZWN0aW9uU3RyIiwidmFsaWRhdGVOZXdPcmRlckJ5IiwibGltaXRUb0xhc3QiLCJkb2NPckZpZWxkIiwiYm91bmRGcm9tRG9jT3JGaWVsZHMiLCJzdGFydEFmdGVyIiwiZW5kQmVmb3JlIiwiYm91bmRGcm9tRG9jdW1lbnQiLCJhbGxGaWVsZHMiLCJib3VuZEZyb21GaWVsZHMiLCJyYXdWYWx1ZSIsIndyYXBwZWQiLCJ2YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0IiwiUXVlcnlTbmFwc2hvdCIsImZpcmVzdG9yZUNsaWVudCIsImRvY3VtZW50SWRWYWx1ZSIsImFycmF5T3BzIiwiZGlzanVuY3RpdmVPcHMiLCJpc0FycmF5T3AiLCJpc0Rpc2p1bmN0aXZlT3AiLCJleGlzdGluZ0ZpZWxkIiwidmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoIiwiY29uZmxpY3RpbmdPcCIsImluZXF1YWxpdHkiLCJfb3JpZ2luYWxRdWVyeSIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiY29udmVydFRvRG9jdW1lbnRJbXBsIiwibGFzdERvY18xIiwiaW5kZXhfMSIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJpbmRleFRyYWNrZXJfMSIsInJlc3VsdENoYW5nZVR5cGUiLCJjaGFuZ2VzRnJvbVNuYXBzaG90IiwidGhyb3dEb2NDaGFuZ2VzTWV0aG9kRXJyb3IiLCJfcGF0aCIsImRvY1JlZiIsInRvRmlyZXN0b3JlIiwiUHVibGljRmlyZXN0b3JlIiwiUHVibGljVHJhbnNhY3Rpb24iLCJQdWJsaWNXcml0ZUJhdGNoIiwiUHVibGljRG9jdW1lbnRSZWZlcmVuY2UiLCJQdWJsaWNEb2N1bWVudFNuYXBzaG90IiwiUHVibGljUXVlcnlEb2N1bWVudFNuYXBzaG90IiwiUHVibGljUXVlcnkiLCJQdWJsaWNRdWVyeVNuYXBzaG90IiwiUHVibGljQ29sbGVjdGlvblJlZmVyZW5jZSIsImZpcmVzdG9yZU5hbWVzcGFjZSIsImNvbmZpZ3VyZUZvckZpcmViYXNlIiwic2hhbGxvd0NvcHkiLCJOb29wQ29ubmVjdGl2aXR5TW9uaXRvciIsIkJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yIiwibmV0d29ya0F2YWlsYWJsZUxpc3RlbmVyIiwib25OZXR3b3JrQXZhaWxhYmxlIiwibmV0d29ya1VuYXZhaWxhYmxlTGlzdGVuZXIiLCJvbk5ldHdvcmtVbmF2YWlsYWJsZSIsImNvbmZpZ3VyZU5ldHdvcmtNb25pdG9yaW5nIiwiU3RyZWFtQnJpZGdlIiwic2VuZEZuIiwiY2xvc2VGbiIsIndyYXBwZWRPbk9wZW4iLCJ3cmFwcGVkT25DbG9zZSIsIndyYXBwZWRPbk1lc3NhZ2UiLCJjYWxsT25PcGVuIiwiY2FsbE9uQ2xvc2UiLCJjYWxsT25NZXNzYWdlIiwiTE9HX1RBRyRkIiwiUlBDX05BTUVfUkVTVF9NQVBQSU5HIiwiWF9HT09HX0FQSV9DTElFTlRfVkFMVUUiLCJXZWJDaGFubmVsQ29ubmVjdGlvbiIsImJhc2VVcmwiLCJtb2RpZnlIZWFkZXJzRm9yUmVxdWVzdCIsIm1ha2VVcmwiLCJ4aHIiLCJYaHJJbyIsImxpc3Rlbk9uY2UiLCJFdmVudFR5cGUiLCJDT01QTEVURSIsImdldExhc3RFcnJvckNvZGUiLCJFcnJvckNvZGUiLCJOT19FUlJPUiIsImpzb24iLCJnZXRSZXNwb25zZUpzb24iLCJUSU1FT1VUIiwiSFRUUF9FUlJPUiIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlVGV4dCIsInJlc3BvbnNlRXJyb3IiLCJmaXJlc3RvcmVFcnJvckNvZGUiLCJzZXJ2ZXJFcnJvciIsInRvTG93ZXJDYXNlIiwiZ2V0TGFzdEVycm9yIiwianNvbk9iaiIsInJlcXVlc3RTdHJpbmciLCJ1cmxQYXJ0cyIsIndlYmNoYW5uZWxUcmFuc3BvcnQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiYmFja2dyb3VuZENoYW5uZWxUZXN0IiwiaHR0cFNlc3Npb25JZFBhcmFtIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZVVybFBhcmFtcyIsInNlbmRSYXdKc29uIiwic3VwcG9ydHNDcm9zc0RvbWFpblhociIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNcyIsImh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0iLCJjaGFubmVsIiwiY3JlYXRlV2ViQ2hhbm5lbCIsIm9wZW5lZCIsImNsb3NlZCIsInN0cmVhbUJyaWRnZSIsInVuZ3VhcmRlZEV2ZW50TGlzdGVuIiwicGFyYW0iLCJXZWJDaGFubmVsIiwiT1BFTiIsIkNMT1NFIiwiTUVTU0FHRSIsIm1zZ0RhdGEiLCJtc2dEYXRhT3JFcnJvciIsInN0YXR1c18yIiwibWFwQ29kZUZyb21ScGNTdGF0dXMiLCJ1cmxScGNOYW1lIiwiQnJvd3NlclBsYXRmb3JtIiwiZW5jb2RlZCIsInJlZ2lzdGVyRmlyZXN0b3JlIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImN1cnJlbnRRdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsIm5leHRUaWNrIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwidW1hc2siLCJjb21tb25qc0dsb2JhbCIsImdsb2JhbFRoaXMiLCJnb29nIiwiYWEiLCJiYSIsImNhIiwiZGEiLCJlYSIsImZhIiwidW5zaGlmdCIsInciLCJ4IiwiTiIsInhiIiwiaCIsImxhIiwiRyIsImphIiwib2EiLCJwYSIsInFhIiwiQSIsInJhIiwidHJpbSIsInoiLCJzYSIsInRhIiwidXNlckFnZW50IiwidmEiLCJ3YSIsInhhIiwieWEiLCJ6YSIsIklhIiwiQ2EiLCJCIiwiRGEiLCJFYSIsIkZhIiwiR2EiLCJIYSIsImRvY3VtZW50TW9kZSIsIkphIiwiS2EiLCJMYSIsInBhcnNlRmxvYXQiLCJOYSIsIkJhIiwiTWEiLCJBYSIsInBhcnNlSW50IiwiT2EiLCJjb21wYXRNb2RlIiwiUGEiLCJRYSIsIlJhIiwiQyIsIkQiLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9uIiwic2NyZWVuWSIsInNjcmVlblgiLCJjbGllbnRZIiwiY2xpZW50WCIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsImN0cmxLZXkiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiU2EiLCJkZWZhdWx0UHJldmVudGVkIiwiMiIsIjMiLCI0IiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsImtleUNvZGUiLCJGIiwiVGEiLCJVYSIsInNyYyIsImNhcHR1cmUiLCJYIiwiWiIsIlZhIiwiV2EiLCJZYSIsIlhhIiwiWmEiLCIkYSIsImJiIiwiZWIiLCJmYiIsImliIiwiZ2IiLCJhdHRhY2hFdmVudCIsImhiIiwia2IiLCJkZXRhY2hFdmVudCIsImxiIiwibWIiLCJoYW5kbGVFdmVudCIsIkoiLCJuYiIsIkUiLCJqYiIsImRpc3BhdGNoRXZlbnQiLCJvYiIsInBiIiwicWIiLCJzYiIsInJiIiwidGIiLCJ1YiIsInZiIiwid2IiLCJBYiIsInliIiwiemIiLCJDYiIsIkRiIiwiTCIsIkViIiwiRmIiLCJHYiIsIlUiLCJIIiwiSGIiLCJJYiIsIkpiIiwiS2IiLCJJIiwiTGIiLCJNYiIsIksiLCJOYiIsIk9iIiwiUGIiLCJRYiIsIlJiIiwiU2IiLCJUYiIsIldiIiwiVWIiLCJWYiIsIlhiIiwiTSIsIlYiLCJPIiwiWWIiLCJSIiwiUyIsIlpiIiwiJGIiLCJhYyIsImJjIiwiY2MiLCJkYyIsImVjIiwiZmMiLCIkIiwiWSIsImtjIiwibGMiLCJpYyIsImpjIiwibWMiLCJhYiIsImdjIiwibmEiLCJvYyIsIm5jIiwiUSIsInJjIiwicGMiLCJUIiwiaGMiLCJzYyIsInVjIiwidmMiLCJ3YyIsInhjIiwieWMiLCJ6YyIsIkFjIiwiTWMiLCJJYyIsIkdjIiwiQmMiLCJIYyIsImFicyIsImRlY29kZVVSSSIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSSIsIkxjIiwiQ2MiLCJEYyIsIkVjIiwiRmMiLCJsYXN0SW5kZXhPZiIsInRjIiwiTmMiLCJTYyIsIlVjIiwiVmMiLCJXYyIsIlhjIiwiWWMiLCJaYyIsIiRjIiwiYWQiLCJiZCIsIlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllc0J5VHlwZSIsIm5leHRIb3BQcm90b2NvbCIsImthIiwibWEiLCJjZCIsImRkIiwiZWQiLCJmZCIsImdkIiwiaGQiLCJqZCIsImtkIiwibGQiLCJuZCIsIm9ubG9hZCIsIm9udGltZW91dCIsInFjIiwib2QiLCJwZCIsInFkIiwicmQiLCJzZCIsInZkIiwid2QiLCJ4ZCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJzdGF0dXNUZXh0IiwidGQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJ6ZCIsInlkIiwiQWQiLCJnYSIsImhhIiwiaWEiLCJjb25jdXJyZW50UmVxdWVzdExpbWl0IiwiZmFzdEhhbmRzaGFrZSIsIkJkIiwiQ2QiLCJEZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkVkIiwiRmQiLCJHZCIsIkhkIiwiTGQiLCJLZCIsInJvdW5kIiwiQmIiLCJUYyIsIlVkIiwiTWQiLCJOZCIsIkpkIiwibWQiLCJKYyIsImhvc3RuYW1lIiwiS2MiLCJwb3J0IiwiT2QiLCJRZCIsInRlc3RVcmwiLCJQZCIsIm1lc3NhZ2VIZWFkZXJzIiwiY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCIsIm1lc3NhZ2VDb250ZW50VHlwZSIsIlJkIiwiX19zbV9fIiwiU2QiLCJ0b1VwcGVyQ2FzZSIsIlhNTEh0dHBSZXF1ZXN0IiwiRm9ybURhdGEiLCJzZXRSZXF1ZXN0SGVhZGVyIiwicmVzcG9uc2VUeXBlIiwid2l0aENyZWRlbnRpYWxzIiwidWQiLCJyZXNwb25zZVRleHQiLCJfX2RhdGFfXyIsIklkIiwiVGQiLCJ0bXAiLCJ0bXBfMSIsInRtcF8yIiwidG1wXzMiLCJ0bXBfNCIsInRtcF81IiwiT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUiLCJSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUiLCJvcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZSIsImludGVyc2VjdGlvbiIsIm92ZXJsYXAiLCJwdHNEaXN0YW5jZSIsInB0MSIsInB0MiIsInNxcnQiLCJsaW5lTWlkZGxlUHQiLCJsaW5lIiwiYXJlTGluZXNFcXVhbCIsImxpbmUxIiwibGluZTIiLCJhcmVQb2ludHNFcXVhbCIsInBvaW50MSIsInBvaW50MiIsInJlYWRJbnB1dEZpbGUiLCJmaWxlIiwicmVqIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc1RleHQiLCJnZXRVcmxQYXJhbXMiLCJwYXJzZXIiLCJocmVmIiwidmFycyIsInBhaXIiLCJlbXB0eU5vZGUiLCJjcmVhdGVCQm94IiwiZmlsbGV0IiwicmVjdCIsImNyZWF0ZUVsZW1lbnROUyIsImdldEJCb3giLCJ3aWR0aCIsImhlaWdodCIsImNyZWF0ZUJCb3gyIiwiZ2V0UmVsYXRpdmVDb29yZHMiLCJzdmdEb2MiLCJvcmlnaW5QdCIsImNyZWF0ZVNWR1BvaW50IiwibWF0cml4VHJhbnNmb3JtIiwiZ2V0U2NyZWVuQ1RNIiwiaW52ZXJzZSIsInV1aWR2NCIsImNyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsImdldFJlY3RTZWdtZW50cyIsImNvcm5lckEiLCJjb3JuZXJCIiwiY29ybmVyQyIsImNvcm5lckQiLCJpc1B0SW5SZWN0IiwicHQiLCJpbmNsdXNpdmUiLCJpc0xpbmVJblJlY3QiLCJpc051bUJldHdlZW4iLCJsaW1pdDEiLCJsaW1pdDIiLCJpc0xpbmVIb3Jpem9udGFsIiwiaXNMaW5lVmVydGljYWwiLCJzb3J0UHRzQnlEaXN0YW5jZSIsInB0cyIsInJlZlB0IiwiaW5jbHVkZVJlZlB0IiwicmVmZXJlbmNlUHQiLCJzb3J0ZWRQdHMiLCJHZW9tZXRyeUNhbGMiLCJsaW5lc0JldHdlZW5QdHMiLCJyZWN0UmVjdFJlbGF0aW9uc2hpcCIsInJlY3QxIiwicmVjdDIiLCJNYXRjaCIsIkFJbnNpZGVCIiwiQkluc2lkZUEiLCJJbnRlcnNlY3QiLCJUYW5nZW50IiwiRGlzam9pbnQiLCJnZXRPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwIiwiT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcCIsIk5vdGhpbmciLCJzdGFydFBvaW50WCIsImVuZFBvaW50WCIsIk92ZXJsYXAiLCJzdGFydFBvaW50WSIsImVuZFBvaW50WSIsInJlY3RhbmdsZXNTaWxob3VldHRlIiwicmVjdHMiLCJyZWN0c1NlZ21lbnRzIiwiZmluYWxTZWdtZW50cyIsIm92ZXJsYXBwZWRTZWdtZW50cyIsImN1cnJlbnRSZWN0U2VnbWVudHMiLCJuZXdDdXJyZW50UmVjdFNlZ21lbnRzIiwicmVjdHNSZWxhdGlvbiIsInNlZ21lbnRJbnRlcnNlY3Rpb25zIiwibGluZXNSZWxhdGlvbnNoaXAiLCJzb3J0ZWRJbnRlcnNlY3Rpb25zIiwic3BsaXRlZFNlZ21lbnRzIiwic3ZnUGF0aEZyb21MaW5lcyIsInBhdGhDb250ZW50IiwidG9GaXhlZCIsIlNWR1dJRFRIIiwiWk9PTVNQRUVEIiwiYWxsb3dQYW5uaW5nIiwiem9vbSIsInNldENvbnRlbnQiLCJkb21wYXJzZXIiLCJET01QYXJzZXIiLCJzdmdDYW52YXMiLCJwYXJzZUZyb21TdHJpbmciLCJkb2N1bWVudEVsZW1lbnQiLCJidXR0b25zIiwic3ZnSW5pdGlhbENsaWNrIiwicHJldlZpZXdCb3giLCJ2aWV3Qm94IiwiYmFzZVZhbCIsIm1vdXNlUG9zaXRpb24iLCJjcmVhdGVDb21tZW50c0dyb3VwIiwiY29tbWVudHNHcm91cCIsInpvb21GYWN0b3IiLCJkZWx0YVkiLCJ4UHJvcCIsInhJbmMiLCJ5UHJvcCIsInlJbmMiLCJtZXRhZGF0YUZpZWxkcyIsInF1ZXJ5SXRlbXMiLCJwYXJlbnRJZCIsInRyYXNoZWQiLCJleGNsdWRlTmFtZSIsIm9ubHlGb2xkZXIiLCJkcml2ZSIsImZpbGVzIiwiZmlsZUlkIiwiYWx0IiwiZmlsZUNvbnRlbnQiLCJmaWxlTWltZVR5cGUiLCJmaWxlTmFtZSIsImZvbGRlcklkIiwiYWNjZXNzX3Rva2VuIiwiZm9ybSIsImFwcGVuZCIsImZldGNoIiwiSGVhZGVycyIsIm9rIiwibmV3VGl0bGUiLCJleGVjdXRlIiwicmVzcCIsImVtYWlsQWRkcmVzcyIsInBlcm1pc3Npb25JZCIsImFib3V0Iiwic2hhcmVyIiwicmVjaXBpZW50cyIsInByb2plY3ROYW1lIiwiZW1haWxzIiwiYXV0aG9yIiwicGhvdG9MaW5rIiwidGV4dCIsIkFwcERhdGEiLCJsYXN0VXBsb2FkZWRQcm9qZWN0IiwiZXJyb3JNc2ciLCJmaWxlQ29udGVudFJhdyIsInByb2plY3RJbmZvIiwiYXBwTWFpbkZvbGRlcklkIiwiYXBwTWFpbkZvbGRlckRhdGEiLCJsaXN0RmlsZXMiLCJhcHBNYWluRm9sZGVyUmVzIiwiY3JlYXRlRm9sZGVyIiwicHJvamVjdEZvbGRlcklkIiwicHJvamVjdHNEYXRhIiwicHJvaiIsImZvbGRlckNyZWF0aW9uUHJvbWlzZSIsInByb2plY3RGb2xkZXJEYXRhIiwiZHJhd2luZ3MiLCJkcmF3aW5nc0ZvbGRlclByb21pc2UiLCJkcmF3aW5nc0ZvbGRlcklkIiwiZHJhd2luZ3NQcm9taXNlcyIsImRyYXdpbmciLCJkcmF3aW5nUHJvbWlzZSIsInVwbG9hZEZpbGUiLCJkcmF3aW5nT2JqIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwicmVzcG9uc2VzIiwiZ2V0UmVhZGVyIiwicmVhZCIsImVsZW1lbnRzRGF0YSIsImVsZW1lbnRzRGF0YUZvbGRlclByb21pc2UiLCJlbGVtZW50c0RhdGFGb2xkZXJJZCIsImVsZW1lbnRzRGF0YVByb21pc2VzIiwiZWxlbWVudERhdGEiLCJlbGVtZW50RGF0YVByb21pc2UiLCJwcm9qZWN0c0ZvbGRlcnNSZXMiLCJuZXdQcm9qZWN0cyIsInByb2plY3RzRm9sZGVyc0RhdGEiLCJuZXdQcm9qIiwiYXBwU2V0dEZvbGRlckRhdGEiLCJhcHBTZXR0aW5nc0ZvbGRlcklkIiwidGh1bWJzRm9sZGVyRGF0YSIsInRodW1ic0ZvbGRlcklkIiwiaW1nRGF0YSIsInByb2plY3RUaHVtYkRhdGEiLCJpbWciLCJ0aHVtYklkIiwicHJvamVjdEluZGV4IiwicHJvamVjdE5hbWVSZXMiLCJnZXRGaWxlRGF0YSIsImZpbmRJbmRleCIsInBlcm1pc3Npb25zIiwicHJvalBlcm1pc3Npb25zRGF0YSIsImdldFByb2plY3RUZWFtRGF0YSIsInByb2pTZXR0aW5ncyIsInByb2pTZXR0aW5nc0RhdGEiLCJwcm9qU2V0dGluZ3NDb250ZW50UmVzIiwiZ2V0RmlsZUNvbnRlbnQiLCJkcmF3aW5nc0ZvbGRlckRhdGEiLCJkcmF3aW5nc1JlcyIsImRyYXdpbmdzU3R5bGVzSWQiLCJlbGVtZW50c0RhdGFGb2xkZXJEYXRhIiwiZWxlbWVudHNEYXRhUmVzIiwiY29tbWVudHMiLCJjb21tZW50c0RhdGEiLCJjb21tZW50c0ZpbGVJZCIsImNvbW1lbnRzQ29udGVudFJlcyIsImltYWdlcyIsImltYWdlc0ZvbGRlckRhdGEiLCJpbWFnZXNSZXMiLCJlbGVtZW50c0lkcyIsIm1lbnRpb25zIiwicmVwcmVzZW50YXRpb25zIiwiY3JlYXRlUmVwcmVzZW50YXRpb24iLCJyZWN0YW5nbGVzIiwicmVwcmVzZW50YXRpb24iLCJkYXRhc2V0IiwiTWFpblBhbmVsIiwicGFuZWxzU3RvcmFnZSIsIldvcmtzcGFjZSIsInBhbmVsQ29udGFpbmVyIiwiY2xhc3NMaXN0IiwicGFuZWxHcmlwIiwicGFuZWxDb250ZW50IiwicGFuZWxIZWFkZXIiLCJwYW5lbEJvZHkiLCJwYW5lbEZvb3RlciIsIndvcmtzcGFjZUNvbnRhaW5lciIsInJlc2l6aW5nV2lkdGgiLCJyZXNpemVXaWR0aCIsInJlc2l6aW5nSGVpZ2h0IiwicmVzaXplSGVpZ2h0IiwiYWN0aXZlU2VjdGlvbiIsInBhbmVsU2lkZSIsInNlY3Rpb25zIiwic2V0QWN0aXZlIiwib25jbGljayIsImNsb3Nlc3QiLCJpbm5lclRleHQiLCJtZWRpdW1CcmVha3BvaW50IiwibWF0Y2hNZWRpYSIsInBhbmVsUG9zaXRvbiIsInBhbmVsU2lkZXMiLCJib3R0b20iLCJwYW5lbFdpZHRoIiwic2V0UHJvcGVydHkiLCJwYW5lbEhlaWdodCIsInN0YXJ0WCIsInN0YXJ0V2lkdGgiLCJzdGFydFkiLCJzdGFydEhlaWdodCIsIm9ubW91c2Vkb3duIiwibW91c2VFdmVudCIsInNpZGUiLCJzZXRJbmFjdGl2ZSIsInNlY3Rpb24iLCJhY3RpdmF0ZSIsImJ0biIsInNlY3Rpb25zQXJyYXkiLCJhZGRTZWN0aW9uIiwic2VjdGlvbkluZGV4IiwiYnJlYWtwb2ludCIsImRvY2tUbyIsImZvcm1FbGVtZW50Iiwid29ya3NwYWNlIiwib25zdWJtaXQiLCJjYW5jZWxDcmVhdGVCdG4iLCJnZXRFbGVtZW50QnlJZCIsImFkZENvbW1lbnRCdG4iLCJkZWxldGVCdG4iLCJkZWxldGVDb21tZW50IiwiY29tbWVudElkIiwiZWRpdEJ0biIsImVuYWJsZUVkaXRDb21tZW50IiwiY2FuY2VsVXBkYXRlQnRuIiwiZGlzY2FyZFVwZGF0ZSIsImNvbmZpcm1VcGRhdGVCdG4iLCJ0ZXh0SW5wdXQiLCJtZW50aW9uc1NlY3Rpb24iLCJtZW50aW9uc0lucHV0IiwiYnV0dG9uc01vZGVzIiwiY2hpbGRyZW4iLCJkaXNwbGF5IiwidW5zYXZlZENvbW1lbnRzRGF0YSIsIm1haW5QYW5lbCIsInJlbW92ZVNlY3Rpb24iLCJkaXNhYmxlZCIsImNvbW1lbnQiLCJmaWxsSW5wdXRzIiwiZGlzYWJsZUZvcm0iLCJidXR0b25zVmlzaWJpbGl0eU1vZGUiLCJlbmFibGVGb3JtIiwib25jaGFuZ2UiLCJ1cGRhdGVDb21tZW50IiwiZ2V0U2VsZWN0ZWRNZW1iZXJzIiwic2VsZWN0ZWRPcHRpb25zIiwibWVudGlvbkVtYWlsIiwicGVybWlzc2lvbiIsImRpc3BsYXlOYW1lIiwiaW5uZXJIVE1MIiwicHJvamVjdERhdGEiLCJBcHAiLCJhcHBlbmRlZERyYXdpbmdzSWRzIiwiZWxlbWVudHNDb21tZW50cyIsInByb2plY3RzTGlzdEJ0biIsImRyYXdpbmdzQnRucyIsInNhdmVCdG4iLCJjcmVhdGVEcmF3aW5nc0J0bnMiLCJ0b29sYmFyc0NvbnRhaW5lciIsInByb3BzVGFibGVzQ29udGFpbmVyIiwicGFyYW1zVGFibGVzQ29udGFpbmVyIiwiY29tbWVudERhdGEiLCJjb21tZW50T2JqIiwiY29tbWVudHNDaGFuZ2VkIiwiY29tbWVudEZvcm0iLCJkcmF3aW5nc0NvbnRhaW5lciIsIndvcmtzcGFjZXNDb250YWluZXIiLCJtYW5hZ2VUb29scyIsIlRvb2wiLCJhY3RpdmVEcmF3aW5nIiwiYWN0aXZlVG9vbCIsImN1cnJlbnRUYXJnZXQiLCJraWxsIiwiY29tbWVudHNDaGFuZ2VzVW5zYXZlZCIsInNldERyYXdpbmciLCJjdXJyZW50U2VsZWN0aW9uIiwicmVtb3ZlRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UiLCJ2aXNpYmlsaXR5IiwiaW5jbHVkZXMiLCJncm91cENyZWF0ZWQiLCJlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbiIsImFkZERyYXdpbmdTZWxlY3Rpb25BcHBlYXJhbmNlIiwiZHJhd2luZ3NJdGVtcyIsImRyYXdpbmdzU3R5bGVzVGFnIiwidG9vbEJ0biIsIm11bHRpcGxlU2VsZWN0aW9uIiwibWFuYWdlU2VsZWN0aW9uIiwic2VsZWN0aW9uIiwic2VsZWN0IiwiZGVzZWxlY3QiLCJjbGVhckFsbFNlbGVjdGlvbiIsImFkZFNlbGVjdGlvbkFwcGVhcmFuY2UiLCJlbGVtZW50SWQiLCJlbCIsImNsZWFyU2VsZWN0aW9uQXBwZWFyYW5jZSIsImdldERyYXdpbmdTZWxlY3RlZEVsZW1lbnRzUmVmcyIsInNlbGVjdGVkRWxlbWVudHMiLCJFbGVtZW50U2VsZWN0aW9uIiwic3VwZXIiLCJib3VuZGluZ0JveCIsIndhaXRpbmdGb3JDb21tZW50IiwiY2FuY2VsQ29tbWVudCIsIm1lbWJlcnNFbWFpbHMiLCJjdXJyZW50VXNlckVtYWlsIiwiZ2V0Q3VycmVudFVzZXIiLCJtZW1iZXIiLCJzaG93TWVudGlvbnNTZWN0aW9uIiwiaGlkZU1lbnRpb25zU2VjdGlvbiIsImFkZENvbW1lbnQiLCJoYXNVc2VkUGFuZWwiLCJzZWxlY3RlZEVtYWlscyIsImN1cnJlbnRVc2VyTmFtZSIsImN1cnJlbnRVc2VyUGhvdG8iLCJwZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZCIsInVzZXJOYW1lIiwidXNlclBob3RvIiwidGV4dENvbnRlbnQiLCJzZWxFbGVtZW50c1JlZiIsImN1cnJlbnRFbGVtZW50RGF0YSIsInNob3dFbGVtZW50RGF0YSIsImNhdGVnb3J5Iiwidmlld0NvbW1lbnQiLCJjYXRlZ29yeURhdGEiLCJjcmVhdGVEYXRhVGFibGUiLCJwYXJhbWV0ZXJzIiwiYWRkU2VjdGlvbnMiLCJlbnRyaWVzQXJyYXkiLCJjYXRlZ29yaWVzVGl0bGVzIiwiZGF0YUJ5Q2F0ZWdvcmllcyIsImNhdGVnb3J5SW5kZXgiLCJ0YWJsZVJvdyIsImRhdGFUYWJsZSIsInNoYXJlUHJvamVjdENvbnRhaW5lciIsInBlbmRpbmdUb1JlbW92ZSIsInBlbmRpbmdUb0FkZCIsImh0bWxDb250YWluZXIiLCJzaGFyZUZvcm0iLCJzaGFyZUZvcm1FcnJvck1zZyIsImNvbmZpcm1DaGFuZ2VzQnRucyIsInNhdmVDaGFuZ2VzQnRuIiwiY2FuY2VsQ2hhbmdlc0J0biIsIndhaXRpbmdBbmltYXRpb24iLCJjdXJyZW50VXNlcnNDb250ZW50IiwiY3VycmVudFVzZXJzVGFibGUiLCJwZW5kaW5nVXNlcnNDb250ZW50IiwicGVuZGluZ1VzZXJzVG9BZGRUYWJsZSIsInNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyIiwic2hhcmVOb3RpZmljYXRpb25JbnB1dCIsInByb2plY3RzTGlzdCIsImFjdGlvbkJ0biIsInN0YWdlTWVtYmVyVG9SZW1vdmUiLCJwYXJlbnRFbGVtZW50IiwidW5zdGFnZU1lbWJlclRvUmVtb3ZlIiwidW5zdGFnZU1lbWJlclRvQWRkIiwic2F2ZUNoYW5nZXMiLCJzdGFnZU1lbWJlclRvQWRkIiwic2V0VXBEaWFsb2ciLCJwcm9qZWN0SXRlbSIsInNoYXJlZCIsInJvbGUiLCJuYW1lZEl0ZW0iLCJpbnNlcnRBZGphY2VudEhUTUwiLCJjaGVja2VkIiwiY2xvc2VNb2RhbERpYWxvZyIsIml0ZW1JbmRleCIsImVtYWlsIiwiYWRkU3RhZ2VkTWVtYmVycyIsImFkZE1lbWJlcnNQcm9taXNlcyIsInNoYXJlRmlsZSIsInJlbW92ZVN0YWdlZE1lbWJlcnMiLCJyZW1vdmVNZW1iZXJzUHJvbWlzZXMiLCJzdG9wU2hhcmluZ0ZpbGUiLCJhZGRpdGlvblN1Y2Nlc3MiLCJyZW1vdmFsU3VjY2VzcyIsInJlc0FyciIsInNlbmRTaGFyaW5nUHJvamVjdEVtYWlsIiwic2F2ZU1lc3NhZ2luZ0RldmljZVRva2VuIiwic2hvd01lc3NhZ2UiLCJub3RpZmljYXRpb25zQnRuIiwibm90aWZpY2F0aW9uc0NvbnRhaW5lciIsIm5vdGlmaWNhdGlvbnNMaXN0IiwidG9nZ2xlIiwidmlld05vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbnMiLCJub3RpZmljYXRpb25PYmoiLCJub3RpZmljYXRpb25FbGVtZW50Iiwibm90aWZpY2F0aW9uSWQiLCJwcmVwZW5kIiwibm90aWZpY2F0aW9uIiwicmVuYW1lUHJvamVjdENvbnRhaW5lciIsInJlbmFtZUZvcm0iLCJyZW5hbWVQcm9qZWN0RXJyb3JNc2ciLCJjYW5jZWxCdG4iLCJwcm9qZWN0TGlzdEl0ZW0iLCJjdXJyZW50TmFtZSIsImVtcHR5SW5wdXRWYWx1ZSIsInJlbmFtZVByb2plY3QiLCJzZXRJbnB1dFZhbHVlIiwicHJvaklkIiwicHJvamVjdFJlbmFtZWRSZXMiLCJyZW5hbWVGaWxlIiwiSFRNTENvbnRhaW5lciIsIm1lbnVMaXN0Q29udGFpbmVyIiwidmlzaWJsZSIsInRvZ2dsZU1lbnUiLCJ0YXJnZXRFbGVtZW50IiwiY29udGV4dE1lbnVEYXRhIiwiY2xlYXJNZW51IiwiZ2VuZXJhdGVNZW51Iiwic2V0UG9zaXRpb24iLCJjb21tYW5kIiwidG9wIiwiaXRlbXNDb250YWluZXIiLCJEb2N1bWVudEZyYWdtZW50IiwicHJvakl0ZW1Db250ZW50IiwiY3htZW51Iiwic2hvd1ZpZXdwb3J0RGlhbG9nIiwiZnVuY3Rpb24iLCJkZWxldGVGaWxlIiwicHJvakluZGV4IiwiaGlkZVZpZXdwb3J0TWVzc2FnZSIsInNoYXJlUHJvamVjdERpYWxvZyIsInNob3dNb2RhbERpYWxvZyIsIm1vZGFsRGlhbG9nQ29udGFpbmVyIiwicmVuYW1lUHJvamVjdERpYWxvZyIsInVzZXJJbmZvQ29udGFpbmVyIiwibW9kYWxEaWFsb2dDb250ZW50IiwibW9kYWxEaWFsb2dzU3RvcmFnZSIsImNsb3NlTW9kYWxCdG4iLCJ2aWV3cG9ydE1lc3NhZ2UiLCJwcm9qZWN0c0xpc3RDb250YWluZXIiLCJjbG9zZVByb2plY3RzTGlzdEJ0biIsInNhdmVDb21tZW50c0RhdGEiLCJjbG9zZVByb2plY3RzTGlzdCIsIm9wZW5Qcm9qZWN0c0xpc3QiLCJnb1RvUHJvamVjdCIsInVwbG9hZEZpbGVGb3JtIiwiZmlsZUlucHV0Iiwic3VibWl0RmlsZUJ0biIsIm5leHRFbGVtZW50U2libGluZyIsImNyZWF0ZVByb2plY3QiLCJ1cGRhdGVQcm9qZWN0c0xpc3QiLCJtZXNzYWdlQ29udGFpbmVyIiwiY2xvc2VNZXNzYWdlIiwib25yZXNpemUiLCJhZGp1c3RJdGVtcyIsImN1cnJlbnRXb3Jrc3BhY2UiLCJub3RpZmljYXRpb25zTWFuYWdlciIsImNvbnRleHRNZW51Iiwic2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInVzZXJJbmZvUmVzIiwidXNlckluZm8iLCJzYXZpbmdTdWNjZXNzZnVsIiwianNvbkRhdGFUb1NhdmUiLCJjb21tZW50c0ZpbGVDcmVhdGlvblJlcyIsInVwZGF0ZUZpbGVDb250ZW50IiwiY29tbWVudHNGaWxlVXBkYXRlUmVzIiwibm90aWZpY2F0aW9uUHJvbWlzZSIsInNlbmROb3RpZmljYXRpb24iLCJvcGVuUHJvamVjdCIsInByZXZpb3VzQWN0aXZlSXRlbSIsImZldGNoUHJvamVjdCIsInByb2plY3QiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwicHJvamVjdFRpdGxlIiwibGlzdFByb2plY3RJdGVtcyIsImNyZWF0ZUhUTUxQcm9qZWN0c0xpc3QiLCJwcm9qRGF0YSIsIml0ZW1zSCIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiaXRlbXNUb3RhbCIsImNlaWwiLCJ0aW1lciIsIm1lc3NhZ2VUaW1lcklkIiwiYWN0aW9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbm5lckNvbnRhaW5lciIsImJhY2tncm91bmQiLCJjbG9zYWJsZSIsImZpcnN0RWxlbWVudENoaWxkIiwicGFnZSIsInRoZXJlSXNNZXNzYWdpbmciLCJQRU5ESU5HX1RJTUVPVVRfTVMiLCJQQUNLQUdFX1ZFUlNJT04iLCJJTlRFUk5BTF9BVVRIX1ZFUlNJT04iLCJJTlNUQUxMQVRJT05TX0FQSV9VUkwiLCJUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUiIsIkVSUk9SX0RFU0NSSVBUSU9OX01BUCIsImlzU2VydmVyRXJyb3IiLCJnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQiLCJleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZSIsInJlcXVlc3RTdGF0dXMiLCJleHBpcmVzSW4iLCJyZXNwb25zZUV4cGlyZXNJbiIsImNyZWF0aW9uVGltZSIsImdldEVycm9yRnJvbVJlc3BvbnNlIiwicmVxdWVzdE5hbWUiLCJyZXNwb25zZUpzb24iLCJlcnJvckRhdGEiLCJzZXJ2ZXJDb2RlIiwic2VydmVyTWVzc2FnZSIsInNlcnZlclN0YXR1cyIsImdldEhlYWRlcnMiLCJhcGlLZXkiLCJBY2NlcHQiLCJnZXRIZWFkZXJzV2l0aEF1dGgiLCJhcHBDb25maWciLCJyZWZyZXNoVG9rZW4iLCJnZXRBdXRob3JpemF0aW9uSGVhZGVyIiwicmV0cnlJZlNlcnZlckVycm9yIiwiY3JlYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImZpZCIsImVuZHBvaW50IiwicmVzcG9uc2VWYWx1ZSIsImF1dGhWZXJzaW9uIiwiYXBwSWQiLCJyZWdpc3RyYXRpb25TdGF0dXMiLCJhdXRoVG9rZW4iLCJzbGVlcCIsIm1zIiwiVkFMSURfRklEX1BBVFRFUk4iLCJJTlZBTElEX0ZJRCIsImdlbmVyYXRlRmlkIiwiZmlkQnl0ZUFycmF5IiwibXNDcnlwdG8iLCJEQVRBQkFTRV9OQU1FIiwiREFUQUJBU0VfVkVSU0lPTiIsIk9CSkVDVF9TVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwidXBncmFkZURCIiwidHgiLCJnZXRLZXkiLCJ1cGRhdGVGbiIsIm9sZFZhbHVlIiwiZ2V0SW5zdGFsbGF0aW9uRW50cnkiLCJyZWdpc3RyYXRpb25Qcm9taXNlIiwiaW5zdGFsbGF0aW9uRW50cnkiLCJvbGRFbnRyeSIsImNsZWFyVGltZWRPdXRSZXF1ZXN0IiwidXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeSIsImVudHJ5V2l0aFByb21pc2UiLCJvbkxpbmUiLCJyZWdpc3RyYXRpb25Qcm9taXNlV2l0aEVycm9yIiwiaW5Qcm9ncmVzc0VudHJ5IiwicmVnaXN0cmF0aW9uVGltZSIsInJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSIsInJlZ2lzdGVySW5zdGFsbGF0aW9uIiwid2FpdFVudGlsRmlkUmVnaXN0cmF0aW9uIiwidHJpZ2dlclJlZ2lzdHJhdGlvbklmTmVjZXNzYXJ5IiwidXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImdlbmVyYXRlQXV0aFRva2VuUmVxdWVzdCIsInBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIiLCJwbGF0Zm9ybUxvZ2dlciIsImdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQiLCJpbnN0YWxsYXRpb24iLCJyZWZyZXNoQXV0aFRva2VuIiwiZGVwZW5kZW5jaWVzIiwidG9rZW5Qcm9taXNlIiwiaXNFbnRyeVJlZ2lzdGVyZWQiLCJvbGRBdXRoVG9rZW4iLCJpc0F1dGhUb2tlbkV4cGlyZWQiLCJpc0F1dGhUb2tlblZhbGlkIiwidXBkYXRlQXV0aFRva2VuUmVxdWVzdCIsIndhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QiLCJpblByb2dyZXNzQXV0aFRva2VuIiwicmVxdWVzdFRpbWUiLCJtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeSIsInVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSIsImZldGNoQXV0aFRva2VuRnJvbVNlcnZlciIsImNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uIiwiZGVsZXRlSW5zdGFsbGF0aW9uUmVxdWVzdCIsImdldERlbGV0ZUVuZHBvaW50IiwiZ2V0TWlzc2luZ1ZhbHVlRXJyb3IiLCJ2YWx1ZU5hbWUiLCJjb25maWdLZXlzXzEiLCJjb25maWdLZXlzXzFfMSIsImtleU5hbWUiLCJleHRyYWN0QXBwQ29uZmlnIiwiZ2V0SWQiLCJkZWxldGVJbnN0YWxsYXRpb24iLCJHdGFnQ29tbWFuZCIsIkV2ZW50TmFtZSIsIkFOQUxZVElDU19JRF9GSUVMRCIsIkdBX0ZJRF9LRVkiLCJPUklHSU5fS0VZIiwiR1RBR19VUkwiLCJ3cmFwT3JDcmVhdGVHdGFnIiwiaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwIiwiZGF0YUxheWVyTmFtZSIsImd0YWdGdW5jdGlvbk5hbWUiLCJndGFnQ29yZSIsIl9hcmdzIiwiaWRPck5hbWVPclBhcmFtcyIsImd0YWdQYXJhbXMiLCJFVkVOVCIsImluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IiLCJnYVNlbmRUb0xpc3QiLCJnYVNlbmRUb0xpc3RfMSIsInNlbmRUb0lkIiwiaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiaWRQcm9taXNlIiwiQ09ORklHIiwiU0VUIiwid3JhcEd0YWciLCJ3cmFwcGVkR3RhZyIsImd0YWdDb3JlRnVuY3Rpb24iLCJ3cmFwcGVkR3RhZ0Z1bmN0aW9uIiwiZ3RhZ05hbWUiLCJnbG9iYWxJbml0RG9uZSIsImluc3RhbGxhdGlvbnMiLCJhbmFseXRpY3NJZCIsInNjcmlwdFRhZ3MiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImZpbmRHdGFnU2NyaXB0T25QYWdlIiwic2NyaXB0IiwiaW5zZXJ0U2NyaXB0VGFnIiwiZGF0YUxheWVyIiwiZ2V0T3JDcmVhdGVEYXRhTGF5ZXIiLCJpbml0aWFsaXplR0FJZCIsImxvZ0V2ZW50IiwiZXZlbnROYW1lIiwiZXZlbnRQYXJhbXMiLCJndGFnRnVuY3Rpb24iLCJzZXRDdXJyZW50U2NyZWVuIiwic2NyZWVuTmFtZSIsInNldFVzZXJJZCIsInNldFVzZXJQcm9wZXJ0aWVzIiwiZmxhdFByb3BlcnRpZXMiLCJzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZCIsImVuYWJsZWQiLCJBTkFMWVRJQ1NfVFlQRSIsInJlZ2lzdGVyQW5hbHl0aWNzIiwiTWVzc2FnZVR5cGUiLCJFUlJPUl9NQVAiLCJlcnJvckZhY3RvcnkiLCJERUZBVUxUX1BVQkxJQ19WQVBJRF9LRVkiLCJFTkRQT0lOVCIsImlzQXJyYXlCdWZmZXJFcXVhbCIsImJ5dGVMZW5ndGgiLCJ2aWV3QSIsIkRhdGFWaWV3Iiwidmlld0IiLCJnZXRVaW50OCIsImFycmF5QnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsInVpbnQ4VmVyc2lvbiIsIlN1YnNjcmlwdGlvbk1hbmFnZXIiLCJzdWJzY3JpcHRpb24iLCJ2YXBpZEtleSIsInN1YnNjcmliZU9wdGlvbnMiLCJyZXNwb25zZURhdGEiLCJlcnJfMSIsImdldEJvZHkiLCJnZXRFbmRwb2ludCIsImVycm9ySW5mbyIsInVwZGF0ZVRva2VuIiwidG9rZW5EZXRhaWxzIiwidXBkYXRlT3B0aW9ucyIsImVycl8yIiwiZmNtVG9rZW4iLCJkZWxldGVUb2tlbiIsInVuc3Vic2NyaWJlT3B0aW9ucyIsImVycl8zIiwicDI1NmRoIiwid2ViIiwiYXBwbGljYXRpb25QdWJLZXkiLCJiYXNlNjRUb0FycmF5QnVmZmVyIiwiYmFzZTY0U3RyaW5nIiwicmVwZWF0IiwicmF3RGF0YSIsIm91dHB1dEFycmF5IiwiT0xEX0RCX05BTUUiLCJPTERfT0JKRUNUX1NUT1JFX05BTUUiLCJjbGVhblYxIiwiX2V2ZW50Iiwic3Vic2NyaXB0aW9uTWFuYWdlciIsIm9wZW5DdXJzb3JSZXF1ZXN0IiwiaGFuZGxlRGIiLCJEYkludGVyZmFjZSIsImdldEluZGV4IiwiY2xvc2VEYXRhYmFzZSIsInJ1blJlcXVlc3QiLCJnZXREYiIsIm9iamVjdFN0b3JlTmFtZSIsInByb21pc2lmeSIsImRiVmVyc2lvbiIsIm9uRGJVcGdyYWRlIiwiVG9rZW5EZXRhaWxzTW9kZWwiLCJjdXJzb3JSZXF1ZXN0XzEiLCJjcmVhdGVUaW1lIiwiZmNtUHVzaFNldCIsImN1cnNvclJlcXVlc3RfMiIsImdldFRva2VuRGV0YWlsc0Zyb21Ub2tlbiIsInZhbGlkYXRlSW5wdXRzIiwiZ2V0VG9rZW5EZXRhaWxzRnJvbVNXU2NvcGUiLCJzd1Njb3BlIiwic2F2ZVRva2VuRGV0YWlscyIsImZjbVNlbmRlcklkIiwiQXJyYXlCdWZmZXIiLCJWYXBpZERldGFpbHNNb2RlbCIsImdldFZhcGlkRnJvbVNXU2NvcGUiLCJzYXZlVmFwaWREZXRhaWxzIiwiZGVsZXRlVmFwaWREZXRhaWxzIiwiQmFzZUNvbnRyb2xsZXIiLCJ2YXBpZERldGFpbHNNb2RlbCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwidG9rZW5EZXRhaWxzTW9kZWwiLCJzd1JlZyIsInB1YmxpY1ZhcGlkS2V5IiwicHVzaFN1YnNjcmlwdGlvbiIsImdldE5vdGlmaWNhdGlvblBlcm1pc3Npb24iLCJyZXF1ZXN0Tm90aWZpY2F0aW9uUGVybWlzc2lvbiIsImdldFNXUmVnaXN0cmF0aW9uXyIsImdldFB1YmxpY1ZhcGlkS2V5XyIsImdldFB1c2hTdWJzY3JpcHRpb24iLCJzY29wZSIsIm1hbmFnZUV4aXN0aW5nVG9rZW4iLCJnZXROZXdUb2tlbiIsImlzRW5kcG9pbnRFcXVhbCIsImlzQXV0aEVxdWFsIiwiaXNQMjU2ZGhFcXVhbCIsImlzVG9rZW5TdGlsbFZhbGlkIiwiZGVsZXRlVG9rZW5Gcm9tREIiLCJ1cGRhdGVkVG9rZW4iLCJhbGxEZXRhaWxzIiwibmV3VG9rZW4iLCJyZWdpc3RyYXRpb24iLCJwdXNoTWFuYWdlciIsImdldFN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwiZV8yIiwic3dSZWdpc3RyYXRpb24iLCJ1c2VyVmlzaWJsZU9ubHkiLCJhcHBsaWNhdGlvblNlcnZlcktleSIsInJlcXVlc3RQZXJtaXNzaW9uIiwidXNlU2VydmljZVdvcmtlciIsIl9yZWdpc3RyYXRpb24iLCJ1c2VQdWJsaWNWYXBpZEtleSIsIl9iNjRQdWJsaWNLZXkiLCJfbmV4dE9yT2JzZXJ2ZXIiLCJfZXJyb3IiLCJfY29tcGxldGVkIiwib25Ub2tlblJlZnJlc2giLCJzZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXIiLCJfY2FsbGJhY2siLCJOb3RpZmljYXRpb24iLCJnZXRUb2tlbkRldGFpbHNNb2RlbCIsImdldFZhcGlkRGV0YWlsc01vZGVsIiwiZ2V0U3Vic2NyaXB0aW9uTWFuYWdlciIsIlN3Q29udHJvbGxlciIsImJnTWVzc2FnZUhhbmRsZXIiLCJvblB1c2giLCJvblN1YkNoYW5nZSIsIm9uTm90aWZpY2F0aW9uQ2xpY2siLCJ3YWl0VW50aWwiLCJvblB1c2hfIiwib25TdWJDaGFuZ2VfIiwib25Ob3RpZmljYXRpb25DbGlja18iLCJtc2dQYXlsb2FkIiwibm90aWZpY2F0aW9uRGV0YWlscyIsIm5vdGlmaWNhdGlvblRpdGxlIiwicmVnIiwibWF4QWN0aW9ucyIsImhhc1Zpc2libGVDbGllbnRzXyIsInNlbmRNZXNzYWdlVG9XaW5kb3dDbGllbnRzXyIsImdldE5vdGlmaWNhdGlvbkRhdGFfIiwic2hvd05vdGlmaWNhdGlvbiIsImxpbmsiLCJ3aW5kb3dDbGllbnQiLCJpbnRlcm5hbE1zZyIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImZjbU9wdGlvbnMiLCJjbGlja19hY3Rpb24iLCJvcmlnaW4iLCJnZXRXaW5kb3dDbGllbnRfIiwib3BlbldpbmRvdyIsImZvY3VzIiwiY3JlYXRlTmV3TXNnIiwiTk9USUZJQ0FUSU9OX0NMSUNLRUQiLCJhdHRlbXB0VG9NZXNzYWdlQ2xpZW50XyIsIm5vdGlmaWNhdGlvbkluZm9ybWF0aW9uIiwicGFyc2VkVVJMIiwiY2xpZW50TGlzdCIsInN1aXRhYmxlQ2xpZW50IiwiVVJMIiwiZ2V0Q2xpZW50TGlzdCIsInBvc3RNZXNzYWdlIiwiUFVTSF9NU0dfUkVDRUlWRUQiLCJ2YXBpZEtleUZyb21EYXRhYmFzZSIsIm1hdGNoQWxsIiwiaW5jbHVkZVVuY29udHJvbGxlZCIsIm1zZ1R5cGUiLCJmaXJlYmFzZU1lc3NhZ2luZ1R5cGUiLCJmaXJlYmFzZU1lc3NhZ2luZ0RhdGEiLCJXaW5kb3dDb250cm9sbGVyIiwicmVnaXN0cmF0aW9uVG9Vc2UiLCJwdWJsaWNWYXBpZEtleVRvVXNlIiwibWVzc2FnZU9ic2VydmVyIiwidG9rZW5SZWZyZXNoT2JzZXJ2ZXIiLCJvbk1lc3NhZ2VJbnRlcm5hbCIsIm9uVG9rZW5SZWZyZXNoSW50ZXJuYWwiLCJzZXR1cFNXTWVzc2FnZUxpc3RlbmVyXyIsInBlcm1pc3Npb25SZXN1bHQiLCJTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uIiwicHVibGljS2V5IiwicGFyc2VkS2V5IiwiY29tcGxldGVkIiwid2FpdEZvclJlZ2lzdHJhdGlvblRvQWN0aXZhdGVfIiwic2VydmljZVdvcmtlciIsImluc3RhbGxpbmciLCJ3YWl0aW5nIiwic3RhdGVDaGFuZ2VMaXN0ZW5lciIsInJlZ2lzdGVyIiwiYnJvd3NlckVycm9yTWVzc2FnZSIsImV2ZW50VHlwZSIsIm1lc3NhZ2VUeXBlIiwiZ2V0RXZlbnRUeXBlIiwiYW5hbHl0aWNzUHJvdmlkZXIiLCJtZXNzYWdlX25hbWUiLCJtZXNzYWdlX2lkIiwibWVzc2FnZV90aW1lIiwibWVzc2FnZV9kZXZpY2VfdGltZSIsImlzU3VwcG9ydGVkIiwiUHVzaFN1YnNjcmlwdGlvbiIsImNvb2tpZUVuYWJsZWQiLCJuYW1lc3BhY2VFeHBvcnRzIiwiZmlyZWJhc2VTZXJ2aWNlcyIsInJlZ2lzdGVyTWVzc2FnaW5nIiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwic3RvcmFnZUJ1Y2tldCIsIk1zZyIsIm1lc3NhZ2luZyIsInBheWxvYWQiLCJjcmVhdGVOb3RpZmljYWN0aW9uIiwicmVmcmVzaGVkVG9rZW4iLCJnZXRNZXNzYWdpbmdUb2tlbiIsInNlc3Npb25TdG9yYWdlIiwicmVxdWVzdE5vdGlmaWNhdGlvbnNQZXJtaXNzaW9ucyIsIkJyb2FkY2FzdENoYW5uZWwiLCJvbm1lc3NhZ2UiLCJBUElfS0VZIiwiQ0xJRU5UX0lEIiwiUFJPQ0VTUyIsIkRJU0NPVkVSWV9ET0NTIiwiU0NPUEVTIiwiYXV0aG9yaXplQnV0dG9uIiwic2lnbm91dEJ1dHRvbiIsImluaXRDbGllbnQiLCJpbml0IiwiZGlzY292ZXJ5RG9jcyIsImF1dGgyIiwiZ2V0QXV0aEluc3RhbmNlIiwiaXNTaWduZWRJbiIsInVwZGF0ZVNpZ25pblN0YXR1cyIsImhhbmRsZUF1dGhDbGljayIsImhhbmRsZVNpZ25vdXRDbGljayIsImF1dGhvcml6ZURpYWxvZyIsInNpZ25JbiIsInNpZ25PdXQiLCJkZWZlciIsImxvYWQiLCJjdXJyZW50RHJhd2luZ0J0biIsImRlZmVycmVkSW5zdGFsbFByb21wdCIsImluc3RhbGxCdXR0b24iLCJwcm9tcHQiLCJoaWRkZW4iLCJ1c2VyQ2hvaWNlIiwiY2hvaWNlIiwib3V0Y29tZSIsImRyYXdpbmdJZCIsInJlcXVlc3RlZERyYXdpbmciLCJzdHlsZXNSZXMiLCJzdHlsZVRhZyIsImRyb3Bkb3ducyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzaWRlTmF2VG9nZ2xlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlCQUFURixFQUFtQixJQUFJLElBQUlNLEtBQU9OLEVBQU9yQixFQUFvQlUsRUFBRWUsRUFBSUUsRUFBSyxTQUFTQSxHQUFPLE9BQU9OLEVBQU1NLElBQVFDLEtBQUssS0FBTUQsSUFDOUksT0FBT0YsR0FJUnpCLEVBQW9CNkIsRUFBSSxTQUFTMUIsR0FDaEMsSUFBSVMsRUFBU1QsR0FBVUEsRUFBT3FCLFdBQzdCLFdBQXdCLE9BQU9yQixFQUFnQixTQUMvQyxXQUE4QixPQUFPQSxHQUV0QyxPQURBSCxFQUFvQlUsRUFBRUUsRUFBUSxJQUFLQSxHQUM1QkEsR0FJUlosRUFBb0JhLEVBQUksU0FBU2lCLEVBQVFDLEdBQVksT0FBT2pCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VCLEVBQVFDLElBR3pHL0IsRUFBb0JrQyxFQUFJLEdBSWpCbEMsRUFBb0JBLEVBQW9CbUMsRUFBSSxJLCtCQ2xGckQ7Ozs7Ozs7Ozs7Ozs7OztBQWdCQSxJQUFJQyxFQUFnQixTQUFTMUIsRUFBRzJCLEdBSTVCLE9BSEFELEVBQWdCdEIsT0FBT3dCLGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVU5QixFQUFHMkIsR0FBSzNCLEVBQUU2QixVQUFZRixJQUN2RSxTQUFVM0IsRUFBRzJCLEdBQUssSUFBSyxJQUFJSCxLQUFLRyxFQUFPQSxFQUFFSixlQUFlQyxLQUFJeEIsRUFBRXdCLEdBQUtHLEVBQUVILE1BQ3BEeEIsRUFBRzJCLElBR3JCLFNBQVNJLEVBQVUvQixFQUFHMkIsR0FFekIsU0FBU0ssSUFBT0MsS0FBS0MsWUFBY2xDLEVBRG5DMEIsRUFBYzFCLEVBQUcyQixHQUVqQjNCLEVBQUVzQixVQUFrQixPQUFOSyxFQUFhdkIsT0FBT1ksT0FBT1csSUFBTUssRUFBR1YsVUFBWUssRUFBRUwsVUFBVyxJQUFJVSxHQUc1RSxJQUFJRyxFQUFXLFdBUWxCLE9BUEFBLEVBQVcvQixPQUFPZ0MsUUFBVSxTQUFrQnhCLEdBQzFDLElBQUssSUFBSWEsRUFBRy9CLEVBQUksRUFBR3lCLEVBQUlrQixVQUFVQyxPQUFRNUMsRUFBSXlCLEVBQUd6QixJQUU1QyxJQUFLLElBQUk4QixLQURUQyxFQUFJWSxVQUFVM0MsR0FDT1UsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLNEIsRUFBR0QsS0FBSVosRUFBRVksR0FBS0MsRUFBRUQsSUFFOUUsT0FBT1osSUFFSzJCLE1BQU1OLEtBQU1JLFlBR3pCLFNBQVNHLEVBQU9mLEVBQUdnQixHQUN0QixJQUFJN0IsRUFBSSxHQUNSLElBQUssSUFBSVksS0FBS0MsRUFBT3JCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBSzRCLEVBQUdELElBQU1pQixFQUFFQyxRQUFRbEIsR0FBSyxJQUM5RVosRUFBRVksR0FBS0MsRUFBRUQsSUFDYixHQUFTLE1BQUxDLEdBQXFELG1CQUFqQ3JCLE9BQU91QyxzQkFDdEIsS0FBSWpELEVBQUksRUFBYixJQUFnQjhCLEVBQUlwQixPQUFPdUMsc0JBQXNCbEIsR0FBSS9CLEVBQUk4QixFQUFFYyxPQUFRNUMsSUFDM0QrQyxFQUFFQyxRQUFRbEIsRUFBRTlCLElBQU0sR0FBS1UsT0FBT2tCLFVBQVVzQixxQkFBcUIvQyxLQUFLNEIsRUFBR0QsRUFBRTlCLE1BQ3ZFa0IsRUFBRVksRUFBRTlCLElBQU0rQixFQUFFRCxFQUFFOUIsS0FFMUIsT0FBT2tCLEVBR0osU0FBU2lDLEVBQVdDLEVBQVlDLEVBQVE5QixFQUFLK0IsR0FDaEQsSUFBMkhoRCxFQUF2SEQsRUFBSXNDLFVBQVVDLE9BQVE5QixFQUFJVCxFQUFJLEVBQUlnRCxFQUFrQixPQUFUQyxFQUFnQkEsRUFBTzVDLE9BQU82Qyx5QkFBeUJGLEVBQVE5QixHQUFPK0IsRUFDckgsR0FBdUIsaUJBQVpFLFNBQW9ELG1CQUFyQkEsUUFBUUMsU0FBeUIzQyxFQUFJMEMsUUFBUUMsU0FBU0wsRUFBWUMsRUFBUTlCLEVBQUsrQixRQUNwSCxJQUFLLElBQUl0RCxFQUFJb0QsRUFBV1IsT0FBUyxFQUFHNUMsR0FBSyxFQUFHQSxLQUFTTSxFQUFJOEMsRUFBV3BELE1BQUljLEdBQUtULEVBQUksRUFBSUMsRUFBRVEsR0FBS1QsRUFBSSxFQUFJQyxFQUFFK0MsRUFBUTlCLEVBQUtULEdBQUtSLEVBQUUrQyxFQUFROUIsS0FBU1QsR0FDaEosT0FBT1QsRUFBSSxHQUFLUyxHQUFLSixPQUFPQyxlQUFlMEMsRUFBUTlCLEVBQUtULEdBQUlBLEVBR3pELFNBQVM0QyxFQUFRQyxFQUFZQyxHQUNoQyxPQUFPLFNBQVVQLEVBQVE5QixHQUFPcUMsRUFBVVAsRUFBUTlCLEVBQUtvQyxJQUdwRCxTQUFTRSxFQUFXQyxFQUFhQyxHQUNwQyxHQUF1QixpQkFBWlAsU0FBb0QsbUJBQXJCQSxRQUFRUSxTQUF5QixPQUFPUixRQUFRUSxTQUFTRixFQUFhQyxHQUc3RyxTQUFTRSxFQUFVQyxFQUFTQyxFQUFZQyxFQUFHQyxHQUM5QyxPQUFPLElBQUtELElBQU1BLEVBQUlFLFdBQVUsU0FBVUMsRUFBU0MsR0FDL0MsU0FBU0MsRUFBVXhELEdBQVMsSUFBTXlELEVBQUtMLEVBQVVNLEtBQUsxRCxJQUFXLE1BQU84QixHQUFLeUIsRUFBT3pCLElBQ3BGLFNBQVM2QixFQUFTM0QsR0FBUyxJQUFNeUQsRUFBS0wsRUFBaUIsTUFBRXBELElBQVcsTUFBTzhCLEdBQUt5QixFQUFPekIsSUFDdkYsU0FBUzJCLEVBQUtHLEdBQVVBLEVBQU9DLEtBQU9QLEVBQVFNLEVBQU81RCxPQUFTLElBQUltRCxHQUFFLFNBQVVHLEdBQVdBLEVBQVFNLEVBQU81RCxVQUFXOEQsS0FBS04sRUFBV0csR0FDbklGLEdBQU1MLEVBQVlBLEVBQVV4QixNQUFNcUIsRUFBU0MsR0FBYyxLQUFLUSxXQUkvRCxTQUFTSyxFQUFZZCxFQUFTZSxHQUNqQyxJQUFzR0MsRUFBR0MsRUFBR2pFLEVBQUdrRSxFQUEzR0MsRUFBSSxDQUFFQyxNQUFPLEVBQUdDLEtBQU0sV0FBYSxHQUFXLEVBQVByRSxFQUFFLEdBQVEsTUFBTUEsRUFBRSxHQUFJLE9BQU9BLEVBQUUsSUFBT3NFLEtBQU0sR0FBSUMsSUFBSyxJQUNoRyxPQUFPTCxFQUFJLENBQUVULEtBQU1lLEVBQUssR0FBSSxNQUFTQSxFQUFLLEdBQUksT0FBVUEsRUFBSyxJQUF3QixtQkFBWDNFLFNBQTBCcUUsRUFBRXJFLE9BQU80RSxVQUFZLFdBQWEsT0FBT3BELE9BQVU2QyxFQUN2SixTQUFTTSxFQUFLakUsR0FBSyxPQUFPLFNBQVVtRSxHQUFLLE9BQ3pDLFNBQWNDLEdBQ1YsR0FBSVgsRUFBRyxNQUFNLElBQUlZLFVBQVUsbUNBQzNCLEtBQU9ULEdBQUcsSUFDTixHQUFJSCxFQUFJLEVBQUdDLElBQU1qRSxFQUFZLEVBQVIyRSxFQUFHLEdBQVNWLEVBQVUsT0FBSVUsRUFBRyxHQUFLVixFQUFTLFNBQU9qRSxFQUFJaUUsRUFBVSxTQUFNakUsRUFBRWYsS0FBS2dGLEdBQUksR0FBS0EsRUFBRVIsU0FBV3pELEVBQUlBLEVBQUVmLEtBQUtnRixFQUFHVSxFQUFHLEtBQUtmLEtBQU0sT0FBTzVELEVBRTNKLE9BRElpRSxFQUFJLEVBQUdqRSxJQUFHMkUsRUFBSyxDQUFTLEVBQVJBLEVBQUcsR0FBUTNFLEVBQUVELFFBQ3pCNEUsRUFBRyxJQUNQLEtBQUssRUFBRyxLQUFLLEVBQUczRSxFQUFJMkUsRUFBSSxNQUN4QixLQUFLLEVBQWMsT0FBWFIsRUFBRUMsUUFBZ0IsQ0FBRXJFLE1BQU80RSxFQUFHLEdBQUlmLE1BQU0sR0FDaEQsS0FBSyxFQUFHTyxFQUFFQyxRQUFTSCxFQUFJVSxFQUFHLEdBQUlBLEVBQUssQ0FBQyxHQUFJLFNBQ3hDLEtBQUssRUFBR0EsRUFBS1IsRUFBRUksSUFBSU0sTUFBT1YsRUFBRUcsS0FBS08sTUFBTyxTQUN4QyxRQUNJLEtBQWtCN0UsR0FBWkEsRUFBSW1FLEVBQUVHLE1BQVk1QyxPQUFTLEdBQUsxQixFQUFFQSxFQUFFMEIsT0FBUyxNQUFrQixJQUFWaUQsRUFBRyxJQUFzQixJQUFWQSxFQUFHLElBQVcsQ0FBRVIsRUFBSSxFQUFHLFNBQ2pHLEdBQWMsSUFBVlEsRUFBRyxNQUFjM0UsR0FBTTJFLEVBQUcsR0FBSzNFLEVBQUUsSUFBTTJFLEVBQUcsR0FBSzNFLEVBQUUsSUFBTSxDQUFFbUUsRUFBRUMsTUFBUU8sRUFBRyxHQUFJLE1BQzlFLEdBQWMsSUFBVkEsRUFBRyxJQUFZUixFQUFFQyxNQUFRcEUsRUFBRSxHQUFJLENBQUVtRSxFQUFFQyxNQUFRcEUsRUFBRSxHQUFJQSxFQUFJMkUsRUFBSSxNQUM3RCxHQUFJM0UsR0FBS21FLEVBQUVDLE1BQVFwRSxFQUFFLEdBQUksQ0FBRW1FLEVBQUVDLE1BQVFwRSxFQUFFLEdBQUltRSxFQUFFSSxJQUFJTyxLQUFLSCxHQUFLLE1BQ3ZEM0UsRUFBRSxJQUFJbUUsRUFBRUksSUFBSU0sTUFDaEJWLEVBQUVHLEtBQUtPLE1BQU8sU0FFdEJGLEVBQUtaLEVBQUs5RSxLQUFLK0QsRUFBU21CLEdBQzFCLE1BQU90QyxHQUFLOEMsRUFBSyxDQUFDLEVBQUc5QyxHQUFJb0MsRUFBSSxFQUFLLFFBQVVELEVBQUloRSxFQUFJLEVBQ3RELEdBQVksRUFBUjJFLEVBQUcsR0FBUSxNQUFNQSxFQUFHLEdBQUksTUFBTyxDQUFFNUUsTUFBTzRFLEVBQUcsR0FBS0EsRUFBRyxRQUFLLEVBQVFmLE1BQU0sR0FyQjlCSixDQUFLLENBQUNqRCxFQUFHbUUsTUF5QnRELFNBQVNLLEVBQWE3RixFQUFHTixHQUM1QixJQUFLLElBQUlnQyxLQUFLMUIsRUFBUU4sRUFBUStCLGVBQWVDLEtBQUloQyxFQUFRZ0MsR0FBSzFCLEVBQUUwQixJQUc3RCxTQUFTb0UsRUFBU3pGLEdBQ3JCLElBQUlMLEVBQXNCLG1CQUFYVyxRQUF5Qk4sRUFBRU0sT0FBTzRFLFVBQVczRixFQUFJLEVBQ2hFLE9BQUlJLEVBQVVBLEVBQUVELEtBQUtNLEdBQ2QsQ0FDSGtFLEtBQU0sV0FFRixPQURJbEUsR0FBS1QsR0FBS1MsRUFBRW1DLFNBQVFuQyxPQUFJLEdBQ3JCLENBQUVRLE1BQU9SLEdBQUtBLEVBQUVULEtBQU04RSxNQUFPckUsS0FLekMsU0FBUzBGLEVBQU8xRixFQUFHZ0IsR0FDdEIsSUFBSXJCLEVBQXNCLG1CQUFYVyxRQUF5Qk4sRUFBRU0sT0FBTzRFLFVBQ2pELElBQUt2RixFQUFHLE9BQU9LLEVBQ2YsSUFBbUJLLEVBQVlpQyxFQUEzQi9DLEVBQUlJLEVBQUVELEtBQUtNLEdBQU8yRixFQUFLLEdBQzNCLElBQ0ksV0FBYyxJQUFOM0UsR0FBZ0JBLEtBQU0sTUFBUVgsRUFBSWQsRUFBRTJFLFFBQVFHLE1BQU1zQixFQUFHSixLQUFLbEYsRUFBRUcsT0FFeEUsTUFBT29GLEdBQVN0RCxFQUFJLENBQUVzRCxNQUFPQSxHQUM3QixRQUNJLElBQ1F2RixJQUFNQSxFQUFFZ0UsT0FBUzFFLEVBQUlKLEVBQVUsU0FBSUksRUFBRUQsS0FBS0gsR0FFbEQsUUFBVSxHQUFJK0MsRUFBRyxNQUFNQSxFQUFFc0QsT0FFN0IsT0FBT0QsRUFHSixTQUFTRSxJQUNaLElBQUssSUFBSUYsRUFBSyxHQUFJcEcsRUFBSSxFQUFHQSxFQUFJMkMsVUFBVUMsT0FBUTVDLElBQzNDb0csRUFBS0EsRUFBR0csT0FBT0osRUFBT3hELFVBQVUzQyxLQUNwQyxPQUFPb0csRUFHSixTQUFTSSxJQUNaLElBQUssSUFBSXpFLEVBQUksRUFBRy9CLEVBQUksRUFBR3lHLEVBQUs5RCxVQUFVQyxPQUFRNUMsRUFBSXlHLEVBQUl6RyxJQUFLK0IsR0FBS1ksVUFBVTNDLEdBQUc0QyxPQUN4RSxJQUFJOUIsRUFBSXNCLE1BQU1MLEdBQUkyRSxFQUFJLEVBQTNCLElBQThCMUcsRUFBSSxFQUFHQSxFQUFJeUcsRUFBSXpHLElBQ3pDLElBQUssSUFBSTJHLEVBQUloRSxVQUFVM0MsR0FBSTRHLEVBQUksRUFBR0MsRUFBS0YsRUFBRS9ELE9BQVFnRSxFQUFJQyxFQUFJRCxJQUFLRixJQUMxRDVGLEVBQUU0RixHQUFLQyxFQUFFQyxHQUNqQixPQUFPOUYsRUFHSixTQUFTZ0csRUFBUWxCLEdBQ3BCLE9BQU9yRCxnQkFBZ0J1RSxHQUFXdkUsS0FBS3FELEVBQUlBLEVBQUdyRCxNQUFRLElBQUl1RSxFQUFRbEIsR0FHL0QsU0FBU21CLEVBQWlCN0MsRUFBU0MsRUFBWUUsR0FDbEQsSUFBS3RELE9BQU9pRyxjQUFlLE1BQU0sSUFBSWxCLFVBQVUsd0NBQy9DLElBQW9EOUYsRUFBaERvRixFQUFJZixFQUFVeEIsTUFBTXFCLEVBQVNDLEdBQWMsSUFBUThDLEVBQUksR0FDM0QsT0FBT2pILEVBQUksR0FBSTBGLEVBQUssUUFBU0EsRUFBSyxTQUFVQSxFQUFLLFVBQVcxRixFQUFFZSxPQUFPaUcsZUFBaUIsV0FBYyxPQUFPekUsTUFBU3ZDLEVBQ3BILFNBQVMwRixFQUFLakUsR0FBUzJELEVBQUUzRCxLQUFJekIsRUFBRXlCLEdBQUssU0FBVW1FLEdBQUssT0FBTyxJQUFJdEIsU0FBUSxTQUFVcUMsRUFBRzFFLEdBQUtnRixFQUFFakIsS0FBSyxDQUFDdkUsRUFBR21FLEVBQUdlLEVBQUcxRSxJQUFNLEdBQUtpRixFQUFPekYsRUFBR21FLFFBQzlILFNBQVNzQixFQUFPekYsRUFBR21FLEdBQUssS0FDVjlFLEVBRHFCc0UsRUFBRTNELEdBQUdtRSxJQUNuQjNFLGlCQUFpQjZGLEVBQVV4QyxRQUFRQyxRQUFRekQsRUFBRUcsTUFBTTJFLEdBQUdiLEtBQUtvQyxFQUFTM0MsR0FBVTRDLEVBQU9ILEVBQUUsR0FBRyxHQUFJbkcsR0FEcEUsTUFBT2lDLEdBQUtxRSxFQUFPSCxFQUFFLEdBQUcsR0FBSWxFLEdBQzNFLElBQWNqQyxFQUNkLFNBQVNxRyxFQUFRbEcsR0FBU2lHLEVBQU8sT0FBUWpHLEdBQ3pDLFNBQVN1RCxFQUFPdkQsR0FBU2lHLEVBQU8sUUFBU2pHLEdBQ3pDLFNBQVNtRyxFQUFPbEMsRUFBR1UsR0FBU1YsRUFBRVUsR0FBSXFCLEVBQUVJLFFBQVNKLEVBQUVyRSxRQUFRc0UsRUFBT0QsRUFBRSxHQUFHLEdBQUlBLEVBQUUsR0FBRyxLQUd6RSxTQUFTSyxFQUFpQjdHLEdBQzdCLElBQUlULEVBQUc4QixFQUNQLE9BQU85QixFQUFJLEdBQUkwRixFQUFLLFFBQVNBLEVBQUssU0FBUyxTQUFVM0MsR0FBSyxNQUFNQSxLQUFPMkMsRUFBSyxVQUFXMUYsRUFBRWUsT0FBTzRFLFVBQVksV0FBYyxPQUFPcEQsTUFBU3ZDLEVBQzFJLFNBQVMwRixFQUFLakUsRUFBR3lELEdBQUtsRixFQUFFeUIsR0FBS2hCLEVBQUVnQixHQUFLLFNBQVVtRSxHQUFLLE9BQVE5RCxHQUFLQSxHQUFLLENBQUViLE1BQU82RixFQUFRckcsRUFBRWdCLEdBQUdtRSxJQUFLZCxLQUFZLFdBQU5yRCxHQUFtQnlELEVBQUlBLEVBQUVVLEdBQUtBLEdBQU9WLEdBR3hJLFNBQVNxQyxFQUFjOUcsR0FDMUIsSUFBS00sT0FBT2lHLGNBQWUsTUFBTSxJQUFJbEIsVUFBVSx3Q0FDL0MsSUFBaUM5RixFQUE3QkksRUFBSUssRUFBRU0sT0FBT2lHLGVBQ2pCLE9BQU81RyxFQUFJQSxFQUFFRCxLQUFLTSxJQUFNQSxFQUFxQ3lGLEVBQVN6RixHQUEyQlQsRUFBSSxHQUFJMEYsRUFBSyxRQUFTQSxFQUFLLFNBQVVBLEVBQUssVUFBVzFGLEVBQUVlLE9BQU9pRyxlQUFpQixXQUFjLE9BQU96RSxNQUFTdkMsR0FDOU0sU0FBUzBGLEVBQUtqRSxHQUFLekIsRUFBRXlCLEdBQUtoQixFQUFFZ0IsSUFBTSxTQUFVbUUsR0FBSyxPQUFPLElBQUl0QixTQUFRLFNBQVVDLEVBQVNDLElBQ3ZGLFNBQWdCRCxFQUFTQyxFQUFRbEUsRUFBR3NGLEdBQUt0QixRQUFRQyxRQUFRcUIsR0FBR2IsTUFBSyxTQUFTYSxHQUFLckIsRUFBUSxDQUFFdEQsTUFBTzJFLEVBQUdkLEtBQU14RSxNQUFTa0UsSUFESjRDLENBQU83QyxFQUFTQyxHQUE3Qm9CLEVBQUluRixFQUFFZ0IsR0FBR21FLElBQThCZCxLQUFNYyxFQUFFM0UsWUFJN0ksU0FBU3VHLEVBQXFCQyxFQUFRQyxHQUV6QyxPQURJaEgsT0FBT0MsZUFBa0JELE9BQU9DLGVBQWU4RyxFQUFRLE1BQU8sQ0FBRXhHLE1BQU95RyxJQUFpQkQsRUFBT0MsSUFBTUEsRUFDbEdELEVBR0osU0FBU0UsRUFBYUMsR0FDekIsR0FBSUEsR0FBT0EsRUFBSXhHLFdBQVksT0FBT3dHLEVBQ2xDLElBQUkvQyxFQUFTLEdBQ2IsR0FBVyxNQUFQK0MsRUFBYSxJQUFLLElBQUlsQixLQUFLa0IsRUFBU2xILE9BQU9tQixlQUFlMUIsS0FBS3lILEVBQUtsQixLQUFJN0IsRUFBTzZCLEdBQUtrQixFQUFJbEIsSUFFNUYsT0FEQTdCLEVBQU9nRCxRQUFVRCxFQUNWL0MsRUFHSixTQUFTaUQsRUFBZ0JGLEdBQzVCLE9BQVFBLEdBQU9BLEVBQUl4RyxXQUFjd0csRUFBTSxDQUFFQyxRQUFTRCxLLDhCQ2xNdEQsWUFFQWxILE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxJQUV0RCxJQUFJOEcsRUFBUSxFQUFRLEdBcUJoQkMsRUFBWSxDQUlaQyxhQUFhLEVBSWJDLFlBQVksRUFJWkMsWUFBYSxxQkFzQmJDLEVBQVMsU0FBVUMsRUFBV0MsR0FDOUIsSUFBS0QsRUFDRCxNQUFNRSxFQUFlRCxJQU16QkMsRUFBaUIsU0FBVUQsR0FDM0IsT0FBTyxJQUFJRSxNQUFNLHNCQUNiUixFQUFVRyxZQUNWLDZCQUNBRyxJQW1CSkcsRUFBb0IsU0FBVUMsR0FJOUIsSUFGQSxJQUFJQyxFQUFNLEdBQ043RyxFQUFJLEVBQ0M5QixFQUFJLEVBQUdBLEVBQUkwSSxFQUFJOUYsT0FBUTVDLElBQUssQ0FDakMsSUFBSUssRUFBSXFJLEVBQUlFLFdBQVc1SSxHQUNuQkssRUFBSSxJQUNKc0ksRUFBSTdHLEtBQU96QixFQUVOQSxFQUFJLE1BQ1RzSSxFQUFJN0csS0FBUXpCLEdBQUssRUFBSyxJQUN0QnNJLEVBQUk3RyxLQUFZLEdBQUp6QixFQUFVLEtBRUEsUUFBWixNQUFKQSxJQUNOTCxFQUFJLEVBQUkwSSxFQUFJOUYsUUFDeUIsUUFBWixNQUF4QjhGLEVBQUlFLFdBQVc1SSxFQUFJLEtBRXBCSyxFQUFJLFFBQWdCLEtBQUpBLElBQWUsS0FBNkIsS0FBdEJxSSxFQUFJRSxhQUFhNUksSUFDdkQySSxFQUFJN0csS0FBUXpCLEdBQUssR0FBTSxJQUN2QnNJLEVBQUk3RyxLQUFTekIsR0FBSyxHQUFNLEdBQU0sSUFDOUJzSSxFQUFJN0csS0FBU3pCLEdBQUssRUFBSyxHQUFNLElBQzdCc0ksRUFBSTdHLEtBQVksR0FBSnpCLEVBQVUsTUFHdEJzSSxFQUFJN0csS0FBUXpCLEdBQUssR0FBTSxJQUN2QnNJLEVBQUk3RyxLQUFTekIsR0FBSyxFQUFLLEdBQU0sSUFDN0JzSSxFQUFJN0csS0FBWSxHQUFKekIsRUFBVSxLQUc5QixPQUFPc0ksR0EwQ1BFLEVBQVMsQ0FJVEMsZUFBZ0IsS0FJaEJDLGVBQWdCLEtBS2hCQyxzQkFBdUIsS0FLdkJDLHNCQUF1QixLQUt2QkMsa0JBQW1CLGlFQUluQixtQkFDSSxPQUFPM0csS0FBSzJHLGtCQUFvQixPQUtwQywyQkFDSSxPQUFPM0csS0FBSzJHLGtCQUFvQixPQVNwQ0MsbUJBQW9DLG1CQUFUQyxLQVUzQkMsZ0JBQWlCLFNBQVVDLEVBQU9DLEdBQzlCLElBQUtuSCxNQUFNb0gsUUFBUUYsR0FDZixNQUFNZCxNQUFNLGlEQUVoQmpHLEtBQUtrSCxRQUtMLElBSkEsSUFBSUMsRUFBZ0JILEVBQ2RoSCxLQUFLeUcsc0JBQ0x6RyxLQUFLdUcsZUFDUGEsRUFBUyxHQUNKM0osRUFBSSxFQUFHQSxFQUFJc0osRUFBTTFHLE9BQVE1QyxHQUFLLEVBQUcsQ0FDdEMsSUFBSTRKLEVBQVFOLEVBQU10SixHQUNkNkosRUFBWTdKLEVBQUksRUFBSXNKLEVBQU0xRyxPQUMxQmtILEVBQVFELEVBQVlQLEVBQU10SixFQUFJLEdBQUssRUFDbkMrSixFQUFZL0osRUFBSSxFQUFJc0osRUFBTTFHLE9BQzFCb0gsRUFBUUQsRUFBWVQsRUFBTXRKLEVBQUksR0FBSyxFQUNuQ2lLLEVBQVdMLEdBQVMsRUFDcEJNLEdBQXFCLEVBQVJOLElBQWlCLEVBQU1FLEdBQVMsRUFDN0NLLEdBQXFCLEdBQVJMLElBQWlCLEVBQU1FLEdBQVMsRUFDN0NJLEVBQW1CLEdBQVJKLEVBQ1ZELElBQ0RLLEVBQVcsR0FDTlAsSUFDRE0sRUFBVyxLQUduQlIsRUFBTzNELEtBQUswRCxFQUFjTyxHQUFXUCxFQUFjUSxHQUFXUixFQUFjUyxHQUFXVCxFQUFjVSxJQUV6RyxPQUFPVCxFQUFPVSxLQUFLLEtBVXZCQyxhQUFjLFNBQVVoQixFQUFPQyxHQUczQixPQUFJaEgsS0FBSzRHLHFCQUF1QkksRUFDckJnQixLQUFLakIsR0FFVC9HLEtBQUs4RyxnQkFBZ0JaLEVBQWtCYSxHQUFRQyxJQVUxRGlCLGFBQWMsU0FBVWxCLEVBQU9DLEdBRzNCLE9BQUloSCxLQUFLNEcscUJBQXVCSSxFQUNyQkgsS0FBS0UsR0FoSkEsU0FBVW1CLEdBSTlCLElBRkEsSUFBSTlCLEVBQU0sR0FDTitCLEVBQU0sRUFBR3JLLEVBQUksRUFDVnFLLEVBQU1ELEVBQU03SCxRQUFRLENBQ3ZCLElBQUkrSCxFQUFLRixFQUFNQyxLQUNmLEdBQUlDLEVBQUssSUFDTGhDLEVBQUl0SSxLQUFPdUssT0FBT0MsYUFBYUYsUUFFOUIsR0FBSUEsRUFBSyxLQUFPQSxFQUFLLElBQUssQ0FDM0IsSUFBSUcsRUFBS0wsRUFBTUMsS0FDZi9CLEVBQUl0SSxLQUFPdUssT0FBT0MsY0FBb0IsR0FBTEYsSUFBWSxFQUFXLEdBQUxHLFFBRWxELEdBQUlILEVBQUssS0FBT0EsRUFBSyxJQUFLLENBRTNCLElBR0lJLElBQVksRUFBTEosSUFBVyxJQUFhLElBSC9CRyxFQUFLTCxFQUFNQyxRQUcyQixJQUFhLElBRm5ETSxFQUFLUCxFQUFNQyxRQUUrQyxFQUFXLEdBRGhFRCxFQUFNQyxNQUVYLE1BQ0ovQixFQUFJdEksS0FBT3VLLE9BQU9DLGFBQWEsT0FBVUUsR0FBSyxLQUM5Q3BDLEVBQUl0SSxLQUFPdUssT0FBT0MsYUFBYSxPQUFjLEtBQUpFLFFBRXhDLENBQ0dELEVBQUtMLEVBQU1DLEtBQWYsSUFDSU0sRUFBS1AsRUFBTUMsS0FDZi9CLEVBQUl0SSxLQUFPdUssT0FBT0MsY0FBb0IsR0FBTEYsSUFBWSxJQUFhLEdBQUxHLElBQVksRUFBVyxHQUFMRSxJQUcvRSxPQUFPckMsRUFBSTBCLEtBQUssSUFxSExZLENBQWtCMUksS0FBSzJJLHdCQUF3QjVCLEVBQU9DLEtBaUJqRTJCLHdCQUF5QixTQUFVNUIsRUFBT0MsR0FDdENoSCxLQUFLa0gsUUFLTCxJQUpBLElBQUkwQixFQUFnQjVCLEVBQ2RoSCxLQUFLMEcsc0JBQ0wxRyxLQUFLd0csZUFDUFksRUFBUyxHQUNKM0osRUFBSSxFQUFHQSxFQUFJc0osRUFBTTFHLFFBQVMsQ0FDL0IsSUFBSWdILEVBQVF1QixFQUFjN0IsRUFBTThCLE9BQU9wTCxNQUVuQzhKLEVBRFk5SixFQUFJc0osRUFBTTFHLE9BQ0Z1SSxFQUFjN0IsRUFBTThCLE9BQU9wTCxJQUFNLEVBR3JEZ0ssSUFGRmhLLEVBQ2tCc0osRUFBTTFHLE9BQ0Z1SSxFQUFjN0IsRUFBTThCLE9BQU9wTCxJQUFNLEdBR3JEcUwsSUFGRnJMLEVBQ2tCc0osRUFBTTFHLE9BQ0Z1SSxFQUFjN0IsRUFBTThCLE9BQU9wTCxJQUFNLEdBRXpELEtBREVBLEVBQ1csTUFBVDRKLEdBQTBCLE1BQVRFLEdBQTBCLE1BQVRFLEdBQTBCLE1BQVRxQixFQUNuRCxNQUFNN0MsUUFFVixJQUFJeUIsRUFBWUwsR0FBUyxFQUFNRSxHQUFTLEVBRXhDLEdBREFILEVBQU8zRCxLQUFLaUUsR0FDRSxLQUFWRCxFQUFjLENBQ2QsSUFBSUUsRUFBYUosR0FBUyxFQUFLLElBQVNFLEdBQVMsRUFFakQsR0FEQUwsRUFBTzNELEtBQUtrRSxHQUNFLEtBQVZtQixFQUFjLENBQ2QsSUFBSWxCLEVBQWFILEdBQVMsRUFBSyxJQUFRcUIsRUFDdkMxQixFQUFPM0QsS0FBS21FLEtBSXhCLE9BQU9SLEdBT1hGLE1BQU8sV0FDSCxJQUFLbEgsS0FBS3VHLGVBQWdCLENBQ3RCdkcsS0FBS3VHLGVBQWlCLEdBQ3RCdkcsS0FBS3dHLGVBQWlCLEdBQ3RCeEcsS0FBS3lHLHNCQUF3QixHQUM3QnpHLEtBQUswRyxzQkFBd0IsR0FFN0IsSUFBSyxJQUFJakosRUFBSSxFQUFHQSxFQUFJdUMsS0FBSytJLGFBQWExSSxPQUFRNUMsSUFDMUN1QyxLQUFLdUcsZUFBZTlJLEdBQUt1QyxLQUFLK0ksYUFBYUYsT0FBT3BMLEdBQ2xEdUMsS0FBS3dHLGVBQWV4RyxLQUFLdUcsZUFBZTlJLElBQU1BLEVBQzlDdUMsS0FBS3lHLHNCQUFzQmhKLEdBQUt1QyxLQUFLZ0oscUJBQXFCSCxPQUFPcEwsR0FDakV1QyxLQUFLMEcsc0JBQXNCMUcsS0FBS3lHLHNCQUFzQmhKLElBQU1BLEVBRXhEQSxHQUFLdUMsS0FBSzJHLGtCQUFrQnRHLFNBQzVCTCxLQUFLd0csZUFBZXhHLEtBQUtnSixxQkFBcUJILE9BQU9wTCxJQUFNQSxFQUMzRHVDLEtBQUswRyxzQkFBc0IxRyxLQUFLK0ksYUFBYUYsT0FBT3BMLElBQU1BLE1Bc0IxRXdMLEVBQWUsU0FBVTlDLEdBQ3pCLElBQ0ksT0FBT0csRUFBTzJCLGFBQWE5QixHQUFLLEdBRXBDLE1BQU8zRixHQUNIMEksUUFBUXBGLE1BQU0sd0JBQXlCdEQsR0FFM0MsT0FBTzs7Ozs7Ozs7Ozs7Ozs7OztHQXFDWCxTQUFTMkksRUFBV3JJLEVBQVFzSSxHQUN4QixLQUFNQSxhQUFrQmpMLFFBQ3BCLE9BQU9pTCxFQUVYLE9BQVFBLEVBQU9uSixhQUNYLEtBQUtvSixLQUlELE9BQU8sSUFBSUEsS0FES0QsRUFDVUUsV0FDOUIsS0FBS25MLFlBQ2NvTCxJQUFYekksSUFDQUEsRUFBUyxJQUViLE1BQ0osS0FBS2pCLE1BRURpQixFQUFTLEdBQ1QsTUFDSixRQUVJLE9BQU9zSSxFQUVmLElBQUssSUFBSUksS0FBUUosRUFDUkEsRUFBTzlKLGVBQWVrSyxLQUczQjFJLEVBQU8wSSxHQUFRTCxFQUFXckksRUFBTzBJLEdBQU9KLEVBQU9JLEtBRW5ELE9BQU8xSTs7Ozs7Ozs7Ozs7Ozs7OztHQW1CWCxJQUFJMkksRUFBMEIsV0FDMUIsU0FBU0EsSUFDTCxJQUFJQyxFQUFRMUosS0FDWkEsS0FBS2lDLE9BQVMsYUFDZGpDLEtBQUtnQyxRQUFVLGFBQ2ZoQyxLQUFLMkosUUFBVSxJQUFJNUgsU0FBUSxTQUFVQyxFQUFTQyxHQUMxQ3lILEVBQU0xSCxRQUFVQSxFQUNoQjBILEVBQU16SCxPQUFTQSxLQWdDdkIsT0F4QkF3SCxFQUFTcEssVUFBVXVLLGFBQWUsU0FBVUMsR0FDeEMsSUFBSUgsRUFBUTFKLEtBQ1osT0FBTyxTQUFVOEQsRUFBT3BGLEdBQ2hCb0YsRUFDQTRGLEVBQU16SCxPQUFPNkIsR0FHYjRGLEVBQU0xSCxRQUFRdEQsR0FFTSxtQkFBYm1MLElBR1BILEVBQU1DLFFBQVFHLE9BQU0sZUFHSSxJQUFwQkQsRUFBU3hKLE9BQ1R3SixFQUFTL0YsR0FHVCtGLEVBQVMvRixFQUFPcEYsTUFLekIrSyxFQXZDa0I7Ozs7Ozs7Ozs7Ozs7Ozs7R0E4RDdCLFNBQVNNLElBQ0wsTUFBeUIsb0JBQWRDLFdBQzJCLGlCQUEzQkEsVUFBcUIsVUFDckJBLFVBQXFCLFVBR3JCOzs7Ozs7Ozs7Ozs7Ozs7OztBQXNFZixJQUFJQyxFQUFhLGdCQUdiQyxFQUErQixTQUFVQyxHQUV6QyxTQUFTRCxFQUFjRSxFQUFNckUsR0FDekIsSUFBSTJELEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTStGLElBQVkvRixLQVcxQyxPQVZBMEosRUFBTVUsS0FBT0EsRUFDYlYsRUFBTTFMLEtBQU9pTSxFQUdiOUwsT0FBT3dCLGVBQWUrSixFQUFPUSxFQUFjN0ssV0FHdkM0RyxNQUFNb0UsbUJBQ05wRSxNQUFNb0Usa0JBQWtCWCxFQUFPWSxFQUFhakwsVUFBVU4sUUFFbkQySyxFQUVYLE9BZkFsRSxFQUFNMUYsVUFBVW9LLEVBQWVDLEdBZXhCRCxFQWhCdUIsQ0FpQmhDakUsT0FDRXFFLEVBQThCLFdBQzlCLFNBQVNBLEVBQWFDLEVBQVNDLEVBQWFDLEdBQ3hDekssS0FBS3VLLFFBQVVBLEVBQ2Z2SyxLQUFLd0ssWUFBY0EsRUFDbkJ4SyxLQUFLeUssT0FBU0EsRUE0QmxCLE9BMUJBSCxFQUFhakwsVUFBVU4sT0FBUyxTQUFVcUwsR0FFdEMsSUFEQSxJQUFJTSxFQUFPLEdBQ0ZDLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQ0QsRUFBS0MsRUFBSyxHQUFLdkssVUFBVXVLLEdBWTdCLElBVkEsSUFBSUMsRUFBYUYsRUFBSyxJQUFNLEdBQ3hCRyxFQUFXN0ssS0FBS3VLLFFBQVUsSUFBTUgsRUFDaENVLEVBQVc5SyxLQUFLeUssT0FBT0wsR0FDdkJyRSxFQUFVK0UsRUFBV0MsRUFBZ0JELEVBQVVGLEdBQWMsUUFFN0RJLEVBQWNoTCxLQUFLd0ssWUFBYyxLQUFPekUsRUFBVSxLQUFPOEUsRUFBVyxLQUNwRS9HLEVBQVEsSUFBSW9HLEVBQWNXLEVBQVVHLEdBSS9CQyxFQUFLLEVBQUdDLEVBQUsvTSxPQUFPZ04sS0FBS1AsR0FBYUssRUFBS0MsRUFBRzdLLE9BQVE0SyxJQUFNLENBQ2pFLElBQUlqTSxFQUFNa00sRUFBR0QsR0FDUyxNQUFsQmpNLEVBQUlvTSxPQUFPLEtBQ1BwTSxLQUFPOEUsR0FDUG9GLFFBQVFtQyxLQUFLLHlDQUE0Q3JNLEVBQU0sb0NBRW5FOEUsRUFBTTlFLEdBQU80TCxFQUFXNUwsSUFHaEMsT0FBTzhFLEdBRUp3RyxFQWhDc0IsR0FrQ2pDLFNBQVNTLEVBQWdCRCxFQUFVSixHQUMvQixPQUFPSSxFQUFTUSxRQUFRQyxHQUFTLFNBQVV6SSxFQUFHOUQsR0FDMUMsSUFBSU4sRUFBUWdNLEVBQUsxTCxHQUNqQixPQUFnQixNQUFUTixFQUFnQkEsRUFBTThNLFdBQWEsSUFBTXhNLEVBQU0sUUFHOUQsSUFBSXVNLEVBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7R0F3QmQsU0FBU0UsRUFBU3RGLEdBQ2QsT0FBT3VGLEtBQUtDLE1BQU14Rjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQ3RCLElBQUl5RixFQUFTLFNBQVVDLEdBQ25CLElBQUlDLEVBQVMsR0FBSUMsRUFBUyxHQUFJckIsRUFBTyxHQUFJc0IsRUFBWSxHQUNyRCxJQUNJLElBQUlDLEVBQVFKLEVBQU1LLE1BQU0sS0FDeEJKLEVBQVNMLEVBQVN4QyxFQUFhZ0QsRUFBTSxLQUFPLElBQzVDRixFQUFTTixFQUFTeEMsRUFBYWdELEVBQU0sS0FBTyxJQUM1Q0QsRUFBWUMsRUFBTSxHQUNsQnZCLEVBQU9xQixFQUFVLEdBQUssVUFDZkEsRUFBVSxFQUVyQixNQUFPdkwsSUFDUCxNQUFPLENBQ0hzTCxPQUFRQSxFQUNSQyxPQUFRQSxFQUNSckIsS0FBTUEsRUFDTnNCLFVBQVdBOzs7Ozs7Ozs7Ozs7Ozs7OztBQW9ObkIsSUFBSUcsRUFBc0IsV0FDdEIsU0FBU0EsSUFNTG5NLEtBQUtvTSxPQUFTLEdBS2RwTSxLQUFLcU0sS0FBTyxHQU1ack0sS0FBS3NNLEdBQUssR0FLVnRNLEtBQUt1TSxLQUFPLEdBSVp2TSxLQUFLd00sT0FBUyxFQUlkeE0sS0FBS3lNLE9BQVMsRUFDZHpNLEtBQUswTSxVQUFZLEdBQ2pCMU0sS0FBS3VNLEtBQUssR0FBSyxJQUNmLElBQUssSUFBSTlPLEVBQUksRUFBR0EsRUFBSXVDLEtBQUswTSxZQUFhalAsRUFDbEN1QyxLQUFLdU0sS0FBSzlPLEdBQUssRUFFbkJ1QyxLQUFLMk0sUUFrTFQsT0FoTEFSLEVBQUs5TSxVQUFVc04sTUFBUSxXQUNuQjNNLEtBQUtvTSxPQUFPLEdBQUssV0FDakJwTSxLQUFLb00sT0FBTyxHQUFLLFdBQ2pCcE0sS0FBS29NLE9BQU8sR0FBSyxXQUNqQnBNLEtBQUtvTSxPQUFPLEdBQUssVUFDakJwTSxLQUFLb00sT0FBTyxHQUFLLFdBQ2pCcE0sS0FBS3dNLE9BQVMsRUFDZHhNLEtBQUt5TSxPQUFTLEdBUWxCTixFQUFLOU0sVUFBVXVOLFVBQVksU0FBVUMsRUFBS0MsR0FDakNBLElBQ0RBLEVBQVMsR0FFYixJQUFJQyxFQUFJL00sS0FBS3NNLEdBRWIsR0FBbUIsaUJBQVJPLEVBQ1AsSUFBSyxJQUFJcFAsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLElBU3BCc1AsRUFBRXRQLEdBQ0dvUCxFQUFJeEcsV0FBV3lHLElBQVcsR0FDdEJELEVBQUl4RyxXQUFXeUcsRUFBUyxJQUFNLEdBQzlCRCxFQUFJeEcsV0FBV3lHLEVBQVMsSUFBTSxFQUMvQkQsRUFBSXhHLFdBQVd5RyxFQUFTLEdBQ2hDQSxHQUFVLE9BSWQsSUFBU3JQLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNwQnNQLEVBQUV0UCxHQUNHb1AsRUFBSUMsSUFBVyxHQUNYRCxFQUFJQyxFQUFTLElBQU0sR0FDbkJELEVBQUlDLEVBQVMsSUFBTSxFQUNwQkQsRUFBSUMsRUFBUyxHQUNyQkEsR0FBVSxFQUlsQixJQUFTclAsRUFBSSxHQUFJQSxFQUFJLEdBQUlBLElBQUssQ0FDMUIsSUFBSWtCLEVBQUlvTyxFQUFFdFAsRUFBSSxHQUFLc1AsRUFBRXRQLEVBQUksR0FBS3NQLEVBQUV0UCxFQUFJLElBQU1zUCxFQUFFdFAsRUFBSSxJQUNoRHNQLEVBQUV0UCxHQUErQixZQUF4QmtCLEdBQUssRUFBTUEsSUFBTSxJQUU5QixJQUtJZ0UsRUFBR3dCLEVBTEhDLEVBQUlwRSxLQUFLb00sT0FBTyxHQUNoQjFNLEVBQUlNLEtBQUtvTSxPQUFPLEdBQ2hCdE8sRUFBSWtDLEtBQUtvTSxPQUFPLEdBQ2hCck8sRUFBSWlDLEtBQUtvTSxPQUFPLEdBQ2hCNUwsRUFBSVIsS0FBS29NLE9BQU8sR0FHcEIsSUFBUzNPLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUFLLENBQ3JCQSxFQUFJLEdBQ0FBLEVBQUksSUFDSmtGLEVBQUk1RSxFQUFLMkIsR0FBSzVCLEVBQUlDLEdBQ2xCb0csRUFBSSxhQUdKeEIsRUFBSWpELEVBQUk1QixFQUFJQyxFQUNab0csRUFBSSxZQUlKMUcsRUFBSSxJQUNKa0YsRUFBS2pELEVBQUk1QixFQUFNQyxHQUFLMkIsRUFBSTVCLEdBQ3hCcUcsRUFBSSxhQUdKeEIsRUFBSWpELEVBQUk1QixFQUFJQyxFQUNab0csRUFBSSxZQUdSeEYsR0FBT3lGLEdBQUssRUFBTUEsSUFBTSxJQUFPekIsRUFBSW5DLEVBQUkyRCxFQUFJNEksRUFBRXRQLEdBQU0sV0FDdkQrQyxFQUFJekMsRUFDSkEsRUFBSUQsRUFDSkEsRUFBOEIsWUFBeEI0QixHQUFLLEdBQU9BLElBQU0sR0FDeEJBLEVBQUkwRSxFQUNKQSxFQUFJekYsRUFFUnFCLEtBQUtvTSxPQUFPLEdBQU1wTSxLQUFLb00sT0FBTyxHQUFLaEksRUFBSyxXQUN4Q3BFLEtBQUtvTSxPQUFPLEdBQU1wTSxLQUFLb00sT0FBTyxHQUFLMU0sRUFBSyxXQUN4Q00sS0FBS29NLE9BQU8sR0FBTXBNLEtBQUtvTSxPQUFPLEdBQUt0TyxFQUFLLFdBQ3hDa0MsS0FBS29NLE9BQU8sR0FBTXBNLEtBQUtvTSxPQUFPLEdBQUtyTyxFQUFLLFdBQ3hDaUMsS0FBS29NLE9BQU8sR0FBTXBNLEtBQUtvTSxPQUFPLEdBQUs1TCxFQUFLLFlBRTVDMkwsRUFBSzlNLFVBQVUyTixPQUFTLFNBQVU5RSxFQUFPN0gsR0FFckMsR0FBYSxNQUFUNkgsRUFBSixNQUdlcUIsSUFBWGxKLElBQ0FBLEVBQVM2SCxFQUFNN0gsUUFRbkIsSUFOQSxJQUFJNE0sRUFBbUI1TSxFQUFTTCxLQUFLME0sVUFDakN4TixFQUFJLEVBRUoyTixFQUFNN00sS0FBS3FNLEtBQ1hhLEVBQVFsTixLQUFLd00sT0FFVnROLEVBQUltQixHQUFRLENBS2YsR0FBYyxJQUFWNk0sRUFDQSxLQUFPaE8sR0FBSytOLEdBQ1JqTixLQUFLNE0sVUFBVTFFLEVBQU9oSixHQUN0QkEsR0FBS2MsS0FBSzBNLFVBR2xCLEdBQXFCLGlCQUFWeEUsR0FDUCxLQUFPaEosRUFBSW1CLEdBSVAsR0FIQXdNLEVBQUlLLEdBQVNoRixFQUFNN0IsV0FBV25ILEtBRTVCQSxJQURBZ08sSUFFWWxOLEtBQUswTSxVQUFXLENBQzFCMU0sS0FBSzRNLFVBQVVDLEdBQ2ZLLEVBQVEsRUFFUixZQUtSLEtBQU9oTyxFQUFJbUIsR0FJUCxHQUhBd00sRUFBSUssR0FBU2hGLEVBQU1oSixLQUVqQkEsSUFEQWdPLElBRVlsTixLQUFLME0sVUFBVyxDQUMxQjFNLEtBQUs0TSxVQUFVQyxHQUNmSyxFQUFRLEVBRVIsT0FLaEJsTixLQUFLd00sT0FBU1UsRUFDZGxOLEtBQUt5TSxRQUFVcE0sSUFHbkI4TCxFQUFLOU0sVUFBVThOLE9BQVMsV0FDcEIsSUFBSUEsRUFBUyxHQUNUQyxFQUEwQixFQUFkcE4sS0FBS3lNLE9BRWpCek0sS0FBS3dNLE9BQVMsR0FDZHhNLEtBQUtnTixPQUFPaE4sS0FBS3VNLEtBQU0sR0FBS3ZNLEtBQUt3TSxRQUdqQ3hNLEtBQUtnTixPQUFPaE4sS0FBS3VNLEtBQU12TSxLQUFLME0sV0FBYTFNLEtBQUt3TSxPQUFTLEtBRzNELElBQUssSUFBSS9PLEVBQUl1QyxLQUFLME0sVUFBWSxFQUFHalAsR0FBSyxHQUFJQSxJQUN0Q3VDLEtBQUtxTSxLQUFLNU8sR0FBaUIsSUFBWjJQLEVBQ2ZBLEdBQWEsSUFFakJwTixLQUFLNE0sVUFBVTVNLEtBQUtxTSxNQUNwQixJQUFJbk4sRUFBSSxFQUNSLElBQVN6QixFQUFJLEVBQUdBLEVBQUksRUFBR0EsSUFDbkIsSUFBSyxJQUFJNEcsRUFBSSxHQUFJQSxHQUFLLEVBQUdBLEdBQUssRUFDMUI4SSxFQUFPak8sR0FBTWMsS0FBS29NLE9BQU8zTyxJQUFNNEcsRUFBSyxNQUNsQ25GLEVBR1YsT0FBT2lPLEdBRUpoQixFQXZOYyxHQTBPekIsSUFBSWtCLEVBQStCLFdBTS9CLFNBQVNBLEVBQWNDLEVBQVVDLEdBQzdCLElBQUk3RCxFQUFRMUosS0FDWkEsS0FBS3dOLFVBQVksR0FDakJ4TixLQUFLeU4sYUFBZSxHQUNwQnpOLEtBQUswTixjQUFnQixFQUVyQjFOLEtBQUsyTixLQUFPNUwsUUFBUUMsVUFDcEJoQyxLQUFLNE4sV0FBWSxFQUNqQjVOLEtBQUt1TixjQUFnQkEsRUFJckJ2TixLQUFLMk4sS0FDQW5MLE1BQUssV0FDTjhLLEVBQVM1RCxNQUVSSSxPQUFNLFNBQVV0SixHQUNqQmtKLEVBQU01RixNQUFNdEQsTUFnSnBCLE9BN0lBNk0sRUFBY2hPLFVBQVUrQyxLQUFPLFNBQVUxRCxHQUNyQ3NCLEtBQUs2TixpQkFBZ0IsU0FBVUMsR0FDM0JBLEVBQVMxTCxLQUFLMUQsT0FHdEIyTyxFQUFjaE8sVUFBVXlFLE1BQVEsU0FBVUEsR0FDdEM5RCxLQUFLNk4saUJBQWdCLFNBQVVDLEdBQzNCQSxFQUFTaEssTUFBTUEsTUFFbkI5RCxLQUFLK04sTUFBTWpLLElBRWZ1SixFQUFjaE8sVUFBVTJPLFNBQVcsV0FDL0JoTyxLQUFLNk4saUJBQWdCLFNBQVVDLEdBQzNCQSxFQUFTRSxjQUViaE8sS0FBSytOLFNBUVRWLEVBQWNoTyxVQUFVNE8sVUFBWSxTQUFVQyxFQUFnQnBLLEVBQU9rSyxHQUNqRSxJQUNJRixFQURBcEUsRUFBUTFKLEtBRVosUUFBdUJ1SixJQUFuQjJFLFFBQ1UzRSxJQUFWekYsUUFDYXlGLElBQWJ5RSxFQUNBLE1BQU0sSUFBSS9ILE1BQU0sMEJBaUJFc0QsS0FObEJ1RSxFQTRIWixTQUE4QkssRUFBS0MsR0FDL0IsR0FBbUIsaUJBQVJELEdBQTRCLE9BQVJBLEVBQzNCLE9BQU8sRUFFWCxJQUFLLElBQUl4RCxFQUFLLEVBQUcwRCxFQUFZRCxFQUFTekQsRUFBSzBELEVBQVVoTyxPQUFRc0ssSUFBTSxDQUMvRCxJQUFJMkQsRUFBU0QsRUFBVTFELEdBQ3ZCLEdBQUkyRCxLQUFVSCxHQUE4QixtQkFBaEJBLEVBQUlHLEdBQzVCLE9BQU8sRUFHZixPQUFPLEVBOUlDQyxDQUFxQkwsRUFBZ0IsQ0FDckMsT0FDQSxRQUNBLGFBRVdBLEVBR0EsQ0FDUDlMLEtBQU04TCxFQUNOcEssTUFBT0EsRUFDUGtLLFNBQVVBLElBR0w1TCxPQUNUMEwsRUFBUzFMLEtBQU9vTSxRQUVHakYsSUFBbkJ1RSxFQUFTaEssUUFDVGdLLEVBQVNoSyxNQUFRMEssUUFFS2pGLElBQXRCdUUsRUFBU0UsV0FDVEYsRUFBU0UsU0FBV1EsR0FFeEIsSUFBSUMsRUFBUXpPLEtBQUswTyxlQUFlelAsS0FBS2UsS0FBTUEsS0FBS3dOLFVBQVVuTixRQXNCMUQsT0FsQklMLEtBQUs0TixXQUVMNU4sS0FBSzJOLEtBQUtuTCxNQUFLLFdBQ1gsSUFDUWtILEVBQU1pRixXQUNOYixFQUFTaEssTUFBTTRGLEVBQU1pRixZQUdyQmIsRUFBU0UsV0FHakIsTUFBT3hOLFFBTWZSLEtBQUt3TixVQUFVL0osS0FBS3FLLEdBQ2JXLEdBSVhwQixFQUFjaE8sVUFBVXFQLGVBQWlCLFNBQVVqUixRQUN4QjhMLElBQW5CdkosS0FBS3dOLGdCQUFpRGpFLElBQXRCdkosS0FBS3dOLFVBQVUvUCxZQUc1Q3VDLEtBQUt3TixVQUFVL1AsR0FDdEJ1QyxLQUFLME4sZUFBaUIsRUFDSyxJQUF2QjFOLEtBQUswTixvQkFBOENuRSxJQUF2QnZKLEtBQUt1TixlQUNqQ3ZOLEtBQUt1TixjQUFjdk4sUUFHM0JxTixFQUFjaE8sVUFBVXdPLGdCQUFrQixTQUFVZSxHQUNoRCxJQUFJNU8sS0FBSzROLFVBTVQsSUFBSyxJQUFJblEsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS3dOLFVBQVVuTixPQUFRNUMsSUFDdkN1QyxLQUFLNk8sUUFBUXBSLEVBQUdtUixJQU14QnZCLEVBQWNoTyxVQUFVd1AsUUFBVSxTQUFVcFIsRUFBR21SLEdBQzNDLElBQUlsRixFQUFRMUosS0FHWkEsS0FBSzJOLEtBQUtuTCxNQUFLLFdBQ1gsUUFBd0IrRyxJQUFwQkcsRUFBTThELGdCQUFrRGpFLElBQXZCRyxFQUFNOEQsVUFBVS9QLEdBQ2pELElBQ0ltUixFQUFHbEYsRUFBTThELFVBQVUvUCxJQUV2QixNQUFPK0MsR0FJb0Isb0JBQVowSSxTQUEyQkEsUUFBUXBGLE9BQzFDb0YsUUFBUXBGLE1BQU10RCxRQU1sQzZNLEVBQWNoTyxVQUFVME8sTUFBUSxTQUFVZSxHQUN0QyxJQUFJcEYsRUFBUTFKLEtBQ1JBLEtBQUs0TixZQUdUNU4sS0FBSzROLFdBQVksT0FDTHJFLElBQVJ1RixJQUNBOU8sS0FBSzJPLFdBQWFHLEdBSXRCOU8sS0FBSzJOLEtBQUtuTCxNQUFLLFdBQ1hrSCxFQUFNOEQsZUFBWWpFLEVBQ2xCRyxFQUFNNkQsbUJBQWdCaEUsT0FHdkI4RCxFQXZLdUIsR0EwTWxDLFNBQVNtQjs7Ozs7Ozs7Ozs7Ozs7OztHQXdEVCxTQUFTTyxFQUFZQyxFQUFRQyxFQUFnQkMsR0FDekMsSUFBSUMsRUFBVSxHQUNkLE9BQVFGLEdBQ0osS0FBSyxFQUNERSxFQUFVRCxFQUFXLFFBQVUsUUFDL0IsTUFDSixLQUFLLEVBQ0RDLEVBQVVELEVBQVcsU0FBVyxTQUNoQyxNQUNKLEtBQUssRUFDREMsRUFBVUQsRUFBVyxRQUFVLFFBQy9CLE1BQ0osS0FBSyxFQUNEQyxFQUFVRCxFQUFXLFNBQVcsU0FDaEMsTUFDSixRQUNJLE1BQU0sSUFBSWpKLE1BQU0sbUVBRXhCLElBQUluQyxFQUFRa0wsRUFBUyxZQUVyQixPQURBbEwsR0FBU3FMLEVBQVUsYUFnSXZCNVIsRUFBUWtJLFVBQVlBLEVBQ3BCbEksRUFBUWtNLFNBQVdBLEVBQ25CbE0sRUFBUStNLGFBQWVBLEVBQ3ZCL00sRUFBUTJNLGNBQWdCQSxFQUN4QjNNLEVBQVE0TyxLQUFPQSxFQUNmNU8sRUFBUXNJLE9BQVNBLEVBQ2pCdEksRUFBUXlJLGVBQWlCQSxFQUN6QnpJLEVBQVE2UixNQWxQUixTQUFlUixFQUFJUyxHQUNmLE9BQU8sV0FFSCxJQURBLElBQUlDLEVBQU8sR0FDRjNFLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQzJFLEVBQUszRSxHQUFNdkssVUFBVXVLLEdBRXpCNUksUUFBUUMsU0FBUSxHQUNYUSxNQUFLLFdBQ05vTSxFQUFHdE8sV0FBTSxFQUFRZ1AsTUFFaEJ4RixPQUFNLFNBQVVoRyxHQUNidUwsR0FDQUEsRUFBUXZMLFFBdU94QnZHLEVBQVErSSxPQUFTQSxFQUNqQi9JLEVBQVEwTCxhQUFlQSxFQUN2QjFMLEVBQVFnUyxhQXZ0Q1csU0FBVXBKLEdBQ3pCLElBQUlxSixFQUFZdEosRUFBa0JDLEdBQ2xDLE9BQU9HLEVBQU9RLGdCQUFnQjBJLEdBQVcsSUFzdEM3Q2pTLEVBQVFrUzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFyd0JSLFNBQWtCdEIsRUFBS25QLEdBQ25CLE9BQU9iLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VRLEVBQUtuUCxJQXF3QnJEekIsRUFBUW1TLGdCQXphUixTQUF5QnBDLEVBQVVDLEdBQy9CLElBQUlvQyxFQUFRLElBQUl0QyxFQUFjQyxFQUFVQyxHQUN4QyxPQUFPb0MsRUFBTTFCLFVBQVVoUCxLQUFLMFEsSUF3YWhDcFMsRUFBUXFPLE9BQVNBLEVBQ2pCck8sRUFBUXFTOzs7Ozs7Ozs7Ozs7Ozs7OztBQWpyQ1IsU0FBa0JsUixHQUNkLE9BQU95SyxPQUFXSSxFQUFXN0ssSUFpckNqQ25CLEVBQVE0TCxXQUFhQSxFQUNyQjVMLEVBQVF3UixZQUFjQSxFQUN0QnhSLEVBQVF3TSxNQUFRQSxFQUNoQnhNLEVBQVFzUyxRQWp5Qk0sU0FBVWhFLEdBQ3BCLElBQUlFLEVBQVNILEVBQU9DLEdBQU9FLE9BQzNCLE1BQXlCLGlCQUFYQSxJQUEyQyxJQUFwQkEsRUFBYyxPQWd5QnZEeE8sRUFBUXVTLFVBamhDUixXQUNJLE1BQXVCLGlCQUFUQyxNQUFxQkEsS0FBS0EsT0FBU0EsTUFpaENyRHhTLEVBQVF5UyxRQW53QlIsU0FBaUI3QixHQUNiLElBQUssSUFBSW5QLEtBQU9tUCxFQUNaLEdBQUloUSxPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1USxFQUFLblAsR0FDMUMsT0FBTyxFQUdmLE9BQU8sR0E4dkJYekIsRUFBUTBTLGdCQTNpQ1IsV0FDSSxNQUEwQixvQkFBWEMsV0FHUkEsT0FBZ0IsU0FBS0EsT0FBaUIsVUFBS0EsT0FBaUIsV0FDL0Qsb0RBQW9EQyxLQUFLcEcsTUF1aUNqRXhNLEVBQVE2UyxPQS9oQ1IsV0FDSSxJQUNJLE1BQTJELHFCQUFuRGpTLE9BQU9rQixVQUFVbU0sU0FBUzVOLEtBQUt5UyxFQUFPQyxTQUVsRCxNQUFPOVAsR0FDSCxPQUFPLElBMmhDZmpELEVBQVFnVCxVQXJnQ1IsV0FDSSxPQUFpQyxJQUExQjlLLEVBQVVDLGNBQWlELElBQXpCRCxFQUFVRSxZQXFnQ3ZEcEksRUFBUWlULGNBOWdDUixXQUNJLE1BQTZCLGlCQUFkeEcsV0FBbUQsZ0JBQXpCQSxVQUFtQixTQThnQ2hFek0sRUFBUWtULGNBbnpCWSxTQUFVNUUsR0FDMUIsSUFBNkJFLEVBQWZILEVBQU9DLEdBQXlCRSxPQUM5QyxRQUFTQSxHQUE0QixpQkFBWEEsR0FBdUJBLEVBQU96TSxlQUFlLFFBa3pCM0UvQixFQUFRbVQsaUJBbDJCZSxTQUFVN0UsR0FDN0IsSUFBSUUsRUFBU0gsRUFBT0MsR0FBT0UsT0FDdkI0RSxFQUFNQyxLQUFLQyxPQUFNLElBQUl4SCxNQUFPQyxVQUFZLEtBQ3hDd0gsRUFBYSxFQUFHQyxFQUFhLEVBZ0JqQyxNQWZzQixpQkFBWGhGLElBQ0hBLEVBQU96TSxlQUFlLE9BQ3RCd1IsRUFBYS9FLEVBQVksSUFFcEJBLEVBQU96TSxlQUFlLFNBQzNCd1IsRUFBYS9FLEVBQVksS0FHekJnRixFQURBaEYsRUFBT3pNLGVBQWUsT0FDVHlNLEVBQVksSUFJWitFLEVBQWEsU0FHeEJILEtBQ0pHLEtBQ0FDLEdBQ0ZKLEdBQU9HLEdBQ1BILEdBQU9JLEdBNDBCZnhULEVBQVF5VCxhQW4wQlcsU0FBVW5GLEdBQ3pCLElBQUlFLEVBQVNILEVBQU9DLEdBQU9FLE9BQzNCLE1BQXNCLGlCQUFYQSxHQUF1QkEsRUFBT3pNLGVBQWUsT0FDN0N5TSxFQUFZLElBRWhCLE1BK3pCWHhPLEVBQVFrTyxTQUFXQSxFQUNuQmxPLEVBQVEwVCxJQXB3QlIsU0FBYTlDLEVBQUtTLEVBQUlzQyxHQUNsQixJQUFJQyxFQUFNLEdBQ1YsSUFBSyxJQUFJblMsS0FBT21QLEVBQ1JoUSxPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1USxFQUFLblAsS0FDMUNtUyxFQUFJblMsR0FBTzRQLEVBQUdoUixLQUFLc1QsRUFBWS9DLEVBQUluUCxHQUFNQSxFQUFLbVAsSUFHdEQsT0FBT2dEOzs7Ozs7Ozs7Ozs7Ozs7O0lBOHZCWDVULEVBQVE2VCxZQXR1QlIsU0FBcUJDLEdBWWpCLElBWEEsSUFBSUMsRUFBUyxHQUNUQyxFQUFVLFNBQVV2UyxFQUFLTixHQUNyQm1CLE1BQU1vSCxRQUFRdkksR0FDZEEsRUFBTThTLFNBQVEsU0FBVUMsR0FDcEJILEVBQU83TixLQUFLaU8sbUJBQW1CMVMsR0FBTyxJQUFNMFMsbUJBQW1CRCxPQUluRUgsRUFBTzdOLEtBQUtpTyxtQkFBbUIxUyxHQUFPLElBQU0wUyxtQkFBbUJoVCxLQUc5RGlNLEVBQUssRUFBR00sRUFBSzlNLE9BQU93VCxRQUFRTixHQUFvQjFHLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUMzRSxJQUFJTyxFQUFLRCxFQUFHTixHQUNaNEcsRUFEdUJyRyxFQUFHLEdBQVlBLEVBQUcsSUFHN0MsT0FBT29HLEVBQU9qUixPQUFTLElBQU1pUixFQUFPeEosS0FBSyxLQUFPLElBdXRCcER2SyxFQUFRcVUsa0JBanRCUixTQUEyQlIsR0FDdkIsSUFBSWpELEVBQU0sR0FRVixPQVBhaUQsRUFBWTlGLFFBQVEsTUFBTyxJQUFJWSxNQUFNLEtBQzNDc0YsU0FBUSxTQUFVM0YsR0FDckIsR0FBSUEsRUFBTyxDQUNQLElBQUk3TSxFQUFNNk0sRUFBTUssTUFBTSxLQUN0QmlDLEVBQUluUCxFQUFJLElBQU1BLEVBQUksT0FHbkJtUCxHQXlzQlg1USxFQUFRc1UsUUF2eEJSLFNBQWlCMUQsRUFBS25QLEdBQ2xCLE9BQUliLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VRLEVBQUtuUCxHQUNuQ21QLEVBQUluUCxRQUdYLEdBbXhCUnpCLEVBQVF1VSxhQXZEVyxTQUFVM0wsR0FFekIsSUFEQSxJQUFJNUcsRUFBSSxFQUNDOUIsRUFBSSxFQUFHQSxFQUFJMEksRUFBSTlGLE9BQVE1QyxJQUFLLENBQ2pDLElBQUlLLEVBQUlxSSxFQUFJRSxXQUFXNUksR0FDbkJLLEVBQUksSUFDSnlCLElBRUt6QixFQUFJLEtBQ1R5QixHQUFLLEVBRUF6QixHQUFLLE9BQVVBLEdBQUssT0FFekJ5QixHQUFLLEVBQ0w5QixLQUdBOEIsR0FBSyxFQUdiLE9BQU9BLEdBcUNYaEMsRUFBUTJJLGtCQS9Ga0IsU0FBVUMsR0FHaEMsSUFGQSxJQUFJQyxFQUFNLEdBQ043RyxFQUFJLEVBQ0M5QixFQUFJLEVBQUdBLEVBQUkwSSxFQUFJOUYsT0FBUTVDLElBQUssQ0FDakMsSUFBSUssRUFBSXFJLEVBQUlFLFdBQVc1SSxHQUV2QixHQUFJSyxHQUFLLE9BQVVBLEdBQUssTUFBUSxDQUM1QixJQUFJaVUsRUFBT2pVLEVBQUksTUFDZkwsSUFDQW9JLEVBQU9wSSxFQUFJMEksRUFBSTlGLE9BQVEsMkNBRXZCdkMsRUFBSSxPQUFXaVUsR0FBUSxLQURiNUwsRUFBSUUsV0FBVzVJLEdBQUssT0FHOUJLLEVBQUksSUFDSnNJLEVBQUk3RyxLQUFPekIsRUFFTkEsRUFBSSxNQUNUc0ksRUFBSTdHLEtBQVF6QixHQUFLLEVBQUssSUFDdEJzSSxFQUFJN0csS0FBWSxHQUFKekIsRUFBVSxLQUVqQkEsRUFBSSxPQUNUc0ksRUFBSTdHLEtBQVF6QixHQUFLLEdBQU0sSUFDdkJzSSxFQUFJN0csS0FBU3pCLEdBQUssRUFBSyxHQUFNLElBQzdCc0ksRUFBSTdHLEtBQVksR0FBSnpCLEVBQVUsTUFHdEJzSSxFQUFJN0csS0FBUXpCLEdBQUssR0FBTSxJQUN2QnNJLEVBQUk3RyxLQUFTekIsR0FBSyxHQUFNLEdBQU0sSUFDOUJzSSxFQUFJN0csS0FBU3pCLEdBQUssRUFBSyxHQUFNLElBQzdCc0ksRUFBSTdHLEtBQVksR0FBSnpCLEVBQVUsS0FHOUIsT0FBT3NJLEdBZ0VYN0ksRUFBUXlVLFVBaDZCUixTQUFtQnRILEdBQ2YsT0FBT2dCLEtBQUtzRyxVQUFVdEgsSUFnNkIxQm5OLEVBQVEwVSxpQkFsTmUsU0FBVWpELEVBQVFrRCxFQUFVQyxFQUFVQyxHQUN6RCxJQUFJQyxFQU9KLEdBTklELEVBQVdGLEVBQ1hHLEVBQVcsWUFBY0gsRUFFcEJFLEVBQVdELElBQ2hCRSxFQUF3QixJQUFiRixFQUFpQixPQUFTLGdCQUFrQkEsR0FFdkRFLEVBUUEsTUFBTSxJQUFJcE0sTUFQRStJLEVBQ1IsNEJBQ0FvRCxHQUNjLElBQWJBLEVBQWlCLGFBQWUsZUFDakMsWUFDQUMsRUFDQSxNQW9NWjlVLEVBQVErVSxpQkFsSlIsU0FBMEJ0RCxFQUFRQyxFQUFnQnBGLEVBQVVxRixHQUN4RCxLQUFJQSxHQUFhckYsSUFHTyxtQkFBYkEsRUFDUCxNQUFNLElBQUk1RCxNQUFNOEksRUFBWUMsRUFBUUMsRUFBZ0JDLEdBQ2hELDhCQTZJWjNSLEVBQVFnVixzQkExSVIsU0FBK0J2RCxFQUFRQyxFQUFnQnVELEVBQVN0RCxHQUM1RCxLQUFJQSxHQUFhc0QsS0FHTSxpQkFBWkEsR0FBb0MsT0FBWkEsR0FDL0IsTUFBTSxJQUFJdk0sTUFBTThJLEVBQVlDLEVBQVFDLEVBQWdCQyxHQUNoRDs7Ozs7Ozs7Ozs7Ozs7OztJQXFJWjNSLEVBQVFrVixrQkE5SlIsU0FBMkJ6RCxFQUFRQyxFQUFnQnlELEVBQVd4RCxHQUMxRCxLQUFJQSxHQUFhd0QsSUFHUSxpQkFBZEEsRUFFUCxNQUFNLElBQUl6TSxNQUFNOEksRUFBWUMsRUFBUUMsRUFBZ0JDLEdBQ2hELDBDLDhDQzM3Q1ovUSxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sSUFFdEQsSUFBSThHLEVBQVEsRUFBUSxHQUNoQm1OLEVBQU8sRUFBUSxHQUtmQyxFQUEyQixXQU8zQixTQUFTQSxFQUFVNVUsRUFBTTZVLEVBQWlCQyxHQUN0QzlTLEtBQUtoQyxLQUFPQSxFQUNaZ0MsS0FBSzZTLGdCQUFrQkEsRUFDdkI3UyxLQUFLOFMsS0FBT0EsRUFDWjlTLEtBQUsrUyxtQkFBb0IsRUFJekIvUyxLQUFLZ1QsYUFBZSxHQUNwQmhULEtBQUtpVCxrQkFBb0IsT0FjN0IsT0FaQUwsRUFBVXZULFVBQVU2VCxxQkFBdUIsU0FBVXRVLEdBRWpELE9BREFvQixLQUFLaVQsa0JBQW9CclUsRUFDbEJvQixNQUVYNFMsRUFBVXZULFVBQVU4VCxxQkFBdUIsU0FBVUosR0FFakQsT0FEQS9TLEtBQUsrUyxrQkFBb0JBLEVBQ2xCL1MsTUFFWDRTLEVBQVV2VCxVQUFVK1QsZ0JBQWtCLFNBQVVDLEdBRTVDLE9BREFyVCxLQUFLZ1QsYUFBZUssRUFDYnJULE1BRUo0UyxFQTlCbUIsR0FpRDFCVSxFQUFxQixZQXNCckJDLEVBQTBCLFdBQzFCLFNBQVNBLEVBQVN2VixFQUFNd1YsR0FDcEJ4VCxLQUFLaEMsS0FBT0EsRUFDWmdDLEtBQUt3VCxVQUFZQSxFQUNqQnhULEtBQUt5VCxVQUFZLEtBQ2pCelQsS0FBSzBULFVBQVksSUFBSUMsSUFDckIzVCxLQUFLNFQsa0JBQW9CLElBQUlELElBZ0pqQyxPQTFJQUosRUFBU2xVLFVBQVVmLElBQU0sU0FBVXVWLFFBQ1osSUFBZkEsSUFBeUJBLEVBQWFQLEdBRTFDLElBQUlRLEVBQXVCOVQsS0FBSytULDRCQUE0QkYsR0FDNUQsSUFBSzdULEtBQUs0VCxrQkFBa0JJLElBQUlGLEdBQXVCLENBQ25ELElBQUlHLEVBQVcsSUFBSXRCLEVBQUtsSixTQUN4QnpKLEtBQUs0VCxrQkFBa0JNLElBQUlKLEVBQXNCRyxHQUVqRCxJQUNJLElBQUlFLEVBQVduVSxLQUFLb1UsdUJBQXVCTixHQUN2Q0ssR0FDQUYsRUFBU2pTLFFBQVFtUyxHQUd6QixNQUFPM1QsS0FLWCxPQUFPUixLQUFLNFQsa0JBQWtCdFYsSUFBSXdWLEdBQXNCbkssU0FFNUQ0SixFQUFTbFUsVUFBVWdWLGFBQWUsU0FBVUMsR0FDeEMsSUFBSXJKLEVBQUt6RixFQUFNdEYsU0FBUyxDQUFFMlQsV0FBWVAsRUFBb0JwRSxVQUFVLEdBQVNvRixHQUFVVCxFQUFhNUksRUFBRzRJLFdBQVkzRSxFQUFXakUsRUFBR2lFLFNBRTdINEUsRUFBdUI5VCxLQUFLK1QsNEJBQTRCRixHQUM1RCxJQUNJLElBQUlNLEVBQVduVSxLQUFLb1UsdUJBQXVCTixHQUMzQyxJQUFLSyxFQUFVLENBQ1gsR0FBSWpGLEVBQ0EsT0FBTyxLQUVYLE1BQU1qSixNQUFNLFdBQWFqRyxLQUFLaEMsS0FBTyxxQkFFekMsT0FBT21XLEVBRVgsTUFBTzNULEdBQ0gsR0FBSTBPLEVBQ0EsT0FBTyxLQUdQLE1BQU0xTyxJQUlsQitTLEVBQVNsVSxVQUFVa1YsYUFBZSxXQUM5QixPQUFPdlUsS0FBS3lULFdBRWhCRixFQUFTbFUsVUFBVW1WLGFBQWUsU0FBVWYsR0FDeEMsSUFBSWdCLEVBQUt4SixFQUNULEdBQUl3SSxFQUFVelYsT0FBU2dDLEtBQUtoQyxLQUN4QixNQUFNaUksTUFBTSx5QkFBMkJ3TixFQUFVelYsS0FBTyxpQkFBbUJnQyxLQUFLaEMsS0FBTyxLQUUzRixHQUFJZ0MsS0FBS3lULFVBQ0wsTUFBTXhOLE1BQU0saUJBQW1CakcsS0FBS2hDLEtBQU8sOEJBSS9DLEdBRkFnQyxLQUFLeVQsVUFBWUEsRUF5RnpCLFNBQTBCQSxHQUN0QixNQUF1QyxVQUFoQ0EsRUFBVVI7Ozs7Ozs7Ozs7Ozs7Ozs7R0F4RlR5QixDQUFpQmpCLEdBQ2pCLElBQ0l6VCxLQUFLb1UsdUJBQXVCZCxHQUVoQyxNQUFPOVMsSUFPWCxJQUlJLElBQUssSUFBSTBLLEVBQUsxRixFQUFNN0IsU0FBUzNELEtBQUs0VCxrQkFBa0JqQyxXQUFZZ0QsRUFBS3pKLEVBQUc5SSxRQUFTdVMsRUFBR3BTLEtBQU1vUyxFQUFLekosRUFBRzlJLE9BQVEsQ0FDdEcsSUFBSXdTLEVBQUtwUCxFQUFNNUIsT0FBTytRLEVBQUdqVyxNQUFPLEdBQUltVyxFQUFxQkQsRUFBRyxHQUFJRSxFQUFtQkYsRUFBRyxHQUNsRmQsRUFBdUI5VCxLQUFLK1QsNEJBQTRCYyxHQUM1RCxJQUVJLElBQUlWLEVBQVduVSxLQUFLb1UsdUJBQXVCTixHQUMzQ2dCLEVBQWlCOVMsUUFBUW1TLEdBRTdCLE1BQU8zVCxNQU1mLE1BQU91VSxHQUFTTixFQUFNLENBQUUzUSxNQUFPaVIsR0FDL0IsUUFDSSxJQUNRSixJQUFPQSxFQUFHcFMsT0FBUzBJLEVBQUtDLEVBQUc4SixTQUFTL0osRUFBR3JOLEtBQUtzTixHQUVwRCxRQUFVLEdBQUl1SixFQUFLLE1BQU1BLEVBQUkzUSxTQUdyQ3lQLEVBQVNsVSxVQUFVNFYsY0FBZ0IsU0FBVXBCLFFBQ3RCLElBQWZBLElBQXlCQSxFQUFhUCxHQUMxQ3RULEtBQUs0VCxrQkFBa0JzQixPQUFPckIsR0FDOUI3VCxLQUFLMFQsVUFBVXdCLE9BQU9yQixJQUkxQk4sRUFBU2xVLFVBQVU2VixPQUFTLFdBQ3hCLE9BQU8xUCxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUltVixFQUNKLE9BQU8zUCxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBb1MsRUFBV3RWLE1BQU11VixLQUFLcFYsS0FBSzBULFVBQVUyQixVQUM5QixDQUFDLEVBQWF0VCxRQUFRdVQsSUFBSUgsRUFDeEJJLFFBQU8sU0FBVWhMLEdBQVcsTUFBTyxhQUFjQSxLQUVqRDBHLEtBQUksU0FBVTFHLEdBQVcsT0FBT0EsRUFBUWlMLFNBQVNOLGNBQzlELEtBQUssRUFFRCxPQURBakssRUFBR2pJLE9BQ0ksQ0FBQyxXQUs1QnVRLEVBQVNsVSxVQUFVb1csZUFBaUIsV0FDaEMsT0FBeUIsTUFBbEJ6VixLQUFLeVQsV0FFaEJGLEVBQVNsVSxVQUFVK1UsdUJBQXlCLFNBQVVQLEdBQ2xELElBQUlNLEVBQVduVSxLQUFLMFQsVUFBVXBWLElBQUl1VixHQUtsQyxPQUpLTSxHQUFZblUsS0FBS3lULFlBQ2xCVSxFQUFXblUsS0FBS3lULFVBQVVaLGdCQUFnQjdTLEtBQUt3VCxVQWdCM0QsU0FBdUNLLEdBQ25DLE9BQU9BLElBQWVQLE9BQXFCL0osRUFBWXNLLEVBakJXNkIsQ0FBOEI3QixJQUN4RjdULEtBQUswVCxVQUFVUSxJQUFJTCxFQUFZTSxJQUU1QkEsR0FBWSxNQUV2QlosRUFBU2xVLFVBQVUwVSw0QkFBOEIsU0FBVUYsR0FDdkQsT0FBSTdULEtBQUt5VCxVQUNFelQsS0FBS3lULFVBQVVWLGtCQUFvQmMsRUFBYVAsRUFHaERPLEdBR1JOLEVBdEprQixHQW1MN0IsSUFBSW9DLEVBQW9DLFdBQ3BDLFNBQVNBLEVBQW1CM1gsR0FDeEJnQyxLQUFLaEMsS0FBT0EsRUFDWmdDLEtBQUs0VixVQUFZLElBQUlqQyxJQTZDekIsT0FsQ0FnQyxFQUFtQnRXLFVBQVV3VyxhQUFlLFNBQVVwQyxHQUNsRCxJQUFJcUMsRUFBVzlWLEtBQUsrVixZQUFZdEMsRUFBVXpWLE1BQzFDLEdBQUk4WCxFQUFTTCxpQkFDVCxNQUFNLElBQUl4UCxNQUFNLGFBQWV3TixFQUFVelYsS0FBTyxxQ0FBdUNnQyxLQUFLaEMsTUFFaEc4WCxFQUFTdEIsYUFBYWYsSUFFMUJrQyxFQUFtQnRXLFVBQVUyVyx3QkFBMEIsU0FBVXZDLEdBQzlDelQsS0FBSytWLFlBQVl0QyxFQUFVelYsTUFDN0J5WCxrQkFFVHpWLEtBQUs0VixVQUFVVixPQUFPekIsRUFBVXpWLE1BRXBDZ0MsS0FBSzZWLGFBQWFwQyxJQVN0QmtDLEVBQW1CdFcsVUFBVTBXLFlBQWMsU0FBVS9YLEdBQ2pELEdBQUlnQyxLQUFLNFYsVUFBVTVCLElBQUloVyxHQUNuQixPQUFPZ0MsS0FBSzRWLFVBQVV0WCxJQUFJTixHQUc5QixJQUFJOFgsRUFBVyxJQUFJdkMsRUFBU3ZWLEVBQU1nQyxNQUVsQyxPQURBQSxLQUFLNFYsVUFBVTFCLElBQUlsVyxFQUFNOFgsR0FDbEJBLEdBRVhILEVBQW1CdFcsVUFBVTRXLGFBQWUsV0FDeEMsT0FBT3BXLE1BQU11VixLQUFLcFYsS0FBSzRWLFVBQVVQLFdBRTlCTSxFQWhENEIsR0FtRHZDcFksRUFBUXFWLFVBQVlBLEVBQ3BCclYsRUFBUW9ZLG1CQUFxQkEsRUFDN0JwWSxFQUFRZ1csU0FBV0EsRyw2QkN2VG5CcFYsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLElBRXRELElBcUJJdU0sRUFxREFpTCxFQTFFQTFRLEVBQVEsRUFBUSxHQUNoQm1OLEVBQU8sRUFBUSxHQUNmYyxFQUFZLEVBQVEsR0FDcEIwQyxFQUFXLEVBQVEsR0FtQm5CQyxJQUFVbkwsRUFBSyxJQUNaLFVBQXlCLG9GQUU1QkEsRUFBRyxnQkFBcUMsZ0NBQ3hDQSxFQUFHLGlCQUF1QyxpREFDMUNBLEVBQUcsZUFBbUMsa0RBQ3RDQSxFQUFHLHdCQUFxRCw2RUFFeERBLEdBQ0FvTCxFQUFnQixJQUFJMUQsRUFBS3JJLGFBQWEsTUFBTyxXQUFZOEwsR0FFekRwWSxFQUFPLGdCQUNQc1ksRUFBVSxRQXlDVmhELEVBQXFCLFlBQ3JCaUQsSUFBdUJMLEVBQU8sSUFDekJsWSxHQUFRLFlBQ2JrWSxFQTFDUyx1QkEwQ00saUJBQ2ZBLEVBekNTLGtCQXlDTSxZQUNmQSxFQXhDUyxzQkF3Q00sWUFDZkEsRUF2Q1MsdUJBdUNNLFVBQ2ZBLEVBdENTLDJCQXNDTSxXQUNmQSxFQXJDUyx1QkFxQ00sV0FDZkEsRUFwQ1MseUJBb0NNLFlBQ2ZBLEVBbkNTLDJCQW1DTSxVQUNmQSxFQWxDUyxxQkFrQ00sV0FDZkEsRUFqQ1MsdUJBaUNNLFdBQ2ZBLEVBQUssV0FBYSxVQUNsQkEsRUFqQ1Msb0JBaUNNLGNBQ2ZBLEdBa0JBTSxFQUFTLElBQUlMLEVBQVNNLE9BQU8saUJBc0I3QkMsRUFBaUMsV0FDakMsU0FBU0EsRUFBZ0JwQyxFQUFTcUMsRUFBUUMsR0FDdEMsSUFBSW5DLEVBQUt4SixFQUNMdkIsRUFBUTFKLEtBQ1pBLEtBQUs0VyxVQUFZQSxFQUNqQjVXLEtBQUs2VyxZQUFhLEVBQ2xCN1csS0FBSzhXLE1BQVFILEVBQU8zWSxLQUNwQmdDLEtBQUsrVyxnQ0FDREosRUFBT0ssaUNBQWtDLEVBQzdDaFgsS0FBS2lYLFNBQVd0RSxFQUFLL0MsU0FBUzBFLEdBQzlCdFUsS0FBS3dULFVBQVksSUFBSUMsRUFBVWtDLG1CQUFtQmdCLEVBQU8zWSxNQUV6RGdDLEtBQUtrWCxjQUFjLElBQUl6RCxFQUFVYixVQUFVLE9BQU8sV0FBYyxPQUFPbEosSUFBVSxXQUNqRixJQUVJLElBQUssSUFBSXdCLEVBQUsxRixFQUFNN0IsU0FBUzNELEtBQUs0VyxVQUFVcEIsU0FBUzJCLFdBQVc5QixVQUFXVixFQUFLekosRUFBRzlJLFFBQVN1UyxFQUFHcFMsS0FBTW9TLEVBQUt6SixFQUFHOUksT0FBUSxDQUNqSCxJQUFJZ1YsRUFBY3pDLEVBQUdqVyxNQUNyQnNCLEtBQUtrWCxjQUFjRSxJQUczQixNQUFPckMsR0FBU04sRUFBTSxDQUFFM1EsTUFBT2lSLEdBQy9CLFFBQ0ksSUFDUUosSUFBT0EsRUFBR3BTLE9BQVMwSSxFQUFLQyxFQUFHOEosU0FBUy9KLEVBQUdyTixLQUFLc04sR0FFcEQsUUFBVSxHQUFJdUosRUFBSyxNQUFNQSxFQUFJM1EsUUF5R3JDLE9BdEdBM0YsT0FBT0MsZUFBZXNZLEVBQWdCclgsVUFBVyxpQ0FBa0MsQ0FDL0VmLElBQUssV0FFRCxPQURBMEIsS0FBS3FYLGtCQUNFclgsS0FBSytXLGlDQUVoQjdDLElBQUssU0FBVW9ELEdBQ1h0WCxLQUFLcVgsa0JBQ0xyWCxLQUFLK1csZ0NBQWtDTyxHQUUzQ2paLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlc1ksRUFBZ0JyWCxVQUFXLE9BQVEsQ0FDckRmLElBQUssV0FFRCxPQURBMEIsS0FBS3FYLGtCQUNFclgsS0FBSzhXLE9BRWhCelksWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWVzWSxFQUFnQnJYLFVBQVcsVUFBVyxDQUN4RGYsSUFBSyxXQUVELE9BREEwQixLQUFLcVgsa0JBQ0VyWCxLQUFLaVgsVUFFaEI1WSxZQUFZLEVBQ1prWixjQUFjLElBRWxCYixFQUFnQnJYLFVBQVU2VixPQUFTLFdBQy9CLElBQUl4TCxFQUFRMUosS0FDWixPQUFPLElBQUkrQixTQUFRLFNBQVVDLEdBQ3pCMEgsRUFBTTJOLGtCQUNOclYsT0FFQ1EsTUFBSyxXQUVOLE9BREFrSCxFQUFNa04sVUFBVXBCLFNBQVNnQyxVQUFVOU4sRUFBTW9OLE9BQ2xDL1UsUUFBUXVULElBQUk1TCxFQUFNOEosVUFBVXlDLGVBQWVoRixLQUFJLFNBQVU2RSxHQUFZLE9BQU9BLEVBQVNaLGdCQUUzRjFTLE1BQUssV0FDTmtILEVBQU1tTixZQUFhLE1BaUIzQkgsRUFBZ0JyWCxVQUFVb1ksWUFBYyxTQUFVelosRUFBTTZXLEdBSXBELFlBSDJCLElBQXZCQSxJQUFpQ0EsRUFBcUJ2QixHQUMxRHRULEtBQUtxWCxrQkFFRXJYLEtBQUt3VCxVQUFVdUMsWUFBWS9YLEdBQU1xVyxhQUFhLENBQ2pEUixXQUFZZ0IsS0FhcEI2QixFQUFnQnJYLFVBQVVxWSx1QkFBeUIsU0FBVTFaLEVBQU02VyxRQUNwQyxJQUF2QkEsSUFBaUNBLEVBQXFCdkIsR0FFMUR0VCxLQUFLd1QsVUFBVXVDLFlBQVkvWCxHQUFNaVgsY0FBY0osSUFLbkQ2QixFQUFnQnJYLFVBQVU2WCxjQUFnQixTQUFVekQsR0FDaEQsSUFDSXpULEtBQUt3VCxVQUFVcUMsYUFBYXBDLEdBRWhDLE1BQU9qVCxHQUNIZ1csRUFBT21CLE1BQU0sYUFBZWxFLEVBQVV6VixLQUFPLHdDQUEwQ2dDLEtBQUtoQyxLQUFNd0MsS0FHMUdrVyxFQUFnQnJYLFVBQVV1WSx5QkFBMkIsU0FBVW5FLEdBQzNEelQsS0FBS3dULFVBQVV3Qyx3QkFBd0J2QyxJQU0zQ2lELEVBQWdCclgsVUFBVWdZLGdCQUFrQixXQUN4QyxHQUFJclgsS0FBSzZXLFdBQ0wsTUFBTVIsRUFBY3RYLE9BQU8sY0FBaUMsQ0FBRThZLFFBQVM3WCxLQUFLOFcsU0FHN0VKLEVBbEl5QixHQXNJbkNBLEVBQWdCclgsVUFBVXJCLE1BQVEwWSxFQUFnQnJYLFVBQVVpVixTQUN6RG9DLEVBQWdCclgsVUFBVTZWLFFBQzFCaE0sUUFBUTRPLElBQUksTUFFaEIsSUFBSUMsRUFBWTs7Ozs7Ozs7Ozs7Ozs7OztHQXNRaEIsSUFBSUM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBakJKLFNBQVNDLElBQ0wsSUFBSXZGLEVBN05SLFNBQXFDd0YsR0FDakMsSUFBSUMsRUFBTyxHQUVQaEIsRUFBYSxJQUFJeEQsSUFFakJqQixFQUFZLENBSVo3VCxZQUFZLEVBQ1p1WixjQWlESixTQUF1QjlELEVBQVMrRCxRQUNWLElBQWRBLElBQXdCQSxFQUFZLElBQ3hDLEdBQXlCLGlCQUFkQSxHQUF3QyxPQUFkQSxFQUFvQixDQUVyREEsRUFBWSxDQUFFcmEsS0FERHFhLEdBR2pCLElBQUkxQixFQUFTMEIsT0FDTzlPLElBQWhCb04sRUFBTzNZLE9BQ1AyWSxFQUFPM1ksS0FBT3NWLEdBRWxCLElBQUl0VixFQUFPMlksRUFBTzNZLEtBQ2xCLEdBQW9CLGlCQUFUQSxJQUFzQkEsRUFDN0IsTUFBTXFZLEVBQWN0WCxPQUFPLGVBQW1DLENBQzFEOFksUUFBU3hQLE9BQU9ySyxLQUd4QixHQUFJMlUsRUFBS2xELFNBQVMwSSxFQUFNbmEsR0FDcEIsTUFBTXFZLEVBQWN0WCxPQUFPLGdCQUFxQyxDQUFFOFksUUFBUzdaLElBRS9FLElBQUlzYSxFQUFNLElBQUlKLEVBQWdCNUQsRUFBU3FDLEVBQVFqRSxHQUUvQyxPQURBeUYsRUFBS25hLEdBQVFzYSxFQUNOQSxHQXBFUEEsSUFBS0EsRUFDTEMsZ0JBZ0pKLFNBQXlCQyxFQUFrQmxDLEVBQVNtQyxHQUNoRCxJQUFJeE4sRUFHQXlOLEVBQStELFFBQXBEek4sRUFBS3NMLEVBQW9CaUMsVUFBMEMsSUFBUHZOLEVBQWdCQSxFQUFLdU4sRUFDNUZDLElBQ0FDLEdBQVcsSUFBTUQsR0FFckIsSUFBSUUsRUFBa0JELEVBQVFFLE1BQU0sU0FDaENDLEVBQWtCdkMsRUFBUXNDLE1BQU0sU0FDcEMsR0FBSUQsR0FBbUJFLEVBQWlCLENBQ3BDLElBQUlDLEVBQVUsQ0FDViwrQkFBa0NKLEVBQVUsbUJBQXVCcEMsRUFBVSxNQVlqRixPQVZJcUMsR0FDQUcsRUFBUXJWLEtBQUssaUJBQW9CaVYsRUFBVSxxREFFM0NDLEdBQW1CRSxHQUNuQkMsRUFBUXJWLEtBQUssT0FFYm9WLEdBQ0FDLEVBQVFyVixLQUFLLGlCQUFvQjZTLEVBQVUsMERBRS9DRSxFQUFPbkwsS0FBS3lOLEVBQVFoUixLQUFLLE1BRzdCaVIsRUFBa0IsSUFBSXRGLEVBQVViLFVBQVU4RixFQUFVLFlBQVksV0FBYyxNQUFPLENBQUdBLFFBQVNBLEVBQVNwQyxRQUFTQSxLQUFlLGFBeEtsSTZCLEtBQU0sS0FDTnZTLFlBQWFtUyxFQUNidkMsU0FBVSxDQUNOdUQsa0JBQW1CQSxFQUNuQnZCLFVBeUJSLFNBQW1CeFosVUFDUm1hLEVBQUtuYSxJQXpCUm1aLFdBQVlBLEVBQ1o2QixhQXNLUixTQUFzQlYsRUFBS3RhLEdBQ3ZCLEdBQWEsZUFBVEEsRUFDQSxPQUFPLEtBR1gsT0FEaUJBLEtBN0lyQixTQUFTc2EsRUFBSXRhLEdBRVQsR0FEQUEsRUFBT0EsR0FBUXNWLEdBQ1ZYLEVBQUtsRCxTQUFTMEksRUFBTW5hLEdBQ3JCLE1BQU1xWSxFQUFjdFgsT0FBTyxTQUF1QixDQUFFOFksUUFBUzdaLElBRWpFLE9BQU9tYSxFQUFLbmEsR0FrQ2hCLFNBQVMrYSxFQUFrQnRGLEdBQ3ZCLElBQUlnQixFQUFLeEosRUFDTGdPLEVBQWdCeEYsRUFBVXpWLEtBQzlCLEdBQUltWixFQUFXbkQsSUFBSWlGLEdBRWYsT0FEQXpDLEVBQU9tQixNQUFNLHNEQUF3RHNCLEVBQWdCLEtBQzNELFdBQW5CeEYsRUFBVVgsS0FFVEosRUFBVXVHLEdBQ1osS0FJVixHQUZBOUIsRUFBV2pELElBQUkrRSxFQUFleEYsR0FFUCxXQUFuQkEsRUFBVVgsS0FBZ0MsQ0FFMUMsSUFBSW9HLEVBQW1CLFNBQVVDLEdBRzdCLFFBRmUsSUFBWEEsSUFBcUJBLEVBQVNiLEtBRUcsbUJBQTFCYSxFQUFPRixHQUdkLE1BQU01QyxFQUFjdFgsT0FBTyx1QkFBbUQsQ0FDMUU4WSxRQUFTb0IsSUFLakIsT0FBT0UsRUFBT0YsV0FHYTFQLElBQTNCa0ssRUFBVVQsY0FDVkwsRUFBS3hKLFdBQVcrUCxFQUFrQnpGLEVBQVVULGNBR2hETixFQUFVdUcsR0FBaUJDLEVBRzNCaEIsRUFBZ0I3WSxVQUFVNFosR0FJdEIsV0FFSSxJQURBLElBQUkzSixFQUFPLEdBQ0YzRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyRSxFQUFLM0UsR0FBTXZLLFVBQVV1SyxHQUV6QixJQUFJeU8sRUFBYXBaLEtBQUt5WCxZQUFZeFksS0FBS2UsS0FBTWlaLEdBQzdDLE9BQU9HLEVBQVc5WSxNQUFNTixLQUFNeVQsRUFBVVYsa0JBQW9CekQsRUFBTyxLQUcvRSxJQUVJLElBQUssSUFBSXBFLEVBQUsxRixFQUFNN0IsU0FBU3hGLE9BQU9nTixLQUFLZ04sSUFBUXhELEVBQUt6SixFQUFHOUksUUFBU3VTLEVBQUdwUyxLQUFNb1MsRUFBS3pKLEVBQUc5SSxPQUFRLENBQ3ZGLElBQUl5VixFQUFVbEQsRUFBR2pXLE1BQ2pCeVosRUFBS04sR0FBU1gsY0FBY3pELElBR3BDLE1BQU9zQixHQUFTTixFQUFNLENBQUUzUSxNQUFPaVIsR0FDL0IsUUFDSSxJQUNRSixJQUFPQSxFQUFHcFMsT0FBUzBJLEVBQUtDLEVBQUc4SixTQUFTL0osRUFBR3JOLEtBQUtzTixHQUVwRCxRQUFVLEdBQUl1SixFQUFLLE1BQU1BLEVBQUkzUSxPQUVqQyxNQUEwQixXQUFuQjJQLEVBQVVYLEtBRVRKLEVBQVV1RyxHQUNaLEtBdUNWLE9BL0pBdkcsRUFBbUIsUUFBSUEsRUFFdkJ2VSxPQUFPQyxlQUFlc1UsRUFBVyxPQUFRLENBQ3JDcFUsSUErQ0osV0FFSSxPQUFPSCxPQUFPZ04sS0FBS2dOLEdBQU1sSCxLQUFJLFNBQVVqVCxHQUFRLE9BQU9tYSxFQUFLbmEsU0E3Qi9Ec2EsRUFBUyxJQUFJSixFQXdJTnhGLEdBMkJTMkcsQ0FBNEIzQyxHQWM1QyxPQWJBaEUsRUFBVThDLFNBQVdoUSxFQUFNdEYsU0FBU3NGLEVBQU10RixTQUFTLEdBQUl3UyxFQUFVOEMsVUFBVyxDQUFFeUMsd0JBQXlCQSxFQUNuR3FCLGdCQVNKLFNBQXlCakcsR0FDckJWLEVBQUt4SixXQUFXdUosRUFBV1csSUFUM0IzRCxnQkFBaUJpRCxFQUFLakQsZ0JBQ3RCcEYsYUFBY3FJLEVBQUtySSxhQUNuQm5CLFdBQVl3SixFQUFLeEosYUFTZHVKLEVBRUl1RixHQWtCWHNCLEVBQXVDLFdBQ3ZDLFNBQVNBLEVBQXNCL0YsR0FDM0J4VCxLQUFLd1QsVUFBWUEsRUFxQnJCLE9BakJBK0YsRUFBc0JsYSxVQUFVbWEsc0JBQXdCLFdBSXBELE9BSGdCeFosS0FBS3dULFVBQVV5QyxlQUkxQmhGLEtBQUksU0FBVTZFLEdBQ2YsR0FxQlosU0FBa0NBLEdBQzlCLElBQUk3SyxFQUNBd0ksRUFBWXFDLEVBQVN2QixlQUN6QixNQUEyRSxhQUE5QyxRQUFwQnRKLEVBQUt3SSxTQUE4QixJQUFQeEksT0FBZ0IsRUFBU0EsRUFBRzZIOzs7Ozs7Ozs7Ozs7Ozs7O0dBeEJyRDJHLENBQXlCM0QsR0FBVyxDQUNwQyxJQUFJdkwsRUFBVXVMLEVBQVN6QixlQUN2QixPQUFPOUosRUFBUW1PLFFBQVUsSUFBTW5PLEVBQVErTCxRQUd2QyxPQUFPLFFBR1ZmLFFBQU8sU0FBVW1FLEdBQWEsT0FBT0EsS0FDckM1UixLQUFLLE1BRVB5UixFQXZCK0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlGMUMsR0FBSTVHLEVBQUs3QyxrQkFBaUN2RyxJQUFsQndHLEtBQUtpSSxTQUF3QixDQUNqRHhCLEVBQU9uTCxLQUFLLG1JQUVaLElBQUlzTyxFQUFhNUosS0FBS2lJLFNBQVNwUyxZQUMzQitULEdBQWNBLEVBQVdsWixRQUFRLFNBQVcsR0FDNUMrVixFQUFPbkwsS0FBSyxzTkFHcEIsSUFBSStNLEVBQWdCSixFQUFTSSxjQUk3QkosRUFBU0ksY0FBZ0IsV0FFckIsSUFEQSxJQUFJOUksRUFBTyxHQUNGM0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDMkUsRUFBSzNFLEdBQU12SyxVQUFVdUssR0FRekIsT0FISWdJLEVBQUt2QyxVQUNMb0csRUFBT25MLEtBQUsseXBCQUVUK00sRUFBYzlYLFdBQU1pSixFQUFXK0YsSUFFMUMsSUFBSXNLLEVBQWE1QixHQW5EakIsU0FBZ0NBLEVBQVVTLEdBQ3RDVCxFQUFTeEMsU0FBU3VELGtCQUFrQixJQUFJdEYsRUFBVWIsVUFBVSxtQkFBbUIsU0FBVVksR0FBYSxPQUFPLElBQUkrRixFQUFzQi9GLEtBQWUsWUFFdEp3RSxFQUFTTyxnQkFBZ0J2YSxFQUFNc1ksRUFBU21DLEdBRXhDVCxFQUFTTyxnQkFBZ0IsVUFBVyxJQStDeENzQixDQUF1QkQsR0FFdkJyYyxFQUFRK0gsUUFBVXNVLEVBQ2xCcmMsRUFBUXlhLFNBQVc0QixHLDZCQ2xwQm5CLElBRjBCRSxFQUV0QjlCLEdBRnNCOEIsRUFFSyxFQUFRLEtBRnNCLGlCQUFQQSxHQUFvQixZQUFhQSxFQUFNQSxFQUFZLFFBQUlBOzs7Ozs7Ozs7Ozs7Ozs7OztBQXVCN0c5QixFQUFTTyxnQkFuQkUsV0FDRyxRQWtCMEIsT0FFeEMvYSxFQUFPRCxRQUFVeWEsRyxjQzNCakIsSUFBSW5WLEVBR0pBLEVBQUksV0FDSCxPQUFPN0MsS0FESixHQUlKLElBRUM2QyxFQUFJQSxHQUFLLElBQUlrWCxTQUFTLGNBQWIsR0FDUixNQUFPdlosR0FFYyxpQkFBWDBQLFNBQXFCck4sRUFBSXFOLFFBT3JDMVMsRUFBT0QsUUFBVXNGLEc7Ozs7Ozs7Ozs7Ozs7OztBQ0pqQixTQUFTb0IsSUFDTCxJQUFLLElBQUl6RSxFQUFJLEVBQUcvQixFQUFJLEVBQUd5RyxFQUFLOUQsVUFBVUMsT0FBUTVDLEVBQUl5RyxFQUFJekcsSUFBSytCLEdBQUtZLFVBQVUzQyxHQUFHNEMsT0FDeEUsSUFBSTlCLEVBQUlzQixNQUFNTCxHQUFJMkUsRUFBSSxFQUEzQixJQUE4QjFHLEVBQUksRUFBR0EsRUFBSXlHLEVBQUl6RyxJQUN6QyxJQUFLLElBQUkyRyxFQUFJaEUsVUFBVTNDLEdBQUk0RyxFQUFJLEVBQUdDLEVBQUtGLEVBQUUvRCxPQUFRZ0UsRUFBSUMsRUFBSUQsSUFBS0YsSUFDMUQ1RixFQUFFNEYsR0FBS0MsRUFBRUMsR0FDakIsT0FBTzlGOzs7Ozs7Ozs7Ozs7Ozs7O0dBcEJYLG1JQTBDQSxJQVlJeWIsRUFaQXRHLEVBQVksSUFhaEIsU0FBV3NHLEdBQ1BBLEVBQVNBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBa0IsUUFBSSxHQUFLLFVBQ3BDQSxFQUFTQSxFQUFlLEtBQUksR0FBSyxPQUNqQ0EsRUFBU0EsRUFBZSxLQUFJLEdBQUssT0FDakNBLEVBQVNBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBaUIsT0FBSSxHQUFLLFNBTnZDLENBT0dBLElBQWFBLEVBQVcsS0FJM0IsSUFBSUMsRUFBa0JELEVBQVNFLEtBTTNCQyxFQUFvQixTQUFVaEcsRUFBVWlHLEdBRXhDLElBREEsSUFBSTlLLEVBQU8sR0FDRjNFLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQzJFLEVBQUszRSxFQUFLLEdBQUt2SyxVQUFVdUssR0FFN0IsS0FBSXlQLEVBQVVqRyxFQUFTa0csVUFBdkIsQ0FHQSxJQUFJMUosR0FBTSxJQUFJdEgsTUFBT2lSLGNBQ3JCLE9BQVFGLEdBT0osS0FBS0osRUFBU08sTUFHZCxLQUFLUCxFQUFTUSxRQUNWdFIsUUFBUTRPLElBQUl4WCxNQUFNNEksUUFBU2pGLEVBQWUsQ0FBQyxJQUFNME0sRUFBTSxNQUFRd0QsRUFBU25XLEtBQU8sS0FBTXNSLElBQ3JGLE1BQ0osS0FBSzBLLEVBQVNFLEtBQ1ZoUixRQUFRdVIsS0FBS25hLE1BQU00SSxRQUFTakYsRUFBZSxDQUFDLElBQU0wTSxFQUFNLE1BQVF3RCxFQUFTblcsS0FBTyxLQUFNc1IsSUFDdEYsTUFDSixLQUFLMEssRUFBU1UsS0FDVnhSLFFBQVFtQyxLQUFLL0ssTUFBTTRJLFFBQVNqRixFQUFlLENBQUMsSUFBTTBNLEVBQU0sTUFBUXdELEVBQVNuVyxLQUFPLEtBQU1zUixJQUN0RixNQUNKLEtBQUswSyxFQUFTVyxNQUNWelIsUUFBUXBGLE1BQU14RCxNQUFNNEksUUFBU2pGLEVBQWUsQ0FBQyxJQUFNME0sRUFBTSxNQUFRd0QsRUFBU25XLEtBQU8sS0FBTXNSLElBQ3ZGLE1BQ0osUUFDSSxNQUFNLElBQUlySixNQUFNLDhEQUFnRW1VLEVBQVUsUUFHbEczRCxFQUF3QixXQU94QixTQUFTQSxFQUFPelksR0FDWmdDLEtBQUtoQyxLQUFPQSxFQUlaZ0MsS0FBSzRhLFVBQVlYLEVBSWpCamEsS0FBSzZhLFlBQWNWLEVBSW5CekcsRUFBVWpRLEtBQUt6RCxNQWtFbkIsT0FoRUE3QixPQUFPQyxlQUFlcVksRUFBT3BYLFVBQVcsV0FBWSxDQUNoRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLNGEsV0FFaEIxRyxJQUFLLFNBQVVvRCxHQUNYLEtBQU1BLEtBQU8wQyxHQUNULE1BQU0sSUFBSXpXLFVBQVUsd0NBRXhCdkQsS0FBSzRhLFVBQVl0RCxHQUVyQmpaLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlcVksRUFBT3BYLFVBQVcsYUFBYyxDQUNsRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLNmEsYUFFaEIzRyxJQUFLLFNBQVVvRCxHQUNYLEdBQW1CLG1CQUFSQSxFQUNQLE1BQU0sSUFBSS9ULFVBQVUscURBRXhCdkQsS0FBSzZhLFlBQWN2RCxHQUV2QmpaLFlBQVksRUFDWmtaLGNBQWMsSUFLbEJkLEVBQU9wWCxVQUFVc1ksTUFBUSxXQUVyQixJQURBLElBQUlySSxFQUFPLEdBQ0YzRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyRSxFQUFLM0UsR0FBTXZLLFVBQVV1SyxHQUV6QjNLLEtBQUs2YSxZQUFZdmEsTUFBTU4sS0FBTWlFLEVBQWUsQ0FBQ2pFLEtBQU1nYSxFQUFTTyxPQUFRakwsS0FFeEVtSCxFQUFPcFgsVUFBVXlZLElBQU0sV0FFbkIsSUFEQSxJQUFJeEksRUFBTyxHQUNGM0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDMkUsRUFBSzNFLEdBQU12SyxVQUFVdUssR0FFekIzSyxLQUFLNmEsWUFBWXZhLE1BQU1OLEtBQU1pRSxFQUFlLENBQUNqRSxLQUFNZ2EsRUFBU1EsU0FBVWxMLEtBRTFFbUgsRUFBT3BYLFVBQVVvYixLQUFPLFdBRXBCLElBREEsSUFBSW5MLEVBQU8sR0FDRjNFLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQzJFLEVBQUszRSxHQUFNdkssVUFBVXVLLEdBRXpCM0ssS0FBSzZhLFlBQVl2YSxNQUFNTixLQUFNaUUsRUFBZSxDQUFDakUsS0FBTWdhLEVBQVNFLE1BQU81SyxLQUV2RW1ILEVBQU9wWCxVQUFVZ00sS0FBTyxXQUVwQixJQURBLElBQUlpRSxFQUFPLEdBQ0YzRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyRSxFQUFLM0UsR0FBTXZLLFVBQVV1SyxHQUV6QjNLLEtBQUs2YSxZQUFZdmEsTUFBTU4sS0FBTWlFLEVBQWUsQ0FBQ2pFLEtBQU1nYSxFQUFTVSxNQUFPcEwsS0FFdkVtSCxFQUFPcFgsVUFBVXlFLE1BQVEsV0FFckIsSUFEQSxJQUFJd0wsRUFBTyxHQUNGM0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDMkUsRUFBSzNFLEdBQU12SyxVQUFVdUssR0FFekIzSyxLQUFLNmEsWUFBWXZhLE1BQU1OLEtBQU1pRSxFQUFlLENBQUNqRSxLQUFNZ2EsRUFBU1csT0FBUXJMLEtBRWpFbUgsRUF0RmdCOzs7Ozs7Ozs7Ozs7Ozs7OztBQXlHM0IsU0FBU3FFLEVBQVlDLEdBQ2pCckgsRUFBVWxDLFNBQVEsU0FBVXdKLEdBQ3hCQSxFQUFLWCxTQUFXVSxPLGlCQ2xOaEIsU0FBVXhkLEdBQVcsYUFFM0IsU0FBUzBkLEVBQVFDLEdBQ2YsT0FBT3JiLE1BQU1SLFVBQVUrTCxNQUFNeE4sS0FBS3NkLEdBR3BDLFNBQVNDLEVBQWlCQyxHQUN4QixPQUFPLElBQUlyWixTQUFRLFNBQVNDLEVBQVNDLEdBQ25DbVosRUFBUUMsVUFBWSxXQUNsQnJaLEVBQVFvWixFQUFROVksU0FHbEI4WSxFQUFRRSxRQUFVLFdBQ2hCclosRUFBT21aLEVBQVF0WCxXQUtyQixTQUFTeVgsRUFBcUJwTixFQUFLRyxFQUFRZ0IsR0FDekMsSUFBSThMLEVBQ0E3YixFQUFJLElBQUl3QyxTQUFRLFNBQVNDLEVBQVNDLEdBRXBDa1osRUFEQUMsRUFBVWpOLEVBQUlHLEdBQVFoTyxNQUFNNk4sRUFBS21CLElBQ1A5TSxLQUFLUixFQUFTQyxNQUkxQyxPQURBMUMsRUFBRTZiLFFBQVVBLEVBQ0w3YixFQUdULFNBQVNpYyxFQUEyQnJOLEVBQUtHLEVBQVFnQixHQUMvQyxJQUFJL1AsRUFBSWdjLEVBQXFCcE4sRUFBS0csRUFBUWdCLEdBQzFDLE9BQU8vUCxFQUFFaUQsTUFBSyxTQUFTOUQsR0FDckIsR0FBS0EsRUFDTCxPQUFPLElBQUkrYyxFQUFPL2MsRUFBT2EsRUFBRTZiLFlBSS9CLFNBQVNNLEVBQWdCQyxFQUFZQyxFQUFZQyxHQUMvQ0EsRUFBV3JLLFNBQVEsU0FBU2hJLEdBQzFCckwsT0FBT0MsZUFBZXVkLEVBQVd0YyxVQUFXbUssRUFBTSxDQUNoRGxMLElBQUssV0FDSCxPQUFPMEIsS0FBSzRiLEdBQVlwUyxJQUUxQjBLLElBQUssU0FBU29ELEdBQ1p0WCxLQUFLNGIsR0FBWXBTLEdBQVE4TixRQU1qQyxTQUFTd0UsRUFBb0JILEVBQVlDLEVBQVlHLEVBQWFGLEdBQ2hFQSxFQUFXckssU0FBUSxTQUFTaEksR0FDcEJBLEtBQVF1UyxFQUFZMWMsWUFDMUJzYyxFQUFXdGMsVUFBVW1LLEdBQVEsV0FDM0IsT0FBTytSLEVBQXFCdmIsS0FBSzRiLEdBQWFwUyxFQUFNcEosZ0JBSzFELFNBQVM0YixFQUFhTCxFQUFZQyxFQUFZRyxFQUFhRixHQUN6REEsRUFBV3JLLFNBQVEsU0FBU2hJLEdBQ3BCQSxLQUFRdVMsRUFBWTFjLFlBQzFCc2MsRUFBV3RjLFVBQVVtSyxHQUFRLFdBQzNCLE9BQU94SixLQUFLNGIsR0FBWXBTLEdBQU1sSixNQUFNTixLQUFLNGIsR0FBYXhiLGdCQUs1RCxTQUFTNmIsRUFBMEJOLEVBQVlDLEVBQVlHLEVBQWFGLEdBQ3RFQSxFQUFXckssU0FBUSxTQUFTaEksR0FDcEJBLEtBQVF1UyxFQUFZMWMsWUFDMUJzYyxFQUFXdGMsVUFBVW1LLEdBQVEsV0FDM0IsT0FBT2dTLEVBQTJCeGIsS0FBSzRiLEdBQWFwUyxFQUFNcEosZ0JBS2hFLFNBQVM4YixFQUFNQyxHQUNibmMsS0FBS29jLE9BQVNELEVBdUJoQixTQUFTVixFQUFPWSxFQUFRakIsR0FDdEJwYixLQUFLc2MsUUFBVUQsRUFDZnJjLEtBQUt1YyxTQUFXbkIsRUErQmxCLFNBQVNvQixFQUFZQyxHQUNuQnpjLEtBQUswYyxPQUFTRCxFQXVDaEIsU0FBU0UsRUFBWUMsR0FDbkI1YyxLQUFLNmMsSUFBTUQsRUFDWDVjLEtBQUtnTyxTQUFXLElBQUlqTSxTQUFRLFNBQVNDLEVBQVNDLEdBQzVDMmEsRUFBZUUsV0FBYSxXQUMxQjlhLEtBRUY0YSxFQUFldEIsUUFBVSxXQUN2QnJaLEVBQU8yYSxFQUFlOVksUUFFeEI4WSxFQUFlRyxRQUFVLFdBQ3ZCOWEsRUFBTzJhLEVBQWU5WSxXQWtCNUIsU0FBU2taLEVBQVVDLEVBQUlDLEVBQVlDLEdBQ2pDbmQsS0FBS29kLElBQU1ILEVBQ1hqZCxLQUFLa2QsV0FBYUEsRUFDbEJsZCxLQUFLbWQsWUFBYyxJQUFJUixFQUFZUSxHQWtCckMsU0FBU0UsRUFBR0osR0FDVmpkLEtBQUtvZCxJQUFNSCxFQS9JYnZCLEVBQWdCUSxFQUFPLFNBQVUsQ0FDL0IsT0FDQSxVQUNBLGFBQ0EsV0FHRkosRUFBb0JJLEVBQU8sU0FBVW9CLFNBQVUsQ0FDN0MsTUFDQSxTQUNBLFNBQ0EsYUFDQSxVQUdGckIsRUFBMEJDLEVBQU8sU0FBVW9CLFNBQVUsQ0FDbkQsYUFDQSxrQkFRRjVCLEVBQWdCRCxFQUFRLFVBQVcsQ0FDakMsWUFDQSxNQUNBLGFBQ0EsVUFHRkssRUFBb0JMLEVBQVEsVUFBVzhCLFVBQVcsQ0FDaEQsU0FDQSxXQUlGLENBQUMsVUFBVyxXQUFZLHNCQUFzQi9MLFNBQVEsU0FBU2dNLEdBQ3ZEQSxLQUFjRCxVQUFVbGUsWUFDOUJvYyxFQUFPcGMsVUFBVW1lLEdBQWMsV0FDN0IsSUFBSW5CLEVBQVNyYyxLQUNUc1AsRUFBT2xQLFVBQ1gsT0FBTzJCLFFBQVFDLFVBQVVRLE1BQUssV0FFNUIsT0FEQTZaLEVBQU9DLFFBQVFrQixHQUFZbGQsTUFBTStiLEVBQU9DLFFBQVNoTixHQUMxQzZMLEVBQWlCa0IsRUFBT0UsVUFBVS9aLE1BQUssU0FBUzlELEdBQ3JELEdBQUtBLEVBQ0wsT0FBTyxJQUFJK2MsRUFBTy9jLEVBQU8yZCxFQUFPRSxxQkFVeENDLEVBQVluZCxVQUFVb2UsWUFBYyxXQUNsQyxPQUFPLElBQUl2QixFQUFNbGMsS0FBSzBjLE9BQU9lLFlBQVluZCxNQUFNTixLQUFLMGMsT0FBUXRjLGFBRzlEb2MsRUFBWW5kLFVBQVU4YyxNQUFRLFdBQzVCLE9BQU8sSUFBSUQsRUFBTWxjLEtBQUswYyxPQUFPUCxNQUFNN2IsTUFBTU4sS0FBSzBjLE9BQVF0YyxhQUd4RHNiLEVBQWdCYyxFQUFhLFNBQVUsQ0FDckMsT0FDQSxVQUNBLGFBQ0Esa0JBR0ZWLEVBQW9CVSxFQUFhLFNBQVVrQixlQUFnQixDQUN6RCxNQUNBLE1BQ0EsU0FDQSxRQUNBLE1BQ0EsU0FDQSxTQUNBLGFBQ0EsVUFHRnpCLEVBQTBCTyxFQUFhLFNBQVVrQixlQUFnQixDQUMvRCxhQUNBLGtCQUdGMUIsRUFBYVEsRUFBYSxTQUFVa0IsZUFBZ0IsQ0FDbEQsZ0JBa0JGZixFQUFZdGQsVUFBVXNlLFlBQWMsV0FDbEMsT0FBTyxJQUFJbkIsRUFBWXhjLEtBQUs2YyxJQUFJYyxZQUFZcmQsTUFBTU4sS0FBSzZjLElBQUt6YyxhQUc5RHNiLEVBQWdCaUIsRUFBYSxNQUFPLENBQ2xDLG1CQUNBLFNBR0ZYLEVBQWFXLEVBQWEsTUFBT2lCLGVBQWdCLENBQy9DLFVBU0ZaLEVBQVUzZCxVQUFVd2Usa0JBQW9CLFdBQ3RDLE9BQU8sSUFBSXJCLEVBQVl4YyxLQUFLb2QsSUFBSVMsa0JBQWtCdmQsTUFBTU4sS0FBS29kLElBQUtoZCxhQUdwRXNiLEVBQWdCc0IsRUFBVyxNQUFPLENBQ2hDLE9BQ0EsVUFDQSxxQkFHRmhCLEVBQWFnQixFQUFXLE1BQU9jLFlBQWEsQ0FDMUMsb0JBQ0EsVUFPRlQsRUFBR2hlLFVBQVU4ZCxZQUFjLFdBQ3pCLE9BQU8sSUFBSVIsRUFBWTNjLEtBQUtvZCxJQUFJRCxZQUFZN2MsTUFBTU4sS0FBS29kLElBQUtoZCxhQUc5RHNiLEVBQWdCMkIsRUFBSSxNQUFPLENBQ3pCLE9BQ0EsVUFDQSxxQkFHRnJCLEVBQWFxQixFQUFJLE1BQU9TLFlBQWEsQ0FDbkMsVUFLRixDQUFDLGFBQWMsaUJBQWlCdE0sU0FBUSxTQUFTdU0sR0FDL0MsQ0FBQ3ZCLEVBQWFOLEdBQU8xSyxTQUFRLFNBQVN1SyxHQUU5QmdDLEtBQVloQyxFQUFZMWMsWUFFOUIwYyxFQUFZMWMsVUFBVTBlLEVBQVN6UyxRQUFRLE9BQVEsWUFBYyxXQUMzRCxJQUFJZ0UsRUFBTzJMLEVBQVE3YSxXQUNmeUosRUFBV3lGLEVBQUtBLEVBQUtqUCxPQUFTLEdBQzlCMmQsRUFBZWhlLEtBQUswYyxRQUFVMWMsS0FBS29jLE9BQ25DaEIsRUFBVTRDLEVBQWFELEdBQVV6ZCxNQUFNMGQsRUFBYzFPLEVBQUtsRSxNQUFNLEdBQUksSUFDeEVnUSxFQUFRQyxVQUFZLFdBQ2xCeFIsRUFBU3VSLEVBQVE5WSxpQkFPekIsQ0FBQzRaLEVBQU9NLEdBQWFoTCxTQUFRLFNBQVN1SyxHQUNoQ0EsRUFBWTFjLFVBQVU0ZSxTQUMxQmxDLEVBQVkxYyxVQUFVNGUsT0FBUyxTQUFTQyxFQUFPQyxHQUM3QyxJQUFJaEssRUFBV25VLEtBQ1hvZSxFQUFRLEdBRVosT0FBTyxJQUFJcmMsU0FBUSxTQUFTQyxHQUMxQm1TLEVBQVNrSyxjQUFjSCxHQUFPLFNBQVM3QixHQUNoQ0EsR0FJTCtCLEVBQU0zYSxLQUFLNFksRUFBTzNkLFlBRUo2SyxJQUFWNFUsR0FBdUJDLEVBQU0vZCxRQUFVOGQsRUFJM0M5QixFQUFPaUMsV0FITHRjLEVBQVFvYyxJQU5ScGMsRUFBUW9jLGNBb0NsQjdnQixFQUFRZ2hCLE9BckJSLFNBQWdCdmdCLEVBQU1zWSxFQUFTa0ksR0FDN0IsSUFBSWpmLEVBQUlnYyxFQUFxQmtELFVBQVcsT0FBUSxDQUFDemdCLEVBQU1zWSxJQUNuRDhFLEVBQVU3YixFQUFFNmIsUUFVaEIsT0FSSUEsSUFDRkEsRUFBUXNELGdCQUFrQixTQUFTQyxHQUM3QkgsR0FDRkEsRUFBZ0IsSUFBSXhCLEVBQVU1QixFQUFROVksT0FBUXFjLEVBQU16QixXQUFZOUIsRUFBUStCLGdCQUt2RTVkLEVBQUVpRCxNQUFLLFNBQVN5YSxHQUNyQixPQUFPLElBQUlJLEVBQUdKLE9BU2xCMWYsRUFBUXFoQixTQUxSLFNBQWtCNWdCLEdBQ2hCLE9BQU91ZCxFQUFxQmtELFVBQVcsaUJBQWtCLENBQUN6Z0IsS0FNNURHLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxJQXhUU21nQixDQUFRdGhCLEksZ0JDRHpFLElBQUl1aEIsRUFBTSxFQUFRLEdBQ0ZDLEVBQVUsRUFBUSxJQUlDLGlCQUZ2QkEsRUFBVUEsRUFBUWxnQixXQUFha2dCLEVBQVF6WixRQUFVeVosS0FHL0NBLEVBQVUsQ0FBQyxDQUFDdmhCLEVBQU9DLEVBQUlzaEIsRUFBUyxNQUc5QyxJQUFJekssRUFBVSxDQUVkLE9BQWlCLE9BQ2pCLFdBQW9CLEdBRVB3SyxFQUFJQyxFQUFTekssR0FJMUI5VyxFQUFPRCxRQUFVd2hCLEVBQVFDLFFBQVUsSSw2QkNoQm5DLElBQ01DLEVBREZDLEVBRUssV0FVTCxZQVRvQixJQUFURCxJQU1UQSxFQUFPRSxRQUFRalAsUUFBVWtQLFVBQVlBLFNBQVM5SixNQUFRcEYsT0FBT3JKLE9BR3hEb1ksR0FJUEksRUFBWSxXQUNkLElBQUlKLEVBQU8sR0FDWCxPQUFPLFNBQWtCbmUsR0FDdkIsUUFBNEIsSUFBakJtZSxFQUFLbmUsR0FBeUIsQ0FDdkMsSUFBSXdlLEVBQWNGLFNBQVNHLGNBQWN6ZSxHQUV6QyxHQUFJb1AsT0FBT3NQLG1CQUFxQkYsYUFBdUJwUCxPQUFPc1Asa0JBQzVELElBR0VGLEVBQWNBLEVBQVlHLGdCQUFnQkMsS0FDMUMsTUFBT2xmLEdBRVA4ZSxFQUFjLEtBSWxCTCxFQUFLbmUsR0FBVXdlLEVBR2pCLE9BQU9MLEVBQUtuZSxJQXBCQSxHQXdCWjZlLEVBQWMsR0FFbEIsU0FBU0MsRUFBcUIvTCxHQUc1QixJQUZBLElBQUl2UixHQUFVLEVBRUw3RSxFQUFJLEVBQUdBLEVBQUlraUIsRUFBWXRmLE9BQVE1QyxJQUN0QyxHQUFJa2lCLEVBQVlsaUIsR0FBR29XLGFBQWVBLEVBQVksQ0FDNUN2UixFQUFTN0UsRUFDVCxNQUlKLE9BQU82RSxFQUdULFNBQVN1ZCxFQUFhQyxFQUFNeEwsR0FJMUIsSUFIQSxJQUFJeUwsRUFBYSxHQUNiQyxFQUFjLEdBRVR2aUIsRUFBSSxFQUFHQSxFQUFJcWlCLEVBQUt6ZixPQUFRNUMsSUFBSyxDQUNwQyxJQUFJd2lCLEVBQU9ILEVBQUtyaUIsR0FDWnlpQixFQUFLNUwsRUFBUTZMLEtBQU9GLEVBQUssR0FBSzNMLEVBQVE2TCxLQUFPRixFQUFLLEdBQ2xEOUIsRUFBUTRCLEVBQVdHLElBQU8sRUFDMUJyTSxFQUFhLEdBQUc3UCxPQUFPa2MsRUFBSSxLQUFLbGMsT0FBT21hLEdBQzNDNEIsRUFBV0csR0FBTS9CLEVBQVEsRUFDekIsSUFBSWhDLEVBQVF5RCxFQUFxQi9MLEdBQzdCMUYsRUFBTSxDQUNSaVMsSUFBS0gsRUFBSyxHQUNWSSxNQUFPSixFQUFLLEdBQ1pLLFVBQVdMLEVBQUssS0FHSCxJQUFYOUQsR0FDRndELEVBQVl4RCxHQUFPb0UsYUFDbkJaLEVBQVl4RCxHQUFPcUUsUUFBUXJTLElBRTNCd1IsRUFBWWxjLEtBQUssQ0FDZm9RLFdBQVlBLEVBQ1oyTSxRQUFTQyxFQUFTdFMsRUFBS21HLEdBQ3ZCaU0sV0FBWSxJQUloQlAsRUFBWXZjLEtBQUtvUSxHQUduQixPQUFPbU0sRUFHVCxTQUFTVSxFQUFtQnBNLEdBQzFCLElBQUlxTSxFQUFRdkIsU0FBU3dCLGNBQWMsU0FDL0JDLEVBQWF2TSxFQUFRdU0sWUFBYyxHQUV2QyxRQUFnQyxJQUFyQkEsRUFBV0MsTUFBdUIsQ0FDM0MsSUFBSUEsRUFBbUQsS0FFbkRBLElBQ0ZELEVBQVdDLE1BQVFBLEdBUXZCLEdBSkEzaUIsT0FBT2dOLEtBQUswVixHQUFZclAsU0FBUSxTQUFVeFMsR0FDeEMyaEIsRUFBTUksYUFBYS9oQixFQUFLNmhCLEVBQVc3aEIsT0FHUCxtQkFBbkJzVixFQUFRME0sT0FDakIxTSxFQUFRME0sT0FBT0wsT0FDVixDQUNMLElBQUk3ZixFQUFTdWUsRUFBVS9LLEVBQVEwTSxRQUFVLFFBRXpDLElBQUtsZ0IsRUFDSCxNQUFNLElBQUltRixNQUFNLDJHQUdsQm5GLEVBQU9tZ0IsWUFBWU4sR0FHckIsT0FBT0EsRUFjVCxJQUNNTyxFQURGQyxHQUNFRCxFQUFZLEdBQ1QsU0FBaUIvRSxFQUFPaUYsR0FFN0IsT0FEQUYsRUFBVS9FLEdBQVNpRixFQUNaRixFQUFVM0wsT0FBTzRKLFNBQVNyWCxLQUFLLFFBSTFDLFNBQVN1WixFQUFvQlYsRUFBT3hFLEVBQU9tRixFQUFRblQsR0FDakQsSUFBSWlTLEVBQU1rQixFQUFTLEdBQUtuVCxFQUFJa1MsTUFBUSxVQUFVcmMsT0FBT21LLEVBQUlrUyxNQUFPLE1BQU1yYyxPQUFPbUssRUFBSWlTLElBQUssS0FBT2pTLEVBQUlpUyxJQUlqRyxHQUFJTyxFQUFNWSxXQUNSWixFQUFNWSxXQUFXQyxRQUFVTCxFQUFZaEYsRUFBT2lFLE9BQ3pDLENBQ0wsSUFBSXFCLEVBQVVyQyxTQUFTc0MsZUFBZXRCLEdBQ2xDdUIsRUFBYWhCLEVBQU1nQixXQUVuQkEsRUFBV3hGLElBQ2J3RSxFQUFNaUIsWUFBWUQsRUFBV3hGLElBRzNCd0YsRUFBV3RoQixPQUNic2dCLEVBQU1rQixhQUFhSixFQUFTRSxFQUFXeEYsSUFFdkN3RSxFQUFNTSxZQUFZUSxJQUt4QixTQUFTSyxFQUFXbkIsRUFBT3JNLEVBQVNuRyxHQUNsQyxJQUFJaVMsRUFBTWpTLEVBQUlpUyxJQUNWQyxFQUFRbFMsRUFBSWtTLE1BQ1pDLEVBQVluUyxFQUFJbVMsVUFlcEIsR0FiSUQsRUFDRk0sRUFBTUksYUFBYSxRQUFTVixHQUU1Qk0sRUFBTW9CLGdCQUFnQixTQUdwQnpCLEdBQWF0WSxPQUNmb1ksR0FBTyx1REFBdURwYyxPQUFPZ0UsS0FBS2dhLFNBQVN0USxtQkFBbUJoRyxLQUFLc0csVUFBVXNPLE1BQWUsUUFNbElLLEVBQU1ZLFdBQ1JaLEVBQU1ZLFdBQVdDLFFBQVVwQixNQUN0QixDQUNMLEtBQU9PLEVBQU1zQixZQUNYdEIsRUFBTWlCLFlBQVlqQixFQUFNc0IsWUFHMUJ0QixFQUFNTSxZQUFZN0IsU0FBU3NDLGVBQWV0QixLQUk5QyxJQUFJOEIsRUFBWSxLQUNaQyxFQUFtQixFQUV2QixTQUFTMUIsRUFBU3RTLEVBQUttRyxHQUNyQixJQUFJcU0sRUFDQTNULEVBQ0FzVSxFQUVKLEdBQUloTixFQUFRNE4sVUFBVyxDQUNyQixJQUFJRSxFQUFhRCxJQUNqQnhCLEVBQVF1QixJQUFjQSxFQUFZeEIsRUFBbUJwTSxJQUNyRHRILEVBQVNxVSxFQUFvQnBpQixLQUFLLEtBQU0waEIsRUFBT3lCLEdBQVksR0FDM0RkLEVBQVNELEVBQW9CcGlCLEtBQUssS0FBTTBoQixFQUFPeUIsR0FBWSxRQUUzRHpCLEVBQVFELEVBQW1CcE0sR0FDM0J0SCxFQUFTOFUsRUFBVzdpQixLQUFLLEtBQU0waEIsRUFBT3JNLEdBRXRDZ04sRUFBUyxZQXhGYixTQUE0QlgsR0FFMUIsR0FBeUIsT0FBckJBLEVBQU0wQixXQUNSLE9BQU8sRUFHVDFCLEVBQU0wQixXQUFXVCxZQUFZakIsR0FtRnpCMkIsQ0FBbUIzQixJQUt2QixPQURBM1QsRUFBT21CLEdBQ0EsU0FBcUJvVSxHQUMxQixHQUFJQSxFQUFRLENBQ1YsR0FBSUEsRUFBT25DLE1BQVFqUyxFQUFJaVMsS0FBT21DLEVBQU9sQyxRQUFVbFMsRUFBSWtTLE9BQVNrQyxFQUFPakMsWUFBY25TLEVBQUltUyxVQUNuRixPQUdGdFQsRUFBT21CLEVBQU1vVSxRQUViakIsS0FLTjlqQixFQUFPRCxRQUFVLFNBQVV1aUIsRUFBTXhMLElBQy9CQSxFQUFVQSxHQUFXLElBR1I0TixXQUEwQyxrQkFBdEI1TixFQUFRNE4sWUFDdkM1TixFQUFRNE4sVUFBWWhELEtBSXRCLElBQUlzRCxFQUFrQjNDLEVBRHRCQyxFQUFPQSxHQUFRLEdBQzBCeEwsR0FDekMsT0FBTyxTQUFnQm1PLEdBR3JCLEdBRkFBLEVBQVVBLEdBQVcsR0FFMkIsbUJBQTVDdGtCLE9BQU9rQixVQUFVbU0sU0FBUzVOLEtBQUs2a0IsR0FBbkMsQ0FJQSxJQUFLLElBQUlobEIsRUFBSSxFQUFHQSxFQUFJK2tCLEVBQWdCbmlCLE9BQVE1QyxJQUFLLENBQy9DLElBQ0kwZSxFQUFReUQsRUFESzRDLEVBQWdCL2tCLElBRWpDa2lCLEVBQVl4RCxHQUFPb0UsYUFLckIsSUFGQSxJQUFJbUMsRUFBcUI3QyxFQUFhNEMsRUFBU25PLEdBRXRDM0osRUFBSyxFQUFHQSxFQUFLNlgsRUFBZ0JuaUIsT0FBUXNLLElBQU0sQ0FDbEQsSUFFSXlSLEVBQVN3RCxFQUZLNEMsRUFBZ0I3WCxJQUlLLElBQW5DZ1YsRUFBWXZELEdBQVFtRSxhQUN0QlosRUFBWXZELEdBQVFvRSxVQUVwQmIsRUFBWWdELE9BQU92RyxFQUFRLElBSS9Cb0csRUFBa0JFLE0sZ0JDelF0QixJQUFJRSxFQUE4QixFQUFRLElBQ3RDQyxFQUFrQyxFQUFRLElBQzFDQyxFQUFnQyxFQUFRLElBQ3hDQyxFQUFnQyxFQUFRLElBQ3hDQyxFQUFnQyxFQUFRLElBQzVDemxCLEVBQVVxbEIsR0FBNEIsR0FDdEMsSUFBSUssRUFBcUNKLEVBQWdDQyxHQUNyRUksRUFBcUNMLEVBQWdDRSxHQUNyRUksRUFBcUNOLEVBQWdDRyxHQUV6RXpsQixFQUFRa0csS0FBSyxDQUFDakcsRUFBT0MsRUFBSSw4cUxBQW9yTHdsQixFQUFxQyx1R0FBeUdDLEVBQXFDLDZqVEFBaWtUQyxFQUFxQyxxbUVBQXNtRSxLQUU1a2pCM2xCLEVBQU9ELFFBQVVBLEcsNkJDTGpCQyxFQUFPRCxRQUFVLFNBQVU2bEIsR0FDekIsSUFBSXRELEVBQU8sR0F1RFgsT0FyREFBLEVBQUt0VSxTQUFXLFdBQ2QsT0FBT3hMLEtBQUtpUixLQUFJLFNBQVVnUCxHQUN4QixJQUFJbEIsRUFzRFYsU0FBZ0NrQixFQUFNbUQsR0FDcEMsSUFBSXJFLEVBQVVrQixFQUFLLElBQU0sR0FFckJvRCxFQUFhcEQsRUFBSyxHQUV0QixJQUFLb0QsRUFDSCxPQUFPdEUsRUFHVCxHQUFJcUUsR0FBZ0MsbUJBQVRwYixLQUFxQixDQUM5QyxJQUFJc2IsR0FXV2hELEVBWGUrQyxFQWE1Qi9jLEVBQVMwQixLQUFLZ2EsU0FBU3RRLG1CQUFtQmhHLEtBQUtzRyxVQUFVc08sTUFDekQ1VixFQUFPLCtEQUErRDFHLE9BQU9zQyxHQUMxRSxPQUFPdEMsT0FBTzBHLEVBQU0sUUFkckI2WSxFQUFhRixFQUFXRyxRQUFRdlMsS0FBSSxTQUFVN0gsR0FDaEQsTUFBTyxpQkFBaUJwRixPQUFPcWYsRUFBV0ksWUFBYyxJQUFJemYsT0FBT29GLEVBQVEsVUFFN0UsTUFBTyxDQUFDMlYsR0FBUy9hLE9BQU91ZixHQUFZdmYsT0FBTyxDQUFDc2YsSUFBZ0J4YixLQUFLLE1BT3JFLElBQW1Cd1ksRUFFYmhhLEVBQ0FvRSxFQVBKLE1BQU8sQ0FBQ3FVLEdBQVNqWCxLQUFLLE1BdkVKNGIsQ0FBdUJ6RCxFQUFNbUQsR0FFM0MsT0FBSW5ELEVBQUssR0FDQSxVQUFVamMsT0FBT2ljLEVBQUssR0FBSSxNQUFNamMsT0FBTythLEVBQVMsS0FHbERBLEtBQ05qWCxLQUFLLEtBS1ZnWSxFQUFLcmlCLEVBQUksU0FBVUUsRUFBU2dtQixFQUFZQyxHQUNmLGlCQUFaam1CLElBRVRBLEVBQVUsQ0FBQyxDQUFDLEtBQU1BLEVBQVMsTUFHN0IsSUFBSWttQixFQUF5QixHQUU3QixHQUFJRCxFQUNGLElBQUssSUFBSW5tQixFQUFJLEVBQUdBLEVBQUl1QyxLQUFLSyxPQUFRNUMsSUFBSyxDQUVwQyxJQUFJeWlCLEVBQUtsZ0IsS0FBS3ZDLEdBQUcsR0FFUCxNQUFOeWlCLElBQ0YyRCxFQUF1QjNELElBQU0sR0FLbkMsSUFBSyxJQUFJdlYsRUFBSyxFQUFHQSxFQUFLaE4sRUFBUTBDLE9BQVFzSyxJQUFNLENBQzFDLElBQUlzVixFQUFPLEdBQUdqYyxPQUFPckcsRUFBUWdOLElBRXpCaVosR0FBVUMsRUFBdUI1RCxFQUFLLE1BS3RDMEQsSUFDRzFELEVBQUssR0FHUkEsRUFBSyxHQUFLLEdBQUdqYyxPQUFPMmYsRUFBWSxTQUFTM2YsT0FBT2ljLEVBQUssSUFGckRBLEVBQUssR0FBSzBELEdBTWQ3RCxFQUFLcmMsS0FBS3djLE1BSVBILEksNkJDOURUdGlCLEVBQU9ELFFBQVUsU0FBVXVtQixFQUFLeFAsR0FTOUIsT0FSS0EsSUFFSEEsRUFBVSxJQU1PLGlCQUZuQndQLEVBQU1BLEdBQU9BLEVBQUlqbEIsV0FBYWlsQixFQUFJeGUsUUFBVXdlLEdBR25DQSxHQUlMLGVBQWUzVCxLQUFLMlQsS0FFdEJBLEVBQU1BLEVBQUkxWSxNQUFNLEdBQUksSUFHbEJrSixFQUFReVAsT0FFVkQsR0FBT3hQLEVBQVF5UCxNQUtiLGNBQWM1VCxLQUFLMlQsSUFBUXhQLEVBQVEwUCxXQUM5QixJQUFLaGdCLE9BQU84ZixFQUFJeFksUUFBUSxLQUFNLE9BQU9BLFFBQVEsTUFBTyxPQUFRLEtBRzlEd1ksSyw2QkNoQ1QsT0FBZSxjQUEwQix3Qyw2QkNBekMsT0FBZSxjQUEwQix3Qyw2QkNBekMsT0FBZSxjQUEwQix3Qyw4QkNBekMsWUFFQTNsQixPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sSUFJdEQsSUFGMEJvYixFQTZDdEJFLEVBM0NBaEMsR0FGc0I4QixFQUVLLEVBQVEsS0FGc0IsaUJBQVBBLEdBQW9CLFlBQWFBLEVBQU1BLEVBQVksUUFBSUEsRUFHekd0VSxFQUFRLEVBQVEsR0FDaEJnUixFQUFTLEVBQVEsR0FDakI3RCxFQUFPLEVBQVEsR0FDZmMsRUFBWSxFQUFRLEdBQ3BCd1EsRUFBb0IsRUFBUSxJQW1CNUJyZSxFQUFjb1MsRUFBU3BTLFlBa0J2QnNlLEVBQVksSUFBSTFOLEVBQU9DLE9BQU8sdUJBUWxDLFNBQVMwTixJQUNMLE9BQUlELEVBQVU3SixXQUFhN0QsRUFBT3dELFNBQVNPLE1BQ2hDUCxFQUFTTyxNQUVYMkosRUFBVTdKLFdBQWE3RCxFQUFPd0QsU0FBU29LLE9BQ3JDcEssRUFBU29LLE9BR1RwSyxFQUFTVyxNQUd4QixTQUFTRyxFQUFZdUosR0FJakIsT0FBUUEsR0FDSixLQUFLckssRUFBU08sTUFDVjJKLEVBQVU3SixTQUFXN0QsRUFBT3dELFNBQVNPLE1BQ3JDLE1BQ0osS0FBS1AsRUFBU1csTUFDVnVKLEVBQVU3SixTQUFXN0QsRUFBT3dELFNBQVNXLE1BQ3JDLE1BQ0osS0FBS1gsRUFBU29LLE9BQ1ZGLEVBQVU3SixTQUFXN0QsRUFBT3dELFNBQVNvSyxPQUNyQyxNQUNKLFFBQ0lGLEVBQVVwZ0IsTUFBTSxjQUFnQjhCLEVBQWMsNkNBRzFELFNBQVMrUixFQUFNMk0sRUFBS0MsR0FFaEIsSUFEQSxJQUFJcFcsRUFBTSxHQUNEeEQsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDd0QsRUFBSXhELEVBQUssR0FBS3ZLLFVBQVV1SyxHQUU1QixHQUFJdVosRUFBVTdKLFVBQVk3RCxFQUFPd0QsU0FBU08sTUFBTyxDQUM3QyxJQUFJakwsRUFBT25CLEVBQUk4QyxJQUFJdVQsR0FDbkJOLEVBQVV2TSxNQUFNclgsTUFBTTRqQixFQUFXMWUsRUFBTXZCLGVBQWUsQ0FBQyxjQUFnQjJCLEVBQWMsTUFBUTBlLEVBQU0sTUFBUUMsR0FBTWpWLEtBR3pILFNBQVN4TCxFQUFNeWdCLEdBRVgsSUFEQSxJQUFJcFcsRUFBTSxHQUNEeEQsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDd0QsRUFBSXhELEVBQUssR0FBS3ZLLFVBQVV1SyxHQUU1QixHQUFJdVosRUFBVTdKLFVBQVk3RCxFQUFPd0QsU0FBU1csTUFBTyxDQUM3QyxJQUFJckwsRUFBT25CLEVBQUk4QyxJQUFJdVQsR0FDbkJOLEVBQVVwZ0IsTUFBTXhELE1BQU00akIsRUFBVzFlLEVBQU12QixlQUFlLENBQUMsY0FBZ0IyQixFQUFjLE1BQVEyZSxHQUFNalYsS0FNM0csU0FBU2tWLEVBQVlyVyxHQUNqQixHQUFtQixpQkFBUkEsRUFDUCxPQUFPQSxFQUdQLElBQUlzVyxFQUFXQyxFQUFnQkMsY0FDL0IsSUFDSSxPQUFPRixFQUFTRyxXQUFXelcsR0FFL0IsTUFBTzNOLEdBRUgsT0FBTzJOOzs7Ozs7Ozs7Ozs7Ozs7O0dBNEJuQixTQUFTMFcsRUFBS0MsR0FHVixJQUFJL2UsRUFBVSxjQUFnQkgsRUFBYyxnQ0FBa0NrZixFQUs5RSxNQUpBaGhCLEVBQU1pQyxHQUlBLElBQUlFLE1BQU1GLEdBTXBCLFNBQVNGLEVBQU9DLEVBQVdDLEdBQ2xCRCxHQUNEK2UsRUFBSzllOzs7Ozs7Ozs7Ozs7Ozs7O0lBakhiLFNBQVdpVSxHQUNQQSxFQUFTQSxFQUFnQixNQUFJLEdBQUssUUFDbENBLEVBQVNBLEVBQWdCLE1BQUksR0FBSyxRQUNsQ0EsRUFBU0EsRUFBaUIsT0FBSSxHQUFLLFNBSHZDLENBSUdBLElBQWFBLEVBQVcsS0FzSTNCLElBQUkwSyxFQUFpQyxXQUNqQyxTQUFTQSxLQWNULE9BWkFBLEVBQWdCSyxZQUFjLFNBQVVOLEdBQ2hDQyxFQUFnQkQsVUFDaEJJLEVBQUssNEJBRVRILEVBQWdCRCxTQUFXQSxHQUUvQkMsRUFBZ0JDLFlBQWMsV0FJMUIsT0FIS0QsRUFBZ0JELFVBQ2pCSSxFQUFLLG9CQUVGSCxFQUFnQkQsVUFFcEJDLEVBZnlCLEdBcUJwQyxTQUFTTSxJQUNMLE9BQU9OLEVBQWdCQyxjQUFjSzs7Ozs7Ozs7Ozs7Ozs7OztHQW1CekMsSUFBSUMsRUFBTyxDQUlQQyxHQUFJLEtBRUpDLFVBQVcsWUFFWEMsUUFBUyxVQU9UQyxpQkFBa0IsbUJBUWxCQyxrQkFBbUIsb0JBRW5CQyxVQUFXLFlBS1hDLGVBQWdCLGlCQVFoQkMsa0JBQW1CLG9CQUtuQkMsZ0JBQWlCLGtCQUtqQkMsbUJBQW9CLHFCQXFCcEJDLG9CQUFxQixzQkFRckJDLFFBQVMsVUFnQlRDLGFBQWMsZUFFZEMsY0FBZSxnQkFLZnZRLFNBQVUsV0FRVndRLFlBQWEsY0FFYkMsVUFBVyxhQVFYQyxFQUFnQyxTQUFVL2IsR0FFMUMsU0FBUytiLEVBQWU5YixFQUFNckUsR0FDMUIsSUFBSTJELEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTStGLElBQVkvRixLQVExQyxPQVBBMEosRUFBTVUsS0FBT0EsRUFDYlYsRUFBTTNELFFBQVVBLEVBQ2hCMkQsRUFBTTFMLEtBQU8sZ0JBSWIwTCxFQUFNOEIsU0FBVyxXQUFjLE9BQU85QixFQUFNMUwsS0FBTyxXQUFhMEwsRUFBTVUsS0FBTyxNQUFRVixFQUFNM0QsU0FDcEYyRCxFQUVYLE9BWkFsRSxFQUFNMUYsVUFBVW9tQixFQUFnQi9iLEdBWXpCK2IsRUFid0IsQ0FjakNqZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkJGLFNBQVNrZ0IsRUFBdUJDLEVBQUtDLEdBQ2pDLFNBQVNDLElBQ0wsSUFBSXhpQixFQUFRLCtCQUtaLE1BSkl1aUIsSUFDQXZpQixHQUFTLElBQ1RBLEdBQVN1aUIsR0FFUCxJQUFJSCxFQUFlakIsRUFBS0ksaUJBQWtCdmhCLEdBTXBELElBQUssSUFBSXlpQixLQUZURCxFQUFrQmpuQixVQUFZK21CLEVBQUkvbUIsVUFFUCttQixFQUNuQkEsRUFBSTltQixlQUFlaW5CLEtBRW5CRCxFQUFrQkMsR0FBa0JILEVBQUlHLElBSWhELE9BQU9EOzs7Ozs7Ozs7Ozs7Ozs7O0dBbUJYLFNBQVM3VyxFQUFTdEIsRUFBS25QLEdBQ25CLE9BQU9iLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VRLEVBQUtuUCxHQUdyRCxTQUFTd25CLEVBQVU5bkIsRUFBTytuQixHQUN0QixZQUFpQmxkLElBQVY3SyxFQUFzQkEsRUFBUStuQixFQUV6QyxTQUFTQyxFQUFjdlksRUFBS1MsR0FDeEIsSUFBSyxJQUFJNVAsS0FBT21QLEVBQ1osR0FBSWhRLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3VRLEVBQUtuUCxHQUFNLENBQ2hELElBQUkybkIsRUFBTUMsT0FBTzVuQixHQUNaNm5CLE1BQU1GLElBQ1AvWCxFQUFHK1gsRUFBS3hZLEVBQUluUCxLQVU1QixTQUFTd1MsRUFBUXJELEVBQUtTLEdBQ2xCLElBQUssSUFBSTVQLEtBQU9tUCxFQUNSaFEsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLdVEsRUFBS25QLElBQzFDNFAsRUFBRzVQLEVBQUttUCxFQUFJblAsSUFJeEIsU0FBU2dSLEVBQVE3QixHQUViLElBQUssSUFBSW5QLEtBRFQ2RyxFQUFjLE1BQVBzSSxHQUE4QixpQkFBUkEsRUFBa0IsdUNBQy9CQSxFQUNaLEdBQUloUSxPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1USxFQUFLblAsR0FDMUMsT0FBTyxFQUdmLE9BQU87Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0NYLFNBQVM4bkIsRUFBZUMsRUFBY3pYLEdBQ2xDLEdBQW9CLElBQWhCQSxFQUFLalAsT0FDTCxNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjMEIsRUFBZSxzREFFekVDLEVBQWExWCxFQUFLalAsT0FBUSxZQUMxQixLQVVaLFNBQVM0bUIsRUFBMEJGLEVBQWN6WCxFQUFNNFgsR0FDbkQsR0FBSTVYLEVBQUtqUCxTQUFXNm1CLEVBQ2hCLE1BQU0sSUFBSWhCLEVBQWVqQixFQUFLSSxpQkFBa0IsWUFBYzBCLEVBQWUsZUFDekVDLEVBQWFFLEVBQWMsWUFDM0IseUJBQ0FGLEVBQWExWCxFQUFLalAsT0FBUSxZQUMxQixLQVdaLFNBQVM4bUIsRUFBNEJKLEVBQWN6WCxFQUFNOFgsR0FDckQsR0FBSTlYLEVBQUtqUCxPQUFTK21CLEVBQ2QsTUFBTSxJQUFJbEIsRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjMEIsRUFBZSx3QkFDekVDLEVBQWFJLEVBQWlCLFlBQzlCLHlCQUNBSixFQUFhMVgsRUFBS2pQLE9BQVEsWUFDMUIsS0FXWixTQUFTZ25CLEVBQTRCTixFQUFjelgsRUFBTThYLEVBQWlCRSxHQUN0RSxHQUFJaFksRUFBS2pQLE9BQVMrbUIsR0FBbUI5WCxFQUFLalAsT0FBU2luQixFQUMvQyxNQUFNLElBQUlwQixFQUFlakIsRUFBS0ksaUJBQWtCLFlBQWMwQixFQUFlLHVCQUF5QkssRUFBa0IsUUFDbkhFLEVBQWtCLG1DQUNuQk4sRUFBYTFYLEVBQUtqUCxPQUFRLFlBQzFCLEtBa0JaLFNBQVNrbkIsRUFBZ0JSLEVBQWNqVSxFQUFNMFUsRUFBVUMsR0FDbkRDLEVBQWFYLEVBQWNqVSxFQUFNNlUsRUFBUUgsR0FBWSxZQUFhQyxHQU10RSxTQUFTRyxFQUF3QmIsRUFBY2pVLEVBQU0wVSxFQUFVQyxRQUMxQ2xlLElBQWJrZSxHQUNBRixFQUFnQlIsRUFBY2pVLEVBQU0wVSxFQUFVQyxHQU90RCxTQUFTSSxFQUFrQmQsRUFBY2pVLEVBQU1nVixFQUFZTCxHQUN2REMsRUFBYVgsRUFBY2pVLEVBQU1nVixFQUFhLFVBQVdMLEdBTTdELFNBQVNNLEVBQTBCaEIsRUFBY2pVLEVBQU1nVixFQUFZTCxRQUM5Q2xlLElBQWJrZSxHQUNBSSxFQUFrQmQsRUFBY2pVLEVBQU1nVixFQUFZTCxHQWdCMUQsU0FBU08sRUFBOEJqQixFQUFjZSxFQUFZRyxFQUFpQlIsRUFBVVMsUUFDdkUzZSxJQUFia2UsR0FkUixTQUErQlYsRUFBY2UsRUFBWUcsRUFBaUJSLEVBQVVTLEdBQ2hGLEtBQU1ULGFBQW9CNW5CLE9BQ3RCLE1BQU0sSUFBSXFtQixFQUFlakIsRUFBS0ksaUJBQWtCLFlBQWMwQixFQUFlLG1CQUFxQmUsRUFBYSx1Q0FDbEVLLEVBQWlCVixJQUVsRSxJQUFLLElBQUlocUIsRUFBSSxFQUFHQSxFQUFJZ3FCLEVBQVNwbkIsU0FBVTVDLEVBQ25DLElBQUt5cUIsRUFBVVQsRUFBU2hxQixJQUNwQixNQUFNLElBQUl5b0IsRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjMEIsRUFBZSxtQkFBcUJlLEVBQWEsbUJBQ3RGRyxFQUFrQiw0QkFBOEJ4cUIsRUFBSSxTQUM5RDBxQixFQUFpQlYsRUFBU2hxQixLQU03QzJxQixDQUFzQnJCLEVBQWNlLEVBQVlHLEVBQWlCUixFQUFVUyxHQXVCbkYsU0FBU0csRUFBb0N0QixFQUFjdUIsRUFBV1IsRUFBWS9nQixFQUFPd2hCLFFBQ3ZFaGYsSUFBVnhDLEdBbEJSLFNBQXFDZ2dCLEVBQWN1QixFQUFXUixFQUFZL2dCLEVBQU93aEIsR0FFN0UsSUFEQSxJQUFJQyxFQUFzQixHQUNqQjdkLEVBQUssRUFBRzhkLEVBQWFGLEVBQVU1ZCxFQUFLOGQsRUFBV3BvQixPQUFRc0ssSUFBTSxDQUNsRSxJQUFJMk0sRUFBTW1SLEVBQVc5ZCxHQUNyQixHQUFJMk0sSUFBUXZRLEVBQ1IsT0FFSnloQixFQUFvQi9rQixLQUFLMGtCLEVBQWlCN1EsSUFFOUMsSUFBSW9SLEVBQW9CUCxFQUFpQnBoQixHQUN6QyxNQUFNLElBQUltZixFQUFlakIsRUFBS0ksaUJBQWtCLGlCQUFtQnFELEVBQW9CLHlCQUEyQjNCLEVBQWUsa0JBQ3JIZSxFQUFhLHlCQUE0QlUsRUFBb0IxZ0IsS0FBSyxPQVExRTZnQixDQUE0QjVCLEVBQWN1QixFQUFXUixFQUFZL2dCLEVBQU93aEIsR0FXaEYsU0FBU0ssRUFBbUI3QixFQUFjOEIsRUFBT3JCLEVBQVVDLEdBQ3ZELElBQUtvQixFQUFNQyxNQUFLLFNBQVVDLEdBQVcsT0FBT0EsSUFBWXRCLEtBQ3BELE1BQU0sSUFBSXZCLEVBQWVqQixFQUFLSSxpQkFBa0IsaUJBQW1COEMsRUFBaUJWLEdBQVkseUJBQzNGVixFQUFlLGNBQWdCWSxFQUFRSCxHQUFZLGlDQUN0Q3FCLEVBQU0vZ0IsS0FBSyxPQUlyQyxTQUFTNGYsRUFBYVgsRUFBY2pVLEVBQU13VixFQUFXdmhCLEdBV2pELEtBVGEsV0FBVCtMLEVBQ1FrVyxFQUFjamlCLEdBRVIscUJBQVQrTCxFQUNvQixpQkFBVi9MLEdBQWdDLEtBQVZBLFNBR3RCQSxJQUFVK0wsR0FFakIsQ0FDUixJQUFJbVcsRUFBY2QsRUFBaUJwaEIsR0FDbkMsTUFBTSxJQUFJbWYsRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjMEIsRUFBZSxtQkFBcUJ1QixFQUFZLGtCQUN0RnhWLEVBQU8saUJBQW1CbVcsSUFPMUQsU0FBU0QsRUFBY2ppQixHQUNuQixNQUF5QixpQkFBVkEsR0FDRCxPQUFWQSxJQUNDNUksT0FBTytxQixlQUFlbmlCLEtBQVc1SSxPQUFPa0IsV0FDSixPQUFqQ2xCLE9BQU8rcUIsZUFBZW5pQixJQUdsQyxTQUFTb2hCLEVBQWlCcGhCLEdBQ3RCLFFBQWN3QyxJQUFWeEMsRUFDQSxNQUFPLFlBRU4sR0FBYyxPQUFWQSxFQUNMLE1BQU8sT0FFTixHQUFxQixpQkFBVkEsRUFJWixPQUhJQSxFQUFNMUcsT0FBUyxLQUNmMEcsRUFBUUEsRUFBTW9pQixVQUFVLEVBQUcsSUFBTSxPQUU5QnpkLEtBQUtzRyxVQUFVakwsR0FFckIsR0FBcUIsaUJBQVZBLEdBQXVDLGtCQUFWQSxFQUN6QyxNQUFPLEdBQUtBLEVBRVgsR0FBcUIsaUJBQVZBLEVBQW9CLENBQ2hDLEdBQUlBLGFBQWlCbEgsTUFDakIsTUFBTyxXQUdQLElBQUl1cEIsRUFpQmhCLFNBQWdDcmlCLEdBQzVCLEdBQUlBLEVBQU05RyxZQUFhLENBQ25CLElBQ0lvcEIsRUFEZ0IsNEJBQ1FDLEtBQUt2aUIsRUFBTTlHLFlBQVl1TCxZQUNuRCxHQUFJNmQsR0FBV0EsRUFBUWhwQixPQUFTLEVBQzVCLE9BQU9ncEIsRUFBUSxHQUd2QixPQUFPLEtBekJ3QkUsQ0FBdUJ4aUIsR0FDOUMsT0FBSXFpQixFQUNPLFlBQWNBLEVBQW1CLFVBR2pDLFlBSWQsTUFBcUIsbUJBQVZyaUIsRUFDTCxhQUdBOGQsRUFBSyw4QkFBZ0M5ZCxHQWVwRCxTQUFTeWlCLEVBQWdCekMsRUFBY1MsRUFBVUMsR0FDN0MsUUFBaUJsZSxJQUFia2UsRUFDQSxNQUFNLElBQUl2QixFQUFlakIsRUFBS0ksaUJBQWtCLFlBQWMwQixFQUFlLHVCQUF5QlksRUFBUUgsR0FBWSxvQ0FRbEksU0FBU2lDLEVBQW9CMUMsRUFBY3pTLEVBQVNvVixHQUNoRGxZLEVBQVE4QyxHQUFTLFNBQVV0VixFQUFLOEQsR0FDNUIsR0FBSTRtQixFQUFZanBCLFFBQVF6QixHQUFPLEVBQzNCLE1BQU0sSUFBSWtuQixFQUFlakIsRUFBS0ksaUJBQWtCLG1CQUFxQnJtQixFQUFNLHdCQUEwQituQixFQUFlLDBCQUVoSDJDLEVBQVk1aEIsS0FBSyxVQVFqQyxTQUFTNmhCLEVBQWtCNUMsRUFBY2pVLEVBQU0wVSxFQUFVQyxHQUNyRCxJQUFJd0IsRUFBY2QsRUFBaUJWLEdBQ25DLE9BQU8sSUFBSXZCLEVBQWVqQixFQUFLSSxpQkFBa0IsWUFBYzBCLEVBQWUsbUJBQXFCWSxFQUFRSCxHQUFZLHFCQUM1RjFVLEVBQU8saUJBQW1CbVcsR0FFekQsU0FBU1csRUFBdUI3QyxFQUFjUyxFQUFVdG9CLEdBQ3BELEdBQUlBLEdBQUssRUFDTCxNQUFNLElBQUlnbkIsRUFBZWpCLEVBQUtJLGlCQUFrQixhQUFnQjBCLEVBQWUsb0JBQXVCWSxFQUFRSCxHQUFZLGtEQUFvRHRvQixFQUFJLEtBSTFMLFNBQVN5b0IsRUFBUWhCLEdBQ2IsT0FBUUEsR0FDSixLQUFLLEVBQ0QsTUFBTyxRQUNYLEtBQUssRUFDRCxNQUFPLFNBQ1gsS0FBSyxFQUNELE1BQU8sUUFDWCxRQUNJLE9BQU9BLEVBQU0sTUFNekIsU0FBU0ssRUFBYUwsRUFBS3hnQixHQUN2QixPQUFPd2dCLEVBQU0sSUFBTXhnQixHQUFlLElBQVJ3Z0IsRUFBWSxHQUFLOzs7Ozs7Ozs7Ozs7Ozs7O0dBbUIvQyxJQUFJa0QsRUFBd0IsV0FDeEIsU0FBU0EsS0FZVCxPQVZBQSxFQUFPQyxNQUFRLFdBSVgsSUFGQSxJQUFJQyxFQUFRLGlFQUNSQyxFQUFTLEdBQ0p2c0IsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLElBQ3BCdXNCLEdBQVVELEVBQU1saEIsT0FBTytILEtBQUtDLE1BQU1ELEtBQUtxWixTQUFXRixFQUFNMXBCLFNBRzVELE9BREF3RixFQUF5QixLQUFsQm1rQixFQUFPM3BCLE9BQWUsb0JBQXNCMnBCLEdBQzVDQSxHQUVKSCxFQWJnQixHQWUzQixTQUFTSyxFQUFvQkMsRUFBTUMsR0FDL0IsT0FBSUQsRUFBT0MsR0FDQyxFQUVSRCxFQUFPQyxFQUNBLEVBRUosRUFjWCxTQUFTQyxFQUFZRixFQUFNQyxHQUN2QixHQUFJRCxFQUFLOXBCLFNBQVcrcEIsRUFBTS9wQixPQUN0QixPQUFPLEVBRVgsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJMHNCLEVBQUs5cEIsT0FBUTVDLElBQzdCLElBQUswc0IsRUFBSzFzQixHQUFHNnNCLFFBQVFGLEVBQU0zc0IsSUFDdkIsT0FBTyxFQUdmLE9BQU8sRUFNWCxTQUFTOHNCLEVBQW1CL3FCLEdBRXhCLE9BQU9BLEVBQUk7Ozs7Ozs7Ozs7Ozs7Ozs7R0FvQmYsU0FBU2dyQixLQUNMLEdBQTBCLG9CQUFmQyxXQUNQLE1BQU0sSUFBSXZFLEVBQWVqQixFQUFLYyxjQUFlLHNEQUlyRCxTQUFTMkUsS0FDTCxJQUFLaEcsRUFBZ0JDLGNBQWNnRyxnQkFDL0IsTUFBTSxJQUFJekUsRUFBZWpCLEVBQUtjLGNBQWUsMkRBVXJELElBa2tCSTZFLEdBbGtCQUMsR0FBc0IsV0FDdEIsU0FBU0EsRUFBS0MsR0FDVkosS0FDQTFxQixLQUFLK3FCLGNBQWdCRCxFQXlEekIsT0F2REFELEVBQUtHLGlCQUFtQixTQUFVMWtCLEdBQzlCMmdCLEVBQTBCLHdCQUF5QjdtQixVQUFXLEdBQzlEbW5CLEVBQWdCLHdCQUF5QixTQUFVLEVBQUdqaEIsR0FDdERva0IsS0FDQSxJQUNJLElBQUlJLEVBQWVwRyxFQUFnQkMsY0FBYzlkLEtBQUtQLEdBQ3RELE9BQU8sSUFBSXVrQixFQUFLQyxHQUVwQixNQUFPdHFCLEdBQ0gsTUFBTSxJQUFJMGxCLEVBQWVqQixFQUFLSSxpQkFBa0IsZ0RBQWtEN2tCLEtBRzFHcXFCLEVBQUtJLGVBQWlCLFNBQVVDLEdBRzVCLEdBRkFqRSxFQUEwQixzQkFBdUI3bUIsVUFBVyxHQUM1RG9xQixPQUNNVSxhQUFpQlQsWUFDbkIsTUFBTWQsRUFBa0Isc0JBQXVCLGFBQWMsRUFBR3VCLEdBS3BFLElBQUlKLEVBQWVqckIsTUFBTVIsVUFBVTRSLElBQzlCclQsS0FBS3N0QixHQUFPLFNBQVVDLEdBQ3ZCLE9BQU85aUIsT0FBT0MsYUFBYTZpQixNQUUxQnJqQixLQUFLLElBQ1YsT0FBTyxJQUFJK2lCLEVBQUtDLElBRXBCRCxFQUFLeHJCLFVBQVUrckIsU0FBVyxXQUd0QixPQUZBbkUsRUFBMEIsZ0JBQWlCN21CLFVBQVcsR0FDdERzcUIsS0FDT2hHLEVBQWdCQyxjQUFjM2MsS0FBS2hJLEtBQUsrcUIsZ0JBRW5ERixFQUFLeHJCLFVBQVVnc0IsYUFBZSxXQUMxQnBFLEVBQTBCLG9CQUFxQjdtQixVQUFXLEdBQzFEb3FCLEtBRUEsSUFEQSxJQUFJYyxFQUFTLElBQUliLFdBQVd6cUIsS0FBSytxQixjQUFjMXFCLFFBQ3RDNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBSytxQixjQUFjMXFCLE9BQVE1QyxJQUMzQzZ0QixFQUFPN3RCLEdBQUt1QyxLQUFLK3FCLGNBQWMxa0IsV0FBVzVJLEdBRTlDLE9BQU82dEIsR0FFWFQsRUFBS3hyQixVQUFVbU0sU0FBVyxXQUN0QixNQUFPLGdCQUFrQnhMLEtBQUtvckIsV0FBYSxLQUUvQ1AsRUFBS3hyQixVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQy9CLE9BQU92ckIsS0FBSytxQixnQkFBa0JRLEVBQU1SLGVBTXhDRixFQUFLeHJCLFVBQVVtc0IsV0FBYSxTQUFVRCxHQUNsQyxPQUFPckIsRUFBb0JscUIsS0FBSytxQixjQUFlUSxFQUFNUixnQkFFbERGLEVBNURjLEdBcUVyQlksR0FBYXRGLEVBQXVCMEUsR0FBTSxpRUFrQjFDYSxHQWFBLFNBQXNCQyxFQUFZQyxFQUFnQkMsRUFBTUMsRUFBS0MsR0FDekQvckIsS0FBSzJyQixXQUFhQSxFQUNsQjNyQixLQUFLNHJCLGVBQWlCQSxFQUN0QjVyQixLQUFLNnJCLEtBQU9BLEVBQ1o3ckIsS0FBSzhyQixJQUFNQSxFQUNYOXJCLEtBQUsrckIsaUJBQW1CQSxHQUs1QkMsR0FBd0IsWUFFeEJDLEdBQTRCLFdBQzVCLFNBQVNBLEVBQVdDLEVBQVdDLEdBQzNCbnNCLEtBQUtrc0IsVUFBWUEsRUFDakJsc0IsS0FBS21zQixTQUFXQSxHQUFzQkgsR0FrQjFDLE9BaEJBN3RCLE9BQU9DLGVBQWU2dEIsRUFBVzVzQixVQUFXLG9CQUFxQixDQUM3RGYsSUFBSyxXQUNELE9BQU8wQixLQUFLbXNCLFdBQWFILElBRTdCM3RCLFlBQVksRUFDWmtaLGNBQWMsSUFFbEIwVSxFQUFXNXNCLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDckMsT0FBUUEsYUFBaUJVLEdBQ3JCVixFQUFNVyxZQUFjbHNCLEtBQUtrc0IsV0FDekJYLEVBQU1ZLFdBQWFuc0IsS0FBS21zQixVQUVoQ0YsRUFBVzVzQixVQUFVK3NCLFVBQVksU0FBVWIsR0FDdkMsT0FBUXJCLEVBQW9CbHFCLEtBQUtrc0IsVUFBV1gsRUFBTVcsWUFDOUNoQyxFQUFvQmxxQixLQUFLbXNCLFNBQVVaLEVBQU1ZLFdBRTFDRixFQXJCb0IsR0E4QzNCSSxHQUFnQyxXQUNoQyxTQUFTQSxFQUFlQyxFQUFlQyxHQUNuQyxJQUFJN2lCLEVBQVExSixLQUNaQSxLQUFLc3NCLGNBQWdCQSxFQUNqQkMsSUFDQUEsRUFBcUJDLHNCQUF3QixTQUFVQyxHQUNuRCxPQUFPL2lCLEVBQU1nakIsaUJBQWlCRCxJQUVsQ3pzQixLQUFLMnNCLHVCQUF5QixTQUFVRixHQUNwQyxPQUFPRixFQUFxQkssb0JBQW9CSCxLQWdCNUQsT0FaQUosRUFBZWh0QixVQUFVcXRCLGlCQUFtQixTQUFVRyxHQUVsRCxPQURBN3NCLEtBQUtzc0IsY0FBZ0IxYixLQUFLa2MsSUFBSUQsRUFBdUI3c0IsS0FBS3NzQixlQUNuRHRzQixLQUFLc3NCLGVBRWhCRCxFQUFlaHRCLFVBQVUrQyxLQUFPLFdBQzVCLElBQUkycUIsSUFBYy9zQixLQUFLc3NCLGNBSXZCLE9BSEl0c0IsS0FBSzJzQix3QkFDTDNzQixLQUFLMnNCLHVCQUF1QkksR0FFekJBLEdBRVhWLEVBQWVXLFNBQVcsRUFDbkJYLEVBekJ3QixHQWdEL0JZLEdBQTBCLFdBQzFCLFNBQVNBLEVBQVNDLEVBQVVwZ0IsRUFBUXpNLFFBQ2pCa0osSUFBWHVELEVBQ0FBLEVBQVMsRUFFSkEsRUFBU29nQixFQUFTN3NCLFFBQ3ZCd2tCLEVBQUssVUFBWS9YLEVBQVMsaUJBQW1Cb2dCLEVBQVM3c0IsYUFFM0NrSixJQUFYbEosRUFDQUEsRUFBUzZzQixFQUFTN3NCLE9BQVN5TSxFQUV0QnpNLEVBQVM2c0IsRUFBUzdzQixPQUFTeU0sR0FDaEMrWCxFQUFLLFVBQVl4a0IsRUFBUyxrQkFBb0I2c0IsRUFBUzdzQixPQUFTeU0sSUFFcEU5TSxLQUFLa3RCLFNBQVdBLEVBQ2hCbHRCLEtBQUs4TSxPQUFTQSxFQUNkOU0sS0FBS210QixJQUFNOXNCLEVBcUdmLE9BbkdBbEMsT0FBT0MsZUFBZTZ1QixFQUFTNXRCLFVBQVcsU0FBVSxDQUNoRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLbXRCLEtBRWhCOXVCLFlBQVksRUFDWmtaLGNBQWMsSUFFbEIwVixFQUFTNXRCLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDbkMsT0FBNEMsSUFBckMwQixFQUFTRyxXQUFXcHRCLEtBQU11ckIsSUFFckMwQixFQUFTNXRCLFVBQVVndUIsTUFBUSxTQUFVQyxHQUNqQyxJQUFJSixFQUFXbHRCLEtBQUtrdEIsU0FBUzloQixNQUFNcEwsS0FBSzhNLE9BQVE5TSxLQUFLdXRCLFNBU3JELE9BUklELGFBQXNCTCxFQUN0QkssRUFBVzliLFNBQVEsU0FBVWdjLEdBQ3pCTixFQUFTenBCLEtBQUsrcEIsTUFJbEJOLEVBQVN6cEIsS0FBSzZwQixHQUVYdHRCLEtBQUt5dEIsVUFBVVAsSUFHMUJELEVBQVM1dEIsVUFBVWt1QixNQUFRLFdBQ3ZCLE9BQU92dEIsS0FBSzhNLE9BQVM5TSxLQUFLSyxRQUU5QjRzQixFQUFTNXRCLFVBQVVxdUIsU0FBVyxTQUFVQyxHQUdwQyxPQUZBQSxPQUFnQnBrQixJQUFUb2tCLEVBQXFCLEVBQUlBLEVBQ2hDOW5CLEVBQU83RixLQUFLSyxRQUFVc3RCLEVBQU0sNENBQ3JCM3RCLEtBQUt5dEIsVUFBVXp0QixLQUFLa3RCLFNBQVVsdEIsS0FBSzhNLE9BQVM2Z0IsRUFBTTN0QixLQUFLSyxPQUFTc3RCLElBRTNFVixFQUFTNXRCLFVBQVV1dUIsUUFBVSxXQUV6QixPQURBL25CLEdBQVE3RixLQUFLZ1EsVUFBVyxzQ0FDakJoUSxLQUFLeXRCLFVBQVV6dEIsS0FBS2t0QixTQUFVbHRCLEtBQUs4TSxPQUFROU0sS0FBS0ssT0FBUyxJQUVwRTRzQixFQUFTNXRCLFVBQVV3dUIsYUFBZSxXQUU5QixPQURBaG9CLEdBQVE3RixLQUFLZ1EsVUFBVywyQ0FDakJoUSxLQUFLa3RCLFNBQVNsdEIsS0FBSzhNLFNBRTlCbWdCLEVBQVM1dEIsVUFBVXl1QixZQUFjLFdBQzdCLE9BQU85dEIsS0FBSzFCLElBQUkwQixLQUFLSyxPQUFTLElBRWxDNHNCLEVBQVM1dEIsVUFBVWYsSUFBTSxTQUFVNmQsR0FFL0IsT0FEQXRXLEVBQU9zVyxFQUFRbmMsS0FBS0ssT0FBUSxzQkFDckJMLEtBQUtrdEIsU0FBU2x0QixLQUFLOE0sT0FBU3FQLElBRXZDOFEsRUFBUzV0QixVQUFVMlEsUUFBVSxXQUN6QixPQUF1QixJQUFoQmhRLEtBQUtLLFFBRWhCNHNCLEVBQVM1dEIsVUFBVTB1QixXQUFhLFNBQVV4QyxHQUN0QyxHQUFJQSxFQUFNbHJCLE9BQVNMLEtBQUtLLE9BQ3BCLE9BQU8sRUFFWCxJQUFLLElBQUk1QyxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLSyxPQUFRNUMsSUFDN0IsR0FBSXVDLEtBQUsxQixJQUFJYixLQUFPOHRCLEVBQU1qdEIsSUFBSWIsR0FDMUIsT0FBTyxFQUdmLE9BQU8sR0FFWHd2QixFQUFTNXRCLFVBQVUydUIsb0JBQXNCLFNBQVVDLEdBQy9DLEdBQUlqdUIsS0FBS0ssT0FBUyxJQUFNNHRCLEVBQWU1dEIsT0FDbkMsT0FBTyxFQUVYLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUtLLE9BQVE1QyxJQUM3QixHQUFJdUMsS0FBSzFCLElBQUliLEtBQU93d0IsRUFBZTN2QixJQUFJYixHQUNuQyxPQUFPLEVBR2YsT0FBTyxHQUVYd3ZCLEVBQVM1dEIsVUFBVW1TLFFBQVUsU0FBVTVDLEdBQ25DLElBQUssSUFBSW5SLEVBQUl1QyxLQUFLOE0sT0FBUW9oQixFQUFNbHVCLEtBQUt1dEIsUUFBUzl2QixFQUFJeXdCLEVBQUt6d0IsSUFDbkRtUixFQUFHNU8sS0FBS2t0QixTQUFTenZCLEtBR3pCd3ZCLEVBQVM1dEIsVUFBVTRiLFFBQVUsV0FDekIsT0FBT2piLEtBQUtrdEIsU0FBUzloQixNQUFNcEwsS0FBSzhNLE9BQVE5TSxLQUFLdXRCLFVBRWpETixFQUFTRyxXQUFhLFNBQVVlLEVBQUlDLEdBRWhDLElBREEsSUFBSWpCLEVBQU12YyxLQUFLeWQsSUFBSUYsRUFBRzl0QixPQUFRK3RCLEVBQUcvdEIsUUFDeEI1QyxFQUFJLEVBQUdBLEVBQUkwdkIsRUFBSzF2QixJQUFLLENBQzFCLElBQUkwc0IsRUFBT2dFLEVBQUc3dkIsSUFBSWIsR0FDZDJzQixFQUFRZ0UsRUFBRzl2QixJQUFJYixHQUNuQixHQUFJMHNCLEVBQU9DLEVBQ1AsT0FBUSxFQUVaLEdBQUlELEVBQU9DLEVBQ1AsT0FBTyxFQUdmLE9BQUkrRCxFQUFHOXRCLE9BQVMrdEIsRUFBRy90QixRQUNQLEVBRVI4dEIsRUFBRzl0QixPQUFTK3RCLEVBQUcvdEIsT0FDUixFQUVKLEdBRUo0c0IsRUFySGtCLEdBMkh6QnFCLEdBQThCLFNBQVVua0IsR0FFeEMsU0FBU21rQixJQUNMLE9BQWtCLE9BQVhua0IsR0FBbUJBLEVBQU83SixNQUFNTixLQUFNSSxZQUFjSixLQThCL0QsT0FoQ0F3RixFQUFNMUYsVUFBVXd1QixFQUFjbmtCLEdBSTlCbWtCLEVBQWFqdkIsVUFBVW91QixVQUFZLFNBQVVQLEVBQVVwZ0IsRUFBUXpNLEdBQzNELE9BQU8sSUFBSWl1QixFQUFhcEIsRUFBVXBnQixFQUFRek0sSUFFOUNpdUIsRUFBYWp2QixVQUFVa3ZCLGdCQUFrQixXQUlyQyxPQUFPdnVCLEtBQUtpYixVQUFVblQsS0FBSyxNQUUvQndtQixFQUFhanZCLFVBQVVtTSxTQUFXLFdBQzlCLE9BQU94TCxLQUFLdXVCLG1CQUtoQkQsRUFBYUUsV0FBYSxTQUFVQyxHQUloQyxHQUFJQSxFQUFLaHVCLFFBQVEsT0FBUyxFQUN0QixNQUFNLElBQUl5bEIsRUFBZWpCLEVBQUtJLGlCQUFrQixpQkFBbUJvSixFQUFPLHlDQUs5RSxPQUFPLElBQUlILEVBRElHLEVBQUt2aUIsTUFBTSxLQUFLcUosUUFBTyxTQUFVaVksR0FBVyxPQUFPQSxFQUFRbnRCLE9BQVMsT0FHdkZpdUIsRUFBYUksV0FBYSxJQUFJSixFQUFhLElBQ3BDQSxFQWpDc0IsQ0FrQy9CckIsSUFDRTBCLEdBQW1CLDJCQUVuQkMsR0FBMkIsU0FBVXprQixHQUVyQyxTQUFTeWtCLElBQ0wsT0FBa0IsT0FBWHprQixHQUFtQkEsRUFBTzdKLE1BQU1OLEtBQU1JLFlBQWNKLEtBOEYvRCxPQWhHQXdGLEVBQU0xRixVQUFVOHVCLEVBQVd6a0IsR0FJM0J5a0IsRUFBVXZ2QixVQUFVb3VCLFVBQVksU0FBVVAsRUFBVXBnQixFQUFRek0sR0FDeEQsT0FBTyxJQUFJdXVCLEVBQVUxQixFQUFVcGdCLEVBQVF6TSxJQU0zQ3V1QixFQUFVQyxrQkFBb0IsU0FBVXJCLEdBQ3BDLE9BQU9tQixHQUFpQnhlLEtBQUtxZCxJQUVqQ29CLEVBQVV2dkIsVUFBVWt2QixnQkFBa0IsV0FDbEMsT0FBT3Z1QixLQUFLaWIsVUFDUGhLLEtBQUksU0FBVTlLLEdBS2YsT0FKQUEsRUFBTUEsRUFBSW1GLFFBQVEsS0FBTSxRQUFRQSxRQUFRLElBQUssT0FDeENzakIsRUFBVUMsa0JBQWtCMW9CLEtBQzdCQSxFQUFNLElBQU1BLEVBQU0sS0FFZkEsS0FFTjJCLEtBQUssTUFFZDhtQixFQUFVdnZCLFVBQVVtTSxTQUFXLFdBQzNCLE9BQU94TCxLQUFLdXVCLG1CQUtoQkssRUFBVXZ2QixVQUFVeXZCLFdBQWEsV0FDN0IsT0FBdUIsSUFBaEI5dUIsS0FBS0ssUUFyTUksYUFxTVlMLEtBQUsxQixJQUFJLElBS3pDc3dCLEVBQVVHLFNBQVcsV0FDakIsT0FBTyxJQUFJSCxFQUFVLENBM01MLGNBdU5wQkEsRUFBVUksaUJBQW1CLFNBQVVQLEdBYW5DLElBWkEsSUFBSXZCLEVBQVcsR0FDWCtCLEVBQVUsR0FDVnh4QixFQUFJLEVBQ0p5eEIsRUFBb0IsV0FDcEIsR0FBdUIsSUFBbkJELEVBQVE1dUIsT0FDUixNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQix1QkFBeUJvSixFQUFPLDZFQUdwRnZCLEVBQVN6cEIsS0FBS3dyQixHQUNkQSxFQUFVLElBRVZFLEdBQWMsRUFDWDF4QixFQUFJZ3hCLEVBQUtwdUIsUUFBUSxDQUNwQixJQUFJdkMsRUFBSTJ3QixFQUFLaHhCLEdBQ2IsR0FBVSxPQUFOSyxFQUFZLENBQ1osR0FBSUwsRUFBSSxJQUFNZ3hCLEVBQUtwdUIsT0FDZixNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQix1Q0FBeUNvSixHQUU3RixJQUFJcnNCLEVBQU9xc0IsRUFBS2h4QixFQUFJLEdBQ3BCLEdBQWUsT0FBVDJFLEdBQTBCLE1BQVRBLEdBQXlCLE1BQVRBLEVBQ25DLE1BQU0sSUFBSThqQixFQUFlakIsRUFBS0ksaUJBQWtCLHFDQUF1Q29KLEdBRTNGUSxHQUFXN3NCLEVBQ1gzRSxHQUFLLE1BRU0sTUFBTkssR0FDTHF4QixHQUFlQSxFQUNmMXhCLEtBRVcsTUFBTkssR0FBY3F4QixHQUtuQkYsR0FBV254QixFQUNYTCxNQUxBeXhCLElBQ0F6eEIsS0FRUixHQURBeXhCLElBQ0lDLEVBQ0EsTUFBTSxJQUFJakosRUFBZWpCLEVBQUtJLGlCQUFrQiwyQkFBNkJvSixHQUVqRixPQUFPLElBQUlHLEVBQVUxQixJQUV6QjBCLEVBQVVGLFdBQWEsSUFBSUUsRUFBVSxJQUM5QkEsRUFqR21CLENBa0c1QjNCLElBa0JFbUMsR0FBNkIsV0FDN0IsU0FBU0EsRUFBWVgsR0FDakJ6dUIsS0FBS3l1QixLQUFPQSxFQUNaNW9CLEVBQU91cEIsRUFBWUMsY0FBY1osR0FBTyx1REFDcENBLEVBQUt4VCxVQUFVblQsS0FBSyxNQXVDNUIsT0FwQ0FzbkIsRUFBWS92QixVQUFVaXdCLGdCQUFrQixTQUFVQyxHQUM5QyxPQUFRdnZCLEtBQUt5dUIsS0FBS3B1QixRQUFVLEdBQ3hCTCxLQUFLeXVCLEtBQUtud0IsSUFBSTBCLEtBQUt5dUIsS0FBS3B1QixPQUFTLEtBQU9rdkIsR0FFaERILEVBQVkvdkIsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN0QyxPQUFrQixPQUFWQSxHQUFxRSxJQUFuRCtDLEdBQWFsQixXQUFXcHRCLEtBQUt5dUIsS0FBTWxELEVBQU1rRCxPQUV2RVcsRUFBWS92QixVQUFVbU0sU0FBVyxXQUM3QixPQUFPeEwsS0FBS3l1QixLQUFLampCLFlBRXJCNGpCLEVBQVloQyxXQUFhLFNBQVVvQyxFQUFJQyxHQUNuQyxPQUFPbkIsR0FBYWxCLFdBQVdvQyxFQUFHZixLQUFNZ0IsRUFBR2hCLE9BRS9DVyxFQUFZQyxjQUFnQixTQUFVWixHQUNsQyxPQUFPQSxFQUFLcHVCLE9BQVMsR0FBTSxHQVEvQit1QixFQUFZTSxhQUFlLFNBQVV4QyxHQUNqQyxPQUFPLElBQUlrQyxFQUFZLElBQUlkLEdBQWFwQixFQUFTOWhCLFdBU3JEZ2tCLEVBQVlPLGVBQWlCLFNBQVVsQixHQUNuQyxPQUFPLElBQUlXLEVBQVlkLEdBQWFFLFdBQVdDLEtBRW5EVyxFQUFZUSxNQUFRLElBQUlSLEVBQVksSUFBSWQsR0FBYSxLQUM5Q2MsRUEzQ3FCLEdBOEQ1QjNsQixHQUNBLFdBQ0ksSUFBSUMsRUFBUTFKLEtBQ1pBLEtBQUsySixRQUFVLElBQUk1SCxTQUFRLFNBQVVDLEVBQVNDLEdBQzFDeUgsRUFBTTFILFFBQVVBLEVBQ2hCMEgsRUFBTXpILE9BQVNBLE9BOEIzQixTQUFXMm9CLEdBRVBBLEVBQWEsSUFBSSxNQU9qQkEsRUFBMEIsaUJBQUkscUJBQzlCQSxFQUF1Qyw4QkFBSSxtQ0FDM0NBLEVBQXlCLGdCQUFJLG9CQUM3QkEsRUFBc0MsNkJBQUksa0NBTTFDQSxFQUE0QixtQkFBSSx1QkFLaENBLEVBQStCLHNCQUFJLDBCQUVuQ0EsRUFBOEIscUJBQUkseUJBS2xDQSxFQUEwQixpQkFBSSxvQkE5QmxDLENBK0JHQSxLQUFZQSxHQUFVLEtBUXpCLElBQUlpRixHQUFrQyxXQUNsQyxTQUFTQSxFQUFpQkMsRUFBWUMsRUFBU0MsRUFBYzFzQixFQUFJMnNCLEdBQzdEandCLEtBQUs4dkIsV0FBYUEsRUFDbEI5dkIsS0FBSyt2QixRQUFVQSxFQUNmL3ZCLEtBQUtnd0IsYUFBZUEsRUFDcEJod0IsS0FBS3NELEdBQUtBLEVBQ1Z0RCxLQUFLaXdCLGdCQUFrQkEsRUFDdkJqd0IsS0FBS2lVLFNBQVcsSUFBSXhLLEdBQ3BCekosS0FBS3dDLEtBQU94QyxLQUFLaVUsU0FBU3RLLFFBQVFuSCxLQUFLdkQsS0FBS2UsS0FBS2lVLFNBQVN0SyxTQUMxRDNKLEtBQUs4SixNQUFROUosS0FBS2lVLFNBQVN0SyxRQUFRRyxNQUFNN0ssS0FBS2UsS0FBS2lVLFNBQVN0SyxTQUk1RDNKLEtBQUtpVSxTQUFTdEssUUFBUUcsT0FBTSxTQUFVZ0YsT0F1RTFDLE9BdkRBK2dCLEVBQWlCSyxrQkFBb0IsU0FBVUosRUFBWUMsRUFBU0ksRUFBUzdzQixFQUFJMnNCLEdBQzdFLElBQ0lHLEVBQVksSUFBSVAsRUFBaUJDLEVBQVlDLEVBRGhDMW1CLEtBQUtzSCxNQUFRd2YsRUFDd0M3c0IsRUFBSTJzQixHQUUxRSxPQURBRyxFQUFVQyxNQUFNRixHQUNUQyxHQU1YUCxFQUFpQnh3QixVQUFVZ3hCLE1BQVEsU0FBVUYsR0FDekMsSUFBSXptQixFQUFRMUosS0FDWkEsS0FBS3N3QixZQUFjQyxZQUFXLFdBQWMsT0FBTzdtQixFQUFNOG1CLHVCQUF5QkwsSUFNdEZOLEVBQWlCeHdCLFVBQVVveEIsVUFBWSxXQUNuQyxPQUFPendCLEtBQUt3d0Isc0JBU2hCWCxFQUFpQnh3QixVQUFVcXhCLE9BQVMsU0FBVUMsR0FDakIsT0FBckIzd0IsS0FBS3N3QixjQUNMdHdCLEtBQUs0d0IsZUFDTDV3QixLQUFLaVUsU0FBU2hTLE9BQU8sSUFBSWlrQixFQUFlakIsRUFBS0UsVUFBVyx1QkFBeUJ3TCxFQUFTLEtBQU9BLEVBQVMsUUFHbEhkLEVBQWlCeHdCLFVBQVVteEIsbUJBQXFCLFdBQzVDLElBQUk5bUIsRUFBUTFKLEtBQ1pBLEtBQUs4dkIsV0FBV2Usa0JBQWlCLFdBQzdCLE9BQTBCLE9BQXRCbm5CLEVBQU00bUIsYUFDTjVtQixFQUFNa25CLGVBQ0NsbkIsRUFBTXBHLEtBQUtkLE1BQUssU0FBVUYsR0FDN0IsT0FBT29ILEVBQU11SyxTQUFTalMsUUFBUU0sT0FJM0JQLFFBQVFDLGNBSTNCNnRCLEVBQWlCeHdCLFVBQVV1eEIsYUFBZSxXQUNiLE9BQXJCNXdCLEtBQUtzd0IsY0FDTHR3QixLQUFLaXdCLGdCQUFnQmp3QixNQUNyQjR3QixhQUFhNXdCLEtBQUtzd0IsYUFDbEJ0d0IsS0FBS3N3QixZQUFjLE9BR3BCVCxFQXBGMEIsR0FzRmpDaUIsR0FBNEIsV0FDNUIsU0FBU0EsSUFFTDl3QixLQUFLK3dCLEtBQU9odkIsUUFBUUMsVUFHcEJoQyxLQUFLZ3hCLGlCQUFrQixFQUd2Qmh4QixLQUFLaXhCLGtCQUFvQixHQUV6Qmp4QixLQUFLOGtCLFFBQVUsS0FHZjlrQixLQUFLa3hCLHFCQUFzQixFQUUzQmx4QixLQUFLbXhCLGVBQWlCLEdBcU0xQixPQW5NQWh6QixPQUFPQyxlQUFlMHlCLEVBQVd6eEIsVUFBVyxpQkFBa0IsQ0FHMURmLElBQUssV0FDRCxPQUFPMEIsS0FBS2d4QixpQkFFaEIzeUIsWUFBWSxFQUNaa1osY0FBYyxJQU1sQnVaLEVBQVd6eEIsVUFBVXd4QixpQkFBbUIsU0FBVXZ0QixHQUU5Q3RELEtBQUtveEIsUUFBUTl0QixJQU1qQnd0QixFQUFXenhCLFVBQVVneUIsa0NBQW9DLFNBQVUvdEIsR0FDL0R0RCxLQUFLc3hCLGtCQUVMdHhCLEtBQUt1eEIsZ0JBQWdCanVCLElBTXpCd3RCLEVBQVd6eEIsVUFBVW15Qix5QkFBMkIsU0FBVWx1QixHQUV0RCxPQURBdEQsS0FBS3N4QixrQkFDRXR4QixLQUFLdXhCLGdCQUFnQmp1QixJQVNoQ3d0QixFQUFXenhCLFVBQVVveUIsMkJBQTZCLFNBQVVudUIsR0FDeEQsT0FBT2tDLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELE9BREEvQyxLQUFLc3hCLGtCQUNDdHhCLEtBQUtneEIsZ0JBQXdCLENBQUMsRUFBYSxJQUNqRGh4QixLQUFLZ3hCLGlCQUFrQixFQUNoQixDQUFDLEVBQWFoeEIsS0FBS3d4Qix5QkFBeUJsdUIsS0FDdkQsS0FBSyxFQUNEMkgsRUFBR2pJLE9BQ0hpSSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFBRyxNQUFPLENBQUMsV0FTaEMrdEIsRUFBV3p4QixVQUFVK3hCLFFBQVUsU0FBVTl0QixHQUVyQyxPQURBdEQsS0FBS3N4QixrQkFDRHR4QixLQUFLZ3hCLGdCQUVFLElBQUlqdkIsU0FBUSxTQUFVQyxPQUUxQmhDLEtBQUt1eEIsZ0JBQWdCanVCLElBRWhDd3RCLEVBQVd6eEIsVUFBVWt5QixnQkFBa0IsU0FBVWp1QixHQUM3QyxJQUFJb0csRUFBUTFKLEtBQ1IweEIsRUFBVTF4QixLQUFLK3dCLEtBQUt2dUIsTUFBSyxXQUV6QixPQURBa0gsRUFBTXduQixxQkFBc0IsRUFDckI1dEIsSUFDRndHLE9BQU0sU0FBVTZuQixHQUNqQmpvQixFQUFNb2IsUUFBVTZNLEVBQ2hCam9CLEVBQU13bkIscUJBQXNCLEVBQzVCLElBQUluckIsRUFBVTRyQixFQUFRQyxPQUFTRCxFQUFRNXJCLFNBQVcsR0FhbEQsTUFaQWpDLEVBQU0sNkJBQThCaUMsR0FJaENBLEVBQVF0RixRQUFRLGtDQUFvQyxHQUNwRDh2QixZQUFXLFdBQ1AsTUFBTW9CLElBQ1AsR0FLREEsS0FFTG52QixNQUFLLFNBQVVGLEdBRWhCLE9BREFvSCxFQUFNd25CLHFCQUFzQixFQUNyQjV1QixRQUlmLE9BREF0QyxLQUFLK3dCLEtBQU9XLEVBQ0xBLEdBT1haLEVBQVd6eEIsVUFBVXd5QixrQkFBb0IsU0FBVTlCLEVBQVNJLEVBQVM3c0IsR0FDakUsSUFBSW9HLEVBQVExSixLQUNaQSxLQUFLc3hCLGtCQUNMenJCLEVBQU9zcUIsR0FBVyxFQUFHLCtEQUFpRUEsR0FFbEZud0IsS0FBS214QixlQUFlMXdCLFFBQVFzdkIsSUFBWSxJQUN4Q0ksRUFBVSxHQUVkLElBQUlDLEVBQVlQLEdBQWlCSyxrQkFBa0Jsd0IsS0FBTSt2QixFQUFTSSxFQUFTN3NCLEdBQUksU0FBVXd1QixHQUNyRixPQUFPcG9CLEVBQU1xb0IsdUJBQXVCRCxNQUd4QyxPQURBOXhCLEtBQUtpeEIsa0JBQWtCeHRCLEtBQUsyc0IsR0FDckJBLEdBRVhVLEVBQVd6eEIsVUFBVWl5QixnQkFBa0IsV0FDL0J0eEIsS0FBSzhrQixTQUNMRCxFQUFLLGtDQUNBN2tCLEtBQUs4a0IsUUFBUThNLE9BQVM1eEIsS0FBSzhrQixRQUFRL2UsV0FTaEQrcUIsRUFBV3p4QixVQUFVMnlCLDBCQUE0QixXQUM3Q25zQixFQUFPN0YsS0FBS2t4QixvQkFBcUIsc0VBTXJDSixFQUFXenhCLFVBQVU0eUIsTUFBUSxXQUV6QixPQUFPanlCLEtBQUt3eEIsMEJBQXlCLFdBQWMsT0FBT3p2QixRQUFRQyxjQU10RTh1QixFQUFXenhCLFVBQVU2eUIseUJBQTJCLFNBQVVuQyxHQUN0RCxJQUFLLElBQUlwbEIsRUFBSyxFQUFHTSxFQUFLakwsS0FBS2l4QixrQkFBbUJ0bUIsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBRWhFLEdBRFNNLEVBQUdOLEdBQ0xvbEIsVUFBWUEsRUFDZixPQUFPLEVBR2YsT0FBTyxHQVVYZSxFQUFXenhCLFVBQVU4eUIsMEJBQTRCLFNBQVVDLEdBQ3ZELElBQUkxb0IsRUFBUTFKLEtBRVosT0FBT0EsS0FBS2l5QixRQUFRenZCLE1BQUssV0FDckJxRCxFQUFPdXNCLElBQWdCeEgsR0FBUXlILEtBQzNCM29CLEVBQU13b0IseUJBQXlCRSxHQUFjLDJDQUE2Q0EsR0FFOUYxb0IsRUFBTXVuQixrQkFBa0JxQixNQUFLLFNBQVVsdUIsRUFBRzFFLEdBQUssT0FBTzBFLEVBQUU0ckIsYUFBZXR3QixFQUFFc3dCLGdCQUN6RSxJQUFLLElBQUlybEIsRUFBSyxFQUFHTSxFQUFLdkIsRUFBTXVuQixrQkFBbUJ0bUIsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQ2pFLElBQUlySCxFQUFLMkgsRUFBR04sR0FFWixHQURBckgsRUFBR210QixZQUNDMkIsSUFBZ0J4SCxHQUFReUgsS0FBTy91QixFQUFHeXNCLFVBQVlxQyxFQUM5QyxNQUdSLE9BQU8xb0IsRUFBTXVvQixZQU1yQm5CLEVBQVd6eEIsVUFBVWt6QixxQkFBdUIsU0FBVXhDLEdBQ2xEL3ZCLEtBQUtteEIsZUFBZTF0QixLQUFLc3NCLElBRzdCZSxFQUFXenhCLFVBQVUweUIsdUJBQXlCLFNBQVV6dUIsR0FFcEQsSUFBSTZZLEVBQVFuYyxLQUFLaXhCLGtCQUFrQnh3QixRQUFRNkMsR0FDM0N1QyxFQUFPc1csR0FBUyxFQUFHLGdDQUNuQm5jLEtBQUtpeEIsa0JBQWtCdE8sT0FBT3hHLEVBQU8sSUFFbEMyVSxFQXJOb0IsR0F3TzNCMEIsR0FBYSxJQUNiQyxHQUF1QixJQUN2QkMsR0FBYSxJQUNiQyxHQUFnQixJQUlwQixTQUFTQyxHQUFPbkUsR0FFWixJQURBLElBQUluc0IsRUFBUyxHQUNKN0UsRUFBSSxFQUFHQSxFQUFJZ3hCLEVBQUtwdUIsT0FBUTVDLElBQ3pCNkUsRUFBT2pDLE9BQVMsSUFDaEJpQyxFQUFTdXdCLEdBQWdCdndCLElBRTdCQSxFQUFTd3dCLEdBQWNyRSxFQUFLbndCLElBQUliLEdBQUk2RSxHQUV4QyxPQUFPdXdCLEdBQWdCdndCLEdBRzNCLFNBQVN3d0IsR0FBY3RGLEVBQVN1RixHQUc1QixJQUZBLElBQUl6d0IsRUFBU3l3QixFQUNUMXlCLEVBQVNtdEIsRUFBUW50QixPQUNaNUMsRUFBSSxFQUFHQSxFQUFJNEMsRUFBUTVDLElBQUssQ0FDN0IsSUFBSUssRUFBSTB2QixFQUFRM2tCLE9BQU9wTCxHQUN2QixPQUFRSyxHQUNKLElBQUssS0FDRHdFLEdBQVVrd0IsR0FBYUUsR0FDdkIsTUFDSixLQUFLRixHQUNEbHdCLEdBQVVrd0IsR0FBYUcsR0FDdkIsTUFDSixRQUNJcndCLEdBQVV4RSxHQUd0QixPQUFPd0UsRUFHWCxTQUFTdXdCLEdBQWdCdndCLEdBQ3JCLE9BQU9BLEVBQVNrd0IsR0FBYUMsR0FRakMsU0FBUzdtQixHQUFPNmlCLEdBR1osSUFBSXB1QixFQUFTb3VCLEVBQUtwdUIsT0FFbEIsR0FEQXdGLEVBQU94RixHQUFVLEVBQUcsZ0JBQWtCb3VCLEdBQ3ZCLElBQVhwdUIsRUFFQSxPQURBd0YsRUFBTzRvQixFQUFLNWxCLE9BQU8sS0FBTzJwQixJQUFjL0QsRUFBSzVsQixPQUFPLEtBQU80cEIsR0FBc0Isa0JBQW9CaEUsRUFBTyxpQkFDckdILEdBQWFJLFdBT3hCLElBSEEsSUFBSXNFLEVBQTRCM3lCLEVBQVMsRUFDckM2c0IsRUFBVyxHQUNYK0YsRUFBaUIsR0FDWjVDLEVBQVEsRUFBR0EsRUFBUWh3QixHQUFTLENBR2pDLElBQUk2dEIsRUFBTU8sRUFBS2h1QixRQUFRK3hCLEdBQVluQyxHQUtuQyxRQUpJbkMsRUFBTSxHQUFLQSxFQUFNOEUsSUFDakJuTyxFQUFLLG1DQUFxQzRKLEVBQU8sS0FFMUNBLEVBQUs1bEIsT0FBT3FsQixFQUFNLElBRXpCLEtBQUt1RSxHQUNELElBQUlTLEVBQWV6RSxFQUFLdEYsVUFBVWtILEVBQU9uQyxHQUNyQ1YsT0FBVSxFQUNnQixJQUExQnlGLEVBQWU1eUIsT0FHZm10QixFQUFVMEYsR0FJVjFGLEVBREF5RixHQUFrQkMsRUFFbEJELEVBQWlCLElBRXJCL0YsRUFBU3pwQixLQUFLK3BCLEdBQ2QsTUFDSixLQUFLa0YsR0FDRE8sR0FBa0J4RSxFQUFLdEYsVUFBVWtILEVBQU9uQyxHQUN4QytFLEdBQWtCLEtBQ2xCLE1BQ0osS0FBS04sR0FFRE0sR0FBa0J4RSxFQUFLdEYsVUFBVWtILEVBQU9uQyxFQUFNLEdBQzlDLE1BQ0osUUFDSXJKLEVBQUssbUNBQXFDNEosRUFBTyxLQUV6RDRCLEVBQVFuQyxFQUFNLEVBRWxCLE9BQU8sSUFBSUksR0FBYXBCOzs7Ozs7Ozs7Ozs7Ozs7O0dBbUI1QixJQUFJaUcsR0FBMkIsV0FDM0IsU0FBU0EsRUFBVUMsRUFBU0MsR0FHeEIsR0FGQXJ6QixLQUFLb3pCLFFBQVVBLEVBQ2ZwekIsS0FBS3F6QixZQUFjQSxFQUNmQSxFQUFjLEVBQ2QsTUFBTSxJQUFJbk4sRUFBZWpCLEVBQUtJLGlCQUFrQix1Q0FBeUNnTyxHQUU3RixHQUFJQSxHQUFlLElBQ2YsTUFBTSxJQUFJbk4sRUFBZWpCLEVBQUtJLGlCQUFrQix1Q0FBeUNnTyxHQUc3RixHQUFJRCxHQUFXLFlBQ1gsTUFBTSxJQUFJbE4sRUFBZWpCLEVBQUtJLGlCQUFrQixtQ0FBcUMrTixHQUd6RixHQUFJQSxHQUFXLGFBQ1gsTUFBTSxJQUFJbE4sRUFBZWpCLEVBQUtJLGlCQUFrQixtQ0FBcUMrTixHQW9DN0YsT0FqQ0FELEVBQVV4aUIsSUFBTSxXQUNaLE9BQU93aUIsRUFBVUcsV0FBV2pxQixLQUFLc0gsUUFFckN3aUIsRUFBVUksU0FBVyxTQUFVQyxHQUMzQixPQUFPTCxFQUFVRyxXQUFXRSxFQUFLbHFCLFlBRXJDNnBCLEVBQVVHLFdBQWEsU0FBVUcsR0FDN0IsSUFBSUwsRUFBVXhpQixLQUFLQyxNQUFNNGlCLEVBQWUsS0FFeEMsT0FBTyxJQUFJTixFQUFVQyxFQUR5QixLQUFqQ0ssRUFBeUIsSUFBVkwsS0FHaENELEVBQVU5ekIsVUFBVXEwQixPQUFTLFdBQ3pCLE9BQU8sSUFBSXJxQixLQUFLckosS0FBSzJ6QixhQUV6QlIsRUFBVTl6QixVQUFVczBCLFNBQVcsV0FDM0IsT0FBc0IsSUFBZjN6QixLQUFLb3pCLFFBQWlCcHpCLEtBQUtxekIsWUFBYyxLQUVwREYsRUFBVTl6QixVQUFVbXNCLFdBQWEsU0FBVUQsR0FDdkMsT0FBSXZyQixLQUFLb3pCLFVBQVk3SCxFQUFNNkgsUUFDaEJsSixFQUFvQmxxQixLQUFLcXpCLFlBQWE5SCxFQUFNOEgsYUFFaERuSixFQUFvQmxxQixLQUFLb3pCLFFBQVM3SCxFQUFNNkgsVUFFbkRELEVBQVU5ekIsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNwQyxPQUFRQSxFQUFNNkgsVUFBWXB6QixLQUFLb3pCLFNBQVc3SCxFQUFNOEgsY0FBZ0JyekIsS0FBS3F6QixhQUV6RUYsRUFBVTl6QixVQUFVbU0sU0FBVyxXQUMzQixNQUFRLHFCQUNKeEwsS0FBS296QixRQUNMLGlCQUNBcHpCLEtBQUtxekIsWUFDTCxLQUVERixFQXBEbUIsR0EyRTFCUyxHQUFpQyxXQUNqQyxTQUFTQSxFQUFnQkMsR0FDckI3ekIsS0FBSzZ6QixVQUFZQSxFQWlDckIsT0E3QkFELEVBQWdCRSxpQkFBbUIsU0FBVXAxQixHQUN6QyxJQUFJMDBCLEVBQVV4aUIsS0FBS0MsTUFBTW5TLEVBQVEsS0FFakMsT0FBTyxJQUFJazFCLEVBQWdCLElBQUlULEdBQVVDLEVBRDVCMTBCLEVBQVEsSUFBTyxPQUdoQ2sxQixFQUFnQkcsY0FBZ0IsU0FBVXIxQixHQUN0QyxPQUFPLElBQUlrMUIsRUFBZ0JsMUIsSUFFL0JrMUIsRUFBZ0JJLGNBQWdCLFdBQzVCLE9BQU9KLEVBQWdCSyxLQUUzQkwsRUFBZ0J2MEIsVUFBVStzQixVQUFZLFNBQVViLEdBQzVDLE9BQU92ckIsS0FBSzZ6QixVQUFVckksV0FBV0QsRUFBTXNJLFlBRTNDRCxFQUFnQnYwQixVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQzFDLE9BQU92ckIsS0FBSzZ6QixVQUFVdkosUUFBUWlCLEVBQU1zSSxZQUd4Q0QsRUFBZ0J2MEIsVUFBVTYwQixlQUFpQixXQUV2QyxPQUFnQyxJQUF6QmwwQixLQUFLNnpCLFVBQVVULFFBQWdCcHpCLEtBQUs2ekIsVUFBVVIsWUFBYyxLQUV2RU8sRUFBZ0J2MEIsVUFBVW1NLFNBQVcsV0FDakMsTUFBTyxtQkFBcUJ4TCxLQUFLNnpCLFVBQVVyb0IsV0FBYSxLQUU1RG9vQixFQUFnQnYwQixVQUFVODBCLFlBQWMsV0FDcEMsT0FBT24wQixLQUFLNnpCLFdBRWhCRCxFQUFnQkssSUFBTSxJQUFJTCxFQUFnQixJQUFJVCxHQUFVLEVBQUcsSUFDcERTLEVBbkN5QixHQXdEaENRLEdBQTJCLFdBQzNCLFNBQVNBLEVBQVVoSCxFQUFZaUgsR0FDM0JyMEIsS0FBS290QixXQUFhQSxFQUNsQnB0QixLQUFLcTBCLEtBQU9BLEdBQWNDLEdBQVMxRSxNQW1IdkMsT0FoSEF3RSxFQUFVLzBCLFVBQVUyaEIsT0FBUyxTQUFVaGlCLEVBQUtOLEdBQ3hDLE9BQU8sSUFBSTAxQixFQUFVcDBCLEtBQUtvdEIsV0FBWXB0QixLQUFLcTBCLEtBQ3RDclQsT0FBT2hpQixFQUFLTixFQUFPc0IsS0FBS290QixZQUN4Qm1ILEtBQUssS0FBTSxLQUFNRCxHQUFTRSxNQUFPLEtBQU0sUUFHaERKLEVBQVUvMEIsVUFBVWlpQixPQUFTLFNBQVV0aUIsR0FDbkMsT0FBTyxJQUFJbzFCLEVBQVVwMEIsS0FBS290QixXQUFZcHRCLEtBQUtxMEIsS0FDdEMvUyxPQUFPdGlCLEVBQUtnQixLQUFLb3RCLFlBQ2pCbUgsS0FBSyxLQUFNLEtBQU1ELEdBQVNFLE1BQU8sS0FBTSxRQUdoREosRUFBVS8wQixVQUFVZixJQUFNLFNBQVVVLEdBRWhDLElBREEsSUFBSXkxQixFQUFPejBCLEtBQUtxMEIsTUFDUkksRUFBS3prQixXQUFXLENBQ3BCLElBQUkwa0IsRUFBTTEwQixLQUFLb3RCLFdBQVdwdUIsRUFBS3kxQixFQUFLejFCLEtBQ3BDLEdBQVksSUFBUjAxQixFQUNBLE9BQU9ELEVBQUsvMUIsTUFFUGcyQixFQUFNLEVBQ1hELEVBQU9BLEVBQUt0SyxLQUVQdUssRUFBTSxJQUNYRCxFQUFPQSxFQUFLckssT0FHcEIsT0FBTyxNQUlYZ0ssRUFBVS8wQixVQUFVb0IsUUFBVSxTQUFVekIsR0FJcEMsSUFGQSxJQUFJMjFCLEVBQWMsRUFDZEYsRUFBT3owQixLQUFLcTBCLE1BQ1JJLEVBQUt6a0IsV0FBVyxDQUNwQixJQUFJMGtCLEVBQU0xMEIsS0FBS290QixXQUFXcHVCLEVBQUt5MUIsRUFBS3oxQixLQUNwQyxHQUFZLElBQVIwMUIsRUFDQSxPQUFPQyxFQUFjRixFQUFLdEssS0FBS3dELEtBRTFCK0csRUFBTSxFQUNYRCxFQUFPQSxFQUFLdEssTUFJWndLLEdBQWVGLEVBQUt0SyxLQUFLd0QsS0FBTyxFQUNoQzhHLEVBQU9BLEVBQUtySyxPQUlwQixPQUFRLEdBRVpnSyxFQUFVLzBCLFVBQVUyUSxRQUFVLFdBQzFCLE9BQU9oUSxLQUFLcTBCLEtBQUtya0IsV0FFckI3UixPQUFPQyxlQUFlZzJCLEVBQVUvMEIsVUFBVyxPQUFRLENBRS9DZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUtxMEIsS0FBSzFHLE1BRXJCdHZCLFlBQVksRUFDWmtaLGNBQWMsSUFHbEI2YyxFQUFVLzBCLFVBQVV1MUIsT0FBUyxXQUN6QixPQUFPNTBCLEtBQUtxMEIsS0FBS08sVUFHckJSLEVBQVUvMEIsVUFBVXcxQixPQUFTLFdBQ3pCLE9BQU83MEIsS0FBS3EwQixLQUFLUSxVQU1yQlQsRUFBVS8wQixVQUFVeTFCLGlCQUFtQixTQUFVQyxHQUM3QyxPQUFPLzBCLEtBQUtxMEIsS0FBS1MsaUJBQWlCQyxJQUV0Q1gsRUFBVS8wQixVQUFVbVMsUUFBVSxTQUFVNUMsR0FDcEM1TyxLQUFLODBCLGtCQUFpQixTQUFVM3dCLEVBQUdkLEdBRS9CLE9BREF1TCxFQUFHekssRUFBR2QsSUFDQyxNQUdmK3dCLEVBQVUvMEIsVUFBVW1NLFNBQVcsV0FDM0IsSUFBSXdwQixFQUFlLEdBS25CLE9BSkFoMUIsS0FBSzgwQixrQkFBaUIsU0FBVTN3QixFQUFHZCxHQUUvQixPQURBMnhCLEVBQWF2eEIsS0FBS1UsRUFBSSxJQUFNZCxJQUNyQixLQUVKLElBQU0yeEIsRUFBYWx0QixLQUFLLE1BQVEsS0FPM0Nzc0IsRUFBVS8wQixVQUFVNDFCLGlCQUFtQixTQUFVRixHQUM3QyxPQUFPLzBCLEtBQUtxMEIsS0FBS1ksaUJBQWlCRixJQUd0Q1gsRUFBVS8wQixVQUFVNjFCLFlBQWMsV0FDOUIsT0FBTyxJQUFJQyxHQUFrQm4xQixLQUFLcTBCLEtBQU0sS0FBTXIwQixLQUFLb3RCLFlBQVksSUFFbkVnSCxFQUFVLzBCLFVBQVUrMUIsZ0JBQWtCLFNBQVVwMkIsR0FDNUMsT0FBTyxJQUFJbTJCLEdBQWtCbjFCLEtBQUtxMEIsS0FBTXIxQixFQUFLZ0IsS0FBS290QixZQUFZLElBRWxFZ0gsRUFBVS8wQixVQUFVZzJCLG1CQUFxQixXQUNyQyxPQUFPLElBQUlGLEdBQWtCbjFCLEtBQUtxMEIsS0FBTSxLQUFNcjBCLEtBQUtvdEIsWUFBWSxJQUVuRWdILEVBQVUvMEIsVUFBVWkyQix1QkFBeUIsU0FBVXQyQixHQUNuRCxPQUFPLElBQUltMkIsR0FBa0JuMUIsS0FBS3EwQixLQUFNcjFCLEVBQUtnQixLQUFLb3RCLFlBQVksSUFFM0RnSCxFQXRIbUIsR0F5SDFCZSxHQUFtQyxXQUNuQyxTQUFTQSxFQUFrQlYsRUFBTWMsRUFBVW5JLEVBQVlvSSxHQUNuRHgxQixLQUFLdzFCLFVBQVlBLEVBQ2pCeDFCLEtBQUt5MUIsVUFBWSxHQUVqQixJQURBLElBQUlmLEVBQU0sR0FDRkQsRUFBS3prQixXQU1ULEdBTEEwa0IsRUFBTWEsRUFBV25JLEVBQVdxSCxFQUFLejFCLElBQUt1MkIsR0FBWSxFQUU5Q0MsSUFDQWQsSUFBUSxHQUVSQSxFQUFNLEVBR0ZELEVBREF6MEIsS0FBS3cxQixVQUNFZixFQUFLdEssS0FHTHNLLEVBQUtySyxVQUdmLElBQVksSUFBUnNLLEVBQVcsQ0FHaEIxMEIsS0FBS3kxQixVQUFVaHlCLEtBQUtneEIsR0FDcEIsTUFLQXowQixLQUFLeTFCLFVBQVVoeUIsS0FBS2d4QixHQUVoQkEsRUFEQXowQixLQUFLdzFCLFVBQ0VmLEVBQUtySyxNQUdMcUssRUFBS3RLLE1BbUM1QixPQTlCQWdMLEVBQWtCOTFCLFVBQVVxMkIsUUFBVSxXQUNsQzd2QixFQUFPN0YsS0FBS3kxQixVQUFVcDFCLE9BQVMsRUFBRyx5REFDbEMsSUFBSW8wQixFQUFPejBCLEtBQUt5MUIsVUFBVWp5QixNQUN0QmxCLEVBQVMsQ0FBRXRELElBQUt5MUIsRUFBS3oxQixJQUFLTixNQUFPKzFCLEVBQUsvMUIsT0FDMUMsR0FBSXNCLEtBQUt3MUIsVUFFTCxJQURBZixFQUFPQSxFQUFLdEssTUFDSnNLLEVBQUt6a0IsV0FDVGhRLEtBQUt5MUIsVUFBVWh5QixLQUFLZ3hCLEdBQ3BCQSxFQUFPQSxFQUFLckssV0FLaEIsSUFEQXFLLEVBQU9BLEVBQUtySyxPQUNKcUssRUFBS3prQixXQUNUaFEsS0FBS3kxQixVQUFVaHlCLEtBQUtneEIsR0FDcEJBLEVBQU9BLEVBQUt0SyxLQUdwQixPQUFPN25CLEdBRVg2eUIsRUFBa0I5MUIsVUFBVXMyQixRQUFVLFdBQ2xDLE9BQU8zMUIsS0FBS3kxQixVQUFVcDFCLE9BQVMsR0FFbkM4MEIsRUFBa0I5MUIsVUFBVXUyQixLQUFPLFdBQy9CLEdBQThCLElBQTFCNTFCLEtBQUt5MUIsVUFBVXAxQixPQUNmLE9BQU8sS0FFWCxJQUFJbzBCLEVBQU96MEIsS0FBS3kxQixVQUFVejFCLEtBQUt5MUIsVUFBVXAxQixPQUFTLEdBQ2xELE1BQU8sQ0FBRXJCLElBQUt5MUIsRUFBS3oxQixJQUFLTixNQUFPKzFCLEVBQUsvMUIsUUFFakN5MkIsRUFyRTJCLEdBd0VsQ2IsR0FBMEIsV0FDMUIsU0FBU0EsRUFBU3QxQixFQUFLTixFQUFPbTNCLEVBQU8xTCxFQUFNQyxHQUN2Q3BxQixLQUFLaEIsSUFBTUEsRUFDWGdCLEtBQUt0QixNQUFRQSxFQUNic0IsS0FBSzYxQixNQUFpQixNQUFUQSxFQUFnQkEsRUFBUXZCLEVBQVN3QixJQUM5QzkxQixLQUFLbXFCLEtBQWUsTUFBUkEsRUFBZUEsRUFBT21LLEVBQVMxRSxNQUMzQzV2QixLQUFLb3FCLE1BQWlCLE1BQVRBLEVBQWdCQSxFQUFRa0ssRUFBUzFFLE1BQzlDNXZCLEtBQUsydEIsS0FBTzN0QixLQUFLbXFCLEtBQUt3RCxLQUFPLEVBQUkzdEIsS0FBS29xQixNQUFNdUQsS0F3TGhELE9BckxBMkcsRUFBU2oxQixVQUFVazFCLEtBQU8sU0FBVXYxQixFQUFLTixFQUFPbTNCLEVBQU8xTCxFQUFNQyxHQUN6RCxPQUFPLElBQUlrSyxFQUFnQixNQUFQdDFCLEVBQWNBLEVBQU1nQixLQUFLaEIsSUFBYyxNQUFUTixFQUFnQkEsRUFBUXNCLEtBQUt0QixNQUFnQixNQUFUbTNCLEVBQWdCQSxFQUFRNzFCLEtBQUs2MUIsTUFBZSxNQUFSMUwsRUFBZUEsRUFBT25xQixLQUFLbXFCLEtBQWUsTUFBVEMsRUFBZ0JBLEVBQVFwcUIsS0FBS29xQixRQUU1TGtLLEVBQVNqMUIsVUFBVTJRLFFBQVUsV0FDekIsT0FBTyxHQU1Yc2tCLEVBQVNqMUIsVUFBVXkxQixpQkFBbUIsU0FBVUMsR0FDNUMsT0FBUS8wQixLQUFLbXFCLEtBQUsySyxpQkFBaUJDLElBQy9CQSxFQUFPLzBCLEtBQUtoQixJQUFLZ0IsS0FBS3RCLFFBQ3RCc0IsS0FBS29xQixNQUFNMEssaUJBQWlCQyxJQU1wQ1QsRUFBU2oxQixVQUFVNDFCLGlCQUFtQixTQUFVRixHQUM1QyxPQUFRLzBCLEtBQUtvcUIsTUFBTTZLLGlCQUFpQkYsSUFDaENBLEVBQU8vMEIsS0FBS2hCLElBQUtnQixLQUFLdEIsUUFDdEJzQixLQUFLbXFCLEtBQUs4SyxpQkFBaUJGLElBR25DVCxFQUFTajFCLFVBQVVndkIsSUFBTSxXQUNyQixPQUFJcnVCLEtBQUttcUIsS0FBS25hLFVBQ0hoUSxLQUdBQSxLQUFLbXFCLEtBQUtrRSxPQUl6QmlHLEVBQVNqMUIsVUFBVXUxQixPQUFTLFdBQ3hCLE9BQU81MEIsS0FBS3F1QixNQUFNcnZCLEtBR3RCczFCLEVBQVNqMUIsVUFBVXcxQixPQUFTLFdBQ3hCLE9BQUk3MEIsS0FBS29xQixNQUFNcGEsVUFDSmhRLEtBQUtoQixJQUdMZ0IsS0FBS29xQixNQUFNeUssVUFJMUJQLEVBQVNqMUIsVUFBVTJoQixPQUFTLFNBQVVoaUIsRUFBS04sRUFBTzB1QixHQUM5QyxJQUFJbHVCLEVBQUljLEtBQ0owMEIsRUFBTXRILEVBQVdwdUIsRUFBS0UsRUFBRUYsS0FVNUIsT0FSSUUsRUFEQXcxQixFQUFNLEVBQ0Z4MUIsRUFBRXExQixLQUFLLEtBQU0sS0FBTSxLQUFNcjFCLEVBQUVpckIsS0FBS25KLE9BQU9oaUIsRUFBS04sRUFBTzB1QixHQUFhLE1BRXZELElBQVJzSCxFQUNEeDFCLEVBQUVxMUIsS0FBSyxLQUFNNzFCLEVBQU8sS0FBTSxLQUFNLE1BR2hDUSxFQUFFcTFCLEtBQUssS0FBTSxLQUFNLEtBQU0sS0FBTXIxQixFQUFFa3JCLE1BQU1wSixPQUFPaGlCLEVBQUtOLEVBQU8wdUIsS0FFekQySSxTQUViekIsRUFBU2oxQixVQUFVMjJCLFVBQVksV0FDM0IsR0FBSWgyQixLQUFLbXFCLEtBQUtuYSxVQUNWLE9BQU9za0IsRUFBUzFFLE1BRXBCLElBQUkxd0IsRUFBSWMsS0FLUixPQUpLZCxFQUFFaXJCLEtBQUs4TCxTQUFZLzJCLEVBQUVpckIsS0FBS0EsS0FBSzhMLFVBQ2hDLzJCLEVBQUlBLEVBQUVnM0IsZ0JBRVZoM0IsRUFBSUEsRUFBRXExQixLQUFLLEtBQU0sS0FBTSxLQUFNcjFCLEVBQUVpckIsS0FBSzZMLFlBQWEsT0FDeENELFNBR2J6QixFQUFTajFCLFVBQVVpaUIsT0FBUyxTQUFVdGlCLEVBQUtvdUIsR0FDdkMsSUFBSStJLEVBQ0FqM0IsRUFBSWMsS0FDUixHQUFJb3RCLEVBQVdwdUIsRUFBS0UsRUFBRUYsS0FBTyxFQUNwQkUsRUFBRWlyQixLQUFLbmEsV0FBYzlRLEVBQUVpckIsS0FBSzhMLFNBQVkvMkIsRUFBRWlyQixLQUFLQSxLQUFLOEwsVUFDckQvMkIsRUFBSUEsRUFBRWczQixlQUVWaDNCLEVBQUlBLEVBQUVxMUIsS0FBSyxLQUFNLEtBQU0sS0FBTXIxQixFQUFFaXJCLEtBQUs3SSxPQUFPdGlCLEVBQUtvdUIsR0FBYSxVQUU1RCxDQU9ELEdBTklsdUIsRUFBRWlyQixLQUFLOEwsVUFDUC8yQixFQUFJQSxFQUFFazNCLGVBRUxsM0IsRUFBRWtyQixNQUFNcGEsV0FBYzlRLEVBQUVrckIsTUFBTTZMLFNBQVkvMkIsRUFBRWtyQixNQUFNRCxLQUFLOEwsVUFDeEQvMkIsRUFBSUEsRUFBRW0zQixnQkFFcUIsSUFBM0JqSixFQUFXcHVCLEVBQUtFLEVBQUVGLEtBQVksQ0FDOUIsR0FBSUUsRUFBRWtyQixNQUFNcGEsVUFDUixPQUFPc2tCLEVBQVMxRSxNQUdoQnVHLEVBQVdqM0IsRUFBRWtyQixNQUFNaUUsTUFDbkJudkIsRUFBSUEsRUFBRXExQixLQUFLNEIsRUFBU24zQixJQUFLbTNCLEVBQVN6M0IsTUFBTyxLQUFNLEtBQU1RLEVBQUVrckIsTUFBTTRMLGFBR3JFOTJCLEVBQUlBLEVBQUVxMUIsS0FBSyxLQUFNLEtBQU0sS0FBTSxLQUFNcjFCLEVBQUVrckIsTUFBTTlJLE9BQU90aUIsRUFBS291QixJQUUzRCxPQUFPbHVCLEVBQUU2MkIsU0FFYnpCLEVBQVNqMUIsVUFBVTQyQixNQUFRLFdBQ3ZCLE9BQU9qMkIsS0FBSzYxQixPQUdoQnZCLEVBQVNqMUIsVUFBVTAyQixNQUFRLFdBQ3ZCLElBQUk3MkIsRUFBSWMsS0FVUixPQVRJZCxFQUFFa3JCLE1BQU02TCxVQUFZLzJCLEVBQUVpckIsS0FBSzhMLFVBQzNCLzJCLEVBQUlBLEVBQUVvM0IsY0FFTnAzQixFQUFFaXJCLEtBQUs4TCxTQUFXLzJCLEVBQUVpckIsS0FBS0EsS0FBSzhMLFVBQzlCLzJCLEVBQUlBLEVBQUVrM0IsZUFFTmwzQixFQUFFaXJCLEtBQUs4TCxTQUFXLzJCLEVBQUVrckIsTUFBTTZMLFVBQzFCLzJCLEVBQUlBLEVBQUVxM0IsYUFFSHIzQixHQUVYbzFCLEVBQVNqMUIsVUFBVTYyQixZQUFjLFdBQzdCLElBQUloM0IsRUFBSWMsS0FBS3UyQixZQU1iLE9BTElyM0IsRUFBRWtyQixNQUFNRCxLQUFLOEwsVUFHYi8yQixHQURBQSxHQURBQSxFQUFJQSxFQUFFcTFCLEtBQUssS0FBTSxLQUFNLEtBQU0sS0FBTXIxQixFQUFFa3JCLE1BQU1nTSxnQkFDckNFLGNBQ0FDLGFBRUhyM0IsR0FFWG8xQixFQUFTajFCLFVBQVVnM0IsYUFBZSxXQUM5QixJQUFJbjNCLEVBQUljLEtBQUt1MkIsWUFLYixPQUpJcjNCLEVBQUVpckIsS0FBS0EsS0FBSzhMLFVBRVovMkIsR0FEQUEsRUFBSUEsRUFBRWszQixlQUNBRyxhQUVIcjNCLEdBRVhvMUIsRUFBU2oxQixVQUFVaTNCLFdBQWEsV0FDNUIsSUFBSUUsRUFBS3gyQixLQUFLdTBCLEtBQUssS0FBTSxLQUFNRCxFQUFTd0IsSUFBSyxLQUFNOTFCLEtBQUtvcUIsTUFBTUQsTUFDOUQsT0FBT25xQixLQUFLb3FCLE1BQU1tSyxLQUFLLEtBQU0sS0FBTXYwQixLQUFLNjFCLE1BQU9XLEVBQUksT0FFdkRsQyxFQUFTajFCLFVBQVUrMkIsWUFBYyxXQUM3QixJQUFJSyxFQUFLejJCLEtBQUt1MEIsS0FBSyxLQUFNLEtBQU1ELEVBQVN3QixJQUFLOTFCLEtBQUttcUIsS0FBS0MsTUFBTyxNQUM5RCxPQUFPcHFCLEtBQUttcUIsS0FBS29LLEtBQUssS0FBTSxLQUFNdjBCLEtBQUs2MUIsTUFBTyxLQUFNWSxJQUV4RG5DLEVBQVNqMUIsVUFBVWszQixVQUFZLFdBQzNCLElBQUlwTSxFQUFPbnFCLEtBQUttcUIsS0FBS29LLEtBQUssS0FBTSxNQUFPdjBCLEtBQUttcUIsS0FBSzBMLE1BQU8sS0FBTSxNQUMxRHpMLEVBQVFwcUIsS0FBS29xQixNQUFNbUssS0FBSyxLQUFNLE1BQU92MEIsS0FBS29xQixNQUFNeUwsTUFBTyxLQUFNLE1BQ2pFLE9BQU83MUIsS0FBS3UwQixLQUFLLEtBQU0sTUFBT3YwQixLQUFLNjFCLE1BQU8xTCxFQUFNQyxJQUdwRGtLLEVBQVNqMUIsVUFBVXEzQixjQUFnQixXQUMvQixJQUFJQyxFQUFhMzJCLEtBQUs0MkIsUUFDdEIsT0FBSWhtQixLQUFLaW1CLElBQUksRUFBS0YsSUFBZTMyQixLQUFLMnRCLEtBQU8sR0FTakQyRyxFQUFTajFCLFVBQVV1M0IsTUFBUSxXQUN2QixHQUFJNTJCLEtBQUtpMkIsU0FBV2oyQixLQUFLbXFCLEtBQUs4TCxRQUMxQixNQUFNcFIsRUFBSywwQkFBNEI3a0IsS0FBS2hCLElBQU0sSUFBTWdCLEtBQUt0QixNQUFRLEtBRXpFLEdBQUlzQixLQUFLb3FCLE1BQU02TCxRQUNYLE1BQU1wUixFQUFLLG1CQUFxQjdrQixLQUFLaEIsSUFBTSxJQUFNZ0IsS0FBS3RCLE1BQVEsWUFFbEUsSUFBSWk0QixFQUFhMzJCLEtBQUttcUIsS0FBS3lNLFFBQzNCLEdBQUlELElBQWUzMkIsS0FBS29xQixNQUFNd00sUUFDMUIsTUFBTS9SLEVBQUssdUJBR1gsT0FBTzhSLEdBQWMzMkIsS0FBS2kyQixRQUFVLEVBQUksSUFLaEQzQixFQUFTMUUsTUFBUSxLQUNqQjBFLEVBQVN3QixLQUFNLEVBQ2Z4QixFQUFTRSxPQUFRLEVBQ1ZGLEVBL0xrQixHQWtNekJ3QyxHQUErQixXQUMvQixTQUFTQSxJQUNMOTJCLEtBQUsydEIsS0FBTyxFQTBFaEIsT0F4RUF4dkIsT0FBT0MsZUFBZTA0QixFQUFjejNCLFVBQVcsTUFBTyxDQUNsRGYsSUFBSyxXQUNELE1BQU11bUIsRUFBSyw4QkFFZnhtQixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTA0QixFQUFjejNCLFVBQVcsUUFBUyxDQUNwRGYsSUFBSyxXQUNELE1BQU11bUIsRUFBSyxnQ0FFZnhtQixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTA0QixFQUFjejNCLFVBQVcsUUFBUyxDQUNwRGYsSUFBSyxXQUNELE1BQU11bUIsRUFBSyxnQ0FFZnhtQixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTA0QixFQUFjejNCLFVBQVcsT0FBUSxDQUNuRGYsSUFBSyxXQUNELE1BQU11bUIsRUFBSyxxQ0FFZnhtQixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTA0QixFQUFjejNCLFVBQVcsUUFBUyxDQUNwRGYsSUFBSyxXQUNELE1BQU11bUIsRUFBSyxzQ0FFZnhtQixZQUFZLEVBQ1prWixjQUFjLElBR2xCdWYsRUFBY3ozQixVQUFVazFCLEtBQU8sU0FBVXYxQixFQUFLTixFQUFPbTNCLEVBQU8xTCxFQUFNQyxHQUM5RCxPQUFPcHFCLE1BR1g4MkIsRUFBY3ozQixVQUFVMmhCLE9BQVMsU0FBVWhpQixFQUFLTixFQUFPMHVCLEdBQ25ELE9BQU8sSUFBSWtILEdBQVN0MUIsRUFBS04sSUFHN0JvNEIsRUFBY3ozQixVQUFVaWlCLE9BQVMsU0FBVXRpQixFQUFLb3VCLEdBQzVDLE9BQU9wdEIsTUFFWDgyQixFQUFjejNCLFVBQVUyUSxRQUFVLFdBQzlCLE9BQU8sR0FFWDhtQixFQUFjejNCLFVBQVV5MUIsaUJBQW1CLFNBQVVDLEdBQ2pELE9BQU8sR0FFWCtCLEVBQWN6M0IsVUFBVTQxQixpQkFBbUIsU0FBVUYsR0FDakQsT0FBTyxHQUVYK0IsRUFBY3ozQixVQUFVdTFCLE9BQVMsV0FDN0IsT0FBTyxNQUVYa0MsRUFBY3ozQixVQUFVdzFCLE9BQVMsV0FDN0IsT0FBTyxNQUVYaUMsRUFBY3ozQixVQUFVNDJCLE1BQVEsV0FDNUIsT0FBTyxHQUdYYSxFQUFjejNCLFVBQVVxM0IsY0FBZ0IsV0FDcEMsT0FBTyxHQUVYSSxFQUFjejNCLFVBQVV1M0IsTUFBUSxXQUM1QixPQUFPLEdBRUpFLEVBNUV1Qjs7Ozs7Ozs7Ozs7Ozs7OztHQThFbEN4QyxHQUFTMUUsTUFBUSxJQUFJa0g7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUJyQixJQUFJQyxHQUEyQixXQUMzQixTQUFTQSxFQUFVM0osR0FDZnB0QixLQUFLb3RCLFdBQWFBLEVBQ2xCcHRCLEtBQUswSyxLQUFPLElBQUkwcEIsR0FBVXAwQixLQUFLb3RCLFlBd0luQyxPQWxJQTJKLEVBQVVDLFlBQWMsU0FBVS9sQixHQUM5QixJQUFJOUYsRUFBTyxJQUFJNHJCLEVBQVU5bEIsRUFBSW1jLFlBSTdCLE9BSEFuYyxFQUFJTyxTQUFRLFNBQVV4UyxHQUNsQm1NLEVBQU9BLEVBQUs4ckIsSUFBSWo0QixNQUVibU0sR0FFWDRyQixFQUFVMTNCLFVBQVUyVSxJQUFNLFNBQVVrakIsR0FDaEMsT0FBK0IsT0FBeEJsM0IsS0FBSzBLLEtBQUtwTSxJQUFJNDRCLElBRXpCSCxFQUFVMTNCLFVBQVU4M0IsTUFBUSxXQUN4QixPQUFPbjNCLEtBQUswSyxLQUFLa3FCLFVBRXJCbUMsRUFBVTEzQixVQUFVKzNCLEtBQU8sV0FDdkIsT0FBT3AzQixLQUFLMEssS0FBS21xQixVQUVyQjEyQixPQUFPQyxlQUFlMjRCLEVBQVUxM0IsVUFBVyxPQUFRLENBQy9DZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUswSyxLQUFLaWpCLE1BRXJCdHZCLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJ3ZixFQUFVMTNCLFVBQVVvQixRQUFVLFNBQVV5MkIsR0FDcEMsT0FBT2wzQixLQUFLMEssS0FBS2pLLFFBQVF5MkIsSUFHN0JILEVBQVUxM0IsVUFBVW1TLFFBQVUsU0FBVTZsQixHQUNwQ3IzQixLQUFLMEssS0FBS29xQixrQkFBaUIsU0FBVTN3QixFQUFHZCxHQUVwQyxPQURBZzBCLEVBQUdsekIsSUFDSSxNQUlmNHlCLEVBQVUxM0IsVUFBVWk0QixlQUFpQixTQUFVQyxFQUFPRixHQUVsRCxJQURBLElBQUlHLEVBQU94M0IsS0FBSzBLLEtBQUswcUIsZ0JBQWdCbUMsRUFBTSxJQUNwQ0MsRUFBSzdCLFdBQVcsQ0FDbkIsSUFBSXVCLEVBQU9NLEVBQUs5QixVQUNoQixHQUFJMTFCLEtBQUtvdEIsV0FBVzhKLEVBQUtsNEIsSUFBS3U0QixFQUFNLEtBQU8sRUFDdkMsT0FFSkYsRUFBR0gsRUFBS2w0QixPQU1oQiszQixFQUFVMTNCLFVBQVVvNEIsYUFBZSxTQUFVSixFQUFJaEgsR0FDN0MsSUFBSW1ILEVBT0osSUFMSUEsT0FEVWp1QixJQUFWOG1CLEVBQ09yd0IsS0FBSzBLLEtBQUswcUIsZ0JBQWdCL0UsR0FHMUJyd0IsS0FBSzBLLEtBQUt3cUIsY0FFZHNDLEVBQUs3QixXQUFXLENBR25CLElBRGEwQixFQURGRyxFQUFLOUIsVUFDSzEyQixLQUVqQixTQUtaKzNCLEVBQVUxM0IsVUFBVXE0QixrQkFBb0IsU0FBVVIsR0FDOUMsSUFBSU0sRUFBT3gzQixLQUFLMEssS0FBSzBxQixnQkFBZ0I4QixHQUNyQyxPQUFPTSxFQUFLN0IsVUFBWTZCLEVBQUs5QixVQUFVMTJCLElBQU0sTUFFakQrM0IsRUFBVTEzQixVQUFVNjFCLFlBQWMsV0FDOUIsT0FBTyxJQUFJeUMsR0FBa0IzM0IsS0FBSzBLLEtBQUt3cUIsZ0JBRTNDNkIsRUFBVTEzQixVQUFVKzFCLGdCQUFrQixTQUFVcDJCLEdBQzVDLE9BQU8sSUFBSTI0QixHQUFrQjMzQixLQUFLMEssS0FBSzBxQixnQkFBZ0JwMkIsS0FHM0QrM0IsRUFBVTEzQixVQUFVNDNCLElBQU0sU0FBVUMsR0FDaEMsT0FBT2wzQixLQUFLdTBCLEtBQUt2MEIsS0FBSzBLLEtBQUs0VyxPQUFPNFYsR0FBTWxXLE9BQU9rVyxHQUFNLEtBR3pESCxFQUFVMTNCLFVBQVU2VixPQUFTLFNBQVVnaUIsR0FDbkMsT0FBS2wzQixLQUFLZ1UsSUFBSWtqQixHQUdQbDNCLEtBQUt1MEIsS0FBS3YwQixLQUFLMEssS0FBSzRXLE9BQU80VixJQUZ2QmwzQixNQUlmKzJCLEVBQVUxM0IsVUFBVTJRLFFBQVUsV0FDMUIsT0FBT2hRLEtBQUswSyxLQUFLc0YsV0FFckIrbUIsRUFBVTEzQixVQUFVdTRCLFVBQVksU0FBVXJNLEdBQ3RDLElBQUlqcEIsRUFBU3RDLEtBSWIsT0FIQXVyQixFQUFNL1osU0FBUSxTQUFVMGxCLEdBQ3BCNTBCLEVBQVNBLEVBQU8yMEIsSUFBSUMsTUFFakI1MEIsR0FFWHkwQixFQUFVMTNCLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDcEMsS0FBTUEsYUFBaUJ3TCxHQUNuQixPQUFPLEVBRVgsR0FBSS8yQixLQUFLMnRCLE9BQVNwQyxFQUFNb0MsS0FDcEIsT0FBTyxFQUlYLElBRkEsSUFBSWtLLEVBQVM3M0IsS0FBSzBLLEtBQUt3cUIsY0FDbkI0QyxFQUFVdk0sRUFBTTdnQixLQUFLd3FCLGNBQ2xCMkMsRUFBT2xDLFdBQVcsQ0FDckIsSUFBSW9DLEVBQVdGLEVBQU9uQyxVQUFVMTJCLElBQzVCZzVCLEVBQVlGLEVBQVFwQyxVQUFVMTJCLElBQ2xDLEdBQTZDLElBQXpDZ0IsS0FBS290QixXQUFXMkssRUFBVUMsR0FDMUIsT0FBTyxFQUdmLE9BQU8sR0FFWGpCLEVBQVUxM0IsVUFBVTRiLFFBQVUsV0FDMUIsSUFBSTlKLEVBQU0sR0FJVixPQUhBblIsS0FBS3dSLFNBQVEsU0FBVXltQixHQUNuQjltQixFQUFJMU4sS0FBS3cwQixNQUVOOW1CLEdBRVg0bEIsRUFBVTEzQixVQUFVbU0sU0FBVyxXQUMzQixJQUFJbEosRUFBUyxHQUViLE9BREF0QyxLQUFLd1IsU0FBUSxTQUFVMGxCLEdBQVEsT0FBTzUwQixFQUFPbUIsS0FBS3l6QixNQUMzQyxhQUFlNTBCLEVBQU9rSixXQUFhLEtBRTlDdXJCLEVBQVUxM0IsVUFBVWsxQixLQUFPLFNBQVU3cEIsR0FDakMsSUFBSXBJLEVBQVMsSUFBSXkwQixFQUFVLzJCLEtBQUtvdEIsWUFFaEMsT0FEQTlxQixFQUFPb0ksS0FBT0EsRUFDUHBJLEdBRUp5MEIsRUEzSW1CLEdBNkkxQlksR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0JILEdBQ3ZCeDNCLEtBQUt3M0IsS0FBT0EsRUFRaEIsT0FOQUcsRUFBa0J0NEIsVUFBVXEyQixRQUFVLFdBQ2xDLE9BQU8xMUIsS0FBS3czQixLQUFLOUIsVUFBVTEyQixLQUUvQjI0QixFQUFrQnQ0QixVQUFVczJCLFFBQVUsV0FDbEMsT0FBTzMxQixLQUFLdzNCLEtBQUs3QixXQUVkZ0MsRUFWMkIsR0E2QmxDTyxHQUEyQixJQUFJOUQsR0FBVWhGLEdBQVloQyxZQUN6RCxTQUFTK0ssS0FDTCxPQUFPRCxHQUVYLFNBQVNFLEtBQ0wsT0FBT0QsS0FFWCxJQUFJRSxHQUFxQixJQUFJakUsR0FBVWhGLEdBQVloQyxZQUNuRCxTQUFTa0wsS0FDTCxPQUFPRCxHQUVYLElBQUlFLEdBQTZCLElBQUluRSxHQUFVaEYsR0FBWWhDLFlBQzNELFNBQVNvTCxLQUNMLE9BQU9ELEdBRVgsSUFBSUUsR0FBeUIsSUFBSTFCLEdBQVUzSCxHQUFZaEMsWUFDdkQsU0FBU3NMLEtBRUwsSUFEQSxJQUFJdnRCLEVBQU8sR0FDRlIsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDUSxFQUFLUixHQUFNdkssVUFBVXVLLEdBR3pCLElBREEsSUFBSXVKLEVBQU11a0IsR0FDRHh0QixFQUFLLEVBQUcwdEIsRUFBU3h0QixFQUFNRixFQUFLMHRCLEVBQU90NEIsT0FBUTRLLElBQU0sQ0FDdEQsSUFBSWpNLEVBQU0yNUIsRUFBTzF0QixHQUNqQmlKLEVBQU1BLEVBQUkraUIsSUFBSWo0QixHQUVsQixPQUFPa1YsRUFFWCxJQUFJMGtCLEdBQXNCLElBQUk3QixHQUFVN00sR0FDeEMsU0FBUzJPLEtBQ0wsT0FBT0Q7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQlgsSUFJSUUsR0FBK0IsV0FZL0IsU0FBU0EsRUFBY0MsRUFBU0MsRUFBZ0JDLEVBQWVDLEdBQzNEbDVCLEtBQUsrNEIsUUFBVUEsRUFDZi80QixLQUFLZzVCLGVBQWlCQSxFQUN0Qmg1QixLQUFLaTVCLGNBQWdCQSxFQUNyQmo1QixLQUFLazVCLFVBQVlBLEVBQ2pCcnpCLEVBQU9xekIsRUFBVTc0QixPQUFTLEVBQUcseUNBaUZqQyxPQXRFQXk0QixFQUFjejVCLFVBQVU4NUIsc0JBQXdCLFNBQVVDLEVBQVFDLEVBQVVDLEdBQ3BFRCxHQUNBeHpCLEVBQU93ekIsRUFBU3I2QixJQUFJc3JCLFFBQVE4TyxHQUFTLDhCQUFnQ0EsRUFBUyx1Q0FBeUNDLEVBQVNyNkIsS0FFcEksSUFBSXU2QixFQUFrQkQsRUFBWUMsZ0JBQ2xDMXpCLEVBQU8wekIsRUFBZ0JsNUIsU0FBV0wsS0FBS2s1QixVQUFVNzRCLE9BQVEsNkNBQStDTCxLQUFLazVCLFVBQVU3NEIsT0FBUyx5Q0FBMkNrNUIsRUFBZ0JsNUIsT0FBUyxNQUNwTSxJQUFLLElBQUk1QyxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLazVCLFVBQVU3NEIsT0FBUTVDLElBQUssQ0FDNUMsSUFBSSs3QixFQUFXeDVCLEtBQUtrNUIsVUFBVXo3QixHQUM5QixHQUFJKzdCLEVBQVN4NkIsSUFBSXNyQixRQUFROE8sR0FBUyxDQUM5QixJQUFJSyxFQUFpQkYsRUFBZ0I5N0IsR0FDckM0N0IsRUFBV0csRUFBU0wsc0JBQXNCRSxFQUFVSSxJQUc1RCxPQUFPSixHQVNYUCxFQUFjejVCLFVBQVVxNkIsaUJBQW1CLFNBQVVOLEVBQVFDLEdBQ3JEQSxHQUNBeHpCLEVBQU93ekIsRUFBU3I2QixJQUFJc3JCLFFBQVE4TyxHQUFTLDZCQUErQkEsRUFBUyx1Q0FBeUNDLEVBQVNyNkIsS0FJbkksSUFBSyxJQUFJMkwsRUFBSyxFQUFHTSxFQUFLakwsS0FBS2k1QixjQUFldHVCLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxFQUN4RDZ1QixFQUFXdnVCLEVBQUdOLElBQ0wzTCxJQUFJc3JCLFFBQVE4TyxLQUNyQkMsRUFBV0csRUFBU0UsaUJBQWlCTCxFQUFVQSxFQUFVcjVCLEtBQUtnNUIsaUJBS3RFLElBRkEsSUFBSVcsRUFBVU4sRUFFTG51QixFQUFLLEVBQUd5SixFQUFLM1UsS0FBS2s1QixVQUFXaHVCLEVBQUt5SixFQUFHdFUsT0FBUTZLLElBQU0sQ0FDeEQsSUFBSXN1QixLQUFXN2tCLEVBQUd6SixJQUNMbE0sSUFBSXNyQixRQUFROE8sS0FDckJDLEVBQVdHLEVBQVNFLGlCQUFpQkwsRUFBVU0sRUFBUzM1QixLQUFLZzVCLGlCQUdyRSxPQUFPSyxHQU1YUCxFQUFjejVCLFVBQVV1NkIsd0JBQTBCLFNBQVVDLEdBQ3hELElBQUlud0IsRUFBUTFKLEtBSVI4NUIsRUFBbUJELEVBT3ZCLE9BTkE3NUIsS0FBS2s1QixVQUFVMW5CLFNBQVEsU0FBVTNULEdBQzdCLElBQUlrOEIsRUFBa0Jyd0IsRUFBTWd3QixpQkFBaUI3N0IsRUFBRW1CLElBQUs2NkIsRUFBVXY3QixJQUFJVCxFQUFFbUIsTUFDaEUrNkIsSUFDQUQsRUFBbUJBLEVBQWlCOVksT0FBT25qQixFQUFFbUIsSUFBSys2QixPQUduREQsR0FFWGhCLEVBQWN6NUIsVUFBVThMLEtBQU8sV0FDM0IsT0FBT25MLEtBQUtrNUIsVUFBVWMsUUFBTyxTQUFVN3VCLEVBQU10TixHQUFLLE9BQU9zTixFQUFLOHJCLElBQUlwNUIsRUFBRW1CLE9BQVMwNUIsT0FFakZJLEVBQWN6NUIsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN4QyxPQUFRdnJCLEtBQUsrNEIsVUFBWXhOLEVBQU13TixTQUMzQjFPLEVBQVlycUIsS0FBS2s1QixVQUFXM04sRUFBTTJOLFlBQ2xDN08sRUFBWXJxQixLQUFLaTVCLGNBQWUxTixFQUFNME4sZ0JBRXZDSCxFQWxHdUIsR0FxRzlCbUIsR0FBcUMsV0FDckMsU0FBU0EsRUFBb0JDLEVBQU9DLEVBQWVaLEVBQWlCYSxFQUtwRUMsR0FDSXI2QixLQUFLazZCLE1BQVFBLEVBQ2JsNkIsS0FBS202QixjQUFnQkEsRUFDckJuNkIsS0FBS3U1QixnQkFBa0JBLEVBQ3ZCdjVCLEtBQUtvNkIsWUFBY0EsRUFDbkJwNkIsS0FBS3E2QixZQUFjQSxFQW1CdkIsT0FaQUosRUFBb0I3a0IsS0FBTyxTQUFVOGtCLEVBQU9DLEVBQWU5USxFQUFTK1EsR0FDaEV2MEIsRUFBT3EwQixFQUFNaEIsVUFBVTc0QixTQUFXZ3BCLEVBQVFocEIsT0FBUSxrQkFDOUM2NUIsRUFBTWhCLFVBQVU3NEIsT0FDaEIsZ0NBQ0FncEIsRUFBUWhwQixRQUdaLElBRkEsSUFBSWk2QixFQUFhOUIsS0FDYlUsRUFBWWdCLEVBQU1oQixVQUNiejdCLEVBQUksRUFBR0EsRUFBSXk3QixFQUFVNzRCLE9BQVE1QyxJQUNsQzY4QixFQUFhQSxFQUFXdFosT0FBT2tZLEVBQVV6N0IsR0FBR3VCLElBQUtxcUIsRUFBUTVyQixHQUFHNlksU0FFaEUsT0FBTyxJQUFJMmpCLEVBQW9CQyxFQUFPQyxFQUFlOVEsRUFBUytRLEVBQWFFLElBRXhFTCxFQTlCNkIsR0E4RHBDTSxHQUFvQyxXQUNwQyxTQUFTQSxFQUFtQjF3QixHQUN4QixJQUFJSCxFQUFRMUosS0FHWkEsS0FBS3c2QixhQUFlLEtBQ3BCeDZCLEtBQUt5NkIsY0FBZ0IsS0FFckJ6NkIsS0FBS3NDLFlBQVNpSCxFQUNkdkosS0FBSzhELFdBQVF5RixFQUNidkosS0FBSzA2QixRQUFTLEVBR2QxNkIsS0FBSzI2QixrQkFBbUIsRUFDeEI5d0IsR0FBUyxTQUFVbkwsR0FDZmdMLEVBQU1neEIsUUFBUyxFQUNmaHhCLEVBQU1wSCxPQUFTNUQsRUFDWGdMLEVBQU04d0IsY0FHTjl3QixFQUFNOHdCLGFBQWE5N0IsTUFFeEIsU0FBVW9GLEdBQ1Q0RixFQUFNZ3hCLFFBQVMsRUFDZmh4QixFQUFNNUYsTUFBUUEsRUFDVjRGLEVBQU0rd0IsZUFDTi93QixFQUFNK3dCLGNBQWMzMkIsTUFzSWhDLE9BbElBeTJCLEVBQW1CbDdCLFVBQVV5SyxNQUFRLFNBQVU4RSxHQUMzQyxPQUFPNU8sS0FBS29DLFVBQUttSCxFQUFXcUYsSUFFaEMyckIsRUFBbUJsN0IsVUFBVStDLEtBQU8sU0FBVXc0QixFQUFRQyxHQUNsRCxJQUFJbnhCLEVBQVExSixLQUtaLE9BSklBLEtBQUsyNkIsa0JBQ0w5VixFQUFLLHlEQUVUN2tCLEtBQUsyNkIsa0JBQW1CLEVBQ3BCMzZCLEtBQUswNkIsT0FDQTE2QixLQUFLOEQsTUFJQzlELEtBQUs4NkIsWUFBWUQsRUFBUzc2QixLQUFLOEQsT0FIL0I5RCxLQUFLKzZCLFlBQVlILEVBQVE1NkIsS0FBS3NDLFFBT2xDLElBQUlpNEIsR0FBbUIsU0FBVXY0QixFQUFTQyxHQUM3Q3lILEVBQU04d0IsYUFBZSxTQUFVOTdCLEdBQzNCZ0wsRUFBTXF4QixZQUFZSCxFQUFRbDhCLEdBQU8wRCxLQUFLSixFQUFTQyxJQUVuRHlILEVBQU0rd0IsY0FBZ0IsU0FBVTMyQixHQUM1QjRGLEVBQU1veEIsWUFBWUQsRUFBUy8yQixHQUFPMUIsS0FBS0osRUFBU0MsUUFLaEVzNEIsRUFBbUJsN0IsVUFBVTI3QixVQUFZLFdBQ3JDLElBQUl0eEIsRUFBUTFKLEtBQ1osT0FBTyxJQUFJK0IsU0FBUSxTQUFVQyxFQUFTQyxHQUNsQ3lILEVBQU10SCxLQUFLSixFQUFTQyxPQUc1QnM0QixFQUFtQmw3QixVQUFVNDdCLGlCQUFtQixTQUFVcnNCLEdBQ3RELElBQ0ksSUFBSXRNLEVBQVNzTSxJQUNiLE9BQUl0TSxhQUFrQmk0QixFQUNYajRCLEVBR0FpNEIsRUFBbUJ2NEIsUUFBUU0sR0FHMUMsTUFBTzlCLEdBQ0gsT0FBTys1QixFQUFtQnQ0QixPQUFPekIsS0FHekMrNUIsRUFBbUJsN0IsVUFBVTA3QixZQUFjLFNBQVVILEVBQVFsOEIsR0FDekQsT0FBSWs4QixFQUNPNTZCLEtBQUtpN0Isa0JBQWlCLFdBQWMsT0FBT0wsRUFBT2w4QixNQUlsRDY3QixFQUFtQnY0QixRQUFRdEQsSUFHMUM2N0IsRUFBbUJsN0IsVUFBVXk3QixZQUFjLFNBQVVELEVBQVMvMkIsR0FDMUQsT0FBSSsyQixFQUNPNzZCLEtBQUtpN0Isa0JBQWlCLFdBQWMsT0FBT0osRUFBUS8yQixNQUduRHkyQixFQUFtQnQ0QixPQUFPNkIsSUFHekN5MkIsRUFBbUJ2NEIsUUFBVSxTQUFVTSxHQUNuQyxPQUFPLElBQUlpNEIsR0FBbUIsU0FBVXY0QixFQUFTQyxHQUM3Q0QsRUFBUU0sT0FHaEJpNEIsRUFBbUJ0NEIsT0FBUyxTQUFVNkIsR0FDbEMsT0FBTyxJQUFJeTJCLEdBQW1CLFNBQVV2NEIsRUFBU0MsR0FDN0NBLEVBQU82QixPQUdmeTJCLEVBQW1CVyxRQUFVLFNBRzdCNWxCLEdBQ0ksT0FBTyxJQUFJaWxCLEdBQW1CLFNBQVV2NEIsRUFBU0MsR0FDN0MsSUFBSWs1QixFQUFnQixFQUNoQkMsRUFBZ0IsRUFDaEI3NEIsR0FBTyxFQUNYK1MsRUFBSTlELFNBQVEsU0FBVXVYLEtBQ2hCb1MsRUFDRnBTLEVBQVEzbUIsTUFBSyxhQUNQZzVCLEVBQ0U3NEIsR0FBUTY0QixJQUFrQkQsR0FDMUJuNUIsT0FFTCxTQUFVOE0sR0FBTyxPQUFPN00sRUFBTzZNLFNBRXRDdk0sR0FBTyxFQUNINjRCLElBQWtCRCxHQUNsQm41QixRQVVadTRCLEVBQW1CYyxHQUFLLFNBQVVDLEdBWTlCLElBWEEsSUFBSS83QixFQUFJZzdCLEVBQW1CdjRCLFNBQVEsR0FDL0J1UCxFQUFVLFNBQVVncUIsR0FDcEJoOEIsRUFBSUEsRUFBRTZDLE1BQUssU0FBVW81QixHQUNqQixPQUFJQSxFQUNPakIsRUFBbUJ2NEIsUUFBUXc1QixHQUczQkQsUUFJVjV3QixFQUFLLEVBQUc4d0IsRUFBZUgsRUFBWTN3QixFQUFLOHdCLEVBQWFwN0IsT0FBUXNLLElBQU0sQ0FFeEU0RyxFQURnQmtxQixFQUFhOXdCLElBR2pDLE9BQU9wTCxHQUVYZzdCLEVBQW1CL29CLFFBQVUsU0FBVWtxQixFQUFZLzRCLEdBQy9DLElBQUkrRyxFQUFRMUosS0FDUjI3QixFQUFXLEdBSWYsT0FIQUQsRUFBV2xxQixTQUFRLFNBQVVqVCxFQUFHaUIsR0FDNUJtOEIsRUFBU2w0QixLQUFLZCxFQUFFL0UsS0FBSzhMLEVBQU9uTCxFQUFHaUIsT0FFNUJRLEtBQUtrN0IsUUFBUVMsSUFFakJwQixFQWhLNEIsR0FtTG5DcUIsR0FBVSxXQWFWQyxHQUEwQixXQUMxQixTQUFTQSxFQUFTNWUsR0FDZGpkLEtBQUtpZCxHQUFLQSxFQU1TLE9BTEY0ZSxFQUFTQyxjQUFjbnBCLEVBQUs1SSxVQU16Q2pHLEVBQU0sZ01BK05kLE9Bak5BKzNCLEVBQVNFLGFBQWUsU0FBVS85QixFQUFNc1ksRUFBUzBsQixHQUc3QyxPQUZBbjJCLEVBQU9nMkIsRUFBU0ksY0FBZSxtREFDL0J0a0IsRUFBTWlrQixHQUFTLG9CQUFxQjU5QixHQUM3QixJQUFJdThCLElBQW1CLFNBQVV2NEIsRUFBU0MsR0FNN0MsSUFBSW1aLEVBQVVsTCxPQUFPdU8sVUFBVXlkLEtBQUtsK0IsRUFBTXNZLEdBQzFDOEUsRUFBUUMsVUFBWSxTQUFVc0QsR0FDMUIsSUFBSTFCLEVBQUswQixFQUFNN2QsT0FBT3dCLE9BQ3RCTixFQUFRLElBQUk2NUIsRUFBUzVlLEtBRXpCN0IsRUFBUStnQixVQUFZLFdBQ2hCbDZCLEVBQU8sSUFBSWlrQixFQUFlakIsRUFBS1csb0JBQXFCLHNJQUd4RHhLLEVBQVFFLFFBQVUsU0FBVXFELEdBQ3hCLElBQUk3YSxFQUFRNmEsRUFBTTdkLE9BQU9nRCxNQUNOLGlCQUFmQSxFQUFNOUYsS0FDTmlFLEVBQU8sSUFBSWlrQixFQUFlakIsRUFBS1csb0JBQXFCLHlWQU9wRDNqQixFQUFPNkIsSUFHZnNYLEVBQVFzRCxnQkFBa0IsU0FBVUMsR0FDaENoSCxFQUFNaWtCLEdBQVMsYUFBZTU5QixFQUFPLG1DQUFvQzJnQixFQUFNekIsWUFDL0UsSUFBSUQsRUFBSzBCLEVBQU03ZCxPQUFPd0IsT0FDdEIwNUIsRUFDS0ksZ0JBQWdCbmYsRUFBSTdCLEVBQVErQixZQUFhd0IsRUFBTXpCLFdBQVltZixJQUMzRGo2QixNQUFLLFdBQ051VixFQUFNaWtCLEdBQVMsK0JBQWlDUyxHQUFpQixvQkFHMUVyQixhQUdQYSxFQUFTM21CLE9BQVMsU0FBVWxYLEdBRXhCLE9BREEyWixFQUFNaWtCLEdBQVMscUJBQXNCNTlCLEdBQzlCcytCLEdBQVlwc0IsT0FBT3VPLFVBQVU4ZCxlQUFlditCLElBQU9nOUIsYUFHOURhLEVBQVNJLFlBQWMsV0FDbkIsR0FBc0Isb0JBQVgvckIsUUFBOEMsTUFBcEJBLE9BQU91TyxVQUN4QyxPQUFPLEVBRVgsR0FBSW9kLEVBQVNXLG9CQUNULE9BQU8sRUFLWCxRQUF5Qmp6QixJQUFyQjJHLE9BQU9sRyxVQUNQLE9BQU8sRUFTWCxJQUFJeXlCLEVBQUs5cEIsRUFBSzVJLFFBU1YyeUIsRUFBYWIsRUFBU0MsY0FBY1csR0FDcENFLEVBQW1CLEVBQUlELEdBQWNBLEVBQWEsR0FFbERFLEVBQWlCZixFQUFTZ0Isa0JBQWtCSixHQUM1Q0ssRUFBdUIsRUFBSUYsR0FBa0JBLEVBQWlCLElBQ2xFLFFBQUlILEVBQUdoOEIsUUFBUSxTQUFXLEdBQ3RCZzhCLEVBQUdoOEIsUUFBUSxZQUFjLEdBQ3pCZzhCLEVBQUdoOEIsUUFBUSxTQUFXLEdBQ3RCazhCLEdBQ0FHLElBV1JqQixFQUFTVyxrQkFBb0IsV0FDekIsSUFBSXZ4QixFQUNKLFlBQTJCLElBQVpxRixHQUMyRSxTQUE5RCxRQUF0QnJGLEVBQUssd09BQWdDLElBQVBBLE9BQWdCLEVBQVNBLEVBQUc4eEIsdUJBR3BFbEIsRUFBU21CLFNBQVcsU0FBVUMsRUFBS3hnQixHQUMvQixPQUFPd2dCLEVBQUl4Z0IsTUFBTUEsSUFJckJvZixFQUFTQyxjQUFnQixTQUFVVyxHQUMvQixJQUFJUyxFQUFrQlQsRUFBRzdqQixNQUFNLG1DQUMzQnRDLEVBQVU0bUIsRUFDUkEsRUFBZ0IsR0FDYmh4QixNQUFNLEtBQ05kLE1BQU0sRUFBRyxHQUNUdEQsS0FBSyxLQUNSLEtBQ04sT0FBTzhlLE9BQU90USxJQUlsQnVsQixFQUFTZ0Isa0JBQW9CLFNBQVVKLEdBQ25DLElBQUlVLEVBQXNCVixFQUFHN2pCLE1BQU0scUJBQy9CdEMsRUFBVTZtQixFQUNSQSxFQUFvQixHQUNqQmp4QixNQUFNLEtBQ05kLE1BQU0sRUFBRyxHQUNUdEQsS0FBSyxLQUNSLEtBQ04sT0FBTzhlLE9BQU90USxJQUVsQnVsQixFQUFTeDhCLFVBQVUrOUIseUJBQTJCLFNBQVVDLEdBQ3BEcjlCLEtBQUtpZCxHQUFHcWdCLGdCQUFrQixTQUFVM2UsR0FDaEMsT0FBTzBlLEVBQXNCMWUsS0FHckNrZCxFQUFTeDhCLFVBQVVrK0IsZUFBaUIsU0FBVTMrQixFQUFNNCtCLEVBQWNDLEdBQzlELE9BQU9qNEIsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJMDlCLEVBQVVDLEVBQVlDLEVBQWVyc0IsRUFBU3NzQixFQUFRQyxFQUMxRCxPQUFPdDRCLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUNEMjZCLEVBQVc5K0IsRUFBS20vQixXQUFXLFlBQzNCSixFQUFhLytCLEVBQUtvL0IsU0FBUyxjQUMzQkosRUFBZ0IsRUFDaEJyc0IsRUFBVSxXQUNOLElBQUk0TCxFQUFhOGdCLEVBQXFCQyxFQUFTQyxFQUMvQyxPQUFPMzRCLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxJQUNDNjZCLEVBQ0Z6Z0IsRUFBY2loQixHQUFvQmxDLEtBQUsyQixFQUFPNWdCLEdBQUl5Z0IsRUFBVyxXQUFhLFlBQWFGLEdBQ3ZGdnlCLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQW1CRCxPQWxCQWtJLEVBQUdoSSxLQUFLUSxLQUFLLENBQUMsRUFBRyxFQUFHLENBQUUsS0FDdEJ3NkIsRUFBc0JSLEVBQWN0Z0IsR0FDL0JyVCxPQUFNLFNBQVVoRyxHQU9qQixPQUxBcVosRUFBWWtoQixNQUFNdjZCLEdBS1h5MkIsR0FBbUJ0NEIsT0FBTzZCLE1BRWhDazNCLGFBR2VseEIsT0FBTSxlQUluQixDQUFDLEVBQWFxVCxFQUFZbWhCLG1CQUNyQyxLQUFLLEVBS0QsT0FEQXJ6QixFQUFHakksT0FDSSxDQUFDLEVBQWMsQ0FBRXRFLE1BQU91L0IsSUFDbkMsS0FBSyxFQU1ELE9BTEFDLEVBQVVqekIsRUFBR2pJLE9BQ2JtN0IsRUFBWVIsR0FDUyxrQkFBakJPLEVBQVFsZ0MsTUFDUjQvQixFQXJOZCxFQXNOVWptQixFQUFNaWtCLEdBQVMsbURBQW9Ec0MsRUFBUW40QixRQUFTbzRCLEdBQy9FQSxFQUdFLENBQUMsRUFBYSxHQUZWLENBQUMsRUFBYyxDQUFFei9CLE1BQU9xRCxRQUFRRSxPQUFPaThCLEtBR3RELEtBQUssRUFBRyxNQUFPLENBQUMsUUFJNUJMLEVBQVM3OUIsS0FDVGlMLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUNELE1BQU8sQ0FBQyxFQUFjd08sS0FDMUIsS0FBSyxFQUVELE1BQXVCLGlCQUR2QnVzQixFQUFVN3lCLEVBQUdqSSxRQUVGLENBQUMsRUFBYzg2QixFQUFRcC9CLE9BQzNCLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBS2hDbTlCLEVBQVN4OEIsVUFBVTBPLE1BQVEsV0FDdkIvTixLQUFLaWQsR0FBR2xQLFNBRUw4dEIsRUF4T2tCLEdBK096QjBDLEdBQXFDLFdBQ3JDLFNBQVNBLEVBQW9CQyxHQUN6QngrQixLQUFLdytCLFNBQVdBLEVBQ2hCeCtCLEtBQUt5K0IsWUFBYSxFQUNsQnorQixLQUFLMCtCLFFBQVUsS0E0Q25CLE9BMUNBdmdDLE9BQU9DLGVBQWVtZ0MsRUFBb0JsL0IsVUFBVyxTQUFVLENBQzNEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUt5K0IsWUFFaEJwZ0MsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWVtZ0MsRUFBb0JsL0IsVUFBVyxZQUFhLENBQzlEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUswK0IsU0FFaEJyZ0MsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWVtZ0MsRUFBb0JsL0IsVUFBVyxTQUFVLENBQzNENlUsSUFBSyxTQUFVeFYsR0FDWHNCLEtBQUt3K0IsU0FBVzkvQixHQUVwQkwsWUFBWSxFQUNaa1osY0FBYyxJQUtsQmduQixFQUFvQmwvQixVQUFVa0QsS0FBTyxXQUNqQ3ZDLEtBQUt5K0IsWUFBYSxHQU10QkYsRUFBb0JsL0IsVUFBVXMvQixLQUFPLFNBQVUzL0IsR0FDM0NnQixLQUFLMCtCLFFBQVUxL0IsR0FPbkJ1L0IsRUFBb0JsL0IsVUFBVTZWLE9BQVMsV0FDbkMsT0FBT29uQixHQUFZdDhCLEtBQUt3K0IsU0FBU3RwQixXQUU5QnFwQixFQWhENkIsR0FzRHBDSCxHQUFxQyxXQUNyQyxTQUFTQSxFQUFvQmpoQixHQUN6QixJQUFJelQsRUFBUTFKLEtBQ1pBLEtBQUttZCxZQUFjQSxFQUNuQm5kLEtBQUs0K0IsU0FBVSxFQUlmNStCLEtBQUs2K0IsbUJBQXFCLElBQUlwMUIsR0FDOUJ6SixLQUFLbWQsWUFBWUwsV0FBYSxXQUMxQnBULEVBQU1tMUIsbUJBQW1CNzhCLFdBRTdCaEMsS0FBS21kLFlBQVlKLFFBQVUsV0FDbkJJLEVBQVlyWixNQUNaNEYsRUFBTW0xQixtQkFBbUI1OEIsT0FBT2tiLEVBQVlyWixPQUc1QzRGLEVBQU1tMUIsbUJBQW1CNzhCLFdBR2pDaEMsS0FBS21kLFlBQVk3QixRQUFVLFNBQVVxRCxHQUNqQyxJQUFJN2EsRUFBUWc3QixHQUEwQm5nQixFQUFNN2QsT0FBT2dELE9BQ25ENEYsRUFBTW0xQixtQkFBbUI1OEIsT0FBTzZCLElBcUN4QyxPQWxDQXM2QixFQUFvQmxDLEtBQU8sU0FBVWpmLEVBQUlyZSxFQUFNbWdDLEdBQzNDLE9BQU8sSUFBSVgsRUFBb0JuaEIsRUFBR0UsWUFBWTRoQixFQUFrQm5nQyxLQUVwRVQsT0FBT0MsZUFBZWdnQyxFQUFvQi8rQixVQUFXLG9CQUFxQixDQUN0RWYsSUFBSyxXQUNELE9BQU8wQixLQUFLNitCLG1CQUFtQmwxQixTQUVuQ3RMLFlBQVksRUFDWmtaLGNBQWMsSUFFbEI2bUIsRUFBb0IvK0IsVUFBVWcvQixNQUFRLFNBQVV2NkIsR0FDeENBLEdBQ0E5RCxLQUFLNitCLG1CQUFtQjU4QixPQUFPNkIsR0FFOUI5RCxLQUFLNCtCLFVBQ05qbkIsRUFBTWlrQixHQUFTLHdCQUF5QjkzQixFQUFRQSxFQUFNaUMsUUFBVSwwQkFDaEUvRixLQUFLNCtCLFNBQVUsRUFDZjUrQixLQUFLbWQsWUFBWWtoQixVQVl6QkQsRUFBb0IvK0IsVUFBVW9kLE1BQVEsU0FBVXVpQixHQUM1QyxJQUFJdmlCLEVBQVF6YyxLQUFLbWQsWUFBWVEsWUFBWXFoQixHQUV6QyxPQURBbjVCLElBQVM0VyxFQUFPLHlDQUEyQ3VpQixHQUNwRCxJQUFJQyxHQUFjeGlCLElBRXRCMmhCLEVBM0Q2QixHQXVFcENhLEdBQStCLFdBQy9CLFNBQVNBLEVBQWN4aUIsR0FDbkJ6YyxLQUFLeWMsTUFBUUEsRUFxTWpCLE9Bbk1Bd2lCLEVBQWM1L0IsVUFBVTYvQixJQUFNLFNBQVVDLEVBQVl6Z0MsR0FDaEQsSUFBSTBjLEVBU0osWUFSYzdSLElBQVY3SyxHQUNBaVosRUFBTWlrQixHQUFTLE1BQU81N0IsS0FBS3ljLE1BQU16ZSxLQUFNbWhDLEVBQVl6Z0MsR0FDbkQwYyxFQUFVcGIsS0FBS3ljLE1BQU15aUIsSUFBSXhnQyxFQUFPeWdDLEtBR2hDeG5CLEVBQU1pa0IsR0FBUyxNQUFPNTdCLEtBQUt5YyxNQUFNemUsS0FBTSxhQUFjbWhDLEdBQ3JEL2pCLEVBQVVwYixLQUFLeWMsTUFBTXlpQixJQUFJQyxJQUV0QjdDLEdBQVlsaEIsSUFTdkI2akIsRUFBYzUvQixVQUFVNDNCLElBQU0sU0FBVXY0QixHQUdwQyxPQUZBaVosRUFBTWlrQixHQUFTLE1BQU81N0IsS0FBS3ljLE1BQU16ZSxLQUFNVSxFQUFPQSxHQUV2QzQ5QixHQURPdDhCLEtBQUt5YyxNQUFNd2EsSUFBSXY0QixLQVVqQ3VnQyxFQUFjNS9CLFVBQVVmLElBQU0sU0FBVVUsR0FDcEMsSUFBSTBLLEVBQVExSixLQUlaLE9BQU9zOEIsR0FIT3Q4QixLQUFLeWMsTUFBTW5lLElBQUlVLElBR0RvRCxNQUFLLFNBQVVFLEdBTXZDLFlBSmVpSCxJQUFYakgsSUFDQUEsRUFBUyxNQUVicVYsRUFBTWlrQixHQUFTLE1BQU9seUIsRUFBTStTLE1BQU16ZSxLQUFNZ0IsRUFBS3NELEdBQ3RDQSxNQUdmMjhCLEVBQWM1L0IsVUFBVTZWLE9BQVMsU0FBVWxXLEdBR3ZDLE9BRkEyWSxFQUFNaWtCLEdBQVMsU0FBVTU3QixLQUFLeWMsTUFBTXplLEtBQU1nQixHQUVuQ3M5QixHQURPdDhCLEtBQUt5YyxNQUFNdkgsT0FBT2xXLEtBU3BDaWdDLEVBQWM1L0IsVUFBVThlLE1BQVEsV0FHNUIsT0FGQXhHLEVBQU1pa0IsR0FBUyxRQUFTNTdCLEtBQUt5YyxNQUFNemUsTUFFNUJzK0IsR0FET3Q4QixLQUFLeWMsTUFBTTBCLFVBRzdCOGdCLEVBQWM1L0IsVUFBVSsvQixRQUFVLFNBQVVDLEVBQWM5SCxHQUN0RCxJQUFJbGIsRUFBU3JjLEtBQUtxYyxPQUFPcmMsS0FBS3NVLFFBQVErcUIsRUFBYzlILElBQ2hEbE8sRUFBVSxHQUNkLE9BQU9ycEIsS0FBS3FlLGNBQWNoQyxHQUFRLFNBQVVyZCxFQUFLTixHQUM3QzJxQixFQUFRNWxCLEtBQUsvRSxNQUNkMEQsTUFBSyxXQUNKLE9BQU9pbkIsTUFHZjRWLEVBQWM1L0IsVUFBVWlnQyxVQUFZLFNBQVVELEVBQWM5SCxHQUN4RDVmLEVBQU1pa0IsR0FBUyxhQUFjNTdCLEtBQUt5YyxNQUFNemUsTUFDeEMsSUFBSXNXLEVBQVV0VSxLQUFLc1UsUUFBUStxQixFQUFjOUgsR0FDekNqakIsRUFBUWlyQixVQUFXLEVBQ25CLElBQUlsakIsRUFBU3JjLEtBQUtxYyxPQUFPL0gsR0FDekIsT0FBT3RVLEtBQUtxZSxjQUFjaEMsR0FBUSxTQUFVcmQsRUFBS04sRUFBTzhnQyxHQU9wRCxPQUFPQSxFQUFRdHFCLGFBR3ZCK3BCLEVBQWM1L0IsVUFBVW9nQyxRQUFVLFNBQVVDLEVBQW1CNzFCLEdBQzNELElBQUl5SyxFQUNDekssRUFLRHlLLEVBQVVvckIsR0FKVnByQixFQUFVLEdBQ1Z6SyxFQUFXNjFCLEdBS2YsSUFBSXJqQixFQUFTcmMsS0FBS3FjLE9BQU8vSCxHQUN6QixPQUFPdFUsS0FBS3FlLGNBQWNoQyxFQUFReFMsSUFVdENvMUIsRUFBYzUvQixVQUFVc2dDLGNBQWdCLFNBQVU5MUIsR0FDOUMsSUFBSSsxQixFQUFnQjUvQixLQUFLcWMsT0FBTyxJQUNoQyxPQUFPLElBQUlrZSxJQUFtQixTQUFVdjRCLEVBQVNDLEdBQzdDMjlCLEVBQWN0a0IsUUFBVSxTQUFVcUQsR0FDOUIsSUFBSTdhLEVBQVFnN0IsR0FBMEJuZ0IsRUFBTTdkLE9BQU9nRCxPQUNuRDdCLEVBQU82QixJQUVYODdCLEVBQWN2a0IsVUFBWSxTQUFVc0QsR0FDaEMsSUFBSXRDLEVBQVNzQyxFQUFNN2QsT0FBT3dCLE9BQ3JCK1osRUFJTHhTLEVBQVN3UyxFQUFPd2pCLFdBQVl4akIsRUFBTzNkLE9BQU8wRCxNQUFLLFNBQVUwOUIsR0FDakRBLEVBQ0F6akIsRUFBT2lDLFdBR1B0YyxPQVJKQSxTQWNoQmk5QixFQUFjNS9CLFVBQVVnZixjQUFnQixTQUFVdWhCLEVBQWVoeEIsR0FDN0QsSUFBSXlhLEVBQVUsR0FDZCxPQUFPLElBQUlrUixJQUFtQixTQUFVdjRCLEVBQVNDLEdBQzdDMjlCLEVBQWN0a0IsUUFBVSxTQUFVcUQsR0FDOUIxYyxFQUFPMGMsRUFBTTdkLE9BQU9nRCxRQUV4Qjg3QixFQUFjdmtCLFVBQVksU0FBVXNELEdBQ2hDLElBQUl0QyxFQUFTc0MsRUFBTTdkLE9BQU93QixPQUMxQixHQUFLK1osRUFBTCxDQUlBLElBQUkwakIsRUFBYSxJQUFJeEIsR0FBb0JsaUIsR0FDckMyakIsRUFBYXB4QixFQUFHeU4sRUFBT3dqQixXQUFZeGpCLEVBQU8zZCxNQUFPcWhDLEdBQ3JELEdBQUlDLGFBQXNCekYsR0FBb0IsQ0FDMUMsSUFBSTBGLEVBQWNELEVBQVdsMkIsT0FBTSxTQUFVZ0YsR0FFekMsT0FEQWl4QixFQUFXeDlCLE9BQ0pnNEIsR0FBbUJ0NEIsT0FBTzZNLE1BRXJDdWEsRUFBUTVsQixLQUFLdzhCLEdBRWJGLEVBQVdyRixPQUNYMTRCLElBRThCLE9BQXpCKzlCLEVBQVdHLFVBQ2hCN2pCLEVBQU9pQyxXQUdQakMsRUFBT2lDLFNBQVN5aEIsRUFBV0csZ0JBbkIzQmwrQixRQXNCVEksTUFBSyxXQUNKLE9BQU9tNEIsR0FBbUJXLFFBQVE3UixPQUcxQzRWLEVBQWM1L0IsVUFBVWlWLFFBQVUsU0FBVStxQixFQUFjOUgsR0FDdEQsSUFBSTRJLE9BQVk1MkIsRUFVaEIsWUFUcUJBLElBQWpCODFCLElBQzRCLGlCQUFqQkEsRUFDUGMsRUFBWWQsR0FHWng1QixPQUFpQjBELElBQVZndUIsRUFBcUIsdURBQzVCQSxFQUFROEgsSUFHVCxDQUFFbGpCLE1BQU9na0IsRUFBVzVJLE1BQU9BLElBRXRDMEgsRUFBYzUvQixVQUFVZ2QsT0FBUyxTQUFVL0gsR0FDdkMsSUFBSThyQixFQUFZLE9BSWhCLEdBSEk5ckIsRUFBUStyQixVQUNSRCxFQUFZLFFBRVo5ckIsRUFBUTZILE1BQU8sQ0FDZixJQUFJQSxFQUFRbmMsS0FBS3ljLE1BQU1OLE1BQU03SCxFQUFRNkgsT0FDckMsT0FBSTdILEVBQVFpckIsU0FDRHBqQixFQUFNbWtCLGNBQWNoc0IsRUFBUWlqQixNQUFPNkksR0FHbkNqa0IsRUFBTW9rQixXQUFXanNCLEVBQVFpakIsTUFBTzZJLEdBSTNDLE9BQU9wZ0MsS0FBS3ljLE1BQU04akIsV0FBV2pzQixFQUFRaWpCLE1BQU82SSxJQUc3Q25CLEVBdk11QixHQTZNbEMsU0FBUzNDLEdBQVlsaEIsR0FDakIsT0FBTyxJQUFJbWYsSUFBbUIsU0FBVXY0QixFQUFTQyxHQUM3Q21aLEVBQVFDLFVBQVksU0FBVXNELEdBQzFCLElBQUlyYyxFQUFTcWMsRUFBTTdkLE9BQU93QixPQUMxQk4sRUFBUU0sSUFFWjhZLEVBQVFFLFFBQVUsU0FBVXFELEdBQ3hCLElBQUk3YSxFQUFRZzdCLEdBQTBCbmdCLEVBQU03ZCxPQUFPZ0QsT0FDbkQ3QixFQUFPNkIsT0FLbkIsSUFBSTA4QixJQUFtQixFQUN2QixTQUFTMUIsR0FBMEJoN0IsR0FDL0IsSUFBSTQ0QixFQUFhYixHQUFTQyxjQUFjbnBCLEVBQUs1SSxTQUM3QyxHQUFJMnlCLEdBQWMsTUFBUUEsRUFBYSxHQUFJLENBQ3ZDLElBQUkrRCxFQUFZLG1FQUNoQixHQUFJMzhCLEVBQU1pQyxRQUFRdEYsUUFBUWdnQyxJQUFjLEVBQUcsQ0FFdkMsSUFBSUMsRUFBYSxJQUFJeGEsRUFBZSxXQUFZLDZDQUErQ3VhLEVBQVksK0lBVzNHLE9BUktELEtBQ0RBLElBQW1CLEVBR25CalEsWUFBVyxXQUNQLE1BQU1tUSxJQUNQLElBRUFBLEdBR2YsT0FBTzU4Qjs7Ozs7Ozs7Ozs7Ozs7OztHQW9CWCxJQUFJNjhCLEdBQXdDLFdBQ3hDLFNBQVNBLEVBS1RDLEVBQVFDLEVBQVlDLEVBQWNDLEdBQzlCL2dDLEtBQUs0Z0MsT0FBU0EsRUFDZDVnQyxLQUFLNmdDLFdBQWFBLEVBQ2xCN2dDLEtBQUs4Z0MsYUFBZUEsRUFDcEI5Z0MsS0FBSytnQyxrQkFBb0JBLEVBYXpCL2dDLEtBQUtnaEMsc0JBQXdCLEdBNlVqQyxPQXRVQUwsRUFBdUJNLFFBQVUsU0FBVUMsRUFBTUwsRUFBWUMsRUFBY0MsR0FPdkUsT0FGQWw3QixFQUFvQixLQUFicTdCLEVBQUtDLElBQVksdUNBRWpCLElBQUlSLEVBREVPLEVBQUtFLGtCQUFvQkYsRUFBS0MsSUFBTSxHQUNQTixFQUFZQyxFQUFjQyxJQUV4RUosRUFBdUJ0aEMsVUFBVWdpQyxXQUFhLFNBQVVsa0IsR0FDcEQsSUFBSW1rQixHQUFRLEVBQ1IvSixFQUFRZ0ssWUFBWUMsTUFBTSxDQUFDeGhDLEtBQUs0Z0MsT0FBUWhhLE9BQU82YSxtQkFBb0IsQ0FBQ3poQyxLQUFLNGdDLE9BQVFoYSxPQUFPOGEsb0JBQzVGLE9BQU9DLEdBQWV4a0IsR0FDakJzaUIsUUFBUSxDQUFFdGpCLE1BQU95bEIsR0FBZ0JDLG1CQUFvQnRLLE1BQU9BLElBQVMsU0FBVXY0QixFQUFLTixFQUFPOGdDLEdBQzVGOEIsR0FBUSxFQUNSOUIsRUFBUWo5QixVQUVQSCxNQUFLLFdBQWMsT0FBT2svQixNQUVuQ1gsRUFBdUJ0aEMsVUFBVXlpQyxpQkFBbUIsU0FBVTNrQixFQUFhK2MsRUFBT0UsR0FDOUUsT0FBT3A2QixLQUFLK2hDLHlCQUF5QjVrQixHQUFhL2EsTUFBSyxTQUFVWCxHQUU3RCxPQURBQSxFQUFTdWdDLGdCQUFrQkMsR0FBbUI3SCxHQUN2QzhILEdBQW9CL2tCLEdBQWEraEIsSUFBSXo5QixPQUdwRGsvQixFQUF1QnRoQyxVQUFVOGlDLG1CQUFxQixTQUFVaGxCLEdBQzVELE9BQU9uZCxLQUFLK2hDLHlCQUF5QjVrQixHQUFhL2EsTUFBSyxTQUFVWCxHQUFZLE9BQU9BLEVBQVN1Z0Msb0JBRWpHckIsRUFBdUJ0aEMsVUFBVStpQyxtQkFBcUIsU0FBVWpsQixFQUFhaWQsR0FDekUsT0FBT3A2QixLQUFLK2hDLHlCQUF5QjVrQixHQUFhL2EsTUFBSyxTQUFVWCxHQUU3RCxPQURBQSxFQUFTdWdDLGdCQUFrQkMsR0FBbUI3SCxHQUN2QzhILEdBQW9CL2tCLEdBQWEraEIsSUFBSXo5QixPQUdwRGsvQixFQUF1QnRoQyxVQUFVZ2pDLGlCQUFtQixTQUFVbGxCLEVBQWE2YixFQUFnQkMsRUFBZUMsR0FDdEcsSUFBSXh2QixFQUFRMUosS0FDUnNpQyxFQUFnQkMsR0FBdUJwbEIsR0FDdkNxbEIsRUFBZ0JiLEdBQWV4a0IsR0FVbkMsT0FBT3FsQixFQUFjdkwsSUFBSSxJQUFJNzBCLE1BQUssU0FBVTIyQixHQUN4Q2x6QixFQUEwQixpQkFBWmt6QixFQUFzQixzQ0FPcEMsSUFOQSxJQUFJbUIsRUFBUSxJQUFJcEIsR0FBY0MsRUFBU0MsRUFBZ0JDLEVBQWVDLEdBQ2xFdUosRUFBVS80QixFQUFNbTNCLFdBQVc2QixrQkFBa0JoNUIsRUFBTWszQixPQUFRMUcsR0FDM0R5QixFQUFXLEdBQ1hnSCxFQUFvQixJQUFJNUwsSUFBVSxTQUFVcjVCLEVBQUdhLEdBQy9DLE9BQU8yckIsRUFBb0J4c0IsRUFBRTZ3QixrQkFBbUJod0IsRUFBRWd3QixzQkFFN0M1akIsRUFBSyxFQUFHaTRCLEVBQWMxSixFQUFXdnVCLEVBQUtpNEIsRUFBWXZpQyxPQUFRc0ssSUFBTSxDQUNyRSxJQUFJNnVCLEVBQVdvSixFQUFZajRCLEdBQ3ZCazRCLEVBQVdDLEdBQW1COWpDLElBQUkwSyxFQUFNazNCLE9BQVFwSCxFQUFTeDZCLElBQUl5dkIsS0FBTXNLLEdBQ3ZFNEosRUFBb0JBLEVBQWtCMUwsSUFBSXVDLEVBQVN4NkIsSUFBSXl2QixLQUFLYixXQUM1RCtOLEVBQVNsNEIsS0FBSysrQixFQUFjdEQsSUFBSXVELElBQ2hDOUcsRUFBU2w0QixLQUFLNitCLEVBQWNwRCxJQUFJMkQsRUFBVUMsR0FBbUJDLGNBUWpFLE9BTkFKLEVBQWtCbnhCLFNBQVEsU0FBVXd4QixHQUNoQ3JILEVBQVNsNEIsS0FBS2lHLEVBQU1vM0IsYUFBYW1DLDJCQUEyQjlsQixFQUFhNmxCLE9BRTdFN2xCLEVBQVkrbEIsd0JBQXVCLFdBQy9CeDVCLEVBQU1zM0Isc0JBQXNCakksR0FBV21CLEVBQU0vdUIsVUFFMUNvdkIsR0FBbUJXLFFBQVFTLEdBQVV2NUIsTUFBSyxXQUFjLE9BQU84M0IsU0FHOUV5RyxFQUF1QnRoQyxVQUFVOGpDLG9CQUFzQixTQUFVaG1CLEVBQWE0YixHQUMxRSxJQUFJcnZCLEVBQVExSixLQUNaLE9BQU8yaEMsR0FBZXhrQixHQUNqQjdlLElBQUl5NkIsR0FDSjMyQixNQUFLLFNBQVVxZ0MsR0FDaEIsT0FBSUEsR0FDQTU4QixFQUFPNDhCLEVBQVE3QixTQUFXbDNCLEVBQU1rM0IsT0FBUSxvQkFBc0I2QixFQUFRN0IsT0FBUyx3QkFBMEI3SCxHQUNsR3J2QixFQUFNbTNCLFdBQVd1QyxvQkFBb0JYLElBRXpDLFNBR2Y5QixFQUF1QnRoQyxVQUFVZ2tDLG1CQUFxQixTQUFVbG1CLEVBQWE0YixHQUN6RSxJQUFJcnZCLEVBQVExSixLQUNaLE9BQUlBLEtBQUtnaEMsc0JBQXNCakksR0FDcEJ3QixHQUFtQnY0QixRQUFRaEMsS0FBS2doQyxzQkFBc0JqSSxJQUd0RC80QixLQUFLbWpDLG9CQUFvQmhtQixFQUFhNGIsR0FBUzMyQixNQUFLLFNBQVU4M0IsR0FDakUsR0FBSUEsRUFBTyxDQUNQLElBQUkvdUIsRUFBTyt1QixFQUFNL3VCLE9BRWpCLE9BREF6QixFQUFNczNCLHNCQUFzQmpJLEdBQVc1dEIsRUFDaENBLEVBR1AsT0FBTyxTQUt2QncxQixFQUF1QnRoQyxVQUFVaWtDLGlDQUFtQyxTQUFVbm1CLEVBQWE0YixHQUN2RixJQUFJcnZCLEVBQVExSixLQUNSdWpDLEVBQWN4SyxFQUFVLEVBQ3hCeEIsRUFBUWdLLFlBQVlpQyxXQUFXLENBQUN4akMsS0FBSzRnQyxPQUFRMkMsSUFDN0NFLEVBQWEsS0FDakIsT0FBTzlCLEdBQWV4a0IsR0FDakJzaUIsUUFBUSxDQUFFdGpCLE1BQU95bEIsR0FBZ0JDLG1CQUFvQnRLLE1BQU9BLElBQVMsU0FBVXY0QixFQUFLeWpDLEVBQVNqRCxHQUMxRmlELEVBQVE3QixTQUFXbDNCLEVBQU1rM0IsU0FDekIvNkIsRUFBTzQ4QixFQUFRMUosU0FBV3dLLEVBQWEsb0NBQXNDQSxHQUM3RUUsRUFBYS81QixFQUFNbTNCLFdBQVd1QyxvQkFBb0JYLElBRXREakQsRUFBUWo5QixVQUVQSCxNQUFLLFdBQWMsT0FBT3FoQyxNQUVuQzlDLEVBQXVCdGhDLFVBQVVxa0MsZ0NBQWtDLFNBQVV2bUIsR0FDekUsSUFBSW9hLEVBQVFnSyxZQUFZb0MsV0FBVyxDQUMvQjNqQyxLQUFLNGdDLE9BQ0xoYSxPQUFPOGEsb0JBRVAzSSxHQTdtQ1UsRUE4bUNkLE9BQU80SSxHQUFleGtCLEdBQ2pCc2lCLFFBQVEsQ0FBRXRqQixNQUFPeWxCLEdBQWdCQyxtQkFBb0J0SyxNQUFPQSxFQUFPOEksU0FBUyxJQUFRLFNBQVVyaEMsRUFBS3lqQyxFQUFTakQsR0FDN0d6RyxFQUFVMEosRUFBUTFKLFFBQ2xCeUcsRUFBUWo5QixVQUVQSCxNQUFLLFdBQWMsT0FBTzIyQixNQUVuQzRILEVBQXVCdGhDLFVBQVV1a0Msc0JBQXdCLFNBQVV6bUIsR0FDL0QsSUFBSXpULEVBQVExSixLQUNSdTNCLEVBQVFnSyxZQUFZQyxNQUFNLENBQUN4aEMsS0FBSzRnQyxRQXZuQ3RCLEdBdW5DZ0QsQ0FBQzVnQyxLQUFLNGdDLE9BQVFoYSxPQUFPOGEsb0JBQ25GLE9BQU9DLEdBQWV4a0IsR0FDakJpaUIsUUFBUXdDLEdBQWdCQyxtQkFBb0J0SyxHQUM1Q24xQixNQUFLLFNBQVV5aEMsR0FDaEIsT0FBT0EsRUFBVTV5QixLQUFJLFNBQVV3eEIsR0FBVyxPQUFPLzRCLEVBQU1tM0IsV0FBV3VDLG9CQUFvQlgsVUFHOUY5QixFQUF1QnRoQyxVQUFVeWtDLDBDQUE0QyxTQUFVM21CLEVBQWE0bUIsR0FDaEcsSUFBSXI2QixFQUFRMUosS0FHUmdrQyxFQUFjbEIsR0FBbUJtQixjQUFjamtDLEtBQUs0Z0MsT0FBUW1ELEVBQVl0VixNQUN4RXlWLEVBQWEzQyxZQUFZaUMsV0FBV1EsR0FDcEMzYSxFQUFVLEdBQ2QsT0FBT2taLEdBQXVCcGxCLEdBQ3pCc2lCLFFBQVEsQ0FBRWxJLE1BQU8yTSxJQUFjLFNBQVVyQixFQUFVLy9CLEVBQUcwOEIsR0FDdkQsSUFBSTJFLEVBQVN0QixFQUFTLEdBQUl1QixFQUFjdkIsRUFBUyxHQUFJOUosRUFBVThKLEVBQVMsR0FRcEVwVSxFQUFPN2lCLEdBQU93NEIsR0FDbEIsR0FBSUQsSUFBV3o2QixFQUFNazNCLFFBQVdtRCxFQUFZdFYsS0FBS25FLFFBQVFtRSxHQUt6RCxPQUFPa1QsR0FBZXhrQixHQUNqQjdlLElBQUl5NkIsR0FDSjMyQixNQUFLLFNBQVVvM0IsR0FDaEIsSUFBS0EsRUFDRCxNQUFNM1UsRUFBSywrQ0FDUGdlLEVBQ0Esb0JBQ0E5SixHQUVSbHpCLEVBQU8yekIsRUFBU29ILFNBQVdsM0IsRUFBTWszQixPQUFRLG9CQUFzQnBILEVBQVNvSCxPQUFTLHdCQUEwQjdILEdBQzNHMVAsRUFBUTVsQixLQUFLaUcsRUFBTW0zQixXQUFXdUMsb0JBQW9CNUosT0FkbERnRyxFQUFRajlCLFVBaUJYSCxNQUFLLFdBQWMsT0FBT2luQixNQUVuQ3NYLEVBQXVCdGhDLFVBQVVnbEMsMkNBQTZDLFNBQVVsbkIsRUFBYW1uQixHQUNqRyxJQUFJNTZCLEVBQVExSixLQUNSdWtDLEVBQWlCLElBQUl4TixHQUFVN00sR0FDL0J5UixFQUFXLEdBc0JmLE9BckJBMkksRUFBYTl5QixTQUFRLFNBQVV1eUIsR0FDM0IsSUFBSUcsRUFBYXBCLEdBQW1CbUIsY0FBY3Y2QixFQUFNazNCLE9BQVFtRCxFQUFZdFYsTUFDeEU4SSxFQUFRZ0ssWUFBWWlDLFdBQVdVLEdBQy9CdjZCLEVBQVU0NEIsR0FBdUJwbEIsR0FBYXNpQixRQUFRLENBQUVsSSxNQUFPQSxJQUFTLFNBQVVzTCxFQUFVLy9CLEVBQUcwOEIsR0FDL0YsSUFBSTJFLEVBQVN0QixFQUFTLEdBQUl1QixFQUFjdkIsRUFBUyxHQUFJMkIsRUFBVTNCLEVBQVMsR0FRcEVwVSxFQUFPN2lCLEdBQU93NEIsR0FDZEQsSUFBV3o2QixFQUFNazNCLFFBQVdtRCxFQUFZdFYsS0FBS25FLFFBQVFtRSxHQUl6RDhWLEVBQWlCQSxFQUFldE4sSUFBSXVOLEdBSGhDaEYsRUFBUWo5QixVQUtoQm81QixFQUFTbDRCLEtBQUtrRyxNQUVYNHdCLEdBQW1CVyxRQUFRUyxHQUFVdjVCLE1BQUssV0FDN0MsT0FBT3NILEVBQU0rNkIsc0JBQXNCdG5CLEVBQWFvbkIsT0FHeEQ1RCxFQUF1QnRoQyxVQUFVcWxDLG9DQUFzQyxTQUFVdm5CLEVBQWFlLEdBQzFGLElBQUl4VSxFQUFRMUosS0FDWjZGLEdBQVFxWSxFQUFNeW1CLGtCQUFtQixnREFDakM5K0IsR0FBUXFZLEVBQU0wbUIseUJBQTBCLG1FQUN4QyxJQUFJQyxFQUFZM21CLEVBQU11USxLQUNsQnFXLEVBQTBCRCxFQUFVeGtDLE9BQVMsRUFZN0MyakMsRUFBY2xCLEdBQW1CbUIsY0FBY2prQyxLQUFLNGdDLE9BQVFpRSxHQUM1RFgsRUFBYTNDLFlBQVlpQyxXQUFXUSxHQUlwQ08sRUFBaUIsSUFBSXhOLEdBQVU3TSxHQUNuQyxPQUFPcVksR0FBdUJwbEIsR0FDekJzaUIsUUFBUSxDQUFFbEksTUFBTzJNLElBQWMsU0FBVXJCLEVBQVUvL0IsRUFBRzA4QixHQUN2RCxJQUFJMkUsRUFBU3RCLEVBQVMsR0FBSXVCLEVBQWN2QixFQUFTLEdBQUkyQixFQUFVM0IsRUFBUyxHQUNwRXBVLEVBQU83aUIsR0FBT3c0QixHQUNkRCxJQUFXejZCLEVBQU1rM0IsUUFBV2lFLEVBQVU5VyxXQUFXVSxHQVNqREEsRUFBS3B1QixTQUFXeWtDLElBR3BCUCxFQUFpQkEsRUFBZXROLElBQUl1TixJQVhoQ2hGLEVBQVFqOUIsVUFhWEgsTUFBSyxXQUFjLE9BQU9zSCxFQUFNKzZCLHNCQUFzQnRuQixFQUFhb25CLE9BRTVFNUQsRUFBdUJ0aEMsVUFBVW9sQyxzQkFBd0IsU0FBVXRuQixFQUFhNG5CLEdBQzVFLElBQUlyN0IsRUFBUTFKLEtBQ1JxcEIsRUFBVSxHQUNWc1MsRUFBVyxHQWVmLE9BYkFvSixFQUFTdnpCLFNBQVEsU0FBVXVuQixHQUN2QjRDLEVBQVNsNEIsS0FBS2srQixHQUFleGtCLEdBQ3hCN2UsSUFBSXk2QixHQUNKMzJCLE1BQUssU0FBVW8zQixHQUNoQixHQUFpQixPQUFiQSxFQUNBLE1BQU0zVSxFQUFLLCtEQUVQa1UsR0FFUmx6QixFQUFPMnpCLEVBQVNvSCxTQUFXbDNCLEVBQU1rM0IsT0FBUSxvQkFBc0JwSCxFQUFTb0gsT0FBUyx3QkFBMEI3SCxHQUMzRzFQLEVBQVE1bEIsS0FBS2lHLEVBQU1tM0IsV0FBV3VDLG9CQUFvQjVKLFdBR25EZSxHQUFtQlcsUUFBUVMsR0FBVXY1QixNQUFLLFdBQWMsT0FBT2luQixNQUUxRXNYLEVBQXVCdGhDLFVBQVUybEMsb0JBQXNCLFNBQVU3bkIsRUFBYStjLEdBQzFFLElBQUl4d0IsRUFBUTFKLEtBQ1osT0FBT2dsQyxHQUFvQjduQixFQUFZOG5CLG9CQUFxQmpsQyxLQUFLNGdDLE9BQVExRyxHQUFPOTNCLE1BQUssU0FBVThpQyxHQUkzRixPQUhBL25CLEVBQVkrbEIsd0JBQXVCLFdBQy9CeDVCLEVBQU15N0IseUJBQXlCakwsRUFBTW5CLFlBRWxDd0IsR0FBbUIvb0IsUUFBUTB6QixHQUFrQixTQUFVbG1DLEdBQzFELE9BQU8wSyxFQUFNcTNCLGtCQUFrQnFFLHdCQUF3QmpvQixFQUFhbmUsVUFJaEYyaEMsRUFBdUJ0aEMsVUFBVThsQyx5QkFBMkIsU0FBVXBNLFVBQzNELzRCLEtBQUtnaEMsc0JBQXNCakksSUFFdEM0SCxFQUF1QnRoQyxVQUFVZ21DLHdCQUEwQixTQUFVcEksR0FDakUsSUFBSXZ6QixFQUFRMUosS0FDWixPQUFPQSxLQUFLcWhDLFdBQVdwRSxHQUFLNzZCLE1BQUssU0FBVWsvQixHQUN2QyxJQUFLQSxFQUNELE9BQU8vRyxHQUFtQnY0QixVQUk5QixJQUFJc2pDLEVBQWEvRCxZQUFZaUMsV0FBV1YsR0FBbUJ5QyxjQUFjNzdCLEVBQU1rM0IsU0FDM0U0RSxFQUE2QixHQUNqQyxPQUFPakQsR0FBdUJ0RixHQUN6QndDLFFBQVEsQ0FBRWxJLE1BQU8rTixJQUFjLFNBQVV0bUMsRUFBSzhELEVBQUcwOEIsR0FFbEQsR0FEYXhnQyxFQUFJLEtBQ0YwSyxFQUFNazNCLE9BQXJCLENBS0ksSUFBSW5TLEVBQU83aUIsR0FBTzVNLEVBQUksSUFDdEJ3bUMsRUFBMkIvaEMsS0FBS2dyQixRQUxoQytRLEVBQVFqOUIsVUFRWEgsTUFBSyxXQUNOeUQsRUFBNkMsSUFBdEMyL0IsRUFBMkJubEMsT0FBYyw4RkFFNUNtbEMsRUFBMkJ2MEIsS0FBSSxTQUFVMVIsR0FBSyxPQUFPQSxFQUFFZ3ZCLDZCQUl2RW9TLEVBQXVCdGhDLFVBQVVvbUMsWUFBYyxTQUFVeEksRUFBS2orQixHQUMxRCxPQUFPMG1DLEdBQXlCekksRUFBS2o5QixLQUFLNGdDLE9BQVE1aEMsSUFJdEQyaEMsRUFBdUJ0aEMsVUFBVTBpQyx5QkFBMkIsU0FBVTVrQixHQUNsRSxJQUFJelQsRUFBUTFKLEtBQ1osT0FBT2tpQyxHQUFvQi9rQixHQUN0QjdlLElBQUkwQixLQUFLNGdDLFFBQ1R4K0IsTUFBSyxTQUFVWCxHQUNoQixPQUFRQSxHQUNKLElBQUlra0MsR0FBZ0JqOEIsRUFBTWszQixRQXR6Q3BCLEVBdXpDZSxRQUcxQkQsRUFwV2dDLEdBMFczQyxTQUFTK0UsR0FBeUJ6SSxFQUFLMkQsRUFBUTVoQyxHQUMzQyxJQUFJNmpDLEVBQVdDLEdBQW1CbUIsY0FBY3JELEVBQVE1aEMsRUFBSXl2QixNQUN4RDJWLEVBQWN2QixFQUFTLEdBQ3ZCeUMsRUFBYS9ELFlBQVlpQyxXQUFXWCxHQUNwQzRDLEdBQWMsRUFDbEIsT0FBT2xELEdBQXVCdEYsR0FDekJ3QyxRQUFRLENBQUVsSSxNQUFPK04sRUFBWS9GLFVBQVUsSUFBUSxTQUFVdmdDLEVBQUtOLEVBQU84Z0MsR0FDdEUsSUFBSTJFLEVBQVNubEMsRUFBSSxHQUFJNG1DLEVBQVU1bUMsRUFBSSxHQUFvQkEsRUFBSSxHQUN2RG1sQyxJQUFXdkQsR0FBVWdGLElBQVl4QixJQUNqQ3FCLEdBQWMsR0FFbEJqRyxFQUFRajlCLFVBRVBILE1BQUssV0FBYyxPQUFPcWpDLEtBb0JuQyxTQUFTVCxHQUFvQi9ILEVBQUsyRCxFQUFRMUcsR0FDdEMsSUFBSXNJLEVBQWdCdkYsRUFBSXhnQixNQUFNbWxCLEdBQWdCbmxCLE9BQzFDb3BCLEVBQVc1SSxFQUFJeGdCLE1BQU1xbUIsR0FBbUJybUIsT0FDeENrZixFQUFXLEdBQ1hwRSxFQUFRZ0ssWUFBWXVFLEtBQUs1TCxFQUFNbkIsU0FDL0JnTixFQUFhLEVBQ2JDLEVBQWdCeEQsRUFBYy9DLFFBQVEsQ0FBRWxJLE1BQU9BLElBQVMsU0FBVXY0QixFQUFLTixFQUFPOGdDLEdBRTlFLE9BREF1RyxJQUNPdkcsRUFBUXRxQixZQUVuQnltQixFQUFTbDRCLEtBQUt1aUMsRUFBYzVqQyxNQUFLLFdBQzdCeUQsRUFBc0IsSUFBZmtnQyxFQUFrQiw2REFDckI3TCxFQUFNbkIsYUFHZCxJQURBLElBQUltTSxFQUFtQixHQUNkdjZCLEVBQUssRUFBR00sRUFBS2l2QixFQUFNaEIsVUFBV3Z1QixFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDekQsSUFBSTZ1QixFQUFXdnVCLEVBQUdOLEdBQ2RrNEIsRUFBV0MsR0FBbUI5akMsSUFBSTRoQyxFQUFRcEgsRUFBU3g2QixJQUFJeXZCLEtBQU15TCxFQUFNbkIsU0FDdkU0QyxFQUFTbDRCLEtBQUtvaUMsRUFBUzN3QixPQUFPMnRCLElBQzlCcUMsRUFBaUJ6aEMsS0FBSysxQixFQUFTeDZCLEtBRW5DLE9BQU91N0IsR0FBbUJXLFFBQVFTLEdBQVV2NUIsTUFBSyxXQUFjLE9BQU84aUMsS0FFMUUsU0FBU2pELEdBQW1CcDJCLEdBQ3hCLE9BQUlBLGFBQWlCNGUsWUFFakI1a0IsRUFBT2cyQixHQUFTVyxvQkFBcUIsZ0ZBQzlCM3dCLEVBQU1MLFlBR05LLEVBTWYsU0FBUzgxQixHQUFlMUUsR0FDcEIsT0FBT2dKLEdBQXFCakosU0FBU0MsRUFBSzJFLEdBQWdCbmxCLE9BSzlELFNBQVM4bEIsR0FBdUJ0RixHQUM1QixPQUFPZ0osR0FBcUJqSixTQUFTQyxFQUFLNkYsR0FBbUJybUIsT0FLakUsU0FBU3lsQixHQUFvQmpGLEdBQ3pCLE9BQU9nSixHQUFxQmpKLFNBQVNDLEVBQUswSSxHQUFnQmxwQjs7Ozs7Ozs7Ozs7Ozs7OztHQW1COUQsSUFDSXlwQixHQURBQyxHQUFnQixHQUVwQixTQUFXRCxHQUNQQSxFQUFhQSxFQUF5QixXQUFJLEdBQUssYUFDL0NBLEVBQWFBLEVBQXlCLFdBQUksR0FBSyxhQUZuRCxDQUdHQSxLQUFpQkEsR0FBZSxLQWlCbkMsSUFBSUUsR0FBbUMsV0FLbkMsU0FBU0EsRUFBa0JDLEVBQWFDLEdBQ3BDdG1DLEtBQUtxbUMsWUFBY0EsRUFDbkJ4Z0MsR0FBUXdnQyxFQUFjRixNQUFtQkUsRUFBYSxnQkFBa0JBLEVBQWMsdUJBQXlCRixHQUFnQixrQkFDL0hubUMsS0FBS3VtQyxVQUFjaDlCLElBQVQrOEIsRUFBcUJBLEVBQU90bUMsS0FBS3FtQyxhQWdDL0MsT0E5QkFELEVBQWtCL21DLFVBQVUrQyxLQUFPLFdBQy9CLElBQUlva0MsRUFBU3htQyxLQUFLd21DLE9BRWxCLE9BREF4bUMsS0FBS3dtQyxRQUFVLEdBQUtMLEdBQ2JLLEdBT1hKLEVBQWtCL21DLFVBQVVvbkMsTUFBUSxTQUFVeE8sR0FFMUMsT0FEQWo0QixLQUFLdW1DLEtBQUt0TyxHQUFZLEdBQUtrTyxLQUNwQm5tQyxLQUFLb0MsUUFFaEJna0MsRUFBa0IvbUMsVUFBVWtuQyxLQUFPLFNBQVV0TyxHQUN6Q3B5QixHQUFRb3lCLEVBQVdrTyxNQUFtQm5tQyxLQUFLcW1DLFlBQWEsdURBQ3hEcm1DLEtBQUt3bUMsT0FBU3ZPLEdBRWxCbU8sRUFBa0JNLGVBQWlCLFdBTS9CLE9BRHdCLElBQUlOLEVBQWtCRixHQUFhUyxXQUFZLElBRzNFUCxFQUFrQlEsY0FBZ0IsV0FFOUIsT0FBTyxJQUFJUixFQUFrQkYsR0FBYVcsYUFFdkNULEVBeEMyQixHQTJEbENVLEdBQXNDLFdBQ3RDLFNBQVNBLEVBQXFCL0YsRUFBbUJGLEdBQzdDN2dDLEtBQUsrZ0Msa0JBQW9CQSxFQUN6Qi9nQyxLQUFLNmdDLFdBQWFBLEVBT2xCN2dDLEtBQUsrbUMsa0JBQW9CWCxHQUFrQk0saUJBeU4vQyxPQXZOQUksRUFBcUJ6bkMsVUFBVTJuQyxpQkFBbUIsU0FBVTdwQixHQUN4RCxJQUFJelQsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS2luQyxpQkFBaUI5cEIsR0FBYS9hLE1BQUssU0FBVVgsR0FFckQsT0FEQUEsRUFBU3lsQyxnQkFBa0J4OUIsRUFBTXE5QixrQkFBa0JOLE1BQU1obEMsRUFBU3lsQyxpQkFDM0R4OUIsRUFBTXk5QixhQUFhaHFCLEVBQWExYixHQUFVVyxNQUFLLFdBQWMsT0FBT1gsRUFBU3lsQyx1QkFHNUZKLEVBQXFCem5DLFVBQVUrbkMsNkJBQStCLFNBQVVqcUIsR0FDcEUsT0FBT25kLEtBQUtpbkMsaUJBQWlCOXBCLEdBQWEvYSxNQUFLLFNBQVVYLEdBQ3JELE9BQU9teUIsR0FBZ0JHLGNBQWMsSUFBSVosR0FBVTF4QixFQUFTNGxDLDBCQUEwQmpVLFFBQVMzeEIsRUFBUzRsQywwQkFBMEJoVSxrQkFHMUl5VCxFQUFxQnpuQyxVQUFVaW9DLHlCQUEyQixTQUFVbnFCLEdBQ2hFLE9BQU9vcUIsR0FBK0JwcUIsRUFBWThuQixzQkFFdEQ2QixFQUFxQnpuQyxVQUFVbW9DLG1CQUFxQixTQUFVcnFCLEVBQWFzcUIsRUFBNkJKLEdBQ3BHLElBQUkzOUIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS2luQyxpQkFBaUI5cEIsR0FBYS9hLE1BQUssU0FBVVgsR0FRckQsT0FQQUEsRUFBU2dtQyw0QkFBOEJBLEVBQ25DSixJQUNBNWxDLEVBQVM0bEMsMEJBQTRCQSxFQUEwQmxULGVBRS9Ec1QsRUFBOEJobUMsRUFBU2dtQyw4QkFDdkNobUMsRUFBU2dtQyw0QkFBOEJBLEdBRXBDLzlCLEVBQU15OUIsYUFBYWhxQixFQUFhMWIsT0FHL0NxbEMsRUFBcUJ6bkMsVUFBVXFvQyxjQUFnQixTQUFVdnFCLEVBQWF3cUIsR0FDbEUsSUFBSWorQixFQUFRMUosS0FDWixPQUFPQSxLQUFLNG5DLGVBQWV6cUIsRUFBYXdxQixHQUFZdmxDLE1BQUssV0FDckQsT0FBT3NILEVBQU11OUIsaUJBQWlCOXBCLEdBQWEvYSxNQUFLLFNBQVVYLEdBR3RELE9BRkFBLEVBQVNvbUMsYUFBZSxFQUN4Qm4rQixFQUFNbytCLDZCQUE2QkgsRUFBWWxtQyxHQUN4Q2lJLEVBQU15OUIsYUFBYWhxQixFQUFhMWIsVUFJbkRxbEMsRUFBcUJ6bkMsVUFBVTBvQyxpQkFBbUIsU0FBVTVxQixFQUFhd3FCLEdBQ3JFLE9BQU8zbkMsS0FBSzRuQyxlQUFlenFCLEVBQWF3cUIsSUFFNUNiLEVBQXFCem5DLFVBQVUyb0MsaUJBQW1CLFNBQVU3cUIsRUFBYXdxQixHQUNyRSxJQUFJaitCLEVBQVExSixLQUNaLE9BQU9BLEtBQUtpb0MsOEJBQThCOXFCLEVBQWF3cUIsRUFBVzFQLFVBQzdENzFCLE1BQUssV0FBYyxPQUFPOGxDLEdBQWEvcUIsR0FBYWpJLE9BQU95eUIsRUFBVzFQLGFBQ3RFNzFCLE1BQUssV0FBYyxPQUFPc0gsRUFBTXU5QixpQkFBaUI5cEIsTUFDakQvYSxNQUFLLFNBQVVYLEdBR2hCLE9BRkFvRSxFQUFPcEUsRUFBU29tQyxZQUFjLEVBQUcsdUNBQ2pDcG1DLEVBQVNvbUMsYUFBZSxFQUNqQm4rQixFQUFNeTlCLGFBQWFocUIsRUFBYTFiLE9BUS9DcWxDLEVBQXFCem5DLFVBQVU4b0MsY0FBZ0IsU0FBVWxMLEVBQUswRyxFQUFZeUUsR0FDdEUsSUFBSTErQixFQUFRMUosS0FDUm1lLEVBQVEsRUFDUndkLEVBQVcsR0FDZixPQUFPdU0sR0FBYWpMLEdBQ2Z3QyxTQUFRLFNBQVV6Z0MsRUFBS04sR0FDeEIsSUFBSWlwQyxFQUFhaitCLEVBQU1tM0IsV0FBV3dILGFBQWEzcEMsR0FDM0NpcEMsRUFBV2xiLGdCQUFrQmtYLEdBQ2dCLE9BQTdDeUUsRUFBZ0I5cEMsSUFBSXFwQyxFQUFXMVAsWUFDL0I5WixJQUNBd2QsRUFBU2w0QixLQUFLaUcsRUFBTXMrQixpQkFBaUIvSyxFQUFLMEssUUFHN0N2bEMsTUFBSyxXQUFjLE9BQU9tNEIsR0FBbUJXLFFBQVFTLE1BQ3JEdjVCLE1BQUssV0FBYyxPQUFPK2IsTUFLbkMyb0IsRUFBcUJ6bkMsVUFBVWlwQyxjQUFnQixTQUFVckwsRUFBS3Q2QixHQUMxRCxJQUFJK0csRUFBUTFKLEtBQ1osT0FBT2tvQyxHQUFhakwsR0FBS3dDLFNBQVEsU0FBVXpnQyxFQUFLTixHQUM1QyxJQUFJaXBDLEVBQWFqK0IsRUFBTW0zQixXQUFXd0gsYUFBYTNwQyxHQUMvQ2lFLEVBQUVnbEMsT0FHVmIsRUFBcUJ6bkMsVUFBVTRuQyxpQkFBbUIsU0FBVTlwQixHQUN4RCxPQUFPOHBCLEdBQWlCOXBCLEVBQVk4bkIsc0JBRXhDNkIsRUFBcUJ6bkMsVUFBVThuQyxhQUFlLFNBQVVocUIsRUFBYTFiLEdBQ2pFLE9BMkltQnc3QixFQTNJTTlmLEVBNEl0QjhvQixHQUFxQmpKLFNBQVNDLEVBQUtzTCxHQUFlOXJCLFFBNUlmeWlCLElBQUlxSixHQUFldnBDLElBQUt5QyxHQTJJdEUsSUFBMkJ3N0IsR0F6SXZCNkosRUFBcUJ6bkMsVUFBVXVvQyxlQUFpQixTQUFVenFCLEVBQWF3cUIsR0FDbkUsT0FBT08sR0FBYS9xQixHQUFhK2hCLElBQUlsL0IsS0FBSzZnQyxXQUFXMkgsV0FBV2IsS0FPcEViLEVBQXFCem5DLFVBQVV5b0MsNkJBQStCLFNBQVVILEVBQVlsbUMsR0FDaEYsSUFBSWduQyxHQUFVLEVBU2QsT0FSSWQsRUFBVzFQLFNBQVd4MkIsRUFBU3lsQyxrQkFDL0J6bEMsRUFBU3lsQyxnQkFBa0JTLEVBQVcxUCxTQUN0Q3dRLEdBQVUsR0FFVmQsRUFBV2xiLGVBQWlCaHJCLEVBQVNnbUMsOEJBQ3JDaG1DLEVBQVNnbUMsNEJBQThCRSxFQUFXbGIsZUFDbERnYyxHQUFVLEdBRVBBLEdBRVgzQixFQUFxQnpuQyxVQUFVcXBDLGVBQWlCLFNBQVV2ckIsR0FDdEQsT0FBT25kLEtBQUtpbkMsaUJBQWlCOXBCLEdBQWEvYSxNQUFLLFNBQVVYLEdBQVksT0FBT0EsRUFBU29tQyxnQkFFekZmLEVBQXFCem5DLFVBQVVzcEMsY0FBZ0IsU0FBVXhyQixFQUFhcmMsR0FDbEUsSUFBSTRJLEVBQVExSixLQUlSNG9DLEVBQWM5bkMsRUFBTzhuQyxjQUNyQnJSLEVBQVFnSyxZQUFZQyxNQUFNLENBQUNvSCxFQUFhaGlCLE9BQU82YSxtQkFBb0IsQ0FBQ21ILEVBQWFoaUIsT0FBTzhhLG9CQUN4RnAvQixFQUFTLEtBQ2IsT0FBTzRsQyxHQUFhL3FCLEdBQ2ZzaUIsUUFBUSxDQUFFbEksTUFBT0EsRUFBT3BiLE1BQU8wc0IsR0FBU0Msd0JBQXlCLFNBQVU5cEMsRUFBS04sRUFBTzhnQyxHQUN4RixJQUFJdUosRUFBUXIvQixFQUFNbTNCLFdBQVd3SCxhQUFhM3BDLEdBR3RDb0MsRUFBT3dwQixRQUFReWUsRUFBTWpvQyxVQUNyQndCLEVBQVN5bUMsRUFDVHZKLEVBQVFqOUIsV0FHWEgsTUFBSyxXQUFjLE9BQU9FLE1BRW5Dd2tDLEVBQXFCem5DLFVBQVUycEMsZ0JBQWtCLFNBQVUvTCxFQUFLOXhCLEVBQU04c0IsR0FDbEUsSUFBSXZ1QixFQUFRMUosS0FHUjI3QixFQUFXLEdBQ1hsZixFQUFRd3NCLEdBQW9CaE0sR0FNaEMsT0FMQTl4QixFQUFLcUcsU0FBUSxTQUFVeFMsR0FDbkIsSUFBSXl2QixFQUFPbUUsR0FBTzV6QixFQUFJeXZCLE1BQ3RCa04sRUFBU2w0QixLQUFLZ1osRUFBTXlpQixJQUFJLElBQUlnSyxHQUFpQmpSLEVBQVV4SixLQUN2RGtOLEVBQVNsNEIsS0FBS2lHLEVBQU1xM0Isa0JBQWtCb0ksYUFBYWxNLEVBQUtqK0IsT0FFckR1N0IsR0FBbUJXLFFBQVFTLElBRXRDbUwsRUFBcUJ6bkMsVUFBVStwQyxtQkFBcUIsU0FBVW5NLEVBQUs5eEIsRUFBTThzQixHQUNyRSxJQUFJdnVCLEVBQVExSixLQUdSeWMsRUFBUXdzQixHQUFvQmhNLEdBQ2hDLE9BQU8xQyxHQUFtQi9vQixRQUFRckcsR0FBTSxTQUFVbk0sR0FDOUMsSUFBSXl2QixFQUFPbUUsR0FBTzV6QixFQUFJeXZCLE1BQ3RCLE9BQU84TCxHQUFtQlcsUUFBUSxDQUM5QnplLEVBQU12SCxPQUFPLENBQUMraUIsRUFBVXhKLElBQ3hCL2tCLEVBQU1xM0Isa0JBQWtCc0ksZ0JBQWdCcE0sRUFBS2orQixTQUl6RDhuQyxFQUFxQnpuQyxVQUFVNG9DLDhCQUFnQyxTQUFVaEwsRUFBS2hGLEdBQzFFLElBQUl4YixFQUFRd3NCLEdBQW9CaE0sR0FDNUIxRixFQUFRZ0ssWUFBWUMsTUFBTSxDQUFDdkosR0FBVyxDQUFDQSxFQUFXLElBQ3ZDLEdBQ0EsR0FDZixPQUFPeGIsRUFBTXZILE9BQU9xaUIsSUFFeEJ1UCxFQUFxQnpuQyxVQUFVaXFDLDJCQUE2QixTQUFVck0sRUFBS2hGLEdBQ3ZFLElBQUlWLEVBQVFnSyxZQUFZQyxNQUFNLENBQUN2SixHQUFXLENBQUNBLEVBQVcsSUFDdkMsR0FDQSxHQUNYeGIsRUFBUXdzQixHQUFvQmhNLEdBQzVCMzZCLEVBQVNvMkIsS0FDYixPQUFPamMsRUFDRmdqQixRQUFRLENBQUVsSSxNQUFPQSxFQUFPZ0ksVUFBVSxJQUFRLFNBQVV2Z0MsRUFBSzhELEVBQUcwOEIsR0FDN0QsSUFBSS9RLEVBQU83aUIsR0FBTzVNLEVBQUksSUFDbEJvNkIsRUFBUyxJQUFJaEssR0FBWVgsR0FDN0Juc0IsRUFBU0EsRUFBTzIwQixJQUFJbUMsTUFFbkJoM0IsTUFBSyxXQUFjLE9BQU9FLE1BRW5Dd2tDLEVBQXFCem5DLFVBQVVvbUMsWUFBYyxTQUFVeEksRUFBS2orQixHQUN4RCxJQUFJeXZCLEVBQU9tRSxHQUFPNXpCLEVBQUl5dkIsTUFDbEI4SSxFQUFRZ0ssWUFBWUMsTUFBTSxDQUFDL1MsR0FBTyxDQUFDbEUsRUFBbUJrRSxLQUMzQyxHQUNBLEdBQ1h0USxFQUFRLEVBQ1osT0FBTzhxQixHQUFvQmhNLEdBQ3RCd0MsUUFBUSxDQUNUdGpCLE1BQU8rc0IsR0FBaUJLLHFCQUN4QmhLLFVBQVUsRUFDVmhJLE1BQU9BLElBQ1IsU0FBVXRzQixFQUFJbkksRUFBRzA4QixHQUNoQixJQUFJdkgsRUFBV2h0QixFQUFHLEdBQVdBLEVBQUcsR0FJZixJQUFiZ3RCLElBQ0E5WixJQUNBcWhCLEVBQVFqOUIsV0FHWEgsTUFBSyxXQUFjLE9BQU8rYixFQUFRLE1BRTNDMm9CLEVBQXFCem5DLFVBQVVtcUMsdUJBQXlCLFNBQVVyc0IsRUFBYThhLEdBQzNFLElBQUl2dUIsRUFBUTFKLEtBQ1osT0FBT2tvQyxHQUFhL3FCLEdBQ2Y3ZSxJQUFJMjVCLEdBQ0o3MUIsTUFBSyxTQUFVMm1DLEdBQ2hCLE9BQUlBLEVBQ09yL0IsRUFBTW0zQixXQUFXd0gsYUFBYVUsR0FHOUIsU0FJWmpDLEVBbk84Qjs7Ozs7Ozs7Ozs7Ozs7OztHQXdPekMsU0FBU29CLEdBQWFqTCxHQUNsQixPQUFPZ0osR0FBcUJqSixTQUFTQyxFQUFLNEwsR0FBU3BzQixPQVF2RCxTQUFTd3FCLEdBQWlCaEssR0FFdEIsT0FEa0JwQixHQUFTbUIsU0FBU0MsRUFBS3NMLEdBQWU5ckIsT0FDckNuZSxJQUFJaXFDLEdBQWV2cEMsS0FBS29ELE1BQUssU0FBVVgsR0FFdEQsT0FEQW9FLEVBQW9CLE9BQWJwRSxFQUFtQix5QkFDbkJBLEtBR2YsU0FBUzhsQyxHQUErQnRLLEdBQ3BDLE9BQU9nSyxHQUFpQmhLLEdBQUs3NkIsTUFBSyxTQUFVcW5DLEdBQWdCLE9BQU9BLEVBQWFoQywrQkFLcEYsU0FBU3dCLEdBQW9CaE0sR0FDekIsT0FBT2dKLEdBQXFCakosU0FBU0MsRUFBS2lNLEdBQWlCenNCOzs7Ozs7Ozs7Ozs7Ozs7O0dBNkIvRCxJQXVFSWl0QixHQXZFQUMsR0FBMkIsV0FDM0IsU0FBU0EsRUFBVUMsR0FDZjVwQyxLQUFLNHBDLE9BQVNBLEVBNkJsQixPQTFCQUQsRUFBVUUsUUFBVSxTQUFVRCxHQUMxQixPQUFPLElBQUlELEVBQVVDLElBRXpCRCxFQUFVRyxVQUFZLFNBQVVGLEdBQzVCLElBQUlHLEVBQWMsSUFBSWhULEdBQVVuSSxHQUFVeEIsWUFFMUMsT0FEQXdjLEVBQU9wNEIsU0FBUSxTQUFVdzRCLEdBQWEsT0FBUUQsRUFBY0EsRUFBWTlTLElBQUkrUyxNQUNyRSxJQUFJTCxFQUFVSSxJQVF6QkosRUFBVXRxQyxVQUFVNHFDLE9BQVMsU0FBVUQsR0FDbkMsSUFBSWpCLEdBQVEsRUFNWixPQUxBL29DLEtBQUs0cEMsT0FBT3A0QixTQUFRLFNBQVUwNEIsR0FDdEJBLEVBQWNuYyxXQUFXaWMsS0FDekJqQixHQUFRLE1BR1RBLEdBRVhZLEVBQVV0cUMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNwQyxPQUFPdnJCLEtBQUs0cEMsT0FBT3RmLFFBQVFpQixFQUFNcWUsU0FFOUJELEVBL0JtQixHQWtDMUJRLEdBQWdDLFdBQ2hDLFNBQVNBLEVBQWVDLEVBQU9DLEdBQzNCcnFDLEtBQUtvcUMsTUFBUUEsRUFDYnBxQyxLQUFLcXFDLFVBQVlBLEVBS3JCLE9BSEFGLEVBQWU5cUMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN6QyxPQUFRdnJCLEtBQUtvcUMsTUFBTTlmLFFBQVFpQixFQUFNNmUsUUFBVXBxQyxLQUFLcXFDLFVBQVUvZixRQUFRaUIsRUFBTThlLFlBRXJFRixFQVJ3QixHQVcvQkcsR0FDQSxTQVdBaDBCLEVBUUFpMEIsR0FDSXZxQyxLQUFLc1csUUFBVUEsRUFDZnRXLEtBQUt1cUMsaUJBQW1CQSxJQUtoQyxTQUFXYixHQUNQQSxFQUFhQSxFQUFrQixJQUFJLEdBQUssTUFDeENBLEVBQWFBLEVBQW9CLE1BQUksR0FBSyxRQUMxQ0EsRUFBYUEsRUFBd0IsVUFBSSxHQUFLLFlBQzlDQSxFQUFhQSxFQUFxQixPQUFJLEdBQUssU0FKL0MsQ0FLR0EsS0FBaUJBLEdBQWUsS0FNbkMsSUFvZEljLEdBZUFDLEdBbmVBQyxHQUE4QixXQUM5QixTQUFTQSxFQUFhQyxFQUFZQyxHQUM5QjVxQyxLQUFLMnFDLFdBQWFBLEVBQ2xCM3FDLEtBQUs0cUMsT0FBU0EsRUFDZC9rQyxPQUFzQjBELElBQWZvaEMsUUFBdUNwaEMsSUFBWHFoQyxFQUFzQixrRUF3QzdELE9BckNBRixFQUFhRSxPQUFTLFNBQVVBLEdBQzVCLE9BQU8sSUFBSUYsT0FBYW5oQyxFQUFXcWhDLElBR3ZDRixFQUFhQyxXQUFhLFNBQVVyMEIsR0FDaEMsT0FBTyxJQUFJbzBCLEVBQWFwMEIsSUFFNUJuWSxPQUFPQyxlQUFlc3NDLEVBQWFyckMsVUFBVyxTQUFVLENBRXBEZixJQUFLLFdBQ0QsWUFBMkJpTCxJQUFwQnZKLEtBQUsycUMsaUJBQTRDcGhDLElBQWhCdkosS0FBSzRxQyxRQUVqRHZzQyxZQUFZLEVBQ1prWixjQUFjLElBTWxCbXpCLEVBQWFyckMsVUFBVXdyQyxXQUFhLFNBQVV4UixHQUMxQyxZQUF3Qjl2QixJQUFwQnZKLEtBQUsycUMsV0FDR3RSLGFBQW9CeVIsSUFDeEJ6UixFQUFTL2lCLFFBQVFnVSxRQUFRdHFCLEtBQUsycUMsaUJBRWJwaEMsSUFBaEJ2SixLQUFLNHFDLE9BQ0g1cUMsS0FBSzRxQyxTQUFXdlIsYUFBb0J5UixJQUczQ2psQyxFQUFPN0YsS0FBSytxQyxPQUFRLGlDQUNiLElBR2ZMLEVBQWFyckMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN2QyxPQW56SFFwQixFQW16SE9ucUIsS0FBSzJxQyxXQW56SE52Z0IsRUFtekhrQm1CLEVBQU1vZixZQWx6SHRDeGdCLFdBQ1VDLElBQVNELEVBQUtHLFFBQVFGLElBS3pCRCxJQUFTQyxJQTZ5SFpwcUIsS0FBSzRxQyxTQUFXcmYsRUFBTXFmLE9BcHpIbEMsSUFBZ0J6Z0IsRUFBTUMsR0FzekhsQnNnQixFQUFhTSxLQUFPLElBQUlOLEVBQ2pCQSxFQTVDc0IsR0ErRjdCTyxHQUEwQixXQUMxQixTQUFTQSxLQXFCVCxPQW5CQUEsRUFBUzVyQyxVQUFVNnJDLGlCQUFtQixTQUFVN1IsR0FDNUIsTUFBWkEsR0FDQXh6QixFQUFPd3pCLEVBQVNyNkIsSUFBSXNyQixRQUFRdHFCLEtBQUtoQixLQUFNLDhEQVMvQ2lzQyxFQUFTRSx1QkFBeUIsU0FBVTlSLEdBQ3hDLE9BQUlBLGFBQW9CeVIsR0FDYnpSLEVBQVMvaUIsUUFHVHNkLEdBQWdCSyxLQUd4QmdYLEVBdEJrQixHQTRCekJHLEdBQTZCLFNBQVVqaEMsR0FFdkMsU0FBU2loQyxFQUFZcHNDLEVBQUtOLEVBQU8yc0MsR0FDN0IsSUFBSTNoQyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBS2pDLE9BSkEwSixFQUFNMUssSUFBTUEsRUFDWjBLLEVBQU1oTCxNQUFRQSxFQUNkZ0wsRUFBTTJoQyxhQUFlQSxFQUNyQjNoQyxFQUFNb0osS0FBTzQyQixHQUFhNEIsSUFDbkI1aEMsRUFnQ1gsT0F2Q0FsRSxFQUFNMUYsVUFBVXNyQyxFQUFhamhDLEdBUzdCaWhDLEVBQVkvckMsVUFBVTg1QixzQkFBd0IsU0FBVUUsRUFBVUksR0FDOUR6NUIsS0FBS2tyQyxpQkFBaUI3UixHQUN0Qnh6QixFQUEwQyxNQUFuQzR6QixFQUFlOFEsaUJBQTBCLDhDQUloRCxJQUFJajBCLEVBQVVtakIsRUFBZW5qQixRQUM3QixPQUFPLElBQUl3MEIsR0FBUzlxQyxLQUFLaEIsSUFBS3NYLEVBQVMsQ0FDbkNpMUIsdUJBQXVCLEdBQ3hCdnJDLEtBQUt0QixRQUVaMHNDLEVBQVkvckMsVUFBVXE2QixpQkFBbUIsU0FBVUwsRUFBVU0sRUFBU1gsR0FFbEUsR0FEQWg1QixLQUFLa3JDLGlCQUFpQjdSLElBQ2pCcjVCLEtBQUtxckMsYUFBYVIsV0FBV3hSLEdBQzlCLE9BQU9BLEVBRVgsSUFBSS9pQixFQUFVMjBCLEdBQVNFLHVCQUF1QjlSLEdBQzlDLE9BQU8sSUFBSXlSLEdBQVM5cUMsS0FBS2hCLElBQUtzWCxFQUFTLENBQ25DazFCLG1CQUFtQixHQUNwQnhyQyxLQUFLdEIsUUFFWjBzQyxFQUFZL3JDLFVBQVVvc0MsaUJBQW1CLFNBQVVwUyxHQUMvQyxPQUFPLE1BRVgrUixFQUFZL3JDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDdEMsT0FBUUEsYUFBaUI2ZixHQUNyQnByQyxLQUFLaEIsSUFBSXNyQixRQUFRaUIsRUFBTXZzQixNQUN2QmdCLEtBQUt0QixNQUFNNHJCLFFBQVFpQixFQUFNN3NCLFFBQ3pCc0IsS0FBS3FyQyxhQUFhL2dCLFFBQVFpQixFQUFNOGYsZUFFakNELEVBeENxQixDQXlDOUJILElBY0VTLEdBQStCLFNBQVV2aEMsR0FFekMsU0FBU3VoQyxFQUFjMXNDLEVBQUswTCxFQUFNaWhDLEVBQVdOLEdBQ3pDLElBQUkzaEMsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQU1qQyxPQUxBMEosRUFBTTFLLElBQU1BLEVBQ1owSyxFQUFNZ0IsS0FBT0EsRUFDYmhCLEVBQU1paUMsVUFBWUEsRUFDbEJqaUMsRUFBTTJoQyxhQUFlQSxFQUNyQjNoQyxFQUFNb0osS0FBTzQyQixHQUFha0MsTUFDbkJsaUMsRUFtRVgsT0EzRUFsRSxFQUFNMUYsVUFBVTRyQyxFQUFldmhDLEdBVS9CdWhDLEVBQWNyc0MsVUFBVTg1QixzQkFBd0IsU0FBVUUsRUFBVUksR0FHaEUsR0FGQXo1QixLQUFLa3JDLGlCQUFpQjdSLEdBQ3RCeHpCLEVBQTBDLE1BQW5DNHpCLEVBQWU4USxpQkFBMEIsaURBQzNDdnFDLEtBQUtxckMsYUFBYVIsV0FBV3hSLEdBSzlCLE9BQU8sSUFBSXdTLEdBQWdCN3JDLEtBQUtoQixJQUFLeTZCLEVBQWVuakIsU0FFeEQsSUFBSXcxQixFQUFVOXJDLEtBQUsrckMsY0FBYzFTLEdBQ2pDLE9BQU8sSUFBSXlSLEdBQVM5cUMsS0FBS2hCLElBQUt5NkIsRUFBZW5qQixRQUFTLENBQ2xEaTFCLHVCQUF1QixHQUN4Qk8sSUFFUEosRUFBY3JzQyxVQUFVcTZCLGlCQUFtQixTQUFVTCxFQUFVTSxFQUFTWCxHQUVwRSxHQURBaDVCLEtBQUtrckMsaUJBQWlCN1IsSUFDakJyNUIsS0FBS3FyQyxhQUFhUixXQUFXeFIsR0FDOUIsT0FBT0EsRUFFWCxJQUFJL2lCLEVBQVUyMEIsR0FBU0UsdUJBQXVCOVIsR0FDMUN5UyxFQUFVOXJDLEtBQUsrckMsY0FBYzFTLEdBQ2pDLE9BQU8sSUFBSXlSLEdBQVM5cUMsS0FBS2hCLElBQUtzWCxFQUFTLENBQ25DazFCLG1CQUFtQixHQUNwQk0sSUFFUEosRUFBY3JzQyxVQUFVb3NDLGlCQUFtQixTQUFVcFMsR0FDakQsT0FBTyxNQUVYcVMsRUFBY3JzQyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3hDLE9BQVFBLGFBQWlCbWdCLEdBQ3JCMXJDLEtBQUtoQixJQUFJc3JCLFFBQVFpQixFQUFNdnNCLE1BQ3ZCZ0IsS0FBSzJyQyxVQUFVcmhCLFFBQVFpQixFQUFNb2dCLFlBQzdCM3JDLEtBQUtxckMsYUFBYS9nQixRQUFRaUIsRUFBTThmLGVBT3hDSyxFQUFjcnNDLFVBQVUwc0MsY0FBZ0IsU0FBVTFTLEdBQzlDLElBQUkzdUIsRUFPSixPQUxJQSxFQURBMnVCLGFBQW9CeVIsR0FDYnpSLEVBQVMzdUIsT0FHVHNoQyxHQUFZcGMsTUFFaEI1dkIsS0FBS2lzQyxZQUFZdmhDLElBRTVCZ2hDLEVBQWNyc0MsVUFBVTRzQyxZQUFjLFNBQVV2aEMsR0FDNUMsSUFBSWhCLEVBQVExSixLQVlaLE9BWEFBLEtBQUsyckMsVUFBVS9CLE9BQU9wNEIsU0FBUSxTQUFVdzRCLEdBQ3BDLElBQUtBLEVBQVVoNkIsVUFBVyxDQUN0QixJQUFJazhCLEVBQVd4aUMsRUFBTWdCLEtBQUswL0IsTUFBTUosR0FFNUJ0L0IsRUFEYSxPQUFid2hDLEVBQ094aEMsRUFBS3dKLElBQUk4MUIsRUFBV2tDLEdBR3BCeGhDLEVBQUt3SyxPQUFPODBCLE9BSXhCdC9CLEdBRUpnaEMsRUE1RXVCLENBNkVoQ1QsSUFVRWtCLEdBQW1DLFNBQVVoaUMsR0FFN0MsU0FBU2dpQyxFQUFrQm50QyxFQUFLb3RDLEdBQzVCLElBQUkxaUMsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQVFqQyxPQVBBMEosRUFBTTFLLElBQU1BLEVBQ1owSyxFQUFNMGlDLGdCQUFrQkEsRUFDeEIxaUMsRUFBTW9KLEtBQU80MkIsR0FBYTJDLFVBSTFCM2lDLEVBQU0yaEMsYUFBZVgsR0FBYUUsUUFBTyxHQUNsQ2xoQyxFQXFJWCxPQS9JQWxFLEVBQU0xRixVQUFVcXNDLEVBQW1CaGlDLEdBWW5DZ2lDLEVBQWtCOXNDLFVBQVU4NUIsc0JBQXdCLFNBQVVFLEVBQVVJLEdBR3BFLEdBRkF6NUIsS0FBS2tyQyxpQkFBaUI3UixHQUN0Qnh6QixFQUEwQyxNQUFuQzR6QixFQUFlOFEsaUJBQTBCLHFEQUMzQ3ZxQyxLQUFLcXJDLGFBQWFSLFdBQVd4UixHQUs5QixPQUFPLElBQUl3UyxHQUFnQjdyQyxLQUFLaEIsSUFBS3k2QixFQUFlbmpCLFNBRXhELElBQUlnMkIsRUFBTXRzQyxLQUFLdXNDLGdCQUFnQmxULEdBQzNCa1IsRUFBbUJ2cUMsS0FBS3dzQyx1QkFBdUJuVCxFQUFVSSxFQUFlOFEsa0JBQ3hFajBCLEVBQVVtakIsRUFBZW5qQixRQUN6QncxQixFQUFVOXJDLEtBQUt5c0MsZ0JBQWdCSCxFQUFJNWhDLE9BQVE2L0IsR0FDL0MsT0FBTyxJQUFJTyxHQUFTOXFDLEtBQUtoQixJQUFLc1gsRUFBUyxDQUNuQ2kxQix1QkFBdUIsR0FDeEJPLElBRVBLLEVBQWtCOXNDLFVBQVVxNkIsaUJBQW1CLFNBQVVMLEVBQVVNLEVBQVNYLEdBRXhFLEdBREFoNUIsS0FBS2tyQyxpQkFBaUI3UixJQUNqQnI1QixLQUFLcXJDLGFBQWFSLFdBQVd4UixHQUM5QixPQUFPQSxFQUVYLElBQUlpVCxFQUFNdHNDLEtBQUt1c0MsZ0JBQWdCbFQsR0FDM0JrUixFQUFtQnZxQyxLQUFLMHNDLHNCQUFzQjFULEVBQWdCSyxFQUFVTSxHQUN4RW1TLEVBQVU5ckMsS0FBS3lzQyxnQkFBZ0JILEVBQUk1aEMsT0FBUTYvQixHQUMvQyxPQUFPLElBQUlPLEdBQVM5cUMsS0FBS2hCLElBQUtzdEMsRUFBSWgyQixRQUFTLENBQ3ZDazFCLG1CQUFtQixHQUNwQk0sSUFFUEssRUFBa0I5c0MsVUFBVW9zQyxpQkFBbUIsU0FBVXBTLEdBRXJELElBREEsSUFBSXNULEVBQWEsS0FDUmhpQyxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLb3NDLGdCQUFpQnpoQyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDOUQsSUFBSWlpQyxFQUFpQjNoQyxFQUFHTixHQUNwQmtpQyxFQUFnQnhULGFBQW9CeVIsR0FDbEN6UixFQUFTK1EsTUFBTXdDLEVBQWV4QyxZQUM5QjdnQyxFQUNGdWpDLEVBQWVGLEVBQWV2QyxVQUFVMEMsaUJBQWlCRixHQUFpQixNQUMxRCxNQUFoQkMsSUFFSUgsRUFEYyxNQUFkQSxFQUNhWCxHQUFZcGMsTUFBTTFiLElBQUkwNEIsRUFBZXhDLE1BQU8wQyxHQUc1Q0gsRUFBV3o0QixJQUFJMDRCLEVBQWV4QyxNQUFPMEMsSUFJOUQsT0FBT0gsR0FFWFIsRUFBa0I5c0MsVUFBVWlyQixRQUFVLFNBQVVpQixHQUM1QyxPQUFRQSxhQUFpQjRnQixHQUNyQm5zQyxLQUFLaEIsSUFBSXNyQixRQUFRaUIsRUFBTXZzQixNQUN2QnFyQixFQUFZcnFCLEtBQUtvc0MsZ0JBQWlCN2dCLEVBQU02Z0Isa0JBQ3hDcHNDLEtBQUtxckMsYUFBYS9nQixRQUFRaUIsRUFBTThmLGVBUXhDYyxFQUFrQjlzQyxVQUFVa3RDLGdCQUFrQixTQUFVbFQsR0FHcEQsT0FGQXh6QixFQUFPd3pCLGFBQW9CeVIsR0FBVSw4QkFBZ0N6UixHQUNyRXh6QixFQUFPd3pCLEVBQVNyNkIsSUFBSXNyQixRQUFRdHFCLEtBQUtoQixLQUFNLG1EQUNoQ3E2QixHQVdYOFMsRUFBa0I5c0MsVUFBVW10Qyx1QkFBeUIsU0FBVTdTLEVBQVM2UyxHQUNwRSxJQUFJakMsRUFBbUIsR0FDdkIxa0MsRUFBTzdGLEtBQUtvc0MsZ0JBQWdCL3JDLFNBQVdtc0MsRUFBdUJuc0MsT0FBUSxrQ0FBb0Ntc0MsRUFBdUJuc0MsT0FBUyx5Q0FDNUZMLEtBQUtvc0MsZ0JBQWdCL3JDLE9BQVMsS0FDNUUsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJK3VDLEVBQXVCbnNDLE9BQVE1QyxJQUFLLENBQ3BELElBQUltdkMsRUFBaUI1c0MsS0FBS29zQyxnQkFBZ0IzdUMsR0FDdEM0c0MsRUFBWXVDLEVBQWV2QyxVQUMzQi9kLEVBQWdCLEtBQ2hCcU4sYUFBbUJtUixLQUNuQnhlLEVBQWdCcU4sRUFBUXlRLE1BQU13QyxFQUFleEMsUUFFakRHLEVBQWlCOW1DLEtBQUs0bUMsRUFBVWxSLHNCQUFzQjdNLEVBQWVrZ0IsRUFBdUIvdUMsS0FFaEcsT0FBTzhzQyxHQWNYNEIsRUFBa0I5c0MsVUFBVXF0QyxzQkFBd0IsU0FBVTFULEVBQWdCSyxFQUFVTSxHQUVwRixJQURBLElBQUk0USxFQUFtQixHQUNkNS9CLEVBQUssRUFBR00sRUFBS2pMLEtBQUtvc0MsZ0JBQWlCemhDLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM5RCxJQUFJaWlDLEVBQWlCM2hDLEVBQUdOLEdBQ3BCMC9CLEVBQVl1QyxFQUFldkMsVUFDM0IvZCxFQUFnQixLQUNoQitNLGFBQW9CeVIsS0FDcEJ4ZSxFQUFnQitNLEVBQVMrUSxNQUFNd0MsRUFBZXhDLFFBRTVCLE9BQWxCOWQsR0FBMEJxTixhQUFtQm1SLEtBSzdDeGUsRUFBZ0JxTixFQUFReVEsTUFBTXdDLEVBQWV4QyxRQUVqREcsRUFBaUI5bUMsS0FBSzRtQyxFQUFVM1EsaUJBQWlCcE4sRUFBZTBNLElBRXBFLE9BQU91UixHQUVYNEIsRUFBa0I5c0MsVUFBVW90QyxnQkFBa0IsU0FBVS9oQyxFQUFNNi9CLEdBQzFEMWtDLEVBQU8wa0MsRUFBaUJscUMsU0FBV0wsS0FBS29zQyxnQkFBZ0IvckMsT0FBUSxxQ0FDaEUsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS29zQyxnQkFBZ0IvckMsT0FBUTVDLElBQUssQ0FDbEQsSUFDSXVzQyxFQURpQmhxQyxLQUFLb3NDLGdCQUFnQjN1QyxHQUNYMnNDLE1BQy9CMS9CLEVBQU9BLEVBQUt3SixJQUFJODFCLEVBQVdPLEVBQWlCOXNDLElBRWhELE9BQU9pTixHQUVKeWhDLEVBaEoyQixDQWlKcENsQixJQUVFK0IsR0FBZ0MsU0FBVTdpQyxHQUUxQyxTQUFTNmlDLEVBQWVodUMsRUFBS3FzQyxHQUN6QixJQUFJM2hDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FJakMsT0FIQTBKLEVBQU0xSyxJQUFNQSxFQUNaMEssRUFBTTJoQyxhQUFlQSxFQUNyQjNoQyxFQUFNb0osS0FBTzQyQixHQUFhdUQsT0FDbkJ2akMsRUE4QlgsT0FwQ0FsRSxFQUFNMUYsVUFBVWt0QyxFQUFnQjdpQyxHQVFoQzZpQyxFQUFlM3RDLFVBQVU4NUIsc0JBQXdCLFNBQVVFLEVBQVVJLEdBTWpFLE9BTEF6NUIsS0FBS2tyQyxpQkFBaUI3UixHQUN0Qnh6QixFQUEwQyxNQUFuQzR6QixFQUFlOFEsaUJBQTBCLGlEQUl6QyxJQUFJMkMsR0FBV2x0QyxLQUFLaEIsSUFBS3k2QixFQUFlbmpCLFFBQVMsQ0FDcERpMUIsdUJBQXVCLEtBRy9CeUIsRUFBZTN0QyxVQUFVcTZCLGlCQUFtQixTQUFVTCxFQUFVTSxFQUFTWCxHQUVyRSxPQURBaDVCLEtBQUtrckMsaUJBQWlCN1IsR0FDakJyNUIsS0FBS3FyQyxhQUFhUixXQUFXeFIsSUFHOUJBLEdBQ0F4ekIsRUFBT3d6QixFQUFTcjZCLElBQUlzckIsUUFBUXRxQixLQUFLaEIsS0FBTSxxREFFcEMsSUFBSWt1QyxHQUFXbHRDLEtBQUtoQixJQUFLNDBCLEdBQWdCSSxrQkFMckNxRixHQU9mMlQsRUFBZTN0QyxVQUFVb3NDLGlCQUFtQixTQUFVcFMsR0FDbEQsT0FBTyxNQUVYMlQsRUFBZTN0QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3pDLE9BQVFBLGFBQWlCeWhCLEdBQ3JCaHRDLEtBQUtoQixJQUFJc3JCLFFBQVFpQixFQUFNdnNCLE1BQ3ZCZ0IsS0FBS3FyQyxhQUFhL2dCLFFBQVFpQixFQUFNOGYsZUFFakMyQixFQXJDd0IsQ0FzQ2pDL0IsS0FtQkYsU0FBV1QsR0FFUEEsRUFBVUEsRUFBcUIsVUFBSSxHQUFLLFlBQ3hDQSxFQUFVQSxFQUF3QixhQUFJLEdBQUssZUFDM0NBLEVBQVVBLEVBQXVCLFlBQUksR0FBSyxjQUMxQ0EsRUFBVUEsRUFBMEIsZUFBSSxHQUFLLGlCQUM3Q0EsRUFBVUEsRUFBdUIsWUFBSSxHQUFLLGNBQzFDQSxFQUFVQSxFQUFxQixVQUFJLEdBQUssWUFDeENBLEVBQVVBLEVBQW9CLFNBQUksR0FBSyxXQUN2Q0EsRUFBVUEsRUFBeUIsY0FBSSxHQUFLLGdCQUM1Q0EsRUFBVUEsRUFBc0IsV0FBSSxHQUFLLGFBQ3pDQSxFQUFVQSxFQUF1QixZQUFJLEdBQUssY0FYOUMsQ0FZR0EsS0FBY0EsR0FBWSxLQUc3QixTQUFXQyxHQUNQQSxFQUF3QkEsRUFBaUMsUUFBSSxHQUFLLFVBQ2xFQSxFQUF3QkEsRUFBa0MsU0FBSSxHQUFLLFdBQ25FQSxFQUF3QkEsRUFBa0MsU0FBSSxHQUFLLFdBSHZFLENBSUdBLEtBQTRCQSxHQUEwQixLQUV6RCxJQUFJMEMsR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0JDLEVBQXlCQyxHQUNoRHJ0QyxLQUFLb3RDLHdCQUEwQkEsRUFDL0JwdEMsS0FBS3F0QyxzQkFBd0JBLEVBZWpDLE9BYkFGLEVBQWtCRyxvQkFBc0IsU0FBVWg1QixFQUFTKzRCLEdBQ3ZELE9BQVEvNEIsRUFBUWk1QixrQkFDWixJQUFLLFdBQ0QsT0FBTyxJQUFJSixFQUFrQjFDLEdBQXdCK0MsU0FBVUgsR0FDbkUsSUFBSyxXQUNELE9BQU8sSUFBSUYsRUFBa0IxQyxHQUF3QmdELFNBQVVKLEdBQ25FLElBQUssT0FDTCxVQUFLOWpDLEVBQ0QsT0FBTyxJQUFJNGpDLEVBQWtCMUMsR0FBd0JpRCxRQUFTTCxHQUNsRSxRQUNJLE9BQU94b0IsRUFBSyx3REFHakJzb0IsRUFsQjJCLEdBdUJsQ1EsR0FBNEIsV0FDNUIsU0FBU0EsS0FXVCxPQVRBQSxFQUFXdHVDLFVBQVVtTSxTQUFXLFdBQzVCLElBQUk4TCxFQUFNdFgsS0FBS3RCLFFBQ2YsT0FBZSxPQUFSNFksRUFBZSxPQUFTQSxFQUFJOUwsWUFFdkNtaUMsRUFBV3R1QyxVQUFVdXVDLGlCQUFtQixTQUFVcmlCLEdBRzlDLE9BRkExbEIsRUFBTzdGLEtBQUs2dEMsWUFBY3RpQixFQUFNc2lCLFVBQVcsaUVBQ2pDM2pCLEVBQW9CbHFCLEtBQUs2dEMsVUFBV3RpQixFQUFNc2lCLFlBR2pERixFQVpvQixHQWMzQkcsR0FBMkIsU0FBVTNqQyxHQUVyQyxTQUFTMmpDLElBQ0wsSUFBSXBrQyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBS2pDLE9BSkEwSixFQUFNbWtDLFVBQVlyRCxHQUFVc0QsVUFHNUJwa0MsRUFBTXFrQyxjQUFnQixLQUNmcmtDLEVBZVgsT0F0QkFsRSxFQUFNMUYsVUFBVWd1QyxFQUFXM2pDLEdBUzNCMmpDLEVBQVV6dUMsVUFBVVgsTUFBUSxTQUFVNFYsR0FDbEMsT0FBTyxNQUVYdzVCLEVBQVV6dUMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNwQyxPQUFPQSxhQUFpQnVpQixHQUU1QkEsRUFBVXp1QyxVQUFVK3NCLFVBQVksU0FBVWIsR0FDdEMsT0FBSUEsYUFBaUJ1aUIsRUFDVixFQUVKOXRDLEtBQUs0dEMsaUJBQWlCcmlCLElBRWpDdWlCLEVBQVVFLFNBQVcsSUFBSUYsRUFDbEJBLEVBdkJtQixDQXdCNUJILElBQ0VNLEdBQThCLFNBQVU5akMsR0FFeEMsU0FBUzhqQyxFQUFhRixHQUNsQixJQUFJcmtDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FHakMsT0FGQTBKLEVBQU1xa0MsY0FBZ0JBLEVBQ3RCcmtDLEVBQU1ta0MsVUFBWXJELEdBQVV5RCxhQUNyQnZrQyxFQW9CWCxPQXpCQWxFLEVBQU0xRixVQUFVbXVDLEVBQWM5akMsR0FPOUI4akMsRUFBYTV1QyxVQUFVWCxNQUFRLFNBQVU0VixHQUNyQyxPQUFPdFUsS0FBSyt0QyxlQUVoQkUsRUFBYTV1QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3ZDLE9BQVFBLGFBQWlCMGlCLEdBQ3JCanVDLEtBQUsrdEMsZ0JBQWtCeGlCLEVBQU13aUIsZUFFckNFLEVBQWE1dUMsVUFBVStzQixVQUFZLFNBQVViLEdBQ3pDLE9BQUlBLGFBQWlCMGlCLEVBQ1YvakIsRUFBb0JscUIsS0FBTXVyQixHQUU5QnZyQixLQUFLNHRDLGlCQUFpQnJpQixJQUVqQzBpQixFQUFhQyxHQUFLLFNBQVV4dkMsR0FDeEIsT0FBT0EsRUFBUXV2QyxFQUFhRSxLQUFPRixFQUFhRyxPQUVwREgsRUFBYUUsS0FBTyxJQUFJRixHQUFhLEdBQ3JDQSxFQUFhRyxNQUFRLElBQUlILEdBQWEsR0FDL0JBLEVBMUJzQixDQTJCL0JOLElBRUVVLEdBQTZCLFNBQVVsa0MsR0FFdkMsU0FBU2trQyxFQUFZTixHQUNqQixJQUFJcmtDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FHakMsT0FGQTBKLEVBQU1xa0MsY0FBZ0JBLEVBQ3RCcmtDLEVBQU1ta0MsVUFBWXJELEdBQVU2RCxZQUNyQjNrQyxFQVdYLE9BaEJBbEUsRUFBTTFGLFVBQVV1dUMsRUFBYWxrQyxHQU83QmtrQyxFQUFZaHZDLFVBQVVYLE1BQVEsU0FBVTRWLEdBQ3BDLE9BQU90VSxLQUFLK3RDLGVBRWhCTSxFQUFZaHZDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUN4QyxPQUFJQSxhQUFpQjhpQixHQVFGbGtCLEVBUFVucUIsS0FBSyt0QyxjQU9UM2pCLEVBUHdCbUIsRUFBTXdpQixjQVF2RDVqQixFQUFPQyxHQUNDLEVBRUhELEVBQU9DLEVBQ0wsRUFFRkQsSUFBU0MsRUFDUCxFQUlIdkQsTUFBTXNELEdBQ0N0RCxNQUFNdUQsR0FBUyxHQUFLLEVBR3BCLEdBckJKcHFCLEtBQUs0dEMsaUJBQWlCcmlCLEdBS3JDLElBQTJCcEIsRUFBTUMsR0FIdEJpa0IsRUFqQnFCLENBa0I5QlYsSUEwQkYsU0FBU1csR0FBY25rQixFQUFNQyxHQUd6QixPQUFJRCxJQUFTQyxFQUVPLElBQVRELEdBQWMsRUFBSUEsR0FBUyxFQUFJQyxFQUkvQkQsR0FBU0EsR0FBUUMsR0FBVUEsRUFHMUMsSUFBSW1rQixHQUE4QixTQUFVcGtDLEdBRXhDLFNBQVNva0MsSUFDTCxPQUFrQixPQUFYcGtDLEdBQW1CQSxFQUFPN0osTUFBTU4sS0FBTUksWUFBY0osS0FZL0QsT0FkQXdGLEVBQU0xRixVQUFVeXVDLEVBQWNwa0MsR0FJOUJva0MsRUFBYWx2QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBR3ZDLE9BQUlBLGFBQWlCZ2pCLEdBQ1ZELEdBQWN0dUMsS0FBSyt0QyxjQUFleGlCLEVBQU13aUIsZ0JBTWhEUSxFQWZzQixDQWdCL0JGLElBQ0VHLEdBQTZCLFNBQVVya0MsR0FFdkMsU0FBU3FrQyxJQUNMLE9BQWtCLE9BQVhya0MsR0FBbUJBLEVBQU83SixNQUFNTixLQUFNSSxZQUFjSixLQWUvRCxPQWpCQXdGLEVBQU0xRixVQUFVMHVDLEVBQWFya0MsR0FJN0Jxa0MsRUFBWW52QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBR3RDLE9BQUlBLGFBQWlCaWpCLEdBQ1ZGLEdBQWN0dUMsS0FBSyt0QyxjQUFleGlCLEVBQU13aUIsZ0JBTXZEUyxFQUFZQyxJQUFNLElBQUlELEVBQVlFLEtBQ2xDRixFQUFZOU0sa0JBQW9CLElBQUk4TSxFQUFZRyxLQUNoREgsRUFBWS9NLGtCQUFvQixJQUFJK00sR0FBYUcsS0FDMUNILEVBbEJxQixDQW1COUJILElBRUVPLEdBQTZCLFNBQVV6a0MsR0FFdkMsU0FBU3lrQyxFQUFZYixHQUNqQixJQUFJcmtDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FHakMsT0FGQTBKLEVBQU1xa0MsY0FBZ0JBLEVBQ3RCcmtDLEVBQU1ta0MsVUFBWXJELEdBQVVvRSxZQUNyQmxsQyxFQWNYLE9BbkJBbEUsRUFBTTFGLFVBQVU4dUMsRUFBYXprQyxHQU83QnlrQyxFQUFZdnZDLFVBQVVYLE1BQVEsU0FBVTRWLEdBQ3BDLE9BQU90VSxLQUFLK3RDLGVBRWhCYSxFQUFZdnZDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDdEMsT0FBUUEsYUFBaUJxakIsR0FBZTV1QyxLQUFLK3RDLGdCQUFrQnhpQixFQUFNd2lCLGVBRXpFYSxFQUFZdnZDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUN4QyxPQUFJQSxhQUFpQnFqQixFQUNWMWtCLEVBQW9CbHFCLEtBQUsrdEMsY0FBZXhpQixFQUFNd2lCLGVBRWxEL3RDLEtBQUs0dEMsaUJBQWlCcmlCLElBRTFCcWpCLEVBcEJxQixDQXFCOUJqQixJQUNFa0IsR0FBZ0MsU0FBVTFrQyxHQUUxQyxTQUFTMGtDLEVBQWVkLEdBQ3BCLElBQUlya0MsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUdqQyxPQUZBMEosRUFBTXFrQyxjQUFnQkEsRUFDdEJya0MsRUFBTW1rQyxVQUFZckQsR0FBVXFFLGVBQ3JCbmxDLEVBMEJYLE9BL0JBbEUsRUFBTTFGLFVBQVUrdUMsRUFBZ0Ixa0MsR0FPaEMwa0MsRUFBZXh2QyxVQUFVWCxNQUFRLFNBQVU0VixHQUN2QyxPQUFLQSxHQUFXQSxFQUFRKzRCLHNCQUNicnRDLEtBQUsrdEMsY0FHTC90QyxLQUFLK3RDLGNBQWNyYSxVQUdsQ21iLEVBQWV4dkMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN6QyxPQUFRQSxhQUFpQnNqQixHQUNyQjd1QyxLQUFLK3RDLGNBQWN6akIsUUFBUWlCLEVBQU13aUIsZ0JBRXpDYyxFQUFleHZDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUMzQyxPQUFJQSxhQUFpQnNqQixFQUNWN3VDLEtBQUsrdEMsY0FBY3ZpQixXQUFXRCxFQUFNd2lCLGVBRXRDeGlCLGFBQWlCdWpCLElBRWQsRUFHRDl1QyxLQUFLNHRDLGlCQUFpQnJpQixJQUc5QnNqQixFQWhDd0IsQ0FpQ2pDbEIsSUFlRW1CLEdBQXNDLFNBQVUza0MsR0FFaEQsU0FBUzJrQyxFQUFxQjlWLEVBQWdCMU0sR0FDMUMsSUFBSTVpQixFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBSWpDLE9BSEEwSixFQUFNc3ZCLGVBQWlCQSxFQUN2QnR2QixFQUFNNGlCLGNBQWdCQSxFQUN0QjVpQixFQUFNbWtDLFVBQVlyRCxHQUFVcUUsZUFDckJubEMsRUFrQ1gsT0F4Q0FsRSxFQUFNMUYsVUFBVWd2QyxFQUFzQjNrQyxHQVF0QzJrQyxFQUFxQnp2QyxVQUFVWCxNQUFRLFNBQVU0VixHQUM3QyxPQUFJQSxHQUNBQSxFQUFRODRCLDBCQUE0QjNDLEdBQXdCK0MsU0FDckQsSUFBSXFCLEdBQWU3dUMsS0FBS2c1QixnQkFBZ0J0NkIsTUFBTTRWLEdBRWhEQSxHQUNMQSxFQUFRODRCLDBCQUE0QjNDLEdBQXdCZ0QsVUFDckR6dEMsS0FBS3NzQixjQUFnQnRzQixLQUFLc3NCLGNBQWM1dEIsTUFBTTRWLEdBRzlDLE1BR2Z3NkIsRUFBcUJ6dkMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUMvQyxPQUFRQSxhQUFpQnVqQixHQUNyQjl1QyxLQUFLZzVCLGVBQWUxTyxRQUFRaUIsRUFBTXlOLGlCQUUxQzhWLEVBQXFCenZDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUNqRCxPQUFJQSxhQUFpQnVqQixFQUNWOXVDLEtBQUtnNUIsZUFBZXhOLFdBQVdELEVBQU15TixnQkFFdkN6TixhQUFpQnNqQixHQUVmLEVBR0E3dUMsS0FBSzR0QyxpQkFBaUJyaUIsSUFHckN1akIsRUFBcUJ6dkMsVUFBVW1NLFNBQVcsV0FDdEMsTUFBTyw4QkFBZ0N4TCxLQUFLZzVCLGVBQWV4dEIsV0FBYSxLQUVyRXNqQyxFQXpDOEIsQ0EwQ3ZDbkIsSUFDRW9CLEdBQTJCLFNBQVU1a0MsR0FFckMsU0FBUzRrQyxFQUFVaEIsR0FDZixJQUFJcmtDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FHakMsT0FGQTBKLEVBQU1xa0MsY0FBZ0JBLEVBQ3RCcmtDLEVBQU1ta0MsVUFBWXJELEdBQVV1RSxVQUNyQnJsQyxFQWVYLE9BcEJBbEUsRUFBTTFGLFVBQVVpdkMsRUFBVzVrQyxHQU8zQjRrQyxFQUFVMXZDLFVBQVVYLE1BQVEsU0FBVTRWLEdBQ2xDLE9BQU90VSxLQUFLK3RDLGVBRWhCZ0IsRUFBVTF2QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3BDLE9BQVFBLGFBQWlCd2pCLEdBQ3JCL3VDLEtBQUsrdEMsY0FBY3pqQixRQUFRaUIsRUFBTXdpQixnQkFFekNnQixFQUFVMXZDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUN0QyxPQUFJQSxhQUFpQndqQixFQUNWL3VDLEtBQUsrdEMsY0FBY3ZpQixXQUFXRCxFQUFNd2lCLGVBRXhDL3RDLEtBQUs0dEMsaUJBQWlCcmlCLElBRTFCd2pCLEVBckJtQixDQXNCNUJwQixJQUNFcUIsR0FBMEIsU0FBVTdrQyxHQUVwQyxTQUFTNmtDLEVBQVNyakIsRUFBWTNzQixHQUMxQixJQUFJMEssRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUlqQyxPQUhBMEosRUFBTWlpQixXQUFhQSxFQUNuQmppQixFQUFNMUssSUFBTUEsRUFDWjBLLEVBQU1ta0MsVUFBWXJELEdBQVV3RSxTQUNyQnRsQyxFQW9CWCxPQTFCQWxFLEVBQU0xRixVQUFVa3ZDLEVBQVU3a0MsR0FRMUI2a0MsRUFBUzN2QyxVQUFVWCxNQUFRLFNBQVU0VixHQUNqQyxPQUFPdFUsS0FBS2hCLEtBRWhCZ3dDLEVBQVMzdkMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNuQyxPQUFJQSxhQUFpQnlqQixJQUNUaHZDLEtBQUtoQixJQUFJc3JCLFFBQVFpQixFQUFNdnNCLE1BQVFnQixLQUFLMnJCLFdBQVdyQixRQUFRaUIsRUFBTUksY0FNN0VxakIsRUFBUzN2QyxVQUFVK3NCLFVBQVksU0FBVWIsR0FDckMsR0FBSUEsYUFBaUJ5akIsRUFBVSxDQUMzQixJQUFJdGEsRUFBTTEwQixLQUFLMnJCLFdBQVdTLFVBQVViLEVBQU1JLFlBQzFDLE9BQWUsSUFBUitJLEVBQVlBLEVBQU10RixHQUFZaEMsV0FBV3B0QixLQUFLaEIsSUFBS3VzQixFQUFNdnNCLEtBRXBFLE9BQU9nQixLQUFLNHRDLGlCQUFpQnJpQixJQUUxQnlqQixFQTNCa0IsQ0E0QjNCckIsSUFDRXNCLEdBQStCLFNBQVU5a0MsR0FFekMsU0FBUzhrQyxFQUFjbEIsR0FDbkIsSUFBSXJrQyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBR2pDLE9BRkEwSixFQUFNcWtDLGNBQWdCQSxFQUN0QnJrQyxFQUFNbWtDLFVBQVlyRCxHQUFVeUUsY0FDckJ2bEMsRUFlWCxPQXBCQWxFLEVBQU0xRixVQUFVbXZDLEVBQWU5a0MsR0FPL0I4a0MsRUFBYzV2QyxVQUFVWCxNQUFRLFNBQVU0VixHQUN0QyxPQUFPdFUsS0FBSyt0QyxlQUVoQmtCLEVBQWM1dkMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN4QyxPQUFRQSxhQUFpQjBqQixHQUNyQmp2QyxLQUFLK3RDLGNBQWN6akIsUUFBUWlCLEVBQU13aUIsZ0JBRXpDa0IsRUFBYzV2QyxVQUFVK3NCLFVBQVksU0FBVWIsR0FDMUMsT0FBSUEsYUFBaUIwakIsRUFDVmp2QyxLQUFLK3RDLGNBQWN2aUIsV0FBV0QsRUFBTXdpQixlQUV4Qy90QyxLQUFLNHRDLGlCQUFpQnJpQixJQUUxQjBqQixFQXJCdUIsQ0FzQmhDdEIsSUFDRTNCLEdBQTZCLFNBQVU3aEMsR0FFdkMsU0FBUzZoQyxFQUFZK0IsR0FDakIsSUFBSXJrQyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBR2pDLE9BRkEwSixFQUFNcWtDLGNBQWdCQSxFQUN0QnJrQyxFQUFNbWtDLFVBQVlyRCxHQUFVd0IsWUFDckJ0aUMsRUFzSVgsT0EzSUFsRSxFQUFNMUYsVUFBVWtzQyxFQUFhN2hDLEdBTzdCNmhDLEVBQVkzc0MsVUFBVVgsTUFBUSxTQUFVNFYsR0FDcEMsSUFBSWhTLEVBQVMsR0FJYixPQUhBdEMsS0FBSyt0QyxjQUFjalosa0JBQWlCLFNBQVU5MUIsRUFBS3NZLEdBQy9DaFYsRUFBT3RELEdBQU9zWSxFQUFJNVksTUFBTTRWLE1BRXJCaFMsR0FFWDBwQyxFQUFZM3NDLFVBQVVtUyxRQUFVLFNBQVV1akIsR0FDdEMvMEIsS0FBSyt0QyxjQUFjalosaUJBQWlCQyxJQUV4Q2lYLEVBQVkzc0MsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN0QyxHQUFJQSxhQUFpQnlnQixFQUFhLENBRzlCLElBRkEsSUFBSWtELEVBQU1sdkMsS0FBSyt0QyxjQUFjN1ksY0FDekJpYSxFQUFNNWpCLEVBQU13aUIsY0FBYzdZLGNBQ3ZCZ2EsRUFBSXZaLFdBQWF3WixFQUFJeFosV0FBVyxDQUNuQyxJQUFJeVosRUFBUUYsRUFBSXhaLFVBQ1oyWixFQUFRRixFQUFJelosVUFDaEIsR0FBSTBaLEVBQU1wd0MsTUFBUXF3QyxFQUFNcndDLE1BQVFvd0MsRUFBTTF3QyxNQUFNNHJCLFFBQVEra0IsRUFBTTN3QyxPQUN0RCxPQUFPLEVBR2YsT0FBUXd3QyxFQUFJdlosWUFBY3daLEVBQUl4WixVQUVsQyxPQUFPLEdBRVhxVyxFQUFZM3NDLFVBQVUrc0IsVUFBWSxTQUFVYixHQUN4QyxHQUFJQSxhQUFpQnlnQixFQUFhLENBRzlCLElBRkEsSUFBSWtELEVBQU1sdkMsS0FBSyt0QyxjQUFjN1ksY0FDekJpYSxFQUFNNWpCLEVBQU13aUIsY0FBYzdZLGNBQ3ZCZ2EsRUFBSXZaLFdBQWF3WixFQUFJeFosV0FBVyxDQUNuQyxJQUFJeVosRUFBUUYsRUFBSXhaLFVBQ1oyWixFQUFRRixFQUFJelosVUFDWmhCLEVBQU14SyxFQUFvQmtsQixFQUFNcHdDLElBQUtxd0MsRUFBTXJ3QyxNQUMzQ293QyxFQUFNMXdDLE1BQU0wdEIsVUFBVWlqQixFQUFNM3dDLE9BQ2hDLEdBQUlnMkIsRUFDQSxPQUFPQSxFQUlmLE9BQU94SyxFQUFvQmdsQixFQUFJdlosVUFBV3daLEVBQUl4WixXQUc5QyxPQUFPMzFCLEtBQUs0dEMsaUJBQWlCcmlCLElBR3JDeWdCLEVBQVkzc0MsVUFBVTZVLElBQU0sU0FBVXVhLEVBQU02Z0IsR0FFeEMsR0FEQXpwQyxHQUFRNG9CLEVBQUt6ZSxVQUFXLGtEQUNKLElBQWhCeWUsRUFBS3B1QixPQUNMLE9BQU9MLEtBQUt1dkMsU0FBUzlnQixFQUFLWixlQUFnQnloQixHQUcxQyxJQUFJamlCLEVBQVFydEIsS0FBS3F0QixNQUFNb0IsRUFBS1osZ0JBQ3RCUixhQUFpQjJlLElBQ25CM2UsRUFBUTJlLEVBQVlwYyxPQUV4QixJQUFJNGYsRUFBV25pQixFQUFNblosSUFBSXVhLEVBQUtmLFdBQVk0aEIsR0FDMUMsT0FBT3R2QyxLQUFLdXZDLFNBQVM5Z0IsRUFBS1osZUFBZ0IyaEIsSUFHbER4RCxFQUFZM3NDLFVBQVU2VixPQUFTLFNBQVV1WixHQUVyQyxHQURBNW9CLEdBQVE0b0IsRUFBS3plLFVBQVcscURBQ0osSUFBaEJ5ZSxFQUFLcHVCLE9BQ0wsT0FBTyxJQUFJMnJDLEVBQVloc0MsS0FBSyt0QyxjQUFjenNCLE9BQU9tTixFQUFLWixpQkFJdEQsSUFBSVIsRUFBUXJ0QixLQUFLcXRCLE1BQU1vQixFQUFLWixnQkFDNUIsR0FBSVIsYUFBaUIyZSxFQUFhLENBQzlCLElBQUl3RCxFQUFXbmlCLEVBQU1uWSxPQUFPdVosRUFBS2YsWUFDakMsT0FBTyxJQUFJc2UsRUFBWWhzQyxLQUFLK3RDLGNBQWMvc0IsT0FBT3lOLEVBQUtaLGVBQWdCMmhCLElBSXRFLE9BQU94dkMsTUFJbkJnc0MsRUFBWTNzQyxVQUFVb1EsU0FBVyxTQUFVZ2YsR0FDdkMsT0FBNEIsT0FBckJ6dUIsS0FBS29xQyxNQUFNM2IsSUFFdEJ1ZCxFQUFZM3NDLFVBQVUrcUMsTUFBUSxTQUFVM2IsR0FDcEM1b0IsR0FBUTRvQixFQUFLemUsVUFBVyxpQ0FDeEIsSUFBSW82QixFQUFRcHFDLEtBU1osT0FSQXl1QixFQUFLamQsU0FBUSxTQUFVaStCLEdBRWZyRixFQURBQSxhQUFpQjRCLEVBQ1Q1QixFQUFNMkQsY0FBY3p2QyxJQUFJbXhDLEdBR3hCLFFBR1RyRixHQU1YNEIsRUFBWTNzQyxVQUFVc3NDLFVBQVksV0FDOUIsSUFBSS9CLEVBQVMsSUFBSTdTLEdBQVVuSSxHQUFVeEIsWUFzQnJDLE9BckJBcHRCLEtBQUsrdEMsY0FBY3Y4QixTQUFRLFNBQVV4UyxFQUFLTixHQUN0QyxJQUFJZ3hDLEVBQWMsSUFBSTlnQixHQUFVLENBQUM1dkIsSUFDakMsR0FBSU4sYUFBaUJzdEMsRUFBYSxDQUM5QixJQUNJMkQsRUFEYWp4QyxFQUFNaXRDLFlBQ08vQixPQUMxQitGLEVBQWEzL0IsVUFFYjQ1QixFQUFTQSxFQUFPM1MsSUFBSXlZLEdBS3BCQyxFQUFhbitCLFNBQVEsU0FBVW8rQixHQUMzQmhHLEVBQVNBLEVBQU8zUyxJQUFJeVksRUFBWXJpQixNQUFNdWlCLFlBSzlDaEcsRUFBU0EsRUFBTzNTLElBQUl5WSxNQUdyQi9GLEdBQVVFLFFBQVFELElBRTdCb0MsRUFBWTNzQyxVQUFVbU0sU0FBVyxXQUM3QixPQUFPeEwsS0FBSyt0QyxjQUFjdmlDLFlBRTlCd2dDLEVBQVkzc0MsVUFBVWd1QixNQUFRLFNBQVV3aUIsR0FDcEMsT0FBTzd2QyxLQUFLK3RDLGNBQWN6dkMsSUFBSXV4QyxTQUFjdG1DLEdBRWhEeWlDLEVBQVkzc0MsVUFBVWt3QyxTQUFXLFNBQVVNLEVBQVdueEMsR0FDbEQsT0FBTyxJQUFJc3RDLEVBQVloc0MsS0FBSyt0QyxjQUFjL3NCLE9BQU82dUIsRUFBV254QyxLQUVoRXN0QyxFQUFZcGMsTUFBUSxJQUFJb2MsRUFBWSxJQUFJNVgsR0FBVWxLLElBQzNDOGhCLEVBNUlxQixDQTZJOUIyQixJQUNFbUMsR0FBNEIsU0FBVTNsQyxHQUV0QyxTQUFTMmxDLEVBQVcvQixHQUNoQixJQUFJcmtDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FHakMsT0FGQTBKLEVBQU1xa0MsY0FBZ0JBLEVBQ3RCcmtDLEVBQU1ta0MsVUFBWXJELEdBQVVzRixXQUNyQnBtQyxFQXFEWCxPQTFEQWxFLEVBQU0xRixVQUFVZ3dDLEVBQVkzbEMsR0FPNUIybEMsRUFBV3p3QyxVQUFVWCxNQUFRLFNBQVU0VixHQUNuQyxPQUFPdFUsS0FBSyt0QyxjQUFjOThCLEtBQUksU0FBVTVOLEdBQUssT0FBT0EsRUFBRTNFLE1BQU00VixPQUtoRXc3QixFQUFXendDLFVBQVVvUSxTQUFXLFNBQVUvUSxHQUN0QyxJQUFLLElBQUlpTSxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLK3RDLGNBQWVwakMsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBRTVELEdBRGNNLEVBQUdOLEdBQ0wyZixRQUFRNXJCLEdBQ2hCLE9BQU8sRUFHZixPQUFPLEdBRVhveEMsRUFBV3p3QyxVQUFVbVMsUUFBVSxTQUFVdWpCLEdBQ3JDLzBCLEtBQUsrdEMsY0FBY3Y4QixRQUFRdWpCLElBRS9CK2EsRUFBV3p3QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3JDLEdBQUlBLGFBQWlCdWtCLEVBQVksQ0FDN0IsR0FBSTl2QyxLQUFLK3RDLGNBQWMxdEMsU0FBV2tyQixFQUFNd2lCLGNBQWMxdEMsT0FDbEQsT0FBTyxFQUVYLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUsrdEMsY0FBYzF0QyxPQUFRNUMsSUFDM0MsSUFBS3VDLEtBQUsrdEMsY0FBY3R3QyxHQUFHNnNCLFFBQVFpQixFQUFNd2lCLGNBQWN0d0MsSUFDbkQsT0FBTyxFQUdmLE9BQU8sRUFFWCxPQUFPLEdBRVhxeUMsRUFBV3p3QyxVQUFVK3NCLFVBQVksU0FBVWIsR0FDdkMsR0FBSUEsYUFBaUJ1a0IsRUFBWSxDQUU3QixJQURBLElBQUlDLEVBQVluL0IsS0FBS3lkLElBQUlydUIsS0FBSyt0QyxjQUFjMXRDLE9BQVFrckIsRUFBTXdpQixjQUFjMXRDLFFBQy9ENUMsRUFBSSxFQUFHQSxFQUFJc3lDLEVBQVd0eUMsSUFBSyxDQUNoQyxJQUFJaTNCLEVBQU0xMEIsS0FBSyt0QyxjQUFjdHdDLEdBQUcydUIsVUFBVWIsRUFBTXdpQixjQUFjdHdDLElBQzlELEdBQUlpM0IsRUFDQSxPQUFPQSxFQUdmLE9BQU94SyxFQUFvQmxxQixLQUFLK3RDLGNBQWMxdEMsT0FBUWtyQixFQUFNd2lCLGNBQWMxdEMsUUFHMUUsT0FBT0wsS0FBSzR0QyxpQkFBaUJyaUIsSUFHckN1a0IsRUFBV3p3QyxVQUFVbU0sU0FBVyxXQUU1QixNQUFPLElBRFl4TCxLQUFLK3RDLGNBQWM5OEIsS0FBSSxTQUFVNU4sR0FBSyxPQUFPQSxFQUFFbUksY0FDeEMxRCxLQUFLLEtBQU8sS0FFbkNnb0MsRUEzRG9CLENBNEQ3Qm5DLElBc0JFcUMsR0FBK0IsV0FDL0IsU0FBU0EsRUFBY2h4QyxFQUFLc1gsR0FDeEJ0VyxLQUFLaEIsSUFBTUEsRUFDWGdCLEtBQUtzVyxRQUFVQSxFQUtuQixPQUhBMDVCLEVBQWNDLGFBQWUsU0FBVUMsRUFBSUMsR0FDdkMsT0FBTy9nQixHQUFZaEMsV0FBVzhpQixFQUFHbHhDLElBQUtteEMsRUFBR254QyxNQUV0Q2d4QyxFQVJ1QixHQWM5QmxGLEdBQTBCLFNBQVUzZ0MsR0FFcEMsU0FBUzJnQyxFQUFTOXJDLEVBQUtzWCxFQUFTaEMsRUFBUzg3QixFQUFhQyxFQUFPQyxHQUN6RCxJQUFJNW1DLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTWhCLEVBQUtzWCxJQUFZdFcsS0FRL0MsT0FQQTBKLEVBQU0wbUMsWUFBY0EsRUFDcEIxbUMsRUFBTTJtQyxNQUFRQSxFQUNkM21DLEVBQU00bUMsVUFBWUEsRUFDbEJ6cUMsT0FBNkIwRCxJQUF0QkcsRUFBTTBtQyxrQkFDUTdtQyxJQUFoQkcsRUFBTTJtQyxZQUEyQzltQyxJQUFwQkcsRUFBTTRtQyxVQUEwQixzRUFDbEU1bUMsRUFBTThoQyxvQkFBc0JsM0IsRUFBUWszQixrQkFDcEM5aEMsRUFBTTZoQyx3QkFBMEJqM0IsRUFBUWkzQixzQkFDakM3aEMsRUErRlgsT0F6R0FsRSxFQUFNMUYsVUFBVWdyQyxFQUFVM2dDLEdBWTFCMmdDLEVBQVN6ckMsVUFBVStxQyxNQUFRLFNBQVUzYixHQUNqQyxHQUFJenVCLEtBQUtvd0MsWUFDTCxPQUFPcHdDLEtBQUtvd0MsWUFBWWhHLE1BQU0zYixHQUd6Qnp1QixLQUFLdXdDLGtCQUdOdndDLEtBQUt1d0MsZ0JBQWtCLElBQUk1OEIsS0FFL0IsSUFBSTY4QixFQUFnQi9oQixFQUFLRixrQkFDckJraUIsRUFBYXp3QyxLQUFLdXdDLGdCQUFnQmp5QyxJQUFJa3lDLEdBQzFDLFFBQW1Cam5DLElBQWZrbkMsRUFBMEIsQ0FLMUIsSUFBSUMsRUFBYTF3QyxLQUFLMndDLGNBQWNsaUIsR0FFaENnaUIsT0FEZWxuQyxJQUFmbW5DLEVBQ2EsS0FHQTF3QyxLQUFLc3dDLFVBQVVJLEdBRWhDMXdDLEtBQUt1d0MsZ0JBQWdCcjhCLElBQUlzOEIsRUFBZUMsR0FFNUMsT0FBT0EsR0FHZjNGLEVBQVN6ckMsVUFBVXFMLEtBQU8sV0FDdEIsSUFBSWhCLEVBQVExSixLQUNaLElBQUtBLEtBQUtvd0MsWUFBYSxDQUNuQixJQUFJUSxFQUFXNUUsR0FBWXBjLE1BQzNCcGUsRUFBUXhSLEtBQUtxd0MsTUFBTXpHLFFBQVUsSUFBSSxTQUFVNXFDLEVBQUtOLEdBQzVDa3lDLEVBQVdBLEVBQVMxOEIsSUFBSSxJQUFJMGEsR0FBVSxDQUFDNXZCLElBQU8wSyxFQUFNNG1DLFVBQVU1eEMsT0FFbEVzQixLQUFLb3dDLFlBQWNRLEVBR25CNXdDLEtBQUt1d0MscUJBQWtCaG5DLEVBRTNCLE9BQU92SixLQUFLb3dDLGFBRWhCdEYsRUFBU3pyQyxVQUFVWCxNQUFRLFdBQ3ZCLE9BQU9zQixLQUFLMEssT0FBT2hNLFNBRXZCb3NDLEVBQVN6ckMsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNuQyxPQUFRQSxhQUFpQnVmLEdBQ3JCOXFDLEtBQUtoQixJQUFJc3JCLFFBQVFpQixFQUFNdnNCLE1BQ3ZCZ0IsS0FBS3NXLFFBQVFnVSxRQUFRaUIsRUFBTWpWLFVBQzNCdFcsS0FBS3dyQyxvQkFBc0JqZ0IsRUFBTWlnQixtQkFDakN4ckMsS0FBS3VyQyx3QkFBMEJoZ0IsRUFBTWdnQix1QkFDckN2ckMsS0FBSzBLLE9BQU80ZixRQUFRaUIsRUFBTTdnQixTQUVsQ29nQyxFQUFTenJDLFVBQVVtTSxTQUFXLFdBQzFCLE1BQVEsWUFBY3hMLEtBQUtoQixJQUFNLEtBQU9nQixLQUFLc1csUUFBVSxLQUFPdFcsS0FBSzBLLE9BQU9jLFdBQWEseUJBQ3pEeEwsS0FBS3dyQyxrQkFBb0IsK0JBQ3JCeHJDLEtBQUt1ckMsc0JBQXdCLE1BRW5FcHRDLE9BQU9DLGVBQWUwc0MsRUFBU3pyQyxVQUFXLG1CQUFvQixDQUMxRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLd3JDLG1CQUFxQnhyQyxLQUFLdXJDLHVCQUUxQ2x0QyxZQUFZLEVBQ1prWixjQUFjLElBTWxCdXpCLEVBQVN6ckMsVUFBVXN4QyxjQUFnQixTQUFVbGlCLEdBQ3pDNW9CLE9BQXNCMEQsSUFBZnZKLEtBQUtxd0MsTUFBcUIsdURBSWpDLElBSEEsSUFBSUssRUFBYTF3QyxLQUFLcXdDLE1BQU16RyxPQUN0QjVwQyxLQUFLcXdDLE1BQU16RyxPQUFPbmIsRUFBS1oscUJBQ3ZCdGtCLEVBQ0c5TCxFQUFJLEVBQUdBLEVBQUlneEIsRUFBS3B1QixTQUFVNUMsRUFBRyxDQUNsQyxJQUFLaXpDLElBQWVBLEVBQVdHLFdBQWFILEVBQVdHLFNBQVNqSCxPQUM1RCxPQUVKOEcsRUFBYUEsRUFBV0csU0FBU2pILE9BQU9uYixFQUFLbndCLElBQUliLElBRXJELE9BQU9pekMsR0FFWDVGLEVBQVNnRyxlQUFpQixTQUFVMUcsRUFBTzhGLEVBQUlDLEdBQzNDLElBQUlZLEVBQUtiLEVBQUc5RixNQUFNQSxHQUNkNEcsRUFBS2IsRUFBRy9GLE1BQU1BLEdBQ2xCLE9BQVcsT0FBUDJHLEdBQXNCLE9BQVBDLEVBQ1JELEVBQUcza0IsVUFBVTRrQixHQUdibnNCLEVBQUssMkRBR2JpbUIsRUExR2tCLENBMkczQmtGLElBTUU5QyxHQUE0QixTQUFVL2lDLEdBRXRDLFNBQVMraUMsRUFBV2x1QyxFQUFLc1gsRUFBU2hDLEdBQzlCLElBQUk1SyxFQUFRUyxFQUFPdk0sS0FBS29DLEtBQU1oQixFQUFLc1gsSUFBWXRXLEtBRS9DLE9BREEwSixFQUFNNmhDLHlCQUEyQmozQixJQUFXQSxFQUFRaTNCLHVCQUM3QzdoQyxFQWtCWCxPQXRCQWxFLEVBQU0xRixVQUFVb3RDLEVBQVkvaUMsR0FNNUIraUMsRUFBVzd0QyxVQUFVbU0sU0FBVyxXQUM1QixNQUFPLGNBQWdCeEwsS0FBS2hCLElBQU0sS0FBT2dCLEtBQUtzVyxRQUFVLEtBRTVEblksT0FBT0MsZUFBZTh1QyxFQUFXN3RDLFVBQVcsbUJBQW9CLENBQzVEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUt1ckMsdUJBRWhCbHRDLFlBQVksRUFDWmtaLGNBQWMsSUFFbEIyMUIsRUFBVzd0QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3JDLE9BQVFBLGFBQWlCMmhCLEdBQ3JCM2hCLEVBQU1nZ0Isd0JBQTBCdnJDLEtBQUt1ckMsdUJBQ3JDaGdCLEVBQU1qVixRQUFRZ1UsUUFBUXRxQixLQUFLc1csVUFDM0JpVixFQUFNdnNCLElBQUlzckIsUUFBUXRxQixLQUFLaEIsTUFFeEJrdUMsRUF2Qm9CLENBd0I3QjhDLElBS0VuRSxHQUFpQyxTQUFVMWhDLEdBRTNDLFNBQVMwaEMsSUFDTCxPQUFrQixPQUFYMWhDLEdBQW1CQSxFQUFPN0osTUFBTU4sS0FBTUksWUFBY0osS0FpQi9ELE9BbkJBd0YsRUFBTTFGLFVBQVUrckMsRUFBaUIxaEMsR0FJakMwaEMsRUFBZ0J4c0MsVUFBVW1NLFNBQVcsV0FDakMsTUFBTyxtQkFBcUJ4TCxLQUFLaEIsSUFBTSxLQUFPZ0IsS0FBS3NXLFFBQVUsS0FFakVuWSxPQUFPQyxlQUFleXRDLEVBQWdCeHNDLFVBQVcsbUJBQW9CLENBQ2pFZixJQUFLLFdBQ0QsT0FBTyxHQUVYRCxZQUFZLEVBQ1prWixjQUFjLElBRWxCczBCLEVBQWdCeHNDLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDMUMsT0FBUUEsYUFBaUJzZ0IsR0FDckJ0Z0IsRUFBTWpWLFFBQVFnVSxRQUFRdHFCLEtBQUtzVyxVQUMzQmlWLEVBQU12c0IsSUFBSXNyQixRQUFRdHFCLEtBQUtoQixNQUV4QjZzQyxFQXBCeUIsQ0FxQmxDbUUsSUF3QkVpQixHQUEyQixXQUMzQixTQUFTQSxFQUFVQyxHQUNmbHhDLEtBQUtreEMsU0FBV0EsRUFPaEJseEMsS0FBS214QyxNQUFRLEdBcUVqQixPQWxFQUYsRUFBVTV4QyxVQUFVZixJQUFNLFNBQVVVLEdBQ2hDLElBQUlraEIsRUFBS2xnQixLQUFLa3hDLFNBQVNseUMsR0FDbkJveUMsRUFBVXB4QyxLQUFLbXhDLE1BQU1qeEIsR0FDekIsUUFBZ0IzVyxJQUFaNm5DLEVBR0osSUFBSyxJQUFJem1DLEVBQUssRUFBRzBtQyxFQUFZRCxFQUFTem1DLEVBQUswbUMsRUFBVWh4QyxPQUFRc0ssSUFBTSxDQUMvRCxJQUFJTSxFQUFLb21DLEVBQVUxbUMsR0FBSzJtQyxFQUFXcm1DLEVBQUcsR0FBSXZNLEVBQVF1TSxFQUFHLEdBQ3JELEdBQUlxbUMsRUFBU2huQixRQUFRdHJCLEdBQ2pCLE9BQU9OLElBS25CdXlDLEVBQVU1eEMsVUFBVTJVLElBQU0sU0FBVWhWLEdBQ2hDLFlBQXlCdUssSUFBbEJ2SixLQUFLMUIsSUFBSVUsSUFHcEJpeUMsRUFBVTV4QyxVQUFVNlUsSUFBTSxTQUFVbFYsRUFBS04sR0FDckMsSUFBSXdoQixFQUFLbGdCLEtBQUtreEMsU0FBU2x5QyxHQUNuQm95QyxFQUFVcHhDLEtBQUtteEMsTUFBTWp4QixHQUN6QixRQUFnQjNXLElBQVo2bkMsRUFBSixDQUlBLElBQUssSUFBSTN6QyxFQUFJLEVBQUdBLEVBQUkyekMsRUFBUS93QyxPQUFRNUMsSUFDaEMsR0FBSTJ6QyxFQUFRM3pDLEdBQUcsR0FBRzZzQixRQUFRdHJCLEdBRXRCLFlBREFveUMsRUFBUTN6QyxHQUFLLENBQUN1QixFQUFLTixJQUkzQjB5QyxFQUFRM3RDLEtBQUssQ0FBQ3pFLEVBQUtOLFNBVGZzQixLQUFLbXhDLE1BQU1qeEIsR0FBTSxDQUFDLENBQUNsaEIsRUFBS04sS0FjaEN1eUMsRUFBVTV4QyxVQUFVNlYsT0FBUyxTQUFVbFcsR0FDbkMsSUFBSWtoQixFQUFLbGdCLEtBQUtreEMsU0FBU2x5QyxHQUNuQm95QyxFQUFVcHhDLEtBQUtteEMsTUFBTWp4QixHQUN6QixRQUFnQjNXLElBQVo2bkMsRUFDQSxPQUFPLEVBRVgsSUFBSyxJQUFJM3pDLEVBQUksRUFBR0EsRUFBSTJ6QyxFQUFRL3dDLE9BQVE1QyxJQUNoQyxHQUFJMnpDLEVBQVEzekMsR0FBRyxHQUFHNnNCLFFBQVF0ckIsR0FPdEIsT0FOdUIsSUFBbkJveUMsRUFBUS93QyxjQUNETCxLQUFLbXhDLE1BQU1qeEIsR0FHbEJreEIsRUFBUXp1QixPQUFPbGxCLEVBQUcsSUFFZixFQUdmLE9BQU8sR0FFWHd6QyxFQUFVNXhDLFVBQVVtUyxRQUFVLFNBQVU1QyxHQUNwQzRDLEVBQVF4UixLQUFLbXhDLE9BQU8sU0FBVXJ1QyxFQUFHNk8sR0FDN0IsSUFBSyxJQUFJaEgsRUFBSyxFQUFHNG1DLEVBQVk1L0IsRUFBU2hILEVBQUs0bUMsRUFBVWx4QyxPQUFRc0ssSUFBTSxDQUMvRCxJQUFJTSxFQUFLc21DLEVBQVU1bUMsR0FBS3hHLEVBQUk4RyxFQUFHLEdBQUk1SCxFQUFJNEgsRUFBRyxHQUMxQzJELEVBQUd6SyxFQUFHZCxRQUlsQjR0QyxFQUFVNXhDLFVBQVUyUSxRQUFVLFdBQzFCLE9BQU9BLEVBQVFoUSxLQUFLbXhDLFFBRWpCRixFQTlFbUIsR0ErRzFCTyxHQUE0QyxXQUM1QyxTQUFTQSxJQUdMeHhDLEtBQUt5eEMsUUFBVSxJQUFJUixJQUFVLFNBQVVqeUMsR0FBTyxPQUFPQSxFQUFJd00sY0FDekR4TCxLQUFLMHhDLGdCQUFpQixFQXlGMUIsT0F2RkF2ekMsT0FBT0MsZUFBZW96QyxFQUEyQm55QyxVQUFXLFdBQVksQ0FDcEVmLElBQUssV0FFRCxPQURBdUgsT0FBMEIwRCxJQUFuQnZKLEtBQUsyeEMsVUFBeUIscUdBQzlCM3hDLEtBQUsyeEMsV0FFaEJ6OUIsSUFBSyxTQUFVeFYsR0FJWG1ILE9BQTBCMEQsSUFBbkJ2SixLQUFLMnhDLFdBQTJCM3hDLEtBQUsyeEMsVUFBVXJuQixRQUFRNXJCLEdBQVEsNEVBQ3RFc0IsS0FBSzJ4QyxVQUFZanpDLEdBRXJCTCxZQUFZLEVBQ1prWixjQUFjLElBUWxCaTZCLEVBQTJCbnlDLFVBQVV1eUMsU0FBVyxTQUFVQyxFQUFlQyxHQUNyRTl4QyxLQUFLK3hDLG1CQUNML3hDLEtBQUs4eEMsU0FBV0EsRUFDaEI5eEMsS0FBS3l4QyxRQUFRdjlCLElBQUkyOUIsRUFBYzd5QyxJQUFLNnlDLElBUXhDTCxFQUEyQm55QyxVQUFVMnlDLFlBQWMsU0FBVWh6QyxFQUFLOHlDLEdBQzlEOXhDLEtBQUsreEMsbUJBQ0RELElBQ0E5eEMsS0FBSzh4QyxTQUFXQSxHQUVwQjl4QyxLQUFLeXhDLFFBQVF2OUIsSUFBSWxWLEVBQUssT0FhMUJ3eUMsRUFBMkJueUMsVUFBVTR5QyxTQUFXLFNBQVU5MEIsRUFBYTRtQixHQUNuRS9qQyxLQUFLK3hDLG1CQUNMLElBQUlHLEVBQWdCbHlDLEtBQUt5eEMsUUFBUW56QyxJQUFJeWxDLEdBQ3JDLFlBQXNCeDZCLElBQWxCMm9DLEVBQ08zWCxHQUFtQnY0QixRQUFRa3dDLEdBRzNCbHlDLEtBQUtteUMsYUFBYWgxQixFQUFhNG1CLElBYzlDeU4sRUFBMkJueUMsVUFBVSt5QyxXQUFhLFNBQVVqMUIsRUFBYW1uQixHQUNyRSxPQUFPdGtDLEtBQUtxeUMsZ0JBQWdCbDFCLEVBQWFtbkIsSUFNN0NrTixFQUEyQm55QyxVQUFVaUIsTUFBUSxTQUFVNmMsR0FHbkQsT0FGQW5kLEtBQUsreEMsbUJBQ0wveEMsS0FBSzB4QyxnQkFBaUIsRUFDZjF4QyxLQUFLc3lDLGFBQWFuMUIsSUFHN0JxMEIsRUFBMkJueUMsVUFBVTB5QyxpQkFBbUIsV0FDcERsc0MsR0FBUTdGLEtBQUsweEMsZUFBZ0IsdUNBRTFCRixFQTlGb0MsR0FpSDNDZSxHQUE4QyxXQUs5QyxTQUFTQSxFQUE2QjFSLEVBQVlDLEdBQzlDOWdDLEtBQUs2Z0MsV0FBYUEsRUFDbEI3Z0MsS0FBSzhnQyxhQUFlQSxFQW9XeEIsT0E1VkF5UixFQUE2Qmx6QyxVQUFVdXlDLFNBQVcsU0FBVXowQixFQUFhbmUsRUFBS3N0QyxHQUUxRSxPQURvQmtHLEdBQXFCcjFCLEdBQ3BCK2hCLElBQUl1VCxHQUFNenpDLEdBQU1zdEMsSUFRekNpRyxFQUE2Qmx6QyxVQUFVMnlDLFlBQWMsU0FBVTcwQixFQUFhNG1CLEdBQ3hFLElBQUl0bkIsRUFBUSsxQixHQUFxQnIxQixHQUM3Qm5lLEVBQU15ekMsR0FBTTFPLEdBQ2hCLE9BQU90bkIsRUFBTXZILE9BQU9sVyxJQVF4QnV6QyxFQUE2Qmx6QyxVQUFVcXpDLGVBQWlCLFNBQVV2MUIsRUFBYXcxQixHQUMzRSxJQUFJanBDLEVBQVExSixLQUNaLE9BQU9BLEtBQUs0eUMsWUFBWXoxQixHQUFhL2EsTUFBSyxTQUFVWCxHQUVoRCxPQURBQSxFQUFTb3hDLFVBQVlGLEVBQ2RqcEMsRUFBTW9wQyxZQUFZMzFCLEVBQWExYixPQUc5Qzh3QyxFQUE2Qmx6QyxVQUFVNHlDLFNBQVcsU0FBVTkwQixFQUFhNG1CLEdBQ3JFLElBQUlyNkIsRUFBUTFKLEtBQ1osT0FBT3d5QyxHQUFxQnIxQixHQUN2QjdlLElBQUltMEMsR0FBTTFPLElBQ1YzaEMsTUFBSyxTQUFVMndDLEdBQ2hCLE9BQU9ycEMsRUFBTXNwQyxvQkFBb0JELE9BU3pDUixFQUE2Qmx6QyxVQUFVNHpDLGNBQWdCLFNBQVU5MUIsRUFBYTRtQixHQUMxRSxJQUFJcjZCLEVBQVExSixLQUNaLE9BQU93eUMsR0FBcUJyMUIsR0FDdkI3ZSxJQUFJbTBDLEdBQU0xTyxJQUNWM2hDLE1BQUssU0FBVTJ3QyxHQUNoQixJQUFJekcsRUFBTTVpQyxFQUFNc3BDLG9CQUFvQkQsR0FDcEMsT0FBT3pHLEVBQ0QsQ0FDRXVGLGNBQWV2RixFQUNmM2UsS0FBTXVsQixHQUFlSCxJQUV2QixTQUdkUixFQUE2Qmx6QyxVQUFVK3lDLFdBQWEsU0FBVWoxQixFQUFhbW5CLEdBQ3ZFLElBQUk1NkIsRUFBUTFKLEtBQ1JxcEIsRUFBVStPLEtBQ2QsT0FBT3A0QixLQUFLbXpDLGVBQWVoMkIsRUFBYW1uQixHQUFjLFNBQVV0bEMsRUFBSyt6QyxHQUNqRSxJQUFJekcsRUFBTTVpQyxFQUFNc3BDLG9CQUFvQkQsR0FDcEMxcEIsRUFBVUEsRUFBUXJJLE9BQU9oaUIsRUFBS3N0QyxNQUMvQmxxQyxNQUFLLFdBQWMsT0FBT2luQixNQVVqQ2twQixFQUE2Qmx6QyxVQUFVK3pDLGdCQUFrQixTQUFVajJCLEVBQWFtbkIsR0FDNUUsSUFBSTU2QixFQUFRMUosS0FDUnFwQixFQUFVK08sS0FDVmliLEVBQVUsSUFBSWpmLEdBQVVoRixHQUFZaEMsWUFDeEMsT0FBT3B0QixLQUFLbXpDLGVBQWVoMkIsRUFBYW1uQixHQUFjLFNBQVV0bEMsRUFBSyt6QyxHQUNqRSxJQUFJekcsRUFBTTVpQyxFQUFNc3BDLG9CQUFvQkQsR0FDaEN6RyxHQUNBampCLEVBQVVBLEVBQVFySSxPQUFPaGlCLEVBQUtzdEMsR0FDOUIrRyxFQUFVQSxFQUFRcnlCLE9BQU9oaUIsRUFBS2swQyxHQUFlSCxNQUc3QzFwQixFQUFVQSxFQUFRckksT0FBT2hpQixFQUFLLE1BQzlCcTBDLEVBQVVBLEVBQVFyeUIsT0FBT2hpQixFQUFLLE9BRW5Db0QsTUFBSyxXQUNKLE1BQU8sQ0FBRWt4QyxlQUFnQmpxQixFQUFTZ3FCLFFBQVNBLE9BR25EZCxFQUE2Qmx6QyxVQUFVOHpDLGVBQWlCLFNBQVVoMkIsRUFBYW1uQixFQUFjejZCLEdBQ3pGLEdBQUl5NkIsRUFBYXQwQixVQUNiLE9BQU91cUIsR0FBbUJ2NEIsVUFFOUIsSUFBSXUxQixFQUFRZ0ssWUFBWUMsTUFBTThDLEVBQWFuTixRQUFRMUksS0FBS3hULFVBQVdxcEIsRUFBYWxOLE9BQU8zSSxLQUFLeFQsV0FDeEZzNEIsRUFBVWpQLEVBQWFwUCxjQUN2QndKLEVBQVU2VSxFQUFRN2QsVUFDdEIsT0FBTzhjLEdBQXFCcjFCLEdBQ3ZCc2lCLFFBQVEsQ0FBRWxJLE1BQU9BLElBQVMsU0FBVWljLEVBQWlCVCxFQUFhdlQsR0FHbkUsSUFGQSxJQUFJaVUsRUFBZXJrQixHQUFZTSxhQUFhOGpCLEdBRXJDOVUsR0FBV3RQLEdBQVloQyxXQUFXc1IsRUFBUytVLEdBQWdCLEdBQzlENXBDLEVBQVM2MEIsRUFBUyxNQUNsQkEsRUFBVTZVLEVBQVE3ZCxVQUVsQmdKLEdBQVdBLEVBQVFwVSxRQUFRbXBCLEtBRTNCNXBDLEVBQVM2MEIsRUFBU3FVLEdBQ2xCclUsRUFBVTZVLEVBQVE1ZCxVQUFZNGQsRUFBUTdkLFVBQVksTUFHbERnSixFQUNBYyxFQUFRYixLQUFLRCxFQUFRalEsS0FBS3hULFdBRzFCdWtCLEVBQVFqOUIsVUFHWEgsTUFBSyxXQUdOLEtBQU9zOEIsR0FDSDcwQixFQUFTNjBCLEVBQVMsTUFDbEJBLEVBQVU2VSxFQUFRNWQsVUFBWTRkLEVBQVE3ZCxVQUFZLFNBSTlENmMsRUFBNkJsekMsVUFBVXEwQywwQkFBNEIsU0FBVXYyQixFQUFhZSxFQUFPeTFCLEdBQzdGLElBQUlqcUMsRUFBUTFKLEtBQ1o2RixHQUFRcVksRUFBTTBtQix5QkFBMEIsbUVBQ3hDLElBQUl2YixFQUFVaVAsS0FDVnNiLEVBQThCMTFCLEVBQU11USxLQUFLcHVCLE9BQVMsRUFDbER3ekMsRUFBbUIsR0FDdkIsR0FBSUYsRUFBY3JwQixRQUFRc0osR0FBZ0JLLEtBQU0sQ0FHNUMsSUFBSXNCLEVBQVdyWCxFQUFNdVEsS0FBS3hULFVBQzFCNDRCLEVBQWlCdGMsTUFBUWdLLFlBQVlpQyxXQUFXak8sT0FFL0MsQ0FJRCxJQUFJdWUsRUFBZ0I1MUIsRUFBTXVRLEtBQUt4VCxVQUMzQjg0QixFQUFjL3pDLEtBQUs2Z0MsV0FBV21ULGlCQUFpQkwsR0FDbkRFLEVBQWlCdGMsTUFBUWdLLFlBQVlpQyxXQUFXLENBQUNzUSxFQUFlQyxJQUNwRCxHQUNaRixFQUFpQjEzQixNQUFRODNCLEdBQWlCQyx3QkFFOUMsT0FBTzFCLEdBQXFCcjFCLEdBQ3ZCc2lCLFFBQVFvVSxHQUFrQixTQUFVNzBDLEVBQUsrekMsRUFBYXZULEdBTXZELEdBQUl4Z0MsRUFBSXFCLFNBQVd1ekMsRUFBbkIsQ0FHQSxJQUFJdmEsRUFBVzN2QixFQUFNbTNCLFdBQVdzVCxxQkFBcUJwQixHQUNoRDcwQixFQUFNdVEsS0FBS1YsV0FBV3NMLEVBQVNyNkIsSUFBSXl2QixNQUcvQjRLLGFBQW9CeVIsSUFBWTVzQixFQUFNa3pCLFFBQVEvWCxLQUNuRGhRLEVBQVVBLEVBQVFySSxPQUFPcVksRUFBU3I2QixJQUFLcTZCLElBSHZDbUcsRUFBUWo5QixXQU1YSCxNQUFLLFdBQWMsT0FBT2luQixNQU9uQ2twQixFQUE2Qmx6QyxVQUFVKzBDLHNCQUF3QixTQUFVajNCLEVBQWF3MkIsR0FDbEYsSUFBSWpxQyxFQUFRMUosS0FDUnEwQyxFQUFjbGMsS0FDZG1jLEVBQWV0MEMsS0FBSzZnQyxXQUFXbVQsaUJBQWlCTCxHQUNoRFksRUFBaUIvQixHQUFxQnIxQixHQUN0Q29hLEVBQVFnSyxZQUFZaUMsV0FBVzhRLEdBQWMsR0FDakQsT0FBT0MsRUFDRjlVLFFBQVEsQ0FBRXRqQixNQUFPODNCLEdBQWlCTyxjQUFlamQsTUFBT0EsSUFBUyxTQUFVejBCLEVBQUdpd0MsR0FHL0UsSUFBSXpHLEVBQU01aUMsRUFBTW0zQixXQUFXc1QscUJBQXFCcEIsR0FDaERzQixFQUFjQSxFQUFZcnpCLE9BQU9zckIsRUFBSXR0QyxJQUFLc3RDLEdBQzFDZ0ksRUFBZXZCLEVBQVlqQixZQUUxQjF2QyxNQUFLLFdBQ04sTUFBTyxDQUNIaXlDLFlBQWFBLEVBQ2J2QyxTQUFVcG9DLEVBQU1tM0IsV0FBVzRULG1CQUFtQkgsUUFTMUQvQixFQUE2Qmx6QyxVQUFVcTFDLHNCQUF3QixTQUFVdjNCLEdBQ3JFLElBSUl3M0IsRUFKQWpyQyxFQUFRMUosS0FDUnUwQyxFQUFpQi9CLEdBQXFCcjFCLEdBRXRDMjBCLEVBQVdsZSxHQUFnQkssSUFFL0IsT0FBT3NnQixFQUNGOVUsUUFBUSxDQUFFdGpCLE1BQU84M0IsR0FBaUJPLGNBQWVuVSxTQUFTLElBQVEsU0FBVXJoQyxFQUFLK3pDLEVBQWF2VCxHQUMvRm1WLEVBQWFqckMsRUFBTW0zQixXQUFXc1QscUJBQXFCcEIsR0FDL0NBLEVBQVlqQixXQUNaQSxFQUFXcG9DLEVBQU1tM0IsV0FBVzRULG1CQUFtQjFCLEVBQVlqQixXQUUvRHRTLEVBQVFqOUIsVUFFUEgsTUFBSyxXQUNOLE1BQU8sQ0FBRXV5QyxXQUFZQSxFQUFZN0MsU0FBVUEsT0FHbkRTLEVBQTZCbHpDLFVBQVV1MUMsZ0JBQWtCLFNBQVV0Z0MsR0FDL0QsT0FBTyxJQUFJaStCLEVBQTZCZiwyQkFBMkJ4eEMsT0FBUXNVLEdBQVdBLEVBQVF1Z0MsZ0JBRWxHdEMsRUFBNkJsekMsVUFBVXkxQyxRQUFVLFNBQVU3WCxHQUN2RCxPQUFPajlCLEtBQUs0eUMsWUFBWTNWLEdBQUs3NkIsTUFBSyxTQUFVWCxHQUFZLE9BQU9BLEVBQVNveEMsYUFFNUVOLEVBQTZCbHpDLFVBQVV1ekMsWUFBYyxTQUFVM1YsR0FDM0QsT0FBTzhYLEdBQW9COVgsR0FDdEIzK0IsSUFBSTAyQyxHQUF1QmgyQyxLQUMzQm9ELE1BQUssU0FBVVgsR0FFaEIsT0FEQW9FLElBQVNwRSxFQUFVLG1DQUNaQSxNQUdmOHdDLEVBQTZCbHpDLFVBQVV5ekMsWUFBYyxTQUFVN1YsRUFBS3g3QixHQUNoRSxPQUFPc3pDLEdBQW9COVgsR0FBS2lDLElBQUk4VixHQUF1QmgyQyxJQUFLeUMsSUFNcEU4d0MsRUFBNkJsekMsVUFBVTJ6QyxvQkFBc0IsU0FBVUQsR0FDbkUsR0FBSUEsRUFBYSxDQUNiLElBQUl6RyxFQUFNdHNDLEtBQUs2Z0MsV0FBV3NULHFCQUFxQnBCLEdBQy9DLE9BQUl6RyxhQUFlWSxJQUNmWixFQUFJaDJCLFFBQVFnVSxRQUFRc0osR0FBZ0JJLGlCQUc3QixLQUVKc1ksRUFFWCxPQUFPLE1BU1hpRyxFQUE2QmYsMkJBQTRDLFNBQVVybkMsR0FPL0UsU0FBUzhxQyxFQUFRQyxFQUFlTCxHQUM1QixJQUFJbnJDLEVBQVFTLEVBQU92TSxLQUFLb0MsT0FBU0EsS0FLakMsT0FKQTBKLEVBQU13ckMsY0FBZ0JBLEVBQ3RCeHJDLEVBQU1tckMsY0FBZ0JBLEVBRXRCbnJDLEVBQU15ckMsY0FBZ0IsSUFBSWxFLElBQVUsU0FBVWp5QyxHQUFPLE9BQU9BLEVBQUl3TSxjQUN6RDlCLEVBMEVYLE9BdEZBbEUsRUFBTTFGLFVBQVVtMUMsRUFBUzlxQyxHQWN6QjhxQyxFQUFRNTFDLFVBQVVpekMsYUFBZSxTQUFVbjFCLEdBQ3ZDLElBQUl6VCxFQUFRMUosS0FDUjI3QixFQUFXLEdBQ1hnWCxFQUFZLEVBQ1poUSxFQUFvQixJQUFJNUwsSUFBVSxTQUFVcjVCLEVBQUdhLEdBQy9DLE9BQU8yckIsRUFBb0J4c0IsRUFBRTZ3QixrQkFBbUJod0IsRUFBRWd3QixzQkFnQ3RELE9BOUJBdnVCLEtBQUt5eEMsUUFBUWpnQyxTQUFRLFNBQVV4UyxFQUFLNnlDLEdBQ2hDLElBQUl1RCxFQUFlMXJDLEVBQU15ckMsY0FBYzcyQyxJQUFJVSxHQUUzQyxHQURBNkcsT0FBd0IwRCxJQUFqQjZyQyxFQUE0QixrREFBb0RwMkMsRUFBTSxLQUN6RjZ5QyxFQUFlLENBQ2Zoc0MsR0FBUTZELEVBQU1vb0MsU0FBU3huQixRQUFRc0osR0FBZ0JLLEtBQU0sa0RBQ3JELElBQUlxWSxFQUFNNWlDLEVBQU13ckMsY0FBY3JVLFdBQVd3VSxtQkFBbUJ4RCxFQUFlbm9DLEVBQU1vb0MsVUFDakZuUCxFQUFvQkEsRUFBa0IxTCxJQUFJajRCLEVBQUl5dkIsS0FBS2IsV0FDbkQsSUFBSUQsRUFBT3VsQixHQUFlNUcsR0FDMUJxRyxHQUFhaGxCLEVBQU95bkIsRUFDcEJ6WixFQUFTbDRCLEtBQUtpRyxFQUFNd3JDLGNBQWN0RCxTQUFTejBCLEVBQWFuZSxFQUFLc3RDLFNBSTdELEdBREFxRyxHQUFheUMsRUFDVDFyQyxFQUFNbXJDLGNBQWUsQ0FLckIsSUFBSVMsRUFBYTVyQyxFQUFNd3JDLGNBQWNyVSxXQUFXd1UsbUJBQW1CLElBQUluSSxHQUFXbHVDLEVBQUs0MEIsR0FBZ0JJLGlCQUFrQnRxQixFQUFNb29DLFVBQy9IblcsRUFBU2w0QixLQUFLaUcsRUFBTXdyQyxjQUFjdEQsU0FBU3owQixFQUFhbmUsRUFBS3MyQyxTQUc3RDNaLEVBQVNsNEIsS0FBS2lHLEVBQU13ckMsY0FBY2xELFlBQVk3MEIsRUFBYW5lLE9BSXZFMmpDLEVBQWtCbnhCLFNBQVEsU0FBVXd4QixHQUNoQ3JILEVBQVNsNEIsS0FBS2lHLEVBQU13ckMsY0FBY3BVLGFBQWFtQywyQkFBMkI5bEIsRUFBYTZsQixPQUUzRnJILEVBQVNsNEIsS0FBS3pELEtBQUtrMUMsY0FBY3hDLGVBQWV2MUIsRUFBYXcxQixJQUN0RHBZLEdBQW1CVyxRQUFRUyxJQUV0Q3NaLEVBQVE1MUMsVUFBVTh5QyxhQUFlLFNBQVVoMUIsRUFBYTRtQixHQUNwRCxJQUFJcjZCLEVBQVExSixLQUVaLE9BQU9BLEtBQUtrMUMsY0FDUGpDLGNBQWM5MUIsRUFBYTRtQixHQUMzQjNoQyxNQUFLLFNBQVVtekMsR0FDaEIsT0FBa0IsT0FBZEEsR0FDQTdyQyxFQUFNeXJDLGNBQWNqaEMsSUFBSTZ2QixFQUFhLEdBQzlCLE9BR1ByNkIsRUFBTXlyQyxjQUFjamhDLElBQUk2dkIsRUFBYXdSLEVBQVU1bkIsTUFDeEM0bkIsRUFBVTFELG1CQUk3Qm9ELEVBQVE1MUMsVUFBVWd6QyxnQkFBa0IsU0FBVWwxQixFQUFhbW5CLEdBQ3ZELElBQUk1NkIsRUFBUTFKLEtBR1osT0FBT0EsS0FBS2sxQyxjQUNQOUIsZ0JBQWdCajJCLEVBQWFtbkIsR0FDN0JsaUMsTUFBSyxTQUFVNkksR0FDaEIsSUFBSXFvQyxFQUFpQnJvQyxFQUFHcW9DLGVBT3hCLE9BUGtEcm9DLEVBQUdvb0MsUUFJN0M3aEMsU0FBUSxTQUFVdXlCLEVBQWFwVyxHQUNuQ2prQixFQUFNeXJDLGNBQWNqaEMsSUFBSTZ2QixFQUFhcFcsTUFFbEMybEIsTUFHUjJCLEVBdkY2RCxDQXdGdEV6RCxJQUNLZSxFQTNXc0MsR0E2V2pELFNBQVN3QyxHQUFvQjlYLEdBQ3pCLE9BQU9nSixHQUFxQmpKLFNBQVNDLEVBQUsrWCxHQUF1QnY0QixPQUtyRSxTQUFTKzFCLEdBQXFCdlYsR0FDMUIsT0FBT2dKLEdBQXFCakosU0FBU0MsRUFBS2dYLEdBQWlCeDNCLE9BRS9ELFNBQVNnMkIsR0FBTXJaLEdBQ1gsT0FBT0EsRUFBTzNLLEtBQUt4VCxVQUt2QixTQUFTaTRCLEdBQWU1RyxHQUNwQixJQUFJNXRDLEVBQ0osR0FBSTR0QyxFQUFJbHRCLFNBQ0oxZ0IsRUFBUTR0QyxFQUFJbHRCLGNBRVgsR0FBSWt0QixFQUFJa0osZ0JBQ1Q5MkMsRUFBUTR0QyxFQUFJa0osb0JBRVgsS0FBSWxKLEVBQUltSixXQUlULE1BQU01d0IsRUFBSyxnQ0FIWG5tQixFQUFRNHRDLEVBQUltSixXQUtoQixPQUFPL3BDLEtBQUtzRyxVQUFVdFQsR0FBTzJCOzs7Ozs7Ozs7Ozs7Ozs7O0dBc0JqQyxJQUFJcTFDLEdBQW9DLFdBQ3BDLFNBQVNBLElBQ0wxMUMsS0FBSzIxQyxzQkFBd0IsSUFBSUMsR0FTckMsT0FQQUYsRUFBbUJyMkMsVUFBVTRqQywyQkFBNkIsU0FBVTlsQixFQUFhMDRCLEdBRTdFLE9BREE3MUMsS0FBSzIxQyxzQkFBc0IxZSxJQUFJNGUsR0FDeEJ0YixHQUFtQnY0QixXQUU5QjB6QyxFQUFtQnIyQyxVQUFVeTJDLHFCQUF1QixTQUFVMzRCLEVBQWFvUyxHQUN2RSxPQUFPZ0wsR0FBbUJ2NEIsUUFBUWhDLEtBQUsyMUMsc0JBQXNCdkQsV0FBVzdpQixLQUVyRW1tQixFQVg0QixHQWtCbkNFLEdBQTZDLFdBQzdDLFNBQVNBLElBQ0w1MUMsS0FBS21jLE1BQVEsR0F3QmpCLE9BckJBeTVCLEVBQTRCdjJDLFVBQVU0M0IsSUFBTSxTQUFVNGUsR0FDbERod0MsRUFBT2d3QyxFQUFleDFDLE9BQVMsR0FBTSxFQUFHLCtCQUN4QyxJQUFJa3ZCLEVBQWVzbUIsRUFBZS9uQixjQUM5QmlvQixFQUFhRixFQUFlam9CLFVBQzVCb29CLEVBQWtCaDJDLEtBQUttYyxNQUFNb1QsSUFDN0IsSUFBSXdILEdBQVV6SSxHQUFhbEIsWUFDM0I2b0IsR0FBU0QsRUFBZ0JoaUMsSUFBSStoQyxHQUVqQyxPQURBLzFDLEtBQUttYyxNQUFNb1QsR0FBZ0J5bUIsRUFBZ0IvZSxJQUFJOGUsR0FDeENFLEdBRVhMLEVBQTRCdjJDLFVBQVUyVSxJQUFNLFNBQVU2aEMsR0FDbEQsSUFBSXRtQixFQUFlc21CLEVBQWUvbkIsY0FDOUJpb0IsRUFBYUYsRUFBZWpvQixVQUM1Qm9vQixFQUFrQmgyQyxLQUFLbWMsTUFBTW9ULEdBQ2pDLE9BQU95bUIsR0FBbUJBLEVBQWdCaGlDLElBQUkraEMsSUFFbERILEVBQTRCdjJDLFVBQVUreUMsV0FBYSxTQUFVN2lCLEdBR3pELE9BRmtCdnZCLEtBQUttYyxNQUFNb1QsSUFDekIsSUFBSXdILEdBQVV6SSxHQUFhbEIsYUFDWm5TLFdBRWhCMjZCLEVBMUJxQyxHQThENUN2WixHQUFpQixFQUVqQjZaLEdBQWlDLFdBQ2pDLFNBQVNBLEVBQWdCclYsR0FDckI3Z0MsS0FBSzZnQyxXQUFhQSxFQThLdEIsT0FyS0FxVixFQUFnQjcyQyxVQUFVKzhCLGdCQUFrQixTQUFVbmYsRUFBSWdnQixFQUFLa1osRUFBYUMsR0FDeEUsSUFBSTFzQyxFQUFRMUosS0FDWjZGLEVBQU9zd0MsRUFBY0MsR0FDakJELEdBQWUsR0FDZkMsR0FBYS9aLEdBQWdCLG1DQUFxQzhaLEVBQWMscUJBQ3BGLElBQUlsUixFQUFzQixJQUFJN0csR0FBb0JuQixHQUM5Q2taLEVBQWMsR0FBS0MsR0FBYSxJQThNNUMsU0FBa0NuNUIsR0FDOUJBLEVBQUdZLGtCQUFrQnc0QixHQUFnQjU1QixPQTlNN0I2NUIsQ0FBeUJyNUIsR0FrVHJDLFNBQTZCQSxHQUN6QkEsRUFBR1ksa0JBQWtCOG5CLEdBQWdCbHBCLE1BQU8sQ0FDeENtcEIsUUFBU0QsR0FBZ0JDLFVBRUYzb0IsRUFBR1ksa0JBQWtCK2pCLEdBQWdCbmxCLE1BQU8sQ0FDbkVtcEIsUUFBU2hFLEdBQWdCZ0UsUUFDekIyUSxlQUFlLElBRUU5NEIsWUFBWW1rQixHQUFnQkMsbUJBQW9CRCxHQUFnQjRVLHFCQUFzQixDQUFFQyxRQUFRLElBQ3JIeDVCLEVBQUdZLGtCQUFrQmlsQixHQUFtQnJtQixPQTFUaENpNkIsQ0FBb0J6NUIsR0FDcEIwNUIsR0FBaUIxNUIsR0F3WDdCLFNBQW1DQSxHQUMvQkEsRUFBR1ksa0JBQWtCbzJCLEdBQWlCeDNCLE9BeFg5Qm02QixDQUEwQjM1QixJQUk5QixJQUFJMWQsRUFBSWc3QixHQUFtQnY0QixVQW9EM0IsT0FuREltMEMsRUFBYyxHQUFLQyxHQUFhLElBR1osSUFBaEJELEtBeXNCaEIsU0FBd0JsNUIsR0FDcEJBLEVBQUc0NUIsa0JBQWtCM04sR0FBaUJ6c0IsT0FDdENRLEVBQUc0NUIsa0JBQWtCaE8sR0FBU3BzQixPQUM5QlEsRUFBRzQ1QixrQkFBa0J0TyxHQUFlOXJCLE9BM3NCeEJxNkIsQ0FBZTc1QixHQUNmMDVCLEdBQWlCMTVCLElBRXJCMWQsRUFBSUEsRUFBRTZDLE1BQUssV0FBYyxPQW90QnJDLFNBQXFDNjZCLEdBQ2pDLElBQUk4WixFQUFjOVosRUFBSXhnQixNQUFNOHJCLEdBQWU5ckIsT0FDdkNoYixFQUFXLElBQUk4bUMsR0FDRSxFQUNTLEVBQUczVSxHQUFnQkssSUFBSUUsY0FDcEMsR0FDakIsT0FBTzRpQixFQUFZN1gsSUFBSXFKLEdBQWV2cEMsSUFBS3lDLEdBMXRCSHUxQyxDQUE0Qi9SLE9BRTVEa1IsRUFBYyxHQUFLQyxHQUFhLElBQ1osSUFBaEJELElBT0E1MkMsRUFBSUEsRUFBRTZDLE1BQUssV0FDUCxPQXVTcEIsU0FBa0Q2YSxFQUFJZ2dCLEdBRWxELE9BRHVCQSxFQUFJeGdCLE1BQU1tbEIsR0FBZ0JubEIsT0FDekIyaUIsVUFBVWg5QixNQUFLLFNBQVU2MEMsR0FDN0NoNkIsRUFBRzQ1QixrQkFBa0JqVixHQUFnQm5sQixPQUNoQlEsRUFBR1ksa0JBQWtCK2pCLEdBQWdCbmxCLE1BQU8sQ0FDN0RtcEIsUUFBU2hFLEdBQWdCZ0UsUUFDekIyUSxlQUFlLElBRUo5NEIsWUFBWW1rQixHQUFnQkMsbUJBQW9CRCxHQUFnQjRVLHFCQUFzQixDQUFFQyxRQUFRLElBQy9HLElBQUlTLEVBQW1CamEsRUFBSXhnQixNQUFNbWxCLEdBQWdCbmxCLE9BQzdDMDZCLEVBQVdGLEVBQWtCaG1DLEtBQUksU0FBVXVvQixHQUMzQyxPQUFPMGQsRUFBaUJoWSxJQUFJMUYsTUFFaEMsT0FBT2UsR0FBbUJXLFFBQVFpYyxNQXBUZkMsQ0FBeUNuNkIsRUFBSWdvQixPQUc1RDFsQyxFQUFJQSxFQUFFNkMsTUFBSyxZQW92QnZCLFNBQW1DNmEsR0FDL0JBLEVBQUdZLGtCQUFrQnc1QixHQUFpQjU2QixNQUFPLENBQ3pDbXBCLFFBQVN5UixHQUFpQnpSLFVBcnZCbEIwUixDQUEwQnI2QixPQUc5Qms1QixFQUFjLEdBQUtDLEdBQWEsSUFDaEM3MkMsRUFBSUEsRUFBRTZDLE1BQUssV0FBYyxPQUFPc0gsRUFBTTZ0Qyw0QkFBNEJ0UyxPQUVsRWtSLEVBQWMsR0FBS0MsR0FBYSxJQUNoQzcyQyxFQUFJQSxFQUFFNkMsTUFBSyxXQUVQLE9BMmNoQixTQUFtQzZhLEdBQy9CQSxFQUFHWSxrQkFBa0JtM0IsR0FBdUJ2NEIsT0E3Y2hDKzZCLENBQTBCdjZCLEdBQ25CdlQsRUFBTSt0QyxrQkFBa0J4UyxPQUduQ2tSLEVBQWMsR0FBS0MsR0FBYSxJQUNoQzcyQyxFQUFJQSxFQUFFNkMsTUFBSyxXQUFjLE9BQU9zSCxFQUFNZ3VDLHNCQUFzQnpTLE9BRTVEa1IsRUFBYyxHQUFLQyxHQUFhLElBQ2hDNzJDLEVBQUlBLEVBQUU2QyxNQUFLLFdBQ1AsT0FBT3NILEVBQU1pdUMsNEJBQTRCMTZCLEVBQUlnb0IsT0FHakRrUixFQUFjLEdBQUtDLEdBQWEsSUFDaEM3MkMsRUFBSUEsRUFBRTZDLE1BQUssWUFzcUJ2QixTQUF3QzZhLEdBQ2hDQSxFQUFHOGhCLGlCQUFpQnR2QixTQUFTLDBCQUM3QndOLEVBQUc0NUIsa0JBQWtCLHlCQXBxQmJlLENBQStCMzZCLEdBd3JCL0MsU0FBMkNnZ0IsR0FDdkMsSUFBSTRhLEVBQXNCNWEsRUFBSXRmLFlBQVlzMkIsR0FBaUJ4M0IsT0FDM0RvN0IsRUFBb0JwNkIsWUFBWXcyQixHQUFpQk8sY0FBZVAsR0FBaUI2RCxrQkFBbUIsQ0FBRXJCLFFBQVEsSUFDOUdvQixFQUFvQnA2QixZQUFZdzJCLEdBQWlCQyx3QkFBeUJELEdBQWlCOEQsNEJBQTZCLENBQUV0QixRQUFRLElBMXJCdEh1QixDQUFrQy9hLE9BR25DMTlCLEdBRVgyMkMsRUFBZ0I3MkMsVUFBVW80QyxrQkFBb0IsU0FBVXhhLEdBQ3BELElBQUlnYixFQUFZLEVBQ2hCLE9BQU9oYixFQUNGeGdCLE1BQU13M0IsR0FBaUJ4M0IsT0FDdkJnakIsU0FBUSxTQUFVMzhCLEVBQUd3cEMsR0FDdEIyTCxHQUFhL0UsR0FBZTVHLE1BRTNCbHFDLE1BQUssV0FDTixJQUFJWCxFQUFXLElBQUl1ekMsR0FBdUJpRCxHQUMxQyxPQUFPaGIsRUFDRnhnQixNQUFNdTRCLEdBQXVCdjRCLE9BQzdCeWlCLElBQUk4VixHQUF1QmgyQyxJQUFLeUMsT0FHN0N5MEMsRUFBZ0I3MkMsVUFBVWs0Qyw0QkFBOEIsU0FBVXRhLEdBQzlELElBQUl2ekIsRUFBUTFKLEtBQ1JrNEMsRUFBY2piLEVBQUl4Z0IsTUFBTWtwQixHQUFnQmxwQixPQUN4Q2tsQixFQUFpQjFFLEVBQUl4Z0IsTUFBTW1sQixHQUFnQm5sQixPQUMvQyxPQUFPeTdCLEVBQVk5WSxVQUFVaDlCLE1BQUssU0FBVSsxQyxHQUN4QyxPQUFPNWQsR0FBbUIvb0IsUUFBUTJtQyxHQUFRLFNBQVVDLEdBQ2hELElBQUk3Z0IsRUFBUWdLLFlBQVlDLE1BQU0sQ0FBQzRXLEVBQU14WCxRQWw2SC9CLEdBazZIeUQsQ0FBQ3dYLEVBQU14WCxPQUFRd1gsRUFBTUMsMEJBQ3BGLE9BQU8xVyxFQUNGdkMsUUFBUXdDLEdBQWdCQyxtQkFBb0J0SyxHQUM1Q24xQixNQUFLLFNBQVV5aEMsR0FDaEIsT0FBT3RKLEdBQW1CL29CLFFBQVFxeUIsR0FBVyxTQUFVcEIsR0FDbkQ1OEIsRUFBTzQ4QixFQUFRN0IsU0FBV3dYLEVBQU14WCxPQUFRLHdCQUEwQjZCLEVBQVExSixRQUFVLHlCQUNwRixJQUFJbUIsRUFBUXh3QixFQUFNbTNCLFdBQVd1QyxvQkFBb0JYLEdBQ2pELE9BQU91QyxHQUFvQi9ILEVBQUttYixFQUFNeFgsT0FBUTFHLEdBQU85M0IsTUFBSyw0QkFVOUU4ekMsRUFBZ0I3MkMsVUFBVXE0QyxzQkFBd0IsU0FBVXphLEdBQ3hELElBQUlnTSxFQUFzQmhNLEVBQUl4Z0IsTUFBTXlzQixHQUFpQnpzQixPQUNqRDgzQixFQUFpQnRYLEVBQUl4Z0IsTUFBTXczQixHQUFpQngzQixPQUNoRCxPQUFPOHFCLEdBQStCdEssR0FBSzc2QixNQUFLLFNBQVVrMkMsR0FDdEQsSUFHSTNjLEVBQVcsR0FDZixPQUFPNFksRUFDRjlVLFNBQVEsU0FBVXpnQyxFQUFLc3RDLEdBQ3hCLElBQUk3ZCxFQUFPLElBQUlILEdBQWF0dkIsR0FDeEJ1NUMsRUFtRHBCLFNBQXFCOXBCLEdBQ2pCLE1BQU8sQ0FBQyxFQUFHbUUsR0FBT25FLElBcERlK3BCLENBQVkvcEIsR0FDakNrTixFQUFTbDRCLEtBQUt3bEMsRUFBb0IzcUMsSUFBSWk2QyxHQUFnQm4yQyxNQUFLLFNBQVVxMkMsR0FDakUsT0FBS0EsRUFJTWxlLEdBQW1CdjRCLFVBYmYsU0FBVXlzQixHQUM3QixPQUFPd2EsRUFBb0IvSixJQUFJLElBQUlnSyxHQUFpQixFQUFHdFcsR0FBT25FLEdBQU82cEIsSUFTdERJLENBQWlCanFCLFVBTy9CcnNCLE1BQUssV0FBYyxPQUFPbTRCLEdBQW1CVyxRQUFRUyxVQUdsRXVhLEVBQWdCNzJDLFVBQVVzNEMsNEJBQThCLFNBQVUxNkIsRUFBSWdnQixHQUVsRWhnQixFQUFHWSxrQkFBa0I4NkIsR0FBbUJsOEIsTUFBTyxDQUMzQ21wQixRQUFTK1MsR0FBbUIvUyxVQUVoQyxJQUFJZ1QsRUFBeUIzYixFQUFJeGdCLE1BQU1rOEIsR0FBbUJsOEIsT0FFdERvOEIsRUFBUSxJQUFJakQsR0FDWmhFLEVBQVcsU0FBVWlFLEdBQ3JCLEdBQUlnRCxFQUFNNWhCLElBQUk0ZSxHQUFpQixDQUMzQixJQUFJdG1CLEVBQWVzbUIsRUFBZS9uQixjQUM5QmlvQixFQUFhRixFQUFlam9CLFVBQ2hDLE9BQU9nckIsRUFBdUIxWixJQUFJLENBQzlCM1AsYUFBY0EsRUFDZHlULE9BQVFwUSxHQUFPbWpCLE9BSzNCLE9BQU85WSxFQUNGeGdCLE1BQU13M0IsR0FBaUJ4M0IsT0FDdkJnakIsUUFBUSxDQUFFRixVQUFVLElBQVEsU0FBVXVaLEVBQWNoMkMsR0FDckQsSUFBSTJyQixFQUFPLElBQUlILEdBQWF3cUIsR0FDNUIsT0FBT2xILEVBQVNuakIsRUFBS2IsY0FFcEJ4ckIsTUFBSyxXQUVOLE9BQU82NkIsRUFDRnhnQixNQUFNcW1CLEdBQW1Ccm1CLE9BQ3pCZ2pCLFFBQVEsQ0FBRUYsVUFBVSxJQUFRLFNBQVV0MEIsRUFBSW5JLEdBQzlCbUksRUFBRyxHQUFoQixJQUFvQm01QixFQUFjbjVCLEVBQUcsR0FDakN3akIsR0FEK0N4akIsRUFBRyxHQUMzQ1csR0FBT3c0QixJQUNsQixPQUFPd04sRUFBU25qQixFQUFLYixrQkFJMUJzb0IsRUFoTHlCLEdBd0xwQyxJQUFJNkMsR0FDQSxTQUFxQjNsQixFQUFTQyxHQUMxQnJ6QixLQUFLb3pCLFFBQVVBLEVBQ2ZwekIsS0FBS3F6QixZQUFjQSxHQWF2QmdqQixHQUFpQyxXQUNqQyxTQUFTQSxFQUFnQjJDLEVBRXpCQyxFQUF5QkMsR0FDckJsNUMsS0FBS2c1QyxRQUFVQSxFQUNmaDVDLEtBQUtpNUMsd0JBQTBCQSxFQUMvQmo1QyxLQUFLazVDLGlCQUFtQkEsRUFlNUIsT0FOQTdDLEVBQWdCNTVCLE1BQVEsUUFLeEI0NUIsRUFBZ0JyM0MsSUFBTSxRQUNmcTNDLEVBckJ5QixHQWdDcEMsSUFBSTFRLEdBQWlDLFdBQ2pDLFNBQVNBLEVBSVQvRSxFQVNBeVgsRUFVQXJXLEdBQ0loaUMsS0FBSzRnQyxPQUFTQSxFQUNkNWdDLEtBQUtxNEMsd0JBQTBCQSxFQUMvQnI0QyxLQUFLZ2lDLGdCQUFrQkEsRUFNM0IsT0FIQTJELEVBQWdCbHBCLE1BQVEsaUJBRXhCa3BCLEVBQWdCQyxRQUFVLFNBQ25CRCxFQWpDeUIsR0EwQ2hDL0QsR0FBaUMsV0FDakMsU0FBU0EsRUFJVGhCLEVBSUE3SCxFQUtBb2dCLEVBYUFsZ0IsRUFNQUMsR0FDSWw1QixLQUFLNGdDLE9BQVNBLEVBQ2Q1Z0MsS0FBSys0QixRQUFVQSxFQUNmLzRCLEtBQUttNUMsaUJBQW1CQSxFQUN4Qm41QyxLQUFLaTVCLGNBQWdCQSxFQUNyQmo1QixLQUFLazVCLFVBQVlBLEVBVXJCLE9BUEEwSSxFQUFnQm5sQixNQUFRLFlBRXhCbWxCLEVBQWdCZ0UsUUFBVSxVQUUxQmhFLEVBQWdCQyxtQkFBcUIscUJBRXJDRCxFQUFnQjRVLHFCQUF1QixDQUFDLFNBQVUsV0FDM0M1VSxFQWhEeUIsR0F3RnBDLElBQUlrQixHQUFvQyxXQUNwQyxTQUFTQSxLQStCVCxPQXpCQUEsRUFBbUJ5QyxjQUFnQixTQUFVM0UsR0FDekMsTUFBTyxDQUFDQSxJQU1aa0MsRUFBbUJtQixjQUFnQixTQUFVckQsRUFBUW5TLEdBQ2pELE1BQU8sQ0FBQ21TLEVBQVFoTyxHQUFPbkUsS0FNM0JxVSxFQUFtQjlqQyxJQUFNLFNBQVU0aEMsRUFBUW5TLEVBQU1zSyxHQUM3QyxNQUFPLENBQUM2SCxFQUFRaE8sR0FBT25FLEdBQU9zSyxJQUVsQytKLEVBQW1Ccm1CLE1BQVEsb0JBTzNCcW1CLEVBQW1CQyxZQUFjLElBQUlELEVBQzlCQSxFQWhDNEIsR0F5Q3ZDLElBQUlzVyxHQUNBLFNBQXNCM3FCLEVBQU1xakIsR0FDeEI5eEMsS0FBS3l1QixLQUFPQSxFQUNaenVCLEtBQUs4eEMsU0FBV0EsR0FRcEJ1SCxHQUNBLFNBQTJCNXFCLEVBQU1uWSxHQUM3QnRXLEtBQUt5dUIsS0FBT0EsRUFDWnp1QixLQUFLc1csUUFBVUEsR0FpQm5CMjlCLEdBQWtDLFdBTWxDLFNBQVNBLEVBTVR1QixFQUtBQyxFQUtBcjJCLEVBT0Ftc0IsRUFLQXVHLEVBS0FpRSxHQUNJLzFDLEtBQUt3MUMsZ0JBQWtCQSxFQUN2QngxQyxLQUFLeTFDLFdBQWFBLEVBQ2xCejFDLEtBQUtvZixTQUFXQSxFQUNoQnBmLEtBQUt1ckMsc0JBQXdCQSxFQUM3QnZyQyxLQUFLOHhDLFNBQVdBLEVBQ2hCOXhDLEtBQUsrMUMsV0FBYUEsRUFvQnRCLE9BbEJBOUIsRUFBaUJ4M0IsTUFBUSxrQkFPekJ3M0IsRUFBaUJPLGNBQWdCLGdCQUNqQ1AsRUFBaUI2RCxrQkFBb0IsV0FRckM3RCxFQUFpQkMsd0JBQTBCLDBCQUMzQ0QsRUFBaUI4RCw0QkFBOEIsQ0FBQyxhQUFjLFlBQ3ZEOUQsRUFqRTBCLEdBc0VqQ2UsR0FBd0MsV0FLeEMsU0FBU0EsRUFBdUJuQyxHQUM1Qjd5QyxLQUFLNnlDLFNBQVdBLEVBSXBCLE9BRkFtQyxFQUF1QnY0QixNQUFRLHVCQUMvQnU0QixFQUF1QmgyQyxJQUFNLDBCQUN0QmcyQyxFQVZnQyxHQXdCM0MsSUFBSW5NLEdBQTBCLFdBQzFCLFNBQVNBLEVBU1Q1USxFQUlBMlEsRUFNQWtKLEVBa0JBd0gsRUFlQUMsRUFNQUMsRUFRQXQ3QixHQUNJbGUsS0FBS2k0QixTQUFXQSxFQUNoQmo0QixLQUFLNG9DLFlBQWNBLEVBQ25CNW9DLEtBQUs4eEMsU0FBV0EsRUFDaEI5eEMsS0FBS3M1QyxZQUFjQSxFQUNuQnQ1QyxLQUFLdTVDLHlCQUEyQkEsRUFDaEN2NUMsS0FBS3c1Qyw2QkFBK0JBLEVBQ3BDeDVDLEtBQUtrZSxNQUFRQSxFQWFqQixPQVhBMnFCLEVBQVNwc0IsTUFBUSxVQUVqQm9zQixFQUFTakQsUUFBVSxXQUVuQmlELEVBQVNDLHNCQUF3QixvQkFNakNELEVBQVM0USxvQkFBc0IsQ0FBQyxjQUFlLFlBQ3hDNVEsRUF2RmtCLEdBbUd6QkssR0FBa0MsV0FDbEMsU0FBU0EsRUFJVGpSLEVBSUF4SixFQU1BaEMsR0FDSXpzQixLQUFLaTRCLFNBQVdBLEVBQ2hCajRCLEtBQUt5dUIsS0FBT0EsRUFDWnp1QixLQUFLeXNCLGVBQWlCQSxFQUN0QjVtQixFQUFxQixJQUFib3lCLFNBQXdDMXVCLElBQW5Ca2pCLEdBQStCLHFJQVVoRSxPQVBBeWMsRUFBaUJ6c0IsTUFBUSxrQkFFekJ5c0IsRUFBaUJ0RCxRQUFVLENBQUMsV0FBWSxRQUV4Q3NELEVBQWlCSyxxQkFBdUIsdUJBRXhDTCxFQUFpQndRLHVCQUF5QixDQUFDLE9BQVEsWUFDNUN4USxFQTdCMEIsR0FxQ2pDWCxHQUFnQyxXQUNoQyxTQUFTQSxFQU1UckIsRUFNQU8sRUFTQUosRUFJQVEsR0FDSTduQyxLQUFLa25DLGdCQUFrQkEsRUFDdkJsbkMsS0FBS3luQyw0QkFBOEJBLEVBQ25Dem5DLEtBQUtxbkMsMEJBQTRCQSxFQUNqQ3JuQyxLQUFLNm5DLFlBQWNBLEVBUXZCLE9BRkFVLEVBQWV2cEMsSUFBTSxrQkFDckJ1cEMsRUFBZTlyQixNQUFRLGVBQ2hCOHJCLEVBdEN3QixHQThDL0JvUSxHQUFvQyxXQUNwQyxTQUFTQSxFQUlUcHBCLEVBS0F5VCxHQUNJaGpDLEtBQUt1dkIsYUFBZUEsRUFDcEJ2dkIsS0FBS2dqQyxPQUFTQSxFQU1sQixPQUhBMlYsRUFBbUJsOEIsTUFBUSxvQkFFM0JrOEIsRUFBbUIvUyxRQUFVLENBQUMsZUFBZ0IsVUFDdkMrUyxFQWxCNEIsR0FvQnZDLFNBQVNoQyxHQUFpQjE1QixHQUNLQSxFQUFHWSxrQkFBa0JxckIsR0FBaUJ6c0IsTUFBTyxDQUNwRW1wQixRQUFTc0QsR0FBaUJ0RCxVQUVUbm9CLFlBQVl5ckIsR0FBaUJLLHFCQUFzQkwsR0FBaUJ3USx1QkFBd0IsQ0FBRWpELFFBQVEsSUFDekd4NUIsRUFBR1ksa0JBQWtCZ3JCLEdBQVNwc0IsTUFBTyxDQUNuRG1wQixRQUFTaUQsR0FBU2pELFVBR1Zub0IsWUFBWW9yQixHQUFTQyxzQkFBdUJELEdBQVM0USxvQkFBcUIsQ0FBRWhELFFBQVEsSUFDaEd4NUIsRUFBR1ksa0JBQWtCMHFCLEdBQWU5ckIsT0F3Q3hDLElBQUk0NkIsR0FBa0MsV0FDbEMsU0FBU0EsRUFJVHNDLEVBRUFDLEVBRUFDLEVBRUFDLEdBQ0k5NUMsS0FBSzI1QyxTQUFXQSxFQUNoQjM1QyxLQUFLNDVDLGFBQWVBLEVBQ3BCNTVDLEtBQUs2NUMsZUFBaUJBLEVBQ3RCNzVDLEtBQUs4NUMsYUFBZUEsRUFNeEIsT0FIQXpDLEVBQWlCNTZCLE1BQVEsaUJBRXpCNDZCLEVBQWlCelIsUUFBVSxXQUNwQnlSLEVBckIwQixHQTZCckMsSUFxSUkwQyxHQXpIQUMsR0FaWSxDQUNaclUsR0FBZ0JscEIsTUFDaEJtbEIsR0FBZ0JubEIsTUFDaEJxbUIsR0FBbUJybUIsTUFDbkJ3M0IsR0FBaUJ4M0IsTUFDakJvc0IsR0FBU3BzQixNQUNUNDVCLEdBQWdCNTVCLE1BQ2hCOHJCLEdBQWU5ckIsTUFDZnlzQixHQUFpQnpzQixPQU9qQnc5QixHQUFZejBDLEVBQU12QixlQUFlKzFDLEdBQVcsQ0FBQzNDLEdBQWlCNTZCLFFBRTlEeTlCLEdBQVkxMEMsRUFBTXZCLGVBQWVnMkMsR0FBVyxDQUFDakYsR0FBdUJ2NEIsUUFTcEUwOUIsR0FQWTMwQyxFQUFNdkIsZUFBZWkyQyxHQUFXLENBQUN2QixHQUFtQmw4QixRQTRCaEUyOUIsR0FBdUMsV0FDdkMsU0FBU0EsSUFRTHA2QyxLQUFLcTZDLHVCQUF5QixJQUFJekUsR0FrRHRDLE9BekNBd0UsRUFBc0IvNkMsVUFBVTRqQywyQkFBNkIsU0FBVTlsQixFQUFhMDRCLEdBQ2hGLElBQUluc0MsRUFBUTFKLEtBRVosR0FEQTZGLEVBQU9nd0MsRUFBZXgxQyxPQUFTLEdBQU0sRUFBRyxnQ0FDbkNMLEtBQUtxNkMsdUJBQXVCcm1DLElBQUk2aEMsR0FBaUIsQ0FDbEQsSUFBSXRtQixFQUFlc21CLEVBQWUvbkIsY0FDOUJpb0IsRUFBYUYsRUFBZWpvQixVQUNoQ3pRLEVBQVkrbEIsd0JBQXVCLFdBRy9CeDVCLEVBQU0yd0MsdUJBQXVCcGpCLElBQUk0ZSxNQUVyQyxJQUFJeUUsRUFBbUIsQ0FDbkIvcUIsYUFBY0EsRUFDZHlULE9BQVFwUSxHQUFPbWpCLElBRW5CLE9BQU82QyxHQUF1Qno3QixHQUFhK2hCLElBQUlvYixHQUVuRCxPQUFPL2YsR0FBbUJ2NEIsV0FFOUJvNEMsRUFBc0IvNkMsVUFBVXkyQyxxQkFBdUIsU0FBVTM0QixFQUFhb1MsR0FDMUUsSUFBSWdyQixFQUFjLEdBQ2RoakIsRUFBUWdLLFlBQVlDLE1BQU0sQ0FBQ2pTLEVBQWMsSUFBSyxDQUFDaEYsRUFBbUJnRixHQUFlLEtBQ3RFLEdBQ0EsR0FDZixPQUFPcXBCLEdBQXVCejdCLEdBQ3pCaWlCLFFBQVE3SCxHQUNSbjFCLE1BQUssU0FBVXVQLEdBQ2hCLElBQUssSUFBSWhILEVBQUssRUFBRzRtQyxFQUFZNS9CLEVBQVNoSCxFQUFLNG1DLEVBQVVseEMsT0FBUXNLLElBQU0sQ0FDL0QsSUFBSTZ2QyxFQUFRakosRUFBVTVtQyxHQUt0QixHQUFJNnZDLEVBQU1qckIsZUFBaUJBLEVBQ3ZCLE1BRUpnckIsRUFBWTkyQyxLQUFLbUksR0FBTzR1QyxFQUFNeFgsU0FFbEMsT0FBT3VYLE1BR1JILEVBM0QrQixHQWlFMUMsU0FBU3hCLEdBQXVCM2IsR0FDNUIsT0FBT2dKLEdBQXFCakosU0FBU0MsRUFBSzBiLEdBQW1CbDhCOzs7Ozs7Ozs7Ozs7Ozs7O0lBcUJqRSxTQUFXczlCLEdBRVBBLEVBQWNBLEVBQXNCLE9BQUksR0FBSyxTQUk3Q0EsRUFBY0EsRUFBdUMsd0JBQUksR0FBSywwQkFFOURBLEVBQWNBLEVBQStCLGdCQUFJLEdBQUssa0JBUjFELENBU0dBLEtBQWtCQSxHQUFnQixLQUlyQyxJQUFJVSxHQUE0QixXQUM1QixTQUFTQSxFQUVUMzVDLEVBS0FtM0IsRUFFQXlpQixFQUtBanVCLEVBRUFrdUIsRUFLQW5CLEVBT0FGLFFBQzRCLElBQXBCcUIsSUFBOEJBLEVBQWtCL21CLEdBQWdCSyxVQUMvQixJQUFqQ3VsQixJQUEyQ0EsRUFBK0I1bEIsR0FBZ0JLLFVBQzFFLElBQWhCcWxCLElBQTBCQSxFQUFjdDBCLEtBQzVDaGxCLEtBQUtjLE9BQVNBLEVBQ2RkLEtBQUtpNEIsU0FBV0EsRUFDaEJqNEIsS0FBSzA2QyxRQUFVQSxFQUNmMTZDLEtBQUt5c0IsZUFBaUJBLEVBQ3RCenNCLEtBQUsyNkMsZ0JBQWtCQSxFQUN2QjM2QyxLQUFLdzVDLDZCQUErQkEsRUFDcEN4NUMsS0FBS3M1QyxZQUFjQSxFQTZCdkIsT0ExQkFtQixFQUFXcDdDLFVBQVV1N0MsbUJBQXFCLFNBQVVudUIsR0FDaEQsT0FBTyxJQUFJZ3VCLEVBQVd6NkMsS0FBS2MsT0FBUWQsS0FBS2k0QixTQUFVajRCLEtBQUswNkMsUUFBU2p1QixFQUFnQnpzQixLQUFLMjZDLGdCQUFpQjM2QyxLQUFLdzVDLDZCQUE4Qng1QyxLQUFLczVDLGNBTWxKbUIsRUFBV3A3QyxVQUFVdzdDLGdCQUFrQixTQUFVdkIsRUFBYXFCLEdBQzFELE9BQU8sSUFBSUYsRUFBV3o2QyxLQUFLYyxPQUFRZCxLQUFLaTRCLFNBQVVqNEIsS0FBSzA2QyxRQUFTMTZDLEtBQUt5c0IsZUFBZ0JrdUIsRUFBaUIzNkMsS0FBS3c1Qyw2QkFBOEJGLElBTTdJbUIsRUFBV3A3QyxVQUFVeTdDLGlDQUFtQyxTQUFVdEIsR0FDOUQsT0FBTyxJQUFJaUIsRUFBV3o2QyxLQUFLYyxPQUFRZCxLQUFLaTRCLFNBQVVqNEIsS0FBSzA2QyxRQUFTMTZDLEtBQUt5c0IsZUFBZ0J6c0IsS0FBSzI2QyxnQkFBaUJuQixFQUE4Qng1QyxLQUFLczVDLGNBRWxKbUIsRUFBV3A3QyxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3JDLE9BQVF2ckIsS0FBS2k0QixXQUFhMU0sRUFBTTBNLFVBQzVCajRCLEtBQUswNkMsVUFBWW52QixFQUFNbXZCLFNBQ3ZCMTZDLEtBQUt5c0IsaUJBQW1CbEIsRUFBTWtCLGdCQUM5QnpzQixLQUFLMjZDLGdCQUFnQnJ3QixRQUFRaUIsRUFBTW92QixrQkFDbkMzNkMsS0FBS3c1Qyw2QkFBNkJsdkIsUUFBUWlCLEVBQU1pdUIsK0JBQ2hEeDVDLEtBQUtzNUMsY0FBZ0IvdEIsRUFBTSt0QixhQUMzQnQ1QyxLQUFLYyxPQUFPd3BCLFFBQVFpQixFQUFNenFCLFNBRTNCMjVDLEVBcEVvQixHQXdGM0JNLEdBQWlDLFdBQ2pDLFNBQVNBLEVBQWdCQyxHQUNyQmg3QyxLQUFLZzdDLGlCQUFtQkEsRUE4SjVCLE9BM0pBRCxFQUFnQjE3QyxVQUFVODBDLHFCQUF1QixTQUFVOEcsR0FDdkQsR0FBSUEsRUFBVTc3QixTQUNWLE9BQU9wZixLQUFLZzdDLGlCQUFpQkUsYUFBYUQsRUFBVTc3QixXQUFZNjdCLEVBQVUxUCx1QkFFekUsR0FBSTBQLEVBQVV4RixXQUFZLENBQzNCLElBQUl6MkMsRUFBTW93QixHQUFZTSxhQUFhdXJCLEVBQVV4RixXQUFXaG5CLE1BQ3BEblksRUFBVXRXLEtBQUttN0MsZ0JBQWdCRixFQUFVeEYsV0FBVzNELFVBQ3hELE9BQU8sSUFBSTVFLEdBQVdsdUMsRUFBS3NYLEVBQVMsQ0FDaENpMUIsd0JBQXlCMFAsRUFBVTFQLHdCQUd0QyxHQUFJMFAsRUFBVXpGLGdCQUFpQixDQUM1QngyQyxFQUFNb3dCLEdBQVlNLGFBQWF1ckIsRUFBVXpGLGdCQUFnQi9tQixNQUN6RG5ZLEVBQVV0VyxLQUFLbTdDLGdCQUFnQkYsRUFBVXpGLGdCQUFnQmwvQixTQUM3RCxPQUFPLElBQUl1MUIsR0FBZ0I3c0MsRUFBS3NYLEdBR2hDLE9BQU91TyxFQUFLLGdDQUlwQmsyQixFQUFnQjE3QyxVQUFVZzJDLG1CQUFxQixTQUFVaGMsRUFBVXlZLEdBQy9ELElBQUlzSixFQUFhcDdDLEtBQUtnMEMsaUJBQWlCbEMsR0FDbkNpRSxFQUFhMWMsRUFBU3I2QixJQUFJeXZCLEtBQUtiLFVBQVUzUyxVQUM3QyxHQUFJb2UsYUFBb0J5UixHQUFVLENBQzlCLElBQUl3QixFQUFNalQsRUFBU2dYLE1BQ2JoWCxFQUFTZ1gsTUFDVHJ3QyxLQUFLZzdDLGlCQUFpQkssV0FBV2hpQixHQUNuQ2tTLEVBQXdCbFMsRUFBU2tTLHNCQUNyQyxPQUFPLElBQUkwSSxHQUNZLEtBQ0wsS0FBTTNILEVBQUtmLEVBQXVCNlAsRUFBWXJGLEdBRS9ELEdBQUkxYyxhQUFvQjZULEdBQVksQ0FDckMsSUFBSXplLEVBQU80SyxFQUFTcjZCLElBQUl5dkIsS0FBS3hULFVBQ3pCcWdDLEVBQWF0N0MsS0FBS3U3QyxjQUFjbGlCLEVBQVMvaUIsU0FDekNpMUIsRUFBd0JsUyxFQUFTa1Msc0JBQ3JDLE9BQU8sSUFBSTBJLEdBQ1ksS0FBTSxJQUFJbUYsR0FBYTNxQixFQUFNNnNCLEdBQ3BDLEtBQU0vUCxFQUF1QjZQLEVBQVlyRixHQUV4RCxHQUFJMWMsYUFBb0J3UyxHQUFpQixDQUN0Q3BkLEVBQU80SyxFQUFTcjZCLElBQUl5dkIsS0FBS3hULFVBQTdCLElBQ0l1Z0MsRUFBYXg3QyxLQUFLdTdDLGNBQWNsaUIsRUFBUy9pQixTQUM3QyxPQUFPLElBQUkyOUIsR0FBaUIsSUFBSW9GLEdBQWtCNXFCLEVBQU0rc0IsR0FDdEMsS0FDRixNQUNhLEVBQU1KLEVBQVlyRixHQUcvQyxPQUFPbHhCLEVBQUssNkJBR3BCazJCLEVBQWdCMTdDLFVBQVUyMEMsaUJBQW1CLFNBQVUyRyxHQUNuRCxJQUFJOW1CLEVBQVk4bUIsRUFBZ0J4bUIsY0FDaEMsTUFBTyxDQUFDTixFQUFVVCxRQUFTUyxFQUFVUixjQUV6QzBuQixFQUFnQjE3QyxVQUFVbzFDLG1CQUFxQixTQUFVZ0gsR0FDckQsSUFBSTVuQixFQUFZLElBQUlWLEdBQVVzb0IsRUFBZSxHQUFJQSxFQUFlLElBQ2hFLE9BQU83bkIsR0FBZ0JHLGNBQWNGLElBRXpDa25CLEVBQWdCMTdDLFVBQVVrOEMsY0FBZ0IsU0FBVVosR0FDaEQsSUFBSTltQixFQUFZOG1CLEVBQWdCeG1CLGNBQ2hDLE9BQU8sSUFBSTRrQixHQUFZbGxCLEVBQVVULFFBQVNTLEVBQVVSLGNBRXhEMG5CLEVBQWdCMTdDLFVBQVU4N0MsZ0JBQWtCLFNBQVVPLEdBQ2xELElBQUk3bkIsRUFBWSxJQUFJVixHQUFVdW9CLEVBQVl0b0IsUUFBU3NvQixFQUFZcm9CLGFBQy9ELE9BQU9PLEdBQWdCRyxjQUFjRixJQUd6Q2tuQixFQUFnQjE3QyxVQUFVcWpDLGtCQUFvQixTQUFVOUIsRUFBUTFHLEdBQzVELElBQUl4d0IsRUFBUTFKLEtBQ1IyN0MsRUFBMEJ6aEIsRUFBTWpCLGNBQWNob0IsS0FBSSxTQUFVcFQsR0FDNUQsT0FBTzZMLEVBQU1zeEMsaUJBQWlCWSxXQUFXLzlDLE1BRXpDZytDLEVBQXNCM2hCLEVBQU1oQixVQUFVam9CLEtBQUksU0FBVXBULEdBQ3BELE9BQU82TCxFQUFNc3hDLGlCQUFpQlksV0FBVy85QyxNQUU3QyxPQUFPLElBQUkrakMsR0FBZ0JoQixFQUFRMUcsRUFBTW5CLFFBQVNtQixFQUFNbEIsZUFBZXJGLFdBQVlnb0IsRUFBeUJFLElBR2hIZCxFQUFnQjE3QyxVQUFVK2pDLG9CQUFzQixTQUFVWCxHQUN0RCxJQUFJLzRCLEVBQVExSixLQUNSaTVCLEdBQWlCd0osRUFBUXhKLGVBQWlCLElBQUlob0IsS0FBSSxTQUFVcFQsR0FDNUQsT0FBTzZMLEVBQU1zeEMsaUJBQWlCYyxhQUFhaitDLE1BRTNDcTdCLEVBQVl1SixFQUFRdkosVUFBVWpvQixLQUFJLFNBQVVwVCxHQUM1QyxPQUFPNkwsRUFBTXN4QyxpQkFBaUJjLGFBQWFqK0MsTUFFM0NnMkIsRUFBWVYsR0FBVUcsV0FBV21QLEVBQVEwVyxrQkFDN0MsT0FBTyxJQUFJcmdCLEdBQWMySixFQUFRMUosUUFBU2xGLEVBQVdvRixFQUFlQyxJQUt4RTZoQixFQUFnQjE3QyxVQUFVMDhDLGtCQUFvQixTQUFVNXdDLEdBQ3BELElBQUk2d0MsRUFBYyxHQUlsQixPQUhBN3dDLEVBQUtxRyxTQUFRLFNBQVV4UyxHQUNuQmc5QyxFQUFZdjRDLEtBQUttdkIsR0FBTzV6QixFQUFJeXZCLFVBRXpCdXRCLEdBR1hqQixFQUFnQjE3QyxVQUFVNDhDLG9CQUFzQixTQUFVQyxHQUV0RCxJQURBLElBQUkvd0MsRUFBT3V0QixLQUNGL3RCLEVBQUssRUFBR3d4QyxFQUFpQkQsRUFBY3Z4QyxFQUFLd3hDLEVBQWU5N0MsT0FBUXNLLElBQU0sQ0FDOUUsSUFBSW81QixFQUFjb1ksRUFBZXh4QyxHQUNqQ1EsRUFBT0EsRUFBSzhyQixJQUFJLElBQUk3SCxHQUFZeGpCLEdBQU9tNEIsS0FFM0MsT0FBTzU0QixHQUdYNHZDLEVBQWdCMTdDLFVBQVVncEMsYUFBZSxTQUFVK1QsR0FDL0MsSUFNSXQ3QyxFQU5Bd1YsRUFBVXRXLEtBQUttN0MsZ0JBQWdCaUIsRUFBU3RLLFVBQ3hDMEgsT0FBeUVqd0MsSUFBMUM2eUMsRUFBUzVDLDZCQUN0Q3g1QyxLQUFLbTdDLGdCQUFnQmlCLEVBQVM1Qyw4QkFDOUI1bEIsR0FBZ0JLLElBRWxCcWxCLEVBQWM4QyxFQUFTOUMsWUFRM0IsT0FMSXg0QyxPQXdDcUJ5SSxJQXpDTDZ5QyxFQUFTbCtCLE1BeUNsQm0rQixVQXhDRXI4QyxLQUFLZzdDLGlCQUFpQnNCLG9CQUFvQkYsRUFBU2wrQixPQUduRGxlLEtBQUtnN0MsaUJBQWlCdUIsZ0JBQWdCSCxFQUFTbCtCLE9BRXJELElBQUl1OEIsR0FBVzM1QyxFQUFRczdDLEVBQVNua0IsU0FBVThoQixHQUFjeUMsT0FBUUosRUFBUzdDLHlCQUEwQmpqQyxFQUFTa2pDLEVBQThCRixJQUdySnlCLEVBQWdCMTdDLFVBQVVtcEMsV0FBYSxTQUFVYixHQUM3QzloQyxFQUFPazBDLEdBQWN5QyxTQUFXN1UsRUFBVytTLFFBQVMsNkJBQ2hEWCxHQUFjeUMsT0FDZCx1QkFDQTdVLEVBQVcrUyxTQUNmLElBRUkrQixFQU9BbkQsRUFUQW9DLEVBQWMxN0MsS0FBS3U3QyxjQUFjNVQsRUFBV2dULGlCQUM1QytCLEVBQTJCMThDLEtBQUt1N0MsY0FBYzVULEVBQVc2Uiw4QkFrQjdELE9BZklpRCxFQURBOVUsRUFBVzdtQyxPQUFPNmpDLGtCQUNMM2tDLEtBQUtnN0MsaUJBQWlCMkIsa0JBQWtCaFYsRUFBVzdtQyxRQUduRGQsS0FBS2c3QyxpQkFBaUI0QixjQUFjalYsRUFBVzdtQyxRQUc1RDZtQyxFQUFXMlIsdUJBQXVCN3VCLFlBRWxDNWtCLEVBQU9nMkIsR0FBU1csb0JBQXFCLGlGQUNyQzhjLEVBQWMzUixFQUFXMlIsWUFBWTl0QyxZQUdyQzh0QyxFQUFjM1IsRUFBVzJSLFlBR3RCLElBQUl6USxHQUFTbEIsRUFBVzFQLFNBQVUwUCxFQUFXN21DLE9BQU84bkMsY0FBZThTLEVBQWFwQyxFQUFhM1IsRUFBV2xiLGVBQWdCaXdCLEVBQTBCRCxJQUV0SjFCLEVBaEt5Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUxwQyxTQUFTOEIsR0FBc0I1eEMsRUFBSUMsR0FDL0IsSUFBSTR4QyxFQUFZN3hDLEVBQUcsR0FBSTh4QyxFQUFTOXhDLEVBQUcsR0FDL0IreEMsRUFBWTl4QyxFQUFHLEdBQUkreEMsRUFBUy94QyxFQUFHLEdBQy9CZ3lDLEVBQVNoekIsRUFBb0I0eUIsRUFBV0UsR0FDNUMsT0FBZSxJQUFYRSxFQUdPaHpCLEVBQW9CNnlCLEVBQVFFLEdBRzVCQyxFQVFmLElBQUlDLEdBQTZDLFdBQzdDLFNBQVNBLEVBQTRCQyxHQUNqQ3A5QyxLQUFLbzlDLFlBQWNBLEVBQ25CcDlDLEtBQUtzckIsT0FBUyxJQUFJeUwsR0FBVThsQixJQUM1Qjc4QyxLQUFLcTlDLGNBQWdCLEVBOEJ6QixPQTVCQUYsRUFBNEI5OUMsVUFBVWkrQyxVQUFZLFdBQzlDLFFBQVN0OUMsS0FBS3E5QyxlQUVsQkYsRUFBNEI5OUMsVUFBVWsrQyxXQUFhLFNBQVU5d0IsR0FDekQsSUFBSSt0QixFQUFRLENBQUMvdEIsRUFBZ0J6c0IsS0FBS3M5QyxhQUNsQyxHQUFJdDlDLEtBQUtzckIsT0FBT3FDLEtBQU8zdEIsS0FBS285QyxZQUN4QnA5QyxLQUFLc3JCLE9BQVN0ckIsS0FBS3NyQixPQUFPMkwsSUFBSXVqQixPQUU3QixDQUNELElBQUlnRCxFQUFleDlDLEtBQUtzckIsT0FBTzhMLE9BQzNCeWxCLEdBQXNCckMsRUFBT2dELEdBQWdCLElBQzdDeDlDLEtBQUtzckIsT0FBU3RyQixLQUFLc3JCLE9BQU9wVyxPQUFPc29DLEdBQWN2bUIsSUFBSXVqQixNQUkvRHI4QyxPQUFPQyxlQUFlKytDLEVBQTRCOTlDLFVBQVcsV0FBWSxDQUNyRWYsSUFBSyxXQU9ELE9BQU8wQixLQUFLc3JCLE9BQU84TCxPQUFPLElBRTlCLzRCLFlBQVksRUFDWmtaLGNBQWMsSUFFWDRsQyxFQWxDcUMsR0FvQzVDTSxHQUFpQixDQUNqQkMsUUFBUSxFQUNSQyx5QkFBMEIsRUFDMUJDLGVBQWdCLEVBQ2hCQyxpQkFBa0IsR0FFbEJDLEdBQTJCLFdBQzNCLFNBQVNBLEVBR1RDLEVBRUFDLEVBR0FDLEdBQ0lqK0MsS0FBSys5Qyw2QkFBK0JBLEVBQ3BDLzlDLEtBQUtnK0Msb0JBQXNCQSxFQUMzQmgrQyxLQUFLaStDLGdDQUFrQ0EsRUFZM0MsT0FWQUgsRUFBVUksY0FBZ0IsU0FBVUMsR0FDaEMsT0FBTyxJQUFJTCxFQUFVSyxFQUFXTCxFQUFVTSw4QkFBK0JOLEVBQVVPLDBDQUV2RlAsRUFBVVEscUJBQXVCLEVBQ2pDUixFQUFVUyx5QkFBMkIsUUFDckNULEVBQVVVLHlCQUEyQixTQUNyQ1YsRUFBVU0sOEJBQWdDLEdBQzFDTixFQUFVTyx3Q0FBMEMsSUFDcERQLEVBQVVXLFFBQVUsSUFBSVgsRUFBVUEsRUFBVVUseUJBQTBCVixFQUFVTSw4QkFBK0JOLEVBQVVPLHlDQUN6SFAsRUFBVVksU0FBVyxJQUFJWixFQUFVQSxFQUFVUSxvQkFBcUIsRUFBRyxHQUM5RFIsRUF4Qm1CLEdBa0MxQmEsR0FBOEIsV0FDOUIsU0FBU0EsRUFBYUMsRUFBa0I5dUIsRUFBWSt1QixHQUNoRDcrQyxLQUFLNCtDLGlCQUFtQkEsRUFDeEI1K0MsS0FBSzh2QixXQUFhQSxFQUNsQjl2QixLQUFLNitDLFdBQWFBLEVBQ2xCNytDLEtBQUs4K0MsUUFBUyxFQUNkOStDLEtBQUsrK0MsT0FBUyxLQW9DbEIsT0FsQ0FKLEVBQWF0L0MsVUFBVWd4QixNQUFRLFdBQzNCeHFCLEVBQXVCLE9BQWhCN0YsS0FBSysrQyxPQUFpQixnREFDekIvK0MsS0FBSzQrQyxpQkFBaUJ0dEMsT0FBT3lzQywrQkFDN0JELEdBQVVRLHFCQUNWdCtDLEtBQUtnL0MsY0FHYkwsRUFBYXQvQyxVQUFVNC9DLEtBQU8sV0FDdEJqL0MsS0FBSysrQyxTQUNMLytDLEtBQUsrK0MsT0FBT3J1QixTQUNaMXdCLEtBQUsrK0MsT0FBUyxPQUd0QjVnRCxPQUFPQyxlQUFldWdELEVBQWF0L0MsVUFBVyxVQUFXLENBQ3JEZixJQUFLLFdBQ0QsT0FBdUIsT0FBaEIwQixLQUFLKytDLFFBRWhCMWdELFlBQVksRUFDWmtaLGNBQWMsSUFFbEJvbkMsRUFBYXQvQyxVQUFVMi9DLFdBQWEsV0FDaEMsSUFBSXQxQyxFQUFRMUosS0FDWjZGLEVBQXVCLE9BQWhCN0YsS0FBSysrQyxPQUFpQiw4Q0FDN0IsSUFBSUcsRUFBUWwvQyxLQUFLOCtDLE9BcENDLElBRkEsSUF1Q2xCbm5DLEVBQU0sc0JBQXVCLG1DQUFxQ3VuQyxFQUFRLE1BQzFFbC9DLEtBQUsrK0MsT0FBUy8rQyxLQUFLOHZCLFdBQVcrQixrQkFBa0JqSCxHQUFRdTBCLHFCQUFzQkQsR0FBTyxXQUdqRixPQUZBeDFDLEVBQU1xMUMsT0FBUyxLQUNmcjFDLEVBQU1vMUMsUUFBUyxFQUNScDFDLEVBQU1tMUMsV0FDUk8sZUFBZTExQyxFQUFNazFDLGtCQUNyQnA4QyxNQUFLLFdBQWMsT0FBT2tILEVBQU1zMUMsZ0JBQ2hDbDFDLE1BQU11MUMsUUFHWlYsRUExQ3NCLEdBNkM3QlcsR0FBcUMsV0FDckMsU0FBU0EsRUFBb0JDLEVBQVVqdUMsR0FDbkN0UixLQUFLdS9DLFNBQVdBLEVBQ2hCdi9DLEtBQUtzUixPQUFTQSxFQStHbEIsT0E1R0FndUMsRUFBb0JqZ0QsVUFBVW1nRCxxQkFBdUIsU0FBVXZpQixFQUFLd2lCLEdBQ2hFLE9BQU96L0MsS0FBS3UvQyxTQUFTRyx1QkFBdUJ6aUIsR0FBSzc2QixNQUFLLFNBQVV5bEMsR0FDNUQsT0FBT2ozQixLQUFLQyxNQUFPNHVDLEVBQWEsSUFBUzVYLE9BSWpEeVgsRUFBb0JqZ0QsVUFBVXNnRCxrQkFBb0IsU0FBVTFpQixFQUFLLzlCLEdBQzdELElBQUl3SyxFQUFRMUosS0FDWixHQUFVLElBQU5kLEVBQ0EsT0FBT3E3QixHQUFtQnY0QixRQUFRcXFCLEdBQWVXLFNBRXJELElBQUkxQixFQUFTLElBQUk2eEIsR0FBNEJqK0MsR0FDN0MsT0FBT2MsS0FBS3UvQyxTQUNQalgsY0FBY3JMLEdBQUssU0FBVW44QixHQUFVLE9BQU93cUIsRUFBT2l5QixXQUFXejhDLEVBQU8yckIsbUJBQ3ZFcnFCLE1BQUssV0FDTixPQUFPc0gsRUFBTTYxQyxTQUFTSyxzQ0FBc0MzaUIsR0FBSyxTQUFVeFEsR0FBa0IsT0FBT25CLEVBQU9peUIsV0FBVzl3QixTQUVySHJxQixNQUFLLFdBQWMsT0FBT2twQixFQUFPdTBCLGFBTTFDUCxFQUFvQmpnRCxVQUFVOG9DLGNBQWdCLFNBQVVsTCxFQUFLMEcsRUFBWXlFLEdBQ3JFLE9BQU9wb0MsS0FBS3UvQyxTQUFTcFgsY0FBY2xMLEVBQUswRyxFQUFZeUUsSUFNeERrWCxFQUFvQmpnRCxVQUFVeWdELHdCQUEwQixTQUFVN2lCLEVBQUswRyxHQUNuRSxPQUFPM2pDLEtBQUt1L0MsU0FBU08sd0JBQXdCN2lCLEVBQUswRyxJQUV0RDJiLEVBQW9CamdELFVBQVUwZ0QsUUFBVSxTQUFVOWlCLEVBQUttTCxHQUNuRCxJQUFJMStCLEVBQVExSixLQUNaLE9BQUlBLEtBQUtzUixPQUFPeXNDLCtCQUFpQ0QsR0FBVVEscUJBQ3ZEM21DLEVBQU0sc0JBQXVCLHdDQUN0QjRpQixHQUFtQnY0QixRQUFReTdDLEtBRS9CejlDLEtBQUtnZ0QsYUFBYS9pQixHQUFLNzZCLE1BQUssU0FBVSs3QyxHQUN6QyxPQUFJQSxFQUFZejBDLEVBQU00SCxPQUFPeXNDLDhCQUN6QnBtQyxFQUFNLHNCQUF1QiwwQ0FBNEN3bUMsRUFBWSw0QkFDbkR6MEMsRUFBTTRILE9BQU95c0MsOEJBQ3hDTixJQUdBL3pDLEVBQU11MkMscUJBQXFCaGpCLEVBQUttTCxPQUluRGtYLEVBQW9CamdELFVBQVUyZ0QsYUFBZSxTQUFVL2lCLEdBQ25ELE9BQU9qOUIsS0FBS3UvQyxTQUFTUyxhQUFhL2lCLElBRXRDcWlCLEVBQW9CamdELFVBQVU0Z0QscUJBQXVCLFNBQVVoakIsRUFBS21MLEdBQ2hFLElBQ0k4WCxFQUNBQyxFQUEwQnZDLEVBRTFCd0MsRUFBa0JDLEVBQW1CQyxFQUFrQkMsRUFKdkQ3MkMsRUFBUTFKLEtBS1J3Z0QsRUFBVW4zQyxLQUFLc0gsTUFDbkIsT0FBTzNRLEtBQUt3L0MscUJBQXFCdmlCLEVBQUtqOUIsS0FBS3NSLE9BQU8wc0MscUJBQzdDNTdDLE1BQUssU0FBVXErQyxHQWFoQixPQVhJQSxFQUFrQi8yQyxFQUFNNEgsT0FBTzJzQyxpQ0FDL0J0bUMsRUFBTSxzQkFBdUIsOERBQ0RqTyxFQUFNNEgsT0FBTzJzQyxnQ0FBa0MsU0FDNUR3QyxHQUNmTixFQUEyQnoyQyxFQUFNNEgsT0FDNUIyc0MsaUNBR0xrQyxFQUEyQk0sRUFFL0JMLEVBQW1CLzJDLEtBQUtzSCxNQUNqQmpILEVBQU1pMkMsa0JBQWtCMWlCLEVBQUtrakIsTUFFbkMvOUMsTUFBSyxTQUFVdWhDLEdBR2hCLE9BRkF1YyxFQUEyQnZjLEVBQzNCMGMsRUFBb0JoM0MsS0FBS3NILE1BQ2xCakgsRUFBTXkrQixjQUFjbEwsRUFBS2lqQixFQUEwQjlYLE1BRXpEaG1DLE1BQUssU0FBVXMrQyxHQUdoQixPQUZBOUMsRUFBaUI4QyxFQUNqQkosRUFBbUJqM0MsS0FBS3NILE1BQ2pCakgsRUFBTW8yQyx3QkFBd0I3aUIsRUFBS2lqQixNQUV6Qzk5QyxNQUFLLFNBQVV5N0MsSUFDaEIwQyxFQUFxQmwzQyxLQUFLc0gsTUFDdEJ3VCxLQUFpQm5LLEVBQVNPLFFBVTFCNUMsRUFBTSxzQkFUSyxpREFDcUJ5b0MsRUFBbUJJLEdBQVcsd0NBQ25CTCxFQUEyQixRQUNqRUUsRUFBb0JELEdBQW1CLGlCQUN4QnhDLEVBQWlCLGdCQUNoQzBDLEVBQW1CRCxHQUFvQixpQkFDeEJ4QyxFQUFtQixrQkFDbEMwQyxFQUFxQkQsR0FBbUIsd0JBQ2xCQyxFQUFxQkMsR0FBVyxNQUcvRCxPQUFPam1CLEdBQW1CdjRCLFFBQVEsQ0FDOUIwN0MsUUFBUSxFQUNSQyx5QkFBMEJ3QyxFQUMxQnZDLGVBQWdCQSxFQUNoQkMsaUJBQWtCQSxRQUl2QnlCLEVBbEg2QixHQTZJcENxQixHQUF3QyxXQUN4QyxTQUFTQSxJQUNMM2dELEtBQUs0Z0QscUJBQXVCLEdBUWhDLE9BTkFELEVBQXVCdGhELFVBQVU2akMsdUJBQXlCLFNBQVUyZCxHQUNoRTdnRCxLQUFLNGdELHFCQUFxQm45QyxLQUFLbzlDLElBRW5DRixFQUF1QnRoRCxVQUFVeWhELHNCQUF3QixXQUNyRDlnRCxLQUFLNGdELHFCQUFxQnB2QyxTQUFRLFNBQVVxdkMsR0FBWSxPQUFPQSxRQUU1REYsRUFWZ0MsR0E2QnZDSSxHQUFZLHVCQXNCWkMsR0FBK0IsNEhBRS9CQyxHQUFvQyx3S0FTcENDLEdBQXNDLFNBQVUvMkMsR0FFaEQsU0FBUysyQyxFQUFxQmpjLEVBQXFCcVQsR0FDL0MsSUFBSTV1QyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBR2pDLE9BRkEwSixFQUFNdTdCLG9CQUFzQkEsRUFDNUJ2N0IsRUFBTTR1QyxzQkFBd0JBLEVBQ3ZCNXVDLEVBRVgsT0FQQWxFLEVBQU0xRixVQUFVb2hELEVBQXNCLzJDLEdBTy9CKzJDLEVBUjhCLENBU3ZDUCxJQStDRTFhLEdBQXNDLFdBQ3RDLFNBQVNBLEVBQXFCZ1QsRUFBeUJydEIsRUFBZ0IrdEIsRUFBVWwxQixFQUFVMDhCLEVBQVcvSSxFQUFPdlgsRUFBWXRVLEdBMkJySCxHQTFCQXZzQixLQUFLaTVDLHdCQUEwQkEsRUFDL0JqNUMsS0FBSzRyQixlQUFpQkEsRUFDdEI1ckIsS0FBSzI1QyxTQUFXQSxFQUNoQjM1QyxLQUFLbzRDLE1BQVFBLEVBQ2JwNEMsS0FBS3VzQixxQkFBdUJBLEVBQzVCdnNCLEtBQUtvaEQsVUFBVyxFQUNoQnBoRCxLQUFLcWhELFdBQVksRUFDakJyaEQsS0FBSzY1QyxnQkFBaUIsRUFFdEI3NUMsS0FBS3NoRCxvQkFBc0IsS0FDM0J0aEQsS0FBSzg1QyxjQUFlLEVBRXBCOTVDLEtBQUt1aEQsMEJBQTRCLEtBRWpDdmhELEtBQUt3aEQsd0JBQTBCLEtBRS9CeGhELEtBQUt5aEQsMEJBQTRCNzZCLE9BQU82YSxrQkFFeEN6aEMsS0FBSzBoRCxxQkFBdUIsU0FBVTUrQyxHQUFLLE9BQU9mLFFBQVFDLFdBQzFEaEMsS0FBSytnQyxrQkFBb0IsSUFBSTRnQixHQUFxQjNoRCxLQUFNbWhELEdBQ3hEbmhELEtBQUs0aEQsT0FBU2gyQixFQUFpQnFhLEVBQXFCNGIsY0FDcEQ3aEQsS0FBSzZnQyxXQUFhLElBQUlrYSxHQUFnQmxhLEdBQ3RDN2dDLEtBQUtvZixTQUFXcUYsRUFBU3JGLFNBQ3pCcGYsS0FBSzhoRCxZQUFjLElBQUloYixHQUFxQjltQyxLQUFLK2dDLGtCQUFtQi9nQyxLQUFLNmdDLFlBQ3pFN2dDLEtBQUs4Z0MsYUFBZSxJQUFJc1osR0FDeEJwNkMsS0FBSytoRCxvQkFBc0IsSUFBSXhQLEdBQTZCdnlDLEtBQUs2Z0MsV0FBWTdnQyxLQUFLOGdDLGVBQzlFcmMsRUFBU3ZVLFNBQVV1VSxFQUFTdlUsT0FBTzh4QyxhQUtuQyxNQUFNLElBQUk5N0IsRUFBZWpCLEVBQUtjLGNBQWUsbUZBSjdDL2xCLEtBQUtrUSxPQUFTdVUsRUFBU3ZVLE9BQ3ZCbFEsS0FBS2lpRCxXQUFhamlELEtBQUtrUSxPQUFPOHhDLGFBeW9CdEMsT0Fub0JBL2IsRUFBcUJqSixTQUFXLFNBQVVDLEVBQUt4Z0IsR0FDM0MsR0FBSXdnQixhQUFlaWtCLEdBQ2YsT0FBT3JsQixHQUFTbUIsU0FBU0MsRUFBSWdJLG9CQUFxQnhvQixHQUdsRCxNQUFNb0ksRUFBSyxvRUFHbkJvaEIsRUFBcUJpYywyQkFBNkIsU0FBVTV0QyxHQUN4RCxPQUFPOU8sRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJbWlELEVBQ0osT0FBTzM4QyxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxJQUFLa2pDLEVBQXFCaEssY0FDdEIsTUFBTSxJQUFJL1YsRUFBZWpCLEVBQUtjLGNBakhyQixzSUFvSGIsTUFBTyxDQUFDLEdBRFJvOEIsRUFBYyxJQUFJbGMsRUFBcUIzeEIsRUFBUTJrQyx3QkFBeUIza0MsRUFBUXNYLGVBQWdCdFgsRUFBUXFsQyxTQUFVcmxDLEVBQVFtUSxTQUFVblEsRUFBUTZzQyxVQUFXN3NDLEVBQVE4akMsTUFBTzlqQyxFQUFRdXNCLFdBQVl2c0IsRUFBUWlZLHVCQUNqSzhELFNBQ3JDLEtBQUssRUFFRCxPQURBcGxCLEVBQUdqSSxPQUNJLENBQUMsRUFBY20vQyxXQVUxQ2xjLEVBQXFCNW1DLFVBQVVneEIsTUFBUSxXQUNuQyxJQUFJM21CLEVBQVExSixLQUdaLE9BRkE2RixHQUFRN0YsS0FBS29pRCxRQUFTLHdDQUN0QnY4QyxFQUF1QixPQUFoQjdGLEtBQUtrUSxPQUFpQixtQ0FDdEIyckIsR0FBU0UsYUFBYS83QixLQUFLNGhELE9BQVF2bEIsR0FBZ0IsSUFBSTZaLEdBQWdCbDJDLEtBQUs2Z0MsYUFDOUVyK0IsTUFBSyxTQUFVeWEsR0FJaEIsT0FIQXZULEVBQU0yNEMsU0FBV3BsQyxFQUdWdlQsRUFBTTQ0Qyw2Q0FFWjkvQyxNQUFLLFdBSU4sT0FIQWtILEVBQU02NEMsMEJBQ043NEMsRUFBTTg0Qyx5QkFDTjk0QyxFQUFNKzRDLGlEQUNDLzRDLEVBQU0yNEMsU0FBUzlrQixlQUFlLHNCQUF1QixDQUFDZ0wsR0FBZTlyQixRQUFRLFNBQVV3Z0IsR0FBTyxPQUFPc0ssR0FBK0J0SyxTQUUxSXo2QixNQUFLLFNBQVVpbEMsR0FDaEIvOUIsRUFBTWc1QyxlQUFpQixJQUFJcjJCLEdBQWVvYixFQUE2Qi85QixFQUFNNmlCLHlCQUU1RS9wQixNQUFLLFdBQ05rSCxFQUFNMDNDLFVBQVcsS0FFaEJ0M0MsT0FBTSxTQUFVNm1CLEdBRWpCLE9BREFqbkIsRUFBTTI0QyxVQUFZMzRDLEVBQU0yNEMsU0FBU3QwQyxRQUMxQmhNLFFBQVFFLE9BQU8wdUIsT0FHOUJzVixFQUFxQjVtQyxVQUFVc2pELHdCQUEwQixTQUFVakIsR0FDL0QsSUFBSWg0QyxFQUFRMUosS0FTWixPQVJBQSxLQUFLMGhELHFCQUF1QixTQUFVa0IsR0FBZ0IsT0FBT3A5QyxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ2hHLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQUlqTCxLQUFLb2lELFFBQ0UsQ0FBQyxFQUFjVixFQUFxQmtCLElBRXhDLENBQUMsVUFHVGxCLEVBQXFCMWhELEtBQUtxaEQsWUFFckNwYixFQUFxQjVtQyxVQUFVd2pELDJCQUE2QixTQUFVQyxHQUNsRSxJQUFJcDVDLEVBQVExSixLQUNaQSxLQUFLcWlELFNBQVNqbEIsMEJBQXlCLFNBQVV6ZSxHQUFTLE9BQU9uWixFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3BHLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxPQUEyQixPQUFyQjRiLEVBQU1va0MsV0FBNkIsQ0FBQyxFQUFhLEdBQ2hELENBQUMsRUFBYUQsS0FDekIsS0FBSyxFQUNENzNDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLGNBS2hDa2pDLEVBQXFCNW1DLFVBQVUyakQsa0JBQW9CLFNBQVVuSixHQUN6RCxJQUFJbndDLEVBQVExSixLQUNSQSxLQUFLNjVDLGlCQUFtQkEsSUFDeEI3NUMsS0FBSzY1QyxlQUFpQkEsRUFHdEI3NUMsS0FBS280QyxNQUFNdm5CLGtCQUFpQixXQUFjLE9BQU9yckIsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUNwRixPQUFPbEUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsT0FBSy9DLEtBQUtvaUQsUUFDSCxDQUFDLEVBQWFwaUQsS0FBS3NpRCwyQ0FEQSxDQUFDLEVBQWEsR0FFNUMsS0FBSyxFQUNEcjNDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLGVBWXBDa2pDLEVBQXFCNW1DLFVBQVVpakQsd0NBQTBDLFdBQ3JFLElBQUk1NEMsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS3FpRCxTQUNQOWtCLGVBQWUsdUJBQXdCNGMsSUFBWSxTQUFVbGQsR0FFOUQsT0FEb0JnbUIsR0FBb0JobUIsR0FFbkNpQyxJQUFJLElBQUltWSxHQUFpQjN0QyxFQUFNaXdDLFNBQVV0d0MsS0FBS3NILE1BQU9qSCxFQUFNbXdDLGVBQWdCbndDLEVBQU1vd0MsZUFDakYxM0MsTUFBSyxXQUNOLEdBQUlzSCxFQUFNMjNDLFVBQ04sT0FBTzMzQyxFQUFNdzVDLG1CQUFtQmptQixHQUFLNzZCLE1BQUssU0FBVStnRCxHQUMzQ0EsSUFDRHo1QyxFQUFNMjNDLFdBQVksRUFDbEIzM0MsRUFBTTB1QyxNQUFNdm5CLGtCQUFpQixXQUN6QixPQUFPbm5CLEVBQU1nNEMsc0JBQXFCLGFBTWpEdC9DLE1BQUssV0FBYyxPQUFPc0gsRUFBTTA1QyxnQkFBZ0JubUIsTUFDaEQ3NkIsTUFBSyxTQUFVZ2hELEdBQ2hCLE9BQUkxNUMsRUFBTTIzQyxZQUFjK0IsRUFDYjE1QyxFQUFNMjVDLDBCQUEwQnBtQixHQUFLNzZCLE1BQUssV0FBYyxPQUFPLE9BRWpFZ2hELEdBQ0UxNUMsRUFBTTQ1Qyw0QkFBNEJybUIsR0FBSzc2QixNQUFLLFdBQWMsT0FBTyxXQU8vRTBILE9BQU0sU0FBVXRKLEdBQ2pCLElBQUtrSixFQUFNdXZDLHdCQUNQLE1BQU16NEMsRUFHVixPQURBbVgsRUFBTW9wQyxHQUFXLHlEQUEwRHZnRCxJQUNuRCxLQUV2QmdDLE1BQUssU0FBVTYrQyxHQUNaMzNDLEVBQU0yM0MsWUFBY0EsR0FDcEIzM0MsRUFBTTB1QyxNQUFNdm5CLGtCQUFpQixXQUN6QixPQUFPbm5CLEVBQU1nNEMscUJBQXFCTCxNQUcxQzMzQyxFQUFNMjNDLFVBQVlBLE1BRzFCcGIsRUFBcUI1bUMsVUFBVTZqRCxtQkFBcUIsU0FBVWptQixHQUMxRCxJQUFJdnpCLEVBQVExSixLQUVaLE9BRFl1akQsR0FBbUJ0bUIsR0FDbEIzK0IsSUFBSSszQyxHQUFnQnIzQyxLQUFLb0QsTUFBSyxTQUFVb2hELEdBQ2pELE9BQU9qcEIsR0FBbUJ2NEIsUUFBUTBILEVBQU0rNUMsY0FBY0QsUUFHOUR2ZCxFQUFxQjVtQyxVQUFVcWtELHFCQUF1QixTQUFVem1CLEdBRTVELE9BRG9CZ21CLEdBQW9CaG1CLEdBQ25CL25CLE9BQU9sVixLQUFLMjVDLFdBT3JDMVQsRUFBcUI1bUMsVUFBVXNrRCxvQ0FBc0MsV0FDakUsT0FBT24rQyxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQ0kwSixFQUFRMUosS0FDWixPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsT0FBTS9DLEtBQUtxaEQsV0FDTnJoRCxLQUFLNGpELFlBQVk1akQsS0FBS3loRCwwQkFsVDNCLE1Ba1RrRixDQUFDLEVBQWEsSUFDaEd6aEQsS0FBS3loRCwwQkFBNEJwNEMsS0FBS3NILE1BQy9CLENBQUMsRUFBYTNRLEtBQUt1OUIsZUFBZSxzQ0FBdUMsZ0NBQWdDLFNBQVVOLEdBQ2xILElBQUk0bUIsRUFBZ0I1ZCxFQUFxQmpKLFNBQVNDLEVBQUtvYSxHQUFpQjU2QixPQUN4RSxPQUFPb25DLEVBQWN6a0IsVUFBVWg5QixNQUFLLFNBQVUwaEQsR0FDMUMsSUFBSUMsRUFBU3I2QyxFQUFNczZDLG9CQUFvQkYsRUF2VG5ELE1Bd1RnQkcsRUFBV0gsRUFBZ0J2dUMsUUFBTyxTQUFVMnVDLEdBQVUsT0FBbUMsSUFBNUJILEVBQU90akQsUUFBUXlqRCxNQUVoRixPQUFPM3BCLEdBQW1CL29CLFFBQVF5eUMsR0FBVSxTQUFVRSxHQUNsRCxPQUFPTixFQUFjM3VDLE9BQU9pdkMsRUFBZXhLLGFBQzVDdjNDLE1BQUssV0FBYyxPQUFPNmhELGFBRzdDLEtBQUssRUFDaUJoNUMsRUFBR2pJLE9BTUx3TyxTQUFRLFNBQVUyeUMsR0FDOUJ6NkMsRUFBTXdHLE9BQU84eEMsYUFBYW9DLFdBQVcxNkMsRUFBTTI2Qyw2QkFBNkJGLEVBQWV4SyxjQUUzRjF1QyxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFBRyxNQUFPLENBQUMsV0FTaENrakMsRUFBcUI1bUMsVUFBVW9qRCwrQ0FBaUQsV0FDNUUsSUFBSS80QyxFQUFRMUosS0FDWkEsS0FBS3doRCx3QkFBMEJ4aEQsS0FBS280QyxNQUFNdm1CLGtCQUFrQmpILEdBQVEwNUIsc0JBdFVsQyxLQXNVOEYsV0FDNUgsT0FBTzU2QyxFQUFNNDRDLDBDQUNSOS9DLE1BQUssV0FBYyxPQUFPa0gsRUFBTWk2Qyx5Q0FDaENuaEQsTUFBSyxXQUFjLE9BQU9rSCxFQUFNKzRDLHdEQUk3Q3hjLEVBQXFCNW1DLFVBQVVva0QsY0FBZ0IsU0FBVVMsR0FDckQsUUFBT0EsR0FBU0EsRUFBT2xMLFVBQVloNUMsS0FBSzI1QyxVQVM1QzFULEVBQXFCNW1DLFVBQVUrakQsZ0JBQWtCLFNBQVVubUIsR0FDdkQsSUFBSXZ6QixFQUFRMUosS0FFWixPQURZdWpELEdBQW1CdG1CLEdBRTFCMytCLElBQUkrM0MsR0FBZ0JyM0MsS0FDcEJvRCxNQUFLLFNBQVVtaUQsR0FZaEIsR0FYNkMsT0FBbkJBLEdBQ3RCNzZDLEVBQU1rNkMsWUFBWVcsRUFBZXJMLGlCQXZXZixPQXdXakJ4dkMsRUFBTTg2QyxnQkFBZ0JELEVBQWV2TCxTQVNqQixDQUNyQixHQUFJdHZDLEVBQU0rNUMsY0FBY2MsSUFBbUI3NkMsRUFBTW13QyxlQUM3QyxPQUFPLEVBRVgsSUFBS253QyxFQUFNKzVDLGNBQWNjLEdBQWlCLENBQ3RDLElBQUtBLEVBQWV0TCx3QkFhaEIsTUFBTSxJQUFJL3lCLEVBQWVqQixFQUFLVyxvQkFBcUJxN0IsSUFFdkQsT0FBTyxHQUdmLFNBQUl2M0MsRUFBTW13QyxpQkFBa0Jud0MsRUFBTW93QyxlQUczQm1KLEdBQW9CaG1CLEdBQ3RCbUMsVUFDQWg5QixNQUFLLFNBQVUwaEQsR0FnQmhCLFlBQThCdjZDLElBYkxHLEVBQU1zNkMsb0JBQW9CRixFQWhaakMsS0FnWitFVyxNQUFLLFNBQVVDLEdBQzVHLEdBQUloN0MsRUFBTWl3QyxXQUFhK0ssRUFBWS9LLFNBQVUsQ0FDekMsSUFBSWdMLEdBQW9DajdDLEVBQU1td0MsZ0JBQWtCNkssRUFBWTdLLGVBQ3hFK0ssR0FBa0NsN0MsRUFBTW93QyxjQUFnQjRLLEVBQVk1SyxhQUNwRStLLEVBQWlDbjdDLEVBQU1td0MsaUJBQW1CNkssRUFBWTdLLGVBQzFFLEdBQUk4SyxHQUNDQyxHQUNHQyxFQUNKLE9BQU8sRUFHZixPQUFPLFdBS2R6aUQsTUFBSyxTQUFVZ2hELEdBSWhCLE9BSEkxNUMsRUFBTTIzQyxZQUFjK0IsR0FDcEJ6ckMsRUFBTW9wQyxHQUFXLFdBQWFxQyxFQUFrQixLQUFPLFVBQVksa0NBRWhFQSxNQUdmbmQsRUFBcUI1bUMsVUFBVXlsRCxTQUFXLFdBQ3RDLE9BQU90L0MsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJMEosRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQVdELE9BUkEvQyxLQUFLb2hELFVBQVcsRUFDaEJwaEQsS0FBSytrRCxvQkFDRC9rRCxLQUFLd2hELDBCQUNMeGhELEtBQUt3aEQsd0JBQXdCOXdCLFNBQzdCMXdCLEtBQUt3aEQsd0JBQTBCLE1BRW5DeGhELEtBQUtnbEQsMEJBQ0xobEQsS0FBS2lsRCx5QkFDRSxDQUFDLEVBQWFqbEQsS0FBS3FpRCxTQUFTOWtCLGVBQWUsdUJBQXdCLENBQUM4WSxHQUFnQjU1QixNQUFPNDZCLEdBQWlCNTZCLFFBQVEsU0FBVXdnQixHQUM3SCxPQUFPdnpCLEVBQU0yNUMsMEJBQTBCcG1CLEdBQUs3NkIsTUFBSyxXQUM3QyxPQUFPc0gsRUFBTWc2QyxxQkFBcUJ6bUIsVUFHbEQsS0FBSyxFQU1ELE9BTEFoeUIsRUFBR2pJLE9BQ0hoRCxLQUFLcWlELFNBQVN0MEMsUUFHZC9OLEtBQUtrbEQsMkJBQ0UsQ0FBQyxXQVM1QmpmLEVBQXFCNW1DLFVBQVUya0Qsb0JBQXNCLFNBQVVtQixFQUFTQyxHQUNwRSxJQUFJMTdDLEVBQVExSixLQUNaLE9BQU9tbEQsRUFBUTV2QyxRQUFPLFNBQVUydUMsR0FDNUIsT0FBT3g2QyxFQUFNazZDLFlBQVlNLEVBQU90SyxhQUFjd0wsS0FDekMxN0MsRUFBTTg2QyxnQkFBZ0JOLEVBQU92SyxjQUcxQzFULEVBQXFCNW1DLFVBQVVnbUQsaUJBQW1CLFdBQzlDLElBQUkzN0MsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS3FpRCxTQUFTOWtCLGVBQWUsc0JBQXVCLENBQUM4WixHQUFpQjU2QixRQUFRLFNBQVV3Z0IsR0FDM0YsT0FBT2dtQixHQUFvQmhtQixHQUN0Qm1DLFVBQ0FoOUIsTUFBSyxTQUFVK2lELEdBQ2hCLE9BQU96N0MsRUFBTXM2QyxvQkFBb0JtQixFQTlkekIsTUE4ZHFEbDBDLEtBQUksU0FBVXEwQyxHQUFrQixPQUFPQSxFQUFlM0wsbUJBSS9IMVQsRUFBcUJzZixpQkFBbUIsU0FBVTM1QixHQUM5QyxPQUFPcG1CLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSTRoRCxFQUNKLE9BQU9wOEMsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsT0FBS2tqQyxFQUFxQmhLLGVBRzFCMmxCLEVBQVNoMkIsRUFBaUJxYSxFQUFxQjRiLGNBQ3hDLENBQUMsRUFBYWhtQixHQUFTM21CLE9BQU8wc0MsS0FIMUIsQ0FBQyxFQUFjNy9DLFFBQVFDLFdBSXRDLEtBQUssRUFFRCxPQURBaUosRUFBR2pJLE9BQ0ksQ0FBQyxXQUs1QjdFLE9BQU9DLGVBQWU2bkMsRUFBcUI1bUMsVUFBVyxVQUFXLENBQzdEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUtvaEQsVUFFaEIvaUQsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjB1QixFQUFxQjVtQyxVQUFVbW1ELGlCQUFtQixTQUFVdGtCLEdBRXhELE9BREFyN0IsRUFBTzdGLEtBQUtvaUQsUUFBUyxrRUFDZHpoQixHQUF1Qk0sUUFBUUMsRUFBTWxoQyxLQUFLNmdDLFdBQVk3Z0MsS0FBSzhnQyxhQUFjOWdDLEtBQUsrZ0Msb0JBRXpGa0YsRUFBcUI1bUMsVUFBVW9tRCxlQUFpQixXQUU1QyxPQURBNS9DLEVBQU83RixLQUFLb2lELFFBQVMsZ0VBQ2RwaUQsS0FBSzhoRCxhQUVoQjdiLEVBQXFCNW1DLFVBQVVxbUQsdUJBQXlCLFdBRXBELE9BREE3L0MsRUFBTzdGLEtBQUtvaUQsUUFBUyx3RUFDZHBpRCxLQUFLK2hELHFCQUVoQjliLEVBQXFCNW1DLFVBQVVzbUQsZ0JBQWtCLFdBRTdDLE9BREE5L0MsRUFBTzdGLEtBQUtvaUQsUUFBUyxpRUFDZHBpRCxLQUFLOGdDLGNBRWhCbUYsRUFBcUI1bUMsVUFBVWsrQixlQUFpQixTQUFVeEksRUFBUW4yQixFQUFNZ25ELEdBQ3BFLElBQUlsOEMsRUFBUTFKLEtBQ1oyWCxFQUFNb3BDLEdBQVcsd0JBQXlCaHNCLEdBRTFDLElBU0k4d0IsRUFUQWxvQixFQUFhLytCLEVBQUtvL0IsU0FBUyxjQUUzQjhuQixFQURXbG5ELEVBQUttL0IsV0FBVyxZQUV6QkosRUFDSSxzQkFDQSxXQUNKQSxFQUNJLHVCQUNBLFlBSVYsT0FBTzM5QixLQUFLcWlELFNBQ1A5a0IsZUFBZXVvQixFQUFjM0wsSUFBWSxTQUFVNEwsR0FFcEQsT0FEQUYsRUFBeUIsSUFBSTNFLEdBQXFCNkUsRUFBYXI4QyxFQUFNZzVDLGVBQWV0Z0QsUUFDdkUsc0JBQVR4RCxHQUNTLGlDQUFUQSxFQU1POEssRUFBTXc1QyxtQkFBbUI2QyxHQUMzQjNqRCxNQUFLLFNBQVU0akQsR0FDaEIsUUFBSUEsR0FHR3Q4QyxFQUFNMDVDLGdCQUFnQjJDLE1BRTVCM2pELE1BQUssU0FBVTRqRCxHQUNoQixJQUFLQSxFQU1ELE1BTEFsaUQsRUFBTSw4Q0FBZ0RpeEIsRUFBUyxNQUMvRHJyQixFQUFNMjNDLFdBQVksRUFDbEIzM0MsRUFBTTB1QyxNQUFNdm5CLGtCQUFpQixXQUN6QixPQUFPbm5CLEVBQU1nNEMsc0JBQXFCLE1BRWhDLElBQUl4N0IsRUFBZWpCLEVBQUtXLG9CQUFxQm83QixJQUV2RCxPQUFPNEUsRUFBcUJDLE1BRTNCempELE1BQUssU0FBVUUsR0FDaEIsT0FBT29ILEVBQU00NUMsNEJBQTRCeUMsR0FBYTNqRCxNQUFLLFdBQWMsT0FBT0UsUUFJN0VvSCxFQUFNdThDLDhCQUE4QkYsR0FBYTNqRCxNQUFLLFdBQ3pELE9BQU93akQsRUFBcUJDLFNBSW5DcmpELE1BQUssU0FBVUYsR0FFaEIsT0FEQXVqRCxFQUF1Qi9FLHdCQUNoQngrQyxNQVNmMmpDLEVBQXFCNW1DLFVBQVU0bUQsOEJBQWdDLFNBQVVocEIsR0FDckUsSUFBSXZ6QixFQUFRMUosS0FFWixPQURZdWpELEdBQW1CdG1CLEdBQ2xCMytCLElBQUkrM0MsR0FBZ0JyM0MsS0FBS29ELE1BQUssU0FBVW1pRCxHQUlqRCxHQUg2QyxPQUFuQkEsR0FDdEI3NkMsRUFBTWs2QyxZQUFZVyxFQUFlckwsaUJBM2tCZixPQTRrQmpCeHZDLEVBQU04NkMsZ0JBQWdCRCxFQUFldkwsV0FDZHR2QyxFQUFNKzVDLGNBQWNjLEtBQ3ZDQSxFQUFldEwsd0JBQ2hCLE1BQU0sSUFBSS95QixFQUFlakIsRUFBS1csb0JBQXFCcTdCLFFBU25FaGIsRUFBcUI1bUMsVUFBVWlrRCw0QkFBOEIsU0FBVXJtQixHQUNuRSxJQUFJaXBCLEVBQWEsSUFBSTdQLEdBQWdCcjJDLEtBQUsyNUMsU0FBVTM1QyxLQUFLaTVDLHdCQUF5QjV2QyxLQUFLc0gsT0FDdkYsT0FBTzR5QyxHQUFtQnRtQixHQUFLaUMsSUFBSW1YLEdBQWdCcjNDLElBQUtrbkQsSUFFNURqZ0IsRUFBcUJoSyxZQUFjLFdBQy9CLE9BQU9KLEdBQVNJLGVBTXBCZ0ssRUFBcUJrZ0IsbUJBQXFCLFNBQVVDLEdBUWhELElBQUlqNkIsRUFBV2k2QixFQUFhejZCLFdBQVdPLFVBSXZDLE9BSEtrNkIsRUFBYXo2QixXQUFXMDZCLG9CQUN6Qmw2QixHQUFZLElBQU1pNkIsRUFBYXo2QixXQUFXUSxVQUV2QyxhQUFlaTZCLEVBQWF4NkIsZUFBaUIsSUFBTU8sRUFBVyxLQUd6RThaLEVBQXFCNW1DLFVBQVVna0QsMEJBQTRCLFNBQVVwbUIsR0FDakUsSUFBSXZ6QixFQUFRMUosS0FDUnljLEVBQVE4bUMsR0FBbUJ0bUIsR0FDL0IsT0FBT3hnQixFQUFNbmUsSUFBSSszQyxHQUFnQnIzQyxLQUFLb0QsTUFBSyxTQUFVb2hELEdBQ2pELE9BQUk5NUMsRUFBTSs1QyxjQUFjRCxJQUNwQjdyQyxFQUFNb3BDLEdBQVcsNEJBQ1Z0a0MsRUFBTXZILE9BQU9taEMsR0FBZ0JyM0MsTUFHN0J1N0IsR0FBbUJ2NEIsY0FLdENpa0MsRUFBcUI1bUMsVUFBVXVrRCxZQUFjLFNBQVVoSyxFQUFjME0sR0FDakUsSUFBSTMxQyxFQUFNdEgsS0FBS3NILE1BR2YsUUFBSWlwQyxFQUZnQmpwQyxFQUFNMjFDLE9BS2pCMU0sRUFKV2pwQyxLQUtoQjdNLEVBQU0sa0RBQW9EODFDLEVBQWUsTUFMekRqcEMsSUFNVCxLQUlmczFCLEVBQXFCNW1DLFVBQVVrakQsd0JBQTBCLFdBQ3JELElBQUk3NEMsRUFBUTFKLEtBQ1UsT0FBbEJBLEtBQUtvZixVQUNxQyxtQkFBbkNwZixLQUFLb2YsU0FBU21uQyxtQkFDckJ2bUQsS0FBS3VoRCwwQkFBNEIsV0FDN0I3M0MsRUFBTTB1QyxNQUFNdm5CLGtCQUFpQixXQUV6QixPQURBbm5CLEVBQU1vd0MsYUFBa0QsWUFBbkNwd0MsRUFBTTBWLFNBQVNvbkMsZ0JBQzdCOThDLEVBQU00NEMsOENBR3JCdGlELEtBQUtvZixTQUFTbW5DLGlCQUFpQixtQkFBb0J2bUQsS0FBS3VoRCwyQkFDeER2aEQsS0FBSzg1QyxhQUFpRCxZQUFsQzk1QyxLQUFLb2YsU0FBU29uQyxrQkFHMUN2Z0IsRUFBcUI1bUMsVUFBVTJsRCx3QkFBMEIsV0FDakRobEQsS0FBS3VoRCw0QkFDTDE3QyxFQUF5QixPQUFsQjdGLEtBQUtvZixVQUNrQyxtQkFBbkNwZixLQUFLb2YsU0FBU21uQyxpQkFBaUMseURBQzFEdm1ELEtBQUtvZixTQUFTcW5DLG9CQUFvQixtQkFBb0J6bUQsS0FBS3VoRCwyQkFDM0R2aEQsS0FBS3VoRCwwQkFBNEIsT0FhekN0YixFQUFxQjVtQyxVQUFVbWpELHVCQUF5QixXQUNwRCxJQUFJOTRDLEVBQVExSixLQUNnQyxtQkFBakNBLEtBQUtrUSxPQUFPcTJDLG1CQUNuQnZtRCxLQUFLc2hELG9CQUFzQixXQUl2QjUzQyxFQUFNcTdDLG9CQUNOcjdDLEVBQU0wdUMsTUFBTXZuQixrQkFBaUIsV0FHekIsT0FBT25uQixFQUFNbzdDLGVBR3JCOWtELEtBQUtrUSxPQUFPcTJDLGlCQUFpQixTQUFVdm1ELEtBQUtzaEQsdUJBR3BEcmIsRUFBcUI1bUMsVUFBVTRsRCx1QkFBeUIsV0FDaERqbEQsS0FBS3NoRCxzQkFDTHo3QyxFQUFrRCxtQkFBcEM3RixLQUFLa1EsT0FBT3UyQyxvQkFBb0MsMERBQzlEem1ELEtBQUtrUSxPQUFPdTJDLG9CQUFvQixTQUFVem1ELEtBQUtzaEQscUJBQy9DdGhELEtBQUtzaEQsb0JBQXNCLE9BUW5DcmIsRUFBcUI1bUMsVUFBVW1sRCxnQkFBa0IsU0FBVTdLLEdBQ3ZELElBQ0ksSUFBSStNLEVBQ0EsT0FEWTFtRCxLQUFLaWlELFdBQVcwRSxRQUFRM21ELEtBQUtxa0QsNkJBQTZCMUssSUFHMUUsT0FEQWhpQyxFQUFNb3BDLEdBQVcsV0FBYXBILEVBQVcsTUFBUStNLEVBQVksS0FBTyxVQUFZLDRCQUN6RUEsRUFFWCxNQUFPbG1ELEdBR0gsT0FEQXNELEVBQU1pOUMsR0FBVyxtQ0FBb0N2Z0QsSUFDOUMsSUFPZnlsQyxFQUFxQjVtQyxVQUFVMGxELGtCQUFvQixXQUMvQyxJQUNJL2tELEtBQUtpaUQsV0FBVzJFLFFBQVE1bUQsS0FBS3FrRCw2QkFBNkJya0QsS0FBSzI1QyxVQUFXdHhDLE9BQU9nQixLQUFLc0gsUUFFMUYsTUFBT25RLEdBRUhzRCxFQUFNLGtDQUFtQ3RELEtBSWpEeWxDLEVBQXFCNW1DLFVBQVU2bEQseUJBQTJCLFdBQ3RELElBQ0lsbEQsS0FBS2lpRCxXQUFXbUMsV0FBV3BrRCxLQUFLcWtELDZCQUE2QnJrRCxLQUFLMjVDLFdBRXRFLE1BQU9uNUMsTUFJWHlsQyxFQUFxQjVtQyxVQUFVZ2xELDZCQUErQixTQUFVMUssR0FDcEUsTUFBT2tOLG9CQUFtQzdtRCxLQUFLNHJCLGVBQWlCLElBQU0rdEIsR0FNMUUxVCxFQUFxQjRiLGNBQWdCLE9BQzlCNWIsRUF2cUI4QixHQXVyQnpDLFNBQVNvWixHQUF5QnZ3QyxHQUM5QixPQUFPdEosRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxJQWpCWixTQUFpQzZELEdBQzdCLE9BQVFBLEVBQUkxRSxPQUFTNmEsRUFBS1cscUJBQ3RCOVcsRUFBSS9JLFVBQVlpN0MsR0FlUjhGLENBQXdCaDRDLEdBSXhCLE1BQU1BLEVBRVYsT0FMSTZJLEVBQU1vcEMsR0FBVyxtQ0FLZCxDQUFDLFNBT3BCLFNBQVN3QyxHQUFtQnRtQixHQUN4QixPQUFPQSxFQUFJeGdCLE1BQU00NUIsR0FBZ0I1NUIsT0FLckMsU0FBU3dtQyxHQUFvQmhtQixHQUN6QixPQUFPQSxFQUFJeGdCLE1BQU00NkIsR0FBaUI1NkIsT0FHdEMsSUFBSWtsQyxHQUFzQyxXQUN0QyxTQUFTQSxFQUFxQjFrQyxFQUFJM0wsR0FDOUJ0UixLQUFLaWQsR0FBS0EsRUFDVmpkLEtBQUsrbUQsYUFBZSxLQUNwQi9tRCxLQUFLNCtDLGlCQUFtQixJQUFJVSxHQUFvQnQvQyxLQUFNc1IsR0F1STFELE9BcklBcXdDLEVBQXFCdGlELFVBQVVxZ0QsdUJBQXlCLFNBQVV6aUIsR0FDOUQsSUFBSStwQixFQUFrQmhuRCxLQUFLaW5ELHFCQUFxQmhxQixHQUVoRCxPQUR5Qmo5QixLQUFLaWQsR0FBR3dvQyxpQkFBaUIvYyxlQUFlekwsR0FDdkM3NkIsTUFBSyxTQUFVeWxDLEdBQ3JDLE9BQU9tZixFQUFnQjVrRCxNQUFLLFNBQVU4a0QsR0FBWSxPQUFPcmYsRUFBY3FmLFNBRy9FdkYsRUFBcUJ0aUQsVUFBVTRuRCxxQkFBdUIsU0FBVWhxQixHQUM1RCxJQUFJa3FCLEVBQWdCLEVBQ3BCLE9BQU9ubkQsS0FBSzQvQyxzQ0FBc0MzaUIsR0FBSyxTQUFVbjZCLEdBQzdEcWtELE9BQ0Qva0QsTUFBSyxXQUFjLE9BQU8ra0QsTUFFakN4RixFQUFxQnRpRCxVQUFVaXBDLGNBQWdCLFNBQVVyTCxFQUFLdDZCLEdBQzFELE9BQU8zQyxLQUFLaWQsR0FBR3dvQyxpQkFBaUJuZCxjQUFjckwsRUFBS3Q2QixJQUV2RGcvQyxFQUFxQnRpRCxVQUFVdWdELHNDQUF3QyxTQUFVM2lCLEVBQUt0NkIsR0FDbEYsT0FBTzNDLEtBQUtvbkQsd0JBQXdCbnFCLEdBQUssU0FBVTdELEVBQVEzTSxHQUN2RCxPQUFPOXBCLEVBQUU4cEIsT0FHakJrMUIsRUFBcUJ0aUQsVUFBVWdvRCxnQkFBa0IsU0FBVU4sR0FDdkQvbUQsS0FBSyttRCxhQUFlQSxHQUV4QnBGLEVBQXFCdGlELFVBQVU4cEMsYUFBZSxTQUFVbE0sRUFBS2orQixHQUN6RCxPQUFPMDVDLEdBQWlCemIsRUFBS2orQixJQUVqQzJpRCxFQUFxQnRpRCxVQUFVZ3FDLGdCQUFrQixTQUFVcE0sRUFBS2orQixHQUM1RCxPQUFPMDVDLEdBQWlCemIsRUFBS2orQixJQUVqQzJpRCxFQUFxQnRpRCxVQUFVOG9DLGNBQWdCLFNBQVVsTCxFQUFLMEcsRUFBWXlFLEdBQ3RFLE9BQU9wb0MsS0FBS2lkLEdBQ1B3b0MsaUJBQ0F0ZCxjQUFjbEwsRUFBSzBHLEVBQVl5RSxJQUV4Q3VaLEVBQXFCdGlELFVBQVUrbEMsd0JBQTBCLFNBQVVuSSxFQUFLaitCLEdBQ3BFLE9BQU8wNUMsR0FBaUJ6YixFQUFLaitCLElBUWpDMmlELEVBQXFCdGlELFVBQVVpb0QsU0FBVyxTQUFVcnFCLEVBQUs3RCxHQUNyRCxPQUFJcDVCLEtBQUsrbUQsYUFBYXRoQixZQUFZck0sR0FDdkJtQixHQUFtQnY0QixTQUFRLEdBLzBKOUMsU0FBa0NpN0IsRUFBSzdELEdBQ25DLElBQUkyUCxHQUFRLEVBQ1osT0FBTzdHLEdBQW9CakYsR0FDdEIwQyxlQUFjLFNBQVVpQixHQUN6QixPQUFPOEUsR0FBeUJ6SSxFQUFLMkQsRUFBUXhILEdBQVFoM0IsTUFBSyxTQUFVcWpDLEdBSWhFLE9BSElBLElBQ0FzRCxHQUFRLEdBRUx4TyxHQUFtQnY0QixTQUFTeWpDLFNBR3RDcmpDLE1BQUssV0FBYyxPQUFPMm1DLEtBdTBKaEJ3ZSxDQUF5QnRxQixFQUFLN0QsSUFHN0N1b0IsRUFBcUJ0aUQsVUFBVXlnRCx3QkFBMEIsU0FBVTdpQixFQUFLMEcsR0FDcEUsSUFBSWo2QixFQUFRMUosS0FFUnduRCxFQURnQnhuRCxLQUFLaWQsR0FBR3lvQyx5QkFDSzlRLGtCQUM3QmpaLEVBQVcsR0FDWDhyQixFQUFnQixFQWlCcEIsT0FoQmdCem5ELEtBQUtvbkQsd0JBQXdCbnFCLEdBQUssU0FBVTdELEVBQVEzTSxHQUNoRSxHQUFJQSxHQUFrQmtYLEVBQVksQ0FDOUIsSUFBSXBrQyxFQUFJbUssRUFBTTQ5QyxTQUFTcnFCLEVBQUs3RCxHQUFRaDNCLE1BQUssU0FBVWtsRCxHQUMvQyxJQUFLQSxFQUlELE9BSEFHLElBR09ELEVBQWF2VixTQUFTaFYsRUFBSzdELEdBQVFoM0IsTUFBSyxXQUUzQyxPQURBb2xELEVBQWF4VixZQUFZNVksR0FDbEI2UCxHQUFvQmhNLEdBQUsvbkIsT0FxRWpELENBQUMsRUFBRzBkLEdBckVrRXdHLEVBcUV2RDNLLGNBakVWa04sRUFBU2w0QixLQUFLbEUsT0FJakI2QyxNQUFLLFdBQWMsT0FBT200QixHQUFtQlcsUUFBUVMsTUFDckR2NUIsTUFBSyxXQUFjLE9BQU9vbEQsRUFBYWxuRCxNQUFNMjhCLE1BQzdDNzZCLE1BQUssV0FBYyxPQUFPcWxELE1BRW5DOUYsRUFBcUJ0aUQsVUFBVXFvRCxhQUFlLFNBQVV6cUIsRUFBSzBLLEdBQ3pELElBQUljLEVBQVVkLEVBQVdpVCxtQkFBbUIzZCxFQUFJcWIsdUJBQ2hELE9BQU90NEMsS0FBS2lkLEdBQUd3b0MsaUJBQWlCMWQsaUJBQWlCOUssRUFBS3dMLElBRTFEa1osRUFBcUJ0aUQsVUFBVXNvRCxvQkFBc0IsU0FBVTFxQixFQUFLaitCLEdBQ2hFLE9BQU8wNUMsR0FBaUJ6YixFQUFLaitCLElBUWpDMmlELEVBQXFCdGlELFVBQVUrbkQsd0JBQTBCLFNBQVVucUIsRUFBS3Q2QixHQUNwRSxJQUVJaWxELEVBRkFuckMsRUFBUXdzQixHQUFvQmhNLEdBQzVCNHFCLEVBQWV4N0IsR0FBZVcsUUFFbEMsT0FBT3ZRLEVBQ0ZnakIsUUFBUSxDQUNUdGpCLE1BQU8rc0IsR0FBaUJLLHVCQUN6QixTQUFVdCtCLEVBQUlDLEdBQ2IsSUFBSStzQixFQUFXaHRCLEVBQUcsR0FDZHdqQixHQUQyQnhqQixFQUFHLEdBQ3ZCQyxFQUFHdWpCLE1BQU1oQyxFQUFpQnZoQixFQUFHdWhCLGVBQ3ZCLElBQWJ3TCxHQUdJNHZCLElBQWlCeDdCLEdBQWVXLFNBQ2hDcnFCLEVBQUUsSUFBSXlzQixHQUFZeGpCLEdBQU9nOEMsSUFBWUMsR0FNekNBLEVBQWVwN0IsRUFDZm03QixFQUFXbjVCLEdBS1hvNUIsRUFBZXg3QixHQUFlVyxXQUdqQzVxQixNQUFLLFdBSUZ5bEQsSUFBaUJ4N0IsR0FBZVcsU0FDaENycUIsRUFBRSxJQUFJeXNCLEdBQVl4akIsR0FBT2c4QyxJQUFZQyxPQUlqRGxHLEVBQXFCdGlELFVBQVUyZ0QsYUFBZSxTQUFVL2lCLEdBQ3BELE9BQU9qOUIsS0FBS2lkLEdBQUd5b0MseUJBQXlCNVEsUUFBUTdYLElBRTdDMGtCLEVBM0k4QixHQXVKekMsU0FBU2pKLEdBQWlCemIsRUFBS2orQixHQUMzQixPQUFPaXFDLEdBQW9CaE0sR0FBS2lDLElBSnBDLFNBQXFCbGdDLEVBQUt5dEIsR0FDdEIsT0FBTyxJQUFJeWMsR0FBaUIsRUFBR3RXLEdBQU81ekIsRUFBSXl2QixNQUFPaEMsR0FHYnE3QixDQUFZOW9ELEVBQUtpK0IsRUFBSXFiOzs7Ozs7Ozs7Ozs7Ozs7O0dBcUI3RCxJQUFJeVAsR0FBY25oQyxPQUtkb2hDLEdBQW1CRCxHQUFZQyxvQkFBc0JwM0MsS0FBS2ltQixJQUFJLEVBQUcsSUFBTSxHQUt2RW94QixHQUFtQkYsR0FBWUUsa0JBQW9CcjNDLEtBQUtpbUIsSUFBSSxFQUFHLElBQU0sRUFPckVxeEIsR0FBWUgsR0FBWUcsV0FDeEIsU0FBV3hwRCxHQUNQLE1BQXdCLGlCQUFWQSxHQUNWeXBELFNBQVN6cEQsSUFDVGtTLEtBQUtDLE1BQU1uUyxLQUFXQSxHQUtsQyxTQUFTMHBELEdBQWtCMXBELEdBQ3ZCLE9BQU9BLFFBTVgsU0FBUzJwRCxHQUFjM3BELEdBQ25CLE9BQVF3cEQsR0FBVXhwRCxJQUNkQSxHQUFTdXBELElBQ1R2cEQsR0FBU3NwRDs7Ozs7Ozs7Ozs7Ozs7OztHQTBCakIsSUE2SUlNLEdBN0lBQyxHQUF3QixXQVN4QixTQUFTQSxFQUFPOTVCLEVBQU0rNUIsRUFBaUJDLEVBQVNDLEVBQVNuN0IsRUFBT283QixFQUFTQyxRQUM3QyxJQUFwQkosSUFBOEJBLEVBQWtCLFdBQ3BDLElBQVpDLElBQXNCQSxFQUFVLFNBQ3BCLElBQVpDLElBQXNCQSxFQUFVLFNBQ3RCLElBQVZuN0IsSUFBb0JBLEVBQVEsV0FDaEIsSUFBWm83QixJQUFzQkEsRUFBVSxXQUN0QixJQUFWQyxJQUFvQkEsRUFBUSxNQUNoQzVvRCxLQUFLeXVCLEtBQU9BLEVBQ1p6dUIsS0FBS3dvRCxnQkFBa0JBLEVBQ3ZCeG9ELEtBQUt5b0QsUUFBVUEsRUFDZnpvRCxLQUFLMG9ELFFBQVVBLEVBQ2Yxb0QsS0FBS3V0QixNQUFRQSxFQUNidnRCLEtBQUsyb0QsUUFBVUEsRUFDZjNvRCxLQUFLNG9ELE1BQVFBLEVBQ2I1b0QsS0FBSzZvRCxvQkFBc0IsS0FtRy9CLE9BakdBTixFQUFPbHBELFVBQVV1cEMsWUFBYyxXQUMzQixHQUFpQyxPQUE3QjVvQyxLQUFLNm9ELG9CQUE4QixDQUNuQyxJQUFJamdCLEVBQWM1b0MsS0FBS3l1QixLQUFLRixrQkFDQyxPQUF6QnZ1QixLQUFLd29ELGtCQUNMNWYsR0FBZSxPQUFTNW9DLEtBQUt3b0QsaUJBRWpDNWYsR0FBZSxNQUNmLElBQUssSUFBSWorQixFQUFLLEVBQUdNLEVBQUtqTCxLQUFLMG9ELFFBQVMvOUMsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBRXREaStCLEdBRGEzOUIsRUFBR04sR0FDTWkrQixjQUN0QkEsR0FBZSxJQUVuQkEsR0FBZSxPQUVmLElBQUssSUFBSTE5QixFQUFLLEVBQUd5SixFQUFLM1UsS0FBS3lvRCxRQUFTdjlDLEVBQUt5SixFQUFHdFUsT0FBUTZLLElBQU0sQ0FFdEQwOUIsR0FEY2owQixFQUFHekosR0FDTTA5QixjQUN2QkEsR0FBZSxJQUVkd2YsR0FBa0Jwb0QsS0FBS3V0QixTQUN4QnFiLEdBQWUsTUFDZkEsR0FBZTVvQyxLQUFLdXRCLE9BRXBCdnRCLEtBQUsyb0QsVUFDTC9mLEdBQWUsT0FDZkEsR0FBZTVvQyxLQUFLMm9ELFFBQVEvZixlQUU1QjVvQyxLQUFLNG9ELFFBQ0xoZ0IsR0FBZSxPQUNmQSxHQUFlNW9DLEtBQUs0b0QsTUFBTWhnQixlQUU5QjVvQyxLQUFLNm9ELG9CQUFzQmpnQixFQUUvQixPQUFPNW9DLEtBQUs2b0QscUJBRWhCTixFQUFPbHBELFVBQVVtTSxTQUFXLFdBQ3hCLElBQUlyRixFQUFNbkcsS0FBS3l1QixLQUFLRixrQkFtQnBCLE9BbEI2QixPQUF6QnZ1QixLQUFLd29ELGtCQUNMcmlELEdBQU8sb0JBQXNCbkcsS0FBS3dvRCxpQkFFbEN4b0QsS0FBSzBvRCxRQUFRcm9ELE9BQVMsSUFDdEI4RixHQUFPLGVBQWlCbkcsS0FBSzBvRCxRQUFRNWdELEtBQUssTUFBUSxLQUVqRHNnRCxHQUFrQnBvRCxLQUFLdXRCLFNBQ3hCcG5CLEdBQU8sWUFBY25HLEtBQUt1dEIsT0FFMUJ2dEIsS0FBS3lvRCxRQUFRcG9ELE9BQVMsSUFDdEI4RixHQUFPLGVBQWlCbkcsS0FBS3lvRCxRQUFRM2dELEtBQUssTUFBUSxLQUVsRDlILEtBQUsyb0QsVUFDTHhpRCxHQUFPLGNBQWdCbkcsS0FBSzJvRCxRQUFRL2YsZUFFcEM1b0MsS0FBSzRvRCxRQUNMemlELEdBQU8sWUFBY25HLEtBQUs0b0QsTUFBTWhnQixlQUU3QixVQUFZemlDLEVBQU0sS0FFN0JvaUQsRUFBT2xwRCxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ2pDLEdBQUl2ckIsS0FBS3V0QixRQUFVaEMsRUFBTWdDLE1BQ3JCLE9BQU8sRUFFWCxHQUFJdnRCLEtBQUt5b0QsUUFBUXBvRCxTQUFXa3JCLEVBQU1rOUIsUUFBUXBvRCxPQUN0QyxPQUFPLEVBRVgsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS3lvRCxRQUFRcG9ELE9BQVE1QyxJQUNyQyxJQUFLdUMsS0FBS3lvRCxRQUFRaHJELEdBQUc2c0IsUUFBUWlCLEVBQU1rOUIsUUFBUWhyRCxJQUN2QyxPQUFPLEVBR2YsR0FBSXVDLEtBQUswb0QsUUFBUXJvRCxTQUFXa3JCLEVBQU1tOUIsUUFBUXJvRCxPQUN0QyxPQUFPLEVBRVgsSUFBUzVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUswb0QsUUFBUXJvRCxPQUFRNUMsSUFDckMsSUFBS3VDLEtBQUswb0QsUUFBUWpyRCxHQUFHNnNCLFFBQVFpQixFQUFNbTlCLFFBQVFqckQsSUFDdkMsT0FBTyxFQUdmLE9BQUl1QyxLQUFLd29ELGtCQUFvQmo5QixFQUFNaTlCLG9CQUc5QnhvRCxLQUFLeXVCLEtBQUtuRSxRQUFRaUIsRUFBTWtELFVBR1IsT0FBakJ6dUIsS0FBSzJvRCxTQUNGM29ELEtBQUsyb0QsUUFBUXIrQixRQUFRaUIsRUFBTW85QixTQUNWLE9BQWxCcDlCLEVBQU1vOUIsV0FHVSxPQUFmM29ELEtBQUs0b0QsTUFDTjVvRCxLQUFLNG9ELE1BQU10K0IsUUFBUWlCLEVBQU1xOUIsT0FDVCxPQUFoQnI5QixFQUFNcTlCLFVBRWhCTCxFQUFPbHBELFVBQVVzbEMsZ0JBQWtCLFdBQy9CLE9BQVF2VixHQUFZQyxjQUFjcnZCLEtBQUt5dUIsT0FDVixPQUF6Qnp1QixLQUFLd29ELGlCQUNtQixJQUF4QnhvRCxLQUFLMG9ELFFBQVFyb0QsUUFFZGtvRCxFQTFIZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7SUE4STNCLFNBQVdELEdBQ1BBLEVBQWlCLE1BQUksSUFDckJBLEVBQWdCLEtBQUksSUFGeEIsQ0FHR0EsS0FBY0EsR0FBWSxLQU03QixJQUFJUSxHQUF1QixXQUt2QixTQUFTQSxFQUFNcjZCLEVBQU0rNUIsRUFBaUJPLEVBQWlCTCxFQUFTbjdCLEVBQU95N0IsRUFBV0wsRUFBU0MsUUFDL0QsSUFBcEJKLElBQThCQSxFQUFrQixXQUM1QixJQUFwQk8sSUFBOEJBLEVBQWtCLFNBQ3BDLElBQVpMLElBQXNCQSxFQUFVLFNBQ3RCLElBQVZuN0IsSUFBb0JBLEVBQVEsV0FDZCxJQUFkeTdCLElBQXdCQSxFQUFZVixHQUFVVyxZQUNsQyxJQUFaTixJQUFzQkEsRUFBVSxXQUN0QixJQUFWQyxJQUFvQkEsRUFBUSxNQUNoQzVvRCxLQUFLeXVCLEtBQU9BLEVBQ1p6dUIsS0FBS3dvRCxnQkFBa0JBLEVBQ3ZCeG9ELEtBQUsrb0QsZ0JBQWtCQSxFQUN2Qi9vRCxLQUFLMG9ELFFBQVVBLEVBQ2Yxb0QsS0FBS3V0QixNQUFRQSxFQUNidnRCLEtBQUtncEQsVUFBWUEsRUFDakJocEQsS0FBSzJvRCxRQUFVQSxFQUNmM29ELEtBQUs0b0QsTUFBUUEsRUFDYjVvRCxLQUFLa3BELGdCQUFrQixLQUV2QmxwRCxLQUFLbXBELGVBQWlCLEtBQ2xCbnBELEtBQUsyb0QsU0FDTDNvRCxLQUFLb3BELGlCQUFpQnBwRCxLQUFLMm9ELFNBRTNCM29ELEtBQUs0b0QsT0FDTDVvRCxLQUFLb3BELGlCQUFpQnBwRCxLQUFLNG9ELE9Bd1FuQyxPQXJRQUUsRUFBTU8sT0FBUyxTQUFVNTZCLEdBQ3JCLE9BQU8sSUFBSXE2QixFQUFNcjZCLElBRXJCdHdCLE9BQU9DLGVBQWUwcUQsRUFBTXpwRCxVQUFXLFVBQVcsQ0FDOUNmLElBQUssV0FDRCxHQUE2QixPQUF6QjBCLEtBQUtrcEQsZ0JBQTBCLENBQy9CLElBQUlJLEVBQWtCdHBELEtBQUt1cEQsMkJBQ3ZCQyxFQUFvQnhwRCxLQUFLeXBELHVCQUM3QixHQUF3QixPQUFwQkgsR0FBa0QsT0FBdEJFLEVBSXhCRixFQUFnQng2QixhQUNoQjl1QixLQUFLa3BELGdCQUFrQixDQUFDUSxJQUd4QjFwRCxLQUFLa3BELGdCQUFrQixDQUNuQixJQUFJUyxHQUFRTCxHQUNaSSxRQUlQLENBQ0Q3akQsRUFBMkIsT0FBcEJ5akQsR0FDb0IsT0FBdEJFLEdBQ0dGLEVBQWdCaC9CLFFBQVFrL0IsR0FBcUIsZ0RBQ3JEeHBELEtBQUtrcEQsZ0JBQWtCLEdBRXZCLElBREEsSUFBSVUsR0FBbUIsRUFDZGovQyxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLK29ELGdCQUFpQnArQyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDOUQsSUFBSTg5QyxFQUFVeDlDLEVBQUdOLEdBQ2pCM0ssS0FBS2twRCxnQkFBZ0J6bEQsS0FBS2dsRCxHQUN0QkEsRUFBUXJlLE1BQU10YixlQUNkODZCLEdBQW1CLEdBRzNCLElBQUtBLEVBQWtCLENBR25CLElBQUlDLEVBQWdCN3BELEtBQUsrb0QsZ0JBQWdCMW9ELE9BQVMsRUFDNUNMLEtBQUsrb0QsZ0JBQWdCL29ELEtBQUsrb0QsZ0JBQWdCMW9ELE9BQVMsR0FBR3lwRCxJQUN0REMsR0FBVUMsVUFDaEJocUQsS0FBS2twRCxnQkFBZ0J6bEQsS0FBS29tRCxJQUFrQkUsR0FBVUMsVUFDaEROLEdBQ0FPLE1BSWxCLE9BQU9qcUQsS0FBS2twRCxpQkFFaEI3cUQsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnV4QyxFQUFNenBELFVBQVU2cUQsVUFBWSxTQUFVMzBDLEdBQ2xDMVAsRUFBMEMsTUFBbkM3RixLQUFLdXBELDhCQUNOaDBDLGFBQWtCNDBDLE1BQ25CNTBDLEVBQU82MEMsZ0JBQ1I3MEMsRUFBTzYwQixNQUFNOWYsUUFBUXRxQixLQUFLdXBELDRCQUE2Qiw4Q0FDM0QxakQsR0FBUTdGLEtBQUsya0Msa0JBQW1CLDJDQUNoQyxJQUFJMGxCLEVBQWFycUQsS0FBSzBvRCxRQUFRMWtELE9BQU8sQ0FBQ3VSLElBQ3RDLE9BQU8sSUFBSXV6QyxFQUFNOW9ELEtBQUt5dUIsS0FBTXp1QixLQUFLd29ELGdCQUFpQnhvRCxLQUFLK29ELGdCQUFnQjM5QyxRQUFTaS9DLEVBQVlycUQsS0FBS3V0QixNQUFPdnRCLEtBQUtncEQsVUFBV2hwRCxLQUFLMm9ELFFBQVMzb0QsS0FBSzRvRCxRQUUvSUUsRUFBTXpwRCxVQUFVaXJELFdBQWEsU0FBVTdCLEdBQ25DNWlELEdBQVE3RixLQUFLMm9ELFVBQVkzb0QsS0FBSzRvRCxNQUFPLG9DQUVyQyxJQUFJMkIsRUFBYXZxRCxLQUFLK29ELGdCQUFnQi9rRCxPQUFPLENBQUN5a0QsSUFDOUMsT0FBTyxJQUFJSyxFQUFNOW9ELEtBQUt5dUIsS0FBTXp1QixLQUFLd29ELGdCQUFpQitCLEVBQVl2cUQsS0FBSzBvRCxRQUFRdDlDLFFBQVNwTCxLQUFLdXRCLE1BQU92dEIsS0FBS2dwRCxVQUFXaHBELEtBQUsyb0QsUUFBUzNvRCxLQUFLNG9ELFFBRXZJRSxFQUFNenBELFVBQVVtckQsaUJBQW1CLFNBQVVqOUIsR0FDekMsT0FBTyxJQUFJdTdCLEVBQU05b0QsS0FBS3l1QixLQUFNenVCLEtBQUt3b0QsZ0JBQWlCeG9ELEtBQUsrb0QsZ0JBQWdCMzlDLFFBQVNwTCxLQUFLMG9ELFFBQVF0OUMsUUFBU21pQixFQUFPKzZCLEdBQVVXLE1BQU9qcEQsS0FBSzJvRCxRQUFTM29ELEtBQUs0b0QsUUFFckpFLEVBQU16cEQsVUFBVW9yRCxnQkFBa0IsU0FBVWw5QixHQUN4QyxPQUFPLElBQUl1N0IsRUFBTTlvRCxLQUFLeXVCLEtBQU16dUIsS0FBS3dvRCxnQkFBaUJ4b0QsS0FBSytvRCxnQkFBZ0IzOUMsUUFBU3BMLEtBQUswb0QsUUFBUXQ5QyxRQUFTbWlCLEVBQU8rNkIsR0FBVW9DLEtBQU0xcUQsS0FBSzJvRCxRQUFTM29ELEtBQUs0b0QsUUFFcEpFLEVBQU16cEQsVUFBVXNyRCxZQUFjLFNBQVVucEIsR0FDcEMsT0FBTyxJQUFJc25CLEVBQU05b0QsS0FBS3l1QixLQUFNenVCLEtBQUt3b0QsZ0JBQWlCeG9ELEtBQUsrb0QsZ0JBQWdCMzlDLFFBQVNwTCxLQUFLMG9ELFFBQVF0OUMsUUFBU3BMLEtBQUt1dEIsTUFBT3Z0QixLQUFLZ3BELFVBQVd4bkIsRUFBT3hoQyxLQUFLNG9ELFFBRWxKRSxFQUFNenBELFVBQVV1ckQsVUFBWSxTQUFVcHBCLEdBQ2xDLE9BQU8sSUFBSXNuQixFQUFNOW9ELEtBQUt5dUIsS0FBTXp1QixLQUFLd29ELGdCQUFpQnhvRCxLQUFLK29ELGdCQUFnQjM5QyxRQUFTcEwsS0FBSzBvRCxRQUFRdDlDLFFBQVNwTCxLQUFLdXRCLE1BQU92dEIsS0FBS2dwRCxVQUFXaHBELEtBQUsyb0QsUUFBU25uQixJQVFwSnNuQixFQUFNenBELFVBQVV3ckQsd0JBQTBCLFNBQVVwOEIsR0FDaEQsT0FBTyxJQUFJcTZCLEVBQU1yNkIsRUFDSSxLQUFNenVCLEtBQUsrb0QsZ0JBQWdCMzlDLFFBQVNwTCxLQUFLMG9ELFFBQVF0OUMsUUFBU3BMLEtBQUt1dEIsTUFBT3Z0QixLQUFLZ3BELFVBQVdocEQsS0FBSzJvRCxRQUFTM29ELEtBQUs0b0QsUUFNbElFLEVBQU16cEQsVUFBVXlyRCxvQkFBc0IsV0FDbEMsT0FBZ0MsSUFBeEI5cUQsS0FBSzBvRCxRQUFRcm9ELFFBQ0YsT0FBZkwsS0FBS3V0QixPQUNXLE1BQWhCdnRCLEtBQUsyb0QsU0FDUyxNQUFkM29ELEtBQUs0b0QsUUFDNEIsSUFBaEM1b0QsS0FBSytvRCxnQkFBZ0Ixb0QsUUFDZSxJQUFoQ0wsS0FBSytvRCxnQkFBZ0Ixb0QsUUFDbEJMLEtBQUsrb0QsZ0JBQWdCLEdBQUczZSxNQUFNdGIsZUFLOUNnNkIsRUFBTXpwRCxVQUFVdXBDLFlBQWMsV0FDMUIsT0FBTzVvQyxLQUFLK3FELFdBQVduaUIsY0FBZ0IsT0FBUzVvQyxLQUFLZ3BELFdBRXpERixFQUFNenBELFVBQVVtTSxTQUFXLFdBQ3ZCLE1BQU8sZ0JBQWtCeEwsS0FBSytxRCxXQUFXdi9DLFdBQWEsZUFBaUJ4TCxLQUFLZ3BELFVBQVksS0FFNUZGLEVBQU16cEQsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNoQyxPQUFRdnJCLEtBQUsrcUQsV0FBV3pnQyxRQUFRaUIsRUFBTXcvQixhQUNsQy9xRCxLQUFLZ3BELFlBQWN6OUIsRUFBTXk5QixXQUVqQ0YsRUFBTXpwRCxVQUFVMnJELGNBQWdCLFNBQVU5YSxFQUFJQyxHQUUxQyxJQURBLElBQUk4YSxHQUFxQixFQUNoQnRnRCxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLeW9ELFFBQVM5OUMsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQ3RELElBQUk4OUMsRUFBVXg5QyxFQUFHTixHQUNidWdELEVBQU96QyxFQUFRMEMsUUFBUWpiLEVBQUlDLEdBQy9CLEdBQWEsSUFBVCthLEVBQ0EsT0FBT0EsRUFFWEQsRUFBcUJBLEdBQXNCeEMsRUFBUXJlLE1BQU10YixhQUk3RCxPQURBanBCLEVBQU9vbEQsRUFBb0Isa0RBQ3BCLEdBRVhuQyxFQUFNenBELFVBQVUreEMsUUFBVSxTQUFVOUUsR0FDaEMsT0FBUXRzQyxLQUFLb3JELDhCQUE4QjllLElBQ3ZDdHNDLEtBQUtxckQsZUFBZS9lLElBQ3BCdHNDLEtBQUtzckQsZUFBZWhmLElBQ3BCdHNDLEtBQUt1ckQsY0FBY2pmLElBRTNCd2MsRUFBTXpwRCxVQUFVbXNELGdCQUFrQixXQUM5QixPQUFRcEQsR0FBa0Jwb0QsS0FBS3V0QixRQUFVdnRCLEtBQUtncEQsWUFBY1YsR0FBVVcsT0FFMUVILEVBQU16cEQsVUFBVW9zRCxlQUFpQixXQUM3QixPQUFRckQsR0FBa0Jwb0QsS0FBS3V0QixRQUFVdnRCLEtBQUtncEQsWUFBY1YsR0FBVW9DLE1BRTFFNUIsRUFBTXpwRCxVQUFVb3FELHFCQUF1QixXQUNuQyxPQUFPenBELEtBQUsrb0QsZ0JBQWdCMW9ELE9BQVMsRUFDL0JMLEtBQUsrb0QsZ0JBQWdCLEdBQUczZSxNQUN4QixNQUVWMGUsRUFBTXpwRCxVQUFVa3FELHlCQUEyQixXQUN2QyxJQUFLLElBQUk1K0MsRUFBSyxFQUFHTSxFQUFLakwsS0FBSzBvRCxRQUFTLzlDLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUN0RCxJQUFJNEssRUFBU3RLLEVBQUdOLEdBQ2hCLEdBQUk0SyxhQUFrQjQwQyxJQUFlNTBDLEVBQU82MEMsZUFDeEMsT0FBTzcwQyxFQUFPNjBCLE1BR3RCLE9BQU8sTUFJWDBlLEVBQU16cEQsVUFBVXFzRCxtQkFBcUIsU0FBVUMsR0FDM0MsSUFBSyxJQUFJaGhELEVBQUssRUFBR00sRUFBS2pMLEtBQUswb0QsUUFBUy85QyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDdEQsSUFBSTRLLEVBQVN0SyxFQUFHTixHQUNoQixHQUFJNEssYUFBa0I0MEMsSUFDZHdCLEVBQVVsckQsUUFBUThVLEVBQU9qUyxLQUFPLEVBQ2hDLE9BQU9pUyxFQUFPalMsR0FJMUIsT0FBTyxNQUVYd2xELEVBQU16cEQsVUFBVXNsQyxnQkFBa0IsV0FDOUIsT0FBTzNrQyxLQUFLK3FELFdBQVdwbUIsbUJBRTNCbWtCLEVBQU16cEQsVUFBVXVsQyx1QkFBeUIsV0FDckMsT0FBZ0MsT0FBekI1a0MsS0FBS3dvRCxpQkFNaEJNLEVBQU16cEQsVUFBVTByRCxTQUFXLFdBQ3ZCLElBQUsvcUQsS0FBS21wRCxlQUNOLEdBQUlucEQsS0FBS2dwRCxZQUFjVixHQUFVVyxNQUM3QmpwRCxLQUFLbXBELGVBQWlCLElBQUlaLEdBQU92b0QsS0FBS3l1QixLQUFNenVCLEtBQUt3b0QsZ0JBQWlCeG9ELEtBQUt5b0QsUUFBU3pvRCxLQUFLMG9ELFFBQVMxb0QsS0FBS3V0QixNQUFPdnRCLEtBQUsyb0QsUUFBUzNvRCxLQUFLNG9ELFdBRTVILENBR0QsSUFEQSxJQUFJZ0QsRUFBVyxHQUNOamhELEVBQUssRUFBR00sRUFBS2pMLEtBQUt5b0QsUUFBUzk5QyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDdEQsSUFBSTg5QyxFQUFVeDlDLEVBQUdOLEdBQ2JtL0MsRUFBTXJCLEVBQVFxQixNQUFRQyxHQUFVOEIsV0FDOUI5QixHQUFVQyxVQUNWRCxHQUFVOEIsV0FDaEJELEVBQVNub0QsS0FBSyxJQUFJa21ELEdBQVFsQixFQUFRcmUsTUFBTzBmLElBRzdDLElBQUluQixFQUFVM29ELEtBQUs0b0QsTUFDYixJQUFJa0QsR0FBTTlyRCxLQUFLNG9ELE1BQU1waEMsVUFBV3huQixLQUFLNG9ELE1BQU1tRCxRQUMzQyxLQUNGbkQsRUFBUTVvRCxLQUFLMm9ELFFBQ1gsSUFBSW1ELEdBQU05ckQsS0FBSzJvRCxRQUFRbmhDLFVBQVd4bkIsS0FBSzJvRCxRQUFRb0QsUUFDL0MsS0FFTi9yRCxLQUFLbXBELGVBQWlCLElBQUlaLEdBQU92b0QsS0FBS3l1QixLQUFNenVCLEtBQUt3b0QsZ0JBQWlCb0QsRUFBVTVyRCxLQUFLMG9ELFFBQVMxb0QsS0FBS3V0QixNQUFPbzdCLEVBQVNDLEdBR3ZILE9BQU81b0QsS0FBS21wRCxnQkFFaEJMLEVBQU16cEQsVUFBVStyRCw4QkFBZ0MsU0FBVTllLEdBQ3RELElBQUkwZixFQUFVMWYsRUFBSXR0QyxJQUFJeXZCLEtBQ3RCLE9BQTZCLE9BQXpCenVCLEtBQUt3b0QsZ0JBR0dsYyxFQUFJdHRDLElBQUlzd0IsZ0JBQWdCdHZCLEtBQUt3b0Qsa0JBQ2pDeG9ELEtBQUt5dUIsS0FBS1YsV0FBV2krQixHQUVwQjU4QixHQUFZQyxjQUFjcnZCLEtBQUt5dUIsTUFFN0J6dUIsS0FBS3l1QixLQUFLbkUsUUFBUTBoQyxHQUlsQmhzRCxLQUFLeXVCLEtBQUtULG9CQUFvQmcrQixJQU83Q2xELEVBQU16cEQsVUFBVWdzRCxlQUFpQixTQUFVL2UsR0FDdkMsSUFBSyxJQUFJM2hDLEVBQUssRUFBR00sRUFBS2pMLEtBQUsrb0QsZ0JBQWlCcCtDLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM5RCxJQUFJODlDLEVBQVV4OUMsRUFBR04sR0FFakIsSUFBSzg5QyxFQUFRcmUsTUFBTXRiLGNBQTZDLE9BQTdCd2QsRUFBSWxDLE1BQU1xZSxFQUFRcmUsT0FDakQsT0FBTyxFQUdmLE9BQU8sR0FFWDBlLEVBQU16cEQsVUFBVWlzRCxlQUFpQixTQUFVaGYsR0FDdkMsSUFBSyxJQUFJM2hDLEVBQUssRUFBR00sRUFBS2pMLEtBQUswb0QsUUFBUy85QyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FFdEQsSUFEYU0sRUFBR04sR0FDSnltQyxRQUFROUUsR0FDaEIsT0FBTyxFQUdmLE9BQU8sR0FLWHdjLEVBQU16cEQsVUFBVWtzRCxjQUFnQixTQUFVamYsR0FDdEMsUUFBSXRzQyxLQUFLMm9ELFVBQVkzb0QsS0FBSzJvRCxRQUFRc0Qsb0JBQW9CanNELEtBQUt5b0QsUUFBU25jLE9BR2hFdHNDLEtBQUs0b0QsUUFBUzVvRCxLQUFLNG9ELE1BQU1xRCxvQkFBb0Jqc0QsS0FBS3lvRCxRQUFTbmMsS0FLbkV3YyxFQUFNenBELFVBQVUrcEQsaUJBQW1CLFNBQVU1bkIsR0FDekMzN0IsRUFBTzI3QixFQUFNaGEsU0FBU25uQixRQUFVTCxLQUFLeW9ELFFBQVFwb0QsT0FBUSxpQ0FFbER5b0QsRUFwU2UsR0FzU3RCb0QsR0FDQSxhQUlBQyxHQUEwQixXQUMxQixTQUFTQSxFQUFTbnVELEdBQ2RnQyxLQUFLaEMsS0FBT0EsRUFzQ2hCLE9BcENBbXVELEVBQVMzOUIsV0FBYSxTQUFVbHJCLEdBQzVCLE9BQVFBLEdBQ0osSUFBSyxJQUNELE9BQU82b0QsRUFBU0MsVUFDcEIsSUFBSyxLQUNELE9BQU9ELEVBQVNFLG1CQUNwQixJQUFLLEtBQ0QsT0FBT0YsRUFBU0csTUFDcEIsSUFBSyxLQUNELE9BQU9ILEVBQVNJLHNCQUNwQixJQUFLLElBQ0QsT0FBT0osRUFBU0ssYUFDcEIsSUFBSyxpQkFDRCxPQUFPTCxFQUFTTSxlQUNwQixJQUFLLEtBQ0QsT0FBT04sRUFBU08sR0FDcEIsSUFBSyxxQkFDRCxPQUFPUCxFQUFTUSxtQkFDcEIsUUFDSSxPQUFPOW5DLEVBQUssaUNBQW1DdmhCLEtBRzNENm9ELEVBQVM5c0QsVUFBVW1NLFNBQVcsV0FDMUIsT0FBT3hMLEtBQUtoQyxNQUVoQm11RCxFQUFTOXNELFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDbkMsT0FBT3ZyQixLQUFLaEMsT0FBU3V0QixFQUFNdnRCLE1BRS9CbXVELEVBQVNDLFVBQVksSUFBSUQsRUFBUyxLQUNsQ0EsRUFBU0UsbUJBQXFCLElBQUlGLEVBQVMsTUFDM0NBLEVBQVNHLE1BQVEsSUFBSUgsRUFBUyxNQUM5QkEsRUFBU0ssYUFBZSxJQUFJTCxFQUFTLEtBQ3JDQSxFQUFTSSxzQkFBd0IsSUFBSUosRUFBUyxNQUM5Q0EsRUFBU00sZUFBaUIsSUFBSU4sRUFBUyxrQkFDdkNBLEVBQVNPLEdBQUssSUFBSVAsRUFBUyxNQUMzQkEsRUFBU1EsbUJBQXFCLElBQUlSLEVBQVMsc0JBQ3BDQSxFQXhDa0IsR0EwQ3pCaEMsR0FBNkIsU0FBVWhnRCxHQUV2QyxTQUFTZ2dELEVBQVkvZixFQUFPOW1DLEVBQUk1RSxHQUM1QixJQUFJZ0wsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUlqQyxPQUhBMEosRUFBTTBnQyxNQUFRQSxFQUNkMWdDLEVBQU1wRyxHQUFLQSxFQUNYb0csRUFBTWhMLE1BQVFBLEVBQ1BnTCxFQWlHWCxPQXZHQWxFLEVBQU0xRixVQUFVcXFELEVBQWFoZ0QsR0FXN0JnZ0QsRUFBWXByRCxPQUFTLFNBQVVxckMsRUFBTzltQyxFQUFJNUUsR0FDdEMsR0FBSTByQyxFQUFNdGIsYUFDTixPQUFJeHJCLElBQU82b0QsR0FBU08sSUFDaEI3bUQsRUFBT25ILGFBQWlCb3hDLEdBQVksZ0VBQ3BDanFDLEVBQU9uSCxFQUFNcXZDLGNBQWM2ZSxPQUFNLFNBQVUxMUIsR0FDdkMsT0FBT0EsYUFBZ0I4WCxNQUN2QixtRUFDRyxJQUFJNmQsR0FBaUJ6aUIsRUFBTzFyQyxLQUduQ21ILEVBQU9uSCxhQUFpQnN3QyxHQUFVLHFEQUNsQ25wQyxFQUFPdkMsSUFBTzZvRCxHQUFTTSxnQkFBa0JucEQsSUFBTzZvRCxHQUFTUSxtQkFBb0IsSUFBTXJwRCxFQUFHa0ksV0FBYSxnREFDNUYsSUFBSXNoRCxHQUFlMWlCLEVBQU85bUMsRUFBSTVFLElBR3hDLEdBQUlBLEVBQU00ckIsUUFBUXdqQixHQUFVRSxVQUFXLENBQ3hDLEdBQUkxcUMsSUFBTzZvRCxHQUFTRyxNQUNoQixNQUFNLElBQUlwbUMsRUFBZWpCLEVBQUtJLGlCQUFrQiwyREFFcEQsT0FBTyxJQUFJOGtDLEVBQVkvZixFQUFPOW1DLEVBQUk1RSxHQUVqQyxHQUFJQSxFQUFNNHJCLFFBQVFra0IsR0FBWUMsS0FBTSxDQUNyQyxHQUFJbnJDLElBQU82b0QsR0FBU0csTUFDaEIsTUFBTSxJQUFJcG1DLEVBQWVqQixFQUFLSSxpQkFBa0IsMERBRXBELE9BQU8sSUFBSThrQyxFQUFZL2YsRUFBTzltQyxFQUFJNUUsR0FFakMsT0FBSTRFLElBQU82b0QsR0FBU00sZUFDZCxJQUFJTSxHQUFvQjNpQixFQUFPMXJDLEdBRWpDNEUsSUFBTzZvRCxHQUFTTyxJQUNyQjdtRCxFQUFPbkgsYUFBaUJveEMsR0FBWSxnQ0FBa0NweEMsRUFBTThNLFlBQ3JFLElBQUl3aEQsR0FBUzVpQixFQUFPMXJDLElBRXRCNEUsSUFBTzZvRCxHQUFTUSxvQkFDckI5bUQsRUFBT25ILGFBQWlCb3hDLEdBQVksZ0RBQWtEcHhDLEVBQU04TSxZQUNyRixJQUFJeWhELEdBQXVCN2lCLEVBQU8xckMsSUFHbEMsSUFBSXlyRCxFQUFZL2YsRUFBTzltQyxFQUFJNUUsSUFHMUN5ckQsRUFBWTlxRCxVQUFVK3hDLFFBQVUsU0FBVTlFLEdBQ3RDLElBQUkvZ0IsRUFBUStnQixFQUFJbEMsTUFBTXBxQyxLQUFLb3FDLE9BRTNCLE9BQWtCLE9BQVY3ZSxHQUNKdnJCLEtBQUt0QixNQUFNbXZDLFlBQWN0aUIsRUFBTXNpQixXQUMvQjd0QyxLQUFLa3RELGtCQUFrQjNoQyxFQUFNYSxVQUFVcHNCLEtBQUt0QixTQUVwRHlyRCxFQUFZOXFELFVBQVU2dEQsa0JBQW9CLFNBQVVDLEdBQ2hELE9BQVFudEQsS0FBS3NELElBQ1QsS0FBSzZvRCxHQUFTQyxVQUNWLE9BQU9lLEVBQWEsRUFDeEIsS0FBS2hCLEdBQVNFLG1CQUNWLE9BQU9jLEdBQWMsRUFDekIsS0FBS2hCLEdBQVNHLE1BQ1YsT0FBc0IsSUFBZmEsRUFDWCxLQUFLaEIsR0FBU0ssYUFDVixPQUFPVyxFQUFhLEVBQ3hCLEtBQUtoQixHQUFTSSxzQkFDVixPQUFPWSxHQUFjLEVBQ3pCLFFBQ0ksT0FBT3RvQyxFQUFLLGlDQUFtQzdrQixLQUFLc0QsTUFHaEU2bUQsRUFBWTlxRCxVQUFVK3FELGFBQWUsV0FDakMsTUFBUSxDQUNKK0IsR0FBU0MsVUFDVEQsR0FBU0UsbUJBQ1RGLEdBQVNLLGFBQ1RMLEdBQVNJLHVCQUNYOXJELFFBQVFULEtBQUtzRCxLQUFPLEdBRTFCNm1ELEVBQVk5cUQsVUFBVXVwQyxZQUFjLFdBSWhDLE9BQVE1b0MsS0FBS29xQyxNQUFNN2Isa0JBQW9CdnVCLEtBQUtzRCxHQUFHa0ksV0FBYXhMLEtBQUt0QixNQUFNOE0sWUFFM0UyK0MsRUFBWTlxRCxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ3RDLE9BQUlBLGFBQWlCNCtCLElBQ1RucUQsS0FBS3NELEdBQUdnbkIsUUFBUWlCLEVBQU1qb0IsS0FDMUJ0RCxLQUFLb3FDLE1BQU05ZixRQUFRaUIsRUFBTTZlLFFBQ3pCcHFDLEtBQUt0QixNQUFNNHJCLFFBQVFpQixFQUFNN3NCLFNBTXJDeXJELEVBQVk5cUQsVUFBVW1NLFNBQVcsV0FDN0IsT0FBT3hMLEtBQUtvcUMsTUFBTTdiLGtCQUFvQixJQUFNdnVCLEtBQUtzRCxHQUFLLElBQU10RCxLQUFLdEIsTUFBTUEsU0FFcEV5ckQsRUF4R3FCLENBeUc5QitCLElBRUVZLEdBQWdDLFNBQVUzaUQsR0FFMUMsU0FBUzJpRCxJQUNMLE9BQWtCLE9BQVgzaUQsR0FBbUJBLEVBQU83SixNQUFNTixLQUFNSSxZQUFjSixLQU8vRCxPQVRBd0YsRUFBTTFGLFVBQVVndEQsRUFBZ0IzaUQsR0FJaEMyaUQsRUFBZXp0RCxVQUFVK3hDLFFBQVUsU0FBVTlFLEdBQ3pDLElBQUk4Z0IsRUFBV3B0RCxLQUFLdEIsTUFDaEJ5dUQsRUFBYS85QixHQUFZaEMsV0FBV2tmLEVBQUl0dEMsSUFBS291RCxFQUFTcHVELEtBQzFELE9BQU9nQixLQUFLa3RELGtCQUFrQkMsSUFFM0JMLEVBVndCLENBV2pDM0MsSUFFRTBDLEdBQWtDLFNBQVUxaUQsR0FFNUMsU0FBUzBpRCxFQUFpQnppQixFQUFPMXJDLEdBQzdCLElBQUlnTCxFQUFRUyxFQUFPdk0sS0FBS29DLEtBQU1vcUMsRUFBTytoQixHQUFTTyxHQUFJaHVELElBQVVzQixLQUU1RCxPQURBMEosRUFBTWhMLE1BQVFBLEVBQ1BnTCxFQVFYLE9BWkFsRSxFQUFNMUYsVUFBVStzRCxFQUFrQjFpRCxHQU1sQzBpRCxFQUFpQnh0RCxVQUFVK3hDLFFBQVUsU0FBVTlFLEdBRTNDLE9BRGlCdHNDLEtBQUt0QixNQUNKcXZDLGNBQWNqbEIsTUFBSyxTQUFVc2tDLEdBQzNDLE9BQU85Z0IsRUFBSXR0QyxJQUFJc3JCLFFBQVE4aUMsRUFBU3B1RCxTQUdqQzZ0RCxFQWIwQixDQWNuQzFDLElBRUU0QyxHQUFxQyxTQUFVNWlELEdBRS9DLFNBQVM0aUQsRUFBb0IzaUIsRUFBTzFyQyxHQUNoQyxPQUFPeUwsRUFBT3ZNLEtBQUtvQyxLQUFNb3FDLEVBQU8raEIsR0FBU00sZUFBZ0IvdEQsSUFBVXNCLEtBTXZFLE9BUkF3RixFQUFNMUYsVUFBVWl0RCxFQUFxQjVpRCxHQUlyQzRpRCxFQUFvQjF0RCxVQUFVK3hDLFFBQVUsU0FBVTlFLEdBQzlDLElBQUkvZ0IsRUFBUStnQixFQUFJbEMsTUFBTXBxQyxLQUFLb3FDLE9BQzNCLE9BQU83ZSxhQUFpQnVrQixJQUFjdmtCLEVBQU05YixTQUFTelAsS0FBS3RCLFFBRXZEcXVELEVBVDZCLENBVXRDNUMsSUFFRTZDLEdBQTBCLFNBQVU3aUQsR0FFcEMsU0FBUzZpRCxFQUFTNWlCLEVBQU8xckMsR0FDckIsSUFBSWdMLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTW9xQyxFQUFPK2hCLEdBQVNPLEdBQUlodUQsSUFBVXNCLEtBRTVELE9BREEwSixFQUFNaEwsTUFBUUEsRUFDUGdMLEVBT1gsT0FYQWxFLEVBQU0xRixVQUFVa3RELEVBQVU3aUQsR0FNMUI2aUQsRUFBUzN0RCxVQUFVK3hDLFFBQVUsU0FBVTlFLEdBQ25DLElBQUkrZ0IsRUFBYXJ0RCxLQUFLdEIsTUFDbEI2c0IsRUFBUStnQixFQUFJbEMsTUFBTXBxQyxLQUFLb3FDLE9BQzNCLE9BQWlCLE9BQVY3ZSxHQUFrQjhoQyxFQUFXNTlDLFNBQVM4YixJQUUxQ3loQyxFQVprQixDQWEzQjdDLElBRUU4QyxHQUF3QyxTQUFVOWlELEdBRWxELFNBQVM4aUQsRUFBdUI3aUIsRUFBTzFyQyxHQUNuQyxJQUFJZ0wsRUFBUVMsRUFBT3ZNLEtBQUtvQyxLQUFNb3FDLEVBQU8raEIsR0FBU1EsbUJBQW9CanVELElBQVVzQixLQUU1RSxPQURBMEosRUFBTWhMLE1BQVFBLEVBQ1BnTCxFQVVYLE9BZEFsRSxFQUFNMUYsVUFBVW10RCxFQUF3QjlpRCxHQU14QzhpRCxFQUF1QjV0RCxVQUFVK3hDLFFBQVUsU0FBVTlFLEdBQ2pELElBQUk1aUMsRUFBUTFKLEtBQ1J1ckIsRUFBUStnQixFQUFJbEMsTUFBTXBxQyxLQUFLb3FDLE9BQzNCLE9BQVE3ZSxhQUFpQnVrQixJQUNyQnZrQixFQUFNd2lCLGNBQWNqbEIsTUFBSyxTQUFVd2tDLEdBQy9CLE9BQU81akQsRUFBTWhMLE1BQU0rUSxTQUFTNjlDLE9BR2pDTCxFQWZnQyxDQWdCekM5QyxJQUlFSixHQUEyQixXQUMzQixTQUFTQSxFQUFVL3JELEdBQ2ZnQyxLQUFLaEMsS0FBT0EsRUFPaEIsT0FMQStyRCxFQUFVMXFELFVBQVVtTSxTQUFXLFdBQzNCLE9BQU94TCxLQUFLaEMsTUFFaEIrckQsRUFBVUMsVUFBWSxJQUFJRCxFQUFVLE9BQ3BDQSxFQUFVOEIsV0FBYSxJQUFJOUIsRUFBVSxRQUM5QkEsRUFUbUIsR0F5QjFCK0IsR0FBdUIsV0FDdkIsU0FBU0EsRUFBTXRrQyxFQUFVdWtDLEdBQ3JCL3JELEtBQUt3bkIsU0FBV0EsRUFDaEJ4bkIsS0FBSytyRCxPQUFTQSxFQXdEbEIsT0F0REFELEVBQU16c0QsVUFBVXVwQyxZQUFjLFdBRzFCLElBREEsSUFBSUEsRUFBYzVvQyxLQUFLK3JELE9BQVMsS0FBTyxLQUM5QnBoRCxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLd25CLFNBQVU3YyxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FFdkRpK0IsR0FEZ0IzOUIsRUFBR04sR0FDTWEsV0FFN0IsT0FBT285QixHQU1Ya2pCLEVBQU16c0QsVUFBVTRzRCxvQkFBc0IsU0FBVXhELEVBQVNuYyxHQUNyRHptQyxFQUFPN0YsS0FBS3duQixTQUFTbm5CLFFBQVVvb0QsRUFBUXBvRCxPQUFRLGtEQUUvQyxJQURBLElBQUk4c0QsRUFBYSxFQUNSMXZELEVBQUksRUFBR0EsRUFBSXVDLEtBQUt3bkIsU0FBU25uQixPQUFRNUMsSUFBSyxDQUMzQyxJQUFJOHZELEVBQW1COUUsRUFBUWhyRCxHQUMzQmdXLEVBQVl6VCxLQUFLd25CLFNBQVMvcEIsR0FDOUIsR0FBSTh2RCxFQUFpQm5qQixNQUFNdGIsYUFDdkJqcEIsRUFBTzROLGFBQXFCdTdCLEdBQVUsK0RBQ3RDbWUsRUFBYS85QixHQUFZaEMsV0FBVzNaLEVBQVV6VSxJQUFLc3RDLEVBQUl0dEMsU0FFdEQsQ0FDRCxJQUFJd3VELEVBQVdsaEIsRUFBSWxDLE1BQU1takIsRUFBaUJuakIsT0FDMUN2a0MsRUFBb0IsT0FBYjJuRCxFQUFtQixrRUFDMUJMLEVBQWExNUMsRUFBVTJZLFVBQVVvaEMsR0FLckMsR0FISUQsRUFBaUJ6RCxNQUFRQyxHQUFVOEIsYUFDbkNzQixJQUEyQixHQUVaLElBQWZBLEVBQ0EsTUFHUixPQUFPbnRELEtBQUsrckQsT0FBU29CLEdBQWMsRUFBSUEsRUFBYSxHQUV4RHJCLEVBQU16c0QsVUFBVWlyQixRQUFVLFNBQVVpQixHQUNoQyxHQUFjLE9BQVZBLEVBQ0EsT0FBTyxFQUVYLEdBQUl2ckIsS0FBSytyRCxTQUFXeGdDLEVBQU13Z0MsUUFDdEIvckQsS0FBS3duQixTQUFTbm5CLFNBQVdrckIsRUFBTS9ELFNBQVNubkIsT0FDeEMsT0FBTyxFQUVYLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUt3bkIsU0FBU25uQixPQUFRNUMsSUFBSyxDQUMzQyxJQUFJZ3dELEVBQWV6dEQsS0FBS3duQixTQUFTL3BCLEdBQzdCaXdELEVBQWdCbmlDLEVBQU0vRCxTQUFTL3BCLEdBQ25DLElBQUtnd0QsRUFBYW5qQyxRQUFRb2pDLEdBQ3RCLE9BQU8sRUFHZixPQUFPLEdBRUo1QixFQTNEZSxHQWdFdEJuQyxHQUF5QixXQUN6QixTQUFTQSxFQUFRdmYsRUFBTzBmLEdBQ3BCOXBELEtBQUtvcUMsTUFBUUEsT0FDRDdnQyxJQUFSdWdELElBQ0FBLEVBQU1DLEdBQVVDLFdBRXBCaHFELEtBQUs4cEQsSUFBTUEsRUFDWDlwRCxLQUFLMnRELGFBQWV2akIsRUFBTXRiLGFBeUI5QixPQXZCQTY2QixFQUFRdHFELFVBQVU4ckQsUUFBVSxTQUFVamIsRUFBSUMsR0FDdEMsSUFBSWdkLEVBQWFudEQsS0FBSzJ0RCxhQUNoQjdpQixHQUFTbUYsYUFBYUMsRUFBSUMsR0FDMUJyRixHQUFTZ0csZUFBZTl3QyxLQUFLb3FDLE1BQU84RixFQUFJQyxHQUM5QyxPQUFRbndDLEtBQUs4cEQsS0FDVCxLQUFLQyxHQUFVQyxVQUNYLE9BQU9tRCxFQUNYLEtBQUtwRCxHQUFVOEIsV0FDWCxPQUFRLEVBQUlzQixFQUNoQixRQUNJLE9BQU90b0MsRUFBSyxzQkFBd0I3a0IsS0FBSzhwRCxPQUdyREgsRUFBUXRxRCxVQUFVdXBDLFlBQWMsV0FFNUIsT0FBTzVvQyxLQUFLb3FDLE1BQU03YixrQkFBb0J2dUIsS0FBSzhwRCxJQUFJdCtDLFlBRW5EbStDLEVBQVF0cUQsVUFBVW1NLFNBQVcsV0FDekIsT0FBT3hMLEtBQUtvcUMsTUFBTTdiLGtCQUFvQixLQUFPdnVCLEtBQUs4cEQsSUFBTSxLQUU1REgsRUFBUXRxRCxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ2xDLE9BQU92ckIsS0FBSzhwRCxNQUFRditCLEVBQU11K0IsS0FBTzlwRCxLQUFLb3FDLE1BQU05ZixRQUFRaUIsRUFBTTZlLFFBRXZEdWYsRUFoQ2lCLEdBa0N4QkQsR0FBbUIsSUFBSUMsR0FBUS82QixHQUFVRyxXQUFZZzdCLEdBQVVDLFdBQy9EQyxHQUFvQixJQUFJTixHQUFRLzZCLEdBQVVHLFdBQVlnN0IsR0FBVThCLFlBcUNoRStCLEdBQXNDLFdBQ3RDLFNBQVNBLEtBZ0dULE9BOUZBQSxFQUFxQnZ1RCxVQUFVd3VELHNCQUF3QixTQUFVQyxHQUM3RDl0RCxLQUFLK3RELG1CQUFxQkQsR0FFOUJGLEVBQXFCdnVELFVBQVVxMEMsMEJBQTRCLFNBQVV2MkIsRUFBYWUsRUFBT3M3QixFQUE4QndVLEdBQ25ILElBQUl0a0QsRUFBUTFKLEtBS1osT0FKQTZGLE9BQW1DMEQsSUFBNUJ2SixLQUFLK3RELG1CQUFrQyxzQ0FJMUM3dkMsRUFBTTRzQyxzQkFDQzlxRCxLQUFLaXVELDBCQUEwQjl3QyxFQUFhZSxHQUluRHM3QixFQUE2Qmx2QixRQUFRc0osR0FBZ0JLLEtBQzlDajBCLEtBQUtpdUQsMEJBQTBCOXdDLEVBQWFlLEdBRWhEbGUsS0FBSyt0RCxtQkFBbUJHLGFBQWEvd0MsRUFBYTZ3QyxHQUFZNXJELE1BQUssU0FBVWk2QyxHQUNoRixJQUFJOFIsRUFBa0J6a0QsRUFBTTBrRCxXQUFXbHdDLEVBQU9tK0IsR0FDOUMsT0FBS24rQixFQUFNc3RDLG1CQUFxQnR0QyxFQUFNdXRDLG1CQUNsQy9oRCxFQUFNMmtELFlBQVlud0MsRUFBTThxQyxVQUFXbUYsRUFBaUJILEVBQVl4VSxHQUN6RDl2QyxFQUFNdWtELDBCQUEwQjl3QyxFQUFhZSxJQUVwRGlHLEtBQWlCbkssRUFBU08sT0FDMUI1QyxFQUFNLHVCQUF3Qix3REFBeUQ2aEMsRUFBNkJodUMsV0FBWTBTLEVBQU0xUyxZQUluSTlCLEVBQU1xa0QsbUJBQW1CcmEsMEJBQTBCdjJCLEVBQWFlLEVBQU9zN0IsR0FBOEJwM0MsTUFBSyxTQUFVa3NELEdBT3ZILE9BSEFILEVBQWdCMzhDLFNBQVEsU0FBVTg2QixHQUM5QmdpQixFQUFpQkEsRUFBZXR0QyxPQUFPc3JCLEVBQUl0dEMsSUFBS3N0QyxNQUU3Q2dpQixVQUtuQlYsRUFBcUJ2dUQsVUFBVSt1RCxXQUFhLFNBQVVsd0MsRUFBT20rQixHQUd6RCxJQUFJa1MsRUFBZSxJQUFJeDNCLElBQVUsU0FBVW1aLEVBQUlDLEdBQzNDLE9BQU9qeUIsRUFBTThzQyxjQUFjOWEsRUFBSUMsTUFPbkMsT0FMQWtNLEVBQVU3cUMsU0FBUSxTQUFVMU8sRUFBR3UyQixHQUN2QkEsYUFBb0J5UixJQUFZNXNCLEVBQU1rekIsUUFBUS9YLEtBQzlDazFCLEVBQWVBLEVBQWF0M0IsSUFBSW9DLE9BR2pDazFCLEdBYVhYLEVBQXFCdnVELFVBQVVndkQsWUFBYyxTQUFVckYsRUFBV3dGLEVBQXVCUixFQUFZUyxHQUdqRyxHQUFJVCxFQUFXcmdDLE9BQVM2Z0MsRUFBc0I3Z0MsS0FDMUMsT0FBTyxFQVVYLElBQUkrZ0MsRUFBaUIxRixJQUFjVixHQUFVVyxNQUN2Q3VGLEVBQXNCcDNCLE9BQ3RCbzNCLEVBQXNCcjNCLFFBQzVCLFFBQUt1M0IsSUFJR0EsRUFBZUMsa0JBQ25CRCxFQUFlcDRDLFFBQVE4VixVQUFVcWlDLEdBQTRCLElBRXJFYixFQUFxQnZ1RCxVQUFVNHVELDBCQUE0QixTQUFVOXdDLEVBQWFlLEdBSTlFLE9BSElpRyxLQUFpQm5LLEVBQVNPLE9BQzFCNUMsRUFBTSx1QkFBd0Isa0RBQW1EdUcsRUFBTTFTLFlBRXBGeEwsS0FBSyt0RCxtQkFBbUJyYSwwQkFBMEJ2MkIsRUFBYWUsRUFBTzBWLEdBQWdCSyxNQUUxRjI1QixFQWpHOEIsR0EwSHJDZ0IsR0FBb0MsV0FDcEMsU0FBU0EsRUFBbUI3TSxFQUFxQjhNLEVBQWUvdEIsR0FDNUQ5Z0MsS0FBSytoRCxvQkFBc0JBLEVBQzNCL2hELEtBQUs2dUQsY0FBZ0JBLEVBQ3JCN3VELEtBQUs4Z0MsYUFBZUEsRUFnTXhCLE9BeExBOHRCLEVBQW1CdnZELFVBQVV5dkQsWUFBYyxTQUFVM3hDLEVBQWFuZSxHQUM5RCxJQUFJMEssRUFBUTFKLEtBQ1osT0FBT0EsS0FBSzZ1RCxjQUNQL3FCLDBDQUEwQzNtQixFQUFhbmUsR0FDdkRvRCxNQUFLLFNBQVUyc0QsR0FBVyxPQUFPcmxELEVBQU1zbEQsb0JBQW9CN3hDLEVBQWFuZSxFQUFLK3ZELE9BR3RGSCxFQUFtQnZ2RCxVQUFVMnZELG9CQUFzQixTQUFVN3hDLEVBQWFuZSxFQUFLaXdELEdBQzNFLE9BQU9qdkQsS0FBSytoRCxvQkFBb0I5UCxTQUFTOTBCLEVBQWFuZSxHQUFLb0QsTUFBSyxTQUFVa3FDLEdBQ3RFLElBQUssSUFBSTNoQyxFQUFLLEVBQUd1a0QsRUFBY0QsRUFBV3RrRCxFQUFLdWtELEVBQVk3dUQsT0FBUXNLLElBQU0sQ0FFckUyaEMsRUFEWTRpQixFQUFZdmtELEdBQ1ordUIsaUJBQWlCMTZCLEVBQUtzdEMsR0FFdEMsT0FBT0EsTUFLZnNpQixFQUFtQnZ2RCxVQUFVOHZELCtCQUFpQyxTQUFVaHlDLEVBQWFpeUMsRUFBTUwsR0FDdkYsSUFBSTFsQyxFQUFVK08sS0FRZCxPQVBBZzNCLEVBQUs1OUMsU0FBUSxTQUFVeFMsRUFBS3F3RCxHQUN4QixJQUFLLElBQUkxa0QsRUFBSyxFQUFHMmtELEVBQVlQLEVBQVNwa0QsRUFBSzJrRCxFQUFVanZELE9BQVFzSyxJQUFNLENBRS9EMGtELEVBRFlDLEVBQVUza0QsR0FDSit1QixpQkFBaUIxNkIsRUFBS3F3RCxHQUU1Q2htQyxFQUFVQSxFQUFRckksT0FBT2hpQixFQUFLcXdELE1BRTNCaG1DLEdBUVh1bEMsRUFBbUJ2dkQsVUFBVTZ1RCxhQUFlLFNBQVUvd0MsRUFBYWhTLEdBQy9ELElBQUl6QixFQUFRMUosS0FDWixPQUFPQSxLQUFLK2hELG9CQUNQM1AsV0FBV2oxQixFQUFhaFMsR0FDeEIvSSxNQUFLLFNBQVVndEQsR0FBUSxPQUFPMWxELEVBQU02bEQsd0JBQXdCcHlDLEVBQWFpeUMsT0FNbEZSLEVBQW1CdnZELFVBQVVrd0Qsd0JBQTBCLFNBQVVweUMsRUFBYXF5QyxHQUMxRSxJQUFJOWxELEVBQVExSixLQUNaLE9BQU9BLEtBQUs2dUQsY0FDUHhxQiwyQ0FBMkNsbkIsRUFBYXF5QyxHQUN4RHB0RCxNQUFLLFNBQVUyc0QsR0FDaEIsSUFBSUssRUFBTzFsRCxFQUFNeWxELCtCQUErQmh5QyxFQUFhcXlDLEVBQVVULEdBQ25FMWxDLEVBQVU4TyxLQVFkLE9BUEFpM0IsRUFBSzU5QyxTQUFRLFNBQVV4UyxFQUFLcTZCLEdBRW5CQSxJQUNEQSxFQUFXLElBQUk2VCxHQUFXbHVDLEVBQUs0MEIsR0FBZ0JJLGtCQUVuRDNLLEVBQVVBLEVBQVFySSxPQUFPaGlCLEVBQUtxNkIsTUFFM0JoUSxNQVdmdWxDLEVBQW1CdnZELFVBQVVxMEMsMEJBQTRCLFNBQVV2MkIsRUFBYWUsRUFBT3kxQixHQUNuRixPQUFJejFCLEVBQU15bUIsa0JBQ0Mza0MsS0FBS3l2RCxrQ0FBa0N0eUMsRUFBYWUsRUFBTXVRLE1BRTVEdlEsRUFBTTBtQix5QkFDSjVrQyxLQUFLMHZELHlDQUF5Q3Z5QyxFQUFhZSxFQUFPeTFCLEdBR2xFM3pDLEtBQUsydkQsb0NBQW9DeHlDLEVBQWFlLEVBQU95MUIsSUFHNUVpYixFQUFtQnZ2RCxVQUFVb3dELGtDQUFvQyxTQUFVdHlDLEVBQWE2dUMsR0FFcEYsT0FBT2hzRCxLQUFLOHVELFlBQVkzeEMsRUFBYSxJQUFJaVMsR0FBWTQ4QixJQUFVNXBELE1BQUssU0FBVWkzQixHQUMxRSxJQUFJLzJCLEVBQVNnMkIsS0FJYixPQUhJZSxhQUFvQnlSLEtBQ3BCeG9DLEVBQVNBLEVBQU8wZSxPQUFPcVksRUFBU3I2QixJQUFLcTZCLElBRWxDLzJCLE1BR2Zzc0QsRUFBbUJ2dkQsVUFBVXF3RCx5Q0FBMkMsU0FBVXZ5QyxFQUFhZSxFQUFPeTFCLEdBQ2xHLElBQUlqcUMsRUFBUTFKLEtBQ1o2RixFQUFPcVksRUFBTXVRLEtBQUt6ZSxVQUFXLG1FQUM3QixJQUFJdWYsRUFBZXJSLEVBQU1zcUMsZ0JBQ3JCbi9CLEVBQVVpUCxLQUNkLE9BQU90NEIsS0FBSzhnQyxhQUNQZ1YscUJBQXFCMzRCLEVBQWFvUyxHQUNsQ250QixNQUFLLFNBQVV3dEQsR0FHaEIsT0FBT3IxQixHQUFtQi9vQixRQUFRbytDLEdBQVMsU0FBVTVzQixHQUNqRCxJQUFJNnNCLEVBQWtCM3hDLEVBQU0yc0Msd0JBQXdCN25CLEVBQU8zVixNQUFNa0MsSUFDakUsT0FBTzdsQixFQUFNaW1ELG9DQUFvQ3h5QyxFQUFhMHlDLEVBQWlCbGMsR0FBZXZ4QyxNQUFLLFNBQVU3RCxHQUN6R0EsRUFBRWlULFNBQVEsU0FBVXhTLEVBQUtzdEMsR0FDckJqakIsRUFBVUEsRUFBUXJJLE9BQU9oaUIsRUFBS3N0QyxZQUd2Q2xxQyxNQUFLLFdBQWMsT0FBT2luQixTQUdyQ3VsQyxFQUFtQnZ2RCxVQUFVc3dELG9DQUFzQyxTQUFVeHlDLEVBQWFlLEVBQU95MUIsR0FDN0YsSUFFSXRxQixFQUNBeW1DLEVBSEFwbUQsRUFBUTFKLEtBSVosT0FBT0EsS0FBSytoRCxvQkFDUHJPLDBCQUEwQnYyQixFQUFhZSxFQUFPeTFCLEdBQzlDdnhDLE1BQUssU0FBVW1zRCxHQUVoQixPQURBbGxDLEVBQVVrbEMsRUFDSDdrRCxFQUFNbWxELGNBQWNucUIsb0NBQW9Ddm5CLEVBQWFlLE1BRTNFOWIsTUFBSyxTQUFVMnRELEdBUWhCLE9BUEFELEVBQWtCQyxFQU9Ycm1ELEVBQU1zbUQsd0JBQXdCN3lDLEVBQWEyeUMsRUFBaUJ6bUMsR0FBU2puQixNQUFLLFNBQVU2dEQsR0FDdkY1bUMsRUFBVTRtQyxFQUNWLElBQUssSUFBSXRsRCxFQUFLLEVBQUd1bEQsRUFBb0JKLEVBQWlCbmxELEVBQUt1bEQsRUFBa0I3dkQsT0FBUXNLLElBRWpGLElBREEsSUFBSXV2QixFQUFRZzJCLEVBQWtCdmxELEdBQ3JCTSxFQUFLLEVBQUdDLEVBQUtndkIsRUFBTWhCLFVBQVdqdUIsRUFBS0MsRUFBRzdLLE9BQVE0SyxJQUFNLENBQ3pELElBQUl1dUIsRUFBV3R1QixFQUFHRCxHQUNkak0sRUFBTXc2QixFQUFTeDZCLElBQ2YyNkIsRUFBVXRRLEVBQVEvcUIsSUFBSVUsR0FDdEJteEQsRUFBYTMyQixFQUFTRSxpQkFBaUJDLEVBQVNBLEVBQVNPLEVBQU1sQixnQkFFL0QzUCxFQURBOG1DLGFBQXNCcmxCLEdBQ1p6aEIsRUFBUXJJLE9BQU9oaUIsRUFBS214RCxHQUdwQjltQyxFQUFRL0gsT0FBT3RpQixVQU14Q29ELE1BQUssV0FRTixPQUxBaW5CLEVBQVE3WCxTQUFRLFNBQVV4UyxFQUFLc3RDLEdBQ3RCcHVCLEVBQU1rekIsUUFBUTlFLEtBQ2ZqakIsRUFBVUEsRUFBUS9ILE9BQU90aUIsT0FHMUJxcUIsTUFHZnVsQyxFQUFtQnZ2RCxVQUFVMndELHdCQUEwQixTQUFVN3lDLEVBQWE0eUMsRUFBeUJLLEdBRW5HLElBREEsSUFBSUMsRUFBbUMzM0IsS0FDOUIvdEIsRUFBSyxFQUFHMmxELEVBQTRCUCxFQUF5QnBsRCxFQUFLMmxELEVBQTBCandELE9BQVFzSyxJQUV6RyxJQURBLElBQ1NNLEVBQUssRUFBR0MsRUFETG9sRCxFQUEwQjNsRCxHQUNWdXVCLFVBQVdqdUIsRUFBS0MsRUFBRzdLLE9BQVE0SyxJQUFNLENBQ3pELElBQUl1dUIsRUFBV3R1QixFQUFHRCxHQUNkdXVCLGFBQW9Ca1MsSUFDb0IsT0FBeEMwa0IsRUFBa0I5eEQsSUFBSWs3QixFQUFTeDZCLE9BQy9CcXhELEVBQW1DQSxFQUFpQ3A1QixJQUFJdUMsRUFBU3g2QixNQUk3RixJQUFJaXhELEVBQWtCRyxFQUN0QixPQUFPcHdELEtBQUsraEQsb0JBQ1AzUCxXQUFXajFCLEVBQWFrekMsR0FDeEJqdUQsTUFBSyxTQUFVbXVELEdBTWhCLE9BTEFBLEVBQWdCLytDLFNBQVEsU0FBVXhTLEVBQUtzdEMsR0FDdkIsT0FBUkEsR0FBZ0JBLGFBQWV4QixLQUMvQm1sQixFQUFrQkEsRUFBZ0JqdkMsT0FBT2hpQixFQUFLc3RDLE9BRy9DMmpCLE1BR1JyQixFQXBNNEIsR0FzT25DNEIsR0FBOEIsV0FDOUIsU0FBU0EsSUFFTHh3RCxLQUFLeXdELFVBQVksSUFBSTE1QixHQUFVMjVCLEdBQWF6Z0IsY0FFNUNqd0MsS0FBSzJ3RCxhQUFlLElBQUk1NUIsR0FBVTI1QixHQUFhRSxtQkFtRW5ELE9BaEVBSixFQUFhbnhELFVBQVUyUSxRQUFVLFdBQzdCLE9BQU9oUSxLQUFLeXdELFVBQVV6Z0QsV0FHMUJ3Z0QsRUFBYW54RCxVQUFVOHBDLGFBQWUsU0FBVW5xQyxFQUFLa2hCLEdBQ2pELElBQUkyd0MsRUFBTSxJQUFJSCxHQUFhMXhELEVBQUtraEIsR0FDaENsZ0IsS0FBS3l3RCxVQUFZendELEtBQUt5d0QsVUFBVXg1QixJQUFJNDVCLEdBQ3BDN3dELEtBQUsyd0QsYUFBZTN3RCxLQUFLMndELGFBQWExNUIsSUFBSTQ1QixJQUc5Q0wsRUFBYW54RCxVQUFVeXhELGNBQWdCLFNBQVUzbEQsRUFBTStVLEdBQ25ELElBQUl4VyxFQUFRMUosS0FDWm1MLEVBQUtxRyxTQUFRLFNBQVV4UyxHQUFPLE9BQU8wSyxFQUFNeS9CLGFBQWFucUMsRUFBS2toQixPQU1qRXN3QyxFQUFhbnhELFVBQVVncUMsZ0JBQWtCLFNBQVVycUMsRUFBS2toQixHQUNwRGxnQixLQUFLK3dELFVBQVUsSUFBSUwsR0FBYTF4RCxFQUFLa2hCLEtBRXpDc3dDLEVBQWFueEQsVUFBVTJ4RCxpQkFBbUIsU0FBVTdsRCxFQUFNK1UsR0FDdEQsSUFBSXhXLEVBQVExSixLQUNabUwsRUFBS3FHLFNBQVEsU0FBVXhTLEdBQU8sT0FBTzBLLEVBQU0yL0IsZ0JBQWdCcnFDLEVBQUtraEIsT0FNcEVzd0MsRUFBYW54RCxVQUFVNHhELHNCQUF3QixTQUFVL3dDLEdBQ3JELElBQUl4VyxFQUFRMUosS0FDUmt4RCxFQUFXOWhDLEdBQVlRLE1BQ3ZCdWhDLEVBQVcsSUFBSVQsR0FBYVEsRUFBVWh4QyxHQUN0Q2t4QyxFQUFTLElBQUlWLEdBQWFRLEVBQVVoeEMsRUFBSyxHQUN6Qy9VLEVBQU8sR0FLWCxPQUpBbkwsS0FBSzJ3RCxhQUFhcjVCLGVBQWUsQ0FBQzY1QixFQUFVQyxJQUFTLFNBQVVQLEdBQzNEbm5ELEVBQU1xbkQsVUFBVUYsR0FDaEIxbEQsRUFBSzFILEtBQUtvdEQsRUFBSTd4RCxRQUVYbU0sR0FFWHFsRCxFQUFhbnhELFVBQVVneUQsb0JBQXNCLFdBQ3pDLElBQUkzbkQsRUFBUTFKLEtBQ1pBLEtBQUt5d0QsVUFBVWovQyxTQUFRLFNBQVVxL0MsR0FBTyxPQUFPbm5ELEVBQU1xbkQsVUFBVUYsT0FFbkVMLEVBQWFueEQsVUFBVTB4RCxVQUFZLFNBQVVGLEdBQ3pDN3dELEtBQUt5d0QsVUFBWXp3RCxLQUFLeXdELFVBQVV2N0MsT0FBTzI3QyxHQUN2Qzd3RCxLQUFLMndELGFBQWUzd0QsS0FBSzJ3RCxhQUFhejdDLE9BQU8yN0MsSUFFakRMLEVBQWFueEQsVUFBVWl5RCxnQkFBa0IsU0FBVXB4QyxHQUMvQyxJQUFJZ3hDLEVBQVc5aEMsR0FBWVEsTUFDdkJ1aEMsRUFBVyxJQUFJVCxHQUFhUSxFQUFVaHhDLEdBQ3RDa3hDLEVBQVMsSUFBSVYsR0FBYVEsRUFBVWh4QyxFQUFLLEdBQ3pDL1UsRUFBT3V0QixLQUlYLE9BSEExNEIsS0FBSzJ3RCxhQUFhcjVCLGVBQWUsQ0FBQzY1QixFQUFVQyxJQUFTLFNBQVVQLEdBQzNEMWxELEVBQU9BLEVBQUs4ckIsSUFBSTQ1QixFQUFJN3hELFFBRWpCbU0sR0FFWHFsRCxFQUFhbnhELFVBQVVvbUMsWUFBYyxTQUFVem1DLEdBQzNDLElBQUk2eEQsRUFBTSxJQUFJSCxHQUFhMXhELEVBQUssR0FDNUJ1eUQsRUFBV3Z4RCxLQUFLeXdELFVBQVUvNEIsa0JBQWtCbTVCLEdBQ2hELE9BQW9CLE9BQWJVLEdBQXFCdnlELEVBQUlzckIsUUFBUWluQyxFQUFTdnlELE1BRTlDd3hELEVBeEVzQixHQTBFN0JFLEdBQThCLFdBQzlCLFNBQVNBLEVBQWExeEQsRUFBS3d5RCxHQUN2Qnh4RCxLQUFLaEIsSUFBTUEsRUFDWGdCLEtBQUt3eEQsZ0JBQWtCQSxFQVkzQixPQVRBZCxFQUFhemdCLGFBQWUsU0FBVTlsQixFQUFNQyxHQUN4QyxPQUFRZ0YsR0FBWWhDLFdBQVdqRCxFQUFLbnJCLElBQUtvckIsRUFBTXByQixNQUMzQ2tyQixFQUFvQkMsRUFBS3FuQyxnQkFBaUJwbkMsRUFBTW9uQyxrQkFHeERkLEVBQWFFLGtCQUFvQixTQUFVem1DLEVBQU1DLEdBQzdDLE9BQVFGLEVBQW9CQyxFQUFLcW5DLGdCQUFpQnBuQyxFQUFNb25DLGtCQUNwRHBpQyxHQUFZaEMsV0FBV2pELEVBQUtuckIsSUFBS29yQixFQUFNcHJCLE1BRXhDMHhELEVBZnNCLEdBc0Y3QmUsR0FBNEIsV0FDNUIsU0FBU0EsRUFFVHRQLEVBQWF1UCxFQUFhQyxHQUN0QjN4RCxLQUFLbWlELFlBQWNBLEVBQ25CbmlELEtBQUsweEQsWUFBY0EsRUFJbkIxeEQsS0FBSzR4RCxvQkFBc0IsSUFBSXBCLEdBTy9CeHdELEtBQUs2eEQsbUJBQXFCLElBQUl6OUIsR0FBVWxLLEdBR3hDbHFCLEtBQUs4eEQsaUJBQW1CLElBQUk3Z0IsSUFBVSxTQUFVdHlDLEdBQzVDLE9BQU9BLEVBQUVpcUMsaUJBT2I1b0MsS0FBSyt4RCwyQkFBNkJuK0IsR0FBZ0JLLElBQ2xEcHVCLEVBQU9zOEMsRUFBWUMsUUFBUyxpRUFDNUJwaUQsS0FBS21pRCxZQUFZcGhCLGtCQUFrQnNtQixnQkFBZ0JybkQsS0FBSzR4RCxxQkFDeEQ1eEQsS0FBSzZ1RCxjQUFnQjFNLEVBQVlxRCxpQkFBaUJtTSxHQUNsRDN4RCxLQUFLZ3lELGdCQUFrQjdQLEVBQVl1RCx5QkFDbkMxbEQsS0FBSzhoRCxZQUFjSyxFQUFZc0QsaUJBQy9CemxELEtBQUs4dEQsZUFBaUIsSUFBSWMsR0FBbUI1dUQsS0FBS2d5RCxnQkFBaUJoeUQsS0FBSzZ1RCxjQUFlN3VELEtBQUttaUQsWUFBWXdELG1CQUN4RzNsRCxLQUFLMHhELFlBQVk3RCxzQkFBc0I3dEQsS0FBSzh0RCxnQkFrckJoRCxPQS9xQkEyRCxFQUFXcHlELFVBQVVneEIsTUFBUSxXQUN6QixPQUFPcndCLEtBQUtpeUQseUNBVWhCUixFQUFXcHlELFVBQVU2eUQsaUJBQW1CLFNBQVVoeEIsR0FDOUMsT0FBTzE3QixFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlteUQsRUFBa0JDLEVBQW1COXZELEVBQ3JDb0gsRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUdELE9BRkFvdkQsRUFBbUJueUQsS0FBSzZ1RCxjQUN4QnVELEVBQW9CcHlELEtBQUs4dEQsZUFDbEIsQ0FBQyxFQUFhOXRELEtBQUttaUQsWUFBWTVrQixlQUFlLHFCQUFzQix1QkFBdUIsU0FBVU4sR0FHcEcsSUFBSW8xQixFQUNKLE9BQU8zb0QsRUFBTW1sRCxjQUNSanJCLHNCQUFzQjNHLEdBQ3RCNzZCLE1BQUssU0FBVWt3RCxHQU1oQixPQUxBRCxFQUFhQyxFQUNiSCxFQUFtQnpvRCxFQUFNeTRDLFlBQVlxRCxpQkFBaUJ0a0IsR0FHdERreEIsRUFBb0IsSUFBSXhELEdBQW1CbGxELEVBQU1zb0QsZ0JBQWlCRyxFQUFrQnpvRCxFQUFNeTRDLFlBQVl3RCxtQkFDL0Z3TSxFQUFpQnZ1QixzQkFBc0IzRyxNQUU3Qzc2QixNQUFLLFNBQVVtd0QsR0FLaEIsSUFKQSxJQUFJQyxFQUFrQixHQUNsQkMsRUFBZ0IsR0FFaEJDLEVBQWNoNkIsS0FDVC90QixFQUFLLEVBQUdnb0QsRUFBZU4sRUFBWTFuRCxFQUFLZ29ELEVBQWF0eUQsT0FBUXNLLElBQU0sQ0FDeEUsSUFBSXV2QixFQUFReTRCLEVBQWFob0QsR0FDekI2bkQsRUFBZ0IvdUQsS0FBS3kyQixFQUFNbkIsU0FDM0IsSUFBSyxJQUFJOXRCLEVBQUssRUFBR0MsRUFBS2d2QixFQUFNaEIsVUFBV2p1QixFQUFLQyxFQUFHN0ssT0FBUTRLLElBQU0sQ0FDekQsSUFBSXV1QixFQUFXdHVCLEVBQUdELEdBQ2xCeW5ELEVBQWNBLEVBQVl6N0IsSUFBSXVDLEVBQVN4NkIsTUFHL0MsSUFBSyxJQUFJMlYsRUFBSyxFQUFHaStDLEVBQWVMLEVBQVk1OUMsRUFBS2krQyxFQUFhdnlELE9BQVFzVSxJQUFNLENBQ3BFdWxCLEVBQVEwNEIsRUFBYWorQyxHQUN6Qjg5QyxFQUFjaHZELEtBQUt5MkIsRUFBTW5CLFNBQ3pCLElBQUssSUFBSW5rQixFQUFLLEVBQUdpK0MsRUFBSzM0QixFQUFNaEIsVUFBV3RrQixFQUFLaStDLEVBQUd4eUQsT0FBUXVVLElBQU0sQ0FDckQ0a0IsRUFBV3E1QixFQUFHaitDLEdBQ2xCODlDLEVBQWNBLEVBQVl6N0IsSUFBSXVDLEVBQVN4NkIsTUFLL0MsT0FBT296RCxFQUNGbEUsYUFBYWp4QixFQUFLeTFCLEdBQ2xCdHdELE1BQUssU0FBVTB3RCxHQUNoQixNQUFPLENBQ0hBLGtCQUFtQkEsRUFDbkJOLGdCQUFpQkEsRUFDakJDLGNBQWVBLGFBS3ZDLEtBQUssRUFLRCxPQUpBbndELEVBQVMySSxFQUFHakksT0FDWmhELEtBQUs2dUQsY0FBZ0JzRCxFQUNyQm55RCxLQUFLOHRELGVBQWlCc0UsRUFDdEJweUQsS0FBSzB4RCxZQUFZN0Qsc0JBQXNCN3RELEtBQUs4dEQsZ0JBQ3JDLENBQUMsRUFBY3hyRCxXQU0xQ212RCxFQUFXcHlELFVBQVUwekQsV0FBYSxTQUFVNzVCLEdBQ3hDLElBR0k4NUIsRUFIQXRwRCxFQUFRMUosS0FDUmc1QixFQUFpQjdGLEdBQVV4aUIsTUFDM0J4RixFQUFPK3RCLEVBQVVjLFFBQU8sU0FBVTd1QixFQUFNdE4sR0FBSyxPQUFPc04sRUFBSzhyQixJQUFJcDVCLEVBQUVtQixPQUFTMDVCLE1BRTVFLE9BQU8xNEIsS0FBS21pRCxZQUNQNWtCLGVBQWUsMEJBQTJCLHdCQUF3QixTQUFVTixHQUk3RSxPQUFPdnpCLEVBQU1va0QsZUFBZUksYUFBYWp4QixFQUFLOXhCLEdBQU0vSSxNQUFLLFNBQVVndEQsR0FDL0Q0RCxFQUFlNUQsRUFPZixJQURBLElBQUluMkIsRUFBZ0IsR0FDWHR1QixFQUFLLEVBQUdpNEIsRUFBYzFKLEVBQVd2dUIsRUFBS2k0QixFQUFZdmlDLE9BQVFzSyxJQUFNLENBQ3JFLElBQUk2dUIsRUFBV29KLEVBQVlqNEIsR0FDdkJzb0QsRUFBWXo1QixFQUFTaVMsaUJBQWlCdW5CLEVBQWExMEQsSUFBSWs3QixFQUFTeDZCLE1BQ25ELE1BQWJpMEQsR0FJQWg2QixFQUFjeDFCLEtBQUssSUFBSWlvQyxHQUFjbFMsRUFBU3g2QixJQUFLaTBELEVBQVdBLEVBQVV0bkIsWUFBYWpCLEdBQWFFLFFBQU8sS0FHakgsT0FBT2xoQyxFQUFNbWxELGNBQWN4c0IsaUJBQWlCcEYsRUFBS2pFLEVBQWdCQyxFQUFlQyxTQUduRjEyQixNQUFLLFNBQVUwM0IsR0FDaEIsSUFBSXVYLEVBQVV2WCxFQUFNTix3QkFBd0JvNUIsR0FDNUMsTUFBTyxDQUFFajZCLFFBQVNtQixFQUFNbkIsUUFBUzBZLFFBQVNBLE9BS2xEZ2dCLEVBQVdweUQsVUFBVTZ6RCx3QkFBMEIsU0FBVW42QixHQUNyRCxJQUFJcnZCLEVBQVExSixLQUNaLE9BQU9BLEtBQUttaUQsWUFBWTVrQixlQUFlLDRCQUE2Qix1QkFBdUIsU0FBVU4sR0FDakcsT0FBT3Z6QixFQUFNbWxELGNBQ1J4ckIsbUJBQW1CcEcsRUFBS2xFLEdBQ3hCMzJCLE1BQUssU0FBVStJLEdBQ2hCLE9BQUlBLEVBQ096QixFQUFNb2tELGVBQWVJLGFBQWFqeEIsRUFBSzl4QixHQUd2Q292QixHQUFtQnY0QixRQUFRLGFBbUJsRHl2RCxFQUFXcHlELFVBQVV5aUMsaUJBQW1CLFNBQVV4SSxHQUM5QyxJQUFJNXZCLEVBQVExSixLQUNaLE9BQU9BLEtBQUttaUQsWUFBWTVrQixlQUFlLG9CQUFxQixnQ0FBZ0MsU0FBVU4sR0FDbEcsSUFBSWsyQixFQUFXNzVCLEVBQVlZLE1BQU0vdUIsT0FDN0Jpb0QsRUFBaUIxcEQsRUFBTXNvRCxnQkFBZ0JwZCxnQkFBZ0IsQ0FDdkRDLGVBQWUsSUFFbkIsT0FBT25yQyxFQUFNbWxELGNBQ1Ivc0IsaUJBQWlCN0UsRUFBSzNELEVBQVlZLE1BQU9aLEVBQVljLGFBQ3JEaDRCLE1BQUssV0FDTixPQUFPc0gsRUFBTTJwRCw0QkFBNEJwMkIsRUFBSzNELEVBQWE4NUIsTUFFMURoeEQsTUFBSyxXQUFjLE9BQU9neEQsRUFBZTl5RCxNQUFNMjhCLE1BQy9DNzZCLE1BQUssV0FBYyxPQUFPc0gsRUFBTW1sRCxjQUFjeHBCLHdCQUF3QnBJLE1BQ3RFNzZCLE1BQUssV0FBYyxPQUFPc0gsRUFBTW9rRCxlQUFlSSxhQUFhanhCLEVBQUtrMkIsVUFTOUUxQixFQUFXcHlELFVBQVVpMEQsWUFBYyxTQUFVdjZCLEdBQ3pDLElBQUlydkIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS21pRCxZQUFZNWtCLGVBQWUsZUFBZ0IsZ0NBQWdDLFNBQVVOLEdBQzdGLElBQUlzMkIsRUFDSixPQUFPN3BELEVBQU1tbEQsY0FDUjFyQixvQkFBb0JsRyxFQUFLbEUsR0FDekIzMkIsTUFBSyxTQUFVODNCLEdBR2hCLE9BRkFyMEIsRUFBaUIsT0FBVnEwQixFQUFnQix3Q0FDdkJxNUIsRUFBZXI1QixFQUFNL3VCLE9BQ2R6QixFQUFNbWxELGNBQWM3cEIsb0JBQW9CL0gsRUFBSy9DLE1BRW5EOTNCLE1BQUssV0FDTixPQUFPc0gsRUFBTW1sRCxjQUFjeHBCLHdCQUF3QnBJLE1BRWxENzZCLE1BQUssV0FDTixPQUFPc0gsRUFBTW9rRCxlQUFlSSxhQUFhanhCLEVBQUtzMkIsVUFRMUQ5QixFQUFXcHlELFVBQVVxa0MsZ0NBQWtDLFdBQ25ELElBQUloNkIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS21pRCxZQUFZNWtCLGVBQWUsc0NBQXVDLHVCQUF1QixTQUFVTixHQUMzRyxPQUFPdnpCLEVBQU1tbEQsY0FBY25yQixnQ0FBZ0N6RyxPQUluRXcwQixFQUFXcHlELFVBQVU4aUMsbUJBQXFCLFdBQ3RDLElBQUl6NEIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS21pRCxZQUFZNWtCLGVBQWUsd0JBQXlCLHVCQUF1QixTQUFVTixHQUM3RixPQUFPdnpCLEVBQU1tbEQsY0FBYzFzQixtQkFBbUJsRixPQVF0RHcwQixFQUFXcHlELFVBQVUraUMsbUJBQXFCLFNBQVVoSSxHQUNoRCxJQUFJMXdCLEVBQVExSixLQUNaLE9BQU9BLEtBQUttaUQsWUFBWTVrQixlQUFlLHdCQUF5QixnQ0FBZ0MsU0FBVU4sR0FDdEcsT0FBT3Z6QixFQUFNbWxELGNBQWN6c0IsbUJBQW1CbkYsRUFBSzdDLE9BTzNEcTNCLEVBQVdweUQsVUFBVStuQyw2QkFBK0IsV0FDaEQsSUFBSTE5QixFQUFRMUosS0FDWixPQUFPQSxLQUFLbWlELFlBQVk1a0IsZUFBZSxtQ0FBb0MsdUJBQXVCLFNBQVVOLEdBQU8sT0FBT3Z6QixFQUFNbzRDLFlBQVkxYSw2QkFBNkJuSyxPQVU3S3cwQixFQUFXcHlELFVBQVVtMEQsaUJBQW1CLFNBQVVDLEdBQzlDLElBQUkvcEQsRUFBUTFKLEtBQ1IwekQsRUFBZ0JELEVBQVk5WSxnQkFDNUJnWixFQUEyQjN6RCxLQUFLNnhELG1CQUNwQyxPQUFPN3hELEtBQUttaUQsWUFDUDVrQixlQUFlLHFCQUFzQixnQ0FBZ0MsU0FBVU4sR0FDaEYsSUFBSW0yQixFQUFpQjFwRCxFQUFNc29ELGdCQUFnQnBkLGdCQUFnQixDQUN2REMsZUFBZSxJQUduQjhlLEVBQTJCanFELEVBQU1tb0QsbUJBQ2pDLElBQUlsMkIsRUFBVyxHQUNmalYsRUFBYytzQyxFQUFZRyxlQUFlLFNBQVUzN0IsRUFBVTQ3QixHQUN6RCxJQUFJQyxFQUFnQkgsRUFBeUJyMUQsSUFBSTI1QixHQUNqRCxHQUFLNjdCLEVBQUwsQ0FNQW40QixFQUFTbDRCLEtBQUtpRyxFQUFNbzRDLFlBQ2YxWSxtQkFBbUJuTSxFQUFLNDJCLEVBQU8zdUIsaUJBQWtCak4sR0FDakQ3MUIsTUFBSyxXQUNOLE9BQU9zSCxFQUFNbzRDLFlBQVk5WSxnQkFBZ0IvTCxFQUFLNDJCLEVBQU9FLGVBQWdCOTdCLE9BRXpFLElBQUlxaEIsRUFBY3VhLEVBQU92YSxZQUV6QixHQUFJQSxFQUFZajVDLE9BQVMsRUFBRyxDQUN4QixJQUFJMnpELEVBQWdCRixFQUNmalosZ0JBQWdCdkIsRUFBYW9hLEdBQzdCOVksbUJBQW1CM2QsRUFBSXFiLHVCQUM1QnFiLEVBQTJCQSxFQUF5QjN5QyxPQUFPaVgsRUFBVSs3QixHQUdqRXZDLEVBQVd3Qyx3QkFBd0JILEVBQWVFLEVBQWVILElBQ2pFbDRCLEVBQVNsNEIsS0FBS2lHLEVBQU1vNEMsWUFBWS9aLGlCQUFpQjlLLEVBQUsrMkIsU0FJbEUsSUFBSTNmLEVBQWNsYyxLQUNkKzdCLEVBQWN4N0IsS0F5Q2xCLEdBeENBKzZCLEVBQVlVLGdCQUFnQjNpRCxTQUFRLFNBQVV4UyxFQUFLc3RDLEdBQy9DNG5CLEVBQWNBLEVBQVlqOUIsSUFBSWo0QixNQUlsQzI4QixFQUFTbDRCLEtBQUsydkQsRUFBZWhoQixXQUFXblYsRUFBS2kzQixHQUFhOXhELE1BQUssU0FBVTR3RCxHQUNyRVMsRUFBWVUsZ0JBQWdCM2lELFNBQVEsU0FBVXhTLEVBQUtzdEMsR0FDL0MsSUFBSThuQixFQUFjcEIsRUFBYTEwRCxJQUFJVSxHQUsvQnN0QyxhQUFlWSxJQUNmWixFQUFJaDJCLFFBQVFnVSxRQUFRc0osR0FBZ0JLLE1BSXBDbS9CLEVBQWVwaEIsWUFBWWh6QyxFQUFLMDBELEdBQ2hDcmYsRUFBY0EsRUFBWXJ6QixPQUFPaGlCLEVBQUtzdEMsSUFFbEIsTUFBZjhuQixHQUNMOW5CLEVBQUloMkIsUUFBUThWLFVBQVVnb0MsRUFBWTk5QyxTQUFXLEdBQ0csSUFBL0NnMkIsRUFBSWgyQixRQUFROFYsVUFBVWdvQyxFQUFZOTlDLFVBQy9CODlDLEVBQVl6RixrQkFDaEI5b0QsR0FBUSt0QixHQUFnQkssSUFBSTNKLFFBQVFvcEMsR0FBZ0IseURBQ3BETixFQUFleGhCLFNBQVN0RixFQUFLb25CLEdBQzdCcmYsRUFBY0EsRUFBWXJ6QixPQUFPaGlCLEVBQUtzdEMsSUFHdEMzMEIsRUF2WVIsYUF1WXlCLHNDQUF1QzNZLEVBQUsscUJBQXNCbzFELEVBQVk5OUMsUUFBUyxrQkFBbUJnMkIsRUFBSWgyQixTQUUvSG05QyxFQUFZWSx1QkFBdUJyZ0QsSUFBSWhWLElBQ3ZDMjhCLEVBQVNsNEIsS0FBS2lHLEVBQU15NEMsWUFBWXBoQixrQkFBa0I0bUIsb0JBQW9CMXFCLEVBQUtqK0IsWUFRbEYwMEQsRUFBY3BwQyxRQUFRc0osR0FBZ0JLLEtBQU0sQ0FDN0MsSUFBSXFnQyxFQUFzQjVxRCxFQUFNbzRDLFlBQzNCMWEsNkJBQTZCbkssR0FDN0I3NkIsTUFBSyxTQUFVaWxDLEdBS2hCLE9BSkF4aEMsRUFBTzZ0RCxFQUFjdG5DLFVBQVVpYixJQUE4QixFQUFHLGdEQUM1RHFzQixFQUNBLE1BQ0Fyc0IsR0FDRzM5QixFQUFNbzRDLFlBQVl0YSxtQkFBbUJ2SyxFQUFLQSxFQUFJcWIsc0JBQXVCb2IsTUFFaEYvM0IsRUFBU2w0QixLQUFLNndELEdBRWxCLE9BQU8vNUIsR0FBbUJXLFFBQVFTLEdBQzdCdjVCLE1BQUssV0FBYyxPQUFPZ3hELEVBQWU5eUQsTUFBTTI4QixNQUMvQzc2QixNQUFLLFdBQ04sT0FBT3NILEVBQU1va0QsZUFBZXlCLHdCQUF3QnR5QixFQUFLb1gsU0FHNUQ3eEMsTUFBSyxTQUFVNnhDLEdBRWhCLE9BREEzcUMsRUFBTW1vRCxtQkFBcUI4QixFQUNwQnRmLE1BY2ZvZCxFQUFXd0Msd0JBQTBCLFNBQVVILEVBQWVFLEVBQWVILEdBR3pFLE9BRkFodUQsRUFBT211RCxFQUFjMWEsWUFBWWo1QyxPQUFTLEVBQUcseURBRUosSUFBckN5ekQsRUFBY3hhLFlBQVlqNUMsU0FRZDJ6RCxFQUFjclosZ0JBQWdCem1CLGlCQUMxQzQvQixFQUFjblosZ0JBQWdCem1CLGtCQUNqQmwwQixLQUFLdTBELDZCQVFSVixFQUFPRSxlQUFlcG1DLEtBQ2hDa21DLEVBQU9XLGtCQUFrQjdtQyxLQUN6QmttQyxFQUFPM3VCLGlCQUFpQnZYLEtBQ1gsSUFLckI4akMsRUFBV3B5RCxVQUFVbzFELHVCQUF5QixTQUFVQyxHQUVwRCxJQURBLElBQUlockQsRUFBUTFKLEtBQ0gySyxFQUFLLEVBQUdncUQsRUFBZ0JELEVBQWEvcEQsRUFBS2dxRCxFQUFjdDBELE9BQVFzSyxJQUFNLENBQzNFLElBQUlpcUQsRUFBYUQsRUFBY2hxRCxHQUMzQnN0QixFQUFXMjhCLEVBQVczOEIsU0FHMUIsR0FGQWo0QixLQUFLNHhELG9CQUFvQmQsY0FBYzhELEVBQVdDLFVBQVc1OEIsR0FDN0RqNEIsS0FBSzR4RCxvQkFBb0JaLGlCQUFpQjRELEVBQVdFLFlBQWE3OEIsSUFDN0QyOEIsRUFBV0csVUFBVyxDQUN2QixJQUFJcHRCLEVBQWEzbkMsS0FBSzZ4RCxtQkFBbUJ2ekQsSUFBSTI1QixHQUM3Q3B5QixFQUFzQixPQUFmOGhDLEVBQXFCLDZEQUErRDFQLEdBRTNGLElBQUl1aEIsRUFBK0I3UixFQUFXZ1QsZ0JBQzFDcWEsRUFBb0JydEIsRUFBV21ULGlDQUFpQ3RCLEdBQ3BFeDVDLEtBQUs2eEQsbUJBQXFCN3hELEtBQUs2eEQsbUJBQW1CN3dDLE9BQU9pWCxFQUFVKzhCLElBRzNFLE9BQU9oMUQsS0FBS21pRCxZQUFZNWtCLGVBQWUseUJBQTBCLHdCQUF3QixTQUFVTixHQUMvRixPQUFPMUMsR0FBbUIvb0IsUUFBUWtqRCxHQUFhLFNBQVVFLEdBQ3JELE9BQU9yNkIsR0FBbUIvb0IsUUFBUW9qRCxFQUFXRSxhQUFhLFNBQVU5MUQsR0FDaEUsT0FBTzBLLEVBQU15NEMsWUFBWXBoQixrQkFBa0JzSSxnQkFBZ0JwTSxFQUFLaitCLGFBV2hGeXlELEVBQVdweUQsVUFBVTQxRCxrQkFBb0IsU0FBVUMsR0FDL0MsSUFBSXhyRCxFQUFRMUosS0FDWixPQUFPQSxLQUFLbWlELFlBQVk1a0IsZUFBZSwwQkFBMkIsdUJBQXVCLFNBQVVOLEdBSS9GLFlBSHFCMXpCLElBQWpCMnJELElBQ0FBLEdBemxRTSxHQTJsUUh4ckQsRUFBTW1sRCxjQUFjdnJCLGlDQUFpQ3JHLEVBQUtpNEIsT0FPekV6RCxFQUFXcHlELFVBQVU4MUQsYUFBZSxTQUFVbjJELEdBQzFDLElBQUkwSyxFQUFRMUosS0FDWixPQUFPQSxLQUFLbWlELFlBQVk1a0IsZUFBZSxnQkFBaUIsdUJBQXVCLFNBQVVOLEdBQ3JGLE9BQU92ekIsRUFBTW9rRCxlQUFlZ0IsWUFBWTd4QixFQUFLaitCLE9BV3JEeXlELEVBQVdweUQsVUFBVSsxRCxlQUFpQixTQUFVdDBELEdBQzVDLElBQUk0SSxFQUFRMUosS0FDWixPQUFPQSxLQUFLbWlELFlBQ1A1a0IsZUFBZSxrQkFBbUIsd0JBQXdCLFNBQVVOLEdBQ3JFLElBQUkwSyxFQUNKLE9BQU9qK0IsRUFBTW80QyxZQUNSblosY0FBYzFMLEVBQUtuOEIsR0FDbkJzQixNQUFLLFNBQVVpekQsR0FDaEIsT0FBSUEsR0FJQTF0QixFQUFhMHRCLEVBQ045NkIsR0FBbUJ2NEIsUUFBUTJsQyxJQUczQmorQixFQUFNbzRDLFlBQVk5YSxpQkFBaUIvSixHQUFLNzZCLE1BQUssU0FBVTYxQixHQUUxRCxPQURBMFAsRUFBYSxJQUFJOFMsR0FBVzM1QyxFQUFRbTNCLEVBQVU4aEIsR0FBY3lDLE9BQVF2ZixFQUFJcWIsdUJBQ2pFNXVDLEVBQU1vNEMsWUFDUnBhLGNBQWN6SyxFQUFLMEssR0FDbkJ2bEMsTUFBSyxXQUFjLE9BQU91bEMsY0FLMUNubEMsTUFBSyxTQUFVbWxDLEdBS2hCLE9BSjBELE9BQXREaitCLEVBQU1tb0QsbUJBQW1CdnpELElBQUlxcEMsRUFBVzFQLFlBQ3hDdnVCLEVBQU1tb0QsbUJBQXFCbm9ELEVBQU1tb0QsbUJBQW1CN3dDLE9BQU8ybUIsRUFBVzFQLFNBQVUwUCxHQUNoRmorQixFQUFNb29ELGlCQUFpQjU5QyxJQUFJcFQsRUFBUTZtQyxFQUFXMVAsV0FFM0MwUCxNQVFmOHBCLEVBQVdweUQsVUFBVXNwQyxjQUFnQixTQUFVeHJCLEVBQWFyYyxHQUN4RCxJQUFJbTNCLEVBQVdqNEIsS0FBSzh4RCxpQkFBaUJ4ekQsSUFBSXdDLEdBQ3pDLFlBQWlCeUksSUFBYjB1QixFQUNPc0MsR0FBbUJ2NEIsUUFBUWhDLEtBQUs2eEQsbUJBQW1CdnpELElBQUkyNUIsSUFHdkRqNEIsS0FBSzhoRCxZQUFZblosY0FBY3hyQixFQUFhcmMsSUFXM0Qyd0QsRUFBV3B5RCxVQUFVaTJELGNBQWdCLFNBQVVyOUIsRUFBVXM5QixHQUNyRCxJQUFJN3JELEVBQVExSixLQUNSMm5DLEVBQWEzbkMsS0FBSzZ4RCxtQkFBbUJ2ekQsSUFBSTI1QixHQUM3Q3B5QixFQUFzQixPQUFmOGhDLEVBQXFCLHdDQUEwQzFQLEdBQ3RFLElBQUlyNUIsRUFBTzIyRCxFQUNMLHVCQUNBLCtCQUNOLE9BQU92MUQsS0FBS21pRCxZQUNQNWtCLGVBQWUsaUJBQWtCMytCLEdBQU0sU0FBVXErQixHQVdsRCxJQUFJdTRCLEVBQVU5ckQsRUFBTWtvRCxvQkFBb0JYLHNCQUFzQmg1QixHQUM5RCxPQUFLczlCLEVBUU1oN0IsR0FBbUJ2NEIsVUFQbkJ1NEIsR0FBbUIvb0IsUUFBUWdrRCxHQUFTLFNBQVV4MkQsR0FDakQsT0FBTzBLLEVBQU15NEMsWUFBWXBoQixrQkFBa0JzSSxnQkFBZ0JwTSxFQUFLaitCLE1BQ2pFb0QsTUFBSyxXQUNKc0gsRUFBTXk0QyxZQUFZcGhCLGtCQUFrQjJtQixhQUFhenFCLEVBQUswSyxTQU83RG5sQyxNQUFLLFdBQ05rSCxFQUFNbW9ELG1CQUFxQm5vRCxFQUFNbW9ELG1CQUFtQnZ3QyxPQUFPMlcsR0FDM0R2dUIsRUFBTW9vRCxpQkFBaUI1OEMsT0FBT3l5QixFQUFXN21DLFlBV2pEMndELEVBQVdweUQsVUFBVW8yRCxhQUFlLFNBQVV2M0MsRUFBT3czQyxHQUNqRCxJQUFJaHNELEVBQVExSixLQUNSdzVDLEVBQStCNWxCLEdBQWdCSyxJQUMvQys1QixFQUFhdDFCLEtBQ2pCLE9BQU8xNEIsS0FBS21pRCxZQUFZNWtCLGVBQWUsZ0JBQWlCLHVCQUF1QixTQUFVTixHQUNyRixPQUFPdnpCLEVBQU1pL0IsY0FBYzFMLEVBQUsvZSxFQUFNNnNDLFlBQ2pDM29ELE1BQUssU0FBVXVsQyxHQUNoQixHQUFJQSxFQUdBLE9BRkE2UixFQUNJN1IsRUFBVzZSLDZCQUNSOXZDLEVBQU1vNEMsWUFDUnhZLDJCQUEyQnJNLEVBQUswSyxFQUFXMVAsVUFDM0M3MUIsTUFBSyxTQUFVRSxHQUNoQjByRCxFQUFhMXJELFFBSXBCRixNQUFLLFdBQ04sT0FBT3NILEVBQU1nb0QsWUFBWWhlLDBCQUEwQnpXLEVBQUsvZSxFQUFPdzNDLEVBQ3pEbGMsRUFDQTVsQixHQUFnQkssSUFBS3loQyxFQUFxQjFILEVBQWF0MUIsU0FFNUR0MkIsTUFBSyxTQUFVaTZDLEdBQ2hCLE1BQU8sQ0FBRUEsVUFBV0EsRUFBVzJSLFdBQVlBLFVBUXZEeUQsRUFBV3B5RCxVQUFVczJELG1CQUFxQixTQUFVMTlCLEdBQ2hELElBQUl2dUIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS21pRCxZQUFZNWtCLGVBQWUsdUJBQXdCLHVCQUF1QixTQUFVTixHQUM1RixPQUFPdnpCLEVBQU1vNEMsWUFBWXhZLDJCQUEyQnJNLEVBQUtoRixPQUlqRXc1QixFQUFXcHlELFVBQVVnbUQsaUJBQW1CLFdBQ3BDLE9BQU9ybEQsS0FBS21pRCxZQUFZa0Qsb0JBRzVCb00sRUFBV3B5RCxVQUFVdTJELGtDQUFvQyxTQUFVNzhCLEdBQy9ELzRCLEtBQUs2dUQsY0FBYzFwQix5QkFBeUJwTSxJQUdoRDA0QixFQUFXcHlELFVBQVUyakQsa0JBQW9CLFNBQVVuSixHQUMvQzc1QyxLQUFLbWlELFlBQVlhLGtCQUFrQm5KLElBRXZDNFgsRUFBV3B5RCxVQUFVZzBELDRCQUE4QixTQUFVcDJCLEVBQUszRCxFQUFhODVCLEdBQzNFLElBQUkxcEQsRUFBUTFKLEtBQ1JrNkIsRUFBUVosRUFBWVksTUFDcEIyN0IsRUFBVTM3QixFQUFNL3VCLE9BQ2hCMnFELEVBQWV2N0IsR0FBbUJ2NEIsVUE0QnRDLE9BM0JBNnpELEVBQVFya0QsU0FBUSxTQUFVNG5CLEdBQ3RCMDhCLEVBQWVBLEVBQ1YxekQsTUFBSyxXQUNOLE9BQU9neEQsRUFBZW5oQixTQUFTaFYsRUFBSzdELE1BRW5DaDNCLE1BQUssU0FBVTY0QyxHQUNoQixJQUFJM08sRUFBTTJPLEVBQ044YSxFQUFhejhCLEVBQVllLFlBQVkvN0IsSUFBSTg2QixHQUM3Q3Z6QixFQUFzQixPQUFma3dELEVBQXFCLHdEQUN2QnpwQixHQUFPQSxFQUFJaDJCLFFBQVE4VixVQUFVMnBDLEdBQWMsTUFDNUN6cEIsRUFBTXBTLEVBQU1mLHNCQUFzQkMsRUFBUWtULEVBQUtoVCxJQVkzQzg1QixFQUFleGhCLFNBQVN0RixFQUFLaFQsRUFBWWEsZUFWekN0MEIsR0FBUW8xQyxFQUFXLGtCQUNmL2dCLEVBQ0Esd0JBQ0ErZ0IsRUFDQSw0QkFXYjZhLEVBQWExekQsTUFBSyxXQUNyQixPQUFPc0gsRUFBTW1sRCxjQUFjN3BCLG9CQUFvQi9ILEVBQUsvQyxPQUc1RHUzQixFQUFXcHlELFVBQVUrL0MsZUFBaUIsU0FBVVIsR0FDNUMsSUFBSWwxQyxFQUFRMUosS0FDWixPQUFPQSxLQUFLbWlELFlBQVk1a0IsZUFBZSxrQkFBbUIsZ0NBQWdDLFNBQVVOLEdBQU8sT0FBTzJoQixFQUFpQm1CLFFBQVE5aUIsRUFBS3Z6QixFQUFNbW9ELHdCQUcxSkosRUFBV3B5RCxVQUFVZ2dCLFVBQVksU0FBVTRZLEdBQ3ZDLElBQUl2dUIsRUFBUTFKLEtBQ1JnMkQsRUFBbUJoMkQsS0FBSzZ4RCxtQkFBbUJ2ekQsSUFBSTI1QixHQUNuRCxPQUFJKzlCLEVBQ09qMEQsUUFBUUMsUUFBUWcwRCxFQUFpQmwxRCxRQUdqQ2QsS0FBS21pRCxZQUFZNWtCLGVBQWUsa0JBQW1CLHVCQUF1QixTQUFVTixHQUN2RixPQUFPdnpCLEVBQU1vNEMsWUFDUnRZLHVCQUF1QnZNLEVBQUtoRixHQUM1QjcxQixNQUFLLFNBQVV1bEMsR0FBYyxPQUFRQSxFQUFhQSxFQUFXN21DLE9BQVMsWUFXdkYyd0QsRUFBV3B5RCxVQUFVKzBDLHNCQUF3QixXQUN6QyxJQUFJMXFDLEVBQVExSixLQUNaLE9BQU9BLEtBQUttaUQsWUFDUDVrQixlQUFlLDJCQUE0Qix1QkFBdUIsU0FBVU4sR0FDN0UsT0FBT3Z6QixFQUFNc29ELGdCQUFnQjVkLHNCQUFzQm5YLEVBQUt2ekIsRUFBTXFvRCwrQkFFN0R2dkQsTUFBSyxTQUFVeUksR0FDaEIsSUFBSW9wQyxFQUFjcHBDLEVBQUdvcEMsWUFBYXZDLEVBQVc3bUMsRUFBRzZtQyxTQUVoRCxPQURBcG9DLEVBQU1xb0QsMkJBQTZCamdCLEVBQzVCdUMsTUFTZm9kLEVBQVdweUQsVUFBVTR5RCxzQ0FBd0MsV0FDekQsT0FBT3pzRCxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlpMkQsRUFDQXZzRCxFQUFRMUosS0FDWixPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFJakwsS0FBS2d5RCwyQkFBMkJ6ZixJQUNoQzBqQixFQUF3QmoyRCxLQUFLZ3lELGdCQUN0QixDQUFDLEVBQWNoeUQsS0FBS21pRCxZQUNsQjVrQixlQUFlLDZDQUE4Qyx1QkFBdUIsU0FBVU4sR0FBTyxPQUFPZzVCLEVBQXNCdmhCLHNCQUFzQnpYLE1BQ3hKejZCLE1BQUssU0FBVXlJLEdBQ2hCLElBQUk2bUMsRUFBVzdtQyxFQUFHNm1DLFNBQ2xCcG9DLEVBQU1xb0QsMkJBQTZCamdCLE9BR3hDLENBQUMsVUFXcEIyZixFQUFXOEMsNEJBQThCLElBQ2xDOUMsRUFwdEJvQixHQXV1QjNCeUUsR0FBcUMsV0FDckMsU0FBU0EsRUFBb0JwMUIsRUFBY0MsR0FDdkMvZ0MsS0FBSzhnQyxhQUFlQSxFQUNwQjlnQyxLQUFLK2dDLGtCQUFvQkEsRUFLekIvZ0MsS0FBSzZ1RCxjQUFnQixHQUVyQjd1RCxLQUFLdWpDLFlBQWMsRUFLbkJ2akMsS0FBS2dpQyxnQkFBa0JoZCxJQUV2QmhsQixLQUFLbTJELHFCQUF1QixJQUFJcC9CLEdBQVUyNUIsR0FBYXpnQixjQTBOM0QsT0F4TkFpbUIsRUFBb0I3MkQsVUFBVWdpQyxXQUFhLFNBQVVsa0IsR0FDakQsT0FBT29kLEdBQW1CdjRCLFFBQXNDLElBQTlCaEMsS0FBSzZ1RCxjQUFjeHVELFNBRXpENjFELEVBQW9CNzJELFVBQVV5aUMsaUJBQW1CLFNBQVUza0IsRUFBYStjLEVBQU9FLEdBQzNFLElBQUlyQixFQUFVbUIsRUFBTW5CLFFBQ2hCcTlCLEVBQWFwMkQsS0FBS3EyRCx1QkFBdUJ0OUIsRUFBUyxnQkFDdERsekIsRUFBc0IsSUFBZnV3RCxFQUFrQiw4REFFekIsSUFBSXgvQixFQUFRNTJCLEtBQUs2dUQsY0FBY3VILEdBTS9CLE9BTEF2d0QsRUFBT2t6QixJQUFZbkMsRUFBTW1DLFFBQVMsMENBQzlCQSxFQUNBLGVBQ0FuQyxFQUFNbUMsU0FDVi80QixLQUFLZ2lDLGdCQUFrQjVILEVBQ2hCRyxHQUFtQnY0QixXQUU5QmswRCxFQUFvQjcyRCxVQUFVOGlDLG1CQUFxQixTQUFVaGxCLEdBQ3pELE9BQU9vZCxHQUFtQnY0QixRQUFRaEMsS0FBS2dpQyxrQkFFM0NrMEIsRUFBb0I3MkQsVUFBVStpQyxtQkFBcUIsU0FBVWpsQixFQUFhaWQsR0FFdEUsT0FEQXA2QixLQUFLZ2lDLGdCQUFrQjVILEVBQ2hCRyxHQUFtQnY0QixXQUU5QmswRCxFQUFvQjcyRCxVQUFVZ2pDLGlCQUFtQixTQUFVbGxCLEVBQWE2YixFQUFnQkMsRUFBZUMsR0FDbkdyekIsRUFBNEIsSUFBckJxekIsRUFBVTc0QixPQUFjLHdDQUMvQixJQUFJMDRCLEVBQVUvNEIsS0FBS3VqQyxhQUNuQnZqQyxLQUFLdWpDLGNBQ0R2akMsS0FBSzZ1RCxjQUFjeHVELE9BQVMsSUFFNUJ3RixFQURZN0YsS0FBSzZ1RCxjQUFjN3VELEtBQUs2dUQsY0FBY3h1RCxPQUFTLEdBQzlDMDRCLFFBQVVBLEVBQVMsNERBRXBDLElBQUltQixFQUFRLElBQUlwQixHQUFjQyxFQUFTQyxFQUFnQkMsRUFBZUMsR0FDdEVsNUIsS0FBSzZ1RCxjQUFjcHJELEtBQUt5MkIsR0FFeEIsSUFBSyxJQUFJdnZCLEVBQUssRUFBR2k0QixFQUFjMUosRUFBV3Z1QixFQUFLaTRCLEVBQVl2aUMsT0FBUXNLLElBQU0sQ0FDckUsSUFBSTZ1QixFQUFXb0osRUFBWWo0QixHQUMzQjNLLEtBQUttMkQscUJBQXVCbjJELEtBQUttMkQscUJBQXFCbC9CLElBQUksSUFBSXk1QixHQUFhbDNCLEVBQVN4NkIsSUFBSys1QixJQUN6Ri80QixLQUFLOGdDLGFBQWFtQywyQkFBMkI5bEIsRUFBYXFjLEVBQVN4NkIsSUFBSXl2QixLQUFLYixXQUVoRixPQUFPMk0sR0FBbUJ2NEIsUUFBUWs0QixJQUV0Q2c4QixFQUFvQjcyRCxVQUFVOGpDLG9CQUFzQixTQUFVaG1CLEVBQWE0YixHQUN2RSxPQUFPd0IsR0FBbUJ2NEIsUUFBUWhDLEtBQUtzMkQsa0JBQWtCdjlCLEtBRTdEbTlCLEVBQW9CNzJELFVBQVVna0MsbUJBQXFCLFNBQVVsbUIsRUFBYTRiLEdBQ3RFLElBQUl3OUIsRUFBZ0J2MkQsS0FBS3MyRCxrQkFBa0J2OUIsR0FFM0MsT0FEQWx6QixFQUF3QixNQUFqQjB3RCxFQUF1Qix3Q0FDdkJoOEIsR0FBbUJ2NEIsUUFBUXUwRCxFQUFjcHJELFNBRXBEK3FELEVBQW9CNzJELFVBQVVpa0MsaUNBQW1DLFNBQVVubUIsRUFBYTRiLEdBQ3BGLElBQUl3SyxFQUFjeEssRUFBVSxFQUd4Qnk5QixFQUFXeDJELEtBQUt5MkQsZUFBZWx6QixHQUMvQnBuQixFQUFRcTZDLEVBQVcsRUFBSSxFQUFJQSxFQUMvQixPQUFPajhCLEdBQW1CdjRCLFFBQVFoQyxLQUFLNnVELGNBQWN4dUQsT0FBUzhiLEVBQVFuYyxLQUFLNnVELGNBQWMxeUMsR0FBUyxPQUV0Rys1QyxFQUFvQjcyRCxVQUFVcWtDLGdDQUFrQyxXQUM1RCxPQUFPbkosR0FBbUJ2NEIsUUFBc0MsSUFBOUJoQyxLQUFLNnVELGNBQWN4dUQsUUE5OFF2QyxFQTg4UXdFTCxLQUFLdWpDLFlBQWMsSUFFN0cyeUIsRUFBb0I3MkQsVUFBVXVrQyxzQkFBd0IsU0FBVXptQixHQUM1RCxPQUFPb2QsR0FBbUJ2NEIsUUFBUWhDLEtBQUs2dUQsY0FBY3pqRCxVQUV6RDhxRCxFQUFvQjcyRCxVQUFVeWtDLDBDQUE0QyxTQUFVM21CLEVBQWE0bUIsR0FDN0YsSUFBSXI2QixFQUFRMUosS0FDUnF3QixFQUFRLElBQUlxZ0MsR0FBYTNzQixFQUFhLEdBQ3RDN1YsRUFBTSxJQUFJd2lDLEdBQWEzc0IsRUFBYW5kLE9BQU84YSxtQkFDM0NwL0IsRUFBUyxHQU9iLE9BTkF0QyxLQUFLbTJELHFCQUFxQjcrQixlQUFlLENBQUNqSCxFQUFPbkMsSUFBTSxTQUFVMmlDLEdBQzdEaHJELEVBQU9rK0IsRUFBWXpaLFFBQVF1bUMsRUFBSTd4RCxLQUFNLG1EQUNyQyxJQUFJazdCLEVBQVF4d0IsRUFBTTRzRCxrQkFBa0J6RixFQUFJVyxpQkFDeEMzckQsRUFBaUIsT0FBVnEwQixFQUFnQixxREFDdkI1M0IsRUFBT21CLEtBQUt5MkIsTUFFVEssR0FBbUJ2NEIsUUFBUU0sSUFFdEM0ekQsRUFBb0I3MkQsVUFBVWdsQywyQ0FBNkMsU0FBVWxuQixFQUFhbW5CLEdBQzlGLElBQUk1NkIsRUFBUTFKLEtBQ1J1a0MsRUFBaUIsSUFBSXhOLEdBQVU3TSxHQVNuQyxPQVJBb2EsRUFBYTl5QixTQUFRLFNBQVV1eUIsR0FDM0IsSUFBSTFULEVBQVEsSUFBSXFnQyxHQUFhM3NCLEVBQWEsR0FDdEM3VixFQUFNLElBQUl3aUMsR0FBYTNzQixFQUFhbmQsT0FBTzhhLG1CQUMvQ2g0QixFQUFNeXNELHFCQUFxQjcrQixlQUFlLENBQUNqSCxFQUFPbkMsSUFBTSxTQUFVMmlDLEdBQzlEaHJELEVBQU9rK0IsRUFBWXpaLFFBQVF1bUMsRUFBSTd4RCxLQUFNLGlFQUNyQ3VsQyxFQUFpQkEsRUFBZXROLElBQUk0NUIsRUFBSVcsdUJBR3pDajNCLEdBQW1CdjRCLFFBQVFoQyxLQUFLMDJELG9CQUFvQm55QixLQUUvRDJ4QixFQUFvQjcyRCxVQUFVcWxDLG9DQUFzQyxTQUFVdm5CLEVBQWFlLEdBQ3ZGclksR0FBUXFZLEVBQU0wbUIseUJBQTBCLG1FQUd4QyxJQUFJK3hCLEVBQVN6NEMsRUFBTXVRLEtBQ2ZtbEIsRUFBOEIraUIsRUFBT3QyRCxPQUFTLEVBSzlDdTJELEVBQVlELEVBQ1h2bkMsR0FBWUMsY0FBY3VuQyxLQUMzQkEsRUFBWUEsRUFBVXZwQyxNQUFNLEtBRWhDLElBQUlnRCxFQUFRLElBQUlxZ0MsR0FBYSxJQUFJdGhDLEdBQVl3bkMsR0FBWSxHQUdyRHJ5QixFQUFpQixJQUFJeE4sR0FBVTdNLEdBa0JuQyxPQWpCQWxxQixLQUFLbTJELHFCQUFxQjErQixjQUFhLFNBQVVvNUIsR0FDN0MsSUFBSWdHLEVBQWFoRyxFQUFJN3hELElBQUl5dkIsS0FDekIsUUFBS2tvQyxFQUFPNW9DLFdBQVc4b0MsS0FTZkEsRUFBV3gyRCxTQUFXdXpDLElBQ3RCclAsRUFBaUJBLEVBQWV0TixJQUFJNDVCLEVBQUlXLG1CQUVyQyxLQUVabmhDLEdBQ0lrSyxHQUFtQnY0QixRQUFRaEMsS0FBSzAyRCxvQkFBb0JueUIsS0FFL0QyeEIsRUFBb0I3MkQsVUFBVXEzRCxvQkFBc0IsU0FBVTN4QixHQUMxRCxJQUFJcjdCLEVBQVExSixLQUdSc0MsRUFBUyxHQU9iLE9BTkF5aUMsRUFBU3Z6QixTQUFRLFNBQVV1bkIsR0FDdkIsSUFBSW1CLEVBQVF4d0IsRUFBTTRzRCxrQkFBa0J2OUIsR0FDdEIsT0FBVm1CLEdBQ0E1M0IsRUFBT21CLEtBQUt5MkIsTUFHYjUzQixHQUVYNHpELEVBQW9CNzJELFVBQVUybEMsb0JBQXNCLFNBQVU3bkIsRUFBYStjLEdBQ3ZFLElBQUl4d0IsRUFBUTFKLEtBSVo2RixFQUFzQixJQURMN0YsS0FBS3EyRCx1QkFBdUJuOEIsRUFBTW5CLFFBQVMsV0FDbkMseURBQ3pCLzRCLEtBQUs2dUQsY0FBYy9wRCxRQUNuQixJQUFJeWIsRUFBYXZnQixLQUFLbTJELHFCQUN0QixPQUFPNTdCLEdBQW1CL29CLFFBQVEwb0IsRUFBTWhCLFdBQVcsU0FBVU0sR0FDekQsSUFBSXEzQixFQUFNLElBQUlILEdBQWFsM0IsRUFBU3g2QixJQUFLazdCLEVBQU1uQixTQUUvQyxPQURBeFksRUFBYUEsRUFBV3JMLE9BQU8yN0MsR0FDeEJubkQsRUFBTXEzQixrQkFBa0JxRSx3QkFBd0Jqb0IsRUFBYXFjLEVBQVN4NkIsUUFDOUVvRCxNQUFLLFdBQ0pzSCxFQUFNeXNELHFCQUF1QjUxQyxNQUdyQzIxQyxFQUFvQjcyRCxVQUFVOGxDLHlCQUEyQixTQUFVcE0sS0FHbkVtOUIsRUFBb0I3MkQsVUFBVW9tQyxZQUFjLFNBQVV4SSxFQUFLaitCLEdBQ3ZELElBQUk2eEQsRUFBTSxJQUFJSCxHQUFhMXhELEVBQUssR0FDNUJ1eUQsRUFBV3Z4RCxLQUFLbTJELHFCQUFxQnorQixrQkFBa0JtNUIsR0FDM0QsT0FBT3QyQixHQUFtQnY0QixRQUFRaEQsRUFBSXNyQixRQUFRaW5DLEdBQVlBLEVBQVN2eUQsT0FFdkVrM0QsRUFBb0I3MkQsVUFBVWdtQyx3QkFBMEIsU0FBVXBJLEdBSTlELE9BSGtDLElBQTlCajlCLEtBQUs2dUQsY0FBY3h1RCxRQUNuQndGLEVBQU83RixLQUFLbTJELHFCQUFxQm5tRCxVQUFXLCtFQUV6Q3VxQixHQUFtQnY0QixXQVU5QmswRCxFQUFvQjcyRCxVQUFVZzNELHVCQUF5QixTQUFVdDlCLEVBQVNoRSxHQUN0RSxJQUFJNVksRUFBUW5jLEtBQUt5MkQsZUFBZTE5QixHQUVoQyxPQURBbHpCLEVBQU9zVyxHQUFTLEdBQUtBLEVBQVFuYyxLQUFLNnVELGNBQWN4dUQsT0FBUSw0QkFBOEIwMEIsR0FDL0U1WSxHQVdYKzVDLEVBQW9CNzJELFVBQVVvM0QsZUFBaUIsU0FBVTE5QixHQUNyRCxPQUFrQyxJQUE5Qi80QixLQUFLNnVELGNBQWN4dUQsT0FFWixFQU9KMDRCLEVBRFkvNEIsS0FBSzZ1RCxjQUFjLEdBQUc5MUIsU0FPN0NtOUIsRUFBb0I3MkQsVUFBVWkzRCxrQkFBb0IsU0FBVXY5QixHQUN4RCxJQUFJNWMsRUFBUW5jLEtBQUt5MkQsZUFBZTE5QixHQUNoQyxHQUFJNWMsRUFBUSxHQUFLQSxHQUFTbmMsS0FBSzZ1RCxjQUFjeHVELE9BQ3pDLE9BQU8sS0FFWCxJQUFJNjVCLEVBQVFsNkIsS0FBSzZ1RCxjQUFjMXlDLEdBRS9CLE9BREF0VyxFQUFPcTBCLEVBQU1uQixVQUFZQSxFQUFTLDZCQUMzQm1CLEdBRUpnOEIsRUEzTzZCLEdBaVF4QyxJQXF5QklZLEdBcnlCQUMsR0FBMkMsV0FLM0MsU0FBU0EsRUFBMEJqMkIsRUFBY2syQixHQUM3Q2gzRCxLQUFLOGdDLGFBQWVBLEVBQ3BCOWdDLEtBQUtnM0QsTUFBUUEsRUFFYmgzRCxLQUFLb3ZELEtBWEYsSUFBSWg3QixHQUFVaEYsR0FBWWhDLFlBYTdCcHRCLEtBQUsydEIsS0FBTyxFQWtIaEIsT0ExR0FvcEMsRUFBMEIxM0QsVUFBVXV5QyxTQUFXLFNBQVV6MEIsRUFBYW12QixFQUFLd0YsR0FDdkVqc0MsR0FBUWlzQyxFQUFTeG5CLFFBQVFzSixHQUFnQkssS0FBTSxrREFDL0MsSUFBSWoxQixFQUFNc3RDLEVBQUl0dEMsSUFDVnc3QyxFQUFReDZDLEtBQUtvdkQsS0FBSzl3RCxJQUFJVSxHQUN0Qm8yQyxFQUFlb0YsRUFBUUEsRUFBTTdzQixLQUFPLEVBQ3BDc3BDLEVBQWNqM0QsS0FBS2czRCxNQUFNMXFCLEdBTzdCLE9BTkF0c0MsS0FBS292RCxLQUFPcHZELEtBQUtvdkQsS0FBS3B1QyxPQUFPaGlCLEVBQUssQ0FDOUI2eUMsY0FBZXZGLEVBQ2YzZSxLQUFNc3BDLEVBQ05ubEIsU0FBVUEsSUFFZDl4QyxLQUFLMnRCLE1BQVFzcEMsRUFBYzdoQixFQUNwQnAxQyxLQUFLOGdDLGFBQWFtQywyQkFBMkI5bEIsRUFBYW5lLEVBQUl5dkIsS0FBS2IsWUFROUVtcEMsRUFBMEIxM0QsVUFBVTJ5QyxZQUFjLFNBQVVqTyxHQUN4RCxJQUFJeVcsRUFBUXg2QyxLQUFLb3ZELEtBQUs5d0QsSUFBSXlsQyxHQUN0QnlXLElBQ0F4NkMsS0FBS292RCxLQUFPcHZELEtBQUtvdkQsS0FBSzl0QyxPQUFPeWlCLEdBQzdCL2pDLEtBQUsydEIsTUFBUTZzQixFQUFNN3NCLE9BRzNCb3BDLEVBQTBCMTNELFVBQVU0eUMsU0FBVyxTQUFVOTBCLEVBQWE0bUIsR0FDbEUsSUFBSXlXLEVBQVF4NkMsS0FBS292RCxLQUFLOXdELElBQUl5bEMsR0FDMUIsT0FBT3hKLEdBQW1CdjRCLFFBQVF3NEMsRUFBUUEsRUFBTTNJLGNBQWdCLE9BRXBFa2xCLEVBQTBCMTNELFVBQVUreUMsV0FBYSxTQUFVajFCLEVBQWFtbkIsR0FDcEUsSUFBSTU2QixFQUFRMUosS0FDUnFwQixFQUFVK08sS0FLZCxPQUpBa00sRUFBYTl5QixTQUFRLFNBQVV1eUIsR0FDM0IsSUFBSXlXLEVBQVE5d0MsRUFBTTBsRCxLQUFLOXdELElBQUl5bEMsR0FDM0IxYSxFQUFVQSxFQUFRckksT0FBTytpQixFQUFheVcsRUFBUUEsRUFBTTNJLGNBQWdCLFNBRWpFdFgsR0FBbUJ2NEIsUUFBUXFuQixJQUV0QzB0QyxFQUEwQjEzRCxVQUFVcTBDLDBCQUE0QixTQUFVdjJCLEVBQWFlLEVBQU95MUIsR0FDMUY5dEMsR0FBUXFZLEVBQU0wbUIseUJBQTBCLG1FQU14QyxJQUxBLElBQUl2YixFQUFVaVAsS0FHVnErQixFQUFTLElBQUl2bkMsR0FBWWxSLEVBQU11USxLQUFLcEIsTUFBTSxLQUMxQ2pxQixFQUFXcEQsS0FBS292RCxLQUFLaDZCLGdCQUFnQnVoQyxHQUNsQ3Z6RCxFQUFTdXlCLFdBQVcsQ0FDdkIsSUFBSTFxQixFQUFLN0gsRUFBU3N5QixVQUFXMTJCLEVBQU1pTSxFQUFHak0sSUFBS2tNLEVBQUtELEVBQUd2TSxNQUFPbXpDLEVBQWdCM21DLEVBQUcybUMsY0FBZUMsRUFBVzVtQyxFQUFHNG1DLFNBQzFHLElBQUs1ekIsRUFBTXVRLEtBQUtWLFdBQVcvdUIsRUFBSXl2QixNQUMzQixNQUVBcWpCLEVBQVMxbEIsVUFBVXVuQixJQUFrQixHQUdyQzlCLGFBQXlCL0csSUFBWTVzQixFQUFNa3pCLFFBQVFTLEtBQ25EeG9CLEVBQVVBLEVBQVFySSxPQUFPNndCLEVBQWM3eUMsSUFBSzZ5QyxJQUdwRCxPQUFPdFgsR0FBbUJ2NEIsUUFBUXFuQixJQUV0QzB0QyxFQUEwQjEzRCxVQUFVNjNELG1CQUFxQixTQUFVLzVDLEVBQWF4YSxHQUM1RSxPQUFPNDNCLEdBQW1CL29CLFFBQVF4UixLQUFLb3ZELE1BQU0sU0FBVXB3RCxHQUFPLE9BQU8yRCxFQUFFM0QsT0FFM0UrM0QsRUFBMEIxM0QsVUFBVSswQyxzQkFBd0IsU0FBVWozQixFQUFhdzJCLEdBQy9FLE1BQU0sSUFBSTF0QyxNQUFNLG9FQUVwQjh3RCxFQUEwQjEzRCxVQUFVdTFDLGdCQUFrQixTQUFVdGdDLEdBRzVELE9BQU8sSUFBSXlpRCxFQUEwQnZsQiwyQkFBMkJ4eEMsT0FFcEUrMkQsRUFBMEIxM0QsVUFBVXkxQyxRQUFVLFNBQVU3WCxHQUNwRCxPQUFPMUMsR0FBbUJ2NEIsUUFBUWhDLEtBQUsydEIsT0FLM0NvcEMsRUFBMEJ2bEIsMkJBQTRDLFNBQVVybkMsR0FFNUUsU0FBUzhxQyxFQUFRQyxHQUNiLElBQUl4ckMsRUFBUVMsRUFBT3ZNLEtBQUtvQyxPQUFTQSxLQUVqQyxPQURBMEosRUFBTXdyQyxjQUFnQkEsRUFDZnhyQyxFQXFCWCxPQXpCQWxFLEVBQU0xRixVQUFVbTFDLEVBQVM5cUMsR0FNekI4cUMsRUFBUTUxQyxVQUFVaXpDLGFBQWUsU0FBVW4xQixHQUN2QyxJQUFJelQsRUFBUTFKLEtBQ1IyN0IsRUFBVyxHQVNmLE9BUkEzN0IsS0FBS3l4QyxRQUFRamdDLFNBQVEsU0FBVXhTLEVBQUtzdEMsR0FDNUJBLEVBQ0EzUSxFQUFTbDRCLEtBQUtpRyxFQUFNd3JDLGNBQWN0RCxTQUFTejBCLEVBQWFtdkIsRUFBSzVpQyxFQUFNb29DLFdBR25FcG9DLEVBQU13ckMsY0FBY2xELFlBQVloekMsTUFHakN1N0IsR0FBbUJXLFFBQVFTLElBRXRDc1osRUFBUTUxQyxVQUFVOHlDLGFBQWUsU0FBVWgxQixFQUFhNG1CLEdBQ3BELE9BQU8vakMsS0FBS2sxQyxjQUFjakQsU0FBUzkwQixFQUFhNG1CLElBRXBEa1IsRUFBUTUxQyxVQUFVZ3pDLGdCQUFrQixTQUFVbDFCLEVBQWFtbkIsR0FDdkQsT0FBT3RrQyxLQUFLazFDLGNBQWM5QyxXQUFXajFCLEVBQWFtbkIsSUFFL0MyUSxFQTFCMEQsQ0EyQm5FekQsSUFDS3VsQixFQTdIbUMsR0FnSjFDSSxHQUFtQyxXQUNuQyxTQUFTQSxFQUFrQmhWLEdBQ3ZCbmlELEtBQUttaUQsWUFBY0EsRUFJbkJuaUQsS0FBS28zRCxRQUFVLElBQUlubUIsSUFBVSxTQUFVdHlDLEdBQUssT0FBT0EsRUFBRWlxQyxpQkFFckQ1b0MsS0FBS3FuQywwQkFBNEJ6VCxHQUFnQkssSUFFakRqMEIsS0FBS2tuQyxnQkFBa0IsRUFFdkJsbkMsS0FBS3EzRCxzQkFBd0IsRUFLN0JyM0QsS0FBS3VnQixXQUFhLElBQUlpd0MsR0FDdEJ4d0QsS0FBSzZuQyxZQUFjLEVBQ25CN25DLEtBQUsrbUMsa0JBQW9CWCxHQUFrQk0saUJBa0gvQyxPQWhIQXl3QixFQUFrQjkzRCxVQUFVaXBDLGNBQWdCLFNBQVVyTCxFQUFLdDZCLEdBRXZELE9BREEzQyxLQUFLbzNELFFBQVE1bEQsU0FBUSxTQUFVMU8sRUFBRzZrQyxHQUFjLE9BQU9obEMsRUFBRWdsQyxNQUNsRHBOLEdBQW1CdjRCLFdBRTlCbTFELEVBQWtCOTNELFVBQVUrbkMsNkJBQStCLFNBQVVqcUIsR0FDakUsT0FBT29kLEdBQW1CdjRCLFFBQVFoQyxLQUFLcW5DLDRCQUUzQzh2QixFQUFrQjkzRCxVQUFVaW9DLHlCQUEyQixTQUFVbnFCLEdBQzdELE9BQU9vZCxHQUFtQnY0QixRQUFRaEMsS0FBS3EzRCx3QkFFM0NGLEVBQWtCOTNELFVBQVUybkMsaUJBQW1CLFNBQVU3cEIsR0FDckQsSUFBSW02QyxFQUFldDNELEtBQUsrbUMsa0JBQWtCTixNQUFNem1DLEtBQUtrbkMsaUJBRXJELE9BREFsbkMsS0FBS2tuQyxnQkFBa0Jvd0IsRUFDaEIvOEIsR0FBbUJ2NEIsUUFBUXMxRCxJQUV0Q0gsRUFBa0I5M0QsVUFBVW1vQyxtQkFBcUIsU0FBVXJxQixFQUFhc3FCLEVBQTZCSixHQU9qRyxPQU5JQSxJQUNBcm5DLEtBQUtxbkMsMEJBQTRCQSxHQUVqQ0ksRUFBOEJ6bkMsS0FBS3EzRCx3QkFDbkNyM0QsS0FBS3EzRCxzQkFBd0I1dkIsR0FFMUJsTixHQUFtQnY0QixXQUU5Qm0xRCxFQUFrQjkzRCxVQUFVdW9DLGVBQWlCLFNBQVVELEdBQ25EM25DLEtBQUtvM0QsUUFBUWxqRCxJQUFJeXpCLEVBQVc3bUMsT0FBUTZtQyxHQUNwQyxJQUFJMVAsRUFBVzBQLEVBQVcxUCxTQUN0QkEsRUFBV2o0QixLQUFLa25DLGtCQUNoQmxuQyxLQUFLa25DLGdCQUFrQmpQLEdBRXZCMFAsRUFBV2xiLGVBQWlCenNCLEtBQUtxM0Qsd0JBQ2pDcjNELEtBQUtxM0Qsc0JBQXdCMXZCLEVBQVdsYixpQkFHaEQwcUMsRUFBa0I5M0QsVUFBVXFvQyxjQUFnQixTQUFVdnFCLEVBQWF3cUIsR0FJL0QsT0FIQTloQyxHQUFRN0YsS0FBS28zRCxRQUFRcGpELElBQUkyekIsRUFBVzdtQyxRQUFTLHVDQUM3Q2QsS0FBSzRuQyxlQUFlRCxHQUNwQjNuQyxLQUFLNm5DLGFBQWUsRUFDYnROLEdBQW1CdjRCLFdBRTlCbTFELEVBQWtCOTNELFVBQVUwb0MsaUJBQW1CLFNBQVU1cUIsRUFBYXdxQixHQUdsRSxPQUZBOWhDLEVBQU83RixLQUFLbzNELFFBQVFwakQsSUFBSTJ6QixFQUFXN21DLFFBQVMsa0NBQzVDZCxLQUFLNG5DLGVBQWVELEdBQ2JwTixHQUFtQnY0QixXQUU5Qm0xRCxFQUFrQjkzRCxVQUFVMm9DLGlCQUFtQixTQUFVN3FCLEVBQWF3cUIsR0FNbEUsT0FMQTloQyxFQUFPN0YsS0FBSzZuQyxZQUFjLEVBQUcseUNBQzdCaGlDLEVBQU83RixLQUFLbzNELFFBQVFwakQsSUFBSTJ6QixFQUFXN21DLFFBQVMsaURBQzVDZCxLQUFLbzNELFFBQVFsaUQsT0FBT3l5QixFQUFXN21DLFFBQy9CZCxLQUFLdWdCLFdBQVcwd0Msc0JBQXNCdHBCLEVBQVcxUCxVQUNqRGo0QixLQUFLNm5DLGFBQWUsRUFDYnROLEdBQW1CdjRCLFdBRTlCbTFELEVBQWtCOTNELFVBQVU4b0MsY0FBZ0IsU0FBVWhyQixFQUFhd21CLEVBQVl5RSxHQUMzRSxJQUFJMStCLEVBQVExSixLQUNSbWUsRUFBUSxFQUNSbzVDLEVBQVcsR0FTZixPQVJBdjNELEtBQUtvM0QsUUFBUTVsRCxTQUFRLFNBQVV4UyxFQUFLMm9DLEdBQzVCQSxFQUFXbGIsZ0JBQWtCa1gsR0FDZ0IsT0FBN0N5RSxFQUFnQjlwQyxJQUFJcXBDLEVBQVcxUCxZQUMvQnZ1QixFQUFNMHRELFFBQVFsaUQsT0FBT2xXLEdBQ3JCdTRELEVBQVM5ekQsS0FBS2lHLEVBQU11K0IsOEJBQThCOXFCLEVBQWF3cUIsRUFBVzFQLFdBQzFFOVosUUFHRG9jLEdBQW1CVyxRQUFRcThCLEdBQVVuMUQsTUFBSyxXQUFjLE9BQU8rYixNQUUxRWc1QyxFQUFrQjkzRCxVQUFVcXBDLGVBQWlCLFNBQVV2ckIsR0FDbkQsT0FBT29kLEdBQW1CdjRCLFFBQVFoQyxLQUFLNm5DLGNBRTNDc3ZCLEVBQWtCOTNELFVBQVVzcEMsY0FBZ0IsU0FBVXhyQixFQUFhcmMsR0FDL0QsSUFBSTZtQyxFQUFhM25DLEtBQUtvM0QsUUFBUTk0RCxJQUFJd0MsSUFBVyxLQUM3QyxPQUFPeTVCLEdBQW1CdjRCLFFBQVEybEMsSUFFdEN3dkIsRUFBa0I5M0QsVUFBVW1xQyx1QkFBeUIsU0FBVXJzQixFQUFhOGEsR0FHeEUsT0FBT3BULEVBQUsseUJBRWhCc3lDLEVBQWtCOTNELFVBQVUycEMsZ0JBQWtCLFNBQVUvTCxFQUFLOXhCLEVBQU04c0IsR0FDL0RqNEIsS0FBS3VnQixXQUFXdXdDLGNBQWMzbEQsRUFBTThzQixHQUNwQyxJQUFJOEksRUFBb0IvZ0MsS0FBS21pRCxZQUFZcGhCLGtCQUNyQ3BGLEVBQVcsR0FNZixPQUxJb0YsR0FDQTUxQixFQUFLcUcsU0FBUSxTQUFVeFMsR0FDbkIyOEIsRUFBU2w0QixLQUFLczlCLEVBQWtCb0ksYUFBYWxNLEVBQUtqK0IsT0FHbkR1N0IsR0FBbUJXLFFBQVFTLElBRXRDdzdCLEVBQWtCOTNELFVBQVUrcEMsbUJBQXFCLFNBQVVuTSxFQUFLOXhCLEVBQU04c0IsR0FDbEVqNEIsS0FBS3VnQixXQUFXeXdDLGlCQUFpQjdsRCxFQUFNOHNCLEdBQ3ZDLElBQUk4SSxFQUFvQi9nQyxLQUFLbWlELFlBQVlwaEIsa0JBQ3JDcEYsRUFBVyxHQU1mLE9BTElvRixHQUNBNTFCLEVBQUtxRyxTQUFRLFNBQVV4UyxHQUNuQjI4QixFQUFTbDRCLEtBQUtzOUIsRUFBa0JzSSxnQkFBZ0JwTSxFQUFLaitCLE9BR3REdTdCLEdBQW1CVyxRQUFRUyxJQUV0Q3c3QixFQUFrQjkzRCxVQUFVNG9DLDhCQUFnQyxTQUFVaEwsRUFBS2hGLEdBRXZFLE9BREFqNEIsS0FBS3VnQixXQUFXMHdDLHNCQUFzQmg1QixHQUMvQnNDLEdBQW1CdjRCLFdBRTlCbTFELEVBQWtCOTNELFVBQVVpcUMsMkJBQTZCLFNBQVVyTSxFQUFLaEYsR0FDcEUsSUFBSXUvQixFQUFleDNELEtBQUt1Z0IsV0FBVyt3QyxnQkFBZ0JyNUIsR0FDbkQsT0FBT3NDLEdBQW1CdjRCLFFBQVF3MUQsSUFFdENMLEVBQWtCOTNELFVBQVVvbUMsWUFBYyxTQUFVeEksRUFBS2orQixHQUNyRCxPQUFPdTdCLEdBQW1CdjRCLFFBQVFoQyxLQUFLdWdCLFdBQVdrbEIsWUFBWXptQyxLQUUzRG00RCxFQXJJMkIsR0E2SmxDTSxHQUFtQyxXQU9uQyxTQUFTQSxFQUFrQjlkLEVBQVUrZCxHQUNqQyxJQUFJaHVELEVBQVExSixLQUNaQSxLQUFLMjVDLFNBQVdBLEVBQ2hCMzVDLEtBQUsyM0QsZUFBaUIsR0FDdEIzM0QsS0FBSzBpRCxlQUFpQixJQUFJcjJCLEdBQWUsR0FDekNyc0IsS0FBS29oRCxVQUFXLEVBQ2hCcGhELEtBQUtvaEQsVUFBVyxFQUNoQnBoRCxLQUFLK2dDLGtCQUFvQjIyQixFQUF5QjEzRCxNQUNsREEsS0FBSzhoRCxZQUFjLElBQUlxVixHQUFrQm4zRCxNQUl6Q0EsS0FBSzhnQyxhQUFlLElBQUk0VSxHQUN4QjExQyxLQUFLK2hELG9CQUFzQixJQUFJZ1YsR0FBMEIvMkQsS0FBSzhnQyxjQUpsRCxTQUFVd0wsR0FDbEIsT0FBTzVpQyxFQUFNcTNCLGtCQUFrQjYyQixhQUFhdHJCLE1Bb0ZwRCxPQS9FQW1yQixFQUFrQkkscUJBQXVCLFNBQVVsZSxFQUFVOVksRUFBWXZ2QixHQUlyRSxPQUFPLElBQUltbUQsRUFBa0I5ZCxHQUhmLFNBQVVwNkMsR0FDcEIsT0FBTyxJQUFJdTRELEdBQWtCdjRELEVBQUcsSUFBSXc3QyxHQUFnQmxhLEdBQWF2dkIsT0FJekVtbUQsRUFBa0JNLHVCQUF5QixTQUFVcGUsR0FJakQsT0FBTyxJQUFJOGQsRUFBa0I5ZCxHQUhmLFNBQVVwNkMsR0FDcEIsT0FBTyxJQUFJeTRELEdBQW9CejRELE9BSXZDazRELEVBQWtCcDRELFVBQVV5bEQsU0FBVyxXQUduQyxPQURBOWtELEtBQUtvaEQsVUFBVyxFQUNUci9DLFFBQVFDLFdBRW5CN0QsT0FBT0MsZUFBZXE1RCxFQUFrQnA0RCxVQUFXLFVBQVcsQ0FDMURmLElBQUssV0FDRCxPQUFPMEIsS0FBS29oRCxVQUVoQi9pRCxZQUFZLEVBQ1prWixjQUFjLElBRWxCa2dELEVBQWtCcDRELFVBQVVnbUQsaUJBQW1CLFdBQzNDLE9BQU83L0MsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxNQUFPLENBQUMsRUFBYyxDQUFDakwsS0FBSzI1QyxrQkFJeEM4ZCxFQUFrQnA0RCxVQUFVc2pELHdCQUEwQixTQUFVakIsR0FFNUQsT0FBT0EsR0FBcUIsSUFFaEMrVixFQUFrQnA0RCxVQUFVd2pELDJCQUE2QixhQUd6RDRVLEVBQWtCcDRELFVBQVUyakQsa0JBQW9CLFNBQVVuSixLQUcxRDRkLEVBQWtCcDRELFVBQVVzbUQsZ0JBQWtCLFdBQzFDLE9BQU8zbEQsS0FBSzhnQyxjQUVoQjIyQixFQUFrQnA0RCxVQUFVbW1ELGlCQUFtQixTQUFVdGtCLEdBQ3JELElBQUlrWCxFQUFRcDRDLEtBQUsyM0QsZUFBZXoyQixFQUFLKzJCLFNBS3JDLE9BSks3ZixJQUNEQSxFQUFRLElBQUk4ZCxHQUFvQmwyRCxLQUFLOGdDLGFBQWM5Z0MsS0FBSytnQyxtQkFDeEQvZ0MsS0FBSzIzRCxlQUFlejJCLEVBQUsrMkIsU0FBVzdmLEdBRWpDQSxHQUVYcWYsRUFBa0JwNEQsVUFBVW9tRCxlQUFpQixXQUN6QyxPQUFPemxELEtBQUs4aEQsYUFFaEIyVixFQUFrQnA0RCxVQUFVcW1ELHVCQUF5QixXQUNqRCxPQUFPMWxELEtBQUsraEQscUJBRWhCMFYsRUFBa0JwNEQsVUFBVWsrQixlQUFpQixTQUFVeEksRUFBUW4yQixFQUFNZ25ELEdBQ2pFLElBQUlsOEMsRUFBUTFKLEtBQ1oyWCxFQXZGUSxvQkF1RlMsd0JBQXlCb2QsR0FDMUMsSUFBSWtJLEVBQU0sSUFBSWk3QixHQUFrQmw0RCxLQUFLMGlELGVBQWV0Z0QsUUFFcEQsT0FEQXBDLEtBQUsrZ0Msa0JBQWtCbzNCLHVCQUNoQnZTLEVBQXFCM29CLEdBQ3ZCNzZCLE1BQUssU0FBVUUsR0FDaEIsT0FBT29ILEVBQU1xM0Isa0JBQ1JxM0IsdUJBQXVCbjdCLEdBQ3ZCNzZCLE1BQUssV0FBYyxPQUFPRSxRQUU5QjA0QixZQUNBeDRCLE1BQUssU0FBVUYsR0FFaEIsT0FEQTI2QixFQUFJNmpCLHdCQUNHeCtDLE1BR2ZtMUQsRUFBa0JwNEQsVUFBVWtvRCx5QkFBMkIsU0FBVXBxQyxFQUFhbmUsR0FDMUUsT0FBT3U3QixHQUFtQmMsSUF4eldsQmx0QixFQXd6VzRCbk8sS0FBSzIzRCxlQXZ6V3pDVSxFQUFLLEdBQ1Q3bUQsRUFBUXJELEdBQUssU0FBVXJMLEVBQUdPLEdBQUssT0FBT2cxRCxFQUFHNTBELEtBQUtKLE1BQ3ZDZzFELEdBc3pXRXBuRCxLQUFJLFNBQVVtbkMsR0FBUyxPQUFPLFdBQWMsT0FBT0EsRUFBTTNTLFlBQVl0b0IsRUFBYW5lLFFBenpXL0YsSUFBZ0JtUCxFQUNSa3FELEdBMHpXR1osRUFyRzJCLEdBMkdsQ1MsR0FBbUMsU0FBVS90RCxHQUU3QyxTQUFTK3RELEVBQWtCNWYsR0FDdkIsSUFBSTV1QyxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBRWpDLE9BREEwSixFQUFNNHVDLHNCQUF3QkEsRUFDdkI1dUMsRUFFWCxPQU5BbEUsRUFBTTFGLFVBQVVvNEQsRUFBbUIvdEQsR0FNNUIrdEQsRUFQMkIsQ0FRcEN2WCxJQUNFcVgsR0FBcUMsV0FDckMsU0FBU0EsRUFBb0I3VixHQUN6Qm5pRCxLQUFLbWlELFlBQWNBLEVBQ25CbmlELEtBQUsrbUQsYUFBZSxLQUNwQi9tRCxLQUFLczRELG1CQUFxQixLQWlGOUIsT0EvRUFuNkQsT0FBT0MsZUFBZTQ1RCxFQUFvQjM0RCxVQUFXLG9CQUFxQixDQUN0RWYsSUFBSyxXQUNELEdBQUswQixLQUFLczRELG1CQUlOLE9BQU90NEQsS0FBS3M0RCxtQkFIWixNQUFNenpDLEVBQUssMERBTW5CeG1CLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJ5Z0QsRUFBb0IzNEQsVUFBVWdvRCxnQkFBa0IsU0FBVU4sR0FDdEQvbUQsS0FBSyttRCxhQUFlQSxHQUV4QmlSLEVBQW9CMzRELFVBQVU4cEMsYUFBZSxTQUFVbE0sRUFBS2orQixHQUV4RCxPQURBZ0IsS0FBS3U0RCxrQkFBa0JyakQsT0FBT2xXLEdBQ3ZCdTdCLEdBQW1CdjRCLFdBRTlCZzJELEVBQW9CMzRELFVBQVVncUMsZ0JBQWtCLFNBQVVwTSxFQUFLaitCLEdBRTNELE9BREFnQixLQUFLdTRELGtCQUFrQnRoQyxJQUFJajRCLEdBQ3BCdTdCLEdBQW1CdjRCLFdBRTlCZzJELEVBQW9CMzRELFVBQVUrbEMsd0JBQTBCLFNBQVVuSSxFQUFLaitCLEdBRW5FLE9BREFnQixLQUFLdTRELGtCQUFrQnRoQyxJQUFJajRCLEdBQ3BCdTdCLEdBQW1CdjRCLFdBRTlCZzJELEVBQW9CMzRELFVBQVVxb0QsYUFBZSxTQUFVenFCLEVBQUswSyxHQUN4RCxJQUFJaitCLEVBQVExSixLQUNSNjRDLEVBQVE3NEMsS0FBS21pRCxZQUFZc0QsaUJBQzdCLE9BQU81TSxFQUNGdlAsMkJBQTJCck0sRUFBSzBLLEVBQVcxUCxVQUMzQzcxQixNQUFLLFNBQVUrSSxHQUNoQkEsRUFBS3FHLFNBQVEsU0FBVXhTLEdBQU8sT0FBTzBLLEVBQU02dUQsa0JBQWtCdGhDLElBQUlqNEIsU0FFaEVvRCxNQUFLLFdBQWMsT0FBT3kyQyxFQUFNN1EsaUJBQWlCL0ssRUFBSzBLLE9BRS9EcXdCLEVBQW9CMzRELFVBQVU4NEQscUJBQXVCLFdBQ2pEbjRELEtBQUtzNEQsbUJBQXFCLElBQUlodEIsS0FFbEMwc0IsRUFBb0IzNEQsVUFBVSs0RCx1QkFBeUIsU0FBVW43QixHQUM3RCxJQUFJdnpCLEVBQVExSixLQUdSd25ELEVBRFF4bkQsS0FBS21pRCxZQUFZdUQseUJBQ0o5USxrQkFDekIsT0FBT3JhLEdBQW1CL29CLFFBQVF4UixLQUFLdTRELG1CQUFtQixTQUFVdjVELEdBQ2hFLE9BQU8wSyxFQUFNOHVELGFBQWF2N0IsRUFBS2orQixHQUFLb0QsTUFBSyxTQUFVbzJELEdBQzFDQSxHQUNEaFIsRUFBYXhWLFlBQVloekMsU0FHbENvRCxNQUFLLFdBRUosT0FEQXNILEVBQU00dUQsbUJBQXFCLEtBQ3BCOVEsRUFBYWxuRCxNQUFNMjhCLE9BR2xDKzZCLEVBQW9CMzRELFVBQVVzb0Qsb0JBQXNCLFNBQVUxcUIsRUFBS2orQixHQUMvRCxJQUFJMEssRUFBUTFKLEtBQ1osT0FBT0EsS0FBS3c0RCxhQUFhdjdCLEVBQUtqK0IsR0FBS29ELE1BQUssU0FBVW8yRCxHQUMxQ0EsRUFDQTl1RCxFQUFNNnVELGtCQUFrQnJqRCxPQUFPbFcsR0FHL0IwSyxFQUFNNnVELGtCQUFrQnRoQyxJQUFJajRCLE9BSXhDZzVELEVBQW9CMzRELFVBQVV1NEQsYUFBZSxTQUFVdHJCLEdBRW5ELE9BQU8sR0FFWDByQixFQUFvQjM0RCxVQUFVbTVELGFBQWUsU0FBVXY3QixFQUFLaitCLEdBQ3hELElBQUkwSyxFQUFRMUosS0FDWixPQUFPdTZCLEdBQW1CYyxHQUFHLENBQ3pCLFdBQWMsT0FBTzN4QixFQUFNeTRDLFlBQVlzRCxpQkFBaUJoZ0IsWUFBWXhJLEVBQUtqK0IsSUFDekUsV0FBYyxPQUFPMEssRUFBTXk0QyxZQUFZb0YseUJBQXlCdHFCLEVBQUtqK0IsSUFDckUsV0FBYyxPQUFPdTdCLEdBQW1CdjRCLFFBQVEwSCxFQUFNcTlDLGFBQWF0aEIsWUFBWXptQyxRQUdoRmc1RCxFQXJGNkIsR0F1RnBDRixHQUFtQyxXQUNuQyxTQUFTQSxFQUFrQjNWLEVBQWF0aEIsRUFBWXNnQixHQUNoRG5oRCxLQUFLbWlELFlBQWNBLEVBQ25CbmlELEtBQUs2Z0MsV0FBYUEsRUFDbEI3Z0MsS0FBSyttRCxhQUFlLEtBQ3BCL21ELEtBQUt5NEQsd0JBQTBCLElBQUl4bkIsSUFBVSxTQUFVOXNDLEdBQUssT0FBT3l1QixHQUFPenVCLEVBQUVzcUIsU0FDNUV6dUIsS0FBSzQrQyxpQkFBbUIsSUFBSVUsR0FBb0J0L0MsS0FBTW1oRCxHQW9IMUQsT0FoSEEyVyxFQUFrQno0RCxVQUFVODRELHFCQUF1QixhQUNuREwsRUFBa0J6NEQsVUFBVSs0RCx1QkFBeUIsU0FBVW43QixHQUMzRCxPQUFPMUMsR0FBbUJ2NEIsV0FFOUI4MUQsRUFBa0J6NEQsVUFBVWlwQyxjQUFnQixTQUFVckwsRUFBS3Q2QixHQUN2RCxPQUFPM0MsS0FBS21pRCxZQUFZc0QsaUJBQWlCbmQsY0FBY3JMLEVBQUt0NkIsSUFFaEVtMUQsRUFBa0J6NEQsVUFBVXFnRCx1QkFBeUIsU0FBVXppQixHQUMzRCxJQUFJK3BCLEVBQWtCaG5ELEtBQUswNEQsc0JBQXNCejdCLEdBSWpELE9BSHlCajlCLEtBQUttaUQsWUFDekJzRCxpQkFDQS9jLGVBQWV6TCxHQUNNNzZCLE1BQUssU0FBVXlsQyxHQUNyQyxPQUFPbWYsRUFBZ0I1a0QsTUFBSyxTQUFVOGtELEdBQVksT0FBT3JmLEVBQWNxZixTQUcvRTRRLEVBQWtCejRELFVBQVVxNUQsc0JBQXdCLFNBQVV6N0IsR0FDMUQsSUFBSWtxQixFQUFnQixFQUNwQixPQUFPbm5ELEtBQUs0L0Msc0NBQXNDM2lCLEdBQUssU0FBVW42QixHQUM3RHFrRCxPQUNEL2tELE1BQUssV0FBYyxPQUFPK2tELE1BRWpDMlEsRUFBa0J6NEQsVUFBVXVnRCxzQ0FBd0MsU0FBVTNpQixFQUFLdDZCLEdBQy9FLElBQUkrRyxFQUFRMUosS0FDWixPQUFPdTZCLEdBQW1CL29CLFFBQVF4UixLQUFLeTRELHlCQUF5QixTQUFVejVELEVBQUt5dEIsR0FHM0UsT0FBTy9pQixFQUFNNDlDLFNBQVNycUIsRUFBS2orQixFQUFLeXRCLEdBQWdCcnFCLE1BQUssU0FBVWtsRCxHQUMzRCxPQUFLQSxFQUlNL3NCLEdBQW1CdjRCLFVBSG5CVyxFQUFFOHBCLFVBUXpCcXJDLEVBQWtCejRELFVBQVVnb0QsZ0JBQWtCLFNBQVVOLEdBQ3BEL21ELEtBQUsrbUQsYUFBZUEsR0FFeEIrUSxFQUFrQno0RCxVQUFVOG9DLGNBQWdCLFNBQVVsTCxFQUFLMEcsRUFBWXlFLEdBQ25FLE9BQU9wb0MsS0FBS21pRCxZQUNQc0QsaUJBQ0F0ZCxjQUFjbEwsRUFBSzBHLEVBQVl5RSxJQUV4QzB2QixFQUFrQno0RCxVQUFVeWdELHdCQUEwQixTQUFVN2lCLEVBQUswRyxHQUNqRSxJQUFJajZCLEVBQVExSixLQUNSbWUsRUFBUSxFQUNSMDZCLEVBQVE3NEMsS0FBS21pRCxZQUFZdUQseUJBQ3pCOEIsRUFBZTNPLEVBQU1qRSxrQkFTekIsT0FSUWlFLEVBQU1xZSxtQkFBbUJqNkIsR0FBSyxTQUFVaitCLEdBQzVDLE9BQU8wSyxFQUFNNDlDLFNBQVNycUIsRUFBS2orQixFQUFLMmtDLEdBQVl2aEMsTUFBSyxTQUFVa2xELEdBQ2xEQSxJQUNEbnBDLElBQ0FxcEMsRUFBYXhWLFlBQVloekMsVUFJNUJvRCxNQUFLLFdBQWMsT0FBT29sRCxFQUFhbG5ELE1BQU0yOEIsTUFBUzc2QixNQUFLLFdBQWMsT0FBTytiLE1BRTdGMjVDLEVBQWtCejRELFVBQVUrbEMsd0JBQTBCLFNBQVVuSSxFQUFLaitCLEdBRWpFLE9BREFnQixLQUFLeTRELHdCQUF3QnZrRCxJQUFJbFYsRUFBS2krQixFQUFJcWIsdUJBQ25DL2QsR0FBbUJ2NEIsV0FFOUI4MUQsRUFBa0J6NEQsVUFBVXFvRCxhQUFlLFNBQVV6cUIsRUFBSzBLLEdBQ3RELElBQUljLEVBQVVkLEVBQVdpVCxtQkFBbUIzZCxFQUFJcWIsdUJBQ2hELE9BQU90NEMsS0FBS21pRCxZQUFZc0QsaUJBQWlCMWQsaUJBQWlCOUssRUFBS3dMLElBRW5FcXZCLEVBQWtCejRELFVBQVU4cEMsYUFBZSxTQUFVbE0sRUFBS2orQixHQUV0RCxPQURBZ0IsS0FBS3k0RCx3QkFBd0J2a0QsSUFBSWxWLEVBQUtpK0IsRUFBSXFiLHVCQUNuQy9kLEdBQW1CdjRCLFdBRTlCODFELEVBQWtCejRELFVBQVVncUMsZ0JBQWtCLFNBQVVwTSxFQUFLaitCLEdBRXpELE9BREFnQixLQUFLeTRELHdCQUF3QnZrRCxJQUFJbFYsRUFBS2krQixFQUFJcWIsdUJBQ25DL2QsR0FBbUJ2NEIsV0FFOUI4MUQsRUFBa0J6NEQsVUFBVXNvRCxvQkFBc0IsU0FBVTFxQixFQUFLaitCLEdBRTdELE9BREFnQixLQUFLeTRELHdCQUF3QnZrRCxJQUFJbFYsRUFBS2krQixFQUFJcWIsdUJBQ25DL2QsR0FBbUJ2NEIsV0FFOUI4MUQsRUFBa0J6NEQsVUFBVXU0RCxhQUFlLFNBQVV2K0IsR0FDakQsSUFDSTM2QixFQURBaTZELEVBQWlCMzRELEtBQUs2Z0MsV0FBV3dVLG1CQUFtQmhjLEVBQVVBLEVBQVMvaUIsU0FFM0UsR0FBSXFpRCxFQUFldjVDLFNBQ2YxZ0IsRUFBUWk2RCxFQUFldjVDLGNBRXRCLEdBQUl1NUMsRUFBZW5qQixnQkFDcEI5MkMsRUFBUWk2RCxFQUFlbmpCLG9CQUV0QixLQUFJbWpCLEVBQWVsakIsV0FJcEIsTUFBTTV3QixFQUFLLGdDQUhYbm1CLEVBQVFpNkQsRUFBZWxqQixXQUszQixPQUFPL3BDLEtBQUtzRyxVQUFVdFQsR0FBTzJCLFFBRWpDeTNELEVBQWtCejRELFVBQVVpb0QsU0FBVyxTQUFVcnFCLEVBQUtqK0IsRUFBSzJrQyxHQUN2RCxJQUFJajZCLEVBQVExSixLQUNaLE9BQU91NkIsR0FBbUJjLEdBQUcsQ0FDekIsV0FBYyxPQUFPM3hCLEVBQU15NEMsWUFBWW9GLHlCQUF5QnRxQixFQUFLaitCLElBQ3JFLFdBQWMsT0FBT3U3QixHQUFtQnY0QixRQUFRMEgsRUFBTXE5QyxhQUFhdGhCLFlBQVl6bUMsS0FDL0UsV0FBYyxPQUFPMEssRUFBTXk0QyxZQUFZc0QsaUJBQWlCaGdCLFlBQVl4SSxFQUFLaitCLElBQ3pFLFdBQ0ksSUFBSTQ1RCxFQUFhbHZELEVBQU0rdUQsd0JBQXdCbjZELElBQUlVLEdBQ25ELE9BQU91N0IsR0FBbUJ2NEIsYUFBdUJ1SCxJQUFmcXZELEdBQTRCQSxFQUFhajFCLE9BSXZGbTBCLEVBQWtCejRELFVBQVUyZ0QsYUFBZSxTQUFVL2lCLEdBQ2pELE9BQU9qOUIsS0FBS21pRCxZQUFZdUQseUJBQXlCNVEsUUFBUTdYLElBRXRENjZCLEVBMUgyQixHQWtKbENlLEdBQW1DLElBQ25DQyxHQUF5QixJQUV6QkMsR0FBK0IsSUFVL0JDLEdBQW9DLFdBQ3BDLFNBQVNBLEVBSVQ1Z0IsRUFJQXJvQixFQU1Ba3BDLEVBS0FDLEVBTUFDLFFBQzJCLElBQW5CRixJQUE2QkEsRUFBaUJKLFNBQzVCLElBQWxCSyxJQUE0QkEsRUFBZ0JKLFNBQzdCLElBQWZLLElBQXlCQSxFQUFhSixJQUMxQy80RCxLQUFLbzRDLE1BQVFBLEVBQ2JwNEMsS0FBSyt2QixRQUFVQSxFQUNmL3ZCLEtBQUtpNUQsZUFBaUJBLEVBQ3RCajVELEtBQUtrNUQsY0FBZ0JBLEVBQ3JCbDVELEtBQUttNUQsV0FBYUEsRUFDbEJuNUQsS0FBS281RCxjQUFnQixFQUNyQnA1RCxLQUFLcTVELGFBQWUsS0FFcEJyNUQsS0FBS3M1RCxnQkFBa0Jqd0QsS0FBS3NILE1BQzVCM1EsS0FBSzJNLFFBaUVULE9BeERBcXNELEVBQW1CMzVELFVBQVVzTixNQUFRLFdBQ2pDM00sS0FBS281RCxjQUFnQixHQU16QkosRUFBbUIzNUQsVUFBVWs2RCxXQUFhLFdBQ3RDdjVELEtBQUtvNUQsY0FBZ0JwNUQsS0FBS201RCxZQU85QkgsRUFBbUIzNUQsVUFBVW02RCxjQUFnQixTQUFVbDJELEdBQ25ELElBQUlvRyxFQUFRMUosS0FFWkEsS0FBSzB3QixTQUdMLElBQUkrb0MsRUFBMkI3b0QsS0FBS0MsTUFBTTdRLEtBQUtvNUQsY0FBZ0JwNUQsS0FBSzA1RCxpQkFFaEVDLEVBQWUvb0QsS0FBS2tjLElBQUksRUFBR3pqQixLQUFLc0gsTUFBUTNRLEtBQUtzNUQsaUJBRTdDTSxFQUFtQmhwRCxLQUFLa2MsSUFBSSxFQUFHMnNDLEVBQTJCRSxHQUMxRDM1RCxLQUFLbzVELGNBQWdCLEdBQ3JCemhELEVBN0ZJLHFCQTZGYSxtQkFBcUJpaUQsRUFBbUIsb0JBQ2xDNTVELEtBQUtvNUQsY0FBZ0IsMkJBQ2ZLLEVBQTJCLHNCQUNoQ0UsRUFBZSxZQUUzQzM1RCxLQUFLcTVELGFBQWVyNUQsS0FBS280QyxNQUFNdm1CLGtCQUFrQjd4QixLQUFLK3ZCLFFBQVM2cEMsR0FBa0IsV0FFN0UsT0FEQWx3RCxFQUFNNHZELGdCQUFrQmp3RCxLQUFLc0gsTUFDdEJyTixPQUlYdEQsS0FBS281RCxlQUFpQnA1RCxLQUFLazVELGNBQ3ZCbDVELEtBQUtvNUQsY0FBZ0JwNUQsS0FBS2k1RCxpQkFDMUJqNUQsS0FBS281RCxjQUFnQnA1RCxLQUFLaTVELGdCQUUxQmo1RCxLQUFLbzVELGNBQWdCcDVELEtBQUttNUQsYUFDMUJuNUQsS0FBS281RCxjQUFnQnA1RCxLQUFLbTVELGFBR2xDSCxFQUFtQjM1RCxVQUFVcXhCLE9BQVMsV0FDUixPQUF0QjF3QixLQUFLcTVELGVBQ0xyNUQsS0FBS3E1RCxhQUFhM29DLFNBQ2xCMXdCLEtBQUtxNUQsYUFBZSxPQUk1QkwsRUFBbUIzNUQsVUFBVXE2RCxjQUFnQixXQUN6QyxPQUFROW9ELEtBQUtxWixTQUFXLElBQU9qcUIsS0FBS281RCxlQUVqQ0osRUF4RzRCOzs7Ozs7Ozs7Ozs7Ozs7O0lBK0l2QyxTQUFXbEMsR0FNUEEsRUFBc0JBLEVBQStCLFFBQUksR0FBSyxVQU05REEsRUFBc0JBLEVBQWdDLFNBQUksR0FBSyxXQUsvREEsRUFBc0JBLEVBQTRCLEtBQUksR0FBSyxPQUszREEsRUFBc0JBLEVBQTZCLE1BQUksR0FBSyxRQU81REEsRUFBc0JBLEVBQStCLFFBQUksR0FBSyxVQTdCbEUsQ0E4QkdBLEtBQTBCQSxHQUF3QixLQUVyRCxJQXN4QkkrQyxHQXVCQUMsR0E1d0JBQyxHQUFrQyxXQUNsQyxTQUFTQSxFQUFpQjNoQixFQUFPNGhCLEVBQW1CQyxFQUFhQyxFQUFZQyxFQUFxQnRaLEdBQzlGN2dELEtBQUtvNEMsTUFBUUEsRUFDYnA0QyxLQUFLaTZELFlBQWNBLEVBQ25CajZELEtBQUtrNkQsV0FBYUEsRUFDbEJsNkQsS0FBS202RCxvQkFBc0JBLEVBQzNCbjZELEtBQUs2Z0QsU0FBV0EsRUFDaEI3Z0QsS0FBS282RCxNQUFRdEQsR0FBc0J1RCxRQU1uQ3I2RCxLQUFLczZELFdBQWEsRUFDbEJ0NkQsS0FBS3U2RCxVQUFZLEtBQ2pCdjZELEtBQUt3NkQsT0FBUyxLQUNkeDZELEtBQUt5NkQsUUFBVSxJQUFJekIsR0FBbUI1Z0IsRUFBTzRoQixHQStRakQsT0F0UUFELEVBQWlCMTZELFVBQVVxN0QsVUFBWSxXQUNuQyxPQUFRMTZELEtBQUtvNkQsUUFBVXRELEdBQXNCNkQsVUFDekMzNkQsS0FBS282RCxRQUFVdEQsR0FBc0I4RCxNQUNyQzU2RCxLQUFLbzZELFFBQVV0RCxHQUFzQitELFNBTTdDZCxFQUFpQjE2RCxVQUFVeTdELE9BQVMsV0FDaEMsT0FBTzk2RCxLQUFLbzZELFFBQVV0RCxHQUFzQjhELE1BU2hEYixFQUFpQjE2RCxVQUFVZ3hCLE1BQVEsV0FDM0Jyd0IsS0FBS282RCxRQUFVdEQsR0FBc0I3d0QsT0FJekNKLEVBQU83RixLQUFLbzZELFFBQVV0RCxHQUFzQnVELFFBQVMsbUJBQ3JEcjZELEtBQUsrNkQsUUFKRC82RCxLQUFLZzdELGtCQVliakIsRUFBaUIxNkQsVUFBVTQvQyxLQUFPLFdBQzlCLE9BQU96NUMsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsT0FBSy9DLEtBQUswNkQsWUFDSCxDQUFDLEVBQWExNkQsS0FBSytOLE1BQU0rb0QsR0FBc0J1RCxVQUR4QixDQUFDLEVBQWEsR0FFaEQsS0FBSyxFQUNEcHZELEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBYWhDZzNELEVBQWlCMTZELFVBQVU0N0QsZUFBaUIsV0FDeENwMUQsR0FBUTdGLEtBQUswNkQsWUFBYSwrQ0FDMUIxNkQsS0FBS282RCxNQUFRdEQsR0FBc0J1RCxRQUNuQ3I2RCxLQUFLeTZELFFBQVE5dEQsU0FZakJvdEQsRUFBaUIxNkQsVUFBVTY3RCxTQUFXLFdBQ2xDLElBQUl4eEQsRUFBUTFKLEtBR1JBLEtBQUs4NkQsVUFBK0IsT0FBbkI5NkQsS0FBS3U2RCxZQUN0QnY2RCxLQUFLdTZELFVBQVl2NkQsS0FBS280QyxNQUFNdm1CLGtCQUFrQjd4QixLQUFLaTZELFlBdEl6QyxLQXNJdUUsV0FBYyxPQUFPdndELEVBQU15eEQsNEJBSXBIcEIsRUFBaUIxNkQsVUFBVSs3RCxZQUFjLFNBQVU3MkMsR0FDL0N2a0IsS0FBS3E3RCxrQkFDTHI3RCxLQUFLdzZELE9BQU9jLEtBQUsvMkMsSUFHckJ3MUMsRUFBaUIxNkQsVUFBVTg3RCxxQkFBdUIsV0FDOUMsT0FBTzMxRCxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQUlqTCxLQUFLODZELFNBR0UsQ0FBQyxFQUFjOTZELEtBQUsrTixNQUFNK29ELEdBQXNCdUQsVUFFcEQsQ0FBQyxVQUtwQk4sRUFBaUIxNkQsVUFBVWc4RCxnQkFBa0IsV0FDckNyN0QsS0FBS3U2RCxZQUNMdjZELEtBQUt1NkQsVUFBVTdwQyxTQUNmMXdCLEtBQUt1NkQsVUFBWSxPQWdCekJSLEVBQWlCMTZELFVBQVUwTyxNQUFRLFNBQVV3dEQsRUFBWTVwQyxHQUNyRCxPQUFPbnNCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQWtDRCxPQWpDQThDLEVBQU83RixLQUFLMDZELFlBQWEsMENBQ3pCNzBELEVBQU8wMUQsSUFBZXpFLEdBQXNCN3dELE9BQVNtaUQsR0FBa0J6MkIsR0FBVSxzREFFakYzeEIsS0FBS3E3RCxrQkFDTHI3RCxLQUFLeTZELFFBQVEvcEMsU0FHYjF3QixLQUFLczZELGFBQ0RpQixJQUFlekUsR0FBc0I3d0QsTUFFckNqRyxLQUFLeTZELFFBQVE5dEQsUUFFUmdsQixHQUFXQSxFQUFRdm5CLE9BQVM2YSxFQUFLVSxvQkFFdEM3aEIsRUFBTTZ0QixFQUFRbm1CLFlBQ2QxSCxFQUFNLG1FQUNOOUQsS0FBS3k2RCxRQUFRbEIsY0FFUjVuQyxHQUFXQSxFQUFRdm5CLE9BQVM2YSxFQUFLUyxpQkFHdEMxbEIsS0FBS202RCxvQkFBb0JxQixrQkFHVCxPQUFoQng3RCxLQUFLdzZELFNBQ0x4NkQsS0FBS3k3RCxXQUNMejdELEtBQUt3NkQsT0FBT3pzRCxRQUNaL04sS0FBS3c2RCxPQUFTLE1BSWxCeDZELEtBQUtvNkQsTUFBUW1CLEVBRU4sQ0FBQyxFQUFhdjdELEtBQUs2Z0QsU0FBUzZhLFFBQVEvcEMsSUFDL0MsS0FBSyxFQUdELE9BREExbUIsRUFBR2pJLE9BQ0ksQ0FBQyxXQVM1QisyRCxFQUFpQjE2RCxVQUFVbzhELFNBQVcsYUFDdEMxQixFQUFpQjE2RCxVQUFVMDdELEtBQU8sV0FDOUIsSUFBSXJ4RCxFQUFRMUosS0FDWjZGLEVBQU83RixLQUFLbzZELFFBQVV0RCxHQUFzQnVELFFBQVMsb0NBQ3JEcjZELEtBQUtvNkQsTUFBUXRELEdBQXNCNkQsU0FDbkMsSUFBSWdCLEVBQXNCMzdELEtBQUs0N0QsMEJBQTBCNTdELEtBQUtzNkQsWUFFMURBLEVBQWF0NkQsS0FBS3M2RCxXQUN0QnQ2RCxLQUFLbTZELG9CQUFvQjBCLFdBQVdyNUQsTUFBSyxTQUFVcUosR0FLM0NuQyxFQUFNNHdELGFBQWVBLEdBSXJCNXdELEVBQU1veUQsWUFBWWp3RCxNQUV2QixTQUFVL0gsR0FDVDYzRCxHQUFvQixXQUNoQixJQUFJSSxFQUFXLElBQUk3MUMsRUFBZWpCLEVBQUtHLFFBQVMsK0JBQWlDdGhCLEVBQU1pQyxTQUN2RixPQUFPMkQsRUFBTXN5RCxrQkFBa0JELFVBSTNDaEMsRUFBaUIxNkQsVUFBVXk4RCxZQUFjLFNBQVVqd0QsR0FDL0MsSUFBSW5DLEVBQVExSixLQUNaNkYsRUFBTzdGLEtBQUtvNkQsUUFBVXRELEdBQXNCNkQsU0FBVSxrREFDdEQsSUFBSWdCLEVBQXNCMzdELEtBQUs0N0QsMEJBQTBCNTdELEtBQUtzNkQsWUFDOUR0NkQsS0FBS3c2RCxPQUFTeDZELEtBQUtpOEQsU0FBU3B3RCxHQUM1QjdMLEtBQUt3NkQsT0FBTzBCLFFBQU8sV0FDZlAsR0FBb0IsV0FHaEIsT0FGQTkxRCxFQUFPNkQsRUFBTTB3RCxRQUFVdEQsR0FBc0I2RCxTQUFVLG9EQUFzRGp4RCxFQUFNMHdELE9BQ25IMXdELEVBQU0wd0QsTUFBUXRELEdBQXNCOEQsS0FDN0JseEQsRUFBTW0zQyxTQUFTcWIsZUFHOUJsOEQsS0FBS3c2RCxPQUFPa0IsU0FBUSxTQUFVNTNELEdBQzFCNjNELEdBQW9CLFdBQ2hCLE9BQU9qeUQsRUFBTXN5RCxrQkFBa0JsNEQsU0FHdkM5RCxLQUFLdzZELE9BQU8yQixXQUFVLFNBQVU1M0MsR0FDNUJvM0MsR0FBb0IsV0FDaEIsT0FBT2p5RCxFQUFNeXlELFVBQVU1M0MsVUFJbkN3MUMsRUFBaUIxNkQsVUFBVTI3RCxlQUFpQixXQUN4QyxJQUFJdHhELEVBQVExSixLQUNaNkYsRUFBTzdGLEtBQUtvNkQsUUFBVXRELEdBQXNCN3dELE1BQU8sbURBQ25EakcsS0FBS282RCxNQUFRdEQsR0FBc0IrRCxRQUNuQzc2RCxLQUFLeTZELFFBQVFqQixlQUFjLFdBQWMsT0FBT2gwRCxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ25GLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBS3JDLE9BSkFwRixFQUFPN0YsS0FBS282RCxRQUFVdEQsR0FBc0IrRCxRQUFTLHFDQUF1Qzc2RCxLQUFLbzZELE9BQ2pHcDZELEtBQUtvNkQsTUFBUXRELEdBQXNCdUQsUUFDbkNyNkQsS0FBS3F3QixRQUNMeHFCLEVBQU83RixLQUFLMDZELFlBQWEsd0NBQ2xCLENBQUMsYUFLcEJYLEVBQWlCMTZELFVBQVUyOEQsa0JBQW9CLFNBQVVsNEQsR0FRckQsT0FQQStCLEVBQU83RixLQUFLMDZELFlBQWEsbURBQ3pCL2lELEVBeFZRLG1CQXdWUyxxQkFBdUI3VCxHQUN4QzlELEtBQUt3NkQsT0FBUyxLQUtQeDZELEtBQUsrTixNQUFNK29ELEdBQXNCN3dELE1BQU9uQyxJQVFuRGkyRCxFQUFpQjE2RCxVQUFVdThELDBCQUE0QixTQUFVUSxHQUM3RCxJQUFJMXlELEVBQVExSixLQUNaLE9BQU8sU0FBVTRPLEdBQ2JsRixFQUFNMHVDLE1BQU12bkIsa0JBQWlCLFdBQ3pCLE9BQUlubkIsRUFBTTR3RCxhQUFlOEIsRUFDZHh0RCxLQUdQK0ksRUE5V0osbUJBOFdxQix5REFDVjVWLFFBQVFDLGdCQUt4QiszRCxFQS9SMEIsR0F3U2pDc0MsR0FBd0MsU0FBVWx5RCxHQUVsRCxTQUFTa3lELEVBQXVCamtCLEVBQU84aEIsRUFBWW9DLEVBQWF6N0IsRUFBWWdnQixHQUN4RSxJQUFJbjNDLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTW80QyxFQUFPeHRCLEdBQVEyeEMsOEJBQStCM3hDLEdBQVE0eEMsaUJBQWtCdEMsRUFBWW9DLEVBQWF6YixJQUFhN2dELEtBRTVJLE9BREEwSixFQUFNbTNCLFdBQWFBLEVBQ1puM0IsRUFzQ1gsT0ExQ0FsRSxFQUFNMUYsVUFBVXU4RCxFQUF3Qmx5RCxHQU14Q2t5RCxFQUF1Qmg5RCxVQUFVNDhELFNBQVcsU0FBVXB3RCxHQUNsRCxPQUFPN0wsS0FBS2s2RCxXQUFXdUMsV0FBVyxTQUFVNXdELElBRWhEd3dELEVBQXVCaDlELFVBQVU4OEQsVUFBWSxTQUFVTyxHQUVuRDE4RCxLQUFLeTZELFFBQVE5dEQsUUFDYixJQUFJZ3dELEVBQWMzOEQsS0FBSzZnQyxXQUFXKzdCLGdCQUFnQkYsR0FDOUNHLEVBQVc3OEQsS0FBSzZnQyxXQUFXaThCLDBCQUEwQkosR0FDekQsT0FBTzE4RCxLQUFLNmdELFNBQVNrYyxjQUFjSixFQUFhRSxJQVFwRFIsRUFBdUJoOUQsVUFBVTI5RCxNQUFRLFNBQVVyMUIsR0FDL0MsSUFBSXZzQixFQUFVLEdBQ2RBLEVBQVErUSxTQUFXbnNCLEtBQUs2Z0MsV0FBV284QixrQkFDbkM3aEQsRUFBUThoRCxVQUFZbDlELEtBQUs2Z0MsV0FBV2txQixTQUFTcGpCLEdBQzdDLElBQUl3MUIsRUFBU245RCxLQUFLNmdDLFdBQVd1OEIsc0JBQXNCejFCLEdBQy9DdzFCLElBQ0EvaEQsRUFBUStoRCxPQUFTQSxHQUVyQm45RCxLQUFLbzdELFlBQVloZ0QsSUFNckJpaEQsRUFBdUJoOUQsVUFBVWcrRCxRQUFVLFNBQVVwbEMsR0FDakQsSUFBSTdjLEVBQVUsR0FDZEEsRUFBUStRLFNBQVduc0IsS0FBSzZnQyxXQUFXbzhCLGtCQUNuQzdoRCxFQUFRc3NDLGFBQWV6dkIsRUFDdkJqNEIsS0FBS283RCxZQUFZaGdELElBRWRpaEQsRUEzQ2dDLENBNEN6Q3RDLElBa0JFdUQsR0FBdUMsU0FBVW56RCxHQUVqRCxTQUFTbXpELEVBQXNCbGxCLEVBQU84aEIsRUFBWW9DLEVBQWF6N0IsRUFBWWdnQixHQUN2RSxJQUFJbjNDLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTW80QyxFQUFPeHRCLEdBQVEyeUMsNkJBQThCM3lDLEdBQVE0eUMsZ0JBQWlCdEQsRUFBWW9DLEVBQWF6YixJQUFhN2dELEtBWTFJLE9BWEEwSixFQUFNbTNCLFdBQWFBLEVBQ25CbjNCLEVBQU0rekQsb0JBQXFCLEVBUzNCL3pELEVBQU1zNEIsZ0JBQWtCaGQsSUFDakJ0YixFQTBFWCxPQXhGQWxFLEVBQU0xRixVQUFVdzlELEVBQXVCbnpELEdBZ0J2Q2hNLE9BQU9DLGVBQWVrL0QsRUFBc0JqK0QsVUFBVyxvQkFBcUIsQ0FLeEVmLElBQUssV0FDRCxPQUFPMEIsS0FBS3k5RCxvQkFFaEJwL0QsWUFBWSxFQUNaa1osY0FBYyxJQUdsQitsRCxFQUFzQmorRCxVQUFVZ3hCLE1BQVEsV0FDcENyd0IsS0FBS3k5RCxvQkFBcUIsRUFDMUJ0ekQsRUFBTzlLLFVBQVVneEIsTUFBTXp5QixLQUFLb0MsT0FFaENzOUQsRUFBc0JqK0QsVUFBVW84RCxTQUFXLFdBQ25DejdELEtBQUt5OUQsb0JBQ0x6OUQsS0FBSzA5RCxlQUFlLEtBRzVCSixFQUFzQmorRCxVQUFVNDhELFNBQVcsU0FBVXB3RCxHQUNqRCxPQUFPN0wsS0FBS2s2RCxXQUFXdUMsV0FBVyxRQUFTNXdELElBRS9DeXhELEVBQXNCaitELFVBQVU4OEQsVUFBWSxTQUFVd0IsR0FJbEQsR0FGQTkzRCxJQUFTODNELEVBQWN2akMsWUFBYSwrQ0FDcENwNkIsS0FBS2dpQyxnQkFBa0IyN0IsRUFBY3ZqQyxZQUNoQ3A2QixLQUFLeTlELG1CQU1MLENBSUR6OUQsS0FBS3k2RCxRQUFROXRELFFBQ2IsSUFBSTBjLEVBQVVycEIsS0FBSzZnQyxXQUFXKzhCLGlCQUFpQkQsRUFBY0UsYUFBY0YsRUFBY0csWUFDckYzakMsRUFBZ0JuNkIsS0FBSzZnQyxXQUFXc1YsWUFBWXduQixFQUFjRyxZQUM5RCxPQUFPOTlELEtBQUs2Z0QsU0FBU2tkLGlCQUFpQjVqQyxFQUFlOVEsR0FUckQsT0FGQXhqQixHQUFRODNELEVBQWNFLGNBQXNELElBQXRDRixFQUFjRSxhQUFheDlELE9BQWMsc0NBQy9FTCxLQUFLeTlELG9CQUFxQixFQUNuQno5RCxLQUFLNmdELFNBQVNtZCx1QkFpQjdCVixFQUFzQmorRCxVQUFVNCtELGVBQWlCLFdBQzdDcDRELEVBQU83RixLQUFLODZELFNBQVUsK0NBQ3RCajFELEdBQVE3RixLQUFLeTlELG1CQUFvQiwrQkFHakMsSUFBSXJpRCxFQUFVLEdBQ2RBLEVBQVErUSxTQUFXbnNCLEtBQUs2Z0MsV0FBV284QixrQkFDbkNqOUQsS0FBS283RCxZQUFZaGdELElBR3JCa2lELEVBQXNCaitELFVBQVVxK0QsZUFBaUIsU0FBVXhrQyxHQUN2RCxJQUFJeHZCLEVBQVExSixLQUNaNkYsRUFBTzdGLEtBQUs4NkQsU0FBVSwrQ0FDdEJqMUQsRUFBTzdGLEtBQUt5OUQsbUJBQW9CLHVEQUNoQzUzRCxFQUFPN0YsS0FBS2dpQyxnQkFBZ0IzaEMsT0FBUyxFQUFHLDRDQUN4QyxJQUFJK2EsRUFBVSxDQUdWZ2YsWUFBYXA2QixLQUFLZ2lDLGdCQUNsQms4QixPQUFRaGxDLEVBQVVqb0IsS0FBSSxTQUFVdW9CLEdBQVksT0FBTzl2QixFQUFNbTNCLFdBQVcrYSxXQUFXcGlCLE9BRW5GeDVCLEtBQUtvN0QsWUFBWWhnRCxJQUVka2lELEVBekYrQixDQTBGeEN2RCxJQXVCRW9FLEdBQTJCLFdBQzNCLFNBQVNBLEVBQVUvbEIsRUFBTzhoQixFQUFZb0MsRUFBYXo3QixHQUMvQzdnQyxLQUFLbzRDLE1BQVFBLEVBQ2JwNEMsS0FBS2s2RCxXQUFhQSxFQUNsQmw2RCxLQUFLczhELFlBQWNBLEVBQ25CdDhELEtBQUs2Z0MsV0FBYUEsRUFxRXRCLE9BbkVBczlCLEVBQVU5K0QsVUFBVSsrRCx5QkFBMkIsU0FBVXZkLEdBQ3JELE9BQU8sSUFBSXljLEdBQXNCdDlELEtBQUtvNEMsTUFBT3A0QyxLQUFLazZELFdBQVlsNkQsS0FBS3M4RCxZQUFhdDhELEtBQUs2Z0MsV0FBWWdnQixJQUVyR3NkLEVBQVU5K0QsVUFBVWcvRCx5QkFBMkIsU0FBVXhkLEdBQ3JELE9BQU8sSUFBSXdiLEdBQXVCcjhELEtBQUtvNEMsTUFBT3A0QyxLQUFLazZELFdBQVlsNkQsS0FBS3M4RCxZQUFhdDhELEtBQUs2Z0MsV0FBWWdnQixJQUV0R3NkLEVBQVU5K0QsVUFBVWkvRCxPQUFTLFNBQVVwbEMsR0FDbkMsSUFBSXh2QixFQUFRMUosS0FDUnNSLEVBQVMsQ0FDVDZhLFNBQVVuc0IsS0FBSzZnQyxXQUFXbzhCLGtCQUMxQmlCLE9BQVFobEMsRUFBVWpvQixLQUFJLFNBQVVwVCxHQUFLLE9BQU82TCxFQUFNbTNCLFdBQVcrYSxXQUFXLzlDLE9BRTVFLE9BQU9tQyxLQUFLdStELFVBQVUsU0FBVWp0RCxHQUFROU8sTUFBSyxTQUFVZzhELEdBQ25ELE9BQU85MEQsRUFBTW0zQixXQUFXKzhCLGlCQUFpQlksRUFBU1gsYUFBY1csRUFBU1YsZ0JBR2pGSyxFQUFVOStELFVBQVVvL0QsT0FBUyxTQUFVdHpELEdBQ25DLElBQUl6QixFQUFRMUosS0FDUnNSLEVBQVMsQ0FDVDZhLFNBQVVuc0IsS0FBSzZnQyxXQUFXbzhCLGtCQUMxQjVnQixVQUFXbHhDLEVBQUs4RixLQUFJLFNBQVU5TSxHQUFLLE9BQU91RixFQUFNbTNCLFdBQVc2OUIsT0FBT3Y2RCxPQUV0RSxPQUFPbkUsS0FBSzIrRCxtQkFBbUIsb0JBQXFCcnRELEdBQVE5TyxNQUFLLFNBQVVnOEQsR0FDdkUsSUFBSXBQLEVBQU9qM0IsS0FDWHFtQyxFQUFTaHRELFNBQVEsU0FBVTYrQixHQUN2QixJQUFJL0QsRUFBTTVpQyxFQUFNbTNCLFdBQVcrOUIsa0JBQWtCdnVCLEdBQzdDK2UsRUFBT0EsRUFBS3B1QyxPQUFPc3JCLEVBQUl0dEMsSUFBS3N0QyxNQUVoQyxJQUFJaHFDLEVBQVMsR0FNYixPQUxBNkksRUFBS3FHLFNBQVEsU0FBVXhTLEdBQ25CLElBQUlzdEMsRUFBTThpQixFQUFLOXdELElBQUlVLEdBQ25CNkcsSUFBU3ltQyxFQUFLLHdDQUEwQ3R0QyxHQUN4RHNELEVBQU9tQixLQUFLNm9DLE1BRVRocUMsTUFJZjY3RCxFQUFVOStELFVBQVVrL0QsVUFBWSxTQUFVTSxFQUFTempELEdBQy9DLElBQUkxUixFQUFRMUosS0FDWixPQUFPQSxLQUFLczhELFlBQ1BULFdBQ0FyNUQsTUFBSyxTQUFVcUosR0FDaEIsT0FBT25DLEVBQU13d0QsV0FBV3FFLFVBQVVNLEVBQVN6akQsRUFBU3ZQLE1BRW5EL0IsT0FBTSxTQUFVaEcsR0FJakIsTUFISUEsRUFBTXNHLE9BQVM2YSxFQUFLUyxpQkFDcEJoYyxFQUFNNHlELFlBQVlkLGtCQUVoQjEzRCxNQUlkcTZELEVBQVU5K0QsVUFBVXMvRCxtQkFBcUIsU0FBVUUsRUFBU3pqRCxHQUN4RCxJQUFJMVIsRUFBUTFKLEtBQ1osT0FBT0EsS0FBS3M4RCxZQUNQVCxXQUNBcjVELE1BQUssU0FBVXFKLEdBQ2hCLE9BQU9uQyxFQUFNd3dELFdBQVd5RSxtQkFBbUJFLEVBQVN6akQsRUFBU3ZQLE1BRTVEL0IsT0FBTSxTQUFVaEcsR0FJakIsTUFISUEsRUFBTXNHLE9BQVM2YSxFQUFLUyxpQkFDcEJoYyxFQUFNNHlELFlBQVlkLGtCQUVoQjEzRCxNQUdQcTZELEVBMUVtQixHQWlHMUJ4aEQsR0FBNkIsV0FDN0IsU0FBU0EsRUFBWW1pRCxHQUNqQjkrRCxLQUFLOCtELFVBQVlBLEVBRWpCOStELEtBQUsrK0QsYUFBZXZtQyxLQUNwQng0QixLQUFLazVCLFVBQVksR0FDakJsNUIsS0FBS2cvRCxXQUFZLEVBS2pCaC9ELEtBQUtpL0QsZUFBaUIsS0FPdEJqL0QsS0FBS2svRCxZQUFjLElBQUk1ekIsSUFpSjNCLE9BL0lBM3VCLEVBQVl0ZCxVQUFVby9ELE9BQVMsU0FBVXR6RCxHQUNyQyxPQUFPM0YsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJb3ZELEVBQ0ExbEQsRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELEdBREEvQyxLQUFLbS9ELHdCQUNEbi9ELEtBQUtrNUIsVUFBVTc0QixPQUFTLEVBQ3hCLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLDhFQUVwRCxNQUFPLENBQUMsRUFBYXJsQixLQUFLOCtELFVBQVVMLE9BQU90ekQsSUFDL0MsS0FBSyxFQVVELE9BVEFpa0QsRUFBT25rRCxFQUFHakksUUFDTHdPLFNBQVEsU0FBVTg2QixHQUNmQSxhQUFlWSxJQUFjWixhQUFleEIsR0FDNUNwaEMsRUFBTTAxRCxjQUFjOXlCLEdBR3BCem5CLEVBQUssbUNBQXFDeW5CLEVBQUlyc0MsWUFBWWpDLFNBRzNELENBQUMsRUFBY294RCxXQUsxQ3p5QyxFQUFZdGQsVUFBVTZVLElBQU0sU0FBVWxWLEVBQUswTCxHQUN2QzFLLEtBQUtxL0QsTUFBTTMwRCxFQUFLNDBELFlBQVl0Z0UsRUFBS2dCLEtBQUtxckMsYUFBYXJzQyxLQUNuRGdCLEtBQUtrL0QsWUFBWWpvQyxJQUFJajRCLElBRXpCMmQsRUFBWXRkLFVBQVUyTixPQUFTLFNBQVVoTyxFQUFLMEwsR0FDMUMsSUFDSTFLLEtBQUtxL0QsTUFBTTMwRCxFQUFLNDBELFlBQVl0Z0UsRUFBS2dCLEtBQUt1L0Qsc0JBQXNCdmdFLEtBRWhFLE1BQU93QixHQUNIUixLQUFLaS9ELGVBQWlCeitELEVBRTFCUixLQUFLay9ELFlBQVlqb0MsSUFBSWo0QixJQUV6QjJkLEVBQVl0ZCxVQUFVNlYsT0FBUyxTQUFVbFcsR0FDckNnQixLQUFLcS9ELE1BQU0sQ0FBQyxJQUFJcnlCLEdBQWVodUMsRUFBS2dCLEtBQUtxckMsYUFBYXJzQyxNQUN0RGdCLEtBQUtrL0QsWUFBWWpvQyxJQUFJajRCLElBRXpCMmQsRUFBWXRkLFVBQVVpL0QsT0FBUyxXQUMzQixPQUFPOTRELEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSXcvRCxFQUNKLE9BQU9oNkQsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsR0FEQS9DLEtBQUttL0Qsd0JBQ0RuL0QsS0FBS2kvRCxlQUNMLE1BQU1qL0QsS0FBS2kvRCxlQU9mLEdBTEFPLEVBQVl4L0QsS0FBSysrRCxhQUVqQi8rRCxLQUFLazVCLFVBQVUxbkIsU0FBUSxTQUFVZ29CLEdBQzdCZ21DLEVBQVlBLEVBQVVsK0MsT0FBT2tZLEVBQVN4NkIsU0FFckN3Z0UsRUFBVXh2RCxVQUNYLE1BQU0sSUFBSWtXLEVBQWVqQixFQUFLSSxpQkFBa0IsOERBRXBELE1BQU8sQ0FBQyxFQUFhcmxCLEtBQUs4K0QsVUFBVVIsT0FBT3QrRCxLQUFLazVCLFlBQ3BELEtBQUssRUFHRCxPQUZBanVCLEVBQUdqSSxPQUNIaEQsS0FBS2cvRCxXQUFZLEVBQ1YsQ0FBQyxXQUs1QnJpRCxFQUFZdGQsVUFBVSsvRCxjQUFnQixTQUFVOXlCLEdBQzVDLElBQUltekIsRUFDSixHQUFJbnpCLGFBQWV4QixHQUNmMjBCLEVBQWFuekIsRUFBSWgyQixZQUVoQixNQUFJZzJCLGFBQWVZLElBS3BCLE1BQU1yb0IsRUFBSyxtQ0FBcUN5bkIsRUFBSXJzQyxZQUFZakMsTUFIaEV5aEUsRUFBYTdyQyxHQUFnQkksZ0JBS2pDLElBQUkwckMsRUFBa0IxL0QsS0FBSysrRCxhQUFhemdFLElBQUlndUMsRUFBSXR0QyxLQUNoRCxHQUF3QixPQUFwQjBnRSxHQUNBLElBQUtELEVBQVduMUMsUUFBUW8xQyxHQUVwQixNQUFNLElBQUl4NUMsRUFBZWpCLEVBQUtZLFFBQVMsb0RBSTNDN2xCLEtBQUsrK0QsYUFBZS8rRCxLQUFLKytELGFBQWEvOUMsT0FBT3NyQixFQUFJdHRDLElBQUt5Z0UsSUFPOUQ5aUQsRUFBWXRkLFVBQVVnc0MsYUFBZSxTQUFVcnNDLEdBQzNDLElBQUlzWCxFQUFVdFcsS0FBSysrRCxhQUFhemdFLElBQUlVLEdBQ3BDLE9BQUtnQixLQUFLay9ELFlBQVlsckQsSUFBSWhWLElBQVFzWCxFQUN2Qm8wQixHQUFhQyxXQUFXcjBCLEdBR3hCbzBCLEdBQWFNLE1BTTVCcnVCLEVBQVl0ZCxVQUFVa2dFLHNCQUF3QixTQUFVdmdFLEdBQ3BELElBQUlzWCxFQUFVdFcsS0FBSysrRCxhQUFhemdFLElBQUlVLEdBR3BDLElBQUtnQixLQUFLay9ELFlBQVlsckQsSUFBSWhWLElBQVFzWCxFQUFTLENBQ3ZDLEdBQUlBLEVBQVFnVSxRQUFRc0osR0FBZ0JJLGlCQVVoQyxNQUFNLElBQUk5TixFQUFlakIsRUFBS0ksaUJBQWtCLCtDQUdwRCxPQUFPcWxCLEdBQWFDLFdBQVdyMEIsR0FLL0IsT0FBT28wQixHQUFhRSxRQUFPLElBR25DanVCLEVBQVl0ZCxVQUFVZ2dFLE1BQVEsU0FBVW5tQyxHQUNwQ2w1QixLQUFLbS9ELHdCQUNMbi9ELEtBQUtrNUIsVUFBWWw1QixLQUFLazVCLFVBQVVsMUIsT0FBT2sxQixJQUUzQ3ZjLEVBQVl0ZCxVQUFVOC9ELHNCQUF3QixXQUMxQ3Q1RCxHQUFRN0YsS0FBS2cvRCxVQUFXLG9GQUVyQnJpRCxFQW5LcUIsSUE4TGhDLFNBQVdrOUMsR0FPUEEsRUFBWUEsRUFBcUIsUUFBSSxHQUFLLFVBTTFDQSxFQUFZQSxFQUFvQixPQUFJLEdBQUssU0FNekNBLEVBQVlBLEVBQXFCLFFBQUksR0FBSyxVQW5COUMsQ0FvQkdBLEtBQWdCQSxHQUFjLEtBR2pDLFNBQVdDLEdBQ1BBLEVBQWtCQSxFQUErQixZQUFJLEdBQUssY0FDMURBLEVBQWtCQSxFQUFxQyxrQkFBSSxHQUFLLG9CQUZwRSxDQUdHQSxLQUFzQkEsR0FBb0I7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0I3QyxJQXdLSTZGLEdBakpBQyxHQUFvQyxXQUNwQyxTQUFTQSxFQUFtQjl2QyxFQUFZK3ZDLEdBQ3BDNy9ELEtBQUs4dkIsV0FBYUEsRUFDbEI5dkIsS0FBSzYvRCxtQkFBcUJBLEVBRTFCNy9ELEtBQUtvNkQsTUFBUVAsR0FBWWlHLFFBTXpCOS9ELEtBQUsrL0Qsb0JBQXNCLEVBTTNCLy9ELEtBQUtnZ0UsaUJBQW1CLEtBTXhCaGdFLEtBQUtpZ0UsMkJBQTRCLEVBNkZyQyxPQXBGQUwsRUFBbUJ2Z0UsVUFBVTZnRSx1QkFBeUIsV0FDbEQsSUFBSXgyRCxFQUFRMUosS0FDcUIsSUFBN0JBLEtBQUsrL0Qsc0JBQ0wvL0QsS0FBS21nRSxnQkFBZ0J0RyxHQUFZaUcsU0FDakNqNkQsRUFBaUMsT0FBMUI3RixLQUFLZ2dFLGlCQUEyQiw2Q0FDdkNoZ0UsS0FBS2dnRSxpQkFBbUJoZ0UsS0FBSzh2QixXQUFXK0Isa0JBQWtCakgsR0FBUXcxQyxtQkFqRGhELEtBaUQ2RixXQVMzRyxPQVJBMTJELEVBQU1zMkQsaUJBQW1CLEtBQ3pCbjZELEVBQU82RCxFQUFNMHdELFFBQVVQLEdBQVlpRyxRQUFTLHFFQUM1Q3AyRCxFQUFNMjJELG1DQUFtQyw2Q0FFekMzMkQsRUFBTXkyRCxnQkFBZ0J0RyxHQUFZeUcsU0FJM0J2K0QsUUFBUUMsZUFVM0I0OUQsRUFBbUJ2Z0UsVUFBVWtoRSx5QkFBMkIsU0FBVXo4RCxHQUMxRDlELEtBQUtvNkQsUUFBVVAsR0FBWTJHLFFBQzNCeGdFLEtBQUttZ0UsZ0JBQWdCdEcsR0FBWWlHLFNBR2pDajZELEVBQW9DLElBQTdCN0YsS0FBSysvRCxvQkFBMkIsaUNBQ3ZDbDZELEVBQWlDLE9BQTFCN0YsS0FBS2dnRSxpQkFBMkIsbUNBR3ZDaGdFLEtBQUsrL0Qsc0JBQ0QvL0QsS0FBSysvRCxxQkFuRlcsSUFvRmhCLy9ELEtBQUt5Z0Usd0JBQ0x6Z0UsS0FBS3FnRSxtQ0FBbUMsaURBQ0p2OEQsRUFBTTBILFlBQzFDeEwsS0FBS21nRSxnQkFBZ0J0RyxHQUFZeUcsWUFXN0NWLEVBQW1CdmdFLFVBQVU2VSxJQUFNLFNBQVV3c0QsR0FDekMxZ0UsS0FBS3lnRSx3QkFDTHpnRSxLQUFLKy9ELG9CQUFzQixFQUN2QlcsSUFBYTdHLEdBQVkyRyxTQUd6QnhnRSxLQUFLaWdFLDJCQUE0QixHQUVyQ2pnRSxLQUFLbWdFLGdCQUFnQk8sSUFFekJkLEVBQW1CdmdFLFVBQVU4Z0UsZ0JBQWtCLFNBQVVPLEdBQ2pEQSxJQUFhMWdFLEtBQUtvNkQsUUFDbEJwNkQsS0FBS282RCxNQUFRc0csRUFDYjFnRSxLQUFLNi9ELG1CQUFtQmEsS0FHaENkLEVBQW1CdmdFLFVBQVVnaEUsbUNBQXFDLFNBQVVNLEdBQ3hFLElBQUk1NkQsRUFBVSw0Q0FBOEM0NkQsRUFBVSwwTUFJbEUzZ0UsS0FBS2lnRSwyQkFDTG44RCxFQUFNaUMsR0FDTi9GLEtBQUtpZ0UsMkJBQTRCLEdBR2pDdG9ELEVBbElJLHFCQWtJYTVSLElBR3pCNjVELEVBQW1CdmdFLFVBQVVvaEUsc0JBQXdCLFdBQ25CLE9BQTFCemdFLEtBQUtnZ0UsbUJBQ0xoZ0UsS0FBS2dnRSxpQkFBaUJ0dkMsU0FDdEIxd0IsS0FBS2dnRSxpQkFBbUIsT0FHekJKLEVBcEg0QixHQTJLdkMsU0FBU2dCLEdBQWlCeDJELEdBQ3RCLE9BQVFBLEdBQ0osS0FBSzZhLEVBQUtDLEdBQ04sT0FBT0wsRUFBSyw4QkFDaEIsS0FBS0ksRUFBS0UsVUFDVixLQUFLRixFQUFLRyxRQUNWLEtBQUtILEVBQUtLLGtCQUNWLEtBQUtMLEVBQUtVLG1CQUNWLEtBQUtWLEVBQUt6UCxTQUNWLEtBQUt5UCxFQUFLZSxZQUdWLEtBQUtmLEVBQUtTLGdCQUNOLE9BQU8sRUFDWCxLQUFLVCxFQUFLSSxpQkFDVixLQUFLSixFQUFLTSxVQUNWLEtBQUtOLEVBQUtPLGVBQ1YsS0FBS1AsRUFBS1Esa0JBQ1YsS0FBS1IsRUFBS1csb0JBSVYsS0FBS1gsRUFBS1ksUUFDVixLQUFLWixFQUFLYSxhQUNWLEtBQUtiLEVBQUtjLGNBQ1YsS0FBS2QsRUFBS2dCLFVBQ04sT0FBTyxFQUNYLFFBQ0ksT0FBT3BCLEVBQUssd0JBQTBCemEsSUF3Q2xELFNBQVN5MkQsR0FBbUJ6MkQsR0FDeEIsUUFBYWIsSUFBVGEsRUFJQSxPQURBdEcsRUFBTSwyQkFDQ21oQixFQUFLRyxRQUVoQixPQUFRaGIsR0FDSixLQUFLdTFELEdBQVF6NkMsR0FDVCxPQUFPRCxFQUFLQyxHQUNoQixLQUFLeTZDLEdBQVF4NkMsVUFDVCxPQUFPRixFQUFLRSxVQUNoQixLQUFLdzZDLEdBQVF2NkMsUUFDVCxPQUFPSCxFQUFLRyxRQUNoQixLQUFLdTZDLEdBQVFyNkMsa0JBQ1QsT0FBT0wsRUFBS0ssa0JBQ2hCLEtBQUtxNkMsR0FBUWg2QyxtQkFDVCxPQUFPVixFQUFLVSxtQkFDaEIsS0FBS2c2QyxHQUFRbnFELFNBQ1QsT0FBT3lQLEVBQUt6UCxTQUNoQixLQUFLbXFELEdBQVEzNUMsWUFDVCxPQUFPZixFQUFLZSxZQUNoQixLQUFLMjVDLEdBQVFqNkMsZ0JBQ1QsT0FBT1QsRUFBS1MsZ0JBQ2hCLEtBQUtpNkMsR0FBUXQ2QyxpQkFDVCxPQUFPSixFQUFLSSxpQkFDaEIsS0FBS3M2QyxHQUFRcDZDLFVBQ1QsT0FBT04sRUFBS00sVUFDaEIsS0FBS282QyxHQUFRbjZDLGVBQ1QsT0FBT1AsRUFBS08sZUFDaEIsS0FBS202QyxHQUFRbDZDLGtCQUNULE9BQU9SLEVBQUtRLGtCQUNoQixLQUFLazZDLEdBQVEvNUMsb0JBQ1QsT0FBT1gsRUFBS1csb0JBQ2hCLEtBQUsrNUMsR0FBUTk1QyxRQUNULE9BQU9aLEVBQUtZLFFBQ2hCLEtBQUs4NUMsR0FBUTc1QyxhQUNULE9BQU9iLEVBQUthLGFBQ2hCLEtBQUs2NUMsR0FBUTU1QyxjQUNULE9BQU9kLEVBQUtjLGNBQ2hCLEtBQUs0NUMsR0FBUTE1QyxVQUNULE9BQU9oQixFQUFLZ0IsVUFDaEIsUUFDSSxPQUFPcEIsRUFBSyx3QkFBMEJ6YSxJQU9sRCxTQUFTMDJELEdBQW1CMTJELEdBQ3hCLFFBQWFiLElBQVRhLEVBQ0EsT0FBT3UxRCxHQUFRejZDLEdBRW5CLE9BQVE5YSxHQUNKLEtBQUs2YSxFQUFLQyxHQUNOLE9BQU95NkMsR0FBUXo2QyxHQUNuQixLQUFLRCxFQUFLRSxVQUNOLE9BQU93NkMsR0FBUXg2QyxVQUNuQixLQUFLRixFQUFLRyxRQUNOLE9BQU91NkMsR0FBUXY2QyxRQUNuQixLQUFLSCxFQUFLSyxrQkFDTixPQUFPcTZDLEdBQVFyNkMsa0JBQ25CLEtBQUtMLEVBQUtVLG1CQUNOLE9BQU9nNkMsR0FBUWg2QyxtQkFDbkIsS0FBS1YsRUFBS3pQLFNBQ04sT0FBT21xRCxHQUFRbnFELFNBQ25CLEtBQUt5UCxFQUFLZSxZQUNOLE9BQU8yNUMsR0FBUTM1QyxZQUNuQixLQUFLZixFQUFLUyxnQkFDTixPQUFPaTZDLEdBQVFqNkMsZ0JBQ25CLEtBQUtULEVBQUtJLGlCQUNOLE9BQU9zNkMsR0FBUXQ2QyxpQkFDbkIsS0FBS0osRUFBS00sVUFDTixPQUFPbzZDLEdBQVFwNkMsVUFDbkIsS0FBS04sRUFBS08sZUFDTixPQUFPbTZDLEdBQVFuNkMsZUFDbkIsS0FBS1AsRUFBS1Esa0JBQ04sT0FBT2s2QyxHQUFRbDZDLGtCQUNuQixLQUFLUixFQUFLVyxvQkFDTixPQUFPKzVDLEdBQVEvNUMsb0JBQ25CLEtBQUtYLEVBQUtZLFFBQ04sT0FBTzg1QyxHQUFROTVDLFFBQ25CLEtBQUtaLEVBQUthLGFBQ04sT0FBTzY1QyxHQUFRNzVDLGFBQ25CLEtBQUtiLEVBQUtjLGNBQ04sT0FBTzQ1QyxHQUFRNTVDLGNBQ25CLEtBQUtkLEVBQUtnQixVQUNOLE9BQU8wNUMsR0FBUTE1QyxVQUNuQixRQUNJLE9BQU9wQixFQUFLLHdCQUEwQnphLEtBdkxsRCxTQUFXdTFELEdBQ1BBLEVBQVFBLEVBQVksR0FBSSxHQUFLLEtBQzdCQSxFQUFRQSxFQUFtQixVQUFJLEdBQUssWUFDcENBLEVBQVFBLEVBQWlCLFFBQUksR0FBSyxVQUNsQ0EsRUFBUUEsRUFBMEIsaUJBQUksR0FBSyxtQkFDM0NBLEVBQVFBLEVBQTJCLGtCQUFJLEdBQUssb0JBQzVDQSxFQUFRQSxFQUFtQixVQUFJLEdBQUssWUFDcENBLEVBQVFBLEVBQXdCLGVBQUksR0FBSyxpQkFDekNBLEVBQVFBLEVBQTJCLGtCQUFJLEdBQUssb0JBQzVDQSxFQUFRQSxFQUF5QixnQkFBSSxJQUFNLGtCQUMzQ0EsRUFBUUEsRUFBNEIsbUJBQUksR0FBSyxxQkFDN0NBLEVBQVFBLEVBQTZCLG9CQUFJLEdBQUssc0JBQzlDQSxFQUFRQSxFQUFpQixRQUFJLElBQU0sVUFDbkNBLEVBQVFBLEVBQXNCLGFBQUksSUFBTSxlQUN4Q0EsRUFBUUEsRUFBdUIsY0FBSSxJQUFNLGdCQUN6Q0EsRUFBUUEsRUFBa0IsU0FBSSxJQUFNLFdBQ3BDQSxFQUFRQSxFQUFxQixZQUFJLElBQU0sY0FDdkNBLEVBQVFBLEVBQW1CLFVBQUksSUFBTSxZQWpCekMsQ0FrQkdBLEtBQVlBLEdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNk16QixJQW9JSW9CLEdBT0FDLEdBM0lBQyxHQUE2QixXQUU3QixTQUFTQSxFQUFZL1YsR0FJYmxyRCxLQUFLb3RCLFdBREw4OUIsRUFDa0IsU0FBVWhiLEVBQUlDLEdBQzVCLE9BQU8rYSxFQUFLaGIsRUFBSUMsSUFBTy9nQixHQUFZaEMsV0FBVzhpQixFQUFHbHhDLElBQUtteEMsRUFBR254QyxNQUkzQyxTQUFVa3hDLEVBQUlDLEdBQzVCLE9BQU8vZ0IsR0FBWWhDLFdBQVc4aUIsRUFBR2x4QyxJQUFLbXhDLEVBQUdueEMsTUFHakRnQixLQUFLa2hFLFNBQVc1b0MsS0FDaEJ0NEIsS0FBS21oRSxVQUFZLElBQUkvc0MsR0FBVXAwQixLQUFLb3RCLFlBaUd4QyxPQTNGQTZ6QyxFQUFZRyxTQUFXLFNBQVVDLEdBQzdCLE9BQU8sSUFBSUosRUFBWUksRUFBT2owQyxhQUVsQzZ6QyxFQUFZNWhFLFVBQVUyVSxJQUFNLFNBQVVoVixHQUNsQyxPQUFpQyxNQUExQmdCLEtBQUtraEUsU0FBUzVpRSxJQUFJVSxJQUU3QmlpRSxFQUFZNWhFLFVBQVVmLElBQU0sU0FBVVUsR0FDbEMsT0FBT2dCLEtBQUtraEUsU0FBUzVpRSxJQUFJVSxJQUU3QmlpRSxFQUFZNWhFLFVBQVU4M0IsTUFBUSxXQUMxQixPQUFPbjNCLEtBQUttaEUsVUFBVXZzQyxVQUUxQnFzQyxFQUFZNWhFLFVBQVUrM0IsS0FBTyxXQUN6QixPQUFPcDNCLEtBQUttaEUsVUFBVXRzQyxVQUUxQm9zQyxFQUFZNWhFLFVBQVUyUSxRQUFVLFdBQzVCLE9BQU9oUSxLQUFLbWhFLFVBQVVueEQsV0FNMUJpeEQsRUFBWTVoRSxVQUFVb0IsUUFBVSxTQUFVekIsR0FDdEMsSUFBSXN0QyxFQUFNdHNDLEtBQUtraEUsU0FBUzVpRSxJQUFJVSxHQUM1QixPQUFPc3RDLEVBQU10c0MsS0FBS21oRSxVQUFVMWdFLFFBQVE2ckMsSUFBUSxHQUVoRG51QyxPQUFPQyxlQUFlNmlFLEVBQVk1aEUsVUFBVyxPQUFRLENBQ2pEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUttaEUsVUFBVXh6QyxNQUUxQnR2QixZQUFZLEVBQ1prWixjQUFjLElBR2xCMHBELEVBQVk1aEUsVUFBVW1TLFFBQVUsU0FBVTZsQixHQUN0Q3IzQixLQUFLbWhFLFVBQVVyc0Msa0JBQWlCLFNBQVUzd0IsRUFBR2QsR0FFekMsT0FEQWcwQixFQUFHbHpCLElBQ0ksTUFJZjg4RCxFQUFZNWhFLFVBQVU0M0IsSUFBTSxTQUFVcVYsR0FFbEMsSUFBSXA0QixFQUFNbFUsS0FBS2tWLE9BQU9vM0IsRUFBSXR0QyxLQUMxQixPQUFPa1YsRUFBSXFnQixLQUFLcmdCLEVBQUlndEQsU0FBU2xnRCxPQUFPc3JCLEVBQUl0dEMsSUFBS3N0QyxHQUFNcDRCLEVBQUlpdEQsVUFBVW5nRCxPQUFPc3JCLEVBQUssUUFHakYyMEIsRUFBWTVoRSxVQUFVNlYsT0FBUyxTQUFVbFcsR0FDckMsSUFBSXN0QyxFQUFNdHNDLEtBQUsxQixJQUFJVSxHQUNuQixPQUFLc3RDLEVBR0V0c0MsS0FBS3UwQixLQUFLdjBCLEtBQUtraEUsU0FBUzUvQyxPQUFPdGlCLEdBQU1nQixLQUFLbWhFLFVBQVU3L0MsT0FBT2dyQixJQUZ2RHRzQyxNQUlmaWhFLEVBQVk1aEUsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN0QyxLQUFNQSxhQUFpQjAxQyxHQUNuQixPQUFPLEVBRVgsR0FBSWpoRSxLQUFLMnRCLE9BQVNwQyxFQUFNb0MsS0FDcEIsT0FBTyxFQUlYLElBRkEsSUFBSWtLLEVBQVM3M0IsS0FBS21oRSxVQUFVanNDLGNBQ3hCNEMsRUFBVXZNLEVBQU00MUMsVUFBVWpzQyxjQUN2QjJDLEVBQU9sQyxXQUFXLENBQ3JCLElBQUkyckMsRUFBVXpwQyxFQUFPbkMsVUFBVTEyQixJQUMzQnVpRSxFQUFXenBDLEVBQVFwQyxVQUFVMTJCLElBQ2pDLElBQUtzaUUsRUFBUWgzQyxRQUFRaTNDLEdBQ2pCLE9BQU8sRUFHZixPQUFPLEdBRVhOLEVBQVk1aEUsVUFBVW1NLFNBQVcsV0FDN0IsSUFBSWcyRCxFQUFhLEdBSWpCLE9BSEF4aEUsS0FBS3dSLFNBQVEsU0FBVTg2QixHQUNuQmsxQixFQUFXLzlELEtBQUs2b0MsRUFBSTlnQyxlQUVFLElBQXRCZzJELEVBQVduaEUsT0FDSixpQkFHQSxvQkFBc0JtaEUsRUFBVzE1RCxLQUFLLFFBQVUsT0FHL0RtNUQsRUFBWTVoRSxVQUFVazFCLEtBQU8sU0FBVTJzQyxFQUFVQyxHQUM3QyxJQUFJTSxFQUFTLElBQUlSLEVBSWpCLE9BSEFRLEVBQU9yMEMsV0FBYXB0QixLQUFLb3RCLFdBQ3pCcTBDLEVBQU9QLFNBQVdBLEVBQ2xCTyxFQUFPTixVQUFZQSxFQUNaTSxHQUVKUixFQWpIcUI7Ozs7Ozs7Ozs7Ozs7Ozs7SUFxSWhDLFNBQVdGLEdBQ1BBLEVBQVdBLEVBQWtCLE1BQUksR0FBSyxRQUN0Q0EsRUFBV0EsRUFBb0IsUUFBSSxHQUFLLFVBQ3hDQSxFQUFXQSxFQUFxQixTQUFJLEdBQUssV0FDekNBLEVBQVdBLEVBQXFCLFNBQUksR0FBSyxXQUo3QyxDQUtHQSxLQUFlQSxHQUFhLEtBRS9CLFNBQVdDLEdBQ1BBLEVBQVVBLEVBQWlCLE1BQUksR0FBSyxRQUNwQ0EsRUFBVUEsRUFBa0IsT0FBSSxHQUFLLFNBRnpDLENBR0dBLEtBQWNBLEdBQVksS0FLN0IsSUE4U0lVLEdBOVNBQyxHQUFtQyxXQUNuQyxTQUFTQSxJQUNMM2hFLEtBQUs0aEUsVUFBWSxJQUFJeHRDLEdBQVVoRixHQUFZaEMsWUEwRS9DLE9BeEVBdTBDLEVBQWtCdGlFLFVBQVV3aUUsTUFBUSxTQUFVaE8sR0FDMUMsSUFBSTcwRCxFQUFNNjBELEVBQU92bkIsSUFBSXR0QyxJQUNqQjhpRSxFQUFZOWhFLEtBQUs0aEUsVUFBVXRqRSxJQUFJVSxHQUM5QjhpRSxFQUtEak8sRUFBTy9nRCxPQUFTaXVELEdBQVdnQixPQUMzQkQsRUFBVWh2RCxPQUFTaXVELEdBQVdpQixTQUM5QmhpRSxLQUFLNGhFLFVBQVk1aEUsS0FBSzRoRSxVQUFVNWdELE9BQU9oaUIsRUFBSzYwRCxHQUV2Q0EsRUFBTy9nRCxPQUFTaXVELEdBQVdpQixVQUNoQ0YsRUFBVWh2RCxPQUFTaXVELEdBQVdrQixRQUM5QmppRSxLQUFLNGhFLFVBQVk1aEUsS0FBSzRoRSxVQUFVNWdELE9BQU9oaUIsRUFBSyxDQUN4QzhULEtBQU1ndkQsRUFBVWh2RCxLQUNoQnc1QixJQUFLdW5CLEVBQU92bkIsTUFHWHVuQixFQUFPL2dELE9BQVNpdUQsR0FBV21CLFVBQ2hDSixFQUFVaHZELE9BQVNpdUQsR0FBV21CLFNBQzlCbGlFLEtBQUs0aEUsVUFBWTVoRSxLQUFLNGhFLFVBQVU1Z0QsT0FBT2hpQixFQUFLLENBQ3hDOFQsS0FBTWl1RCxHQUFXbUIsU0FDakI1MUIsSUFBS3VuQixFQUFPdm5CLE1BR1h1bkIsRUFBTy9nRCxPQUFTaXVELEdBQVdtQixVQUNoQ0osRUFBVWh2RCxPQUFTaXVELEdBQVdnQixNQUM5Qi9oRSxLQUFLNGhFLFVBQVk1aEUsS0FBSzRoRSxVQUFVNWdELE9BQU9oaUIsRUFBSyxDQUN4QzhULEtBQU1pdUQsR0FBV2dCLE1BQ2pCejFCLElBQUt1bkIsRUFBT3ZuQixNQUdYdW5CLEVBQU8vZ0QsT0FBU2l1RCxHQUFXa0IsU0FDaENILEVBQVVodkQsT0FBU2l1RCxHQUFXZ0IsTUFDOUIvaEUsS0FBSzRoRSxVQUFZNWhFLEtBQUs0aEUsVUFBVXRnRCxPQUFPdGlCLEdBRWxDNjBELEVBQU8vZ0QsT0FBU2l1RCxHQUFXa0IsU0FDaENILEVBQVVodkQsT0FBU2l1RCxHQUFXbUIsU0FDOUJsaUUsS0FBSzRoRSxVQUFZNWhFLEtBQUs0aEUsVUFBVTVnRCxPQUFPaGlCLEVBQUssQ0FDeEM4VCxLQUFNaXVELEdBQVdrQixRQUNqQjMxQixJQUFLdzFCLEVBQVV4MUIsTUFHZHVuQixFQUFPL2dELE9BQVNpdUQsR0FBV2dCLE9BQ2hDRCxFQUFVaHZELE9BQVNpdUQsR0FBV2tCLFFBQzlCamlFLEtBQUs0aEUsVUFBWTVoRSxLQUFLNGhFLFVBQVU1Z0QsT0FBT2hpQixFQUFLLENBQ3hDOFQsS0FBTWl1RCxHQUFXbUIsU0FDakI1MUIsSUFBS3VuQixFQUFPdm5CLE1BV2hCem5CLEVBQUssdUNBQ0RuWixLQUFLc0csVUFBVTZoRCxHQUNmLFVBQ0Fub0QsS0FBS3NHLFVBQVU4dkQsSUExRG5COWhFLEtBQUs0aEUsVUFBWTVoRSxLQUFLNGhFLFVBQVU1Z0QsT0FBT2hpQixFQUFLNjBELElBNkRwRDhOLEVBQWtCdGlFLFVBQVU4aUUsV0FBYSxXQUNyQyxJQUFJMXdCLEVBQVUsR0FJZCxPQUhBenhDLEtBQUs0aEUsVUFBVTlzQyxrQkFBaUIsU0FBVTkxQixFQUFLNjBELEdBQzNDcGlCLEVBQVFodUMsS0FBS293RCxNQUVWcGlCLEdBRUprd0IsRUE1RTJCLEdBOEVsQ1MsR0FBOEIsV0FDOUIsU0FBU0EsRUFBYWxrRCxFQUFPa3hDLEVBQU1pVCxFQUFTQyxFQUFZQyxFQUFheE4sRUFBV3lOLEVBQWtCQyxHQUM5RnppRSxLQUFLa2UsTUFBUUEsRUFDYmxlLEtBQUtvdkQsS0FBT0EsRUFDWnB2RCxLQUFLcWlFLFFBQVVBLEVBQ2ZyaUUsS0FBS3NpRSxXQUFhQSxFQUNsQnRpRSxLQUFLdWlFLFlBQWNBLEVBQ25CdmlFLEtBQUsrMEQsVUFBWUEsRUFDakIvMEQsS0FBS3dpRSxpQkFBbUJBLEVBQ3hCeGlFLEtBQUt5aUUsd0JBQTBCQSxFQXlDbkMsT0F0Q0FMLEVBQWFNLHFCQUF1QixTQUFVeGtELEVBQU9tK0IsRUFBV2ttQixFQUFheE4sR0FDekUsSUFBSXRqQixFQUFVLEdBSWQsT0FIQTRLLEVBQVU3cUMsU0FBUSxTQUFVODZCLEdBQ3hCbUYsRUFBUWh1QyxLQUFLLENBQUVxUCxLQUFNaXVELEdBQVdnQixNQUFPejFCLElBQUtBLE9BRXpDLElBQUk4MUIsRUFBYWxrRCxFQUFPbStCLEVBQVc0a0IsR0FBWUcsU0FBUy9rQixHQUFZNUssRUFBUzh3QixFQUFheE4sR0FDekUsR0FDTyxJQUVuQzUyRCxPQUFPQyxlQUFlZ2tFLEVBQWEvaUUsVUFBVyxtQkFBb0IsQ0FDOURmLElBQUssV0FDRCxPQUFRMEIsS0FBS3VpRSxZQUFZdnlELFdBRTdCM1IsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjZxRCxFQUFhL2lFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDdkMsS0FBSXZyQixLQUFLKzBELFlBQWN4cEMsRUFBTXdwQyxXQUN6Qi8wRCxLQUFLd2lFLG1CQUFxQmozQyxFQUFNaTNDLGtCQUMvQnhpRSxLQUFLdWlFLFlBQVlqNEMsUUFBUWlCLEVBQU1nM0MsY0FDL0J2aUUsS0FBS2tlLE1BQU1vTSxRQUFRaUIsRUFBTXJOLFFBQ3pCbGUsS0FBS292RCxLQUFLOWtDLFFBQVFpQixFQUFNNmpDLE9BQ3hCcHZELEtBQUtxaUUsUUFBUS8zQyxRQUFRaUIsRUFBTTgyQyxVQUM1QixPQUFPLEVBRVgsSUFBSTV3QixFQUFVenhDLEtBQUtzaUUsV0FDZkssRUFBZXAzQyxFQUFNKzJDLFdBQ3pCLEdBQUk3d0IsRUFBUXB4QyxTQUFXc2lFLEVBQWF0aUUsT0FDaEMsT0FBTyxFQUVYLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSWcwQyxFQUFRcHhDLE9BQVE1QyxJQUNoQyxHQUFJZzBDLEVBQVFoMEMsR0FBR3FWLE9BQVM2dkQsRUFBYWxsRSxHQUFHcVYsT0FDbkMyK0IsRUFBUWgwQyxHQUFHNnVDLElBQUloaUIsUUFBUXE0QyxFQUFhbGxFLEdBQUc2dUMsS0FDeEMsT0FBTyxFQUdmLE9BQU8sR0FFSjgxQixFQWxEc0IsR0EwRTdCUSxHQUE2QixXQUM3QixTQUFTQSxFQUlUam9CLEVBSUFpWixFQUtBaVAsRUFLQTFPLEVBSUFFLEdBQ0lyMEQsS0FBSzI2QyxnQkFBa0JBLEVBQ3ZCMzZDLEtBQUs0ekQsY0FBZ0JBLEVBQ3JCNXpELEtBQUs2aUUsaUJBQW1CQSxFQUN4QjdpRSxLQUFLbTBELGdCQUFrQkEsRUFDdkJuMEQsS0FBS3EwRCx1QkFBeUJBLEVBZ0JsQyxPQVBBdU8sRUFBWUUsNkNBQStDLFNBQVU3cUMsRUFBVWhKLEdBQzNFLElBQUloa0IsRUFDQTJvRCxJQUFpQjNvRCxFQUFLLElBQ25CZ3RCLEdBQVk4cUMsR0FBYUMsOENBQThDL3FDLEVBQVVoSixHQUNwRmhrQixHQUNKLE9BQU8sSUFBSTIzRCxFQUFZaHZDLEdBQWdCSyxJQUFLMi9CLEVBQWUvNkIsS0FBZVYsS0FBb0JPLE9BRTNGa3FDLEVBNUNxQixHQXNENUJHLEdBQThCLFdBQzlCLFNBQVNBLEVBT1R6cEIsRUFNQXJxQixFQUtBOGtDLEVBS0FTLEVBS0F0dkIsR0FDSWxsQyxLQUFLczVDLFlBQWNBLEVBQ25CdDVDLEtBQUtpdkIsUUFBVUEsRUFDZmp2QixLQUFLK3pELGVBQWlCQSxFQUN0Qi96RCxLQUFLdzBELGtCQUFvQkEsRUFDekJ4MEQsS0FBS2tsQyxpQkFBbUJBLEVBVTVCLE9BSEE2OUIsRUFBYUMsOENBQWdELFNBQVUvcUMsRUFBVWhKLEdBQzdFLE9BQU8sSUFBSTh6QyxFQUFhLzlDLElBQW1CaUssRUFBU3lKLEtBQWtCQSxLQUFrQkEsT0FFckZxcUMsRUE1Q3NCLEdBcUU3QkUsR0FDQSxTQUVBQyxFQUVBQyxFQUVBbmtFLEVBS0Fva0UsR0FDSXBqRSxLQUFLa2pFLGlCQUFtQkEsRUFDeEJsakUsS0FBS21qRSxpQkFBbUJBLEVBQ3hCbmpFLEtBQUtoQixJQUFNQSxFQUNYZ0IsS0FBS29qRSxPQUFTQSxHQUlsQkMsR0FDQSxTQUErQnByQyxFQUFVcXJDLEdBQ3JDdGpFLEtBQUtpNEIsU0FBV0EsRUFDaEJqNEIsS0FBS3NqRSxnQkFBa0JBLElBSy9CLFNBQVc1QixHQUNQQSxFQUF1QkEsRUFBaUMsU0FBSSxHQUFLLFdBQ2pFQSxFQUF1QkEsRUFBOEIsTUFBSSxHQUFLLFFBQzlEQSxFQUF1QkEsRUFBZ0MsUUFBSSxHQUFLLFVBQ2hFQSxFQUF1QkEsRUFBZ0MsUUFBSSxHQUFLLFVBQ2hFQSxFQUF1QkEsRUFBOEIsTUFBSSxHQUFLLFFBTGxFLENBTUdBLEtBQTJCQSxHQUF5QixLQUN2RCxJQUFJNkIsR0FDQSxTQUVBbkosRUFFQW9KLEVBT0FscUIsRUFFQW1xQixRQUN3QixJQUFoQm5xQixJQUEwQkEsRUFBY3QwQixVQUM5QixJQUFWeStDLElBQW9CQSxFQUFRLE1BQ2hDempFLEtBQUtvNkQsTUFBUUEsRUFDYnA2RCxLQUFLd2pFLFVBQVlBLEVBQ2pCeGpFLEtBQUtzNUMsWUFBY0EsRUFDbkJ0NUMsS0FBS3lqRSxNQUFRQSxHQUtqQkMsR0FBNkIsV0FDN0IsU0FBU0EsSUFLTDFqRSxLQUFLMmpFLGlCQUFtQixFQU94QjNqRSxLQUFLNGpFLGdCQUFrQkMsS0FFdkI3akUsS0FBSzhqRSxhQUFlOStDLElBQ3BCaGxCLEtBQUsrakUsVUFBVyxFQU1oQi9qRSxLQUFLZ2tFLG9CQUFxQixFQXVHOUIsT0FyR0E3bEUsT0FBT0MsZUFBZXNsRSxFQUFZcmtFLFVBQVcsVUFBVyxDQVNwRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLK2pFLFVBRWhCMWxFLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlc2xFLEVBQVlya0UsVUFBVyxjQUFlLENBRXhEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUs4akUsY0FFaEJ6bEUsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWVzbEUsRUFBWXJrRSxVQUFXLFlBQWEsQ0FFdERmLElBQUssV0FDRCxPQUFpQyxJQUExQjBCLEtBQUsyakUsa0JBRWhCdGxFLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlc2xFLEVBQVlya0UsVUFBVyxvQkFBcUIsQ0FFOURmLElBQUssV0FDRCxPQUFPMEIsS0FBS2drRSxvQkFFaEIzbEUsWUFBWSxFQUNaa1osY0FBYyxJQU1sQm1zRCxFQUFZcmtFLFVBQVU0a0Usa0JBQW9CLFNBQVUzcUIsR0FDNUNBLEVBQVlqNUMsT0FBUyxJQUNyQkwsS0FBS2drRSxvQkFBcUIsRUFDMUJoa0UsS0FBSzhqRSxhQUFleHFCLElBUzVCb3FCLEVBQVlya0UsVUFBVTZrRSxlQUFpQixXQUNuQyxJQUFJblEsRUFBaUJyN0IsS0FDakI4N0IsRUFBb0I5N0IsS0FDcEJ3TSxFQUFtQnhNLEtBZ0J2QixPQWZBMTRCLEtBQUs0akUsZ0JBQWdCcHlELFNBQVEsU0FBVXhTLEVBQUttbEUsR0FDeEMsT0FBUUEsR0FDSixLQUFLcEQsR0FBV2dCLE1BQ1poTyxFQUFpQkEsRUFBZTk4QixJQUFJajRCLEdBQ3BDLE1BQ0osS0FBSytoRSxHQUFXbUIsU0FDWjFOLEVBQW9CQSxFQUFrQnY5QixJQUFJajRCLEdBQzFDLE1BQ0osS0FBSytoRSxHQUFXa0IsUUFDWi84QixFQUFtQkEsRUFBaUJqTyxJQUFJajRCLEdBQ3hDLE1BQ0osUUFDSTZsQixFQUFLLG9DQUFzQ3MvQyxPQUdoRCxJQUFJcEIsR0FBYS9pRSxLQUFLOGpFLGFBQWM5akUsS0FBSytqRSxTQUFVaFEsRUFBZ0JTLEVBQW1CdHZCLElBS2pHdytCLEVBQVlya0UsVUFBVStrRSxvQkFBc0IsV0FDeENwa0UsS0FBS2drRSxvQkFBcUIsRUFDMUJoa0UsS0FBSzRqRSxnQkFBa0JDLE1BRTNCSCxFQUFZcmtFLFVBQVVnbEUsa0JBQW9CLFNBQVVybEUsRUFBS21sRSxHQUNyRG5rRSxLQUFLZ2tFLG9CQUFxQixFQUMxQmhrRSxLQUFLNGpFLGdCQUFrQjVqRSxLQUFLNGpFLGdCQUFnQjVpRCxPQUFPaGlCLEVBQUttbEUsSUFFNURULEVBQVlya0UsVUFBVWlsRSxxQkFBdUIsU0FBVXRsRSxHQUNuRGdCLEtBQUtna0Usb0JBQXFCLEVBQzFCaGtFLEtBQUs0akUsZ0JBQWtCNWpFLEtBQUs0akUsZ0JBQWdCdGlELE9BQU90aUIsSUFFdkQwa0UsRUFBWXJrRSxVQUFVa2xFLDJCQUE2QixXQUMvQ3ZrRSxLQUFLMmpFLGtCQUFvQixHQUU3QkQsRUFBWXJrRSxVQUFVbWxFLHFCQUF1QixXQUN6Q3hrRSxLQUFLMmpFLGtCQUFvQixHQUU3QkQsRUFBWXJrRSxVQUFVb2xFLFlBQWMsV0FDaEN6a0UsS0FBS2drRSxvQkFBcUIsRUFDMUJoa0UsS0FBSytqRSxVQUFXLEdBRWJMLEVBN0hxQixHQW1JNUJnQixHQUF1QyxXQUN2QyxTQUFTQSxFQUFzQkMsR0FDM0Iza0UsS0FBSzJrRSxpQkFBbUJBLEVBRXhCM2tFLEtBQUs0a0UsYUFBZSxHQUVwQjVrRSxLQUFLNmtFLHVCQUF5QjFzQyxLQUU5Qm40QixLQUFLOGtFLDZCQUErQkMsS0FNcEMva0UsS0FBS2dsRSxvQkFBc0IsSUFBSWp1QyxHQUFVN00sR0F1VDdDLE9BbFRBdzZDLEVBQXNCcmxFLFVBQVU0bEUscUJBQXVCLFNBQVVDLEdBQzdELElBQUssSUFBSXY2RCxFQUFLLEVBQUdNLEVBQUtpNkQsRUFBVWhDLGlCQUFrQnY0RCxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDcEUsSUFBSXN0QixFQUFXaHRCLEVBQUdOLEdBQ2R1NkQsRUFBVTlCLGtCQUFrQnQ0QixHQUM1QjlxQyxLQUFLbWxFLG9CQUFvQmx0QyxFQUFVaXRDLEVBQVU5QixRQUV4QzhCLEVBQVU5QixrQkFBa0JsMkIsSUFDakNsdEMsS0FBS29sRSx5QkFBeUJudEMsRUFBVWl0QyxFQUFVbG1FLElBQUtrbUUsRUFBVTlCLFFBR3pFLElBQUssSUFBSWw0RCxFQUFLLEVBQUd5SixFQUFLdXdELEVBQVUvQixpQkFBa0JqNEQsRUFBS3lKLEVBQUd0VSxPQUFRNkssSUFBTSxDQUNoRStzQixFQUFXdGpCLEVBQUd6SixHQUNsQmxMLEtBQUtvbEUseUJBQXlCbnRDLEVBQVVpdEMsRUFBVWxtRSxJQUFLa21FLEVBQVU5QixVQUl6RXNCLEVBQXNCcmxFLFVBQVVnbUUsbUJBQXFCLFNBQVVDLEdBQzNELElBQUk1N0QsRUFBUTFKLEtBQ1pBLEtBQUtzb0MsY0FBY2c5QixHQUFjLFNBQVVydEMsR0FDdkMsSUFBSXN0QyxFQUFjNzdELEVBQU04N0Qsa0JBQWtCdnRDLEdBQzFDLE9BQVFxdEMsRUFBYWxMLE9BQ2pCLEtBQUtzSCxHQUF1QitELFNBQ3BCLzdELEVBQU1nOEQsZUFBZXp0QyxJQUNyQnN0QyxFQUFZdEIsa0JBQWtCcUIsRUFBYWhzQixhQUUvQyxNQUNKLEtBQUtvb0IsR0FBdUJLLE1BR3hCd0QsRUFBWWYsdUJBQ1BlLEVBQVlJLFdBSWJKLEVBQVluQixzQkFFaEJtQixFQUFZdEIsa0JBQWtCcUIsRUFBYWhzQixhQUMzQyxNQUNKLEtBQUtvb0IsR0FBdUJPLFFBS3hCc0QsRUFBWWYsdUJBQ1BlLEVBQVlJLFdBQ2JqOEQsRUFBTWcrQyxhQUFhenZCLEdBRXZCcHlCLEdBQVF5L0QsRUFBYTdCLE1BQU8seURBQzVCLE1BQ0osS0FBSy9CLEdBQXVCa0UsUUFDcEJsOEQsRUFBTWc4RCxlQUFlenRDLEtBQ3JCc3RDLEVBQVlkLGNBQ1pjLEVBQVl0QixrQkFBa0JxQixFQUFhaHNCLGNBRS9DLE1BQ0osS0FBS29vQixHQUF1Qm1FLE1BQ3BCbjhELEVBQU1nOEQsZUFBZXp0QyxLQUlyQnZ1QixFQUFNbzhELFlBQVk3dEMsR0FDbEJzdEMsRUFBWXRCLGtCQUFrQnFCLEVBQWFoc0IsY0FFL0MsTUFDSixRQUNJejBCLEVBQUssc0NBQXdDeWdELEVBQWFsTCxZQVMxRXNLLEVBQXNCcmxFLFVBQVVpcEMsY0FBZ0IsU0FBVWc5QixFQUFjMTJELEdBQ2hFMDJELEVBQWE5QixVQUFVbmpFLE9BQVMsRUFDaENpbEUsRUFBYTlCLFVBQVVoeUQsUUFBUTVDLEdBRy9COFgsRUFBYzFtQixLQUFLNGtFLGFBQWNoMkQsSUFRekM4MUQsRUFBc0JybEUsVUFBVTBtRSxzQkFBd0IsU0FBVXBKLEdBQzlELElBQUkxa0MsRUFBVzBrQyxFQUFZMWtDLFNBQ3ZCa0QsRUFBZ0J3aEMsRUFBWTJHLGdCQUFnQm5sRCxNQUM1Q3dwQixFQUFhM25DLEtBQUtnbUUsMEJBQTBCL3RDLEdBQ2hELEdBQUkwUCxFQUFZLENBQ1osSUFBSTdtQyxFQUFTNm1DLEVBQVc3bUMsT0FDeEIsR0FBSUEsRUFBTzZqQyxrQkFDUCxHQUFzQixJQUFsQnhKLEVBQXFCLENBT3JCLElBQUluOEIsRUFBTSxJQUFJb3dCLEdBQVl0dUIsRUFBTzJ0QixNQUNqQ3p1QixLQUFLb2xFLHlCQUF5Qm50QyxFQUFVajVCLEVBQUssSUFBSWt1QyxHQUFXbHVDLEVBQUs0MEIsR0FBZ0JJLHVCQUdqRm51QixFQUF5QixJQUFsQnMxQixFQUFxQixnREFBa0RBLFFBSWhFbjdCLEtBQUtpbUUsaUNBQWlDaHVDLEtBQ3BDa0QsSUFHaEJuN0IsS0FBSzhsRSxZQUFZN3RDLEdBQ2pCajRCLEtBQUtnbEUsb0JBQXNCaGxFLEtBQUtnbEUsb0JBQW9CL3RDLElBQUlnQixNQVN4RXlzQyxFQUFzQnJsRSxVQUFVNm1FLGtCQUFvQixTQUFVdnJCLEdBQzFELElBQUlqeEMsRUFBUTFKLEtBQ1I0ekQsRUFBZ0IsR0FDcEJsdEMsRUFBYzFtQixLQUFLNGtFLGNBQWMsU0FBVTNzQyxFQUFVc3RDLEdBQ2pELElBQUk1OUIsRUFBYWorQixFQUFNczhELDBCQUEwQi90QyxHQUNqRCxHQUFJMFAsRUFBWSxDQUNaLEdBQUk0OUIsRUFBWXQyQyxTQUFXMFksRUFBVzdtQyxPQUFPNmpDLGtCQUFtQixDQVU1RCxJQUFJM2xDLEVBQU0sSUFBSW93QixHQUFZdVksRUFBVzdtQyxPQUFPMnRCLE1BQ0UsT0FBMUMva0IsRUFBTW03RCx1QkFBdUJ2bUUsSUFBSVUsSUFDaEMwSyxFQUFNeThELHVCQUF1Qmx1QyxFQUFVajVCLElBQ3hDMEssRUFBTTA3RCx5QkFBeUJudEMsRUFBVWo1QixFQUFLLElBQUlrdUMsR0FBV2x1QyxFQUFLMjdDLElBR3RFNHFCLEVBQVlhLG9CQUNaeFMsRUFBYzM3QixHQUFZc3RDLEVBQVlyQixpQkFDdENxQixFQUFZbkIsMkJBSXhCLElBQUkvUCxFQUF5QjM3QixLQU03QjE0QixLQUFLOGtFLDZCQUE2QnR6RCxTQUFRLFNBQVV4UyxFQUFLbzRELEdBQ3JELElBQUlpUCxHQUFvQixFQUN4QmpQLEVBQVEzL0IsY0FBYSxTQUFVUSxHQUMzQixJQUFJMFAsRUFBYWorQixFQUFNczhELDBCQUEwQi90QyxHQUNqRCxPQUFJMFAsR0FDQUEsRUFBVytTLFVBQVlYLEdBQWN1c0Isa0JBQ3JDRCxHQUFvQixHQUNiLE1BSVhBLElBQ0FoUyxFQUF5QkEsRUFBdUJwOUIsSUFBSWo0QixPQUc1RCxJQUFJeTBELEVBQWMsSUFBSW1QLEdBQVlqb0IsRUFBaUJpWixFQUFlNXpELEtBQUtnbEUsb0JBQXFCaGxFLEtBQUs2a0UsdUJBQXdCeFEsR0FJekgsT0FIQXIwRCxLQUFLNmtFLHVCQUF5QjFzQyxLQUM5Qm40QixLQUFLOGtFLDZCQUErQkMsS0FDcEMva0UsS0FBS2dsRSxvQkFBc0IsSUFBSWp1QyxHQUFVN00sR0FDbEN1cEMsR0FPWGlSLEVBQXNCcmxFLFVBQVU4bEUsb0JBQXNCLFNBQVVsdEMsRUFBVTdZLEdBQ3RFLEdBQUtwZixLQUFLMGxFLGVBQWV6dEMsR0FBekIsQ0FHQSxJQUFJa3NDLEVBQWFua0UsS0FBS21tRSx1QkFBdUJsdUMsRUFBVTdZLEVBQVNwZ0IsS0FDMUQraEUsR0FBV21CLFNBQ1huQixHQUFXZ0IsTUFDQy9oRSxLQUFLd2xFLGtCQUFrQnZ0QyxHQUM3Qm9zQyxrQkFBa0JqbEQsRUFBU3BnQixJQUFLbWxFLEdBQzVDbmtFLEtBQUs2a0UsdUJBQXlCN2tFLEtBQUs2a0UsdUJBQXVCN2pELE9BQU81QixFQUFTcGdCLElBQUtvZ0IsR0FDL0VwZixLQUFLOGtFLDZCQUErQjlrRSxLQUFLOGtFLDZCQUE2QjlqRCxPQUFPNUIsRUFBU3BnQixJQUFLZ0IsS0FBS3VtRSw0QkFBNEJubkQsRUFBU3BnQixLQUFLaTRCLElBQUlnQixNQVVsSnlzQyxFQUFzQnJsRSxVQUFVK2xFLHlCQUEyQixTQUFVbnRDLEVBQVVqNUIsRUFBS3duRSxHQUNoRixHQUFLeG1FLEtBQUswbEUsZUFBZXp0QyxHQUF6QixDQUdBLElBQUlzdEMsRUFBY3ZsRSxLQUFLd2xFLGtCQUFrQnZ0QyxHQUNyQ2o0QixLQUFLbW1FLHVCQUF1Qmx1QyxFQUFVajVCLEdBQ3RDdW1FLEVBQVlsQixrQkFBa0JybEUsRUFBSytoRSxHQUFXa0IsU0FLOUNzRCxFQUFZakIscUJBQXFCdGxFLEdBRXJDZ0IsS0FBSzhrRSw2QkFBK0I5a0UsS0FBSzhrRSw2QkFBNkI5akQsT0FBT2hpQixFQUFLZ0IsS0FBS3VtRSw0QkFBNEJ2bkUsR0FBS2tXLE9BQU8raUIsSUFDM0h1dUMsSUFDQXhtRSxLQUFLNmtFLHVCQUF5QjdrRSxLQUFLNmtFLHVCQUF1QjdqRCxPQUFPaGlCLEVBQUt3bkUsTUFHOUU5QixFQUFzQnJsRSxVQUFVcW9ELGFBQWUsU0FBVXp2QixVQUM5Q2o0QixLQUFLNGtFLGFBQWEzc0MsSUFPN0J5c0MsRUFBc0JybEUsVUFBVTRtRSxpQ0FBbUMsU0FBVWh1QyxHQUN6RSxJQUNJcXRDLEVBRGN0bEUsS0FBS3dsRSxrQkFBa0J2dEMsR0FDVmlzQyxpQkFDL0IsT0FBUWxrRSxLQUFLMmtFLGlCQUFpQjhCLHVCQUF1Qnh1QyxHQUFVdEssS0FDM0QyM0MsRUFBYXZSLGVBQWVwbUMsS0FDNUIyM0MsRUFBYXBnQyxpQkFBaUJ2WCxNQU10QysyQyxFQUFzQnJsRSxVQUFVa2xFLDJCQUE2QixTQUFVdHNDLEdBRWpEajRCLEtBQUt3bEUsa0JBQWtCdnRDLEdBQzdCc3NDLDhCQUVoQkcsRUFBc0JybEUsVUFBVW1tRSxrQkFBb0IsU0FBVXZ0QyxHQUkxRCxPQUhLajRCLEtBQUs0a0UsYUFBYTNzQyxLQUNuQmo0QixLQUFLNGtFLGFBQWEzc0MsR0FBWSxJQUFJeXJDLElBRS9CMWpFLEtBQUs0a0UsYUFBYTNzQyxJQUU3QnlzQyxFQUFzQnJsRSxVQUFVa25FLDRCQUE4QixTQUFVdm5FLEdBQ3BFLElBQUkwbkUsRUFBZ0IxbUUsS0FBSzhrRSw2QkFBNkJ4bUUsSUFBSVUsR0FLMUQsT0FKSzBuRSxJQUNEQSxFQUFnQixJQUFJM3ZDLEdBQVU3TSxHQUM5QmxxQixLQUFLOGtFLDZCQUErQjlrRSxLQUFLOGtFLDZCQUE2QjlqRCxPQUFPaGlCLEVBQUswbkUsSUFFL0VBLEdBT1hoQyxFQUFzQnJsRSxVQUFVcW1FLGVBQWlCLFNBQVV6dEMsR0FDdkQsSUFBSTB1QyxFQUE0RCxPQUE3QzNtRSxLQUFLZ21FLDBCQUEwQi90QyxHQUlsRCxPQUhLMHVDLEdBQ0RodkQsRUFsU0ksd0JBa1NhLDJCQUE0QnNnQixHQUUxQzB1QyxHQU1YakMsRUFBc0JybEUsVUFBVTJtRSwwQkFBNEIsU0FBVS90QyxHQUNsRSxJQUFJc3RDLEVBQWN2bEUsS0FBSzRrRSxhQUFhM3NDLEdBQ3BDLE9BQU9zdEMsR0FBZUEsRUFBWUksVUFDNUIsS0FDQTNsRSxLQUFLMmtFLGlCQUFpQm43Qix1QkFBdUJ2UixJQU92RHlzQyxFQUFzQnJsRSxVQUFVeW1FLFlBQWMsU0FBVTd0QyxHQUNwRCxJQUFJdnVCLEVBQVExSixLQUNaNkYsR0FBUTdGLEtBQUs0a0UsYUFBYTNzQyxHQUFVMHRDLFVBQVcsb0NBQy9DM2xFLEtBQUs0a0UsYUFBYTNzQyxHQUFZLElBQUl5ckMsR0FJZjFqRSxLQUFLMmtFLGlCQUFpQjhCLHVCQUF1Qnh1QyxHQUNuRHptQixTQUFRLFNBQVV4UyxHQUMzQjBLLEVBQU0wN0QseUJBQXlCbnRDLEVBQVVqNUIsRUFBMEIsVUFPM0UwbEUsRUFBc0JybEUsVUFBVThtRSx1QkFBeUIsU0FBVWx1QyxFQUFVajVCLEdBRXpFLE9BRG1CZ0IsS0FBSzJrRSxpQkFBaUI4Qix1QkFBdUJ4dUMsR0FDNUNqa0IsSUFBSWhWLElBRXJCMGxFLEVBclUrQixHQXVVMUMsU0FBU0ssS0FDTCxPQUFPLElBQUkzd0MsR0FBVWhGLEdBQVloQyxZQUVyQyxTQUFTeTJDLEtBQ0wsT0FBTyxJQUFJenZDLEdBQVVoRixHQUFZaEM7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQnJDLElBQUl3NUMsR0FBWSxjQXNCWkMsR0FBNkIsV0FDN0IsU0FBU0EsRUFJVGhvQixFQUVBaWdCLEVBQVdodkMsRUFBWSt2QyxFQUFvQmlILEdBQ3ZDLElBQUlwOUQsRUFBUTFKLEtBQ1pBLEtBQUs2K0MsV0FBYUEsRUFDbEI3K0MsS0FBSzgrRCxVQUFZQSxFQWtCakI5K0QsS0FBSyttRSxjQUFnQixHQVVyQi9tRSxLQUFLZ25FLGNBQWdCLEdBQ3JCaG5FLEtBQUtpbkUsc0JBQXdCLEtBSzdCam5FLEtBQUs2NUMsZ0JBQWlCLEVBQ3RCNzVDLEtBQUtxaEQsV0FBWSxFQUNqQnJoRCxLQUFLOG1FLG9CQUFzQkEsRUFDM0I5bUUsS0FBSzhtRSxvQkFBb0JJLGFBQVksU0FBVUMsR0FDM0NyM0MsRUFBV2Usa0JBQWlCLFdBQWMsT0FBT3JyQixFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3BGLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxPQUFLL0MsS0FBS29uRSxpQkFDVnp2RCxFQUFNaXZELEdBQVcsdURBQ1YsQ0FBQyxFQUFhNW1FLEtBQUtxbkUsbUJBRlEsQ0FBQyxFQUFhLEdBR3BELEtBQUssRUFDRHA4RCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxnQkFLaEMvQyxLQUFLc25FLG1CQUFxQixJQUFJMUgsR0FBbUI5dkMsRUFBWSt2QyxHQUU3RDcvRCxLQUFLdW5FLFlBQWN2bkUsS0FBSzgrRCxVQUFVVCx5QkFBeUIsQ0FDdkRuQyxPQUFRbDhELEtBQUt3bkUsa0JBQWtCdm9FLEtBQUtlLE1BQ3BDMDdELFFBQVMxN0QsS0FBS3luRSxtQkFBbUJ4b0UsS0FBS2UsTUFDdEMrOEQsY0FBZS84RCxLQUFLMG5FLG9CQUFvQnpvRSxLQUFLZSxRQUVqREEsS0FBSzJuRSxZQUFjM25FLEtBQUs4K0QsVUFBVVYseUJBQXlCLENBQ3ZEbEMsT0FBUWw4RCxLQUFLNG5FLGtCQUFrQjNvRSxLQUFLZSxNQUNwQzA3RCxRQUFTMTdELEtBQUs2bkUsbUJBQW1CNW9FLEtBQUtlLE1BQ3RDZytELG9CQUFxQmgrRCxLQUFLOG5FLHlCQUF5QjdvRSxLQUFLZSxNQUN4RCs5RCxpQkFBa0IvOUQsS0FBSys5RCxpQkFBaUI5K0QsS0FBS2UsUUFta0JyRCxPQTVqQkE2bUUsRUFBWXhuRSxVQUFVZ3hCLE1BQVEsV0FDMUIsT0FBT3J3QixLQUFLK25FLGlCQUdoQmxCLEVBQVl4bkUsVUFBVTBvRSxjQUFnQixXQUNsQyxPQUFPdmlFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSWlMLEVBQ0osT0FBT3pGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVa0wsR0FDckMsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQUVELE9BREEvQyxLQUFLNjVDLGdCQUFpQixFQUNqQjc1QyxLQUFLb25FLGlCQUNWbjhELEVBQUtqTCxLQUFLMm5FLFlBQ0gsQ0FBQyxFQUFhM25FLEtBQUs2K0MsV0FBVzFjLHVCQUZILENBQUMsRUFBYSxHQUdwRCxLQUFLLEVBU0QsT0FSQWwzQixFQUFHKzJCLGdCQUFrQjkyQixFQUFHbEksT0FDcEJoRCxLQUFLZ29FLHlCQUNMaG9FLEtBQUtpb0UsbUJBR0xqb0UsS0FBS3NuRSxtQkFBbUJwekQsSUFBSTJsRCxHQUFZaUcsU0FHckMsQ0FBQyxFQUFhOS9ELEtBQUtrb0UscUJBQzlCLEtBQUssRUFFRGg5RCxFQUFHbEksT0FDSGtJLEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQVNoQzhqRSxFQUFZeG5FLFVBQVU4b0UsZUFBaUIsV0FDbkMsT0FBTzNpRSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBL0MsS0FBSzY1QyxnQkFBaUIsRUFDZixDQUFDLEVBQWE3NUMsS0FBS29vRSwwQkFDOUIsS0FBSyxFQUlELE9BSEFuOUQsRUFBR2pJLE9BRUhoRCxLQUFLc25FLG1CQUFtQnB6RCxJQUFJMmxELEdBQVl5RyxTQUNqQyxDQUFDLFdBSzVCdUcsRUFBWXhuRSxVQUFVK29FLHVCQUF5QixXQUMzQyxPQUFPNWlFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhL0MsS0FBSzJuRSxZQUFZMW9CLFFBQzlDLEtBQUssRUFFRCxPQURBaDBDLEVBQUdqSSxPQUNJLENBQUMsRUFBYWhELEtBQUt1bkUsWUFBWXRvQixRQUMxQyxLQUFLLEVBT0QsT0FOQWgwQyxFQUFHakksT0FDQ2hELEtBQUsrbUUsY0FBYzFtRSxPQUFTLElBQzVCc1gsRUFBTWl2RCxHQUFXLDhCQUFnQzVtRSxLQUFLK21FLGNBQWMxbUUsT0FBUyxtQkFDN0VMLEtBQUsrbUUsY0FBZ0IsSUFFekIvbUUsS0FBS3FvRSwwQkFDRSxDQUFDLFdBSzVCeEIsRUFBWXhuRSxVQUFVeWxELFNBQVcsV0FDN0IsT0FBT3QvQyxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFHRCxPQUZBNFUsRUFBTWl2RCxHQUFXLDhCQUNqQjVtRSxLQUFLNjVDLGdCQUFpQixFQUNmLENBQUMsRUFBYTc1QyxLQUFLb29FLDBCQUM5QixLQUFLLEVBTUQsT0FMQW45RCxFQUFHakksT0FDSGhELEtBQUs4bUUsb0JBQW9CaGlCLFdBR3pCOWtELEtBQUtzbkUsbUJBQW1CcHpELElBQUkybEQsR0FBWWlHLFNBQ2pDLENBQUMsV0FTNUIrRyxFQUFZeG5FLFVBQVVpcEUsT0FBUyxTQUFVM2dDLEdBQ2pDbDRCLEVBQVN6UCxLQUFLZ25FLGNBQWVyL0IsRUFBVzFQLFlBSTVDajRCLEtBQUtnbkUsY0FBY3IvQixFQUFXMVAsVUFBWTBQLEVBQ3RDM25DLEtBQUtnb0UseUJBRUxob0UsS0FBS2lvRSxtQkFFQWpvRSxLQUFLdW5FLFlBQVl6TSxVQUN0Qjk2RCxLQUFLdW9FLGlCQUFpQjVnQyxLQU85QmsvQixFQUFZeG5FLFVBQVVtcEUsU0FBVyxTQUFVdndDLEdBQ3ZDcHlCLEVBQU80SixFQUFTelAsS0FBS2duRSxjQUFlL3VDLEdBQVcsbURBQXFEQSxVQUM3Rmo0QixLQUFLZ25FLGNBQWMvdUMsR0FDdEJqNEIsS0FBS3VuRSxZQUFZek0sVUFDakI5NkQsS0FBS3lvRSxtQkFBbUJ4d0MsR0FFeEJqb0IsRUFBUWhRLEtBQUtnbkUsaUJBQ1RobkUsS0FBS3VuRSxZQUFZek0sU0FDakI5NkQsS0FBS3VuRSxZQUFZck0sV0FFWmw3RCxLQUFLb25FLGlCQUlWcG5FLEtBQUtzbkUsbUJBQW1CcHpELElBQUkybEQsR0FBWWlHLFdBS3BEK0csRUFBWXhuRSxVQUFVbXFDLHVCQUF5QixTQUFVdlIsR0FDckQsT0FBT2o0QixLQUFLZ25FLGNBQWMvdUMsSUFBYSxNQUczQzR1QyxFQUFZeG5FLFVBQVVvbkUsdUJBQXlCLFNBQVV4dUMsR0FDckQsT0FBT2o0QixLQUFLMG9FLFdBQVdqQyx1QkFBdUJ4dUMsSUFNbEQ0dUMsRUFBWXhuRSxVQUFVa3BFLGlCQUFtQixTQUFVNWdDLEdBQy9DM25DLEtBQUtpbkUsc0JBQXNCMUMsMkJBQTJCNThCLEVBQVcxUCxVQUNqRWo0QixLQUFLdW5FLFlBQVl2SyxNQUFNcjFCLElBTzNCay9CLEVBQVl4bkUsVUFBVW9wRSxtQkFBcUIsU0FBVXh3QyxHQUNqRGo0QixLQUFLaW5FLHNCQUFzQjFDLDJCQUEyQnRzQyxHQUN0RGo0QixLQUFLdW5FLFlBQVlsSyxRQUFRcGxDLElBRTdCNHVDLEVBQVl4bkUsVUFBVTRvRSxpQkFBbUIsV0FDckNwaUUsRUFBTzdGLEtBQUtnb0UseUJBQTBCLHFFQUN0Q2hvRSxLQUFLaW5FLHNCQUF3QixJQUFJdkMsR0FBc0Ixa0UsTUFDdkRBLEtBQUt1bkUsWUFBWWwzQyxRQUNqQnJ3QixLQUFLc25FLG1CQUFtQnBILDBCQU01QjJHLEVBQVl4bkUsVUFBVTJvRSx1QkFBeUIsV0FDM0MsT0FBUWhvRSxLQUFLb25FLGtCQUNScG5FLEtBQUt1bkUsWUFBWTdNLGNBQ2pCMXFELEVBQVFoUSxLQUFLZ25FLGdCQUV0QkgsRUFBWXhuRSxVQUFVK25FLGNBQWdCLFdBQ2xDLE9BQU9wbkUsS0FBS3FoRCxXQUFhcmhELEtBQUs2NUMsZ0JBRWxDZ3RCLEVBQVl4bkUsVUFBVWdwRSx3QkFBMEIsV0FDNUNyb0UsS0FBS2luRSxzQkFBd0IsTUFFakNKLEVBQVl4bkUsVUFBVW1vRSxrQkFBb0IsV0FDdEMsT0FBT2hpRSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkwSixFQUFRMUosS0FDWixPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUlyQyxPQUhBeWIsRUFBYzFtQixLQUFLZ25FLGVBQWUsU0FBVS91QyxFQUFVMFAsR0FDbERqK0IsRUFBTTYrRCxpQkFBaUI1Z0MsTUFFcEIsQ0FBQyxVQUlwQmsvQixFQUFZeG5FLFVBQVVvb0UsbUJBQXFCLFNBQVUzakUsR0FDakQsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FrQnJDLFlBakJjMUIsSUFBVnpGLEdBR0ErQixHQUFRN0YsS0FBS2dvRSx5QkFBMEIsMkRBRTNDaG9FLEtBQUtxb0UsMEJBRURyb0UsS0FBS2dvRSwwQkFDTGhvRSxLQUFLc25FLG1CQUFtQi9HLHlCQUF5Qno4RCxHQUNqRDlELEtBQUtpb0Usb0JBTUxqb0UsS0FBS3NuRSxtQkFBbUJwekQsSUFBSTJsRCxHQUFZaUcsU0FFckMsQ0FBQyxVQUlwQitHLEVBQVl4bkUsVUFBVXFvRSxvQkFBc0IsU0FBVS9LLEVBQWFoaUIsR0FDL0QsT0FBT24xQyxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlxbkMsRUFDSixPQUFPN2hDLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUdELE9BREEvQyxLQUFLc25FLG1CQUFtQnB6RCxJQUFJMmxELEdBQVkyRyxRQUNwQzdELGFBQXVCNEcsSUFDdkI1RyxFQUFZdkMsUUFBVXNILEdBQXVCTyxTQUM3Q3RGLEVBQVk4RyxNQUdMLENBQUMsRUFBY3pqRSxLQUFLMm9FLGtCQUFrQmhNLEtBRTdDQSxhQUF1QnNHLEdBQ3ZCampFLEtBQUtpbkUsc0JBQXNCaEMscUJBQXFCdEksR0FFM0NBLGFBQXVCMEcsR0FDNUJyakUsS0FBS2luRSxzQkFBc0JsQixzQkFBc0JwSixJQUdqRDkyRCxFQUFPODJELGFBQXVCNEcsR0FBbUIsK0RBQ2pEdmpFLEtBQUtpbkUsc0JBQXNCNUIsbUJBQW1CMUksSUFFNUNoaUIsRUFBZ0Jyd0IsUUFBUXNKLEdBQWdCSyxLQUFhLENBQUMsRUFBYSxHQUNsRSxDQUFDLEVBQWFqMEIsS0FBSzYrQyxXQUFXelgsaUNBQ3pDLEtBQUssRUFFRCxPQURBQyxFQUE0QnA4QixFQUFHakksT0FDekIyM0MsRUFBZ0J2dUIsVUFBVWliLElBQThCLEVBR3ZELENBQUMsRUFBYXJuQyxLQUFLNG9FLG1CQUFtQmp1QixJQUg0QixDQUFDLEVBQWEsR0FJM0YsS0FBSyxFQUdEMXZDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBVWhDOGpFLEVBQVl4bkUsVUFBVXVwRSxtQkFBcUIsU0FBVWp1QixHQUNqRCxJQUFJanhDLEVBQVExSixLQUNaNkYsR0FBUTgwQyxFQUFnQnJ3QixRQUFRc0osR0FBZ0JLLEtBQU0saURBQ3RELElBQUl3L0IsRUFBY3p6RCxLQUFLaW5FLHNCQUFzQmYsa0JBQWtCdnJCLEdBa0MvRCxPQS9CQWowQixFQUFjK3NDLEVBQVlHLGVBQWUsU0FBVTM3QixFQUFVNDdCLEdBQ3pELEdBQUlBLEVBQU92YSxZQUFZajVDLE9BQVMsRUFBRyxDQUMvQixJQUFJc25DLEVBQWFqK0IsRUFBTXM5RCxjQUFjL3VDLEdBRWpDMFAsSUFDQWorQixFQUFNczlELGNBQWMvdUMsR0FBWTBQLEVBQVdrVCxnQkFBZ0JnWixFQUFPdmEsWUFBYXFCLFFBTTNGOFksRUFBWW9QLGlCQUFpQnJ4RCxTQUFRLFNBQVV5bUIsR0FDM0MsSUFBSTBQLEVBQWFqK0IsRUFBTXM5RCxjQUFjL3VDLEdBQ3JDLEdBQUswUCxFQUFMLENBTUFqK0IsRUFBTXM5RCxjQUFjL3VDLEdBQVkwUCxFQUFXa1QsZ0JBQWdCNzFCLElBQW1CMmlCLEVBQVdnVCxpQkFHekZqeEMsRUFBTSsrRCxtQkFBbUJ4d0MsR0FLekIsSUFBSTR3QyxFQUFvQixJQUFJcHVCLEdBQVc5UyxFQUFXN21DLE9BQVFtM0IsRUFBVThoQixHQUFjK3VCLHdCQUF5Qm5oQyxFQUFXbGIsZ0JBQ3RIL2lCLEVBQU02K0QsaUJBQWlCTSxPQUdwQjdvRSxLQUFLMG9FLFdBQVdsVixpQkFBaUJDLElBRzVDb1QsRUFBWXhuRSxVQUFVc3BFLGtCQUFvQixTQUFVaE0sR0FDaEQsSUFBSWp6RCxFQUFRMUosS0FDWjZGLElBQVM4MkQsRUFBWThHLE1BQU8seUNBQzVCLElBQUkzL0QsRUFBUTY0RCxFQUFZOEcsTUFDcEIzTixFQUFlL3pELFFBQVFDLFVBYzNCLE9BYkEyNkQsRUFBWTZHLFVBQVVoeUQsU0FBUSxTQUFVeW1CLEdBQ3BDNjlCLEVBQWVBLEVBQWF0ekQsTUFBSyxXQUFjLE9BQU9nRCxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3pGLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBRXJDLE9BQUl3RSxFQUFTelAsS0FBS2duRSxjQUFlL3VDLFdBQ3RCajRCLEtBQUtnbkUsY0FBYy91QyxHQUMxQmo0QixLQUFLaW5FLHNCQUFzQnZmLGFBQWF6dkIsR0FDakMsQ0FBQyxFQUFjajRCLEtBQUswb0UsV0FBV0ssYUFBYTl3QyxFQUFVbjBCLEtBRTFELENBQUMsZUFJYmd5RCxHQVVYK1EsRUFBWXhuRSxVQUFVNm9FLGtCQUFvQixXQUN0QyxPQUFPMWlFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSWdwRSxFQUFzQjl1QyxFQUMxQixPQUFPMTBCLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUNELE9BQUsvQyxLQUFLaXBFLHlCQUNWRCxFQUF1QmhwRSxLQUFLK21FLGNBQWMxbUUsT0FBUyxFQUM3Q0wsS0FBSyttRSxjQUFjL21FLEtBQUsrbUUsY0FBYzFtRSxPQUFTLEdBQUcwNEIsU0EvZ1kxRCxFQWloWVMsQ0FBQyxFQUFhLzRCLEtBQUs2K0MsV0FBV29XLGtCQUFrQitULEtBSmIsQ0FBQyxFQUFhLEdBSzVELEtBQUssRUFFRCxPQUFnQixRQURoQjl1QyxFQUFRanZCLEVBQUdqSSxRQUNtQixDQUFDLEVBQWEsSUFDVixJQUE5QmhELEtBQUsrbUUsY0FBYzFtRSxRQUNuQkwsS0FBSzJuRSxZQUFZek0sV0FFZCxDQUFDLEVBQWEsSUFDekIsS0FBSyxFQUVELE9BREFsN0QsS0FBS2twRSxtQkFBbUJodkMsR0FDakIsQ0FBQyxFQUFhbDZCLEtBQUtrb0UscUJBQzlCLEtBQUssRUFDRGo5RCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUlELE9BSEkvQyxLQUFLbXBFLDBCQUNMbnBFLEtBQUtvcEUsbUJBRUYsQ0FBQyxXQVM1QnZDLEVBQVl4bkUsVUFBVTRwRSxzQkFBd0IsV0FDMUMsT0FBUWpwRSxLQUFLb25FLGlCQUFtQnBuRSxLQUFLK21FLGNBQWMxbUUsT0FwZGxDLElBdWRyQndtRSxFQUFZeG5FLFVBQVVncUUsa0JBQW9CLFdBQ3RDLE9BQU9ycEUsS0FBSyttRSxjQUFjMW1FLFFBTTlCd21FLEVBQVl4bkUsVUFBVTZwRSxtQkFBcUIsU0FBVWh2QyxHQUNqRHIwQixFQUFPN0YsS0FBS2lwRSx3QkFBeUIsbURBQ3JDanBFLEtBQUsrbUUsY0FBY3RqRSxLQUFLeTJCLEdBQ3BCbDZCLEtBQUsybkUsWUFBWTdNLFVBQVk5NkQsS0FBSzJuRSxZQUFZMkIsbUJBQzlDdHBFLEtBQUsybkUsWUFBWWpLLGVBQWV4akMsRUFBTWhCLFlBRzlDMnRDLEVBQVl4bkUsVUFBVThwRSx1QkFBeUIsV0FDM0MsT0FBUW5wRSxLQUFLb25FLGtCQUNScG5FLEtBQUsybkUsWUFBWWpOLGFBQ2xCMTZELEtBQUsrbUUsY0FBYzFtRSxPQUFTLEdBRXBDd21FLEVBQVl4bkUsVUFBVStwRSxpQkFBbUIsV0FDckN2akUsRUFBTzdGLEtBQUttcEUseUJBQTBCLHFFQUN0Q25wRSxLQUFLMm5FLFlBQVl0M0MsU0FFckJ3MkMsRUFBWXhuRSxVQUFVdW9FLGtCQUFvQixXQUN0QyxPQUFPcGlFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FFckMsT0FEQWpMLEtBQUsybkUsWUFBWTFKLGlCQUNWLENBQUMsVUFJcEI0SSxFQUFZeG5FLFVBQVV5b0UseUJBQTJCLFdBQzdDLElBQUlwK0QsRUFBUTFKLEtBRVosT0FBT0EsS0FBSzYrQyxXQUNQemMsbUJBQW1CcGlDLEtBQUsybkUsWUFBWTNsQyxpQkFDcEN4L0IsTUFBSyxXQUVOLElBQUssSUFBSW1JLEVBQUssRUFBR00sRUFBS3ZCLEVBQU1xOUQsY0FBZXA4RCxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sQ0FDN0QsSUFBSXV2QixFQUFRanZCLEVBQUdOLEdBQ2ZqQixFQUFNaStELFlBQVlqSyxlQUFleGpDLEVBQU1oQixlQUcxQ3B2QixNQUFNdTFDLEtBRWZ3bkIsRUFBWXhuRSxVQUFVMCtELGlCQUFtQixTQUFVNWpDLEVBQWU5USxHQUM5RCxJQUFJM2YsRUFBUTFKLEtBR1o2RixFQUFPN0YsS0FBSyttRSxjQUFjMW1FLE9BQVMsRUFBRyx1Q0FDdEMsSUFBSTY1QixFQUFRbDZCLEtBQUsrbUUsY0FBY2ppRSxRQUMzQnErQyxFQUFVbHBCLEdBQW9CN2tCLEtBQUs4a0IsRUFBT0MsRUFBZTlRLEVBQVNycEIsS0FBSzJuRSxZQUFZM2xDLGlCQUN2RixPQUFPaGlDLEtBQUswb0UsV0FBV2EscUJBQXFCcG1CLEdBQVMzZ0QsTUFBSyxXQUd0RCxPQUFPa0gsRUFBTXcrRCx3QkFHckJyQixFQUFZeG5FLFVBQVV3b0UsbUJBQXFCLFNBQVUvakUsR0FDakQsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFDSTBKLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBUXJDLFlBUGMxQixJQUFWekYsR0FHQStCLEdBQVE3RixLQUFLbXBFLHlCQUEwQiwyREFJdkNybEUsR0FBUzlELEtBQUsrbUUsY0FBYzFtRSxPQUFTLFFBQ3JCLEVBV1QsQ0FBQyxHQVZKTCxLQUFLMm5FLFlBQVkyQixrQkFFRHRwRSxLQUFLd3BFLGlCQUFpQjFsRSxHQU10QjlELEtBQUt5cEUscUJBQXFCM2xFLElBRVZ0QixNQUFLLFdBRzdCa0gsRUFBTXkvRCwwQkFDTnovRCxFQUFNMC9ELHdCQUlmLENBQUMsVUFJcEJ2QyxFQUFZeG5FLFVBQVVvcUUscUJBQXVCLFNBQVUzbEUsR0FDbkQsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FJckMsT0FBSTIxRCxHQUFpQjk4RCxFQUFNc0csT0FDdkJ1TixFQUFNaXZELEdBQVcseUVBQTBFNW1FLEtBQUsybkUsWUFBWTNsQyxpQkFDNUdoaUMsS0FBSzJuRSxZQUFZM2xDLGdCQUFrQmhkLElBQzVCLENBQUMsRUFBY2hsQixLQUFLNitDLFdBQ2xCemMsbUJBQW1CcGQsS0FDbkJsYixNQUFNdTFDLE1BRVosQ0FBQyxVQUlwQnduQixFQUFZeG5FLFVBQVVtcUUsaUJBQW1CLFNBQVUxbEUsR0FDL0MsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSWs2QixFQUNBeHdCLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBR3JDLE9BN3FETDIxRCxHQURvQngyRCxFQThxRFd0RyxFQUFNc0csT0E3cURYQSxJQUFTNmEsRUFBS1ksU0E4cUQvQnFVLEVBQVFsNkIsS0FBSyttRSxjQUFjamlFLFFBSTNCOUUsS0FBSzJuRSxZQUFZMU0saUJBQ1YsQ0FBQyxFQUFjajdELEtBQUswb0UsV0FDbEJnQixrQkFBa0J4dkMsRUFBTW5CLFFBQVNqMUIsR0FDakN0QixNQUFLLFdBR04sT0FBT2tILEVBQU13K0QseUJBR2xCLENBQUMsR0E1ckR4QixJQUErQjk5RCxTQWdzRDNCeThELEVBQVl4bkUsVUFBVXNxRSxrQkFBb0IsV0FDdEMsT0FBTyxJQUFJaHRELEdBQVkzYyxLQUFLOCtELFlBRWhDK0gsRUFBWXhuRSxVQUFVZ29FLGVBQWlCLFdBQ25DLE9BQU83aEUsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0FEQS9DLEtBQUs2NUMsZ0JBQWlCLEVBQ2YsQ0FBQyxFQUFhNzVDLEtBQUtvb0UsMEJBQzlCLEtBQUssRUFHRCxPQUZBbjlELEVBQUdqSSxPQUNIaEQsS0FBS3NuRSxtQkFBbUJwekQsSUFBSTJsRCxHQUFZaUcsU0FDakMsQ0FBQyxFQUFhOS9ELEtBQUsrbkUsaUJBQzlCLEtBQUssRUFFRCxPQURBOThELEVBQUdqSSxPQUNJLENBQUMsV0FLNUI2akUsRUFBWXhuRSxVQUFVdXFFLHVCQUF5QixXQUMzQyxPQUFPcGtFLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUNELE9BQUsvQyxLQUFLb25FLGlCQUlWenZELEVBQU1pdkQsR0FBVyxxREFDVixDQUFDLEVBQWE1bUUsS0FBS3FuRSxtQkFMUSxDQUFDLEVBQWEsR0FNcEQsS0FBSyxFQUNEcDhELEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBUWhDOGpFLEVBQVl4bkUsVUFBVXdxRSxrQkFBb0IsU0FBVXhvQixHQUNoRCxPQUFPNzdDLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELE9BREEvQyxLQUFLcWhELFVBQVlBLEVBQ1hBLEdBQWFyaEQsS0FBSzY1QyxlQUNqQixDQUFDLEVBQWE3NUMsS0FBSytuRSxpQkFEc0IsQ0FBQyxFQUFhLEdBRWxFLEtBQUssRUFFRCxPQURBOThELEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQ0QsT0FBTXErQyxFQUFrQixDQUFDLEVBQWEsR0FDL0IsQ0FBQyxFQUFhcmhELEtBQUtvb0UsMEJBQzlCLEtBQUssRUFDRG45RCxFQUFHakksT0FDSGhELEtBQUtzbkUsbUJBQW1CcHpELElBQUkybEQsR0FBWWlHLFNBQ3hDNzBELEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQUt6QjhqRSxFQTdvQnFCLEdBb3FCNUJpRCxHQUEwQixXQUMxQixTQUFTQSxFQUFTQyxFQUFVQyxHQUl4QixHQUhBL2lELEVBQTBCLFdBQVk3bUIsVUFBVyxHQUNqRG1uQixFQUFnQixXQUFZLFNBQVUsRUFBR3dpRCxHQUN6Q3hpRCxFQUFnQixXQUFZLFNBQVUsRUFBR3lpRCxJQUNwQzdoQixTQUFTNGhCLElBQWFBLEdBQVksSUFBTUEsRUFBVyxHQUNwRCxNQUFNLElBQUk3akQsRUFBZWpCLEVBQUtJLGlCQUFrQiwwREFBNEQwa0QsR0FFaEgsSUFBSzVoQixTQUFTNmhCLElBQWNBLEdBQWEsS0FBT0EsRUFBWSxJQUN4RCxNQUFNLElBQUk5akQsRUFBZWpCLEVBQUtJLGlCQUFrQiw2REFBK0Qya0QsR0FFbkhocUUsS0FBS2lxRSxLQUFPRixFQUNaL3BFLEtBQUtrcUUsTUFBUUYsRUFpQ2pCLE9BL0JBN3JFLE9BQU9DLGVBQWUwckUsRUFBU3pxRSxVQUFXLFdBQVksQ0FJbERmLElBQUssV0FDRCxPQUFPMEIsS0FBS2lxRSxNQUVoQjVyRSxZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTByRSxFQUFTenFFLFVBQVcsWUFBYSxDQUluRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLa3FFLE9BRWhCN3JFLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJ1eUQsRUFBU3pxRSxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ25DLE9BQU92ckIsS0FBS2lxRSxPQUFTMStDLEVBQU0wK0MsTUFBUWpxRSxLQUFLa3FFLFFBQVUzK0MsRUFBTTIrQyxPQU01REosRUFBU3pxRSxVQUFVbXNCLFdBQWEsU0FBVUQsR0FDdEMsT0FBUXJCLEVBQW9CbHFCLEtBQUtpcUUsS0FBTTErQyxFQUFNMCtDLE9BQ3pDLy9DLEVBQW9CbHFCLEtBQUtrcUUsTUFBTzMrQyxFQUFNMitDLFFBRXZDSixFQTdDa0IsR0FpRXpCSyxHQUEwQyxXQUMxQyxTQUFTQSxLQWVULE9BYkFBLEVBQXlCOXFFLFVBQVVxNkIsaUJBQW1CLFNBQVVwTixFQUFlME0sR0FDM0UsT0FBTyxJQUFJOFYsR0FBcUI5VixFQUFnQjFNLElBRXBENjlDLEVBQXlCOXFFLFVBQVU4NUIsc0JBQXdCLFNBQVU3TSxFQUFlODlDLEdBQ2hGLE9BQU9BLEdBRVhELEVBQXlCOXFFLFVBQVUwdEMsaUJBQW1CLFNBQVV6Z0IsR0FDNUQsT0FBTyxNQUVYNjlDLEVBQXlCOXFFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDbkQsT0FBT0EsYUFBaUI0K0MsR0FFNUJBLEVBQXlCaDJELFNBQVcsSUFBSWcyRCxFQUNqQ0EsRUFoQmtDLEdBbUJ6Q0UsR0FBOEMsV0FDOUMsU0FBU0EsRUFBNkJDLEdBQ2xDdHFFLEtBQUtzcUUsU0FBV0EsRUErQnBCLE9BN0JBRCxFQUE2QmhyRSxVQUFVcTZCLGlCQUFtQixTQUFVcE4sRUFBZTBNLEdBQy9FLE9BQU9oNUIsS0FBS00sTUFBTWdzQixJQUV0Qis5QyxFQUE2QmhyRSxVQUFVODVCLHNCQUF3QixTQUFVN00sRUFBZTg5QyxHQUlwRixPQUFPcHFFLEtBQUtNLE1BQU1nc0IsSUFFdEIrOUMsRUFBNkJockUsVUFBVWlCLE1BQVEsU0FBVWdzQixHQU9yRCxJQU5BLElBQUlocUIsRUFBU2lvRSxHQUF3QmorQyxHQUNqQy9hLEVBQVUsU0FBVWk1RCxHQUNmbG9FLEVBQU9taUQsTUFBSyxTQUFVMTdCLEdBQVcsT0FBT0EsRUFBUXVCLFFBQVFrZ0QsT0FDekRsb0UsRUFBT21CLEtBQUsrbUUsSUFHWDcvRCxFQUFLLEVBQUdNLEVBQUtqTCxLQUFLc3FFLFNBQVUzL0QsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBRXZENEcsRUFEY3RHLEVBQUdOLElBR3JCLE9BQU8sSUFBSW1sQyxHQUFXeHRDLElBRTFCK25FLEVBQTZCaHJFLFVBQVUwdEMsaUJBQW1CLFNBQVV6Z0IsR0FDaEUsT0FBTyxNQUVYKzlDLEVBQTZCaHJFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDdkQsT0FBUUEsYUFBaUI4K0MsR0FDckJoZ0QsRUFBWWtCLEVBQU0rK0MsU0FBVXRxRSxLQUFLc3FFLFdBRWxDRCxFQWpDc0MsR0FvQzdDSSxHQUErQyxXQUMvQyxTQUFTQSxFQUE4QkgsR0FDbkN0cUUsS0FBS3NxRSxTQUFXQSxFQTZCcEIsT0EzQkFHLEVBQThCcHJFLFVBQVVxNkIsaUJBQW1CLFNBQVVwTixFQUFlME0sR0FDaEYsT0FBT2g1QixLQUFLTSxNQUFNZ3NCLElBRXRCbStDLEVBQThCcHJFLFVBQVU4NUIsc0JBQXdCLFNBQVU3TSxFQUFlODlDLEdBSXJGLE9BQU9wcUUsS0FBS00sTUFBTWdzQixJQUV0Qm0rQyxFQUE4QnByRSxVQUFVaUIsTUFBUSxTQUFVZ3NCLEdBS3RELElBSkEsSUFBSWhxQixFQUFTaW9FLEdBQXdCaitDLEdBQ2pDbytDLEVBQVUsU0FBVUMsR0FDcEJyb0UsRUFBU0EsRUFBT2lULFFBQU8sU0FBVXdULEdBQVcsT0FBUUEsRUFBUXVCLFFBQVFxZ0QsT0FFL0RoZ0UsRUFBSyxFQUFHTSxFQUFLakwsS0FBS3NxRSxTQUFVMy9ELEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUV2RCsvRCxFQURlei9ELEVBQUdOLElBR3RCLE9BQU8sSUFBSW1sQyxHQUFXeHRDLElBRTFCbW9FLEVBQThCcHJFLFVBQVUwdEMsaUJBQW1CLFNBQVV6Z0IsR0FDakUsT0FBTyxNQUVYbStDLEVBQThCcHJFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDeEQsT0FBUUEsYUFBaUJrL0MsR0FDckJwZ0QsRUFBWWtCLEVBQU0rK0MsU0FBVXRxRSxLQUFLc3FFLFdBRWxDRyxFQS9CdUMsR0F1QzlDRyxHQUFvRCxXQUNwRCxTQUFTQSxFQUFtQ0MsR0FDeEM3cUUsS0FBSzZxRSxRQUFVQSxFQW9DbkIsT0FsQ0FELEVBQW1DdnJFLFVBQVVxNkIsaUJBQW1CLFNBQVVwTixFQUFlME0sR0FDckYsSUFBSWk2QixFQUFZanpELEtBQUsrc0MsaUJBQWlCemdCLEdBTXRDLEdBQUkybUMsYUFBcUIxa0IsSUFDckJ2dUMsS0FBSzZxRSxtQkFBbUJ0OEIsR0FBYyxDQUN0QyxJQUFJdThCLEVBQU03WCxFQUFVbGxCLGNBQWdCL3RDLEtBQUs2cUUsUUFBUTk4QixjQUNqRCxPQUFPLElBQUlRLEdBQWF1OEIsR0FHcEJBLEVBQU03WCxFQUFVbGxCLGNBQWdCL3RDLEtBQUs2cUUsUUFBUTk4QixjQUNqRCxPQUFPLElBQUlTLEdBQVlzOEIsSUFHL0JGLEVBQW1DdnJFLFVBQVU4NUIsc0JBQXdCLFNBQVU3TSxFQUFlODlDLEdBRTFGLE9BREF2a0UsRUFBMkIsT0FBcEJ1a0UsRUFBMEIsNERBQzFCQSxHQU1YUSxFQUFtQ3ZyRSxVQUFVMHRDLGlCQUFtQixTQUFVemdCLEdBQ3RFLE9BQU9BLGFBQXlCK2hCLEdBQzFCL2hCLEVBQ0EsSUFBSWlpQixHQUFhLElBRTNCcThCLEVBQW1DdnJFLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDN0QsT0FBUUEsYUFBaUJxL0MsR0FDckI1cUUsS0FBSzZxRSxRQUFRdmdELFFBQVFpQixFQUFNcy9DLFVBRTVCRCxFQXRDNEMsR0F3Q3ZELFNBQVNMLEdBQXdCN3JFLEdBQzdCLE9BQUlBLGFBQWlCb3hDLEdBQ1ZweEMsRUFBTXF2QyxjQUFjM2lDLFFBSXBCOzs7Ozs7Ozs7Ozs7Ozs7O0dBb0JmLElBNEJRMi9ELEdBTUE3bkUsR0FsQ0o4bkUsR0FBaUMsV0FFakMsU0FBU0EsRUFBZ0I3c0QsR0FDckJuZSxLQUFLbWUsTUFBUUEsRUFLakIsT0FIQTZzRCxFQUFnQjNyRSxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQzFDLE9BQU9BLEdBQVNBLEVBQU1wTixRQUFVbmUsS0FBS21lLE9BRWxDNnNELEVBUnlCLEdBMkJoQ0MsS0FDSUYsR0FBTyxJQUNOaGhCLEdBQVVDLFVBQVVoc0QsTUFBUSxZQUNqQytzRSxHQUFLaGhCLEdBQVU4QixXQUFXN3RELE1BQVEsYUFDM0Irc0UsSUFFUEcsS0FDSWhvRSxHQUFNLElBQ05pcEQsR0FBU0MsVUFBVXB1RCxNQUFRLFlBQy9Ca0YsR0FBSWlwRCxHQUFTRSxtQkFBbUJydUQsTUFBUSxxQkFDeENrRixHQUFJaXBELEdBQVNLLGFBQWF4dUQsTUFBUSxlQUNsQ2tGLEdBQUlpcEQsR0FBU0ksc0JBQXNCdnVELE1BQVEsd0JBQzNDa0YsR0FBSWlwRCxHQUFTRyxNQUFNdHVELE1BQVEsUUFDM0JrRixHQUFJaXBELEdBQVNNLGVBQWV6dUQsTUFBUSxpQkFDcENrRixHQUFJaXBELEdBQVNPLEdBQUcxdUQsTUFBUSxLQUN4QmtGLEdBQUlpcEQsR0FBU1EsbUJBQW1CM3VELE1BQVEscUJBQ2pDa0YsSUFHUGlvRSxHQUFjLElBQUlDLE9BQU87Ozs7Ozs7Ozs7Ozs7Ozs7R0FDN0IsU0FBU0MsR0FBYzNzRSxFQUFPdXFCLEdBQzFCcGpCLEdBQVF1aUQsR0FBa0IxcEQsR0FBUXVxQixFQUFjLGVBRXBELFNBQVNxaUQsR0FBVzVzRSxHQUVoQixNQUFxQixpQkFBVkEsRUFDQUEsRUFFZSxpQkFBVkEsRUFDTGtvQixPQUFPbG9CLEdBR1BtbUIsRUFBSyxlQUFpQm5tQixHQVNyQyxJQUFJNnNFLEdBQXFDLFdBQ3JDLFNBQVNBLEVBQW9CNS9DLEVBQVlyWCxHQUNyQ3RVLEtBQUsyckIsV0FBYUEsRUFDbEIzckIsS0FBS3NVLFFBQVVBLEVBb2xDbkIsT0FsbENBaTNELEVBQW9CbHNFLFVBQVUybEIsZ0JBQWtCLFdBQzVDLE9BQUlobEIsS0FBS3NVLFFBQVFrM0QsY0FDTixHQUdBLElBQUkvZ0QsV0FBVyxJQUc5QjhnRCxFQUFvQmxzRSxVQUFVb3NFLDBCQUE0QixTQUFVQyxHQUdoRSxPQUFPQSxHQUVYSCxFQUFvQmxzRSxVQUFVc3NFLGNBQWdCLFNBQVV4RSxHQUNwRCxJQUFJLzhELE9BQXVCYixJQUFoQjQ5RCxFQUFPLzhELEtBQ1o2YSxFQUFLRyxRQUNMeTdDLEdBQW1Cc0csRUFBTy84RCxNQUNoQyxPQUFPLElBQUk4YixFQUFlOWIsRUFBTSs4RCxFQUFPcGhFLFNBQVcsS0FVdER3bEUsRUFBb0Jsc0UsVUFBVXVzRSxhQUFlLFNBQVV0MEQsR0FDbkQsT0FBSXRYLEtBQUtzVSxRQUFRazNELGVBQWlCcGpCLEdBQWtCOXdDLEdBQ3pDQSxFQU1BLENBQUU1WSxNQUFPNFksSUFVeEJpMEQsRUFBb0Jsc0UsVUFBVXdzRSxlQUFpQixTQUFVdjBELEdBQ3JELElBQUloVixFQVdKLE9BQU84bEQsR0FQSDlsRCxFQUhlLGlCQUFSZ1YsRUFHRUEsRUFBSTVZLE1BS0o0WSxHQUVzQixLQUFPaFYsR0FTOUNpcEUsRUFBb0Jsc0UsVUFBVTgwQixZQUFjLFNBQVVOLEdBQ2xELE9BQUk3ekIsS0FBS3NVLFFBQVFrM0QsY0FJRyxJQUFJbmlFLEtBQXlCLElBQXBCd3FCLEVBQVVULFNBQWdCOVksY0FFbkJoUCxRQUFRLFFBQVMsSUFBSUEsUUFBUSxJQUFLLElBR3pDLEtBRFYsWUFBY3VvQixFQUFVUixhQUFham9CLE9BQU8sR0FDbEIsSUFHbEMsQ0FDSGdvQixRQUFTLEdBQUtTLEVBQVVULFFBQ3hCMDRDLE1BQU9qNEMsRUFBVVIsY0FLN0JrNEMsRUFBb0Jsc0UsVUFBVTAwQixjQUFnQixTQUFVUCxHQUlwRCxHQUFvQixpQkFBVEEsRUFJUCxPQUFPeHpCLEtBQUsrckUsa0JBQWtCdjRDLEdBRzlCM3RCLElBQVMydEIsRUFBTSxtREFJZixJQUFJSixFQUFVazRDLEdBQVc5M0MsRUFBS0osU0FBVyxLQUNyQzA0QyxFQUFRdDRDLEVBQUtzNEMsT0FBUyxFQUMxQixPQUFPLElBQUkzNEMsR0FBVUMsRUFBUzA0QyxJQUd0Q1AsRUFBb0Jsc0UsVUFBVTBzRSxrQkFBb0IsU0FBVUMsR0FJeEQsSUFBSUYsRUFBUSxFQUNSRyxFQUFXZCxHQUFZN2hELEtBQUswaUQsR0FFaEMsR0FEQW5tRSxJQUFTb21FLEVBQVUsc0JBQXdCRCxHQUN2Q0MsRUFBUyxHQUFJLENBRWIsSUFBSUMsRUFBVUQsRUFBUyxHQUN2QkMsR0FBV0EsRUFBVSxhQUFhQyxPQUFPLEVBQUcsR0FDNUNMLEVBQVFsbEQsT0FBT3NsRCxHQUduQixJQUFJMTRDLEVBQU8sSUFBSW5xQixLQUFLMmlFLEdBQ2hCNTRDLEVBQVV4aUIsS0FBS0MsTUFBTTJpQixFQUFLbHFCLFVBQVksS0FDMUMsT0FBTyxJQUFJNnBCLEdBQVVDLEVBQVMwNEMsSUFTbENQLEVBQW9CbHNFLFVBQVUrc0UsUUFBVSxTQUFVbGtFLEdBQzlDLE9BQUlsSSxLQUFLc1UsUUFBUWszRCxjQUNOdGpFLEVBQU1rakIsV0FJTnByQixLQUFLeXJFLDBCQUEwQnZqRSxFQUFNbWpCLGlCQVFwRGtnRCxFQUFvQmxzRSxVQUFVZ3RFLFNBQVcsU0FBVUMsR0FDL0MsTUFBb0IsaUJBQVRBLEdBQ1B6bUUsRUFBTzdGLEtBQUtzVSxRQUFRazNELGNBQWUsMkVBQzVCM2dELEdBQUtHLGlCQUFpQnNoRCxLQUc3QnptRSxHQUFRN0YsS0FBS3NVLFFBQVFrM0QsY0FBZSwyRUFDN0IzZ0QsR0FBS0ksZUFBZXFoRCxLQUduQ2YsRUFBb0Jsc0UsVUFBVSsyQyxVQUFZLFNBQVU5L0IsR0FDaEQsT0FBT3RXLEtBQUttMEIsWUFBWTdkLEVBQVE2ZCxnQkFFcENvM0MsRUFBb0Jsc0UsVUFBVTgyQyxZQUFjLFNBQVU3L0IsR0FFbEQsT0FEQXpRLElBQVN5USxFQUFTLGdEQUNYc2QsR0FBZ0JHLGNBQWMvekIsS0FBSyt6QixjQUFjemQsS0FFNURpMUQsRUFBb0Jsc0UsVUFBVWt0RSxlQUFpQixTQUFVNWdELEVBQVk4QyxHQUNqRSxPQUFPenVCLEtBQUt3c0UseUJBQXlCN2dELEdBQ2hDMEIsTUFBTSxhQUNOQSxNQUFNb0IsR0FDTkYsbUJBRVRnOUMsRUFBb0Jsc0UsVUFBVW90RSxpQkFBbUIsU0FBVXp1RSxHQUN2RCxJQUFJMHVFLEVBQVdwK0MsR0FBYUUsV0FBV3h3QixHQUV2QyxPQURBNkgsRUFBTzdGLEtBQUsyc0Usb0JBQW9CRCxHQUFXLG9DQUFzQ0EsRUFBU2xoRSxZQUNuRmtoRSxHQUVYbkIsRUFBb0Jsc0UsVUFBVXEvRCxPQUFTLFNBQVUxL0QsR0FDN0MsT0FBT2dCLEtBQUt1c0UsZUFBZXZzRSxLQUFLMnJCLFdBQVkzc0IsRUFBSXl2QixPQUVwRDg4QyxFQUFvQmxzRSxVQUFVdXRFLFNBQVcsU0FBVTV1RSxHQUMvQyxJQUFJMHVFLEVBQVcxc0UsS0FBS3lzRSxpQkFBaUJ6dUUsR0FVckMsT0FUQTZILEVBQU82bUUsRUFBU3B1RSxJQUFJLEtBQU8wQixLQUFLMnJCLFdBQVdPLFVBQVcsb0RBQ2xEd2dELEVBQVNwdUUsSUFBSSxHQUNiLE9BQ0EwQixLQUFLMnJCLFdBQVdPLFdBQ3BCcm1CLEdBQVM2bUUsRUFBU3B1RSxJQUFJLEtBQU8wQixLQUFLMnJCLFdBQVdRLFVBQ3pDdWdELEVBQVNwdUUsSUFBSSxLQUFPMEIsS0FBSzJyQixXQUFXUSxTQUFVLHFEQUM5Q3VnRCxFQUFTcHVFLElBQUksR0FDYixPQUNBMEIsS0FBSzJyQixXQUFXUSxVQUNiLElBQUlpRCxHQUFZcHZCLEtBQUs2c0UsaUNBQWlDSCxLQUVqRW5CLEVBQW9CbHNFLFVBQVV5dEUsWUFBYyxTQUFVcitDLEdBQ2xELE9BQU96dUIsS0FBS3VzRSxlQUFldnNFLEtBQUsyckIsV0FBWThDLElBRWhEODhDLEVBQW9CbHNFLFVBQVUwdEUsY0FBZ0IsU0FBVS91RSxHQUNwRCxJQUFJZ3ZFLEVBQWVodEUsS0FBS3lzRSxpQkFBaUJ6dUUsR0FLekMsT0FBNEIsSUFBeEJndkUsRUFBYTNzRSxPQUNOaXVCLEdBQWFJLFdBRWpCMXVCLEtBQUs2c0UsaUNBQWlDRyxJQUVqRDd1RSxPQUFPQyxlQUFlbXRFLEVBQW9CbHNFLFVBQVcsb0JBQXFCLENBQ3RFZixJQUFLLFdBT0QsT0FOVyxJQUFJZ3dCLEdBQWEsQ0FDeEIsV0FDQXR1QixLQUFLMnJCLFdBQVdPLFVBQ2hCLFlBQ0Fsc0IsS0FBSzJyQixXQUFXUSxXQUVSb0MsbUJBRWhCbHdCLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJnMEQsRUFBb0Jsc0UsVUFBVW10RSx5QkFBMkIsU0FBVTdnRCxHQUMvRCxPQUFPLElBQUkyQyxHQUFhLENBQ3BCLFdBQ0EzQyxFQUFXTyxVQUNYLFlBQ0FQLEVBQVdRLFlBR25Cby9DLEVBQW9CbHNFLFVBQVV3dEUsaUNBQW1DLFNBQVVHLEdBRXZFLE9BREFubkUsRUFBT21uRSxFQUFhM3NFLE9BQVMsR0FBNkIsY0FBeEIyc0UsRUFBYTF1RSxJQUFJLEdBQW9CLG9DQUFzQzB1RSxFQUFheGhFLFlBQ25Id2hFLEVBQWF0L0MsU0FBUyxJQUVqQzY5QyxFQUFvQmxzRSxVQUFVc3RFLG9CQUFzQixTQUFVbCtDLEdBRTFELE9BQVFBLEVBQUtwdUIsUUFBVSxHQUNILGFBQWhCb3VCLEVBQUtud0IsSUFBSSxJQUNPLGNBQWhCbXdCLEVBQUtud0IsSUFBSSxJQUVqQml0RSxFQUFvQmxzRSxVQUFVNHRFLFFBQVUsU0FBVTMxRCxHQUM5QyxHQUFJQSxhQUFldzJCLEdBQ2YsTUFBTyxDQUFFby9CLFVBQVcsY0FFbkIsR0FBSTUxRCxhQUFlMjJCLEdBQ3BCLE1BQU8sQ0FBRWsvQixhQUFjNzFELEVBQUk1WSxTQUUxQixHQUFJNFksYUFBZWkzQixHQUNwQixNQUFPLENBQUU2K0IsYUFBYyxHQUFLOTFELEVBQUk1WSxTQUUvQixHQUFJNFksYUFBZWszQixHQUFhLENBQ2pDLElBQUk2K0IsRUFBYy8xRCxFQUFJNVksUUFDdEIsR0FBSXNCLEtBQUtzVSxRQUFRazNELGNBQWUsQ0FJNUIsR0FBSTNrRCxNQUFNd21ELEdBQ04sTUFBTyxDQUFFQSxZQUFhLE9BRXJCLEdBQUlBLElBQWdCMStCLElBQ3JCLE1BQU8sQ0FBRTArQixZQUFhLFlBRXJCLEdBQUlBLEtBQWlCMStCLElBQ3RCLE1BQU8sQ0FBRTArQixZQUFhLGFBRzlCLE1BQU8sQ0FBRUEsWUFBYS8xRCxFQUFJNVksU0FFekIsT0FBSTRZLGFBQWVzM0IsR0FDYixDQUFFMCtCLFlBQWFoMkQsRUFBSTVZLFNBRXJCNFksYUFBZTAwQixHQUNiLENBQUU2RSxTQUFVN3dDLEtBQUt1dEUsV0FBV2oyRCxJQUU5QkEsYUFBZXc0QixHQUNiLENBQUV1ZCxXQUFZcnRELEtBQUt3dEUsYUFBYWwyRCxJQUVsQ0EsYUFBZXUzQixHQUNiLENBQ0g0K0IsZUFBZ0J6dEUsS0FBS20wQixZQUFZN2MsRUFBSXkyQixnQkFHcEN6MkIsYUFBZTIzQixHQUNiLENBQ0h5K0IsY0FBZSxDQUNYM0QsU0FBVXp5RCxFQUFJNVksUUFBUXFyRSxTQUN0QkMsVUFBVzF5RCxFQUFJNVksUUFBUXNyRSxZQUkxQjF5RCxhQUFleTNCLEdBQ2IsQ0FDSDQrQixXQUFZM3RFLEtBQUtvc0UsUUFBUTkwRCxFQUFJNVksVUFHNUI0WSxhQUFlMDNCLEdBQ2IsQ0FDSDQrQixlQUFnQjV0RSxLQUFLdXNFLGVBQWVqMUQsRUFBSXFVLFdBQVlyVSxFQUFJdFksSUFBSXl2QixPQUl6RDVKLEVBQUssc0JBQXdCblosS0FBS3NHLFVBQVVzRixLQUczRGkwRCxFQUFvQmxzRSxVQUFVd3VFLFVBQVksU0FBVTEvRCxHQUNoRCxJQUFJekUsRUFBUTFKLEtBQ1osR0FBSSxjQUFlbU8sRUFDZixPQUFPMi9CLEdBQVVFLFNBRWhCLEdBQUksaUJBQWtCNy9CLEVBQ3ZCLE9BQU84L0IsR0FBYUMsR0FBRy8vQixFQUFJZy9ELGNBRTFCLEdBQUksaUJBQWtCaC9ELEVBQ3ZCLE9BQU8sSUFBSW9nQyxHQUFhKzhCLEdBQVduOUQsRUFBSWkvRCxlQUV0QyxHQUFJLGdCQUFpQmovRCxFQUFLLENBQzNCLEdBQUluTyxLQUFLc1UsUUFBUWszRCxjQUFlLENBRTVCLEdBQXdCLFFBQXBCcjlELEVBQUlrL0QsWUFDSixPQUFPNytCLEdBQVlDLElBRWxCLEdBQXdCLGFBQXBCdGdDLEVBQUlrL0QsWUFDVCxPQUFPNytCLEdBQVk5TSxrQkFFbEIsR0FBd0IsY0FBcEJ2ekIsRUFBSWsvRCxZQUNULE9BQU83K0IsR0FBWS9NLGtCQUczQixPQUFPLElBQUkrTSxHQUFZcmdDLEVBQUlrL0QsYUFFMUIsR0FBSSxnQkFBaUJsL0QsRUFDdEIsT0FBTyxJQUFJeWdDLEdBQVl6Z0MsRUFBSW0vRCxhQUUxQixHQUFJLGFBQWNuL0QsRUFDbkIsT0FBT25PLEtBQUs4dEUsV0FBVzMvRCxFQUFJMGlDLFNBQVNqSCxRQUFVLElBRTdDLEdBQUksZUFBZ0J6N0IsRUFBSyxDQUUxQms5RCxHQUFjbDlELEVBQUlrL0MsV0FBWSxjQUM5QixJQUFJaDRDLEVBQVNsSCxFQUFJay9DLFdBQVdoNEMsUUFBVSxHQUN0QyxPQUFPLElBQUl5NkIsR0FBV3o2QixFQUFPcEUsS0FBSSxTQUFVNU4sR0FBSyxPQUFPcUcsRUFBTW1rRSxVQUFVeHFFLE9BRXRFLEdBQUksbUJBQW9COEssRUFFekIsT0FEQWs5RCxHQUFjbDlELEVBQUlzL0QsZUFBZ0Isa0JBQzNCLElBQUk1K0IsR0FBZTd1QyxLQUFLK3pCLGNBQWM1bEIsRUFBSXMvRCxpQkFFaEQsR0FBSSxrQkFBbUJ0L0QsRUFBSyxDQUM3Qms5RCxHQUFjbDlELEVBQUl1L0QsY0FBZSxpQkFDakMsSUFBSTNELEVBQVc1N0QsRUFBSXUvRCxjQUFjM0QsVUFBWSxFQUN6Q0MsRUFBWTc3RCxFQUFJdS9ELGNBQWMxRCxXQUFhLEVBQy9DLE9BQU8sSUFBSS82QixHQUFjLElBQUk2NkIsR0FBU0MsRUFBVUMsSUFFL0MsR0FBSSxlQUFnQjc3RCxFQUFLLENBQzFCazlELEdBQWNsOUQsRUFBSXcvRCxXQUFZLGNBQzlCLElBQUlyQixFQUFPdHNFLEtBQUtxc0UsU0FBU2wrRCxFQUFJdy9ELFlBQzdCLE9BQU8sSUFBSTUrQixHQUFVdTlCLEdBRXBCLEdBQUksbUJBQW9CbitELEVBQUssQ0FDOUJrOUQsR0FBY2w5RCxFQUFJeS9ELGVBQWdCLGtCQUNsQyxJQUFJWixFQUFlaHRFLEtBQUt5c0UsaUJBQWlCdCtELEVBQUl5L0QsZ0JBQ3pDRyxFQUFPLElBQUk5aEQsR0FBVytnRCxFQUFhMXVFLElBQUksR0FBSTB1RSxFQUFhMXVFLElBQUksSUFDNURVLEVBQU0sSUFBSW93QixHQUFZcHZCLEtBQUs2c0UsaUNBQWlDRyxJQUNoRSxPQUFPLElBQUloK0IsR0FBUysrQixFQUFNL3VFLEdBRzFCLE9BQU82bEIsRUFBSyx1QkFBeUJuWixLQUFLc0csVUFBVTdELEtBSTVEbzlELEVBQW9CbHNFLFVBQVUydUUsbUJBQXFCLFNBQVVodkUsRUFBSzRxQyxHQUM5RCxNQUFPLENBQ0g1ckMsS0FBTWdDLEtBQUswK0QsT0FBTzEvRCxHQUNsQjRxQyxPQUFRNXBDLEtBQUtpdUUsU0FBU3JrQyxLQUc5QjJoQyxFQUFvQmxzRSxVQUFVZzhDLFdBQWEsU0FBVWo4QixHQUVqRCxPQURBdlosR0FBUXVaLEVBQVNvc0Isa0JBQW1CLDZDQUM3QixDQUNIeHRDLEtBQU1nQyxLQUFLMCtELE9BQU90L0MsRUFBU3BnQixLQUMzQjRxQyxPQUFRNXBDLEtBQUtpdUUsU0FBUzd1RCxFQUFTMVUsUUFDL0JpZ0MsV0FBWTNxQyxLQUFLbTBCLFlBQVkvVSxFQUFTOUksUUFBUTZkLGlCQUd0RG8zQyxFQUFvQmxzRSxVQUFVNjdDLGFBQWUsU0FBVTk3QixFQUFVbXNCLEdBQzdELElBQUk3aEMsRUFBUTFKLEtBQ1JoQixFQUFNZ0IsS0FBSzRzRSxTQUFTeHRELEVBQVNwaEIsTUFDN0JzWSxFQUFVdFcsS0FBS20yQyxZQUFZLzJCLEVBQVN1ckIsWUFDeEMsT0FBTyxJQUFJRyxHQUFTOXJDLEVBQUtzWCxFQUFTLENBQUVpMUIsd0JBQXlCQSxRQUF5QmhpQyxFQUFXNlYsR0FBVSxTQUFVL2IsR0FBSyxPQUFPcUcsRUFBTW1rRSxVQUFVeHFFLE9BRXJKa29FLEVBQW9CbHNFLFVBQVU0dUUsU0FBVyxTQUFVcmtDLEdBQy9DLElBQUlsZ0MsRUFBUTFKLEtBQ1JzQyxFQUFTLEdBSWIsT0FIQXNuQyxFQUFPcDRCLFNBQVEsU0FBVXhTLEVBQUtOLEdBQzFCNEQsRUFBT3RELEdBQU8wSyxFQUFNdWpFLFFBQVF2dUUsTUFFekI0RCxHQUVYaXBFLEVBQW9CbHNFLFVBQVV5dUUsV0FBYSxTQUFVM3VFLEdBQ2pELElBQUl1SyxFQUFRMUosS0FFUmlSLEVBQU05UixFQUNObUQsRUFBUzBwQyxHQUFZcGMsTUFJekIsT0FIQXBlLEVBQVFQLEdBQUssU0FBVWpTLEVBQUtOLEdBQ3hCNEQsRUFBU0EsRUFBTzRSLElBQUksSUFBSTBhLEdBQVUsQ0FBQzV2QixJQUFPMEssRUFBTW1rRSxVQUFVbnZFLE9BRXZENEQsR0FFWGlwRSxFQUFvQmxzRSxVQUFVa3VFLFdBQWEsU0FBVXQ4RCxHQUNqRCxNQUFPLENBQ0gyNEIsT0FBUTVwQyxLQUFLaXVFLFNBQVNoOUQsS0FHOUJzNkQsRUFBb0Jsc0UsVUFBVW11RSxhQUFlLFNBQVV0aUQsR0FDbkQsSUFBSXhoQixFQUFRMUosS0FDUnNDLEVBQVMsR0FJYixPQUhBNG9CLEVBQU0xWixTQUFRLFNBQVU5UyxHQUNwQjRELEVBQU9tQixLQUFLaUcsRUFBTXVqRSxRQUFRdnVFLE9BRXZCLENBQUUyVyxPQUFRL1MsSUFFckJpcEUsRUFBb0Jsc0UsVUFBVTZ1RSxVQUFZLFNBQVU1aEMsR0FDaEQsSUFBSTVpQyxFQUFRMUosS0FDWjZGLElBQVN5bUMsRUFBSXZELE1BQU8sa0VBQ3BCc2lDLEdBQWMvK0IsRUFBSXZELE1BQU0vcUMsS0FBTSxrQkFDOUJxdEUsR0FBYy8rQixFQUFJdkQsTUFBTTRCLFdBQVksd0JBQ3BDLElBQUkzckMsRUFBTWdCLEtBQUs0c0UsU0FBU3RnQyxFQUFJdkQsTUFBTS9xQyxNQUM5QnNZLEVBQVV0VyxLQUFLbTJDLFlBQVk3SixFQUFJdkQsTUFBTTRCLFlBQ3pDLE9BQU8sSUFBSUcsR0FBUzlyQyxFQUFLc1gsRUFBUyxRQUFJL00sRUFBVytpQyxFQUFJdkQsT0FBTyxTQUFVMWxDLEdBQ2xFLE9BQU9xRyxFQUFNbWtFLFVBQVV4cUUsT0FHL0Jrb0UsRUFBb0Jsc0UsVUFBVTh1RSxZQUFjLFNBQVU3ckUsR0FDbER1RCxJQUFTdkQsRUFBTzhyRSxRQUFTLGtFQUN6QnZvRSxJQUFTdkQsRUFBT3d2QyxTQUFVLGdFQUMxQixJQUFJOXlDLEVBQU1nQixLQUFLNHNFLFNBQVN0cUUsRUFBTzhyRSxTQUMzQjkzRCxFQUFVdFcsS0FBS20yQyxZQUFZN3pDLEVBQU93dkMsVUFDdEMsT0FBTyxJQUFJNUUsR0FBV2x1QyxFQUFLc1gsSUFFL0JpMUQsRUFBb0Jsc0UsVUFBVXUvRCxrQkFBb0IsU0FBVXQ4RCxHQUN4RCxNQUFJLFVBQVdBLEVBQ0p0QyxLQUFLa3VFLFVBQVU1ckUsR0FFakIsWUFBYUEsRUFDWHRDLEtBQUttdUUsWUFBWTdyRSxHQUVyQnVpQixFQUFLLCtCQUFpQ25aLEtBQUtzRyxVQUFVMVAsS0FFaEVpcEUsRUFBb0Jsc0UsVUFBVWd2RSx5QkFBMkIsU0FBVWpVLEdBQy9ELE9BQVFBLEdBQ0osS0FBS3NILEdBQXVCSyxNQUN4QixNQUFPLE1BQ1gsS0FBS0wsR0FBdUJrRSxRQUN4QixNQUFPLFVBQ1gsS0FBS2xFLEdBQXVCK0QsU0FDeEIsTUFBTyxZQUNYLEtBQUsvRCxHQUF1Qk8sUUFDeEIsTUFBTyxTQUNYLEtBQUtQLEdBQXVCbUUsTUFDeEIsTUFBTyxRQUNYLFFBQ0ksT0FBT2hoRCxFQUFLLG1DQUFxQ3UxQyxLQUc3RG1SLEVBQW9CbHNFLFVBQVVpdkUsa0JBQW9CLFNBQVUzUixHQUN4RCxHQUFJQSxhQUF1QjBHLEdBQ3ZCLE1BQU8sQ0FDSDl0RCxPQUFRLENBQ0o0SSxNQUFPdytDLEVBQVkyRyxnQkFBZ0JubEQsTUFDbkM4WixTQUFVMGtDLEVBQVkxa0MsV0FJbEMsR0FBSTBrQyxhQUF1QnNHLEdBQXFCLENBQzVDLEdBQUl0RyxFQUFZeUcsa0JBQWtCdDRCLEdBQVUsQ0FDeEMsSUFBSXdCLEVBQU1xd0IsRUFBWXlHLE9BQ3RCLE1BQU8sQ0FDSG1MLGVBQWdCLENBQ1pudkQsU0FBVSxDQUNOcGhCLEtBQU1nQyxLQUFLMCtELE9BQU9weUIsRUFBSXR0QyxLQUN0QjRxQyxPQUFRNXBDLEtBQUtpdUUsU0FBUzNoQyxFQUFJNWhDLFFBQzFCaWdDLFdBQVkzcUMsS0FBS28yQyxVQUFVOUosRUFBSWgyQixVQUVuQ2t0RCxVQUFXN0csRUFBWXVHLGlCQUN2QkMsaUJBQWtCeEcsRUFBWXdHLG1CQUlyQyxHQUFJeEcsRUFBWXlHLGtCQUFrQmwyQixHQUFZLENBQzNDWixFQUFNcXdCLEVBQVl5RyxPQUN0QixNQUFPLENBQ0hvTCxlQUFnQixDQUNacHZELFNBQVVwZixLQUFLMCtELE9BQU9weUIsRUFBSXR0QyxLQUMxQjh5QyxTQUFVOXhDLEtBQUtvMkMsVUFBVTlKLEVBQUloMkIsU0FDN0I2c0QsaUJBQWtCeEcsRUFBWXdHLG1CQUlyQyxHQUEyQixPQUF2QnhHLEVBQVl5RyxPQUNqQixNQUFPLENBQ0hxTCxlQUFnQixDQUNacnZELFNBQVVwZixLQUFLMCtELE9BQU8vQixFQUFZMzlELEtBQ2xDbWtFLGlCQUFrQnhHLEVBQVl3RyxtQkFLOUMsR0FBSXhHLGFBQXVCNEcsR0FBbUIsQ0FDMUMsSUFBSUUsT0FBUWw2RCxFQU9aLE9BTklvekQsRUFBWThHLFFBQ1pBLEVBQVEsQ0FDSnI1RCxLQUFNMDJELEdBQW1CbkUsRUFBWThHLE1BQU1yNUQsTUFDM0NyRSxRQUFTNDJELEVBQVk4RyxNQUFNMTlELFVBRzVCLENBQ0h1L0QsYUFBYyxDQUNWb0osaUJBQWtCMXVFLEtBQUtxdUUseUJBQXlCMVIsRUFBWXZDLE9BQzVEb0osVUFBVzdHLEVBQVk2RyxVQUN2QmxxQixZQUFhdDVDLEtBQUt5ckUsMEJBQTBCOU8sRUFBWXJqQixhQUN4RG1xQixNQUFPQSxJQUluQixPQUFPNStDLEVBQUssOEJBQWdDblosS0FBS3NHLFVBQVUycUQsS0FFL0Q0TyxFQUFvQmxzRSxVQUFVdTlELGdCQUFrQixTQUFVL0ksR0FDdEQsSUFDSThJLEVBREFqekQsRUFBUTFKLEtBRVosR0FBSSxpQkFBa0I2ekQsRUFBUSxDQUMxQndYLEdBQWN4WCxFQUFPeVIsYUFBYyxnQkFHbkMsSUFBSWxMLEVBQVFwNkQsS0FBSzJ1RSwyQkFBMkI5YSxFQUFPeVIsYUFBYW9KLGtCQUFvQixhQUNoRmxMLEVBQVkzUCxFQUFPeVIsYUFBYTlCLFdBQWEsR0FDN0NscUIsRUFBY3VhLEVBQU95UixhQUFhaHNCLGFBQWV0NUMsS0FBS2dsQixrQkFDdEQ0cEQsRUFBYS9hLEVBQU95UixhQUFhN0IsTUFDakNBLEVBQVFtTCxHQUFjNXVFLEtBQUsyckUsY0FBY2lELEdBQzdDalMsRUFBYyxJQUFJNEcsR0FBa0JuSixFQUFPb0osRUFBV2xxQixFQUFhbXFCLEdBQVMsV0FFM0UsR0FBSSxtQkFBb0I1UCxFQUFRLENBQ2pDd1gsR0FBY3hYLEVBQU8wYSxlQUFnQixrQkFDckMsSUFBSU0sRUFBZWhiLEVBQU8wYSxlQUMxQmxELEdBQWN3RCxFQUFhenZELFNBQVUsdUJBQ3JDaXNELEdBQWN3RCxFQUFhenZELFNBQVNwaEIsS0FBTSxnQ0FDMUNxdEUsR0FBY3dELEVBQWF6dkQsU0FBU3VyQixXQUFZLHNDQUNoRCxJQUFJM3JDLEVBQU1nQixLQUFLNHNFLFNBQVNpQyxFQUFhenZELFNBQVNwaEIsTUFDMUNzWSxFQUFVdFcsS0FBS20yQyxZQUFZMDRCLEVBQWF6dkQsU0FBU3VyQixZQUNqRDJCLEVBQU0sSUFBSXhCLEdBQVM5ckMsRUFBS3NYLEVBQVMsUUFBSS9NLEVBQVdzbEUsRUFBYXp2RCxVQUFVLFNBQVUvYixHQUFLLE9BQU9xRyxFQUFNbWtFLFVBQVV4cUUsTUFDN0c2L0QsRUFBbUIyTCxFQUFhckwsV0FBYSxHQUM3Q0wsRUFBbUIwTCxFQUFhMUwsa0JBQW9CLEdBQ3hEeEcsRUFBYyxJQUFJc0csR0FBb0JDLEVBQWtCQyxFQUFrQjcyQixFQUFJdHRDLElBQUtzdEMsUUFFbEYsR0FBSSxtQkFBb0J1bkIsRUFBUSxDQUNqQ3dYLEdBQWN4WCxFQUFPMmEsZUFBZ0Isa0JBQ3JDLElBQUlNLEVBQVlqYixFQUFPMmEsZUFDdkJuRCxHQUFjeUQsRUFBVTF2RCxTQUFVLDJCQUM5QnBnQixFQUFNZ0IsS0FBSzRzRSxTQUFTa0MsRUFBVTF2RCxVQUM5QjlJLEVBQVV3NEQsRUFBVWg5QixTQUNsQjl4QyxLQUFLbTJDLFlBQVkyNEIsRUFBVWg5QixVQUMzQmxlLEdBQWdCSSxnQkFDbEJzWSxFQUFNLElBQUlZLEdBQVdsdUMsRUFBS3NYLEdBQzFCNnNELEVBQW1CMkwsRUFBVTNMLGtCQUFvQixHQUNyRHhHLEVBQWMsSUFBSXNHLEdBQW9CLEdBQUlFLEVBQWtCNzJCLEVBQUl0dEMsSUFBS3N0QyxRQUVwRSxHQUFJLG1CQUFvQnVuQixFQUFRLENBQ2pDd1gsR0FBY3hYLEVBQU80YSxlQUFnQixrQkFDckMsSUFBSU0sRUFBWWxiLEVBQU80YSxlQUN2QnBELEdBQWMwRCxFQUFVM3ZELFNBQVUsa0JBQzlCcGdCLEVBQU1nQixLQUFLNHNFLFNBQVNtQyxFQUFVM3ZELFVBQzlCK2pELEVBQW1CNEwsRUFBVTVMLGtCQUFvQixHQUNyRHhHLEVBQWMsSUFBSXNHLEdBQW9CLEdBQUlFLEVBQWtCbmtFLEVBQUssVUFFaEUsTUFBSSxXQUFZNjBELEdBV2pCLE9BQU9odkMsRUFBSyx1QkFBeUJuWixLQUFLc0csVUFBVTZoRCxJQVRwRHdYLEdBQWN4WCxFQUFPdCtDLE9BQVEsVUFDN0IsSUFBSUEsRUFBU3MrQyxFQUFPdCtDLE9BQ3BCODFELEdBQWM5MUQsRUFBTzBpQixTQUFVLG1CQUMvQixJQUFJOVosRUFBUTVJLEVBQU80SSxPQUFTLEVBQ3hCbWxELEVBQWtCLElBQUkwSCxHQUFnQjdzRCxHQUN0QzhaLEVBQVcxaUIsRUFBTzBpQixTQUN0QjBrQyxFQUFjLElBQUkwRyxHQUFzQnByQyxFQUFVcXJDLEdBS3RELE9BQU8zRyxHQUVYNE8sRUFBb0Jsc0UsVUFBVXN2RSwyQkFBNkIsU0FBVXZVLEdBQ2pFLE1BQWMsY0FBVkEsRUFDT3NILEdBQXVCK0QsU0FFZixRQUFWckwsRUFDRXNILEdBQXVCSyxNQUVmLFdBQVYzSCxFQUNFc0gsR0FBdUJPLFFBRWYsWUFBVjdILEVBQ0VzSCxHQUF1QmtFLFFBRWYsVUFBVnhMLEVBQ0VzSCxHQUF1Qm1FLE1BR3ZCaGhELEVBQUssc0NBQXdDdTFDLElBRzVEbVIsRUFBb0Jsc0UsVUFBVXk5RCwwQkFBNEIsU0FBVWpKLEdBSWhFLEtBQU0saUJBQWtCQSxHQUNwQixPQUFPamdDLEdBQWdCSyxJQUUzQixJQUFJcXhDLEVBQWV6UixFQUFPeVIsYUFDMUIsT0FBSUEsRUFBYTlCLFdBQWE4QixFQUFhOUIsVUFBVW5qRSxPQUMxQ3V6QixHQUFnQkssSUFFdEJxeEMsRUFBYXh6QixTQUdYOXhDLEtBQUttMkMsWUFBWW12QixFQUFheHpCLFVBRjFCbGUsR0FBZ0JLLEtBSS9CczNDLEVBQW9CbHNFLFVBQVV1OEMsV0FBYSxTQUFVcGlCLEdBQ2pELElBQ0lsM0IsRUFEQW9ILEVBQVExSixLQUVaLEdBQUl3NUIsYUFBb0I0UixHQUNwQjlvQyxFQUFTLENBQ0wwSyxPQUFRaE4sS0FBS2d1RSxtQkFBbUJ4MEMsRUFBU3g2QixJQUFLdzZCLEVBQVM5NkIsYUFHMUQsR0FBSTg2QixhQUFvQndULEdBQ3pCMXFDLEVBQVMsQ0FBRTRTLE9BQVFsVixLQUFLMCtELE9BQU9sbEMsRUFBU3g2QixXQUV2QyxHQUFJdzZCLGFBQW9Ca1MsR0FDekJwcEMsRUFBUyxDQUNMMEssT0FBUWhOLEtBQUtndUUsbUJBQW1CeDBDLEVBQVN4NkIsSUFBS3c2QixFQUFTOXVCLE1BQ3ZEc2tFLFdBQVlodkUsS0FBS2l2RSxlQUFlejFDLEVBQVNtUyxnQkFHNUMsTUFBSW5TLGFBQW9CMlMsSUFXekIsT0FBT3RuQixFQUFLLHlCQUEyQjJVLEVBQVMxbUIsTUFWaER4USxFQUFTLENBQ0wrbkMsVUFBVyxDQUNQanJCLFNBQVVwZixLQUFLMCtELE9BQU9sbEMsRUFBU3g2QixLQUMvQm90QyxnQkFBaUI1UyxFQUFTNFMsZ0JBQWdCbjdCLEtBQUksU0FBVW81QixHQUNwRCxPQUFPM2dDLEVBQU13bEUsaUJBQWlCN2tDLFFBVzlDLE9BSEs3USxFQUFTNlIsYUFBYU4sU0FDdkJ6b0MsRUFBTzZzRSxnQkFBa0JudkUsS0FBS292RSxlQUFlNTFDLEVBQVM2UixlQUVuRC9vQyxHQUVYaXBFLEVBQW9CbHNFLFVBQVV5OEMsYUFBZSxTQUFVekwsR0FDbkQsSUFBSTNtQyxFQUFRMUosS0FDUnFyQyxFQUFlZ0YsRUFBTTgrQixnQkFDbkJudkUsS0FBS3F2RSxpQkFBaUJoL0IsRUFBTTgrQixpQkFDNUJ6a0MsR0FBYU0sS0FDbkIsR0FBSXFGLEVBQU1yakMsT0FBUSxDQUNkcStELEdBQWNoN0IsRUFBTXJqQyxPQUFPaFAsS0FBTSxRQUNqQyxJQUFJZ0IsRUFBTWdCLEtBQUs0c0UsU0FBU3Y4QixFQUFNcmpDLE9BQU9oUCxNQUNqQ1UsRUFBUXNCLEtBQUs4dEUsV0FBV3o5QixFQUFNcmpDLE9BQU80OEIsUUFBVSxJQUNuRCxHQUFJeUcsRUFBTTIrQixXQUFZLENBQ2xCLElBQUlyakMsRUFBWTNyQyxLQUFLc3ZFLGlCQUFpQmovQixFQUFNMitCLFlBQzVDLE9BQU8sSUFBSXRqQyxHQUFjMXNDLEVBQUtOLEVBQU9pdEMsRUFBV04sR0FHaEQsT0FBTyxJQUFJRCxHQUFZcHNDLEVBQUtOLEVBQU8yc0MsR0FHdEMsR0FBSWdGLEVBQU1uN0IsT0FBUSxDQUNmbFcsRUFBTWdCLEtBQUs0c0UsU0FBU3Y4QixFQUFNbjdCLFFBQzlCLE9BQU8sSUFBSTgzQixHQUFlaHVDLEVBQUtxc0MsR0FFOUIsR0FBSWdGLEVBQU1oRyxVQUFXLENBQ2xCcnJDLEVBQU1nQixLQUFLNHNFLFNBQVN2OEIsRUFBTWhHLFVBQVVqckIsVUFBeEMsSUFDSWd0QixFQUFrQmlFLEVBQU1oRyxVQUFVK0IsZ0JBQWdCbjdCLEtBQUksU0FBVW81QixHQUNoRSxPQUFPM2dDLEVBQU02bEUsbUJBQW1CbGxDLE1BR3BDLE9BREF4a0MsR0FBK0IsSUFBeEJ3bEMsRUFBYVQsT0FBaUIseURBQzlCLElBQUl1QixHQUFrQm50QyxFQUFLb3RDLEdBR2xDLE9BQU92bkIsRUFBSywyQkFBNkJuWixLQUFLc0csVUFBVXErQixLQUdoRWs3QixFQUFvQmxzRSxVQUFVK3ZFLGVBQWlCLFNBQVUvakMsR0FFckQsT0FEQXhsQyxHQUFRd2xDLEVBQWFOLE9BQVEsOENBQ0d4aEMsSUFBNUI4aEMsRUFBYVYsV0FDTixDQUNIQSxXQUFZM3FDLEtBQUtvMkMsVUFBVS9LLEVBQWFWLGtCQUdmcGhDLElBQXhCOGhDLEVBQWFULE9BQ1gsQ0FBRUEsT0FBUVMsRUFBYVQsUUFHdkIvbEIsRUFBSyx5QkFHcEIwbUQsRUFBb0Jsc0UsVUFBVWd3RSxpQkFBbUIsU0FBVWhrQyxHQUN2RCxZQUFnQzloQyxJQUE1QjhoQyxFQUFhVixXQUNORCxHQUFhQyxXQUFXM3FDLEtBQUttMkMsWUFBWTlLLEVBQWFWLGtCQUVoQ3BoQyxJQUF4QjhoQyxFQUFhVCxPQUNYRixHQUFhRSxPQUFPUyxFQUFhVCxRQUdqQ0YsR0FBYU0sTUFHNUJ1Z0MsRUFBb0Jsc0UsVUFBVW13RSxnQkFBa0IsU0FBVW4vQixFQUFPeXRCLEdBQzdELElBQUlwMEQsRUFBUTFKLEtBRVJzVyxFQUFVKzVCLEVBQU0xRixXQUNkM3FDLEtBQUttMkMsWUFBWTlGLEVBQU0xRixZQUN2QjNxQyxLQUFLbTJDLFlBQVkybkIsR0FDbkJ4bkQsRUFBUWdVLFFBQVFzSixHQUFnQkssT0FNaEMzZCxFQUFVdFcsS0FBS20yQyxZQUFZMm5CLElBRS9CLElBQUl2ekIsRUFBbUIsS0FNdkIsT0FMSThGLEVBQU05RixrQkFBb0I4RixFQUFNOUYsaUJBQWlCbHFDLE9BQVMsSUFDMURrcUMsRUFBbUI4RixFQUFNOUYsaUJBQWlCdDVCLEtBQUksU0FBVTNPLEdBQ3BELE9BQU9vSCxFQUFNbWtFLFVBQVV2ckUsT0FHeEIsSUFBSWdvQyxHQUFlaDBCLEVBQVNpMEIsSUFFdkNnaEMsRUFBb0Jsc0UsVUFBVXUrRCxpQkFBbUIsU0FBVTZSLEVBQVEzUixHQUMvRCxJQUFJcDBELEVBQVExSixLQUNaLE9BQUl5dkUsR0FBVUEsRUFBT3B2RSxPQUFTLEdBQzFCd0YsT0FBc0IwRCxJQUFmdTBELEVBQTBCLGlEQUMxQjJSLEVBQU94K0QsS0FBSSxTQUFVby9CLEdBQVMsT0FBTzNtQyxFQUFNOGxFLGdCQUFnQm4vQixFQUFPeXRCLE9BR2xFLElBR2Z5TixFQUFvQmxzRSxVQUFVNnZFLGlCQUFtQixTQUFVdGlDLEdBQ3ZELElBQUlsakMsRUFBUTFKLEtBQ1JxcUMsRUFBWXVDLEVBQWV2QyxVQUMvQixHQUFJQSxhQUFxQjgvQixHQUNyQixNQUFPLENBQ0huZ0MsVUFBVzRDLEVBQWV4QyxNQUFNN2Isa0JBQ2hDbWhELGlCQUFrQixnQkFHckIsR0FBSXJsQyxhQUFxQmdnQyxHQUMxQixNQUFPLENBQ0hyZ0MsVUFBVzRDLEVBQWV4QyxNQUFNN2Isa0JBQ2hDb2hELHNCQUF1QixDQUNuQnQ2RCxPQUFRZzFCLEVBQVVpZ0MsU0FBU3I1RCxLQUFJLFNBQVU1TixHQUFLLE9BQU9xRyxFQUFNdWpFLFFBQVE1cEUsUUFJMUUsR0FBSWduQyxhQUFxQm9nQyxHQUMxQixNQUFPLENBQ0h6Z0MsVUFBVzRDLEVBQWV4QyxNQUFNN2Isa0JBQ2hDcWhELG1CQUFvQixDQUNoQnY2RCxPQUFRZzFCLEVBQVVpZ0MsU0FBU3I1RCxLQUFJLFNBQVU1TixHQUFLLE9BQU9xRyxFQUFNdWpFLFFBQVE1cEUsUUFJMUUsR0FBSWduQyxhQUFxQnVnQyxHQUMxQixNQUFPLENBQ0g1Z0MsVUFBVzRDLEVBQWV4QyxNQUFNN2Isa0JBQ2hDc2hELFVBQVc3dkUsS0FBS2l0RSxRQUFRNWlDLEVBQVV3Z0MsVUFJdEMsTUFBTWhtRCxFQUFLLHNCQUF3QituQixFQUFldkMsWUFHMURraEMsRUFBb0Jsc0UsVUFBVWt3RSxtQkFBcUIsU0FBVWwvQixHQUN6RCxJQUFJM21DLEVBQVExSixLQUNScXFDLEVBQVksS0FDaEIsR0FBSSxxQkFBc0JnRyxFQUN0QnhxQyxFQUFrQyxpQkFBM0J3cUMsRUFBTXEvQixpQkFBcUMseUNBQTJDaGtFLEtBQUtzRyxVQUFVcStCLElBQzVHaEcsRUFBWTgvQixHQUF5QmgyRCxjQUVwQyxHQUFJLDBCQUEyQms4QixFQUFPLENBQ3ZDLElBQUloN0IsRUFBU2c3QixFQUFNcy9CLHNCQUFzQnQ2RCxRQUFVLEdBQ25EZzFCLEVBQVksSUFBSWdnQyxHQUE2QmgxRCxFQUFPcEUsS0FBSSxTQUFVNU4sR0FBSyxPQUFPcUcsRUFBTW1rRSxVQUFVeHFFLFlBRTdGLEdBQUksdUJBQXdCZ3RDLEVBQU8sQ0FDaENoN0IsRUFBU2c3QixFQUFNdS9CLG1CQUFtQnY2RCxRQUFVLEdBQ2hEZzFCLEVBQVksSUFBSW9nQyxHQUE4QnAxRCxFQUFPcEUsS0FBSSxTQUFVNU4sR0FBSyxPQUFPcUcsRUFBTW1rRSxVQUFVeHFFLFlBRTlGLEdBQUksY0FBZWd0QyxFQUFPLENBQzNCLElBQUl3NkIsRUFBVTdxRSxLQUFLNnRFLFVBQVV4OUIsRUFBTXcvQixXQUNuQ2hxRSxFQUFPZ2xFLGFBQW1CeDhCLEdBQWEsZ0RBQ3ZDaEUsRUFBWSxJQUFJdWdDLEdBQW1DQyxRQUduRGhtRCxFQUFLLDRCQUE4Qm5aLEtBQUtzRyxVQUFVcStCLElBRXRELElBQUlyRyxFQUFZcGIsR0FBVUksaUJBQWlCcWhCLEVBQU1yRyxXQUNqRCxPQUFPLElBQUlHLEdBQWVILEVBQVdLLElBRXpDa2hDLEVBQW9CbHNFLFVBQVVzOUMsa0JBQW9CLFNBQVU3N0MsR0FDeEQsTUFBTyxDQUFFdTdDLFVBQVcsQ0FBQ3I4QyxLQUFLOHNFLFlBQVloc0UsRUFBTzJ0QixTQUVqRDg4QyxFQUFvQmxzRSxVQUFVaTlDLG9CQUFzQixTQUFVd3pCLEdBQzFELElBQUkzeEQsRUFBUTJ4RCxFQUFnQnp6QixVQUFVaDhDLE9BQ3RDd0YsRUFBaUIsSUFBVnNZLEVBQWEsb0RBQXNEQSxHQUMxRSxJQUFJbmdCLEVBQU84eEUsRUFBZ0J6ekIsVUFBVSxHQUNyQyxPQUFPeU0sR0FBTU8sT0FBT3JwRCxLQUFLK3NFLGNBQWMvdUUsSUFBTytzRCxZQUVsRHdnQixFQUFvQmxzRSxVQUFVdTlDLGNBQWdCLFNBQVU5N0MsR0FFcEQsSUFBSXdCLEVBQVMsQ0FBRXl0RSxnQkFBaUIsSUFDNUJ0aEQsRUFBTzN0QixFQUFPMnRCLEtBQ2EsT0FBM0IzdEIsRUFBTzBuRCxpQkFDUDNpRCxFQUFPNG9CLEVBQUtwdUIsT0FBUyxHQUFNLEVBQUcsc0VBQzlCaUMsRUFBTzBnQyxPQUFTaGpDLEtBQUs4c0UsWUFBWXIrQyxHQUNqQ25zQixFQUFPeXRFLGdCQUFnQjM2RCxLQUFPLENBQzFCLENBQ0ltYSxhQUFjenVCLEVBQU8wbkQsZ0JBQ3JCd25CLGdCQUFnQixNQUt4Qm5xRSxFQUFPNG9CLEVBQUtwdUIsT0FBUyxHQUFNLEVBQUcsb0RBQzlCaUMsRUFBTzBnQyxPQUFTaGpDLEtBQUs4c0UsWUFBWXIrQyxFQUFLYixXQUN0Q3RyQixFQUFPeXRFLGdCQUFnQjM2RCxLQUFPLENBQUMsQ0FBRW1hLGFBQWNkLEVBQUtYLGlCQUV4RCxJQUFJbWlELEVBQVFqd0UsS0FBS2t3RSxTQUFTcHZFLEVBQU80bkQsU0FDN0J1bkIsSUFDQTN0RSxFQUFPeXRFLGdCQUFnQkUsTUFBUUEsR0FFbkMsSUFBSXhuQixFQUFVem9ELEtBQUttd0UsUUFBUXJ2RSxFQUFPMm5ELFNBQzlCQSxJQUNBbm1ELEVBQU95dEUsZ0JBQWdCdG5CLFFBQVVBLEdBRXJDLElBQUlsN0IsRUFBUXZ0QixLQUFLNHJFLGFBQWE5cUUsRUFBT3lzQixPQVVyQyxPQVRjLE9BQVZBLElBQ0FqckIsRUFBT3l0RSxnQkFBZ0J4aUQsTUFBUUEsR0FFL0J6c0IsRUFBTzZuRCxVQUNQcm1ELEVBQU95dEUsZ0JBQWdCcG5CLFFBQVUzb0QsS0FBS293RSxTQUFTdHZFLEVBQU82bkQsVUFFdEQ3bkQsRUFBTzhuRCxRQUNQdG1ELEVBQU95dEUsZ0JBQWdCbm5CLE1BQVE1b0QsS0FBS293RSxTQUFTdHZFLEVBQU84bkQsUUFFakR0bUQsR0FFWGlwRSxFQUFvQmxzRSxVQUFVazlDLGdCQUFrQixTQUFVejdDLEdBQ3RELElBQUkydEIsRUFBT3p1QixLQUFLK3NFLGNBQWNqc0UsRUFBT2tpQyxRQUNqQzlrQixFQUFRcGQsRUFBT2l2RSxnQkFDZk0sRUFBWW55RCxFQUFNOUksS0FBTzhJLEVBQU05SSxLQUFLL1UsT0FBUyxFQUM3Q21vRCxFQUFrQixLQUN0QixHQUFJNm5CLEVBQVksRUFBRyxDQUNmeHFFLEVBQXFCLElBQWR3cUUsRUFBaUIsd0VBQ3hCLElBQUlqN0QsRUFBTzhJLEVBQU05SSxLQUFLLEdBQ2xCQSxFQUFLNDZELGVBQ0x4bkIsRUFBa0JwekMsRUFBS21hLGFBR3ZCZCxFQUFPQSxFQUFLcEIsTUFBTWpZLEVBQUttYSxjQUcvQixJQUFJK2dELEVBQVcsR0FDWHB5RCxFQUFNK3hELFFBQ05LLEVBQVd0d0UsS0FBS3V3RSxXQUFXcnlELEVBQU0reEQsUUFFckMsSUFBSXhuQixFQUFVLEdBQ1Z2cUMsRUFBTXVxQyxVQUNOQSxFQUFVem9ELEtBQUt3d0UsVUFBVXR5RCxFQUFNdXFDLFVBRW5DLElBQUlsN0IsRUFBUSxLQUNSclAsRUFBTXFQLFFBQ05BLEVBQVF2dEIsS0FBSzZyRSxlQUFlM3RELEVBQU1xUCxRQUV0QyxJQUFJbzdCLEVBQVUsS0FDVnpxQyxFQUFNeXFDLFVBQ05BLEVBQVUzb0QsS0FBS3l3RSxXQUFXdnlELEVBQU15cUMsVUFFcEMsSUFBSUMsRUFBUSxLQUlaLE9BSEkxcUMsRUFBTTBxQyxRQUNOQSxFQUFRNW9ELEtBQUt5d0UsV0FBV3Z5RCxFQUFNMHFDLFFBRTNCLElBQUlFLEdBQU1yNkIsRUFBTSs1QixFQUFpQkMsRUFBUzZuQixFQUFVL2lELEVBQU8rNkIsR0FBVVcsTUFBT04sRUFBU0MsR0FBT21DLFlBRXZHd2dCLEVBQW9CbHNFLFVBQVUrOUQsc0JBQXdCLFNBQVV6MUIsR0FDNUQsSUFBSWpwQyxFQUFRc0IsS0FBSzB3RSxRQUFRL29DLEVBQVcrUyxTQUNwQyxPQUFhLE1BQVRoOEMsRUFDTyxLQUdBLENBQ0gsbUJBQW9CQSxJQUloQzZzRSxFQUFvQmxzRSxVQUFVcXhFLFFBQVUsU0FBVWgyQixHQUM5QyxPQUFRQSxHQUNKLEtBQUtYLEdBQWN5QyxPQUNmLE9BQU8sS0FDWCxLQUFLekMsR0FBYyt1Qix3QkFDZixNQUFPLDRCQUNYLEtBQUsvdUIsR0FBY3VzQixnQkFDZixNQUFPLGlCQUNYLFFBQ0ksT0FBT3poRCxFQUFLLCtCQUFpQzYxQixLQUd6RDZ3QixFQUFvQmxzRSxVQUFVMHJELFNBQVcsU0FBVXBqQixHQUMvQyxJQUFJcmxDLEVBQ0F4QixFQUFTNm1DLEVBQVc3bUMsT0FXeEIsT0FUSXdCLEVBREF4QixFQUFPNmpDLGtCQUNFLENBQUUwWCxVQUFXcjhDLEtBQUsyOEMsa0JBQWtCNzdDLElBR3BDLENBQUVvZCxNQUFPbGUsS0FBSzQ4QyxjQUFjOTdDLEtBRWxDbTNCLFNBQVcwUCxFQUFXMVAsU0FDekIwUCxFQUFXMlIsWUFBWWo1QyxPQUFTLElBQ2hDaUMsRUFBT2czQyxZQUFjdDVDLEtBQUt5ckUsMEJBQTBCOWpDLEVBQVcyUixjQUU1RGgzQyxHQUVYaXBFLEVBQW9CbHNFLFVBQVU2d0UsU0FBVyxTQUFVeG5CLEdBQy9DLElBQUloL0MsRUFBUTFKLEtBQ1osR0FBdUIsSUFBbkIwb0QsRUFBUXJvRCxPQUFaLENBR0EsSUFBSW92RSxFQUFTL21CLEVBQVF6M0MsS0FBSSxTQUFVc0UsR0FDL0IsT0FBSUEsYUFBa0I0MEMsR0FDWHpnRCxFQUFNaW5FLHFCQUFxQnA3RCxHQUczQnNQLEVBQUssd0JBQTBCblosS0FBS3NHLFVBQVV1RCxPQUc3RCxPQUFzQixJQUFsQms2RCxFQUFPcHZFLE9BQ0FvdkUsRUFBTyxHQUVYLENBQUVtQixnQkFBaUIsQ0FBRXR0RSxHQUFJLE1BQU9vbEQsUUFBUyttQixNQUVwRGxFLEVBQW9CbHNFLFVBQVVreEUsV0FBYSxTQUFVaDdELEdBQ2pELElBQUk3TCxFQUFRMUosS0FDWixPQUFLdVYsT0FHMkJoTSxJQUF2QmdNLEVBQU9zN0QsWUFDTCxDQUFDN3dFLEtBQUs4d0UsZ0JBQWdCdjdELFNBRURoTSxJQUF2QmdNLEVBQU93N0QsWUFDTCxDQUFDL3dFLEtBQUtneEUsZ0JBQWdCejdELFNBRUdoTSxJQUEzQmdNLEVBQU9xN0QsZ0JBQ0xyN0QsRUFBT3E3RCxnQkFDVGxvQixRQUFRejNDLEtBQUksU0FBVXRPLEdBQUssT0FBTytHLEVBQU02bUUsV0FBVzV0RSxNQUNuRHEzQixRQUFPLFNBQVVpM0MsRUFBT2hpRCxHQUFXLE9BQU9naUQsRUFBTWp0RSxPQUFPaXJCLE1BR3JEcEssRUFBSyxtQkFBcUJuWixLQUFLc0csVUFBVXVELElBZHpDLElBaUJmZzJELEVBQW9CbHNFLFVBQVU4d0UsUUFBVSxTQUFVdmtCLEdBQzlDLElBQUlsaUQsRUFBUTFKLEtBQ1osR0FBd0IsSUFBcEI0ckQsRUFBU3ZyRCxPQUdiLE9BQU91ckQsRUFBUzM2QyxLQUFJLFNBQVVpZ0UsR0FBUyxPQUFPeG5FLEVBQU15bkUsZ0JBQWdCRCxPQUV4RTNGLEVBQW9CbHNFLFVBQVVteEUsVUFBWSxTQUFVNWtCLEdBQ2hELElBQUlsaUQsRUFBUTFKLEtBQ1osT0FBTzRyRCxFQUFTMzZDLEtBQUksU0FBVWlnRSxHQUFTLE9BQU94bkUsRUFBTTBuRSxrQkFBa0JGLE9BRTFFM0YsRUFBb0Jsc0UsVUFBVSt3RSxTQUFXLFNBQVUvekQsR0FDL0MsSUFBSTNTLEVBQVExSixLQUNaLE1BQU8sQ0FDSCtyRCxPQUFRMXZDLEVBQU8wdkMsT0FDZjEyQyxPQUFRZ0gsRUFBT21MLFNBQVN2VyxLQUFJLFNBQVV3QyxHQUFhLE9BQU8vSixFQUFNdWpFLFFBQVF4NUQsUUFHaEY4M0QsRUFBb0Jsc0UsVUFBVW94RSxXQUFhLFNBQVVwMEQsR0FDakQsSUFBSTNTLEVBQVExSixLQUNSK3JELElBQVcxdkMsRUFBTzB2QyxPQUNsQnZrQyxFQUFXbkwsRUFBT2hILE9BQU9wRSxLQUFJLFNBQVV3QyxHQUFhLE9BQU8vSixFQUFNbWtFLFVBQVVwNkQsTUFDL0UsT0FBTyxJQUFJcTRDLEdBQU10a0MsRUFBVXVrQyxJQUcvQndmLEVBQW9CbHNFLFVBQVVneUUsWUFBYyxTQUFVdm5CLEdBQ2xELE9BQU9taEIsR0FBV25oQixFQUFJOXJELE9BRzFCdXRFLEVBQW9CbHNFLFVBQVVpeUUsY0FBZ0IsU0FBVXhuQixHQUNwRCxPQUFRQSxHQUNKLElBQUssWUFDRCxPQUFPQyxHQUFVQyxVQUNyQixJQUFLLGFBQ0QsT0FBT0QsR0FBVThCLFdBQ3JCLFFBQ0ksU0FJWjBmLEVBQW9CbHNFLFVBQVVreUUsZUFBaUIsU0FBVWp1RSxHQUNyRCxPQUFPNG5FLEdBQVU1bkUsRUFBR3RGLE9BRXhCdXRFLEVBQW9CbHNFLFVBQVVteUUsaUJBQW1CLFNBQVVsdUUsR0FDdkQsT0FBUUEsR0FDSixJQUFLLFFBQ0QsT0FBTzZvRCxHQUFTRyxNQUNwQixJQUFLLGVBQ0QsT0FBT0gsR0FBU0ssYUFDcEIsSUFBSyx3QkFDRCxPQUFPTCxHQUFTSSxzQkFDcEIsSUFBSyxZQUNELE9BQU9KLEdBQVNDLFVBQ3BCLElBQUsscUJBQ0QsT0FBT0QsR0FBU0UsbUJBQ3BCLElBQUssaUJBQ0QsT0FBT0YsR0FBU00sZUFDcEIsSUFBSyxLQUNELE9BQU9OLEdBQVNPLEdBQ3BCLElBQUsscUJBQ0QsT0FBT1AsR0FBU1EsbUJBQ3BCLElBQUssdUJBQ0QsT0FBTzluQyxFQUFLLHdCQUNoQixRQUNJLE9BQU9BLEVBQUssc0JBR3hCMG1ELEVBQW9CbHNFLFVBQVVveUUscUJBQXVCLFNBQVVoakQsR0FDM0QsTUFBTyxDQUFFdWIsVUFBV3ZiLEVBQUtGLG9CQUU3Qmc5QyxFQUFvQmxzRSxVQUFVcXlFLHVCQUF5QixTQUFVQyxHQUM3RCxPQUFPL2lELEdBQVVJLGlCQUFpQjJpRCxFQUFlM25DLFlBR3JEdWhDLEVBQW9CbHNFLFVBQVU4eEUsZ0JBQWtCLFNBQVUxb0IsR0FDdEQsTUFBTyxDQUNIcmUsTUFBT3BxQyxLQUFLeXhFLHFCQUFxQmhwQixFQUFRcmUsT0FDekNoSyxVQUFXcGdDLEtBQUtxeEUsWUFBWTVvQixFQUFRcUIsT0FHNUN5aEIsRUFBb0Jsc0UsVUFBVSt4RSxrQkFBb0IsU0FBVTNvQixHQUN4RCxPQUFPLElBQUlrQixHQUFRM3BELEtBQUsweEUsdUJBQXVCanBCLEVBQVFyZSxPQUFRcHFDLEtBQUtzeEUsY0FBYzdvQixFQUFRcm9CLGFBRTlGbXJDLEVBQW9CbHNFLFVBQVUyeEUsZ0JBQWtCLFNBQVV6N0QsR0FDdEQsT0FBTzQwQyxHQUFZcHJELE9BQU9pQixLQUFLMHhFLHVCQUF1Qm44RCxFQUFPdzdELFlBQVkzbUMsT0FBUXBxQyxLQUFLd3hFLGlCQUFpQmo4RCxFQUFPdzdELFlBQVl6dEUsSUFBS3RELEtBQUs2dEUsVUFBVXQ0RCxFQUFPdzdELFlBQVlyeUUsU0FHcks2c0UsRUFBb0Jsc0UsVUFBVXN4RSxxQkFBdUIsU0FBVXA3RCxHQUMzRCxHQUFJQSxFQUFPalMsS0FBTzZvRCxHQUFTRyxNQUFPLENBQzlCLEdBQUkvMkMsRUFBTzdXLE1BQU00ckIsUUFBUWtrQixHQUFZQyxLQUNqQyxNQUFPLENBQ0hvaUMsWUFBYSxDQUNUem1DLE1BQU9wcUMsS0FBS3l4RSxxQkFBcUJsOEQsRUFBTzYwQixPQUN4QzltQyxHQUFJLFdBSVgsR0FBSWlTLEVBQU83VyxNQUFNNHJCLFFBQVF3akIsR0FBVUUsVUFDcEMsTUFBTyxDQUNINmlDLFlBQWEsQ0FDVHptQyxNQUFPcHFDLEtBQUt5eEUscUJBQXFCbDhELEVBQU82MEIsT0FDeEM5bUMsR0FBSSxZQUtwQixNQUFPLENBQ0h5dEUsWUFBYSxDQUNUM21DLE1BQU9wcUMsS0FBS3l4RSxxQkFBcUJsOEQsRUFBTzYwQixPQUN4QzltQyxHQUFJdEQsS0FBS3V4RSxlQUFlaDhELEVBQU9qUyxJQUMvQjVFLE1BQU9zQixLQUFLaXRFLFFBQVExM0QsRUFBTzdXLFVBSXZDNnNFLEVBQW9CbHNFLFVBQVV5eEUsZ0JBQWtCLFNBQVV2N0QsR0FDdEQsT0FBUUEsRUFBT3M3RCxZQUFZdnRFLElBQ3ZCLElBQUssU0FDRCxJQUFJc3VFLEVBQVc1eEUsS0FBSzB4RSx1QkFBdUJuOEQsRUFBT3M3RCxZQUFZem1DLE9BQzlELE9BQU8rZixHQUFZcHJELE9BQU82eUUsRUFBVXpsQixHQUFTRyxNQUFPOWQsR0FBWUMsS0FDcEUsSUFBSyxVQUNELElBQUlvakMsRUFBWTd4RSxLQUFLMHhFLHVCQUF1Qm44RCxFQUFPczdELFlBQVl6bUMsT0FDL0QsT0FBTytmLEdBQVlwckQsT0FBTzh5RSxFQUFXMWxCLEdBQVNHLE1BQU94ZSxHQUFVRSxVQUNuRSxJQUFLLHVCQUNELE9BQU9ucEIsRUFBSyxzQkFDaEIsUUFDSSxPQUFPQSxFQUFLLG9CQUd4QjBtRCxFQUFvQmxzRSxVQUFVNHZFLGVBQWlCLFNBQVV0akMsR0FDckQsSUFBSW1tQyxFQUFrQixHQUl0QixPQUhBbm1DLEVBQVUvQixPQUFPcDRCLFNBQVEsU0FBVTQ0QixHQUMvQixPQUFPMG5DLEVBQWdCcnVFLEtBQUsybUMsRUFBTTdiLHNCQUUvQixDQUNId2pELFdBQVlELElBR3BCdkcsRUFBb0Jsc0UsVUFBVWl3RSxpQkFBbUIsU0FBVWovQixHQUN2RCxJQUNJekcsR0FEUXlHLEVBQU0waEMsWUFBYyxJQUNiOWdFLEtBQUksU0FBVXdkLEdBQVEsT0FBT0csR0FBVUksaUJBQWlCUCxNQUMzRSxPQUFPa2IsR0FBVUcsVUFBVUYsSUFFeEIyaEMsRUF2bEM2QixHQThtQ3BDeUcsR0FDQSxXQUNJaHlFLEtBQUtpeUUsU0FBVyxLQUNoQmp5RSxLQUFLaTRCLFNBQVcsRUFDaEJqNEIsS0FBS2t5RSxVQUFZLElBU3JCQyxHQUE4QixXQUM5QixTQUFTQSxFQUFhekosR0FDbEIxb0UsS0FBSzBvRSxXQUFhQSxFQUNsQjFvRSxLQUFLb3lFLFFBQVUsSUFBSW5oQyxJQUFVLFNBQVV2c0MsR0FDbkMsT0FBT0EsRUFBRWtrQyxpQkFFYjVvQyxLQUFLcXlFLFlBQWN4WSxHQUFZaUcsUUFDL0I5L0QsS0FBS3N5RSx5QkFBMkIsSUFBSWhuQyxJQUNwQ3RyQyxLQUFLMG9FLFdBQVd6NkQsVUFBVWpPLE1Bb0g5QixPQWxIQW15RSxFQUFhOXlFLFVBQVVpcEUsT0FBUyxTQUFVem5CLEdBQ3RDLElBQUkzaUMsRUFBUTJpQyxFQUFTM2lDLE1BQ2pCcTBELEdBQWMsRUFDZEMsRUFBWXh5RSxLQUFLb3lFLFFBQVE5ekUsSUFBSTRmLElBQzVCczBELElBQ0RELEdBQWMsRUFDZEMsRUFBWSxJQUFJUixHQUNoQmh5RSxLQUFLb3lFLFFBQVFsK0QsSUFBSWdLLEVBQU9zMEQsSUFFNUJBLEVBQVVOLFVBQVV6dUUsS0FBS285QyxHQUd6Qmg3QyxHQURrQmc3QyxFQUFTNHhCLHVCQUF1Qnp5RSxLQUFLcXlFLGFBQ2xDLDhFQUNqQkcsRUFBVVAsWUFDVXB4QixFQUFTNnhCLGVBQWVGLEVBQVVQLFdBRWxEanlFLEtBQUsyeUUsNkJBR2IsT0FBSUosRUFDT3Z5RSxLQUFLMG9FLFdBQVdKLE9BQU9wcUQsR0FBTzFiLE1BQUssU0FBVXkxQixHQUVoRCxPQURBdTZDLEVBQVV2NkMsU0FBV0EsRUFDZEEsS0FJSmwyQixRQUFRQyxRQUFRd3dFLEVBQVV2NkMsV0FHekNrNkMsRUFBYTl5RSxVQUFVbXBFLFNBQVcsU0FBVTNuQixHQUN4QyxPQUFPcjdDLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSWtlLEVBQU8wMEQsRUFBWUosRUFBVy8wRSxFQUNsQyxPQUFPK0gsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQVdyQyxPQVZBaVQsRUFBUTJpQyxFQUFTM2lDLE1BQ2pCMDBELEdBQWEsR0FDYkosRUFBWXh5RSxLQUFLb3lFLFFBQVE5ekUsSUFBSTRmLE1BRXpCemdCLEVBQUkrMEUsRUFBVU4sVUFBVXp4RSxRQUFRb2dELEtBQ3ZCLElBQ0wyeEIsRUFBVU4sVUFBVXZ2RCxPQUFPbGxCLEVBQUcsR0FDOUJtMUUsRUFBNEMsSUFBL0JKLEVBQVVOLFVBQVU3eEUsUUFHckN1eUUsR0FDQTV5RSxLQUFLb3lFLFFBQVFsOUQsT0FBT2dKLEdBQ2IsQ0FBQyxFQUFjbGUsS0FBSzBvRSxXQUFXRixTQUFTdHFELEtBRTVDLENBQUMsVUFJcEJpMEQsRUFBYTl5RSxVQUFVMDlELGNBQWdCLFNBQVU4VixHQUU3QyxJQURBLElBQUlDLEdBQWMsRUFDVG5vRSxFQUFLLEVBQUdvb0UsRUFBY0YsRUFBV2xvRSxFQUFLb29FLEVBQVkxeUUsT0FBUXNLLElBQU0sQ0FDckUsSUFBSXNuRSxFQUFXYyxFQUFZcG9FLEdBQ3ZCdVQsRUFBUSt6RCxFQUFTL3pELE1BQ2pCczBELEVBQVl4eUUsS0FBS295RSxRQUFROXpFLElBQUk0ZixHQUNqQyxHQUFJczBELEVBQVcsQ0FDWCxJQUFLLElBQUl2bkUsRUFBSyxFQUFHQyxFQUFLc25FLEVBQVVOLFVBQVdqbkUsRUFBS0MsRUFBRzdLLE9BQVE0SyxJQUFNLENBQzlDQyxFQUFHRCxHQUNMeW5FLGVBQWVULEtBQ3hCYSxHQUFjLEdBR3RCTixFQUFVUCxTQUFXQSxHQUd6QmEsR0FDQTl5RSxLQUFLMnlFLDZCQUdiUixFQUFhOXlFLFVBQVUyekUsYUFBZSxTQUFVOTBELEVBQU9wYSxHQUNuRCxJQUFJMHVFLEVBQVl4eUUsS0FBS295RSxRQUFROXpFLElBQUk0ZixHQUNqQyxHQUFJczBELEVBQ0EsSUFBSyxJQUFJN25FLEVBQUssRUFBR00sRUFBS3VuRSxFQUFVTixVQUFXdm5FLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM5Q00sRUFBR04sR0FDVDBFLFFBQVF2TCxHQUt6QjlELEtBQUtveUUsUUFBUWw5RCxPQUFPZ0osSUFFeEJpMEQsRUFBYTl5RSxVQUFVNHpFLG9CQUFzQixTQUFVWixHQUNuRHJ5RSxLQUFLcXlFLFlBQWNBLEVBQ25CLElBQUlTLEdBQWMsRUFDbEI5eUUsS0FBS295RSxRQUFRNWdFLFNBQVEsU0FBVTFPLEVBQUcwdkUsR0FDOUIsSUFBSyxJQUFJN25FLEVBQUssRUFBR00sRUFBS3VuRSxFQUFVTixVQUFXdm5FLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM5Q00sRUFBR04sR0FFTDhuRSx1QkFBdUJKLEtBQ2hDUyxHQUFjLE9BSXRCQSxHQUNBOXlFLEtBQUsyeUUsNkJBR2JSLEVBQWE5eUUsVUFBVTZ6RSwyQkFBNkIsU0FBVXBsRSxHQUMxRDlOLEtBQUtzeUUseUJBQXlCcjdDLElBQUlucEIsR0FHbENBLEVBQVMxTCxRQUViK3ZFLEVBQWE5eUUsVUFBVTh6RSw4QkFBZ0MsU0FBVXJsRSxHQUM3RDlOLEtBQUtzeUUseUJBQXlCcDlELE9BQU9wSCxJQUd6Q3FrRSxFQUFhOXlFLFVBQVVzekUsMEJBQTRCLFdBQy9DM3lFLEtBQUtzeUUseUJBQXlCOWdFLFNBQVEsU0FBVTFELEdBQzVDQSxFQUFTMUwsV0FHVit2RSxFQTVIc0IsR0FvSTdCaUIsR0FBK0IsV0FDL0IsU0FBU0EsRUFBY2wxRCxFQUFPbTFELEVBQWUvK0QsR0FDekN0VSxLQUFLa2UsTUFBUUEsRUFDYmxlLEtBQUtxekUsY0FBZ0JBLEVBS3JCcnpFLEtBQUtzekUsb0JBQXFCLEVBQzFCdHpFLEtBQUt1ekUsS0FBTyxLQUNadnpFLEtBQUtxeUUsWUFBY3hZLEdBQVlpRyxRQUMvQjkvRCxLQUFLc1UsUUFBVUEsR0FBVyxHQTRGOUIsT0FwRkE4K0QsRUFBYy96RSxVQUFVcXpFLGVBQWlCLFNBQVVhLEdBRS9DLEdBREExdEUsRUFBTzB0RSxFQUFLalIsV0FBV2ppRSxPQUFTLEdBQUtrekUsRUFBSy9RLGlCQUFrQiwyQ0FDdkR4aUUsS0FBS3NVLFFBQVFrL0QsdUJBQXdCLENBR3RDLElBREEsSUFBSWxSLEVBQWEsR0FDUjMzRCxFQUFLLEVBQUdNLEVBQUtzb0UsRUFBS2pSLFdBQVkzM0QsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQ3pELElBQUl1NkQsRUFBWWo2RCxFQUFHTixHQUNmdTZELEVBQVVweUQsT0FBU2l1RCxHQUFXaUIsVUFDOUJNLEVBQVc3K0QsS0FBS3loRSxHQUd4QnFPLEVBQU8sSUFBSW5SLEdBQWFtUixFQUFLcjFELE1BQU9xMUQsRUFBS25rQixLQUFNbWtCLEVBQUtsUixRQUFTQyxFQUFZaVIsRUFBS2hSLFlBQWFnUixFQUFLeGUsVUFBV3dlLEVBQUsvUSxrQkFDakYsR0FFbkMsSUFBSXNRLEdBQWMsRUFZbEIsT0FYSzl5RSxLQUFLc3pFLG1CQU1EdHpFLEtBQUt5ekUsaUJBQWlCRixLQUMzQnZ6RSxLQUFLcXpFLGNBQWNqeEUsS0FBS214RSxHQUN4QlQsR0FBYyxHQVBWOXlFLEtBQUswekUsd0JBQXdCSCxFQUFNdnpFLEtBQUtxeUUsZUFDeENyeUUsS0FBSzJ6RSxrQkFBa0JKLEdBQ3ZCVCxHQUFjLEdBT3RCOXlFLEtBQUt1ekUsS0FBT0EsRUFDTFQsR0FFWE0sRUFBYy96RSxVQUFVZ1EsUUFBVSxTQUFVdkwsR0FDeEM5RCxLQUFLcXpFLGNBQWN2dkUsTUFBTUEsSUFHN0JzdkUsRUFBYy96RSxVQUFVb3pFLHVCQUF5QixTQUFVSixHQUN2RHJ5RSxLQUFLcXlFLFlBQWNBLEVBQ25CLElBQUlTLEdBQWMsRUFPbEIsT0FOSTl5RSxLQUFLdXpFLE9BQ0p2ekUsS0FBS3N6RSxvQkFDTnR6RSxLQUFLMHpFLHdCQUF3QjF6RSxLQUFLdXpFLEtBQU1sQixLQUN4Q3J5RSxLQUFLMnpFLGtCQUFrQjN6RSxLQUFLdXpFLE1BQzVCVCxHQUFjLEdBRVhBLEdBRVhNLEVBQWMvekUsVUFBVXEwRSx3QkFBMEIsU0FBVUgsRUFBTWxCLEdBRzlELEdBRkF4c0UsR0FBUTdGLEtBQUtzekUsbUJBQW9CLHlFQUU1QkMsRUFBS3hlLFVBQ04sT0FBTyxFQUlYLElBQUk2ZSxFQUFjdkIsSUFBZ0J4WSxHQUFZeUcsUUFHOUMsT0FBSXRnRSxLQUFLc1UsUUFBUXUvRCx1QkFBeUJELEdBQ3RDL3RFLEVBQU8wdEUsRUFBS3hlLFVBQVcscURBQ2hCLElBR0h3ZSxFQUFLbmtCLEtBQUtwL0MsV0FBYXFpRSxJQUFnQnhZLEdBQVl5RyxTQUUvRDhTLEVBQWMvekUsVUFBVW8wRSxpQkFBbUIsU0FBVUYsR0FLakQsR0FBSUEsRUFBS2pSLFdBQVdqaUUsT0FBUyxFQUN6QixPQUFPLEVBRVgsSUFBSXl6RSxFQUEwQjl6RSxLQUFLdXpFLE1BQVF2ekUsS0FBS3V6RSxLQUFLNWtCLG1CQUFxQjRrQixFQUFLNWtCLGlCQUMvRSxTQUFJNGtCLEVBQUsvUSxtQkFBb0JzUixLQUNzQixJQUF4Qzl6RSxLQUFLc1UsUUFBUWsvRCx3QkFPNUJKLEVBQWMvekUsVUFBVXMwRSxrQkFBb0IsU0FBVUosR0FDbEQxdEUsR0FBUTdGLEtBQUtzekUsbUJBQW9CLGtEQUNqQ0MsRUFBT25SLEdBQWFNLHFCQUFxQjZRLEVBQUtyMUQsTUFBT3ExRCxFQUFLbmtCLEtBQU1ta0IsRUFBS2hSLFlBQWFnUixFQUFLeGUsV0FDdkYvMEQsS0FBS3N6RSxvQkFBcUIsRUFDMUJ0ekUsS0FBS3F6RSxjQUFjanhFLEtBQUtteEUsSUFFckJILEVBdkd1QixHQStIOUJXLEdBQWtDLFdBQ2xDLFNBQVNBLEVBQWlCOTdDLEVBQVU4OEIsRUFBV0YsRUFBV0MsR0FDdEQ5MEQsS0FBS2k0QixTQUFXQSxFQUNoQmo0QixLQUFLKzBELFVBQVlBLEVBQ2pCLzBELEtBQUs2MEQsVUFBWUEsRUFDakI3MEQsS0FBSzgwRCxZQUFjQSxFQW1CdkIsT0FqQkFpZixFQUFpQkMsYUFBZSxTQUFVLzdDLEVBQVVnOEMsR0FHaEQsSUFGQSxJQUFJcGYsRUFBWW44QixLQUNabzhCLEVBQWNwOEIsS0FDVC90QixFQUFLLEVBQUdNLEVBQUtncEUsRUFBYTNSLFdBQVkzM0QsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQ2pFLElBQUl1NkQsRUFBWWo2RCxFQUFHTixHQUNuQixPQUFRdTZELEVBQVVweUQsTUFDZCxLQUFLaXVELEdBQVdnQixNQUNabE4sRUFBWUEsRUFBVTU5QixJQUFJaXVDLEVBQVU1NEIsSUFBSXR0QyxLQUN4QyxNQUNKLEtBQUsraEUsR0FBV2tCLFFBQ1puTixFQUFjQSxFQUFZNzlCLElBQUlpdUMsRUFBVTU0QixJQUFJdHRDLE1BS3hELE9BQU8sSUFBSSswRSxFQUFpQjk3QyxFQUFVZzhDLEVBQWFsZixVQUFXRixFQUFXQyxJQUV0RWlmLEVBeEIwQixHQTJDakNHLEdBQ0EsU0FBNEJsMUUsR0FDeEJnQixLQUFLaEIsSUFBTUEsR0FJZm0xRSxHQUNBLFNBQThCbjFFLEdBQzFCZ0IsS0FBS2hCLElBQU1BLEdBU2ZvMUUsR0FBc0IsV0FDdEIsU0FBU0EsRUFBS2wyRCxFQUVkbTJELEdBQ0lyMEUsS0FBS2tlLE1BQVFBLEVBQ2JsZSxLQUFLcTBFLGlCQUFtQkEsRUFDeEJyMEUsS0FBS3MwRSxVQUFZLEtBT2pCdDBFLEtBQUtpdkIsU0FBVSxFQUVmanZCLEtBQUt1MEUsZUFBaUI3N0MsS0FFdEIxNEIsS0FBS3VpRSxZQUFjN3BDLEtBQ25CMTRCLEtBQUt3MEUsWUFBYyxJQUFJdlQsR0FBWS9pRCxFQUFNOHNDLGNBQWMvckQsS0FBS2lmLElBdVVoRSxPQXJVQS9mLE9BQU9DLGVBQWVnMkUsRUFBSy8wRSxVQUFXLGtCQUFtQixDQUtyRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLcTBFLGtCQUVoQmgyRSxZQUFZLEVBQ1prWixjQUFjLElBWWxCNjhELEVBQUsvMEUsVUFBVW8xRSxrQkFBb0IsU0FBVW5TLEVBQVlvUyxHQUNyRCxJQUFJaHJFLEVBQVExSixLQUNSMjBFLEVBQVlELEVBQ1ZBLEVBQWdCQyxVQUNoQixJQUFJaFQsR0FDTmlULEVBQWlCRixFQUNmQSxFQUFnQkYsWUFDaEJ4MEUsS0FBS3cwRSxZQUNQSyxFQUFpQkgsRUFDZkEsRUFBZ0JuUyxZQUNoQnZpRSxLQUFLdWlFLFlBQ1B1UyxFQUFpQkYsRUFDakJ2bUIsR0FBYyxFQVVkMG1CLEVBQWlCLzBFLEtBQUtrZSxNQUFNc3RDLG1CQUFxQm9wQixFQUFlam5ELE9BQVMzdEIsS0FBS2tlLE1BQU1xUCxNQUNsRnFuRCxFQUFleDlDLE9BQ2YsS0FDRjQ5QyxFQUFrQmgxRSxLQUFLa2UsTUFBTXV0QyxrQkFBb0JtcEIsRUFBZWpuRCxPQUFTM3RCLEtBQUtrZSxNQUFNcVAsTUFDbEZxbkQsRUFBZXo5QyxRQUNmLEtBOEVOLEdBN0VBbXJDLEVBQVd4dEMsa0JBQWlCLFNBQVU5MUIsRUFBS2kyRSxHQUN2QyxJQUFJQyxFQUFTTixFQUFldDJFLElBQUlVLEdBQzVCb2tFLEVBQVM2UixhQUF1Qm5xQyxHQUFXbXFDLEVBQWMsS0FDekQ3UixJQUNBdjlELEVBQU83RyxFQUFJc3JCLFFBQVE4NEMsRUFBT3BrRSxLQUFNLCtDQUM1QkEsRUFDQSxPQUNBb2tFLEVBQU9wa0UsS0FDWG9rRSxFQUFTMTVELEVBQU13VSxNQUFNa3pCLFFBQVFneUIsR0FBVUEsRUFBUyxNQUVwRCxJQUFJK1IsSUFBNEJELEdBQzFCeHJFLEVBQU02NEQsWUFBWXZ1RCxJQUFJa2hFLEVBQU9sMkUsS0FFL0JvMkUsSUFBNEJoUyxJQUMxQkEsRUFBTzUzQixtQkFHSjloQyxFQUFNNjRELFlBQVl2dUQsSUFBSW92RCxFQUFPcGtFLE1BQVFva0UsRUFBTzczQix1QkFFakQ4cEMsR0FBZ0IsRUFFaEJILEdBQVU5UixFQUNNOFIsRUFBT3hxRSxPQUFPNGYsUUFBUTg0QyxFQUFPMTRELFFBbUJwQ3lxRSxJQUE4QkMsSUFDbkNULEVBQVU5UyxNQUFNLENBQUUvdUQsS0FBTWl1RCxHQUFXaUIsU0FBVTExQixJQUFLODJCLElBQ2xEaVMsR0FBZ0IsR0FuQlgzckUsRUFBTTRyRSw0QkFBNEJKLEVBQVE5UixLQUMzQ3VSLEVBQVU5UyxNQUFNLENBQ1ovdUQsS0FBTWl1RCxHQUFXbUIsU0FDakI1MUIsSUFBSzgyQixJQUVUaVMsR0FBZ0IsR0FDWE4sR0FDRHJyRSxFQUFNd1UsTUFBTThzQyxjQUFjb1ksRUFBUTJSLEdBQWtCLEdBQ25EQyxHQUNHdHJFLEVBQU13VSxNQUFNOHNDLGNBQWNvWSxFQUFRNFIsR0FBbUIsS0FJekQzbUIsR0FBYyxLQVNwQjZtQixHQUFVOVIsR0FDaEJ1UixFQUFVOVMsTUFBTSxDQUFFL3VELEtBQU1pdUQsR0FBV2dCLE1BQU96MUIsSUFBSzgyQixJQUMvQ2lTLEdBQWdCLEdBRVhILElBQVc5UixJQUNoQnVSLEVBQVU5UyxNQUFNLENBQUUvdUQsS0FBTWl1RCxHQUFXa0IsUUFBUzMxQixJQUFLNG9DLElBQ2pERyxHQUFnQixHQUNaTixHQUFrQkMsS0FJbEIzbUIsR0FBYyxJQUdsQmduQixJQUNJalMsR0FDQTBSLEVBQWlCQSxFQUFlNzlDLElBQUltc0MsR0FFaEN5UixFQURBTyxFQUNpQlAsRUFBZTU5QyxJQUFJajRCLEdBR25CNjFFLEVBQWUzL0QsT0FBT2xXLEtBSTNDODFFLEVBQWlCQSxFQUFlNS9ELE9BQU9sVyxHQUN2QzYxRSxFQUFpQkEsRUFBZTMvRCxPQUFPbFcsUUFLL0NnQixLQUFLa2UsTUFBTXN0QyxtQkFBcUJ4ckQsS0FBS2tlLE1BQU11dEMsaUJBQzNDLEtBQU9xcEIsRUFBZW5uRCxLQUFPM3RCLEtBQUtrZSxNQUFNcVAsT0FBTyxDQUMzQyxJQUFJMm5ELEVBQVNsMUUsS0FBS2tlLE1BQU1zdEMsa0JBQ2xCc3BCLEVBQWUxOUMsT0FDZjA5QyxFQUFlMzlDLFFBQ3JCMjlDLEVBQWlCQSxFQUFlNS9ELE9BQU9nZ0UsRUFBT2wyRSxLQUM5QzYxRSxFQUFpQkEsRUFBZTMvRCxPQUFPZ2dFLEVBQU9sMkUsS0FDOUMyMUUsRUFBVTlTLE1BQU0sQ0FBRS91RCxLQUFNaXVELEdBQVdrQixRQUFTMzFCLElBQUs0b0MsSUFJekQsT0FEQXJ2RSxHQUFRd29ELElBQWdCcW1CLEVBQWlCLGtFQUNsQyxDQUNIRixZQUFhTSxFQUNiSCxVQUFXQSxFQUNYdG1CLFlBQWFBLEVBQ2JrVSxZQUFhc1MsSUFHckJULEVBQUsvMEUsVUFBVWkyRSw0QkFBOEIsU0FBVUosRUFBUTlSLEdBUTNELE9BQVE4UixFQUFPMXBDLG1CQUNYNDNCLEVBQU83M0Isd0JBQ042M0IsRUFBTzUzQixtQkFhaEI0b0MsRUFBSy8wRSxVQUFVaXpDLGFBQWUsU0FBVWd3QixFQUFZaVQsRUFBc0JqUSxHQUN0RSxJQUFJNTdELEVBQVExSixLQUNaNkYsR0FBUXk4RCxFQUFXalUsWUFBYSwyQ0FDaEMsSUFBSWdVLEVBQVVyaUUsS0FBS3cwRSxZQUNuQngwRSxLQUFLdzBFLFlBQWNsUyxFQUFXa1MsWUFDOUJ4MEUsS0FBS3VpRSxZQUFjRCxFQUFXQyxZQUU5QixJQUFJOXdCLEVBQVU2d0IsRUFBV3FTLFVBQVV4UyxhQUNuQzF3QixFQUFRbmYsTUFBSyxTQUFVbHFCLEVBQUlHLEdBQ3ZCLE9BdUpaLFNBQTJCSCxFQUFJRyxHQUMzQixJQUFJMm9FLEVBQVEsU0FBVXJkLEdBQ2xCLE9BQVFBLEdBQ0osS0FBS2tOLEdBQVdnQixNQUNaLE9BQU8sRUFDWCxLQUFLaEIsR0FBV21CLFNBRWhCLEtBQUtuQixHQUFXaUIsU0FJWixPQUFPLEVBQ1gsS0FBS2pCLEdBQVdrQixRQUNaLE9BQU8sRUFDWCxRQUNJLE9BQU9wOUMsRUFBSyx1QkFBeUJndkMsS0FHakQsT0FBT3FkLEVBQU05b0UsR0FBTThvRSxFQUFNM29FOzs7Ozs7Ozs7Ozs7Ozs7O0dBektUaXRFLENBQWtCcHRFLEVBQUcwSyxLQUFNdkssRUFBR3VLLE9BQ2xDcEosRUFBTXdVLE1BQU04c0MsY0FBYzVpRCxFQUFHa2tDLElBQUsvakMsRUFBRytqQyxRQUU3Q3RzQyxLQUFLeTFFLGtCQUFrQm5RLEdBQ3ZCLElBQUlvUSxFQUFlSCxFQUNidjFFLEtBQUt1MUUsdUJBQ0wsR0FFRkksRUFEc0MsSUFBN0IzMUUsS0FBS3UwRSxlQUFlNW1ELE1BQWMzdEIsS0FBS2l2QixRQUN4Qit4QyxHQUFVNFUsT0FBUzVVLEdBQVU2VSxNQUNyRHJULEVBQW1CbVQsSUFBaUIzMUUsS0FBS3MwRSxVQUU3QyxPQURBdDBFLEtBQUtzMEUsVUFBWXFCLEVBQ00sSUFBbkJsa0MsRUFBUXB4QyxRQUFpQm1pRSxFQU9sQixDQUNIM0YsU0FITyxJQUFJdUYsR0FBYXBpRSxLQUFLa2UsTUFBT29rRCxFQUFXa1MsWUFBYW5TLEVBQVM1d0IsRUFBUzZ3QixFQUFXQyxZQUFhb1QsSUFBaUIzVSxHQUFVNlUsTUFBT3JULEdBQzdHLEdBRzNCa1QsYUFBY0EsR0FQWCxDQUFFQSxhQUFjQSxJQWUvQnRCLEVBQUsvMEUsVUFBVW96RSx1QkFBeUIsU0FBVUosR0FDOUMsT0FBSXJ5RSxLQUFLaXZCLFNBQVdvakQsSUFBZ0J4WSxHQUFZeUcsU0FLNUN0Z0UsS0FBS2l2QixTQUFVLEVBQ1JqdkIsS0FBS3N5QyxhQUFhLENBQ3JCa2lDLFlBQWF4MEUsS0FBS3cwRSxZQUNsQkcsVUFBVyxJQUFJaFQsR0FDZlksWUFBYXZpRSxLQUFLdWlFLFlBQ2xCbFUsYUFBYSxJQUVXLElBSXJCLENBQUVxbkIsYUFBYyxLQU0vQnRCLEVBQUsvMEUsVUFBVXkyRSxnQkFBa0IsU0FBVTkyRSxHQUV2QyxPQUFJZ0IsS0FBS3EwRSxpQkFBaUJyZ0UsSUFBSWhWLE9BSXpCZ0IsS0FBS3cwRSxZQUFZeGdFLElBQUloVixLQU90QmdCLEtBQUt3MEUsWUFBWWwyRSxJQUFJVSxHQUFLd3NDLG9CQVVsQzRvQyxFQUFLLzBFLFVBQVVvMkUsa0JBQW9CLFNBQVVuUSxHQUN6QyxJQUFJNTdELEVBQVExSixLQUNSc2xFLElBQ0FBLEVBQWF2UixlQUFldmlELFNBQVEsU0FBVXhTLEdBQU8sT0FBUTBLLEVBQU0ycUUsaUJBQW1CM3FFLEVBQU0ycUUsaUJBQWlCcDlDLElBQUlqNEIsTUFDakhzbUUsRUFBYTlRLGtCQUFrQmhqRCxTQUFRLFNBQVV4UyxHQUM3QyxPQUFPNkcsRUFBTzZELEVBQU0ycUUsaUJBQWlCcmdFLElBQUloVixHQUFNLHFCQUF1QkEsRUFBTSwwQkFFaEZzbUUsRUFBYXBnQyxpQkFBaUIxekIsU0FBUSxTQUFVeFMsR0FBTyxPQUFRMEssRUFBTTJxRSxpQkFBbUIzcUUsRUFBTTJxRSxpQkFBaUJuL0QsT0FBT2xXLE1BQ3RIZ0IsS0FBS2l2QixRQUFVcTJDLEVBQWFyMkMsVUFHcENtbEQsRUFBSy8wRSxVQUFVazJFLHFCQUF1QixXQUNsQyxJQUFJN3JFLEVBQVExSixLQUVaLElBQUtBLEtBQUtpdkIsUUFDTixNQUFPLEdBSVgsSUFBSThtRCxFQUFvQi8xRSxLQUFLdTBFLGVBQzdCdjBFLEtBQUt1MEUsZUFBaUI3N0MsS0FDdEIxNEIsS0FBS3cwRSxZQUFZaGpFLFNBQVEsU0FBVTg2QixHQUMzQjVpQyxFQUFNb3NFLGdCQUFnQnhwQyxFQUFJdHRDLE9BQzFCMEssRUFBTTZxRSxlQUFpQjdxRSxFQUFNNnFFLGVBQWV0OUMsSUFBSXFWLEVBQUl0dEMsU0FJNUQsSUFBSXl5QyxFQUFVLEdBV2QsT0FWQXNrQyxFQUFrQnZrRSxTQUFRLFNBQVV4UyxHQUMzQjBLLEVBQU02cUUsZUFBZXZnRSxJQUFJaFYsSUFDMUJ5eUMsRUFBUWh1QyxLQUFLLElBQUkwd0UsR0FBcUJuMUUsT0FHOUNnQixLQUFLdTBFLGVBQWUvaUUsU0FBUSxTQUFVeFMsR0FDN0IrMkUsRUFBa0IvaEUsSUFBSWhWLElBQ3ZCeXlDLEVBQVFodUMsS0FBSyxJQUFJeXdFLEdBQW1CbDFFLE9BR3JDeXlDLEdBc0JYMmlDLEVBQUsvMEUsVUFBVTIyRSw4QkFBZ0MsU0FBVUMsR0FDckRqMkUsS0FBS3EwRSxpQkFBbUI0QixFQUFZam9CLFdBQ3BDaHVELEtBQUt1MEUsZUFBaUI3N0MsS0FDdEIsSUFBSTRwQyxFQUFhdGlFLEtBQUt5MEUsa0JBQWtCd0IsRUFBWTU1QixXQUNwRCxPQUFPcjhDLEtBQUtzeUMsYUFBYWd3QixHQUFzQyxJQVFuRThSLEVBQUsvMEUsVUFBVTYyRSx1QkFBeUIsV0FDcEMsT0FBTzlULEdBQWFNLHFCQUFxQjFpRSxLQUFLa2UsTUFBT2xlLEtBQUt3MEUsWUFBYXgwRSxLQUFLdWlFLFlBQWF2aUUsS0FBS3MwRSxZQUFjdFQsR0FBVTZVLFFBRW5IekIsRUF6VmM7Ozs7Ozs7Ozs7Ozs7Ozs7R0FnWXpCLElBQUkrQixHQUFjLEVBS2RDLEdBQW1DLFdBQ25DLFNBQVNBLEVBQWtCdG1ELEVBQVl1bUQsRUFBYUMsRUFBZ0JyaUUsR0FDaEVqVSxLQUFLOHZCLFdBQWFBLEVBQ2xCOXZCLEtBQUtxMkUsWUFBY0EsRUFDbkJyMkUsS0FBS3MyRSxlQUFpQkEsRUFDdEJ0MkUsS0FBS2lVLFNBQVdBLEVBQ2hCalUsS0FBS3UyRSxRQUFVSixHQUNmbjJFLEtBQUt5NkQsUUFBVSxJQUFJekIsR0FBbUJoNUQsS0FBSzh2QixXQUFZbEYsR0FBUTRyRCxrQkE2RW5FLE9BMUVBSixFQUFrQi8yRSxVQUFVbzNFLElBQU0sV0FDOUJ6MkUsS0FBSzAyRSxrQkFFVE4sRUFBa0IvMkUsVUFBVXEzRSxlQUFpQixXQUN6QyxJQUFJaHRFLEVBQVExSixLQUNaQSxLQUFLeTZELFFBQVFqQixlQUFjLFdBQWMsT0FBT2gwRCxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ25GLElBQUl5VCxFQUFhOGlCLEVBQ2J2MkIsRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FxQnJDLE9BcEJBa1MsRUFBY25kLEtBQUtxMkUsWUFBWTFNLHFCQUMvQjFwQyxFQUFjamdDLEtBQUsyMkUscUJBQXFCeDVELEtBRXBDOGlCLEVBQ0t6OUIsTUFBSyxTQUFVRixHQUNoQm9ILEVBQU1vbUIsV0FBV2Usa0JBQWlCLFdBQzlCLE9BQU8xVCxFQUNGbWhELFNBQ0E5N0QsTUFBSyxXQUNOa0gsRUFBTXVLLFNBQVNqUyxRQUFRTSxNQUV0QndILE9BQU0sU0FBVThzRSxHQUNqQmx0RSxFQUFNbXRFLHVCQUF1QkQsWUFJcEM5c0UsT0FBTSxTQUFVZ3RFLEdBQ2pCcHRFLEVBQU1tdEUsdUJBQXVCQyxNQUc5QixDQUFDLGFBSXBCVixFQUFrQi8yRSxVQUFVczNFLHFCQUF1QixTQUFVeDVELEdBQ3pELElBQ0ksSUFBSThpQixFQUFjamdDLEtBQUtzMkUsZUFBZW41RCxHQUN0QyxPQUFJaXJDLEdBQWtCbm9CLElBQ2pCQSxFQUFZbjJCLE9BQ1ptMkIsRUFBWXo5QixLQUlWeTlCLEdBSEhqZ0MsS0FBS2lVLFNBQVNoUyxPQUFPZ0UsTUFBTSwrQ0FDcEIsTUFJZixNQUFPbkMsR0FHSCxPQURBOUQsS0FBS2lVLFNBQVNoUyxPQUFPNkIsR0FDZCxPQUdmc3lFLEVBQWtCLzJFLFVBQVV3M0UsdUJBQXlCLFNBQVUveUUsR0FDM0QsSUFBSTRGLEVBQVExSixLQUNSQSxLQUFLdTJFLFFBQVUsR0FBS3YyRSxLQUFLKzJFLDRCQUE0Qmp6RSxJQUNyRDlELEtBQUt1MkUsU0FBVyxFQUNoQnYyRSxLQUFLOHZCLFdBQVdlLGtCQUFpQixXQUU3QixPQURBbm5CLEVBQU1ndEUsaUJBQ0MzMEUsUUFBUUMsY0FJbkJoQyxLQUFLaVUsU0FBU2hTLE9BQU82QixJQUc3QnN5RSxFQUFrQi8yRSxVQUFVMDNFLDRCQUE4QixTQUFVanpFLEdBQ2hFLEdBQW1CLGtCQUFmQSxFQUFNOUYsS0FBMEIsQ0FHaEMsSUFBSW9NLEVBQU90RyxFQUFNc0csS0FDakIsTUFBaUIsWUFBVEEsR0FDSyx3QkFBVEEsSUFDQ3cyRCxHQUFpQngyRCxHQUUxQixPQUFPLEdBRUpnc0UsRUFwRjJCLEdBNEdsQ1ksR0FDQSxTQUlBOTRELEVBS0ErWixFQU9BZy9DLEdBQ0lqM0UsS0FBS2tlLE1BQVFBLEVBQ2JsZSxLQUFLaTRCLFNBQVdBLEVBQ2hCajRCLEtBQUtpM0UsS0FBT0EsR0FLaEIzUSxHQUNBLFNBQXlCdG5FLEdBQ3JCZ0IsS0FBS2hCLElBQU1BLEVBT1hnQixLQUFLazNFLGtCQUFtQixHQWtCNUJyd0MsR0FBNEIsV0FDNUIsU0FBU0EsRUFBV2dZLEVBQVl3M0IsRUFFaENjLEVBQW1CQyxHQUNmcDNFLEtBQUs2K0MsV0FBYUEsRUFDbEI3K0MsS0FBS3EyRSxZQUFjQSxFQUNuQnIyRSxLQUFLbTNFLGtCQUFvQkEsRUFDekJuM0UsS0FBS28zRSxZQUFjQSxFQUNuQnAzRSxLQUFLcTNFLG1CQUFxQixLQUMxQnIzRSxLQUFLczNFLGtCQUFvQixJQUFJcm1DLElBQVUsU0FBVXZzQyxHQUM3QyxPQUFPQSxFQUFFa2tDLGlCQUViNW9DLEtBQUt1M0UsZ0JBQWtCLEdBQ3ZCdjNFLEtBQUt3M0Usa0JBQW9CLElBQUlwakQsR0FBVWhGLEdBQVloQyxZQUNuRHB0QixLQUFLeTNFLHlCQUEyQixHQUNoQ3ozRSxLQUFLMDNFLGtCQUFvQixJQUFJbG5CLEdBRTdCeHdELEtBQUsyM0Usc0JBQXdCLEdBRTdCMzNFLEtBQUs0M0UsdUJBQXlCLElBQUlqa0UsSUFDbEMzVCxLQUFLNjNFLHVCQUF5Qnp4QyxHQUFrQlEsZ0JBSWhENW1DLEtBQUtxaEQsZUFBWTkzQyxFQUNqQnZKLEtBQUtxeUUsWUFBY3hZLEdBQVlpRyxRQSsrQm5DLE9BNytCQTNoRSxPQUFPQyxlQUFleW9DLEVBQVd4bkMsVUFBVyxrQkFBbUIsQ0FFM0RmLElBQUssV0FDRCxPQUEwQixJQUFuQjBCLEtBQUtxaEQsV0FFaEJoakQsWUFBWSxFQUNaa1osY0FBYyxJQUdsQnN2QixFQUFXeG5DLFVBQVU0TyxVQUFZLFNBQVVvcEUsR0FDdkN4eEUsRUFBOEIsT0FBdkJ3eEUsRUFBNkIsc0NBQ3BDeHhFLEVBQW1DLE9BQTVCN0YsS0FBS3EzRSxtQkFBNkIsd0NBQ3pDcjNFLEtBQUtxM0UsbUJBQXFCQSxHQU85Qnh3QyxFQUFXeG5DLFVBQVVpcEUsT0FBUyxTQUFVcHFELEdBQ3BDLE9BQU8xWSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlpNEIsRUFBVWc4QyxFQUFjNkQsRUFBV253QyxFQUFZb3dDLEVBQ25ELE9BQU92eUUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBR0QsT0FGQS9DLEtBQUtnNEUsaUJBQWlCLGFBQ3RCRixFQUFZOTNFLEtBQUtzM0Usa0JBQWtCaDVFLElBQUk0ZixLQVF2QytaLEVBQVc2L0MsRUFBVTcvQyxTQUNyQmo0QixLQUFLbTNFLGtCQUFrQmMsb0JBQW9CaGdELEdBQzNDZzhDLEVBQWU2RCxFQUFVYixLQUFLZix5QkFDdkIsQ0FBQyxFQUFhLElBVkUsQ0FBQyxFQUFhLEdBV3pDLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYWwyRSxLQUFLNitDLFdBQVd1VyxlQUFlbDNDLEVBQU02c0MsYUFDbEUsS0FBSyxFQUlELE9BSEFwakIsRUFBYTE4QixFQUFHakksT0FDaEIrMEUsRUFBVy8zRSxLQUFLbTNFLGtCQUFrQmMsb0JBQW9CdHdDLEVBQVcxUCxVQUNqRUEsRUFBVzBQLEVBQVcxUCxTQUNmLENBQUMsRUFBYWo0QixLQUFLazRFLGlDQUFpQ2g2RCxFQUFPK1osRUFBdUIsWUFBYjgvQyxJQUNoRixLQUFLLEVBQ0Q5RCxFQUFlaHBFLEVBQUdqSSxPQUNkaEQsS0FBS3FoRCxXQUNMcmhELEtBQUtxMkUsWUFBWS9OLE9BQU8zZ0MsR0FFNUIxOEIsRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBRUQsT0FEQS9DLEtBQUtxM0UsbUJBQW1CdGEsY0FBYyxDQUFDa1gsSUFDaEMsQ0FBQyxFQUFjaDhDLFdBUzFDNE8sRUFBV3huQyxVQUFVNjRFLGlDQUFtQyxTQUFVaDZELEVBQU8rWixFQUFVaEosR0FDL0UsT0FBT3pwQixFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlpMkUsRUFBYWdCLEVBQU1rQixFQUFnQkMsRUFBeUJ4akIsRUFBWWxxRCxFQUM1RSxPQUFPbEYsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLNitDLFdBQVc0VyxhQUFhdjNDLEdBQzVCLElBQzlCLEtBQUssRUFlRCxPQWRBKzNELEVBQWNockUsRUFBR2pJLE9BQ2pCaTBFLEVBQU8sSUFBSTdDLEdBQUtsMkQsRUFBTyszRCxFQUFZam9CLFlBQ25DbXFCLEVBQWlCbEIsRUFBS3hDLGtCQUFrQndCLEVBQVk1NUIsV0FDcEQrN0IsRUFBMEJyVixHQUFhQyw4Q0FBOEMvcUMsRUFBVWhKLEdBQVdqdkIsS0FBS3F5RSxjQUFnQnhZLEdBQVl5RyxTQUczSXo2RCxFQUEwQyxLQUYxQyt1RCxFQUFhcWlCLEVBQUsza0MsYUFBYTZsQyxHQUNnQixJQUFuQm40RSxLQUFLcWhELFVBQW9CKzJCLElBQ25DMUMsYUFBYXIxRSxPQUFjLCtEQUM3Q3dGLElBQVMrdUQsRUFBV2lJLFNBQVUsNkRBQzlCbnlELEVBQU8sSUFBSXNzRSxHQUFVOTRELEVBQU8rWixFQUFVZy9DLEdBQ3RDajNFLEtBQUtzM0Usa0JBQWtCcGpFLElBQUlnSyxFQUFPeFQsR0FDN0IxSyxLQUFLdTNFLGdCQUFnQnQvQyxLQUN0Qmo0QixLQUFLdTNFLGdCQUFnQnQvQyxHQUFZLElBRXJDajRCLEtBQUt1M0UsZ0JBQWdCdC9DLEdBQVV4MEIsS0FBS3lhLEdBQzdCLENBQUMsRUFBYzAyQyxFQUFXaUksa0JBVXJEaDJCLEVBQVd4bkMsVUFBVWc1RSxrQ0FBb0MsU0FBVVAsR0FDL0QsT0FBT3R5RSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlpMkUsRUFBYWhDLEVBQ2pCLE9BQU96dUUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLNitDLFdBQVc0VyxhQUFhcWlCLEVBQVU1NUQsT0FDdEMsSUFDOUIsS0FBSyxFQU1ELE9BTEErM0QsRUFBY2hyRSxFQUFHakksT0FDakJpeEUsRUFBZTZELEVBQVViLEtBQUtqQiw4QkFBOEJDLEdBQ3hEajJFLEtBQUtxaEQsV0FDTHJoRCxLQUFLczRFLG9CQUFvQlIsRUFBVTcvQyxTQUFVZzhDLEVBQWF5QixjQUV2RCxDQUFDLEVBQWN6QixXQU0xQ3B0QyxFQUFXeG5DLFVBQVVtcEUsU0FBVyxTQUFVdHFELEdBQ3RDLE9BQU8xWSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUk4M0UsRUFBVzFGLEVBQ1gxb0UsRUFBUTFKLEtBQ1osT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUtELE9BSkEvQyxLQUFLZzRFLGlCQUFpQixjQUV0Qm55RSxLQURBaXlFLEVBQVk5M0UsS0FBS3MzRSxrQkFBa0JoNUUsSUFBSTRmLElBQ25CLHlDQUEyQ0EsSUFDL0RrMEQsRUFBVXB5RSxLQUFLdTNFLGdCQUFnQk8sRUFBVTcvQyxXQUM3QjUzQixPQUFTLEdBQ2pCTCxLQUFLdTNFLGdCQUFnQk8sRUFBVTcvQyxVQUFZbTZDLEVBQVE3OEQsUUFBTyxTQUFVN1EsR0FBSyxPQUFRQSxFQUFFNGxCLFFBQVFwTSxNQUMzRmxlLEtBQUtzM0Usa0JBQWtCcGlFLE9BQU9nSixHQUN2QixDQUFDLElBRVBsZSxLQUFLcWhELFdBR1ZyaEQsS0FBS20zRSxrQkFBa0JvQix1QkFBdUJULEVBQVU3L0MsVUFDbENqNEIsS0FBS20zRSxrQkFBa0JxQixvQkFBb0JWLEVBQVU3L0MsVUFDekMsQ0FBQyxFQUFhLEdBQ3pDLENBQUMsRUFBYWo0QixLQUFLNitDLFdBQ2pCeVcsY0FBY3dpQixFQUFVNy9DLFVBQXVDLEdBQy9EejFCLE1BQUssV0FDTmtILEVBQU15dEUsa0JBQWtCc0IsZ0JBQWdCWCxFQUFVNy9DLFVBQ2xEdnVCLEVBQU0yc0UsWUFBWTdOLFNBQVNzUCxFQUFVNy9DLFVBQ3JDdnVCLEVBQU1ndkUsdUJBQXVCWixFQUFVNy9DLGFBRXRDbnVCLE1BQU11MUMsTUFiYSxDQUFDLEVBQWEsR0FjOUMsS0FBSyxFQUNEcDBDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEsR0FDN0IsS0FBSyxFQUVELE9BREEvQyxLQUFLMDRFLHVCQUF1QlosRUFBVTcvQyxVQUMvQixDQUFDLEVBQWFqNEIsS0FBSzYrQyxXQUFXeVcsY0FBY3dpQixFQUFVNy9DLFVBQzVCLElBQ3JDLEtBQUssRUFDRGh0QixFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQWVoQzhqQyxFQUFXeG5DLFVBQVVnZ0UsTUFBUSxTQUFVbmxDLEVBQU95K0MsR0FDMUMsT0FBT256RSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUlzQyxFQUNKLE9BQU9rRCxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBL0MsS0FBS2c0RSxpQkFBaUIsV0FDZixDQUFDLEVBQWFoNEUsS0FBSzYrQyxXQUFXa1UsV0FBVzc0QixJQUNwRCxLQUFLLEVBSUQsT0FIQTUzQixFQUFTMkksRUFBR2pJLE9BQ1poRCxLQUFLbTNFLGtCQUFrQnlCLG1CQUFtQnQyRSxFQUFPeTJCLFNBQ2pELzRCLEtBQUs2NEUsb0JBQW9CdjJFLEVBQU95MkIsUUFBUzQvQyxHQUNsQyxDQUFDLEVBQWEzNEUsS0FBSzg0RSxnQ0FBZ0N4MkUsRUFBT212QyxVQUNyRSxLQUFLLEVBRUQsT0FEQXhtQyxFQUFHakksT0FDSSxDQUFDLEVBQWFoRCxLQUFLcTJFLFlBQVluTyxxQkFDMUMsS0FBSyxFQUVELE9BREFqOUQsRUFBR2pJLE9BQ0ksQ0FBQyxXQXNCNUI2akMsRUFBV3huQyxVQUFVaytCLGVBQWlCLFNBQVV6TixFQUFZd21ELEVBQWdCcmlFLEdBQ3hFLElBQUltaUUsR0FBa0J0bUQsRUFBWTl2QixLQUFLcTJFLFlBQWFDLEVBQWdCcmlFLEdBQVV3aUUsT0FFbEY1dkMsRUFBV3huQyxVQUFVbTBELGlCQUFtQixTQUFVQyxHQUM5QyxPQUFPanVELEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSXl4QyxFQUNBL25DLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRC9DLEtBQUtnNEUsaUJBQWlCLHNCQUN0Qi9zRSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYXpELEtBQUs2K0MsV0FBVzJVLGlCQUFpQkMsSUFDMUQsS0FBSyxFQXdCRCxPQXZCQWhpQixFQUFVeG1DLEVBQUdqSSxPQUVid08sRUFBUWlpRCxFQUFZRyxlQUFlLFNBQVUzN0IsRUFBVXF0QyxHQUNuRCxJQUFJeVQsRUFBa0JydkUsRUFBTSt0RSx5QkFBeUI3d0QsT0FBT3FSLElBQ3hEOGdELElBR0FsekUsRUFBT3kvRCxFQUFhdlIsZUFBZXBtQyxLQUMvQjIzQyxFQUFhOVEsa0JBQWtCN21DLEtBQy9CMjNDLEVBQWFwZ0MsaUJBQWlCdlgsTUFDOUIsRUFBRyxtRUFDSDIzQyxFQUFhdlIsZUFBZXBtQyxLQUFPLEVBQ25Db3JELEVBQWdCN0Isa0JBQW1CLEVBRTlCNVIsRUFBYTlRLGtCQUFrQjdtQyxLQUFPLEVBQzNDOW5CLEVBQU9rekUsRUFBZ0I3QixpQkFBa0IsMERBRXBDNVIsRUFBYXBnQyxpQkFBaUJ2WCxLQUFPLElBQzFDOW5CLEVBQU9rekUsRUFBZ0I3QixpQkFBa0IsMERBQ3pDNkIsRUFBZ0I3QixrQkFBbUIsT0FJeEMsQ0FBQyxFQUFhbDNFLEtBQUs4NEUsZ0NBQWdDcm5DLEVBQVNnaUIsSUFDdkUsS0FBSyxFQUVELE9BREF4b0QsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFFRCxNQUFPLENBQUMsRUFBYXE4QyxHQURYcDBDLEVBQUdqSSxTQUVqQixLQUFLLEVBRUQsT0FEQWlJLEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBU2hDNmpDLEVBQVd4bkMsVUFBVW96RSx1QkFBeUIsU0FBVUosRUFBYWpwRSxHQUtqRSxHQUFLcEosS0FBS3FoRCxXQUFhajRDLElBQVcwd0QsR0FBa0IrTSxjQUM5QzdtRSxLQUFLcWhELFdBQWFqNEMsSUFBVzB3RCxHQUFrQmtmLGtCQUFvQixDQUNyRWg1RSxLQUFLZzRFLGlCQUFpQiw0QkFDdEIsSUFBSWlCLEVBQXFCLEdBQ3pCajVFLEtBQUtzM0Usa0JBQWtCOWxFLFNBQVEsU0FBVTBNLEVBQU80NUQsR0FDNUMsSUFBSWxqQixFQUFha2pCLEVBQVViLEtBQUt4RSx1QkFBdUJKLEdBQ3ZEeHNFLEVBQTBDLElBQW5DK3VELEVBQVc4Z0IsYUFBYXIxRSxPQUFjLGtEQUN6Q3UwRCxFQUFXaUksVUFDWG9jLEVBQW1CeDFFLEtBQUtteEQsRUFBV2lJLGFBRzNDNzhELEtBQUtxM0UsbUJBQW1CcEUsb0JBQW9CWixHQUM1Q3J5RSxLQUFLcTNFLG1CQUFtQnRhLGNBQWNrYyxHQUN0Q2o1RSxLQUFLcXlFLFlBQWNBLEVBQ2ZyeUUsS0FBS3FoRCxXQUNMcmhELEtBQUttM0Usa0JBQWtCK0IsZUFBZTdHLEtBSWxEeHJDLEVBQVd4bkMsVUFBVTBwRSxhQUFlLFNBQVU5d0MsRUFBVW5wQixHQUNwRCxPQUFPdEosRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJKzRFLEVBQWlCSSxFQUFVaGxCLEVBQWlCRSxFQUF3QitrQixFQUNwRTF2RSxFQUFRMUosS0FDWixPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBTUQsT0FMQS9DLEtBQUtnNEUsaUJBQWlCLG1CQUV0Qmg0RSxLQUFLbTNFLGtCQUFrQmtDLGlCQUFpQnBoRCxFQUFVLFdBQVlucEIsR0FDOURpcUUsRUFBa0IvNEUsS0FBS3kzRSx5QkFBeUJ4L0MsSUFDaERraEQsRUFBV0osR0FBbUJBLEVBQWdCLzVFLE1BSTlDZ0IsS0FBS3czRSxrQkFBb0J4M0UsS0FBS3czRSxrQkFBa0JsMkQsT0FBTzYzRCxVQUNoRG41RSxLQUFLeTNFLHlCQUF5QngvQyxHQUVyQ2s4QixHQURBQSxFQUFrQixJQUFJLy9CLEdBQVVoRixHQUFZaEMsYUFDVnBNLE9BQU9tNEQsRUFBVSxJQUFJanNDLEdBQVdpc0MsRUFBVXZsRCxHQUFnQkksa0JBQzVGcWdDLEVBQXlCMzdCLEtBQWlCekIsSUFBSWtpRCxHQUM5Q0MsRUFBVSxJQUFJeFcsR0FBWWh2QyxHQUFnQkssSUFDckIsR0FDRyxJQUFJOEMsR0FBVTdNLEdBQXNCaXFDLEVBQWlCRSxHQUN0RSxDQUFDLEVBQWNyMEQsS0FBS3d6RCxpQkFBaUI0bEIsS0FYdEIsQ0FBQyxFQUFhLEdBWXhDLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXA1RSxLQUFLNitDLFdBQ3pCeVcsY0FBY3I5QixHQUF3QyxHQUN0RHoxQixNQUFLLFdBQWMsT0FBT2tILEVBQU1ndkUsdUJBQXVCemdELEVBQVVucEIsTUFDakVoRixNQUFNdTFDLEtBQ2YsS0FBSyxFQUNEcDBDLEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBTWhDOGpDLEVBQVd4bkMsVUFBVWk2RSxnQkFBa0IsU0FBVXZnRCxFQUFTd2dELEVBQVl6MUUsR0FDbEUsT0FBTzBCLEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSXE4QyxFQUNKLE9BQU83MkMsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0FEQS9DLEtBQUtnNEUsaUJBQWlCLHFCQUNmLENBQUMsRUFBYWg0RSxLQUFLNitDLFdBQVdxVSx3QkFBd0JuNkIsSUFDakUsS0FBSyxFQUVELE9BQWtCLFFBRGxCc2pCLEVBQVlweEMsRUFBR2pJLFNBU1gyVSxFQTdhWixhQTZhNkIsd0NBQTBDb2hCLEdBQ3BELENBQUMsSUFFUyxZQUFmd2dELEVBQWtDLENBQUMsRUFBYSxHQUkvQyxDQUFDLEVBQWF2NUUsS0FBS3EyRSxZQUFZbk8scUJBQzFDLEtBQUssRUFLRCxPQURBajlELEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQ2tCLGlCQUFmdTJFLEdBQWdELGFBQWZBLEdBR2pDdjVFLEtBQUt3NUUsb0JBQW9CemdELEVBQVNqMUIsR0FBZ0IsTUFDbEQ5RCxLQUFLNitDLFdBQVcrVyxrQ0FBa0M3OEIsSUFHbERsVSxFQUFLLHVCQUF5QjAwRCxHQUVsQ3R1RSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUs4NEUsZ0NBQWdDejhCLElBQ2xFLEtBQUssRUFFRCxPQURBcHhDLEVBQUdqSSxPQUNJLENBQUMsV0FLNUI2akMsRUFBV3huQyxVQUFVa3FFLHFCQUF1QixTQUFVa1EsR0FDbEQsT0FBT2owRSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkrNEIsRUFBUzBZLEVBQ2IsT0FBT2pzQyxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRC9DLEtBQUtnNEUsaUJBQWlCLDBCQUN0QmovQyxFQUFVMGdELEVBQW9Cdi9DLE1BQU1uQixRQUtwQy80QixLQUFLdzVFLG9CQUFvQnpnRCxFQUFvQixNQUM3Qy80QixLQUFLMDVFLDhCQUE4QjNnRCxHQUNuQzl0QixFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYXpELEtBQUs2K0MsV0FBVy9jLGlCQUFpQjIzQyxJQUMxRCxLQUFLLEVBR0QsT0FGQWhvQyxFQUFVeG1DLEVBQUdqSSxPQUNiaEQsS0FBS20zRSxrQkFBa0J3QyxvQkFBb0I1Z0QsRUFBUyxnQkFDN0MsQ0FBQyxFQUFhLzRCLEtBQUs4NEUsZ0NBQWdDcm5DLElBQzlELEtBQUssRUFFRCxPQURBeG1DLEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBRUQsTUFBTyxDQUFDLEVBQWFxOEMsR0FEWHAwQyxFQUFHakksU0FFakIsS0FBSyxFQUVELE9BREFpSSxFQUFHakksT0FDSSxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQUtoQzZqQyxFQUFXeG5DLFVBQVVxcUUsa0JBQW9CLFNBQVUzd0MsRUFBU2oxQixHQUN4RCxPQUFPMEIsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJeXhDLEVBQ0osT0FBT2pzQyxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRC9DLEtBQUtnNEUsaUJBQWlCLHVCQUt0Qmg0RSxLQUFLdzVFLG9CQUFvQnpnRCxFQUFTajFCLEdBQ2xDOUQsS0FBSzA1RSw4QkFBOEIzZ0QsR0FDbkM5dEIsRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBRUQsT0FEQWtJLEVBQUdoSSxLQUFLUSxLQUFLLENBQUMsRUFBRyxFQUFHLENBQUUsSUFDZixDQUFDLEVBQWF6RCxLQUFLNitDLFdBQVd5VSxZQUFZdjZCLElBQ3JELEtBQUssRUFHRCxPQUZBMFksRUFBVXhtQyxFQUFHakksT0FDYmhELEtBQUttM0Usa0JBQWtCd0Msb0JBQW9CNWdELEVBQVMsV0FBWWoxQixHQUN6RCxDQUFDLEVBQWE5RCxLQUFLODRFLGdDQUFnQ3JuQyxJQUM5RCxLQUFLLEVBRUQsT0FEQXhtQyxFQUFHakksT0FDSSxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUVELE1BQU8sQ0FBQyxFQUFhcThDLEdBRFhwMEMsRUFBR2pJLFNBRWpCLEtBQUssRUFFRCxPQURBaUksRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFBRyxNQUFPLENBQUMsV0FTaEM2akMsRUFBV3huQyxVQUFVdTZFLDhCQUFnQyxTQUFVL3ZFLEdBQzNELE9BQU9yRSxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUk2NUUsRUFBZ0JDLEVBQ3BCLE9BQU90MEUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBS0QsT0FKSy9DLEtBQUtxMkUsWUFBWWpQLGlCQUNsQnp2RCxFQWhpQlosYUFnaUI2Qix3SEFHZCxDQUFDLEVBQWEzWCxLQUFLNitDLFdBQVduYixtQ0FDekMsS0FBSyxFQUVELE9BbGdlRixLQWlnZUVtMkMsRUFBaUI1dUUsRUFBR2pJLFNBR2hCNkcsRUFBUzdILFVBQ0YsQ0FBQyxNQUVaODNFLEVBQVk5NUUsS0FBSzQzRSx1QkFBdUJ0NUUsSUFBSXU3RSxJQUFtQixJQUNyRHAyRSxLQUFLb0csR0FDZjdKLEtBQUs0M0UsdUJBQXVCMWpFLElBQUkybEUsRUFBZ0JDLEdBQ3pDLENBQUMsWUFTNUJqekMsRUFBV3huQyxVQUFVcTZFLDhCQUFnQyxTQUFVM2dELElBQzFELzRCLEtBQUs0M0UsdUJBQXVCdDVFLElBQUl5NkIsSUFBWSxJQUFJdm5CLFNBQVEsU0FBVTNILEdBQy9EQSxFQUFTN0gsYUFFYmhDLEtBQUs0M0UsdUJBQXVCMWlFLE9BQU82akIsSUFHdkM4TixFQUFXeG5DLFVBQVUwNkUsd0NBQTBDLFNBQVVDLEdBQ3JFaDZFLEtBQUs0M0UsdUJBQXVCcG1FLFNBQVEsU0FBVXNvRSxHQUMxQ0EsRUFBVXRvRSxTQUFRLFNBQVUzSCxHQUN4QkEsRUFBUzVILE9BQU8sSUFBSWlrQixFQUFlakIsRUFBS0UsVUFBVzYwRCxVQUczRGg2RSxLQUFLNDNFLHVCQUF1QnFDLFNBRWhDcHpDLEVBQVd4bkMsVUFBVXc1RSxvQkFBc0IsU0FBVTkvQyxFQUFTbHZCLEdBQzFELElBQUlxd0UsRUFBZWw2RSxLQUFLMjNFLHNCQUFzQjMzRSxLQUFLbzNFLFlBQVluZixTQUMxRGlpQixJQUNEQSxFQUFlLElBQUk5bEQsR0FBVWxLLElBRWpDZ3dELEVBQWVBLEVBQWFsNUQsT0FBTytYLEVBQVNsdkIsR0FDNUM3SixLQUFLMjNFLHNCQUFzQjMzRSxLQUFLbzNFLFlBQVluZixTQUFXaWlCLEdBTTNEcnpDLEVBQVd4bkMsVUFBVW02RSxvQkFBc0IsU0FBVXpnRCxFQUFTajFCLEdBQzFELElBQUlvMkUsRUFBZWw2RSxLQUFLMjNFLHNCQUFzQjMzRSxLQUFLbzNFLFlBQVluZixTQUcvRCxHQUFJaWlCLEVBQWMsQ0FDZCxJQUFJcndFLEVBQVdxd0UsRUFBYTU3RSxJQUFJeTZCLEdBQzVCbHZCLElBQ0FoRSxFQUFPa3pCLElBQVltaEQsRUFBYXRsRCxTQUFVLDhDQUN0Qzl3QixFQUNBK0YsRUFBUzVILE9BQU82QixHQUdoQitGLEVBQVM3SCxVQUViazRFLEVBQWVBLEVBQWE1NEQsT0FBT3lYLElBRXZDLzRCLEtBQUsyM0Usc0JBQXNCMzNFLEtBQUtvM0UsWUFBWW5mLFNBQVdpaUIsSUFHL0RyekMsRUFBV3huQyxVQUFVcTVFLHVCQUF5QixTQUFVemdELEVBQVVuMEIsR0FDOUQsSUFBSTRGLEVBQVExSixVQUNFLElBQVY4RCxJQUFvQkEsRUFBUSxNQUNoQzlELEtBQUttM0Usa0JBQWtCb0IsdUJBQXVCdGdELEdBQzlDcHlCLEVBQU83RixLQUFLdTNFLGdCQUFnQnQvQyxJQUNrQixJQUExQ2o0QixLQUFLdTNFLGdCQUFnQnQvQyxHQUFVNTNCLE9BQWMsNENBQThDNDNCLEdBQy9GLElBQUssSUFBSXR0QixFQUFLLEVBQUdNLEVBQUtqTCxLQUFLdTNFLGdCQUFnQnQvQyxHQUFXdHRCLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUN4RSxJQUFJdVQsRUFBUWpULEVBQUdOLEdBQ2YzSyxLQUFLczNFLGtCQUFrQnBpRSxPQUFPZ0osR0FDMUJwYSxHQUNBOUQsS0FBS3EzRSxtQkFBbUJyRSxhQUFhOTBELEVBQU9wYSxHQUlwRCxVQURPOUQsS0FBS3UzRSxnQkFBZ0J0L0MsR0FDeEJqNEIsS0FBS3FoRCxVQUFXLENBQ2hCLElBQUk4NEIsRUFBWW42RSxLQUFLMDNFLGtCQUFrQnBtQixnQkFBZ0JyNUIsR0FDdkRqNEIsS0FBSzAzRSxrQkFBa0J6bUIsc0JBQXNCaDVCLEdBQzdDa2lELEVBQVUzb0UsU0FBUSxTQUFVMm5FLEdBQ0x6dkUsRUFBTWd1RSxrQkFBa0JqeUMsWUFBWTB6QyxJQUduRHp2RSxFQUFNMHdFLGtCQUFrQmpCLFFBS3hDdHlDLEVBQVd4bkMsVUFBVSs2RSxrQkFBb0IsU0FBVXA3RSxHQUcvQyxJQUFJcTdFLEVBQWdCcjZFLEtBQUt3M0Usa0JBQWtCbDVFLElBQUlVLEdBQ3pCLE9BQWxCcTdFLElBSUpyNkUsS0FBS3EyRSxZQUFZN04sU0FBUzZSLEdBQzFCcjZFLEtBQUt3M0Usa0JBQW9CeDNFLEtBQUt3M0Usa0JBQWtCbDJELE9BQU90aUIsVUFDaERnQixLQUFLeTNFLHlCQUF5QjRDLEtBRXpDeHpDLEVBQVd4bkMsVUFBVWk1RSxvQkFBc0IsU0FBVXJnRCxFQUFVeTlDLEdBQzNELElBQUssSUFBSS9xRSxFQUFLLEVBQUcydkUsRUFBaUI1RSxFQUFjL3FFLEVBQUsydkUsRUFBZWo2RSxPQUFRc0ssSUFBTSxDQUM5RSxJQUFJNHZFLEVBQWNELEVBQWUzdkUsR0FDakMsR0FBSTR2RSxhQUF1QnJHLEdBQ3ZCbDBFLEtBQUswM0Usa0JBQWtCdnVDLGFBQWFveEMsRUFBWXY3RSxJQUFLaTVCLEdBQ3JEajRCLEtBQUt3NkUsaUJBQWlCRCxRQUVyQixHQUFJQSxhQUF1QnBHLEdBQXNCLENBQ2xEeDhELEVBbnBCQSxhQW1wQmlCLGdDQUFrQzRpRSxFQUFZdjdFLEtBQy9EZ0IsS0FBSzAzRSxrQkFBa0JydUMsZ0JBQWdCa3hDLEVBQVl2N0UsSUFBS2k1QixHQUNyQ2o0QixLQUFLMDNFLGtCQUFrQmp5QyxZQUFZODBDLEVBQVl2N0UsTUFHOURnQixLQUFLbzZFLGtCQUFrQkcsRUFBWXY3RSxVQUl2QzZsQixFQUFLLHlCQUEyQm5aLEtBQUtzRyxVQUFVdW9FLE1BSTNEMXpDLEVBQVd4bkMsVUFBVW03RSxpQkFBbUIsU0FBVUQsR0FDOUMsSUFBSXY3RSxFQUFNdTdFLEVBQVl2N0UsSUFDdEIsSUFBS2dCLEtBQUt3M0Usa0JBQWtCbDVFLElBQUlVLEdBQU0sQ0FDbEMyWSxFQW5xQkksYUFtcUJhLDBCQUE0QjNZLEdBQzdDLElBQUlxN0UsRUFBZ0JyNkUsS0FBSzYzRSx1QkFBdUJ6MUUsT0FDNUM4YixFQUFRNHFDLEdBQU1PLE9BQU9ycUQsRUFBSXl2QixNQUM3Qnp1QixLQUFLeTNFLHlCQUF5QjRDLEdBQWlCLElBQUkvVCxHQUFnQnRuRSxHQUNuRWdCLEtBQUtxMkUsWUFBWS9OLE9BQU8sSUFBSTd0QixHQUFXdjhCLEVBQU02c0MsV0FBWXN2QixFQUFldGdDLEdBQWN1c0IsZ0JBQWlCajZDLEdBQWVXLFVBQ3RIaHRCLEtBQUt3M0Usa0JBQW9CeDNFLEtBQUt3M0Usa0JBQWtCeDJELE9BQU9oaUIsRUFBS3E3RSxLQUlwRXh6QyxFQUFXeG5DLFVBQVVvN0UsaUJBQW1CLFdBQ3BDLE9BQU96NkUsS0FBS3czRSxtQkFFaEIzd0MsRUFBV3huQyxVQUFVeTVFLGdDQUFrQyxTQUFVcm5DLEVBQVNnaUIsR0FDdEUsT0FBT2p1RCxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkwNkUsRUFBVUMsRUFBc0JDLEVBQ2hDbHhFLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFvQ0QsT0FuQ0EyM0UsRUFBVyxHQUNYQyxFQUF1QixHQUN2QkMsRUFBbUIsR0FDbkI1NkUsS0FBS3MzRSxrQkFBa0I5bEUsU0FBUSxTQUFVMU8sRUFBR2cxRSxHQUN4QzhDLEVBQWlCbjNFLEtBQUsxQixRQUFRQyxVQUN6QlEsTUFBSyxXQUNOLElBQUkyMUUsRUFBaUJMLEVBQVViLEtBQUt4QyxrQkFBa0JoakMsR0FDdEQsT0FBSzBtQyxFQUFlOXBCLFlBTWIza0QsRUFBTW0xQyxXQUNSNFcsYUFBYXFpQixFQUFVNTVELE9BQWlDLEdBQ3hEMWIsTUFBSyxTQUFVeUksR0FDaEIsSUFBSW94QyxFQUFZcHhDLEVBQUdveEMsVUFDbkIsT0FBT3k3QixFQUFVYixLQUFLeEMsa0JBQWtCcDRCLEVBQVc4N0IsTUFUNUNBLEtBWVYzMUUsTUFBSyxTQUFVMjFFLEdBQ2hCLElBQUk3UyxFQUFlN1IsR0FBZUEsRUFBWUcsY0FBY2trQixFQUFVNy9DLFVBQ2xFMjhCLEVBQWFrakIsRUFBVWIsS0FBSzNrQyxhQUFhNmxDLEdBQ0csSUFBcEJ6dUUsRUFBTTIzQyxVQUFvQmlrQixHQUV0RCxHQURBNTdELEVBQU00dUUsb0JBQW9CUixFQUFVNy9DLFNBQVUyOEIsRUFBVzhnQixjQUNyRDlnQixFQUFXaUksU0FBVSxDQUNqQm56RCxFQUFNMjNDLFdBQ04zM0MsRUFBTXl0RSxrQkFBa0JrQyxpQkFBaUJ2QixFQUFVNy9DLFNBQVUyOEIsRUFBV2lJLFNBQVM5SCxVQUFZLGNBQWdCLFdBRWpIMmxCLEVBQVNqM0UsS0FBS214RCxFQUFXaUksVUFDekIsSUFBSXlGLEVBQWF5UixHQUFpQkMsYUFBYThELEVBQVU3L0MsU0FBVTI4QixFQUFXaUksVUFDOUU4ZCxFQUFxQmwzRSxLQUFLNitELFdBSS9CLENBQUMsRUFBYXZnRSxRQUFRdVQsSUFBSXNsRSxJQUNyQyxLQUFLLEVBR0QsT0FGQTN2RSxFQUFHakksT0FDSGhELEtBQUtxM0UsbUJBQW1CdGEsY0FBYzJkLEdBQy9CLENBQUMsRUFBYTE2RSxLQUFLNitDLFdBQVc0Vix1QkFBdUJrbUIsSUFDaEUsS0FBSyxFQUVELE9BREExdkUsRUFBR2pJLE9BQ0ksQ0FBQyxXQUs1QjZqQyxFQUFXeG5DLFVBQVUyNEUsaUJBQW1CLFNBQVVocEUsR0FDOUNuSixFQUFtQyxPQUE1QjdGLEtBQUtxM0UsbUJBQTZCLGtCQUFvQnJvRSxFQUFTLGlDQUUxRTYzQixFQUFXeG5DLFVBQVV1cUUsdUJBQXlCLFNBQVUxb0MsR0FDcEQsT0FBTzE3QixFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUk2NkUsRUFBYXY0RSxFQUNqQixPQUFPa0QsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBR0QsT0FGQTgzRSxHQUFlNzZFLEtBQUtvM0UsWUFBWTlzRCxRQUFRNFcsR0FDeENsaEMsS0FBS28zRSxZQUFjbDJDLEVBQ2QyNUMsR0FFTDc2RSxLQUFLKzVFLHdDQUF3QyxvRUFDdEMsQ0FBQyxFQUFhLzVFLEtBQUs2K0MsV0FBV3FULGlCQUFpQmh4QixLQUg3QixDQUFDLEVBQWEsR0FJM0MsS0FBSyxFQUlELE9BSEE1K0IsRUFBUzJJLEVBQUdqSSxPQUVaaEQsS0FBS20zRSxrQkFBa0JqbEIsaUJBQWlCaHhCLEVBQU01K0IsRUFBT2t3RCxnQkFBaUJsd0QsRUFBT213RCxlQUN0RSxDQUFDLEVBQWF6eUQsS0FBSzg0RSxnQ0FBZ0N4MkUsRUFBT3d3RCxvQkFDckUsS0FBSyxFQUNEN25ELEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLcTJFLFlBQVl6TSwwQkFDOUMsS0FBSyxFQUVELE9BREEzK0QsRUFBR2pJLE9BQ0ksQ0FBQyxXQU01QjZqQyxFQUFXeG5DLFVBQVV3cUUsa0JBQW9CLFNBQVV4b0IsR0FDL0MsT0FBTzc3QyxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUk4NkUsRUFBZUMsRUFBZXB3RSxFQUFJcXdFLEVBQWlCcnpDLEVBQVlzekMsRUFBaUJDLEVBQ2hGeHhFLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxPQUFvQixJQUFkcytDLElBQXlDLElBQW5CcmhELEtBQUtxaEQsVUFBNEIsQ0FBQyxFQUFhLElBQzNFcmhELEtBQUtxaEQsV0FBWSxFQUNWLENBQUMsRUFBYXJoRCxLQUFLcTJFLFlBQVl4TSxtQkFBa0IsS0FDNUQsS0FBSyxFQUdELE9BRkE1K0QsRUFBR2pJLE9BQ0g4M0UsRUFBZ0I5NkUsS0FBS20zRSxrQkFBa0JnRSwyQkFDaEMsQ0FBQyxFQUFhbjdFLEtBQUtvN0UsdUNBQXVDTixFQUFjNy9ELFlBQ25GLEtBQUssRUFFRCxJQURBOC9ELEVBQWdCOXZFLEVBQUdqSSxPQUNkMkgsRUFBSyxFQUFHcXdFLEVBQWtCRCxFQUFlcHdFLEVBQUtxd0UsRUFBZ0IzNkUsT0FBUXNLLElBQ3ZFZzlCLEVBQWFxekMsRUFBZ0Jyd0UsR0FDN0IzSyxLQUFLcTJFLFlBQVkvTixPQUFPM2dDLEdBRTVCLE1BQU8sQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFDRCxPQUFvQixJQUFkMFosSUFBMEMsSUFBbkJyaEQsS0FBS3FoRCxVQUE2QixDQUFDLEVBQWEsSUFDN0VyaEQsS0FBS3FoRCxXQUFZLEVBQ2pCNDVCLEVBQWtCLEdBQ2xCQyxFQUFNbjVFLFFBQVFDLFVBQ2Qwa0IsRUFBYzFtQixLQUFLdTNFLGlCQUFpQixTQUFVdC9DLEVBQVVuMUIsR0FDaEQ0RyxFQUFNeXRFLGtCQUFrQmtFLG1CQUFtQnBqRCxHQUMzQ2dqRCxFQUFnQngzRSxLQUFLdzBCLEdBR3JCaWpELEVBQU1BLEVBQUkxNEUsTUFBSyxXQUVYLE9BREFrSCxFQUFNZ3ZFLHVCQUF1QnpnRCxHQUN0QnZ1QixFQUFNbTFDLFdBQVd5VyxjQUFjcjlCLEdBQ1QsTUFHckN2dUIsRUFBTTJzRSxZQUFZN04sU0FBU3Z3QyxNQUV4QixDQUFDLEVBQWFpakQsSUFDekIsS0FBSyxFQUVELE9BREFqd0UsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhaEQsS0FBS283RSx1Q0FBdUNILElBQ3JFLEtBQUssRUFHRCxPQUZBaHdFLEVBQUdqSSxPQUNIaEQsS0FBS3M3RSxzQkFDRSxDQUFDLEVBQWF0N0UsS0FBS3EyRSxZQUFZeE0sbUJBQWtCLElBQzVELEtBQUssRUFDRDUrRCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQU1oQzhqQyxFQUFXeG5DLFVBQVVpOEUsb0JBQXNCLFdBQ3ZDLElBQUk1eEUsRUFBUTFKLEtBQ1owbUIsRUFBYzFtQixLQUFLeTNFLDBCQUEwQixTQUFVeC9DLEdBQ25EdnVCLEVBQU0yc0UsWUFBWTdOLFNBQVN2d0MsTUFFL0JqNEIsS0FBSzAzRSxrQkFBa0JybUIsc0JBQ3ZCcnhELEtBQUt5M0UseUJBQTJCLEdBQ2hDejNFLEtBQUt3M0Usa0JBQW9CLElBQUlwakQsR0FBVWhGLEdBQVloQyxhQVF2RHlaLEVBQVd4bkMsVUFBVSs3RSx1Q0FBeUMsU0FBVWhrQixHQUNwRSxPQUFPNXhELEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsSUFBSSs2RSxFQUFlUSxFQUFrQjV3RSxFQUFJNndFLEVBQVd2akQsRUFBVTBQLEVBQVl5cUMsRUFBU25uRSxFQUFJd3dFLEVBQVd2OUQsRUFBTzQ1RCxFQUFXbGpCLEVBQVk5ekQsRUFDaEksT0FBTzBFLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVa0wsR0FDckMsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQUNEZzRFLEVBQWdCLEdBQ2hCUSxFQUFtQixHQUNuQjV3RSxFQUFLLEVBQUc2d0UsRUFBWXBrQixFQUNwQmxzRCxFQUFHbkksTUFBUSxFQUNmLEtBQUssRUFDRCxPQUFNNEgsRUFBSzZ3RSxFQUFVbjdFLFFBQ3JCNDNCLEVBQVd1akQsRUFBVTd3RSxHQUNyQmc5QixPQUFhLEdBQ2J5cUMsRUFBVXB5RSxLQUFLdTNFLGdCQUFnQnQvQyxLQUNLLElBQW5CbTZDLEVBQVEveEUsT0FLbEIsQ0FBQyxFQUFhTCxLQUFLNitDLFdBQVd5VyxjQUFjcjlCLEdBQ2xCLElBTmMsQ0FBQyxFQUFhLElBSnhCLENBQUMsRUFBYSxJQVd2RCxLQUFLLEVBTUQsT0FEQS9zQixFQUFHbEksT0FDSSxDQUFDLEVBQWFoRCxLQUFLNitDLFdBQVd1VyxlQUFlZ2QsRUFBUSxHQUFHcm5CLGFBQ25FLEtBQUssRUFDRHBqQixFQUFhejhCLEVBQUdsSSxPQUNoQmlJLEVBQUssRUFBR3d3RSxFQUFZckosRUFDcEJsbkUsRUFBR25JLE1BQVEsRUFDZixLQUFLLEVBQ0QsT0FBTWtJLEVBQUt3d0UsRUFBVXA3RSxRQUNyQjZkLEVBQVF1OUQsRUFBVXh3RSxHQUVsQnBGLEtBREFpeUUsRUFBWTkzRSxLQUFLczNFLGtCQUFrQmg1RSxJQUFJNGYsSUFDbkIsMkJBQTZCQSxHQUMxQyxDQUFDLEVBQWFsZSxLQUFLcTRFLGtDQUFrQ1AsS0FKdkIsQ0FBQyxFQUFhLEdBS3ZELEtBQUssR0FDRGxqQixFQUFhMXBELEVBQUdsSSxRQUNENjVELFVBQ1gwZSxFQUFpQjkzRSxLQUFLbXhELEVBQVdpSSxVQUVyQzN4RCxFQUFHbkksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksSUFDTyxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhLElBQzdCLEtBQUssRUFFRCxPQURBcEYsR0FBMEIsSUFBbkI3RixLQUFLcWhELFVBQW9CLCtFQUN6QixDQUFDLEVBQWFyaEQsS0FBSzYrQyxXQUFXeC9CLFVBQVU0WSxJQUNuRCxLQUFLLEVBR0QsT0FEQXB5QixLQURBL0UsRUFBU29LLEVBQUdsSSxRQUNLLGlCQUFtQmkxQixFQUFXLGNBQ3hDLENBQUMsRUFBYWo0QixLQUFLNitDLFdBQVd1VyxlQUFldDBELElBQ3hELEtBQUssR0FFRCxPQURBNm1DLEVBQWF6OEIsRUFBR2xJLE9BQ1QsQ0FBQyxFQUFhaEQsS0FBS2s0RSxpQ0FBaUNsNEUsS0FBSzA3RSx3QkFBd0I1NkUsR0FBU20zQixHQUNoRixJQUNyQixLQUFLLEdBQ0Qvc0IsRUFBR2xJLE9BQ0hrSSxFQUFHbkksTUFBUSxHQUNmLEtBQUssR0FDRGc0RSxFQUFjdDNFLEtBQUtra0MsR0FDbkJ6OEIsRUFBR25JLE1BQVEsR0FDZixLQUFLLEdBRUQsT0FEQTRILElBQ08sQ0FBQyxFQUFhLEdBQ3pCLEtBQUssR0FFRCxPQURBM0ssS0FBS3EzRSxtQkFBbUJ0YSxjQUFjd2UsR0FDL0IsQ0FBQyxFQUFjUixXQWdCMUNsMEMsRUFBV3huQyxVQUFVcThFLHdCQUEwQixTQUFVNTZFLEdBQ3JELE9BQU8sSUFBSWdvRCxHQUFNaG9ELEVBQU8ydEIsS0FBTTN0QixFQUFPMG5ELGdCQUFpQjFuRCxFQUFPMm5ELFFBQVMzbkQsRUFBTzRuRCxRQUFTNW5ELEVBQU95c0IsTUFBTys2QixHQUFVVyxNQUFPbm9ELEVBQU82bkQsUUFBUzduRCxFQUFPOG5ELFFBR2hKL2hCLEVBQVd4bkMsVUFBVWdtRCxpQkFBbUIsV0FDcEMsT0FBT3JsRCxLQUFLNitDLFdBQVd3RyxvQkFHM0J4ZSxFQUFXeG5DLFVBQVVzOEUsaUJBQW1CLFNBQVUxakQsRUFBVW1pQyxFQUFPdDJELEdBQy9ELE9BQU8wQixFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQVF5eEMsRUFBU21xQyxFQUNqQixPQUFPcDJFLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVa0wsR0FDckMsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQUNELEdBQUkvQyxLQUFLcWhELFVBSUwsT0FEQTFwQyxFQXA3QlosYUFvN0I2QixpREFDVixDQUFDLEdBRVosSUFBSzNYLEtBQUt1M0UsZ0JBQWdCdC9DLEdBQVcsTUFBTyxDQUFDLEVBQWEsR0FFMUQsT0FES21pQyxHQUVELElBQUssVUFDTCxJQUFLLGNBQWUsTUFBTyxDQUFDLEVBQWEsR0FDekMsSUFBSyxXQUFZLE1BQU8sQ0FBQyxFQUFhLEdBRTFDLE1BQU8sQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXA2RCxLQUFLNitDLFdBQVd6Syx5QkFDN0MsS0FBSyxFQUdELE9BRkEzQyxFQUFVdm1DLEVBQUdsSSxPQUNiNDRFLEVBQXlCaFosR0FBWUUsNkNBQTZDN3FDLEVBQW9CLFlBQVZtaUMsR0FDckYsQ0FBQyxFQUFhcDZELEtBQUs4NEUsZ0NBQWdDcm5DLEVBQVNtcUMsSUFDdkUsS0FBSyxFQUVELE9BREExd0UsRUFBR2xJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYWhELEtBQUs2K0MsV0FBV3lXLGNBQWNyOUIsR0FDekIsSUFDbEMsS0FBSyxFQUdELE9BRkEvc0IsRUFBR2xJLE9BQ0hoRCxLQUFLMDRFLHVCQUF1QnpnRCxFQUFVbjBCLEdBQy9CLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQ0QrZ0IsRUFBSyw0QkFBOEJ1MUMsR0FDbkNsdkQsRUFBR25JLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBTWhDOGpDLEVBQVd4bkMsVUFBVXc4RSx5QkFBMkIsU0FBVTVsQyxFQUFPdWYsR0FDN0QsT0FBT2h3RCxFQUFNOUQsVUFBVTFCLFVBQU0sT0FBUSxHQUFRLFdBQ3pDLElBQUkySyxFQUFJbXhFLEVBQW1CaDdFLEVBQVE2bUMsRUFBWXAyQixFQUFTc3NCLEVBQVE1eUIsRUFBSTh3RSxFQUFXOWpELEVBQzNFdnVCLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWtMLEdBQ3JDLE9BQVFBLEVBQUduSSxPQUNQLEtBQUssRUFDRCxJQUFLL0MsS0FBS3FoRCxVQUNOLE1BQU8sQ0FBQyxHQUVaMTJDLEVBQUssRUFBR214RSxFQUFVN2xDLEVBQ2xCL3FDLEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUNELE9BQU00SCxFQUFLbXhFLEVBQVF6N0UsUUFDbkI0M0IsRUFBVzZqRCxFQUFRbnhFLEdBQ25COUUsR0FBUTdGLEtBQUt1M0UsZ0JBQWdCdC9DLEdBQVcsMENBQ2pDLENBQUMsRUFBYWo0QixLQUFLNitDLFdBQVd4L0IsVUFBVTRZLEtBSFosQ0FBQyxFQUFhLEdBSXJELEtBQUssRUFHRCxPQURBcHlCLEtBREEvRSxFQUFTb0ssRUFBR2xJLFFBQ0ssZ0NBQWtDaTFCLEVBQVcsY0FDdkQsQ0FBQyxFQUFhajRCLEtBQUs2K0MsV0FBV3VXLGVBQWV0MEQsSUFDeEQsS0FBSyxFQUVELE9BREE2bUMsRUFBYXo4QixFQUFHbEksT0FDVCxDQUFDLEVBQWFoRCxLQUFLazRFLGlDQUFpQ2w0RSxLQUFLMDdFLHdCQUF3QjU2RSxHQUFTNm1DLEVBQVcxUCxVQUMzRixJQUNyQixLQUFLLEVBQ0Qvc0IsRUFBR2xJLE9BQ0hoRCxLQUFLcTJFLFlBQVkvTixPQUFPM2dDLEdBQ3hCejhCLEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUVELE9BREE0SCxJQUNPLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQ0Q0RyxFQUFVLFNBQVUwbUIsR0FDaEIsT0FBT3p5QixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFHRCxPQUFLODZCLEVBQU8wNUMsZ0JBQWdCdC9DLEdBSXJCLENBQUMsRUFBYTRGLEVBQU9naEIsV0FDbkJ5VyxjQUFjcjlCLEdBQXdDLEdBQ3REejFCLE1BQUssV0FDTmtILEVBQU0yc0UsWUFBWTdOLFNBQVN2d0MsR0FDM0J2dUIsRUFBTWd2RSx1QkFBdUJ6Z0QsTUFFNUJudUIsTUFBTXUxQyxLQVRKLENBQUMsRUFBYyxZQVU5QixLQUFLLEVBR0QsT0FEQXAwQyxFQUFHakksT0FDSSxDQUFDLFFBSXhCNjZCLEVBQVM3OUIsS0FDVGlMLEVBQUssRUFBRzh3RSxFQUFZdm1CLEVBQ3BCdHFELEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUNELE9BQU1rSSxFQUFLOHdFLEVBQVUxN0UsUUFDckI0M0IsRUFBVzhqRCxFQUFVOXdFLEdBQ2QsQ0FBQyxFQUFjc0csRUFBUTBtQixLQUZPLENBQUMsRUFBYSxJQUd2RCxLQUFLLEVBQ0Qvc0IsRUFBR2xJLE9BQ0hrSSxFQUFHbkksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksSUFDTyxDQUFDLEVBQWEsR0FDekIsS0FBSyxHQUFJLE1BQU8sQ0FBQyxXQU9qQzQ3QixFQUFXeG5DLFVBQVUwb0UsY0FBZ0IsV0FFakMsT0FEQS9uRSxLQUFLNitDLFdBQVdtRSxtQkFBa0IsR0FDM0JoakQsS0FBS3EyRSxZQUFZdE8saUJBSTVCbGhDLEVBQVd4bkMsVUFBVThvRSxlQUFpQixXQUVsQyxPQURBbm9FLEtBQUs2K0MsV0FBV21FLG1CQUFrQixHQUMzQmhqRCxLQUFLcTJFLFlBQVlsTyxrQkFFNUJ0aEMsRUFBV3huQyxVQUFVb25FLHVCQUF5QixTQUFVeHVDLEdBQ3BELElBQUk4Z0QsRUFBa0IvNEUsS0FBS3kzRSx5QkFBeUJ4L0MsR0FDcEQsR0FBSThnRCxHQUFtQkEsRUFBZ0I3QixpQkFDbkMsT0FBT3grQyxLQUFpQnpCLElBQUk4aEQsRUFBZ0IvNUUsS0FHNUMsSUFBSWc5RSxFQUFTdGpELEtBQ1QwNUMsRUFBVXB5RSxLQUFLdTNFLGdCQUFnQnQvQyxHQUNuQyxJQUFLbTZDLEVBQ0QsT0FBTzRKLEVBRVgsSUFBSyxJQUFJcnhFLEVBQUssRUFBR3N4RSxFQUFZN0osRUFBU3puRSxFQUFLc3hFLEVBQVU1N0UsT0FBUXNLLElBQU0sQ0FDL0QsSUFBSXVULEVBQVErOUQsRUFBVXR4RSxHQUNsQm10RSxFQUFZOTNFLEtBQUtzM0Usa0JBQWtCaDVFLElBQUk0ZixHQUMzQ3JZLElBQVNpeUUsRUFBVywyQkFBNkI1NUQsR0FDakQ4OUQsRUFBU0EsRUFBT3BrRCxVQUFVa2dELEVBQVViLEtBQUtpRixpQkFFN0MsT0FBT0YsR0FHUm4xQyxFQXhnQ29CLEdBK2hDM0JzMUMsR0FBc0IsV0FDdEIsU0FBU0EsRUFBS2g3QyxHQUNWbmhDLEtBQUttaEMsSUFBTUEsRUEwQmYsT0F4QkFnN0MsRUFBSzk4RSxVQUFVK2hDLGdCQUFrQixXQUM3QixPQUFtQixNQUFacGhDLEtBQUttaEMsS0FNaEJnN0MsRUFBSzk4RSxVQUFVNDRELE1BQVEsV0FDbkIsT0FBSWo0RCxLQUFLb2hDLGtCQUNFLE9BQVNwaEMsS0FBS21oQyxJQUdkLGtCQUdmZzdDLEVBQUs5OEUsVUFBVWlyQixRQUFVLFNBQVU4eEQsR0FDL0IsT0FBT0EsRUFBVWo3QyxNQUFRbmhDLEtBQUttaEMsS0FHbENnN0MsRUFBS3oyRCxnQkFBa0IsSUFBSXkyRCxFQUFLLE1BR2hDQSxFQUFLRSxtQkFBcUIsSUFBSUYsRUFBSywwQkFDbkNBLEVBQUtHLFlBQWMsSUFBSUgsRUFBSyxtQkFDckJBLEVBNUJjLEdBaURyQkksR0FBMEIsb0JBRTlCLFNBQVNDLEdBQStCNXdELEVBQWdCK3RCLEdBRXBELE9BREE5ekMsR0FBa0MsSUFBM0I4ekMsRUFBU2w1QyxRQUFRLEtBQWEsMkNBQTZDazVDLEVBQVcsS0FDdEY0aUMsR0FBMEIsSUFBTTN3RCxFQUFpQixJQUFNK3RCLEVBU2xFLElBQUk4aUMsR0FBNEIsc0JBRWhDLFNBQVNDLEdBQWlDOXdELEVBQWdCc1YsRUFBTW5JLEdBQzVELElBQUk0akQsRUFBY0YsR0FBNEIsSUFBTTd3RCxFQUFpQixJQUFNbU4sRUFJM0UsT0FISW1JLEVBQUtFLG9CQUNMdTdDLEdBQWUsSUFBTXo3QyxFQUFLQyxLQUV2Qnc3QyxFQUlYLElBQUlDLEdBQTBCLG9CQUU5QixTQUFTQyxHQUF1Q2p4RCxFQUFnQnFNLEdBQzVELE9BQU8ya0QsR0FBMEIsSUFBTWh4RCxFQUFpQixJQUFNcU0sRUFLbEUsSUFBSTZrRCxHQUEwQix5QkFPOUIsSUFBSUMsR0FBNkI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0JqQyxJQUFJQyxHQUFZLG9CQU1aQyxHQUFrQyxXQUNsQyxTQUFTQSxFQUFpQi83QyxFQUFNbkksRUFBU3FoQyxFQUFPdDJELEdBQzVDOUQsS0FBS2toQyxLQUFPQSxFQUNabGhDLEtBQUsrNEIsUUFBVUEsRUFDZi80QixLQUFLbzZELE1BQVFBLEVBQ2JwNkQsS0FBSzhELE1BQVFBLEVBQ2IrQixPQUFrQjBELElBQVZ6RixJQUFvQyxhQUFWczJELEdBQXVCLGtFQTJDN0QsT0FyQ0E2aUIsRUFBaUJDLG9CQUFzQixTQUFVaDhDLEVBQU1uSSxFQUFTcjZCLEdBQzVELElBQUk2M0QsRUFBZ0I3cUQsS0FBS0MsTUFBTWpOLEdBQzNCeStFLEVBQXFDLGlCQUFsQjVtQixJQUVkLElBREwsQ0FBQyxVQUFXLGVBQWdCLFlBQVk5MUQsUUFBUTgxRCxFQUFjNkQsY0FFckM3d0QsSUFBeEJndEQsRUFBY3p5RCxPQUNvQixpQkFBeEJ5eUQsRUFBY3p5RCxPQUN6QnM1RSxPQUFpQjd6RSxFQVNyQixPQVJJNHpFLEdBQWE1bUIsRUFBY3p5RCxRQUMzQnE1RSxFQUMyQyxpQkFBaEM1bUIsRUFBY3p5RCxNQUFNaUMsU0FDYSxpQkFBN0J3d0QsRUFBY3p5RCxNQUFNc0csUUFFL0JnekUsRUFBaUIsSUFBSWwzRCxFQUFlcXdDLEVBQWN6eUQsTUFBTXNHLEtBQU1tc0QsRUFBY3p5RCxNQUFNaUMsVUFHdEZvM0UsRUFDTyxJQUFJRixFQUFpQi83QyxFQUFNbkksRUFBU3c5QixFQUFjNkQsTUFBT2dqQixJQUdoRXQ1RSxFQUFNazVFLEdBQVcsMENBQTRDamtELEVBQVUsTUFBUXI2QixHQUN4RSxPQUdmdStFLEVBQWlCNTlFLFVBQVVnK0UsaUJBQW1CLFdBQzFDLElBQUlDLEVBQWdCLENBQ2hCbGpCLE1BQU9wNkQsS0FBS282RCxNQUNaeGdCLGFBQWN2d0MsS0FBS3NILE9BUXZCLE9BTkkzUSxLQUFLOEQsUUFDTHc1RSxFQUFjeDVFLE1BQVEsQ0FDbEJzRyxLQUFNcEssS0FBSzhELE1BQU1zRyxLQUNqQnJFLFFBQVMvRixLQUFLOEQsTUFBTWlDLFVBR3JCMkYsS0FBS3NHLFVBQVVzckUsSUFFbkJMLEVBakQwQixHQXdEakNNLEdBQXFDLFdBQ3JDLFNBQVNBLEVBQW9CdGxELEVBQVVtaUMsRUFBT3QyRCxHQUMxQzlELEtBQUtpNEIsU0FBV0EsRUFDaEJqNEIsS0FBS282RCxNQUFRQSxFQUNicDZELEtBQUs4RCxNQUFRQSxFQUNiK0IsT0FBa0IwRCxJQUFWekYsSUFBb0MsYUFBVnMyRCxHQUF1QixxRUEyQzdELE9BckNBbWpCLEVBQW9CTCxvQkFBc0IsU0FBVWpsRCxFQUFVdjVCLEdBQzFELElBQUk2bUUsRUFBYzc1RCxLQUFLQyxNQUFNak4sR0FDekJ5K0UsRUFBbUMsaUJBQWhCNVgsSUFFZCxJQURMLENBQUMsY0FBZSxVQUFXLFlBQVk5a0UsUUFBUThrRSxFQUFZbkwsY0FFcEM3d0QsSUFBdEJnOEQsRUFBWXpoRSxPQUNvQixpQkFBdEJ5aEUsRUFBWXpoRSxPQUN2QnM1RSxPQUFpQjd6RSxFQVNyQixPQVJJNHpFLEdBQWE1WCxFQUFZemhFLFFBQ3pCcTVFLEVBQ3lDLGlCQUE5QjVYLEVBQVl6aEUsTUFBTWlDLFNBQ2EsaUJBQTNCdy9ELEVBQVl6aEUsTUFBTXNHLFFBRTdCZ3pFLEVBQWlCLElBQUlsM0QsRUFBZXEvQyxFQUFZemhFLE1BQU1zRyxLQUFNbTdELEVBQVl6aEUsTUFBTWlDLFVBR2xGbzNFLEVBQ08sSUFBSUksRUFBb0J0bEQsRUFBVXN0QyxFQUFZbkwsTUFBT2dqQixJQUc1RHQ1RSxFQUFNazVFLEdBQVcsd0NBQTBDL2tELEVBQVcsTUFBUXY1QixHQUN2RSxPQUdmNitFLEVBQW9CbCtFLFVBQVVnK0UsaUJBQW1CLFdBQzdDLElBQUk5WCxFQUFjLENBQ2RuTCxNQUFPcDZELEtBQUtvNkQsTUFDWnhnQixhQUFjdndDLEtBQUtzSCxPQVF2QixPQU5JM1EsS0FBSzhELFFBQ0x5aEUsRUFBWXpoRSxNQUFRLENBQ2hCc0csS0FBTXBLLEtBQUs4RCxNQUFNc0csS0FDakJyRSxRQUFTL0YsS0FBSzhELE1BQU1pQyxVQUdyQjJGLEtBQUtzRyxVQUFVdXpELElBRW5CZ1ksRUFoRDZCLEdBc0RwQ0MsR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0I3akMsRUFBVXZSLEdBQ2pDcG9DLEtBQUsyNUMsU0FBV0EsRUFDaEIzNUMsS0FBS29vQyxnQkFBa0JBLEVBdUIzQixPQWpCQW8xQyxFQUFrQk4sb0JBQXNCLFNBQVV2akMsRUFBVWo3QyxHQUt4RCxJQUpBLElBQUkrK0UsRUFBYy94RSxLQUFLQyxNQUFNak4sR0FDekJ5K0UsRUFBbUMsaUJBQWhCTSxHQUNuQkEsRUFBWXIxQywyQkFBMkJ2b0MsTUFDdkM2OUUsRUFBcUI3a0QsS0FDaEJwN0IsRUFBSSxFQUFHMC9FLEdBQWExL0UsRUFBSWdnRixFQUFZcjFDLGdCQUFnQi9uQyxTQUFVNUMsRUFDbkUwL0UsRUFBWTkwQixHQUFjbzFCLEVBQVlyMUMsZ0JBQWdCM3FDLElBQ3REaWdGLEVBQXFCQSxFQUFtQnptRCxJQUFJd21ELEVBQVlyMUMsZ0JBQWdCM3FDLElBRTVFLE9BQUkwL0UsRUFDTyxJQUFJSyxFQUFrQjdqQyxFQUFVK2pDLElBR3ZDNTVFLEVBQU1rNUUsR0FBVyw2Q0FBK0NyakMsRUFBVyxNQUFRajdDLEdBQzVFLE9BR1I4K0UsRUExQjJCLEdBaUNsQ0csR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0Joa0MsRUFBVTA0QixHQUNqQ3J5RSxLQUFLMjVDLFNBQVdBLEVBQ2hCMzVDLEtBQUtxeUUsWUFBY0EsRUFtQnZCLE9BYkFzTCxFQUFrQlQsb0JBQXNCLFNBQVV4K0UsR0FDOUMsSUFBSTJ6RSxFQUFjM21FLEtBQUtDLE1BQU1qTixHQUk3QixNQUh1QyxpQkFBaEIyekUsR0FDbkJBLEVBQVlBLGVBQWV4WSxJQUNLLGlCQUF6QndZLEVBQVkxNEIsU0FFWixJQUFJZ2tDLEVBQWtCdEwsRUFBWTE0QixTQUFVa2dCLEdBQVl3WSxFQUFZQSxlQUczRXZ1RSxFQUFNazVFLEdBQVcsaUNBQW1DdCtFLEdBQzdDLE9BR1JpL0UsRUF0QjJCLEdBbUNsQ0MsR0FBa0MsV0FDbEMsU0FBU0EsSUFDTDU5RSxLQUFLb29DLGdCQUFrQnZQLEtBbUIzQixPQWpCQStrRCxFQUFpQnYrRSxVQUFVdytFLGVBQWlCLFNBQVU1bEQsR0FDbERqNEIsS0FBS29vQyxnQkFBa0Jwb0MsS0FBS29vQyxnQkFBZ0JuUixJQUFJZ0IsSUFFcEQybEQsRUFBaUJ2K0UsVUFBVXkrRSxrQkFBb0IsU0FBVTdsRCxHQUNyRGo0QixLQUFLb29DLGdCQUFrQnBvQyxLQUFLb29DLGdCQUFnQmx6QixPQUFPK2lCLElBTXZEMmxELEVBQWlCditFLFVBQVVnK0UsaUJBQW1CLFdBQzFDLElBQUkzeUUsRUFBTyxDQUNQMDlCLGdCQUFpQnBvQyxLQUFLb29DLGdCQUFnQm50QixVQUN0QzIrQixhQUFjdndDLEtBQUtzSCxPQUV2QixPQUFPakYsS0FBS3NHLFVBQVV0SCxJQUVuQmt6RSxFQXJCMEIsR0E0QmpDRyxHQUE2QyxXQUM3QyxTQUFTQSxFQUE0QjNsQyxFQUFPM3pCLEVBQVVtSCxFQUFnQm95RCxFQUFlcnNCLEdBZ0JqRixHQWZBM3hELEtBQUtvNEMsTUFBUUEsRUFDYnA0QyxLQUFLeWtCLFNBQVdBLEVBQ2hCemtCLEtBQUs0ckIsZUFBaUJBLEVBQ3RCNXJCLEtBQUtnK0UsY0FBZ0JBLEVBQ3JCaCtFLEtBQUswb0UsV0FBYSxLQUNsQjFvRSxLQUFLNi9ELG1CQUFxQixLQUMxQjcvRCxLQUFLd3NCLHNCQUF3QixLQUM3QnhzQixLQUFLaStFLGNBQWdCLEdBQ3JCaitFLEtBQUtrK0UsZ0JBQWtCbCtFLEtBQUttK0Usc0JBQXNCbC9FLEtBQUtlLE1BQ3ZEQSxLQUFLb2lELFNBQVUsRUFLZnBpRCxLQUFLbytFLFlBQWMsSUFDZEwsRUFBNEI5aEQsWUFBWWo4QixLQUFLeWtCLFVBQzlDLE1BQU0sSUFBSXlCLEVBQWVqQixFQUFLYyxjQUFlLG1EQUlqRCxJQUFJczRELEVBQXdCenlELEVBQWV0Z0IsUUFBUSxzQkFBdUIsUUFDMUV0TCxLQUFLcytFLFFBQVV0K0UsS0FBS3lrQixTQUFTdlUsT0FBTzh4QyxhQUNwQ2hpRCxLQUFLbzNFLFlBQWN6bEIsRUFDbkIzeEQsS0FBS3UrRSxzQkFBd0IvQixHQUErQng4RSxLQUFLNHJCLGVBQWdCNXJCLEtBQUtnK0UsZUFDdEZoK0UsS0FBS3crRSxrQkFsUWIsU0FBMkM1eUQsR0FDdkMsT0FBT214RCxHQUE2QixJQUFNbnhELEVBaVFiNnlELENBQWtDeitFLEtBQUs0ckIsZ0JBQ2hFNXJCLEtBQUtpK0UsY0FBY2orRSxLQUFLZytFLGVBQWlCLElBQUlKLEdBQzdDNTlFLEtBQUswK0UsaUJBQW1CLElBQUl0VCxPQUFPLElBQU1tUixHQUEwQixJQUFNOEIsRUFBd0IsYUFDakdyK0UsS0FBSzIrRSxtQkFBcUIsSUFBSXZULE9BQU8sSUFBTXFSLEdBQTRCLElBQU00QixFQUF3QixzQkFDckdyK0UsS0FBSzQrRSxpQkFBbUIsSUFBSXhULE9BQU8sSUFBTXdSLEdBQTBCLElBQU15QixFQUF3QixZQUNqR3IrRSxLQUFLNitFLGVBOVFiLFNBQXdDanpELEdBQ3BDLE9BQU9reEQsR0FBMEIsSUFBTWx4RCxFQTZRYmt6RCxDQUErQjkrRSxLQUFLNHJCLGdCQU8xRDVyQixLQUFLeWtCLFNBQVN2VSxPQUFPcTJDLGlCQUFpQixVQUFXdm1ELEtBQUtrK0UsaUJBMFYxRCxPQXZWQUgsRUFBNEI5aEQsWUFBYyxTQUFVeFgsR0FDaEQsU0FBVUEsRUFBU3ZVLFFBQTBDLE1BQWhDdVUsRUFBU3ZVLE9BQU84eEMsZUFFakQrN0IsRUFBNEIxK0UsVUFBVWd4QixNQUFRLFdBQzFDLE9BQU83cUIsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxJQUFJOGpELEVBQWlCbjVDLEVBQUlvMEUsRUFBbUJwbEMsRUFBVXFsQyxFQUFhdkIsRUFBYXdCLEVBQWlCNU0sRUFBYXBuRSxFQUFJQyxFQUFJa3VFLEVBQ2xIMXZFLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVTJVLEdBQ3JDLE9BQVFBLEVBQUc1UixPQUNQLEtBQUssRUFJRCxPQUhBOEMsR0FBUTdGLEtBQUtvaUQsUUFBUywrQ0FDdEJ2OEMsRUFBMkIsT0FBcEI3RixLQUFLMG9FLFdBQXFCLDBEQUNqQzdpRSxFQUFtQyxPQUE1QjdGLEtBQUs2L0QsbUJBQTZCLGtFQUNsQyxDQUFDLEVBQWE3L0QsS0FBSzBvRSxXQUFXcmpCLG9CQUN6QyxLQUFLLEVBRUQsSUFEQXZCLEVBQWtCbnZDLEVBQUczUixPQUNoQjJILEVBQUssRUFBR28wRSxFQUFvQmo3QixFQUFpQm41QyxFQUFLbzBFLEVBQWtCMStFLE9BQVFzSyxLQUM3RWd2QyxFQUFXb2xDLEVBQWtCcDBFLE1BQ1ozSyxLQUFLZytFLGdCQUd0QmdCLEVBQWNoL0UsS0FBSzJtRCxRQUFRNjFCLEdBQStCeDhFLEtBQUs0ckIsZUFBZ0IrdEIsT0FFM0U4akMsRUFBY0QsR0FBa0JOLG9CQUFvQnZqQyxFQUFVcWxDLE1BRTFEaC9FLEtBQUtpK0UsY0FBY1IsRUFBWTlqQyxVQUFZOGpDLEdBWXZELElBUkF6OUUsS0FBS2svRSxzQkFDTEQsRUFBa0JqL0UsS0FBS3MrRSxRQUFRMzNCLFFBQVEzbUQsS0FBSzYrRSxtQkFFeEN4TSxFQUFjcnlFLEtBQUttL0UsMEJBQTBCRixLQUV6Q2ovRSxLQUFLby9FLHVCQUF1Qi9NLEdBRy9CcG5FLEVBQUssRUFBR0MsRUFBS2xMLEtBQUtvK0UsWUFBYW56RSxFQUFLQyxFQUFHN0ssT0FBUTRLLElBQ2hEbXVFLEVBQVVsdUUsRUFBR0QsR0FDYmpMLEtBQUttK0Usc0JBQXNCL0UsR0FPL0IsT0FMQXA1RSxLQUFLbytFLFlBQWMsR0FHbkJwK0UsS0FBS3lrQixTQUFTdlUsT0FBT3EyQyxpQkFBaUIsVUFBVSxXQUFjLE9BQU83OEMsRUFBTW83QyxjQUMzRTlrRCxLQUFLb2lELFNBQVUsRUFDUixDQUFDLFdBSzVCMjdCLEVBQTRCMStFLFVBQVV1dEIsb0JBQXNCLFNBQVVILEdBQ2xFenNCLEtBQUs0bUQsUUFBUTVtRCxLQUFLdytFLGtCQUFtQjl5RSxLQUFLc0csVUFBVXlhLEtBRXhEc3hELEVBQTRCMStFLFVBQVU4N0UseUJBQTJCLFdBQzdELElBQUlMLEVBQWdCamlELEtBSXBCLE9BSEFybkIsRUFBUXhSLEtBQUtpK0UsZUFBZSxTQUFVai9FLEVBQUtOLEdBQ3ZDbzhFLEVBQWdCQSxFQUFjbGpELFVBQVVsNUIsRUFBTTBwQyxvQkFFM0MweUMsR0FFWGlELEVBQTRCMStFLFVBQVVtNUUsb0JBQXNCLFNBQVV2Z0QsR0FHbEUsSUFBSyxJQUFJMGhCLEtBQVkzNUMsS0FBS2krRSxjQUN0QixHQUFJaitFLEtBQUtpK0UsY0FBYzMrRSxlQUFlcTZDLElBQzlCMzVDLEtBQUtpK0UsY0FBY3RrQyxHQUFVdlIsZ0JBQWdCcDBCLElBQUlpa0IsR0FDakQsT0FBTyxFQUluQixPQUFPLEdBRVg4bEQsRUFBNEIxK0UsVUFBVXU1RSxtQkFBcUIsU0FBVTcvQyxHQUNqRS80QixLQUFLcS9FLHFCQUFxQnRtRCxFQUFTLFlBRXZDZ2xELEVBQTRCMStFLFVBQVVzNkUsb0JBQXNCLFNBQVU1Z0QsRUFBU3FoQyxFQUFPdDJELEdBQ2xGOUQsS0FBS3EvRSxxQkFBcUJ0bUQsRUFBU3FoQyxFQUFPdDJELEdBSTFDOUQsS0FBS3MvRSxvQkFBb0J2bUQsSUFFN0JnbEQsRUFBNEIxK0UsVUFBVTQ0RSxvQkFBc0IsU0FBVWhnRCxHQUNsRSxJQUFJc25ELEVBQWEsY0FHakIsR0FBSXYvRSxLQUFLdzRFLG9CQUFvQnZnRCxHQUFXLENBQ3BDLElBQUkrbUQsRUFBY2gvRSxLQUFLcytFLFFBQVEzM0IsUUFBUWsyQixHQUF1Qzc4RSxLQUFLNHJCLGVBQWdCcU0sSUFDbkcsR0FBSSttRCxFQUFhLENBQ2IsSUFBSXY5RSxFQUFXODdFLEdBQW9CTCxvQkFBb0JqbEQsRUFBVSttRCxHQUM3RHY5RSxJQUNBODlFLEVBQWE5OUUsRUFBUzI0RCxRQU1sQyxPQUZBcDZELEtBQUt3L0UsaUJBQWlCM0IsZUFBZTVsRCxHQUNyQ2o0QixLQUFLay9FLHFCQUNFSyxHQUVYeEIsRUFBNEIxK0UsVUFBVWs1RSx1QkFBeUIsU0FBVXRnRCxHQUNyRWo0QixLQUFLdy9FLGlCQUFpQjFCLGtCQUFrQjdsRCxHQUN4Q2o0QixLQUFLay9FLHNCQUVUbkIsRUFBNEIxK0UsVUFBVWc4RSxtQkFBcUIsU0FBVXBqRCxHQUNqRSxPQUFPajRCLEtBQUt3L0UsaUJBQWlCcDNDLGdCQUFnQnAwQixJQUFJaWtCLElBRXJEOGxELEVBQTRCMStFLFVBQVVvNUUsZ0JBQWtCLFNBQVV4Z0QsR0FDOURqNEIsS0FBS29rRCxXQUFXeTRCLEdBQXVDNzhFLEtBQUs0ckIsZUFBZ0JxTSxLQUVoRjhsRCxFQUE0QjErRSxVQUFVZzZFLGlCQUFtQixTQUFVcGhELEVBQVVtaUMsRUFBT3QyRCxHQUNoRjlELEtBQUt5L0Usd0JBQXdCeG5ELEVBQVVtaUMsRUFBT3QyRCxJQUVsRGk2RSxFQUE0QjErRSxVQUFVNnlELGlCQUFtQixTQUFVaHhCLEVBQU1zeEIsRUFBaUJDLEdBQ3RGLElBQUkvb0QsRUFBUTFKLEtBQ1p3eUQsRUFBZ0JoaEQsU0FBUSxTQUFVdW5CLEdBQzlCcnZCLEVBQU00MUUsb0JBQW9Cdm1ELE1BRTlCLzRCLEtBQUtvM0UsWUFBY2wyQyxFQUNuQnV4QixFQUFjamhELFNBQVEsU0FBVXVuQixHQUM1QnJ2QixFQUFNa3ZFLG1CQUFtQjcvQyxPQUdqQ2dsRCxFQUE0QjErRSxVQUFVNjVFLGVBQWlCLFNBQVU3RyxHQUM3RHJ5RSxLQUFLMC9FLG1CQUFtQnJOLElBRTVCMEwsRUFBNEIxK0UsVUFBVXlsRCxTQUFXLFdBQ3pDOWtELEtBQUtvaUQsVUFDTHBpRCxLQUFLeWtCLFNBQVN2VSxPQUFPdTJDLG9CQUFvQixVQUFXem1ELEtBQUtrK0UsaUJBQ3pEbCtFLEtBQUtva0QsV0FBV3BrRCxLQUFLdStFLHVCQUNyQnYrRSxLQUFLb2lELFNBQVUsSUFHdkIyN0IsRUFBNEIxK0UsVUFBVXNuRCxRQUFVLFNBQVUzbkQsR0FDdEQsSUFBSU4sRUFBUXNCLEtBQUtzK0UsUUFBUTMzQixRQUFRM25ELEdBRWpDLE9BREEyWSxFQUFNcWxFLEdBQVcsT0FBUWgrRSxFQUFLTixHQUN2QkEsR0FFWHEvRSxFQUE0QjErRSxVQUFVdW5ELFFBQVUsU0FBVTVuRCxFQUFLTixHQUMzRGlaLEVBQU1xbEUsR0FBVyxNQUFPaCtFLEVBQUtOLEdBQzdCc0IsS0FBS3MrRSxRQUFRMTNCLFFBQVE1bkQsRUFBS04sSUFFOUJxL0UsRUFBNEIxK0UsVUFBVStrRCxXQUFhLFNBQVVwbEQsR0FDekQyWSxFQUFNcWxFLEdBQVcsU0FBVWgrRSxHQUMzQmdCLEtBQUtzK0UsUUFBUWw2QixXQUFXcGxELElBRTVCKytFLEVBQTRCMStFLFVBQVU4K0Usc0JBQXdCLFNBQVV4L0QsR0FDcEUsSUFBSWpWLEVBQVExSixLQUNaLEdBQUkyZSxFQUFNZ2hFLGNBQWdCMy9FLEtBQUtzK0UsUUFBUyxDQUVwQyxHQURBM21FLEVBQU1xbEUsR0FBVyxRQUFTcitELEVBQU0zZixJQUFLMmYsRUFBTXV0QixVQUN2Q3Z0QixFQUFNM2YsTUFBUWdCLEtBQUt1K0Usc0JBR25CLFlBRkF6NkUsRUFBTSw0R0FJVjlELEtBQUtvNEMsTUFBTXZuQixrQkFBaUIsV0FBYyxPQUFPcnJCLEVBQU05RCxVQUFVZ0ksT0FBTyxPQUFRLEdBQVEsV0FDcEYsSUFBSSt6RSxFQUFhOWpDLEVBQVVpbUMsRUFBa0JDLEVBQXFCeE4sRUFBYTVsRCxFQUMvRSxPQUFPam5CLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsSUFBS2pMLEtBQUtvaUQsUUFFTixPQURBcGlELEtBQUtvK0UsWUFBWTM2RSxLQUFLa2IsR0FDZixDQUFDLEdBRVosR0FBa0IsT0FBZEEsRUFBTTNmLElBQ04sTUFBTyxDQUFDLEdBRVosR0FBSWdCLEtBQUswK0UsaUJBQWlCdnVFLEtBQUt3TyxFQUFNM2YsS0FBTSxDQUN2QyxHQUFzQixNQUFsQjJmLEVBQU11dEIsU0FRTixPQURBeU4sRUFBVzM1QyxLQUFLOC9FLDZCQUE2Qm5oRSxFQUFNM2YsS0FDNUMsQ0FBQyxFQUFjZ0IsS0FBSysvRSx1QkFBdUJwbUMsRUFBVSxPQU41RCxHQURBOGpDLEVBQWN6OUUsS0FBS2dnRiwwQkFBMEJyaEUsRUFBTTNmLElBQUsyZixFQUFNdXRCLFVBRTFELE1BQU8sQ0FBQyxFQUFjbHNDLEtBQUsrL0UsdUJBQXVCdEMsRUFBWTlqQyxTQUFVOGpDLFNBUS9FLEdBQUl6OUUsS0FBSzIrRSxtQkFBbUJ4dUUsS0FBS3dPLEVBQU0zZixNQUN4QyxHQUF1QixPQUFuQjJmLEVBQU11dEIsV0FDTjB6QyxFQUFtQjUvRSxLQUFLaWdGLCtCQUErQnRoRSxFQUFNM2YsSUFBSzJmLEVBQU11dEIsV0FFcEUsTUFBTyxDQUFDLEVBQWNsc0MsS0FBS2tnRix5QkFBeUJOLFNBSTNELEdBQUk1L0UsS0FBSzQrRSxpQkFBaUJ6dUUsS0FBS3dPLEVBQU0zZixNQUN0QyxHQUF1QixPQUFuQjJmLEVBQU11dEIsV0FDTjJ6QyxFQUFzQjcvRSxLQUFLbWdGLGtDQUFrQ3hoRSxFQUFNM2YsSUFBSzJmLEVBQU11dEIsV0FFMUUsTUFBTyxDQUFDLEVBQWNsc0MsS0FBS29nRix1QkFBdUJQLFNBSXpELEdBQUlsaEUsRUFBTTNmLE1BQVFnQixLQUFLNitFLGdCQUN4QixHQUF1QixPQUFuQmxnRSxFQUFNdXRCLFdBQ05tbUMsRUFBY3J5RSxLQUFLbS9FLDBCQUEwQnhnRSxFQUFNdXRCLFdBRS9DLE1BQU8sQ0FBQyxFQUFjbHNDLEtBQUtvL0UsdUJBQXVCL00sU0FJckQxekQsRUFBTTNmLE1BQVFnQixLQUFLdytFLG9CQUN4QjM0RSxJQUFTN0YsS0FBS3dzQixzQkFBdUIsa0NBQ3JDQyxFQThJeEIsU0FBc0M0ekQsR0FDbEMsSUFBSTV6RCxFQUFpQkosR0FBZVcsUUFDcEMsR0FBaUIsTUFBYnF6RCxFQUNBLElBQ0ksSUFBSUMsRUFBUzUwRSxLQUFLQyxNQUFNMDBFLEdBQ3hCeDZFLEVBQXlCLGlCQUFYeTZFLEVBQXFCLHFDQUNuQzd6RCxFQUFpQjZ6RCxFQUVyQixNQUFPOS9FLEdBQ0hzRCxFQUFNazVFLEdBQVcsaURBQWtEeDhFLEdBRzNFLE9BQU9pc0IsRUExSjhCOHpELENBQTZCNWhFLEVBQU11dEIsYUFDN0I3ZixHQUFlVyxTQUNsQ2h0QixLQUFLd3NCLHNCQUFzQkMsSUFHbkMsTUFBTyxDQUFDLGNBS3hCdHVCLE9BQU9DLGVBQWUyL0UsRUFBNEIxK0UsVUFBVyxtQkFBb0IsQ0FDN0VmLElBQUssV0FDRCxPQUFPMEIsS0FBS2krRSxjQUFjaitFLEtBQUtnK0UsZ0JBRW5DMy9FLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJ3bUUsRUFBNEIxK0UsVUFBVTYvRSxtQkFBcUIsV0FDdkRsL0UsS0FBSzRtRCxRQUFRNW1ELEtBQUt1K0Usc0JBQXVCditFLEtBQUt3L0UsaUJBQWlCbkMscUJBRW5FVSxFQUE0QjErRSxVQUFVZ2dGLHFCQUF1QixTQUFVdG1ELEVBQVNxaEMsRUFBT3QyRCxHQUNuRixJQUFJMDhFLEVBQWdCLElBQUl2RCxHQUFpQmo5RSxLQUFLbzNFLFlBQWFyK0MsRUFBU3FoQyxFQUFPdDJELEdBQ3ZFNjRFLEVBQWNELEdBQWlDMThFLEtBQUs0ckIsZUFBZ0I1ckIsS0FBS28zRSxZQUFhcitDLEdBQzFGLzRCLEtBQUs0bUQsUUFBUSsxQixFQUFhNkQsRUFBY25ELHFCQUU1Q1UsRUFBNEIxK0UsVUFBVWlnRixvQkFBc0IsU0FBVXZtRCxHQUNsRSxJQUFJNGpELEVBQWNELEdBQWlDMThFLEtBQUs0ckIsZUFBZ0I1ckIsS0FBS28zRSxZQUFhcitDLEdBQzFGLzRCLEtBQUtva0QsV0FBV3U0QixJQUVwQm9CLEVBQTRCMStFLFVBQVVxZ0YsbUJBQXFCLFNBQVVyTixHQUNqRSxJQUFJNzNCLEVBQVEsQ0FDUmIsU0FBVTM1QyxLQUFLZytFLGNBQ2YzTCxZQUFheFksR0FBWXdZLElBRTdCcnlFLEtBQUtzK0UsUUFBUTEzQixRQUFRNW1ELEtBQUs2K0UsZUFBZ0JuekUsS0FBS3NHLFVBQVV3b0MsS0FFN0R1akMsRUFBNEIxK0UsVUFBVW9nRix3QkFBMEIsU0FBVXhuRCxFQUFVbWlDLEVBQU90MkQsR0FDdkYsSUFBSTI4RSxFQUFZNUQsR0FBdUM3OEUsS0FBSzRyQixlQUFnQnFNLEdBQ3hFeW9ELEVBQWlCLElBQUluRCxHQUFvQnRsRCxFQUFVbWlDLEVBQU90MkQsR0FDOUQ5RCxLQUFLNG1ELFFBQVE2NUIsRUFBV0MsRUFBZXJELHFCQU0zQ1UsRUFBNEIxK0UsVUFBVXlnRiw2QkFBK0IsU0FBVTlnRixHQUMzRSxJQUFJNFosRUFBUTVZLEtBQUswK0UsaUJBQWlCcDFELEtBQUt0cUIsR0FDdkMsT0FBTzRaLEVBQVFBLEVBQU0sR0FBSyxNQU05Qm1sRSxFQUE0QjErRSxVQUFVMmdGLDBCQUE0QixTQUFVaGhGLEVBQUtOLEdBQzdFLElBQUlpN0MsRUFBVzM1QyxLQUFLOC9FLDZCQUE2QjlnRixHQUVqRCxPQURBNkcsRUFBb0IsT0FBYjh6QyxFQUFtQixrQ0FBb0MzNkMsRUFBTSxLQUM3RHcrRSxHQUFrQk4sb0JBQW9CdmpDLEVBQVVqN0MsSUFNM0RxL0UsRUFBNEIxK0UsVUFBVTRnRiwrQkFBaUMsU0FBVWpoRixFQUFLTixHQUNsRixJQUFJa2EsRUFBUTVZLEtBQUsyK0UsbUJBQW1CcjFELEtBQUt0cUIsR0FDekM2RyxFQUFpQixPQUFWK1MsRUFBZ0Isb0NBQXNDNVosRUFBTSxLQUNuRSxJQUFJKzVCLEVBQVVuUyxPQUFPaE8sRUFBTSxJQUN2QmdvQixPQUFzQnIzQixJQUFicVAsRUFBTSxHQUFtQkEsRUFBTSxHQUFLLEtBQ2pELE9BQU9xa0UsR0FBaUJDLG9CQUFvQixJQUFJZixHQUFLdjdDLEdBQVM3SCxFQUFTcjZCLElBTTNFcS9FLEVBQTRCMStFLFVBQVU4Z0Ysa0NBQW9DLFNBQVVuaEYsRUFBS04sR0FDckYsSUFBSWthLEVBQVE1WSxLQUFLNCtFLGlCQUFpQnQxRCxLQUFLdHFCLEdBQ3ZDNkcsRUFBaUIsT0FBVitTLEVBQWdCLGtDQUFvQzVaLEVBQU0sS0FDakUsSUFBSWk1QixFQUFXclIsT0FBT2hPLEVBQU0sSUFDNUIsT0FBTzJrRSxHQUFvQkwsb0JBQW9CamxELEVBQVV2NUIsSUFNN0RxL0UsRUFBNEIxK0UsVUFBVTgvRSwwQkFBNEIsU0FBVXpnRixHQUN4RSxPQUFPaS9FLEdBQWtCVCxvQkFBb0J4K0UsSUFFakRxL0UsRUFBNEIxK0UsVUFBVTZnRix5QkFBMkIsU0FBVTNwQixHQUN2RSxPQUFPL3dELEVBQU05RCxVQUFVMUIsVUFBTSxPQUFRLEdBQVEsV0FDekMsT0FBT3dGLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBSXNyRCxFQUFjcjFCLEtBQUtDLE1BQVFuaEMsS0FBS28zRSxZQUFZajJDLEtBQzVDeHBCLEVBQU1xbEUsR0FBVyx5Q0FBMkN6bUIsRUFBY3IxQixLQUFLQyxLQUN4RSxDQUFDLElBRUwsQ0FBQyxFQUFjbmhDLEtBQUswb0UsV0FBVzRRLGdCQUFnQi9pQixFQUFjeDlCLFFBQVN3OUIsRUFBYzZELE1BQU83RCxFQUFjenlELGVBSTVIaTZFLEVBQTRCMStFLFVBQVUrZ0YsdUJBQXlCLFNBQVVNLEdBQ3JFLE9BQU8xZ0YsS0FBSzBvRSxXQUFXaVQsaUJBQWlCK0UsRUFBZXpvRCxTQUFVeW9ELEVBQWV0bUIsTUFBT3NtQixFQUFlNThFLFFBRTFHaTZFLEVBQTRCMStFLFVBQVUwZ0YsdUJBQXlCLFNBQVVwbUMsRUFBVThqQyxHQUMvRSxJQUFJL3pFLEVBQVExSixLQUNSMmdGLEVBQWtCM2dGLEtBQUttN0UsMkJBQ3ZCc0MsRUFDQXo5RSxLQUFLaStFLGNBQWN0a0MsR0FBWThqQyxTQUd4Qno5RSxLQUFLaStFLGNBQWN0a0MsR0FFOUIsSUFBSWluQyxFQUFhNWdGLEtBQUttN0UsMkJBQ2xCMEYsRUFBZSxHQUNmQyxFQUFpQixHQWlCckIsT0FoQkFGLEVBQVdwdkUsU0FBUSxTQUFVeW1CLEdBQVksT0FBT3p5QixFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ25GLE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBSXJDLE9BSEswMUUsRUFBZ0Izc0UsSUFBSWlrQixJQUNyQjRvRCxFQUFhcDlFLEtBQUt3MEIsR0FFZixDQUFDLFlBR2hCMG9ELEVBQWdCbnZFLFNBQVEsU0FBVXltQixHQUFZLE9BQU96eUIsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUN4RixPQUFPbEUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUlyQyxPQUhLMjFFLEVBQVc1c0UsSUFBSWlrQixJQUNoQjZvRCxFQUFlcjlFLEtBQUt3MEIsR0FFakIsQ0FBQyxZQUdUajRCLEtBQUswb0UsV0FBV21ULHlCQUF5QmdGLEVBQWNDLElBRWxFL0MsRUFBNEIxK0UsVUFBVSsvRSx1QkFBeUIsU0FBVS9NLEdBTWpFcnlFLEtBQUtpK0UsY0FBYzVMLEVBQVkxNEIsV0FDL0IzNUMsS0FBSzYvRCxtQkFBbUJ3UyxFQUFZQSxjQUdyQzBMLEVBaFlxQyxHQXFaaEQsSUFBSWdELEdBQXlDLFdBQ3pDLFNBQVNBLElBQ0wvZ0YsS0FBS2doRixXQUFhLElBQUlwRCxHQUN0QjU5RSxLQUFLdS9FLFdBQWEsR0FDbEJ2L0UsS0FBSzBvRSxXQUFhLEtBQ2xCMW9FLEtBQUs2L0QsbUJBQXFCLEtBQzFCNy9ELEtBQUt3c0Isc0JBQXdCLEtBMENqQyxPQXhDQXUwRCxFQUF3QjFoRixVQUFVdTVFLG1CQUFxQixTQUFVNy9DLEtBR2pFZ29ELEVBQXdCMWhGLFVBQVVzNkUsb0JBQXNCLFNBQVU1Z0QsRUFBU3FoQyxFQUFPdDJELEtBR2xGaTlFLEVBQXdCMWhGLFVBQVU0NEUsb0JBQXNCLFNBQVVoZ0QsR0FFOUQsT0FEQWo0QixLQUFLZ2hGLFdBQVduRCxlQUFlNWxELEdBQ3hCajRCLEtBQUt1L0UsV0FBV3RuRCxJQUFhLGVBRXhDOG9ELEVBQXdCMWhGLFVBQVVnNkUsaUJBQW1CLFNBQVVwaEQsRUFBVW1pQyxFQUFPdDJELEdBQzVFOUQsS0FBS3UvRSxXQUFXdG5ELEdBQVltaUMsR0FFaEMybUIsRUFBd0IxaEYsVUFBVWs1RSx1QkFBeUIsU0FBVXRnRCxHQUNqRWo0QixLQUFLZ2hGLFdBQVdsRCxrQkFBa0I3bEQsSUFFdEM4b0QsRUFBd0IxaEYsVUFBVWc4RSxtQkFBcUIsU0FBVXBqRCxHQUM3RCxPQUFPajRCLEtBQUtnaEYsV0FBVzU0QyxnQkFBZ0JwMEIsSUFBSWlrQixJQUUvQzhvRCxFQUF3QjFoRixVQUFVbzVFLGdCQUFrQixTQUFVeGdELFVBQ25EajRCLEtBQUt1L0UsV0FBV3RuRCxJQUUzQjhvRCxFQUF3QjFoRixVQUFVODdFLHlCQUEyQixXQUN6RCxPQUFPbjdFLEtBQUtnaEYsV0FBVzU0QyxpQkFFM0IyNEMsRUFBd0IxaEYsVUFBVW01RSxvQkFBc0IsU0FBVXZnRCxHQUM5RCxPQUFPajRCLEtBQUtnaEYsV0FBVzU0QyxnQkFBZ0JwMEIsSUFBSWlrQixJQUUvQzhvRCxFQUF3QjFoRixVQUFVZ3hCLE1BQVEsV0FFdEMsT0FEQXJ3QixLQUFLZ2hGLFdBQWEsSUFBSXBELEdBQ2Y3N0UsUUFBUUMsV0FFbkIrK0UsRUFBd0IxaEYsVUFBVTZ5RCxpQkFBbUIsU0FBVWh4QixFQUFNc3hCLEVBQWlCQyxLQUd0RnN1QixFQUF3QjFoRixVQUFVNjVFLGVBQWlCLFNBQVU3RyxLQUc3RDBPLEVBQXdCMWhGLFVBQVV5bEQsU0FBVyxhQUM3Q2k4QixFQUF3QjFoRixVQUFVdXRCLG9CQUFzQixTQUFVSCxLQUMzRHMwRCxFQWhEaUMsR0F3RXhDRSxHQUE4QyxXQUM5QyxTQUFTQSxFQUE2QkMsRUFBZ0JDLEdBQ2xEbmhGLEtBQUtraEYsZUFBaUJBLEVBQ3RCbGhGLEtBQUttaEYsZ0JBQWtCQSxFQUszQixPQUhBRixFQUE2QjVoRixVQUFVOGhELFVBQVksV0FDL0MsT0FBT3JELEdBQVVJLGNBQWNsK0MsS0FBS2toRixpQkFFakNELEVBUnNDLEdBVTdDRyxHQUNBLGFBU0FDLEdBQWlDLFdBQ2pDLFNBQVNBLEVBQWdCNThELEVBQVUyaEMsRUFBY2tXLEVBU2pEeHNDLEdBQ0k5dkIsS0FBS3lrQixTQUFXQSxFQUNoQnprQixLQUFLb21ELGFBQWVBLEVBQ3BCcG1ELEtBQUtzOEQsWUFBY0EsRUFDbkJ0OEQsS0FBSzh2QixXQUFhQSxFQUNsQjl2QixLQUFLMjVDLFNBQVc5dkIsRUFBT0MsUUFzZTNCLE9BamNBdTNELEVBQWdCaGlGLFVBQVVneEIsTUFBUSxTQUFVaXhELEdBQ3hDLElBQUk1M0UsRUFBUTFKLEtBQ1pBLEtBQUt1aEYsc0JBUUwsSUFBSUMsRUFBcUIsSUFBSS8zRSxHQU96Qmc0RSxFQUFvQixJQUFJaDRFLEdBQ3hCaTRFLEdBQWMsRUFxQmxCLE9BcEJBMWhGLEtBQUtzOEQsWUFBWXFsQixtQkFBa0IsU0FBVXpnRCxHQUNwQ3dnRCxFQU9EaDRFLEVBQU1vbUIsV0FBV2Usa0JBQWlCLFdBQzlCLE9BQU9ubkIsRUFBTWtnRSx1QkFBdUIxb0MsT0FQeEN3Z0QsR0FBYyxFQUNkaDRFLEVBQU1rNEUsc0JBQXNCTixFQUFxQkcsRUFBbUJ2Z0QsR0FDL0QxK0IsTUFBSyxTQUFVcS9FLEdBQWMsT0FBT240RSxFQUFNbzRFLGVBQWU1Z0QsRUFBTTJnRCxNQUMvRHIvRSxLQUFLZy9FLEVBQW1CeC9FLFFBQVN3L0UsRUFBbUJ2L0UsWUFTakVqQyxLQUFLOHZCLFdBQVdlLGtCQUFpQixXQUM3QixPQUFPMndELEVBQW1CNzNFLFdBS3ZCODNFLEVBQWtCOTNFLFNBRzdCMDNFLEVBQWdCaGlGLFVBQVUwb0UsY0FBZ0IsV0FDdEMsSUFBSXIrRCxFQUFRMUosS0FFWixPQURBQSxLQUFLdWhGLHNCQUNFdmhGLEtBQUs4dkIsV0FBV3NCLFNBQVEsV0FDM0IsT0FBTzFuQixFQUFNZy9ELFdBQVdYLG9CQW9CaENzWixFQUFnQmhpRixVQUFVdWlGLHNCQUF3QixTQUFVTixFQUFxQkcsRUFBbUJ2Z0QsR0FDaEcsSUFBSXgzQixFQUFRMUosS0FDWixPQUFJc2hGLGFBQStCTCxHQUN4QmpoRixLQUFLK2hGLDBCQUEwQjdnRCxFQUFNb2dELEdBQ3ZDOStFLE1BQUssU0FBVXEvRSxHQUVoQixPQURBSixFQUFrQnovRSxVQUNYNi9FLEtBRU4vM0UsT0FBTSxTQUFVaEcsR0FLakIsR0FGQTI5RSxFQUFrQngvRSxPQUFPNkIsSUFFcEI0RixFQUFNczRFLFlBQVlsK0UsR0FDbkIsTUFBTUEsRUFLVixPQUhBb0YsUUFBUW1DLEtBQUssNkVBRVR2SCxHQUNHNEYsRUFBTXU0RSw2QkFRakJSLEVBQWtCei9FLFVBQ1hoQyxLQUFLaWlGLDJCQU9wQlosRUFBZ0JoaUYsVUFBVTJpRixZQUFjLFNBQVVsK0UsR0FDOUMsT0FBSUEsYUFBaUJvaUIsRUFDVHBpQixFQUFNc0csT0FBUzZhLEVBQUtXLHFCQUN4QjloQixFQUFNc0csT0FBUzZhLEVBQUtjLGdCQUVLLG9CQUFqQm04RCxjQUNacCtFLGFBQWlCbytFLGdCQXBMTSxLQWdNdkJwK0UsRUFBTXNHLE1Bak1VLEtBa01adEcsRUFBTXNHLE1Bbk1ZLEtBc01sQnRHLEVBQU1zRyxPQVFsQmkzRSxFQUFnQmhpRixVQUFVa2lGLG9CQUFzQixXQUM1QyxHQUFJdmhGLEtBQUs4dkIsV0FBV3F5RCxlQUNoQixNQUFNLElBQUlqOEQsRUFBZWpCLEVBQUtXLG9CQUFxQiw0Q0FRM0R5N0QsRUFBZ0JoaUYsVUFBVTBpRiwwQkFBNEIsU0FBVTdnRCxFQUFNa2hELEdBQ2xFLElBQUkxNEUsRUFBUTFKLEtBR1I0ckIsRUFBaUJxYSxHQUFxQmtnQixtQkFBbUJubUQsS0FBS29tRCxjQUU5RHZsQixFQUFhLElBQUkwcUMsR0FBb0J2ckUsS0FBS29tRCxhQUFhejZCLFdBQVksQ0FDbkU2L0MsZUFBZSxJQUVuQixPQUFPenBFLFFBQVFDLFVBQVVRLE1BQUssV0FBYyxPQUFPZ0QsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUN0RixJQUFJeTNDLEVBQVdnQixFQUNmLE9BQU8zOEMsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsR0FBSXEvRSxFQUFTakIsa0JBQ1JwRCxHQUE0QjloRCxZQUFZajhCLEtBQUt5a0IsVUFDOUMsTUFBTSxJQUFJeUIsRUFBZWpCLEVBQUtjLGNBQWUsbUZBTWpELE9BSkFvN0IsRUFBWWloQyxFQUFTamhDLFlBQ3JCbmhELEtBQUttM0Usa0JBQW9CaUwsRUFBU2pCLGdCQUM1QixJQUFJcEQsR0FBNEIvOUUsS0FBSzh2QixXQUFZOXZCLEtBQUt5a0IsU0FBVW1ILEVBQWdCNXJCLEtBQUsyNUMsU0FBVXpZLEdBQy9GLElBQUk2L0MsR0FDSCxDQUFDLEVBQWE5NkMsR0FBcUJpYywyQkFBMkIsQ0FDN0RqSix3QkFBeUJtcEMsRUFBU2pCLGdCQUNsQ3YxRCxlQUFnQkEsRUFDaEIrdEIsU0FBVTM1QyxLQUFLMjVDLFNBQ2ZsMUIsU0FBVXprQixLQUFLeWtCLFNBQ2YyekIsTUFBT3A0QyxLQUFLOHZCLFdBQ1orUSxXQUFZQSxFQUNac2dCLFVBQVdBLEVBQ1g1MEIscUJBQXNCdnNCLEtBQUttM0UscUJBRXZDLEtBQUssRUFHRCxPQUZBaDFCLEVBQWNsM0MsRUFBR2pJLE9BQ2pCaEQsS0FBS21pRCxZQUFjQSxFQUNaLENBQUMsRUFBY0EsRUFBWXBoQixrQkFBa0I2ZCw2QkFVeEV5aUMsRUFBZ0JoaUYsVUFBVTRpRix1QkFBeUIsV0FHL0MsT0FGQWppRixLQUFLbWlELFlBQWNzVixHQUFrQk0sdUJBQXVCLzNELEtBQUsyNUMsVUFDakUzNUMsS0FBS20zRSxrQkFBb0IsSUFBSTRKLEdBQ3RCaC9FLFFBQVFDLFFBQVEsT0FPM0JxL0UsRUFBZ0JoaUYsVUFBVXlpRixlQUFpQixTQUFVNWdELEVBQU0yZ0QsR0FDdkQsSUFBSW40RSxFQUFRMUosS0FFWixPQURBMlgsRUFuUlEsa0JBbVJTLHNCQUF1QnVwQixFQUFLQyxLQUN0Q25oQyxLQUFLeWtCLFNBQ1A0OUQsZUFBZXJpRixLQUFLb21ELGNBQ3BCNWpELE1BQUssU0FBVTAzRCxHQUFjLE9BQU8xMEQsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUM1RSxJQUFJZ29ELEVBQWFvVixFQUFxQmptQyxFQUFZaStCLEVBQVd3akIsRUFBc0NDLEVBQy9GNzRFLEVBQVExSixLQUNaLE9BQU93RixFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFHRCxPQUZBMnVELEVBQWMsSUFBSTlELEdBQ2xCNXRELEtBQUs2K0MsV0FBYSxJQUFJNFMsR0FBV3p4RCxLQUFLbWlELFlBQWF1UCxFQUFheHdCLEdBQ3pELENBQUMsRUFBYWxoQyxLQUFLNitDLFdBQVd4dUIsU0FDekMsS0FBSyxFQXVCRCxPQXRCQXBsQixFQUFHakksT0FDQzYrRSxJQUVBN2hGLEtBQUt3aUYsYUFBZSxJQUFJN2pDLEdBQWFrakMsRUFBWTdoRixLQUFLOHZCLFdBQVk5dkIsS0FBSzYrQyxhQUUzRWlvQixFQUFzQjltRSxLQUFLeWtCLFNBQVNnK0QseUJBQ3BDNWhELEVBQWE3Z0MsS0FBS3lrQixTQUFTaStELGNBQWMxaUYsS0FBS29tRCxhQUFhejZCLFlBQzNEbXpDLEVBQVksSUFBSVgsR0FBVW4rRCxLQUFLOHZCLFdBQVlvcUMsRUFBWWw2RCxLQUFLczhELFlBQWF6N0IsR0FDekV5aEQsRUFBdUMsU0FBVWpRLEdBQzdDLE9BQU8zb0UsRUFBTWcvRCxXQUFXK0osdUJBQXVCSixFQUFhdlksR0FBa0IrTSxjQUVsRjBiLEVBQTZDLFNBQVVsUSxHQUNuRCxPQUFPM29FLEVBQU1nL0QsV0FBVytKLHVCQUF1QkosRUFBYXZZLEdBQWtCa2Ysb0JBRWxGaDVFLEtBQUtxMkUsWUFBYyxJQUFJeFAsR0FBWTdtRSxLQUFLNitDLFdBQVlpZ0IsRUFBVzkrRCxLQUFLOHZCLFdBQVl3eUQsRUFBc0N4YixHQUN0SDltRSxLQUFLMG9FLFdBQWEsSUFBSTdoQyxHQUFXN21DLEtBQUs2K0MsV0FBWTcrQyxLQUFLcTJFLFlBQWFyMkUsS0FBS20zRSxrQkFBbUJqMkMsR0FDNUZsaEMsS0FBS20zRSxrQkFBa0J0WCxtQkFBcUIwaUIsRUFFNUN2aUYsS0FBS3EyRSxZQUFZM04sV0FBYTFvRSxLQUFLMG9FLFdBQ25DMW9FLEtBQUttM0Usa0JBQWtCek8sV0FBYTFvRSxLQUFLMG9FLFdBQ3pDMW9FLEtBQUsyaUYsU0FBVyxJQUFJeFEsR0FBYW55RSxLQUFLMG9FLFlBRS9CLENBQUMsRUFBYTFvRSxLQUFLbTNFLGtCQUFrQjltRCxTQUNoRCxLQUFLLEVBR0QsT0FEQXBsQixFQUFHakksT0FDSSxDQUFDLEVBQWFoRCxLQUFLcTJFLFlBQVlobUQsU0FDMUMsS0FBSyxFQUlELE9BSEFwbEIsRUFBR2pJLE9BR0ksQ0FBQyxFQUFhaEQsS0FBS21pRCxZQUFZUSx5QkFBd0IsU0FBVXRCLEdBQWEsT0FBTzc3QyxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQzNILE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUswb0UsV0FBV21CLGtCQUFrQnhvQixJQUMvRCxLQUFLLEVBVUQsT0FUQXAyQyxFQUFHakksT0FDQ2hELEtBQUt3aUYsZUFDRG5oQyxJQUFjcmhELEtBQUt3aUYsYUFBYXBnQyxRQUNoQ3BpRCxLQUFLd2lGLGFBQWFueUQsUUFFWmd4QixHQUNOcmhELEtBQUt3aUYsYUFBYXZqQyxRQUduQixDQUFDLGNBSWhDLEtBQUssRUFNRCxPQUhBaDBDLEVBQUdqSSxPQUdJLENBQUMsRUFBYWhELEtBQUttaUQsWUFBWVUsNEJBQTJCLFdBQWMsT0FBT3I5QyxFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3JILE9BQU9sRSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUs0aUYsYUFDbEMsS0FBSyxFQUVELE9BREEzM0UsRUFBR2pJLE9BQ0ksQ0FBQyxjQUloQyxLQUFLLEVBSUQsT0FEQWlJLEVBQUdqSSxPQUNJLENBQUMsY0FLNUJxK0UsRUFBZ0JoaUYsVUFBVXVxRSx1QkFBeUIsU0FBVTFvQyxHQUd6RCxPQUZBbGhDLEtBQUs4dkIsV0FBV2tDLDRCQUNoQnJhLEVBNVdRLGtCQTRXUyxxQ0FBdUN1cEIsRUFBS0MsS0FDdERuaEMsS0FBSzBvRSxXQUFXa0IsdUJBQXVCMW9DLElBR2xEbWdELEVBQWdCaGlGLFVBQVU4b0UsZUFBaUIsV0FDdkMsSUFBSXorRCxFQUFRMUosS0FFWixPQURBQSxLQUFLdWhGLHNCQUNFdmhGLEtBQUs4dkIsV0FBV3NCLFNBQVEsV0FDM0IsT0FBTzFuQixFQUFNZy9ELFdBQVdQLHFCQUdoQ2taLEVBQWdCaGlGLFVBQVV1akYsVUFBWSxXQUNsQyxJQUFJbDVFLEVBQVExSixLQUNaLE9BQU9BLEtBQUs4dkIsV0FBVzJCLDRCQUEyQixXQUFjLE9BQU9qc0IsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUMxRyxPQUFPbEUsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUNyQyxPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBS0QsT0FISS9DLEtBQUt3aUYsY0FDTHhpRixLQUFLd2lGLGFBQWF2akMsT0FFZixDQUFDLEVBQWFqL0MsS0FBS3EyRSxZQUFZdnhCLFlBQzFDLEtBQUssRUFFRCxPQURBNzVDLEVBQUdqSSxPQUNJLENBQUMsRUFBYWhELEtBQUttM0Usa0JBQWtCcnlCLFlBQ2hELEtBQUssRUFFRCxPQURBNzVDLEVBQUdqSSxPQUNJLENBQUMsRUFBYWhELEtBQUttaUQsWUFBWTJDLFlBQzFDLEtBQUssRUFNRCxPQUxBNzVDLEVBQUdqSSxPQUlIaEQsS0FBS3M4RCxZQUFZdW1CLHVCQUNWLENBQUMsY0FVNUJ4QixFQUFnQmhpRixVQUFVeWpGLHFCQUF1QixXQUM3QyxJQUFJcDVFLEVBQVExSixLQUNaQSxLQUFLdWhGLHNCQUNMLElBQUl0dEUsRUFBVyxJQUFJeEssR0FJbkIsT0FIQXpKLEtBQUs4dkIsV0FBV2Usa0JBQWlCLFdBQzdCLE9BQU9ubkIsRUFBTWcvRCxXQUFXa1IsOEJBQThCM2xFLE1BRW5EQSxFQUFTdEssU0FFcEIwM0UsRUFBZ0JoaUYsVUFBVWlwRSxPQUFTLFNBQVVwcUQsRUFBT3BRLEVBQVV3RyxHQUMxRCxJQUFJNUssRUFBUTFKLEtBQ1pBLEtBQUt1aEYsc0JBQ0wsSUFBSTFnQyxFQUFXLElBQUl1eUIsR0FBY2wxRCxFQUFPcFEsRUFBVXdHLEdBSWxELE9BSEF0VSxLQUFLOHZCLFdBQVdlLGtCQUFpQixXQUM3QixPQUFPbm5CLEVBQU1pNUUsU0FBU3JhLE9BQU96bkIsTUFFMUJBLEdBRVh3Z0MsRUFBZ0JoaUYsVUFBVW1wRSxTQUFXLFNBQVUzbkIsR0FDM0MsSUFBSW4zQyxFQUFRMUosS0FHUkEsS0FBSytpRixrQkFHVC9pRixLQUFLOHZCLFdBQVdlLGtCQUFpQixXQUM3QixPQUFPbm5CLEVBQU1pNUUsU0FBU25hLFNBQVMzbkIsT0FHdkN3Z0MsRUFBZ0JoaUYsVUFBVTJqRiwwQkFBNEIsU0FBVTVwRCxHQUM1RCxJQUFJMXZCLEVBQVExSixLQUVaLE9BREFBLEtBQUt1aEYsc0JBQ0V2aEYsS0FBSzh2QixXQUNQc0IsU0FBUSxXQUNULE9BQU8xbkIsRUFBTW0xQyxXQUFXc1csYUFBYS83QixNQUVwQzUyQixNQUFLLFNBQVU2MkIsR0FDaEIsR0FBSUEsYUFBb0J5UixHQUNwQixPQUFPelIsRUFFTixHQUFJQSxhQUFvQjZULEdBQ3pCLE9BQU8sS0FHUCxNQUFNLElBQUlobkIsRUFBZWpCLEVBQUtlLFlBQWEsc01BT3ZEcTdELEVBQWdCaGlGLFVBQVU0akYsMkJBQTZCLFNBQVUva0UsR0FDN0QsSUFBSXhVLEVBQVExSixLQUVaLE9BREFBLEtBQUt1aEYsc0JBQ0V2aEYsS0FBSzh2QixXQUFXc0IsU0FBUSxXQUFjLE9BQU81ckIsRUFBTTlELFVBQVVnSSxPQUFPLE9BQVEsR0FBUSxXQUN2RixJQUFJdXNFLEVBQWFnQixFQUFNa0IsRUFDdkIsT0FBTzN5RSxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUs2K0MsV0FBVzRXLGFBQWF2M0MsR0FDNUIsSUFDOUIsS0FBSyxFQUlELE9BSEErM0QsRUFBY2hyRSxFQUFHakksT0FDakJpMEUsRUFBTyxJQUFJN0MsR0FBS2wyRCxFQUFPKzNELEVBQVlqb0IsWUFDbkNtcUIsRUFBaUJsQixFQUFLeEMsa0JBQWtCd0IsRUFBWTU1QixXQUM3QyxDQUFDLEVBQWM0NkIsRUFBSzNrQyxhQUFhNmxDLEdBQ1IsR0FBT3RiLHFCQUszRHdrQixFQUFnQmhpRixVQUFVZ2dFLE1BQVEsU0FBVW5tQyxHQUN4QyxJQUFJeHZCLEVBQVExSixLQUNaQSxLQUFLdWhGLHNCQUNMLElBQUl0dEUsRUFBVyxJQUFJeEssR0FJbkIsT0FIQXpKLEtBQUs4dkIsV0FBV2Usa0JBQWlCLFdBQzdCLE9BQU9ubkIsRUFBTWcvRCxXQUFXckosTUFBTW5tQyxFQUFXamxCLE1BRXRDQSxFQUFTdEssU0FFcEIwM0UsRUFBZ0JoaUYsVUFBVXNzQixXQUFhLFdBQ25DLE9BQU8zckIsS0FBS29tRCxhQUFhejZCLFlBRTdCMDFELEVBQWdCaGlGLFVBQVU2ekUsMkJBQTZCLFNBQVVwbEUsR0FDN0QsSUFBSXBFLEVBQVExSixLQUNaQSxLQUFLdWhGLHNCQUNMdmhGLEtBQUs4dkIsV0FBV2Usa0JBQWlCLFdBRTdCLE9BREFubkIsRUFBTWk1RSxTQUFTelAsMkJBQTJCcGxFLEdBQ25DL0wsUUFBUUMsY0FHdkJxL0UsRUFBZ0JoaUYsVUFBVTh6RSw4QkFBZ0MsU0FBVXJsRSxHQUc1RDlOLEtBQUsraUYsa0JBR1QvaUYsS0FBSzJpRixTQUFTeFAsOEJBQThCcmxFLElBRWhEM1AsT0FBT0MsZUFBZWlqRixFQUFnQmhpRixVQUFXLG1CQUFvQixDQUNqRWYsSUFBSyxXQUlELE9BQU8wQixLQUFLOHZCLFdBQVdxeUQsZ0JBRTNCOWpGLFlBQVksRUFDWmtaLGNBQWMsSUFFbEI4cEUsRUFBZ0JoaUYsVUFBVThkLFlBQWMsU0FBVW01RCxHQUM5QyxJQUFJNXNFLEVBQVExSixLQUNaQSxLQUFLdWhGLHNCQUNMLElBQUl0dEUsRUFBVyxJQUFJeEssR0FLbkIsT0FKQXpKLEtBQUs4dkIsV0FBV2Usa0JBQWlCLFdBRTdCLE9BREFubkIsRUFBTWcvRCxXQUFXbnJDLGVBQWU3ekIsRUFBTW9tQixXQUFZd21ELEVBQWdCcmlFLEdBQzNEbFMsUUFBUUMsYUFFWmlTLEVBQVN0SyxTQUViMDNFLEVBcmZ5QixHQTZnQmhDNkIsR0FBK0IsV0FDL0IsU0FBU0EsRUFBY3AxRSxHQUNuQjlOLEtBQUs4TixTQUFXQSxFQUtoQjlOLEtBQUttakYsT0FBUSxFQXFCakIsT0FuQkFELEVBQWM3akYsVUFBVStDLEtBQU8sU0FBVTFELEdBQ3JDc0IsS0FBS29qRixjQUFjcGpGLEtBQUs4TixTQUFTMUwsS0FBTTFELElBRTNDd2tGLEVBQWM3akYsVUFBVXlFLE1BQVEsU0FBVUEsR0FDdEM5RCxLQUFLb2pGLGNBQWNwakYsS0FBSzhOLFNBQVNoSyxNQUFPQSxJQUU1Q28vRSxFQUFjN2pGLFVBQVVna0YsS0FBTyxXQUMzQnJqRixLQUFLbWpGLE9BQVEsR0FFakJELEVBQWM3akYsVUFBVStqRixjQUFnQixTQUFVRSxFQUFjM2tFLEdBQzVELElBQUlqVixFQUFRMUosS0FDUEEsS0FBS21qRixPQUNONXlELFlBQVcsV0FDRjdtQixFQUFNeTVFLE9BQ1BHLEVBQWEza0UsS0FFbEIsSUFHSnVrRSxFQTVCdUIsR0F1RDlCSyxHQUE2QixXQU83QixTQUFTQSxJQUVMLElBREEsSUFBSUMsRUFBYSxHQUNSNzRFLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQzY0RSxFQUFXNzRFLEdBQU12SyxVQUFVdUssSUF4bW1CdkMsU0FBbURvYyxFQUFjcm9CLEVBQU9WLEVBQU15bEYsR0FDMUUsS0FBTS9rRixhQUFpQm1CLFFBQVVuQixFQUFNMkIsT0FBU29qRixFQUM1QyxNQUFNLElBQUl2OUQsRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjMEIsRUFBZSxtQkFBcUIvb0IsRUFBTywwQ0FFcEdncEIsRUFBYXk4RCxFQUFxQixXQUFhLEtBc21tQnBEQyxDQUEwQyxZQUFhRixFQUFZLGFBQWMsR0FDakYsSUFBSyxJQUFJL2xGLEVBQUksRUFBR0EsRUFBSStsRixFQUFXbmpGLFNBQVU1QyxFQUVyQyxHQURBOHBCLEVBQWdCLFlBQWEsU0FBVTlwQixFQUFHK2xGLEVBQVcvbEYsSUFDeEIsSUFBekIrbEYsRUFBVy9sRixHQUFHNEMsT0FDZCxNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQiwyRUFJeERybEIsS0FBSzJqRixjQUFnQixJQUFJLzBELEdBQVU0MEQsR0FrQnZDLE9BaEJBRCxFQUFZSyxXQUFhLFdBQ3JCLE9BQU9MLEVBQVlNLGNBRXZCTixFQUFZbGtGLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDdEMsS0FBTUEsYUFBaUJnNEQsR0FDbkIsTUFBTTU1RCxFQUFrQixVQUFXLFlBQWEsRUFBRzRCLEdBRXZELE9BQU92ckIsS0FBSzJqRixjQUFjcjVELFFBQVFpQixFQUFNbzRELGdCQVE1Q0osRUFBWU0sYUFBZSxJQUFJTixFQUFZMzBELEdBQVVHLFdBQVdSLG1CQUN6RGcxRCxFQXRDcUIsR0EyQzVCTyxHQUFXLElBQUkxWSxPQUFPOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQzFCLElBQUkyWSxHQUNBLFNBQW9CcmxGLEVBQU93aUMsR0FDdkJsaEMsS0FBS2toQyxLQUFPQSxFQUNabGhDLEtBQUs4UyxLQUFPLFFBQ1o5UyxLQUFLZ2tGLFlBQWMsR0FFbkJoa0YsS0FBS2drRixZQUEyQixjQUFJLFVBQVl0bEYsR0FLcER1bEYsR0FBMEMsV0FDMUMsU0FBU0EsSUFNTGprRixLQUFLa2tGLGVBQWlCLEtBZ0IxQixPQWRBRCxFQUF5QjVrRixVQUFVdzhELFNBQVcsV0FDMUMsT0FBTzk1RCxRQUFRQyxRQUFRLE9BRTNCaWlGLEVBQXlCNWtGLFVBQVVtOEQsZ0JBQWtCLGFBQ3JEeW9CLEVBQXlCNWtGLFVBQVVzaUYsa0JBQW9CLFNBQVV1QyxHQUM3RHIrRSxHQUFRN0YsS0FBS2trRixlQUFnQiwyQ0FDN0Jsa0YsS0FBS2trRixlQUFpQkEsRUFFdEJBLEVBQWUvSCxHQUFLejJELGtCQUV4QnUrRCxFQUF5QjVrRixVQUFVd2pGLHFCQUF1QixXQUN0RGg5RSxFQUErQixPQUF4QjdGLEtBQUtra0YsZUFBeUIsc0RBQ3JDbGtGLEtBQUtra0YsZUFBaUIsTUFFbkJELEVBdkJrQyxHQXlCekNFLEdBQTZDLFdBQzdDLFNBQVNBLEVBQTRCQyxHQUNqQyxJQUFJMTZFLEVBQVExSixLQUtaQSxLQUFLcWtGLGNBQWdCLEtBRXJCcmtGLEtBQUtvM0UsWUFBYytFLEdBQUt6MkQsZ0JBQ3hCMWxCLEtBQUtza0YscUJBQXNCLEVBSzNCdGtGLEtBQUt1a0YsYUFBZSxFQUVwQnZrRixLQUFLa2tGLGVBQWlCLEtBQ3RCbGtGLEtBQUt3a0YsY0FBZSxFQUNwQnhrRixLQUFLcWtGLGNBQWdCLFdBQ2pCMzZFLEVBQU02NkUsZUFDTjc2RSxFQUFNMHRFLFlBQWMxdEUsRUFBTSs2RSxVQUMxQi82RSxFQUFNNDZFLHFCQUFzQixFQUN4QjU2RSxFQUFNdzZFLGdCQUNOeDZFLEVBQU13NkUsZUFBZXg2RSxFQUFNMHRFLGNBR25DcDNFLEtBQUt1a0YsYUFBZSxFQUNwQnZrRixLQUFLKzZELEtBQU9xcEIsRUFBYS92RSxhQUFhLENBQUVuRixVQUFVLElBQzlDbFAsS0FBSys2RCxLQUNMLzZELEtBQUsrNkQsS0FBSzJwQixxQkFBcUIxa0YsS0FBS3FrRixnQkFJcENya0YsS0FBS3FrRixjQUFjLE1BQ25CRCxFQUFhOWxGLE1BQU1rRSxNQUFLLFNBQVV1NEQsR0FDOUJyeEQsRUFBTXF4RCxLQUFPQSxFQUNUcnhELEVBQU0yNkUsZUFFTjM2RSxFQUFNcXhELEtBQUsycEIscUJBQXFCaDdFLEVBQU0yNkUsa0JBRTNDLGdCQWdFWCxPQTNEQUYsRUFBNEI5a0YsVUFBVXc4RCxTQUFXLFdBQzdDLElBQUlueUQsRUFBUTFKLEtBQ1o2RixFQUE2QixNQUF0QjdGLEtBQUtxa0YsY0FBdUIscURBSW5DLElBQUlNLEVBQXNCM2tGLEtBQUt1a0YsYUFDM0JDLEVBQWV4a0YsS0FBS3drRixhQUV4QixPQURBeGtGLEtBQUt3a0YsY0FBZSxFQUNmeGtGLEtBQUsrNkQsS0FHSC82RCxLQUFLKzZELEtBQUtjLFNBQVMyb0IsR0FBY2hpRixNQUFLLFNBQVVvaUYsR0FJbkQsR0FBSWw3RSxFQUFNNjZFLGVBQWlCSSxFQUN2QixNQUFNLElBQUl6K0QsRUFBZWpCLEVBQUtZLFFBQVMseUNBR3ZDLE9BQUkrK0QsR0FDQS8rRSxFQUF3QyxpQkFBMUIrK0UsRUFBVUMsWUFBMEIsOENBQWdERCxHQUMzRixJQUFJYixHQUFXYSxFQUFVQyxZQUFhbjdFLEVBQU0wdEUsY0FHNUMsUUFmUnIxRSxRQUFRQyxRQUFRLE9Bb0IvQm1pRixFQUE0QjlrRixVQUFVbThELGdCQUFrQixXQUNwRHg3RCxLQUFLd2tGLGNBQWUsR0FFeEJMLEVBQTRCOWtGLFVBQVVzaUYsa0JBQW9CLFNBQVV1QyxHQUNoRXIrRSxHQUFRN0YsS0FBS2trRixlQUFnQiwyQ0FDN0Jsa0YsS0FBS2trRixlQUFpQkEsRUFFbEJsa0YsS0FBS3NrRixxQkFDTEosRUFBZWxrRixLQUFLbzNFLGNBRzVCK00sRUFBNEI5a0YsVUFBVXdqRixxQkFBdUIsV0FDekRoOUUsRUFBNkIsTUFBdEI3RixLQUFLcWtGLGNBQXVCLHVDQUNuQ3grRSxFQUErQixPQUF4QjdGLEtBQUtra0YsZUFBeUIsNkRBQ2pDbGtGLEtBQUsrNkQsTUFDTC82RCxLQUFLKzZELEtBQUsrcEIsd0JBQXdCOWtGLEtBQUtxa0YsZUFFM0Nya0YsS0FBS3FrRixjQUFnQixLQUNyQnJrRixLQUFLa2tGLGVBQWlCLE1BTTFCQyxFQUE0QjlrRixVQUFVb2xGLFFBQVUsV0FDNUMsSUFBSU0sRUFBYS9rRixLQUFLKzZELE1BQVEvNkQsS0FBSys2RCxLQUFLaXFCLFNBRXhDLE9BREFuL0UsRUFBc0IsT0FBZmsvRSxHQUE2QyxpQkFBZkEsRUFBeUIseUJBQTJCQSxHQUNsRixJQUFJNUksR0FBSzRJLElBRWJaLEVBekdxQyxHQWtINUNjLEdBQWlDLFdBQ2pDLFNBQVNBLEVBQWdCQyxFQUFNQyxHQUMzQm5sRixLQUFLa2xGLEtBQU9BLEVBQ1psbEYsS0FBS21sRixhQUFlQSxFQUNwQm5sRixLQUFLOFMsS0FBTyxhQUNaOVMsS0FBS2toQyxLQUFPaTdDLEdBQUtHLFlBZ0JyQixPQWRBbitFLE9BQU9DLGVBQWU2bUYsRUFBZ0I1bEYsVUFBVyxjQUFlLENBQzVEZixJQUFLLFdBQ0QsSUFBSThtRixFQUFVLENBQ1Ysa0JBQW1CcGxGLEtBQUttbEYsY0FFeEJFLEVBQWFybEYsS0FBS2tsRixLQUFLbnFCLEtBQUt1cUIsZ0NBQWdDLElBSWhFLE9BSElELElBQ0FELEVBQXVCLGNBQUlDLEdBRXhCRCxHQUVYL21GLFlBQVksRUFDWmtaLGNBQWMsSUFFWDB0RSxFQXJCeUIsR0E0QmhDTSxHQUErQyxXQUMvQyxTQUFTQSxFQUE4QkwsRUFBTUMsR0FDekNubEYsS0FBS2tsRixLQUFPQSxFQUNabGxGLEtBQUttbEYsYUFBZUEsRUFXeEIsT0FUQUksRUFBOEJsbUYsVUFBVXc4RCxTQUFXLFdBQy9DLE9BQU85NUQsUUFBUUMsUUFBUSxJQUFJaWpGLEdBQWdCamxGLEtBQUtrbEYsS0FBTWxsRixLQUFLbWxGLGdCQUUvREksRUFBOEJsbUYsVUFBVXNpRixrQkFBb0IsU0FBVXVDLEdBRWxFQSxFQUFlL0gsR0FBS0csY0FFeEJpSixFQUE4QmxtRixVQUFVd2pGLHFCQUF1QixhQUMvRDBDLEVBQThCbG1GLFVBQVVtOEQsZ0JBQWtCLGFBQ25EK3BCLEVBZHVDLEdBb0JsRCxTQUFTQyxHQUF3QmxwQixHQUM3QixJQUFLQSxFQUNELE9BQU8sSUFBSTJuQixHQUVmLE9BQVEzbkIsRUFBWXhwRCxNQUNoQixJQUFLLE9BQ0QsSUFBSW94QyxFQUFTb1ksRUFBWXBZLE9BTXpCLE9BSkFyK0MsSUFBNEIsaUJBQVhxK0MsR0FDRixPQUFYQSxJQUNBQSxFQUFhLE9BQ2JBLEVBQWEsS0FBbUMsaUNBQUksNkJBQ2pELElBQUlxaEMsR0FBOEJyaEMsRUFBUW9ZLEVBQVk2b0IsY0FBZ0IsS0FDakYsSUFBSyxXQUNELE9BQU83b0IsRUFBWXBZLE9BQ3ZCLFFBQ0ksTUFBTSxJQUFJaCtCLEVBQWVqQixFQUFLSSxpQkFBa0I7Ozs7Ozs7Ozs7Ozs7Ozs7R0FvQjVELFNBQVNvZ0UsR0FBa0J0M0UsR0FDdkIsT0FNSixTQUE4QkEsRUFBS0MsR0FDL0IsR0FBbUIsaUJBQVJELEdBQTRCLE9BQVJBLEVBQzNCLE9BQU8sRUFHWCxJQURBLElBQUloUCxFQUFTZ1AsRUFDSnhELEVBQUssRUFBRzBELEVBQVlELEVBQVN6RCxFQUFLMEQsRUFBVWhPLE9BQVFzSyxJQUFNLENBQy9ELElBQUkyRCxFQUFTRCxFQUFVMUQsR0FDdkIsR0FBSTJELEtBQVVuUCxHQUFvQyxtQkFBbkJBLEVBQU9tUCxHQUNsQyxPQUFPLEVBR2YsT0FBTzs7Ozs7Ozs7Ozs7Ozs7OztHQWpCQUMsQ0FBcUJKLEVBQUssQ0FBQyxPQUFRLFFBQVMsYUF3Q3ZELElBOEpJdTNFLEdBOUpBQyxHQUFnQyxXQUNoQyxTQUFTQSxFQUFlQyxHQUNwQjVsRixLQUFLNGxGLFlBQWNBLEVBc0N2QixPQXBDQUQsRUFBZXp3RSxPQUFTLFdBRXBCLE9BREE0UixFQUFlLG9CQUFxQjFtQixXQUM3QnlsRixHQUFxQjF4RSxVQUVoQ3d4RSxFQUFlRyxnQkFBa0IsV0FFN0IsT0FEQWgvRCxFQUFlLDZCQUE4QjFtQixXQUN0QzJsRixHQUE4QjV4RSxVQUV6Q3d4RSxFQUFlSyxXQUFhLFdBRXhCLElBREEsSUFBSTFiLEVBQVcsR0FDTjMvRCxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyL0QsRUFBUzMvRCxHQUFNdkssVUFBVXVLLEdBSzdCLE9BSEF3YyxFQUE0Qix3QkFBeUIvbUIsVUFBVyxHQUd6RCxJQUFJNmxGLEdBQXlCM2IsSUFFeENxYixFQUFlTyxZQUFjLFdBRXpCLElBREEsSUFBSTViLEVBQVcsR0FDTjMvRCxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyL0QsRUFBUzMvRCxHQUFNdkssVUFBVXVLLEdBSzdCLE9BSEF3YyxFQUE0Qix5QkFBMEIvbUIsVUFBVyxHQUcxRCxJQUFJK2xGLEdBQTBCN2IsSUFFekNxYixFQUFlOVYsVUFBWSxTQUFVM3dFLEdBR2pDLE9BRkFxb0IsRUFBZ0IsdUJBQXdCLFNBQVUsRUFBR3JvQixHQUNyRCtuQixFQUEwQix1QkFBd0I3bUIsVUFBVyxHQUN0RCxJQUFJZ21GLEdBQStCbG5GLElBRTlDeW1GLEVBQWV0bUYsVUFBVWlyQixRQUFVLFNBQVVpQixHQUN6QyxPQUFPdnJCLE9BQVN1ckIsR0FFYm82RCxFQXhDd0IsR0EwQy9CRSxHQUFzQyxTQUFVMTdFLEdBRWhELFNBQVMwN0UsSUFDTCxPQUFPMTdFLEVBQU92TSxLQUFLb0MsS0FBTSxzQkFBd0JBLEtBSXJELE9BTkF3RixFQUFNMUYsVUFBVStsRixFQUFzQjE3RSxHQUt0QzA3RSxFQUFxQjF4RSxTQUFXLElBQUkweEUsRUFDN0JBLEVBUDhCLENBUXZDRixJQUNFSSxHQUErQyxTQUFVNTdFLEdBRXpELFNBQVM0N0UsSUFDTCxPQUFPNTdFLEVBQU92TSxLQUFLb0MsS0FBTSwrQkFBaUNBLEtBSTlELE9BTkF3RixFQUFNMUYsVUFBVWltRixFQUErQjU3RSxHQUsvQzQ3RSxFQUE4QjV4RSxTQUFXLElBQUk0eEUsRUFDdENBLEVBUHVDLENBUWhESixJQUNFTSxHQUEwQyxTQUFVOTdFLEdBRXBELFNBQVM4N0UsRUFBeUJJLEdBQzlCLElBQUkzOEUsRUFBUVMsRUFBT3ZNLEtBQUtvQyxLQUFNLDBCQUE0QkEsS0FFMUQsT0FEQTBKLEVBQU0yOEUsVUFBWUEsRUFDWDM4RSxFQUVYLE9BTkFsRSxFQUFNMUYsVUFBVW1tRixFQUEwQjk3RSxHQU1uQzg3RSxFQVBrQyxDQVEzQ04sSUFDRVEsR0FBMkMsU0FBVWg4RSxHQUVyRCxTQUFTZzhFLEVBQTBCRSxHQUMvQixJQUFJMzhFLEVBQVFTLEVBQU92TSxLQUFLb0MsS0FBTSwyQkFBNkJBLEtBRTNELE9BREEwSixFQUFNMjhFLFVBQVlBLEVBQ1gzOEUsRUFFWCxPQU5BbEUsRUFBTTFGLFVBQVVxbUYsRUFBMkJoOEUsR0FNcENnOEUsRUFQbUMsQ0FRNUNSLElBQ0VTLEdBQWdELFNBQVVqOEUsR0FFMUQsU0FBU2k4RSxFQUErQkUsR0FDcEMsSUFBSTU4RSxFQUFRUyxFQUFPdk0sS0FBS29DLEtBQU0seUJBQTJCQSxLQUV6RCxPQURBMEosRUFBTTQ4RSxTQUFXQSxFQUNWNThFLEVBRVgsT0FOQWxFLEVBQU0xRixVQUFVc21GLEVBQWdDajhFLEdBTXpDaThFLEVBUHdDLENBUWpEVCxJQVFFWSxHQUFtQnBnRSxFQUF1QncvRCxHQUFnQixxQ0FrQjFEYSxHQUF1QixXQUV2QkMsR0FBK0IsV0FDL0IsU0FBU0EsRUFBYy83RSxFQUFNaWhDLEVBQVdTLEdBQ3BDcHNDLEtBQUswSyxLQUFPQSxFQUNaMUssS0FBSzJyQyxVQUFZQSxFQUNqQjNyQyxLQUFLb3NDLGdCQUFrQkEsRUFlM0IsT0FiQXE2QyxFQUFjcG5GLFVBQVVpZ0UsWUFBYyxTQUFVdGdFLEVBQUtxc0MsR0FDakQsSUFBSW5TLEVBQVksR0FVaEIsT0FUdUIsT0FBbkJsNUIsS0FBSzJyQyxVQUNMelMsRUFBVXoxQixLQUFLLElBQUlpb0MsR0FBYzFzQyxFQUFLZ0IsS0FBSzBLLEtBQU0xSyxLQUFLMnJDLFVBQVdOLElBR2pFblMsRUFBVXoxQixLQUFLLElBQUkybkMsR0FBWXBzQyxFQUFLZ0IsS0FBSzBLLEtBQU0yZ0MsSUFFL0NyckMsS0FBS29zQyxnQkFBZ0IvckMsT0FBUyxHQUM5QjY0QixFQUFVejFCLEtBQUssSUFBSTBvQyxHQUFrQm50QyxFQUFLZ0IsS0FBS29zQyxrQkFFNUNsVCxHQUVKdXRELEVBbkJ1QixHQXNCOUJDLEdBQWtDLFdBQ2xDLFNBQVNBLEVBQWlCaDhFLEVBQU1paEMsRUFBV1MsR0FDdkNwc0MsS0FBSzBLLEtBQU9BLEVBQ1oxSyxLQUFLMnJDLFVBQVlBLEVBQ2pCM3JDLEtBQUtvc0MsZ0JBQWtCQSxFQVczQixPQVRBczZDLEVBQWlCcm5GLFVBQVVpZ0UsWUFBYyxTQUFVdGdFLEVBQUtxc0MsR0FDcEQsSUFBSW5TLEVBQVksQ0FDWixJQUFJd1MsR0FBYzFzQyxFQUFLZ0IsS0FBSzBLLEtBQU0xSyxLQUFLMnJDLFVBQVdOLElBS3RELE9BSElyckMsS0FBS29zQyxnQkFBZ0IvckMsT0FBUyxHQUM5QjY0QixFQUFVejFCLEtBQUssSUFBSTBvQyxHQUFrQm50QyxFQUFLZ0IsS0FBS29zQyxrQkFFNUNsVCxHQUVKd3RELEVBZjBCLEdBc0NyQyxTQUFTQyxHQUFRQyxHQUNiLE9BQVFBLEdBQ0osS0FBS2xCLEdBQWVwNkMsSUFDcEIsS0FBS282QyxHQUFlbUIsU0FDcEIsS0FBS25CLEdBQWVvQixPQUNoQixPQUFPLEVBQ1gsS0FBS3BCLEdBQWVxQixTQUNwQixLQUFLckIsR0FBZXNCLGNBQ2hCLE9BQU8sRUFDWCxRQUNJLE1BQU1uaUUsRUFBSyx1Q0FBeUMraEUsS0F6QmhFLFNBQVdsQixHQUNQQSxFQUFlQSxFQUFvQixJQUFJLEdBQUssTUFDNUNBLEVBQWVBLEVBQXVCLE9BQUksR0FBSyxTQUMvQ0EsRUFBZUEsRUFBeUIsU0FBSSxHQUFLLFdBS2pEQSxFQUFlQSxFQUF5QixTQUFJLEdBQUssV0FLakRBLEVBQWVBLEVBQThCLGNBQUksR0FBSyxnQkFiMUQsQ0FjR0EsS0FBbUJBLEdBQWlCLEtBZXZDLElBQUl1QixHQUE4QixXQXVCOUIsU0FBU0EsRUFBYUwsRUFBWXBwRSxFQUFZaVIsRUFBTXk0RCxFQUFjOTZDLEVBQWlCVCxHQUMvRTNyQyxLQUFLNG1GLFdBQWFBLEVBQ2xCNW1GLEtBQUt3ZCxXQUFhQSxFQUNsQnhkLEtBQUt5dUIsS0FBT0EsRUFDWnp1QixLQUFLa25GLGFBQWVBLE9BR0kzOUUsSUFBcEI2aUMsR0FDQXBzQyxLQUFLbW5GLGVBRVRubkYsS0FBS2tuRixrQkFBZ0MzOUUsSUFBakIyOUUsR0FBNkJBLEVBQ2pEbG5GLEtBQUtvc0MsZ0JBQWtCQSxHQUFtQixHQUMxQ3BzQyxLQUFLMnJDLFVBQVlBLEdBQWEsR0F3RGxDLE9BdERBczdDLEVBQWE1bkYsVUFBVStuRixxQkFBdUIsU0FBVWg5QyxHQUNwRCxJQUFJaTlDLEVBQXlCLE1BQWJybkYsS0FBS3l1QixLQUFlLEtBQU96dUIsS0FBS3l1QixLQUFLcEIsTUFBTStjLEdBQ3ZENTNCLEVBQVUsSUFBSXkwRSxFQUFham5GLEtBQUs0bUYsV0FBWTVtRixLQUFLd2QsV0FBWTZwRSxHQUMvQyxFQUFPcm5GLEtBQUtvc0MsZ0JBQWlCcHNDLEtBQUsyckMsV0FFcEQsT0FEQW41QixFQUFRODBFLG9CQUFvQmw5QyxHQUNyQjUzQixHQUVYeTBFLEVBQWE1bkYsVUFBVWtvRix5QkFBMkIsU0FBVW45QyxHQUN4RCxJQUFJaTlDLEVBQXlCLE1BQWJybkYsS0FBS3l1QixLQUFlLEtBQU96dUIsS0FBS3l1QixLQUFLcEIsTUFBTStjLEdBQ3ZENTNCLEVBQVUsSUFBSXkwRSxFQUFham5GLEtBQUs0bUYsV0FBWTVtRixLQUFLd2QsV0FBWTZwRSxHQUMvQyxFQUFPcm5GLEtBQUtvc0MsZ0JBQWlCcHNDLEtBQUsyckMsV0FFcEQsT0FEQW41QixFQUFRMjBFLGVBQ0QzMEUsR0FFWHkwRSxFQUFhNW5GLFVBQVVtb0YscUJBQXVCLFNBQVVyckUsR0FHcEQsT0FBTyxJQUFJOHFFLEVBQWFqbkYsS0FBSzRtRixXQUFZNW1GLEtBQUt3ZCxXQUNwQyxNQUNRLEVBQU14ZCxLQUFLb3NDLGdCQUFpQnBzQyxLQUFLMnJDLFlBRXZEczdDLEVBQWE1bkYsVUFBVW9vRixZQUFjLFNBQVU5MkQsR0FDM0MsSUFBSSsyRCxFQUFpQyxPQUFkMW5GLEtBQUt5dUIsTUFBaUJ6dUIsS0FBS3l1QixLQUFLemUsVUFDakQsR0FDQSxvQkFBc0JoUSxLQUFLeXVCLEtBQUtqakIsV0FBYSxJQUNuRCxPQUFPLElBQUkwYSxFQUFlakIsRUFBS0ksaUJBQWtCLFlBQWNybEIsS0FBS3dkLFdBQWEsZ0NBQzdFbVQsRUFDQSsyRCxJQUdSVCxFQUFhNW5GLFVBQVVvUSxTQUFXLFNBQVV1NkIsR0FDeEMsWUFBMEZ6Z0MsSUFBbEZ2SixLQUFLMnJDLFVBQVU4WSxNQUFLLFNBQVVyYSxHQUFTLE9BQU9KLEVBQVVqYyxXQUFXcWMsWUFHaEU3Z0MsSUFGUHZKLEtBQUtvc0MsZ0JBQWdCcVksTUFBSyxTQUFVcGEsR0FDaEMsT0FBT0wsRUFBVWpjLFdBQVdzYyxFQUFVRCxXQUdsRDY4QyxFQUFhNW5GLFVBQVU4bkYsYUFBZSxXQUdsQyxHQUFrQixPQUFkbm5GLEtBQUt5dUIsS0FHVCxJQUFLLElBQUloeEIsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS3l1QixLQUFLcHVCLE9BQVE1QyxJQUNsQ3VDLEtBQUtzbkYsb0JBQW9CdG5GLEtBQUt5dUIsS0FBS253QixJQUFJYixLQUcvQ3dwRixFQUFhNW5GLFVBQVVpb0Ysb0JBQXNCLFNBQVU5NUQsR0FDbkQsR0FBdUIsSUFBbkJBLEVBQVFudEIsT0FDUixNQUFNTCxLQUFLeW5GLFlBQVkscUNBRTNCLEdBQUlkLEdBQVEzbUYsS0FBSzRtRixhQUFlSixHQUFxQnIyRSxLQUFLcWQsR0FDdEQsTUFBTXh0QixLQUFLeW5GLFlBQVksbURBR3hCUixFQTNGc0IsR0FrRzdCVSxHQUNBLFNBQThCaDhELEVBQVkzc0IsR0FDdENnQixLQUFLMnJCLFdBQWFBLEVBQ2xCM3JCLEtBQUtoQixJQUFNQSxHQVFmNG9GLEdBQW1DLFdBQ25DLFNBQVNBLEVBQWtCQyxHQUN2QjduRixLQUFLNm5GLGFBQWVBLEVBbVV4QixPQWhVQUQsRUFBa0J2b0YsVUFBVXlvRixhQUFlLFNBQVV0cUUsRUFBWXpXLEdBQzdELElBQUl5TCxFQUFVLElBQUl5MEUsR0FBYXZCLEdBQWVwNkMsSUFBSzl0QixFQUFZb1IsR0FBVUYsWUFDekVxNUQsR0FBb0Isc0NBQXVDdjFFLEVBQVN6TCxHQUNwRSxJQUFJaWhGLEVBQWFob0YsS0FBS2lvRixVQUFVbGhGLEVBQU95TCxHQUN2QyxPQUFPLElBQUlpMEUsR0FBY3VCLEVBQ1IsS0FBTXgxRSxFQUFRNDVCLGtCQUduQ3c3QyxFQUFrQnZvRixVQUFVNm9GLGVBQWlCLFNBQVUxcUUsRUFBWXpXLEVBQU9nckUsR0FDdEUsSUFBSXYvRCxFQUFVLElBQUl5MEUsR0FBYXZCLEdBQWVtQixTQUFVcnBFLEVBQVlvUixHQUFVRixZQUM5RXE1RCxHQUFvQixzQ0FBdUN2MUUsRUFBU3pMLEdBQ3BFLElBQ0k0a0MsRUFDQVMsRUFGQTQ3QyxFQUFhaG9GLEtBQUtpb0YsVUFBVWxoRixFQUFPeUwsR0FHdkMsR0FBS3UvRCxFQUlBLENBRUQsSUFEQSxJQUFJb1csRUFBc0IsSUFBSXB4RCxHQUFVbkksR0FBVXhCLFlBQ3pDemlCLEVBQUssRUFBR3k5RSxFQUFlclcsRUFBWXBuRSxFQUFLeTlFLEVBQWEvbkYsT0FBUXNLLElBQU0sQ0FDeEUsSUFBSTA5RSxFQUFvQkQsRUFBYXo5RSxHQUNqQ3EvQixPQUFZLEVBQ2hCLEdBQUlxK0MsYUFBNkI5RSxHQUM3QnY1QyxFQUFZcStDLEVBQWtCMUUsa0JBRTdCLElBQWlDLGlCQUF0QjBFLEVBSVosTUFBTXhqRSxFQUFLLDREQUhYbWxCLEVBQVlzK0MsR0FBZ0M5cUUsRUFBWTZxRSxHQUs1RCxJQUFLNzFFLEVBQVEvQyxTQUFTdTZCLEdBQ2xCLE1BQU0sSUFBSTlqQixFQUFlakIsRUFBS0ksaUJBQWtCLFVBQVkya0IsRUFBWSx1RUFFNUVtK0MsRUFBc0JBLEVBQW9CbHhELElBQUkrUyxHQUVsRDJCLEVBQVloQyxHQUFVRSxRQUFRcytDLEdBQzlCLzdDLEVBQWtCNTVCLEVBQVE0NUIsZ0JBQWdCNzJCLFFBQU8sU0FBVTgwQixHQUN2RCxPQUFPc0IsRUFBVTFCLE9BQU9JLEVBQVVELGVBeEJ0Q3VCLEVBQVloQyxHQUFVRyxVQUFVdDNCLEVBQVFtNUIsV0FDeENTLEVBQWtCNTVCLEVBQVE0NUIsZ0JBMEI5QixPQUFPLElBQUlxNkMsR0FBY3VCLEVBQVlyOEMsRUFBV1MsSUFHcER3N0MsRUFBa0J2b0YsVUFBVWtwRixnQkFBa0IsU0FBVS9xRSxFQUFZelcsR0FDaEUsSUFBSTJDLEVBQVExSixLQUNSd1MsRUFBVSxJQUFJeTBFLEdBQWF2QixHQUFlb0IsT0FBUXRwRSxFQUFZb1IsR0FBVUYsWUFDNUVxNUQsR0FBb0Isc0NBQXVDdjFFLEVBQVN6TCxHQUNwRSxJQUFJeWhGLEVBQWlCLElBQUl6eEQsR0FBVW5JLEdBQVV4QixZQUN6QzQ2RCxFQUFhaDhDLEdBQVlwYyxNQUM3QnBlLEVBQVF6SyxHQUFPLFNBQVUvSCxFQUFLTixHQUMxQixJQUFJK3ZCLEVBQU82NUQsR0FBZ0M5cUUsRUFBWXhlLEdBQ25EeXBGLEVBQWVqMkUsRUFBUSswRSx5QkFBeUI5NEQsR0FFcEQsSUFEQS92QixFQUFRZ0wsRUFBTWcvRSxnQkFBZ0JocUYsRUFBTytwRixjQUNoQjVDLEdBRWpCMkMsRUFBaUJBLEVBQWV2eEQsSUFBSXhJLE9BRW5DLENBQ0QsSUFBSWs2RCxFQUFjai9FLEVBQU11K0UsVUFBVXZwRixFQUFPK3BGLEdBQ3RCLE1BQWZFLElBQ0FILEVBQWlCQSxFQUFldnhELElBQUl4SSxHQUNwQ3U1RCxFQUFhQSxFQUFXOXpFLElBQUl1YSxFQUFNazZELFFBSTlDLElBQUlDLEVBQU9qL0MsR0FBVUUsUUFBUTIrQyxHQUM3QixPQUFPLElBQUk5QixHQUFpQnNCLEVBQVlZLEVBQU1wMkUsRUFBUTQ1QixrQkFHMUR3N0MsRUFBa0J2b0YsVUFBVXdwRixtQkFBcUIsU0FBVXJyRSxFQUFZNHNCLEVBQU8xckMsRUFBT29xRixHQUNqRixJQUFJdDJFLEVBQVUsSUFBSXkwRSxHQUFhdkIsR0FBZW9CLE9BQVF0cEUsRUFBWW9SLEdBQVVGLFlBQ3hFdmpCLEVBQU8sQ0FBQzQ5RSxHQUFzQnZyRSxFQUFZNHNCLElBQzFDLzBCLEVBQVMsQ0FBQzNXLEdBQ2QsR0FBSW9xRixFQUFvQnpvRixPQUFTLEdBQU0sRUFDbkMsTUFBTSxJQUFJNmxCLEVBQWVqQixFQUFLSSxpQkFBa0IsWUFBYzdILEVBQWEseUdBRy9FLElBQUssSUFBSS9mLEVBQUksRUFBR0EsRUFBSXFyRixFQUFvQnpvRixPQUFRNUMsR0FBSyxFQUNqRDBOLEVBQUsxSCxLQUFLc2xGLEdBQXNCdnJFLEVBQVlzckUsRUFBb0JyckYsS0FDaEU0WCxFQUFPNVIsS0FBS3FsRixFQUFvQnJyRixFQUFJLElBRXhDLElBQUkrcUYsRUFBaUIsSUFBSXp4RCxHQUFVbkksR0FBVXhCLFlBQ3pDNDZELEVBQWFoOEMsR0FBWXBjLE1BQzdCLElBQVNueUIsRUFBSSxFQUFHQSxFQUFJME4sRUFBSzlLLFNBQVU1QyxFQUFHLENBQ2xDLElBQUlneEIsRUFBT3RqQixFQUFLMU4sR0FDWmdyRixFQUFlajJFLEVBQVErMEUseUJBQXlCOTRELEdBQ2hEdTZELEVBQVVocEYsS0FBSzBvRixnQkFBZ0JyekUsRUFBTzVYLEdBQUlnckYsR0FDOUMsR0FBSU8sYUFBbUJuRCxHQUVuQjJDLEVBQWlCQSxFQUFldnhELElBQUl4SSxPQUVuQyxDQUNELElBQUlrNkQsRUFBYzNvRixLQUFLaW9GLFVBQVVlLEVBQVNQLEdBQ3ZCLE1BQWZFLElBQ0FILEVBQWlCQSxFQUFldnhELElBQUl4SSxHQUNwQ3U1RCxFQUFhQSxFQUFXOXpFLElBQUl1YSxFQUFNazZELEtBSTlDLElBQUlDLEVBQU9qL0MsR0FBVUUsUUFBUTIrQyxHQUM3QixPQUFPLElBQUk5QixHQUFpQnNCLEVBQVlZLEVBQU1wMkUsRUFBUTQ1QixrQkFTMUR3N0MsRUFBa0J2b0YsVUFBVTRwRixnQkFBa0IsU0FBVXpyRSxFQUFZelcsRUFBT21pRixRQUNuRCxJQUFoQkEsSUFBMEJBLEdBQWMsR0FDNUMsSUFBSTEyRSxFQUFVLElBQUl5MEUsR0FBYWlDLEVBQWN4RCxHQUFlc0IsY0FBZ0J0QixHQUFlcUIsU0FBVXZwRSxFQUFZb1IsR0FBVUYsWUFDdkg0eEQsRUFBU3RnRixLQUFLaW9GLFVBQVVsaEYsRUFBT3lMLEdBR25DLE9BRkEzTSxFQUFpQixNQUFWeTZFLEVBQWdCLG1DQUN2Qno2RSxFQUEwQyxJQUFuQzJNLEVBQVE0NUIsZ0JBQWdCL3JDLE9BQWMsaURBQ3RDaWdGLEdBR1hzSCxFQUFrQnZvRixVQUFVcXBGLGdCQUFrQixTQUFVM2hGLEVBQU95TCxHQUMzRCxJQUNJLE9BQU94UyxLQUFLNm5GLGFBQWE5Z0YsR0FFN0IsTUFBT3ZHLEdBQ0gsSUFBSXVGLEVBQVVpMEUsR0FBYXg1RSxHQUMzQixNQUFNZ1MsRUFBUWkxRSxZQUFZMWhGLEtBWWxDNmhGLEVBQWtCdm9GLFVBQVU0b0YsVUFBWSxTQUFVbGhGLEVBQU95TCxHQUVyRCxHQUFJMjJFLEdBREpwaUYsRUFBUS9HLEtBQUswb0YsZ0JBQWdCM2hGLEVBQU95TCxJQUdoQyxPQURBdTFFLEdBQW9CLDJCQUE0QnYxRSxFQUFTekwsR0FDbEQvRyxLQUFLb3BGLFlBQVlyaUYsRUFBT3lMLEdBRTlCLEdBQUl6TCxhQUFpQjQrRSxHQU90QixPQURBM2xGLEtBQUtxcEYsd0JBQXdCdGlGLEVBQU95TCxHQUM3QixLQVFQLEdBSElBLEVBQVFpYyxNQUNSamMsRUFBUW01QixVQUFVbG9DLEtBQUsrTyxFQUFRaWMsTUFFL0IxbkIsYUFBaUJsSCxNQUFPLENBT3hCLEdBQUkyUyxFQUFRMDBFLGNBQ1IxMEUsRUFBUW8wRSxhQUFlbEIsR0FBZXNCLGNBQ3RDLE1BQU14MEUsRUFBUWkxRSxZQUFZLG1DQUU5QixPQUFPem5GLEtBQUtzcEYsV0FBV3ZpRixFQUFPeUwsR0FHOUIsT0FBT3hTLEtBQUt1cEYsaUJBQWlCeGlGLEVBQU95TCxJQUloRG8xRSxFQUFrQnZvRixVQUFVK3BGLFlBQWMsU0FBVWo3RSxFQUFLcUUsR0FDckQsSUFBSTlJLEVBQVExSixLQUNSc0MsRUFBUyxJQUFJOHhCLEdBQVVsSyxHQWdCM0IsT0FmSWxhLEVBQVE3QixHQUdKcUUsRUFBUWljLE1BQVFqYyxFQUFRaWMsS0FBS3B1QixPQUFTLEdBQ3RDbVMsRUFBUW01QixVQUFVbG9DLEtBQUsrTyxFQUFRaWMsTUFJbkNqZCxFQUFRckQsR0FBSyxTQUFVblAsRUFBS3NZLEdBQ3hCLElBQUlxeEUsRUFBY2ovRSxFQUFNdStFLFVBQVUzd0UsRUFBSzlFLEVBQVE0MEUscUJBQXFCcG9GLElBQ2pELE1BQWYycEYsSUFDQXJtRixFQUFTQSxFQUFPMGUsT0FBT2hpQixFQUFLMnBGLE9BSWpDLElBQUkzOEMsR0FBWTFwQyxJQUUzQnNsRixFQUFrQnZvRixVQUFVaXFGLFdBQWEsU0FBVXArRCxFQUFPMVksR0FHdEQsSUFGQSxJQUFJbFEsRUFBUyxHQUNUa25GLEVBQWEsRUFDUjcrRSxFQUFLLEVBQUc4K0UsRUFBVXYrRCxFQUFPdmdCLEVBQUs4K0UsRUFBUXBwRixPQUFRc0ssSUFBTSxDQUN6RCxJQUFJNnZDLEVBQVFpdkMsRUFBUTkrRSxHQUNoQisrRSxFQUFjMXBGLEtBQUtpb0YsVUFBVXp0QyxFQUFPaG9DLEVBQVFnMUUscUJBQXFCZ0MsSUFDbEQsTUFBZkUsSUFHQUEsRUFBYzU3QyxHQUFVRSxVQUU1QjFyQyxFQUFPbUIsS0FBS2ltRixHQUNaRixJQUVKLE9BQU8sSUFBSTE1QyxHQUFXeHRDLElBTTFCc2xGLEVBQWtCdm9GLFVBQVVncUYsd0JBQTBCLFNBQVUzcUYsRUFBTzhULEdBRW5FLElBQUttMEUsR0FBUW4wRSxFQUFRbzBFLFlBQ2pCLE1BQU1wMEUsRUFBUWkxRSxZQUFZL29GLEVBQU1rbkYsWUFBYywrQ0FFbEQsR0FBcUIsT0FBakJwekUsRUFBUWljLEtBQ1IsTUFBTWpjLEVBQVFpMUUsWUFBWS9vRixFQUFNa25GLFlBQWMsK0NBRWxELEdBQUlsbkYsYUFBaUJtbkYsR0FBc0IsQ0FDdkMsR0FBSXJ6RSxFQUFRbzBFLGFBQWVsQixHQUFlbUIsU0FLckMsTUFBSXIwRSxFQUFRbzBFLGFBQWVsQixHQUFlb0IsUUFDM0NqaEYsRUFBTzJNLEVBQVFpYyxLQUFLcHVCLE9BQVMsRUFBRywwRUFFMUJtUyxFQUFRaTFFLFlBQVksNkVBS3BCajFFLEVBQVFpMUUsWUFBWSw4RUFWMUJqMUUsRUFBUW01QixVQUFVbG9DLEtBQUsrTyxFQUFRaWMsV0FjbEMsR0FBSS92QixhQUFpQnFuRixHQUN0QnZ6RSxFQUFRNDVCLGdCQUFnQjNvQyxLQUFLLElBQUkwbUMsR0FBZTMzQixFQUFRaWMsS0FBTTA3QyxHQUF5QmgyRCxnQkFFdEYsR0FBSXpWLGFBQWlCdW5GLEdBQTBCLENBQ2hELElBQUkwRCxFQUFpQjNwRixLQUFLNHBGLDRCQUE0QmxyRixFQUFNa25GLFlBQWFsbkYsRUFBTTJuRixXQUMzRUwsRUFBYSxJQUFJM2IsR0FBNkJzZixHQUNsRG4zRSxFQUFRNDVCLGdCQUFnQjNvQyxLQUFLLElBQUkwbUMsR0FBZTMzQixFQUFRaWMsS0FBTXUzRCxTQUU3RCxHQUFJdG5GLGFBQWlCeW5GLEdBQTJCLENBQzdDd0QsRUFBaUIzcEYsS0FBSzRwRiw0QkFBNEJsckYsRUFBTWtuRixZQUFhbG5GLEVBQU0ybkYsV0FBL0UsSUFDSUgsRUFBYyxJQUFJemIsR0FBOEJrZixHQUNwRG4zRSxFQUFRNDVCLGdCQUFnQjNvQyxLQUFLLElBQUkwbUMsR0FBZTMzQixFQUFRaWMsS0FBTXkzRCxTQUU3RCxHQUFJeG5GLGFBQWlCMG5GLEdBQWdDLENBQ3RELElBQUl2YixFQUFVN3FFLEtBQUtpcEYsZ0JBQWdCLHVCQUF3QnZxRixFQUFNNG5GLFVBQzdEdUQsRUFBbUIsSUFBSWpmLEdBQW1DQyxHQUM5RHI0RCxFQUFRNDVCLGdCQUFnQjNvQyxLQUFLLElBQUkwbUMsR0FBZTMzQixFQUFRaWMsS0FBTW83RCxTQUc5RGhsRSxFQUFLLDRCQUE4Qm5tQixJQVEzQ2twRixFQUFrQnZvRixVQUFVa3FGLGlCQUFtQixTQUFVN3FGLEVBQU84VCxHQUM1RCxHQUFjLE9BQVY5VCxFQUNBLE9BQU9vdkMsR0FBVUUsU0FFaEIsR0FBcUIsaUJBQVZ0dkMsRUFDWixPQUFJMnBELEdBQWMzcEQsR0FDUCxJQUFJNnZDLEdBQWE3dkMsR0FHakIsSUFBSTh2QyxHQUFZOXZDLEdBRzFCLEdBQXFCLGtCQUFWQSxFQUNaLE9BQU91dkMsR0FBYUMsR0FBR3h2QyxHQUV0QixHQUFxQixpQkFBVkEsRUFDWixPQUFPLElBQUlrd0MsR0FBWWx3QyxHQUV0QixHQUFJQSxhQUFpQjJLLEtBQ3RCLE9BQU8sSUFBSXdsQyxHQUFlMWIsR0FBVUksU0FBUzcwQixJQUU1QyxHQUFJQSxhQUFpQnkwQixHQUl0QixPQUFPLElBQUkwYixHQUFlLElBQUkxYixHQUFVejBCLEVBQU0wMEIsUUFBZ0QsSUFBdkN4aUIsS0FBS0MsTUFBTW5TLEVBQU0yMEIsWUFBYyxPQUVyRixHQUFJMzBCLGFBQWlCb3JFLEdBQ3RCLE9BQU8sSUFBSTc2QixHQUFjdndDLEdBRXhCLEdBQUlBLGFBQWlCbXNCLEdBQ3RCLE9BQU8sSUFBSWtrQixHQUFVcndDLEdBRXBCLEdBQUlBLGFBQWlCaXBGLEdBQ3RCLE9BQU8sSUFBSTM0QyxHQUFTdHdDLEVBQU1pdEIsV0FBWWp0QixFQUFNTSxLQUc1QyxNQUFNd1QsRUFBUWkxRSxZQUFZLDRCQUE4QnQvRCxFQUFpQnpwQixLQUdqRmtwRixFQUFrQnZvRixVQUFVdXFGLDRCQUE4QixTQUFVcHNFLEVBQVk4c0QsR0FDNUUsSUFBSTVnRSxFQUFRMUosS0FDWixPQUFPc3FFLEVBQVNyNUQsS0FBSSxTQUFVOFgsRUFBU3RyQixHQUluQyxJQUFJK1UsRUFBVSxJQUFJeTBFLEdBQWF2QixHQUFlcUIsU0FBVXZwRSxFQUFZb1IsR0FBVUYsWUFDOUUsT0FBT2hsQixFQUFNdStFLFVBQVVsL0QsRUFBU3ZXLEVBQVFnMUUscUJBQXFCL3BGLFFBRzlEbXFGLEVBclUyQixHQThVdEMsU0FBU3VCLEdBQW9CcGlGLEdBQ3pCLFFBQXlCLGlCQUFWQSxHQUNELE9BQVZBLEdBQ0VBLGFBQWlCbEgsT0FDakJrSCxhQUFpQnNDLE1BQ2pCdEMsYUFBaUJvc0IsSUFDakJwc0IsYUFBaUIraUUsSUFDakIvaUUsYUFBaUI4akIsSUFDakI5akIsYUFBaUI0Z0YsSUFDakI1Z0YsYUFBaUI0K0UsSUFFM0IsU0FBU29DLEdBQW9CaGlGLEVBQVN5TSxFQUFTekwsR0FDM0MsSUFBS29pRixHQUFvQnBpRixLQUFXaWlCLEVBQWNqaUIsR0FBUSxDQUN0RCxJQUFJa2lCLEVBQWNkLEVBQWlCcGhCLEdBQ25DLEtBQW9CLGNBQWhCa2lCLEVBRU16VyxFQUFRaTFFLFlBQVkxaEYsRUFBVSxvQkFHOUJ5TSxFQUFRaTFFLFlBQVkxaEYsRUFBVSxJQUFNa2pCLElBT3RELFNBQVM4L0QsR0FBc0J2ckUsRUFBWWlSLEdBQ3ZDLEdBQUlBLGFBQWdCODBELEdBQ2hCLE9BQU85MEQsRUFBS2sxRCxjQUVYLEdBQW9CLGlCQUFUbDFELEVBQ1osT0FBTzY1RCxHQUFnQzlxRSxFQUFZaVIsR0FJbkQsTUFBTSxJQUFJdkksRUFBZWpCLEVBQUtJLGlCQUFrQixZQUFjN0gsRUFBYSwwRkFVbkYsU0FBUzhxRSxHQUFnQzlxRSxFQUFZaVIsR0FDakQsSUFDSSxPQXg5QlIsU0FBZ0NBLEdBRTVCLEdBRFlBLEVBQUtxN0QsT0FBT2hHLEtBQ1gsRUFDVCxNQUFNLElBQUk1OUQsRUFBZWpCLEVBQUtJLGlCQUFrQix1QkFBeUJvSixFQUFPLHdEQUdwRixJQUNJLE9BQU8sSUFBSzgwRCxHQUFZdGtGLEtBQUtxQixNQUFNaWpGLEdBQWEvOUUsRUFBTXZCLGVBQWUsTUFBQyxHQUFTd3FCLEVBQUt2aUIsTUFBTSxRQUU5RixNQUFPMUwsR0FDSCxNQUFNLElBQUkwbEIsRUFBZWpCLEVBQUtJLGlCQUFrQix1QkFBeUJvSixFQUFPLDhFQTg4QnpFczdELENBQXVCdDdELEdBQU1rMUQsY0FFeEMsTUFBT25qRixHQUNILElBQUl1RixFQUFVaTBFLEdBQWF4NUUsR0FDM0IsTUFBTSxJQUFJMGxCLEVBQWVqQixFQUFLSSxpQkFBa0IsWUFBYzdILEVBQWEsZ0NBQWtDelgsSUFPckgsU0FBU2kwRSxHQUFhbDJFLEdBQ2xCLE9BQU9BLGFBQWlCbUMsTUFBUW5DLEVBQU1pQyxRQUFVakMsRUFBTTBIOzs7Ozs7Ozs7Ozs7Ozs7O0dBb0IxRCxJQUFJdytFLEdBQWUsMkJBQ2ZDLElBQWMsRUFDZEMsSUFBa0MsRUFDbENDLElBQTZCLEVBTTdCQyxHQUF1QnRzQyxHQUFVUSxvQkFRakMrckMsR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0JqSSxHQUN2QixRQUFzQjc0RSxJQUFsQjY0RSxFQUFTdjJELEtBQW9CLENBQzdCLFFBQXFCdGlCLElBQWpCNjRFLEVBQVN0MkQsSUFDVCxNQUFNLElBQUk1RixFQUFlakIsRUFBS0ksaUJBQWtCLHNEQUVwRHJsQixLQUFLNnJCLEtBQU9tK0QsR0FDWmhxRixLQUFLOHJCLElBQU1tK0QsUUFHWHBpRSxFQUFrQixXQUFZLG1CQUFvQixPQUFRdTZELEVBQVN2MkQsTUFDbkU3ckIsS0FBSzZyQixLQUFPdTJELEVBQVN2MkQsS0FDckI5RCxFQUEwQixXQUFZLFVBQVcsTUFBT3E2RCxFQUFTdDJELEtBQ2pFOXJCLEtBQUs4ckIsSUFBTXRGLEVBQVU0N0QsRUFBU3QyRCxJQUFLbStELElBdUJ2QyxHQXJCQXhnRSxFQUFvQixXQUFZMjRELEVBQVUsQ0FDdEMsT0FDQSxNQUNBLGNBQ0Esd0JBQ0EsaUJBQ0EsaUNBRUpyNkQsRUFBMEIsV0FBWSxTQUFVLGNBQWVxNkQsRUFBUzlsQixhQUN4RXQ4RCxLQUFLczhELFlBQWM4bEIsRUFBUzlsQixZQUM1QnYwQyxFQUEwQixXQUFZLFVBQVcsd0JBQXlCcTZELEVBQVMvMEMsd0JBRzVDLElBQW5DKzBDLEVBQVMvMEMsc0JBQ1R2cEMsRUFBTSxvUUFFa0MsSUFBbkNzK0UsRUFBUy8wQyx1QkFDZHZwQyxFQUFNLG1zQkFFVjlELEtBQUtxdEMsc0JBQXdCN21CLEVBQVU0N0QsRUFBUy8wQyxzQkFBdUI2OEMsSUFDdkVuaUUsRUFBMEIsV0FBWSxTQUFVLGlCQUFrQnE2RCxFQUFTbEIscUJBQzNDMzNFLElBQTVCNjRFLEVBQVNsQixlQUNUbGhGLEtBQUtraEYsZUFBaUJwakMsR0FBVVUsNkJBRS9CLENBQ0QsR0FBSTRqQyxFQUFTbEIsaUJBQW1Ca0osSUFDNUJoSSxFQUFTbEIsZUFBaUJwakMsR0FBVVMseUJBQ3BDLE1BQU0sSUFBSXI0QixFQUFlakIsRUFBS0ksaUJBQWtCLG1DQUFxQ3k0QixHQUFVUywwQkFHL0Z2K0MsS0FBS2toRixlQUFpQmtCLEVBQVNsQixlQUd2Q241RCxFQUEwQixXQUFZLFVBQVcsK0JBQWdDcTZELEVBQVNrSSw4QkFDMUZ0cUYsS0FBSytyQixzQkFDeUN4aUIsSUFBMUM2NEUsRUFBU2tJLDZCQUNISCxHQUNBL0gsRUFBU2tJLDZCQVV2QixPQVJBRCxFQUFrQmhyRixVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQzVDLE9BQVF2ckIsS0FBSzZyQixPQUFTTixFQUFNTSxNQUN4QjdyQixLQUFLOHJCLE1BQVFQLEVBQU1PLEtBQ25COXJCLEtBQUtxdEMsd0JBQTBCOWhCLEVBQU04aEIsdUJBQ3JDcnRDLEtBQUtzOEQsY0FBZ0Ivd0MsRUFBTSt3QyxhQUMzQnQ4RCxLQUFLa2hGLGlCQUFtQjMxRCxFQUFNMjFELGdCQUM5QmxoRixLQUFLK3JCLG1CQUFxQlIsRUFBTVEsa0JBRWpDcytELEVBOUQyQixHQW1FbENFLEdBQTJCLFdBQzNCLFNBQVNBLEVBQVVDLEVBQWlCcEcsR0FDaEMsSUFBSTE2RSxFQUFRMUosS0FxQlosR0FwQkFBLEtBQUt5cUYsYUFBZSxLQUdwQnpxRixLQUFLMHFGLE9BQVMsSUFBSTU1RCxHQUNsQjl3QixLQUFLd1YsU0FBVyxDQUNaTixPQUFRLFdBQWMsT0FBTzFQLEVBQU05RCxVQUFVZ0ksT0FBTyxPQUFRLEdBQVEsV0FDaEUsT0FBT2xFLEVBQU0vQyxZQUFZekMsTUFBTSxTQUFVaUwsR0FDckMsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUlELE9BREEvQyxLQUFLMnFGLHlCQUNFLENBQUMsRUFBYTNxRixLQUFLNHFGLGlCQUFpQmhJLGFBQy9DLEtBQUssRUFFRCxPQURBMzNFLEVBQUdqSSxPQUNJLENBQUMsWUFLVyxpQkFBNUJ3bkYsRUFBZ0JsMkUsUUFBc0IsQ0FHN0MsSUFBSWdFLEVBQU1reUUsRUFDVnhxRixLQUFLeXFGLGFBQWVueUUsRUFDcEJ0WSxLQUFLNnFGLFlBQWNOLEVBQVVPLGtCQUFrQnh5RSxHQUMvQ3RZLEtBQUsrcUYsZ0JBQWtCenlFLEVBQUl0YSxLQUMzQmdDLEtBQUtnckYsYUFBZSxJQUFJN0csR0FBNEJDLE9BRW5ELENBQ0QsSUFBSTZHLEVBQWFULEVBQ2pCLElBQUtTLEVBQVcvK0QsVUFDWixNQUFNLElBQUloRyxFQUFlakIsRUFBS0ksaUJBQWtCLDBCQUVwRHJsQixLQUFLNnFGLFlBQWMsSUFBSTUrRCxHQUFXZy9ELEVBQVcvK0QsVUFBVysrRCxFQUFXOStELFVBRW5FbnNCLEtBQUsrcUYsZ0JBQWtCLFlBQ3ZCL3FGLEtBQUtnckYsYUFBZSxJQUFJL0csR0FFNUJqa0YsS0FBS2tyRixVQUFZLElBQUliLEdBQWtCLElBQ3ZDcnFGLEtBQUttckYsZUFBaUJuckYsS0FBS29yRixvQkFBb0JwckYsS0FBSzZxRixhQStQeEQsT0E3UEFOLEVBQVVsckYsVUFBVStpRixTQUFXLFNBQVVpSixHQUdyQyxHQUZBcGtFLEVBQTBCLHFCQUFzQjdtQixVQUFXLEdBQzNEbW5CLEVBQWdCLHFCQUFzQixTQUFVLEVBQUc4akUsR0FDL0M1N0UsRUFBUzQ3RSxFQUFpQixlQUMxQixNQUFNLElBQUlubEUsRUFBZWpCLEVBQUtJLGlCQUFrQix5RkFHcEQsSUFBSWltRSxFQUFjLElBQUlqQixHQUFrQmdCLEdBQ3hDLEdBQUlyckYsS0FBSzRxRixtQkFBcUI1cUYsS0FBS2tyRixVQUFVNWdFLFFBQVFnaEUsR0FDakQsTUFBTSxJQUFJcGxFLEVBQWVqQixFQUFLVyxvQkFBcUIsc0tBSXZENWxCLEtBQUtrckYsVUFBWUksT0FDZS9oRixJQUE1QitoRixFQUFZaHZCLGNBQ1p0OEQsS0FBS2dyRixhQUFleEYsR0FBd0I4RixFQUFZaHZCLGVBR2hFaXVCLEVBQVVsckYsVUFBVTBvRSxjQUFnQixXQUVoQyxPQURBL25FLEtBQUsycUYseUJBQ0UzcUYsS0FBSzRxRixpQkFBaUI3aUIsaUJBRWpDd2lCLEVBQVVsckYsVUFBVThvRSxlQUFpQixXQUVqQyxPQURBbm9FLEtBQUsycUYseUJBQ0UzcUYsS0FBSzRxRixpQkFBaUJ6aUIsa0JBRWpDb2lCLEVBQVVsckYsVUFBVWtzRixrQkFBb0IsU0FBVW5KLEdBQzlDLEdBQUlwaUYsS0FBSzRxRixpQkFDTCxNQUFNLElBQUkxa0UsRUFBZWpCLEVBQUtXLG9CQUFxQiw4S0FJdkQsSUFBSXU3RCxHQUFrQixFQVl0QixPQVhJaUIsU0FDZ0Q3NEUsSUFBNUM2NEUsRUFBU29KLGdDQUNUMW5GLEVBQU0sZ1BBS1ZxOUUsRUFBa0IzNkQsT0FBdUNqZCxJQUE3QjY0RSxFQUFTakIsZ0JBQy9CaUIsRUFBU2pCLGdCQUNUaUIsRUFBU29KLGdDQWhLSSxJQWtLaEJ4ckYsS0FBS3lyRixnQkFBZ0IsSUFBSXhLLEdBQTZCamhGLEtBQUtrckYsVUFBVWhLLGVBQWdCQyxLQUVoR29KLEVBQVVsckYsVUFBVWttRCxpQkFBbUIsV0FDbkMsSUFBSTc3QyxFQUFRMUosS0FDUjRyQixFQUFpQnFhLEdBQXFCa2dCLG1CQUFtQm5tRCxLQUFLMHJGLG9CQUM5RHozRSxFQUFXLElBQUl4SyxHQXdCbkIsT0F2QkF6SixLQUFLMHFGLE9BQU9yNUQsbUNBQWtDLFdBQWMsT0FBTzdyQixFQUFNOUQsVUFBVWdJLE9BQU8sT0FBUSxHQUFRLFdBQ3RHLElBQUkrSyxFQUNKLE9BQU9qUCxFQUFNL0MsWUFBWXpDLE1BQU0sU0FBVWlMLEdBQ3JDLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxHQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxTQUNROEYsSUFBMUJ2SixLQUFLNHFGLG1CQUNKNXFGLEtBQUs0cUYsaUJBQWlCN0gsaUJBQ3ZCLE1BQU0sSUFBSTc4RCxFQUFlakIsRUFBS1csb0JBQXFCLCtFQUV2RCxNQUFPLENBQUMsRUFBYXFnQixHQUFxQnNmLGlCQUFpQjM1QixJQUMvRCxLQUFLLEVBR0QsT0FGQTNnQixFQUFHakksT0FDSGlSLEVBQVNqUyxVQUNGLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBR0QsT0FGQXlTLEVBQU14SixFQUFHakksT0FDVGlSLEVBQVNoUyxPQUFPd1MsR0FDVCxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxhQUlyQlIsRUFBU3RLLFNBRXBCNGdGLEVBQVVsckYsVUFBVXVqRixVQUFZLFdBRTVCLE9BREE1aUYsS0FBS3NZLElBQUlaLHVCQUF1QixhQUN6QjFYLEtBQUt3VixTQUFTTixVQUV6Qi9XLE9BQU9DLGVBQWVtc0YsRUFBVWxyRixVQUFXLGdCQUFpQixDQUN4RGYsSUFBSyxXQUVELE9BREEwQixLQUFLMnFGLHlCQUNFM3FGLEtBQUs0cUYsaUJBQWlCN0gsa0JBRWpDMWtGLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJnekUsRUFBVWxyRixVQUFVeWpGLHFCQUF1QixXQUV2QyxPQURBOWlGLEtBQUsycUYseUJBQ0UzcUYsS0FBSzRxRixpQkFBaUI5SCx3QkFFakN5SCxFQUFVbHJGLFVBQVVzc0Ysa0JBQW9CLFNBQVVDLEdBRTlDLEdBREE1ckYsS0FBSzJxRix5QkFDRGxGLEdBQWtCbUcsR0FDbEIsT0FBTzVyRixLQUFLNnJGLDBCQUEwQkQsR0FHdENya0UsRUFBZ0IsOEJBQStCLFdBQVksRUFBR3FrRSxHQUM5RCxJQUFJOTlFLEVBQVcsQ0FDWDFMLEtBQU13cEYsR0FFVixPQUFPNXJGLEtBQUs2ckYsMEJBQTBCLzlFLElBRzlDeThFLEVBQVVsckYsVUFBVXdzRiwwQkFBNEIsU0FBVS85RSxHQUN0RCxJQUFJcEUsRUFBUTFKLEtBSVI4ckYsRUFBZ0IsSUFBSTVJLEdBQWMsQ0FDbEM5Z0YsS0FBTSxXQUNFMEwsRUFBUzFMLE1BQ1QwTCxFQUFTMUwsUUFHakIwQixNQVRhLFNBQVVnTCxHQUN2QixNQUFNK1YsRUFBSywwQ0FXZixPQURBN2tCLEtBQUs0cUYsaUJBQWlCMVgsMkJBQTJCNFksR0FDMUMsV0FDSEEsRUFBY3pJLE9BQ2QzNUUsRUFBTWtoRixpQkFBaUJ6WCw4QkFBOEIyWSxLQUc3RHZCLEVBQVVsckYsVUFBVXNyRix1QkFBeUIsV0FNekMsT0FMSzNxRixLQUFLNHFGLGtCQUdONXFGLEtBQUt5ckYsZ0JBQWdCLElBQUlySyxJQUV0QnBoRixLQUFLNHFGLGtCQUVoQkwsRUFBVWxyRixVQUFVcXNGLGlCQUFtQixXQUNuQyxPQUFPLElBQUloZ0UsR0FBYTFyQixLQUFLNnFGLFlBQWE3cUYsS0FBSytxRixnQkFBaUIvcUYsS0FBS2tyRixVQUFVci9ELEtBQU03ckIsS0FBS2tyRixVQUFVcC9ELElBQUs5ckIsS0FBS2tyRixVQUFVbi9ELG1CQUU1SHcrRCxFQUFVbHJGLFVBQVVvc0YsZ0JBQWtCLFNBQVVuSyxHQUM1Q3o3RSxJQUFTN0YsS0FBS2tyRixVQUFVci9ELEtBQU0scUNBQzlCaG1CLEdBQVE3RixLQUFLNHFGLGlCQUFrQiwyQ0FDL0IsSUFBSXhrQyxFQUFlcG1ELEtBQUswckYsbUJBRXhCLE9BREExckYsS0FBSzRxRixpQkFBbUIsSUFBSXZKLEdBQWdCMzhELEVBQWdCQyxjQUFleWhDLEVBQWNwbUQsS0FBS2dyRixhQUFjaHJGLEtBQUswcUYsUUFDMUcxcUYsS0FBSzRxRixpQkFBaUJ2NkQsTUFBTWl4RCxJQUV2Q2lKLEVBQVVsckYsVUFBVStyRixvQkFBc0IsU0FBVXovRCxHQWdCaEQsT0FBTyxJQUFJaThELElBZlEsU0FBVWxwRixHQUN6QixHQUFJQSxhQUFpQnF0RixHQUFtQixDQUNwQyxJQUFJQyxFQUFTcmdFLEVBQ1RzZ0UsRUFBVXZ0RixFQUFNd3RGLFVBQVVyQixZQUM5QixJQUFLb0IsRUFBUTNoRSxRQUFRMGhFLEdBQ2pCLE1BQU0sSUFBSTlsRSxFQUFlakIsRUFBS0ksaUJBQWtCLHNDQUMzQzRtRSxFQUFRLy9ELFVBQVksSUFBTSsvRCxFQUFROS9ELFNBQVcsK0JBQzNCNi9ELEVBQU85L0QsVUFBWSxJQUFNOC9ELEVBQU83L0QsVUFFM0QsT0FBTyxJQUFJdzdELEdBQXFCaDhELEVBQVlqdEIsRUFBTXl0RixNQUdsRCxPQUFPenRGLE1BS25CNnJGLEVBQVVPLGtCQUFvQixTQUFVeHlFLEdBQ3BDLElBQUloRSxFQUFVZ0UsRUFBSWhFLFFBQ2xCLElBQUs3RSxFQUFTNkUsRUFBUyxhQUNuQixNQUFNLElBQUk0UixFQUFlakIsRUFBS0ksaUJBQWtCLHVEQUVwRCxJQUFJNkcsRUFBWTVYLEVBQW1CLFVBQ25DLElBQUs0WCxHQUFrQyxpQkFBZEEsRUFDckIsTUFBTSxJQUFJaEcsRUFBZWpCLEVBQUtJLGlCQUFrQixxREFFcEQsT0FBTyxJQUFJNEcsR0FBV0MsSUFFMUIvdEIsT0FBT0MsZUFBZW1zRixFQUFVbHJGLFVBQVcsTUFBTyxDQUM5Q2YsSUFBSyxXQUNELElBQUswQixLQUFLeXFGLGFBQ04sTUFBTSxJQUFJdmtFLEVBQWVqQixFQUFLVyxvQkFBcUIsZ0ZBR3ZELE9BQU81bEIsS0FBS3lxRixjQUVoQnBzRixZQUFZLEVBQ1prWixjQUFjLElBRWxCZ3pFLEVBQVVsckYsVUFBVXE4QixXQUFhLFNBQVUwd0QsR0FJdkMsT0FIQW5sRSxFQUEwQix1QkFBd0I3bUIsVUFBVyxHQUM3RG1uQixFQUFnQix1QkFBd0IsbUJBQW9CLEVBQUc2a0UsR0FDL0Rwc0YsS0FBSzJxRix5QkFDRSxJQUFJMEIsR0FBb0IvOUQsR0FBYUUsV0FBVzQ5RCxHQUFhcHNGLE9BRXhFdXFGLEVBQVVsckYsVUFBVWl0QyxJQUFNLFNBQVU4L0MsR0FJaEMsT0FIQW5sRSxFQUEwQixnQkFBaUI3bUIsVUFBVyxHQUN0RG1uQixFQUFnQixnQkFBaUIsbUJBQW9CLEVBQUc2a0UsR0FDeERwc0YsS0FBSzJxRix5QkFDRW9CLEdBQWtCTyxRQUFRaCtELEdBQWFFLFdBQVc0OUQsR0FBYXBzRixPQUUxRXVxRixFQUFVbHJGLFVBQVVtcEQsZ0JBQWtCLFNBQVVqNUIsR0FHNUMsR0FGQXRJLEVBQTBCLDRCQUE2QjdtQixVQUFXLEdBQ2xFbW5CLEVBQWdCLDRCQUE2QixtQkFBb0IsRUFBR2dJLEdBQ2hFQSxFQUFhOXVCLFFBQVEsTUFBUSxFQUM3QixNQUFNLElBQUl5bEIsRUFBZWpCLEVBQUtJLGlCQUFrQiwwQkFBNEJrSyxFQUFlLDBGQUkvRixPQURBdnZCLEtBQUsycUYseUJBQ0UsSUFBSTRCLEdBQVEsSUFBSXpqQyxHQUFNeDZCLEdBQWFJLFdBQVlhLEdBQWV2dkIsT0FFekV1cUYsRUFBVWxyRixVQUFVaytCLGVBQWlCLFNBQVUrNEMsR0FDM0MsSUFBSTVzRSxFQUFRMUosS0FHWixPQUZBaW5CLEVBQTBCLDJCQUE0QjdtQixVQUFXLEdBQ2pFbW5CLEVBQWdCLDJCQUE0QixXQUFZLEVBQUcrdUQsR0FDcER0MkUsS0FBSzJxRix5QkFBeUJ4dEUsYUFBWSxTQUFVQSxHQUN2RCxPQUFPbTVELEVBQWUsSUFBSWtXLEdBQWM5aUYsRUFBT3lULFFBR3ZEb3RFLEVBQVVsckYsVUFBVTY2QixNQUFRLFdBRXhCLE9BREFsNkIsS0FBSzJxRix5QkFDRSxJQUFJOEIsR0FBV3pzRixPQUUxQjdCLE9BQU9DLGVBQWVtc0YsRUFBVyxXQUFZLENBQ3pDanNGLElBQUssV0FDRCxPQUFRNmxCLEtBQ0osS0FBS25LLEVBQVNPLE1BQ1YsTUFBTyxRQUNYLEtBQUtQLEVBQVNXLE1BQ1YsTUFBTyxRQUNYLEtBQUtYLEVBQVNvSyxPQUNWLE1BQU8sU0FDWCxRQUNJLE9BQU9TLEVBQUssc0JBQXdCVixPQUdoRDlsQixZQUFZLEVBQ1prWixjQUFjLElBRWxCZ3pFLEVBQVV6dkUsWUFBYyxTQUFVQyxHQUc5QixPQUZBa00sRUFBMEIsd0JBQXlCN21CLFVBQVcsR0FDOURtbkIsRUFBZ0Isd0JBQXlCLG1CQUFvQixFQUFHeE0sR0FDeERBLEdBQ0osSUFBSyxRQUNERCxFQUFZZCxFQUFTTyxPQUNyQixNQUNKLElBQUssUUFDRE8sRUFBWWQsRUFBU1csT0FDckIsTUFDSixJQUFLLFNBQ0RHLEVBQVlkLEVBQVNvSyxRQUNyQixNQUNKLFFBQ0ksTUFBTSxJQUFJOEIsRUFBZWpCLEVBQUtJLGlCQUFrQixzQkFBd0J0SyxLQUtwRnd2RSxFQUFVbHJGLFVBQVVxdEYsaUNBQW1DLFdBQ25ELE9BQU8xc0YsS0FBS2tyRixVQUFVNzlDLHVCQUVuQms5QyxFQTFTbUIsR0ErUzFCaUMsR0FBK0IsV0FDL0IsU0FBUzd2RSxFQUFZZ3dFLEVBQVlDLEdBQzdCNXNGLEtBQUsyc0YsV0FBYUEsRUFDbEIzc0YsS0FBSzRzRixhQUFlQSxFQWtFeEIsT0FoRUFqd0UsRUFBWXRkLFVBQVVmLElBQU0sU0FBVXV1RixHQUNsQyxJQUFJbmpGLEVBQVExSixLQUNaaW5CLEVBQTBCLGtCQUFtQjdtQixVQUFXLEdBQ3hELElBQUl5d0QsRUFBTWk4QixHQUFrQixrQkFBbUJELEVBQWE3c0YsS0FBSzJzRixZQUNqRSxPQUFPM3NGLEtBQUs0c0YsYUFDUG51QixPQUFPLENBQUM1TixFQUFJczdCLE9BQ1ozcEYsTUFBSyxTQUFVNHNELEdBQ2hCLElBQUtBLEdBQXdCLElBQWhCQSxFQUFLL3VELE9BQ2QsT0FBT3drQixFQUFLLG1EQUVoQixJQUFJeW5CLEVBQU04aUIsRUFBSyxHQUNmLEdBQUk5aUIsYUFBZVksR0FDZixPQUFPLElBQUk2L0MsR0FBaUJyakYsRUFBTWlqRixXQUFZOTdCLEVBQUlzN0IsS0FBTSxNQUN2QyxHQUNPLEVBQU90N0IsRUFBSW04QixZQUVsQyxHQUFJMWdELGFBQWV4QixHQUNwQixPQUFPLElBQUlpaUQsR0FBaUJyakYsRUFBTWlqRixXQUFZOTdCLEVBQUlzN0IsS0FBTTcvQyxHQUN2QyxHQUNPLEVBQU91a0IsRUFBSW04QixZQUduQyxNQUFNbm9FLEVBQUssK0RBQWlFeW5CLEVBQUlyc0MsWUFBWWpDLFVBSXhHMmUsRUFBWXRkLFVBQVU2VSxJQUFNLFNBQVUyNEUsRUFBYW51RixFQUFPNFYsR0FDdEQrUyxFQUE0QixrQkFBbUJqbkIsVUFBVyxFQUFHLEdBQzdELElBQUl5d0QsRUFBTWk4QixHQUFrQixrQkFBbUJELEVBQWE3c0YsS0FBSzJzRixZQUNqRXI0RSxFQUFVMjRFLEdBQW1CLGtCQUFtQjM0RSxHQUNoRCxJQUFJckosRUFBS2lpRixHQUE0QnI4QixFQUFJbThCLFdBQVl0dUYsRUFBTyxtQkFBb0J5dUYsRUFBaUJsaUYsRUFBRyxHQUFJOGIsRUFBZTliLEVBQUcsR0FDdEhxMUUsRUFBU2hzRSxFQUFRODRFLE9BQVM5NEUsRUFBUSs0RSxZQUNoQ3J0RixLQUFLMnNGLFdBQVd4QixlQUFlakQsZUFBZW5oRSxFQUFjb21FLEVBQWdCNzRFLEVBQVErNEUsYUFDcEZydEYsS0FBSzJzRixXQUFXeEIsZUFBZXJELGFBQWEvZ0UsRUFBY29tRSxHQUVoRSxPQURBbnRGLEtBQUs0c0YsYUFBYTE0RSxJQUFJMjhDLEVBQUlzN0IsS0FBTTdMLEdBQ3pCdGdGLE1BRVgyYyxFQUFZdGQsVUFBVTJOLE9BQVMsU0FBVTYvRSxFQUFhUyxFQUFtQjV1RixHQUVyRSxJQURBLElBSUlteUQsRUFDQXl2QixFQUxBd0ksRUFBc0IsR0FDakJuK0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDbStFLEVBQW9CbitFLEVBQUssR0FBS3ZLLFVBQVV1SyxHQWdCNUMsTUFaaUMsaUJBQXRCMmlGLEdBQ1BBLGFBQTZCL0osSUFDN0JwOEQsRUFBNEIscUJBQXNCL21CLFVBQVcsR0FDN0R5d0QsRUFBTWk4QixHQUFrQixxQkFBc0JELEVBQWE3c0YsS0FBSzJzRixZQUNoRXJNLEVBQVN0Z0YsS0FBSzJzRixXQUFXeEIsZUFBZXRDLG1CQUFtQixxQkFBc0J5RSxFQUFtQjV1RixFQUFPb3FGLEtBRzNHN2hFLEVBQTBCLHFCQUFzQjdtQixVQUFXLEdBQzNEeXdELEVBQU1pOEIsR0FBa0IscUJBQXNCRCxFQUFhN3NGLEtBQUsyc0YsWUFDaEVyTSxFQUFTdGdGLEtBQUsyc0YsV0FBV3hCLGVBQWU1QyxnQkFBZ0IscUJBQXNCK0UsSUFFbEZ0dEYsS0FBSzRzRixhQUFhNS9FLE9BQU82akQsRUFBSXM3QixLQUFNN0wsR0FDNUJ0Z0YsTUFFWDJjLEVBQVl0ZCxVQUFVNlYsT0FBUyxTQUFVMjNFLEdBQ3JDNWxFLEVBQTBCLHFCQUFzQjdtQixVQUFXLEdBQzNELElBQUl5d0QsRUFBTWk4QixHQUFrQixxQkFBc0JELEVBQWE3c0YsS0FBSzJzRixZQUVwRSxPQURBM3NGLEtBQUs0c0YsYUFBYTEzRSxPQUFPMjdDLEVBQUlzN0IsTUFDdEJuc0YsTUFFSjJjLEVBckV1QixHQXVFOUI4dkUsR0FBNEIsV0FDNUIsU0FBU0EsRUFBV0UsR0FDaEIzc0YsS0FBSzJzRixXQUFhQSxFQUNsQjNzRixLQUFLdXRGLFdBQWEsR0FDbEJ2dEYsS0FBS3d0RixZQUFhLEVBNkR0QixPQTNEQWYsRUFBV3B0RixVQUFVNlUsSUFBTSxTQUFVMjRFLEVBQWFudUYsRUFBTzRWLEdBQ3JEK1MsRUFBNEIsaUJBQWtCam5CLFVBQVcsRUFBRyxHQUM1REosS0FBS3l0RixxQkFDTCxJQUFJNThCLEVBQU1pOEIsR0FBa0IsaUJBQWtCRCxFQUFhN3NGLEtBQUsyc0YsWUFDaEVyNEUsRUFBVTI0RSxHQUFtQixpQkFBa0IzNEUsR0FDL0MsSUFBSXJKLEVBQUtpaUYsR0FBNEJyOEIsRUFBSW04QixXQUFZdHVGLEVBQU8sa0JBQW1CeXVGLEVBQWlCbGlGLEVBQUcsR0FBSThiLEVBQWU5YixFQUFHLEdBQ3JIcTFFLEVBQVNoc0UsRUFBUTg0RSxPQUFTOTRFLEVBQVErNEUsWUFDaENydEYsS0FBSzJzRixXQUFXeEIsZUFBZWpELGVBQWVuaEUsRUFBY29tRSxFQUFnQjc0RSxFQUFRKzRFLGFBQ3BGcnRGLEtBQUsyc0YsV0FBV3hCLGVBQWVyRCxhQUFhL2dFLEVBQWNvbUUsR0FFaEUsT0FEQW50RixLQUFLdXRGLFdBQWF2dEYsS0FBS3V0RixXQUFXdnBGLE9BQU9zOEUsRUFBT2hoQixZQUFZek8sRUFBSXM3QixLQUFNemhELEdBQWFNLE9BQzVFaHJDLE1BRVh5c0YsRUFBV3B0RixVQUFVMk4sT0FBUyxTQUFVNi9FLEVBQWFTLEVBQW1CNXVGLEdBRXBFLElBREEsSUFLSW15RCxFQUNBeXZCLEVBTkF3SSxFQUFzQixHQUNqQm4rRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcENtK0UsRUFBb0JuK0UsRUFBSyxHQUFLdkssVUFBVXVLLEdBaUI1QyxPQWZBM0ssS0FBS3l0RixxQkFHNEIsaUJBQXRCSCxHQUNQQSxhQUE2Qi9KLElBQzdCcDhELEVBQTRCLG9CQUFxQi9tQixVQUFXLEdBQzVEeXdELEVBQU1pOEIsR0FBa0Isb0JBQXFCRCxFQUFhN3NGLEtBQUsyc0YsWUFDL0RyTSxFQUFTdGdGLEtBQUsyc0YsV0FBV3hCLGVBQWV0QyxtQkFBbUIsb0JBQXFCeUUsRUFBbUI1dUYsRUFBT29xRixLQUcxRzdoRSxFQUEwQixvQkFBcUI3bUIsVUFBVyxHQUMxRHl3RCxFQUFNaThCLEdBQWtCLG9CQUFxQkQsRUFBYTdzRixLQUFLMnNGLFlBQy9Eck0sRUFBU3RnRixLQUFLMnNGLFdBQVd4QixlQUFlNUMsZ0JBQWdCLG9CQUFxQitFLElBRWpGdHRGLEtBQUt1dEYsV0FBYXZ0RixLQUFLdXRGLFdBQVd2cEYsT0FBT3M4RSxFQUFPaGhCLFlBQVl6TyxFQUFJczdCLEtBQU16aEQsR0FBYUUsUUFBTyxLQUNuRjVxQyxNQUVYeXNGLEVBQVdwdEYsVUFBVTZWLE9BQVMsU0FBVTIzRSxHQUNwQzVsRSxFQUEwQixvQkFBcUI3bUIsVUFBVyxHQUMxREosS0FBS3l0RixxQkFDTCxJQUFJNThCLEVBQU1pOEIsR0FBa0Isb0JBQXFCRCxFQUFhN3NGLEtBQUsyc0YsWUFFbkUsT0FEQTNzRixLQUFLdXRGLFdBQWF2dEYsS0FBS3V0RixXQUFXdnBGLE9BQU8sSUFBSWdwQyxHQUFlNmpCLEVBQUlzN0IsS0FBTXpoRCxHQUFhTSxPQUM1RWhyQyxNQUVYeXNGLEVBQVdwdEYsVUFBVWkvRCxPQUFTLFdBQzFCLE9BQU85NEQsRUFBTTlELFVBQVUxQixVQUFNLE9BQVEsR0FBUSxXQUN6QyxPQUFPd0YsRUFBTS9DLFlBQVl6QyxNQUFNLFNBQVVpTCxHQUdyQyxPQUZBakwsS0FBS3l0RixxQkFDTHp0RixLQUFLd3RGLFlBQWEsRUFDZHh0RixLQUFLdXRGLFdBQVdsdEYsT0FBUyxFQUNsQixDQUFDLEVBQWNMLEtBQUsyc0YsV0FBV2hDLHlCQUF5QnRyQixNQUFNci9ELEtBQUt1dEYsYUFFdkUsQ0FBQyxVQUlwQmQsRUFBV3B0RixVQUFVb3VGLG1CQUFxQixXQUN0QyxHQUFJenRGLEtBQUt3dEYsV0FDTCxNQUFNLElBQUl0bkUsRUFBZWpCLEVBQUtXLG9CQUFxQix3RUFJcEQ2bUUsRUFqRW9CLEdBc0UzQlYsR0FBbUMsV0FDbkMsU0FBU0EsRUFBa0JJLEVBQU1ELEVBQVdjLEdBQ3hDaHRGLEtBQUttc0YsS0FBT0EsRUFDWm5zRixLQUFLa3NGLFVBQVlBLEVBQ2pCbHNGLEtBQUtndEYsV0FBYUEsRUFDbEJodEYsS0FBSzRxRixpQkFBbUI1cUYsS0FBS2tzRixVQUFVdkIseUJBdU0zQyxPQXJNQW9CLEVBQWtCTyxRQUFVLFNBQVU3OUQsRUFBTXk5RCxFQUFXNTdDLEdBQ25ELEdBQUk3aEIsRUFBS3B1QixPQUFTLEdBQU0sRUFDcEIsTUFBTSxJQUFJNmxCLEVBQWVqQixFQUFLSSxpQkFBa0IsNkZBRTNDb0osRUFBS0Ysa0JBQW9CLFFBQVVFLEVBQUtwdUIsUUFFakQsT0FBTyxJQUFJMHJGLEVBQWtCLElBQUkzOEQsR0FBWVgsR0FBT3k5RCxFQUFXNTdDLElBRW5FbnlDLE9BQU9DLGVBQWUydEYsRUFBa0Ixc0YsVUFBVyxLQUFNLENBQ3JEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUttc0YsS0FBSzE5RCxLQUFLWCxlQUUxQnp2QixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTJ0RixFQUFrQjFzRixVQUFXLFNBQVUsQ0FDekRmLElBQUssV0FDRCxPQUFPLElBQUkrdEYsR0FBb0Jyc0YsS0FBS21zRixLQUFLMTlELEtBQUtiLFVBQVc1dEIsS0FBS2tzRixVQUFXbHNGLEtBQUtndEYsYUFFbEYzdUYsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWUydEYsRUFBa0Ixc0YsVUFBVyxPQUFRLENBQ3ZEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUttc0YsS0FBSzE5RCxLQUFLRixtQkFFMUJsd0IsWUFBWSxFQUNaa1osY0FBYyxJQUVsQncwRSxFQUFrQjFzRixVQUFVcThCLFdBQWEsU0FBVTB3RCxHQUcvQyxHQUZBbmxFLEVBQTBCLCtCQUFnQzdtQixVQUFXLEdBQ3JFbW5CLEVBQWdCLCtCQUFnQyxtQkFBb0IsRUFBRzZrRSxJQUNsRUEsRUFDRCxNQUFNLElBQUlsbUUsRUFBZWpCLEVBQUtJLGlCQUFrQiw0REFFcEQsSUFBSW9KLEVBQU9ILEdBQWFFLFdBQVc0OUQsR0FDbkMsT0FBTyxJQUFJQyxHQUFvQnJzRixLQUFLbXNGLEtBQUsxOUQsS0FBS3BCLE1BQU1vQixHQUFPenVCLEtBQUtrc0YsWUFFcEVILEVBQWtCMXNGLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDNUMsS0FBTUEsYUFBaUJ3Z0UsR0FDbkIsTUFBTXBpRSxFQUFrQixVQUFXLG9CQUFxQixFQUFHNEIsR0FFL0QsT0FBUXZyQixLQUFLa3NGLFlBQWMzZ0UsRUFBTTJnRSxXQUM3QmxzRixLQUFLbXNGLEtBQUs3aEUsUUFBUWlCLEVBQU00Z0UsT0FDeEJuc0YsS0FBS2d0RixhQUFlemhFLEVBQU15aEUsWUFFbENqQixFQUFrQjFzRixVQUFVNlUsSUFBTSxTQUFVeFYsRUFBTzRWLEdBQy9DK1MsRUFBNEIsd0JBQXlCam5CLFVBQVcsRUFBRyxHQUNuRWtVLEVBQVUyNEUsR0FBbUIsd0JBQXlCMzRFLEdBQ3RELElBQUlySixFQUFLaWlGLEdBQTRCbHRGLEtBQUtndEYsV0FBWXR1RixFQUFPLHlCQUEwQnl1RixFQUFpQmxpRixFQUFHLEdBQUk4YixFQUFlOWIsRUFBRyxHQUM3SHExRSxFQUFTaHNFLEVBQVE4NEUsT0FBUzk0RSxFQUFRKzRFLFlBQ2hDcnRGLEtBQUtrc0YsVUFBVWYsZUFBZWpELGVBQWVuaEUsRUFBY29tRSxFQUFnQjc0RSxFQUFRKzRFLGFBQ25GcnRGLEtBQUtrc0YsVUFBVWYsZUFBZXJELGFBQWEvZ0UsRUFBY29tRSxHQUMvRCxPQUFPbnRGLEtBQUs0cUYsaUJBQWlCdnJCLE1BQU1paEIsRUFBT2hoQixZQUFZdC9ELEtBQUttc0YsS0FBTXpoRCxHQUFhTSxRQUVsRitnRCxFQUFrQjFzRixVQUFVMk4sT0FBUyxTQUFVc2dGLEVBQW1CNXVGLEdBRTlELElBREEsSUFJSTRoRixFQUpBd0ksRUFBc0IsR0FDakJuK0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDbStFLEVBQW9CbitFLEVBQUssR0FBS3ZLLFVBQVV1SyxHQVk1QyxNQVRpQyxpQkFBdEIyaUYsR0FDUEEsYUFBNkIvSixJQUM3QnA4RCxFQUE0QiwyQkFBNEIvbUIsVUFBVyxHQUNuRWtnRixFQUFTdGdGLEtBQUtrc0YsVUFBVWYsZUFBZXRDLG1CQUFtQiwyQkFBNEJ5RSxFQUFtQjV1RixFQUFPb3FGLEtBR2hIN2hFLEVBQTBCLDJCQUE0QjdtQixVQUFXLEdBQ2pFa2dGLEVBQVN0Z0YsS0FBS2tzRixVQUFVZixlQUFlNUMsZ0JBQWdCLDJCQUE0QitFLElBRWhGdHRGLEtBQUs0cUYsaUJBQWlCdnJCLE1BQU1paEIsRUFBT2hoQixZQUFZdC9ELEtBQUttc0YsS0FBTXpoRCxHQUFhRSxRQUFPLE1BRXpGbWhELEVBQWtCMXNGLFVBQVU2VixPQUFTLFdBRWpDLE9BREErUixFQUEwQiwyQkFBNEI3bUIsVUFBVyxHQUMxREosS0FBSzRxRixpQkFBaUJ2ckIsTUFBTSxDQUMvQixJQUFJcnlCLEdBQWVodEMsS0FBS21zRixLQUFNemhELEdBQWFNLFNBR25EK2dELEVBQWtCMXNGLFVBQVVxdUYsV0FBYSxXQUVyQyxJQURBLElBQUlwK0UsRUFBTyxHQUNGM0UsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDMkUsRUFBSzNFLEdBQU12SyxVQUFVdUssR0FFekIwYyxFQUE0QiwrQkFBZ0NqbkIsVUFBVyxFQUFHLEdBQzFFLElBR0kwTixFQUhBd0csRUFBVSxDQUNWay9ELHdCQUF3QixHQUd4Qm1hLEVBQVUsRUFDZSxpQkFBbEJyK0UsRUFBS3ErRSxJQUNYbEksR0FBa0JuMkUsRUFBS3ErRSxNQUV4QmxrRSxFQUFvQiwrQkFEcEJuVixFQUFVaEYsRUFBS3ErRSxHQUM4QyxDQUN6RCwyQkFFSjVsRSxFQUEwQiwrQkFBZ0MsVUFBVyx5QkFBMEJ6VCxFQUFRay9ELHdCQUN2R21hLEtBRUosSUFBSUMsRUFBa0IsQ0FDbEJwYSx1QkFBd0JsL0QsRUFBUWsvRCx3QkFlcEMsT0FiSWlTLEdBQWtCbjJFLEVBQUtxK0UsSUFDdkI3L0UsRUFBV3dCLEVBQUtxK0UsSUFHaEJwbUUsRUFBZ0IsK0JBQWdDLFdBQVlvbUUsRUFBU3IrRSxFQUFLcStFLElBQzFFL2xFLEVBQXdCLCtCQUFnQyxXQUFZK2xFLEVBQVUsRUFBR3IrRSxFQUFLcStFLEVBQVUsSUFDaEcvbEUsRUFBd0IsK0JBQWdDLFdBQVkrbEUsRUFBVSxFQUFHcitFLEVBQUtxK0UsRUFBVSxJQUNoRzcvRSxFQUFXLENBQ1AxTCxLQUFNa04sRUFBS3ErRSxHQUNYN3BGLE1BQU93TCxFQUFLcStFLEVBQVUsR0FDdEIzL0UsU0FBVXNCLEVBQUtxK0UsRUFBVSxLQUcxQjN0RixLQUFLNnRGLG1CQUFtQkQsRUFBaUI5L0UsSUFFcERpK0UsRUFBa0Ixc0YsVUFBVXd1RixtQkFBcUIsU0FBVXY1RSxFQUFTeEcsR0FDaEUsSUFBSXBFLEVBQVExSixLQUNSOHRGLEVBQWEsU0FBVWgvRSxHQUN2QjVGLFFBQVFwRixNQUFNLGdDQUFpQ2dMLElBRS9DaEIsRUFBU2hLLFFBQ1RncUYsRUFBYWhnRixFQUFTaEssTUFBTTdFLEtBQUs2TyxJQUVyQyxJQUFJZytFLEVBQWdCLElBQUk1SSxHQUFjLENBQ2xDOWdGLEtBQU0sU0FBVXk2RCxHQUNaLEdBQUkvdUQsRUFBUzFMLEtBQU0sQ0FDZnlELEVBQU9nM0QsRUFBU3pOLEtBQUt6aEMsTUFBUSxFQUFHLG1EQUNoQyxJQUFJMmUsRUFBTXV3QixFQUFTek4sS0FBSzl3RCxJQUFJb0wsRUFBTXlpRixNQUNsQ3IrRSxFQUFTMUwsS0FBSyxJQUFJMnFGLEdBQWlCcmpGLEVBQU13aUYsVUFBV3hpRixFQUFNeWlGLEtBQU03L0MsRUFBS3V3QixFQUFTOUgsVUFBVzhILEVBQVNsTyxpQkFBa0JqbEQsRUFBTXNqRixlQUdsSWxwRixNQUFPZ3FGLElBRVBDLEVBQW1CL3RGLEtBQUs0cUYsaUJBQWlCdGlCLE9BQU94ZixHQUFNTyxPQUFPcnBELEtBQUttc0YsS0FBSzE5RCxNQUFPcTlELEVBQWV4M0UsR0FDakcsT0FBTyxXQUNIdzNFLEVBQWN6SSxPQUNkMzVFLEVBQU1raEYsaUJBQWlCcGlCLFNBQVN1bEIsS0FHeENoQyxFQUFrQjFzRixVQUFVZixJQUFNLFNBQVVnVyxHQUN4QyxJQUFJNUssRUFBUTFKLEtBR1osT0FGQXFuQixFQUE0Qix3QkFBeUJqbkIsVUFBVyxFQUFHLEdBQ25FNHRGLEdBQW1CLHdCQUF5QjE1RSxHQUNyQyxJQUFJdlMsU0FBUSxTQUFVQyxFQUFTQyxHQUM5QnFTLEdBQThCLFVBQW5CQSxFQUFRbEwsT0FDbkJNLEVBQU13aUYsVUFDRHZCLHlCQUNBM0gsMEJBQTBCdDVFLEVBQU15aUYsTUFDaEMzcEYsTUFBSyxTQUFVOHBDLEdBQ2hCdHFDLEVBQVEsSUFBSStxRixHQUFpQnJqRixFQUFNd2lGLFVBQVd4aUYsRUFBTXlpRixLQUFNNy9DLEdBQzNDLEVBQU1BLGFBQWV4QixJQUFXd0IsRUFBSWQsa0JBQTJCOWhDLEVBQU1zakYsZUFDckYvcUYsR0FHSHlILEVBQU11a0YsdUJBQXVCanNGLEVBQVNDLEVBQVFxUyxPQUkxRHkzRSxFQUFrQjFzRixVQUFVNHVGLHVCQUF5QixTQUFVanNGLEVBQVNDLEVBQVFxUyxHQUM1RSxJQUFJazBELEVBQVd4b0UsS0FBSzZ0RixtQkFBbUIsQ0FDbkNyYSx3QkFBd0IsRUFDeEJLLHVCQUF1QixHQUN4QixDQUNDenhFLEtBQU0sU0FBVW14RSxHQUdaL0ssS0FDSytLLEVBQUszb0MsUUFBVTJvQyxFQUFLOXhFLFNBQVNzekQsVUFROUI5eUQsRUFBTyxJQUFJaWtCLEVBQWVqQixFQUFLZSxZQUFhLDBEQUV2Q3V0RCxFQUFLM29DLFFBQ1Yyb0MsRUFBSzl4RSxTQUFTc3pELFdBQ2R6Z0QsR0FDbUIsV0FBbkJBLEVBQVFsTCxPQUNSbkgsRUFBTyxJQUFJaWtCLEVBQWVqQixFQUFLZSxZQUFhLDhLQU01Q2hrQixFQUFRdXhFLElBR2hCenZFLE1BQU83QixLQUdmOHBGLEVBQWtCMXNGLFVBQVU2dUYsY0FBZ0IsU0FBVTU5QyxHQUNsRCxPQUFPLElBQUl5N0MsRUFBa0IvckYsS0FBS21zRixLQUFNbnNGLEtBQUtrc0YsVUFBVzU3QyxJQUVyRHk3QyxFQTVNMkIsR0E4TWxDb0MsR0FBa0MsV0FDbEMsU0FBU0EsRUFBaUJ4L0IsRUFBa0JvRyxHQUN4Qy8wRCxLQUFLMnVELGlCQUFtQkEsRUFDeEIzdUQsS0FBSyswRCxVQUFZQSxFQU1yQixPQUpBbzVCLEVBQWlCOXVGLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDM0MsT0FBUXZyQixLQUFLMnVELG1CQUFxQnBqQyxFQUFNb2pDLGtCQUNwQzN1RCxLQUFLKzBELFlBQWN4cEMsRUFBTXdwQyxXQUUxQm81QixFQVQwQixHQVdqQ3BCLEdBQWtDLFdBQ2xDLFNBQVNBLEVBQWlCSixFQUFZUixFQUFNaUMsRUFBV0MsRUFBWUMsRUFBbUJ0QixHQUNsRmh0RixLQUFLMnNGLFdBQWFBLEVBQ2xCM3NGLEtBQUttc0YsS0FBT0EsRUFDWm5zRixLQUFLb3VGLFVBQVlBLEVBQ2pCcHVGLEtBQUtxdUYsV0FBYUEsRUFDbEJydUYsS0FBS3N1RixrQkFBb0JBLEVBQ3pCdHVGLEtBQUtndEYsV0FBYUEsRUFnSHRCLE9BOUdBRCxFQUFpQjF0RixVQUFVcUwsS0FBTyxTQUFVNEosR0FHeEMsR0FGQStTLEVBQTRCLHdCQUF5QmpuQixVQUFXLEVBQUcsR0FDbkVrVSxFQUFVaTZFLEdBQXdCLHdCQUF5Qmo2RSxHQUN0RHRVLEtBQUtvdUYsVUFHTCxDQUdELEdBQUlwdUYsS0FBS2d0RixXQUFZLENBQ2pCLElBQUlud0IsRUFBVyxJQUFJMnhCLEdBQXNCeHVGLEtBQUsyc0YsV0FBWTNzRixLQUFLbXNGLEtBQU1uc0YsS0FBS291RixVQUFXcHVGLEtBQUtxdUYsV0FBWXJ1RixLQUFLc3VGLG1CQUMzRyxPQUFPdHVGLEtBQUtndEYsV0FBV3lCLGNBQWM1eEIsRUFBVXZvRCxHQUcvQyxPQUFPdFUsS0FBSzB1RixXQUFXMXVGLEtBQUtvdUYsVUFBVTFqRixPQUFReWlDLEdBQWtCRyxvQkFBb0JoNUIsRUFBU3RVLEtBQUsyc0YsV0FBV0QsdUNBSXpISyxFQUFpQjF0RixVQUFVZixJQUFNLFNBQVUwckMsRUFBVzExQixHQUdsRCxHQUZBK1MsRUFBNEIsdUJBQXdCam5CLFVBQVcsRUFBRyxHQUNsRWtVLEVBQVVpNkUsR0FBd0IsdUJBQXdCajZFLEdBQ3REdFUsS0FBS291RixVQUFXLENBQ2hCLElBQUkxdkYsRUFBUXNCLEtBQUtvdUYsVUFDWjFqRixPQUNBMC9CLE1BQU0yK0MsR0FBc0IsdUJBQXdCLytDLElBQ3pELEdBQWMsT0FBVnRyQyxFQUNBLE9BQU9zQixLQUFLMnVGLFVBQVVqd0YsRUFBT3l1QyxHQUFrQkcsb0JBQW9CaDVCLEVBQVN0VSxLQUFLMnNGLFdBQVdELHVDQUt4R3Z1RixPQUFPQyxlQUFlMnVGLEVBQWlCMXRGLFVBQVcsS0FBTSxDQUNwRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLbXNGLEtBQUsxOUQsS0FBS1gsZUFFMUJ6dkIsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWUydUYsRUFBaUIxdEYsVUFBVyxNQUFPLENBQ3JEZixJQUFLLFdBQ0QsT0FBTyxJQUFJeXRGLEdBQWtCL3JGLEtBQUttc0YsS0FBTW5zRixLQUFLMnNGLFdBQVkzc0YsS0FBS2d0RixhQUVsRTN1RixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTJ1RixFQUFpQjF0RixVQUFXLFNBQVUsQ0FDeERmLElBQUssV0FDRCxPQUEwQixPQUFuQjBCLEtBQUtvdUYsV0FFaEIvdkYsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWUydUYsRUFBaUIxdEYsVUFBVyxXQUFZLENBQzFEZixJQUFLLFdBQ0QsT0FBTyxJQUFJNnZGLEdBQWlCbnVGLEtBQUtzdUYsa0JBQW1CdHVGLEtBQUtxdUYsYUFFN0Rod0YsWUFBWSxFQUNaa1osY0FBYyxJQUVsQncxRSxFQUFpQjF0RixVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQzNDLEtBQU1BLGFBQWlCd2hFLEdBQ25CLE1BQU1wakUsRUFBa0IsVUFBVyxtQkFBb0IsRUFBRzRCLEdBRTlELE9BQVF2ckIsS0FBSzJzRixhQUFlcGhFLEVBQU1vaEUsWUFDOUIzc0YsS0FBS3F1RixhQUFlOWlFLEVBQU04aUUsWUFDMUJydUYsS0FBS21zRixLQUFLN2hFLFFBQVFpQixFQUFNNGdFLFFBQ0osT0FBbkJuc0YsS0FBS291RixVQUNvQixPQUFwQjdpRSxFQUFNNmlFLFVBQ05wdUYsS0FBS291RixVQUFVOWpFLFFBQVFpQixFQUFNNmlFLGFBQ25DcHVGLEtBQUtndEYsYUFBZXpoRSxFQUFNeWhFLFlBRWxDRCxFQUFpQjF0RixVQUFVcXZGLFdBQWEsU0FBVWhrRixFQUFNNEosR0FDcEQsSUFBSTVLLEVBQVExSixLQUNSc0MsRUFBUyxHQUliLE9BSEFvSSxFQUFLOEcsU0FBUSxTQUFVeFMsRUFBS04sR0FDeEI0RCxFQUFPdEQsR0FBTzBLLEVBQU1pbEYsVUFBVWp3RixFQUFPNFYsTUFFbENoUyxHQUVYeXFGLEVBQWlCMXRGLFVBQVVzdkYsVUFBWSxTQUFVandGLEVBQU80VixHQUNwRCxHQUFJNVYsYUFBaUJzdEMsR0FDakIsT0FBT2hzQyxLQUFLMHVGLFdBQVdod0YsRUFBTzRWLEdBRTdCLEdBQUk1VixhQUFpQm94QyxHQUN0QixPQUFPOXZDLEtBQUs0dUYsVUFBVWx3RixFQUFPNFYsR0FFNUIsR0FBSTVWLGFBQWlCc3dDLEdBQVUsQ0FDaEMsSUFBSWh3QyxFQUFNTixFQUFNQSxNQUFNNFYsR0FDbEI2WCxFQUFXbnNCLEtBQUsyc0YsV0FBV2hDLHlCQUF5QmgvRCxhQVV4RCxPQVRLanRCLEVBQU1pdEIsV0FBV3JCLFFBQVE2QixJQUUxQnJvQixFQUFNLFlBQWM5RCxLQUFLbXNGLEtBQUsxOUQsS0FBTywrREFFaEMvdkIsRUFBTWl0QixXQUFXTyxVQUFZLElBQU14dEIsRUFBTWl0QixXQUFXUSxTQUFXLHdGQUVoREEsRUFBU0QsVUFBWSxJQUFNQyxFQUFTQSxTQUFXLGNBR2hFLElBQUk0L0QsR0FBa0Ivc0YsRUFBS2dCLEtBQUsyc0YsV0FBWTNzRixLQUFLZ3RGLFlBR3hELE9BQU90dUYsRUFBTUEsTUFBTTRWLElBRzNCeTRFLEVBQWlCMXRGLFVBQVV1dkYsVUFBWSxTQUFVbGtGLEVBQU00SixHQUNuRCxJQUFJNUssRUFBUTFKLEtBQ1osT0FBTzBLLEVBQUtxakMsY0FBYzk4QixLQUFJLFNBQVV2UyxHQUNwQyxPQUFPZ0wsRUFBTWlsRixVQUFVandGLEVBQU80VixPQUcvQnk0RSxFQXZIMEIsR0F5SGpDeUIsR0FBdUMsU0FBVXJrRixHQUVqRCxTQUFTcWtGLElBQ0wsT0FBa0IsT0FBWHJrRixHQUFtQkEsRUFBTzdKLE1BQU1OLEtBQU1JLFlBQWNKLEtBTy9ELE9BVEF3RixFQUFNMUYsVUFBVTB1RixFQUF1QnJrRixHQUl2Q3FrRixFQUFzQm52RixVQUFVcUwsS0FBTyxTQUFVNEosR0FDN0MsSUFBSTVKLEVBQU9QLEVBQU85SyxVQUFVcUwsS0FBSzlNLEtBQUtvQyxLQUFNc1UsR0FFNUMsT0FEQXpPLE9BQWdCMEQsSUFBVG1CLEVBQW9CLG9EQUNwQkEsR0FFSjhqRixFQVYrQixDQVd4Q3pCLElBQ0VSLEdBQXlCLFdBQ3pCLFNBQVN6akMsRUFBTStsQyxFQUFRM0MsRUFBV2MsR0FDOUJodEYsS0FBSzZ1RixPQUFTQSxFQUNkN3VGLEtBQUtrc0YsVUFBWUEsRUFDakJsc0YsS0FBS2d0RixXQUFhQSxFQXdkdEIsT0F0ZEFsa0MsRUFBTXpwRCxVQUFVNHdFLE1BQVEsU0FBVTdsQyxFQUFPMGtELEVBQU9wd0YsR0FDNUN1b0IsRUFBMEIsY0FBZTdtQixVQUFXLEdBQ3BEb3BCLEVBQWdCLGNBQWUsRUFBRzlxQixHQUVsQyxJQVdJK3hDLEVBWEFzK0MsRUFBcUIsQ0FDckIsSUFDQSxLQUNBLEtBQ0EsS0FDQSxJQUNBLGlCQUNBLEtBQ0Esc0JBRUpubUUsRUFBbUIsY0FBZW1tRSxFQUFvQixFQUFHRCxHQUV6RCxJQUFJOWtELEVBQVkrK0MsR0FBc0IsY0FBZTMrQyxHQUNqRDRrRCxFQUFXN2lDLEdBQVMzOUIsV0FBV3NnRSxHQUNuQyxHQUFJOWtELEVBQVVsYixhQUFjLENBQ3hCLEdBQUlrZ0UsSUFBYTdpQyxHQUFTTSxnQkFDdEJ1aUMsSUFBYTdpQyxHQUFTUSxtQkFDdEIsTUFBTSxJQUFJem1DLEVBQWVqQixFQUFLSSxpQkFBa0IscUNBQXVDMnBFLEVBQVN4akYsV0FBYSx3Q0FHNUcsR0FBSXdqRixJQUFhN2lDLEdBQVNPLEdBQUksQ0FDL0Ixc0QsS0FBS2l2RixrQ0FBa0N2d0YsRUFBT3N3RixHQUU5QyxJQURBLElBQUlFLEVBQWdCLEdBQ1h2a0YsRUFBSyxFQUFHTSxFQUFLdk0sRUFBT2lNLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUMvQyxJQUFJMGlELEVBQWFwaUQsRUFBR04sR0FDcEJ1a0YsRUFBY3pyRixLQUFLekQsS0FBS212RixxQkFBcUI5aEMsSUFFakQ1YyxFQUFhLElBQUlYLEdBQVdvL0MsUUFHNUJ6K0MsRUFBYXp3QyxLQUFLbXZGLHFCQUFxQnp3RixRQUl2Q3N3RixJQUFhN2lDLEdBQVNPLElBQ3RCc2lDLElBQWE3aUMsR0FBU1Esb0JBQ3RCM3NELEtBQUtpdkYsa0NBQWtDdndGLEVBQU9zd0YsR0FFbER2K0MsRUFBYXp3QyxLQUFLa3NGLFVBQVVmLGVBQWVsQyxnQkFBZ0IsY0FBZXZxRixFQUVyRHN3RixJQUFhN2lDLEdBQVNPLElBRS9DLElBQUluM0MsRUFBUzQwQyxHQUFZcHJELE9BQU9pckMsRUFBV2dsRCxFQUFVditDLEdBRXJELE9BREF6d0MsS0FBS292RixrQkFBa0I3NUUsR0FDaEIsSUFBSXV6QyxFQUFNOW9ELEtBQUs2dUYsT0FBTzNrQyxVQUFVMzBDLEdBQVN2VixLQUFLa3NGLFVBQVdsc0YsS0FBS2d0RixhQUV6RWxrQyxFQUFNenBELFVBQVVvcEQsUUFBVSxTQUFVcmUsRUFBT2lsRCxHQUd2QyxJQUFJanZELEVBQ0osR0FIQS9ZLEVBQTRCLGdCQUFpQmpuQixVQUFXLEVBQUcsR0FDM0R3bkIsRUFBd0IsZ0JBQWlCLG1CQUFvQixFQUFHeW5FLFFBRTNDOWxGLElBQWpCOGxGLEdBQStDLFFBQWpCQSxFQUM5Qmp2RCxFQUFZMnBCLEdBQVVDLGNBRXJCLElBQXFCLFNBQWpCcWxDLEVBSUwsTUFBTSxJQUFJbnBFLEVBQWVqQixFQUFLSSxpQkFBa0IsbURBQXFEZ3FFLEVBQWUsZ0NBSHBIanZELEVBQVkycEIsR0FBVThCLFdBTTFCLEdBQTRCLE9BQXhCN3JELEtBQUs2dUYsT0FBT2xtQyxRQUNaLE1BQU0sSUFBSXppQyxFQUFlakIsRUFBS0ksaUJBQWtCLDBHQUdwRCxHQUEwQixPQUF0QnJsQixLQUFLNnVGLE9BQU9qbUMsTUFDWixNQUFNLElBQUkxaUMsRUFBZWpCLEVBQUtJLGlCQUFrQix1R0FHcEQsSUFBSTJrQixFQUFZKytDLEdBQXNCLGdCQUFpQjMrQyxHQUNuRHFlLEVBQVUsSUFBSWtCLEdBQVEzZixFQUFXNUosR0FFckMsT0FEQXBnQyxLQUFLc3ZGLG1CQUFtQjdtQyxHQUNqQixJQUFJSyxFQUFNOW9ELEtBQUs2dUYsT0FBT3ZrQyxXQUFXN0IsR0FBVXpvRCxLQUFLa3NGLFVBQVdsc0YsS0FBS2d0RixhQUUzRWxrQyxFQUFNenBELFVBQVVrdUIsTUFBUSxTQUFVcnVCLEdBSTlCLE9BSEErbkIsRUFBMEIsY0FBZTdtQixVQUFXLEdBQ3BEbW5CLEVBQWdCLGNBQWUsU0FBVSxFQUFHcm9CLEdBQzVDMHFCLEVBQXVCLGNBQWUsRUFBRzFxQixHQUNsQyxJQUFJNHBELEVBQU05b0QsS0FBSzZ1RixPQUFPcmtDLGlCQUFpQnRyRCxHQUFJYyxLQUFLa3NGLFVBQVdsc0YsS0FBS2d0RixhQUUzRWxrQyxFQUFNenBELFVBQVVrd0YsWUFBYyxTQUFVcndGLEdBSXBDLE9BSEErbkIsRUFBMEIsb0JBQXFCN21CLFVBQVcsR0FDMURtbkIsRUFBZ0Isb0JBQXFCLFNBQVUsRUFBR3JvQixHQUNsRDBxQixFQUF1QixvQkFBcUIsRUFBRzFxQixHQUN4QyxJQUFJNHBELEVBQU05b0QsS0FBSzZ1RixPQUFPcGtDLGdCQUFnQnZyRCxHQUFJYyxLQUFLa3NGLFVBQVdsc0YsS0FBS2d0RixhQUUxRWxrQyxFQUFNenBELFVBQVVzcEQsUUFBVSxTQUFVNm1DLEdBRWhDLElBREEsSUFBSTVsRCxFQUFTLEdBQ0pqL0IsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDaS9CLEVBQU9qL0IsRUFBSyxHQUFLdkssVUFBVXVLLEdBRS9Cd2MsRUFBNEIsZ0JBQWlCL21CLFVBQVcsR0FDeEQsSUFBSW9oQyxFQUFReGhDLEtBQUt5dkYscUJBQXFCLGdCQUFpQkQsRUFBWTVsRCxHQUN2RCxHQUNaLE9BQU8sSUFBSWtmLEVBQU05b0QsS0FBSzZ1RixPQUFPbGtDLFlBQVlucEIsR0FBUXhoQyxLQUFLa3NGLFVBQVdsc0YsS0FBS2d0RixhQUUxRWxrQyxFQUFNenBELFVBQVVxd0YsV0FBYSxTQUFVRixHQUVuQyxJQURBLElBQUk1bEQsRUFBUyxHQUNKai9CLEVBQUssRUFBR0EsRUFBS3ZLLFVBQVVDLE9BQVFzSyxJQUNwQ2kvQixFQUFPai9CLEVBQUssR0FBS3ZLLFVBQVV1SyxHQUUvQndjLEVBQTRCLG1CQUFvQi9tQixVQUFXLEdBQzNELElBQUlvaEMsRUFBUXhoQyxLQUFLeXZGLHFCQUFxQixtQkFBb0JELEVBQVk1bEQsR0FDMUQsR0FDWixPQUFPLElBQUlrZixFQUFNOW9ELEtBQUs2dUYsT0FBT2xrQyxZQUFZbnBCLEdBQVF4aEMsS0FBS2tzRixVQUFXbHNGLEtBQUtndEYsYUFFMUVsa0MsRUFBTXpwRCxVQUFVc3dGLFVBQVksU0FBVUgsR0FFbEMsSUFEQSxJQUFJNWxELEVBQVMsR0FDSmovQixFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcENpL0IsRUFBT2ovQixFQUFLLEdBQUt2SyxVQUFVdUssR0FFL0J3YyxFQUE0QixrQkFBbUIvbUIsVUFBVyxHQUMxRCxJQUFJb2hDLEVBQVF4aEMsS0FBS3l2RixxQkFBcUIsa0JBQW1CRCxFQUFZNWxELEdBQ3pELEdBQ1osT0FBTyxJQUFJa2YsRUFBTTlvRCxLQUFLNnVGLE9BQU9qa0MsVUFBVXBwQixHQUFReGhDLEtBQUtrc0YsVUFBV2xzRixLQUFLZ3RGLGFBRXhFbGtDLEVBQU16cEQsVUFBVXVwRCxNQUFRLFNBQVU0bUMsR0FFOUIsSUFEQSxJQUFJNWxELEVBQVMsR0FDSmovQixFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcENpL0IsRUFBT2ovQixFQUFLLEdBQUt2SyxVQUFVdUssR0FFL0J3YyxFQUE0QixjQUFlL21CLFVBQVcsR0FDdEQsSUFBSW9oQyxFQUFReGhDLEtBQUt5dkYscUJBQXFCLGNBQWVELEVBQVk1bEQsR0FDckQsR0FDWixPQUFPLElBQUlrZixFQUFNOW9ELEtBQUs2dUYsT0FBT2prQyxVQUFVcHBCLEdBQVF4aEMsS0FBS2tzRixVQUFXbHNGLEtBQUtndEYsYUFFeEVsa0MsRUFBTXpwRCxVQUFVaXJCLFFBQVUsU0FBVWlCLEdBQ2hDLEtBQU1BLGFBQWlCdTlCLEdBQ25CLE1BQU1uL0IsRUFBa0IsVUFBVyxRQUFTLEVBQUc0QixHQUVuRCxPQUFRdnJCLEtBQUtrc0YsWUFBYzNnRSxFQUFNMmdFLFdBQWFsc0YsS0FBSzZ1RixPQUFPdmtFLFFBQVFpQixFQUFNc2pFLFNBRTVFL2xDLEVBQU16cEQsVUFBVTZ1RixjQUFnQixTQUFVNTlDLEdBQ3RDLE9BQU8sSUFBSXdZLEVBQU05b0QsS0FBSzZ1RixPQUFRN3VGLEtBQUtrc0YsVUFBVzU3QyxJQUdsRHdZLEVBQU16cEQsVUFBVW93RixxQkFBdUIsU0FBVWp5RSxFQUFZZ3lFLEVBQVk1bEQsRUFBUW1pQixHQUU3RSxHQURBdmlDLEVBQWdCaE0sRUFBWSxFQUFHZ3lFLEdBQzNCQSxhQUFzQnpDLEdBQWtCLENBQ3hDLEdBQUluakQsRUFBT3ZwQyxPQUFTLEVBQ2hCLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLGtDQUFvQzdILEVBQWEsT0FFckcsSUFBSSsxRCxFQUFPaWMsRUFDWCxJQUFLamMsRUFBSzNvQyxPQUNOLE1BQU0sSUFBSTFrQixFQUFlakIsRUFBS00sVUFBVyx1REFDcEMvSCxFQUFhLE9BRXRCLE9BQU94ZCxLQUFLNHZGLGtCQUFrQnB5RSxFQUFZKzFELEVBQUs2YSxVQUFXcmlDLEdBRzFELElBQUk4akMsRUFBWSxDQUFDTCxHQUFZeHJGLE9BQU80bEMsR0FDcEMsT0FBTzVwQyxLQUFLOHZGLGdCQUFnQnR5RSxFQUFZcXlFLEVBQVc5akMsSUFjM0RqRCxFQUFNenBELFVBQVV1d0Ysa0JBQW9CLFNBQVVweUUsRUFBWTh1QixFQUFLeWYsR0FTM0QsSUFSQSxJQUFJNTBDLEVBQWEsR0FRUnhNLEVBQUssRUFBR00sRUFBS2pMLEtBQUs2dUYsT0FBT3BtQyxRQUFTOTlDLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUM3RCxJQUFJODlDLEVBQVV4OUMsRUFBR04sR0FDakIsR0FBSTg5QyxFQUFRcmUsTUFBTXRiLGFBQ2QzWCxFQUFXMVQsS0FBSyxJQUFJdXJDLEdBQVNodkMsS0FBS2tzRixVQUFVckIsWUFBYXYrQyxFQUFJdHRDLFVBRTVELENBQ0QsSUFBSU4sRUFBUTR0QyxFQUFJbEMsTUFBTXFlLEVBQVFyZSxPQUM5QixHQUFJMXJDLGFBQWlCb3dDLEdBQ2pCLE1BQU0sSUFBSTVvQixFQUFlakIsRUFBS0ksaUJBQWtCLCtGQUU1Q29qQyxFQUFRcmUsTUFDUiwySEFHSCxHQUFjLE9BQVYxckMsRUFHSixDQUNELElBQUkwckMsRUFBUXFlLEVBQVFyZSxNQUFNN2Isa0JBQzFCLE1BQU0sSUFBSXJJLEVBQWVqQixFQUFLSSxpQkFBa0IsK0ZBQ1Ira0IsRUFBUSwyQ0FMaERqekIsRUFBVzFULEtBQUsvRSxJQVU1QixPQUFPLElBQUlvdEQsR0FBTTMwQyxFQUFZNDBDLElBS2pDakQsRUFBTXpwRCxVQUFVeXdGLGdCQUFrQixTQUFVdHlFLEVBQVluSSxFQUFRMDJDLEdBRTVELElBQUl0RCxFQUFVem9ELEtBQUs2dUYsT0FBTzlsQyxnQkFDMUIsR0FBSTF6QyxFQUFPaFYsT0FBU29vRCxFQUFRcG9ELE9BQ3hCLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLGtDQUFvQzdILEVBQWEsbUdBS3JHLElBREEsSUFBSXJHLEVBQWEsR0FDUjFaLEVBQUksRUFBR0EsRUFBSTRYLEVBQU9oVixPQUFRNUMsSUFBSyxDQUNwQyxJQUFJc3lGLEVBQVcxNkUsRUFBTzVYLEdBRXRCLEdBRHVCZ3JELEVBQVFockQsR0FDVjJzQyxNQUFNdGIsYUFBYyxDQUNyQyxHQUF3QixpQkFBYmloRSxFQUNQLE1BQU0sSUFBSTdwRSxFQUFlakIsRUFBS0ksaUJBQWtCLHVEQUMzQzdILEVBQWEsd0JBQTBCdXlFLEdBRWhELElBQUsvdkYsS0FBSzZ1RixPQUFPanFELDJCQUNjLElBQTNCbXJELEVBQVN0dkYsUUFBUSxLQUNqQixNQUFNLElBQUl5bEIsRUFBZWpCLEVBQUtJLGlCQUFrQix5R0FDbEI3SCxFQUFhLHdDQUNoQ3V5RSxFQUFXLHVCQUUxQixJQUFJdGhFLEVBQU96dUIsS0FBSzZ1RixPQUFPcGdFLEtBQUtwQixNQUFNaUIsR0FBYUUsV0FBV3VoRSxJQUMxRCxJQUFLM2dFLEdBQVlDLGNBQWNaLEdBQzNCLE1BQU0sSUFBSXZJLEVBQWVqQixFQUFLSSxpQkFBa0IsK0dBQ003SCxFQUFhLGlEQUMvQmlSLEVBQU8sMkRBRy9DLElBQUl6dkIsRUFBTSxJQUFJb3dCLEdBQVlYLEdBQzFCdFgsRUFBVzFULEtBQUssSUFBSXVyQyxHQUFTaHZDLEtBQUtrc0YsVUFBVXJCLFlBQWE3ckYsUUFFeEQsQ0FDRCxJQUFJZ3hGLEVBQVVod0YsS0FBS2tzRixVQUFVZixlQUFlbEMsZ0JBQWdCenJFLEVBQVl1eUUsR0FDeEU1NEUsRUFBVzFULEtBQUt1c0YsSUFHeEIsT0FBTyxJQUFJbGtDLEdBQU0zMEMsRUFBWTQwQyxJQUVqQ2pELEVBQU16cEQsVUFBVXF1RixXQUFhLFdBRXpCLElBREEsSUFBSXArRSxFQUFPLEdBQ0YzRSxFQUFLLEVBQUdBLEVBQUt2SyxVQUFVQyxPQUFRc0ssSUFDcEMyRSxFQUFLM0UsR0FBTXZLLFVBQVV1SyxHQUV6QjBjLEVBQTRCLG1CQUFvQmpuQixVQUFXLEVBQUcsR0FDOUQsSUFDSTBOLEVBREF3RyxFQUFVLEdBRVZxNUUsRUFBVSxFQXdCZCxNQXZCNkIsaUJBQWxCcitFLEVBQUtxK0UsSUFDWGxJLEdBQWtCbjJFLEVBQUtxK0UsTUFFeEJsa0UsRUFBb0IsbUJBRHBCblYsRUFBVWhGLEVBQUtxK0UsR0FDa0MsQ0FDN0MsMkJBRUo1bEUsRUFBMEIsbUJBQW9CLFVBQVcseUJBQTBCelQsRUFBUWsvRCx3QkFDM0ZtYSxLQUVBbEksR0FBa0JuMkUsRUFBS3ErRSxJQUN2QjcvRSxFQUFXd0IsRUFBS3ErRSxJQUdoQnBtRSxFQUFnQixtQkFBb0IsV0FBWW9tRSxFQUFTcitFLEVBQUtxK0UsSUFDOUQvbEUsRUFBd0IsbUJBQW9CLFdBQVkrbEUsRUFBVSxFQUFHcitFLEVBQUtxK0UsRUFBVSxJQUNwRi9sRSxFQUF3QixtQkFBb0IsV0FBWStsRSxFQUFVLEVBQUdyK0UsRUFBS3ErRSxFQUFVLElBQ3BGNy9FLEVBQVcsQ0FDUDFMLEtBQU1rTixFQUFLcStFLEdBQ1g3cEYsTUFBT3dMLEVBQUtxK0UsRUFBVSxHQUN0QjMvRSxTQUFVc0IsRUFBS3ErRSxFQUFVLEtBR2pDM3RGLEtBQUtpd0YseUNBQXlDandGLEtBQUs2dUYsUUFDNUM3dUYsS0FBSzZ0RixtQkFBbUJ2NUUsRUFBU3hHLElBRTVDZzdDLEVBQU16cEQsVUFBVXd1RixtQkFBcUIsU0FBVXY1RSxFQUFTeEcsR0FDcEQsSUFBSXBFLEVBQVExSixLQUNSOHRGLEVBQWEsU0FBVWgvRSxHQUN2QjVGLFFBQVFwRixNQUFNLGdDQUFpQ2dMLElBRS9DaEIsRUFBU2hLLFFBQ1RncUYsRUFBYWhnRixFQUFTaEssTUFBTTdFLEtBQUs2TyxJQUVyQyxJQUFJZytFLEVBQWdCLElBQUk1SSxHQUFjLENBQ2xDOWdGLEtBQU0sU0FBVUUsR0FDUndMLEVBQVMxTCxNQUNUMEwsRUFBUzFMLEtBQUssSUFBSTh0RixHQUFjeG1GLEVBQU13aUYsVUFBV3hpRixFQUFNbWxGLE9BQVF2c0YsRUFBUW9ILEVBQU1zakYsY0FHckZscEYsTUFBT2dxRixJQUVQcUMsRUFBa0Jud0YsS0FBS2tzRixVQUFVdkIseUJBQ2pDb0QsRUFBbUJvQyxFQUFnQjduQixPQUFPdG9FLEtBQUs2dUYsT0FBUS9DLEVBQWV4M0UsR0FDMUUsT0FBTyxXQUNIdzNFLEVBQWN6SSxPQUNkOE0sRUFBZ0IzbkIsU0FBU3VsQixLQUdqQ2psQyxFQUFNenBELFVBQVU0d0YseUNBQTJDLFNBQVUveEUsR0FDakUsR0FBSUEsRUFBTXV0QyxrQkFBcUQsSUFBakN2dEMsRUFBTTZxQyxnQkFBZ0Ixb0QsT0FDaEQsTUFBTSxJQUFJNmxCLEVBQWVqQixFQUFLYyxjQUFlLDJFQUdyRCtpQyxFQUFNenBELFVBQVVmLElBQU0sU0FBVWdXLEdBQzVCLElBQUk1SyxFQUFRMUosS0FJWixPQUhBcW5CLEVBQTRCLFlBQWFqbkIsVUFBVyxFQUFHLEdBQ3ZENHRGLEdBQW1CLFlBQWExNUUsR0FDaEN0VSxLQUFLaXdGLHlDQUF5Q2p3RixLQUFLNnVGLFFBQzVDLElBQUk5c0YsU0FBUSxTQUFVQyxFQUFTQyxHQUM5QnFTLEdBQThCLFVBQW5CQSxFQUFRbEwsT0FDbkJNLEVBQU13aUYsVUFDRHZCLHlCQUNBMUgsMkJBQTJCdjVFLEVBQU1tbEYsUUFDakNyc0YsTUFBSyxTQUFVeXZFLEdBQ2hCandFLEVBQVEsSUFBSWt1RixHQUFjeG1GLEVBQU13aUYsVUFBV3hpRixFQUFNbWxGLE9BQVE1YyxFQUFVdm9FLEVBQU1zakYsZUFDMUUvcUYsR0FHSHlILEVBQU11a0YsdUJBQXVCanNGLEVBQVNDLEVBQVFxUyxPQUkxRHcwQyxFQUFNenBELFVBQVU0dUYsdUJBQXlCLFNBQVVqc0YsRUFBU0MsRUFBUXFTLEdBQ2hFLElBQUlrMEQsRUFBV3hvRSxLQUFLNnRGLG1CQUFtQixDQUNuQ3JhLHdCQUF3QixFQUN4QkssdUJBQXVCLEdBQ3hCLENBQ0N6eEUsS0FBTSxTQUFVRSxHQUdaa21FLElBQ0lsbUUsRUFBT2IsU0FBU3N6RCxXQUNoQnpnRCxHQUNtQixXQUFuQkEsRUFBUWxMLE9BQ1JuSCxFQUFPLElBQUlpa0IsRUFBZWpCLEVBQUtlLFlBQWEsaUxBTTVDaGtCLEVBQVFNLElBR2hCd0IsTUFBTzdCLEtBUWY2bUQsRUFBTXpwRCxVQUFVOHZGLHFCQUF1QixTQUFVaUIsR0FDN0MsR0FBK0IsaUJBQXBCQSxFQUE4QixDQUNyQyxHQUF3QixLQUFwQkEsRUFDQSxNQUFNLElBQUlscUUsRUFBZWpCLEVBQUtJLGlCQUFrQiwrSEFHcEQsSUFBS3JsQixLQUFLNnVGLE9BQU9qcUQsMkJBQ3FCLElBQWxDd3JELEVBQWdCM3ZGLFFBQVEsS0FDeEIsTUFBTSxJQUFJeWxCLEVBQWVqQixFQUFLSSxpQkFBa0IsbUhBRXJDK3FFLEVBQWtCLCtCQUVqQyxJQUFJM2hFLEVBQU96dUIsS0FBSzZ1RixPQUFPcGdFLEtBQUtwQixNQUFNaUIsR0FBYUUsV0FBVzRoRSxJQUMxRCxJQUFLaGhFLEdBQVlDLGNBQWNaLEdBQzNCLE1BQU0sSUFBSXZJLEVBQWVqQixFQUFLSSxpQkFBa0IsNElBRWpDb0osRUFBTyxzREFBd0RBLEVBQUtwdUIsT0FBUyxNQUVoRyxPQUFPLElBQUkydUMsR0FBU2h2QyxLQUFLa3NGLFVBQVVyQixZQUFhLElBQUl6N0QsR0FBWVgsSUFFL0QsR0FBSTJoRSxhQUEyQnJFLEdBQW1CLENBQ25ELElBQUlsN0IsRUFBTXUvQixFQUNWLE9BQU8sSUFBSXBoRCxHQUFTaHZDLEtBQUtrc0YsVUFBVXJCLFlBQWFoNkIsRUFBSXM3QixNQUdwRCxNQUFNLElBQUlqbUUsRUFBZWpCLEVBQUtJLGlCQUFrQixpSUFFM0M4QyxFQUFpQmlvRSxHQUFtQixNQU9qRHRuQyxFQUFNenBELFVBQVU0dkYsa0NBQW9DLFNBQVV2d0YsRUFBT3N3RixHQUNqRSxJQUFLbnZGLE1BQU1vSCxRQUFRdkksSUFBMkIsSUFBakJBLEVBQU0yQixPQUMvQixNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQixxREFDckMycEUsRUFBU3hqRixXQUFhLGNBRXJDLEdBQUk5TSxFQUFNMkIsT0FBUyxHQUNmLE1BQU0sSUFBSTZsQixFQUFlakIsRUFBS0ksaUJBQWtCLG1CQUFxQjJwRSxFQUFTeGpGLFdBQWEsa0VBRy9GLEdBQUk5TSxFQUFNK0IsUUFBUSxPQUFTLEVBQ3ZCLE1BQU0sSUFBSXlsQixFQUFlakIsRUFBS0ksaUJBQWtCLG1CQUFxQjJwRSxFQUFTeGpGLFdBQWEsdURBRy9GLEdBQUk5TSxFQUFNNlcsUUFBTyxTQUFVd1QsR0FBVyxPQUFPbkMsT0FBT0MsTUFBTWtDLE1BQWExb0IsT0FBUyxFQUM1RSxNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQixtQkFBcUIycEUsRUFBU3hqRixXQUFhLHVEQUluR3M5QyxFQUFNenBELFVBQVUrdkYsa0JBQW9CLFNBQVU3NUUsR0FDMUMsR0FBSUEsYUFBa0I0MEMsR0FBYSxDQUMvQixJQUFJa21DLEVBQVcsQ0FBQ2xrQyxHQUFTTSxlQUFnQk4sR0FBU1Esb0JBQzlDMmpDLEVBQWlCLENBQUNua0MsR0FBU08sR0FBSVAsR0FBU1Esb0JBQ3hDNGpDLEVBQVlGLEVBQVM1dkYsUUFBUThVLEVBQU9qUyxLQUFPLEVBQzNDa3RGLEVBQWtCRixFQUFlN3ZGLFFBQVE4VSxFQUFPalMsS0FBTyxFQUMzRCxHQUFJaVMsRUFBTzYwQyxlQUFnQixDQUN2QixJQUFJcW1DLEVBQWdCendGLEtBQUs2dUYsT0FBT3RsQywyQkFDaEMsR0FBc0IsT0FBbEJrbkMsSUFBMkJBLEVBQWNubUUsUUFBUS9VLEVBQU82MEIsT0FDeEQsTUFBTSxJQUFJbGtCLEVBQWVqQixFQUFLSSxpQkFBa0Isd0lBRWRvckUsRUFBY2psRixXQUFhLFVBQzdDK0osRUFBTzYwQixNQUFNNStCLFdBQWEsS0FFOUMsSUFBSWcrQyxFQUFvQnhwRCxLQUFLNnVGLE9BQU9wbEMsdUJBQ1YsT0FBdEJELEdBQ0F4cEQsS0FBSzB3RixrQ0FBa0NuN0UsRUFBTzYwQixNQUFPb2YsUUFHeEQsR0FBSWduQyxHQUFtQkQsRUFBVyxDQUduQyxJQUFJSSxFQUFnQixLQU9wQixHQU5JSCxJQUNBRyxFQUFnQjN3RixLQUFLNnVGLE9BQU9uakMsbUJBQW1CNGtDLElBRTdCLE9BQWxCSyxHQUEwQkosSUFDMUJJLEVBQWdCM3dGLEtBQUs2dUYsT0FBT25qQyxtQkFBbUIya0MsSUFFOUIsTUFBakJNLEVBRUEsTUFBSUEsSUFBa0JwN0UsRUFBT2pTLEdBQ25CLElBQUk0aUIsRUFBZWpCLEVBQUtJLGlCQUFrQixnREFDckM5UCxFQUFPalMsR0FBR2tJLFdBQWEsYUFHNUIsSUFBSTBhLEVBQWVqQixFQUFLSSxpQkFBa0Isa0NBQW9DOVAsRUFBT2pTLEdBQUdrSSxXQUFhLG1CQUMzRm1sRixFQUFjbmxGLFdBQWEsaUJBTS9EczlDLEVBQU16cEQsVUFBVWl3RixtQkFBcUIsU0FBVTdtQyxHQUMzQyxHQUEyQyxPQUF2Q3pvRCxLQUFLNnVGLE9BQU9wbEMsdUJBQWlDLENBRTdDLElBQUlILEVBQWtCdHBELEtBQUs2dUYsT0FBT3RsQywyQkFDVixPQUFwQkQsR0FDQXRwRCxLQUFLMHdGLGtDQUFrQ3BuQyxFQUFpQmIsRUFBUXJlLFNBSTVFMGUsRUFBTXpwRCxVQUFVcXhGLGtDQUFvQyxTQUFVRSxFQUFZbm9DLEdBQ3RFLElBQUtBLEVBQVFuK0IsUUFBUXNtRSxHQUNqQixNQUFNLElBQUkxcUUsRUFBZWpCLEVBQUtJLGlCQUFrQix5RkFDVnVyRSxFQUFXcGxGLFdBQWEsK0JBQzFCb2xGLEVBQVdwbEYsV0FBYSxnRkFFckNpOUMsRUFBUWo5QyxXQUFhLGVBRzdDczlDLEVBNWRpQixHQThkeEJvbkMsR0FBK0IsV0FDL0IsU0FBU0EsRUFBY3ZELEVBQVlrRSxFQUFnQkMsRUFBVzlELEdBQzFEaHRGLEtBQUsyc0YsV0FBYUEsRUFDbEIzc0YsS0FBSzZ3RixlQUFpQkEsRUFDdEI3d0YsS0FBSzh3RixVQUFZQSxFQUNqQjl3RixLQUFLZ3RGLFdBQWFBLEVBQ2xCaHRGLEtBQUsrd0YsZUFBaUIsS0FDdEIvd0YsS0FBS2d4RixxQ0FBdUMsS0FDNUNoeEYsS0FBS3lCLFNBQVcsSUFBSTBzRixHQUFpQjJDLEVBQVVuaUMsaUJBQWtCbWlDLEVBQVUvN0IsV0F3RS9FLE9BdEVBNTJELE9BQU9DLGVBQWU4eEYsRUFBYzd3RixVQUFXLE9BQVEsQ0FDbkRmLElBQUssV0FDRCxJQUFJZ0UsRUFBUyxHQUViLE9BREF0QyxLQUFLd1IsU0FBUSxTQUFVODZCLEdBQU8sT0FBT2hxQyxFQUFPbUIsS0FBSzZvQyxNQUMxQ2hxQyxHQUVYakUsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWU4eEYsRUFBYzd3RixVQUFXLFFBQVMsQ0FDcERmLElBQUssV0FDRCxPQUFPMEIsS0FBSzh3RixVQUFVMWhDLEtBQUtwL0MsV0FFL0IzUixZQUFZLEVBQ1prWixjQUFjLElBRWxCcFosT0FBT0MsZUFBZTh4RixFQUFjN3dGLFVBQVcsT0FBUSxDQUNuRGYsSUFBSyxXQUNELE9BQU8wQixLQUFLOHdGLFVBQVUxaEMsS0FBS3poQyxNQUUvQnR2QixZQUFZLEVBQ1prWixjQUFjLElBRWxCMjRFLEVBQWM3d0YsVUFBVW1TLFFBQVUsU0FBVTNILEVBQVVsSSxHQUNsRCxJQUFJK0gsRUFBUTFKLEtBQ1pxbkIsRUFBNEIsd0JBQXlCam5CLFVBQVcsRUFBRyxHQUNuRW1uQixFQUFnQix3QkFBeUIsV0FBWSxFQUFHMWQsR0FDeEQ3SixLQUFLOHdGLFVBQVUxaEMsS0FBSzU5QyxTQUFRLFNBQVU4NkIsR0FDbEN6aUMsRUFBU2pNLEtBQUsrRCxFQUFTK0gsRUFBTXVuRixzQkFBc0Iza0QsUUFHM0RudUMsT0FBT0MsZUFBZTh4RixFQUFjN3dGLFVBQVcsUUFBUyxDQUNwRGYsSUFBSyxXQUNELE9BQU8sSUFBSWl1RixHQUFRdnNGLEtBQUs2d0YsZUFBZ0I3d0YsS0FBSzJzRixXQUFZM3NGLEtBQUtndEYsYUFFbEUzdUYsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjI0RSxFQUFjN3dGLFVBQVVpakUsV0FBYSxTQUFVaHVELEdBQ3ZDQSxJQUNBbVYsRUFBb0IsMkJBQTRCblYsRUFBUyxDQUNyRCwyQkFFSnlULEVBQTBCLDJCQUE0QixVQUFXLHlCQUEwQnpULEVBQVFrL0QseUJBRXZHLElBQUlBLEtBQTRCbC9ELElBQVdBLEVBQVFrL0Qsd0JBQ25ELEdBQUlBLEdBQTBCeHpFLEtBQUs4d0YsVUFBVXJ1Qix3QkFDekMsTUFBTSxJQUFJdjhDLEVBQWVqQixFQUFLSSxpQkFBa0IsK0hBUXBELE9BTEtybEIsS0FBSyt3RixnQkFDTi93RixLQUFLZ3hGLHVDQUF5Q3hkLElBQzlDeHpFLEtBQUsrd0YsZUFtS2pCLFNBQTZCN0UsRUFBVzFZLEVBQXdCM1csRUFBVXZzQixHQUN0RSxHQUFJdXNCLEVBQVN3RixRQUFRcnlELFVBQVcsQ0FHNUIsSUFBSWtoRixFQUNBQyxFQUFVLEVBQ2QsT0FBT3QwQixFQUFTeUYsV0FBV3J4RCxLQUFJLFNBQVU0aUQsR0FDckMsSUFBSXZuQixFQUFNLElBQUlraUQsR0FBc0J0QyxFQUFXcjRCLEVBQU92bkIsSUFBSXR0QyxJQUFLNjBELEVBQU92bkIsSUFBS3V3QixFQUFTOUgsVUFBVzhILEVBQVMwRixZQUFZdnVELElBQUk2L0MsRUFBT3ZuQixJQUFJdHRDLEtBQU1zeEMsR0FJekksT0FIQXpxQyxFQUFPZ3VELEVBQU8vZ0QsT0FBU2l1RCxHQUFXZ0IsTUFBTyx5Q0FDekNsOEQsR0FBUXFyRixHQUFhcjBCLEVBQVMzK0MsTUFBTThzQyxjQUFja21DLEVBQVdyOUIsRUFBT3ZuQixLQUFPLEVBQUcsbUNBQzlFNGtELEVBQVlyOUIsRUFBT3ZuQixJQUNaLENBQ0h4NUIsS0FBTSxRQUNOdzVCLElBQUtBLEVBQ0w4a0QsVUFBVyxFQUNYQyxTQUFVRixRQU9sQixJQUFJRyxFQUFpQnowQixFQUFTd0YsUUFDOUIsT0FBT3hGLEVBQVN5RixXQUNYL3NELFFBQU8sU0FBVXMrQyxHQUFVLE9BQU8yZixHQUEwQjNmLEVBQU8vZ0QsT0FBU2l1RCxHQUFXaUIsWUFDdkYvd0QsS0FBSSxTQUFVNGlELEdBQ2YsSUFBSXZuQixFQUFNLElBQUlraUQsR0FBc0J0QyxFQUFXcjRCLEVBQU92bkIsSUFBSXR0QyxJQUFLNjBELEVBQU92bkIsSUFBS3V3QixFQUFTOUgsVUFBVzhILEVBQVMwRixZQUFZdnVELElBQUk2L0MsRUFBT3ZuQixJQUFJdHRDLEtBQU1zeEMsR0FDckk4Z0QsR0FBWSxFQUNaQyxHQUFZLEVBVWhCLE9BVEl4OUIsRUFBTy9nRCxPQUFTaXVELEdBQVdnQixRQUUzQmw4RCxHQURBdXJGLEVBQVdFLEVBQWU3d0YsUUFBUW96RCxFQUFPdm5CLElBQUl0dEMsT0FDMUIsRUFBRyxnQ0FDdEJzeUYsRUFBaUJBLEVBQWVwOEUsT0FBTzIrQyxFQUFPdm5CLElBQUl0dEMsTUFFbEQ2MEQsRUFBTy9nRCxPQUFTaXVELEdBQVdrQixVQUUzQm92QixHQURBQyxFQUFpQkEsRUFBZXI2RCxJQUFJNDhCLEVBQU92bkIsTUFDakI3ckMsUUFBUW96RCxFQUFPdm5CLElBQUl0dEMsTUFFMUMsQ0FBRThULEtBQU15K0UsR0FBaUIxOUIsRUFBTy9nRCxNQUFPdzVCLElBQUtBLEVBQUs4a0QsU0FBVUEsRUFBVUMsU0FBVUEsTUF6TWhFRyxDQUFvQnh4RixLQUFLMnNGLFdBQVluWixFQUF3Qnh6RSxLQUFLOHdGLFVBQVc5d0YsS0FBS2d0RixZQUN4R2h0RixLQUFLZ3hGLHFDQUF1Q3hkLEdBRXpDeHpFLEtBQUsrd0YsZ0JBR2hCYixFQUFjN3dGLFVBQVVpckIsUUFBVSxTQUFVaUIsR0FDeEMsS0FBTUEsYUFBaUIya0UsR0FDbkIsTUFBTXZtRSxFQUFrQixVQUFXLGdCQUFpQixFQUFHNEIsR0FFM0QsT0FBUXZyQixLQUFLMnNGLGFBQWVwaEUsRUFBTW9oRSxZQUM5QjNzRixLQUFLNndGLGVBQWV2bUUsUUFBUWlCLEVBQU1zbEUsaUJBQ2xDN3dGLEtBQUs4d0YsVUFBVXhtRSxRQUFRaUIsRUFBTXVsRSxZQUM3Qjl3RixLQUFLZ3RGLGFBQWV6aEUsRUFBTXloRSxZQUVsQ2tELEVBQWM3d0YsVUFBVTR4RixzQkFBd0IsU0FBVTNrRCxHQUN0RCxPQUFPLElBQUlraUQsR0FBc0J4dUYsS0FBSzJzRixXQUFZcmdELEVBQUl0dEMsSUFBS3N0QyxFQUFLdHNDLEtBQUt5QixTQUFTc3pELFVBQVcvMEQsS0FBSzh3RixVQUFVdnVCLFlBQVl2dUQsSUFBSXM0QixFQUFJdHRDLEtBQU1nQixLQUFLZ3RGLGFBRXBJa0QsRUFoRnVCLEdBNkZHMXFGLEVBQU12QixlQUFlLENBQ3RELFNBQ0EsVUFDQSxPQUNrQixvQkFBWHpGLE9BQXlCLENBQUNBLE9BQU80RSxVQUFZLElBQ3pCb08sU0FBUSxTQUFVcFMsR0FRN0MsSUFDSWpCLE9BQU9DLGVBQWU4eEYsR0FBYzd3RixVQUFVaWpFLFdBQVlsakUsRUFBVSxDQUNoRWQsSUFBSyxXQUFjLE9BcEIvQixXQUNJLE1BQU0sSUFBSTRuQixFQUFlakIsRUFBS0ksaUJBQWtCLGlLQW1CZG9zRSxNQUdsQyxNQUFPM2lGLFFBRVgsSUFBSXU5RSxHQUFxQyxTQUFVbGlGLEdBRS9DLFNBQVNraUYsRUFBb0JxRixFQUFPeEYsRUFBV2MsR0FDM0MsSUFBSXRqRixFQUFRUyxFQUFPdk0sS0FBS29DLEtBQU04b0QsR0FBTU8sT0FBT3FvQyxHQUFReEYsRUFBV2MsSUFBZWh0RixLQUU3RSxHQURBMEosRUFBTWdvRixNQUFRQSxFQUNWQSxFQUFNcnhGLE9BQVMsR0FBTSxFQUNyQixNQUFNLElBQUk2bEIsRUFBZWpCLEVBQUtJLGlCQUFrQixnR0FFM0Nxc0UsRUFBTW5qRSxrQkFBb0IsUUFBVW1qRSxFQUFNcnhGLFFBRW5ELE9BQU9xSixFQW9EWCxPQTdEQWxFLEVBQU0xRixVQUFVdXNGLEVBQXFCbGlGLEdBV3JDaE0sT0FBT0MsZUFBZWl1RixFQUFvQmh0RixVQUFXLEtBQU0sQ0FDdkRmLElBQUssV0FDRCxPQUFPMEIsS0FBSzZ1RixPQUFPcGdFLEtBQUtYLGVBRTVCenZCLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlaXVGLEVBQW9CaHRGLFVBQVcsU0FBVSxDQUMzRGYsSUFBSyxXQUNELElBQUl5M0MsRUFBYS8xQyxLQUFLNnVGLE9BQU9wZ0UsS0FBS2IsVUFDbEMsT0FBSW1vQixFQUFXL2xDLFVBQ0osS0FHQSxJQUFJKzdFLEdBQWtCLElBQUkzOEQsR0FBWTJtQixHQUFhLzFDLEtBQUtrc0YsWUFHdkU3dEYsWUFBWSxFQUNaa1osY0FBYyxJQUVsQnBaLE9BQU9DLGVBQWVpdUYsRUFBb0JodEYsVUFBVyxPQUFRLENBQ3pEZixJQUFLLFdBQ0QsT0FBTzBCLEtBQUs2dUYsT0FBT3BnRSxLQUFLRixtQkFFNUJsd0IsWUFBWSxFQUNaa1osY0FBYyxJQUVsQjgwRSxFQUFvQmh0RixVQUFVaXRDLElBQU0sU0FBVTgvQyxHQVExQyxHQVBBL2tFLEVBQTRCLDBCQUEyQmpuQixVQUFXLEVBQUcsR0FHNUMsSUFBckJBLFVBQVVDLFNBQ1YrckYsRUFBYXZpRSxFQUFPQyxTQUV4QnZDLEVBQWdCLDBCQUEyQixtQkFBb0IsRUFBRzZrRSxHQUMvQyxLQUFmQSxFQUNBLE1BQU0sSUFBSWxtRSxFQUFlakIsRUFBS0ksaUJBQWtCLDRDQUVwRCxJQUFJb0osRUFBT0gsR0FBYUUsV0FBVzQ5RCxHQUNuQyxPQUFPTCxHQUFrQk8sUUFBUXRzRixLQUFLNnVGLE9BQU9wZ0UsS0FBS3BCLE1BQU1vQixHQUFPenVCLEtBQUtrc0YsVUFBV2xzRixLQUFLZ3RGLGFBRXhGWCxFQUFvQmh0RixVQUFVNDNCLElBQU0sU0FBVXY0QixHQUMxQ3VvQixFQUEwQiwwQkFBMkI3bUIsVUFBVyxHQUNoRW1uQixFQUFnQiwwQkFBMkIsU0FBVSxFQUFHN29CLEdBQ3hELElBQUlpekYsRUFBUzN4RixLQUFLc3NDLE1BQ2xCLE9BQU9xbEQsRUFBT3o5RSxJQUFJeFYsR0FBTzhELE1BQUssV0FBYyxPQUFPbXZGLE1BRXZEdEYsRUFBb0JodEYsVUFBVTZ1RixjQUFnQixTQUFVNTlDLEdBQ3BELE9BQU8sSUFBSSs3QyxFQUFvQnJzRixLQUFLMHhGLE1BQU8xeEYsS0FBS2tzRixVQUFXNTdDLElBRXhEKzdDLEVBOUQ2QixDQStEdENFLElBQ0YsU0FBU1UsR0FBbUJ6dkUsRUFBWWxKLEdBQ3BDLFFBQWdCL0ssSUFBWitLLEVBQ0EsTUFBTyxDQUNIODRFLE9BQU8sR0FRZixHQUxBM2pFLEVBQW9Cak0sRUFBWWxKLEVBQVMsQ0FBQyxRQUFTLGdCQUNuRHlULEVBQTBCdkssRUFBWSxVQUFXLFFBQVNsSixFQUFRODRFLE9BQ2xFcGxFLEVBQThCeEssRUFBWSxjQUFlLDBCQUEyQmxKLEVBQVErNEUsYUFBYSxTQUFVdGtFLEdBQy9HLE1BQTBCLGlCQUFaQSxHQUF3QkEsYUFBbUJ3NkQsV0FFakNoNkUsSUFBeEIrSyxFQUFRKzRFLGtCQUErQzlqRixJQUFsQitLLEVBQVE4NEUsTUFDN0MsTUFBTSxJQUFJbG5FLEVBQWVqQixFQUFLSSxpQkFBa0Isc0NBQXdDN0gsRUFBYSwwREFHekcsT0FBT2xKLEVBRVgsU0FBU2k2RSxHQUF3Qi93RSxFQUFZbEosR0FDekMsWUFBZ0IvSyxJQUFaK0ssRUFDTyxJQUVYbVYsRUFBb0JqTSxFQUFZbEosRUFBUyxDQUFDLHFCQUMxQytULEVBQW9DN0ssRUFBWSxFQUFXLG1CQUFvQmxKLEVBQVFpNUIsaUJBQWtCLENBQUMsV0FBWSxXQUFZLFNBQzNIajVCLEdBRVgsU0FBUzA1RSxHQUFtQnh3RSxFQUFZbEosR0FDcENzVCxFQUF3QnBLLEVBQVksU0FBVSxFQUFHbEosR0FDN0NBLElBQ0FtVixFQUFvQmpNLEVBQVlsSixFQUFTLENBQUMsV0FDMUMrVCxFQUFvQzdLLEVBQVksRUFBVyxTQUFVbEosRUFBUWxMLE9BQVEsQ0FBQyxVQUFXLFNBQVUsV0FHbkgsU0FBUzBqRixHQUFrQnR2RSxFQUFZcXZFLEVBQWFYLEdBQ2hELEdBQU1XLGFBQXVCZCxHQUd4QixJQUFJYyxFQUFZWCxZQUFjQSxFQUMvQixNQUFNLElBQUlobUUsRUFBZWpCLEVBQUtJLGlCQUFrQix1RUFHaEQsT0FBT3duRSxFQU5QLE1BQU1sakUsRUFBa0JuTSxFQUFZLG9CQUFxQixFQUFHcXZFLEdBd0RwRSxTQUFTMEUsR0FBaUJ6K0UsR0FDdEIsT0FBUUEsR0FDSixLQUFLaXVELEdBQVdnQixNQUNaLE1BQU8sUUFDWCxLQUFLaEIsR0FBV21CLFNBQ2hCLEtBQUtuQixHQUFXaUIsU0FDWixNQUFPLFdBQ1gsS0FBS2pCLEdBQVdrQixRQUNaLE1BQU8sVUFDWCxRQUNJLE9BQU9wOUMsRUFBSyx3QkFBMEIvUixJQVlsRCxTQUFTbzZFLEdBQTRCNThDLEVBQVc1eEMsRUFBT3FvQixHQUNuRCxJQUFJb21FLEVBUUosT0FQSTc4QyxHQUNBNjhDLEVBQWlCNzhDLEVBQVVzaEQsWUFBWWx6RixHQUN2Q3FvQixFQUFlLG9CQUFzQkEsR0FHckNvbUUsRUFBaUJ6dUYsRUFFZCxDQUFDeXVGLEVBQWdCcG1FLEdBTTVCLElBQUk4cUUsR0FBa0IxckUsRUFBdUJva0UsR0FBVyxxQ0FDcER1SCxHQUFvQjNyRSxFQUF1QnFtRSxHQUFlLHNEQUMxRHVGLEdBQW1CNXJFLEVBQXVCc21FLEdBQVksNkNBQ3REdUYsR0FBMEI3ckUsRUFBdUI0bEUsR0FBbUIsMkNBQ3BFa0csR0FBeUI5ckUsRUFBdUI0bUUsSUFDaERtRixHQUE4Qi9yRSxFQUF1QnFvRSxJQUNyRDJELEdBQWNoc0UsRUFBdUJvbUUsSUFDckM2RixHQUFzQmpzRSxFQUF1QitwRSxJQUM3Q21DLEdBQTRCbHNFLEVBQXVCa21FLEdBQXFCLGtEQWtCeEVpRyxHQUFxQixDQUNyQi9ILFVBQVdzSCxHQUNYL25CLFNBQVVBLEdBQ1YzMkMsVUFBV0EsR0FDWHRJLEtBQU1ZLEdBQ045TyxZQUFhbTFFLEdBQ2JyRixXQUFZc0YsR0FDWmhHLGtCQUFtQmlHLEdBQ25CakYsaUJBQWtCa0YsR0FDbEJucEMsTUFBT3FwQyxHQUNQM0Qsc0JBQXVCMEQsR0FDdkJoQyxjQUFla0MsR0FDZi9GLG9CQUFxQmdHLEdBQ3JCempFLFVBQVcyMEQsR0FDWDUxQyxXQUFZNDRDLEdBQ1p6ckUsWUFBYXl2RSxHQUFVenZFLFlBQ3ZCc3ZFLHFCQUFzQkEsSUFLMUIsU0FBU21JLEdBQXFCdjZFLEdBQzFCQSxFQUFTeEMsU0FBU3VELGtCQUFrQixJQUFJdEYsRUFBVWIsVUFBVSxhQUFhLFNBQVVZLEdBQy9FLElBQUk4RSxFQUFNOUUsRUFBVXVDLFlBQVksT0FBTzFCLGVBQ3ZDLE9BQU8sSUFBSWsyRSxHQUFVanlFLEVBQUs5RSxFQUFVdUMsWUFBWSxvQkFDakQsVUFBdUIzQyxnQkFuNXJCOUIsU0FBcUJqRixHQUNqQnRJLEVBQU9zSSxHQUFzQixpQkFBUkEsRUFBa0IsMkNBQ3ZDLElBQUk3TCxFQUFTLEdBQ2IsSUFBSyxJQUFJdEQsS0FBT21QLEVBQ1JoUSxPQUFPa0IsVUFBVUMsZUFBZTFCLEtBQUt1USxFQUFLblAsS0FDMUNzRCxFQUFPdEQsR0FBT21QLEVBQUluUCxJQUcxQixPQUFPc0QsRUEyNHJCbUNrd0YsQ0FBWUY7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQjFELElBQUlHLEdBQXlDLFdBQ3pDLFNBQVNBLEtBUVQsT0FOQUEsRUFBd0JwekYsVUFBVTZuRSxZQUFjLFNBQVVyOUQsS0FHMUQ0b0YsRUFBd0JwekYsVUFBVXlsRCxTQUFXLGFBR3RDMnRDLEVBVGlDLEdBZ0N4Q0MsR0FBNEMsV0FDNUMsU0FBU0EsSUFDTCxJQUFJaHBGLEVBQVExSixLQUNaQSxLQUFLMnlGLHlCQUEyQixXQUM1QixPQUFPanBGLEVBQU1rcEYsc0JBRWpCNXlGLEtBQUs2eUYsMkJBQTZCLFdBQzlCLE9BQU9ucEYsRUFBTW9wRix3QkFFakI5eUYsS0FBSzg1RSxVQUFZLEdBQ2pCOTVFLEtBQUsreUYsNkJBbUNULE9BakNBTCxFQUEyQnJ6RixVQUFVNm5FLFlBQWMsU0FBVXI5RCxHQUN6RDdKLEtBQUs4NUUsVUFBVXIyRSxLQUFLb0csSUFFeEI2b0YsRUFBMkJyekYsVUFBVXlsRCxTQUFXLFdBQzVDNTBDLE9BQU91MkMsb0JBQW9CLFNBQVV6bUQsS0FBSzJ5RiwwQkFDMUN6aUYsT0FBT3UyQyxvQkFBb0IsVUFBV3ptRCxLQUFLNnlGLDZCQUUvQ0gsRUFBMkJyekYsVUFBVTB6RiwyQkFBNkIsV0FDOUQ3aUYsT0FBT3EyQyxpQkFBaUIsU0FBVXZtRCxLQUFLMnlGLDBCQUN2Q3ppRixPQUFPcTJDLGlCQUFpQixVQUFXdm1ELEtBQUs2eUYsNkJBRTVDSCxFQUEyQnJ6RixVQUFVdXpGLG1CQUFxQixXQUN0RGo3RSxFQTVCUSxzQkE0QlMsMkNBQ2pCLElBQUssSUFBSWhOLEVBQUssRUFBR00sRUFBS2pMLEtBQUs4NUUsVUFBV252RSxFQUFLTSxFQUFHNUssT0FBUXNLLElBQU0sRUFFeERkLEVBRGVvQixFQUFHTixJQUNULEtBR2pCK25GLEVBQTJCcnpGLFVBQVV5ekYscUJBQXVCLFdBQ3hEbjdFLEVBbkNRLHNCQW1DUyw2Q0FDakIsSUFBSyxJQUFJaE4sRUFBSyxFQUFHTSxFQUFLakwsS0FBSzg1RSxVQUFXbnZFLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxFQUV4RGQsRUFEZW9CLEVBQUdOLElBQ1QsS0FNakIrbkYsRUFBMkJ6MkQsWUFBYyxXQUNyQyxNQUEwQixvQkFBWC9yQixhQUNpQjNHLElBQTVCMkcsT0FBT3EyQyx1QkFDd0JoOUMsSUFBL0IyRyxPQUFPdTJDLHFCQUVSaXNDLEVBN0NvQyxHQXFFM0NNLEdBQThCLFdBQzlCLFNBQVNBLEVBQWExakYsR0FDbEJ0UCxLQUFLaXpGLE9BQVMzakYsRUFBSzJqRixPQUNuQmp6RixLQUFLa3pGLFFBQVU1akYsRUFBSzRqRixRQWdDeEIsT0E5QkFGLEVBQWEzekYsVUFBVTY4RCxPQUFTLFNBQVVyeUQsR0FDdENoRSxHQUFRN0YsS0FBS216RixjQUFlLGtDQUM1Qm56RixLQUFLbXpGLGNBQWdCdHBGLEdBRXpCbXBGLEVBQWEzekYsVUFBVXE4RCxRQUFVLFNBQVU3eEQsR0FDdkNoRSxHQUFRN0YsS0FBS296RixlQUFnQixtQ0FDN0JwekYsS0FBS296RixlQUFpQnZwRixHQUUxQm1wRixFQUFhM3pGLFVBQVU4OEQsVUFBWSxTQUFVdHlELEdBQ3pDaEUsR0FBUTdGLEtBQUtxekYsaUJBQWtCLHFDQUMvQnJ6RixLQUFLcXpGLGlCQUFtQnhwRixHQUU1Qm1wRixFQUFhM3pGLFVBQVUwTyxNQUFRLFdBQzNCL04sS0FBS2t6RixXQUVURixFQUFhM3pGLFVBQVVpOEQsS0FBTyxTQUFVLzJDLEdBQ3BDdmtCLEtBQUtpekYsT0FBTzF1RSxJQUVoQnl1RSxFQUFhM3pGLFVBQVVpMEYsV0FBYSxXQUNoQ3p0RixPQUE4QjBELElBQXZCdkosS0FBS216RixjQUE2QixrREFDekNuekYsS0FBS216RixpQkFFVEgsRUFBYTN6RixVQUFVazBGLFlBQWMsU0FBVXprRixHQUMzQ2pKLE9BQStCMEQsSUFBeEJ2SixLQUFLb3pGLGVBQThCLG1EQUMxQ3B6RixLQUFLb3pGLGVBQWV0a0YsSUFFeEJra0YsRUFBYTN6RixVQUFVbTBGLGNBQWdCLFNBQVVqdkUsR0FDN0MxZSxPQUFpQzBELElBQTFCdkosS0FBS3F6RixpQkFBZ0MscURBQzVDcnpGLEtBQUtxekYsaUJBQWlCOXVFLElBRW5CeXVFLEVBbkNzQixHQXNEN0JTLEdBQVksYUFPWkMsR0FBd0IsQ0FDNUIsa0JBQTZDLFdBQzdDLE9BQWtDLFVBSTlCQyxHQUEwQixlQUFpQi90RixFQUUzQ2d1RixHQUFzQyxXQUN0QyxTQUFTQSxFQUFxQm41RSxHQUMxQnphLEtBQUsyckIsV0FBYWxSLEVBQUtrUixXQUN2QixJQUFJMGtCLEVBQVE1MUIsRUFBS3FSLElBQU0sUUFBVSxPQUNqQzlyQixLQUFLNnpGLFFBQVV4akQsRUFBUSxNQUFRNTFCLEVBQUtvUixLQUNwQzdyQixLQUFLK3JCLGlCQUFtQnRSLEVBQUtzUixpQkF1UmpDLE9BalJBNm5FLEVBQXFCdjBGLFVBQVV5MEYsd0JBQTBCLFNBQVUxTyxFQUFTdjVFLEdBQ3hFLEdBQUlBLEVBQ0EsSUFBSyxJQUFJQyxLQUFVRCxFQUFNbTRFLFlBQ2pCbjRFLEVBQU1tNEUsWUFBWTFrRixlQUFld00sS0FDakNzNUUsRUFBUXQ1RSxHQUFVRCxFQUFNbTRFLFlBQVlsNEUsSUFJaERzNUUsRUFBUSxxQkFBdUJ1TyxJQUVuQ0MsRUFBcUJ2MEYsVUFBVWsvRCxVQUFZLFNBQVVNLEVBQVN6akQsRUFBU3ZQLEdBQ25FLElBQUluQyxFQUFRMUosS0FDUjhqQixFQUFNOWpCLEtBQUsrekYsUUFBUWwxQixHQUN2QixPQUFPLElBQUk5OEQsU0FBUSxTQUFVQyxFQUFTQyxHQUNsQyxJQUFJK3hGLEVBQU0sSUFBSS92RSxFQUFrQmd3RSxNQUNoQ0QsRUFBSUUsV0FBV2p3RSxFQUFrQmt3RSxVQUFVQyxVQUFVLFdBQ2pELElBQ0ksT0FBUUosRUFBSUssb0JBQ1IsS0FBS3B3RSxFQUFrQnF3RSxVQUFVQyxTQUM3QixJQUFJQyxFQUFPUixFQUFJUyxrQkFDZjk4RSxFQUFNODdFLEdBQVcsZ0JBQWlCL25GLEtBQUtzRyxVQUFVd2lGLElBQ2pEeHlGLEVBQVF3eUYsR0FDUixNQUNKLEtBQUt2d0UsRUFBa0Jxd0UsVUFBVUksUUFDN0IvOEUsRUFBTTg3RSxHQUFXLFFBQVU1MEIsRUFBVSxlQUNyQzU4RCxFQUFPLElBQUlpa0IsRUFBZWpCLEVBQUtLLGtCQUFtQixxQkFDbEQsTUFDSixLQUFLckIsRUFBa0Jxd0UsVUFBVUssV0FDN0IsSUFBSTVjLEVBQVdpYyxFQUFJWSxZQUVuQixHQURBajlFLEVBQU04N0UsR0FBVyxRQUFVNTBCLEVBQVUsd0JBQXlCa1osRUFBVSxpQkFBa0JpYyxFQUFJYSxtQkFDMUY5YyxFQUFXLEVBQUcsQ0FDZCxJQUFJK2MsRUFBZ0JkLEVBQUlTLGtCQUNuQjN3RixNQUNMLEdBQU1neEYsR0FDQUEsRUFBYzN0QixRQUNkMnRCLEVBQWMvdUYsUUFBUyxDQUN6QixJQUFJZ3ZGLEdBdnZTSTV0QixFQXV2U29EMnRCLEVBQWMzdEIsT0F0dlN0RzZ0QixFQUFjN3RCLEVBQU84dEIsY0FBYzNwRixRQUFRLElBQUssS0FDN0NuTixPQUFPa1gsT0FBTzRQLEdBQU14a0IsUUFBUXUwRixJQUFnQixFQUM3Q0EsRUFDQS92RSxFQUFLRyxTQW92U3FCbmpCLEVBQU8sSUFBSWlrQixFQUFlNnVFLEVBQW9CRCxFQUFjL3VGLGVBRzVEOUQsRUFBTyxJQUFJaWtCLEVBQWVqQixFQUFLRyxRQUFTLGdDQUFrQzR1RSxFQUFJWSxtQkFNbEZqOUUsRUFBTTg3RSxHQUFXLFFBQVU1MEIsRUFBVSxZQUNyQzU4RCxFQUFPLElBQUlpa0IsRUFBZWpCLEVBQUtlLFlBQWEsdUJBRWhELE1BQ0osUUFDSW5CLEVBQUssUUFDRGc2QyxFQUNBLGdEQUVBbTFCLEVBQUlLLG1CQUNKLEtBQ0FMLEVBQUlrQixlQUNKLGlCQUdoQixRQUNJdjlFLEVBQU04N0UsR0FBVyxRQUFVNTBCLEVBQVUsZ0JBanhTekQsSUFBNENzSSxFQUNwQzZ0QixLQXN4U0ksSUFBSUcsRUFBVTN2RixFQUFNdEYsU0FBUyxHQUFJa2IsVUFDMUIrNUUsRUFBUWhwRSxTQUNmLElBQUlpcEUsRUFBZ0IxcEYsS0FBS3NHLFVBQVVtakYsR0FDbkN4OUUsRUFBTTg3RSxHQUFXLGdCQUFpQjN2RSxFQUFNLElBQU1zeEUsR0FNOUMsSUFBSWhRLEVBQVUsQ0FBRSxlQUFnQixjQUNoQzE3RSxFQUFNb3FGLHdCQUF3QjFPLEVBQVN2NUUsR0FDdkNtb0YsRUFBSTE0QixLQUFLeDNDLEVBQUssT0FBUXN4RSxFQUFlaFEsRUEzRjFCLFFBOEZuQndPLEVBQXFCdjBGLFVBQVVzL0QsbUJBQXFCLFNBQVVFLEVBQVN6akQsRUFBU3ZQLEdBRzVFLE9BQU83TCxLQUFLdStELFVBQVVNLEVBQVN6akQsRUFBU3ZQLElBRTVDK25GLEVBQXFCdjBGLFVBQVVvOUQsV0FBYSxTQUFVb0MsRUFBU2h6RCxHQUMzRCxJQUFJd3BGLEVBQVcsQ0FDWHIxRixLQUFLNnpGLFFBQ0wsSUFuSGEsZ0NBcUhiLElBQ0FoMUIsRUFDQSxZQUVBeTJCLEVBQXNCcnhFLEVBQWtCc3hFLDRCQUN4Q242RSxFQUFVLENBS1ZvNkUsdUJBQXVCLEVBR3ZCQyxtQkFBb0IsYUFDcEJDLG1CQUFvQixHQUNwQkMsaUJBQWtCLENBR2R4cEUsU0FBVSxZQUFjbnNCLEtBQUsyckIsV0FBV08sVUFBWSxjQUFnQmxzQixLQUFLMnJCLFdBQVdRLFVBRXhGeXBFLGFBQWEsRUFDYkMsd0JBQXdCLEVBQ3hCQyxzQkFBdUIsQ0FPbkJDLCtCQUFnQyxLQUVwQ2hxRSxpQkFBa0IvckIsS0FBSytyQixrQkFFM0IvckIsS0FBSzh6Rix3QkFBd0IxNEUsRUFBUXM2RSxtQkFBb0I3cEYsR0FrQnBEOEcsRUFBS25DLGtCQUNONEssRUFBUTQ2RSwwQkFBNEIsZ0JBRXhDLElBQUlseUUsRUFBTXV4RSxFQUFTdnRGLEtBQUssSUFDeEI2UCxFQUFNODdFLEdBQVcsd0JBQTBCM3ZFLEVBQU0sSUFBTTFJLEdBQ3ZELElBQUk2NkUsRUFBVVgsRUFBb0JZLGlCQUFpQnB5RSxFQUFLMUksR0FNcEQrNkUsR0FBUyxFQUlUQyxHQUFTLEVBQ1RDLEVBQWUsSUFBSXJELEdBQWEsQ0FDaENDLE9BQVEsU0FBVTF1RSxHQUNUNnhFLEVBVUR6K0UsRUFBTTg3RSxHQUFXLDRDQUE2Q2x2RSxJQVR6RDR4RSxJQUNEeCtFLEVBQU04N0UsR0FBVyxpQ0FDakJ3QyxFQUFRLzVELE9BQ1JpNkQsR0FBUyxHQUVieCtFLEVBQU04N0UsR0FBVyxzQkFBdUJsdkUsR0FDeEMweEUsRUFBUTM2QixLQUFLLzJDLEtBTXJCMnVFLFFBQVMsV0FBYyxPQUFPK0MsRUFBUWxvRixXQU10Q3VvRixFQUF1QixTQUFVeGpGLEVBQU1sRSxHQUd2Q3FuRixFQUFRM3RCLE9BQU94MUQsR0FBTSxTQUFVeWpGLEdBQzNCLElBQ0kzbkYsRUFBRzJuRixHQUVQLE1BQU8vMUYsR0FDSCt2QixZQUFXLFdBQ1AsTUFBTS92QixJQUNQLFFBbUVmLE9BL0RBODFGLEVBQXFCcnlFLEVBQWtCdXlFLFdBQVdyQyxVQUFVc0MsTUFBTSxXQUN6REwsR0FDRHorRSxFQUFNODdFLEdBQVcsbUNBR3pCNkMsRUFBcUJyeUUsRUFBa0J1eUUsV0FBV3JDLFVBQVV1QyxPQUFPLFdBQzFETixJQUNEQSxHQUFTLEVBQ1R6K0UsRUFBTTg3RSxHQUFXLCtCQUNqQjRDLEVBQWE5QyxrQkFHckIrQyxFQUFxQnJ5RSxFQUFrQnV5RSxXQUFXckMsVUFBVXg1RSxPQUFPLFNBQVU3TCxHQUNwRXNuRixJQUNEQSxHQUFTLEVBQ1R6K0UsRUFBTTg3RSxHQUFXLGdDQUFpQzNrRixHQUNsRHVuRixFQUFhOUMsWUFBWSxJQUFJcnRFLEVBQWVqQixFQUFLZSxZQUFhLDZDQUd0RXN3RSxFQUFxQnJ5RSxFQUFrQnV5RSxXQUFXckMsVUFBVXdDLFNBQVMsU0FBVXB5RSxHQUMzRSxJQUFJdFosRUFDSixJQUFLbXJGLEVBQVEsQ0FDVCxJQUFJUSxFQUFVcnlFLEVBQUk3WixLQUFLLEdBQ3ZCN0UsSUFBUyt3RixFQUFTLDBDQU1sQixJQUFJQyxFQUFpQkQsRUFDakI5eUYsRUFBUSt5RixFQUFlL3lGLFFBQXVDLFFBQTVCbUgsRUFBSzRyRixFQUFlLFVBQXVCLElBQVA1ckYsT0FBZ0IsRUFBU0EsRUFBR25ILE9BQ3RHLEdBQUlBLEVBQU8sQ0FDUDZULEVBQU04N0UsR0FBVyw2QkFBOEIzdkYsR0FFL0MsSUFBSWd6RixFQUFXaHpGLEVBQU1xakUsT0FDakIvOEQsRUE3aVR4QixTQUE4Qis4RCxHQUcxQixJQUFJLzhELEVBQU91MUQsR0FBUXdILEdBQ25CLFFBQWE1OUQsSUFBVGEsRUFHSixPQUFPeTJELEdBQW1CejJELEdBc2lUQzJzRixDQUFxQkQsR0FDNUIvd0YsRUFBVWpDLEVBQU1pQyxhQUNQd0QsSUFBVGEsSUFDQUEsRUFBTzZhLEVBQUt6UCxTQUNaelAsRUFDSSx5QkFDSSt3RixFQUNBLGlCQUNBaHpGLEVBQU1pQyxTQUdsQnF3RixHQUFTLEVBQ1RDLEVBQWE5QyxZQUFZLElBQUlydEUsRUFBZTliLEVBQU1yRSxJQUNsRGt3RixFQUFRbG9GLGFBR1I0SixFQUFNODdFLEdBQVcsdUJBQXdCbUQsR0FDekNQLEVBQWE3QyxjQUFjb0QsT0FJdkNybUUsWUFBVyxXQUtQOGxFLEVBQWEvQyxlQUNkLEdBQ0krQyxHQUdYekMsRUFBcUJ2MEYsVUFBVTAwRixRQUFVLFNBQVVsMUIsR0FDL0MsSUFBSW00QixFQUFhdEQsR0FBc0I3MEIsR0FFdkMsT0FEQWg1RCxPQUFzQjBELElBQWZ5dEYsRUFBMEIsNkJBQStCbjRCLEdBQ3hENytELEtBQUs2ekYsUUFDVCxnQkFHQTd6RixLQUFLMnJCLFdBQVdPLFVBQ2hCLGNBQ0Fsc0IsS0FBSzJyQixXQUFXUSxTQUNoQixjQUNBNnFFLEdBRURwRCxFQTVSOEIsR0ErU3JDcUQsR0FBaUMsV0FDakMsU0FBU0EsSUFDTGozRixLQUFLZ2xCLGdCQUFrQixHQUN2QmhsQixLQUFLMnFCLGdCQUFrQyxvQkFBVDlqQixLQXVDbEMsT0FyQ0ExSSxPQUFPQyxlQUFlNjRGLEVBQWdCNTNGLFVBQVcsV0FBWSxDQUN6RGYsSUFBSyxXQUNELE1BQTJCLG9CQUFiOGdCLFNBQTJCQSxTQUFXLE1BRXhEL2dCLFlBQVksRUFDWmtaLGNBQWMsSUFFbEJwWixPQUFPQyxlQUFlNjRGLEVBQWdCNTNGLFVBQVcsU0FBVSxDQUN2RGYsSUFBSyxXQUNELE1BQXlCLG9CQUFYNFIsT0FBeUJBLE9BQVMsTUFFcEQ3UixZQUFZLEVBQ1prWixjQUFjLElBRWxCMC9FLEVBQWdCNTNGLFVBQVVnakYsZUFBaUIsU0FBVWo4QixHQUNqRCxPQUFPcmtELFFBQVFDLFFBQVEsSUFBSTR4RixHQUFxQnh0QyxLQUVwRDZ3QyxFQUFnQjUzRixVQUFVb2pGLHVCQUF5QixXQUMvQyxPQUFJaVEsR0FBMkJ6MkQsY0FDcEIsSUFBSXkyRCxHQUdKLElBQUlELElBR25Cd0UsRUFBZ0I1M0YsVUFBVXFqRixjQUFnQixTQUFVLzJELEdBQ2hELE9BQU8sSUFBSTQvQyxHQUFvQjUvQyxFQUFZLENBQUU2L0MsZUFBZSxLQUVoRXlyQixFQUFnQjUzRixVQUFVdWxCLFdBQWEsU0FBVWxtQixHQUM3QyxPQUFPZ04sS0FBS3NHLFVBQVV0VCxJQUUxQnU0RixFQUFnQjUzRixVQUFVd0gsS0FBTyxTQUFVcXdGLEdBQ3ZDLE9BQU9yd0YsS0FBS3F3RixJQUVoQkQsRUFBZ0I1M0YsVUFBVTJJLEtBQU8sU0FBVTdDLEdBQ3ZDLE9BQU82QyxLQUFLN0MsSUFFVDh4RixFQTFDeUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9FcEN2eUUsRUFBZ0JLLFlBQVksSUFBSWt5RSxJQUVoQyxJQUFJajVGLEdBQU8sc0JBQ1BzWSxHQUFVOzs7Ozs7Ozs7Ozs7Ozs7OztBQWtCZCxTQUFTNmdGLEdBQWtCaGpGLEdBQ3ZCbytFLEdBQXFCcCtFLEdBQ3JCQSxFQUFTb0UsZ0JBQWdCdmEsR0FBTXNZLElBRW5DNmdGLEdBQWtCbi9FLEdBRWxCemEsRUFBUTQ1RixrQkFBb0JBLEssZ0NDaDd0QjVCLElBT0lDLEVBQ0FDLEVBUkEvbUYsRUFBVTlTLEVBQU9ELFFBQVUsR0FVL0IsU0FBUys1RixJQUNMLE1BQU0sSUFBSXJ4RixNQUFNLG1DQUVwQixTQUFTc3hGLElBQ0wsTUFBTSxJQUFJdHhGLE1BQU0scUNBc0JwQixTQUFTdXhGLEVBQVdDLEdBQ2hCLEdBQUlMLElBQXFCN21FLFdBRXJCLE9BQU9BLFdBQVdrbkUsRUFBSyxHQUczQixJQUFLTCxJQUFxQkUsSUFBcUJGLElBQXFCN21FLFdBRWhFLE9BREE2bUUsRUFBbUI3bUUsV0FDWkEsV0FBV2tuRSxFQUFLLEdBRTNCLElBRUksT0FBT0wsRUFBaUJLLEVBQUssR0FDL0IsTUFBTWozRixHQUNKLElBRUksT0FBTzQyRixFQUFpQng1RixLQUFLLEtBQU02NUYsRUFBSyxHQUMxQyxNQUFNajNGLEdBRUosT0FBTzQyRixFQUFpQng1RixLQUFLb0MsS0FBTXkzRixFQUFLLE1BdkNuRCxXQUNHLElBRVFMLEVBRHNCLG1CQUFmN21FLFdBQ1lBLFdBRUErbUUsRUFFekIsTUFBTzkyRixHQUNMNDJGLEVBQW1CRSxFQUV2QixJQUVRRCxFQUR3QixtQkFBakJ6bUUsYUFDY0EsYUFFQTJtRSxFQUUzQixNQUFPLzJGLEdBQ0w2MkYsRUFBcUJFLEdBakI3QixHQXdFQSxJQUVJRyxFQUZBdC9DLEVBQVEsR0FDUnUvQyxHQUFXLEVBRVhDLEdBQWMsRUFFbEIsU0FBU0MsSUFDQUYsR0FBYUQsSUFHbEJDLEdBQVcsRUFDUEQsRUFBYXIzRixPQUNiKzNDLEVBQVFzL0MsRUFBYTF6RixPQUFPbzBDLEdBRTVCdy9DLEdBQWMsRUFFZHgvQyxFQUFNLzNDLFFBQ055M0YsS0FJUixTQUFTQSxJQUNMLElBQUlILEVBQUosQ0FHQSxJQUFJSSxFQUFVUCxFQUFXSyxHQUN6QkYsR0FBVyxFQUdYLElBREEsSUFBSXhxRSxFQUFNaXJCLEVBQU0vM0MsT0FDVjhzQixHQUFLLENBR1AsSUFGQXVxRSxFQUFldC9DLEVBQ2ZBLEVBQVEsS0FDQ3cvQyxFQUFhenFFLEdBQ2R1cUUsR0FDQUEsRUFBYUUsR0FBWW5oQixNQUdqQ21oQixHQUFjLEVBQ2R6cUUsRUFBTWlyQixFQUFNLzNDLE9BRWhCcTNGLEVBQWUsS0FDZkMsR0FBVyxFQW5FZixTQUF5QkssR0FDckIsR0FBSVgsSUFBdUJ6bUUsYUFFdkIsT0FBT0EsYUFBYW9uRSxHQUd4QixJQUFLWCxJQUF1QkUsSUFBd0JGLElBQXVCem1FLGFBRXZFLE9BREF5bUUsRUFBcUJ6bUUsYUFDZEEsYUFBYW9uRSxHQUV4QixJQUVXWCxFQUFtQlcsR0FDNUIsTUFBT3gzRixHQUNMLElBRUksT0FBTzYyRixFQUFtQno1RixLQUFLLEtBQU1vNkYsR0FDdkMsTUFBT3gzRixHQUdMLE9BQU82MkYsRUFBbUJ6NUYsS0FBS29DLEtBQU1nNEYsS0FnRDdDQyxDQUFnQkYsSUFpQnBCLFNBQVNHLEVBQUtULEVBQUt2c0UsR0FDZmxyQixLQUFLeTNGLElBQU1BLEVBQ1h6M0YsS0FBS2tyQixNQUFRQSxFQVlqQixTQUFTMWMsS0E1QlQ4QixFQUFRNm5GLFNBQVcsU0FBVVYsR0FDekIsSUFBSW5vRixFQUFPLElBQUl6UCxNQUFNTyxVQUFVQyxPQUFTLEdBQ3hDLEdBQUlELFVBQVVDLE9BQVMsRUFDbkIsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJMkMsVUFBVUMsT0FBUTVDLElBQ2xDNlIsRUFBSzdSLEVBQUksR0FBSzJDLFVBQVUzQyxHQUdoQzI2QyxFQUFNMzBDLEtBQUssSUFBSXkwRixFQUFLVCxFQUFLbm9GLElBQ0osSUFBakI4b0MsRUFBTS8zQyxRQUFpQnMzRixHQUN2QkgsRUFBV00sSUFTbkJJLEVBQUs3NEYsVUFBVW8zRSxJQUFNLFdBQ2pCejJFLEtBQUt5M0YsSUFBSW4zRixNQUFNLEtBQU1OLEtBQUtrckIsUUFFOUI1YSxFQUFROG5GLE1BQVEsVUFDaEI5bkYsRUFBUStuRixTQUFVLEVBQ2xCL25GLEVBQVFnb0YsSUFBTSxHQUNkaG9GLEVBQVFpb0YsS0FBTyxHQUNmam9GLEVBQVFnRyxRQUFVLEdBQ2xCaEcsRUFBUWtvRixTQUFXLEdBSW5CbG9GLEVBQVFtb0YsR0FBS2pxRixFQUNiOEIsRUFBUW9vRixZQUFjbHFGLEVBQ3RCOEIsRUFBUXFvRixLQUFPbnFGLEVBQ2Y4QixFQUFRc29GLElBQU1wcUYsRUFDZDhCLEVBQVF1b0YsZUFBaUJycUYsRUFDekI4QixFQUFRd29GLG1CQUFxQnRxRixFQUM3QjhCLEVBQVF5b0YsS0FBT3ZxRixFQUNmOEIsRUFBUTBvRixnQkFBa0J4cUYsRUFDMUI4QixFQUFRMm9GLG9CQUFzQnpxRixFQUU5QjhCLEVBQVE0aEUsVUFBWSxTQUFVbDBFLEdBQVEsTUFBTyxJQUU3Q3NTLEVBQVE0b0YsUUFBVSxTQUFVbDdGLEdBQ3hCLE1BQU0sSUFBSWlJLE1BQU0scUNBR3BCcUssRUFBUTZvRixJQUFNLFdBQWMsTUFBTyxLQUNuQzdvRixFQUFROG9GLE1BQVEsU0FBVXR2QyxHQUN0QixNQUFNLElBQUk3akQsTUFBTSxtQ0FFcEJxSyxFQUFRK29GLE1BQVEsV0FBYSxPQUFPLEksNkJDdkxwQywyUEFFSXgyRixFQUZBeTJGLEVBQXVDLG9CQUFmQyxXQUE2QkEsV0FBK0Isb0JBQVhycEYsT0FBeUJBLFlBQTJCLElBQVhHLEVBQXlCQSxFQUF5QixvQkFBVE4sS0FBdUJBLEtBQU8sR0FFdkx5cEYsRUFBS0EsR0FBTSxHQUFHcjFGLEVBQUVtMUYsRUFBZSxTQUFTejdGLEVBQUV1RyxHQUFHLE1BQU8saUJBQWlCQSxFQUFFLFNBQVNxMUYsRUFBR3IxRixHQUFHLE1BQU8saUJBQWlCQSxFQUFFLFNBQVNsRixFQUFFa0YsRUFBRTFFLEdBQUcwRSxFQUFFQSxFQUFFOEgsTUFBTSxLQUFLeE0sRUFBRUEsR0FBR3lFLEVBQUUsSUFBSSxJQUFJckcsRUFBRSxFQUFFQSxFQUFFc0csRUFBRS9ELE9BQU92QyxJQUFJLEdBQWEsT0FBVjRCLEVBQUVBLEVBQUUwRSxFQUFFdEcsS0FBWSxPQUFPLEtBQUssT0FBTzRCLEVBQUUsU0FBU2c2RixLQUMxTyxTQUFTbjZGLEVBQUU2RSxHQUFHLElBQUkxRSxTQUFTMEUsRUFBRSxHQUFHLFVBQVUxRSxFQUFFLEtBQUcwRSxFQUFnZSxNQUFPLE9BQXBlLEdBQUdBLGFBQWF2RSxNQUFNLE1BQU8sUUFBUSxHQUFHdUUsYUFBYWpHLE9BQU8sT0FBT3VCLEVBQUUsSUFBSTVCLEVBQUVLLE9BQU9rQixVQUFVbU0sU0FBUzVOLEtBQUt3RyxHQUFHLEdBQUcsbUJBQW1CdEcsRUFBRSxNQUFPLFNBQVMsR0FBRyxrQkFBa0JBLEdBQUcsaUJBQWlCc0csRUFBRS9ELGFBQVEsSUFBb0IrRCxFQUFFdWUsYUFBUSxJQUFvQnZlLEVBQUV6RCx1QkFBdUJ5RCxFQUFFekQscUJBQXFCLFVBQVUsTUFBTyxRQUFRLEdBQUcscUJBQXFCN0MsUUFBRyxJQUFvQnNHLEVBQUV4RyxXQUFNLElBQW9Cd0csRUFBRXpELHVCQUF1QnlELEVBQUV6RCxxQkFBcUIsUUFBUSxNQUFPLGdCQUMxZixHQUFHLFlBQVlqQixRQUFHLElBQW9CMEUsRUFBRXhHLEtBQUssTUFBTyxTQUFTLE9BQU84QixFQUFFLFNBQVNnRixFQUFFTixHQUFHLE1BQU8sU0FBUzdFLEVBQUU2RSxHQUFHLFNBQVN1MUYsRUFBR3YxRixHQUFHLElBQUkxRSxFQUFFSCxFQUFFNkUsR0FBRyxNQUFPLFNBQVMxRSxHQUFHLFVBQVVBLEdBQUcsaUJBQWlCMEUsRUFBRS9ELE9BQU8sU0FBUzlCLEVBQUU2RixHQUFHLElBQUkxRSxTQUFTMEUsRUFBRSxNQUFPLFVBQVUxRSxHQUFHLE1BQU0wRSxHQUFHLFlBQVkxRSxFQUFFLElBQUlmLEVBQUUsZ0JBQWdCLElBQUlpUyxLQUFLcVosV0FBVyxHQUFHMnZFLEVBQUcsRUFBRSxTQUFTQyxFQUFHejFGLEVBQUUxRSxFQUFFNUIsR0FBRyxPQUFPc0csRUFBRXhHLEtBQUswQyxNQUFNOEQsRUFBRW5GLEtBQUttQixXQUMxVyxTQUFTMDVGLEVBQUcxMUYsRUFBRTFFLEVBQUU1QixHQUFHLElBQUlzRyxFQUFFLE1BQU02QixRQUFRLEdBQUcsRUFBRTdGLFVBQVVDLE9BQU8sQ0FBQyxJQUFJdEMsRUFBRThCLE1BQU1SLFVBQVUrTCxNQUFNeE4sS0FBS3dDLFVBQVUsR0FBRyxPQUFPLFdBQVcsSUFBSUksRUFBRVgsTUFBTVIsVUFBVStMLE1BQU14TixLQUFLd0MsV0FBOEMsT0FBbkNQLE1BQU1SLFVBQVUwNkYsUUFBUXo1RixNQUFNRSxFQUFFekMsR0FBVXFHLEVBQUU5RCxNQUFNWixFQUFFYyxJQUFJLE9BQU8sV0FBVyxPQUFPNEQsRUFBRTlELE1BQU1aLEVBQUVVLFlBQVksU0FBU29JLEVBQUVwRSxFQUFFMUUsRUFBRTVCLEdBQW9HLE9BQVYwSyxFQUF2RnVSLFNBQVMxYSxVQUFVSixPQUFPLEdBQUc4YSxTQUFTMWEsVUFBVUosS0FBS3VNLFdBQVcvSyxRQUFRLGVBQWlCbzVGLEVBQUtDLEdBQVl4NUYsTUFBTSxLQUFLRixXQUN4WixTQUFTaUQsRUFBRWUsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUUrQixNQUFNUixVQUFVK0wsTUFBTXhOLEtBQUt3QyxVQUFVLEdBQUcsT0FBTyxXQUFXLElBQUlyQyxFQUFFRCxFQUFFc04sUUFBa0MsT0FBMUJyTixFQUFFMEYsS0FBS25ELE1BQU12QyxFQUFFcUMsV0FBa0JnRSxFQUFFOUQsTUFBTU4sS0FBS2pDLElBQUksSUFBSWk4RixFQUFFM3dGLEtBQUtzSCxLQUFLLFdBQVcsT0FBUSxJQUFJdEgsTUFBTSxTQUFTNHdGLEVBQUU3MUYsRUFBRTFFLEdBQUcsU0FBUzVCLEtBQUtBLEVBQUV1QixVQUFVSyxFQUFFTCxVQUFVK0UsRUFBRTgxRixFQUFFeDZGLEVBQUVMLFVBQVUrRSxFQUFFL0UsVUFBVSxJQUFJdkIsRUFBRXNHLEVBQUUvRSxVQUFVWSxZQUFZbUUsRUFBRUEsRUFBRSsxRixHQUFHLFNBQVNwOEYsRUFBRXlDLEVBQUVtQyxHQUFHLElBQUksSUFBSXkzRixFQUFFdjZGLE1BQU1PLFVBQVVDLE9BQU8sR0FBRzNDLEVBQUUsRUFBRUEsRUFBRTBDLFVBQVVDLE9BQU8zQyxJQUFJMDhGLEVBQUUxOEYsRUFBRSxHQUFHMEMsVUFBVTFDLEdBQUcsT0FBT2dDLEVBQUVMLFVBQVVtQixHQUFHRixNQUFNdkMsRUFBRXE4RixJQUFLLFNBQVN4M0YsSUFBSTVDLEtBQUtxRSxFQUFFckUsS0FBS3FFLEVBQUVyRSxLQUFLdkMsRUFBRXVDLEtBQUt2QyxFQUFZbUYsRUFBRXZELFVBQVVnRixHQUFFLEVBQUd6QixFQUFFdkQsVUFBVWc3RixHQUFHLFdBQVcsSUFBSXI2RixLQUFLcUUsSUFBSXJFLEtBQUtxRSxHQUFFLEVBQUdyRSxLQUFLczZGLElBQUksR0FBY3Q2RixLQUFLckIsS0FBS3FCLEtBQUtyQixLQUFLaTdGLElBQU9oM0YsRUFBRXZELFVBQVVpN0YsRUFBRSxXQUFXLEdBQUd0NkYsS0FBS3ZDLEVBQUUsS0FBS3VDLEtBQUt2QyxFQUFFNEMsUUFBUUwsS0FBS3ZDLEVBQUVxSCxPQUFQOUUsSUFBbUIsSUFBSXU2RixFQUFHMTZGLE1BQU1SLFVBQVVvQixRQUFRLFNBQVMyRCxFQUFFMUUsR0FBRyxPQUFPRyxNQUFNUixVQUFVb0IsUUFBUTdDLEtBQUt3RyxFQUFFMUUsT0FBRSxJQUFTLFNBQVMwRSxFQUFFMUUsR0FBRyxHQUFHN0IsRUFBRXVHLEdBQUcsT0FBT3ZHLEVBQUU2QixJQUFJLEdBQUdBLEVBQUVXLE9BQU8rRCxFQUFFM0QsUUFBUWYsRUFBRSxJQUFJLEVBQUUsSUFBSSxJQUFJNUIsRUFBRSxFQUFFQSxFQUFFc0csRUFBRS9ELE9BQU92QyxJQUFJLEdBQUdBLEtBQUtzRyxHQUFHQSxFQUFFdEcsS0FBSzRCLEVBQUUsT0FBTzVCLEVBQUUsT0FBUSxHQUFHdThGLEVBQUd4NkYsTUFBTVIsVUFBVW1TLFFBQVEsU0FBU3BOLEVBQUUxRSxFQUFFNUIsR0FBRytCLE1BQU1SLFVBQVVtUyxRQUFRNVQsS0FBS3dHLEVBQUUxRSxFQUFFNUIsSUFBSyxTQUFTc0csRUFBRTFFLEVBQUU1QixHQUFHLElBQUksSUFBSUMsRUFBRXFHLEVBQUUvRCxPQUFPRyxFQUFFM0MsRUFBRXVHLEdBQUdBLEVBQUU4SCxNQUFNLElBQUk5SCxFQUFFekIsRUFBRSxFQUFFQSxFQUFFNUUsRUFBRTRFLElBQUlBLEtBQUtuQyxHQUFHZCxFQUFFOUIsS0FBS0UsRUFBRTBDLEVBQUVtQyxHQUFHQSxFQUFFeUIsSUFDajVCLFNBQVNvMkYsRUFBR3AyRixHQUFHLE9BQU92RSxNQUFNUixVQUFVMkUsT0FBTzFELE1BQU0sR0FBR0YsV0FBVyxTQUFTcTZGLEVBQUdyMkYsR0FBRyxJQUFJMUUsRUFBRTBFLEVBQUUvRCxPQUFPLEdBQUcsRUFBRVgsRUFBRSxDQUFDLElBQUksSUFBSTVCLEVBQUUrQixNQUFNSCxHQUFHM0IsRUFBRSxFQUFFQSxFQUFFMkIsRUFBRTNCLElBQUlELEVBQUVDLEdBQUdxRyxFQUFFckcsR0FBRyxPQUFPRCxFQUFFLE1BQU8sR0FBRyxTQUFTNDhGLEVBQUd0MkYsR0FBRyxNQUFPLGNBQWMrTCxLQUFLL0wsR0FBRyxJQUE2TXUyRixFQUF6TUMsRUFBR3Z5RixPQUFPaEosVUFBVXc3RixLQUFLLFNBQVN6MkYsR0FBRyxPQUFPQSxFQUFFeTJGLFFBQVEsU0FBU3oyRixHQUFHLE1BQU8saUNBQWlDa2xCLEtBQUtsbEIsR0FBRyxJQUFJLFNBQVMwMkYsRUFBRTEyRixFQUFFMUUsR0FBRyxPQUFRLEdBQUcwRSxFQUFFM0QsUUFBUWYsR0FBRyxTQUFTcTdGLEVBQUczMkYsRUFBRTFFLEdBQUcsT0FBTzBFLEVBQUUxRSxHQUFHLEVBQUUwRSxFQUFFMUUsRUFBRSxFQUFFLEVBQVEwRSxFQUFFLENBQUMsSUFBSTQyRixFQUFHNzJGLEVBQUU2RixVQUFVLEdBQUdneEYsRUFBRyxDQUFDLElBQUl2K0QsRUFBR3UrRCxFQUFHQyxVQUFVLEdBQUd4K0QsRUFBRyxDQUFDaytELEVBQUVsK0QsRUFBRyxNQUFNcjRCLEdBQUd1MkYsRUFBRSxHQUFJLFNBQVNPLEVBQUc5MkYsRUFBRTFFLEVBQUU1QixHQUFHLElBQUksSUFBSUMsS0FBS3FHLEVBQUUxRSxFQUFFOUIsS0FBS0UsRUFBRXNHLEVBQUVyRyxHQUFHQSxFQUFFcUcsR0FBSSxTQUFTKzJGLEVBQUcvMkYsR0FBRyxJQUFTdEcsRUFBTDRCLEVBQUUsR0FBSyxJQUFJNUIsS0FBS3NHLEVBQUUxRSxFQUFFNUIsR0FBR3NHLEVBQUV0RyxHQUFHLE9BQU80QixFQUFFLElBQUkwN0YsRUFBRyxnR0FBZ0dsdkYsTUFBTSxLQUFLLFNBQVNtdkYsRUFBR2ozRixFQUFFMUUsR0FBRyxJQUFJLElBQUk1QixFQUFFQyxFQUFFeUMsRUFBRSxFQUFFQSxFQUFFSixVQUFVQyxPQUFPRyxJQUFJLENBQWdCLElBQUkxQyxLQUFuQkMsRUFBRXFDLFVBQVVJLEdBQWM0RCxFQUFFdEcsR0FBR0MsRUFBRUQsR0FBRyxJQUFJLElBQUk2RSxFQUFFLEVBQUVBLEVBQUV5NEYsRUFBRy82RixPQUFPc0MsSUFBSTdFLEVBQUVzOUYsRUFBR3o0RixHQUFHeEUsT0FBT2tCLFVBQVVDLGVBQWUxQixLQUFLRyxFQUFFRCxLQUFLc0csRUFBRXRHLEdBQUdDLEVBQUVELEtBQU0sU0FBU3c5RixFQUFHbDNGLEdBQWMsT0FBWGszRixFQUFHLEtBQUtsM0YsR0FBVUEsRUFBRWszRixFQUFHLEtBQUs1QixFQUE2RixJQUFxUzZCLEVBQzc3Q24zRixFQUQ0cENvM0YsRUFBR1YsRUFBRUgsRUFBRSxTQUFTYyxFQUFFWCxFQUFFSCxFQUFFLFlBQVlHLEVBQUVILEVBQUUsUUFBUWUsRUFBR1osRUFBRUgsRUFBRSxRQUFRZ0IsRUFBR0QsR0FBSUQsRUFBRUcsRUFBR2QsRUFBRUgsRUFBRSxZQUFZRyxFQUFFSCxFQUFFMUYsY0FBYyxZQUFZNkYsRUFBRUgsRUFBRSxZQUFZRyxFQUFFSCxFQUFFLFlBQVlHLEVBQUVILEVBQUUsV0FBV0csRUFBRUgsRUFBRSxRQUFRa0IsRUFBR2YsRUFBRUgsRUFBRTFGLGNBQWMsWUFBWTZGLEVBQUVILEVBQUUsUUFBUSxTQUFTbUIsSUFBSyxJQUFJMTNGLEVBQUVELEVBQUVpYixTQUFTLE9BQU9oYixFQUFFQSxFQUFFMjNGLGtCQUFhLEVBQ2o5QzMzRixFQUFFLENBQUMsSUFBSTQzRixFQUFHLEdBQUdDLEdBQWtCNzNGLEVBQUV1MkYsRUFBS2lCLEVBQVUscUJBQXFCdHlFLEtBQUtsbEIsR0FBTXMzRixFQUFVLGtCQUFrQnB5RSxLQUFLbGxCLEdBQU1xM0YsRUFBUyxtQ0FBbUNueUUsS0FBS2xsQixHQUFNeTNGLEVBQVUsZ0JBQWdCdnlFLEtBQUtsbEIsR0FBTW8zRixFQUFVLHlCQUF5Qmx5RSxLQUFLbGxCLFFBQTNDLEdBQXNFLEdBQXJCNjNGLElBQUtELEVBQUdDLEVBQUdBLEVBQUcsR0FBRyxJQUFPUixFQUFFLENBQUMsSUFBSVMsRUFBR0osSUFBSyxHQUFHLE1BQU1JLEdBQUlBLEVBQUdDLFdBQVdILEdBQUksQ0FBQ1QsRUFBR2x6RixPQUFPNnpGLEdBQUksTUFBTTkzRixHQUFHbTNGLEVBQUdTLEVBQUksSUFDd0hJLEVBRHBIQyxFQUFHLEdBQzdXLFNBQVNDLEdBQUdsNEYsR0FBRyxPQUY4a0MsU0FBWUEsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUV1K0YsRUFBRyxPQUFPbCtGLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS0UsRUFBRXNHLEdBQUd0RyxFQUFFc0csR0FBR3RHLEVBQUVzRyxHQUFHMUUsRUFBRTBFLEdBRTlwQ200RixDQUFHbjRGLEdBQUUsV0FBVyxJQUFJLElBQUkxRSxFQUFFLEVBQUU1QixFQUFFODhGLEVBQUd2eUYsT0FBT2t6RixJQUFLcnZGLE1BQU0sS0FBS25PLEVBQUU2OEYsRUFBR3Z5RixPQUFPakUsSUFBSThILE1BQU0sS0FBSzFMLEVBQUVvUSxLQUFLa2MsSUFBSWh2QixFQUFFdUMsT0FBT3RDLEVBQUVzQyxRQUFRc0MsRUFBRSxFQUFFLEdBQUdqRCxHQUFHaUQsRUFBRW5DLEVBQUVtQyxJQUFJLENBQUMsSUFBSXkzRixFQUFFdDhGLEVBQUU2RSxJQUFJLEdBQUdqRixFQUFFSyxFQUFFNEUsSUFBSSxHQUFHLEVBQUUsQ0FBcUYsR0FBcEZ5M0YsRUFBRSxpQkFBaUI5d0UsS0FBSzh3RSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSTE4RixFQUFFLGlCQUFpQjRyQixLQUFLNXJCLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFPLEdBQUcwOEYsRUFBRSxHQUFHLzVGLFFBQVEsR0FBRzNDLEVBQUUsR0FBRzJDLE9BQU8sTUFBTVgsRUFBRXE3RixFQUFHLEdBQUdYLEVBQUUsR0FBRy81RixPQUFPLEVBQUVtOEYsU0FBU3BDLEVBQUUsR0FBRyxJQUFJLEdBQUcxOEYsRUFBRSxHQUFHMkMsT0FBTyxFQUFFbThGLFNBQVM5K0YsRUFBRSxHQUFHLE1BQU1xOUYsRUFBRyxHQUFHWCxFQUFFLEdBQUcvNUYsT0FBTyxHQUFHM0MsRUFBRSxHQUFHMkMsU0FBUzA2RixFQUFHWCxFQUFFLEdBQUcxOEYsRUFBRSxJQUFJMDhGLEVBQUVBLEVBQUUsR0FBRzE4RixFQUFFQSxFQUFFLFNBQVUsR0FBR2dDLEdBQUcsT0FBTyxHQUFHQSxLQUFXLElBQUkrOEYsR0FBR3Q0RixFQUFFaWIsU0FDMWVnOUUsRUFBR0ssSUFBSWhCLEVBQUVLLE1BQU8sY0FBY1csR0FBR0MsV0FBV0YsU0FBU2pCLEVBQUcsSUFBSSxRQUFHLEVBQU8sSUFBSW9CLElBQUlsQixHQUFHLEdBQUc3MEUsT0FBT3cxRSxHQUFJUSxHQUFHbkIsSUFBSWEsR0FBRyxLQUFLTyxHQUFHLFdBQVcsSUFBSTE0RixFQUFFb2lELG1CQUFtQnBvRCxPQUFPQyxlQUFlLE9BQU8sRUFBRyxJQUFJZ0csR0FBRSxFQUFHMUUsRUFBRXZCLE9BQU9DLGVBQWUsR0FBRyxVQUFVLENBQUNFLElBQUksV0FBVzhGLEdBQUUsS0FBTyxJQUFJRCxFQUFFb2lELGlCQUFpQixPQUFPbXpDLEVBQUdoNkYsR0FBR3lFLEVBQUVzaUQsb0JBQW9CLE9BQU9pekMsRUFBR2g2RixHQUFJLE1BQU01QixJQUFJLE9BQU9zRyxFQUFwTyxHQUF5TyxTQUFTMDRGLEdBQUUxNEYsRUFBRTFFLEdBQUdNLEtBQUs4UyxLQUFLMU8sRUFBRXBFLEtBQUtvRSxFQUFFcEUsS0FBS2MsT0FBT3BCLEVBQUVNLEtBQUt1N0YsSUFBRyxFQUEwQyxTQUFTd0IsR0FBRTM0RixFQUFFMUUsR0FBNlAsR0FBMVBvOUYsR0FBRWwvRixLQUFLb0MsS0FBS29FLEVBQUVBLEVBQUUwTyxLQUFLLElBQUk5UyxLQUFLZzlGLGNBQWNoOUYsS0FBS29FLEVBQUVwRSxLQUFLYyxPQUFPLEtBQUtkLEtBQUtpOUYsT0FBT2o5RixLQUFLazlGLFFBQVFsOUYsS0FBS205RixRQUFRbjlGLEtBQUtvOUYsUUFBUXA5RixLQUFLcTlGLFFBQVEsRUFBRXI5RixLQUFLaEIsSUFBSSxHQUFHZ0IsS0FBS3M5RixRQUFRdDlGLEtBQUt1OUYsU0FBU3Y5RixLQUFLdzlGLE9BQU94OUYsS0FBS3k5RixTQUFRLEVBQUd6OUYsS0FBSzA5RixVQUFVLEVBQUUxOUYsS0FBSzI5RixZQUFZLEdBQUczOUYsS0FBS2xDLEVBQUUsS0FBUXNHLEVBQUUsQ0FBQyxJQUFJdEcsRUFBRWtDLEtBQUs4UyxLQUFLMU8sRUFBRTBPLEtBQUsvVSxFQUFFcUcsRUFBRXc1RixnQkFBZ0J4NUYsRUFBRXc1RixlQUFldjlGLE9BQU8rRCxFQUFFdzVGLGVBQWUsR0FBRyxLQUFpRCxHQUE1QzU5RixLQUFLYyxPQUFPc0QsRUFBRXRELFFBQVFzRCxFQUFFeTVGLFdBQVc3OUYsS0FBS29FLEVBQUUxRSxFQUFLQSxFQUFFMEUsRUFBRTQ0RixlQUFlLEdBQUdwQixFQUFHLENBQUN4M0YsRUFBRSxDQUFDLElBQUlrM0YsRUFBRzU3RixFQUFFbytGLFVBQVUsSUFBSXQ5RixHQUFFLEVBQUcsTUFBTTRELEVBQUUsTUFBTXpCLElBQUluQyxHQUFFLEVBQUlBLElBQUlkLEVBQUUsV0FBWSxhQUMzN0I1QixFQUFFNEIsRUFBRTBFLEVBQUUyNUYsWUFBWSxZQUFZamdHLElBQUk0QixFQUFFMEUsRUFBRTQ1RixXQUFXaCtGLEtBQUtnOUYsY0FBY3Q5RixFQUFFM0IsR0FBR2lDLEtBQUtxOUYsYUFBUSxJQUFTdC9GLEVBQUVzL0YsUUFBUXQvRixFQUFFcy9GLFFBQVF0L0YsRUFBRWtnRyxNQUFNaitGLEtBQUtvOUYsYUFBUSxJQUFTci9GLEVBQUVxL0YsUUFBUXIvRixFQUFFcS9GLFFBQVFyL0YsRUFBRW1nRyxNQUFNbCtGLEtBQUttOUYsUUFBUXAvRixFQUFFby9GLFNBQVMsRUFBRW45RixLQUFLazlGLFFBQVFuL0YsRUFBRW0vRixTQUFTLElBQUlsOUYsS0FBS3E5RixhQUFRLElBQVNqNUYsRUFBRWk1RixRQUFRajVGLEVBQUVpNUYsUUFBUWo1RixFQUFFNjVGLE1BQU1qK0YsS0FBS285RixhQUFRLElBQVNoNUYsRUFBRWc1RixRQUFRaDVGLEVBQUVnNUYsUUFBUWg1RixFQUFFODVGLE1BQU1sK0YsS0FBS205RixRQUFRLzRGLEVBQUUrNEYsU0FBUyxFQUFFbjlGLEtBQUtrOUYsUUFBUTk0RixFQUFFODRGLFNBQVMsR0FBR2w5RixLQUFLaTlGLE9BQU83NEYsRUFBRTY0RixPQUFPajlGLEtBQUtoQixJQUFJb0YsRUFBRXBGLEtBQUssR0FBR2dCLEtBQUt5OUYsUUFBUXI1RixFQUFFcTVGLFFBQVF6OUYsS0FBS3c5RixPQUFPcDVGLEVBQUVvNUYsT0FBT3g5RixLQUFLdTlGLFNBQVNuNUYsRUFBRW01RixTQUFTdjlGLEtBQUtzOUYsUUFDOWVsNUYsRUFBRWs1RixRQUFRdDlGLEtBQUswOUYsVUFBVXQ1RixFQUFFczVGLFdBQVcsRUFBRTE5RixLQUFLMjlGLFlBQVk5L0YsRUFBRXVHLEVBQUV1NUYsYUFBYXY1RixFQUFFdTVGLFlBQVlRLEdBQUcvNUYsRUFBRXU1RixjQUFjLEdBQUczOUYsS0FBS2xDLEVBQUVzRyxFQUFFQSxFQUFFZzZGLGtCQUFrQnArRixLQUFLTixLQUZ1UW85RixHQUFFejlGLFVBQVVLLEVBQUUsV0FBV00sS0FBS3U3RixJQUFHLEdBRWxTdEIsRUFBRThDLEdBQUVELElBQUcsSUFBSXFCLEdBQUcsQ0FBQ0UsRUFBRSxRQUFRQyxFQUFFLE1BQU1DLEVBQUUsU0FBU3hCLEdBQUUxOUYsVUFBVUssRUFBRSxXQUFXcTlGLEdBQUU3QyxFQUFFeDZGLEVBQUU5QixLQUFLb0MsTUFBTSxJQUFJb0UsRUFBRXBFLEtBQUtsQyxFQUFFLEdBQUdzRyxFQUFFbzZGLGVBQWVwNkYsRUFBRW82RixzQkFBc0IsR0FBR3A2RixFQUFFcTZGLGFBQVksRUFBRzdCLEdBQUcsS0FBT3g0RixFQUFFcTVGLFNBQVMsS0FBS3I1RixFQUFFczZGLFNBQVMsS0FBS3Q2RixFQUFFczZGLFdBQVF0NkYsRUFBRXM2RixTQUFTLEdBQUcsTUFBTWgvRixNQUFNLElBQUlpL0YsR0FBRSx1QkFBdUIsSUFBSS90RixLQUFLcVosU0FBUyxHQUFHMjBFLEdBQUcsRUFBRSxTQUFTQyxHQUFHejZGLEVBQUUxRSxFQUFFNUIsRUFBRUMsRUFBRXlDLEdBQUdSLEtBQUs2Z0QsU0FBU3o4QyxFQUFFcEUsS0FBSzJQLE1BQU0sS0FBSzNQLEtBQUs4K0YsSUFBSXAvRixFQUFFTSxLQUFLOFMsS0FBS2hWLEVBQUVrQyxLQUFLKytGLFVBQVVoaEcsRUFBRWlDLEtBQUs0NUYsR0FBR3A1RixFQUFFUixLQUFLaEIsTUFBTTQvRixHQUFHNStGLEtBQUtnL0YsRUFBRWgvRixLQUFLaS9GLEdBQUUsRUFBSSxTQUFTQyxHQUFHOTZGLEdBQUdBLEVBQUU0NkYsR0FBRSxFQUFHNTZGLEVBQUV5OEMsU0FBUyxLQUFLejhDLEVBQUV1TCxNQUFNLEtBQUt2TCxFQUFFMDZGLElBQUksS0FBSzE2RixFQUFFdzFGLEdBQUcsS0FBTSxTQUFTdUYsR0FBRy82RixHQUFHcEUsS0FBSzgrRixJQUFJMTZGLEVBQUVwRSxLQUFLb0UsRUFBRSxHQUFHcEUsS0FBS04sRUFBRSxFQUF5TSxTQUFTMC9GLEdBQUdoN0YsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUU0QixFQUFFb1QsS0FBSyxHQUFHaFYsS0FBS3NHLEVBQUVBLEVBQUUsQ0FBQyxJQUF1QnpCLEVBQW5CNUUsRUFBRXFHLEVBQUVBLEVBQUV0RyxHQUFHMEMsRUFBRSs1RixFQUFHeDhGLEVBQUUyQixJQUFNaUQsRUFBRSxHQUFHbkMsSUFBSVgsTUFBTVIsVUFBVXNqQixPQUFPL2tCLEtBQUtHLEVBQUV5QyxFQUFFLEdBQUdtQyxJQUFJdThGLEdBQUd4L0YsR0FBRyxHQUFHMEUsRUFBRUEsRUFBRXRHLEdBQUd1QyxnQkFBZ0IrRCxFQUFFQSxFQUFFdEcsR0FBR3NHLEVBQUUxRSxPQUNsaUMsU0FBUzIvRixHQUFHajdGLEVBQUUxRSxFQUFFNUIsRUFBRUMsR0FBRyxJQUFJLElBQUl5QyxFQUFFLEVBQUVBLEVBQUU0RCxFQUFFL0QsU0FBU0csRUFBRSxDQUFDLElBQUltQyxFQUFFeUIsRUFBRTVELEdBQUcsSUFBSW1DLEVBQUVxOEYsR0FBR3I4RixFQUFFaytDLFVBQVVuaEQsR0FBR2lELEVBQUVvOEYsV0FBV2poRyxHQUFHNkUsRUFBRWkzRixJQUFJNzdGLEVBQUUsT0FBT3lDLEVBQUUsT0FBUSxFQURpa0IyK0YsR0FBRzkvRixVQUFVNDNCLElBQUksU0FBUzd5QixFQUFFMUUsRUFBRTVCLEVBQUVDLEVBQUV5QyxHQUFHLElBQUltQyxFQUFFeUIsRUFBRW9ILFlBQVdwSCxFQUFFcEUsS0FBS29FLEVBQUV6QixNQUFPeUIsRUFBRXBFLEtBQUtvRSxFQUFFekIsR0FBRyxHQUFHM0MsS0FBS04sS0FBSyxJQUFJMDZGLEVBQUVpRixHQUFHajdGLEVBQUUxRSxFQUFFM0IsRUFBRXlDLEdBQTRFLE9BQXhFLEVBQUU0NUYsR0FBRzE2RixFQUFFMEUsRUFBRWcyRixHQUFHdDhGLElBQUk0QixFQUFFdS9GLEdBQUUsTUFBTXYvRixFQUFFLElBQUltL0YsR0FBR24vRixFQUFFTSxLQUFLOCtGLElBQUluOEYsSUFBSTVFLEVBQUV5QyxJQUFLeStGLEVBQUVuaEcsRUFBRXNHLEVBQUVYLEtBQUsvRCxJQUFXQSxHQUNsd0IsSUFBSTQvRixHQUFHLGVBQWUsSUFBSTF1RixLQUFLcVosU0FBUyxHQUFHczFFLEdBQUcsR0FBRyxTQUFTQyxHQUFHcDdGLEVBQUUxRSxFQUFFNUIsRUFBRUMsRUFBRXlDLEdBQUcsR0FBR3pDLEdBQUdBLEVBQUU0NkYsS0FBSyxPQUNtYixTQUFTdGhFLEVBQUdqekIsRUFBRTFFLEVBQUU1QixFQUFFQyxFQUFFeUMsR0FBRyxHQUFHa0UsRUFBRWhGLEdBQUcsQ0FBQyxJQUFJLElBQUlpRCxFQUFFLEVBQUVBLEVBQUVqRCxFQUFFVyxPQUFPc0MsSUFBSTAwQixFQUFHanpCLEVBQUUxRSxFQUFFaUQsR0FBRzdFLEVBQUVDLEVBQUV5QyxHQUFHLE9BQU8sS0FBYSxPQUFSMUMsRUFBRW1mLEdBQUduZixHQUFVc0csR0FBR0EsRUFBRXU2RixJQUFHdjZGLEVBQUVtNEYsR0FBRzc4RixFQUFFNUIsRUFBRVMsRUFBRVIsS0FBS0EsRUFBRWdoRyxVQUFVaGhHLEVBQUV5QyxHQUFHaS9GLEdBQUdyN0YsRUFBRTFFLEVBQUU1QixHQUFFLEVBQUdDLEVBQUV5QyxHQUQxa0I2MkIsQ0FBR2p6QixFQUFFMUUsRUFBRTVCLEVBQUVDLEVBQUV5QyxHQUFHLEdBQUdrRSxFQUFFaEYsR0FBRyxDQUFDLElBQUksSUFBSWlELEVBQUUsRUFBRUEsRUFBRWpELEVBQUVXLE9BQU9zQyxJQUFJNjhGLEdBQUdwN0YsRUFBRTFFLEVBQUVpRCxHQUFHN0UsRUFBRUMsRUFBRXlDLEdBQUcsT0FBTyxLQUFhLE9BQVIxQyxFQUFFbWYsR0FBR25mLEdBQVVzRyxHQUFHQSxFQUFFdTZGLElBQUd2NkYsRUFBRWszRixHQUFHNTdGLEVBQUU1QixFQUFFUyxFQUFFUixLQUFLQSxFQUFFZ2hHLFVBQVVoaEcsRUFBRXlDLEdBQUdpL0YsR0FBR3I3RixFQUFFMUUsRUFBRTVCLEdBQUUsRUFBR0MsRUFBRXlDLEdBQ2hYLFNBQVNpL0YsR0FBR3I3RixFQUFFMUUsRUFBRTVCLEVBQUVDLEVBQUV5QyxFQUFFbUMsR0FBRyxJQUFJakQsRUFBRSxNQUFNdUcsTUFBTSxzQkFBc0IsSUFBSW0wRixFQUFFNzdGLEVBQUVpQyxLQUFLQSxFQUFFdStGLFVBQVV2K0YsRUFBRSxHQUFHNDVGLElBQUl1QyxHQUFHLE9BQU8sS0FBSyxJQUFJai9GLEVBQUVnaUcsR0FBR3Q3RixHQUE2QyxHQUExQzFHLElBQUkwRyxFQUFFazdGLElBQUk1aEcsRUFBRSxJQUFJeWhHLEdBQUcvNkYsS0FBSXRHLEVBQUVKLEVBQUV1NUIsSUFBSXYzQixFQUFFNUIsRUFBRUMsRUFBRXE4RixFQUFFejNGLElBQVFnTixNQUFNLE9BQU83UixFQUF3QyxHQUF0Q0MsRUFBOFQsV0FBYyxJQUFJcUcsRUFBRXU3RixHQUFHamdHLEVBQUVpOUYsR0FBRyxTQUFTNytGLEdBQUcsT0FBT3NHLEVBQUV4RyxLQUFLOEIsRUFBRW8vRixJQUFJcC9GLEVBQUVtaEQsU0FBUy9pRCxJQUFJLFNBQVNBLEdBQWdDLEtBQTdCQSxFQUFFc0csRUFBRXhHLEtBQUs4QixFQUFFby9GLElBQUlwL0YsRUFBRW1oRCxTQUFTL2lELElBQVMsT0FBT0EsR0FBRyxPQUFPNEIsRUFBdmNrZ0csR0FBSzloRyxFQUFFNlIsTUFBTTVSLEVBQUVBLEVBQUUrZ0csSUFBSTE2RixFQUFFckcsRUFBRThpRCxTQUFTL2lELEVBQUtzRyxFQUFFbWlELGlCQUFpQnMyQyxLQUFLcjhGLEVBQUU0NUYsUUFBRyxJQUFTNTVGLElBQUlBLEdBQUUsR0FBSTRELEVBQUVtaUQsaUJBQWlCN21ELEVBQUU4TCxXQUFXek4sRUFBRXlDLFFBQVEsR0FBRzRELEVBQUV5N0YsWUFBWXo3RixFQUFFeTdGLFlBQVlDLEdBQUdwZ0csRUFBRThMLFlBQVl6TixPQUFRLEtBQUdxRyxFQUFFczBGLGNBQWF0MEYsRUFBRXkwRixlQUFxQyxNQUFNNXlGLE1BQU0scURBQWxDN0IsRUFBRXMwRixZQUFZMzZGLEdBQXlFLE9BQU9ELEVBRXhmLFNBQVNpaUcsR0FBRzM3RixHQUFHLElBQUlxMUYsRUFBR3IxRixJQUFJQSxJQUFJQSxFQUFFNDZGLEVBQUUsQ0FBQyxJQUFJdC9GLEVBQUUwRSxFQUFFMDZGLElBQUksR0FBR3AvRixHQUFHQSxFQUFFaS9GLElBQUdTLEdBQUcxL0YsRUFBRTVCLEVBQUVzRyxPQUFPLENBQUMsSUFBSXRHLEVBQUVzRyxFQUFFME8sS0FBSy9VLEVBQUVxRyxFQUFFdUwsTUFBTWpRLEVBQUUrbUQsb0JBQW9CL21ELEVBQUUrbUQsb0JBQW9CM29ELEVBQUVDLEVBQUVxRyxFQUFFMjZGLFNBQVNyL0YsRUFBRXNnRyxZQUFZdGdHLEVBQUVzZ0csWUFBWUYsR0FBR2hpRyxHQUFHQyxHQUFHMkIsRUFBRWc1RixhQUFhaDVGLEVBQUVtNUYsZ0JBQWdCbjVGLEVBQUVtNUYsZUFBZTk2RixJQUFJRCxFQUFFNGhHLEdBQUdoZ0csS0FBSzAvRixHQUFHdGhHLEVBQUVzRyxHQUFHLEdBQUd0RyxFQUFFNEIsSUFBSTVCLEVBQUVnaEcsSUFBSSxLQUFLcC9GLEVBQUU0L0YsSUFBSSxPQUFPSixHQUFHOTZGLEtBQU0sU0FBUzA3RixHQUFHMTdGLEdBQUcsT0FBT0EsS0FBS203RixHQUFHQSxHQUFHbjdGLEdBQUdtN0YsR0FBR243RixHQUFHLEtBQUtBLEVBQUUsU0FBUzY3RixHQUFHNzdGLEVBQUUxRSxHQUFHLElBQUk1QixFQUFFc0csRUFBRXk4QyxTQUFTOWlELEVBQUVxRyxFQUFFdzFGLElBQUl4MUYsRUFBRTA2RixJQUFlLE9BQVgxNkYsRUFBRTY2RixHQUFHYyxHQUFHMzdGLEdBQVV0RyxFQUFFRixLQUFLRyxFQUFFMkIsR0FDOWEsU0FBU2lnRyxHQUFHdjdGLEVBQUUxRSxHQUFHLFFBQU8wRSxFQUFFNDZGLElBQUtyQyxHQUFHc0QsR0FBRzc3RixFQUFFLElBQUkyNEYsR0FBRXI5RixFQUFFTSxPQUEyQ2lnRyxHQUFHNzdGLEVBQXRDMUUsRUFBRSxJQUFJcTlGLEdBQUVyOUYsR0FBR1IsRUFBRSxnQkFBZ0JjLFFBQWUsU0FBUzAvRixHQUFHdDdGLEdBQVcsT0FBUkEsRUFBRUEsRUFBRWs3RixlQUF3QkgsR0FBRy82RixFQUFFLEtBQUssSUFBSTg3RixHQUFHLHdCQUF3QixJQUFJdHZGLEtBQUtxWixXQUFXLEdBQUcsU0FBU2hOLEdBQUc3WSxHQUFHLE1BQUcsWUFBWTdFLEVBQUU2RSxHQUFVQSxHQUFFQSxFQUFFODdGLE1BQU05N0YsRUFBRTg3RixJQUFJLFNBQVN4Z0csR0FBRyxPQUFPMEUsRUFBRSs3RixZQUFZemdHLEtBQVkwRSxFQUFFODdGLEtBQUksU0FBUzVGLEtBQUkxM0YsRUFBRWhGLEtBQUtvQyxNQUFNQSxLQUFLbEMsRUFBRSxJQUFJcWhHLEdBQUduL0YsTUFBTUEsS0FBS29nRyxFQUFFcGdHLEtBQUtBLEtBQUt5N0YsRUFBRSxLQUc1WCxTQUFTNEUsR0FBR2o4RixFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQXNCLEtBQW5CMkIsRUFBRTBFLEVBQUV0RyxFQUFFc0csRUFBRWlFLE9BQU8zSSxLQUFVLE9BQU8sRUFBR0EsRUFBRUEsRUFBRXNFLFNBQVMsSUFBSSxJQUFJeEQsR0FBRSxFQUFHbUMsRUFBRSxFQUFFQSxFQUFFakQsRUFBRVcsU0FBU3NDLEVBQUUsQ0FBQyxJQUFJeTNGLEVBQUUxNkYsRUFBRWlELEdBQUcsR0FBR3kzRixJQUFJQSxFQUFFNEUsR0FBRzVFLEVBQUUyRSxTQUFTamhHLEVBQUUsQ0FBQyxJQUFJSixFQUFFMDhGLEVBQUV2NUMsU0FBU3kvQyxFQUFFbEcsRUFBRVIsSUFBSVEsRUFBRTBFLElBQUkxRSxFQUFFNkUsR0FBR0csR0FBR2g3RixFQUFFdEcsRUFBRXM4RixHQUFHNTVGLEdBQUUsSUFBSzlDLEVBQUVFLEtBQUswaUcsRUFBRXZpRyxJQUFJeUMsR0FBSSxPQUFPQSxHQUFHLEdBQUd6QyxFQUFFdzlGLEdBSGtLdEIsRUFBRUssR0FBRTEzRixHQUFHMDNGLEdBQUVqN0YsVUFBVXMvRixLQUFHLEdBQUc5N0YsRUFBRXkzRixHQUFFajdGLFdBQVlrbkQsaUJBQWlCLFNBQVNuaUQsRUFBRTFFLEVBQUU1QixFQUFFQyxHQUFHeWhHLEdBQUd4L0YsS0FBS29FLEVBQUUxRSxFQUFFNUIsRUFBRUMsSUFBSzhFLEVBQUU0akQsb0JBQW9CLFNBQVNyaUQsRUFBRTFFLEVBQUU1QixFQUFFQyxJQUZ0Z0IsU0FBU3dpRyxFQUFHbjhGLEVBQUUxRSxFQUFFNUIsRUFBRUMsRUFBRXlDLEdBQUcsR0FBR2tFLEVBQUVoRixHQUFHLElBQUksSUFBSWlELEVBQUUsRUFBRUEsRUFBRWpELEVBQUVXLE9BQU9zQyxJQUFJNDlGLEVBQUduOEYsRUFBRTFFLEVBQUVpRCxHQUFHN0UsRUFBRUMsRUFBRXlDLFFBQVF6QyxFQUFFUSxFQUFFUixLQUFLQSxFQUFFZ2hHLFVBQVVoaEcsRUFBRUQsRUFBRW1mLEdBQUduZixHQUFHc0csR0FBR0EsRUFBRXU2RixLQUFLdjZGLEVBQUVBLEVBQUV0RyxHQUFFNEIsRUFBRTJJLE9BQU8zSSxHQUFHOEwsY0FBZ0JwSCxFQUFFQSxLQUE0QixHQUFmdEcsRUFBRXVoRyxHQUFYMThGLEVBQUV5QixFQUFFQSxFQUFFMUUsR0FBVTVCLEVBQUVDLEVBQUV5QyxNQUFVMCtGLEdBQUd2OEYsRUFBRTdFLElBQUkrQixNQUFNUixVQUFVc2pCLE9BQU8va0IsS0FBSytFLEVBQUU3RSxFQUFFLEdBQUcsR0FBRzZFLEVBQUV0QyxnQkFBZ0IrRCxFQUFFQSxFQUFFMUUsR0FBRzBFLEVBQUUxRSxRQUFRMEUsSUFBSUEsRUFBRXM3RixHQUFHdDdGLE1BQU0xRSxFQUFFMEUsRUFBRUEsRUFBRTFFLEVBQUU4TCxZQUFZcEgsR0FBRyxFQUFFMUUsSUFBSTBFLEVBQUVpN0YsR0FBRzMvRixFQUFFNUIsRUFBRUMsRUFBRXlDLEtBQUsxQyxHQUFHLEVBQUVzRyxFQUFFMUUsRUFBRTBFLEdBQUcsT0FBTzI3RixHQUFHamlHLElBRXNLeWlHLENBQUd2Z0csS0FBS29FLEVBQUUxRSxFQUFFNUIsRUFBRUMsSUFDdmhCOEUsRUFBRTI5RixjQUFjLFNBQVNwOEYsR0FBRyxJQUFJMUUsRUFBRTVCLEVBQUVrQyxLQUFLeTdGLEVBQUUsR0FBRzM5RixFQUFFLElBQUk0QixFQUFFLEdBQUc1QixFQUFFQSxFQUFFQSxFQUFFMjlGLEVBQUUvN0YsRUFBRStELEtBQUszRixHQUFHQSxFQUFFa0MsS0FBS29nRyxFQUFFLElBQUlyaUcsRUFBRXFHLEVBQUUwTyxNQUFNMU8sRUFBRSxHQUFHdkcsRUFBRXVHLEdBQUdBLEVBQUUsSUFBSTA0RixHQUFFMTRGLEVBQUV0RyxRQUFRLEdBQUdzRyxhQUFhMDRGLEdBQUUxNEYsRUFBRXRELE9BQU9zRCxFQUFFdEQsUUFBUWhELE1BQU0sQ0FBQyxJQUFJMEMsRUFBRTRELEVBQWVpM0YsRUFBYmozRixFQUFFLElBQUkwNEYsR0FBRS8rRixFQUFFRCxHQUFRMEMsR0FBUyxHQUFMQSxHQUFFLEVBQU1kLEVBQUUsSUFBSSxJQUFJaUQsRUFBRWpELEVBQUVXLE9BQU8sRUFBRSxHQUFHc0MsRUFBRUEsSUFBSSxDQUFDLElBQUl5M0YsRUFBRWgyRixFQUFFQSxFQUFFMUUsRUFBRWlELEdBQUduQyxFQUFFNi9GLEdBQUdqRyxFQUFFcjhGLEdBQUUsRUFBR3FHLElBQUk1RCxFQUErQyxHQUFwQ0EsRUFBRTYvRixHQUFWakcsRUFBRWgyRixFQUFFQSxFQUFFdEcsRUFBU0MsR0FBRSxFQUFHcUcsSUFBSTVELEVBQUVBLEVBQUU2L0YsR0FBR2pHLEVBQUVyOEYsR0FBRSxFQUFHcUcsSUFBSTVELEVBQUtkLEVBQUUsSUFBSWlELEVBQUUsRUFBRUEsRUFBRWpELEVBQUVXLE9BQU9zQyxJQUFlbkMsRUFBRTYvRixHQUFiakcsRUFBRWgyRixFQUFFQSxFQUFFMUUsRUFBRWlELEdBQVU1RSxHQUFFLEVBQUdxRyxJQUFJNUQsRUFBRSxPQUFPQSxHQUMvWHFDLEVBQUV5M0YsRUFBRSxXQUE0QixHQUFqQkEsR0FBRUosRUFBRUksRUFBRTE4RixLQUFLb0MsTUFBU0EsS0FBS2xDLEVBQUUsQ0FBQyxJQUFhQSxFQUFUc0csRUFBRXBFLEtBQUtsQyxFQUFJLElBQUlBLEtBQUtzRyxFQUFFQSxFQUFFLENBQUMsSUFBSSxJQUFJckcsRUFBRXFHLEVBQUVBLEVBQUV0RyxHQUFHMEMsRUFBRSxFQUFFQSxFQUFFekMsRUFBRXNDLE9BQU9HLElBQUkwK0YsR0FBR25oRyxFQUFFeUMsV0FBVzRELEVBQUVBLEVBQUV0RyxHQUFHc0csRUFBRTFFLEtBQU1NLEtBQUt5N0YsRUFBRSxNQUFPNTRGLEVBQUV5NEYsR0FBRyxTQUFTbDNGLEVBQUUxRSxFQUFFNUIsRUFBRUMsR0FBRyxPQUFPaUMsS0FBS2xDLEVBQUVtNUIsSUFBSTV1QixPQUFPakUsR0FBRzFFLEdBQUUsRUFBRzVCLEVBQUVDLElBQUk4RSxFQUFFMDVGLEdBQUcsU0FBU240RixFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUcsT0FBT2lDLEtBQUtsQyxFQUFFbTVCLElBQUk1dUIsT0FBT2pFLEdBQUcxRSxHQUFFLEVBQUc1QixFQUFFQyxJQUM5QyxJQUFJMGlHLEdBQUd0OEYsRUFBRXVILEtBQUtzRyxVQUFVLFNBQVMwdUYsR0FBR3Q4RixFQUFFMUUsR0FBR00sS0FBS2xDLEVBQUVzRyxFQUFFcEUsS0FBSzJDLEVBQUVqRCxFQUFFTSxLQUFLTixFQUFFLEVBQUVNLEtBQUtvRSxFQUFFLEtBQTBILFNBQVN1OEYsS0FBSzNnRyxLQUFLTixFQUFFTSxLQUFLb0UsRUFBRSxLQUFoSnM4RixHQUFHcmhHLFVBQVVmLElBQUksV0FBVyxHQUFHLEVBQUUwQixLQUFLTixFQUFFLENBQUNNLEtBQUtOLElBQUksSUFBSTBFLEVBQUVwRSxLQUFLb0UsRUFBRXBFLEtBQUtvRSxFQUFFQSxFQUFFaEMsS0FBS2dDLEVBQUVoQyxLQUFLLFVBQVdnQyxFQUFFcEUsS0FBS2xDLElBQUksT0FBT3NHLEdBQXFDLElBQTRoQisxRixHQUF4aEJ5RyxHQUFHLElBQUlGLElBQUcsV0FBVyxPQUFPLElBQUlHLE1BQUksU0FBU3o4RixHQUFHQSxFQUFFdUksV0FBNkcsU0FBU20wRixLQUFLLElBQUkxOEYsRUFBRTI4RixHQUFHcmhHLEVBQUUsS0FBMkQsT0FBdEQwRSxFQUFFQSxJQUFJMUUsRUFBRTBFLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVoQyxLQUFLZ0MsRUFBRUEsSUFBSUEsRUFBRTFFLEVBQUUsTUFBTUEsRUFBRTBDLEtBQUssTUFBYTFDLEVBQUUsU0FBU21oRyxLQUFLN2dHLEtBQUtvQyxLQUFLcEMsS0FBS04sRUFBRU0sS0FBS29FLEVBQUUsS0FBcUksU0FBUzQ4RixHQUFHNThGLEdBQUdELEVBQUVvc0IsWUFBVyxXQUFXLE1BQU1uc0IsSUFBSSxHQUFJLFNBQVM2OEYsR0FBRzc4RixFQUFFMUUsR0FBR3k2RixJQUE4QyxXQUFjLElBQUkvMUYsRUFBRUQsRUFBRXBDLFFBQVFDLGFBQVEsR0FBUW00RixHQUFHLFdBQVcvMUYsRUFBRTVCLEtBQUswK0YsS0FBN0dDLEdBQUtDLEtBQUtqSCxLQUFLaUgsSUFBRyxHQUFJTCxHQUFHOXBFLElBQUk3eUIsRUFBRTFFLEdBQW5kaWhHLEdBQUd0aEcsVUFBVTQzQixJQUFJLFNBQVM3eUIsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUU4aUcsR0FBR3RpRyxNQUFNUixFQUFFb1csSUFBSTlQLEVBQUUxRSxHQUFHTSxLQUFLTixFQUFFTSxLQUFLTixFQUFFMEMsS0FBS3RFLEVBQUVrQyxLQUFLb0UsRUFBRXRHLEVBQUVrQyxLQUFLTixFQUFFNUIsR0FBNkkraUcsR0FBR3hoRyxVQUFVNlUsSUFBSSxTQUFTOVAsRUFBRTFFLEdBQUdNLEtBQUtvRSxFQUFFQSxFQUFFcEUsS0FBS04sRUFBRUEsRUFBRU0sS0FBS29DLEtBQUssTUFBT3krRixHQUFHeGhHLFVBQVVzTixNQUFNLFdBQVczTSxLQUFLb0MsS0FBS3BDLEtBQUtOLEVBQUVNLEtBQUtvRSxFQUFFLE1BQXFNLElBQUlnOUYsSUFBRyxFQUFHTCxHQUFHLElBQUlKLEdBQUcsU0FBU08sS0FBSyxJQUFJLElBQUk5OEYsRUFBRUEsRUFBRTA4RixNQUFNLENBQUMsSUFBSTE4RixFQUFFQSxFQUFFeEcsS0FBS3dHLEVBQUUxRSxHQUFJLE1BQU01QixHQUFHa2pHLEdBQUdsakcsR0FBSSxJQUFJNEIsRUFBRWtoRyxHQUFHbGhHLEVBQUVpRCxFQUFFeUIsR0FBRyxJQUFJMUUsRUFBRUEsSUFBSUEsRUFBRUEsSUFBSTBFLEVBQUVoQyxLQUFLMUMsRUFBRTBFLEVBQUUxRSxFQUFFMEUsRUFBRUEsR0FBSWc5RixJQUFHLEVBQUksU0FBU0MsR0FBR2o5RixFQUFFMUUsR0FBRzQ2RixHQUFFMThGLEtBQUtvQyxNQUFNQSxLQUFLTixFQUFFMEUsR0FBRyxFQUFFcEUsS0FBS29FLEVBQUUxRSxHQUFHeUUsRUFBRW5FLEtBQUsyQyxFQUFFNkYsRUFBRXhJLEtBQUswL0YsR0FBRzEvRixNQUFNQSxLQUFLNkMsRUFBRW0zRixJQUFxVyxTQUFTc0gsR0FBR2w5RixHQUFHQSxFQUFFczFGLElBQUcsRUFBR3QxRixFQUFFbTlGLElBQUluOUYsRUFBRUEsRUFBRXdzQixhQUFheHNCLEVBQUVtOUYsR0FBR245RixFQUFFbTlGLEVBQUUsTUFDM25ELFNBQVNDLEdBQUdwOUYsRUFBRTFFLEVBQUU1QixHQUFHLEdBQUcsWUFBWXlCLEVBQUU2RSxHQUFHdEcsSUFBSXNHLEVBQUVvRSxFQUFFcEUsRUFBRXRHLFFBQVMsS0FBR3NHLEdBQUcsbUJBQW1CQSxFQUFFKzdGLFlBQXNDLE1BQU1sNkYsTUFBTSw2QkFBdEM3QixFQUFFb0UsRUFBRXBFLEVBQUUrN0YsWUFBWS83RixHQUFpRCxPQUFPLFdBQVd3aUIsT0FBT2xuQixJQUFJLEVBQUV5RSxFQUFFb3NCLFdBQVduc0IsRUFBRTFFLEdBQUcsR0FBRyxTQUFTK2hHLEdBQUdyOUYsRUFBRTFFLEVBQUU1QixHQUFHOEUsRUFBRWhGLEtBQUtvQyxNQUFNQSxLQUFLMkMsRUFBRSxNQUFNN0UsRUFBRTBLLEVBQUVwRSxFQUFFdEcsR0FBR3NHLEVBQUVwRSxLQUFLbEMsRUFBRTRCLEVBQUVNLEtBQUtOLEVBQUU4SSxFQUFFeEksS0FBS3UvRixHQUFHdi9GLE1BQU1BLEtBQUtvRSxFQUFFLEdBQTZRLFNBQVNzOUYsR0FBR3Q5RixHQUFHQSxFQUFFdTlGLEVBQUVILEdBQUdwOUYsRUFBRTFFLEVBQUUwRSxFQUFFdEcsR0FBR3NHLEVBQUV6QixFQUFFckMsTUFBTSxLQUFLOEQsRUFBRUEsR0FBSSxTQUFTdzlGLEdBQUV4OUYsR0FBR3hCLEVBQUVoRixLQUFLb0MsTUFBTUEsS0FBS04sRUFBRTBFLEVBQUVwRSxLQUFLb0UsRUFBRSxHQURpa0I2MUYsRUFBRW9ILEdBQUcvRyxLQUFHejNGLEVBQUV3K0YsR0FBR2hpRyxXQUFZcTZGLElBQUcsRUFBRzcyRixFQUFFMCtGLEVBQUUsS0FBSzErRixFQUFFNjhGLEdBQUcsV0FBVyxHQUFHMS9GLEtBQUswNUYsR0FBRyxDQUFDLElBQUl0MUYsRUFBRTQxRixJQUFJaDZGLEtBQUs2QyxFQUFFLEVBQUV1QixHQUFHQSxFQUFFLEdBQUdwRSxLQUFLTixFQUFFTSxLQUFLdWhHLEVBQUV2aEcsS0FBS29FLEVBQUVtc0IsV0FBV3Z3QixLQUFLMkMsRUFBRTNDLEtBQUtOLEVBQUUwRSxJQUFJcEUsS0FBS3VoRyxJQUFJdmhHLEtBQUtvRSxFQUFFd3NCLGFBQWE1d0IsS0FBS3VoRyxHQUFHdmhHLEtBQUt1aEcsRUFBRSxNQUFNdmhHLEtBQUt3Z0csY0FBYyxRQUFReGdHLEtBQUswNUYsS0FBSzRILEdBQUd0aEcsTUFBTUEsS0FBS3F3QixZQUFheHRCLEVBQUV3dEIsTUFBTSxXQUFXcndCLEtBQUswNUYsSUFBRyxFQUFHMTVGLEtBQUt1aEcsSUFBSXZoRyxLQUFLdWhHLEVBQUV2aEcsS0FBS29FLEVBQUVtc0IsV0FBV3Z3QixLQUFLMkMsRUFBRTNDLEtBQUtOLEdBQUdNLEtBQUs2QyxFQUFFbTNGLE1BQ3ZuRG4zRixFQUFFeTNGLEVBQUUsV0FBVytHLEdBQUduSCxFQUFFSSxFQUFFMThGLEtBQUtvQyxNQUFNc2hHLEdBQUd0aEcsYUFBYUEsS0FBS29FLEdBQStUNjFGLEVBQUV3SCxHQUFHNytGLElBQUdDLEVBQUU0K0YsR0FBR3BpRyxXQUFZdzZGLElBQUcsRUFBR2gzRixFQUFFOCtGLEVBQUUsS0FBSzkrRixFQUFFKzdGLEdBQUcsU0FBU3g2RixHQUFHcEUsS0FBS29FLEVBQUVoRSxVQUFVSixLQUFLMmhHLEVBQUUzaEcsS0FBSzY1RixJQUFHLEVBQUc2SCxHQUFHMWhHLE9BQVE2QyxFQUFFeTNGLEVBQUUsV0FBV21ILEdBQUd2SCxFQUFFSSxFQUFFMThGLEtBQUtvQyxNQUFNQSxLQUFLMmhHLElBQUl4OUYsRUFBRXlzQixhQUFhNXdCLEtBQUsyaEcsR0FBRzNoRyxLQUFLMmhHLEVBQUUsS0FBSzNoRyxLQUFLNjVGLElBQUcsRUFBRzc1RixLQUFLb0UsRUFBRSxLQUFNdkIsRUFBRTA4RixHQUFHLFdBQVd2L0YsS0FBSzJoRyxFQUFFLEtBQUszaEcsS0FBSzY1RixLQUFLNzVGLEtBQUs2NUYsSUFBRyxFQUFHNkgsR0FBRzFoRyxRQUE0R2k2RixFQUFFMkgsR0FBRWgvRixHQUFHLElBQUlpL0YsR0FBRyxHQUFHLFNBQVNDLEdBQUcxOUYsRUFBRTFFLEVBQUU1QixFQUFFQyxHQUFHMkcsRUFBRTVHLEtBQUtBLElBQUkrakcsR0FBRyxHQUFHL2pHLEVBQUUwTixZQUFZMU4sRUFBRStqRyxJQUFJLElBQUksSUFBSXJoRyxFQUFFLEVBQUVBLEVBQUUxQyxFQUFFdUMsT0FBT0csSUFBSSxDQUFDLElBQUltQyxFQUFFNjhGLEdBQUc5L0YsRUFBRTVCLEVBQUUwQyxHQUFHekMsR0FBR3FHLEVBQUUrN0YsYUFBWSxFQUFHLzdGLEVBQUUxRSxHQUFHMEUsR0FBRyxJQUFJekIsRUFBRSxNQUFNeUIsRUFBRUEsRUFBRXpCLEVBQUUzRCxLQUFLMkQsR0FBSSxTQUFTby9GLEdBQUczOUYsR0FBRzgyRixFQUFHOTJGLEVBQUVBLEdBQUUsU0FBUzFFLEVBQUU1QixHQUFHa0MsS0FBS29FLEVBQUU5RSxlQUFleEIsSUFBSWlpRyxHQUFHcmdHLEtBQUswRSxHQUFHQSxFQUFFQSxFQUFFLEdBQXNKLFNBQVM0OUYsTUFBM0pKLEdBQUV2aUcsVUFBVWk3RixFQUFFLFdBQVdzSCxHQUFFMUgsRUFBRUksRUFBRTE4RixLQUFLb0MsTUFBTStoRyxHQUFHL2hHLE9BQVE0aEcsR0FBRXZpRyxVQUFVOGdHLFlBQVksV0FBVyxNQUFNbDZGLE1BQU0sNkNBQTZELElBQUlnOEYsR0FBRSxJQUFJM0gsR0FBRSxTQUFTNEgsR0FBRzk5RixHQUFHMDRGLEdBQUVsL0YsS0FBS29DLEtBQUsscUJBQXFCb0UsR0FBWSxTQUFTZzhGLEdBQUVoOEYsR0FBRzY5RixHQUFFekIsY0FBYyxJQUFJMEIsR0FBR0QsR0FBRTc5RixJQUFLLFNBQVMrOUYsR0FBRy85RixHQUFHMDRGLEdBQUVsL0YsS0FBS29DLEtBQUssWUFBWW9FLEdBQVksU0FBU2crRixHQUFFaCtGLEdBQUc2OUYsR0FBRXpCLGNBQWMsSUFBSTJCLEdBQUdGLEdBQUU3OUYsSUFBSyxTQUFTaStGLEdBQUdqK0YsR0FBRzA0RixHQUFFbC9GLEtBQUtvQyxLQUFLLGNBQWNvRSxHQUFZLFNBQVNrK0YsR0FBR2wrRixFQUFFMUUsR0FBRyxHQUFHLFlBQVlILEVBQUU2RSxHQUFHLE1BQU02QixNQUFNLDhDQUE4QyxPQUFPOUIsRUFBRW9zQixZQUFXLFdBQVduc0IsTUFBTTFFLEdBQTVVdTZGLEVBQUVpSSxHQUFHcEYsSUFBMEY3QyxFQUFFa0ksR0FBR3JGLElBQTRGN0MsRUFBRW9JLEdBQUd2RixJQUEwSSxJQUFJeUYsR0FBRyxDQUFDaE8sU0FBUyxFQUFFcUwsR0FBRyxFQUFFUyxHQUFHLEVBQUVILEdBQUcsRUFBRUssR0FBRyxFQUFFTixHQUFHLEVBQUVRLEdBQUcsRUFBRXZFLEdBQUcsRUFBRXhILFFBQVEsRUFBRW1NLEdBQUcsR0FBTzJCLEdBQUcsQ0FBQzdDLEdBQUcsV0FBV3FCLEdBQUcsVUFBVTFFLEdBQUcsUUFBUUosR0FBRyxRQUFRNEUsR0FBRyxRQUFRQyxHQUFHLG1CQUFtQnJNLFFBQVEsVUFBVWdNLEdBQUcsa0JBQWtCRSxHQUFHLFdBQVdiLEdBQUcsbUJBQW1Ca0IsR0FBRyxrQkFBa0IsU0FBU3dCLE1BQTBCLFNBQVNDLEdBQUd0K0YsR0FBRyxJQUFJMUUsRUFBc0IsT0FBbkJBLEVBQUUwRSxFQUFFQSxLQUFLMUUsRUFBRTBFLEVBQUVBLEVBQUUsSUFBVzFFLEVBQUUsU0FBU2lqRyxNQUEvRUYsR0FBR3BqRyxVQUFVK0UsRUFBRSxLQUFzRSxJQUEwSHcrRixHQUF0SHJCLEdBQUUsQ0FBQzlLLEtBQUssSUFBSXFKLEdBQUcsSUFBSXhELEdBQUcsSUFBSXFFLEdBQUcsS0FBSyxTQUFTa0MsS0FBSy9GLEdBQUVsL0YsS0FBS29DLEtBQUssS0FBYyxTQUFTOGlHLEtBQUtoRyxHQUFFbC9GLEtBQUtvQyxLQUFLLEtBQXFCLFNBQVMraUcsTUFBeUIsU0FBU0MsR0FBRTUrRixFQUFFMUUsRUFBRTVCLEdBQUdrQyxLQUFLNkMsRUFBRXVCLEVBQUVwRSxLQUFLK00sRUFBRXJOLEVBQUVNLEtBQUtpakcsRUFBRW5sRyxHQUFHLEVBQUVrQyxLQUFLaWlHLEVBQUUsSUFBSUwsR0FBRTVoRyxNQUFNQSxLQUFLa2pHLEVBQUVDLEdBQUcvK0YsRUFBRXUzRixFQUFHLFNBQUksRUFBTzM3RixLQUFLNkIsRUFBRSxJQUFJdy9GLEdBQUdqOUYsR0FBR3BFLEtBQUtvNkYsRUFBRSxLQUFLcDZGLEtBQUtOLEdBQUUsRUFBR00sS0FBS3RDLEVBQUVzQyxLQUFLKzhGLEVBQUUvOEYsS0FBSzJDLEVBQUUzQyxLQUFLMitGLEVBQUUzK0YsS0FBS3FELEVBQUVyRCxLQUFLb2pHLEVBQUVwakcsS0FBS3ZDLEVBQUUsS0FBS3VDLEtBQUtxRSxFQUFFLEdBQUdyRSxLQUFLb0UsRUFBRSxLQUFLcEUsS0FBSzI2RixFQUFFLEVBQUUzNkYsS0FBS2xDLEVBQUVrQyxLQUFLZzZGLEVBQUUsS0FBS2g2RixLQUFLOUIsR0FBRyxFQUFFOEIsS0FBS25DLEdBQUUsRUFBR21DLEtBQUtvZ0csRUFBRSxFQUFFcGdHLEtBQUt5N0YsRUFBRSxLQUFLejdGLEtBQUtSLEVBQUVRLEtBQUtxakcsRUFBRXJqRyxLQUFLNGhHLEdBQUUsRUFBblkzSCxFQUFFNEksR0FBRy9GLElBQW1DN0MsRUFBRTZJLEdBQUdoRyxJQUF5QjdDLEVBQUU4SSxHQUFHTixJQUFJRyxHQUFHLElBQUlHLEdBQWlULElBQUlJLEdBQUcsS0FBS0csR0FBRyxHQUFHQyxHQUFHLEdBQXFELFNBQVNDLEdBQUdwL0YsRUFBRTFFLEVBQUU1QixHQUFHc0csRUFBRXU2RixFQUFFLEVBQUV2NkYsRUFBRXpCLEVBQUU4Z0csR0FBR3ZKLEdBQUV4NkYsSUFBSTBFLEVBQUUxRyxFQUFFSSxFQUFFc0csRUFBRXc5RixHQUFFLEVBQUc4QixHQUFHdC9GLEVBQUUsTUFBTyxTQUFTdS9GLEdBQUd2L0YsRUFBRTFFLEVBQUU1QixFQUFFQyxHQUFHcUcsRUFBRXU2RixFQUFFLEVBQUV2NkYsRUFBRXpCLEVBQUU4Z0csR0FBR3ZKLEdBQUV4NkYsSUFBSTBFLEVBQUUxRyxFQUFFLEtBQUswRyxFQUFFdzlGLEVBQUU5akcsRUFBRTRsRyxHQUFHdC9GLEVBQUVyRyxHQUN0Z0YsU0FBUzJsRyxHQUFHdC9GLEVBQUUxRSxHQUFHMEUsRUFBRWYsRUFBRTIyRixJQUFJNEosR0FBR3gvRixHQUFHQSxFQUFFMjRGLEVBQUU3QyxHQUFFOTFGLEVBQUV6QixHQUFHa2hHLEdBQUd6L0YsRUFBRTI0RixFQUFFLElBQUkzNEYsRUFBRTYrRixHQUFHNytGLEVBQUV1MkYsRUFBRSxFQUFFdjJGLEVBQUVBLEVBQUVBLEVBQUV2QixFQUFFaWhHLEVBQUUxL0YsRUFBRXZCLEVBQUVraEcsSUFBSXJrRyxFQUFFLE1BQU0sRUFBRTBFLEVBQUVnOEYsSUFBSWg4RixFQUFFcTNGLEVBQUUsSUFBSWdHLEdBQUdqNUYsRUFBRXBFLEVBQUU0M0YsR0FBRzUzRixFQUFFQSxFQUFFQSxHQUFHQSxFQUFFZzhGLElBQUkwQixHQUFHMTlGLEVBQUU2OUYsRUFBRTc5RixFQUFFQSxFQUFFLG1CQUFtQkEsRUFBRWl6QixJQUFJMzNCLEVBQUUwRSxFQUFFZzJGLEVBQUVlLEVBQUcvMkYsRUFBRWcyRixHQUFHLEdBQUdoMkYsRUFBRTFHLEdBQUcwRyxFQUFFNDFGLElBQUk1MUYsRUFBRTQxRixFQUFFLFFBQVF0NkYsRUFBRSxnQkFBZ0Isb0NBQW9DMEUsRUFBRUEsRUFBRXUxRixHQUFHdjFGLEVBQUUyNEYsRUFBRTM0RixFQUFFNDFGLEVBQUU1MUYsRUFBRTFHLEVBQUVnQyxLQUFLMEUsRUFBRTQxRixFQUFFLE1BQU01MUYsRUFBRUEsRUFBRXUxRixHQUFHdjFGLEVBQUUyNEYsRUFBRTM0RixFQUFFNDFGLEVBQUUsS0FBS3Q2RixJQUFJMGdHLEdBQUUsR0FFckgsU0FBUzRELEdBQUc1L0YsRUFBRTFFLEVBQUU1QixHQUFHLElBQUksSUFBSUMsR0FBRSxHQUFJcUcsRUFBRXZHLEdBQUd1RyxFQUFFdTJGLEVBQUU3OEYsRUFBRXVDLFFBQVEsQ0FBQyxJQUFJRyxFQUFFeWpHLEdBQUc3L0YsRUFBRXRHLEdBQUcsR0FBRzBDLEdBQUcraUcsR0FBRyxDQUFDLEdBQUc3akcsSUFBSTBFLEVBQUV0RyxFQUFFLEVBQUVza0csR0FBRSxJQUFJcmtHLEdBQUUsR0FBSSxNQUFXLEdBQUd5QyxHQUFHOGlHLEdBQUcsQ0FBQ2wvRixFQUFFdEcsRUFBRSxFQUFFc2tHLEdBQUUsSUFBSXJrRyxHQUFFLEVBQUcsTUFBV21tRyxHQUFHOS9GLEVBQUU1RCxHQUFJLEdBQUdkLEdBQUcsR0FBRzVCLEVBQUV1QyxTQUFTK0QsRUFBRXRHLEVBQUUsRUFBRXNrRyxHQUFFLElBQUlya0csR0FBRSxHQUFJcUcsRUFBRTFFLEVBQUUwRSxFQUFFMUUsR0FBRzNCLEVBQUVBLElBQUk4RCxHQUFFdUMsR0FBRysvRixHQUFHLy9GLElBQzNTLFNBQVM2L0YsR0FBRzcvRixFQUFFMUUsR0FBRyxJQUFJNUIsRUFBRXNHLEVBQUV1MkYsRUFBRTU4RixFQUFFMkIsRUFBRWUsUUFBUSxLQUFLM0MsR0FBRyxPQUFJLEdBQUdDLEVBQVN3bEcsSUFBR3psRyxFQUFFOG9CLE9BQU9sbkIsRUFBRXlwQixVQUFVcnJCLEVBQUVDLElBQU84b0IsTUFBTS9vQixHQUFVd2xHLElBQUd2bEcsR0FBRyxHQUFPRCxFQUFFNEIsRUFBRVcsT0FBY2tqRyxJQUFHN2pHLEVBQUVBLEVBQUV5c0UsT0FBT3B1RSxFQUFFRCxHQUFHc0csRUFBRXUyRixFQUFFNThGLEVBQUVELEVBQVM0QixJQUEwQyxTQUFTa2tHLEdBQUd4L0YsR0FBR0EsRUFBRWcvRixFQUFFcEosSUFBSTUxRixFQUFFOCtGLEVBQUVrQixHQUFHaGdHLEVBQUVBLEVBQUU4K0YsR0FBSSxTQUFTa0IsR0FBR2hnRyxFQUFFMUUsR0FBRyxHQUFHLE1BQU0wRSxFQUFFM0csRUFBRSxNQUFNd0ksTUFBTSwyQkFBMkI3QixFQUFFM0csRUFBRTZrRyxHQUFHOTVGLEVBQUVwRSxFQUFFaWdHLEdBQUdqZ0csR0FBRzFFLEdBQ25kLFNBQVM0a0csR0FBR2xnRyxHQUFHQSxFQUFFM0csSUFBSTBHLEVBQUV5c0IsYUFBYXhzQixFQUFFM0csR0FBRzJHLEVBQUUzRyxFQUFFLE1BQWlJLFNBQVMwbUcsR0FBRy8vRixHQUFHQSxFQUFFdkIsRUFBRTI0RixNQUFNcDNGLEVBQUV2RyxHQUFHdUcsRUFBRXZCLEVBQUUwaEcsR0FBR25nRyxHQUFJLFNBQVN2QyxHQUFFdUMsR0FBR2tnRyxHQUFHbGdHLEdBQUcsSUFBSTFFLEVBQUUwRSxFQUFFcTNGLEVBQUUvN0YsR0FBRyxtQkFBbUJBLEVBQUUyNkYsSUFBSTM2RixFQUFFMjZGLEtBQUtqMkYsRUFBRXEzRixFQUFFLEtBQUs2RixHQUFHbDlGLEVBQUV2QyxHQUFHa2dHLEdBQUczOUYsRUFBRTY5RixHQUFHNzlGLEVBQUVBLElBQUkxRSxFQUFFMEUsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRSxLQUFLMUUsRUFBRTIrQixRQUFRMytCLEVBQUUyNkYsTUFBTyxTQUFTNkosR0FBRzkvRixFQUFFMUUsR0FBRyxJQUFJMEUsRUFBRXZCLEVBQUUrNEYsR0FBR3gzRixFQUFFMUUsR0FBRzBnRyxHQUFFLEdBQUksTUFBTXRpRyxLQUN0WSxTQUFTMG1HLEdBQUdwZ0csRUFBRTFFLEdBQUcsR0FBRzBFLEVBQUVvTixTQUFTLG1CQUFtQnBOLEVBQUVvTixRQUFRcE4sRUFBRW9OLFFBQVE5UixPQUFFLFFBQWEsR0FBR2k2RixFQUFHdjFGLElBQUl2RyxFQUFFdUcsR0FBR2kyRixFQUFHajJGLEVBQUUxRSxPQUFFLE9BQVksQ0FBQyxHQUFHMEUsRUFBRWcrRixHQUFHLG1CQUFtQmgrRixFQUFFZytGLEVBQUUsSUFBSXRrRyxFQUFFc0csRUFBRWcrRixTQUFTLEdBQUdoK0YsRUFBRTA0RixHQUFHLG1CQUFtQjE0RixFQUFFMDRGLEVBQUVoL0YsT0FBRSxPQUFZLEdBQUc2N0YsRUFBR3YxRixJQUFJdkcsRUFBRXVHLEdBQUcsQ0FBQ3RHLEVBQUUsR0FBRyxJQUFJLElBQUlDLEVBQUVxRyxFQUFFL0QsT0FBT0csRUFBRSxFQUFFQSxFQUFFekMsRUFBRXlDLElBQUkxQyxFQUFFMkYsS0FBS2pELFFBQVMsSUFBSUEsS0FBSzFDLEVBQUUsR0FBR0MsRUFBRSxFQUFFcUcsRUFBRXRHLEVBQUVDLEtBQUt5QyxFQUFVQSxHQUFSekMsRUFEcUYsU0FBWXFHLEdBQUcsR0FBR0EsRUFBRTA0RixHQUFHLG1CQUFtQjE0RixFQUFFMDRGLEVBQUUsT0FBTzE0RixFQUFFMDRGLElBQUksR0FBR2ovRixFQUFFdUcsR0FBRyxPQUFPQSxFQUFFOEgsTUFBTSxJQUFJLEdBQUd5dEYsRUFBR3YxRixHQUFHLENBQUMsSUFBSSxJQUFJMUUsRUFBRSxHQUFHNUIsRUFBRXNHLEVBQUUvRCxPQUFPdEMsRUFBRSxFQUFFQSxFQUFFRCxFQUFFQyxJQUFJMkIsRUFBRStELEtBQUtXLEVBQUVyRyxJQUFJLE9BQU8yQixFQUFXLElBQUkzQixLQUFiMkIsRUFBRSxHQUFHNUIsRUFBRSxFQUFXc0csRUFBRTFFLEVBQUU1QixLQUFLc0csRUFBRXJHLEdBQUcsT0FBTzJCLEVBQ3BSK2tHLENBQUdyZ0csSUFBTy9ELE9BQU8sSUFBSSxJQUFJc0MsRUFBRSxFQUFFQSxFQUFFbkMsRUFBRW1DLElBQUlqRCxFQUFFOUIsVUFBSyxFQUFPRyxFQUFFNEUsR0FBRzdFLEdBQUdBLEVBQUU2RSxHQUFHeUIsSUFBSyxTQUFTc2dHLEdBQUV0Z0csRUFBRTFFLEdBQUdNLEtBQUtOLEVBQUUsR0FBR00sS0FBS29FLEVBQUUsR0FBR3BFLEtBQUtsQyxFQUFFLEVBQUUsSUFBSUEsRUFBRXNDLFVBQVVDLE9BQU8sR0FBRyxFQUFFdkMsRUFBRSxDQUFDLEdBQUdBLEVBQUUsRUFBRSxNQUFNbUksTUFBTSw4QkFBOEIsSUFBSSxJQUFJbEksRUFBRSxFQUFFQSxFQUFFRCxFQUFFQyxHQUFHLEVBQUVpQyxLQUFLa1UsSUFBSTlULFVBQVVyQyxHQUFHcUMsVUFBVXJDLEVBQUUsU0FBVSxHQUFHcUcsRUFBRSxHQUFHQSxhQUFhc2dHLEdBQUUsSUFBSTVtRyxFQUFFc0csRUFBRWcrRixJQUFJcmtHLEVBQUUsRUFBRUEsRUFBRUQsRUFBRXVDLE9BQU90QyxJQUFJaUMsS0FBS2tVLElBQUlwVyxFQUFFQyxHQUFHcUcsRUFBRTlGLElBQUlSLEVBQUVDLFVBQVUsSUFBSUEsS0FBS3FHLEVBQUVwRSxLQUFLa1UsSUFBSW5XLEVBQUVxRyxFQUFFckcsSUFDL25CLFNBQVM0bUcsR0FBR3ZnRyxFQUFFMUUsR0FBRzBqRyxHQUFFaC9GLEVBQUUxRSxFQUFFQSxZQUFZMEUsRUFBRTFFLEVBQUVBLEdBQUcwRSxFQUFFdEcsSUFBSXNHLEVBQUVBLEVBQUUvRCxPQUFPLEVBQUUrRCxFQUFFdEcsR0FBRzhtRyxHQUFHeGdHLElBQUssU0FBU3dnRyxHQUFHeGdHLEdBQUcsR0FBR0EsRUFBRXRHLEdBQUdzRyxFQUFFQSxFQUFFL0QsT0FBTyxDQUFDLElBQUksSUFBSVgsRUFBRSxFQUFFNUIsRUFBRSxFQUFFNEIsRUFBRTBFLEVBQUVBLEVBQUUvRCxRQUFRLENBQUMsSUFBSXRDLEVBQUVxRyxFQUFFQSxFQUFFMUUsR0FBRzBqRyxHQUFFaC9GLEVBQUUxRSxFQUFFM0IsS0FBS3FHLEVBQUVBLEVBQUV0RyxLQUFLQyxHQUFHMkIsSUFBSzBFLEVBQUVBLEVBQUUvRCxPQUFPdkMsRUFBRyxHQUFHc0csRUFBRXRHLEdBQUdzRyxFQUFFQSxFQUFFL0QsT0FBTyxDQUFDLElBQUlHLEVBQUUsR0FBRyxJQUFJMUMsRUFBRTRCLEVBQUUsRUFBRUEsRUFBRTBFLEVBQUVBLEVBQUUvRCxRQUFpQitpRyxHQUFFNWlHLEVBQVh6QyxFQUFFcUcsRUFBRUEsRUFBRTFFLE1BQVkwRSxFQUFFQSxFQUFFdEcsS0FBS0MsRUFBRXlDLEVBQUV6QyxHQUFHLEdBQUcyQixJQUFJMEUsRUFBRUEsRUFBRS9ELE9BQU92QyxHQUN4TyxTQUFTc2xHLEdBQUVoL0YsRUFBRTFFLEdBQUcsT0FBT3ZCLE9BQU9rQixVQUFVQyxlQUFlMUIsS0FBS3dHLEVBQUUxRSxJQVI2cUVtRCxFQUFFbWdHLEdBQUUzakcsV0FBWWt4QixXQUFXLFNBQVNuc0IsR0FBR3BFLEtBQUtrakcsRUFBRTkrRixHQUNwa0V2QixFQUFFdzBCLEdBQUcsU0FBU2p6QixHQUFHQSxFQUFFQSxFQUFFdEQsT0FBTyxJQUFJcEIsRUFBRU0sS0FBS3k3RixFQUFFLzdGLEdBQUcsR0FBR3dqRyxHQUFFOStGLEdBQUcxRSxFQUFFay9GLEtBQUs1K0YsS0FBS2c4RixHQUFHNTNGLElBQ3RZdkIsRUFBRW01RixHQUFHLFNBQVM1M0YsR0FBRyxJQUFJLEdBQUdBLEdBQUdwRSxLQUFLb0UsRUFBRUEsRUFBRSxDQUFDLElBQUkxRSxFQUFFd2pHLEdBQUVsakcsS0FBS29FLEdBQUd0RyxFQUFFa0MsS0FBS29FLEVBQUVpM0YsS0FBS3Q5RixFQUFFaUMsS0FBS29FLEVBQUV5Z0csSUFBSSxLQUFLLEVBQUVubEcsR0FBRyxHQUFHQSxJQUFJaThGLElBQUszN0YsS0FBS29FLEVBQUVxMUYsTUFBTSxDQUFDejVGLEtBQUtuQyxHQUFHLEdBQUc2QixHQUFHLEdBQUc1QixHQUFlc2lHLEdBQVgsR0FBR3RpRyxHQUFHLEdBQUdDLEVBQUksRUFBSyxHQUFJdW1HLEdBQUd0a0csTUFBTSxJQUFJUSxFQUFFUixLQUFLb0UsRUFBRXlnRyxJQUFJN2tHLEtBQUs5QixFQUFFc0MsRUFBRSxJQUFJbUMsRUFBRTNDLEtBQUtvRSxFQUFFcTFGLEtBQUssR0FBR3o1RixLQUFLTixFQUFFLEtBQUtjLEVBQUUsQ0FBQyxHQUFHUixLQUFLcWpHLElBQUlyakcsS0FBS1IsRUFBRSxDQUFDRSxFQUFFLENBQUMsR0FBR00sS0FBS29FLEVBQUUsQ0FBQyxJQUFJZzJGLEVBQUUwSyxHQUFHOWtHLEtBQUtvRSxFQUFFLDJCQUEyQixHQUFHZzJGLElBQUlNLEVBQUdOLEdBQUcsQ0FBQyxJQUFJMThGLEVBQUUwOEYsRUFBRSxNQUFNMTZGLEdBQUdoQyxFQUFFLEtBQU0sSUFBR0EsRUFBMkIsQ0FBQ3NDLEtBQUtOLEdBQUUsRUFBR00sS0FBS2xDLEVBQUUsRUFBRXNrRyxHQUFFLElBQUl2Z0csR0FBRTdCLE1BQU1ta0csR0FBR25rRyxNQUFNLE1BQU1vRSxFQUExRXBFLEtBQUtSLEdBQUUsRUFBRzBrRyxHQUFHbGtHLEtBQUt0QyxHQUEyRHNDLEtBQUs0aEcsR0FBR29DLEdBQUdoa0csS0FBS04sRUFBRWlELEdBQUdnNUYsR0FBSTM3RixLQUFLTixHQUFHLEdBQUdBLElBQUlvaUcsR0FBRzloRyxLQUFLaWlHLEVBQUVqaUcsS0FBSzZCLEVBQUUsT0FBTzdCLEtBQUt3L0YsSUFBSXgvRixLQUFLNkIsRUFBRXd1QixVQUM1ZjZ6RSxHQUFHbGtHLEtBQUsyQyxHQUFHLEdBQUdqRCxHQUFHbUMsR0FBRTdCLE1BQU1BLEtBQUtOLElBQUlNLEtBQUtuQyxJQUFJLEdBQUc2QixFQUFFTSxLQUFLNkMsRUFBRTBoRyxHQUFHdmtHLE9BQU9BLEtBQUtOLEdBQUUsRUFBR2trRyxHQUFHNWpHLGFBQWMsS0FBS1EsR0FBRyxFQUFFbUMsRUFBRWxDLFFBQVEsZ0JBQWdCVCxLQUFLbEMsRUFBRSxFQUFFc2tHLEdBQUUsTUFBTXBpRyxLQUFLbEMsRUFBRSxFQUFFc2tHLEdBQUUsS0FBS3ZnRyxHQUFFN0IsTUFBTW1rRyxHQUFHbmtHLFFBQVMsTUFBTXNnRyxNQUMzTHo5RixFQUFFMjhGLEdBQUcsV0FBVyxHQUFHeC9GLEtBQUtvRSxFQUFFLENBQUMsSUFBSUEsRUFBRTgrRixHQUFFbGpHLEtBQUtvRSxHQUFHMUUsRUFBRU0sS0FBS29FLEVBQUVxMUYsS0FBS3o1RixLQUFLMjZGLEVBQUVqN0YsRUFBRVcsU0FBU2lrRyxHQUFHdGtHLE1BQU1na0csR0FBR2hrRyxLQUFLb0UsRUFBRTFFLEdBQUdNLEtBQUtOLEdBQUcsR0FBRzBFLEdBQUd3L0YsR0FBRzVqRyxTQUE2TDZDLEVBQUU2dEIsT0FBTyxXQUFXMXdCLEtBQUtuQyxHQUFFLEVBQUdnRSxHQUFFN0IsT0FDM1I2QyxFQUFFd2hHLEdBQUcsV0FBV3JrRyxLQUFLdkMsRUFBRSxLQUFLLElBQUkyRyxFQUFFNDFGLElBQUksR0FBRzUxRixFQUFFcEUsS0FBS29qRyxHQUFHLEdBQUdwakcsS0FBSzIrRixJQUFJeUIsR0FBRSxHQUFHZ0MsR0FBRSxLQUFLdmdHLEdBQUU3QixNQUFNQSxLQUFLbEMsRUFBRSxFQUFFcW1HLEdBQUdua0csT0FBT29rRyxHQUFHcGtHLEtBQUtBLEtBQUtvakcsRUFBRWgvRixLQUNxZ0J2QixFQUFFNmhHLEdBQUVybEcsV0FBWXk5RixFQUFFLFdBQVc4SCxHQUFHNWtHLE1BQU0sSUFBSSxJQUFJb0UsRUFBRSxHQUFHMUUsRUFBRSxFQUFFQSxFQUFFTSxLQUFLb0UsRUFBRS9ELE9BQU9YLElBQUkwRSxFQUFFWCxLQUFLekQsS0FBS04sRUFBRU0sS0FBS29FLEVBQUUxRSxLQUFLLE9BQU8wRSxHQUFHdkIsRUFBRXUvRixFQUFFLFdBQW9CLE9BQVR3QyxHQUFHNWtHLE1BQWFBLEtBQUtvRSxFQUFFSixVQUN6ZW5CLEVBQUV2RSxJQUFJLFNBQVM4RixFQUFFMUUsR0FBRyxPQUFPMGpHLEdBQUVwakcsS0FBS04sRUFBRTBFLEdBQUdwRSxLQUFLTixFQUFFMEUsR0FBRzFFLEdBQUdtRCxFQUFFcVIsSUFBSSxTQUFTOVAsRUFBRTFFLEdBQUcwakcsR0FBRXBqRyxLQUFLTixFQUFFMEUsS0FBS3BFLEtBQUtsQyxJQUFJa0MsS0FBS29FLEVBQUVYLEtBQUtXLElBQUlwRSxLQUFLTixFQUFFMEUsR0FBRzFFLEdBQ25kbUQsRUFBRTJPLFFBQVEsU0FBU3BOLEVBQUUxRSxHQUFHLElBQUksSUFBSTVCLEVBQUVrQyxLQUFLb2lHLElBQUlya0csRUFBRSxFQUFFQSxFQUFFRCxFQUFFdUMsT0FBT3RDLElBQUksQ0FBQyxJQUFJeUMsRUFBRTFDLEVBQUVDLEdBQUc0RSxFQUFFM0MsS0FBSzFCLElBQUlrQyxHQUFHNEQsRUFBRXhHLEtBQUs4QixFQUFFaUQsRUFBRW5DLEVBQUVSLFFBQTBFLElBQUkra0csR0FBRyx1SEFBb1YsU0FBUzFCLEdBQUVqL0YsRUFBRTFFLEdBQWtFLElBQUk1QixFQUFuRWtDLEtBQUtOLEVBQUVNLEtBQUtxRSxFQUFFckUsS0FBSzJDLEVBQUUsR0FBRzNDLEtBQUt2QyxFQUFFLEtBQUt1QyxLQUFLNkMsRUFBRTdDLEtBQUtvRSxFQUFFLEdBQUdwRSxLQUFLbzZGLEdBQUUsRUFBU2gyRixhQUFhaS9GLElBQUdyakcsS0FBS282RixPQUFFLElBQVMxNkYsRUFBRUEsRUFBRTBFLEVBQUVnMkYsRUFBRTRLLEdBQUdobEcsS0FBS29FLEVBQUV6QixHQUFHM0MsS0FBS3FFLEVBQUVELEVBQUVDLEVBQUU0Z0csR0FBR2psRyxLQUFLb0UsRUFBRTFFLEdBQUd3bEcsR0FBR2xsRyxLQUFLb0UsRUFBRTNHLEdBQUd1QyxLQUFLb0UsRUFBRUEsRUFBRUEsRUFBRStnRyxHQUFHbmxHLEtBQUtvbEcsR0FBR2hoRyxFQUFFdEcsSUFBSWtDLEtBQUs2QyxFQUFFdUIsRUFBRXZCLEdBQUd1QixJQUFJdEcsRUFBRXVLLE9BQU9qRSxHQUFHd1UsTUFBTW1zRixNQUFNL2tHLEtBQUtvNkYsSUFBSTE2RixFQUFFc2xHLEdBQUdobEcsS0FBS2xDLEVBQUUsSUFBSSxJQUFHLEdBQUlrQyxLQUFLcUUsRUFBRWdoRyxHQUFHdm5HLEVBQUUsSUFBSSxJQUFJbW5HLEdBQUdqbEcsS0FBS2xDLEVBQUUsSUFBSSxJQUFHLEdBQUlvbkcsR0FBR2xsRyxLQUFLbEMsRUFBRSxJQUFJa0MsS0FBS29FLEVBQUVpaEcsR0FBR3ZuRyxFQUFFLElBQUksSUFBRyxHQUFJcW5HLEdBQUdubEcsS0FBS2xDLEVBQUUsSUFBSSxJQUFHLEdBQUlrQyxLQUFLNkMsRUFBRXdpRyxHQUFHdm5HLEVBQUUsSUFBSSxNQUFNa0MsS0FBS282RixJQUFJMTZGLEVBQUVNLEtBQUtsQyxFQUFFLElBQUl3bkcsR0FBRyxLQUFLdGxHLEtBQUtvNkYsSUFHeHlCLFNBQVNGLEdBQUU5MUYsR0FBRyxPQUFPLElBQUlpL0YsR0FBRWovRixHQUFHLFNBQVM0Z0csR0FBRzVnRyxFQUFFMUUsRUFBRTVCLEdBQUdzRyxFQUFFekIsRUFBRTdFLEVBQUV1bkcsR0FBRzNsRyxHQUFFLEdBQUlBLEVBQUUwRSxFQUFFekIsSUFBSXlCLEVBQUV6QixFQUFFeUIsRUFBRXpCLEVBQUUySSxRQUFRLEtBQUssS0FBTSxTQUFTMjVGLEdBQUc3Z0csRUFBRTFFLEVBQUU1QixHQUFHc0csRUFBRTFFLEVBQUU1QixFQUFFdW5HLEdBQUczbEcsR0FBRSxHQUFJQSxFQUFHLFNBQVN3bEcsR0FBRzlnRyxFQUFFMUUsR0FBRyxHQUFHQSxFQUFFLENBQWEsR0FBWkEsRUFBRWtuQixPQUFPbG5CLEdBQU1tbkIsTUFBTW5uQixJQUFJLEVBQUVBLEVBQUUsTUFBTXVHLE1BQU0sbUJBQW1CdkcsR0FBRzBFLEVBQUUzRyxFQUFFaUMsT0FBUTBFLEVBQUUzRyxFQUFFLEtBQU0sU0FBUzBuRyxHQUFHL2dHLEVBQUUxRSxFQUFFNUIsR0FBRzRCLGFBQWE0bEcsSUFBSWxoRyxFQUFFdEcsRUFBRTRCLEVBTXBTLFNBQVkwRSxFQUFFMUUsR0FBR0EsSUFBSTBFLEVBQUV6QixJQUFJZy9GLEdBQUV2OUYsR0FBR0EsRUFBRXRHLEVBQUUsS0FBS3NHLEVBQUVBLEVBQUVvTixTQUFRLFNBQVMxVCxFQUFFQyxHQUFHLElBQUl5QyxFQUFFekMsRUFBRWszRixjQUFjbDNGLEdBQUd5QyxJQUFJK2tHLEdBQUd2bEcsS0FBS2pDLEdBQUd5bkcsR0FBR3hsRyxLQUFLUSxFQUFFMUMsTUFBTXNHLElBQUlBLEVBQUV6QixFQUFFakQsRUFObUsrbEcsQ0FBR3JoRyxFQUFFdEcsRUFBRXNHLEVBQUVnMkYsS0FBS3Q4RixJQUFJNEIsRUFBRWdtRyxHQUFHaG1HLEVBQUVpbUcsS0FBS3ZoRyxFQUFFdEcsRUFBRSxJQUFJd25HLEdBQUc1bEcsRUFBRTBFLEVBQUVnMkYsSUFDNWQsU0FBU3lLLEdBQUV6Z0csRUFBRTFFLEVBQUU1QixHQUFHc0csRUFBRXRHLEVBQUVvVyxJQUFJeFUsRUFBRTVCLEdBQUksU0FBUytsRyxHQUFHei9GLEVBQUUxRSxFQUFFNUIsR0FBRzRHLEVBQUU1RyxLQUFLQSxFQUFFLENBQUN1SyxPQUFPdkssS0FBSzBuRyxHQUFHcGhHLEVBQUV0RyxFQUFFNEIsRUFBRTVCLEdBQUksU0FBUzJsRyxHQUFHci9GLEdBQStILE9BQTVIeWdHLEdBQUV6Z0csRUFBRSxLQUFLd00sS0FBS0MsTUFBTSxXQUFXRCxLQUFLcVosVUFBVXplLFNBQVMsSUFBSW9GLEtBQUtnMUYsSUFBSWgxRixLQUFLQyxNQUFNLFdBQVdELEtBQUtxWixVQUFVK3ZFLEtBQUt4dUYsU0FBUyxLQUFZcEgsRUFBK0osU0FBU2loRyxHQUFHamhHLEVBQUUxRSxHQUFHLE9BQU8wRSxFQUFFMUUsRUFBRW1tRyxVQUFVemhHLEVBQUVrSCxRQUFRLE9BQU8sVUFBVXc2RixtQkFBbUIxaEcsR0FBRyxHQUM5ZCxTQUFTc2hHLEdBQUd0aEcsRUFBRTFFLEVBQUU1QixHQUFHLE9BQU9ELEVBQUV1RyxJQUFJQSxFQUFFMmhHLFVBQVUzaEcsR0FBR2tILFFBQVE1TCxFQUFFc21HLElBQUlsb0csSUFBSXNHLEVBQUVBLEVBQUVrSCxRQUFRLHVCQUF1QixRQUFRbEgsR0FBRyxLQUFLLFNBQVM0aEcsR0FBRzVoRyxHQUFxQixNQUFPLE1BQXpCQSxFQUFFQSxFQUFFaUMsV0FBVyxLQUFrQixFQUFFLElBQUltRixTQUFTLEtBQU8sR0FBRnBILEdBQU1vSCxTQUFTLElBSnZNNjNGLEdBQUVoa0csVUFBVW1NLFNBQVMsV0FBVyxJQUFJcEgsRUFBRSxHQUFHMUUsRUFBRU0sS0FBSzJDLEVBQUVqRCxHQUFHMEUsRUFBRVgsS0FBS2lpRyxHQUFHaG1HLEVBQUV1bUcsSUFBRyxHQUFJLEtBQUssSUFBSW5vRyxFQUFFa0MsS0FBS04sRUFBdVYsT0FBbFY1QixHQUFHLFFBQVE0QixLQUFFMEUsRUFBRVgsS0FBSyxPQUFPL0QsRUFBRU0sS0FBS3FFLElBQUlELEVBQUVYLEtBQUtpaUcsR0FBR2htRyxFQUFFdW1HLElBQUcsR0FBSSxLQUFLN2hHLEVBQUVYLEtBQUtpTyxtQkFBbUJySixPQUFPdkssSUFBSXdOLFFBQVEsdUJBQXVCLFFBQWlCLE9BQVR4TixFQUFFa0MsS0FBS3ZDLElBQVcyRyxFQUFFWCxLQUFLLElBQUk0RSxPQUFPdkssTUFBT0EsRUFBRWtDLEtBQUtvRSxLQUFFcEUsS0FBS04sR0FBRyxLQUFLNUIsRUFBRStLLE9BQU8sSUFBSXpFLEVBQUVYLEtBQUssS0FBS1csRUFBRVgsS0FBS2lpRyxHQUFHNW5HLEVBQUUsS0FBS0EsRUFBRStLLE9BQU8sR0FBR3E5RixHQUFHQyxJQUFHLE1BQU1yb0csRUFBRWtDLEtBQUtsQyxFQUFFME4sYUFBYXBILEVBQUVYLEtBQUssSUFBSTNGLElBQUlBLEVBQUVrQyxLQUFLNkMsSUFBSXVCLEVBQUVYLEtBQUssSUFBSWlpRyxHQUFHNW5HLEVBQUVzb0csS0FBWWhpRyxFQUFFMEQsS0FBSyxLQUM3YnU3RixHQUFFaGtHLFVBQVUyQyxRQUFRLFNBQVNvQyxHQUFHLElBQUkxRSxFQUFFdzZGLEdBQUVsNkYsTUFBTWxDLElBQUlzRyxFQUFFekIsRUFBRTdFLEVBQUVrbkcsR0FBR3RsRyxFQUFFMEUsRUFBRXpCLEdBQUc3RSxJQUFJc0csRUFBRUMsRUFBRXZHLEVBQUU0QixFQUFFMkUsRUFBRUQsRUFBRUMsRUFBRXZHLElBQUlzRyxFQUFFMUUsRUFBRTVCLEVBQUVtbkcsR0FBR3ZsRyxFQUFFMEUsRUFBRTFFLEdBQUc1QixFQUFFLE1BQU1zRyxFQUFFM0csRUFBRSxJQUFJTSxFQUFFcUcsRUFBRUEsRUFBRSxHQUFHdEcsRUFBRW9uRyxHQUFHeGxHLEVBQUUwRSxFQUFFM0csUUFBUSxHQUFHSyxJQUFJc0csRUFBRUEsRUFBRSxDQUFDLEdBQUcsS0FBS3JHLEVBQUU4SyxPQUFPLEdBQUcsR0FBRzdJLEtBQUtOLElBQUlNLEtBQUtvRSxFQUFFckcsRUFBRSxJQUFJQSxNQUFNLENBQUMsSUFBSXlDLEVBQUVkLEVBQUUwRSxFQUFFaWlHLFlBQVksTUFBTSxHQUFHN2xHLElBQUl6QyxFQUFFMkIsRUFBRTBFLEVBQUUrbkUsT0FBTyxFQUFFM3JFLEVBQUUsR0FBR3pDLEdBQVEsR0FBRyxPQUFQeUMsRUFBRXpDLElBQWMsS0FBS3lDLEVBQUV6QyxFQUFFLFFBQVEsR0FBRys4RixFQUFFdDZGLEVBQUUsT0FBT3M2RixFQUFFdDZGLEVBQUUsTUFBTSxDQUFDekMsRUFBRSxHQUFHeUMsRUFBRTZsRyxZQUFZLElBQUksR0FBRzdsRyxFQUFFQSxFQUFFMEwsTUFBTSxLQUFLLElBQUksSUFBSXZKLEVBQUUsR0FBR3kzRixFQUFFLEVBQUVBLEVBQUU1NUYsRUFBRUgsUUFBUSxDQUFDLElBQUkzQyxFQUFFOEMsRUFBRTQ1RixLQUFLLEtBQUsxOEYsRUFBRUssR0FBR3E4RixHQUFHNTVGLEVBQUVILFFBQVFzQyxFQUFFYyxLQUFLLElBQUksTUFBTS9GLElBQUksRUFBRWlGLEVBQUV0QyxRQUFRLEdBQUdzQyxFQUFFdEMsUUFBUSxJQUFJc0MsRUFBRSxLQUFLQSxFQUFFYSxNQUFNekYsR0FDbmZxOEYsR0FBRzU1RixFQUFFSCxRQUFRc0MsRUFBRWMsS0FBSyxNQUFNZCxFQUFFYyxLQUFLL0YsR0FBR0ssR0FBRSxHQUFLQSxFQUFFNEUsRUFBRW1GLEtBQUssVUFBVy9KLEVBQUV5QyxFQUFzRSxPQUFuRTFDLEVBQUU0QixFQUFFMEUsRUFBRXJHLEVBQUVELEVBQUUsS0FBS3NHLEVBQUV0RyxFQUFFME4sV0FBVzFOLEVBQUVxbkcsR0FBR3psRyxFQUFFMGxHLEdBQUdoaEcsRUFBRXRHLElBQUlBLElBQUlzRyxFQUFFdkIsRUFBRS9FLElBQUk0QixFQUFFbUQsRUFBRXVCLEVBQUV2QixHQUFVbkQsR0FFNkQsSUFBSXVtRyxHQUFHLFlBQVlFLEdBQUcsVUFBVUQsR0FBRyxTQUFTUCxHQUFHLFVBQVVTLEdBQUcsS0FBSyxTQUFTZCxHQUFHbGhHLEVBQUUxRSxHQUFHTSxLQUFLTixFQUFFTSxLQUFLb0UsRUFBRSxLQUFLcEUsS0FBS2xDLEVBQUVzRyxHQUFHLEtBQUtwRSxLQUFLMkMsSUFBSWpELEVBQUcsU0FBU2lpRyxHQUFFdjlGLEdBQUdBLEVBQUVBLElBQUlBLEVBQUVBLEVBQUUsSUFBSXNnRyxHQUFFdGdHLEVBQUUxRSxFQUFFLEVBQUUwRSxFQUFFdEcsR0FMcEUsU0FBWXNHLEVBQUUxRSxHQUFHLEdBQUcwRSxFQUFFLENBQUNBLEVBQUVBLEVBQUU4SCxNQUFNLEtBQUssSUFBSSxJQUFJcE8sRUFBRSxFQUFFQSxFQUFFc0csRUFBRS9ELE9BQU92QyxJQUFJLENBQUMsSUFBSUMsRUFBRXFHLEVBQUV0RyxHQUFHMkMsUUFBUSxLQUFLRCxFQUFFLEtBQUssR0FBRyxHQUFHekMsRUFBRSxDQUFDLElBQUk0RSxFQUFFeUIsRUFBRXRHLEdBQUdxckIsVUFBVSxFQUFFcHJCLEdBQUd5QyxFQUFFNEQsRUFBRXRHLEdBQUdxckIsVUFBVXByQixFQUFFLFFBQVM0RSxFQUFFeUIsRUFBRXRHLEdBQUc0QixFQUFFaUQsRUFBRW5DLEVBQUVzbEcsbUJBQW1CdGxHLEVBQUU4SyxRQUFRLE1BQU0sTUFBTSxNQUsvSWc3RixDQUFHbGlHLEVBQUV0RyxHQUFFLFNBQVM0QixFQUFFNUIsR0FBR3NHLEVBQUU2eUIsSUFBSTZ1RSxtQkFBbUJwbUcsRUFBRTRMLFFBQVEsTUFBTSxNQUFNeE4sT0FDelQsU0FBU3luRyxHQUFHbmhHLEVBQUUxRSxHQUFHaWlHLEdBQUV2OUYsR0FBRzFFLEVBQUV1akcsR0FBRTcrRixFQUFFMUUsR0FBRzBqRyxHQUFFaC9GLEVBQUVBLEVBQUUxRSxFQUFFQSxLQUFLMEUsRUFBRXRHLEVBQUUsS0FBS3NHLEVBQUUxRSxHQUFHMEUsRUFBRUEsRUFBRTlGLElBQUlvQixHQUFHVyxPQUFPc2tHLEdBQUd2Z0csRUFBRUEsRUFBRTFFLElBQUssU0FBUzZtRyxHQUFHbmlHLEVBQUUxRSxHQUFpQixPQUFkaWlHLEdBQUV2OUYsR0FBRzFFLEVBQUV1akcsR0FBRTcrRixFQUFFMUUsR0FBVTBqRyxHQUFFaC9GLEVBQUVBLEVBQUUxRSxFQUFFQSxHQUVwTCxTQUFTOGxHLEdBQUdwaEcsRUFBRTFFLEVBQUU1QixHQUFHeW5HLEdBQUduaEcsRUFBRTFFLEdBQUcsRUFBRTVCLEVBQUV1QyxTQUFTK0QsRUFBRXRHLEVBQUUsS0FBS3NHLEVBQUVBLEVBQUU4UCxJQUFJK3VGLEdBQUU3K0YsRUFBRTFFLEdBQUcrNkYsRUFBRzM4RixJQUFJc0csRUFBRTFFLEdBQUc1QixFQUFFdUMsUUFDL0osU0FBUytrRyxHQUFHaGhHLEdBQUcsSUFBSTFFLEVBQUUsSUFBSTRsRyxHQUF5QyxPQUF0QzVsRyxFQUFFNUIsRUFBRXNHLEVBQUV0RyxFQUFFc0csRUFBRUEsSUFBSTFFLEVBQUUwRSxFQUFFLElBQUlzZ0csR0FBRXRnRyxFQUFFQSxHQUFHMUUsRUFBRUEsRUFBRTBFLEVBQUUxRSxHQUFVQSxFQUFFLFNBQVN1akcsR0FBRTcrRixFQUFFMUUsR0FBd0MsT0FBckNBLEVBQUUySSxPQUFPM0ksR0FBRzBFLEVBQUV6QixJQUFJakQsRUFBRUEsRUFBRXUxRixlQUFzQnYxRixFQUErSyxTQUFTOG1HLEdBQUdwaUcsR0FBR3BFLEtBQUtvRSxFQUFFQSxFQUFFcEUsS0FBS04sRUFBRU0sS0FBS282RixFQUFFLEtBQUtwNkYsS0FBSzZDLEdBQUUsRUFBRzdDLEtBQUt2QyxFQUFFLEtBQUt1QyxLQUFLbEMsR0FBRyxFQUFFa0MsS0FBS3RDLEVBQUVzQyxLQUFLMkMsRUFBRSxLQUE4QixTQUFTOGpHLEdBQUdyaUcsR0FBRyxJQUFJMUUsRUFBRTBFLEVBQUVBLEVBQUV1NkYsRUFBRXY2RixFQUFFLEdBQUcsTUFBTTFFLEVBQUUwaUcsR0FBRSxHQUFHMWlHLEdBQUcwaUcsR0FBRSxJQUFJc0UsR0FBR3RpRyxFQUFFQSxFQUFFQSxHQUFFLEtBQU1nK0YsR0FBRSxJQUFJc0UsR0FBR3RpRyxFQUFFQSxFQUFFQSxHQUFFLFFBQVMsQ0FBQ0EsRUFBRTFFLEVBQUUsSUFBSXNqRyxHQUFFNStGLE9BQUUsT0FBTyxHQUFRQSxFQUFFMUUsRUFBRTA2RixFQUFFaDJGLEVBQUVnMkYsRUFBUTE2RixFQUFFaW5HLEdBQVJqbkcsRUFBRTBFLEVBQUVBLEVBQVMxRSxFQUFFcWtHLElBQUkzL0YsRUFBRXpCLEVBQUUsS0FBS3lCLEVBQUUzRyxHQUFHMmtHLEdBQUUsR0FBR3lCLEdBQUdua0csRUFBRSxPQUFPLFdBQVcsSUFBSTVCLEVBQUVzRyxFQUFFQSxFQUFFQyxFQUFFdEcsRUFBRXFHLEVBQUVBLEVBQUU2OUYsRUFBRW5rRyxHQUFHQyxHQUFHOG1HLEdBQUVubEcsRUFBRTVCLEVBQUVDLEdBQUc0bEcsR0FBR3YvRixFQUFFMUUsRUFBRUEsR0FBRSxFQUFHMEUsRUFBRXpCLElBRTlYLFNBQVNpa0csS0FBSzVtRyxLQUFLb0UsRUFBRXBFLEtBQUtOLEVBQUUsS0FBTSxTQUFTbW5HLEtBQUs3bUcsS0FBS29FLEVBQUUsSUFBSXNnRyxHQUFHLFNBQVNvQyxHQUFHMWlHLEdBQUcsSUFBSTFFLFNBQVMwRSxFQUFFLE1BQU8sVUFBVTFFLEdBQUcwRSxHQUFHLFlBQVkxRSxFQUFFLEtBQUswRSxFQUFFekYsS0FBS3lGLEVBQUV6RixLQUFLaTdGLElBQUtsNkYsRUFBRW1KLE9BQU8sR0FBR3pFLEVBQWtHLFNBQVMyaUcsR0FBRzNpRyxFQUFFMUUsR0FBR00sS0FBS04sRUFBRTBFLEVBQUVwRSxLQUFLb0UsRUFBRTFFLEVBQUcsU0FBU3NuRyxHQUFHNWlHLEdBQUdwRSxLQUFLNkMsRUFBRXVCLEdBQUc2aUcsR0FBRzlpRyxFQUFFK2lHLDRCQUE0RTlpRyxFQUFFLEdBQWpEQSxFQUFFRCxFQUFFZ2pHLFlBQVlDLGlCQUFpQixlQUFvQi9tRyxTQUFTLE1BQU0rRCxFQUFFLEdBQUdpakcsaUJBQWlCLE1BQU1qakcsRUFBRSxHQUFHaWpHLGlCQUFrQmpqRyxLQUFLRCxFQUFFbWpHLElBQUluakcsRUFBRW1qRyxHQUFHNUwsSUFBSXYzRixFQUFFbWpHLEdBQUc1TCxNQUFNdjNGLEVBQUVtakcsR0FBRzVMLEtBQUt5RixJQUFJbmhHLEtBQUsyQyxFQUFFeUIsRUFBRXBFLEtBQUs2QyxFQUFFLEVBQUU3QyxLQUFLb0UsRUFBRSxLQUFLLEVBQUVwRSxLQUFLMkMsSUFBSTNDLEtBQUtvRSxFQUFFLElBQUl5aUcsSUFBSTdtRyxLQUFLTixFQUFFLEtBQUtNLEtBQUtsQyxFQUFFLElBTnJiK0UsRUFBRXlpRyxHQUFHam1HLFdBQ25jNDNCLElBQUksU0FBUzd5QixFQUFFMUUsR0FBR2lpRyxHQUFFM2hHLE1BQU1BLEtBQUtsQyxFQUFFLEtBQUtzRyxFQUFFNitGLEdBQUVqakcsS0FBS29FLEdBQUcsSUFBSXRHLEVBQUVrQyxLQUFLb0UsRUFBRTlGLElBQUk4RixHQUE2QyxPQUExQ3RHLEdBQUdrQyxLQUFLb0UsRUFBRThQLElBQUk5UCxFQUFFdEcsRUFBRSxJQUFJQSxFQUFFMkYsS0FBSy9ELEdBQUdNLEtBQUtOLEdBQUcsRUFBU00sTUFBK0k2QyxFQUFFMk8sUUFBUSxTQUFTcE4sRUFBRTFFLEdBQUdpaUcsR0FBRTNoRyxNQUFNQSxLQUFLb0UsRUFBRW9OLFNBQVEsU0FBUzFULEVBQUVDLEdBQUdzOEYsRUFBR3Y4RixHQUFFLFNBQVMwQyxHQUFHNEQsRUFBRXhHLEtBQUs4QixFQUFFYyxFQUFFekMsRUFBRWlDLFFBQVFBLFFBQVFBLE9BQ25YNkMsRUFBRXUvRixFQUFFLFdBQVdULEdBQUUzaEcsTUFBTSxJQUFJLElBQUlvRSxFQUFFcEUsS0FBS29FLEVBQUUwNEYsSUFBSXA5RixFQUFFTSxLQUFLb0UsRUFBRWcrRixJQUFJdGtHLEVBQUUsR0FBR0MsRUFBRSxFQUFFQSxFQUFFMkIsRUFBRVcsT0FBT3RDLElBQUksSUFBSSxJQUFJeUMsRUFBRTRELEVBQUVyRyxHQUFHNEUsRUFBRSxFQUFFQSxFQUFFbkMsRUFBRUgsT0FBT3NDLElBQUk3RSxFQUFFMkYsS0FBSy9ELEVBQUUzQixJQUFJLE9BQU9ELEdBQUcrRSxFQUFFaTZGLEVBQUUsU0FBUzE0RixHQUFHdTlGLEdBQUUzaEcsTUFBTSxJQUFJTixFQUFFLEdBQUcsR0FBRzdCLEVBQUV1RyxHQUFHbWlHLEdBQUd2bUcsS0FBS29FLEtBQUsxRSxFQUFFODZGLEVBQUc5NkYsRUFBRU0sS0FBS29FLEVBQUU5RixJQUFJMmtHLEdBQUVqakcsS0FBS29FLFVBQVUsQ0FBQ0EsRUFBRXBFLEtBQUtvRSxFQUFFMDRGLElBQUksSUFBSSxJQUFJaC9GLEVBQUUsRUFBRUEsRUFBRXNHLEVBQUUvRCxPQUFPdkMsSUFBSTRCLEVBQUU4NkYsRUFBRzk2RixFQUFFMEUsRUFBRXRHLElBQUssT0FBTzRCLEdBQUdtRCxFQUFFcVIsSUFBSSxTQUFTOVAsRUFBRTFFLEdBQTBHLE9BQXZHaWlHLEdBQUUzaEcsTUFBTUEsS0FBS2xDLEVBQUUsS0FBaUJ5b0csR0FBR3ZtRyxLQUFmb0UsRUFBRTYrRixHQUFFampHLEtBQUtvRSxNQUFnQnBFLEtBQUtOLEdBQUdNLEtBQUtvRSxFQUFFOUYsSUFBSThGLEdBQUcvRCxRQUFRTCxLQUFLb0UsRUFBRThQLElBQUk5UCxFQUFFLENBQUMxRSxJQUFJTSxLQUFLTixHQUFHLEVBQVNNLE1BQ3RhNkMsRUFBRXZFLElBQUksU0FBUzhGLEVBQUUxRSxHQUFHLE9BQUkwRSxHQUE4QixHQUFuQkEsRUFBRXBFLEtBQUs4OEYsRUFBRTE0RixJQUFjL0QsT0FBT2dJLE9BQU9qRSxFQUFFLElBQXpDMUUsR0FBdUltRCxFQUFFMkksU0FBUyxXQUFXLEdBQUd4TCxLQUFLbEMsRUFBRSxPQUFPa0MsS0FBS2xDLEVBQUUsSUFBSWtDLEtBQUtvRSxFQUFFLE1BQU8sR0FBRyxJQUFJLElBQUlBLEVBQUUsR0FBRzFFLEVBQUVNLEtBQUtvRSxFQUFFZytGLElBQUl0a0csRUFBRSxFQUFFQSxFQUFFNEIsRUFBRVcsT0FBT3ZDLElBQUksQ0FBQyxJQUFJQyxFQUFFMkIsRUFBRTVCLEdBQUcwQyxFQUFFa1IsbUJBQW1CckosT0FBT3RLLElBQUlBLEVBQUVpQyxLQUFLODhGLEVBQUUvK0YsR0FBRyxJQUFJLElBQUk0RSxFQUFFLEVBQUVBLEVBQUU1RSxFQUFFc0MsT0FBT3NDLElBQUksQ0FBQyxJQUFJeTNGLEVBQUU1NUYsRUFBRSxLQUFLekMsRUFBRTRFLEtBQUt5M0YsR0FBRyxJQUFJMW9GLG1CQUFtQnJKLE9BQU90SyxFQUFFNEUsTUFBTXlCLEVBQUVYLEtBQUsyMkYsSUFBSyxPQUFPcDZGLEtBQUtsQyxFQUFFc0csRUFBRTBELEtBQUssTUFDN0pteUYsR0FBZixlQUFmLGdCQUFzSXAzRixFQUFFMmpHLEdBQUdubkcsV0FBWTJqRyxFQUFFLEtBQTJQbmdHLEVBQUVpaEcsRUFBRSxTQUFTMS9GLEdBQUcsT0FBT3BFLEtBQUtvRSxFQUFFMC9GLEVBQUUxL0YsSUFBSXZCLEVBQUV3N0IsTUFBTSxXQUFXcitCLEtBQUtOLElBQUlNLEtBQUtOLEVBQUVneEIsU0FBUzF3QixLQUFLTixFQUFFLE1BQU1NLEtBQUtsQyxHQUFHLEdBQUkrRSxFQUFFMjRGLEdBQUcsV0FBVyxPQUFPLEdBQ255QjM0RixFQUFFKzRGLEdBQUcsU0FBU3gzRixFQUFFMUUsR0FBYyxHQUFYTSxLQUFLbEMsRUFBRXNHLEVBQUVsRyxFQUFLLEdBQUc4QixLQUFLZ2pHLEVBQUUsQ0FBQyxJQUFJaGpHLEtBQUtvRSxFQUFFbEcsSUFBSWtHLEVBQUVBLEVBQUVBLEdBQUcsQ0FBQyxJQUFJdEcsRUFBRWduRyxHQUFHMWdHLEVBQUUsMEJBQTBCcEUsS0FBS3RDLEVBQUVJLEdBQUksS0FBS2tDLEtBQUtvRSxFQUFFQyxJQUFJRCxFQUFFMGdHLEdBQUcxZ0csRUFBRSx3QkFBd0JwRSxLQUFLb0UsRUFBRTY5RixFQUFFNzlGLEdBQUksR0FBRzFFLEVBQUUsQ0FBQyxJQUFJLElBQUkzQixFQUFFaUMsS0FBS29FLEVBQUVtMkYsR0FBR24yRixFQUFFdUgsTUFBTWpNLEdBQUksTUFBTWMsR0FBOEIsT0FBM0JkLEVBQUVNLEtBQUtvRSxHQUFJdkcsRUFBRW1DLEtBQUtsQyxPQUFFaVAsR0FBRXJOLEVBQUUsR0FBVU0sS0FBSzJDLEVBQUU1RSxFQUFFLFFBQVMyQixFQUFFTSxLQUFLb0UsR0FBSXZHLEVBQUVtQyxLQUFLbEMsRUFBRWlQLEdBQUVyTixFQUFFLFFBQVksR0FBR00sS0FBS2dqRyxJQUFLaGpHLEtBQUs2QyxFQUFFdS9GLEdBQUUsR0FBVyxTQUFTMWlHLEdBQU0waUcsR0FBRSxHQUFHcGlHLEtBQUs2QyxHQUFFLElBQUk0NEYsR0FBRyxJQUFJNzBFLE9BQU93MUUsTUFBSXA4RixLQUFLbEMsRUFBRSxJQUFJa0MsS0FBS04sRUFBRWd4QixTQUFTMHhFLEdBQUUsSUFBSXNFLEdBQUcxbUcsS0FBS29FLEVBQUVwRSxNQUFLLE1BQVVvaUcsR0FBRSxHQUFHcGlHLEtBQUs2QyxHQUFFLEtBQzljQSxFQUFFMGhHLEdBQUcsV0FBMkIsR0FBaEJ2a0csS0FBS2xDLEVBQUVrQyxLQUFLTixFQUFFeEIsRUFBSzhCLEtBQUtOLEVBQUVBLEVBQUUsR0FBR00sS0FBS2dqRyxHQUFHaGpHLEtBQUtnakcsRUFBRSxFQUFFeUQsR0FBR3ptRyxPQUFPLEdBQUdBLEtBQUtnakcsSUFBSWhqRyxLQUFLNkMsR0FBR3UvRixHQUFFLElBQUlzRSxHQUFHMW1HLEtBQUtvRSxFQUFFcEUsTUFBSyxLQUFNb2lHLEdBQUUsSUFBSXNFLEdBQUcxbUcsS0FBS29FLEVBQUVwRSxNQUFLLFNBQVUsQ0FBQyxHQUFHQSxLQUFLZ2pHLEVBQUVaLEdBQUUsR0FBRyxHQUFHcGlHLEtBQUtnakcsR0FBR1osR0FBRSxHQUFHLElBQUloK0YsRUFBRXBFLEtBQUtvRSxFQUFFQSxFQUFFdkcsRUFBRW1DLEtBQUtsQyxFQUFFaVAsR0FBRTNJLEVBQUUsS0FBTXZCLEVBQUVraEcsRUFBRSxXQUFXLE9BQU8vakcsS0FBS29FLEVBQUUyL0YsS0FBS2xoRyxFQUFFMGtHLEdBQUcsV0FBVyxPQUFPdm5HLEtBQUtvRSxFQUFFbWpHLE1BQTZLVixHQUFHeG5HLFVBQVU0M0IsSUFBSSxTQUFTN3lCLEdBQUdwRSxLQUFLb0UsRUFBRThQLElBQUk0eUYsR0FBRzFpRyxHQUFHQSxJQUFLeWlHLEdBQUd4bkcsVUFBVXk5RixFQUFFLFdBQVcsT0FBTzk4RixLQUFLb0UsRUFBRTA0RixLQUF1VixJQUFJbUssR0FBRyxHQUFHLFNBQVNPLEdBQUdwakcsRUFBRTFFLElBQUkwRSxFQUFFQSxJQUFJMDJGLEVBQUVwN0YsRUFBRSxTQUFTbzdGLEVBQUVwN0YsRUFBRSxTQUFTbzdGLEVBQUVwN0YsRUFBRSxTQUFTMEUsRUFBRXpCLEVBQUV5QixFQUFFdkIsRUFBRXVCLEVBQUVBLEVBQUUsSUFBSXlpRyxHQUFHemlHLEVBQUUxRSxJQUFJK25HLEdBQUdyakcsRUFBRUEsRUFBRTFFLEdBQUcwRSxFQUFFMUUsRUFBRSxPQUFRLFNBQVNnb0csR0FBR3RqRyxHQUFHLFFBQU9BLEVBQUUxRSxLQUFLMEUsRUFBRUEsR0FBRUEsRUFBRUEsRUFBRUEsRUFBRXRHLEdBQUdzRyxFQUFFekIsRUFDN2hDLFNBQVNnbEcsR0FBR3ZqRyxHQUFHLE9BQU9BLEVBQUUxRSxFQUFFLEVBQUUwRSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFdEcsRUFBRSxFQUFFLFNBQVM4cEcsR0FBR3hqRyxFQUFFMUUsR0FBa0QsT0FBL0MwRSxFQUFFMUUsRUFBRTBFLEVBQUVBLEVBQUUxRSxHQUFHQSxFQUFFMEUsRUFBRUEsR0FBRzFFLEVBQUVvbkcsR0FBR3BuRyxHQUFHMEUsRUFBRWcvRixHQUFFaC9GLEVBQUVBLEVBQUVBLEVBQUUxRSxFQUFFQSxJQUFJMEUsR0FBRSxFQUFVQSxFQUFFLFNBQVNxakcsR0FBR3JqRyxFQUFFMUUsR0FBRzBFLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUU2eUIsSUFBSXYzQixHQUFHMEUsRUFBRTFFLEVBQUVBLEVBQUcsU0FBU21vRyxHQUFHempHLEVBQUUxRSxHQUFnQyxJQUFJNUIsRUFBOUJzRyxFQUFFMUUsR0FBRzBFLEVBQUUxRSxHQUFHQSxFQUFFMEUsRUFBRTFFLEVBQUUsT0FBbUI1QixFQUFFc0csRUFBRUEsS0FBRXRHLEVBQUVncEcsR0FBR3BuRyxHQUFHNUIsRUFBRXNsRyxHQUFFaC9GLEVBQUVBLEVBQUVBLEVBQUUxRSxFQUFFNUIsSUFBR0EsR0FBRzZtRyxHQUFHdmdHLEVBQUVBLEVBQUVBLEVBQUUwaUcsR0FBR3BuRyxLQUM3UCxTQUFTd2dCLEdBQUc5YixHQUFHLEdBQUcsTUFBTUEsRUFBRTFFLEVBQUUsT0FBTzBFLEVBQUV0RyxFQUFFa0csT0FBT0ksRUFBRTFFLEVBQUUyRSxHQUFHLEdBQUcsTUFBTUQsRUFBRUEsR0FBRyxHQUFHQSxFQUFFQSxFQUFFQSxFQUFFdEcsRUFBRSxDQUFDLElBQUk0QixFQUFFMEUsRUFBRXRHLEVBQTRDLE9BQTFDdThGLEVBQUdqMkYsRUFBRUEsRUFBRTA0RixLQUFJLFNBQVNoL0YsR0FBRzRCLEVBQUVBLEVBQUVzRSxPQUFPbEcsRUFBRXVHLE1BQWEzRSxFQUFFLE9BQU8rNkYsRUFBR3IyRixFQUFFdEcsR0FBRyxTQUFTZ3FHLE1BQTBJLFNBQVNDLEtBQUsvbkcsS0FBS29FLEVBQUUsSUFBSTBqRyxHQUFJLFNBQVNFLEdBQUc1akcsRUFBRTFFLEVBQUU1QixHQUFHLElBQUlDLEVBQUVELEdBQUcsR0FBRyxJQUFJMG1HLEdBQUdwZ0csR0FBRSxTQUFTNUQsRUFBRW1DLEdBQUcsSUFBSXkzRixFQUFFNTVGLEVBQUVqQyxFQUFFaUMsS0FBSzQ1RixFQUFFcUcsR0FBR2pnRyxJQUFJZCxFQUFFK0QsS0FBSzFGLEVBQUU0RSxFQUFFLElBQUkrTyxtQkFBbUIwb0YsT0FBUSxNQUFNNTVGLEdBQUcsTUFBTWQsRUFBRStELEtBQUsxRixFQUFFLFFBQVEyVCxtQkFBbUIsWUFBWWxSLEdBQW1WLFNBQVN5bkcsR0FBRzdqRyxFQUFFMUUsRUFBRTVCLEVBQUVDLEVBQUV5QyxHQUFHLElBQUlkLEVBQUV3b0csT0FBTyxLQUFLeG9HLEVBQUU0YixRQUFRLEtBQUs1YixFQUFFcWQsUUFBUSxLQUFLcmQsRUFBRXlvRyxVQUFVLEtBQUszbkcsRUFBRXpDLEdBQUksTUFBTTRFLEtBRHRyQnFrRyxHQUFHM25HLFVBQVVxeEIsT0FBTyxXQUFXMXdCLEtBQUtsQyxFQUFFb2lCLEdBQUdsZ0IsTUFBTUEsS0FBS04sR0FBR00sS0FBS04sRUFBRWd4QixTQUFTMXdCLEtBQUtOLEVBQUUsTUFBTU0sS0FBS29FLEdBQUcsR0FBR3BFLEtBQUtvRSxFQUFFQSxFQUFFdEcsSUFBSXU4RixFQUFHcjZGLEtBQUtvRSxFQUFFMDRGLEtBQUksU0FBUzE0RixHQUFHQSxFQUFFc3NCLFlBYjNZLFNBQVl0c0IsR0FBR0EsRUFBRTFFLEVBQUUsR0FBRzBFLEVBQUVBLEVBQUUvRCxPQUFPLEVBQUUrRCxFQUFFdEcsRUFBRSxFQWFnWHNxRyxDQUFHcG9HLEtBQUtvRSxFQUFFQSxLQUN2UDBqRyxHQUFHem9HLFVBQVUyUyxVQUFVLFNBQVM1TixHQUFHLE9BQU9ELEVBQUV1SCxLQUFLc0csVUFBVTVOLE9BQUUsSUFBUzBqRyxHQUFHem9HLFVBQVVzTSxNQUFNLFNBQVN2SCxHQUFHLE9BQU9ELEVBQUV1SCxLQUFLQyxNQUFNdkgsT0FBRSxJQUF5cEIsSUFBSWlrRyxHQUFHbGtHLEVBQUV1SCxLQUFLQyxNQUFNLFNBQVNxekYsR0FBRTU2RixHQUFHazJGLEdBQUUxOEYsS0FBS29DLE1BQU1BLEtBQUtvbEYsUUFBUSxJQUFJc2YsR0FBRTFrRyxLQUFLNGhHLEVBQUV4OUYsR0FBRyxLQUFLcEUsS0FBS04sR0FBRSxFQUFHTSxLQUFLUixFQUFFUSxLQUFLb0UsRUFBRSxLQUFLcEUsS0FBSzI2RixFQUFFLEdBQUczNkYsS0FBS282RixFQUFFLEVBQUVwNkYsS0FBSzJDLEVBQUUsR0FBRzNDLEtBQUs2QyxFQUFFN0MsS0FBS2c2RixFQUFFaDZGLEtBQUt0QyxFQUFFc0MsS0FBS3FELEdBQUUsRUFBR3JELEtBQUs5QixFQUFFLEVBQUU4QixLQUFLbkMsRUFBRSxLQUFLbUMsS0FBS2lpRyxFQUFFcUcsR0FBR3RvRyxLQUFLKzhGLEVBQUUvOEYsS0FBSzIrRixHQUFFLEVBQUkxRSxFQUFFK0UsR0FBRTFFLElBQUcsSUFBSWdPLEdBQUcsR0FBR0MsR0FBRyxZQUFZQyxHQUFHLENBQUMsT0FBTyxPQUdob0MsU0FBU2pFLEdBQUduZ0csR0FBRyxNQUFPLGdCQUFnQkEsRUFBRTZ3RixjQUF5SyxTQUFTd1QsR0FBR3JrRyxFQUFFMUUsR0FBRzBFLEVBQUUxRSxHQUFFLEVBQUcwRSxFQUFFQSxJQUFJQSxFQUFFdkIsR0FBRSxFQUFHdUIsRUFBRUEsRUFBRWk2QixRQUFRajZCLEVBQUV2QixHQUFFLEdBQUl1QixFQUFFekIsRUFBRWpELEVBQUUwRSxFQUFFZzJGLEVBQUUsRUFBRXNPLEdBQUd0a0csR0FBR3VrRyxHQUFHdmtHLEdBQUksU0FBU3NrRyxHQUFHdGtHLEdBQUdBLEVBQUVmLElBQUllLEVBQUVmLEdBQUUsRUFBR2UsRUFBRW84RixjQUFjLFlBQVlwOEYsRUFBRW84RixjQUFjLFVBRS9hLFNBQVNvSSxHQUFHeGtHLEdBQUcsR0FBR0EsRUFBRTFFLFFBQUcsSUFBb0I4NUYsS0FBUXAxRixFQUFFNUUsRUFBRSxJQUFJLEdBQUcwakcsR0FBRTkrRixJQUFJLEdBQUdBLEVBQUV5Z0csS0FBSyxHQUFHemdHLEVBQUUxRyxHQUFHLEdBQUd3bEcsR0FBRTkrRixHQUFHbzlGLEdBQUdwOUYsRUFBRXUzRixHQUFHLEVBQUV2M0YsUUFBUSxHQUFHQSxFQUFFbzhGLGNBQWMsb0JBQW9CLEdBQUcwQyxHQUFFOStGLEdBQUcsQ0FBQ0EsRUFBRTFFLEdBQUUsRUFBRyxJQUFJLElBQTJIM0IsRUFBdkgyQixFQUFFMEUsRUFBRXlnRyxJQUFJemdHLEVBQUUsT0FBTzFFLEdBQUcsS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLElBQUksS0FBSyxLQUFLLElBQUk1QixHQUFFLEVBQUcsTUFBTXNHLEVBQUUsUUFBUXRHLEdBQUUsRUFBVSxLQUFLQyxFQUFFRCxHQUFHLENBQUMsSUFBSTBDLEVBQUUsR0FBR0EsRUFBRSxJQUFJZCxFQUFFLENBQUMsSUFBSWlELEVBQUUwRixPQUFPakUsRUFBRXUyRixHQUFHL2hGLE1BQU1tc0YsSUFBSSxJQUFJLEtBQUssSUFBSXBpRyxHQUFHd0IsRUFBRTRMLE1BQU01TCxFQUFFNEwsS0FBSzg0RixTQUFTLENBQUMsSUFBSXpPLEVBQUVqMkYsRUFBRTRMLEtBQUs4NEYsU0FBU0MsU0FBU25tRyxFQUFFeTNGLEVBQUVqdUIsT0FBTyxFQUFFaXVCLEVBQUUvNUYsT0FBTyxHQUFJRyxHQUFHK25HLEdBQUdwNEYsS0FBS3hOLEVBQUVBLEVBQUVzeUYsY0FBYyxJQUFLbDNGLEVBQUV5QyxFQUFHLEdBQUd6QyxFQUFFcUcsRUFBRW84RixjQUFjLFlBQy9mcDhGLEVBQUVvOEYsY0FBYyxlQUFlLENBQUNwOEYsRUFBRWcyRixFQUFFLEVBQUUsSUFBSSxJQUFJMThGLEVBQUUsRUFBRXdsRyxHQUFFOStGLEdBQUdBLEVBQUVBLEVBQUUya0csV0FBVyxHQUFJLE1BQU16SSxHQUFHNWlHLEVBQUUsR0FBSTBHLEVBQUV6QixFQUFFakYsRUFBRSxLQUFLMEcsRUFBRXlnRyxJQUFJLElBQUk2RCxHQUFHdGtHLElBQUssUUFBUXVrRyxHQUFHdmtHLEtBQU0sU0FBU3VrRyxHQUFHdmtHLEVBQUUxRSxHQUFHLEdBQUcwRSxFQUFFQSxFQUFFLENBQUM0a0csR0FBRzVrRyxHQUFHLElBQUl0RyxFQUFFc0csRUFBRUEsRUFBRXJHLEVBQUVxRyxFQUFFNUUsRUFBRSxHQUFHazZGLEVBQUcsS0FBS3QxRixFQUFFQSxFQUFFLEtBQUtBLEVBQUU1RSxFQUFFLEtBQUtFLEdBQUcwRSxFQUFFbzhGLGNBQWMsU0FBUyxJQUFJMWlHLEVBQUVtckcsbUJBQW1CbHJHLEVBQUcsTUFBTXlDLE1BQU0sU0FBU3dvRyxHQUFHNWtHLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUUyNEYsSUFBSTM0RixFQUFFQSxFQUFFK2pHLFVBQVUsTUFBTS9qRyxFQUFFdkcsSUFBSXNHLEVBQUV5c0IsYUFBYXhzQixFQUFFdkcsR0FBR3VHLEVBQUV2RyxFQUFFLE1BQU8sU0FBU3FsRyxHQUFFOStGLEdBQUcsT0FBT0EsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRThrRyxXQUFXLEVBQ2pOLFNBQVNwRSxHQUFHMWdHLEVBQUUxRSxHQUFHLE9BQU8wRSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFK2tHLGtCQUFrQnpwRyxHQUFHLEtBQThLLFNBQVMwcEcsR0FBR2hsRyxFQUFFMUUsRUFBRTVCLEdBQUdzRyxFQUFFLENBQUMsSUFBSXJHLEtBQUtELEVBQUUsQ0FBQyxJQUFJQyxHQUFFLEVBQUcsTUFBTXFHLEVBQUVyRyxHQUFFLEVBQUksR0FBR0EsRUFBRSxPQUFPcUcsRUFBVSxHQUFSdEcsRUFBekosU0FBWXNHLEdBQUcsSUFBSTFFLEVBQUUsR0FBb0QsT0FBakR3N0YsRUFBRzkyRixHQUFFLFNBQVN0RyxFQUFFQyxHQUFHMkIsR0FBRzNCLEVBQUUyQixHQUFHLElBQUlBLEdBQUc1QixFQUFFNEIsR0FBRyxVQUFpQkEsRUFBMkUycEcsQ0FBR3ZyRyxHQUFNRCxFQUFFdUcsR0FBRyxDQUFnRixHQUEvRTFFLEVBQUVnUyxtQkFBbUJySixPQUFPM0ksSUFBc0RBLEdBQWxENUIsRUFBRSxNQUFNQSxFQUFFLElBQUk0VCxtQkFBbUJySixPQUFPdkssSUFBSSxHQUFXLENBQXFELEdBQW5DLEdBQWpCQSxFQUFFc0csRUFBRTNELFFBQVEsUUFBVzNDLEVBQUVzRyxFQUFFL0QsUUFBNEIsR0FBcEJ0QyxFQUFFcUcsRUFBRTNELFFBQVEsT0FBYTFDLEVBQUVELEVBQUUsQ0FBQ0MsRUFBRUQsRUFBRSxJQUFJMEMsRUFBRSxRQUFTQSxFQUFFNEQsRUFBRStrQixVQUFVcHJCLEVBQUUsRUFBRUQsR0FBbUNBLEdBQWhDc0csRUFBRSxDQUFDQSxFQUFFK25FLE9BQU8sRUFBRXB1RSxHQUFHeUMsRUFBRTRELEVBQUUrbkUsT0FBT3J1RSxLQUFRLEdBQUdzRyxFQUFFLEdBQUcxRSxFQUFFNUIsRUFBRUEsRUFBRSxJQUFJNEIsRUFBRUEsRUFBRTVCLEVBQUVzRyxFQUFFQSxFQUFFLElBQUlBLEVBQUUsR0FBRyxJQUFJQSxFQUFFLEdBQUcsSUFBSUEsRUFBRSxHQUFJLE9BQU9BLEVBQVcsT0FBVHlnRyxHQUFFemdHLEVBQUUxRSxFQUFFNUIsR0FBVXNHLEVBQUUsU0FBU2tsRyxHQUFHbGxHLEdBQUdwRSxLQUFLMkMsRUFBRSxHQUFHM0MsS0FBSzIrRixFQUFFLElBQUlpSSxHQUFHNW1HLEtBQUt1cEcsR0FBR3ZwRyxLQUFLeTZGLEdBQUd6NkYsS0FBS3k3RixFQUFFejdGLEtBQUt3cEcsR0FBR3hwRyxLQUFLb0UsRUFBRXBFLEtBQUtpaUcsRUFBRWppRyxLQUFLcUUsRUFBRXJFLEtBQUtpakcsRUFBRWpqRyxLQUFLNkMsRUFBRTdDLEtBQUtvZ0csRUFBRXBnRyxLQUFLdkMsRUFBRSxLQUFLdUMsS0FBSzQ4RixHQUFHNThGLEtBQUs2QixFQUFFLEVBQUU3QixLQUFLeThGLEtBQUt2OUYsRUFBRSxpQ0FBaUNrRixHQUFHcEUsS0FBS3lwRyxHQUFHenBHLEtBQUtnNkYsRUFBRWg2RixLQUFLUixFQUFFUSxLQUFLdEMsRUFBRXNDLEtBQUtvNkYsRUFBRXA2RixLQUFLbEMsRUFBRSxLQUFLa0MsS0FBS3c2RixJQUFHLEVBQUd4NkYsS0FBS25DLEVBQUVtQyxLQUFLNDZGLEdBQUc1NkYsS0FBS2tqRyxHQUFHLEVBQUVsakcsS0FBS3FqRyxFQUFFcmpHLEtBQUtxRCxFQUFFckQsS0FBSzI2RixFQUFFLEVBQUUzNkYsS0FBS284RixHQUFHbDlGLEVBQUUseUNBQXlDa0YsSUFBSSxJQUFJcEUsS0FBSzY4RixHQUFHMzlGLEVBQUUseUNBQXlDa0YsSUFBSSxJQUFJcEUsS0FBSzI4RixHQUFHejlGLEVBQUUsaURBQWlEa0YsSUFBSSxFQUFFcEUsS0FBSzA2RixHQUFHeDdGLEVBQUUsdURBQzd4Q2tGLElBQUksSUFBSXBFLEtBQUtpOEYsR0FBRzczRixHQUFHQSxFQUFFZzlGLFNBQUksRUFBT3BoRyxLQUFLKzhGLE9BQUUsRUFBTy84RixLQUFLb2pHLEVBQUVoL0YsR0FBR0EsRUFBRXl4Rix5QkFBd0IsRUFBRzcxRixLQUFLNGhHLEVBQUUsR0FBRzVoRyxLQUFLTixFQUFFLElBQUlzbkcsR0FBRzVpRyxHQUFHQSxFQUFFc2xHLHdCQUF3QjFwRyxLQUFLdTZGLEdBQUcsSUFBSXdOLEdBQUcvbkcsS0FBSzlCLEdBQUVrRyxRQUFHLElBQVNBLEVBQUVveEYsdUJBQXNCcHhGLEVBQUVveEYsdUJBQTBCeDFGLEtBQUsrTSxFQUFFM0ksR0FBR0EsRUFBRXVsRyxnQkFBZSxLQUFNM3BHLEtBQUs5QixJQUFJOEIsS0FBSzlCLEdBQUUsR0FBSWtHLEdBQUdBLEVBQUUybkIsbUJBQW1CL3JCLEtBQUt3NkYsSUFBRyxHQUFJeDZGLEtBQUs4NUYsUUFBRyxFQUNqVSxTQUFTOFAsR0FBR3hsRyxHQUFTLEdBQU55bEcsR0FBR3psRyxHQUFNLEdBQUdBLEVBQUVvRSxFQUFFLENBQUMsSUFBSTlJLEVBQUUwRSxFQUFFdkMsSUFBSS9ELEVBQUVvOEYsR0FBRTkxRixFQUFFcTNGLEdBQUdvSixHQUFFL21HLEVBQUUsTUFBTXNHLEVBQUV3OUYsR0FBR2lELEdBQUUvbUcsRUFBRSxNQUFNNEIsR0FBR21sRyxHQUFFL21HLEVBQUUsT0FBTyxhQUFhZ3NHLEdBQUcxbEcsRUFBRXRHLElBQUc0QixFQUFFLElBQUlzakcsR0FBRTUrRixFQUFFMUUsT0FBRSxJQUFVaS9GLEVBQUUsRUFBRWovRixFQUFFaUQsRUFBRThnRyxHQUFHdkosR0FBRXA4RixJQUFJQSxHQUFFLEVBQUdxRyxFQUFFNkYsV0FBVzdGLEVBQUU2RixVQUFVKy9GLGFBQWFqc0csRUFBRXFHLEVBQUU2RixVQUFVKy9GLFdBQVdycUcsRUFBRWlELEVBQUU2SSxXQUFXLE1BQU0xTixHQUFHcUcsRUFBRTZsRyxTQUFRLElBQUtBLE9BQU9sTCxJQUFJcC9GLEVBQUVpRCxFQUFFN0UsR0FBRSxHQUFJQSxJQUFJNEIsRUFBRTBFLEVBQUUxRSxFQUFFbUQsRUFBRWloRyxFQUFFLE1BQU1wa0csRUFBRTBFLEVBQUV1MUYsR0FBR2o2RixFQUFFaUQsSUFBSWpELEVBQUUyRCxFQUFFMjJGLElBQUk0SixHQUFHbGtHLEdBQUl1cUcsR0FBRzdsRyxHQUMzVSxTQUFTeWxHLEdBQUd6bEcsR0FBR0EsRUFBRTQxRixJQUFJNTFGLEVBQUU0MUYsRUFBRTM3RCxRQUFRajZCLEVBQUU0MUYsRUFBRSxNQUFNNTFGLEVBQUVBLElBQUlBLEVBQUVBLEVBQUVzc0IsU0FBU3RzQixFQUFFQSxFQUFFLE1BQU1BLEVBQUUxRyxJQUFJeUcsRUFBRXlzQixhQUFheHNCLEVBQUUxRyxHQUFHMEcsRUFBRTFHLEVBQUUsTUFBTXdzRyxHQUFHOWxHLEdBQUdBLEVBQUUxRSxFQUFFZ3hCLFNBQVN0c0IsRUFBRWcyRixJQUFJWCxFQUFHcjFGLEVBQUVnMkYsSUFBSWoyRixFQUFFeXNCLGFBQWF4c0IsRUFBRWcyRixHQUFHaDJGLEVBQUVnMkYsRUFBRSxNQUFPLFNBQVMrUCxHQUFHL2xHLEVBQUUxRSxHQUFHMEUsRUFBRXpCLEVBQUVjLEtBQUssSUFBSXNqRyxHQUFHM2lHLEVBQUV3NEYsS0FBS2w5RixJQUFJLEdBQUcwRSxFQUFFb0UsR0FBRzRoRyxHQUFHaG1HLEdBQXNDLFNBQVNnbUcsR0FBR2htRyxHQUFHc2pHLEdBQUd0akcsRUFBRTFFLElBQUkwRSxFQUFFZzJGLElBQUloMkYsRUFBRWcyRixHQUFFLEVBQUc2RyxHQUFHNzhGLEVBQUUwM0YsR0FBRzEzRixHQUFHQSxFQUFFdTJGLEVBQUUsR0FJOVQsU0FBUzBQLEdBQUdqbUcsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUlBLEVBQUY0QixFQUFJQSxFQUFFcU4sRUFBSTNJLEVBQUV2QyxJQUFJLElBQUk5RCxFQUFFbThGLEdBQUU5MUYsRUFBRXEzRixHQUFHb0osR0FBRTltRyxFQUFFLE1BQU1xRyxFQUFFdzlGLEdBQUdpRCxHQUFFOW1HLEVBQUUsTUFBTUQsR0FBRyttRyxHQUFFOW1HLEVBQUUsTUFBTXFHLEVBQUU4K0YsR0FBRzRHLEdBQUcxbEcsRUFBRXJHLEdBQUdxRyxFQUFFdkIsR0FBR3VCLEVBQUUzRyxHQUFHMnJHLEdBQUdyckcsRUFBRXFHLEVBQUV2QixFQUFFdUIsRUFBRTNHLEdBQUdLLEVBQUUsSUFBSWtsRyxHQUFFNStGLEVBQUV0RyxFQUFFc0csRUFBRXUyRixFQUFFLEdBQUcsT0FBT3YyRixFQUFFdkIsSUFBSS9FLEVBQUVzOEYsRUFBRWgyRixFQUFFM0csR0FBR2lDLElBQUkwRSxFQUFFekIsRUFBRWpELEVBQUUyRSxFQUFFTCxPQUFPSSxFQUFFekIsSUFBSWpELEVBQUU0cUcsR0FBR2xtRyxFQUFFdEcsRUFBRSxLQUFLQSxFQUFFeXlCLFdBQVczZixLQUFLMjVGLE1BQU0sR0FBR25tRyxFQUFFczJGLElBQUk5cEYsS0FBSzI1RixNQUFNLEdBQUdubUcsRUFBRXMyRixHQUFHOXBGLEtBQUtxWixXQUFXdzlFLEdBQUdyakcsRUFBRTFFLEVBQUU1QixHQUFHMGxHLEdBQUcxbEcsRUFBRUMsRUFBRTJCLEdBQUksU0FBU29xRyxHQUFHMWxHLEVBQUUxRSxHQUFHMEUsRUFBRXRHLEdBQUcwbUcsR0FBRyxJQUFHLFNBQVMxbUcsRUFBRUMsR0FBRzhtRyxHQUFFbmxHLEVBQUUzQixFQUFFRCxNQUN4VixTQUFTd3NHLEdBQUdsbUcsRUFBRTFFLEVBQUU1QixHQUFHQSxFQUFFOFMsS0FBS3lkLElBQUlqcUIsRUFBRXpCLEVBQUV0QyxPQUFPdkMsR0FBRyxJQUFJQyxFQUFFcUcsRUFBRXRHLEVBQUUwSyxFQUFFcEUsRUFBRXRHLEVBQUVxZ0csR0FBRy81RixFQUFFdEcsRUFBRXNHLEdBQUcsS0FBS0EsRUFBRSxJQUFJLElBQUk1RCxFQUFFNEQsRUFBRXpCLEVBQUVBLEdBQUcsSUFBSSxDQUFDLElBQUl5M0YsRUFBRSxDQUFDLFNBQVN0OEYsSUFBSSxHQUFHNkUsRUFBRSxFQUFFN0UsR0FBRzZFLEVBQUVuQyxFQUFFLEdBQUdkLEVBQUUwNkYsRUFBRTMyRixLQUFLLE9BQU9kLElBQUlBLEVBQUUsRUFBRXkzRixFQUFFMzJGLEtBQUssT0FBT2QsR0FBRyxJQUFJLElBQUlqRixHQUFFLEVBQUc0aUcsRUFBRSxFQUFFQSxFQUFFeGlHLEVBQUV3aUcsSUFBSSxDQUFDLElBQUlrSyxFQUFHaHFHLEVBQUU4L0YsR0FBRzVnRyxFQUFFK3FHLEVBQUdqcUcsRUFBRTgvRixHQUFHbDhGLEVBQVEsR0FBRyxHQUFUb21HLEdBQUk3bkcsR0FBVUEsRUFBRWlPLEtBQUtrYyxJQUFJLEVBQUV0c0IsRUFBRTgvRixHQUFHNWdHLEVBQUUsS0FBS2hDLEdBQUUsT0FBUSxJQUFJc3FHLEdBQUd5QyxFQUFHclEsRUFBRSxNQUFNb1EsRUFBRyxLQUFNLE1BQU1FLEdBQUkzc0csR0FBR0EsRUFBRTBzRyxJQUFNLEdBQUcvc0csRUFBRSxDQUFDSyxFQUFFcThGLEVBQUV0eUYsS0FBSyxLQUFLLE1BQU0xRCxHQUEyQixPQUF4QkEsRUFBRUEsRUFBRXpCLEVBQUVnZ0IsT0FBTyxFQUFFN2tCLEdBQUc0QixFQUFFMkUsRUFBRUQsRUFBU3JHLEVBQUUsU0FBUzRzRyxHQUFHdm1HLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUUxRyxJQUFJMEcsRUFBRWkvRixFQUFFLEVBQUVwQyxHQUFHNzhGLEVBQUV5M0YsR0FBR3ozRixHQUFHQSxFQUFFZixFQUFFLEdBQ2piLFNBQVN1bkcsR0FBR3htRyxHQUFHLFFBQUdBLEVBQUVBLEdBQUdBLEVBQUUxRyxHQUFHLEdBQUcwRyxFQUFFZixLQUFZZSxFQUFFaS9GLElBQUlqL0YsRUFBRTFHLEVBQUU0a0csR0FBRzk1RixFQUFFcEUsRUFBRXkzRixHQUFHejNGLEdBQUd5bUcsR0FBR3ptRyxFQUFFQSxFQUFFZixJQUFJZSxFQUFFZixLQUFXLEdBQzVGLFNBQVNxakcsR0FBR3RpRyxFQUFFMUUsRUFBRTVCLEdBQUcsSUFBSUMsRUFBRTJCLEVBQUVoQyxFQUFFSyxHQUFHeXBHLEdBQUdwakcsRUFBRTFFLEVBQUUzQixHQUFHcUcsRUFBRXFsRyxHQUFHcmxHLEVBQUVvMkYsSUFBSTE4RixFQUFFc0csRUFBRXZHLEVBQUU2QixFQUFFNUIsRUFBRXNHLEVBQUVxM0YsRUFBRWtMLEdBQUd2aUcsRUFBRSxLQUFLQSxFQUFFb2xHLElBQUlZLEdBQUdobUcsR0FHZ08sU0FBUzhsRyxHQUFHOWxHLEdBQUcsTUFBTUEsRUFBRTVFLElBQUkyRSxFQUFFeXNCLGFBQWF4c0IsRUFBRTVFLEdBQUc0RSxFQUFFNUUsRUFBRSxNQUV6VyxTQUFTcXJHLEdBQUd6bUcsRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUVzRyxFQUFFZzRGLEdBQUd4ckYsS0FBS0MsTUFBTUQsS0FBS3FaLFNBQVM3bEIsRUFBRXk0RixJQUFtQixPQUFmejRGLEVBQUVtakcsT0FBT3pwRyxHQUFHLEdBQVVBLEVBQUU0QixFQUFFLFNBQVNxTixHQUFFM0ksRUFBRTFFLEdBQUcsR0FBRyxHQUFHQSxFQUFFLENBQUMsSUFBSTVCLEVBQUUsS0FBS3NHLEVBQUV0RyxJQUFJQSxFQUFFLE1BQU0sSUFBSUMsRUFBRXlLLEVBQUVwRSxFQUFFcTdGLEdBQUdyN0YsR0FBR3RHLElBQUlBLEVBQUUsSUFBSXVsRyxHQUFFLHdDQUF3Q2wvRixFQUFFMGtHLFVBQVUsUUFBUTFrRyxFQUFFMGtHLFNBQVNDLFVBQVU5RCxHQUFHbG5HLEVBQUUsU0FBUzJsRyxHQUFHM2xHLElBdEJpUSxTQUFZc0csRUFBRTFFLEdBQUcsSUFBSTVCLEVBQUUsSUFBSWtrRyxHQUFHLEdBQUc3OUYsRUFBRTZsRyxNQUFNLENBQUMsSUFBSWpzRyxFQUFFLElBQUlpc0csTUFBTWpzRyxFQUFFbXFHLE9BQU83a0csRUFBRTRrRyxHQUFHbnFHLEVBQUVDLEVBQUUseUJBQXdCLEVBQUcyQixHQUFHM0IsRUFBRXVkLFFBQVFqWSxFQUFFNGtHLEdBQUducUcsRUFBRUMsRUFBRSx3QkFBdUIsRUFBRzJCLEdBQUczQixFQUFFZ2YsUUFBUTFaLEVBQUU0a0csR0FBR25xRyxFQUFFQyxFQUFFLHdCQUF1QixFQUFHMkIsR0FBRzNCLEVBQUVvcUcsVUFBVTlrRyxFQUFFNGtHLEdBQUducUcsRUFBRUMsRUFBRSwwQkFBeUIsRUFBRzJCLEdBQUd5RSxFQUFFb3NCLFlBQVcsV0FBY3h5QixFQUFFb3FHLFdBQVVwcUcsRUFBRW9xRyxjQUFjLEtBQUtwcUcsRUFBRStnRyxJQUFJMTZGLE9BQVExRSxHQUFFLEdBc0J2a0JvckcsQ0FBR2h0RyxFQUFFME4sV0FBV3pOLFFBQVNxa0csR0FBRSxHQUFHaCtGLEVBQUVvRSxFQUFFLEVBQUVwRSxFQUFFdEcsR0FBR3NHLEVBQUV0RyxFQUFFazlGLEdBQUd0N0YsR0FBR3VxRyxHQUFHN2xHLEdBQUd5bEcsR0FBR3psRyxHQUFtQyxTQUFTNmxHLEdBQUc3bEcsR0FBR0EsRUFBRW9FLEVBQUUsRUFBRXBFLEVBQUV2RyxHQUFHLEVBQUt1RyxFQUFFdEcsSUFBTSxHQUFHb2lCLEdBQUc5YixFQUFFMUUsR0FBR1csUUFBUSxHQUFHK0QsRUFBRXpCLEVBQUV0QyxTQUFPK0QsRUFBRTFFLEVBQUU1QixFQUFFdUMsT0FBTyxFQUFFbzZGLEVBQUdyMkYsRUFBRXpCLEdBQUd5QixFQUFFekIsRUFBRXRDLE9BQU8sR0FBRStELEVBQUV0RyxFQUFFaTlGLE1BQ3hkLFNBQVM0TCxHQUFHdmlHLEVBQUUxRSxFQUFFNUIsR0FBRyxJQUFJQyxFQWhDbU4sU0FBWXFHLEdBQUcsT0FBT0EsYUFBYWkvRixHQUFFbkosR0FBRTkxRixHQUFHLElBQUlpL0YsR0FBRWovRixPQUFFLEdBZ0NuUTJtRyxDQUFHanRHLEdBQUcsR0FBRyxJQUFJQyxFQUFFMkIsRUFBRUEsR0FBR3VsRyxHQUFHbG5HLEVBQUUyQixFQUFFLElBQUkzQixFQUFFMkIsR0FBR3dsRyxHQUFHbm5HLEVBQUVBLEVBQUVOLE9BQU8sQ0FBQyxJQUFpQmtGLEVBQWJuQyxFQUFFMkQsRUFBRTBrRyxTQUFhbG1HLEVBQUZqRCxFQUFJQSxFQUFFLElBQUljLEVBQUV3cUcsU0FBV3hxRyxFQUFFd3FHLFNBQVNqdEcsRUFoQ21LLFNBQVlxRyxFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUcsSUFBSXlDLEVBQUUsSUFBSTZpRyxHQUFFLFVBQUssR0FBb0QsT0FBNUNqL0YsR0FBRzRnRyxHQUFHeGtHLEVBQUU0RCxHQUFHMUUsR0FBR3VsRyxHQUFHemtHLEVBQUVkLEdBQUc1QixHQUFHb25HLEdBQUcxa0csRUFBRTFDLEdBQUdDLElBQUl5QyxFQUFFNEQsRUFBRXJHLEdBQVV5QyxFQWdDbFF5cUcsQ0FBR3pxRyxFQUFFc29HLFNBQVNubUcsR0FBR25DLEVBQUUwcUcsS0FBS3B0RyxHQUE2RixPQUF6RnNHLEVBQUU2K0YsR0FBRy9ILEVBQUc5MkYsRUFBRTYrRixHQUFFLFNBQVM3SSxFQUFFMThGLEdBQUdtbkcsR0FBRTltRyxFQUFFTCxFQUFFMDhGLE1BQU0xNkYsRUFBRTBFLEVBQUVDLEVBQUV2RyxFQUFFc0csRUFBRTY5RixFQUFFdmlHLEdBQUc1QixHQUFHK21HLEdBQUU5bUcsRUFBRTJCLEVBQUU1QixHQUFHK21HLEdBQUU5bUcsRUFBRSxNQUFNcUcsRUFBRSsyRixJQUFJMk8sR0FBRzFsRyxFQUFFckcsR0FBVUEsRUFBNE0sU0FBU290RyxNQUM1TCxTQUFTQyxLQUFLLEdBQUczUCxLQUFLLElBQUk3MEUsT0FBT3cxRSxJQUFLLE1BQU1uMkYsTUFBTSxnREFDMVUsU0FBUzg5RixHQUFFMy9GLEVBQUUxRSxHQUFHNDZGLEdBQUUxOEYsS0FBS29DLE1BQU1BLEtBQUtvRSxFQUFFLElBQUlrbEcsR0FBRzVwRyxHQUFHTSxLQUFLNkMsRUFBRXVCLEVBQUVwRSxLQUFLbkMsRUFBRTZCLEdBQUdBLEVBQUUyckcsUUFBUTNyRyxFQUFFMnJHLFFBREwsU0FBWWpuRyxHQUFHLElBQUksSUFBSTFFLEVBQUVVLFVBQVUsR0FBR3RDLEVBQUUsRUFBRUEsRUFBRXNDLFVBQVVDLE9BQU92QyxJQUFJLENBQUMsSUFBMkQwQyxFQUF2RHpDLEVBQUVxQyxVQUFVdEMsR0FBRyxHQUFHLEdBQUdDLEVBQUVzb0csWUFBWSxJQUFJLEdBQUczbUcsRUFBRTNCLE9BQWN5QyxFQUFFLElBQUlkLEtBQWtCYyxFQUFFLElBQWZBLEVBQUVkLEVBQUVXLE9BQU8sSUFBVVgsRUFBRWUsUUFBUSxJQUFJRCxJQUFJQSxHQUFLZCxHQUFGYyxFQUFLekMsRUFBSyxJQUFJQSxFQUFJLE9BQU8yQixFQUNqTTRyRyxDQUFHdHJHLEtBQUs2QyxFQUFFLFFBQVE3QyxLQUFLTixFQUFFQSxHQUFHQSxFQUFFaTJGLGtCQUFrQixLQUFLdnhGLEVBQUUxRSxHQUFHQSxFQUFFNnJHLGdCQUFnQixLQUFLN3JHLEdBQUdBLEVBQUU4ckcsK0JBQStCcG5HLEVBQUVBLEVBQUUscUJBQXFCLGFBQWFBLEVBQUUsQ0FBQyxvQkFBb0IsZUFBZXBFLEtBQUtvRSxFQUFFM0csRUFBRTJHLEVBQUVBLEVBQUUxRSxHQUFHQSxFQUFFZzJGLG9CQUFvQixLQUFLaDJGLEdBQUdBLEVBQUUrckcscUJBQXFCcm5HLEVBQUVBLEVBQUUsNkJBQTZCMUUsRUFBRStyRyxtQkFBbUJybkcsRUFBRSxDQUFDLDRCQUE0QjFFLEVBQUUrckcscUJBQXFCL3JHLEdBQUdBLEVBQUUwN0YsS0FBS2gzRixFQUFFQSxFQUFFLCtCQUErQjFFLEVBQUUwN0YsR0FDdGZoM0YsRUFBRSxDQUFDLDhCQUE4QjFFLEVBQUUwN0YsS0FBS3A3RixLQUFLb0UsRUFBRWc4RixFQUFFaDhGLEdBQUdBLEVBQUUxRSxHQUFHQSxFQUFFczJGLDZCQUE2QjBFLEVBQUd0MkYsS0FBS3BFLEtBQUtvRSxFQUFFdkIsRUFBRXVCLEdBQUdwRSxLQUFLdEMsRUFBRWdDLEdBQUdBLEVBQUVtMkYseUJBQXdCLEVBQUc3MUYsS0FBS282RixFQUFFMTZGLEdBQUdBLEVBQUVrMkYsY0FBYSxHQUFJbDJGLEVBQUVBLEdBQUdBLEVBQUUrMUYsc0JBQXNCaUYsRUFBR2g3RixLQUFLTSxLQUFLb0UsRUFBRUMsRUFBRTNFLEVBQVcsUUFBVDBFLEVBQUVwRSxLQUFLTixJQUFZQSxLQUFLMEUsSUFBYTFFLEtBQVQwRSxFQUFFcEUsS0FBS04sV0FBaUIwRSxFQUFFMUUsS0FBS00sS0FBSzJDLEVBQUUsSUFBSXM4RixHQUFFai9GLE1BRW5GLFNBQVMwckcsR0FBR3RuRyxHQUFHeStGLEdBQUdqbEcsS0FBS29DLE1BQU0sSUFBSU4sRUFBRTBFLEVBQUV1bkcsT0FBTyxHQUFHanNHLEVBQUUsQ0FBQzBFLEVBQUUsQ0FBQyxJQUFJLElBQUl0RyxLQUFLNEIsRUFBRSxDQUFDMEUsRUFBRXRHLEVBQUUsTUFBTXNHLEVBQUVBLE9BQUUsR0FBU3BFLEtBQUtsQyxFQUFFc0csSUFBSUEsRUFBRXBFLEtBQUtsQyxFQUFFa0MsS0FBSzBLLEtBQUssT0FBT2hMLEdBQUcwRSxLQUFLMUUsRUFBRUEsRUFBRTBFLFFBQUcsR0FBUXBFLEtBQUswSyxLQUFLaEwsT0FBUU0sS0FBSzBLLEtBQUt0RyxFQUFZLFNBQVN3bkcsS0FBSzlJLEdBQUdsbEcsS0FBS29DLE1BQU1BLEtBQUttbkUsT0FBTyxFQUFZLFNBQVM4M0IsR0FBRTc2RixHQUFHcEUsS0FBS29FLEVBQUVBLEdBNUI2dUJ2QixFQUFFbThGLEdBQUUzL0YsV0FDN3NDczZGLEdBQUcsU0FBU3YxRixFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUcsR0FBR2lDLEtBQUtvRSxFQUFFLE1BQU02QixNQUFNLDBEQUEwRGpHLEtBQUsyNkYsRUFBRSxZQUFZdjJGLEdBQUcxRSxFQUFFQSxFQUFFQSxFQUFFbXNHLGNBQWMsTUFBTTdyRyxLQUFLMjZGLEVBQUV2MkYsRUFBRXBFLEtBQUsyQyxFQUFFLEdBQUczQyxLQUFLbzZGLEVBQUUsRUFBRXA2RixLQUFLcUQsR0FBRSxFQUFHckQsS0FBS04sR0FBRSxFQUFHTSxLQUFLb0UsRUFBRSxJQUFJMG5HLGVBQWU5ckcsS0FBS1IsRUFBRVEsS0FBSzRoRyxFQUFFYyxHQUFHMWlHLEtBQUs0aEcsR0FBR2MsR0FBR0UsSUFBSTVpRyxLQUFLb0UsRUFBRTZrRyxtQkFBbUJ6Z0csRUFBRXhJLEtBQUsyN0YsR0FBRzM3RixNQUFNLElBQUlBLEtBQUtnNkYsR0FBRSxFQUFHaDZGLEtBQUtvRSxFQUFFODNCLEtBQUt4OEIsRUFBRTJJLE9BQU9qRSxJQUFHLEdBQUlwRSxLQUFLZzZGLEdBQUUsRUFBSSxNQUFNcjNGLEdBQWMsWUFBWDhsRyxHQUFHem9HLEtBQUsyQyxHQUFVeUIsRUFBRXRHLEdBQUcsR0FBRyxJQUFJMEMsRUFBRSxJQUFJa2tHLEdBQUUxa0csS0FBS29sRixTQUFTcm5GLEdBQUd5bUcsR0FBR3ptRyxHQUFFLFNBQVM0RSxFQUFFeTNGLEdBQUc1NUYsRUFBRTBULElBQUlrbUYsRUFBRXozRixNQUFNNUUsRUFwQ2pjLFNBQVlxRyxHQUFHQSxFQUFFLENBQVUsSUFBVCxJQUFJMUUsRUFBRTZrRyxHQUFXem1HLEVBQUVzRyxFQUFFL0QsT0FBT3RDLEVBQUVGLEVBQUV1RyxHQUFHQSxFQUFFOEgsTUFBTSxJQUFJOUgsRUFBRTVELEVBQUUsRUFBRUEsRUFBRTFDLEVBQUUwQyxJQUFJLEdBQUdBLEtBQUt6QyxHQUFHMkIsRUFBRTlCLFVBQUssRUFBT0csRUFBRXlDLEdBQUdBLEVBQUU0RCxHQUFHLENBQUMxRSxFQUFFYyxFQUFFLE1BQU00RCxFQUFFMUUsR0FBRyxFQUFHLE9BQU8sRUFBRUEsRUFBRSxLQUFLN0IsRUFBRXVHLEdBQUdBLEVBQUV5RSxPQUFPbkosR0FBRzBFLEVBQUUxRSxHQW9DMlI2bkcsQ0FBRy9tRyxFQUFFNGhHLEtBQUt0a0csRUFBRXFHLEVBQUU0bkcsVUFBVTNuRyxhQUFhRCxFQUFFNG5HLFdBQVcsR0FDcmZ4UixFQUFHaU8sR0FBRzlvRyxLQUFLM0IsR0FBR0QsR0FBRzBDLEVBQUUwVCxJQUFJLGVBQWUsbURBQW1EMVQsRUFBRWdSLFNBQVEsU0FBUzdPLEVBQUV5M0YsR0FBR3A2RixLQUFLb0UsRUFBRTRuRyxpQkFBaUI1UixFQUFFejNGLEtBQUszQyxNQUFNQSxLQUFLaWlHLElBQUlqaUcsS0FBS29FLEVBQUU2bkcsYUFBYWpzRyxLQUFLaWlHLEdBQUcsb0JBQW9CamlHLEtBQUtvRSxHQUFHcEUsS0FBS29FLEVBQUU4bkcsa0JBQWtCbHNHLEtBQUsyK0YsSUFBSTMrRixLQUFLb0UsRUFBRThuRyxnQkFBZ0Jsc0csS0FBSzIrRixHQUFHLElBQUlxSyxHQUFHaHBHLE1BQU0sRUFBRUEsS0FBSzlCLEtBQUs4QixLQUFLKzhGLEVBQ3RULFNBQVkzNEYsR0FBRyxPQUFPcTNGLEdBQUdhLEdBQUcsSUFBSTdDLEVBQUdyMUYsRUFBRTJ6RixlQUFVLElBQVMzekYsRUFBRStqRyxVQUQ4UGdFLENBQUduc0csS0FBS29FLEtBQUtwRSxLQUFLb0UsRUFBRTJ6RixRQUFRLzNGLEtBQUs5QixFQUFFOEIsS0FBS29FLEVBQUUrakcsVUFBVTMvRixFQUFFeEksS0FBS3E4RixHQUFHcjhGLE9BQU9BLEtBQUtuQyxFQUFFMmpHLEdBQUd4aEcsS0FBS3E4RixHQUFHcjhGLEtBQUs5QixFQUFFOEIsT0FBT0EsS0FBS3RDLEdBQUUsRUFBR3NDLEtBQUtvRSxFQUFFazNELEtBQUtsM0QsR0FBR3BFLEtBQUt0QyxHQUFFLEVBQUksTUFBTWlGLEdBQUc4bEcsR0FBR3pvRyxLQUFLMkMsS0FDeFZFLEVBQUV3NUYsR0FBRyxnQkFBVyxJQUFvQjdDLEdBQU14NUYsS0FBS29FLElBQUlwRSxLQUFLMkMsRUFBRSxtQkFBbUIzQyxLQUFLOUIsRUFBRSxlQUFlOEIsS0FBS282RixFQUFFLEVBQUVwNkYsS0FBS3dnRyxjQUFjLFdBQVd4Z0csS0FBS3ErQixNQUFNLEtBQy9ReDdCLEVBQUV3N0IsTUFBTSxTQUFTajZCLEdBQUdwRSxLQUFLb0UsR0FBR3BFLEtBQUtOLElBQUlNLEtBQUtOLEdBQUUsRUFBR00sS0FBSzZDLEdBQUUsRUFBRzdDLEtBQUtvRSxFQUFFaTZCLFFBQVFyK0IsS0FBSzZDLEdBQUUsRUFBRzdDLEtBQUtvNkYsRUFBRWgyRixHQUFHLEVBQUVwRSxLQUFLd2dHLGNBQWMsWUFBWXhnRyxLQUFLd2dHLGNBQWMsU0FBU21JLEdBQUczb0csUUFBUzZDLEVBQUV5M0YsRUFBRSxXQUFXdDZGLEtBQUtvRSxJQUFJcEUsS0FBS04sSUFBSU0sS0FBS04sR0FBRSxFQUFHTSxLQUFLNkMsR0FBRSxFQUFHN0MsS0FBS29FLEVBQUVpNkIsUUFBUXIrQixLQUFLNkMsR0FBRSxHQUFJOGxHLEdBQUczb0csTUFBSyxJQUFLZy9GLEdBQUU5RSxFQUFFSSxFQUFFMThGLEtBQUtvQyxPQUFRNkMsRUFBRTg0RixHQUFHLFdBQVczN0YsS0FBS3FFLElBQUlyRSxLQUFLZzZGLEdBQUdoNkYsS0FBS3RDLEdBQUdzQyxLQUFLNkMsRUFBRStsRyxHQUFHNW9HLE1BQU1BLEtBQUtzL0YsT0FBUXo4RixFQUFFeThGLEdBQUcsV0FBV3NKLEdBQUc1b0csT0FFdUM2QyxFQUFFZ2lHLEVBQUUsV0FBVyxJQUFJLE9BQU8sRUFBRTNCLEdBQUVsakcsTUFBTUEsS0FBS29FLEVBQUUraUUsUUFBUSxFQUFFLE1BQU0vaUUsR0FBRyxPQUFRLElBQzFkdkIsRUFBRTQyRixHQUFHLFdBQVcsSUFBSSxPQUFPejVGLEtBQUtvRSxFQUFFcEUsS0FBS29FLEVBQUVnb0csYUFBYSxHQUFHLE1BQU1ob0csR0FBRyxNQUFPLEtBQUt2QixFQUFFZzhGLEdBQUcsU0FBU3o2RixHQUFHLEdBQUdwRSxLQUFLb0UsRUFBRSxDQUFDLElBQUkxRSxFQUFFTSxLQUFLb0UsRUFBRWdvRyxhQUEyRCxPQUE5Q2hvRyxHQUFHLEdBQUcxRSxFQUFFZSxRQUFRMkQsS0FBSzFFLEVBQUVBLEVBQUV5cEIsVUFBVS9rQixFQUFFL0QsU0FBZ0Jnb0csR0FBRzNvRyxLQUErRG1ELEVBQUV3NEYsR0FBRyxXQUFXLE9BQU9yN0YsS0FBS282RixHQUFHdjNGLEVBQUV3OEYsR0FBRyxXQUFXLE9BQU94aEcsRUFBRW1DLEtBQUsyQyxHQUFHM0MsS0FBSzJDLEVBQUUwRixPQUFPckksS0FBSzJDLEtBQ0xFLEVBQUV5bUcsR0FBR2pxRyxXQUFZODdGLEdBQUcsRUFBRXQ0RixFQUFFMkYsRUFBRSxFQUUzSDNGLEVBQUUyNEYsR0FBRyxXQUFXLE9BQU8sR0FBR3g3RixLQUFLd0ksR0FFdlEzRixFQUFFaTVGLEdBQUcsU0FBUzEzRixHQUFHLEdBQUdwRSxLQUFLbzZGLEVBQUUsR0FBR3A2RixLQUFLbzZGLEVBQUUsS0FBSyxHQUFHcDZGLEtBQUt3SSxHQUFHLElBQUlwRSxFQUFFLENBQUNwRSxLQUFLNkIsRUFBRStPLEtBQUtDLE1BQU0sSUFBSUQsS0FBS3FaLFVBQXFCLElBQTJHbHNCLEVBQXZHMkIsRUFBRSxJQUFJc2pHLEdBQUVoakcsS0FBdkJvRSxFQUFFcEUsS0FBSzZCLFNBQXVCLEdBQVEvRCxFQUFFa0MsS0FBS3ZDLEVBQTJFLEdBQXpFdUMsS0FBS29nRyxJQUFJdGlHLEVBQVd1OUYsRUFBUnY5RixFQUFFcTlGLEVBQUdyOUYsR0FBUWtDLEtBQUtvZ0csR0FBSXRpRyxFQUFFa0MsS0FBS29nRyxHQUFHLE9BQU9wZ0csS0FBSzZDLElBQUluRCxFQUFFMDZGLEVBQUV0OEYsR0FBWWtDLEtBQUsrTSxFQUFFM0ksRUFBRSxDQUFDLElBQUksSUFBSTVELEVBQUV6QyxFQUFFLEVBQUV5QyxFQUFFUixLQUFLMkMsRUFBRXRDLE9BQU9HLElBQUksQ0FBSSxJQUFJbUMsRUFBRTNDLEtBQUsyQyxFQUFFbkMsR0FBNEUsUUFBRyxLQUFoQ21DLEVBQXpDLGFBQWFBLEVBQUV5QixHQUFtQnZHLEVBQWY4RSxFQUFFQSxFQUFFeUIsRUFBRWlvRyxVQUFrQjFwRyxFQUFFdEMsWUFBaUIsR0FBc0IsTUFBVyxHQUFHLE1BQVJ0QyxHQUFHNEUsR0FBWSxDQUFDNUUsRUFBRXlDLEVBQUUsTUFBTTRELEVBQUUsR0FBRyxPQUFPckcsR0FBR3lDLElBQUlSLEtBQUsyQyxFQUFFdEMsT0FBTyxFQUFFLENBQUN0QyxFQUFFeUMsRUFBRSxFQUFFLE1BQU00RCxHQUFHckcsRUFBRSxTQUFVQSxFQUFFLElBQUlBLEVBQUV1c0csR0FBR3RxRyxLQUFLTixFQUFFM0IsR0FBZThtRyxHQUFacmtHLEVBQUUwNUYsR0FBRWw2RixLQUFLeTdGLEdBQ2hmLE1BQU1yM0YsR0FBR3lnRyxHQUFFcmtHLEVBQUUsT0FBTyxJQUFJUixLQUFLOUIsR0FBRzhCLEtBQUtxRSxHQUFHd2dHLEdBQUVya0csRUFBRSxvQkFBb0JSLEtBQUtxRSxHQUFHeWxHLEdBQUc5cEcsS0FBS1EsR0FBR1IsS0FBSzZDLEdBQUcvRSxHQUFHc3JHLEdBQUc1b0csRUFBRVIsS0FBSzZDLEVBQUUvRSxHQUFHMnBHLEdBQUd6bkcsS0FBS04sRUFBRUEsR0FBR00sS0FBSytNLEdBQUc4M0YsR0FBRXJrRyxFQUFFLE9BQU96QyxHQUFHOG1HLEdBQUVya0csRUFBRSxNQUFNLFFBQVFkLEVBQUUyakcsR0FBRSxFQUFHRyxHQUFHOWpHLEVBQUVjLEVBQUUsT0FBT2dqRyxHQUFHOWpHLEVBQUVjLEVBQUV6QyxHQUFHaUMsS0FBS3dJLEVBQUUsUUFBUyxHQUFHeEksS0FBS3dJLElBQUlwRSxFQUFFaW1HLEdBQUdycUcsS0FBS29FLEdBQUcsR0FBR3BFLEtBQUsyQyxFQUFFdEMsUUFBUXFuRyxHQUFHMW5HLEtBQUtOLElBQUkycUcsR0FBR3JxRyxRQUc1SzZDLEVBQUVnNUYsR0FBRyxXQUFXNzdGLEtBQUt0QyxFQUFFLEtBQUtzQyxLQUFLb0UsRUFBRSxJQUFJNCtGLEdBQUVoakcsS0FBSyxNQUFNQSxLQUFLcWpHLEdBQUcsT0FBT3JqRyxLQUFLNkMsSUFBSTdDLEtBQUtvRSxFQUFFZzJGLEVBQUVwNkYsS0FBS3ZDLEdBQUd1QyxLQUFLb0UsRUFBRWc4RixFQUFFLEVBQUUsSUFBSWg4RixFQUFFODFGLEdBQUVsNkYsS0FBS3k2RixJQUFJb0ssR0FBRXpnRyxFQUFFLE1BQU0sT0FBT3lnRyxHQUFFemdHLEVBQUUsTUFBTXBFLEtBQUs0aEcsR0FBR2lELEdBQUV6Z0csRUFBRSxLQUFLcEUsS0FBS3lwRyxHQUFHLElBQUksS0FBSzVFLEdBQUV6Z0csRUFBRSxNQUFNcEUsS0FBS2tqRyxHQUFHNEcsR0FBRzlwRyxLQUFLb0UsR0FBR3lnRyxHQUFFemdHLEVBQUUsT0FBTyxXQUFXcEUsS0FBSzZDLEdBQUc3QyxLQUFLdkMsR0FBRzJyRyxHQUFHaGxHLEVBQUVwRSxLQUFLNkMsRUFBRTdDLEtBQUt2QyxHQUFHdUMsS0FBSys4RixHQUFHLzhGLEtBQUtvRSxFQUFFbXNCLFdBQVd2d0IsS0FBSys4RixHQUFHNEcsR0FBRzNqRyxLQUFLb0UsRUFBRUEsR0FBRSxFQUFHcEUsS0FBS3VwRyxLQUVsYTFtRyxFQUFFKzRGLEdBQUcsU0FBU3gzRixFQUFFMUUsR0FBRyxHQUFHLEdBQUdNLEtBQUt3SSxJQUFJeEksS0FBS29FLEdBQUdBLEdBQUd3akcsR0FBRzVuRyxLQUFLTixFQUFFMEUsSUFBSSxHQUFHcEUsS0FBS25DLEVBQUV1RyxFQUFFbEcsR0FBR2tHLEVBQUU1RSxHQUFHb29HLEdBQUc1bkcsS0FBS04sRUFBRTBFLElBQUksR0FBR3BFLEtBQUt3SSxFQUFFLENBQUMsSUFBSSxJQUFJMUssRUFBRWtDLEtBQUt1NkYsR0FBR24yRixFQUFFdUgsTUFBTWpNLEdBQUksTUFBTWlELEdBQUc3RSxFQUFFLEtBQU0sR0FBRzRHLEVBQUU1RyxJQUFJLEdBQUdBLEVBQUV1QyxPQUFPLENBQUssR0FBRyxJQUFQWCxFQUFFNUIsR0FBVSxJQUFHc0csRUFBRyxJQUFJcEUsS0FBS3RDLEVBQUUsQ0FBQyxHQUFHc0MsS0FBS29FLEVBQUUsTUFBR3BFLEtBQUtvRSxFQUFFZixFQUFFLElBQUllLEVBQUVmLEdBQTRDLE1BQU1lLEVBQWhEOGxHLEdBQUdscUcsTUFBTUEsS0FBS29FLEVBQUVzc0IsU0FBUzF3QixLQUFLb0UsRUFBRSxLQUFrQndtRyxHQUFHNXFHLE1BQU1vaUcsR0FBRSxVQUFXcGlHLEtBQUs0NkYsR0FBR2w3RixFQUFFLEdBQUcsRUFBRU0sS0FBSzQ2RixHQUFHNTZGLEtBQUtrakcsR0FBRyxNQUFNeGpHLEVBQUUsSUFBSU0sS0FBS3lwRyxJQUFJLEdBQUd6cEcsS0FBS3FELElBQUlyRCxLQUFLUixJQUFJUSxLQUFLUixFQUFFOGlHLEdBQUc5NUYsRUFBRXhJLEtBQUtvL0YsR0FBR3AvRixNQUFNLE1BQU0sR0FBRyxHQUFHMm5HLEdBQUczbkcsS0FBS04sSUFBSU0sS0FBSzg1RixHQUFHLENBQUMsSUFBSTk1RixLQUFLODVGLEtBQU0sTUFBTW4zRixJQUFJM0MsS0FBSzg1RixRQUFHLFFBQWMvc0YsR0FBRS9NLEtBQUssU0FBVSxJQUFJb0UsRUFBRTVFLEdBQzNmUSxLQUFLb0UsR0FBR0EsSUFBSThsRyxHQUFHbHFHLE9BQU8wNkYsRUFBR2g3RixHQUFHLElBQUlBLEVBQUU1QixFQUFFa0MsS0FBS3U2RixHQUFHbjJGLEVBQUV1SCxNQUFNak0sR0FBRzVCLEVBQUUsRUFBRUEsRUFBRTRCLEVBQUVXLE9BQU92QyxJQUFJLENBQUMsSUFBSUMsRUFBRTJCLEVBQUU1QixHQUFzQixHQUFuQmtDLEtBQUtrakcsRUFBRW5sRyxFQUFFLEdBQUdBLEVBQUVBLEVBQUUsR0FBTSxHQUFHaUMsS0FBS3dJLEVBQUUsR0FBRyxLQUFLekssRUFBRSxHQUFHLENBQUNpQyxLQUFLNGhHLEVBQUU3akcsRUFBRSxHQUFHaUMsS0FBS3VwRyxHQUFHeHJHLEVBQUUsR0FBRyxJQUFJeUMsRUFBRXpDLEVBQUUsR0FBRyxNQUFNeUMsSUFBSVIsS0FBS203RixHQUFHMzZGLEdBQVUsT0FBUHpDLEVBQUVBLEVBQUUsS0FBWTA3RixFQUFHMTdGLElBQUksRUFBRUEsSUFBSWlDLEtBQUsrOEYsRUFBRSxJQUFJaC9GLEdBQUdpQyxLQUFLOUIsSUFBSUgsRUFBRXFHLEVBQUVBLE1BQU01RCxFQUFFc2tHLEdBQUcvbUcsRUFBRSw0QkFBNEJ5cEcsR0FBR3huRyxLQUFLTixFQUFFYyxHQUFHUixLQUFLcUUsSUFBSXRHLEVBQUUrbUcsR0FBRy9tRyxFQUFFLHlCQUF5QmlDLEtBQUtpaUcsRUFBRWxrRyxFQUFFOG1HLEdBQUU3a0csS0FBS3k3RixFQUFFejdGLEtBQUtxRSxFQUFFdEcsSUFBSWlDLEtBQUt3SSxFQUFFLEVBQUV4SSxLQUFLbEMsR0FBR2tDLEtBQUtsQyxFQUFFbzlGLEtBQUtuOUYsRUFBRXFHLEVBQUVwRSxLQUFLeTZGLEdBQUdrTSxHQUFHM21HLEtBQUtBLEtBQUsrakcsSUFBSS9qRyxLQUFLdXBHLEdBQUcsS0FBS3ZwRyxLQUFLd3BHLElBQUl6ckcsRUFBRXlCLEdBQUdxb0csR0FBRzduRyxLQUFLTixFQUFFM0IsSUFBSXlDLEVBQUVSLEtBQUsrOEYsSUFBSWgvRixFQUFFd3lCLFdBQVcvdkIsR0FBR3pDLEVBQUVOLElBQUk2bUcsR0FBR3ZtRyxHQUN4ZjZsRyxHQUFHN2xHLElBQUlpQyxLQUFLb0UsRUFBRXJHLEdBQUc0c0csR0FBRzNxRyxNQUFNLEVBQUVBLEtBQUsyQyxFQUFFdEMsUUFBUStwRyxHQUFHcHFHLFVBQVcsUUFBUWpDLEVBQUUsSUFBSSxTQUFTQSxFQUFFLElBQUlnUCxHQUFFL00sS0FBSyxRQUFRLEdBQUdBLEtBQUt3SSxJQUFJLFFBQVF6SyxFQUFFLElBQUksU0FBU0EsRUFBRSxHQUFHLFFBQVFBLEVBQUUsR0FBR2dQLEdBQUUvTSxLQUFLLEdBQUc0cEcsR0FBRzVwRyxNQUFNLFFBQVFqQyxFQUFFLElBQUlpQyxLQUFLbEMsR0FBR2tDLEtBQUtsQyxFQUFFMitCLEdBQUcxK0IsR0FBR2lDLEtBQUtxRCxFQUFFLEtBQU1SLEVBQUV1OEYsR0FBRyxXQUFXLE1BQU1wL0YsS0FBS1IsSUFBSVEsS0FBS1IsRUFBRSxLQUFLUSxLQUFLb0UsRUFBRXNzQixTQUFTMXdCLEtBQUtvRSxFQUFFLEtBQUt3bUcsR0FBRzVxRyxNQUFNb2lHLEdBQUUsTUFDL1N2L0YsRUFBRTBoRyxHQUFHLFNBQVNuZ0csR0FBRyxJQUFJMUUsRUFBRSxLQUFLLEdBQUdNLEtBQUtvRSxHQUFHQSxFQUFFLENBQUM4bEcsR0FBR2xxRyxNQUFNQSxLQUFLb0UsRUFBRSxLQUFLLElBQUl0RyxFQUFFLE1BQVEsS0FBRzhwRyxHQUFHNW5HLEtBQUtOLEVBQUUwRSxHQUErQixPQUE1QjFFLEVBQUUwRSxFQUFFQyxFQUFFd2pHLEdBQUc3bkcsS0FBS04sRUFBRTBFLEdBQUd0RyxFQUFFLEVBQXlCLEdBQVhrQyxLQUFLbkMsRUFBRXVHLEVBQUVsRyxFQUFLLEdBQUc4QixLQUFLd0ksRUFBRSxHQUFHcEUsRUFBRTFFLEVBQUUsR0FBRzVCLEdBQUc0QixFQUFFczZGLElBQUk1MUYsRUFBRWYsRUFBRTQrRixHQUFFekIsY0FBYyxJQUFJNkIsR0FBR0osR0FBRTc5RixFQUFFMUcsRUFBRTBHLEVBQUUxRyxFQUFFMkMsT0FBTyxFQUFFWCxFQUFFTSxLQUFLMjZGLElBQUl5UCxHQUFHcHFHLE9BQU8ycUcsR0FBRzNxRyxVQUFVLENBQUMsSUFBSWpDLEVBQUVxRyxFQUFFdEcsRUFBRSxHQUFHLEdBQUdDLEdBQUcsR0FBR0EsR0FBRyxFQUFFaUMsS0FBS25DLEtBQUssR0FBR0MsR0FWcFMsU0FBWXNHLEVBQUUxRSxHQUFHLFFBQUdpb0csR0FBR3ZqRyxFQUFFMUUsSUFBSTBFLEVBQUUxRSxFQUFFaUQsR0FBR3lCLEVBQUVnMkYsRUFBRSxFQUFFLE1BQWdCaDJGLEVBQUVnMkYsR0FBU2gyRixFQUFFekIsRUFBRWpELEVBQUUyRSxFQUFFTCxPQUFPSSxFQUFFekIsSUFBRyxLQUFNLEdBQUd5QixFQUFFb0UsR0FBRyxHQUFHcEUsRUFBRW9FLEdBQUdwRSxFQUFFdTJGLElBQUl2MkYsRUFBRXE0RixHQUFHLEVBQUVyNEYsRUFBRXU0RixPQUFjdjRGLEVBQUVnMkYsRUFBRWtJLEdBQUc5NUYsRUFBRXBFLEVBQUUwM0YsR0FBRzEzRixFQUFFMUUsR0FBR21yRyxHQUFHem1HLEVBQUVBLEVBQUV1MkYsSUFBSXYyRixFQUFFdTJGLEtBQVcsSUFVZ0gyUixDQUFHdHNHLEtBQUtvRSxJQUFJLEdBQUd0RyxHQUFHOHNHLEdBQUc1cUcsT0FBTyxPQUFPTixHQUFHLEVBQUVBLEVBQUVXLFNBQVMrRCxFQUFFcEUsS0FBS04sRUFBRTBFLEVBQUV0RyxFQUFFc0csRUFBRXRHLEVBQUVrRyxPQUFPdEUsSUFBSTNCLEdBQUcsS0FBSyxFQUFFZ1AsR0FBRS9NLEtBQUssR0FBRyxNQUFNLEtBQUssRUFBRStNLEdBQUUvTSxLQUFLLElBQUksTUFBTSxLQUFLLEVBQUUrTSxHQUFFL00sS0FBSyxHQUFHLE1BQU0sUUFBUStNLEdBQUUvTSxLQUFLLE1BQ3JJNkMsRUFBRTQ4RixHQUFHLFNBQVNyN0YsR0FBS2crRixHQUFGaCtGLEVBQUksRUFBSyxJQUNsR3ZCLEVBQUVpaEcsRUFBRSxTQUFTMS9GLEdBQUcsR0FBR0EsSUFBSXBFLEtBQUtvakcsRUFBRSxNQUFNbjlGLE1BQU0sdURBQW1GLE9BQTVCN0IsRUFBRSxJQUFJNDZGLEdBQUVoL0YsS0FBS2k4RixLQUFNMEMsRUFBRTMrRixLQUFLb2pHLEVBQVNoL0YsR0FBR3ZCLEVBQUUwa0csR0FBRyxXQUFXLFFBQVN2bkcsS0FBS2xDLElBQUcsR0FBSStFLEVBQUVraEcsRUFBRSxXQUFXLE9BQU8vakcsS0FBS29qRyxJQUFrQnZnRyxFQUFFc29HLEdBQUc5ckcsV0FBWTY3RixHQUFHLGFBQzllcjRGLEVBQUU0NUIsR0FBRyxhQUFhNTVCLEVBQUVtNEYsR0FBRyxhQUFhbjRGLEVBQUVrNEYsR0FBRyxhQUFhbDRGLEVBQUVzN0YsR0FBRyxhQUFnVWlOLEdBQUcvckcsVUFBVStFLEVBQUUsU0FBU0EsRUFBRTFFLEdBQUcsT0FBTyxJQUFJcWtHLEdBQUUzL0YsRUFBRTFFLElBRXhIdTZGLEVBQUU4SixHQUFFekosS0FBR3ozRixFQUFFa2hHLEdBQUUxa0csV0FBWWtuRCxpQkFBaUIsU0FBU25pRCxFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUdnbUcsR0FBRTdKLEVBQUUzekMsaUJBQWlCM29ELEtBQUtvQyxLQUFLb0UsRUFBRTFFLEVBQUU1QixFQUFFQyxJQUFLOEUsRUFBRTRqRCxvQkFBb0IsU0FBU3JpRCxFQUFFMUUsRUFBRTVCLEVBQUVDLEdBQUdnbUcsR0FBRTdKLEVBQUV6ekMsb0JBQW9CN29ELEtBQUtvQyxLQUFLb0UsRUFBRTFFLEVBQUU1QixFQUFFQyxJQUNuZThFLEVBQUVxOEYsR0FBRyxXQUFXbC9GLEtBQUtvRSxFQUFFdEcsRUFBRWtDLEtBQUsyQyxFQUFFM0MsS0FBS3RDLElBQUlzQyxLQUFLb0UsRUFBRWcvRixHQUFFLEdBQUksSUFBSWgvRixFQUFFcEUsS0FBS29FLEVBQUUxRSxFQUFFTSxLQUFLbkMsRUFBRUMsRUFBRWtDLEtBQUs2QyxFQUFFOUUsRUFBRWlDLEtBQUtOLFFBQUcsRUFBTzBpRyxHQUFFLEdBQUdoK0YsRUFBRW9sRyxHQUFHMXJHLEVBQUVzRyxFQUFFNitGLEVBQUVsbEcsR0FBRyxHQUFHcUcsRUFBRWxHLElBQUlrRyxFQUFFdTZGLEVBQUVqL0YsRUFBRSxHQUFHMEUsRUFBRXU2RixFQUFFdjZGLEdBQUUsR0FBSUEsRUFBRTQxRixFQUFFLElBQUl3TSxHQUFHcGlHLEdBQUcsT0FBT0EsRUFBRXZCLElBQUl1QixFQUFFNDFGLEVBQUVJLEVBQUVoMkYsRUFBRTNHLEdBQUdLLEVBQUU0QixFQUFFMEUsRUFBRXZCLEdBQUd1QixFQUFFM0csSUFBSUssRUFBRXNyRyxHQUFHMXBHLEVBQUUwRSxFQUFFdkIsRUFBRXVCLEVBQUUzRyxLQUFJMkcsRUFBRUEsRUFBRTQxRixHQUFJdjhGLEVBQUVLLEVBQUU0QixFQUFFaW5HLEdBQUd2aUcsRUFBRUEsRUFBRSxLQUFLQSxFQUFFM0csR0FBRzJrRyxHQUFFLEdBQWEsT0FBVnRrRyxFQUFFc0csRUFBRUEsRUFBRXU2RixFQUFFai9GLElBQVcwRSxFQUFFekIsRUFBRTdFLEVBQUUsR0FBR3NHLEVBQUU0K0YsRUFBRSxFQUFFeUQsR0FBR3JpRyxLQUFLeS9GLEdBQUdua0csRUFBRSxPQUFPLFNBQVMwRSxFQUFFQSxFQUFFbEcsR0FBR2tHLEVBQUVBLEVBQUVDLEdBQUd3L0YsR0FBR25rRyxFQUFFLG9CQUFvQjBFLEVBQUVBLEVBQUVDLEdBQUdELEVBQUUxRSxFQUFFLElBQUlzakcsR0FBRTUrRixPQUFFLE9BQU8sR0FBUUEsRUFBRTFFLEVBQUUwNkYsRUFBRWgyRixFQUFFZzJGLEVBQUV1SixHQUFHdi9GLEVBQUUxRSxFQUFFQSxHQUFFLEVBQUcsTUFBTTBFLEVBQUU0K0YsRUFBRSxJQUFLbmdHLEVBQUVrTCxNQUFNLFdBQVc2N0YsR0FBRzVwRyxLQUFLb0UsSUFDdmN2QixFQUFFczhGLEdBQUcsU0FBUy82RixHQUFHLEdBQUd2RyxFQUFFdUcsR0FBRyxDQUFDLElBQUkxRSxFQUFFLEdBQUdBLEVBQUUyc0csU0FBU2pvRyxFQUFFK2xHLEdBQUducUcsS0FBS29FLEVBQUUxRSxRQUFTTSxLQUFLbzZGLElBQUcxNkYsRUFBRSxJQUFLMnNHLFNBQVM1TCxHQUFHcjhGLEdBQUcrbEcsR0FBR25xRyxLQUFLb0UsRUFBRTFFLElBQUl5cUcsR0FBR25xRyxLQUFLb0UsRUFBRUEsSUFBS3ZCLEVBQUV5M0YsRUFBRSxXQUFXdDZGLEtBQUtvRSxFQUFFdEcsRUFBRSxZQUFZa0MsS0FBSzJDLEVBQUVpbkcsR0FBRzVwRyxLQUFLb0UsVUFBVXBFLEtBQUtvRSxFQUFFMi9GLEdBQUU3SixFQUFFSSxFQUFFMThGLEtBQUtvQyxPQUErTGk2RixFQUFFeVIsR0FBRzdJLElBQStDNUksRUFBRTJSLEdBQUc5SSxJQUE0QjdJLEVBQUVnRixHQUFFa00sSUFBSWxNLEdBQUU1L0YsVUFBVTY3RixHQUFHLFdBQVdsN0YsS0FBS29FLEVBQUVvOEYsY0FBYyxNQUN4aEJ2QixHQUFFNS9GLFVBQVVvOUIsR0FBRyxTQUFTcjRCLEdBQUdwRSxLQUFLb0UsRUFBRW84RixjQUFjLElBQUlrTCxHQUFHdG5HLEtBQU02NkYsR0FBRTUvRixVQUFVMjdGLEdBQUcsU0FBUzUyRixHQUFHcEUsS0FBS29FLEVBQUVvOEYsY0FBYyxJQUFJb0wsR0FBR3huRyxLQUFNNjZGLEdBQUU1L0YsVUFBVTA3RixHQUFHLFdBQVcvNkYsS0FBS29FLEVBQUVvOEYsY0FBYyxNQUFPLElBQUkrTCxHQUFHbHBHLEdBQUUsU0FBU2UsRUFBRTFFLEdBQUcsU0FBUzVCLEtBQUtBLEVBQUV1QixVQUFVK0UsRUFBRS9FLFVBQVUsSUFBSXRCLEVBQUUsSUFBSUQsRUFBcUQsT0FBbkRzRyxFQUFFOUQsTUFBTXZDLEVBQUU4QixNQUFNUixVQUFVK0wsTUFBTXhOLEtBQUt3QyxVQUFVLElBQVdyQyxJQUFHcXRHLElBZ0J0VEEsR0FBRy9yRyxVQUFVNjJGLGlCQUFpQmtWLEdBQUcvckcsVUFBVStFLEVBQUUyL0YsR0FBRTFrRyxVQUFVaThELEtBQUt5b0MsR0FBRTFrRyxVQUFVOC9GLEdBQUc0RSxHQUFFMWtHLFVBQVU2OEIsS0FBSzZuRSxHQUFFMWtHLFVBQVU2L0YsR0FBRzZFLEdBQUUxa0csVUFBVTBPLE1BQU1nMkYsR0FBRTFrRyxVQUFVME8sTUFBTXcwRixHQUFHaE8sU0FBUyxFQUFFZ08sR0FBRzdOLFFBQVEsRUFBRTZOLEdBQUc1TixXQUFXLEVBQUU2TixHQUFHcE8sU0FBUyxXQUFXdU8sR0FBR3hPLFVBQVVvTixHQUFFQSxHQUFFOUssS0FBSyxJQUFJOEssR0FBRTdLLE1BQU0sSUFBSTZLLEdBQUU1bUYsTUFBTSxJQUFJNG1GLEdBQUU1SyxRQUFRLElBQUkyRCxHQUFFajdGLFVBQVVpcEUsT0FBT2d5QixHQUFFajdGLFVBQVVpOEYsR0FBRzBELEdBQUUzL0YsVUFBVTYwRixXQUFXOEssR0FBRTMvRixVQUFVazlGLEdBQUd5QyxHQUFFMy9GLFVBQVU2MUYsYUFBYThKLEdBQUUzL0YsVUFBVWdnRyxHQUFHTCxHQUFFMy9GLFVBQVVnMUYsaUJBQWlCMkssR0FBRTMvRixVQUFVZzhGLEdBQUcyRCxHQUFFMy9GLFVBQVV1MUYsVUFBVW9LLEdBQUUzL0YsVUFBVXdsRyxFQUFFN0YsR0FBRTMvRixVQUFVbzFGLGdCQUFnQnVLLEdBQUUzL0YsVUFBVXcvRixHQUMzZkcsR0FBRTMvRixVQUFVdzFGLGdCQUFnQm1LLEdBQUUzL0YsVUFBVW82RixHQUFHdUYsR0FBRTMvRixVQUFVaThELEtBQUswakMsR0FBRTMvRixVQUFVczZGLEdBQUcsSUFBSTZTLEdBQUksQ0FBQ2pYLDBCQUEwQmdYLEdBQUdqWSxVQUFVaU8sR0FBR3BPLFVBQVVxTyxHQUFHaE0sV0FBV21NLEdBQUcxTyxNQUFNK0ssSUFDM0p5TixHQUFRRCxHQUFJalgsMEJBQ1ptWCxHQUFRRixHQUFJbFksVUFDWnFZLEdBQVFILEdBQUlyWSxVQUNaeVksR0FBUUosR0FBSWhXLFdBQ1pxVyxHQUFRTCxHQUFJdlksTUFFRCxjLHlEQzNFSDZZLEVBTUFDLEUsTUFOWixTQUFZRCxHQUNWLHlCQUNBLDZCQUNBLHlCQUhGLENBQVlBLE1BQTZCLEtBTXpDLFNBQVlDLEdBQ1YsMkJBQ0EscUJBQ0EsNkJBQ0EsMkJBQ0EsMkJBQ0EseUJBTkYsQ0FBWUEsTUFBd0IsS0FTcEMsTUFNRSxTQUFZQyxFQUE4REMsRUFBbUNDLFFBQW5DLElBQUFELFdBQUEsUUFBbUMsSUFBQUMsV0FBQSxHQUMzR2x0RyxLQUFLOFMsS0FBT2s2RixFQUNaaHRHLEtBQUtpdEcsYUFBZUEsRUFDcEJqdEcsS0FBS2t0RyxRQUFVQSxHQWtCbkIsMkJBa0JBLE9BaEJTLEVBQUFDLFlBQVAsU0FBbUJDLEVBQWNDLEdBQy9CLE9BQU96OEYsS0FBSzA4RixLQUFLMThGLEtBQUtpbUIsSUFBS3cyRSxFQUFJcFQsRUFBSW1ULEVBQUluVCxFQUFJLEdBQU1ycEYsS0FBS2ltQixJQUFLdzJFLEVBQUl6cUcsRUFBSXdxRyxFQUFJeHFHLEVBQUksS0FHdEUsRUFBQTJxRyxhQUFQLFNBQW9CQyxHQUNsQixNQUFPLENBQUV2VCxHQUFJdVQsRUFBSyxHQUFHdlQsRUFBSXVULEVBQUssR0FBR3ZULEdBQUssRUFBR3IzRixHQUFJNHFHLEVBQUssR0FBRzVxRyxFQUFJNHFHLEVBQUssR0FBRzVxRyxHQUFLLElBR2pFLEVBQUE2cUcsY0FBUCxTQUFxQkMsRUFBYUMsR0FDaEMsT0FBUTN0RyxLQUFLNHRHLGVBQWVGLEVBQU0sR0FBSUMsRUFBTSxLQUFPM3RHLEtBQUs0dEcsZUFBZUYsRUFBTSxHQUFJQyxFQUFNLEtBQVMzdEcsS0FBSzR0RyxlQUFlRixFQUFNLEdBQUlDLEVBQU0sS0FBTzN0RyxLQUFLNHRHLGVBQWVGLEVBQU0sR0FBSUMsRUFBTSxLQUcxSyxFQUFBQyxlQUFQLFNBQXNCQyxFQUFpQkMsR0FDckMsT0FBT0QsRUFBTzVULElBQU02VCxFQUFPN1QsR0FBSzRULEVBQU9qckcsSUFBTWtyRyxFQUFPbHJHLEdBR3hELEVBbEJBLEcsMExDNURBLHlCQTBWQSxPQXJWUyxFQUFBbXJHLGNBQVAsU0FBcUJDLEdBQ25CLE9BQU8sSUFBSWpzRyxTQUFRLFNBQUNvUCxFQUFLODhGLEdBQ3ZCLElBQU1DLEVBQVMsSUFBSUMsV0FDbkJELEVBQU9FLFdBQVdKLEVBQU0sU0FDeEJFLEVBQU9oRyxPQUFTLFdBQ2QvMkYsRUFBSSs4RixFQUFPNXJHLFNBRWI0ckcsRUFBTzV5RixRQUFVLFdBQ2ZwUyxRQUFRNE8sSUFBSSxnQ0FVWCxFQUFBdTJGLGFBQVAsU0FBb0J2cUYsR0FDbEIsSUFBTXhTLEVBQWMsR0FDZGc5RixFQUFTbHZGLFNBQVN3QixjQUFjLEtBQ3RDMHRGLEVBQU9DLEtBQU96cUYsRUFFZCxJQURBLElBQU0wcUYsRUFBT0YsRUFBT3hrQixPQUFPM2dFLFVBQVUsR0FBR2pkLE1BQU0sS0FDckN6TyxFQUFJLEVBQUdBLEVBQUkrd0csRUFBS251RyxPQUFRNUMsSUFBSyxDQUNwQyxJQUFNZ3hHLEVBQU9ELEVBQUsvd0csR0FBR3lPLE1BQU0sS0FDM0JvRixFQUFPbTlGLEVBQUssSUFBTTNJLG1CQUFtQjJJLEVBQUssSUFFNUMsT0FBT245RixHQU1GLEVBQUFvOUYsVUFBUCxTQUFpQmo2RSxHQUNmLEtBQU9BLEVBQUt4UyxZQUFjd1MsRUFBSzdTLFlBQVk2UyxFQUFLeFMsZ0JBUTNDLEVBQUEwc0YsV0FBUCxTQUFrQjVsRixFQUE2QmpjLEVBQVk4aEcsUUFBWixJQUFBOWhHLE1BQUEsUUFBWSxJQUFBOGhHLE1BQUEsR0FDekQsSUFBTUMsRUFBT3p2RixTQUFTMHZGLGdCQUFnQiw2QkFBOEIsUUFPcEUsT0FOQUQsRUFBSzl0RixhQUFhLEtBQU1nSSxFQUFRZ21GLFVBQVU5VSxFQUFJbnRGLEdBQVF0QixZQUN0RHFqRyxFQUFLOXRGLGFBQWEsS0FBTWdJLEVBQVFnbUYsVUFBVW5zRyxFQUFJa0ssR0FBUXRCLFlBQ3REcWpHLEVBQUs5dEYsYUFBYSxTQUFVZ0ksRUFBUWdtRixVQUFVQyxNQUFpQixFQUFUbGlHLEdBQVl0QixZQUNsRXFqRyxFQUFLOXRGLGFBQWEsVUFBV2dJLEVBQVFnbUYsVUFBVUUsT0FBa0IsRUFBVG5pRyxHQUFZdEIsWUFDcEVxakcsRUFBSzl0RixhQUFhLEtBQU02dEYsRUFBT3BqRyxZQUMvQnFqRyxFQUFLOXRGLGFBQWEsS0FBTTZ0RixFQUFPcGpHLFlBQ3hCcWpHLEdBTUYsRUFBQUssWUFBUCxTQUFtQm5tRixFQUE2QmpjLEdBQzlDLFlBRDhDLElBQUFBLE1BQUEsR0FDL0IsSUFBWEEsRUFDSyxDQUNMbXRGLEVBQUdseEUsRUFBUWdtRixVQUFVOVUsRUFBSW50RixFQUN6QmxLLEVBQUdtbUIsRUFBUWdtRixVQUFVbnNHLEVBQUlrSyxFQUN6QmtpRyxNQUFPam1GLEVBQVFnbUYsVUFBVUMsTUFBaUIsRUFBVGxpRyxFQUNqQ21pRyxPQUFRbG1GLEVBQVFnbUYsVUFBVUUsT0FBa0IsRUFBVG5pRyxHQUc5QmljLEVBQVFnbUYsV0FPWixFQUFBSSxrQkFBUCxTQUF5QjN1RyxFQUFlNHVHLEdBQ3RDLElBQU1DLEVBQVdELEVBQU9FLGlCQUl4QixPQUhBRCxFQUFTcFYsRUFBSXo1RixFQUFFNjhGLFFBQ2ZnUyxFQUFTenNHLEVBQUlwQyxFQUFFNDhGLFFBRVJpUyxFQUFTRSxnQkFBZ0JILEVBQU9JLGVBQWVDLFlBSWpELEVBQUFDLE9BQVAsV0FDRSxPQUFRLElBQU1sa0csWUFBYyxLQUFPLEtBQU8sS0FBTyxNQUFNRixRQUFRLFVBQVUsU0FBQXhOLEdBQ3ZFLE9BQUM4b0IsT0FBTzlvQixHQUFLNnhHLE9BQU9DLGdCQUFnQixJQUFJbmxGLFdBQVcsSUFBSSxHQUFLLElBQU03RCxPQUFPOW9CLEdBQUssR0FBRzBOLFNBQVMsUUFLdkYsRUFBQXFrRyxnQkFBUCxTQUF1QmhCLEdBQ3JCLElBQU1pQixFQUFVLENBQUU3VixFQUFHNFUsRUFBSzVVLEVBQUdyM0YsRUFBR2lzRyxFQUFLanNHLEdBQy9CbXRHLEVBQVUsQ0FBRTlWLEVBQUc0VSxFQUFLNVUsRUFBSTRVLEVBQUtHLE1BQU9wc0csRUFBR2lzRyxFQUFLanNHLEdBQzVDb3RHLEVBQVUsQ0FBRS9WLEVBQUc0VSxFQUFLNVUsRUFBSTRVLEVBQUtHLE1BQU9wc0csRUFBR2lzRyxFQUFLanNHLEVBQUlpc0csRUFBS0ksUUFDckRnQixFQUFVLENBQUVoVyxFQUFHNFUsRUFBSzVVLEVBQUdyM0YsRUFBR2lzRyxFQUFLanNHLEVBQUlpc0csRUFBS0ksUUFDOUMsTUFBTyxDQUNMLENBQUNhLEVBQVNDLEdBQ1YsQ0FBQ0EsRUFBU0MsR0FDVixDQUFDQSxFQUFTQyxHQUNWLENBQUNBLEVBQVNILEtBUVAsRUFBQUksV0FBUCxTQUFrQnJCLEVBQWlCc0IsRUFBYUMsR0FDOUMsWUFEOEMsSUFBQUEsT0FBQSxHQUMxQ0EsRUFDTUQsRUFBR2xXLEdBQUs0VSxFQUFLNVUsR0FBS2tXLEVBQUdsVyxHQUFNNFUsRUFBSzVVLEVBQUk0VSxFQUFLRyxPQUFZbUIsRUFBR3Z0RyxHQUFLaXNHLEVBQUtqc0csR0FBS3V0RyxFQUFHdnRHLEdBQU1pc0csRUFBS2pzRyxFQUFJaXNHLEVBQUtJLE9BRTlGa0IsRUFBR2xXLEVBQUk0VSxFQUFLNVUsR0FBS2tXLEVBQUdsVyxFQUFLNFUsRUFBSzVVLEVBQUk0VSxFQUFLRyxPQUFZbUIsRUFBR3Z0RyxFQUFJaXNHLEVBQUtqc0csR0FBS3V0RyxFQUFHdnRHLEVBQUtpc0csRUFBS2pzRyxFQUFJaXNHLEVBQUtJLFFBWS9GLEVBQUFvQixhQUFQLFNBQW9CN0MsRUFBWXFCLEdBQzlCLE9BQVE3dUcsS0FBS2t3RyxXQUFXckIsRUFBTXJCLEVBQUssS0FBa0J4dEcsS0FBS2t3RyxXQUFXckIsRUFBTXJCLEVBQUssS0FVM0UsRUFBQThDLGFBQVAsU0FBb0I1eEcsRUFBZTZ4RyxFQUFnQkMsRUFBZ0JKLEdBQ2pFLFlBRGlFLElBQUFBLE9BQUEsR0FDN0RBLEVBQ0sxeEcsR0FBU2tTLEtBQUt5ZCxJQUFJa2lGLEVBQVFDLElBQVc5eEcsR0FBU2tTLEtBQUtrYyxJQUFJeWpGLEVBQVFDLEdBRS9EOXhHLEVBQVFrUyxLQUFLeWQsSUFBSWtpRixFQUFRQyxJQUFXOXhHLEVBQVFrUyxLQUFLa2MsSUFBSXlqRixFQUFRQyxJQUlqRSxFQUFBQyxpQkFBUCxTQUF3QmpELEdBQ3RCLE9BQU9BLEVBQUssR0FBRzVxRyxJQUFNNHFHLEVBQUssR0FBRzVxRyxHQUd4QixFQUFBOHRHLGVBQVAsU0FBc0JsRCxHQUNwQixPQUFPQSxFQUFLLEdBQUd2VCxJQUFNdVQsRUFBSyxHQUFHdlQsR0FLeEIsRUFBQTBXLGtCQUFQLFNBQXlCQyxFQUFnQkMsRUFBNEJDLFFBQTVCLElBQUFELFdBQUEsUUFBNEIsSUFBQUMsT0FBQSxHQUNuRSxJQUFNQyxPQUF3QnhuRyxJQUFWc25HLEVBQXNCQSxFQUFRRCxFQUFJLEdBQ2hESSxFQUFZSixFQUFJdCtFLE1BQUssU0FBQ2x1QixFQUFHMUUsR0FDN0IsT0FBSXV4RyxFQUFhOUQsWUFBWTRELEVBQWEzc0csR0FBSzZzRyxFQUFhOUQsWUFBWTRELEVBQWFyeEcsSUFDM0UsRUFDRHV4RyxFQUFhOUQsWUFBWTRELEVBQWEzc0csR0FBSzZzRyxFQUFhOUQsWUFBWTRELEVBQWFyeEcsR0FDakYsRUFFQSxLQUVYLFlBQWtCNkosSUFBVnNuRyxJQUF3QyxJQUFqQkMsRUFBeUIsRUFBRCxDQUFFRCxHQUFVRyxHQUFhQSxHQU0zRSxFQUFBRSxnQkFBUCxTQUF1Qk4sR0FDckIsR0FBSUEsRUFBSXZ3RyxPQUFTLEVBQUcsQ0FFbEIsSUFEQSxJQUFNNnNCLEVBQW1CLEdBQ2hCenZCLEVBQUksRUFBR0EsRUFBSW16RyxFQUFJdndHLE9BQVMsRUFBRzVDLElBQ2xDeXZCLEVBQVN6cEIsS0FBSyxDQUFDbXRHLEVBQUluekcsR0FBSW16RyxFQUFJbnpHLEVBQUksS0FFakMsT0FBT3l2QixFQUVQLE9BQU8sTUFPSixFQUFBaWtGLHFCQUFQLFNBQTRCQyxFQUFrQkMsR0FDNUMsT0FBSUQsRUFBTW5YLElBQU1vWCxFQUFNcFgsR0FBS21YLEVBQU14dUcsSUFBTXl1RyxFQUFNenVHLEdBQUt3dUcsRUFBTXBDLFFBQVVxQyxFQUFNckMsT0FBU29DLEVBQU1uQyxTQUFXb0MsRUFBTXBDLE9BQy9GbEMsRUFBeUJ1RSxNQUN2QnR4RyxLQUFLa3dHLFdBQVdtQixFQUFPLENBQUVwWCxFQUFHbVgsRUFBTW5YLEVBQUdyM0YsRUFBR3d1RyxFQUFNeHVHLEtBQ3ZENUMsS0FBS2t3RyxXQUFXbUIsRUFBTyxDQUFFcFgsRUFBR21YLEVBQU1uWCxFQUFJbVgsRUFBTXBDLE1BQU9wc0csRUFBR3d1RyxFQUFNeHVHLEtBQzVENUMsS0FBS2t3RyxXQUFXbUIsRUFBTyxDQUFFcFgsRUFBR21YLEVBQU1uWCxFQUFJbVgsRUFBTXBDLE1BQU9wc0csRUFBR3d1RyxFQUFNeHVHLEVBQUl3dUcsRUFBTW5DLFVBQ3RFanZHLEtBQUtrd0csV0FBV21CLEVBQU8sQ0FBRXBYLEVBQUdtWCxFQUFNblgsRUFBR3IzRixFQUFHd3VHLEVBQU14dUcsRUFBSXd1RyxFQUFNbkMsU0FDakRsQyxFQUF5QndFLFNBQ3ZCdnhHLEtBQUtrd0csV0FBV2tCLEVBQU8sQ0FBRW5YLEVBQUdvWCxFQUFNcFgsRUFBR3IzRixFQUFHeXVHLEVBQU16dUcsS0FDdkQ1QyxLQUFLa3dHLFdBQVdrQixFQUFPLENBQUVuWCxFQUFHb1gsRUFBTXBYLEVBQUlvWCxFQUFNckMsTUFBT3BzRyxFQUFHeXVHLEVBQU16dUcsS0FDNUQ1QyxLQUFLa3dHLFdBQVdrQixFQUFPLENBQUVuWCxFQUFHb1gsRUFBTXBYLEVBQUlvWCxFQUFNckMsTUFBT3BzRyxFQUFHeXVHLEVBQU16dUcsRUFBSXl1RyxFQUFNcEMsVUFDdEVqdkcsS0FBS2t3RyxXQUFXa0IsRUFBTyxDQUFFblgsRUFBR29YLEVBQU1wWCxFQUFHcjNGLEVBQUd5dUcsRUFBTXp1RyxFQUFJeXVHLEVBQU1wQyxTQUNqRGxDLEVBQXlCeUUsU0FDdkJ4eEcsS0FBS2t3RyxXQUFXbUIsRUFBTyxDQUFFcFgsRUFBR21YLEVBQU1uWCxFQUFHcjNGLEVBQUd3dUcsRUFBTXh1RyxJQUFLLElBQzVENUMsS0FBS2t3RyxXQUFXbUIsRUFBTyxDQUFFcFgsRUFBR21YLEVBQU1uWCxFQUFJbVgsRUFBTXBDLE1BQU9wc0csRUFBR3d1RyxFQUFNeHVHLElBQUssSUFDakU1QyxLQUFLa3dHLFdBQVdtQixFQUFPLENBQUVwWCxFQUFHbVgsRUFBTW5YLEVBQUltWCxFQUFNcEMsTUFBT3BzRyxFQUFHd3VHLEVBQU14dUcsRUFBSXd1RyxFQUFNbkMsU0FBVSxJQUNoRmp2RyxLQUFLa3dHLFdBQVdtQixFQUFPLENBQUVwWCxFQUFHbVgsRUFBTW5YLEVBQUdyM0YsRUFBR3d1RyxFQUFNeHVHLEVBQUl3dUcsRUFBTW5DLFNBQVUsSUFDbEVqdkcsS0FBS2t3RyxXQUFXa0IsRUFBTyxDQUFFblgsRUFBR29YLEVBQU1wWCxFQUFHcjNGLEVBQUd5dUcsRUFBTXp1RyxJQUFLLElBQ25ENUMsS0FBS2t3RyxXQUFXa0IsRUFBTyxDQUFFblgsRUFBR29YLEVBQU1wWCxFQUFJb1gsRUFBTXJDLE1BQU9wc0csRUFBR3l1RyxFQUFNenVHLElBQUssSUFDakU1QyxLQUFLa3dHLFdBQVdrQixFQUFPLENBQUVuWCxFQUFHb1gsRUFBTXBYLEVBQUlvWCxFQUFNckMsTUFBT3BzRyxFQUFHeXVHLEVBQU16dUcsRUFBSXl1RyxFQUFNcEMsU0FBVSxJQUNoRmp2RyxLQUFLa3dHLFdBQVdrQixFQUFPLENBQUVuWCxFQUFHb1gsRUFBTXBYLEVBQUdyM0YsRUFBR3l1RyxFQUFNenVHLEVBQUl5dUcsRUFBTXBDLFNBQVUsSUFDakVqdkcsS0FBS3N3RyxhQUFhYyxFQUFNeHVHLEVBQUd5dUcsRUFBTXp1RyxFQUFHeXVHLEVBQU16dUcsRUFBSXl1RyxFQUFNcEMsUUFBUSxJQUFVbUMsRUFBTW5YLEdBQUtvWCxFQUFNcFgsR0FBTW1YLEVBQU1uWCxFQUFJbVgsRUFBTXBDLE9BQVdxQyxFQUFNcFgsRUFBSW9YLEVBQU1yQyxPQUN4SWh2RyxLQUFLc3dHLGFBQWFlLEVBQU16dUcsRUFBR3d1RyxFQUFNeHVHLEVBQUd3dUcsRUFBTXh1RyxFQUFJd3VHLEVBQU1uQyxRQUFRLElBQVVvQyxFQUFNcFgsR0FBS21YLEVBQU1uWCxHQUFNb1gsRUFBTXBYLEVBQUlvWCxFQUFNckMsT0FBV29DLEVBQU1uWCxFQUFJbVgsRUFBTXBDLE1BQ2xJakMsRUFBeUIwRSxVQUN2Qnp4RyxLQUFLa3dHLFdBQVdtQixFQUFPLENBQUVwWCxFQUFHbVgsRUFBTW5YLEVBQUdyM0YsRUFBR3d1RyxFQUFNeHVHLEtBQ3ZENUMsS0FBS2t3RyxXQUFXbUIsRUFBTyxDQUFFcFgsRUFBR21YLEVBQU1uWCxFQUFJbVgsRUFBTXBDLE1BQU9wc0csRUFBR3d1RyxFQUFNeHVHLEtBQzVENUMsS0FBS2t3RyxXQUFXbUIsRUFBTyxDQUFFcFgsRUFBR21YLEVBQU1uWCxFQUFJbVgsRUFBTXBDLE1BQU9wc0csRUFBR3d1RyxFQUFNeHVHLEVBQUl3dUcsRUFBTW5DLFVBQ3RFanZHLEtBQUtrd0csV0FBV21CLEVBQU8sQ0FBRXBYLEVBQUdtWCxFQUFNblgsRUFBR3IzRixFQUFHd3VHLEVBQU14dUcsRUFBSXd1RyxFQUFNbkMsVUFDeERqdkcsS0FBS2t3RyxXQUFXa0IsRUFBTyxDQUFFblgsRUFBR29YLEVBQU1wWCxFQUFHcjNGLEVBQUd5dUcsRUFBTXp1RyxLQUM5QzVDLEtBQUtrd0csV0FBV2tCLEVBQU8sQ0FBRW5YLEVBQUdvWCxFQUFNcFgsRUFBSW9YLEVBQU1yQyxNQUFPcHNHLEVBQUd5dUcsRUFBTXp1RyxLQUM1RDVDLEtBQUtrd0csV0FBV2tCLEVBQU8sQ0FBRW5YLEVBQUdvWCxFQUFNcFgsRUFBSW9YLEVBQU1yQyxNQUFPcHNHLEVBQUd5dUcsRUFBTXp1RyxFQUFJeXVHLEVBQU1wQyxVQUN0RWp2RyxLQUFLa3dHLFdBQVdrQixFQUFPLENBQUVuWCxFQUFHb1gsRUFBTXBYLEVBQUdyM0YsRUFBR3l1RyxFQUFNenVHLEVBQUl5dUcsRUFBTXBDLFNBQ2pEbEMsRUFBeUIyRSxRQUV6QjNFLEVBQXlCNEUsVUFPN0IsRUFBQUMsNkJBQVAsU0FBb0NsRSxFQUFhQyxHQUMvQyxHQUFJM3RHLEtBQUt5d0csaUJBQWlCL0MsSUFBVTF0RyxLQUFLMHdHLGVBQWUvQyxHQUN0RCxPQUFJM3RHLEtBQUtzd0csYUFBYTVDLEVBQU0sR0FBRzlxRyxFQUFHK3FHLEVBQU0sR0FBRy9xRyxFQUFHK3FHLEVBQU0sR0FBRy9xRyxJQUFNNUMsS0FBS3N3RyxhQUFhM0MsRUFBTSxHQUFHMVQsRUFBR3lULEVBQU0sR0FBR3pULEVBQUd5VCxFQUFNLEdBQUd6VCxHQUN2RyxJQUFJNFgsRUFBMEIvRSxFQUE4QjJFLFVBQVcsQ0FBRXhYLEVBQUcwVCxFQUFNLEdBQUcxVCxFQUFHcjNGLEVBQUc4cUcsRUFBTSxHQUFHOXFHLElBRXBHLElBQUlpdkcsRUFBMEIvRSxFQUE4QmdGLFNBRWhFLEdBQUk5eEcsS0FBS3l3RyxpQkFBaUI5QyxJQUFVM3RHLEtBQUswd0csZUFBZWhELEdBQzdELE9BQUkxdEcsS0FBS3N3RyxhQUFhM0MsRUFBTSxHQUFHL3FHLEVBQUc4cUcsRUFBTSxHQUFHOXFHLEVBQUc4cUcsRUFBTSxHQUFHOXFHLElBQU01QyxLQUFLc3dHLGFBQWE1QyxFQUFNLEdBQUd6VCxFQUFHMFQsRUFBTSxHQUFHMVQsRUFBRzBULEVBQU0sR0FBRzFULEdBQ3ZHLElBQUk0WCxFQUEwQi9FLEVBQThCMkUsVUFBVyxDQUFFeFgsRUFBR3lULEVBQU0sR0FBR3pULEVBQUdyM0YsRUFBRytxRyxFQUFNLEdBQUcvcUcsSUFFcEcsSUFBSWl2RyxFQUEwQi9FLEVBQThCZ0YsU0FFaEUsR0FBSTl4RyxLQUFLeXdHLGlCQUFpQi9DLElBQVUxdEcsS0FBS3l3RyxpQkFBaUI5QyxHQUFRLENBQ3ZFLEdBQUlELEVBQU0sR0FBRzlxRyxJQUFNK3FHLEVBQU0sR0FBRy9xRyxFQUFHLENBQzdCLElBQU1tdkcsRUFBY25oRyxLQUFLeWQsSUFBSXpkLEtBQUtrYyxJQUFJNGdGLEVBQU0sR0FBR3pULEVBQUd5VCxFQUFNLEdBQUd6VCxHQUFJcnBGLEtBQUtrYyxJQUFJNmdGLEVBQU0sR0FBRzFULEVBQUcwVCxFQUFNLEdBQUcxVCxJQUN2RitYLEVBQVlwaEcsS0FBS2tjLElBQUlsYyxLQUFLeWQsSUFBSXEvRSxFQUFNLEdBQUd6VCxFQUFHeVQsRUFBTSxHQUFHelQsR0FBSXJwRixLQUFLeWQsSUFBSXMvRSxFQUFNLEdBQUcxVCxFQUFHMFQsRUFBTSxHQUFHMVQsSUFDM0YsT0FBSThYLEdBQWVDLEVBQ1YsSUFBSUgsRUFBMEIvRSxFQUE4Qm1GLGFBQVMxb0csRUFBVyxDQUFDLENBQUUwd0YsRUFBRzhYLEVBQWFudkcsRUFBRzhxRyxFQUFNLEdBQUc5cUcsR0FBSyxDQUFFcTNGLEVBQUcrWCxFQUFXcHZHLEVBQUc4cUcsRUFBTSxHQUFHOXFHLEtBRWhKLElBQUlpdkcsRUFBMEIvRSxFQUE4QmdGLFNBR3JFLE9BQU8sSUFBSUQsRUFBMEIvRSxFQUE4QmdGLFNBRWhFLEdBQUk5eEcsS0FBSzB3RyxlQUFlaEQsSUFBVTF0RyxLQUFLMHdHLGVBQWUvQyxHQUFRLENBQ25FLEdBQUlELEVBQU0sR0FBR3pULElBQU0wVCxFQUFNLEdBQUcxVCxFQUFHLENBQzdCLElBQU1pWSxFQUFjdGhHLEtBQUt5ZCxJQUFJemQsS0FBS2tjLElBQUk0Z0YsRUFBTSxHQUFHOXFHLEVBQUc4cUcsRUFBTSxHQUFHOXFHLEdBQUlnTyxLQUFLa2MsSUFBSTZnRixFQUFNLEdBQUcvcUcsRUFBRytxRyxFQUFNLEdBQUcvcUcsSUFDdkZ1dkcsRUFBWXZoRyxLQUFLa2MsSUFBSWxjLEtBQUt5ZCxJQUFJcS9FLEVBQU0sR0FBRzlxRyxFQUFHOHFHLEVBQU0sR0FBRzlxRyxHQUFJZ08sS0FBS3lkLElBQUlzL0UsRUFBTSxHQUFHL3FHLEVBQUcrcUcsRUFBTSxHQUFHL3FHLElBQzNGLE9BQUlzdkcsR0FBZUMsRUFDVixJQUFJTixFQUEwQi9FLEVBQThCbUYsYUFBUzFvRyxFQUFXLENBQUMsQ0FBRTB3RixFQUFHeVQsRUFBTSxHQUFHelQsRUFBR3IzRixFQUFHc3ZHLEdBQWUsQ0FBRWpZLEVBQUd5VCxFQUFNLEdBQUd6VCxFQUFHcjNGLEVBQUd1dkcsS0FFeEksSUFBSU4sRUFBMEIvRSxFQUE4QmdGLFNBR3JFLE9BQU8sSUFBSUQsRUFBMEIvRSxFQUE4QmdGLFNBR3JFLE9BQU8sSUFBSUQsRUFBMEIvRSxFQUE4QmdGLFVBS2hFLEVBQUFNLHFCQUFQLFNBQTRCQyxHQUUxQixJQURBLElBQU1DLEVBQWdCLEdBQ2I3MEcsRUFBSSxFQUFHQSxFQUFJNDBHLEVBQU1oeUcsT0FBUTVDLElBQ2hDNjBHLEVBQWM3dUcsS0FBS3pELEtBQUs2dkcsZ0JBQWdCd0MsRUFBTTUwRyxLQUNoRCxJQUFNODBHLEVBQWdCLEdBQ2hCQyxFQUE2QixHQUNuQyxJQUFTLzBHLEVBQUksRUFBR0EsRUFBSTQwRyxFQUFNaHlHLE9BQVE1QyxJQUFLLENBRXJDLElBREEsSUFBSWcxRyxFQUFzQnp5RyxLQUFLNnZHLGdCQUFnQndDLEVBQU01MEcsSSxXQUM1Q2lDLEdBRVAsR0FBSUEsR0FBS2pDLEVBQUcsQ0FDVixJQUFNaTFHLEVBQXlCLEdBQ3pCQyxFQUFnQixFQUFLeEIscUJBQXFCa0IsRUFBTTN5RyxHQUFJMnlHLEVBQU01MEcsSUFFaEUsR0FBSWsxRyxJQUFrQjVGLEVBQXlCeUUsVUFBYS96RyxFQUFJaUMsR0FBS2l6RyxJQUFrQjVGLEVBQXlCdUUsTSxPQUM5R21CLEVBQW9CcHlHLE9BQVMsRSxRQUV4QixHQUFJc3lHLElBQWtCNUYsRUFBeUIwRSxXQUFha0IsSUFBa0I1RixFQUF5QjJFLFFBQVMsQ0FFckgsSUFEQSxJQUFNLEVBQWlDLEdBQzlCdnRHLEVBQUksRUFBR0EsRUFBSXN1RyxFQUFvQnB5RyxPQUFROEQsSUFBSyxDQUNuRCxJQUFNeXVHLEVBQXVCLEdBQ3ZCbEYsRUFBUStFLEVBQW9CdHVHLEdBQ2xDLElBQUssRUFBS2tzRyxhQUFhM0MsRUFBTzJFLEVBQU0zeUcsSUFBSyxDQUN2QyxJQUFLLElBQUlSLEVBQUksRUFBR0EsRUFBSW96RyxFQUFjNXlHLEdBQUdXLE9BQVFuQixJQUFLLENBQ2hELElBQU15dUcsRUFBUTJFLEVBQWM1eUcsR0FBR1IsR0FDekIyekcsRUFBb0IsRUFBS2pCLDZCQUE2QmxFLEVBQU9DLEdBQy9Ea0YsRUFBa0IvL0YsT0FBU2c2RixFQUE4QjJFLFVBQ3ZEb0IsRUFBa0I1RixjQUNwQjJGLEVBQXFCbnZHLEtBQUtvdkcsRUFBa0I1RixjQUNyQzRGLEVBQWtCLy9GLE9BQVNnNkYsRUFBOEJtRixTQUM5RFksRUFBa0IzRixTQUNwQixFQUF1QnpwRyxLQUFLb3ZHLEVBQWtCM0YsU0FHcEQsR0FBSTBGLEVBQXFCdnlHLE9BQVMsRUFHaEMsSUFGQSxJQUFNeXlHLEVBQXNCLEVBQUtuQyxrQkFBa0JpQyxFQUFzQkgsRUFBb0J0dUcsR0FBRyxJQUFJLEdBQzlGNHVHLEVBQWtCLEVBQUs3QixnQkFBZ0IsRUFBSTRCLEVBQXFCLENBQUFMLEVBQW9CdHVHLEdBQUcsTUFDcEY1RSxFQUFJLEVBQUdBLEVBQUl3ekcsRUFBZ0IxeUcsT0FBUWQsSUFDckMsRUFBSzJ3RyxXQUFXbUMsRUFBTTN5RyxHQUFJdXhHLEVBQWExRCxhQUFhd0YsRUFBZ0J4ekcsTUFDdkVtekcsRUFBdUJqdkcsS0FBS3N2RyxFQUFnQnh6RyxTQUdoRG16RyxFQUF1Qmp2RyxLQUFLZ3ZHLEVBQW9CdHVHLEtBSXRELEdBQUksRUFBdUI5RCxPQUFTLEdBQUtzeUcsSUFBa0I1RixFQUF5QjJFLFFBQ2xGLEksZUFBUzd6RyxHQUNGMjBHLEVBQW1CL3RELE1BQUssU0FBQWozQixHQUFXLE9BQUF5akYsRUFBYXhELGNBQWNqZ0YsRUFBUyxFQUF1QjN2QixRQUNqRzIwRyxFQUFtQi91RyxLQUFLLEVBQXVCNUYsS0FGMUNBLEVBQUksRUFBR0EsRUFBSSxFQUF1QndDLE9BQVF4QyxJLEVBQTFDQSxHQU1YNDBHLEVBQXNCQyxLLE9BN0NuQmh6RyxFQUFJLEVBQUdBLEVBQUkyeUcsRUFBTWh5RyxPQUFRWCxJQUFLLEMsZUFBOUJBLEcsTUFpREwreUcsRUFBb0JweUcsT0FBUyxHQUMvQmt5RyxFQUFjOXVHLEtBQUksTUFBbEI4dUcsRUFBc0JFLEdBSTFCLE9BRklELEVBQW1CbnlHLE9BQVMsR0FDOUJreUcsRUFBYzl1RyxLQUFJLE1BQWxCOHVHLEVBQXNCQyxHQUNqQkQsR0FJRixFQUFBUyxpQkFBUCxTQUF3QjlsRixHQUl0QixJQUhBLElBQU11QixFQUFPclAsU0FBUzB2RixnQkFBZ0IsNkJBQThCLFFBQzlEbUUsRUFBYyxHQUVYeDFHLEVBQUksRUFBR0EsRUFBSXl2QixFQUFTN3NCLE9BQVE1QyxJQUNuQ3cxRyxFQUFZeHZHLEtBQUssSUFBSXlwQixFQUFTenZCLEdBQUcsR0FBR3c4RixFQUFFaVosUUFGdEIsR0FFd0MsSUFBSWhtRixFQUFTenZCLEdBQUcsR0FBR21GLEVBQUVzd0csUUFGN0QsR0FFK0UsSUFBSWhtRixFQUFTenZCLEdBQUcsR0FBR3c4RixFQUFFaVosUUFGcEcsR0FFc0gsSUFBSWhtRixFQUFTenZCLEdBQUcsR0FBR21GLEVBQUVzd0csUUFGM0ksSUFLbEIsT0FEQXprRixFQUFLMU4sYUFBYSxJQUFLa3lGLEVBQVluckcsS0FBSyxLQUNqQzJtQixHQUVYLEVBMVZBLEdDQUEsYUFnQkUsV0FBWXp3QixFQUFja2lCLEdBUGpCLEtBQUFpekYsU0FBVyxJQUNYLEtBQUFDLFVBQVksS0FFckIsS0FBQUMsY0FBZSxFQUticnpHLEtBQUtoQyxLQUFPQSxFQUNaZ0MsS0FBS2tnQixHQUFLQSxFQUNWbGdCLEtBQUsrZSxRQUVML2UsS0FBS3N6RyxLQUFPdHpHLEtBQUtzekcsS0FBS3IwRyxLQUFLZSxNQXVEL0IsT0FwREUsWUFBQXV6RyxXQUFBLFNBQVd4MEYsR0FBWCxXQUNFL2UsS0FBSytlLFFBQVVLLFNBQVN3QixjQUFjLE9BQ3RDLElBQU00eUYsRUFBWSxJQUFJQyxVQUN0Qnp6RyxLQUFLMHpHLFVBQVlGLEVBQVVHLGdCQUFnQjUwRixFQUFTLGlCQUFpQjYwRixnQkFDckU1ekcsS0FBSytlLFFBQVFrQyxZQUFZamhCLEtBQUswekcsV0FFOUIxekcsS0FBSzB6RyxVQUFVbnRELGlCQUFpQixRQUFTdm1ELEtBQUtzekcsTUFFOUN0ekcsS0FBSzB6RyxVQUFVbnRELGlCQUFpQixhQUFhLFNBQUEvbEQsR0FDekIsSUFBZEEsRUFBRXF6RyxVQUNKLEVBQUtSLGNBQWUsRUFDcEIsRUFBS1MsZ0JBQWtCLEVBQVMzRSxrQkFBa0IzdUcsRUFBRyxFQUFLa3pHLFdBQzFELEVBQUtLLFlBQWMsRUFBS0wsVUFBVU0sUUFBUUMsWUFHOUNqMEcsS0FBSzB6RyxVQUFVbnRELGlCQUFpQixXQUFXLFdBQU0sU0FBSzhzRCxjQUFlLEtBQ3JFcnpHLEtBQUswekcsVUFBVW50RCxpQkFBaUIsY0FBYyxXQUFNLFNBQUs4c0QsY0FBZSxLQUN4RXJ6RyxLQUFLMHpHLFVBQVVudEQsaUJBQWlCLGFBQWEsU0FBQS9sRCxHQUN6QixJQUFkQSxFQUFFcXpHLFVBQXVDLElBQXRCLEVBQUtSLGVBQzFCLEVBQUtBLGNBQWUsRUFDcEIsRUFBS1MsZ0JBQWtCLEVBQVMzRSxrQkFBa0IzdUcsRUFBRyxFQUFLa3pHLFdBQzFELEVBQUtLLFlBQWMsRUFBS0wsVUFBVU0sUUFBUUMsU0FFeEMsRUFBS1osZUFDUCxFQUFLYSxjQUFnQixFQUFTL0Usa0JBQWtCM3VHLEVBQUcsRUFBS2t6RyxXQUN4RCxFQUFLQSxVQUFVTSxRQUFRQyxRQUFRaGEsR0FBSyxFQUFLaWEsY0FBY2phLElBQU0sRUFBSzZaLGdCQUFnQjdaLEVBQUksRUFBSzhaLFlBQVk5WixHQUN2RyxFQUFLeVosVUFBVU0sUUFBUUMsUUFBUXJ4RyxHQUFLLEVBQUtzeEcsY0FBY3R4RyxJQUFNLEVBQUtreEcsZ0JBQWdCbHhHLEVBQUksRUFBS214RyxZQUFZbnhHLFFBSzdHLFlBQUF1eEcsb0JBQUEsV0FDRW4wRyxLQUFLbzBHLGNBQWdCaDFGLFNBQVMwdkYsZ0JBQWdCLDZCQUE4QixLQUU1RTl1RyxLQUFLMHpHLFVBQVV6eUYsWUFBWWpoQixLQUFLbzBHLGdCQUcxQixZQUFBZCxLQUFSLFNBQWE5eUcsR0FDWEEsRUFBRWcrRixpQkFDRngrRixLQUFLazBHLGNBQWdCLEVBQVMvRSxrQkFBa0IzdUcsRUFBR1IsS0FBSzB6RyxXQUN4RCxJQUFJVyxFQUFjN3pHLEVBQUU4ekcsT0FBUyxFQUFJdDBHLEtBQUtvekcsVUFBWSxFQUFJcHpHLEtBQUtvekcsVUFDdkRtQixHQUFTdjBHLEtBQUtrMEcsY0FBY2phLEVBQUlqNkYsS0FBSzB6RyxVQUFVTSxRQUFRQyxRQUFRaGEsR0FBS2o2RixLQUFLMHpHLFVBQVVNLFFBQVFDLFFBQVFqRixNQUNuR3dGLEVBQU94MEcsS0FBSzB6RyxVQUFVTSxRQUFRQyxRQUFRakYsTUFBUXFGLEVBQWFyMEcsS0FBSzB6RyxVQUFVTSxRQUFRQyxRQUFRakYsTUFDMUZ5RixHQUFTejBHLEtBQUtrMEcsY0FBY3R4RyxFQUFJNUMsS0FBSzB6RyxVQUFVTSxRQUFRQyxRQUFRcnhHLEdBQUs1QyxLQUFLMHpHLFVBQVVNLFFBQVFDLFFBQVFoRixPQUNuR3lGLEVBQU8xMEcsS0FBSzB6RyxVQUFVTSxRQUFRQyxRQUFRaEYsT0FBU29GLEVBQWFyMEcsS0FBSzB6RyxVQUFVTSxRQUFRQyxRQUFRaEYsUUFDM0Z6dUcsRUFBRTh6RyxPQUFTLEVBQUl0MEcsS0FBSzB6RyxVQUFVTSxRQUFRQyxRQUFRakYsTUFBd0IsR0FBaEJodkcsS0FBS216RyxTQUFnQm56RyxLQUFLMHpHLFVBQVVNLFFBQVFDLFFBQVFqRixNQUFRaHZHLEtBQUttekcsU0FBVyxNQUNwSW56RyxLQUFLMHpHLFVBQVVNLFFBQVFDLFFBQVFoYSxHQUFLdWEsRUFBT0QsRUFDM0N2MEcsS0FBSzB6RyxVQUFVTSxRQUFRQyxRQUFRakYsT0FBU3dGLEVBQ3hDeDBHLEtBQUswekcsVUFBVU0sUUFBUUMsUUFBUXJ4RyxHQUFLOHhHLEVBQU9ELEVBQzNDejBHLEtBQUswekcsVUFBVU0sUUFBUUMsUUFBUWhGLFFBQVV5RixJQUcvQyxFQTVFQSxHQ0NlLFFBU2IsaUJBQWlCeDJGLEVBQU95MkYsR0FDdEIsTUFBTUMsRUFBYSxHQUNmMTJGLEVBQU1sZ0IsTUFBTTQyRyxFQUFXbnhHLEtBQUssU0FBWXlhLEVBQU1sZ0IsS0FBTyxLQUNyRGtnQixFQUFNMjJGLFVBQVVELEVBQVdueEcsS0FBSyxJQUFPeWEsRUFBTTIyRixTQUFXLGlCQUN0QyxJQUFsQjMyRixFQUFNNDJGLFNBQW1CRixFQUFXbnhHLEtBQUssaUJBQ3pDeWEsRUFBTTYyRixhQUFhSCxFQUFXbnhHLEtBQUssc0JBQXlCeWEsRUFBTTYyRixZQUFjLEtBQ2hGNzJGLEVBQU04MkYsWUFBWUosRUFBV254RyxLQUFLLGlEQUN0QyxJQUFJMlgsRUFBVThwRSxLQUFLaGhDLE9BQU8rd0QsTUFBTUMsTUFBTXAxRixLQUFLLENBQ3pDLFNBQVksR0FDWixPQUFVLGdDQUFnQzYwRixFQUFpQixLQUFPQSxFQUFpQixNQUNuRixFQUFLQyxFQUFXOXNHLEtBQUssV0FZdkIsT0FWQXNULEVBQVE1WSxLQUFLMk8sSUFDWCxNQUFNK2pHLEVBQVEvakcsRUFBSTdPLE9BQU80eUcsTUFDckJBLEdBQVNBLEVBQU03MEcsT0FBUyxFQUMxQjZJLFFBQVE0TyxJQUFJbzlGLEdBRVpoc0csUUFBUTRPLElBQUksa0NBQW1DODhGLEVBQVc5c0csS0FBSyxXQUVoRWdILElBQ0Q1RixRQUFRcEYsTUFBTWdMLEVBQUlwTSxRQUViMFksRUFRVCxzQkFBc0IrNUYsR0FDcEIsSUFBSS81RixFQUFVOHBFLEtBQUtoaEMsT0FBTyt3RCxNQUFNQyxNQUFNNTJHLElBQUksQ0FDeEM2MkcsT0FBUUEsRUFDUkMsSUFBSyxVQVFQLE9BTkFoNkYsRUFBUTVZLEtBQUsyTyxJQUNRLE1BQWZBLEVBQUlnMkQsUUFDTmorRCxRQUFRNE8sSUFBSSxnQkFBa0JxOUYsRUFBUywyQkFDeENybUcsSUFDRDVGLFFBQVFwRixNQUFNZ0wsRUFBSXBNLFFBRWIwWSxFQVNULG1CQUFtQis1RixFQUFRdnJFLEdBQ3pCLElBQUl4dUIsRUFBVThwRSxLQUFLaGhDLE9BQU8rd0QsTUFBTUMsTUFBTTUyRyxJQUFJLENBQ3hDNjJHLE9BQVFBLEVBQ1J2ckUsT0FBUUEsSUFTVixPQVBBeHVCLEVBQVE1WSxLQUFLMk8sSUFDUSxNQUFmQSxFQUFJZzJELFFBQ05qK0QsUUFBUTRPLElBQUksbUNBRWJoSixJQUNENUYsUUFBUXBGLE1BQU1nTCxLQUVUc00sRUFTVCxvQkFBb0JnOUUsRUFBT3ljLEVBQVcsU0FDcEMsTUFBTW55RyxFQUFPLENBQ1gsS0FBUTAxRixFQUNSLFNBQVkscUNBQ1osUUFBd0IsVUFBYnljLEVBQXVCLENBQUNBLEdBQVksSUFFM0N6NUYsRUFBVThwRSxLQUFLaGhDLE9BQU85b0MsUUFBUSxDQUNsQyxLQUFRLDZDQUNSLE9BQVUsT0FDVixLQUFRMVksSUFLVixPQUhBMFksRUFBUTVZLEtBQUsyTyxJQUNYakksUUFBUTRPLElBQUlzZ0YsRUFBUSx3QkFBMEIxc0YsS0FBS0MsTUFBTXdGLEVBQUl6TyxNQUFNd2QsTUFFOUQ5RSxFQVdULGtCQUFrQmk2RixFQUFhQyxFQUFjQyxFQUFVQyxHQUNyRCxNQUFNeEgsRUFBTyxJQUFJbmpGLEtBQUssQ0FBQ3dxRixHQUFjLENBQUV2aUcsS0FBTXdpRyxJQUN2Qzd6RyxFQUFXLENBQ2YsS0FBUTh6RyxFQUNSLFNBQVlELEVBQ1osUUFBVyxDQUFDRSxJQUVSM3dCLEVBQWNLLEtBQUtucUIsS0FBS2MsV0FBVzQ1QyxhQUNuQ0MsRUFBTyxJQUFJM0osU0FDakIySixFQUFLQyxPQUFPLFdBQVksSUFBSTlxRixLQUFLLENBQUNuZixLQUFLc0csVUFBVXZRLElBQVksQ0FBRXFSLEtBQU0sc0JBQ3JFNGlHLEVBQUtDLE9BQU8sT0FBUTNILEdBRXBCLElBQUk1eUYsRUFBVXc2RixNQUFNLGtGQUFtRixDQUNyR3RuRyxPQUFRLE9BQ1I4MkUsUUFBUyxJQUFJeXdCLFFBQVEsQ0FBRSxjQUFpQixVQUFZaHhCLElBQ3BEbmlGLEtBQU1nekcsSUFTUixPQVBBdDZGLEVBQVE1WSxLQUFLMk8sS0FDSSxJQUFYQSxFQUFJMmtHLElBQThCLE1BQWYza0csRUFBSWcyRCxRQUN6QmorRCxRQUFRNE8sSUFBSSxhQUFleTlGLEVBQVcsaUJBRXZDem1HLElBQ0Q1RixRQUFRcEYsTUFBTWdMLEtBRVRzTSxFQVVULHlCQUF5Qmk2RixFQUFhQyxFQUFjSCxHQUNsRCxNQUFNbkgsRUFBTyxJQUFJbmpGLEtBQUssQ0FBQ3dxRixHQUFjLENBQUV2aUcsS0FBTXdpRyxJQUN2Qzd6RyxFQUFXLENBQ2YsU0FBWTZ6RyxHQUVSendCLEVBQWNLLEtBQUtucUIsS0FBS2MsV0FBVzQ1QyxhQUNuQ0MsRUFBTyxJQUFJM0osU0FDakIySixFQUFLQyxPQUFPLFdBQVksSUFBSTlxRixLQUFLLENBQUNuZixLQUFLc0csVUFBVXZRLElBQVksQ0FBRXFSLEtBQU0sc0JBQ3JFNGlHLEVBQUtDLE9BQU8sT0FBUTNILEdBRXBCLElBQUk1eUYsRUFBVXc2RixNQUFNLG9EQUFvRFQseUJBQStCLENBQ3JHN21HLE9BQVEsUUFDUjgyRSxRQUFTLElBQUl5d0IsUUFBUSxDQUFFLGNBQWlCLFVBQVloeEIsSUFDcERuaUYsS0FBTWd6RyxJQVNSLE9BUEF0NkYsRUFBUTVZLEtBQUsyTyxLQUNJLElBQVhBLEVBQUkya0csSUFBOEIsTUFBZjNrRyxFQUFJZzJELFFBQ3pCaitELFFBQVE0TyxJQUFJLHVCQUViaEosSUFDRDVGLFFBQVFwRixNQUFNZ0wsS0FFVHNNLEVBNkNULGtCQUFrQis1RixFQUFRWSxHQUN4QixNQUFNMzZGLEVBQVU4cEUsS0FBS2hoQyxPQUFPK3dELE1BQU1DLE1BQU1sb0csT0FBTyxDQUM3QyxPQUFVbW9HLEVBQ1YsS0FBUVksRUFDUixXQUFjLFVBT2hCLE9BTEEzNkYsRUFBUTVZLEtBQUsyTyxNQUVWODhGLElBQ0Qva0csUUFBUXBGLE1BQU0sd0JBQTBCcXhHLEVBQVFsSCxLQUUzQzd5RixFQVNULGtCQUFrQis1RixFQUFRTixHQUN4QixNQUFNejVGLEVBQVU4cEUsS0FBS2hoQyxPQUFPOW9DLFFBQVEsQ0FDbEMsS0FBUSw2Q0FBK0MrNUYsRUFBUyxXQUNoRSxPQUFVLE9BQ1YsUUFBVyxDQUNULGVBQWdCLG9CQUVsQixLQUFRLENBQ04sR0FBTU4sS0FRVixPQUxBejVGLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJM0csSUFDWDg4RixJQUNEL2tHLFFBQVE0TyxJQUFJbTJGLEtBRVA3eUYsRUFJVCxnQkFBZ0IrNUYsRUFBUU4sR0FDdEIsTUFBTW55RyxFQUFPLENBQUUsR0FBTW15RyxHQUNMM3ZCLEtBQUtoaEMsT0FBTyt3RCxNQUFNcmxELFFBQVE1dUMsT0FBTyxDQUMvQyxPQUFVbTBGLEVBQ1YsU0FBWXp5RyxJQUVOc3pHLFNBQVEsU0FBVUMsT0FRNUIsa0JBQWtCZCxHQUNoQixJQUFJLzVGLEVBQVU4cEUsS0FBS2hoQyxPQUFPK3dELE1BQU1DLE1BQU1oZ0csT0FBTyxDQUMzQyxPQUFVaWdHLElBT1osT0FMQS81RixFQUFRNVksS0FBSzJPLElBQ1hqSSxRQUFRNE8sSUFBSTNHLElBQ1g4OEYsSUFDRC9rRyxRQUFRNE8sSUFBSW0yRixLQUVQN3lGLEVBc0RULGlCQUFpQis1RixFQUFRZSxFQUFjaDNELEVBQVEsR0FFN0MsT0FEdUIsSUFBSW45QyxRQUFRb1AsR0FBT29mLFdBQVdwZixFQUFLK3RDLElBQ3BDMThDLEtBQUsyTyxJQUN6QixNQUFNaUssRUFBVThwRSxLQUFLaGhDLE9BQU85b0MsUUFBUSxDQUNsQyxLQUFRLDZDQUE2Qys1Riw4RkFDckQsT0FBVSxPQUNWLFFBQVcsQ0FDVCxlQUFnQixvQkFFbEIsS0FBUSxDQUNOLEtBQVEsU0FDUixLQUFRLE9BQ1IsYUFBZ0JlLEtBTXBCLE9BSEE5NkYsRUFBUTVZLEtBQUsyTyxJQUNYakksUUFBUTRPLElBQUkzRyxLQUVQaUssSUE0QlgsdUJBQXVCKzVGLEVBQVFnQixHQUM3QixNQUFNLzZGLEVBQVU4cEUsS0FBS2hoQyxPQUFPOW9DLFFBQVEsQ0FDbEMsS0FBUSw2Q0FBK0MrNUYsRUFBUyxnQkFBa0JnQixFQUNsRixPQUFVLFNBQ1YsUUFBVyxDQUNULGVBQWdCLHNCQU1wQixPQUhBLzZGLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJM0csS0FFUGlLLEVBU1QsMEJBQTBCOFEsR0FFeEIsTUFBTTlRLEVBQVU4cEUsS0FBS2hoQyxPQUFPOW9DLFFBQVEsQ0FDbEMsS0FBUSw2Q0FBNkM4USwrRUFDckQsT0FBVSxNQUNWLFFBQVcsQ0FBRSxlQUFnQixzQkFPL0IsT0FMQTlRLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJM0csSUFDWDg4RixJQUNEL2tHLFFBQVE0TyxJQUFJbTJGLEtBRVA3eUYsRUFPVCxxQkFDRSxNQUFNQSxFQUFVOHBFLEtBQUtoaEMsT0FBTyt3RCxNQUFNbUIsTUFBTTkzRyxJQUFJLENBQzFDc3JDLE9BQVEsU0FLVixPQUhBeHVCLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJcE0sS0FBS0MsTUFBTXdGLEVBQUl6TyxNQUFNdytCLFFBRTVCOWxCLEVBV1QsK0JBQStCaTdGLEVBQVFDLEVBQVlDLEVBQWFycUYsR0FDOUQsTUFBTTlRLEVBQVV3NkYsTUFBTSw4RUFBK0UsQ0FDbkd0bkcsT0FBUSxPQUNSODJFLFFBQVMsQ0FDUCxlQUFnQixvQkFHbEIxaUYsS0FBTWdKLEtBQUtzRyxVQUFVLENBQUVxa0csU0FBUUMsYUFBWUMsY0FBYXJxRixnQkFVMUQsT0FSQTlRLEVBQVE1WSxLQUFLMk8sSUFDWGpJLFFBQVE0TyxJQUFJM0csSUFJWHJDLElBQ0Q1RixRQUFRcEYsTUFBTWdMLEtBRVRzTSxFQWNULHdCQUF3Qm83RixFQUFRQyxFQUFRQyxFQUFXQyxFQUFNSixFQUFhcnFGLEdBQ3BFLE1BQU05USxFQUFVdzZGLE1BQU0sMEZBQTJGLENBQy9HdG5HLE9BQVEsT0FDUjgyRSxRQUFTLENBQ1AsZUFBZ0Isb0JBRWxCMWlGLEtBQU1nSixLQUFLc0csVUFBVSxDQUFFd2tHLFNBQVFDLFNBQVFDLFlBQVdDLE9BQU1KLGNBQWFycUYsZ0JBVXZFLE9BUkE5USxFQUFRNVksS0FBSzJPLElBQ1hqSSxRQUFRNE8sSUFBSTNHLElBSVhyQyxJQUNENUYsUUFBUXBGLE1BQU1nTCxLQUVUc00sRUFjVCwyQkFBMkI0eUYsRUFBTTRJLEVBQVNDLEdBRXhDLElBQUlDLEVBRUosTUFBTUMsUUFBdUIsRUFBU2hKLGNBQWNDLEdBQzlDcUgsRUFBYzNwRyxLQUFLQyxNQUFNb3JHLEdBVS9CLEdBVEE3dEcsUUFBUTRPLElBQUksaUJBQWtCdTlGLEdBSzlCd0IsRUFBb0I3NEcsS0FBT3EzRyxFQUFZMkIsWUFBWTVlLE9BSTlDd2UsRUFBUUssZ0JBQWlCLENBQzVCLE1BQ01DLFNBRHlCbDNHLEtBQUttM0csVUFBVSxDQUFFbjVHLEtBQU0sZUFBZ0JnM0csWUFBWSxFQUFNRixTQUFTLEtBQ3REeHlHLE9BQU80eUcsTUFDbEQsR0FBSWdDLEdBQXFCQSxFQUFrQjcyRyxPQUFTLEVBQ2xEdTJHLEVBQVFLLGdCQUFrQkMsRUFBa0IsR0FBR2gzRixPQUMxQyxDQUVMLE1BQU1rM0YsUUFBeUJwM0csS0FBS3EzRyxhQUFhLGdCQUNqRFQsRUFBUUssZ0JBQWtCdnJHLEtBQUtDLE1BQU15ckcsRUFBaUIxMEcsTUFBTXdkLEdBQzVEaFgsUUFBUTRPLElBQUksb0RBSWhCLElBQUl3L0YsRUFHSixRQUE2Qi90RyxJQUF6QnF0RyxFQUFRVyxjQUErQlgsRUFBUVcsYUFBYTl5RCxLQUFLK3lELEdBQVFBLEVBQUt4NUcsT0FBU3EzRyxFQUFZMkIsWUFBWTVlLE9BZ0J4R3dlLEVBQVFXLGFBQWE5eUQsS0FBSyt5RCxHQUFRQSxFQUFLeDVHLE9BQVNxM0csRUFBWTJCLFlBQVk1ZSxPQUdqRjBlLEVBQVcsNEVBRVg1dEcsUUFBUXBGLE1BQU0scUVBcEJkLElBQ0UsTUFBTTJ6RyxRQUE4QnozRyxLQUFLcTNHLGFBQWFoQyxFQUFZMkIsWUFBWTVlLE1BQU93ZSxFQUFRSyxpQkFDN0ZLLEVBQWtCNXJHLEtBQUtDLE1BQU04ckcsRUFBc0IvMEcsTUFBTXdkLEdBQ3pEMjJGLEVBQW9CMzJGLEdBQUtvM0YsRUFDekIsTUFBTUksRUFBb0IsQ0FBRXgzRixHQUFJbzNGLEVBQWlCdDVHLEtBQU1xM0csRUFBWTJCLFlBQVk1ZSxZQUNsRDd1RixJQUF6QnF0RyxFQUFRVyxhQUNWWCxFQUFRVyxhQUFlLENBQUNHLEdBQ2RkLEVBQVFXLGFBQWE5eUQsS0FBSyt5RCxHQUFRQSxFQUFLeDVHLE9BQVNxM0csRUFBWTJCLFlBQVk1ZSxRQUNsRndlLEVBQVFXLGFBQWE5ekcsS0FBS2kwRyxHQUU1QixNQUFPNW9HLEdBQ1A1RixRQUFRNE8sSUFBSWhKLEdBQ1orbkcsRUFBb0IzMkYsR0FBSyxXQUN6QjQyRixFQUFXcHJHLEtBQUtDLE1BQU1tRCxFQUFJcE0sTUFBTW9CLE1BQU1pQyxRQVcxQyxHQUFJdXhHLEdBQW1CakMsRUFBWXNDLFNBQVUsQ0FDM0MsTUFBTUMsUUFBOEI1M0csS0FBS3EzRyxhQUFhLFdBQVlDLEdBQzVETyxFQUFtQm5zRyxLQUFLQyxNQUFNaXNHLEVBQXNCbDFHLE1BQU13ZCxHQUNoRTAyRixFQUFRVyxhQUFhWCxFQUFRVyxhQUFhbDNHLE9BQVMsR0FBR3czRyxpQkFBbUJBLEVBRXpFLE1BQU1DLEVBQW1CLEdBRXpCakIsRUFBb0JjLFNBQVcsR0FDL0IsSUFBSyxNQUFNSSxLQUFXMUMsRUFBWXNDLFNBQVUsQ0FDMUMsTUFBTUssRUFBaUJoNEcsS0FBS2k0RyxXQUFXNUMsRUFBWXNDLFNBQVNJLEdBQVUsZ0JBQWlCQSxFQUFRL3pHLE9BQU8sUUFBUzZ6RyxHQUMvR0MsRUFBaUJyMEcsS0FBS3UwRyxHQUV0QixNQUFNRSxFQUFhLElBQUksRUFBUUgsT0FBU3h1RyxHQUN4QzJ1RyxFQUFXM0UsV0FBVzhCLEVBQVlzQyxTQUFTSSxJQUMzQ2xCLEVBQW9CYyxTQUFTbDBHLEtBQUt5MEcsR0FHcEMsTUFBTUMsRUFBVSxJQUFJQyxZQUFZLGVBQzFCcjJHLFFBQVF1VCxJQUFJd2lHLEdBQWtCdDFHLEtBQUs2MUcsSUFDdkNBLEVBQVU3bUcsUUFBUSxDQUFDTCxFQUFLMVQsTUFDUCxJQUFYMFQsRUFBSTJrRyxJQUE4QixNQUFmM2tHLEVBQUlnMkQsUUFDekJoMkQsRUFBSXpPLEtBQUs0MUcsWUFBWUMsT0FBTy8xRyxLQUFLLEVBQUc5RCxRQUFPNkQsV0FDekMsTUFBTTJkLEVBQUt4VSxLQUFLQyxNQUFNd3NHLEVBQVF2c0csT0FBT2xOLElBQVF3aEIsR0FFN0MyMkYsRUFBb0JjLFNBQVNsNkcsR0FBR3lpQixHQUFLQSxFQUNyQ2hYLFFBQVE0TyxJQUFJLG1CQUFxQm9JLEVBQUssZ0NBSTNDcFIsSUFDRDVGLFFBQVFwRixNQUFNZ0wsS0FLbEIsR0FBSXdvRyxHQUFtQmpDLEVBQVltRCxhQUFjLENBQy9DLE1BQU1DLFFBQWtDejRHLEtBQUtxM0csYUFBYSxlQUFnQkMsR0FDcEVvQixFQUF1Qmh0RyxLQUFLQyxNQUFNOHNHLEVBQTBCLzFHLE1BQU13ZCxHQUN4RTAyRixFQUFRVyxhQUFhWCxFQUFRVyxhQUFhbDNHLE9BQVMsR0FBR3E0RyxxQkFBdUJBLEVBRTdFN0IsRUFBb0IyQixhQUFlbkQsRUFBWW1ELGFBRS9DLE1BQU1HLEVBQXVCLEdBQzdCLElBQUssTUFBTUMsS0FBZXZELEVBQVltRCxhQUFjLENBQ2xELE1BQU1LLEVBQXFCNzRHLEtBQUtpNEcsV0FBV3ZzRyxLQUFLc0csVUFBVXFqRyxFQUFZbUQsYUFBYUksSUFBZSxtQkFBb0JBLEVBQVk1MEcsT0FBTyxTQUFVMDBHLEdBQ25KQyxFQUFxQmwxRyxLQUFLbzFHLFNBRXRCOTJHLFFBQVF1VCxJQUFJcWpHLEdBQ2ZuMkcsS0FBSzJPLElBRUpqSSxRQUFRNE8sSUFBSSw4Q0FDWGhKLElBQ0Q1RixRQUFRcEYsTUFBTWdMLEtBS3BCLE9BQUl3b0csR0FDRnB1RyxRQUFRNE8sSUFBSSwrQkFBaUMzWixPQUFPZ04sS0FBS2txRyxFQUFZc0MsVUFBVXQzRyxPQUFTLGNBQ2pGLENBQUU2ZixHQUFJbzNGLEVBQWlCdDVHLEtBQU1xM0csRUFBWTJCLFlBQVk1ZSxRQUlyRHIyRixRQUFRRSxPQUFPLElBQUlnRSxNQUFNLDBCQUE0QjZ3RyxJQVVoRSw4QkFBOEJGLEdBRTVCLElBQUtBLEVBQVFLLGdCQUFpQixDQUM1QixNQUNNQyxTQUR5QmwzRyxLQUFLbTNHLFVBQVUsQ0FBRW41RyxLQUFNLGVBQWdCZzNHLFlBQVksRUFBTUYsU0FBUyxLQUN0RHh5RyxPQUFPNHlHLE1BQ2xELEtBQUlnQyxHQUFxQkEsRUFBa0I3MkcsT0FBUyxHQUlsRCxPQURBNkksUUFBUTRPLElBQUksdUJBQ0wvVixRQUFRRSxPQUFPLElBQUlnRSxNQUFNLHdCQUhoQzJ3RyxFQUFRSyxnQkFBa0JDLEVBQWtCLEdBQUdoM0YsR0FRbkQsTUFBTTQ0RixRQUEyQjk0RyxLQUFLbTNHLFVBQVUsQ0FBRXRDLFNBQVUrQixFQUFRSyxnQkFBaUJqQyxZQUFZLEVBQU1ELFlBQWEsY0FBZUQsU0FBUyxHQUFTLHVCQUNySixJQUFJaUUsRUFDSixNQUFNQyxFQUFzQkYsRUFBbUJ4MkcsT0FBTzR5RyxNQUNsRDhELEdBQXVCQSxFQUFvQjM0RyxPQUFTLFNBQ3pCa0osSUFBekJxdEcsRUFBUVcsY0FDVndCLEVBQWNDLEVBQ2RwQyxFQUFRVyxhQUFld0IsR0FDZGw1RyxNQUFNb0gsUUFBUTJ2RyxFQUFRVyxnQkFDL0J3QixFQUFjRCxFQUFtQngyRyxPQUFPNHlHLE1BQU0zL0YsT0FBTzBqRyxRQUF5RTF2RyxJQUE5RHF0RyxFQUFRVyxhQUFhOXlELEtBQUsreUQsR0FBUUEsRUFBS3QzRixLQUFPKzRGLEVBQVEvNEYsTUFDMUcxTyxRQUFRZ21HLElBQ2xCWixFQUFRVyxhQUFhOXpHLEtBQUsrekcsTUFJaEN0dUcsUUFBUXJELE9BQU8rd0csRUFBUVcsYUFBYWwzRyxPQUFTLEVBQUcsaUNBR2hELE1BQ002NEcsU0FEeUJsNUcsS0FBS20zRyxVQUFVLENBQUV0QyxTQUFVK0IsRUFBUUssZ0JBQWlCajVHLEtBQU0sY0FBZWczRyxZQUFZLEtBQ3pFMXlHLE9BQU80eUcsTUFDOUNnRSxHQUFxQkEsRUFBa0I3NEcsT0FBUyxFQUNsRHUyRyxFQUFRdUMsb0JBQXNCRCxFQUFrQixHQUFHaDVGLEdBRW5EaFgsUUFBUTRPLElBQUksNkJBSWQsTUFDTXNoRyxTQUR3QnA1RyxLQUFLbTNHLFVBQVUsQ0FBRXRDLFNBQVUrQixFQUFRdUMsb0JBQXFCbjdHLEtBQU0saUJBQWtCZzNHLFlBQVksS0FDakYxeUcsT0FBTzR5RyxNQUM1Q2tFLEdBQW9CQSxFQUFpQi80RyxPQUFTLEVBQ2hEdTJHLEVBQVF5QyxlQUFpQkQsRUFBaUIsR0FBR2w1RixHQUU3Q2hYLFFBQVE0TyxJQUFJLDJCQUlkLE1BQ013aEcsU0FEZXQ1RyxLQUFLbTNHLFVBQVUsQ0FBRXRDLFNBQVUrQixFQUFReUMsa0JBQ2pDLzJHLE9BQU80eUcsTUFZOUIsT0FYQTBCLEVBQVFXLGFBQWEvbEcsUUFBUWdtRyxJQUMzQixNQUFNK0IsRUFBbUJELEVBQVE3MEQsS0FBSyswRCxHQUFPaEMsRUFBS3QzRixLQUFPczVGLEVBQUl4N0csS0FBS3NOLFFBQVEsT0FBUSxLQUM5RWl1RyxJQUNGL0IsRUFBS2lDLFFBQVVGLEVBQWlCcjVGLE1BR3BDaFgsUUFBUXJELE9BQU95ekcsRUFBUWo1RyxPQUFTLEVBQUcsNEJBSzVCMDRHLEVBWVQsMEJBQTBCN3NGLEVBQVcwcUYsR0FHbkMsSUFBSThDLEVBR0osR0FMQXh3RyxRQUFRNE8sSUFBSSxxQkFBdUJvVSxRQUtOM2lCLElBQXpCcXRHLEVBQVFXLGFBQTRCLENBQ3RDLE1BQU1vQyxRQUF1QjM1RyxLQUFLNDVHLFlBQVkxdEYsRUFBVyxpQkFDcER4Z0IsS0FBS0MsTUFBTWd1RyxFQUFlajNHLE1BQU1veUcsVUFDbkM4QixFQUFRVyxhQUFlLENBQUMsQ0FBRXIzRixHQUFJZ00sRUFBV2x1QixLQUFNME4sS0FBS0MsTUFBTWd1RyxFQUFlajNHLE1BQU0xRSxPQUMvRTA3RyxFQUFlLE9BRU0sYUFBZHh0RixJQUNUd3RGLEVBQWU5QyxFQUFRVyxhQUFhc0MsVUFBVXJDLEdBQVFBLEVBQUt0M0YsS0FBT2dNLElBSXBFLEdBQUl3dEYsR0FBZ0IsSUFBTTlDLEVBQVFXLGFBQWFtQyxHQUFjSSxZQUMzRCxJQUNFLE1BQ01DLFNBRDJCLzVHLEtBQUtnNkcsbUJBQW1COXRGLElBQ1Y1cEIsT0FBT3czRyxZQUNsREMsR0FBdUJBLEVBQW9CMTVHLE9BQVMsRUFDdER1MkcsRUFBUVcsYUFBYW1DLEdBQWNJLFlBQWNDLEVBRWpEN3dHLFFBQVE0TyxJQUFJLGtDQUVkLE1BQU9oVSxHQUNQb0YsUUFBUTRPLElBQUkseUNBS2hCLEdBQUk0aEcsR0FBZ0IsSUFBTTlDLEVBQVFXLGFBQWFtQyxHQUFjTyxhQUFjLENBQ3pFLE1BQ01DLFNBRHdCbDZHLEtBQUttM0csVUFBVSxDQUFFdEMsU0FBVTNvRixFQUFXbHVCLEtBQU0sMEJBQ2pDc0UsT0FBTzR5RyxNQUNoRCxHQUFJZ0YsR0FBb0JBLEVBQWlCNzVHLE9BQVMsRUFBRyxDQUNuRCxNQUFNODVHLFFBQStCbjZHLEtBQUtvNkcsZUFBZUYsRUFBaUIsR0FBR2g2RixJQUM3RTAyRixFQUFRVyxhQUFhbUMsR0FBY08sYUFBZUUsRUFBdUJ6M0csVUFFekV3RyxRQUFRNE8sSUFBSSxrQ0FLaEIsR0FBSTRoRyxHQUFnQixJQUFNOUMsRUFBUVcsYUFBYW1DLEdBQWMvQixTQUFVLENBQ3JFLE1BQ00wQyxTQUQwQnI2RyxLQUFLbTNHLFVBQVUsQ0FBRXRDLFNBQVUzb0YsRUFBVzhvRixZQUFZLEVBQU1oM0csS0FBTSxjQUNqRHNFLE9BQU80eUcsTUFDcEQsR0FBSW1GLEdBQXNCQSxFQUFtQmg2RyxPQUFTLEVBQUcsQ0FDdkQsTUFBTWk2RyxRQUFvQnQ2RyxLQUFLbTNHLFVBQVUsQ0FBRXRDLFNBQVV3RixFQUFtQixHQUFHbjZGLEdBQUk0MEYsU0FBUyxJQUN4RjhCLEVBQVFXLGFBQWFtQyxHQUFjL0IsU0FBVyxHQUM5QzJDLEVBQVloNEcsT0FBTzR5RyxNQUFNMWpHLFFBQVF1bUcsSUFDVix1QkFBakJBLEVBQVEvNUcsS0FDVjQ0RyxFQUFRVyxhQUFhbUMsR0FBY2EsaUJBQW1CeEMsRUFBUTczRixHQUU5RDAyRixFQUFRVyxhQUFhbUMsR0FBYy9CLFNBQVNsMEcsS0FBSyxJQUFJLEVBQVFzMEcsRUFBUS81RyxLQUFLc04sUUFBUSxRQUFTLElBQUt5c0csRUFBUTczRixZQUk1R2hYLFFBQVE0TyxJQUFJLDZCQUtoQixHQUFJNGhHLEdBQWdCLElBQU05QyxFQUFRVyxhQUFhbUMsR0FBY2xCLGFBQWMsQ0FDekUsTUFDTWdDLFNBRDhCeDZHLEtBQUttM0csVUFBVSxDQUFFdEMsU0FBVTNvRixFQUFXOG9GLFlBQVksRUFBTWgzRyxLQUFNLGtCQUM3Q3NFLE9BQU80eUcsTUFDNUQsR0FBSXNGLEdBQTBCQSxFQUF1Qm42RyxPQUFTLEVBQUcsQ0FDL0QsTUFBTW82RyxRQUF3Qno2RyxLQUFLbTNHLFVBQVUsQ0FBRXRDLFNBQVUyRixFQUF1QixHQUFHdDZGLEdBQUk0MEYsU0FBUyxJQUNoRzhCLEVBQVFXLGFBQWFtQyxHQUFjbEIsYUFBZWlDLEVBQWdCbjRHLE9BQU80eUcsV0FFekVoc0csUUFBUTRPLElBQUksaUNBS2hCLEdBQUk0aEcsR0FBZ0IsSUFBTTlDLEVBQVFXLGFBQWFtQyxHQUFjZ0IsU0FBVSxDQUVyRSxNQUNNQyxTQURvQjM2RyxLQUFLbTNHLFVBQVUsQ0FBRXRDLFNBQVUzb0YsRUFBV2x1QixLQUFNLGdCQUFpQjgyRyxTQUFTLEtBQy9EeHlHLE9BQU80eUcsTUFDeEMsR0FBSXlGLEdBQWdCQSxFQUFhdDZHLE9BQVMsRUFBRyxDQUMzQ3UyRyxFQUFRVyxhQUFhbUMsR0FBY2tCLGVBQWlCRCxFQUFhLEdBQUd6NkYsR0FDcEUsTUFBTTI2RixRQUEyQjc2RyxLQUFLbzZHLGVBQWVPLEVBQWEsR0FBR3o2RixJQUNyRTAyRixFQUFRVyxhQUFhbUMsR0FBY2dCLFNBQVdodkcsS0FBS0MsTUFBTWt2RyxFQUFtQm40RyxXQUU1RXdHLFFBQVE0TyxJQUFJLGdDQUtoQixHQUFJNGhHLEdBQWdCLElBQU05QyxFQUFRVyxhQUFhbUMsR0FBY29CLE9BQVEsQ0FDbkUsTUFDTUMsU0FEd0IvNkcsS0FBS20zRyxVQUFVLENBQUV0QyxTQUFVM29GLEVBQVc4b0YsWUFBWSxFQUFNaDNHLEtBQU0sWUFDbkRzRSxPQUFPNHlHLE1BQ2hELEdBQUk2RixHQUFvQkEsRUFBaUIxNkcsT0FBUyxFQUFHLENBQ25ELE1BQU0yNkcsUUFBa0JoN0csS0FBS20zRyxVQUFVLENBQUV0QyxTQUFVa0csRUFBaUIsR0FBRzc2RixLQUN2RTAyRixFQUFRVyxhQUFhbUMsR0FBY29CLE9BQVNFLEVBQVUxNEcsT0FBTzR5RyxXQUU3RGhzRyxRQUFRNE8sSUFBSSwyQkFJaEIsT0FBSTRoRyxHQUFnQixHQUNsQnh3RyxRQUFRNE8sSUFBSSwwQ0FDTDgrRixFQUFRVyxhQUFhbUMsSUFFckIzM0csUUFBUUUsT0FBTyxJQUFJZ0UsTUFBTSw4Q0MzeEJ0QyxhQU9FLFdBQVlnMUcsRUFBdUJsOEYsRUFBaUJtOEYsRyxXQUFBLElBQUFBLE1BQUEsSUFOcEQsS0FBQUQsWUFBd0IsR0FJeEIsS0FBQUUsZ0JBQWdDLElBRzlCLEVBQUFuN0csS0FBS2k3RyxhQUFZeDNHLEtBQUksUUFBSXczRyxHQUN6Qmo3RyxLQUFLK2UsUUFBVUEsRUFDZi9lLEtBQUtrN0csU0FBV0EsRUFDaEJsN0csS0FBS2tnQixHQUFLLEtBQU8sRUFBU3d2RixTQXNDOUIsT0FqQkUsWUFBQTBMLHFCQUFBLFNBQXFCaEgsRUFBNEI5cEMsR0FHL0MsSUFEQSxJQUFNK3dDLEVBQWEsR0FDVjU5RyxFQUFJLEVBQUdBLEVBQUk2c0UsRUFBU2pxRSxPQUFRNUMsSUFDbkM0OUcsRUFBVzUzRyxLQUFLLEVBQVN5ckcsWUFBWTVrQyxFQUFTN3NFLEdBQUksS0FFcEQsSUFBTXl2QixFQUFXLEVBQVNrbEYscUJBQXFCaUosR0FDekNDLEVBQWlCLEVBQVN0SSxpQkFBaUI5bEYsR0FDakRvdUYsRUFBZXY2RixhQUFhLFFBQVMsdUZBQ3JDdTZGLEVBQWVDLFFBQVFyN0YsR0FBS2xnQixLQUFLa2dCLEdBQ2pDazBGLEVBQWNuekYsWUFBWXE2RixHQUMxQnQ3RyxLQUFLbTdHLGdCQUFnQjEzRyxLQUFLNjNHLElBTTlCLEVBakRBLEdDRk8sTUFBTUUsRUFDWCxZQUFZQyxFQUFlQyxHQUN6QjE3RyxLQUFLeTdHLGNBQWdCQSxFQUdyQno3RyxLQUFLMjdHLGVBQWlCdjhGLFNBQVN3QixjQUFjLE9BQzdDNWdCLEtBQUsyN0csZUFBZUMsVUFBVTNrRixJQUFJLFlBQWEsU0FDL0NqM0IsS0FBSzY3RyxVQUFZejhGLFNBQVN3QixjQUFjLE9BQ3hDNWdCLEtBQUs2N0csVUFBVUQsVUFBVTNrRixJQUFJLGNBQzdCajNCLEtBQUsyN0csZUFBZTE2RixZQUFZamhCLEtBQUs2N0csV0FDckM3N0csS0FBSzg3RyxhQUFlMThGLFNBQVN3QixjQUFjLE9BQzNDNWdCLEtBQUs4N0csYUFBYUYsVUFBVTNrRixJQUFJLGlCQUNoQ2ozQixLQUFLKzdHLFlBQWMzOEYsU0FBU3dCLGNBQWMsT0FDMUM1Z0IsS0FBSys3RyxZQUFZSCxVQUFVM2tGLElBQUksZ0JBQy9CajNCLEtBQUtnOEcsVUFBWTU4RixTQUFTd0IsY0FBYyxPQUN4QzVnQixLQUFLZzhHLFVBQVVKLFVBQVUza0YsSUFBSSxjQUM3QmozQixLQUFLaThHLFlBQWM3OEYsU0FBU3dCLGNBQWMsT0FDMUM1Z0IsS0FBS2k4RyxZQUFZTCxVQUFVM2tGLElBQUksZ0JBQy9CajNCLEtBQUs4N0csYUFBYTc2RixZQUFZamhCLEtBQUsrN0csYUFDbkMvN0csS0FBSzg3RyxhQUFhNzZGLFlBQVlqaEIsS0FBS2c4RyxXQUNuQ2g4RyxLQUFLODdHLGFBQWE3NkYsWUFBWWpoQixLQUFLaThHLGFBQ25DajhHLEtBQUsyN0csZUFBZTE2RixZQUFZamhCLEtBQUs4N0csY0FJckNKLEVBQVVRLG1CQUFtQjMxRCxpQkFBaUIsWUFBYS9sRCxJQUNyRFIsS0FBS204RyxjQUNQbjhHLEtBQUtvOEcsWUFBWTU3RyxHQUNSUixLQUFLcThHLGdCQUNkcjhHLEtBQUtzOEcsYUFBYTk3RyxLQUd0Qms3RyxFQUFVUSxtQkFBbUIzMUQsaUJBQWlCLFVBQVcsS0FDdkR2bUQsS0FBS204RyxlQUFnQixFQUNyQm44RyxLQUFLcThHLGdCQUFpQixJQUd4QnI4RyxLQUFLdThHLGNBQ0x2OEcsS0FBSzg2RCxPQUNMOTZELEtBQUt3OEcsVUFDTHg4RyxLQUFLeThHLFNBQVcsR0FDaEJ6OEcsS0FBSzA4RyxVQUFZMThHLEtBQUswOEcsVUFBVXo5RyxLQUFLZSxNQUNyQ0EsS0FBSys3RyxZQUFZWSxRQUFVbjhHLElBQ3pCLE1BQU15OEYsRUFBU3o4RixFQUFFTSxPQUFPODdHLFFBQVEsY0FDNUIzZixJQUFXQSxFQUFPMmUsVUFBVW5zRyxTQUFTLFdBQ3ZDelAsS0FBSzA4RyxVQUFVemYsRUFBTzRmLFlBRzFCNzhHLEtBQUs4OEcsaUJBQW1CNXNHLE9BQU82c0csV0FBVyxzQkFDMUMvOEcsS0FBS2c5RyxhQUFlaDlHLEtBQUtnOUcsYUFBYS85RyxLQUFLZSxNQUMzQ0EsS0FBSzg4RyxpQkFBaUJwa0IsWUFBWTE0RixLQUFLZzlHLGNBQ3ZDaDlHLEtBQUtpOUcsV0FBYSxDQUNoQjd5RixNQUFPLElBQ1A4eUYsT0FBUSxLQUVWbDlHLEtBQUtnOUcsYUFBYWg5RyxLQUFLODhHLGtCQUV2Qjk4RyxLQUFLbTlHLFdBQWEsSUFDbEJuOUcsS0FBSzI3RyxlQUFlaDdGLE1BQU15OEYsWUFBWSxVQUFXcDlHLEtBQUttOUcsV0FBYSxNQUNuRW45RyxLQUFLcTlHLFlBQWMsSUFDbkJyOUcsS0FBSzI3RyxlQUFlaDdGLE1BQU15OEYsWUFBWSxXQUFZcDlHLEtBQUtxOUcsWUFBYyxNQUNyRXI5RyxLQUFLbThHLGVBQWdCLEVBQ3JCbjhHLEtBQUtxOEcsZ0JBQWlCLEVBQ3RCcjhHLEtBQUtzOUcsT0FDTHQ5RyxLQUFLdTlHLFdBQ0x2OUcsS0FBS3c5RyxPQUNMeDlHLEtBQUt5OUcsWUFDTHo5RyxLQUFLNjdHLFVBQVU2QixZQUFjbDlHLElBQ3ZCUixLQUFLdzhHLFlBQWN4OEcsS0FBS2k5RyxXQUFXN3lGLE9BQ3JDcHFCLEtBQUttOEcsZUFBZ0IsRUFDckJuOEcsS0FBS3E4RyxnQkFBaUIsRUFDdEJyOEcsS0FBS3M5RyxPQUFTOThHLEVBQUV5OUYsTUFDaEJqK0YsS0FBS3U5RyxXQUFhdjlHLEtBQUttOUcsWUFDZG45RyxLQUFLdzhHLFlBQWN4OEcsS0FBS2k5RyxXQUFXQyxTQUM1Q2w5RyxLQUFLcThHLGdCQUFpQixFQUN0QnI4RyxLQUFLbThHLGVBQWdCLEVBQ3JCbjhHLEtBQUt3OUcsT0FBU2g5RyxFQUFFMDlGLE1BQ2hCbCtGLEtBQUt5OUcsWUFBY3o5RyxLQUFLcTlHLGNBRzVCM0IsRUFBVVEsbUJBQW1CajdGLFlBQVlqaEIsS0FBSzI3RyxnQkFHaEQsWUFBWWdDLEdBQ1YzOUcsS0FBS205RyxXQUFhbjlHLEtBQUt1OUcsWUFBY0ksRUFBVzFmLE1BQVFqK0YsS0FBS3M5RyxRQUM3RHQ5RyxLQUFLMjdHLGVBQWVoN0YsTUFBTXk4RixZQUFZLFVBQVdwOUcsS0FBS205RyxXQUFhLE1BR3JFLGFBQWFRLEdBQ1gzOUcsS0FBS3E5RyxZQUFjcjlHLEtBQUt5OUcsYUFBZUUsRUFBV3pmLE1BQVFsK0YsS0FBS3c5RyxRQUMvRHg5RyxLQUFLMjdHLGVBQWVoN0YsTUFBTXk4RixZQUFZLFdBQVlwOUcsS0FBS3E5RyxZQUFjLE1BR3ZFLE9BQ0VyOUcsS0FBSzI3RyxlQUFlQyxVQUFVM2tGLElBQUksUUFDbENqM0IsS0FBS2c5RyxhQUFhaDlHLEtBQUs4OEcsa0JBQ3ZCOThHLEtBQUs4NkQsUUFBUyxFQUdoQixRQUNFOTZELEtBQUsyN0csZUFBZUMsVUFBVXQ2RixPQUFPLFFBQ3JDdGhCLEtBQUs4NkQsUUFBUyxFQU9oQixPQUFPOGlELEdBQ0RBLElBQVM1OUcsS0FBS2k5RyxXQUFXN3lGLE9BQzNCcHFCLEtBQUt3OEcsVUFBWW9CLEVBQ2pCNTlHLEtBQUsyN0csZUFBZUMsVUFBVXQ2RixPQUFPLFVBQ3JDdGhCLEtBQUsyN0csZUFBZUMsVUFBVTNrRixJQUFJLFNBQ2xDajNCLEtBQUtnOEcsVUFBVXI2RixXQUFXblEsUUFBUXVOLElBQ2hDQSxFQUFRNjhGLFVBQVV0NkYsT0FBTyxjQUN6QnZDLEVBQVE2OEYsVUFBVTNrRixJQUFJLGVBRWYybUYsSUFBUzU5RyxLQUFLaTlHLFdBQVdDLFNBQ2xDbDlHLEtBQUt3OEcsVUFBWW9CLEVBQ2pCNTlHLEtBQUsyN0csZUFBZUMsVUFBVXQ2RixPQUFPLFNBQ3JDdGhCLEtBQUsyN0csZUFBZUMsVUFBVTNrRixJQUFJLFVBQ2xDajNCLEtBQUtnOEcsVUFBVXI2RixXQUFXblEsUUFBUXVOLElBQ2hDQSxFQUFRNjhGLFVBQVV0NkYsT0FBTyxZQUN6QnZDLEVBQVE2OEYsVUFBVTNrRixJQUFJLGlCQVM1QixVQUFVajVCLEdBQ0pnQyxLQUFLdThHLGVBQ1B2OEcsS0FBSzY5RyxZQUFZNzlHLEtBQUt1OEcsZUFFeEJ2OEcsS0FBS3U4RyxjQUFnQnY4RyxLQUFLeThHLFNBQVNoNEQsS0FBS2psRCxHQUFLQSxFQUFFeEIsT0FBU0EsR0FDeERnQyxLQUFLdThHLGNBQWN0ZixPQUFPMmUsVUFBVTNrRixJQUFJLFVBQ3hDajNCLEtBQUt1OEcsY0FBYzc1RyxLQUFLazVHLFVBQVV0NkYsT0FBTyxVQVEzQyxZQUFZdzhGLEdBQ1ZBLEVBQVE3Z0IsT0FBTzJlLFVBQVV0NkYsT0FBTyxVQUNoQ3c4RixFQUFRcDdHLEtBQUtrNUcsVUFBVTNrRixJQUFJLFVBVzdCLFdBQVdqNUIsRUFBTTBFLEVBQU1xN0csR0FBVyxFQUFNNW1GLEdBQVEsR0FDOUMsSUFBSTJtRixFQUFVOTlHLEtBQUt5OEcsU0FBU2g0RCxLQUFLamxELEdBQUtBLEVBQUV4QixPQUFTQSxHQUNqRCxRQUFnQnVMLElBQVp1MEcsRUFBdUIsQ0FFekIsTUFBTTdnQixFQUFTNzlFLFNBQVN3QixjQUFjLFFBQ3RDcThFLEVBQU80ZixVQUFZNytHLEVBQ25CaS9GLEVBQU9zZSxRQUFReUMsSUFBTSxHQUNyQmgrRyxLQUFLKzdHLFlBQVk5NkYsWUFBWWc4RSxHQUM3Qmo5RixLQUFLZzhHLFVBQVUvNkYsWUFBWXZlLEdBQzNCbzdHLEVBQVUsQ0FBRTkvRyxPQUFNaS9GLFNBQVF2NkYsUUFFdEJ5MEIsRUFDRm4zQixLQUFLeThHLFNBQVMxaUIsUUFBUStqQixHQUV0Qjk5RyxLQUFLeThHLFNBQVNoNUcsS0FBS3E2RyxHQUVuQkMsRUFDRi85RyxLQUFLMDhHLFVBQVVvQixFQUFROS9HLE1BRXZCZ0MsS0FBSzY5RyxZQUFZQyxHQVFyQixZQUFZRyxHQUNWLElBQUssSUFBSXhnSCxFQUFJLEVBQUdBLEVBQUl3Z0gsRUFBYzU5RyxPQUFRNUMsSUFDeEN1QyxLQUFLaytHLFdBQVdELEVBQWN4Z0gsR0FBR08sS0FBTWlnSCxFQUFjeGdILEdBQUdpRixLQUFZLElBQU5qRixHQVNsRSxjQUFjTyxHQUNaLE1BQU1tZ0gsRUFBZW4rRyxLQUFLeThHLFNBQVM1QyxVQUFVcjZHLEdBQUtBLEVBQUV4QixPQUFTQSxHQUM3RCxHQUFJbWdILEdBQWdCLEVBQUcsQ0FDckIsTUFBTUwsRUFBVTk5RyxLQUFLeThHLFNBQVM5NUYsT0FBT3c3RixFQUFjLEdBQUcsR0FDdERMLEVBQVE3Z0IsT0FBTzM3RSxTQUNmdGhCLEtBQUt5N0csY0FBY3g2RixZQUFZNjhGLEVBQVFwN0csTUFDbkMxQyxLQUFLeThHLFNBQVNwOEcsT0FBUyxFQUV6QkwsS0FBSzA4RyxVQUFVMThHLEtBQUt5OEcsU0FBUyxHQUFHeitHLE1BRWhDZ0MsS0FBSytOLGFBR1A3RSxRQUFRbUMsS0FBSywwRUFJakIsYUFBYSt5RyxHQUNQQSxFQUFXaHRFLFFBQ2JweEMsS0FBS3ErRyxPQUFPcitHLEtBQUtpOUcsV0FBV0MsUUFFNUJsOUcsS0FBS3ErRyxPQUFPcitHLEtBQUtpOUcsV0FBVzd5RixPQUloQyxPQUVFcHFCLEtBQUsrN0csWUFBWVksUUFBVSxLQUMzQjM4RyxLQUFLNjdHLFVBQVU2QixZQUFjLE1DL04xQixNQUFNLEVBQ1gsWUFBWVksRUFBYUMsR0FDdkJ2K0csS0FBS3MrRyxZQUFjQSxFQUNuQnQrRyxLQUFLdStHLFVBQVlBLEVBQ2pCRCxFQUFZRSxTQUFXaCtHLElBQU9BLEVBQUVnK0Ysa0JBQ2hDeCtGLEtBQUt5K0csZ0JBQWtCci9GLFNBQVNzL0YsZUFBZSxxQkFDL0MxK0csS0FBSzIrRyxjQUFnQnYvRixTQUFTcy9GLGVBQWUsaUJBQzdDMStHLEtBQUs0K0csVUFBWXgvRixTQUFTcy9GLGVBQWUscUJBQ3pDMStHLEtBQUs0K0csVUFBVWpDLFFBQVUsSUFBTTM4RyxLQUFLNitHLGNBQWM3K0csS0FBSzgrRyxXQUN2RDkrRyxLQUFLKytHLFFBQVUzL0YsU0FBU3MvRixlQUFlLG1CQUN2QzErRyxLQUFLKytHLFFBQVFwQyxRQUFVLElBQU0zOEcsS0FBS2cvRyxrQkFBa0JoL0csS0FBSzgrRyxXQUN6RDkrRyxLQUFLaS9HLGdCQUFrQjcvRixTQUFTcy9GLGVBQWUsa0JBQy9DMStHLEtBQUtpL0csZ0JBQWdCdEMsUUFBVSxJQUFNMzhHLEtBQUtrL0csZ0JBQzFDbC9HLEtBQUttL0csaUJBQW1CLy9GLFNBQVNzL0YsZUFBZSxrQkFDaEQxK0csS0FBS28vRyxVQUFZZCxFQUFZaDBDLFNBQWtCLFFBQy9DdHFFLEtBQUtxL0csZ0JBQWtCZixFQUFZLytGLGNBQWMsWUFDakR2ZixLQUFLcy9HLGNBQWdCaEIsRUFBWWgwQyxTQUFrQixRQUNuRHRxRSxLQUFLdS9HLGFBQWVqQixFQUFZLytGLGNBQWMscUJBQzlDdmYsS0FBSzgrRyxVQUdQLHNCQUNFOStHLEtBQUtxL0csZ0JBQWdCekQsVUFBVXQ2RixPQUFPLFVBR3hDLHNCQUNFdGhCLEtBQUtxL0csZ0JBQWdCekQsVUFBVTNrRixJQUFJLFVBUXJDLHNCQUFzQnI0QixHQUNwQixJQUFLLElBQUluQixFQUFJLEVBQUdBLEVBQUl1QyxLQUFLdS9HLGFBQWFDLFNBQVNuL0csT0FBUTVDLElBQ2pEdUMsS0FBS3UvRyxhQUFhQyxTQUFTL2hILEdBQUc4OUcsUUFBUTM4RyxPQUFTQSxFQUNqRG9CLEtBQUt1L0csYUFBYUMsU0FBUy9oSCxHQUFHa2pCLE1BQU04K0YsUUFBVSxPQUU5Q3ovRyxLQUFLdS9HLGFBQWFDLFNBQVMvaEgsR0FBR2tqQixNQUFNOCtGLFFBQVUsT0FLcEQsY0FBY1gsR0FDWixNQUFNM2lHLEVBQVFuYyxLQUFLdStHLFVBQVU3RCxTQUFTYixVQUFVLzdHLEdBQUtBLEVBQUVvaUIsS0FBTzQrRixHQUU5RDkrRyxLQUFLdStHLFVBQVU3RCxTQUFTditGLEdBQU9nL0YsZ0JBQWdCM3BHLFFBQVFqVCxHQUFLQSxFQUFFK2lCLFVBRTlEdGhCLEtBQUt1K0csVUFBVTdELFNBQVMvM0YsT0FBT3hHLEVBQU8sR0FFdENuYyxLQUFLdStHLFVBQVVtQixzQkFJZjEvRyxLQUFLdStHLFVBQVVvQixVQUFVQyxjQUFjLFdBR3pDLGNBQ0U1L0csS0FBS28vRyxVQUFVUyxVQUFXLEVBQzFCNy9HLEtBQUtzL0csY0FBY08sVUFBVyxFQUdoQyxhQUNFNy9HLEtBQUtvL0csVUFBVVMsVUFBVyxFQUMxQjcvRyxLQUFLcy9HLGNBQWNPLFVBQVcsRUFHaEMsWUFBWWYsR0FDVixNQUFNZ0IsRUFBVTkvRyxLQUFLdStHLFVBQVU3RCxTQUFTajJELEtBQUszbUQsR0FBS0EsRUFBRW9pQixLQUFPNCtGLEdBQ3ZEZ0IsR0FDRjkvRyxLQUFLKy9HLFdBQVdELEdBQ2hCOS9HLEtBQUs4K0csVUFBWWdCLEVBQVE1L0YsR0FDekJsZ0IsS0FBS2dnSCxjQUNMaGdILEtBQUtpZ0gsc0JBQXNCLFNBRTNCLzJHLFFBQVFtQyxLQUFLLGlDQUFrQ3l6RyxHQUluRCxrQkFBa0JBLEdBQ2hCLE1BQU1nQixFQUFVOS9HLEtBQUt1K0csVUFBVTdELFNBQVNqMkQsS0FBSzNtRCxHQUFLQSxFQUFFb2lCLEtBQU80K0YsR0FDdkRnQixHQUNGOS9HLEtBQUsrL0csV0FBV0QsR0FDaEI5L0csS0FBSzgrRyxVQUFZQSxFQUNqQjkrRyxLQUFLa2dILGFBQ0xsZ0gsS0FBS2lnSCxzQkFBc0IsUUFDM0JqZ0gsS0FBS3MrRyxZQUFZNkIsU0FBVyxLQUMxQm5nSCxLQUFLbS9HLGlCQUFpQnZELFVBQVV0NkYsT0FBTyxZQUN2Q3RoQixLQUFLbS9HLGlCQUFpQnhDLFFBQVUsSUFBTTM4RyxLQUFLb2dILGNBQWN0QixFQUFXOStHLEtBQUtvL0csVUFBVTFnSCxNQUFPc0IsS0FBS3FnSCx3QkFHakduM0csUUFBUW1DLEtBQUssaUNBQWtDeXpHLEdBSW5ELGNBQWNBLEVBQVduSSxFQUFNdUUsR0FDN0IsTUFBTTRFLEVBQVU5L0csS0FBS3UrRyxVQUFVN0QsU0FBU2oyRCxLQUFLM21ELEdBQUtBLEVBQUVvaUIsS0FBTzQrRixHQUN2RGdCLEdBQ0ZBLEVBQVEvZ0csUUFBVTQzRixFQUNsQm1KLEVBQVE1RSxTQUFXQSxFQUNuQmw3RyxLQUFLdStHLFVBQVVtQixzQkFDZjEvRyxLQUFLcytHLFlBQVk2QixTQUFXLEtBQzVCbmdILEtBQUtnZ0gsY0FDTGhnSCxLQUFLaWdILHNCQUFzQixRQUMzQmpnSCxLQUFLbS9HLGlCQUFpQnZELFVBQVUza0YsSUFBSSxZQUNwQ2ozQixLQUFLaS9HLGdCQUFnQnJELFVBQVUza0YsSUFBSSxZQUNuQ2ozQixLQUFLbS9HLGlCQUFpQnhDLFFBQVUsS0FDaEMzOEcsS0FBS2kvRyxnQkFBZ0J0QyxRQUFVLE1BRS9CenpHLFFBQVFtQyxLQUFLLGlDQUFrQ3l6RyxHQUluRCxnQkFDRSxNQUFNZ0IsRUFBVTkvRyxLQUFLdStHLFVBQVU3RCxTQUFTajJELEtBQUszbUQsR0FBS0EsRUFBRW9pQixLQUFPbGdCLEtBQUs4K0csV0FDNURnQixHQUNGOS9HLEtBQUtvL0csVUFBVTFnSCxNQUFRb2hILEVBQVEvZ0csUUFFL0IvZSxLQUFLcytHLFlBQVk2QixTQUFXLEtBQzVCbmdILEtBQUtnZ0gsY0FDTGhnSCxLQUFLaWdILHNCQUFzQixRQUMzQmpnSCxLQUFLbS9HLGlCQUFpQnZELFVBQVUza0YsSUFBSSxZQUNwQ2ozQixLQUFLbS9HLGlCQUFpQnhDLFFBQVUsTUFFaEN6ekcsUUFBUW1DLEtBQUssaUNBQWtDeXpHLFdBT25ELHFCQUNFLE1BQU13QixFQUFrQixHQUN4QixJQUFLLElBQUk3aUgsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS3MvRyxjQUFjZ0IsZ0JBQWdCamdILE9BQVE1QyxJQUM3RDZpSCxFQUFnQjc4RyxLQUFLekQsS0FBS3MvRyxjQUFjZ0IsZ0JBQWdCN2lILEdBQUdpQixPQUU3RCxPQUFPNGhILEVBR1QsV0FBV1IsR0FFVCxHQURBOS9HLEtBQUtvL0csVUFBVTFnSCxNQUFRb2hILEVBQVEvZ0csUUFDM0IrZ0csRUFBUTVFLFNBQVM3NkcsT0FBUyxFQUFHLENBQy9CLE1BQU02NkcsRUFBVyxHQUlqQjRFLEVBQVE1RSxTQUFTMXBHLFFBQVErdUcsSUFDdkIsTUFBTUMsRUFBYXhnSCxLQUFLdStHLFVBQVV6RSxZQUFZcjFELEtBQUtsbEQsR0FBS0EsRUFBRTIyRyxlQUFpQnFLLEdBQzNFckYsRUFBU3ozRyxLQUFLLGtCQUFrQjg4RyxNQUFpQkMsRUFBYUEsRUFBV0MsWUFBYyw2QkFFekZ6Z0gsS0FBS3MvRyxjQUFjb0IsVUFBWXhGLEVBQVNwekcsS0FBSyxTQUc3QyxFQUFTNG1HLFVBQVUxdUcsS0FBS3MvRyxlQUk1QixRQUNFdC9HLEtBQUtzK0csWUFBWTN4RyxTQ3pKckIsSSxFQUFBLGFBNkJFLFdBQVlnMEcsRUFBa0JDLEdBQTlCLFdBbEJBLEtBQUFDLG9CQUFnQyxHQVVoQyxLQUFBbkcsU0FBc0IsR0FFdEIsS0FBQW9HLGlCQUF3QixHQVF0QjlnSCxLQUFLazhHLG1CQUFxQjk4RixTQUFTd0IsY0FBYyxPQUNqRDVnQixLQUFLazhHLG1CQUFtQk4sVUFBVTNrRixJQUFJLGFBSXRDajNCLEtBQUt1MkcsWUFBY29LLEVBQVkzaUgsS0FDL0JnQyxLQUFLa3NCLFVBQVl5MEYsRUFBWXpnRyxHQUM3QmxnQixLQUFLODVHLFlBQWM2RyxFQUFZN0csWUFDL0I5NUcsS0FBSzA1RyxhQUFla0gsRUFBSXJKLGFBQWFzQyxXQUFVLFNBQUMxckcsR0FBYSxPQUFBQSxFQUFJblEsT0FBUzJpSCxFQUFZM2lILFFBQ2xGNGlILEVBQUkvSixxQkFBdUI4SixFQUFZemdHLEtBQU8wZ0csRUFBSS9KLG9CQUFvQjMyRixHQUd4RWxnQixLQUFLdzRHLGFBQWVvSSxFQUFJL0osb0JBQW9CMkIsY0FHNUN4NEcsS0FBSzIzRyxTQUFXZ0osRUFBWWhKLFNBQzVCMzNHLEtBQUt1NkcsaUJBQW1Cb0csRUFBWXBHLGlCQUVwQ3Y2RyxLQUFLdzRHLGFBQWUsSUFHdEJvSSxFQUFJRyxnQkFBZ0JMLFVBQVksU0FBV0MsRUFBWTNpSCxLQUFPLFVBQzlEZ0MsS0FBS2doSCxhQUFlSixFQUFJSSxhQUN4QmhoSCxLQUFLaWhILFFBQVVMLEVBQUlLLFFBQ25CamhILEtBQUtraEgsbUJBQW1CbGhILEtBQUsyM0csVUFFNUIzM0csS0FBS2doSCxhQUFheEIsU0FBUyxHQUFtQjNDLFVBQVksaUJBQzNENzhHLEtBQUtnaEgsYUFBYXJnRyxNQUFNOCtGLFFBQVUsUUFDbENtQixFQUFJTyxrQkFBa0J4Z0csTUFBTTgrRixRQUFVLE9BQ3RDei9HLEtBQUt1M0csYUFBZXFKLEVBQUlySixhQUN4QnYzRyxLQUFLb2hILHFCQUF1QmhpRyxTQUFTcy9GLGVBQWUsd0JBQ3BEMStHLEtBQUtxaEgsc0JBQXdCamlHLFNBQVNzL0YsZUFBZSx5QkFDakRpQyxFQUFZL0YsaUJBQ2Q1NkcsS0FBSzQ2RyxlQUFpQitGLEVBQVkvRixnQkFFaEMrRixFQUFZakcsV0FDZGlHLEVBQVlqRyxTQUFTbHBHLFNBQVEsU0FBQzh2RyxHQUM1QixJQUFNQyxFQUFhLElBQUksRUFBUUQsRUFBWXJHLFlBQWFxRyxFQUFZdmlHLFFBQVN1aUcsRUFBWXBHLFVBQ3pGLEVBQUtSLFNBQVNqM0csS0FBSzg5RyxHQUNuQixJQUFLLElBQUk5akgsRUFBSSxFQUFHQSxFQUFJNmpILEVBQVlyRyxZQUFZNTZHLE9BQVE1QyxJQUM3QyxFQUFLcWpILGlCQUFpQnhoSCxlQUFlZ2lILEVBQVlyRyxZQUFZeDlHLE1BQ2hFLEVBQUtxakgsaUJBQWlCUSxFQUFZckcsWUFBWXg5RyxJQUFNLElBQ3RELEVBQUtxakgsaUJBQWlCUSxFQUFZckcsWUFBWXg5RyxJQUFJZ0csS0FBSzg5RyxFQUFXcmhHLE9BR3RFbGdCLEtBQUsyM0csU0FBU25tRyxTQUFRLFNBQUF1bUcsR0FBVyxPQUFBQSxFQUFReUosaUJBQWtCLE1BRTdEeGhILEtBQUsyL0csVUFBWSxJQUFJbkUsRUFBVW9GLEVBQUluRixjQUFlejdHLE1BQ2xEQSxLQUFLeWhILFlBQWMsSUFBSSxFQUFZcmlHLFNBQVNzL0YsZUFBZSxlQUFnQjErRyxNQUUzRUEsS0FBSzBoSCxrQkFBb0J0aUcsU0FBU3dCLGNBQWMsT0FDaEQ1Z0IsS0FBSzBoSCxrQkFBa0I5RixVQUFVM2tGLElBQUkscUJBQ3JDajNCLEtBQUtrOEcsbUJBQW1CajdGLFlBQVlqaEIsS0FBSzBoSCxtQkFFekNkLEVBQUllLG9CQUFvQjFnRyxZQUFZamhCLEtBQUtrOEcsb0JBbUs3QyxPQXhKRSxZQUFBMEYsWUFBQSxTQUFZcGhILEVBQVVxaEgsRUFBK0I3akgsUUFDeEJ1TCxJQUF2QnZKLEtBQUs4aEgsbUJBS2V2NEcsSUFBcEJ2SixLQUFLK2hILFdBQ1AvaEgsS0FBSytoSCxXQUFhLElBQUlGLEVBQUs3akgsRUFBTXdDLEVBQUV3aEgsY0FBOEJoaUgsTUFDeERBLEtBQUsraEgsV0FBVy9qSCxPQUFTQSxHQUNsQ2dDLEtBQUsraEgsV0FBV0UsT0FDaEJqaUgsS0FBSytoSCxXQUFhLElBQUlGLEVBQUs3akgsRUFBTXdDLEVBQUV3aEgsY0FBOEJoaUgsT0FDeERBLEtBQUsraEgsV0FBVy9qSCxPQUFTQSxJQUNsQ2dDLEtBQUsraEgsV0FBV0UsT0FDaEJqaUgsS0FBSytoSCxnQkFBYXg0RyxHQVZsQkwsUUFBUTRPLElBQUksOEJBZWhCLFlBQUE0bkcsb0JBQUEsV0FDRTEvRyxLQUFLa2lILHdCQUF5QixFQUM5QmxpSCxLQUFLaWhILFFBQVFyRixVQUFVdDZGLE9BQU8sWUFDOUJ0aEIsS0FBS2loSCxRQUFRckYsVUFBVTNrRixJQUFJLFlBVTdCLFlBQUFrckYsV0FBQSxTQUFXcEssR0FFVCxHQUFJLzNHLEtBQUs4aEgsZUFBaUI5aEgsS0FBSzhoSCxjQUFjOWpILE9BQVMrNUcsRUFBUS81RyxLQUV4RGdDLEtBQUsraEgsWUFBYy9oSCxLQUFLK2hILFdBQVdLLGlCQUFpQi9oSCxPQUFTLEdBQy9ETCxLQUFLK2hILFdBQVdNLGlDQUFpQ3JpSCxLQUFLOGhILGVBRXhEOWhILEtBQUs4aEgsY0FBYy9pRyxRQUFRNEIsTUFBTTgrRixRQUFVLFlBQ3RDLEdBQUl6L0csS0FBSzhoSCxlQUFpQjloSCxLQUFLOGhILGNBQWM5akgsT0FBUys1RyxFQUFRLzVHLEtBQ25FLE9BbUJGLEdBYkErNUcsRUFBUWg1RixRQUFRNEIsTUFBTTJoRyxXQUFhLFNBSTlCdGlILEtBQUs2Z0gsb0JBQW9CMEIsU0FBU3hLLEVBQVE3M0YsSUFJN0M2M0YsRUFBUWg1RixRQUFRNEIsTUFBTTgrRixRQUFVLFNBSGhDei9HLEtBQUs2Z0gsb0JBQW9CcDlHLEtBQUtzMEcsRUFBUTczRixJQUN0Q2xnQixLQUFLMGhILGtCQUFrQi9MLE9BQU9vQyxFQUFRaDVGLFVBT3BDZzVGLEVBQVF5SixnQkFBaUIsQ0FJM0IsUUFBOEJqNEcsSUFBMUJ3dUcsRUFBUTNELGNBRVYsSUFEQSxJQUFJb08sR0FBZSxFQUNWbitHLEVBQUksRUFBR0EsRUFBSXJFLEtBQUswNkcsU0FBU3I2RyxPQUFRZ0UsSUFBSyxDQUU3QyxJQURBLElBQU1vK0csRUFBK0MsR0FDNUNobEgsRUFBSSxFQUFHQSxFQUFJdUMsS0FBSzA2RyxTQUFTcjJHLEdBQUc0MkcsWUFBWTU2RyxPQUFRNUMsSUFBSyxDQUU1QyxRQURWc3JCLEVBQVVndkYsRUFBUWg1RixRQUFRUSxjQUFjLGFBQWV2ZixLQUFLMDZHLFNBQVNyMkcsR0FBRzQyRyxZQUFZeDlHLEdBQUssUUFFN0ZnbEgsRUFBOEJoL0csS0FBS3NsQixHQUduQzA1RixFQUE4QnBpSCxPQUFTLElBRXBDbWlILElBQ0h6SyxFQUFRNUQsc0JBRVJxTyxHQUFlLEdBRWpCeGlILEtBQUswNkcsU0FBU3IyRyxHQUFHKzJHLHFCQUFxQnJELEVBQVEzRCxjQUFlcU8sU0FNakUsSUFBU3ArRyxFQUFJLEVBQUdBLEVBQUlyRSxLQUFLMDZHLFNBQVNyNkcsT0FBUWdFLElBRXhDLEdBQXVGLE9BQW5GMHpHLEVBQVEzRCxjQUFjNzBGLGNBQWMsYUFBZXZmLEtBQUswNkcsU0FBU3IyRyxHQUFHNmIsR0FBSyxNQUE3RSxDQUlBLElBRE11aUcsRUFBK0MsR0FDNUNobEgsRUFBSSxFQUFHQSxFQUFJdUMsS0FBSzA2RyxTQUFTcjJHLEdBQUc0MkcsWUFBWTU2RyxPQUFRNUMsSUFBSyxDQUM1RCxJQUFNc3JCLEVBQ1UsUUFEVkEsRUFBVWd2RixFQUFRaDVGLFFBQVFRLGNBQWMsYUFBZXZmLEtBQUswNkcsU0FBU3IyRyxHQUFHNDJHLFlBQVl4OUcsR0FBSyxRQUU3RmdsSCxFQUE4QmgvRyxLQUFLc2xCLEdBRW5DMDVGLEVBQThCcGlILE9BQVMsR0FDekNMLEtBQUswNkcsU0FBU3IyRyxHQUFHKzJHLHFCQUFxQnJELEVBQVEzRCxjQUFlcU8sR0FNbkUxSyxFQUFReUosaUJBQWtCLEVBVXhCeGhILEtBQUsraEgsWUFBYy9oSCxLQUFLK2hILFdBQVdLLGlCQUFpQi9oSCxPQUFTLEdBQy9ETCxLQUFLK2hILFdBQVdXLDhCQUE4QjNLLEdBR2hEQSxFQUFRaDVGLFFBQVE0QixNQUFNMmhHLFdBQWEsUUFHbkN0aUgsS0FBSzhoSCxjQUFnQi9KLEdBT3ZCLFlBQUFtSixtQkFBQSxTQUFtQnZKLEdBQ2pCLElBQUlnTCxFQUEwQixHQUM5QmhMLEVBQVNubUcsU0FBUSxTQUFBdW1HLEdBRWY0SyxFQUFjbC9HLEtBQUssUUFBT3MwRyxFQUFRNzNGLEdBQUssWUFBZTYzRixFQUFRNzNGLEdBQUssSUFBTyxJQUFFLElBQUk2M0YsRUFBUS81RyxLQUFJLFlBRTlGZ0MsS0FBS2doSCxhQUFhemhHLGNBQWMscUJBQXFCbWhHLFVBQVlpQyxFQUFjNzZHLEtBQUssS0FPdEYsWUFBQWlHLE1BQUEsV0FFRSxFQUFTMmdHLFVBQVUxdUcsS0FBS2doSCxhQUFhemhHLGNBQWMsMkJBRXBCaFcsSUFBM0J2SixLQUFLNGlILG1CQUNQNWlILEtBQUs0aUgsa0JBQWtCdGhHLFNBSXpCdGhCLEtBQUswaEgsa0JBQWtCaEIsVUFBWSxJQUV2QyxFQXhQQSxHQ05BLGFBS0UsV0FBWTFpSCxFQUFjNmtILEVBQXNCdEUsR0FDOUN2K0csS0FBS2hDLEtBQU9BLEVBQ1pnQyxLQUFLNmlILFFBQVVBLEVBQ2Y3aUgsS0FBS3UrRyxVQUFZQSxFQUNqQnYrRyxLQUFLNmlILFFBQVFqSCxVQUFVM2tGLElBQUksb0JBTS9CLE9BSEUsWUFBQWdyRixLQUFBLFdBQ0VqaUgsS0FBSzZpSCxRQUFRakgsVUFBVXQ2RixPQUFPLHFCQUVsQyxFQWZBLEcsb1RDRUEsY0FRRSxXQUFZdGpCLEVBQWM2a0gsRUFBc0J0RSxHQUFoRCxNQUNFLFlBQU12Z0gsRUFBTTZrSCxFQUFTdEUsSUFBVSxLLE9BUmpDLEVBQUE2RCxpQkFBd0IsR0FLeEIsRUFBQVUsbUJBQW9CLEVBS2xCLEVBQUtDLGdCQUFrQixFQUFLQSxnQkFBZ0I5akgsS0FBSyxHQUNqRHMvRyxFQUFVbUQsa0JBQWtCbjdELGlCQUFpQixRQUFTLEVBQUt3OEQsaUIsRUF5SS9ELE9BckpzQyxPQXdCcEMsWUFBQUEsZ0JBQUEsU0FBZ0J2aUgsSUFDZFIsS0FBS2dqSCxVQUFheGlILEVBQUVNLE9BQXNCODdHLFFBQVEsZ0JBQzNCLE9BQW5CNThHLEtBQUtnakgsV0FDSGhqSCxLQUFLOGlILG1CQUVRLElBREQ5aUgsS0FBS29pSCxpQkFBaUIzaEgsUUFBUVQsS0FBS2dqSCxVQUFVekgsUUFBUXI3RixJQUVqRWxnQixLQUFLaWpILE9BQU9qakgsS0FBS2dqSCxXQUVqQmhqSCxLQUFLa2pILFNBQVNsakgsS0FBS2dqSCxVQUFVekgsUUFBUXI3RixJQUdGLElBQWpDbGdCLEtBQUtvaUgsaUJBQWlCL2hILE9BQ3hCTCxLQUFLaWpILE9BQU9qakgsS0FBS2dqSCxXQUNSaGpILEtBQUtnakgsVUFBVXpILFFBQVFyN0YsS0FBT2xnQixLQUFLb2lILGlCQUFpQixJQUM3RHBpSCxLQUFLa2pILFNBQVNsakgsS0FBS29pSCxpQkFBaUIsSUFDcENwaUgsS0FBS2lqSCxPQUFPampILEtBQUtnakgsWUFDUmhqSCxLQUFLZ2pILFVBQVV6SCxRQUFRcjdGLEtBQU9sZ0IsS0FBS29pSCxpQkFBaUIsSUFDN0RwaUgsS0FBS2tqSCxTQUFTbGpILEtBQUtvaUgsaUJBQWlCLElBSXhDcGlILEtBQUttakgsb0JBRVBqNkcsUUFBUTRPLElBQUksYUFBYzlYLEtBQUtvaUgsbUJBUWpDLFlBQUFhLE9BQUEsU0FBT2w2RixHQUNML29CLEtBQUtvaUgsaUJBQWlCMytHLEtBQUtzbEIsRUFBUXd5RixRQUFRcjdGLElBQzNDbGdCLEtBQUtvakgsdUJBQXVCcjZGLElBUTlCLFlBQUFtNkYsU0FBQSxTQUFTRyxHQUVQLElBQU1sbkcsRUFBUW5jLEtBQUtvaUgsaUJBQWlCM2hILFFBQVE0aUgsR0FDNUMsR0FBSWxuRyxHQUFTLEVBQUcsQ0FDZG5jLEtBQUtvaUgsaUJBQWlCei9GLE9BQU94RyxFQUFPLEdBQ3BDLElBQU1tbkcsRUFBS3RqSCxLQUFLdStHLFVBQVV1RCxjQUFjL2lHLFFBQVFRLGNBQWMsYUFBZThqRyxFQUFZLE1BQ3JGQyxHQUFJdGpILEtBQUt1akgseUJBQXlCRCxLQVExQyxZQUFBakIsaUNBQUEsU0FBaUN0SyxHQUMvQixJQUFLLElBQUl0NkcsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS29pSCxpQkFBaUIvaEgsT0FBUTVDLElBQUssQ0FDckQsSUFBTXNyQixFQUFVZ3ZGLEVBQVFoNUYsUUFBUVEsY0FBYyxhQUFldmYsS0FBS29pSCxpQkFBaUIza0gsR0FBSyxNQUNwRnNyQixHQUFTL29CLEtBQUt1akgseUJBQXlCeDZGLEtBUS9DLFlBQUEyNUYsOEJBQUEsU0FBOEIzSyxHQUM1QixJQUFLLElBQUl0NkcsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS29pSCxpQkFBaUIvaEgsT0FBUTVDLElBQUssQ0FDckQsSUFBTXNyQixFQUFVZ3ZGLEVBQVFoNUYsUUFBUVEsY0FBYyxhQUFldmYsS0FBS29pSCxpQkFBaUIza0gsR0FBSyxNQUNwRnNyQixHQUFTL29CLEtBQUtvakgsdUJBQXVCcjZGLEtBUzdDLFlBQUF3NkYseUJBQUEsU0FBeUJ4NkYsR0FDdkIsSUFBSyxJQUFJdHJCLEVBQUksRUFBR0EsRUFBSXNyQixFQUFReTJGLFNBQVNuL0csT0FBUTVDLElBQzNDc3JCLEVBQVF5MkYsU0FBUy9oSCxHQUFHbStHLFVBQVV0NkYsT0FBTyxhQVF6QyxZQUFBOGhHLHVCQUFBLFNBQXVCcjZGLEdBQ3JCLElBQUssSUFBSXRyQixFQUFJLEVBQUdBLEVBQUlzckIsRUFBUXkyRixTQUFTbi9HLE9BQVE1QyxJQUMzQ3NyQixFQUFReTJGLFNBQVMvaEgsR0FBR20rRyxVQUFVM2tGLElBQUksYUFPdEMsWUFBQWtzRixrQkFBQSxXQUNFLEdBQUluakgsS0FBS29pSCxpQkFBaUIvaEgsT0FBUyxFQUFHLENBQ3BDLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUtvaUgsaUJBQWlCL2hILE9BQVE1QyxJQUFLLENBQ3JELElBQU1zckIsRUFBVS9vQixLQUFLdStHLFVBQVV1RCxjQUFjL2lHLFFBQVFRLGNBQWMsYUFBZXZmLEtBQUtvaUgsaUJBQWlCM2tILEdBQUssTUFDekdzckIsR0FBUy9vQixLQUFLdWpILHlCQUF5Qng2RixHQUU3Qy9vQixLQUFLb2lILGlCQUFpQi9oSCxPQUFTLElBUW5DLFlBQUFtakgsK0JBQUEsU0FBK0J6TCxHQUU3QixJQURBLElBQU0wTCxFQUFtQixHQUNoQmhtSCxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLb2lILGlCQUFpQi9oSCxPQUFRNUMsSUFBSyxDQUNyRCxJQUFNc3JCLEVBQVVndkYsRUFBUWg1RixRQUFRUSxjQUFjLGFBQWV2ZixLQUFLb2lILGlCQUFpQjNrSCxHQUFLLE1BQ3BGc3JCLEdBQVMwNkYsRUFBaUJoZ0gsS0FBS3NsQixHQUVyQyxPQUFPMDZGLEdBR1QsWUFBQXhCLEtBQUEsV0FDRSxZQUFNQSxLQUFJLFdBQ1ZqaUgsS0FBS3UrRyxVQUFVbUQsa0JBQWtCajdELG9CQUFvQixRQUFTem1ELEtBQUsraUgsaUJBQ25FL2lILEtBQUttakgscUJBRVQsRUFySkEsQ0FBc0N0QixHQ0EvQixNQUFNLFVBQW1CNkIsRUFDOUIsWUFBWTFsSCxFQUFNNmtILEVBQVN0RSxHQVF6QixHQVBBb0YsTUFBTTNsSCxFQUFNNmtILEVBQVN0RSxHQUNyQnIxRyxRQUFRNE8sSUFBSSxpQ0FDWjlYLEtBQUs4aUgsbUJBQW9CLEVBQ3pCOWlILEtBQUs0akgsWUFDTDVqSCxLQUFLNmpILG1CQUFvQixFQUN6QjdqSCxLQUFLOGpILGNBQWdCOWpILEtBQUs4akgsY0FBYzdrSCxLQUFLZSxNQUM3Q3UrRyxFQUFVa0QsWUFBWWhELGdCQUFnQjlCLFFBQVUzOEcsS0FBSzhqSCxjQUNqRHZGLEVBQVV6RSxZQUFZejVHLE9BQVMsRUFBRyxDQUNwQyxNQUFNMGpILEVBQWdCLEdBQ2hCQyxFQUFtQjl6RyxPQUFPK3pHLGlCQUFpQi9OLGFBQ2pEcUksRUFBVXpFLFlBQVl0b0csUUFBUTB5RyxJQUN4QkEsRUFBT2hPLGVBQWlCOE4sR0FDMUJELEVBQWN0Z0gsS0FBSyxrQkFBa0J5Z0gsRUFBT2hPLGlCQUFpQmdPLEVBQU96RCwwQkFHeEVsQyxFQUFVa0QsWUFBWW5DLGNBQWNvQixVQUFZcUQsRUFBY2o4RyxLQUFLLElBQ25FeTJHLEVBQVVrRCxZQUFZMEMsMkJBRXRCNUYsRUFBVWtELFlBQVkyQyxzQkFFeEJwa0gsS0FBS3FrSCxXQUFhcmtILEtBQUtxa0gsV0FBV3BsSCxLQUFLZSxNQUN2Q3UrRyxFQUFVa0QsWUFBWTlDLGNBQWNoQyxRQUFVMzhHLEtBQUtxa0gsV0FFbkQ5RixFQUFVa0QsWUFBWXZCLGFBQ3RCM0IsRUFBVWtELFlBQVk5MEcsUUFFdEIzTSxLQUFLc2tILGNBQWUsRUFRdEIsZ0JBQWdCOWpILEdBQ2RtakgsTUFBTVosZ0JBQWdCdmlILEdBQ2xCUixLQUFLb2lILGlCQUFpQi9oSCxPQUFTLEdBQ2pDTCxLQUFLNmpILG1CQUFvQixFQUd6QjdqSCxLQUFLdStHLFVBQVVrRCxZQUFZeEIsc0JBQXNCLFVBQ2pEamdILEtBQUt1K0csVUFBVW9CLFVBQVV6QixXQUFXLFVBQVdsK0csS0FBS3UrRyxVQUFVa0QsWUFBWW5ELGFBQzFFdCtHLEtBQUt1K0csVUFBVW9CLFVBQVV6akYsT0FDekJsOEIsS0FBS3NrSCxjQUFlLEdBRXBCdGtILEtBQUs2akgsbUJBQW9CLEVBSzdCLGFBQ0UsR0FBcUMsSUFBakM3akgsS0FBS29pSCxpQkFBaUIvaEgsT0FBYyxPQU14QyxJQUFJa2tILEVBQ0osUUFMbURoN0csSUFBL0N2SixLQUFLdStHLFVBQVV1RCxjQUFjMU4sZUFDL0JwMEcsS0FBS3UrRyxVQUFVdUQsY0FBYzNOLHNCQUkzQm4wRyxLQUFLdStHLFVBQVV6RSxZQUFZejVHLE9BQVMsSUFDdENra0gsRUFBaUJ2a0gsS0FBS3UrRyxVQUFVa0QsWUFBWXBCLHNCQUN6QmhnSCxPQUFTLEVBQUcsQ0FDN0IsTUFBTW1rSCxFQUFrQnQwRyxPQUFPK3pHLGlCQUFpQnhELFlBQzFDZ0UsRUFBbUJ2MEcsT0FBTyt6RyxpQkFBaUJ2TixVQUNqRDEyRyxLQUFLdStHLFVBQVVtRywyQkFBMkJqaEgsS0FBSyxDQUM3Qyt5RyxPQUFRK04sRUFDUkksU0FBVUgsRUFDVkksVUFBV0gsRUFDWEksWUFBYTdrSCxLQUFLdStHLFVBQVVrRCxZQUFZckMsVUFBVTFnSCxNQUNsRDYzRyxZQUFhdjJHLEtBQUt1K0csVUFBVWhJLFlBQzVCcnFGLFVBQVdsc0IsS0FBS3UrRyxVQUFVcnlGLFlBSWhDLE1BQU00ekYsRUFBVSxJQUFJLEVBQVE5L0csS0FBS29pSCxpQkFBa0JwaUgsS0FBS3UrRyxVQUFVa0QsWUFBWXJDLFVBQVUxZ0gsTUFBTzZsSCxHQUV6Rk8sRUFBaUI5a0gsS0FBS3dqSCwrQkFBK0J4akgsS0FBS3UrRyxVQUFVdUQsZUFDMUVoQyxFQUFRMUUscUJBQXFCcDdHLEtBQUt1K0csVUFBVXVELGNBQWMxTixjQUFlMFEsR0FFekUsSUFBSyxJQUFJcm5ILEVBQUksRUFBR0EsRUFBSXVDLEtBQUtvaUgsaUJBQWlCL2hILE9BQVE1QyxJQUMzQ3VDLEtBQUt1K0csVUFBVXVDLGlCQUFpQnhoSCxlQUFlVSxLQUFLb2lILGlCQUFpQjNrSCxNQUN4RXVDLEtBQUt1K0csVUFBVXVDLGlCQUFpQjlnSCxLQUFLb2lILGlCQUFpQjNrSCxJQUFNLElBQzlEdUMsS0FBS3UrRyxVQUFVdUMsaUJBQWlCOWdILEtBQUtvaUgsaUJBQWlCM2tILElBQUlnRyxLQUFLcThHLEVBQVE1L0YsSUFFekVoWCxRQUFRNE8sSUFBSSxvQkFBcUI5WCxLQUFLdStHLFVBQVV1QyxrQkFDaEQ5Z0gsS0FBS3UrRyxVQUFVN0QsU0FBU2ozRyxLQUFLcThHLEdBQzdCNTJHLFFBQVE0TyxJQUFJOVgsS0FBS3UrRyxVQUFVN0QsVUFDM0IxNkcsS0FBS3UrRyxVQUFVa0QsWUFBWTkwRyxRQUMzQjNNLEtBQUt1K0csVUFBVW9CLFVBQVU1eEcsUUFDekIvTixLQUFLNmpILG1CQUFvQixFQUV6QjdqSCxLQUFLdStHLFVBQVVtQixzQkFDZjEvRyxLQUFLdStHLFVBQVU1RyxTQUFTbm1HLFFBQVF1bUcsSUFDMUJBLEVBQVE3M0YsS0FBT2xnQixLQUFLdStHLFVBQVV1RCxjQUFjNWhHLEtBQzlDNjNGLEVBQVF5SixpQkFBa0IsS0FHOUJtQyxNQUFNUixvQkFJUixnQkFDRW5qSCxLQUFLdStHLFVBQVVvQixVQUFVNXhHLFFBQ3pCL04sS0FBS3UrRyxVQUFVa0QsWUFBWTkwRyxRQUMzQjNNLEtBQUs2akgsbUJBQW9CLEVBQ3pCRixNQUFNUixvQkFJUixPQUNFUSxNQUFNMUIsT0FDTi80RyxRQUFRNE8sSUFBSSxrQ0FDUjlYLEtBQUs2akgsb0JBQ1A3akgsS0FBS3UrRyxVQUFVa0QsWUFBWTkwRyxRQUMzQjNNLEtBQUt1K0csVUFBVW9CLFVBQVU1eEcsU0FFdkIvTixLQUFLc2tILGNBQ1B0a0gsS0FBS3UrRyxVQUFVb0IsVUFBVUMsY0FBYyxXQUd6QzUvRyxLQUFLdStHLFVBQVVrRCxZQUFZOUMsY0FBY2hDLFFBQVUsS0FDbkQzOEcsS0FBS3UrRyxVQUFVa0QsWUFBWWhELGdCQUFnQjlCLFFBQVUsTUMxSGxELE1BQU0sVUFBb0IrRyxFQUMvQixZQUFZMWxILEVBQU02a0gsRUFBU3RFLEdBQ3pCb0YsTUFBTTNsSCxFQUFNNmtILEVBQVN0RSxHQUNyQnIxRyxRQUFRNE8sSUFBSSwrQkFDWjlYLEtBQUt3NEcsYUFBZStGLEVBQVUvRixhQUM5Qng0RyxLQUFLdTNHLGFBQWVnSCxFQUFVaEgsYUFDOUJ2M0csS0FBSzA1RyxhQUFlNkUsRUFBVTdFLGFBQzlCMTVHLEtBQUsra0gsbUJBR0wva0gsS0FBS3NrSCxjQUFlLEVBT3RCLGdCQUFnQjlqSCxHQUNkbWpILE1BQU1aLGdCQUFnQnZpSCxHQUVDLE9BQW5CUixLQUFLZ2pILFdBQXNCaGpILEtBQUtvaUgsaUJBQWlCL2hILE9BQVMsR0FDNURMLEtBQUtnbEgsZ0JBQWdCaGxILEtBQUtnakgsVUFBVXpILFFBQVEwSixTQUFVamxILEtBQUtnakgsVUFBVXpILFFBQVFyN0YsSUFDekVsZ0IsS0FBS2dqSCxVQUFVekgsUUFBUXVFLFNBQ3pCOS9HLEtBQUt1K0csVUFBVWtELFlBQVl5RCxZQUFZbGxILEtBQUtnakgsVUFBVXpILFFBQVF1RSxTQUM5RDkvRyxLQUFLdStHLFVBQVVvQixVQUFVekIsV0FBVyxVQUFXbCtHLEtBQUt1K0csVUFBVWtELFlBQVluRCxjQUNqRXQrRyxLQUFLdStHLFVBQVVvQixVQUFVbEQsU0FBU2g0RCxLQUFLamxELEdBQWdCLFlBQVhBLEVBQUV4QixPQUV2RGdDLEtBQUt1K0csVUFBVW9CLFVBQVVDLGNBQWMsWUFFaEM1L0csS0FBSytrSCxxQkFDZC9rSCxLQUFLK2tILHdCQUFxQng3RyxFQUMxQnZKLEtBQUt1K0csVUFBVW9CLFVBQVU1eEcsUUFFekI3RSxRQUFRNE8sSUFBSSx3QkFZaEIsc0JBQXNCbXRHLEVBQVUva0csR0FDOUIsSUFBSWlqQyxHQUFVLEVBQ2QsR0FBSW5qRCxLQUFLdzRHLGFBQWF5TSxHQUNwQmpsSCxLQUFLK2tILG1CQUFxQi9rSCxLQUFLdzRHLGFBQWF5TSxHQUFVdnhHLFVBQVV3TSxHQUNoRWhYLFFBQVE0TyxJQUFJOVgsS0FBSytrSCx3QkFDWixDQUNMLE1BQU1JLEVBQWVubEgsS0FBS3UzRyxhQUFhdjNHLEtBQUswNUcsY0FBY2xCLGFBQWEvekQsS0FBS3QyQyxHQUFPQSxFQUFJblEsS0FBS3NOLFFBQVEsUUFBUyxNQUFRMjVHLFFBQ2hHMTdHLElBQWpCNDdHLFFBRUksRUFBSS9LLGVBQWUrSyxFQUFhamxHLElBQUkxZCxLQUFLMk8sSUFDN0NuUixLQUFLdzRHLGFBQWF5TSxHQUFZdjVHLEtBQUtDLE1BQU13RixFQUFJek8sTUFFN0MxQyxLQUFLK2tILG1CQUFxQi9rSCxLQUFLdzRHLGFBQWF5TSxHQUFVdnhHLFVBQVV3TSxHQUNoRWhYLFFBQVE0TyxJQUFJOVgsS0FBSytrSCxxQkFDaEJqMkcsSUFFRHEwQyxHQUFVLEVBRVZqNkMsUUFBUTRPLElBQUloSixLQUdkNUYsUUFBUTRPLElBQUksc0NBR2hCLEdBQUlxckMsRUFBUyxDQUVYbmpELEtBQUt1K0csVUFBVTZDLHFCQUFxQlYsVUFBWTFnSCxLQUFLb2xILGdCQUFnQnBsSCxLQUFLK2tILG1CQUFtQmxwRyxZQUM3RixNQUFNNGdHLEVBQVcsQ0FBQyxDQUNoQnorRyxLQUFNLGFBQ04wRSxLQUFNMUMsS0FBS3UrRyxVQUFVNkMsdUJBRW5CcGhILEtBQUsra0gsbUJBQW1CTSxXQUFXaGxILE9BQVMsSUFDOUNMLEtBQUt1K0csVUFBVThDLHNCQUFzQlgsVUFBWTFnSCxLQUFLb2xILGdCQUFnQnBsSCxLQUFLK2tILG1CQUFtQk0sWUFDOUY1SSxFQUFTaDVHLEtBQUssQ0FDWnpGLEtBQU0sYUFDTjBFLEtBQU0xQyxLQUFLdStHLFVBQVU4Qyx5QkFHekJyaEgsS0FBS3UrRyxVQUFVb0IsVUFBVTJGLFlBQVk3SSxHQUNyQ3o4RyxLQUFLdStHLFVBQVVvQixVQUFVempGLE9BQ3pCbDhCLEtBQUtza0gsY0FBZSxHQVV4QixnQkFBZ0JpQixHQUNkLE1BQU1DLEVBQW1CLEdBQ25CQyxFQUFtQixHQUN6QixJQUFLLElBQUlob0gsRUFBSSxFQUFHQSxFQUFJOG5ILEVBQWFsbEgsT0FBUTVDLElBQUssQ0FDNUMsTUFBTXduSCxFQUFXTSxFQUFhOW5ILEdBQUd3bkgsU0FDM0JTLEVBQWdCRixFQUFpQi9rSCxRQUFRd2tILEdBQ3pDVSxFQUFXLFdBQVdKLEVBQWE5bkgsR0FBR08sZ0JBQWdCdW5ILEVBQWE5bkgsR0FBR2lCLG1CQUNyRCxJQUFuQmduSCxFQUNGRCxFQUFpQkMsR0FBZWppSCxLQUFLa2lILElBR3JDRixFQUFpQmhpSCxLQUFLLENBQUMsd0RBQXdEd2hILHNCQUE4QlUsSUFDN0dILEVBQWlCL2hILEtBQUt3aEgsSUFHMUIsTUFBTVcsRUFBWSxHQUNsQixJQUFLLElBQUlub0gsRUFBSSxFQUFHQSxFQUFJZ29ILEVBQWlCcGxILE9BQVE1QyxJQUMzQ21vSCxFQUFVbmlILEtBQUtnaUgsRUFBaUJob0gsR0FBR3FLLEtBQUssSUFBTSxvQkFFaEQsT0FBTzg5RyxFQUFVOTlHLEtBQUssSUFJeEIsT0FDRTY3RyxNQUFNMUIsT0FHRmppSCxLQUFLdStHLFVBQVVvQixVQUFVN2tELFFBQzNCOTZELEtBQUt1K0csVUFBVW9CLFVBQVU1eEcsUUFFdkIvTixLQUFLc2tILGVBQ1B0a0gsS0FBS3UrRyxVQUFVb0IsVUFBVUMsY0FBYyxjQUN2QzUvRyxLQUFLdStHLFVBQVVvQixVQUFVQyxjQUFjLGVBR3pDMTJHLFFBQVE0TyxJQUFJLGlDLGkxQ0NqSWhCLGFBeUJFLFdBQVkrdEcsRUFBb0NqRixHQUFoRCxXQUpBLEtBQUFrRixnQkFBNEIsR0FFNUIsS0FBQUMsYUFBeUIsR0FHdkIvbEgsS0FBS2dtSCxjQUFnQkgsRUFDckI3bEgsS0FBS2ltSCxVQUFZSixFQUFzQnRtRyxjQUFjLGVBQ3JEdmYsS0FBS2ttSCxrQkFBb0JMLEVBQXNCdG1HLGNBQWMsNEJBQzdEdmYsS0FBS21tSCxtQkFBcUJOLEVBQXNCdG1HLGNBQWMsb0JBQzlEdmYsS0FBS29tSCxlQUFpQlAsRUFBc0J0bUcsY0FBYyxxQkFDMUR2ZixLQUFLcW1ILGlCQUFtQlIsRUFBc0J0bUcsY0FBYyx1QkFDNUR2ZixLQUFLc21ILGlCQUFtQlQsRUFBc0J0bUcsY0FBYyxxQkFDNUR2ZixLQUFLdW1ILG9CQUFzQlYsRUFBc0J0bUcsY0FBYyxrQkFDL0R2ZixLQUFLd21ILGtCQUFvQlgsRUFBc0J0bUcsY0FBYyx3QkFDN0R2ZixLQUFLeW1ILG9CQUFzQlosRUFBc0J0bUcsY0FBYyxrQkFDL0R2ZixLQUFLMG1ILHVCQUF5QmIsRUFBc0J0bUcsY0FBYyx3QkFDbEV2ZixLQUFLMm1ILDJCQUE2QmQsRUFBc0J0bUcsY0FBYyx1QkFDdEV2ZixLQUFLNG1ILHVCQUF5QmYsRUFBc0J0bUcsY0FBYywrQkFHbEV2ZixLQUFLc1ksSUFBTXNvRyxFQUVYNWdILEtBQUs2bUgsYUFBZWpHLEVBQUlpRyxhQUV4QjdtSCxLQUFLd21ILGtCQUFrQmpnRSxpQkFBaUIsU0FBUyxTQUFBL2xELEdBQy9DLEdBQUtBLEVBQUVNLE9BQXVCODdHLFFBQVEsaUJBQWtCLENBQ3RELElBQU1rSyxFQUFhdG1ILEVBQUVNLE9BQXVCODdHLFFBQVEsaUJBQ25CLFVBQTdCa0ssRUFBVXZMLFFBQVF4bUYsT0FDcEIsRUFBS2d5RixvQkFBb0JELEVBQVVFLGVBRW5DLEVBQUtDLHNCQUFzQkgsRUFBVUUsbUJBSzNDaG5ILEtBQUswbUgsdUJBQXVCbmdFLGlCQUFpQixTQUFTLFNBQUEvbEQsR0FDL0NBLEVBQUVNLE9BQXVCODdHLFFBQVEsa0JBQ3BDLEVBQUtzSyxtQkFBb0IxbUgsRUFBRU0sT0FBdUI4N0csUUFBUSxpQkFBaUJvSyxrQkFJL0VobkgsS0FBS21uSCxZQUFjbm5ILEtBQUttbkgsWUFBWWxvSCxLQUFLZSxNQUV6Q0EsS0FBS29uSCxpQkFBbUJwbkgsS0FBS29uSCxpQkFBaUJub0gsS0FBS2UsTUFDbkRBLEtBQUtpbUgsVUFBVXpILFNBQVd4K0csS0FBS29uSCxpQkFtUm5DLE9BNVFFLFlBQUFDLFlBQUEsU0FBWTFHLEdBRVYzZ0gsS0FBSzhsSCxnQkFBa0IsR0FDdkIsRUFBU3BYLFVBQVUxdUcsS0FBS3dtSCxtQkFDeEJ4bUgsS0FBSytsSCxhQUFlLEdBQ3BCLEVBQVNyWCxVQUFVMXVHLEtBQUswbUgsd0JBQ3hCMW1ILEtBQUt5bUgsb0JBQW9CN0ssVUFBVTNrRixJQUFJLFVBQ3ZDajNCLEtBQUsybUgsMkJBQTJCL0ssVUFBVTNrRixJQUFJLFVBQzlDLElBQUssSUFBSXg1QixFQUFJLEVBQUdBLEVBQUl1QyxLQUFLbW1ILG1CQUFtQjNHLFNBQVNuL0csT0FBUTVDLElBQzNEdUMsS0FBS21tSCxtQkFBbUIzRyxTQUFTL2hILEdBQUdtK0csVUFBVTNrRixJQUFJLFlBU3BELEdBTkFqM0IsS0FBS29tSCxlQUFlekosUUFBVSxLQUM5QjM4RyxLQUFLcW1ILGlCQUFpQjFKLFFBQVUsS0FFaEMzOEcsS0FBSzJnSCxZQUFjQSxFQUNuQjNnSCxLQUFLc25ILFlBQWN0bkgsS0FBSzZtSCxhQUFhdG5HLGNBQWMsd0JBQTBCb2hHLEVBQVl6Z0csR0FBSyxNQUUxRnlnRyxFQUFZNEcsT0FBUSxDQUN0QixJQUFNLEVBQWtCLEdBQ2xCLEVBQW1CcjNHLE9BQU8rekcsaUJBQWlCL04sYUFHakR5SyxFQUFZN0csWUFBWXRvRyxTQUFRLFNBQUEwdkIsR0FDOUIsRUFBTXo5QixLQUFLLG9DQUNjeTlCLEVBQUtoaEIsR0FBRSxtRUFFZGdoQixFQUFLdzFFLFVBQVMsbURBRWhCeDFFLEVBQUtnMUUsZUFBaUIsRUFBbUIsTUFBUWgxRSxFQUFLdS9FLGFBQVcsa0NBQ2pFdi9FLEVBQUtnMUUsYUFBWSxrRUFHYixVQUFkaDFFLEVBQUtzbUYsS0FaQyx3RUFDQyw0RkFXK0Isd0JBRzlDeG5ILEtBQUt3bUgsa0JBQWtCOUYsVUFBWSxFQUFNNTRHLEtBQUssSUFFOUM5SCxLQUFLdW1ILG9CQUFvQjNLLFVBQVV0NkYsT0FBTyxjQUUxQ3RoQixLQUFLdW1ILG9CQUFvQjNLLFVBQVUza0YsSUFBSSxVQVMzQyxZQUFBbXdGLGlCQUFBLFNBQWlCNW1ILEdBQ2ZBLEVBQUVnK0YsaUJBQ0YsSUFBTTBYLEVBQWlCMTFHLEVBQUVNLE9BQTJCd3BFLFNBQVNtOUMsVUFBVSxTQUE4Qi9vSCxNQUNyRyxHQUFxQixLQUFqQnczRyxHQUF3QmwyRyxLQUFLK2xILGFBQWF4RCxTQUFTck0sU0FBNkYzc0csSUFBNUV2SixLQUFLMmdILFlBQVk3RyxZQUFZcjFELE1BQUssU0FBQWxsRCxHQUFLLE9BQUFBLEVBQUUyMkcsZUFBaUJBLEtBeUJoSWwyRyxLQUFLa21ILGtCQUFrQnRLLFVBQVV0NkYsT0FBTyxVQUN4Q3BZLFFBQVE0TyxJQUFJLHlCQWhCWixHQVRBOVgsS0FBS2ttSCxrQkFBa0J0SyxVQUFVM2tGLElBQUksVUFDckNqM0IsS0FBSytsSCxhQUFhdGlILEtBQUt5eUcsR0FDdkJsMkcsS0FBSzBtSCx1QkFBdUJnQixtQkFBbUIsWUFBYSw2QkFDeEN4UixFQUFZLDZDQUNFQSxFQUFZLG1JQUc1QzExRyxFQUFFTSxPQUEyQndwRSxTQUFTbTlDLFVBQVUsU0FBOEIvb0gsTUFBUSxHQUV2RCxJQUE3QnNCLEtBQUsrbEgsYUFBYTFsSCxTQUNwQkwsS0FBS3ltSCxvQkFBb0I3SyxVQUFVdDZGLE9BQU8sVUFDMUN0aEIsS0FBSzJtSCwyQkFBMkIvSyxVQUFVdDZGLE9BQU8sVUFDakR0aEIsS0FBSzRtSCx1QkFBdUJlLFNBQVUsRUFFRixJQUFoQzNuSCxLQUFLOGxILGdCQUFnQnpsSCxRQUFjLENBQ3JDLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUttbUgsbUJBQW1CM0csU0FBU24vRyxPQUFRNUMsSUFDM0R1QyxLQUFLbW1ILG1CQUFtQjNHLFNBQVMvaEgsR0FBR20rRyxVQUFVdDZGLE9BQU8sWUFHdkR0aEIsS0FBS29tSCxlQUFlekosUUFBVTM4RyxLQUFLbW5ILFlBQ25Dbm5ILEtBQUtxbUgsaUJBQWlCMUosUUFBVTM4RyxLQUFLc1ksSUFBSXN2RyxtQkFjakQsWUFBQVYsbUJBQUEsU0FBbUJuK0YsR0FDakIsSUFBTTgrRixFQUFZN25ILEtBQUsrbEgsYUFBYXRsSCxRQUFRc29CLEVBQVF3eUYsUUFBUXVNLE9BSTVELEdBSEE5bkgsS0FBSytsSCxhQUFhcGpHLE9BQU9rbEcsRUFBVyxHQUNwQzkrRixFQUFRekgsU0FFeUIsSUFBN0J0aEIsS0FBSytsSCxhQUFhMWxILFNBQ3BCTCxLQUFLeW1ILG9CQUFvQjdLLFVBQVUza0YsSUFBSSxVQUN2Q2ozQixLQUFLMm1ILDJCQUEyQi9LLFVBQVUza0YsSUFBSSxVQUNWLElBQWhDajNCLEtBQUs4bEgsZ0JBQWdCemxILFFBQWMsQ0FDckMsSUFBSyxJQUFJNUMsRUFBSSxFQUFHQSxFQUFJdUMsS0FBS21tSCxtQkFBbUIzRyxTQUFTbi9HLE9BQVE1QyxJQUMzRHVDLEtBQUttbUgsbUJBQW1CM0csU0FBUy9oSCxHQUFHbStHLFVBQVUza0YsSUFBSSxZQUdwRGozQixLQUFLb21ILGVBQWV6SixRQUFVLEtBQzlCMzhHLEtBQUtxbUgsaUJBQWlCMUosUUFBVSxPQVV0QyxZQUFBb0ssb0JBQUEsU0FBb0JoK0YsR0FDbEIvb0IsS0FBSzhsSCxnQkFBZ0JyaUgsS0FBS3NsQixFQUFRd3lGLFFBQVFpRixZQUUxQ3ozRixFQUFRNnlGLFVBQVUza0YsSUFBSSxhQUV0QixJQUFNNnZGLEVBQVkvOUYsRUFBUXhKLGNBQWMsZUFJeEMsR0FIQXVuRyxFQUFVcEcsVUFBWSw0Q0FDdEJvRyxFQUFVdkwsUUFBUXhtRixPQUFTLFVBRU0sSUFBN0IvMEIsS0FBSytsSCxhQUFhMWxILFFBQWdELElBQWhDTCxLQUFLOGxILGdCQUFnQnpsSCxPQUFjLENBQ3ZFLElBQUssSUFBSTVDLEVBQUksRUFBR0EsRUFBSXVDLEtBQUttbUgsbUJBQW1CM0csU0FBU24vRyxPQUFRNUMsSUFDM0R1QyxLQUFLbW1ILG1CQUFtQjNHLFNBQVMvaEgsR0FBR20rRyxVQUFVdDZGLE9BQU8sWUFHdkR0aEIsS0FBS29tSCxlQUFlekosUUFBVTM4RyxLQUFLbW5ILFlBQ25Dbm5ILEtBQUtxbUgsaUJBQWlCMUosUUFBVTM4RyxLQUFLc1ksSUFBSXN2RyxtQkFTN0MsWUFBQVgsc0JBQUEsU0FBc0JsK0YsR0FFcEIsSUFBTTVNLEVBQVFuYyxLQUFLOGxILGdCQUFnQnJsSCxRQUFRc29CLEVBQVF3eUYsUUFBUWlGLFlBQzNEeGdILEtBQUs4bEgsZ0JBQWdCbmpHLE9BQU94RyxFQUFPLEdBRW5DNE0sRUFBUTZ5RixVQUFVdDZGLE9BQU8sYUFFekIsSUFBTXdsRyxFQUFZLzlGLEVBQVF4SixjQUFjLGVBSXhDLEdBSEF1bkcsRUFBVXBHLFVBQVksMkNBQ3RCb0csRUFBVXZMLFFBQVF4bUYsT0FBUyxRQUVTLElBQWhDLzBCLEtBQUs4bEgsZ0JBQWdCemxILFFBQTZDLElBQTdCTCxLQUFLK2xILGFBQWExbEgsT0FBYyxDQUN2RSxJQUFLLElBQUk1QyxFQUFJLEVBQUdBLEVBQUl1QyxLQUFLbW1ILG1CQUFtQjNHLFNBQVNuL0csT0FBUTVDLElBQzNEdUMsS0FBS21tSCxtQkFBbUIzRyxTQUFTL2hILEdBQUdtK0csVUFBVTNrRixJQUFJLFlBR3BEajNCLEtBQUtvbUgsZUFBZXpKLFFBQVUsS0FDOUIzOEcsS0FBS3FtSCxpQkFBaUIxSixRQUFVLE9BNkJwQyxZQUFBb0wsaUJBQUEsc0JBQ1FDLEVBQW9GLEdBTTFGLE9BSEFob0gsS0FBSytsSCxhQUFhdjBHLFNBQVEsU0FBQ3MyRyxFQUFPcnFILEdBQ2hDdXFILEVBQW1CdmtILEtBQUssRUFBSXdrSCxVQUFVLEVBQUt0SCxZQUFZemdHLEdBQUk0bkcsRUFGL0MsSUFFOERycUgsT0FFckVzRSxRQUFRdVQsSUFBSTB5RyxJQU9yQixZQUFBRSxvQkFBQSxzQkFDUUMsRUFBNkQsR0FJbkUsT0FIQW5vSCxLQUFLOGxILGdCQUFnQnQwRyxTQUFRLFNBQUEya0csR0FDM0JnUyxFQUFzQjFrSCxLQUFLLEVBQUkya0gsZ0JBQWdCLEVBQUt6SCxZQUFZemdHLEdBQUlpMkYsT0FFL0RwMEcsUUFBUXVULElBQUk2eUcsSUFPZixZQUFBaEIsWUFBTixXLGdIQUNFbm5ILEtBQUtzbUgsaUJBQWlCMUssVUFBVXQ2RixPQUFPLFVBQ25DK21HLEdBQWtCLEVBQ2xCQyxHQUFpQixFQUVqQnRvSCxLQUFLOGxILGdCQUFnQnpsSCxPQUFTLEVBQ2hDLEdBQU1MLEtBQUtrb0gsc0JBQXNCMWxILE1BQUssU0FBQStsSCxHQUVwQyxFQUFLekMsZ0JBQWdCdDBHLFNBQVEsU0FBQTJrRyxHQUMzQixJQUFNaDZGLEVBQVEsRUFBS3drRyxZQUFZN0csWUFBWUQsV0FBVSxTQUFBMkcsR0FBYyxPQUFBQSxFQUFXdGdHLEtBQU9pMkYsS0FDckYsRUFBS3dLLFlBQVk3RyxZQUFZbjNGLE9BQU94RyxFQUFPLFNBRTVDLFNBQUE4eEYsR0FDRC9rRyxRQUFRNE8sSUFBSW0yRixHQUNacWEsR0FBaUIsTUFUakIsTSxPQUNGLFMsd0JBWUV0b0gsS0FBSytsSCxhQUFhMWxILE9BQVMsRUFDN0IsR0FBTUwsS0FBSytuSCxtQkFBbUJ2bEgsTUFBSyxTQUFBK2xILEdBRWpDQSxFQUFPLzJHLFNBQVEsU0FBQ0wsRUFBSzFULEdBQ25CLEVBQUtrakgsWUFBWTdHLFlBQVlyMkcsS0FBSyxDQUNoQ3ljLEdBQUkvTyxFQUFJN08sT0FBTzRkLEdBQ2ZnMkYsYUFBYyxFQUFLNlAsYUFBYXRvSCxHQUNoQytwSCxLQUFNcjJHLEVBQUk3TyxPQUFPa2xILEtBQ2pCL0csWUFBYXR2RyxFQUFJN08sT0FBT20rRyxZQUN4Qi9KLFVBQVd2bEcsRUFBSTdPLE9BQU9vMEcsZUFHdEIsRUFBS2tRLHVCQUF1QmUsU0FDOUIsRUFBSWEsd0JBQXdCdDRHLE9BQU8rekcsaUJBQWlCeEQsWUFBYSxFQUFLc0YsYUFBYyxFQUFLcEYsWUFBWTNpSCxLQUFNLEVBQUsyaUgsWUFBWXpnRyxJQUk5SGhRLE9BQU91NEcsOEJBQ04sU0FBQXhhLEdBQ0Qva0csUUFBUTRPLElBQUltMkYsR0FDWm9hLEdBQWtCLE1BcEJsQixNLE9BQ0YsUyx3QkF1QkVBLEdBQW1CQyxHQUN1QixJQUF4Q3RvSCxLQUFLMmdILFlBQVk3RyxZQUFZejVHLFFBQy9CTCxLQUFLMmdILFlBQVk0RyxRQUFTLEVBQ3RCdm5ILEtBQUtzbkgsWUFBWS9uRyxjQUFjLGdCQUNqQ3ZmLEtBQUtzbkgsWUFBWS9uRyxjQUFjLGVBQWUrQixXQUdoRHRoQixLQUFLMmdILFlBQVk0RyxRQUFTLEVBQ3JCdm5ILEtBQUtzbkgsWUFBWS9uRyxjQUFjLGdCQUNsQ3ZmLEtBQUtzbkgsWUFBWUksbUJBQW1CLGFBQWMsa0VBR3REMW5ILEtBQUtzWSxJQUFJb3dHLFlBQVksVUFBVyx3Q0FBeUMsTUFFekUxb0gsS0FBS3NZLElBQUlvd0csWUFBWSxRQUFTLDJEQUVoQzFvSCxLQUFLc21ILGlCQUFpQjFLLFVBQVUza0YsSUFBSSxVQUNwQ2ozQixLQUFLc1ksSUFBSXN2RyxtQixZQUViLEVBcFZBLEdDSE8sTUFBTSxFQUNYLGNBQ0U1bkgsS0FBSzJvSCxpQkFBbUJ2cEcsU0FBU3MvRixlQUFlLG1CQUNoRDErRyxLQUFLNG9ILHVCQUF5QnhwRyxTQUFTcy9GLGVBQWUsMEJBQ3REMStHLEtBQUs2b0gsa0JBQW9CenBHLFNBQVNHLGNBQWMsaURBQ2hEdmYsS0FBSzJvSCxpQkFBaUJoTSxRQUFVLElBQU0zOEcsS0FBSzRvSCx1QkFBdUJoTixVQUFVa04sT0FBTyxRQUNuRjlvSCxLQUFLNm9ILGtCQUFrQnRpRSxpQkFBaUIsUUFBUy9sRCxJQUMzQ0EsRUFBRU0sT0FBTzg3RyxRQUFRLE9BQU81OEcsS0FBSytvSCxpQkFBaUJ2b0gsRUFBRU0sT0FBTzg3RyxRQUFRLE1BQU1yQixRQUFRcjdGLE1BRW5GbGdCLEtBQUtncEgsY0FBZ0IsR0FvQnZCLG9CQUFvQkMsR0FDbEIsTUFBTUMsRUFBc0I5cEcsU0FBU3dCLGNBQWMsTUFDN0N1b0csRUFBaUIsRUFBU3paLFNBQ2hDd1osRUFBb0IzTixRQUFRcjdGLEdBQUtpcEcsRUFDakNELEVBQW9CdE4sVUFBVTNrRixJQUFJLFdBQ2xDaXlGLEVBQW9CeEksVUFBWSxnREFDU3VJLEVBQWdCdlMsc0VBRS9DdVMsRUFBZ0J4UyxvREFBb0R3UyxFQUFnQjFTLGdDQUNyRjBTLEVBQWdCdFMseUJBRXpCMzJHLEtBQUs2b0gsa0JBQWtCTyxRQUFRRixHQUMvQmxwSCxLQUFLZ3BILGNBQWN2bEgsS0FBSyxDQUFFeWMsR0FBSWlwRyxFQUFnQjdOLGVBQWdCNE4sRUFBcUI5dUQsTUFBTyxVQUFXMXZELEtBQU11K0csSUFHM0dqcEgsS0FBSzJvSCxpQkFBaUIvTSxVQUFVM2tGLElBQUksV0FDRixJQUE5QmozQixLQUFLZ3BILGNBQWMzb0gsUUFDckJMLEtBQUs0b0gsdUJBQXVCaE4sVUFBVXQ2RixPQUFPLFNBV2pELG9CQUFvQjZuRyxHQUNsQixNQUFNaHRHLEVBQVFuYyxLQUFLZ3BILGNBQWNuUCxVQUFVMzZHLEdBQUtBLEVBQUVnaEIsS0FBT2lwRyxHQUN6RG5wSCxLQUFLZ3BILGNBQWM3c0csR0FBT20vRixlQUFlaDZGLFNBQ3pDdGhCLEtBQUtncEgsY0FBY3JtRyxPQUFPeEcsRUFBTyxHQVFuQyxpQkFBaUJndEcsR0FDZixNQUFNRSxFQUFlcnBILEtBQUtncEgsY0FBY3ZrRSxLQUFLdmxELEdBQUtBLEVBQUVnaEIsS0FBT2lwRyxHQUMzREUsRUFBYWp2RCxNQUFRLE9BQ3JCaXZELEVBQWEvTixlQUFlTSxVQUFVdDZGLE9BQU8sZ0JBR2UvWCxJQUF4RHZKLEtBQUtncEgsY0FBY3ZrRSxLQUFLdmxELEdBQWlCLFlBQVpBLEVBQUVrN0QsUUFDakNwNkQsS0FBSzJvSCxpQkFBaUIvTSxVQUFVdDZGLE9BQU8sWUMzRXRDLE1BQU0sRUFDWCxZQUFZZ29HLEVBQXdCMUksR0FDbEM1Z0gsS0FBS2dtSCxjQUFnQnNELEVBQ3JCdHBILEtBQUt1cEgsV0FBYUQsRUFBdUIvcEcsY0FBYyxRQUN2RHZmLEtBQUsrRyxNQUFRdWlILEVBQXVCL3BHLGNBQWMsa0NBQ2xEdmYsS0FBS3dwSCxzQkFBd0JGLEVBQXVCL3BHLGNBQWMsY0FDbEV2ZixLQUFLeXBILFVBQVlILEVBQXVCL3BHLGNBQWMsdUNBR3REdmYsS0FBS3NZLElBQU1zb0csRUFFWDVnSCxLQUFLMHBILGdCQUVMMXBILEtBQUtrc0IsVUFDTGxzQixLQUFLMnBILFlBRUwzcEgsS0FBSzRwSCxnQkFBa0IsSUFBSXgrQyxPQUFPLGNBRWxDcHJFLEtBQUs2cEgsY0FBZ0I3cEgsS0FBSzZwSCxjQUFjNXFILEtBQUtlLE1BQzdDQSxLQUFLdXBILFdBQVcvSyxTQUFXeCtHLEtBQUs2cEgsY0FFaEM3cEgsS0FBS3lwSCxVQUFVOU0sUUFBVW44RyxJQUN2QkEsRUFBRWcrRixpQkFDRngrRixLQUFLOHBILGNBQWMsSUFDbkJsSixFQUFJZ0gsb0JBUVIsWUFBWThCLEdBQ1YxcEgsS0FBSzBwSCxnQkFBa0JBLEVBQ3ZCMXBILEtBQUtrc0IsVUFBWXc5RixFQUFnQm5PLFFBQVF3TyxPQUN6Qy9wSCxLQUFLMnBILFlBQWNELEVBQWdCbk8sUUFBUXY5RyxLQUMzQ2dDLEtBQUt3cEgsc0JBQXNCNU4sVUFBVTNrRixJQUFJLFVBQ3pDajNCLEtBQUs4cEgsY0FBYzlwSCxLQUFLMnBILGFBRzFCLG9CQUFvQm5wSCxHQUVsQixHQURBQSxFQUFFZytGLGlCQUN1QixLQUFyQngrRixLQUFLK0csTUFBTXJJLE9BQWdCc0IsS0FBSzRwSCxnQkFBZ0J6NUcsS0FBS25RLEtBQUsrRyxNQUFNckksT0FDbEVzQixLQUFLd3BILHNCQUFzQjVOLFVBQVV0NkYsT0FBTyxlQUN2QyxHQUFJdGhCLEtBQUsrRyxNQUFNckksTUFBTW04RixTQUFXNzZGLEtBQUsycEgsWUFDMUMzcEgsS0FBSzhwSCxjQUFjLElBQ25COXBILEtBQUtzWSxJQUFJc3ZHLHVCQUNKLENBQ0w1bkgsS0FBS3dwSCxzQkFBc0I1TixVQUFVM2tGLElBQUksVUFDekMsSUFFRSxNQUFNK3lGLFFBQTBCLEVBQUlDLFdBQVdqcUgsS0FBS2tzQixVQUFXbHNCLEtBQUsrRyxNQUFNckksTUFBTW04RixRQUMvQyxNQUE3Qm12QixFQUFrQjdpRCxRQUNwQm5uRSxLQUFLMHBILGdCQUFnQm5xRyxjQUFjLE1BQU1zOUYsVUFBWW1OLEVBQWtCMW5ILE9BQU90RSxLQUM5RWdDLEtBQUswcEgsZ0JBQWdCbk8sUUFBUXY5RyxLQUFPZ3NILEVBQWtCMW5ILE9BQU90RSxLQUM3RGdDLEtBQUs4cEgsY0FBYyxJQUNuQjlwSCxLQUFLc1ksSUFBSXN2RyxtQkFDVDVuSCxLQUFLc1ksSUFBSW93RyxZQUFZLFVBQVcsZ0NBQWlDLE9BRWpFMW9ILEtBQUtzWSxJQUFJb3dHLFlBQVksUUFBUyw4Q0FDOUIxb0gsS0FBS3NZLElBQUlzdkcsbUJBQ1QxK0csUUFBUXBGLE1BQU0sNENBQTZDa21ILElBRTdELE1BQU9sN0csR0FDUDlPLEtBQUtzWSxJQUFJb3dHLFlBQVksUUFBUyw4Q0FDOUIxb0gsS0FBS3NZLElBQUlzdkcsbUJBQ1QxK0csUUFBUXBGLE1BQU0sNENBQTZDZ0wsS0FLakUsY0FBY3BRLEdBQ1pzQixLQUFLK0csTUFBTXJJLE1BQVFBLEdDeEVoQixNQUFNLEVBQ1gsY0FDRXNCLEtBQUtrcUgsY0FBZ0I5cUcsU0FBU3dCLGNBQWMsT0FDNUM1Z0IsS0FBS2txSCxjQUFjaHFHLEdBQUssY0FDeEJsZ0IsS0FBS21xSCxrQkFBb0IvcUcsU0FBU3dCLGNBQWMsTUFDaEQ1Z0IsS0FBS2txSCxjQUFjanBHLFlBQVlqaEIsS0FBS21xSCxtQkFDcENucUgsS0FBS2txSCxjQUFjdnBHLE1BQU04K0YsUUFBVSxPQUNuQ3ovRyxLQUFLb3FILFNBQVUsRUFDZmw2RyxPQUFPcTJDLGlCQUFpQixRQUFTLEtBQzNCdm1ELEtBQUtvcUgsU0FBU3BxSCxLQUFLcXFILFdBQVcsVUFFcENuNkcsT0FBT3EyQyxpQkFBaUIsY0FBZS9sRCxJQUNyQ0EsRUFBRWcrRixpQkFDRixNQUFNOHJCLEVBQWdCOXBILEVBQUVNLE9BQU84N0csUUFBUSxpQkFDbkMwTixHQUFpQkEsRUFBY0MsaUJBRWpDdnFILEtBQUt3cUgsWUFFTHhxSCxLQUFLeXFILGFBQWFILEVBQWNDLGlCQUVoQ3ZxSCxLQUFLMHFILFlBQVlscUgsRUFBRTA5RixNQUFPMTlGLEVBQUV5OUYsUUFDbkJqK0YsS0FBS29xSCxTQUNkcHFILEtBQUtxcUgsV0FBVyxVQUdwQm42RyxPQUFPa1AsU0FBUzFjLEtBQUt1ZSxZQUFZamhCLEtBQUtrcUgsZUFPeEMsV0FBV1MsR0FDVDNxSCxLQUFLa3FILGNBQWN2cEcsTUFBTTgrRixRQUFzQixTQUFaa0wsRUFBcUIsUUFBVSxPQUNsRTNxSCxLQUFLb3FILFNBQVdwcUgsS0FBS29xSCxRQVF2QixZQUFZUSxFQUFLemdHLEdBQ2ZucUIsS0FBS2txSCxjQUFjdnBHLE1BQU13SixLQUFPLEdBQUdBLE1BQ25DbnFCLEtBQUtrcUgsY0FBY3ZwRyxNQUFNaXFHLElBQU0sR0FBR0EsTUFDbEM1cUgsS0FBS3FxSCxXQUFXLFFBTWxCLFlBQ0VycUgsS0FBS21xSCxrQkFBa0J4b0csV0FBV25RLFFBQVF3c0csR0FBT0EsRUFBSXJCLFFBQVUsTUFDL0QsRUFBU2pPLFVBQVUxdUcsS0FBS21xSCxtQkFPMUIsYUFBYUksR0FDWCxNQUFNTSxFQUFpQixJQUFJQyxpQkFDM0IsSUFBSyxJQUFJcnRILEVBQUksRUFBR0EsRUFBSThzSCxFQUFnQmxxSCxPQUFRNUMsSUFBSyxDQUMvQyxNQUFNd2lCLEVBQU9iLFNBQVN3QixjQUFjLE1BQ3BDWCxFQUFLNDhGLFVBQVkwTixFQUFnQjlzSCxHQUFHTyxLQUNwQ2lpQixFQUFLMDhGLFFBQVU0TixFQUFnQjlzSCxHQUFHczNCLE9BQ2xDODFGLEVBQWU1cEcsWUFBWWhCLEdBRTdCamdCLEtBQUttcUgsa0JBQWtCbHBHLFlBQVk0cEcsSUNwRWhDLE1BQU0sRUFLWCxZQUFZbEssRUFBYXJvRyxHQUN2QnRZLEtBQUtrcUgsY0FBZ0I5cUcsU0FBU3dCLGNBQWMsVUFFckIsYUFBbkIrL0YsRUFBWXpnRyxJQUNkbGdCLEtBQUtrcUgsY0FBY3RPLFVBQVUza0YsSUFBSSxVQUVuQ2ozQixLQUFLa3FILGNBQWMzTyxRQUFRd08sT0FBU3BKLEVBQVl6Z0csR0FDaERsZ0IsS0FBS2txSCxjQUFjM08sUUFBUXY5RyxLQUFPMmlILEVBQVkzaUgsS0FDOUNnQyxLQUFLa3FILGNBQWN0TyxVQUFVM2tGLElBQUksZUFDakMsSUFBSTh6RixFQUFrQixHQUNsQnBLLEVBQVk0RyxRQUNkd0QsRUFBZ0J0bkgsS0FBSyw0REFFbkJrOUcsRUFBWWxILFFBQ2RzUixFQUFnQnRuSCxLQUFLLDBEQUEwRGs5RyxFQUFZbEgsYUFFM0ZzUixFQUFnQnRuSCxLQUFLLGdSQUV2QnNuSCxFQUFnQnRuSCxLQUFLLE9BQU9rOUcsRUFBWTNpSCxhQUN4Q2dDLEtBQUtrcUgsY0FBY3hKLFVBQVlxSyxFQUFnQmpqSCxLQUFLLElBR3BEOUgsS0FBS2txSCxjQUFjM08sUUFBUXlQLE9BQVMsR0FHcENockgsS0FBS2txSCxjQUFjSyxnQkFBa0IsQ0FDbkMsQ0FDRXZzSCxLQUFNLFNBQ04rMkIsT0FBUSxLQUNOemMsRUFBSTJ5RyxtQkFBbUIsU0FBVSx1Q0FBdUN0SyxFQUFZM2lILGdCQUFpQixDQUNuRyxDQUNFQSxLQUFNLFNBQ05rdEgsU0FBVSxLQUNSNXlHLEVBQUkyeUcsbUJBQW1CLFNBQVUsWUFBWXRLLEVBQVkzaUgsaUJBQ3pELEVBQUltdEgsV0FBV3hLLEVBQVl6Z0csSUFBSTFkLEtBQUsyTyxJQUNsQ25SLEtBQUtrcUgsY0FBYzVvRyxTQUNuQixNQUFNOHBHLEVBQVk5eUcsRUFBSWkvRixhQUFhc0MsVUFBVXJDLEdBQVFBLEVBQUt0M0YsS0FBT3lnRyxFQUFZemdHLElBQzdFNUgsRUFBSWkvRixhQUFhNTBGLE9BQU95b0csRUFBVyxHQUVuQzl5RyxFQUFJK3lHLHNCQUNKL3lHLEVBQUlvd0csWUFBWSxVQUFXLG9DQUlqQyxDQUNFMXFILEtBQU0sU0FDTmt0SCxTQUFVLEtBQ1I1eUcsRUFBSSt5Ryw0QkFNZCxDQUNFcnRILEtBQU0sZ0JBQ04rMkIsT0FBUSxLQUNOemMsRUFBSWd6RyxtQkFBbUJqRSxZQUFZMUcsR0FDbkNyb0csRUFBSWl6RyxnQkFBZ0JqekcsRUFBSWd6RyxtQkFBbUJ0RixlQUMzQzF0RyxFQUFJa3pHLHFCQUFxQjVQLFVBQVUza0YsSUFBSSxxQkFHM0MsQ0FDRWo1QixLQUFNLFNBQ04rMkIsT0FBUSxLQUNOemMsRUFBSW16RyxvQkFBb0JwRSxZQUFZcm5ILEtBQUtrcUgsZUFDekM1eEcsRUFBSWl6RyxnQkFBZ0JqekcsRUFBSW16RyxvQkFBb0J6RixtQixJQ3ZCbEQsRSw2MENDckNKLGFBa0RFLHdCQUNFaG1ILEtBQUswckgsa0JBQW9CdHNHLFNBQVNzL0YsZUFBZSxhQUNqRDErRyxLQUFLMmhILG9CQUFzQnZpRyxTQUFTcy9GLGVBQWUsY0FDbkQxK0csS0FBSytnSCxnQkFBa0IzaEcsU0FBU3MvRixlQUFlLG1CQUMvQzErRyxLQUFLZ2hILGFBQWU1aEcsU0FBU3MvRixlQUFlLGdCQUM1QzErRyxLQUFLbWhILGtCQUFvQi9oRyxTQUFTcy9GLGVBQWUscUJBRWpEMStHLEtBQUt3ckgscUJBQXVCcHNHLFNBQVNzL0YsZUFBZSx3QkFDcEQxK0csS0FBSzJySCxtQkFBcUIzckgsS0FBS3dySCxxQkFBcUJqc0csY0FBYyxrQkFDbEV2ZixLQUFLNHJILG9CQUFzQnhzRyxTQUFTcy9GLGVBQWUsdUJBQ25EMStHLEtBQUs2ckgsY0FBZ0J6c0csU0FBU3MvRixlQUFlLGlCQUM3QzErRyxLQUFLNG5ILGlCQUFtQjVuSCxLQUFLNG5ILGlCQUFpQjNvSCxLQUFLZSxNQUNuREEsS0FBSzZySCxjQUFjbFAsUUFBVTM4RyxLQUFLNG5ILGlCQUVsQzVuSCxLQUFLOHJILGdCQUFrQjFzRyxTQUFTcy9GLGVBQWUsbUJBRS9DMStHLEtBQUsrckgsc0JBQXdCM3NHLFNBQVNzL0YsZUFBZSx5QkFDckQxK0csS0FBSzZtSCxhQUFlem5HLFNBQVNzL0YsZUFBZSxnQkFDNUMxK0csS0FBS2dzSCxxQkFBdUI1c0csU0FBU3MvRixlQUFlLHdCQUVwRDErRyxLQUFLeTdHLGNBQWdCcjhGLFNBQVNzL0YsZUFBZSxpQkFFN0MxK0csS0FBS2loSCxRQUFVN2hHLFNBQVNzL0YsZUFBZSxXQUN2QzErRyxLQUFLaXNILGlCQUFtQmpzSCxLQUFLaXNILGlCQUFpQmh0SCxLQUFLZSxNQUNuREEsS0FBS2loSCxRQUFRdEUsUUFBVTM4RyxLQUFLaXNILGlCQUU1QmpzSCxLQUFLa3NILGtCQUFvQmxzSCxLQUFLa3NILGtCQUFrQmp0SCxLQUFLZSxNQUNyREEsS0FBSytnSCxnQkFBZ0JwRSxRQUFVLFdBQ2EsU0FBdEMsRUFBS29FLGdCQUFnQnhGLFFBQVFyL0UsS0FDL0IsRUFBS2d3RixvQkFDMEMsVUFBdEMsRUFBS25MLGdCQUFnQnhGLFFBQVFyL0UsTUFDdEMsRUFBS2l3RixvQkFHVG5zSCxLQUFLZ3NILHFCQUFxQnpsRSxpQkFBaUIsUUFBU3ZtRCxLQUFLa3NILG1CQUN6RGxzSCxLQUFLb3NILFlBQWNwc0gsS0FBS29zSCxZQUFZbnRILEtBQUtlLE1BQ3pDQSxLQUFLNm1ILGFBQWF0Z0UsaUJBQWlCLFFBQVN2bUQsS0FBS29zSCxhQUVqRHBzSCxLQUFLcXNILGVBQWlCanRHLFNBQVNzL0YsZUFBZSxrQkFDOUMxK0csS0FBS3NzSCxVQUFZbHRHLFNBQVNzL0YsZUFBZSxhQUN6QzErRyxLQUFLdXNILGNBQWdCdnNILEtBQUtxc0gsZUFBZTlzRyxjQUFjLHlCQUV2REgsU0FBU3MvRixlQUFlLGlCQUFpQm40RCxpQkFBaUIsU0FBUyxXQUNqRSxFQUFLZ2xFLGdCQUFnQixFQUFLYyxnQkFDMUIsRUFBS2IscUJBQXFCNVAsVUFBVTNrRixJQUFJLHNCQVExQ2ozQixLQUFLc3NILFVBQVUvbEUsaUJBQWlCLFVBQVUsV0FDcEMsRUFBSytsRSxVQUFVcFgsTUFBTTcwRyxPQUFTLEdBQ2hDLEVBQUtpc0gsVUFBVUUsbUJBQW1COUwsVUFBWSxFQUFLNEwsVUFBVXBYLE1BQU0sR0FBR2wzRyxLQUN0RSxFQUFLdXVILGNBQWMzUSxVQUFVdDZGLE9BQU8sY0FFcEMsRUFBS2dyRyxVQUFVRSxtQkFBbUI5TCxVQUFZLGdCQUM5QyxFQUFLNkwsY0FBYzNRLFVBQVUza0YsSUFBSSxnQkFJckNqM0IsS0FBS3FzSCxlQUFlN04sU0FBVyxTQUFBaCtHLEdBQzdCQSxFQUFFZytGLGlCQUVGcC9FLFNBQVNzL0YsZUFBZSxlQUFlLzlGLE1BQU04K0YsUUFBVSxRQUN2RCxFQUFLOE0sY0FBYzNRLFVBQVUza0YsSUFBSSxZQUNqQyxFQUFLczFGLGNBQWM3TCxVQUFZLGlCQUM5QixFQUFLNEwsVUFBVUUsbUJBQW1DN3JHLE1BQU04K0YsUUFBVSxPQUNuRSxJQUFNelIsRUFBU3h0RyxFQUFFTSxPQUEyQndwRSxTQUFTbTlDLFVBQVUsUUFBNkJ2UyxNQUFNLEdBRWxHLEVBQUl1WCxjQUFjemUsRUFBTSxFQUFNLEVBQUs2SSxxQkFBcUJyMEcsTUFBSyxTQUFDMk8sR0FDNUQsRUFBS3U3RyxtQkFBbUJ2N0csR0FDeEIsRUFBS3kyRyxtQkFDTCxFQUFLYyxZQUFZLFVBQVcsa0NBQzVCLEVBQUs0RCxVQUFVNXRILE1BQVEsR0FFdkIwZ0IsU0FBU3MvRixlQUFlLGVBQWUvOUYsTUFBTTgrRixRQUFVLE9BQ3ZELEVBQUs2TSxVQUFVRSxtQkFBbUI5TCxVQUFZLGdCQUM5QyxFQUFLNkwsY0FBYzdMLFVBQVksU0FDOUIsRUFBSzRMLFVBQVVFLG1CQUFtQzdyRyxNQUFNOCtGLFFBQVUsV0FDbEUsU0FBQTN3RyxHQUNELEVBQUs4NEcsbUJBQ0wsRUFBSzhFLG1CQUFtQixFQUFLN1YscUJBQzdCM3RHLFFBQVFwRixNQUFNZ0wsT0FJbEI5TyxLQUFLeXJILG9CQUFzQixJQUFJLEVBQWNyc0csU0FBU3MvRixlQUFlLHFCQUFzQjErRyxNQUUzRkEsS0FBS3NySCxtQkFBcUIsSUFBSSxFQUFhbHNHLFNBQVNzL0YsZUFBZSxzQkFBdUIxK0csTUFFMUZBLEtBQUsyc0gsaUJBQW1CdnRHLFNBQVNzL0YsZUFBZSxvQkFDaEQxK0csS0FBSzRzSCxhQUFlNXNILEtBQUs0c0gsYUFBYTN0SCxLQUFLZSxNQUMzQ0EsS0FBSzJzSCxpQkFBaUJwdEcsY0FBYyxVQUFVbzlGLFFBQVUzOEcsS0FBSzRzSCxhQUU3RDE4RyxPQUFPMjhHLFNBQVc3c0gsS0FBSzhzSCxZQUd2QjF0RyxTQUFTcy9GLGVBQWUsVUFBVW40RCxpQkFBaUIsU0FBUyxTQUFDL2xELEdBQU0sU0FBS3VzSCxpQkFBaUJuTCxZQUFZcGhILEVBQUcsRUFBYSx1QkFDckg0ZSxTQUFTcy9GLGVBQWUsVUFBVW40RCxpQkFBaUIsU0FBUyxTQUFDL2xELEdBQU0sU0FBS3VzSCxpQkFBaUJuTCxZQUFZcGhILEVBQUcsRUFBWSxtQkFFcEhSLEtBQUtndEgscUJBQXVCLElBQUksRUFFaENodEgsS0FBS2l0SCxZQUFjLElBQUksRUF3YjNCLE9BaGJRLFlBQUFDLFlBQU4sVyxnR0FDc0IsU0FBTSxFQUFJQyxlLGNBQXhCQyxFQUFjLFNBQ3BCcHRILEtBQUtxdEgsU0FBVzNoSCxLQUFLQyxNQUFNeWhILEVBQVkxcUgsTUFBTXcrQixLQUM3Q2xoQyxLQUFLMHJILGtCQUFrQmhMLFVBQVksb0JBQ3RCMWdILEtBQUtxdEgsU0FBUzNXLFVBQVMsa0NBRXhCMTJHLEtBQUtxdEgsU0FBUzVNLFlBQVcsOEJBQThCemdILEtBQUtxdEgsU0FBU25YLGFBQVkseUIsWUFVekYsWUFBQStWLGlCQUFOLFcsa0lBQ01qc0gsS0FBSytzSCxrQkFBb0Ivc0gsS0FBSytzSCxpQkFBaUI3Syx3QkFDakRsaUgsS0FBS2tpSCx3QkFBeUIsRUFDOUJsaUgsS0FBS2loSCxRQUFRckYsVUFBVXQ2RixPQUFPLFdBQzlCdGhCLEtBQUtpaEgsUUFBUXJGLFVBQVUza0YsSUFBSSxZQUN2QnEyRixPQUFnQixFQUVkLEVBQXVCLEdBQzdCdHRILEtBQUsrc0gsaUJBQWlCclMsU0FBU2xwRyxTQUFRLFNBQUFzdUcsR0FDckMsRUFBV3I4RyxLQUFLLENBQ2R3M0csWUFBYTZFLEVBQVE3RSxZQUNyQmw4RixRQUFTK2dHLEVBQVEvZ0csUUFDakJtOEYsU0FBVTRFLEVBQVE1RSxjQUdoQnFTLEVBQWlCN2hILEtBQUtzRyxVQUFVLEdBRWpDaFMsS0FBSytzSCxpQkFBaUJuUyxlQUF2QixNQUM4QixHQUFNLEVBQUkzQyxXQUFXc1YsRUFBZ0IsbUJBQW9CLGdCQUFpQnZ0SCxLQUFLK3NILGlCQUFpQjdnRyxhQWpCaEksTyxZQWlCTXNoRyxFQUEwQixVQUNKMVgsSUFBeUMsTUFBbkMwWCxFQUF3QnJtRCxPQUF0RCxZLGlCQUdzQixPLHNCQURoQmd4QyxFQUFVLElBQUlDLFlBQVksU0FDVixHQUFNb1YsRUFBd0I5cUgsS0FBSzQxRyxZQUFZQyxRLGNBQWpFLEVBQWtCLFNBQWhCNzVHLEVBQUssUUFBTSxPQUNYd2hCLEVBQUt4VSxLQUFLQyxNQUFNd3NHLEVBQVF2c0csT0FBT2xOLElBQVF3aEIsR0FFN0NsZ0IsS0FBSytzSCxpQkFBaUJuUyxlQUFpQjE2RixFQUN2Q290RyxHQUFtQixFLCtCQUVuQnBrSCxRQUFRNE8sSUFBSSxpREFBa0QsRyxnQ0FHaEV3MUcsR0FBbUIsRSxxQ0FLUyxTQUFNLEVBQUlHLGtCQUFrQkYsRUFBZ0IsbUJBQW9CdnRILEtBQUsrc0gsaUJBQWlCblMsaUIsUUFBOUc4UyxFQUF3QixVQUNKNVgsSUFBdUMsTUFBakM0WCxFQUFzQnZtRCxTQUNwRG1tRCxHQUFtQixHLDBCQUluQkEsR0FBb0J0dEgsS0FBSytzSCxpQkFBaUJySSwyQkFBMkJya0gsT0FBUyxHQUMxRSxFQUE2QyxHQUNuREwsS0FBSytzSCxpQkFBaUJySSwyQkFBMkJsekcsU0FBUSxTQUFDdFMsR0FDeEQsSUFBTXl1SCxFQUFzQixFQUFJQyxpQkFBaUIxdUgsRUFBRXMzRyxPQUFRdDNHLEVBQUV5bEgsU0FBVXpsSCxFQUFFMGxILFVBQVcxbEgsRUFBRTJsSCxZQUFhM2xILEVBQUVxM0csWUFBYXIzRyxFQUFFZ3RCLFdBQ3BILEVBQXNCem9CLEtBQUtrcUgsTUFFN0IsR0FBTTVySCxRQUFRdVQsSUFBSSxHQUF1QjlTLE1BQUssU0FBQTYxRyxHQUM1Q252RyxRQUFRNE8sSUFBSSwrQkFDWixFQUFLaTFHLGlCQUFpQnJJLDJCQUEyQnJrSCxPQUFTLEtBRXpELFNBQUF5TyxHQUNENUYsUUFBUW1DLEtBQUssK0JBQWlDeUQsUUFYOUMsTyxRQU1GLFMsbUJBUUV3K0csR0FDRnR0SCxLQUFLaWhILFFBQVFyRixVQUFVdDZGLE9BQU8sWUFDOUJ0aEIsS0FBS2loSCxRQUFRckYsVUFBVTNrRixJQUFJLFlBQzNCL3RCLFFBQVE0TyxJQUFJLDhCQUVaOVgsS0FBS2tpSCx3QkFBeUIsRUFDOUJsaUgsS0FBS2loSCxRQUFRckYsVUFBVXQ2RixPQUFPLFlBQzlCdGhCLEtBQUtpaEgsUUFBUXJGLFVBQVUza0YsSUFBSSxXQUMzQmozQixLQUFLMG9ILFlBQVksUUFBUyxxREFDMUJ4L0csUUFBUXBGLE1BQU0sc0QscUNBWXBCLFlBQUFzb0gsWUFBQSxTQUFZNXJILEdBQVosV0FDUThtSCxFQUFlOW1ILEVBQUVNLE9BQXVCODdHLFFBQVEsa0JBQ2xDLE9BQWhCMEssSUFJQXRuSCxLQUFLK3NILGtCQUFvQi9zSCxLQUFLK3NILGlCQUFpQjdnRyxZQUFjbzdGLEVBQVkvTCxRQUFRd08sU0FLakYvcEgsS0FBSzYyRyxxQkFBdUJ5USxFQUFZL0wsUUFBUXdPLFNBQVcvcEgsS0FBSzYyRyxvQkFBb0IzMkYsSUFDbEQsYUFBaENsZ0IsS0FBSzYyRyxvQkFBb0IzMkYsSUFDM0JoWCxRQUFRNE8sSUFBSSw4R0FFZDlYLEtBQUs2dEgsWUFBWTd0SCxLQUFLNjJHLHFCQUNsQjcyRyxLQUFLOHRILG9CQUNQOXRILEtBQUs4dEgsbUJBQW1CbFMsVUFBVXQ2RixPQUFPLFdBRTNDZ21HLEVBQVkxTCxVQUFVM2tGLElBQUksV0FDMUJqM0IsS0FBSzh0SCxtQkFBcUJ4RyxFQUMxQnRuSCxLQUFLK2dILGdCQUFnQnBnRyxNQUFNOCtGLFFBQVUsVUFFckN6L0csS0FBS2lySCxtQkFBbUIsU0FBVSxtQkFBbUIzRCxFQUFZL0wsUUFBUXY5RyxNQUN6RSxFQUFJK3ZILGFBQWF6RyxFQUFZL0wsUUFBUXdPLE9BQVEvcEgsTUFDMUN3QyxNQUFLLFNBQUEyTyxHQUNKLEVBQUswOEcsWUFBWTE4RyxHQUNiLEVBQUsyOEcsb0JBQ1AsRUFBS0EsbUJBQW1CbFMsVUFBVXQ2RixPQUFPLFdBRTNDZ21HLEVBQVkxTCxVQUFVM2tGLElBQUksV0FDMUIsRUFBSzYyRixtQkFBcUJ4RyxFQUMxQixFQUFLdkcsZ0JBQWdCcGdHLE1BQU04K0YsUUFBVSxRQUNyQyxFQUFLNEwseUJBQ0osU0FBQXY4RyxHQUNENUYsUUFBUTRPLElBQUloSixVQVFwQixZQUFBKytHLFlBQUEsU0FBWUcsR0FDTmh1SCxLQUFLK3NILGtCQUNQL3NILEtBQUsrc0gsaUJBQWlCaC9HLFFBRXhCL04sS0FBSytzSCxpQkFBbUIsSUFBSSxFQUFVaUIsRUFBU2h1SCxNQUMvQ0EsS0FBSytySCxzQkFBc0JwckcsTUFBTTgrRixRQUFVLE9BQzNDd08sUUFBUUMsYUFBYSxDQUFFQyxhQUFjSCxFQUFRaHdILE1BQVFnd0gsRUFBUWh3SCxLQUFNLE9BQVNnd0gsRUFBUTl0RyxLQU90RixZQUFBZ3NHLGtCQUFBLFdBQ0Vsc0gsS0FBSytySCxzQkFBc0JwckcsTUFBTTgrRixRQUFVLE9BQzNDei9HLEtBQUtnaEgsYUFBYXJnRyxNQUFNOCtGLFFBQVUsUUFDbEN6L0csS0FBS21oSCxrQkFBa0J4Z0csTUFBTTgrRixRQUFVLE9BQ3ZDei9HLEtBQUsrZ0gsZ0JBQWdCeEYsUUFBUXIvRSxLQUFPLFNBT3RDLFlBQUFpd0YsaUJBQUEsMkJBQ2dDNWlILElBQTFCdkosS0FBSytzSCxpQkFDUC9zSCxLQUFLZ3NILHFCQUFxQnBRLFVBQVUza0YsSUFBSSxVQUV4Q2ozQixLQUFLZ3NILHFCQUFxQnBRLFVBQVV0NkYsT0FBTyxVQUU3Q3RoQixLQUFLK3JILHNCQUFzQnByRyxNQUFNOCtGLFFBQVUsUUFDM0N6L0csS0FBSytnSCxnQkFBZ0J4RixRQUFRci9FLEtBQU8sT0FFcENsOEIsS0FBS2doSCxhQUFhcmdHLE1BQU04K0YsUUFBVSxPQUNsQ3ovRyxLQUFLbWhILGtCQUFrQnhnRyxNQUFNOCtGLFFBQVUsYUFFYmwyRyxJQUF0QnZKLEtBQUt1M0csY0FBOEJ2M0csS0FBS3UzRyxhQUFhbDNHLFFBQVUsS0FDakVMLEtBQUtpckgsbUJBQW1CLFNBQVUsb0JBQ2xDLEVBQUltRCxpQkFBaUJwdUgsTUFBTXdDLE1BQUssU0FBQzJPLEdBQy9CLEVBQUtrOUcsdUJBQXVCbDlHLEdBRTVCLEVBQUswMUcsYUFBYWxsRyxXQUFXblEsU0FBUSxTQUFDZ21HLEdBQ2hDQSxFQUFLK0QsU0FBVy9ELEVBQUsrRCxRQUFRd08sU0FBVyxFQUFLZ0QsaUJBQWlCN2dHLFlBQ2hFc3JGLEVBQUtvRSxVQUFVM2tGLElBQUksV0FDbkIsRUFBSzYyRixtQkFBcUJ0VyxNQUc5QixFQUFLNlQseUJBQ0osU0FBQXBkLEdBQ0QsRUFBSzRZLGFBQWFuRyxVQUFZLDhEQUM5QixFQUFLMkssMkJBUVgsWUFBQWdELHVCQUFBLFNBQXVCOVcsR0FBdkIsV0FDRUEsRUFBYS9sRyxTQUFRLFNBQUE4OEcsR0FDbkIsSUFBTWhILEVBQWMsSUFBSSxFQUFZZ0gsRUFBVSxHQUM5QyxFQUFLekgsYUFBYTVsRyxZQUFZcW1HLEVBQVk0QyxrQkFFNUNscUgsS0FBSzhzSCxlQU1QLFlBQUFBLFlBQUEsV0FDRSxJQUFNeUIsRUFBUzNuRyxPQUFPNG5HLGlCQUFpQnh1SCxLQUFLNm1ILGNBQWM0SCxpQkFBaUIsY0FDckVDLEVBQWExdUgsS0FBSzZtSCxhQUFhckgsU0FBU24vRyxPQUM5Q0wsS0FBSzZtSCxhQUFhbG1HLE1BQU15OEYsWUFBWSxxQkFBdUJ4c0csS0FBSys5RyxLQUFLRCxFQUFhSCxHQUFVQSxFQUFVRyxHQUFZbGpILGFBTXBILFlBQUFraEgsbUJBQUEsU0FBbUI0QixHQUVidHVILEtBQUt1M0csYUFBYWwzRyxRQUFVLEdBQzlCTCxLQUFLNm1ILGFBQWF0bkcsY0FBYyxjQUFjK0IsU0FFaEQsSUFBTWdtRyxFQUFjLElBQUksRUFBWWdILEVBQVV0dUgsTUFDOUNBLEtBQUs2bUgsYUFBYXVDLFFBQVE5QixFQUFZNEMsZUFDdENscUgsS0FBSzhzSCxlQWVQLFlBQUFwRSxZQUFBLFNBQVk1MUcsRUFBYy9NLEVBQWlCNm9ILEdBQTNDLFdBYUUsWUFieUMsSUFBQUEsV0FBQSxHQUVFLEtBQXZDNXVILEtBQUsyc0gsaUJBQWlCcFIsUUFBUXpvRyxNQUNoQzlTLEtBQUsyc0gsaUJBQWlCL1EsVUFBVXQ2RixPQUFPdGhCLEtBQUsyc0gsaUJBQWlCcFIsUUFBUXpvRyxNQUNqRTlTLEtBQUs2dUgsaUJBQ1AzK0csT0FBTzBnQixhQUFhNXdCLEtBQUs2dUgsZ0JBQ3pCN3VILEtBQUs2dUgsb0JBQWlCdGxILElBR3hCdkosS0FBSzJzSCxpQkFBaUJoc0csTUFBTTgrRixRQUFVLE9BRXhDei9HLEtBQUsyc0gsaUJBQWlCcFIsUUFBUXpvRyxLQUFPQSxFQUNyQzlTLEtBQUsyc0gsaUJBQWlCcHRHLGNBQWMsS0FBS3M5RixVQUFZOTJHLEVBQzdDK00sR0FDTixJQUFLLFVBQ0g5UyxLQUFLMnNILGlCQUFpQi9RLFVBQVUza0YsSUFBSSxXQUNwQyxNQUNGLElBQUssVUFDSGozQixLQUFLMnNILGlCQUFpQi9RLFVBQVUza0YsSUFBSSxXQUNwQyxNQUNGLElBQUssUUFDSGozQixLQUFLMnNILGlCQUFpQi9RLFVBQVUza0YsSUFBSSxTQUdwQzIzRixJQUNGNXVILEtBQUs2dUgsZUFBaUIzK0csT0FBT3FnQixZQUFXLFdBQU0sU0FBS3E4RixpQkFBZ0JnQyxLQU92RSxZQUFBaEMsYUFBQSxXQUNFNXNILEtBQUsyc0gsaUJBQWlCaHNHLE1BQU04K0YsUUFBVSxPQUN0Q3ovRyxLQUFLMnNILGlCQUFpQi9RLFVBQVV0NkYsT0FBT3RoQixLQUFLMnNILGlCQUFpQnBSLFFBQVF6b0csTUFDckU5UyxLQUFLMnNILGlCQUFpQnBSLFFBQVF6b0csS0FBTyxHQUNqQzlTLEtBQUs2dUgsaUJBQ1BqK0YsYUFBYTV3QixLQUFLNnVILGdCQUNsQjd1SCxLQUFLNnVILG9CQUFpQnRsSCxJQWdCMUIsWUFBQTBoSCxtQkFBQSxTQUFtQm40RyxFQUF1Qy9NLEVBQWlCK29ILFFBQUEsSUFBQUEsTUFBQSxJQUNyRTl1SCxLQUFLOHJILGdCQUFnQnZzRyxjQUFjLG9CQUNyQ3ZmLEtBQUs4ckgsZ0JBQWdCaUQsaUJBQWlCLDRCQUE0QnY5RyxTQUFRLFNBQUN3c0csR0FBcUIsT0FBQUEsRUFBSXJCLFFBQVUsUUFFaEgsRUFBU2pPLFVBQVUxdUcsS0FBSzhySCxpQkFFeEIsSUFBTWtELEVBQWlCNXZHLFNBQVN3QixjQUFjLE9BQzlDLEdBQWEsV0FBVDlOLEVBQ0ZrOEcsRUFBZXRPLFVBQVksTUFBTTM2RyxFQUFPLGlFQUNuQyxHQUFhLFdBQVQrTSxHQUFxQmc4RyxFQUFRenVILE9BQVMsRUFBRyxDQUNsRDJ1SCxFQUFldE8sVUFBWSxNQUFNMzZHLEVBQU8sT0FDeEMsSUFBTSxFQUFnQnFaLFNBQVN3QixjQUFjLE9BQzdDLEVBQWNnN0YsVUFBVTNrRixJQUFJLGtCQUM1QjYzRixFQUFRdDlHLFNBQVEsU0FBQXVqQixHQUNkLElBQU1rb0UsRUFBUzc5RSxTQUFTd0IsY0FBYyxVQUN0Q3E4RSxFQUFPeWpCLFVBQVkzckYsRUFBTy8yQixLQUMxQmkvRixFQUFPMmUsVUFBVTNrRixJQUFJLGFBQWMsU0FDbkNnbUUsRUFBTzBmLFFBQVU1bkYsRUFBT20yRixTQUN4QixFQUFjanFHLFlBQVlnOEUsTUFFNUIreEIsRUFBZS90RyxZQUFZLE9BQ1QsWUFBVG5PLElBQ1RrOEcsRUFBZXRPLFVBQVksTUFBUTM2RyxFQUFVLFFBRS9DL0YsS0FBSzhySCxnQkFBZ0I3cUcsWUFBWSt0RyxHQUNqQ2h2SCxLQUFLOHJILGdCQUFnQmxRLFVBQVUza0YsSUFBSSxXQU1yQyxZQUFBbzBGLG9CQUFBLFdBQ0VyckgsS0FBSzhySCxnQkFBZ0JsUSxVQUFVdDZGLE9BQU8sV0FleEMsWUFBQWlxRyxnQkFBQSxTQUFnQnhzRyxFQUFzQmt3RyxFQUE0QkMsUUFBNUIsSUFBQUQsTUFBQSxvQkFBNEIsSUFBQUMsT0FBQSxHQUNoRWx2SCxLQUFLd3JILHFCQUFxQjVQLFVBQVVsOUcsTUFBUSxHQUN6QixnQkFBZnV3SCxFQUNGanZILEtBQUt3ckgscUJBQXFCNVAsVUFBVTNrRixJQUFJLG1CQUNoQixXQUFmZzRGLEdBQ1RqdkgsS0FBS3dySCxxQkFBcUI1UCxVQUFVM2tGLElBQUksZUFHeENqM0IsS0FBSzZySCxjQUFjbHJHLE1BQU04K0YsUUFEdkJ5UCxFQUNpQyxRQUVBLE9BRXJDbHZILEtBQUsyckgsbUJBQW1CMXFHLFlBQVlsQyxHQUNwQy9lLEtBQUt3ckgscUJBQXFCN3FHLE1BQU04K0YsUUFBVSxRQU01QyxZQUFBbUksaUJBQUEsV0FDRSxJQUFNN29HLEVBQVUvZSxLQUFLMnJILG1CQUFtQndELGtCQUN4Q252SCxLQUFLd3JILHFCQUFxQjdxRyxNQUFNOCtGLFFBQVUsT0FDMUN6L0csS0FBSzRySCxvQkFBb0IzcUcsWUFBWWxDLElBVXZDLFlBQUFzUixNQUFBLFNBQU1uRSxHQUFOLGdCQUFNLElBQUFBLE1BQUEsSUFFSjlNLFNBQVNHLGNBQWMsVUFBVW9CLE1BQU04K0YsUUFBVSxPQUNqRHJnRyxTQUFTRyxjQUFjLFFBQVFvQixNQUFNOCtGLFFBQVUsUUFFN0IsS0FBZHZ6RixHQUNGbHNCLEtBQUtpckgsbUJBQW1CLFNBQVUsbUJBQ2xDLEVBQUk4QyxhQUFhN2hHLEVBQVdsc0IsTUFDekJ3QyxNQUFLLFNBQUEyTyxHQUNKLEVBQUs0N0csaUJBQW1CLElBQUksRUFBVTU3RyxFQUFLLEdBQzNDLEVBQUtrOUcsdUJBQXVCLENBQUNsOUcsSUFDN0IsRUFBSzR2RyxnQkFBZ0JwZ0csTUFBTTgrRixRQUFVLFFBQ3JDLEVBQUs0TCxzQkFNRGw2RyxFQUFJMm9HLFlBQVl6NUcsT0FBUyxHQUMzQjZQLE9BQU91NEcsOEJBRVIsU0FBQXhhLEdBQ0Qva0csUUFBUTRPLElBQUltMkYsR0FDWixJQUFNajBCLE9BQTRCendFLElBQWIwa0csRUFBSXZyRyxLQUFxQnVyRyxFQUFNLFlBQVl2aUcsS0FBS0MsTUFBTXNpRyxFQUFJdnJHLE1BQU1vQixNQUFNaUMsUUFBTyxVQUFVMkYsS0FBS0MsTUFBTXNpRyxFQUFJdnJHLE1BQU1vQixNQUFNc0csS0FDdkksRUFBSzZnSCxtQkFBbUIsU0FBVWp4QyxFQUFjLENBQzlDLENBQ0VoOEUsS0FBTSxxQkFDTmt0SCxTQUFVLFdBQ1IsRUFBS2lCLG1CQUNtQixLQUFwQnRqQixTQUFTL2UsUUFDWG1rQyxRQUFRQyxhQUFhLENBQUVrQixLQUFNLGlCQUFtQixnQkFBaUJ2bUIsU0FBUzBGLEtBQUtqakcsUUFBUXU5RixTQUFTL2UsT0FBUSxjQVE1RixLQUFwQitlLFNBQVMvZSxRQUNYbWtDLFFBQVFDLGFBQWEsQ0FBRWtCLEtBQU0saUJBQW1CLGdCQUFpQnZtQixTQUFTMEYsS0FBS2pqRyxRQUFRdTlGLFNBQVMvZSxPQUFRLEtBRTFHOXBGLEtBQUsrckgsc0JBQXNCcHJHLE1BQU04K0YsUUFBVSxRQUMzQ3ovRyxLQUFLaXJILG1CQUFtQixTQUFVLG9CQUVsQyxFQUFJbUQsaUJBQWlCcHVILE1BQU13QyxNQUFLLFNBQUMyTyxHQUsvQixHQUpBLEVBQUtrOUcsdUJBQXVCbDlHLEdBQzVCLEVBQUtrNkcsc0JBR0RuN0csT0FBT20vRyxpQkFDVCxJQUFLLElBQUk1eEgsRUFBSSxFQUFHQSxFQUFJMFQsRUFBSTlRLE9BQVE1QyxJQUM5QixHQUFJMFQsRUFBSTFULEdBQUdxOEcsWUFBWXo1RyxPQUFTLEVBQUcsQ0FDakM2UCxPQUFPdTRHLDJCQUNQLFVBSUwsU0FBQXhhLEdBQ0QsRUFBSzRZLGFBQWFuRyxVQUFZLDhEQUM5QixFQUFLMkssMkJBSWIsRUFsbEJBLEcsbURETkksRUFBTywwQkFDUC8wRyxFQUFVLFFBa0JWZzVHLEVBQXFCLElBQ3JCQyxFQUFrQixLQUFPajVHLEVBQ3pCazVHLEVBQXdCLFNBQ3hCQyxFQUF3QixrREFDeEJDLEVBQTBCLEtBcUIxQkMsSUFBeUIsRUFBSyxJQUMzQiw2QkFBK0Qsa0RBQ2xFLEVBQUcsa0JBQXlDLDJDQUM1QyxFQUFHLDBCQUF5RCxtQ0FDNUQsRUFBRyxrQkFBeUMsNkZBQzVDLEVBQUcsZUFBbUMsa0RBQ3RDLEVBQUcsK0JBQW1FLDJFQUN0RSxHQUNBdDVHLEVBQWdCLElBQUksZUE1QlYsZ0JBQ0ssZ0JBMkJ5Q3M1RyxHQUU1RCxTQUFTQyxFQUFjOXJILEdBQ25CLE9BQVFBLGFBQWlCLGlCQUNyQkEsRUFBTXNHLEtBQUttNEcsU0FBUzs7Ozs7Ozs7Ozs7Ozs7OztHQW1CNUIsU0FBU3NOLEVBQXlCNWtILEdBQzlCLElBQUlpaEIsRUFBWWpoQixFQUFHaWhCLFVBQ25CLE9BQU91akcsRUFBd0IsYUFBZXZqRyxFQUFZLGlCQUU5RCxTQUFTNGpHLEVBQWlDdHhELEdBQ3RDLE1BQU8sQ0FDSDN5RCxNQUFPMnlELEVBQVMzeUQsTUFDaEJra0gsY0FBZSxFQUNmQyxXQTJEbUNDLEVBM0RVenhELEVBQVN3eEQsVUE2RG5EcHBHLE9BQU9xcEcsRUFBa0Iza0gsUUFBUSxJQUFLLFNBNUR6QzRrSCxhQUFjN21ILEtBQUtzSCxPQTBEM0IsSUFBMkNzL0csRUF2RDNDLFNBQVNFLEVBQXFCQyxFQUFhNXhELEdBQ3ZDLE9BQU8sb0JBQVV4K0QsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXF3SCxFQUFjQyxFQUNsQixPQUFPLHNCQUFZdHdILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXk3RCxFQUFTZzJCLFFBQ3RDLEtBQUssRUFHRCxPQUZBNjdCLEVBQWVwbEgsRUFBR2pJLE9BQ2xCc3RILEVBQVlELEVBQWF2c0gsTUFDbEIsQ0FBQyxFQUFjdVMsRUFBY3RYLE9BQU8saUJBQXVDLENBQzFFcXhILFlBQWFBLEVBQ2JHLFdBQVlELEVBQVVsbUgsS0FDdEJvbUgsY0FBZUYsRUFBVXZxSCxRQUN6QjBxSCxhQUFjSCxFQUFVbnBELGlCQU1wRCxTQUFTdXBELEVBQVd6bEgsR0FDaEIsSUFBSTBsSCxFQUFTMWxILEVBQUcwbEgsT0FDaEIsT0FBTyxJQUFJOWEsUUFBUSxDQUNmLGVBQWdCLG1CQUNoQithLE9BQVEsbUJBQ1IsaUJBQWtCRCxJQUcxQixTQUFTRSxFQUFtQkMsRUFBVzdsSCxHQUNuQyxJQUFJOGxILEVBQWU5bEgsRUFBRzhsSCxhQUNsQjNyQyxFQUFVc3JDLEVBQVdJLEdBRXpCLE9BREExckMsRUFBUXV3QixPQUFPLGdCQTZCbkIsU0FBZ0NvYixHQUM1QixPQUFPdkIsRUFBd0IsSUFBTXVCOzs7Ozs7Ozs7Ozs7Ozs7O0dBOUJMQyxDQUF1QkQsSUFDaEQzckMsRUFPWCxTQUFTNnJDLEdBQW1CcmlILEdBQ3hCLE9BQU8sb0JBQVU1TyxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJc0MsRUFDSixPQUFPLHNCQUFZdEMsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhNkwsS0FDN0IsS0FBSyxFQUVELE9BREF0TSxFQUFTMkksRUFBR2pJLFFBQ0Rta0UsUUFBVSxLQUFPN2tFLEVBQU82a0UsT0FBUyxJQUVqQyxDQUFDLEVBQWN2NEQsS0FFbkIsQ0FBQyxFQUFjdE0sVUE2QjFDLFNBQVM0dUgsR0FBMEJKLEVBQVc3bEgsR0FDMUMsSUFBSWttSCxFQUFNbG1ILEVBQUdrbUgsSUFDYixPQUFPLG9CQUFVbnhILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlveEgsRUFBVWhzQyxFQUFTMWlGLEVBQU0wWSxFQUFTb2pELEVBQVU2eUQsRUFDaEQsT0FBTyxzQkFBWXJ4SCxNQUFNLFNBQVVrTCxHQUMvQixPQUFRQSxFQUFHbkksT0FDUCxLQUFLLEVBY0QsT0FiQXF1SCxFQUFXdkIsRUFBeUJpQixHQUNwQzFyQyxFQUFVc3JDLEVBQVdJLEdBQ3JCcHVILEVBQU8sQ0FDSHl1SCxJQUFLQSxFQUNMRyxZQUFhOUIsRUFDYitCLE1BQU9ULEVBQVVTLE1BQ2pCNTNHLFdBQVk0MUcsR0FFaEJuMEcsRUFBVSxDQUNOOU0sT0FBUSxPQUNSODJFLFFBQVNBLEVBQ1QxaUYsS0FBTWdKLEtBQUtzRyxVQUFVdFAsSUFFbEIsQ0FBQyxFQUFhdXVILElBQW1CLFdBQWMsT0FBT3JiLE1BQU13YixFQUFVaDJHLE9BQ2pGLEtBQUssRUFFRCxPQURBb2pELEVBQVd0ekQsRUFBR2xJLFFBQ0E4eUcsR0FDUCxDQUFDLEVBQWF0M0MsRUFBU2cyQixRQURMLENBQUMsRUFBYSxHQUUzQyxLQUFLLEVBUUQsT0FQQTY4QixFQUFnQm5tSCxFQUFHbEksT0FPWixDQUFDLEVBTnNCLENBQzFCbXVILElBQUtFLEVBQWNGLEtBQU9BLEVBQzFCSyxtQkFBb0IsRUFDcEJULGFBQWNNLEVBQWNOLGFBQzVCVSxVQUFXM0IsRUFBaUN1QixFQUFjSSxhQUdsRSxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWF0QixFQUFxQixzQkFBdUIzeEQsSUFDekUsS0FBSyxFQUFHLE1BQU10ekQsRUFBR2xJOzs7Ozs7Ozs7Ozs7Ozs7O0dBdUJqQyxTQUFTMHVILEdBQU1DLEdBQ1gsT0FBTyxJQUFJNXZILFNBQVEsU0FBVUMsR0FDekJ1dUIsV0FBV3Z1QixFQUFTMnZIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5QzVCLElBQUlDLEdBQW9CLG9CQUNwQkMsR0FBYyxHQUtsQixTQUFTQyxLQUNMLElBR0ksSUFBSUMsRUFBZSxJQUFJdG5HLFdBQVcsS0FDbkIxYSxLQUFLNC9GLFFBQVU1L0YsS0FBS2lpSCxVQUMxQnBpQixnQkFBZ0JtaUIsR0FFekJBLEVBQWEsR0FBSyxJQUFPQSxFQUFhLEdBQUssR0FDM0MsSUFBSVosRUFTWixTQUFnQlksR0FJWixPQWpEMkI3bUcsRUE4Q1c2bUcsRUE3QzVCL3BILEtBQUtLLE9BQU9DLGFBQWFoSSxNQUFNK0gsT0FBUSxtQkFBUzZpQixLQUMvQzVmLFFBQVEsTUFBTyxLQUFLQSxRQUFRLE1BQU8sTUErQzdCNmdFLE9BQU8sRUFBRyxJQWpEL0IsSUFBK0JqaEQ7Ozs7Ozs7Ozs7Ozs7Ozs7R0FvQ2IwSCxDQUFPbS9GLEdBQ2pCLE9BQU9ILEdBQWtCemhILEtBQUtnaEgsR0FBT0EsRUFBTVUsR0FFL0MsTUFBTzVtSCxHQUVILE9BQU80bUgsSUEyQmYsSUEwekIrQjE5RyxHQTF6QjNCODlHLEdBQWdCLGtDQUNoQkMsR0FBbUIsRUFDbkJDLEdBQW9CLCtCQUNwQkMsR0FBWSxLQUNoQixTQUFTQyxLQWNMLE9BYktELEtBQ0RBLEdBQVksaUJBQU9ILEdBQWVDLElBQWtCLFNBQVVJLEdBTTFELE9BQVFBLEVBQVVwMUcsWUFDZCxLQUFLLEVBQ0RvMUcsRUFBVXowRyxrQkFBa0JzMEcsU0FJckNDLEdBR1gsU0FBU2wrRyxHQUFJNDhHLEVBQVdweUgsR0FDcEIsT0FBTyxvQkFBVXNCLFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUloQixFQUFLaWUsRUFBSXMxRyxFQUNiLE9BQU8sc0JBQVl2eUgsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELE9BREEvRCxFQUFNd3pILEdBQU8xQixHQUNOLENBQUMsRUFBYXVCLE1BQ3pCLEtBQUssRUFHRCxPQUZBcDFHLEVBQUtoUyxFQUFHakksT0FFRCxDQUFDLEdBRFJ1dkgsRUFBS3QxRyxFQUFHRSxZQUFZZzFHLEdBQW1CLGNBQ2Z4MEcsWUFBWXcwRyxJQUFtQmp6RixJQUFJeGdDLEVBQU9NLElBQ3RFLEtBQUssRUFFRCxPQURBaU0sRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhdXZILEVBQUd2a0gsVUFDNUIsS0FBSyxFQUVELE9BREEvQyxFQUFHakksT0FDSSxDQUFDLEVBQWN0RSxVQU0xQyxTQUFTNGlCLEdBQU93dkcsR0FDWixPQUFPLG9CQUFVOXdILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUloQixFQUFLaWUsRUFBSXMxRyxFQUNiLE9BQU8sc0JBQVl2eUgsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELE9BREEvRCxFQUFNd3pILEdBQU8xQixHQUNOLENBQUMsRUFBYXVCLE1BQ3pCLEtBQUssRUFHRCxPQUZBcDFHLEVBQUtoUyxFQUFHakksT0FFRCxDQUFDLEdBRFJ1dkgsRUFBS3QxRyxFQUFHRSxZQUFZZzFHLEdBQW1CLGNBQ2Z4MEcsWUFBWXcwRyxJQUFtQmo5RyxPQUFPbFcsSUFDbEUsS0FBSyxFQUVELE9BREFpTSxFQUFHakksT0FDSSxDQUFDLEVBQWF1dkgsRUFBR3ZrSCxVQUM1QixLQUFLLEVBRUQsT0FEQS9DLEVBQUdqSSxPQUNJLENBQUMsVUFXNUIsU0FBU2dLLEdBQU84akgsRUFBVzJCLEdBQ3ZCLE9BQU8sb0JBQVV6eUgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSWhCLEVBQUtpZSxFQUFJczFHLEVBQUk5MUcsRUFBT2kyRyxFQUFVeG1GLEVBQ2xDLE9BQU8sc0JBQVlsc0MsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELE9BREEvRCxFQUFNd3pILEdBQU8xQixHQUNOLENBQUMsRUFBYXVCLE1BQ3pCLEtBQUssRUFJRCxPQUhBcDFHLEVBQUtoUyxFQUFHakksT0FDUnV2SCxFQUFLdDFHLEVBQUdFLFlBQVlnMUcsR0FBbUIsYUFFaEMsQ0FBQyxHQURSMTFHLEVBQVE4MUcsRUFBRzUwRyxZQUFZdzBHLEtBQ0k3ekgsSUFBSVUsSUFDbkMsS0FBSyxFQUdELE9BRkEwekgsRUFBV3puSCxFQUFHakksWUFFS3VHLEtBRG5CMmlDLEVBQVd1bUYsRUFBU0MsSUFDa0IsQ0FBQyxFQUFhLEdBQzdDLENBQUMsRUFBYWoyRyxFQUFNdkgsT0FBT2xXLElBQ3RDLEtBQUssRUFFRCxPQURBaU0sRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXlaLEVBQU15aUIsSUFBSWdOLEVBQVVsdEMsSUFDakQsS0FBSyxFQUNEaU0sRUFBR2pJLE9BQ0hpSSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXd2SCxFQUFHdmtILFVBQ2hDLEtBQUssRUFFRCxPQURBL0MsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFja3BDLFVBSzFDLFNBQVNzbUYsR0FBTzFCLEdBQ1osT0FBT0EsRUFBVWo1RyxRQUFVLElBQU1pNUcsRUFBVVM7Ozs7Ozs7Ozs7Ozs7Ozs7R0F1Qi9DLFNBQVNvQixHQUFxQjdCLEdBQzFCLE9BQU8sb0JBQVU5d0gsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSTR5SCxFQUFxQkMsRUFBbUI1bkgsRUFDNUMsT0FBTyxzQkFBWWpMLE1BQU0sU0FBVWtMLEdBQy9CLE9BQVFBLEVBQUduSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYWlLLEdBQU84akgsR0FBVyxTQUFVZ0MsR0FDakQsSUFBSUQsRUF5QjVCLFNBQXlDQyxHQUtyQyxPQUFPQyxHQUpLRCxHQUFZLENBQ3BCM0IsSUFBS1csS0FDTE4sbUJBQW9CLElBNUJvQndCLENBQWdDRixHQUNwREcsRUFzQzVCLFNBQXdDbkMsRUFBVytCLEdBQy9DLEdBQTZDLElBQXpDQSxFQUFrQnJCLG1CQUE0QyxDQUM5RCxJQUFLeG5ILFVBQVVrcEgsT0FBUSxDQUVuQixJQUFJQyxFQUErQnB4SCxRQUFRRSxPQUFPb1UsRUFBY3RYLE9BQU8sZ0JBQ3ZFLE1BQU8sQ0FDSDh6SCxrQkFBbUJBLEVBQ25CRCxvQkFBcUJPLEdBSTdCLElBQUlDLEVBQWtCLENBQ2xCakMsSUFBSzBCLEVBQWtCMUIsSUFDdkJLLG1CQUFvQixFQUNwQjZCLGlCQUFrQmhxSCxLQUFLc0gsT0FFdkJpaUgsRUFjWixTQUE4QjlCLEVBQVcrQixHQUNyQyxPQUFPLG9CQUFVN3lILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlzekgsRUFBNkI3K0csRUFDakMsT0FBTyxzQkFBWXpVLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYXl0SCxHQUEwQkosRUFBVytCLElBQzlELEtBQUssRUFFRCxPQURBUyxFQUE4QnJvSCxFQUFHakksT0FDMUIsQ0FBQyxFQUFja1IsR0FBSTQ4RyxFQUFXd0MsSUFDekMsS0FBSyxFQUVELE9BQU0xRCxFQURObjdHLEVBQU14SixFQUFHakksU0FDc0MsTUFBbkJ5UixFQUFJODdHLFdBR3pCLENBQUMsRUFBYWp2RyxHQUFPd3ZHLElBSGdDLENBQUMsRUFBYSxHQUk5RSxLQUFLLEVBSUQsT0FEQTdsSCxFQUFHakksT0FDSSxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUVMLE1BQU8sQ0FBQyxFQUFha1IsR0FBSTQ4RyxFQUFXLENBQzVCSyxJQUFLMEIsRUFBa0IxQixJQUN2QkssbUJBQW9CLEtBRTVCLEtBQUssRUFFRHZtSCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU0wUixFQUNkLEtBQUssRUFBRyxNQUFPLENBQUMsVUEvQ0U4K0csQ0FBcUJ6QyxFQUFXc0MsR0FDMUQsTUFBTyxDQUFFUCxrQkFBbUJPLEVBQWlCUixvQkFBcUJBLEdBRWpFLE9BQTZDLElBQXpDQyxFQUFrQnJCLG1CQUNoQixDQUNIcUIsa0JBQW1CQSxFQUNuQkQsb0JBQXFCWSxHQUF5QjFDLElBSTNDLENBQUUrQixrQkFBbUJBLEdBaEVXWSxDQUErQjNDLEVBQVcrQixHQUVqRSxPQURBRCxFQUFzQkssRUFBaUJMLG9CQUNoQ0ssRUFBaUJKLHNCQUVoQyxLQUFLLEVBRUQsT0FEQUEsRUFBb0IzbkgsRUFBR2xJLFFBQ0NtdUgsTUFBUVUsR0FBcUIsQ0FBQyxFQUFhLElBQ25FNW1ILEVBQUssR0FDRSxDQUFDLEVBQWEybkgsSUFDekIsS0FBSyxFQUVMLE1BQU8sQ0FBQyxHQUFlM25ILEVBQUc0bkgsa0JBQW9CM25ILEVBQUdsSSxPQUFRaUksSUFDekQsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFjLENBQ3RCNG5ILGtCQUFtQkEsRUFDbkJELG9CQUFxQkEsV0E2RjdDLFNBQVNZLEdBQXlCMUMsR0FDOUIsT0FBTyxvQkFBVTl3SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJdzZDLEVBQU92dkMsRUFBSTRuSCxFQUFtQkQsRUFDbEMsT0FBTyxzQkFBWTV5SCxNQUFNLFNBQVVrTCxHQUMvQixPQUFRQSxFQUFHbkksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEyd0gsR0FBMEI1QyxJQUN2RCxLQUFLLEVBQ0R0MkUsRUFBUXR2QyxFQUFHbEksT0FDWGtJLEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUNELE9BQW1DLElBQTdCeTNDLEVBQU1nM0UsbUJBQW9ELENBQUMsRUFBYSxHQUV2RSxDQUFDLEVBQWFFLEdBQU0sTUFDL0IsS0FBSyxFQUdELE9BREF4bUgsRUFBR2xJLE9BQ0ksQ0FBQyxFQUFhMHdILEdBQTBCNUMsSUFDbkQsS0FBSyxFQUVELE9BREF0MkUsRUFBUXR2QyxFQUFHbEksT0FDSixDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUNELE9BQW1DLElBQTdCdzNDLEVBQU1nM0UsbUJBQW9ELENBQUMsRUFBYSxHQUN2RSxDQUFDLEVBQWFtQixHQUFxQjdCLElBQzlDLEtBQUssRUFFRCxPQURBN2xILEVBQUtDLEVBQUdsSSxPQUFRNnZILEVBQW9CNW5ILEVBQUc0bkgsbUJBQW1CRCxFQUFzQjNuSCxFQUFHMm5ILHFCQUV4RSxDQUFDLEVBQWNBLEdBSWYsQ0FBQyxFQUFjQyxHQUU5QixLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWNyNEUsVUFhOUMsU0FBU2s1RSxHQUEwQjVDLEdBQy9CLE9BQU85akgsR0FBTzhqSCxHQUFXLFNBQVVnQyxHQUMvQixJQUFLQSxFQUNELE1BQU16OEcsRUFBY3RYLE9BQU8sMEJBRS9CLE9BQU9nMEgsR0FBcUJELE1BR3BDLFNBQVNDLEdBQXFCdjRFLEdBQzFCLE9BU2lELEtBRGJxNEUsRUFSRHI0RSxHQVNUZzNFLG9CQUN0QnFCLEVBQWtCUSxpQkFBbUIvRCxFQUFxQmptSCxLQUFLc0gsTUFUeEQsQ0FDSHdnSCxJQUFLMzJFLEVBQU0yMkUsSUFDWEssbUJBQW9CLEdBR3JCaDNFLEVBRVgsSUFBd0NxNEU7Ozs7Ozs7Ozs7Ozs7Ozs7SUFxQnhDLFNBQVNjLEdBQXlCMW9ILEVBQUk0bkgsR0FDbEMsSUFBSS9CLEVBQVk3bEgsRUFBRzZsSCxVQUFXOEMsRUFBeUIzb0gsRUFBRzJvSCx1QkFDMUQsT0FBTyxvQkFBVTV6SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJb3hILEVBQVVoc0MsRUFBU3l1QyxFQUFnQm54SCxFQUFNMFksRUFBU29qRCxFQUFVNnlELEVBQ2hFLE9BQU8sc0JBQVlyeEgsTUFBTSxTQUFVa0wsR0FDL0IsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQW1CRCxPQWxCQXF1SCxFQWlDcEIsU0FBc0NOLEVBQVc3bEgsR0FDN0MsSUFBSWttSCxFQUFNbG1ILEVBQUdrbUgsSUFDYixPQUFPdEIsRUFBeUJpQixHQUFhLElBQU1LLEVBQU07Ozs7Ozs7Ozs7Ozs7Ozs7R0FuQzlCMkMsQ0FBNkJoRCxFQUFXK0IsR0FDbkR6dEMsRUFBVXlyQyxFQUFtQkMsRUFBVytCLElBQ3hDZ0IsRUFBaUJELEVBQXVCdi9HLGFBQWEsQ0FDakRuRixVQUFVLE1BR1ZrMkUsRUFBUXV3QixPQUFPLG9CQUFxQmtlLEVBQWVyNkcseUJBRXZEOVcsRUFBTyxDQUNIcXhILGFBQWMsQ0FDVnA2RyxXQUFZNDFHLElBR3BCbjBHLEVBQVUsQ0FDTjlNLE9BQVEsT0FDUjgyRSxRQUFTQSxFQUNUMWlGLEtBQU1nSixLQUFLc0csVUFBVXRQLElBRWxCLENBQUMsRUFBYXV1SCxJQUFtQixXQUFjLE9BQU9yYixNQUFNd2IsRUFBVWgyRyxPQUNqRixLQUFLLEVBRUQsT0FEQW9qRCxFQUFXdHpELEVBQUdsSSxRQUNBOHlHLEdBQ1AsQ0FBQyxFQUFhdDNDLEVBQVNnMkIsUUFETCxDQUFDLEVBQWEsR0FFM0MsS0FBSyxFQUdELE9BRkE2OEIsRUFBZ0JubUgsRUFBR2xJLE9BRVosQ0FBQyxFQURhOHNILEVBQWlDdUIsSUFFMUQsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhbEIsRUFBcUIsc0JBQXVCM3hELElBQ3pFLEtBQUssRUFBRyxNQUFNdHpELEVBQUdsSSxjQWdDakMsU0FBU2d4SCxHQUFpQkMsRUFBY3p2QyxHQUVwQyxZQURxQixJQUFqQkEsSUFBMkJBLEdBQWUsR0FDdkMsb0JBQVV4a0YsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSWswSCxFQUFjMTVFLEVBQWtCdnZDLEVBQ3BDLE9BQU8sc0JBQVlqTCxNQUFNLFNBQVVrTCxHQUMvQixPQUFRQSxFQUFHbkksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFpSyxHQUFPaW5ILEVBQWFuRCxXQUFXLFNBQVVnQyxHQUM5RCxJQUFLcUIsR0FBa0JyQixHQUNuQixNQUFNejhHLEVBQWN0WCxPQUFPLGtCQUUvQixJQUFJcTFILEVBQWV0QixFQUFTckIsVUFDNUIsSUFBS2p0QyxHQXlJN0IsU0FBMEJpdEMsR0FDdEIsT0FBb0MsSUFBNUJBLEVBQVUxQixnQkFHdEIsU0FBNEIwQixHQUN4QixJQUFJOWdILEVBQU10SCxLQUFLc0gsTUFDZixPQUFRQSxFQUFNOGdILEVBQVV2QixjQUNwQnVCLEVBQVV2QixhQUFldUIsRUFBVXpCLFVBQVlyL0csRUFBTSsrRyxFQUxwRDJFLENBQW1CNUMsR0EzSWlCNkMsQ0FBaUJGLEdBRWxDLE9BQU90QixFQUVOLEdBQW1DLElBQS9Cc0IsRUFBYXJFLGNBR2xCLE9BREFtRSxFQW9DNUIsU0FBbUNELEVBQWN6dkMsR0FDN0MsT0FBTyxvQkFBVXhrRixVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJdzZDLEVBQU9pM0UsRUFDWCxPQUFPLHNCQUFZenhILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXd4SCxHQUF1Qk4sRUFBYW5ELFlBQ2pFLEtBQUssRUFDRHQyRSxFQUFRdnZDLEVBQUdqSSxPQUNYaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQ0QsT0FBd0MsSUFBbEN5M0MsRUFBTWkzRSxVQUFVMUIsY0FBK0MsQ0FBQyxFQUFhLEdBRTVFLENBQUMsRUFBYTJCLEdBQU0sTUFDL0IsS0FBSyxFQUdELE9BREF6bUgsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhdXhILEdBQXVCTixFQUFhbkQsWUFDN0QsS0FBSyxFQUVELE9BREF0MkUsRUFBUXZ2QyxFQUFHakksT0FDSixDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUVELE9BQWdDLEtBRGhDeXVILEVBQVlqM0UsRUFBTWkzRSxXQUNKMUIsY0FFSCxDQUFDLEVBQWNpRSxHQUFpQkMsRUFBY3p2QyxJQUc5QyxDQUFDLEVBQWNpdEMsVUEvREgrQyxDQUEwQlAsRUFBY3p2QyxHQUNoRHN1QyxFQUlQLElBQUs5b0gsVUFBVWtwSCxPQUNYLE1BQU03OEcsRUFBY3RYLE9BQU8sZUFFL0IsSUFBSXEwSCxFQXFJaEMsU0FBNkNOLEdBQ3pDLElBQUkyQixFQUFzQixDQUN0QjFFLGNBQWUsRUFDZjJFLFlBQWFyckgsS0FBS3NILE9BRXRCLE9BQU8sbUJBQVMsbUJBQVMsR0FBSW1pSCxHQUFXLENBQUVyQixVQUFXZ0QsSUExSVBFLENBQW9DN0IsR0FFMUQsT0FEQW9CLEVBZ0Y1QixTQUFrQ0QsRUFBY3BCLEdBQzVDLE9BQU8sb0JBQVU3eUgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXl4SCxFQUFxQ2g5RyxFQUFLbWdILEVBQzlDLE9BQU8sc0JBQVk1MEgsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVELE9BREFrSSxFQUFHaEksS0FBS1EsS0FBSyxDQUFDLEVBQUcsRUFBRyxDQUFFLElBQ2YsQ0FBQyxFQUFha3dILEdBQXlCTSxFQUFjcEIsSUFDaEUsS0FBSyxFQUdELE9BRkFwQixFQUFZeG1ILEVBQUdqSSxPQUNmNHhILEVBQTJCLG1CQUFTLG1CQUFTLEdBQUkvQixHQUFvQixDQUFFcEIsVUFBV0EsSUFDM0UsQ0FBQyxFQUFhdjlHLEdBQUkrL0csRUFBYW5ELFVBQVc4RCxJQUNyRCxLQUFLLEVBRUQsT0FEQTNwSCxFQUFHakksT0FDSSxDQUFDLEVBQWN5dUgsR0FDMUIsS0FBSyxFQUVELE9BQU03QixFQURObjdHLEVBQU14SixFQUFHakksU0FDdUMsTUFBbkJ5UixFQUFJODdHLFlBQXlDLE1BQW5COTdHLEVBQUk4N0csV0FBNkIsQ0FBQyxFQUFhLEdBRy9GLENBQUMsRUFBYWp2RyxHQUFPMnlHLEVBQWFuRCxZQUM3QyxLQUFLLEVBSUQsT0FEQTdsSCxFQUFHakksT0FDSSxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUVELE9BREE0eEgsRUFBMkIsbUJBQVMsbUJBQVMsR0FBSS9CLEdBQW9CLENBQUVwQixVQUFXLENBQUUxQixjQUFlLEtBQzVGLENBQUMsRUFBYTc3RyxHQUFJKy9HLEVBQWFuRCxVQUFXOEQsSUFDckQsS0FBSyxFQUNEM3BILEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTTBSLEVBQ2QsS0FBSyxFQUFHLE1BQU8sQ0FBQyxVQWpIV29nSCxDQUF5QlosRUFBY2IsR0FDL0NBLE1BR25CLEtBQUssRUFFRCxPQURBNTRFLEVBQVF0dkMsRUFBR2xJLE9BQ05reEgsRUFDRSxDQUFDLEVBQWFBLEdBREssQ0FBQyxFQUFhLEdBRTVDLEtBQUssRUFFRCxPQURBanBILEVBQUtDLEVBQUdsSSxPQUNELENBQUMsRUFBYSxHQUN6QixLQUFLLEVBQ0RpSSxFQUFLdXZDLEVBQU1pM0UsVUFDWHZtSCxFQUFHbkksTUFBUSxFQUNmLEtBQUssRUFFRCxNQUFPLENBQUMsRUFESWtJLFVBcURoQyxTQUFTc3BILEdBQXVCekQsR0FDNUIsT0FBTzlqSCxHQUFPOGpILEdBQVcsU0FBVWdDLEdBQy9CLElBQUtxQixHQUFrQnJCLEdBQ25CLE1BQU16OEcsRUFBY3RYLE9BQU8sa0JBRS9CLElBa0U2QjB5SCxFQWxFekIyQyxFQUFldEIsRUFBU3JCLFVBQzVCLE9Ba0VnQyxLQURIQSxFQWpFRzJDLEdBa0VsQnJFLGVBQ2QwQixFQUFVaUQsWUFBY3BGLEVBQXFCam1ILEtBQUtzSCxNQWxFdkMsbUJBQVMsbUJBQVMsR0FBSW1pSCxHQUFXLENBQUVyQixVQUFXLENBQUUxQixjQUFlLEtBRW5FK0MsS0F5Q2YsU0FBU3FCLEdBQWtCdEIsR0FDdkIsWUFBOEJ0cEgsSUFBdEJzcEgsR0FDcUMsSUFBekNBLEVBQWtCckIsbUJBK0YxQixTQUFTc0QsR0FBaUNoRSxHQUN0QyxPQUFPLG9CQUFVOXdILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUk0eUgsRUFDSixPQUFPLHNCQUFZNXlILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYTR2SCxHQUFxQjdCLElBQ2xELEtBQUssRUFFRCxPQURBOEIsRUFBdUIzbkgsRUFBR2pJLE9BQVE0dkgscUJBRzNCLENBQUMsRUFBYUEsR0FGWSxDQUFDLEVBQWEsR0FHbkQsS0FBSyxFQUVEM25ILEVBQUdqSSxPQUNIaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7O0dBc0JoQyxTQUFTZ3lILEdBQTBCakUsRUFBVytCLEdBQzFDLE9BQU8sb0JBQVU3eUgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSW94SCxFQUFVaHNDLEVBQVNocUUsRUFBU29qRCxFQUNoQyxPQUFPLHNCQUFZeCtELE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFPRCxPQU5BcXVILEVBaUJwQixTQUEyQk4sRUFBVzdsSCxHQUNsQyxJQUFJa21ILEVBQU1sbUgsRUFBR2ttSCxJQUNiLE9BQU90QixFQUF5QmlCLEdBQWEsSUFBTUs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FuQnhCNkQsQ0FBa0JsRSxFQUFXK0IsR0FDeEN6dEMsRUFBVXlyQyxFQUFtQkMsRUFBVytCLEdBQ3hDejNHLEVBQVUsQ0FDTjlNLE9BQVEsU0FDUjgyRSxRQUFTQSxHQUVOLENBQUMsRUFBYTZyQyxJQUFtQixXQUFjLE9BQU9yYixNQUFNd2IsRUFBVWgyRyxPQUNqRixLQUFLLEVBRUQsT0FEQW9qRCxFQUFXdnpELEVBQUdqSSxRQUNDOHlHLEdBQVcsQ0FBQyxFQUFhLEdBQ2pDLENBQUMsRUFBYXFhLEVBQXFCLHNCQUF1QjN4RCxJQUNyRSxLQUFLLEVBQUcsTUFBTXZ6RCxFQUFHakksT0FDakIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxVQW1IaEMsU0FBU2l5SCxHQUFxQkMsR0FDMUIsT0FBTzcrRyxFQUFjdFgsT0FBTyw0QkFBNkQsQ0FDckZtMkgsVUFBV0E7Ozs7Ozs7Ozs7Ozs7Ozs7SUFvQlkvZ0gsR0FzQlQsS0FwQlRxQixTQUFTdUQsa0JBQWtCLElBQUksWUFEaEIsaUJBQzZDLFNBQVV2RixHQUMzRSxJQUFJOEUsRUFBTTlFLEVBQVV1QyxZQUFZLE9BQU8xQixlQUluQzQvRyxFQUFlLENBQ2ZuRDs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFsRVosU0FBMEJ4NEcsR0FDdEIsSUFBSTdELEVBQUt4SixFQUNULElBQUtxTixJQUFRQSxFQUFJaEUsUUFDYixNQUFNMmdILEdBQXFCLHFCQUUvQixJQUFLMzhHLEVBQUl0YSxLQUNMLE1BQU1pM0gsR0FBcUIsWUFRL0IsSUFDSSxJQUFLLElBQUlFLEVBQWUsbUJBTlgsQ0FDYixZQUNBLFNBQ0EsVUFHOENDLEVBQWlCRCxFQUFhL3lILFFBQVNnekgsRUFBZTd5SCxLQUFNNnlILEVBQWlCRCxFQUFhL3lILE9BQVEsQ0FDNUksSUFBSWl6SCxFQUFVRCxFQUFlMTJILE1BQzdCLElBQUs0WixFQUFJaEUsUUFBUStnSCxHQUNiLE1BQU1KLEdBQXFCSSxJQUl2QyxNQUFPdGdILEdBQVNOLEVBQU0sQ0FBRTNRLE1BQU9pUixHQUMvQixRQUNJLElBQ1FxZ0gsSUFBbUJBLEVBQWU3eUgsT0FBUzBJLEVBQUtrcUgsRUFBYW5nSCxTQUFTL0osRUFBR3JOLEtBQUt1M0gsR0FFdEYsUUFBVSxHQUFJMWdILEVBQUssTUFBTUEsRUFBSTNRLE9BRWpDLE1BQU8sQ0FDSCtULFFBQVNTLEVBQUl0YSxLQUNia3VCLFVBQVc1VCxFQUFJaEUsUUFBUTRYLFVBQ3ZCeWtHLE9BQVFyNEcsRUFBSWhFLFFBQVFxOEcsT0FDcEJZLE1BQU9qNUcsRUFBSWhFLFFBQVFpOUcsT0E4QkgrRCxDQUFpQmg5RyxHQUk3QnM3Ryx1QkFIeUJwZ0gsRUFBVXVDLFlBQVksb0JBS25ELE1BQU8sQ0FDSHVDLElBQUtBLEVBQ0xpOUcsTUFBTzs7Ozs7Ozs7Ozs7Ozs7OztHQUFjLE9BcFFqQyxTQUFldEIsR0FDWCxPQUFPLG9CQUFVajBILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlpTCxFQUFJNG5ILEVBQW1CRCxFQUMzQixPQUFPLHNCQUFZNXlILE1BQU0sU0FBVWtMLEdBQy9CLE9BQVFBLEVBQUduSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYTR2SCxHQUFxQnNCLEVBQWFuRCxZQUMvRCxLQUFLLEVBVUQsT0FUQTdsSCxFQUFLQyxFQUFHbEksT0FBUTZ2SCxFQUFvQjVuSCxFQUFHNG5ILG1CQUFtQkQsRUFBc0IzbkgsRUFBRzJuSCxxQkFFL0VBLEVBQW9COW9ILE1BQU1aLFFBQVFwRixPQUtsQ2t3SCxHQUFpQkMsR0FBY25xSCxNQUFNWixRQUFRcEYsT0FFMUMsQ0FBQyxFQUFjK3VILEVBQWtCMUI7Ozs7Ozs7Ozs7Ozs7Ozs7R0FvUHBCb0UsQ0FBTXRCLElBQ2xDcDRELFNBQVUsU0FBVTJvQixHQUNoQixPQWhPaEIsU0FBa0J5dkMsRUFBY3p2QyxHQUU1QixZQURxQixJQUFqQkEsSUFBMkJBLEdBQWUsR0FDdkMsb0JBQVV4a0YsVUFBTSxPQUFRLEdBQVEsV0FFbkMsT0FBTyxzQkFBWUEsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhK3hILEdBQWlDYixFQUFhbkQsWUFDM0UsS0FBSyxFQUVELE9BREE3bEgsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhZ3hILEdBQWlCQyxFQUFjenZDLElBQ3hELEtBQUssRUFFRCxNQUFPLENBQUMsRUFESXY1RSxFQUFHakksT0FDaUI2SSxjQW9ON0Jnd0QsQ0FBU280RCxFQUFjenZDLElBRWxDdHZFLE9BQVEsV0FBYyxPQWhJbEMsU0FBNEIrK0csR0FDeEIsT0FBTyxvQkFBVWowSCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJOHdILEVBQVd0MkUsRUFDZixPQUFPLHNCQUFZeDZDLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxNQUFPLENBQUMsRUFBYWlLLEdBRHJCOGpILEVBQVltRCxFQUFhbkQsV0FDYyxTQUFVZ0MsR0FDekMsSUFBSUEsR0FBNEMsSUFBaENBLEVBQVN0QixtQkFJekIsT0FBT3NCLE1BRW5CLEtBQUssRUFFRCxLQURBdDRFLEVBQVF2dkMsRUFBR2pJLFFBQ0MsTUFBTyxDQUFDLEVBQWEsR0FDakMsR0FBbUMsSUFBN0J3M0MsRUFBTWczRSxtQkFBNkMsTUFBTyxDQUFDLEVBQWEsR0FFOUUsTUFBTW43RyxFQUFjdFgsT0FBTywrQkFDL0IsS0FBSyxFQUNELEdBQW1DLElBQTdCeTdDLEVBQU1nM0UsbUJBQTJDLE1BQU8sQ0FBQyxFQUFhLEdBQzVFLEdBQU14bkgsVUFBVWtwSCxPQUFRLE1BQU8sQ0FBQyxFQUFhLEdBQzdDLE1BQU03OEcsRUFBY3RYLE9BQU8sZUFDL0IsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhZzJILEdBQTBCakUsRUFBV3QyRSxJQUNsRSxLQUFLLEVBRUQsT0FEQXZ2QyxFQUFHakksT0FDSSxDQUFDLEVBQWFzZSxHQUFPd3ZHLElBQ2hDLEtBQUssRUFDRDdsSCxFQUFHakksT0FDSGlJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxVQWlHU3l5SCxDQUFtQnZCLE9BRXJELFdBQ0g5L0csR0FBU29FLGdCQUFnQixFQUFNakM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FFeG5DbkMsSUFLSW0vRyxHQVVBQyxHQTBVQSxHQXpWQUMsR0FBcUIsZ0JBRXJCQyxHQUFhLGNBQ2JDLEdBQWEsU0FDYkMsR0FBVywyQ0FpU2YsU0FBU0MsR0FBaUJDLEVBQTBCQyxFQUFlQyxHQUUvRCxJQUFJQyxFQUFXLFdBRVgsSUFEQSxJQUFJQyxFQUFRLEdBQ0h6ckgsRUFBSyxFQUFHQSxFQUFLdkssVUFBVUMsT0FBUXNLLElBQ3BDeXJILEVBQU16ckgsR0FBTXZLLFVBQVV1SyxHQUcxQnVGLE9BQU8rbEgsR0FBZXh5SCxLQUFLckQsWUFTL0IsT0FOSThQLE9BQU9nbUgsSUFDNkIsbUJBQTdCaG1ILE9BQU9nbUgsS0FFZEMsRUFBV2ptSCxPQUFPZ21ILElBRXRCaG1ILE9BQU9nbUgsR0F6RlgsU0FBa0JDLEVBQVVILEdBQ3hCLE9BQU8sU0FBVXJMLEVBQVMwTCxFQUFrQkMsR0FFeEMsR0FBSTNMLElBQVk4SyxHQUFZYyxNQUFPLENBQy9CLElBQUlDLEVBQWtDLEdBR3RDLEdBQUlGLEdBQWNBLEVBQW9CLFFBQUcsQ0FDckMsSUFBSUcsRUFBZUgsRUFBb0IsUUFFbEN6MkgsTUFBTW9ILFFBQVF3dkgsS0FDZkEsRUFBZSxDQUFDQSxJQUVwQixJQUFLLElBQUk5ckgsRUFBSyxFQUFHK3JILEVBQWlCRCxFQUFjOXJILEVBQUsrckgsRUFBZXIySCxPQUFRc0ssSUFBTSxDQUM5RSxJQUFJZ3NILEVBQVdELEVBQWUvckgsR0FDMUJpc0gsRUFBd0JaLEVBQXlCVyxHQUVyRCxJQUFJQyxFQUdDLENBSURKLEVBQWtDLEdBQ2xDLE1BUEFBLEVBQWdDL3lILEtBQUttekgsSUFjakQsR0FBK0MsSUFBM0NKLEVBQWdDbjJILE9BQ2hDLElBQUssSUFBSTRLLEVBQUssRUFBR0MsRUFBSy9NLE9BQU9rWCxPQUFPMmdILEdBQTJCL3FILEVBQUtDLEVBQUc3SyxPQUFRNEssSUFBTSxDQUNqRixJQUFJNHJILEVBQVkzckgsRUFBR0QsR0FDbkJ1ckgsRUFBZ0MveUgsS0FBS296SCxHQUs3QzkwSCxRQUFRdVQsSUFBSWtoSCxHQUVQaDBILE1BQUssV0FDTixPQUFPMnpILEVBQVNWLEdBQVljLE1BQU9GLEVBQWtCQyxHQUFjLE9BRWxFeHNILE9BQU0sU0FBVXRKLEdBQUssT0FBTzBJLFFBQVFwRixNQUFNdEQsV0FFOUMsR0FBSW1xSCxJQUFZOEssR0FBWXFCLE9BQVEsRUFDSGQsRUFBeUJLLElBQ3ZEdDBILFFBQVFDLFdBRVBRLE1BQUssV0FDTjJ6SCxFQUFTVixHQUFZcUIsT0FBUVQsRUFBa0JDLE1BRTlDeHNILE9BQU0sU0FBVXRKLEdBQUssT0FBTzBJLFFBQVFwRixNQUFNdEQsV0FNL0MyMUgsRUFBU1YsR0FBWXNCLElBQUtWLElBNkJQVyxDQUFTYixFQUFVSCxHQUN2QyxDQUNIRyxTQUFVQSxFQUNWYyxZQUFhL21ILE9BQU9nbUgsS0FsVDVCLFNBQVdULEdBQ1BBLEVBQW1CLE1BQUksUUFDdkJBLEVBQWlCLElBQUksTUFDckJBLEVBQW9CLE9BQUksU0FINUIsQ0FJR0EsS0FBZ0JBLEdBQWMsS0FNakMsU0FBV0MsR0FDUEEsRUFBNEIsaUJBQUksbUJBQ2hDQSxFQUF1QixZQUFJLGNBQzNCQSxFQUEyQixnQkFBSSxrQkFDL0JBLEVBQTBCLGVBQUksaUJBQzlCQSxFQUE2QixrQkFBSSxvQkFDakNBLEVBQXFCLFVBQUksWUFDekJBLEVBQXlCLGNBQUksZ0JBQzdCQSxFQUFpQixNQUFJLFFBQ3JCQSxFQUFxQixVQUFJLFlBQ3pCQSxFQUFvQixTQUFJLFdBQ3hCQSxFQUFrQixPQUFJLFNBQ3RCQSxFQUE0QixpQkFBSSxtQkFDaENBLEVBQXVCLFlBQUksY0FDM0JBLEVBQWtCLE9BQUksU0FDdEJBLEVBQTBCLGVBQUksaUJBQzlCQSxFQUErQixvQkFBSSxzQkFDbkNBLEVBQWlCLE1BQUksUUFDckJBLEVBQW1CLFFBQUksVUFDdkJBLEVBQTJCLGdCQUFJLGtCQUMvQkEsRUFBcUIsVUFBSSxZQUN6QkEsRUFBMEIsZUFBSSxpQkFDOUJBLEVBQTBCLGVBQUksaUJBQzlCQSxFQUErQixvQkFBSSxzQkF2QnZDLENBd0JHQSxLQUFjQSxHQUFZLEtBa1Q3QixJQThDSXdCLEdBS0FDLEdBbkRBL2dILEtBQVUsR0FBSyxJQUNaLFlBQTZCLElBQU91L0csR0FBcUIsaUhBRzVELEdBQUcsa0JBQXlDLDRKQUc1QyxHQUFHLHVCQUFtRCxpSkFHdEQsR0FBRyxnQ0FBcUUsNkRBQ3hFLElBQ0EsR0FBZ0IsSUFBSSxlQUFhLFlBQWEsWUFBYXYvRyxJQXFCM0Q0L0csR0FBMkIsR0FJM0JDLEdBQWdCLFlBSWhCbUIsR0FBVyxPQWVYQyxJQUFpQixFQWlCckIsU0FBU2oxQyxHQUFTOXRFLEdBQ2QsR0FBSStpSCxHQUNBLE1BQU0sR0FBY3Q0SCxPQUFPLHVCQUUzQnVWLEVBQVEyaEgsZ0JBQ1JBLEdBQWdCM2hILEVBQVEyaEgsZUFFeEIzaEgsRUFBUThpSCxXQUNSQSxHQUFXOWlILEVBQVE4aUgsVUFHM0IsU0FBU3Y0RyxHQUFRdkcsRUFBS2cvRyxHQUNsQixJQUFJQyxFQUFjai9HLEVBQUloRSxRQUFRcWhILElBQzlCLElBQUs0QixFQUNELE1BQU0sR0FBY3g0SCxPQUFPLFlBRS9CLEdBQTZDLE1BQXpDaTNILEdBQXlCdUIsR0FDekIsTUFBTSxHQUFjeDRILE9BQU8saUJBQXVDLENBQzlEbWhCLEdBQUlxM0csSUFHWixJQUFLRixHQUFnQixFQTFIekIsV0FFSSxJQURBLElBQUlHLEVBQWF0bkgsT0FBT2tQLFNBQVNxNEcscUJBQXFCLFVBQzdDOXNILEVBQUssRUFBR00sRUFBSzlNLE9BQU9rWCxPQUFPbWlILEdBQWE3c0gsRUFBS00sRUFBRzVLLE9BQVFzSyxJQUFNLENBQ25FLElBQUkyWixFQUFNclosRUFBR04sR0FDYixHQUFJMlosRUFBSXc2RSxLQUFPeDZFLEVBQUl3NkUsSUFBSXlqQixTQUFTdVQsSUFDNUIsT0FBT3h4RyxFQUdmLE9BQU87Ozs7Ozs7Ozs7Ozs7Ozs7SUFzSEVvekcsSUE3UGIsU0FBeUJ6QixHQUNyQixJQUFJMEIsRUFBU3Y0RyxTQUFTd0IsY0FBYyxVQUdwQysyRyxFQUFPNzRCLElBQU1nM0IsR0FBVyxNQUFRRyxFQUNoQzBCLEVBQU92b0gsT0FBUSxFQUNmZ1EsU0FBU00sS0FBS3VCLFlBQVkwMkcsR0F3UGxCQyxDQUFnQjNCLElBblA1QixTQUE4QkEsR0FFMUIsSUFBSTRCLEVBQVksR0FDWmg0SCxNQUFNb0gsUUFBUWlKLE9BQU8rbEgsSUFDckI0QixFQUFZM25ILE9BQU8rbEgsR0FHbkIvbEgsT0FBTytsSCxHQUFpQjRCLEVBOE94QkMsQ0FBcUI3QixJQUNyQixJQUFJaHJILEVBQUs4cUgsR0FBaUJDLEdBQTBCQyxHQUFlbUIsSUFBV0gsRUFBY2hzSCxFQUFHZ3NILFlBQWFkLEVBQVdsckgsRUFBR2tySCxTQUMxSGdCLEdBQXNCRixFQUN0QkMsR0FBbUJmLEVBQ25Ca0IsSUFBaUIsRUFzQnJCLE9BbkJBckIsR0FBeUJ1Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFsUzdCLFNBQXdCai9HLEVBQUtnL0csRUFBZW5CLEdBQ3hDLE9BQU8sb0JBQVVuMkgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSW14SCxFQUNBbG1ILEVBQ0osT0FBTyxzQkFBWWpMLE1BQU0sU0FBVWtMLEdBQy9CLE9BQVFBLEVBQUduSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXUwSCxFQUFjL0IsU0FDM0MsS0FBSyxFQWVELE9BZEFwRSxFQUFNam1ILEVBQUdsSSxPQUtUbXpILEVBQVMsS0FBTSxJQUFJOXNILE1BR25COHNILEVBQVNWLEdBQVlxQixPQUFReCtHLEVBQUloRSxRQUFRcWhILE1BQXNCMXFILEVBQUssSUFDN0QycUgsSUFBY3pFLEVBRWpCbG1ILEVBQUc0cUgsSUFBYyxXQUNqQjVxSCxFQUFHK0IsUUFBUyxFQUNaL0IsSUFDRyxDQUFDLFVBNFFnQjhzSCxDQUFlei9HLEVBQUtnL0csRUFBZUosSUFDbkQsQ0FDcEI1K0csSUFBS0EsRUFDTDAvRyxTQUFVLFNBQVVDLEVBQVdDLEVBQWE1akg7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ3hDLE9BellaLFNBQWtCNmpILEVBQWNaLEVBQWFVLEVBQVdDLEVBQWE1akgsR0FDakUsSUFBSWhELEVBQVM0bUgsR0FBZSxHQUN2QjVqSCxHQUFZQSxFQUFRakUsU0FDckJpQixFQUFTLG1CQUFTLG1CQUFTLEdBQUk0bUgsR0FBYyxDQUFFLFFBQVdYLEtBRzlEWSxFQUFhMUMsR0FBWWMsTUFBTzBCLEVBQVczbUgsR0FBVSxJQW1ZdEMwbUgsQ0FBU2IsR0FBcUJJLEVBQWFVLEVBQVdDLEVBQWE1akgsSUFFOUU4akgsaUJBQWtCLFNBQVVDLEVBQVkvakgsR0FDcEMsT0E3WFosU0FBMEI2akgsRUFBY1osRUFBYWMsRUFBWS9qSCxHQUN6REEsR0FBV0EsRUFBUWpFLE9BQ25COG5ILEVBQWExQyxHQUFZc0IsSUFBSyxDQUFFLFlBQWVzQixJQUcvQ0YsRUFBYTFDLEdBQVlxQixPQUFRUyxFQUFhLENBQzFDdnFILFFBQVEsRUFDUixZQUFlcXJILElBc1hSRCxDQUFpQmpCLEdBQXFCSSxFQUFhYyxFQUFZL2pILElBRTFFZ2tILFVBQVcsU0FBVXA0RyxFQUFJNUwsR0FDckIsT0EvV1osU0FBbUI2akgsRUFBY1osRUFBYXIzRyxFQUFJNUwsR0FDMUNBLEdBQVdBLEVBQVFqRSxPQUNuQjhuSCxFQUFhMUMsR0FBWXNCLElBQUssQ0FBRSxRQUFXNzJHLElBRzNDaTRHLEVBQWExQyxHQUFZcUIsT0FBUVMsRUFBYSxDQUMxQ3ZxSCxRQUFRLEVBQ1IsUUFBV2tULElBd1dKbzRHLENBQVVuQixHQUFxQkksRUFBYXIzRyxFQUFJNUwsSUFFM0Rpa0gsa0JBQW1CLFNBQVUxOEcsRUFBWXZILEdBQ3JDLE9BaldaLFNBQTJCNmpILEVBQWNaLEVBQWExN0csRUFBWXZILEdBQzlELEdBQUlBLEdBQVdBLEVBQVFqRSxPQUFRLENBRTNCLElBREEsSUFBSW1vSCxFQUFpQixHQUNaN3RILEVBQUssRUFBR00sRUFBSzlNLE9BQU9nTixLQUFLMFEsR0FBYWxSLEVBQUtNLEVBQUc1SyxPQUFRc0ssSUFBTSxDQUNqRSxJQUFJM0wsRUFBTWlNLEVBQUdOLEdBRWI2dEgsRUFBZSxtQkFBcUJ4NUgsR0FBTzZjLEVBQVc3YyxHQUUxRG01SCxFQUFhMUMsR0FBWXNCLElBQUt5QixRQUc5QkwsRUFBYTFDLEdBQVlxQixPQUFRUyxFQUFhLENBQzFDdnFILFFBQVEsRUFDUixnQkFBbUI2TyxJQW9WWjA4RyxDQUFrQnBCLEdBQXFCSSxFQUFhMTdHLEVBQVl2SCxJQUUzRW1rSCw4QkFBK0IsU0FBVUMsR0FDckMsT0E5VVosU0FBdUNuQixFQUFhbUIsR0FDaER4b0gsT0FBTyxjQUFnQnFuSCxJQUFnQm1CLEVBNlV4QkQsQ0FBOEJsQixFQUFhbUIsS0FNOUQsSUFBSSxHQUFPLHNCQUNQLEdBQVUsUUFxQlZDLEdBQWlCLGFBQ3JCLFNBQTJCeGtILEdBQ3ZCQSxFQUFTcUIsU0FBU3VELGtCQUFrQixJQUFJLFlBQVU0L0csSUFBZ0IsU0FBVW5sSCxHQU14RSxPQUFPcUwsR0FKR3JMLEVBQVV1QyxZQUFZLE9BQU8xQixlQUNuQmIsRUFDZnVDLFlBQVksaUJBQ1oxQixrQkFFTixVQUF1QmpCLGdCQUFnQixDQUN0Q2d2RSxTQUFVQSxHQUNWc3pDLFVBQVdBLE1BRWZ2aEgsRUFBU3FCLFNBQVN1RCxrQkFBa0IsSUFBSSxZQUFVLHNCQUVsRCxTQUF5QnZGLEdBQ3JCLElBRUksTUFBTyxDQUNId2tILFNBRll4a0gsRUFBVXVDLFlBQVk0aUgsSUFBZ0J0a0gsZUFFOUIyakgsVUFHNUIsTUFBT3gzSCxHQUNILE1BQU0sR0FBY3pCLE9BQU8sK0JBQW1FLENBQzFGNHhCLE9BQVFud0IsT0FYcUUsWUFDekYyVCxFQUFTb0UsZ0JBQWdCLEdBQU0sSUFlbkNxZ0gsQ0FBa0IsSzs7Ozs7Ozs7Ozs7Ozs7OztPQy9nQmQsR0FvS0FDLEdBbktBQyxLQUFhLEdBQUssSUFDZiw0QkFBd0QsZ0RBQzNELEdBQUcsd0JBQWdELHdEQUNuRCxHQUFHLHVCQUFtRCx1REFDdEQsR0FBRyxpQkFBdUMsK0dBRTFDLEdBQUcsc0JBQWlELG1FQUNwRCxHQUFHLHNCQUFpRCxpRUFDcEQsR0FBRyx1QkFBbUQsMkVBRXRELEdBQUcseUJBQXVELG1DQUMxRCxHQUFHLHFDQUF5RSwrRUFFNUUsR0FBRyw0QkFBNkQsd0RBQ2hFLEdBQUcsMkJBQTJELHlFQUU5RCxHQUFHLHVCQUFtRCwrQ0FDdEQsR0FBRyxvQkFBNkMsNkRBQ2hELEdBQUcsMEJBQXlELG9FQUM1RCxHQUFHLDRCQUE2RCwyREFDaEUsR0FBRyw0QkFBNkQsd0VBRWhFLEdBQUcsdUJBQW1ELG1FQUN0RCxHQUFHLHlCQUF1RCx3REFDMUQsR0FBRywyQkFBMkQsNElBRTlELEdBQUcsd0JBQXFELGtGQUV4RCxHQUFHLDBCQUF5RCxvRkFFNUQsR0FBRywwQkFBeUQsbUdBRTVELEdBQUcsZ0NBQXFFLGlFQUN4RSxHQUFHLDJCQUEyRCwrREFDOUQsR0FBRyx5QkFBdUQsMElBRzFELEdBQUcsZ0NBQXFFLHVIQUd4RSxHQUFHLDBCQUF5RCw4Q0FDNUQsR0FBRyxnQkFBcUMsdUhBRXhDLEdBQUcsYUFBK0IseUVBRWxDLEdBQUcsaUJBQXVDLDBEQUMxQyxHQUFHLG9CQUE2QyxxREFDaEQsR0FBRyxhQUErQix3RUFFbEMsR0FBRywyQkFBMkQsc0NBQzlELEdBQUcsNEJBQTZELHlDQUNoRSxHQUFHLG1DQUEyRSx3SUFFOUUsR0FBRyxzQ0FBMkUsOERBQzlFLElBQ0FDLEdBQWUsSUFBSSxlQUFhLFlBQWEsWUFBYUQsSUFrQjFERSxHQUEyQixJQUFJdnVHLFdBQVcsQ0FDMUMsRUFDQSxHQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsRUFDQSxJQUNBLEdBQ0EsR0FDQSxJQUNBLElBQ0EsR0FDQSxJQUNBLEdBQ0EsSUFDQSxJQUNBLElBQ0EsR0FDQSxJQUNBLElBQ0EsR0FDQSxHQUNBLEdBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLEdBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsR0FDQSxJQUNBLEdBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxFQUNBLElBQ0EsSUFDQSxHQUNBLElBQ0EsR0FDQSxJQUNBLElBQ0EsSUFDQSxHQUNBLElBQ0EsSUFDQSxNQUVBd3VHLEdBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkNmLFNBQVNDLEdBQW1COTBILEVBQUcxRSxHQUMzQixHQUFTLE1BQUwwRSxHQUFrQixNQUFMMUUsRUFDYixPQUFPLEVBRVgsR0FBSTBFLElBQU0xRSxFQUNOLE9BQU8sRUFFWCxHQUFJMEUsRUFBRSswSCxhQUFlejVILEVBQUV5NUgsV0FDbkIsT0FBTyxFQUlYLElBRkEsSUFBSUMsRUFBUSxJQUFJQyxTQUFTajFILEdBQ3JCazFILEVBQVEsSUFBSUQsU0FBUzM1SCxHQUNoQmpDLEVBQUksRUFBR0EsRUFBSTJHLEVBQUUrMEgsV0FBWTE3SCxJQUM5QixHQUFJMjdILEVBQU1HLFNBQVM5N0gsS0FBTzY3SCxFQUFNQyxTQUFTOTdILEdBQ3JDLE9BQU8sRUFHZixPQUFPOzs7Ozs7Ozs7Ozs7Ozs7O0dBdUJYLFNBQVMrN0gsR0FBb0JDLEdBRXpCLE9BTkosU0FBa0JBLEdBQ2QsSUFBSUMsRUFBZSxJQUFJanZHLFdBQVdndkcsR0FDbEMsT0FBT3p4SCxLQUFLSyxPQUFPQyxhQUFhaEksTUFBTStILE9BQVEsbUJBQVNxeEgsS0FHcEN0dUcsQ0FBU3F1RyxHQUV2Qm51SCxRQUFRLEtBQU0sSUFDZEEsUUFBUSxNQUFPLEtBQ2ZBLFFBQVEsTUFBTzs7Ozs7Ozs7Ozs7Ozs7OztJQWxFeEIsU0FBV3V0SCxHQUNQQSxFQUErQixrQkFBSSxvQkFDbkNBLEVBQWtDLHFCQUFJLHVCQUYxQyxDQUdHQSxLQUFnQkEsR0FBYyxLQWtGakMsSUFBSSxHQUFxQyxXQUNyQyxTQUFTYyxLQW1JVCxPQWpJQUEsRUFBb0J0NkgsVUFBVXc4RCxTQUFXLFNBQVUxbUQsRUFBVXlrSCxFQUFjQyxHQUN2RSxPQUFPLG9CQUFVNzVILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlvbEYsRUFBUzFpRixFQUFNbzNILEVBQWtCQyxFQUF3QkMsRUFBT2owSCxFQUNwRSxPQUFPLHNCQUFZL0YsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhLEdBQVdvUyxJQUN4QyxLQUFLLEVBQ0Rpd0UsRUFBVW42RSxFQUFHakksT0FDYk4sRUFBT3UzSCxHQUFRTCxFQUFjQyxHQUM3QkMsRUFBbUIsQ0FDZnhySCxPQUFRLE9BQ1I4MkUsUUFBU0EsRUFDVDFpRixLQUFNZ0osS0FBS3NHLFVBQVV0UCxJQUV6QnVJLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUVELE9BREFrSSxFQUFHaEksS0FBS1EsS0FBSyxDQUFDLEVBQUcsRUFBRyxDQUFFLElBQ2YsQ0FBQyxFQUFhbXlHLE1BQU1za0IsR0FBWS9rSCxFQUFTbUQsS0FBTXdoSCxJQUMxRCxLQUFLLEVBRUQsTUFBTyxDQUFDLEVBREc3dUgsRUFBR2pJLE9BQ2dCd3hGLFFBQ2xDLEtBQUssRUFFRCxPQURBdWxDLEVBQWU5dUgsRUFBR2pJLE9BQ1gsQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFFRCxNQURBZzNILEVBQVEvdUgsRUFBR2pJLE9BQ0wrMUgsR0FBYWg2SCxPQUFPLHlCQUF1RCxDQUM3RW83SCxVQUFXSCxJQUVuQixLQUFLLEVBQ0QsR0FBSUQsRUFBYWoySCxNQUViLE1BREFpQyxFQUFVZzBILEVBQWFqMkgsTUFBTWlDLFFBQ3ZCZ3pILEdBQWFoNkgsT0FBTyx5QkFBdUQsQ0FDN0VvN0gsVUFBV3AwSCxJQUduQixJQUFLZzBILEVBQWFsdUgsTUFDZCxNQUFNa3RILEdBQWFoNkgsT0FBTyw0QkFFOUIsTUFBTyxDQUFDLEVBQWNnN0gsRUFBYWx1SCxlQVF2RDh0SCxFQUFvQnQ2SCxVQUFVKzZILFlBQWMsU0FBVUMsRUFBY2xsSCxFQUFVeWtILEVBQWNDLEdBQ3hGLE9BQU8sb0JBQVU3NUgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSW9sRixFQUFTMWlGLEVBQU00M0gsRUFBZVAsRUFBd0JRLEVBQU94MEgsRUFDakUsT0FBTyxzQkFBWS9GLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYSxHQUFXb1MsSUFDeEMsS0FBSyxFQUNEaXdFLEVBQVVuNkUsRUFBR2pJLE9BQ2JOLEVBQU91M0gsR0FBUUwsRUFBY0MsR0FDN0JTLEVBQWdCLENBQ1poc0gsT0FBUSxRQUNSODJFLFFBQVNBLEVBQ1QxaUYsS0FBTWdKLEtBQUtzRyxVQUFVdFAsSUFFekJ1SSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYW15RyxNQUFNc2tCLEdBQVkva0gsRUFBU21ELEtBQU8sSUFBTStoSCxFQUFhRyxTQUFVRixJQUN4RixLQUFLLEVBRUQsTUFBTyxDQUFDLEVBREdydkgsRUFBR2pJLE9BQ2dCd3hGLFFBQ2xDLEtBQUssRUFFRCxPQURBdWxDLEVBQWU5dUgsRUFBR2pJLE9BQ1gsQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFFRCxNQURBdTNILEVBQVF0dkgsRUFBR2pJLE9BQ0wrMUgsR0FBYWg2SCxPQUFPLHNCQUFpRCxDQUN2RW83SCxVQUFXSSxJQUVuQixLQUFLLEVBQ0QsR0FBSVIsRUFBYWoySCxNQUViLE1BREFpQyxFQUFVZzBILEVBQWFqMkgsTUFBTWlDLFFBQ3ZCZ3pILEdBQWFoNkgsT0FBTyxzQkFBaUQsQ0FDdkVvN0gsVUFBV3AwSCxJQUduQixJQUFLZzBILEVBQWFsdUgsTUFDZCxNQUFNa3RILEdBQWFoNkgsT0FBTyx5QkFFOUIsTUFBTyxDQUFDLEVBQWNnN0gsRUFBYWx1SCxlQUt2RDh0SCxFQUFvQnQ2SCxVQUFVbzdILFlBQWMsU0FBVXRsSCxFQUFVa2xILEdBQzVELE9BQU8sb0JBQVVyNkgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSW9sRixFQUFTczFDLEVBQThCWCxFQUFjaDBILEVBQVM0MEgsRUFDbEUsT0FBTyxzQkFBWTM2SCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEsR0FBV29TLElBQ3hDLEtBQUssRUFDRGl3RSxFQUFVbjZFLEVBQUdqSSxPQUNiMDNILEVBQXFCLENBQ2pCcHNILE9BQVEsU0FDUjgyRSxRQUFTQSxHQUVibjZFLEVBQUdsSSxNQUFRLEVBQ2YsS0FBSyxFQUVELE9BREFrSSxFQUFHaEksS0FBS1EsS0FBSyxDQUFDLEVBQUcsRUFBRyxDQUFFLElBQ2YsQ0FBQyxFQUFhbXlHLE1BQU1za0IsR0FBWS9rSCxFQUFTbUQsS0FBTyxJQUFNK2hILEVBQWFHLFNBQVVFLElBQ3hGLEtBQUssRUFFRCxNQUFPLENBQUMsRUFER3p2SCxFQUFHakksT0FDZ0J3eEYsUUFDbEMsS0FBSyxFQUVELElBREF1bEMsRUFBZTl1SCxFQUFHakksUUFDRGMsTUFFYixNQURBaUMsRUFBVWcwSCxFQUFhajJILE1BQU1pQyxRQUN2Qmd6SCxHQUFhaDZILE9BQU8sMkJBQTJELENBQ2pGbzdILFVBQVdwMEgsSUFHbkIsTUFBTyxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUVELE1BREE0MEgsRUFBUTF2SCxFQUFHakksT0FDTCsxSCxHQUFhaDZILE9BQU8sMkJBQTJELENBQ2pGbzdILFVBQVdRLElBRW5CLEtBQUssRUFBRyxNQUFPLENBQUMsV0FLekJoQixFQXBJNkIsR0FzSXhDLFNBQVNPLEdBQVk1aEgsR0FDakIsT0FBTzJnSCxHQUFXLGFBQWUzZ0gsRUFBSWhFLFFBQVE0WCxVQUFZLGlCQUU3RCxTQUFTLEdBQVdqaEIsR0FDaEIsSUFBSXFOLEVBQU1yTixFQUFHcU4sSUFBS2cvRyxFQUFnQnJzSCxFQUFHcXNILGNBQ3JDLE9BQU8sb0JBQVV0M0gsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXl4SCxFQUNKLE9BQU8sc0JBQVl6eEgsTUFBTSxTQUFVa0wsR0FDL0IsT0FBUUEsRUFBR25JLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhdTBILEVBQWN6N0QsWUFDM0MsS0FBSyxFQUVELE9BREE0MUQsRUFBWXZtSCxFQUFHbEksT0FDUixDQUFDLEVBQWMsSUFBSTZ5RyxRQUFRLENBQzFCLGVBQWdCLG1CQUNoQithLE9BQVEsbUJBQ1IsaUJBQWtCdDRHLEVBQUloRSxRQUFRcThHLE9BQzlCLHFDQUFzQyxPQUFTYyxZQU0zRSxTQUFTd0ksR0FBUUwsRUFBY0MsR0FDM0IsSUFBSWUsRUFBU3BCLEdBQW9CSSxFQUFhcEgsT0FBTyxXQUNqRHozRCxFQUFPeStELEdBQW9CSSxFQUFhcEgsT0FBTyxTQUMvQzl2SCxFQUFPLENBQ1BtNEgsSUFBSyxDQUNEekosU0FBVXdJLEVBQWF4SSxTQUN2QndKLE9BQVFBLEVBQ1I3L0QsS0FBTUEsSUFNZCxPQUhLbStELEdBQW1CVyxFQUFTdnVHLE9BQVEwdEcsR0FBeUIxdEcsVUFDOUQ1b0IsRUFBS200SCxJQUFJQyxrQkFBb0J0QixHQUFvQkssSUFFOUNuM0g7Ozs7Ozs7Ozs7Ozs7Ozs7R0FtQlgsU0FBU3E0SCxHQUFvQkMsR0FPekIsSUFOQSxJQUNJMTBILEdBQVUwMEgsRUFEQSxJQUFJQyxRQUFRLEVBQUtELEVBQWEzNkgsT0FBUyxHQUFNLElBRXREaUwsUUFBUSxNQUFPLEtBQ2ZBLFFBQVEsS0FBTSxLQUNmNHZILEVBQVVyMEgsS0FBS1AsR0FDZjYwSCxFQUFjLElBQUkxd0csV0FBV3l3RyxFQUFRNzZILFFBQ2hDNUMsRUFBSSxFQUFHQSxFQUFJeTlILEVBQVE3NkgsU0FBVTVDLEVBQ2xDMDlILEVBQVkxOUgsR0FBS3k5SCxFQUFRNzBILFdBQVc1SSxHQUV4QyxPQUFPMDlIOzs7Ozs7Ozs7Ozs7Ozs7O0dBbUJYLElBQUlDLEdBQWMsWUFDZEMsR0FBd0IseUJBK0I1QixTQUFTQyxHQUFRbm1ILEdBQ2IsSUFBSWlHLEVBQVVxRCxVQUFVeWQsS0FBS2svRixJQUM3QmhnSCxFQUFRRSxRQUFVLFNBQVVpZ0gsS0FHNUJuZ0gsRUFBUUMsVUFBWSxTQUFVa2dILElBbkNsQyxTQUFrQnQrRyxFQUFJOUgsR0FDbEIsR0FBSzhILEVBQUc4aEIsaUJBQWlCdHZCLFNBQVM0ckgsSUFBbEMsQ0FLQSxJQUNJMTlHLEVBRGNWLEVBQUdFLFlBQVlrK0csSUFDSDE5RyxZQUFZMDlHLElBQ3RDRyxFQUFzQixJQUFJLEdBQzFCQyxFQUFvQjk5RyxFQUFZNGlCLGFBQ3BDazdGLEVBQWtCbmdILFFBQVUsU0FBVXFELEdBRWxDelYsUUFBUW1DLEtBQUssNkJBQThCc1QsSUFFL0M4OEcsRUFBa0JwZ0gsVUFBWSxXQUMxQixJQUFJZ0IsRUFBU28vRyxFQUFrQm41SCxPQUMvQixHQUFJK1osRUFBUSxDQUdSLElBQUlnK0csRUFBZWgrRyxFQUFPM2QsTUFFMUI4OEgsRUFBb0JmLFlBQVl0bEgsRUFBVWtsSCxHQUMxQ2grRyxFQUFPaUMsZ0JBR1ByQixFQUFHbFAsUUFDSDBRLFVBQVU4ZCxlQUFlNitGLE1BVzdCTSxDQURTdGdILEVBQVE5WSxPQUNKNlM7Ozs7Ozs7Ozs7Ozs7Ozs7R0FvQnJCLElBQUksR0FBNkIsV0FDN0IsU0FBU3dtSCxJQUNMMzdILEtBQUtveUgsVUFBWSxLQThGckIsT0EzRkF1SixFQUFZdDhILFVBQVVmLElBQU0sU0FBVVUsR0FDbEMsT0FBT2dCLEtBQUsycEUsbUJBQWtCLFNBQVVoc0QsR0FBZSxPQUFPQSxFQUFZcmYsSUFBSVUsT0FHbEYyOEgsRUFBWXQ4SCxVQUFVdThILFNBQVcsU0FBVXovRyxFQUFPbmQsR0FLOUMsT0FBT2dCLEtBQUsycEUsbUJBSlosU0FBb0Joc0QsR0FFaEIsT0FEZUEsRUFBWXhCLE1BQU1BLEdBQ2pCN2QsSUFBSVUsT0FNNUIyOEgsRUFBWXQ4SCxVQUFVNi9CLElBQU0sU0FBVXhnQyxHQUNsQyxPQUFPc0IsS0FBSzJwRSxtQkFBa0IsU0FBVWhzRCxHQUFlLE9BQU9BLEVBQVl1aEIsSUFBSXhnQyxLQUFXLGNBRzdGaTlILEVBQVl0OEgsVUFBVTZWLE9BQVMsU0FBVWxXLEdBQ3JDLE9BQU9nQixLQUFLMnBFLG1CQUFrQixTQUFVaHNELEdBQWUsT0FBT0EsRUFBWXpJLE9BQU9sVyxLQUFTLGNBSzlGMjhILEVBQVl0OEgsVUFBVXc4SCxjQUFnQixXQUNsQyxPQUFPLG9CQUFVNzdILFVBQU0sT0FBUSxHQUFRLFdBRW5DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxPQUFLL0MsS0FBS295SCxVQUNILENBQUMsRUFBYXB5SCxLQUFLb3lILFdBREUsQ0FBQyxFQUFhLEdBRTlDLEtBQUssRUFDSW5uSCxFQUFHakksT0FDTCtLLFFBQ0gvTixLQUFLb3lILFVBQVksS0FDakJubkgsRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBV2hDNDRILEVBQVl0OEgsVUFBVXNxRSxrQkFBb0IsU0FBVW15RCxFQUFZbDlILEdBRTVELFlBRGEsSUFBVEEsSUFBbUJBLEVBQU8sWUFDdkIsb0JBQVVvQixVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJaWQsRUFBSUUsRUFBYS9CLEVBQVM5WSxFQUM5QixPQUFPLHNCQUFZdEMsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhL0MsS0FBSys3SCxTQUNsQyxLQUFLLEVBSUQsT0FIQTkrRyxFQUFLaFMsRUFBR2pJLE9BQ1JtYSxFQUFjRixFQUFHRSxZQUFZbmQsS0FBS2c4SCxnQkFBaUJwOUgsR0FDbkR3YyxFQUFVK0IsRUFBWVEsWUFBWTNkLEtBQUtnOEgsaUJBQ2hDLENBQUMsRUFBYUMsR0FBVUgsRUFBVzFnSCxLQUM5QyxLQUFLLEVBRUQsT0FEQTlZLEVBQVMySSxFQUFHakksT0FDTCxDQUFDLEVBQWMsSUFBSWpCLFNBQVEsU0FBVUMsRUFBU0MsR0FDN0NrYixFQUFZTCxXQUFhLFdBQ3JCOWEsRUFBUU0sSUFFWjZhLEVBQVk3QixRQUFVLFdBQ2xCclosRUFBT2tiLEVBQVlyWixvQkFRbkQ2M0gsRUFBWXQ4SCxVQUFVMDhILE1BQVEsV0FDMUIsSUFBSXJ5SCxFQUFRMUosS0FjWixPQWJLQSxLQUFLb3lILFlBQ05weUgsS0FBS295SCxVQUFZLElBQUlyd0gsU0FBUSxTQUFVQyxFQUFTQyxHQUM1QyxJQUFJbVosRUFBVXFELFVBQVV5ZCxLQUFLeHlCLEVBQU1rNEMsT0FBUWw0QyxFQUFNd3lILFdBQ2pEOWdILEVBQVFDLFVBQVksV0FDaEJyWixFQUFRb1osRUFBUTlZLFNBRXBCOFksRUFBUUUsUUFBVSxXQUNkNVIsRUFBTTBvSCxVQUFZLEtBQ2xCbndILEVBQU9tWixFQUFRdFgsUUFFbkJzWCxFQUFRc0QsZ0JBQWtCLFNBQVVDLEdBQVMsT0FBT2pWLEVBQU15eUgsWUFBWS9nSCxFQUFTdUQsUUFHaEYzZSxLQUFLb3lILFdBRVR1SixFQWhHcUIsR0FtR2hDLFNBQVNNLEdBQVU3Z0gsR0FDZixPQUFPLElBQUlyWixTQUFRLFNBQVVDLEVBQVNDLEdBQ2xDbVosRUFBUUMsVUFBWSxXQUNoQnJaLEVBQVFvWixFQUFROVksU0FFcEI4WSxFQUFRRSxRQUFVLFdBQ2RyWixFQUFPbVosRUFBUXRYOzs7Ozs7Ozs7Ozs7Ozs7O0dBcUIzQixJQUFJLEdBQW1DLFNBQVVxRyxHQUU3QyxTQUFTaXlILEVBQWtCam5ILEdBQ3ZCLElBQUl6TCxFQUFRUyxFQUFPdk0sS0FBS29DLE9BQVNBLEtBS2pDLE9BSkEwSixFQUFNeUwsU0FBV0EsRUFDakJ6TCxFQUFNazRDLE9BQVMsdUJBQ2ZsNEMsRUFBTXd5SCxVQUFZLEVBQ2xCeHlILEVBQU1zeUgsZ0JBQWtCLHlCQUNqQnR5SCxFQW1LWCxPQTFLQSxvQkFBVTB5SCxFQUFtQmp5SCxHQVM3Qml5SCxFQUFrQi84SCxVQUFVODhILFlBQWMsU0FBVS9nSCxFQUFTdUQsR0FDekQsSUFBSTFCLEVBQUs3QixFQUFROVksT0FFakIsT0FBUXFjLEVBQU16QixZQUNWLEtBQUssR0FFR1MsRUFBY1YsRUFBR1ksa0JBQWtCN2QsS0FBS2c4SCxnQkFBaUIsQ0FDekRwMkYsUUFBUyxhQUdEbm9CLFlBQVksY0FBZSxjQUFlLENBQ2xEZzVCLFFBQVEsSUFFWjk0QixFQUFZRixZQUFZLFdBQVksV0FBWSxDQUFFZzVCLFFBQVEsSUFFOUQsS0FBSyxFQUlENmtGLEdBQVF0N0gsS0FBS21WLFVBRWpCLEtBQUssRUFJRCxJQUNJa25ILEdBREExK0csRUFBY3ZDLEVBQVErQixZQUFZUSxZQUFZM2QsS0FBS2c4SCxrQkFDckJ6N0YsYUFDbEM4N0YsRUFBZ0JoaEgsVUFBWSxXQUN4QixJQUFJZ0IsRUFBU2dnSCxFQUFnQi81SCxPQUM3QixHQUFJK1osRUFBUSxDQUNSLElBQUkzZCxFQUFRMmQsRUFBTzNkLE1BQ2Z3dEMsRUFBVyxtQkFBUyxHQUFJeHRDLEdBQ3ZCQSxFQUFNNDlILGFBQ1Bwd0YsRUFBU293RixXQUFhanpILEtBQUtzSCxPQUVELGlCQUFuQmpTLEVBQU1tN0gsV0FDYjN0RixFQUFTMnRGLFNBQVdrQixHQUFvQnI4SCxFQUFNbTdILFdBRXhCLGlCQUFmbjdILEVBQU1xOEQsT0FDYjd1QixFQUFTNnVCLEtBQU9nZ0UsR0FBb0JyOEgsRUFBTXE4RCxNQUFNenZDLFFBRTFCLGlCQUFmNXNCLEVBQU1xOEQsT0FDYjd1QixFQUFTMHVGLE9BQVNHLEdBQW9CcjhILEVBQU1rOEgsUUFBUXR2RyxRQUV4QixpQkFBckI1c0IsRUFBTTY5SCxtQkFDTnJ3RixFQUFTcXdGLFdBRXBCbGdILEVBQU9yUCxPQUFPay9CLEdBQ2Q3dkIsRUFBT2lDLGFBSWYsTUFFSixLQUFLLEVBRUQsSUFBSVgsRUFDQTYrRyxHQURBNytHLEVBQWN2QyxFQUFRK0IsWUFBWVEsWUFBWTNkLEtBQUtnOEgsa0JBQ3JCejdGLGFBQ2xDaThGLEVBQWdCbmhILFVBQVksV0FDeEIsSUFBSWdCLEVBQVNtZ0gsRUFBZ0JsNkgsT0FDN0IsR0FBSStaLEVBQVEsQ0FDUixJQUFJM2QsRUFBUTJkLEVBQU8zZCxNQUNmd3RDLEVBQVcsbUJBQVMsR0FBSXh0QyxHQUNJLGlCQUFyQkEsRUFBTTY5SCxtQkFDTnJ3RixFQUFTcXdGLFdBRXBCbGdILEVBQU9yUCxPQUFPay9CLEdBQ2Q3dkIsRUFBT2lDLGVBUzNCODlHLEVBQWtCLzhILFVBQVVvOUgseUJBQTJCLFNBQVVqQyxHQUM3RCxPQUFPLG9CQUFVeDZILFVBQU0sT0FBUSxHQUFRLFdBQ25DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBQy9CLElBQUt1dkgsRUFDRCxNQUFNekIsR0FBYWg2SCxPQUFPLGFBRzlCLE9BREEyOUgsR0FBZSxDQUFFbEMsU0FBVUEsSUFDcEIsQ0FBQyxFQUFjeDZILEtBQUs0N0gsU0FBUyxXQUFZcEIsV0FTNUQ0QixFQUFrQi84SCxVQUFVczlILDJCQUE2QixTQUFVQyxHQUMvRCxPQUFPLG9CQUFVNThILFVBQU0sT0FBUSxHQUFRLFdBQ25DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBQy9CLElBQUsyeEgsRUFDRCxNQUFNN0QsR0FBYWg2SCxPQUFPLGFBRzlCLE9BREEyOUgsR0FBZSxDQUFFRSxRQUFTQSxJQUNuQixDQUFDLEVBQWM1OEgsS0FBSzFCLElBQUlzK0gsV0FRM0NSLEVBQWtCLzhILFVBQVV3OUgsaUJBQW1CLFNBQVV4QyxHQUNyRCxPQUFPLG9CQUFVcjZILFVBQU0sT0FBUSxHQUFRLFdBQ25DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBQy9CLElBQUtvdkgsRUFBYXVDLFFBQ2QsTUFBTTdELEdBQWFoNkgsT0FBTyxhQUU5QixJQUFLczdILEVBQWFSLFNBQ2QsTUFBTWQsR0FBYWg2SCxPQUFPLGlCQUU5QixJQUFLczdILEVBQWFqSixXQUFhaUosRUFBYXQvRCxPQUFTcy9ELEVBQWFPLE9BQzlELE1BQU03QixHQUFhaDZILE9BQU8sb0JBRTlCLElBQUtzN0gsRUFBYXlDLFlBQ2QsTUFBTS9ELEdBQWFoNkgsT0FBTyxpQkFFOUIsSUFBS3M3SCxFQUFhRyxTQUNkLE1BQU16QixHQUFhaDZILE9BQU8sYUFHOUIsT0FEQTI5SCxHQUFlckMsR0FDUixDQUFDLEVBQWNyNkgsS0FBS2svQixJQUFJbTdGLFdBWTNDK0IsRUFBa0IvOEgsVUFBVW83SCxZQUFjLFNBQVU1dUgsR0FDaEQsT0FBTyxvQkFBVTdMLFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUkyZ0UsRUFDSixPQUFPLHNCQUFZM2dFLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFDRCxNQUFxQixpQkFBVjhJLEdBQXVDLElBQWpCQSxFQUFNeEwsT0FDNUIsQ0FBQyxFQUFjMEIsUUFBUUUsT0FBTzgySCxHQUFhaDZILE9BQU8sMEJBRXRELENBQUMsRUFBYWlCLEtBQUt5OEgseUJBQXlCNXdILElBQ3ZELEtBQUssRUFFRCxLQURBODBELEVBQVUxMUQsRUFBR2pJLFFBRVQsTUFBTSsxSCxHQUFhaDZILE9BQU8sMEJBRTlCLE1BQU8sQ0FBQyxFQUFhaUIsS0FBS2tWLE9BQU95ckQsRUFBUWk4RCxVQUM3QyxLQUFLLEVBRUQsT0FEQTN4SCxFQUFHakksT0FDSSxDQUFDLEVBQWMyOUQsV0FLbkN5N0QsRUEzSzJCLENBNEtwQyxJQU1GLFNBQVNNLEdBQWUzMUgsR0FDcEIsR0FBSUEsRUFBTXl6SCxXQUN3QixpQkFBbkJ6ekgsRUFBTXl6SCxVQUFtRCxJQUExQnp6SCxFQUFNeXpILFNBQVNuNkgsUUFDckQsTUFBTTA0SCxHQUFhaDZILE9BQU8sYUFHbEMsR0FBSWdJLEVBQU02MUgsVUFDdUIsaUJBQWxCNzFILEVBQU02MUgsU0FBaUQsSUFBekI3MUgsRUFBTTYxSCxRQUFRdjhILFFBQ25ELE1BQU0wNEgsR0FBYWg2SCxPQUFPLGFBR2xDLEdBQUlnSSxFQUFNOHlILGFBQ0E5eUgsRUFBTTh5SCxvQkFBb0JwdkcsYUFDRixLQUExQjFqQixFQUFNOHlILFNBQVN4NUgsUUFDZixNQUFNMDRILEdBQWFoNkgsT0FBTyxpQkFHbEMsR0FBSWdJLEVBQU1xcUgsV0FDd0IsaUJBQW5CcnFILEVBQU1xcUgsVUFBbUQsSUFBMUJycUgsRUFBTXFxSCxTQUFTL3dILFFBQ3JELE1BQU0wNEgsR0FBYWg2SCxPQUFPLG9CQUdsQyxHQUFJZ0ksRUFBTWcwRCxRQUNBaDBELEVBQU1nMEQsZ0JBQWdCZ2lFLGFBQ3hCLE1BQU1oRSxHQUFhaDZILE9BQU8sb0JBR2xDLEdBQUlnSSxFQUFNNnpILFVBQ0E3ekgsRUFBTTZ6SCxrQkFBa0JtQyxhQUMxQixNQUFNaEUsR0FBYWg2SCxPQUFPLG9CQUdsQyxHQUFJZ0ksRUFBTSsxSCxjQUMyQixpQkFBdEIvMUgsRUFBTSsxSCxhQUNnQixJQUE3Qi8xSCxFQUFNKzFILFlBQVl6OEgsUUFDbEIsTUFBTTA0SCxHQUFhaDZILE9BQU87Ozs7Ozs7Ozs7Ozs7Ozs7R0FxQnRDLElBQ0ksR0FBbUMsU0FBVW9MLEdBRTdDLFNBQVM2eUgsSUFDTCxJQUFJdHpILEVBQW1CLE9BQVhTLEdBQW1CQSxFQUFPN0osTUFBTU4sS0FBTUksWUFBY0osS0FJaEUsT0FIQTBKLEVBQU1rNEMsT0FBUyx1QkFDZmw0QyxFQUFNd3lILFVBQVksRUFDbEJ4eUgsRUFBTXN5SCxnQkFBa0IseUJBQ2pCdHlILEVBd0VYLE9BOUVBLG9CQUFVc3pILEVBQW1CN3lILEdBUTdCNnlILEVBQWtCMzlILFVBQVU4OEgsWUFBYyxTQUFVL2dILEdBQ3ZDQSxFQUFROVksT0FDZHViLGtCQUFrQjdkLEtBQUtnOEgsZ0JBQWlCLENBQUVwMkYsUUFBUyxhQU0xRG8zRixFQUFrQjM5SCxVQUFVNDlILG9CQUFzQixTQUFVTCxHQUN4RCxPQUFPLG9CQUFVNThILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlzQyxFQUNKLE9BQU8sc0JBQVl0QyxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsR0FBdUIsaUJBQVo2NUgsR0FBMkMsSUFBbkJBLEVBQVF2OEgsT0FDdkMsTUFBTTA0SCxHQUFhaDZILE9BQU8sYUFFOUIsTUFBTyxDQUFDLEVBQWFpQixLQUFLMUIsSUFBSXMrSCxJQUNsQyxLQUFLLEVBRUQsTUFBTyxDQUFDLEdBRFJ0NkgsRUFBUzJJLEVBQUdqSSxRQUNtQlYsRUFBT3UzSCxjQUFXdHdILFdBUXJFeXpILEVBQWtCMzlILFVBQVU2OUgsaUJBQW1CLFNBQVVOLEVBQVMvQyxHQUM5RCxPQUFPLG9CQUFVNzVILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUkyZ0UsRUFDSixPQUFPLHNCQUFZM2dFLE1BQU0sU0FBVWlMLEdBQy9CLEdBQXVCLGlCQUFaMnhILEdBQTJDLElBQW5CQSxFQUFRdjhILE9BQ3ZDLE1BQU0wNEgsR0FBYWg2SCxPQUFPLGFBRTlCLEdBQWlCLE9BQWI4NkgsR0E3Q2UsS0E2Q01BLEVBQVN4NUgsT0FDOUIsTUFBTTA0SCxHQUFhaDZILE9BQU8saUJBTTlCLE9BSkE0aEUsRUFBVSxDQUNOaThELFFBQVNBLEVBQ1QvQyxTQUFVQSxHQUVQLENBQUMsRUFBYzc1SCxLQUFLay9CLElBQUl5aEMsV0FTM0NxOEQsRUFBa0IzOUgsVUFBVTg5SCxtQkFBcUIsU0FBVVAsR0FDdkQsT0FBTyxvQkFBVTU4SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJNjVILEVBQ0osT0FBTyxzQkFBWTc1SCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLaTlILG9CQUFvQkwsSUFDdEQsS0FBSyxFQUVELEtBREEvQyxFQUFXNXVILEVBQUdqSSxRQUVWLE1BQU0rMUgsR0FBYWg2SCxPQUFPLDBCQUU5QixNQUFPLENBQUMsRUFBYWlCLEtBQUtrVixPQUFPMG5ILElBQ3JDLEtBQUssRUFFRCxPQURBM3hILEVBQUdqSSxPQUNJLENBQUMsRUFBYzYySCxXQUtuQ21ELEVBL0UyQixDQWdGcEMsSUFvQkUsR0FBZ0MsV0FDaEMsU0FBU0ksRUFBZWpvSCxHQUNwQixJQUFJekwsRUFBUTFKLEtBQ1pBLEtBQUttVixTQUFXQSxFQUNoQm5WLEtBQUtxOUgsa0JBQW9CLElBQUksR0FDN0JyOUgsS0FBS3c3SCxvQkFBc0IsSUFBSSxHQUMvQixJQUFJbGpILEVBQU1uRCxFQUFTbUQsSUFFbkIsR0FEQXRZLEtBQUtzWSxJQUFNQSxHQUNOQSxFQUFJaEUsUUFBUWdwSCxtQkFDNEIsaUJBQWxDaGxILEVBQUloRSxRQUFRZ3BILGtCQUNuQixNQUFNdkUsR0FBYWg2SCxPQUFPLGlCQUU5QmlCLEtBQUt3VixTQUFXLENBQ1pOLE9BQVEsV0FBYyxPQUFPeEwsRUFBTXdMLFdBRXZDbFYsS0FBS3U5SCxrQkFBb0IsSUFBSSxHQUFrQnBvSCxHQThUbkQsT0E1VEFpb0gsRUFBZS85SCxVQUFVdzhELFNBQVcsV0FDaEMsT0FBTyxvQkFBVTc3RCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJd2dILEVBQVlnZCxFQUFPQyxFQUFnQkMsRUFBa0JyRCxFQUN6RCxPQUFPLHNCQUFZcjZILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxNQUFxQixhQURyQnk5RyxFQUFheGdILEtBQUsyOUgsNkJBQ3NCLENBQUMsRUFBYSxHQUMvQyxDQUFDLEVBQWEzOUgsS0FBSzQ5SCxpQ0FDOUIsS0FBSyxFQUVEcGQsRUFBYXYxRyxFQUFHakksT0FDaEJpSSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFDRCxHQUFtQixZQUFmeTlHLEVBQ0EsTUFBTXVZLEdBQWFoNkgsT0FBTyx5QkFFOUIsTUFBTyxDQUFDLEVBQWFpQixLQUFLNjlILHNCQUM5QixLQUFLLEVBRUQsT0FEQUwsRUFBUXZ5SCxFQUFHakksT0FDSixDQUFDLEVBQWFoRCxLQUFLODlILHNCQUM5QixLQUFLLEVBRUQsT0FEQUwsRUFBaUJ4eUgsRUFBR2pJLE9BQ2IsQ0FBQyxFQUFhaEQsS0FBSys5SCxvQkFBb0JQLEVBQU9DLElBQ3pELEtBQUssRUFFRCxPQURBQyxFQUFtQnp5SCxFQUFHakksT0FDZixDQUFDLEVBQWFoRCxLQUFLdTlILGtCQUFrQlosMkJBQTJCYSxFQUFNUSxRQUNqRixLQUFLLEVBRUQsT0FEQTNELEVBQWVwdkgsRUFBR2pJLFFBRVAsQ0FBQyxFQUFjaEQsS0FBS2krSCxvQkFBb0JULEVBQU9FLEVBQWtCRCxFQUFnQnBELElBRXJGLENBQUMsRUFBY3I2SCxLQUFLaytILFlBQVlWLEVBQU9FLEVBQWtCRCxZQWNwRkwsRUFBZS85SCxVQUFVNCtILG9CQUFzQixTQUFVVCxFQUFPRSxFQUFrQkQsRUFBZ0JwRCxHQUM5RixPQUFPLG9CQUFVcjZILFVBQU0sT0FBUSxHQUFRLFdBRW5DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQTRReEIsU0FBMkIyNkgsRUFBa0JELEVBQWdCcEQsR0FDekQsSUFBS0EsRUFBYVIsV0FDYlgsR0FBbUJ1RSxFQUFlbnlHLE9BQVErdUcsRUFBYVIsU0FBU3Z1RyxRQUNqRSxPQUFPLEVBRVgsSUFBSTZ5RyxFQUFrQlQsRUFBaUJ0TSxXQUFhaUosRUFBYWpKLFNBQzdEZ04sRUFBY2xGLEdBQW1Cd0UsRUFBaUJsTCxPQUFPLFFBQVM2SCxFQUFhdC9ELE1BQy9Fc2pFLEVBQWdCbkYsR0FBbUJ3RSxFQUFpQmxMLE9BQU8sVUFBVzZILEVBQWFPLFFBQ3ZGLE9BQU91RCxHQUFtQkMsR0FBZUM7Ozs7Ozs7Ozs7Ozs7Ozs7R0FyUk5DLENBQWtCWixFQUFrQkQsRUFBZ0JwRCxHQUU3RGh4SCxLQUFLc0gsTUFDRDBwSCxFQUFhaUMsV0F6RWpCLE9BMEVLLENBQUMsRUFBY2pDLEVBQWFHLFVBRzVCLENBQUMsRUFBY3g2SCxLQUFLbzZILFlBQVlvRCxFQUFPRSxFQUFrQkQsRUFBZ0JwRCxJQU4xRCxDQUFDLEVBQWEsR0FRNUMsS0FBSyxFQUtMLE1BQU8sQ0FBQyxFQUFhcjZILEtBQUt1K0gsa0JBQWtCbEUsRUFBYUcsV0FDekQsS0FBSyxFQU1ELE9BREF2dkgsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFjaEQsS0FBS2srSCxZQUFZVixFQUFPRSxFQUFrQkQsSUFDcEUsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQUtoQ0wsRUFBZS85SCxVQUFVKzZILFlBQWMsU0FBVW9ELEVBQU9FLEVBQWtCRCxFQUFnQnBELEdBQ3RGLE9BQU8sb0JBQVVyNkgsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXcrSCxFQUFjQyxFQUFZaHFILEVBQzlCLE9BQU8sc0JBQVl6VSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBRUQsT0FEQWtJLEVBQUdoSSxLQUFLUSxLQUFLLENBQUMsRUFBRyxFQUFHLENBQUUsSUFDZixDQUFDLEVBQWF6RCxLQUFLdzdILG9CQUFvQnBCLFlBQVlDLEVBQWNyNkgsS0FBS21WLFNBQVV1b0gsRUFBa0JELElBQzdHLEtBQUssRUFZRCxPQVhBZSxFQUFldnpILEVBQUdqSSxPQUNsQnk3SCxFQUFhLENBQ1Q3QixRQUFTWSxFQUFNUSxNQUNmbkUsU0FBVTRELEVBQ1ZYLFlBQWE5OEgsS0FBS21WLFNBQVNtRCxJQUFJaEUsUUFBUWdwSCxrQkFDdkM5QyxTQUFVZ0UsRUFDVmxDLFdBQVlqekgsS0FBS3NILE1BQ2pCeWdILFNBQVVzTSxFQUFpQnRNLFNBQzNCcjJELEtBQU0yaUUsRUFBaUJsTCxPQUFPLFFBQzlCb0ksT0FBUThDLEVBQWlCbEwsT0FBTyxXQUU3QixDQUFDLEVBQWF4eUgsS0FBS3U5SCxrQkFBa0JWLGlCQUFpQjRCLElBQ2pFLEtBQUssRUFFRCxPQURBeHpILEVBQUdqSSxPQUNJLENBQUMsRUFBYWhELEtBQUtxOUgsa0JBQWtCSCxpQkFBaUJNLEVBQU1RLE1BQU9QLElBQzlFLEtBQUssRUFFRCxPQURBeHlILEVBQUdqSSxPQUNJLENBQUMsRUFBY3c3SCxHQUMxQixLQUFLLEVBRUQsT0FEQS9wSCxFQUFNeEosRUFBR2pJLE9BQ0YsQ0FBQyxFQUFhaEQsS0FBS3k2SCxZQUFZSixFQUFhRyxXQUN2RCxLQUFLLEVBRUQsTUFEQXZ2SCxFQUFHakksT0FDR3lSLEVBQ1YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQUtoQzJvSCxFQUFlLzlILFVBQVU2K0gsWUFBYyxTQUFVVixFQUFPRSxFQUFrQkQsR0FDdEUsT0FBTyxvQkFBVXo5SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJMCtILEVBQVVELEVBQ2QsT0FBTyxzQkFBWXorSCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLdzdILG9CQUFvQjMvRCxTQUFTNzdELEtBQUttVixTQUFVdW9ILEVBQWtCRCxJQUNoRyxLQUFLLEVBWUQsT0FYQWlCLEVBQVd6ekgsRUFBR2pJLE9BQ2R5N0gsRUFBYSxDQUNUN0IsUUFBU1ksRUFBTVEsTUFDZm5FLFNBQVU0RCxFQUNWWCxZQUFhOThILEtBQUtzWSxJQUFJaEUsUUFBUWdwSCxrQkFDOUI5QyxTQUFVa0UsRUFDVnBDLFdBQVlqekgsS0FBS3NILE1BQ2pCeWdILFNBQVVzTSxFQUFpQnRNLFNBQzNCcjJELEtBQU0yaUUsRUFBaUJsTCxPQUFPLFFBQzlCb0ksT0FBUThDLEVBQWlCbEwsT0FBTyxXQUU3QixDQUFDLEVBQWF4eUgsS0FBS3U5SCxrQkFBa0JWLGlCQUFpQjRCLElBQ2pFLEtBQUssRUFFRCxPQURBeHpILEVBQUdqSSxPQUNJLENBQUMsRUFBYWhELEtBQUtxOUgsa0JBQWtCSCxpQkFBaUJNLEVBQU1RLE1BQU9QLElBQzlFLEtBQUssRUFFRCxPQURBeHlILEVBQUdqSSxPQUNJLENBQUMsRUFBYzA3SCxXQVcxQ3RCLEVBQWUvOUgsVUFBVW83SCxZQUFjLFNBQVU1dUgsR0FDN0MsT0FBTyxvQkFBVTdMLFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUkyK0gsRUFBY2pCLEVBQ2xCLE9BQU8sc0JBQVkxOUgsTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUVMLE1BQU8sQ0FBQyxFQUFhL0MsS0FBS3UrSCxrQkFBa0IxeUgsSUFDNUMsS0FBSyxFQUdELE9BREFaLEVBQUdqSSxPQUNJLENBQUMsRUFBYWhELEtBQUs2OUgsc0JBQzlCLEtBQUssRUFFRCxPQURBYyxFQUFlMXpILEVBQUdqSSxRQUVYLENBQUMsRUFBYTI3SCxFQUFhQyxZQUFZQyxtQkFEcEIsQ0FBQyxFQUFhLEdBRTVDLEtBQUssRUFFRCxHQURBbkIsRUFBbUJ6eUgsRUFBR2pJLE9BRWxCLE1BQU8sQ0FBQyxFQUFjMDZILEVBQWlCb0IsZUFFM0M3ekgsRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBRUwsTUFBTyxDQUFDLEdBQWMsV0FVdENxNkgsRUFBZS85SCxVQUFVay9ILGtCQUFvQixTQUFVMXlILEdBQ25ELE9BQU8sb0JBQVU3TCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJcTZILEVBQWMwRSxFQUNsQixPQUFPLHNCQUFZLytILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYS9DLEtBQUt1OUgsa0JBQWtCOUMsWUFBWTV1SCxJQUNoRSxLQUFLLEVBQ0R3dUgsRUFBZXB2SCxFQUFHakksT0FDbEJpSSxFQUFHbEksTUFBUSxFQUNmLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYXpELEtBQUt3N0gsb0JBQW9CZixZQUFZejZILEtBQUttVixTQUFVa2xILElBQzdFLEtBQUssRUFFRCxPQURBcHZILEVBQUdqSSxPQUNJLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBSUQsT0FIQSs3SCxFQUFNOXpILEVBQUdqSSxPQUVUa0csUUFBUXBGLE1BQU1pN0gsR0FDUCxDQUFDLEVBQWEsR0FDekIsS0FBSyxFQUFHLE1BQU8sQ0FBQyxXQVFoQzNCLEVBQWUvOUgsVUFBVTArSCxvQkFBc0IsU0FBVWlCLEVBQWdCdkIsR0FDckUsT0FBTyxvQkFBVXo5SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJNDVILEVBQ0osT0FBTyxzQkFBWTU1SCxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFpOEgsRUFBZUosWUFBWUMsbUJBQ3hELEtBQUssRUFFRCxPQURBakYsRUFBZTN1SCxFQUFHakksUUFFUCxDQUFDLEVBQWM0MkgsR0FFbkIsQ0FBQyxFQUFjb0YsRUFBZUosWUFBWTN3SCxVQUFVLENBQ25EZ3hILGlCQUFpQixFQUNqQkMscUJBQXNCekIsYUFhbERMLEVBQWUvOUgsVUFBVTgvSCxrQkFBb0IsV0FDekMsTUFBTXBHLEdBQWFoNkgsT0FBTyw2QkFFOUJxK0gsRUFBZS85SCxVQUFVKy9ILGlCQUFtQixTQUFVQyxHQUNsRCxNQUFNdEcsR0FBYWg2SCxPQUFPLDZCQUU5QnErSCxFQUFlLzlILFVBQVVpZ0ksa0JBQW9CLFNBQVVDLEdBQ25ELE1BQU14RyxHQUFhaDZILE9BQU8sNkJBRTlCcStILEVBQWUvOUgsVUFBVTg4RCxVQUFZLFNBQVVxakUsRUFBaUJDLEVBQVFDLEdBQ3BFLE1BQU0zRyxHQUFhaDZILE9BQU8sNkJBRTlCcStILEVBQWUvOUgsVUFBVXNnSSxlQUFpQixTQUFVSCxFQUFpQkMsRUFBUUMsR0FDekUsTUFBTTNHLEdBQWFoNkgsT0FBTyw2QkFLOUJxK0gsRUFBZS85SCxVQUFVdWdJLDRCQUE4QixTQUFVQyxHQUM3RCxNQUFNOUcsR0FBYWg2SCxPQUFPLHlCQVU5QnErSCxFQUFlLzlILFVBQVU2VixPQUFTLFdBQzlCLE9BQU8sb0JBQVVsVixVQUFNLE9BQVEsR0FBUSxXQUNuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWFoQixRQUFRdVQsSUFBSSxDQUNqQ3RWLEtBQUt1OUgsa0JBQWtCMUIsZ0JBQ3ZCNzdILEtBQUtxOUgsa0JBQWtCeEIsbUJBRS9CLEtBQUssRUFFRCxPQURBNXdILEVBQUdqSSxPQUNJLENBQUMsV0FRNUJvNkgsRUFBZS85SCxVQUFVcytILDBCQUE0QixXQUNqRCxPQUFPbUMsYUFBYXRmLFlBS3hCNGMsRUFBZS85SCxVQUFVdStILDhCQUFnQyxXQUNyRCxPQUFPLG9CQUFVNTlILFVBQU0sT0FBUSxHQUFRLFdBQ25DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBQy9CLE9BQUs2MEgsYUFBYVgsa0JBS1gsQ0FBQyxFQUFjVyxhQUFhWCxxQkFGeEIsQ0FBQyxFQUFjVyxhQUFhdGYsbUJBTW5ENGMsRUFBZS85SCxVQUFVMGdJLHFCQUF1QixXQUM1QyxPQUFPLy9ILEtBQUt1OUgsbUJBRWhCSCxFQUFlLzlILFVBQVUyZ0kscUJBQXVCLFdBQzVDLE9BQU9oZ0ksS0FBS3E5SCxtQkFJaEJELEVBQWUvOUgsVUFBVTRnSSx1QkFBeUIsV0FDOUMsT0FBT2pnSSxLQUFLdzdILHFCQUVUNEIsRUE3VXdCLEdBNlduQyxJQUNJLEdBQThCLFNBQVVqekgsR0FFeEMsU0FBUysxSCxFQUFhL3FILEdBQ2xCLElBQUl6TCxFQUFRUyxFQUFPdk0sS0FBS29DLEtBQU1tVixJQUFhblYsS0FXM0MsT0FWQTBKLEVBQU15MkgsaUJBQW1CLEtBQ3pCcHdILEtBQUt3MkMsaUJBQWlCLFFBQVEsU0FBVS9sRCxHQUNwQ2tKLEVBQU0wMkgsT0FBTzUvSCxNQUVqQnVQLEtBQUt3MkMsaUJBQWlCLDBCQUEwQixTQUFVL2xELEdBQ3REa0osRUFBTTIySCxZQUFZNy9ILE1BRXRCdVAsS0FBS3cyQyxpQkFBaUIscUJBQXFCLFNBQVUvbEQsR0FDakRrSixFQUFNNDJILG9CQUFvQjkvSCxNQUV2QmtKLEVBc1hYLE9BbllBLG9CQUFVdzJILEVBQWMvMUgsR0FpQnhCKzFILEVBQWE3Z0ksVUFBVStnSSxPQUFTLFNBQVV6aEgsR0FDdENBLEVBQU00aEgsVUFBVXZnSSxLQUFLd2dJLFFBQVE3aEgsS0FJakN1aEgsRUFBYTdnSSxVQUFVZ2hJLFlBQWMsU0FBVTFoSCxHQUMzQ0EsRUFBTTRoSCxVQUFVdmdJLEtBQUt5Z0ksYUFBYTloSCxLQUl0Q3VoSCxFQUFhN2dJLFVBQVVpaEksb0JBQXNCLFNBQVUzaEgsR0FDbkRBLEVBQU00aEgsVUFBVXZnSSxLQUFLMGdJLHFCQUFxQi9oSCxLQWM5Q3VoSCxFQUFhN2dJLFVBQVVtaEksUUFBVSxTQUFVN2hILEdBQ3ZDLE9BQU8sb0JBQVUzZSxVQUFNLE9BQVEsR0FBUSxXQUNuQyxJQUFJMmdJLEVBQStCQyxFQUFxQkMsRUFBbUJDLEVBQUtoUyxFQUFTaVMsRUFDekYsT0FBTyxzQkFBWS9nSSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsSUFBSzRiLEVBQU1qVSxLQUNQLE1BQU8sQ0FBQyxHQUVaLElBQ0lpMkgsRUFBYWhpSCxFQUFNalUsS0FBSzhwRixPQUU1QixNQUFPMWxGLEdBRUgsTUFBTyxDQUFDLEdBRVosTUFBTyxDQUFDLEVBQWE5TyxLQUFLZ2hJLHNCQUM5QixLQUFLLEVBRUQsT0FEb0IvMUgsRUFBR2pJLE9BR1osQ0FBQyxFQUFjaEQsS0FBS2loSSw0QkFBNEJOLEtBRTNEQyxFQUFzQjVnSSxLQUFLa2hJLHFCQUFxQlAsS0FFaERFLEVBQW9CRCxFQUFvQnhvQyxPQUFTLEdBQzFDLENBQUMsRUFBYXA0RixLQUFLNjlILHVCQUZPLENBQUMsRUFBYSxHQUduRCxLQUFLLEVBUUQsT0FQQWlELEVBQU03MUgsRUFBR2pJLE9BQ1Q4ckgsRUFBVThSLEVBQW9COVIsUUFDOUJpUyxFQUFhakIsYUFBYWlCLFdBQ3RCalMsR0FBV2lTLEdBQWNqUyxFQUFRenVILE9BQVMwZ0ksR0FDMUM3M0gsUUFBUW1DLEtBQUssOEJBQWdDMDFILEVBQWEseURBR3ZELENBQUMsRUFBY0QsRUFBSUssaUJBQWlCTixFQUFtQkQsSUFDbEUsS0FBSyxFQUNELE9BQUs1Z0ksS0FBS21nSSxpQkFDSCxDQUFDLEVBQWFuZ0ksS0FBS21nSSxpQkFBaUJRLElBRFIsQ0FBQyxFQUFhLEdBRXJELEtBQUssRUFFRCxPQURBMTFILEVBQUdqSSxPQUNJLENBQUMsR0FDWixLQUFLLEVBQUcsTUFBTyxDQUFDLFdBS2hDazlILEVBQWE3Z0ksVUFBVW9oSSxhQUFlLFNBQVVsRixHQUM1QyxPQUFPLG9CQUFVdjdILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUkyK0gsRUFBYzNFLEVBQU9PLEVBQTBCRixFQUNuRCxPQUFPLHNCQUFZcjZILE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBa0ksRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYXpELEtBQUs2OUgsc0JBQzlCLEtBQUssRUFFRCxPQURBYyxFQUFlMXpILEVBQUdqSSxPQUNYLENBQUMsRUFBYSxHQUN6QixLQUFLLEVBRUQsTUFEQWczSCxFQUFRL3VILEVBQUdqSSxPQUNMKzFILEdBQWFoNkgsT0FBTyx3QkFBcUQsQ0FDM0VvN0gsVUFBV0gsSUFFbkIsS0FBSyxFQUVELE9BREEvdUgsRUFBR2hJLEtBQUtRLEtBQUssQ0FBQyxFQUFHLEVBQUcsQ0FBRSxJQUNmLENBQUMsRUFBYWs3SCxFQUFhQyxZQUFZQyxtQkFDbEQsS0FBSyxFQUVELE9BREE1ekgsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFHRCxPQUZBdTNILEVBQVF0dkgsRUFBR2pJLE9BRUosQ0FBQyxFQURZaEQsS0FBSysvSCx1QkFDY3BELDJCQUEyQmdDLEVBQWFYLFFBQ25GLEtBQUssRUFFRCxLQURBM0QsRUFBZXB2SCxFQUFHakksUUFJZCxNQUFNdTNILEVBR1YsTUFBTyxDQUFDLEVBQWF2NkgsS0FBS3k2SCxZQUFZSixFQUFhRyxXQUN2RCxLQUFLLEVBR0QsTUFEQXZ2SCxFQUFHakksT0FDR3UzSCxFQUNWLEtBQUssRUFBRyxNQUFPLENBQUMsV0FLaEMyRixFQUFhN2dJLFVBQVVxaEkscUJBQXVCLFNBQVUvaEgsR0FDcEQsT0FBTyxvQkFBVTNlLFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUkyZ0ksRUFBWVMsRUFBTUMsRUFBY0MsRUFDcEMsT0FBTyxzQkFBWXRoSSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQ0QsS0FBSzRiLEVBQU0wcUcsY0FDTjFxRyxFQUFNMHFHLGFBQWEzK0csTUFDbkJpVSxFQUFNMHFHLGFBQWEzK0csS0FBWSxTQUVoQyxNQUFPLENBQUMsR0FFUCxHQUFJaVUsRUFBTW9XLE9BSVgsTUFBTyxDQUFDLEdBTVosR0FIQXBXLEVBQU00aUgsMkJBQ041aUgsRUFBTTBxRyxhQUFhdDdHLFVBQ25CNHlILEVBQWFoaUgsRUFBTTBxRyxhQUFhMytHLEtBQVksU0FDNUIyK0csYUFFWixNQUFPLENBQUMsR0FJWixLQUZBK1gsRUFBUVQsRUFBV2EsWUFBY2IsRUFBV2EsV0FBV0osTUFDbkRULEVBQVd0WCxhQUFhb1ksY0FDakIsQ0FDUCxLQUFJZCxFQUFXajJILE1BOTFDdEIsb0JBODFDZ0RpMkgsRUFBV2oySCxNQUtoRCxNQUFPLENBQUMsR0FKUjAySCxFQUFPcnhILEtBQUs4NEYsU0FBUzY0QixPQU83QixNQUFPLENBQUMsRUFBYTFoSSxLQUFLMmhJLGlCQUFpQlAsSUFDL0MsS0FBSyxFQUVELE9BREFDLEVBQWVwMkgsRUFBR2pJLFFBQ1MsQ0FBQyxFQUFhLEdBQ2xDLENBQUMsRUFBYStNLEtBQUtvMUMsUUFBUXk4RSxXQUFXUixJQUNqRCxLQUFLLEVBS0QsT0FIQUMsRUFBZXAySCxFQUFHakksT0FHWCxDQUFDLEdBOE5qQjJ1SCxFQTlOb0MsSUErTnhDLElBQUk1dkgsU0FBUSxTQUFVQyxHQUN6QnV1QixXQUFXdnVCLEVBQVMydkgsUUEvTlIsS0FBSyxFQUlELE9BREExbUgsRUFBR2pJLE9BQ0ksQ0FBQyxFQUFhLEdBQ3pCLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXErSCxFQUFhUSxTQUMxQyxLQUFLLEVBQ0RSLEVBQWVwMkgsRUFBR2pJLE9BQ2xCaUksRUFBR2xJLE1BQVEsRUFDZixLQUFLLEVBQ0QsT0FBS3MrSCxVQU1FVixFQUFXdFgsb0JBQ1hzWCxFQUFXYSxXQUNsQkYsRUFBY1EsR0FBYWpKLEdBQVlrSixxQkFBc0JwQixHQUd0RCxDQUFDLEVBQWMzZ0ksS0FBS2dpSSx3QkFBd0JYLEVBQWNDLEtBVHRELENBQUMsR0FpTnBDLElBQWUzUDs7Ozs7Ozs7Ozs7Ozs7OztXQWpNWHVPLEVBQWE3Z0ksVUFBVTZoSSxxQkFBdUIsU0FBVVAsR0FDcEQsSUFBSTExSCxFQUNKLEdBQUswMUgsR0FHa0MsaUJBQTVCQSxFQUFXdFgsYUFBdEIsQ0FHQSxJQUFJNFksRUFBMEIsbUJBQVMsR0FBSXRCLEVBQVd0WCxjQU10RCxPQURBNFksRUFBd0J2M0gsS0FBTyxtQkFBUyxtQkFBUyxHQUFJaTJILEVBQVd0WCxhQUFhMytHLFFBQVFPLEVBQUssSUFBYyxRQUFJMDFILEVBQVkxMUgsSUFDakhnM0gsSUFpQlgvQixFQUFhN2dJLFVBQVV1Z0ksNEJBQThCLFNBQVUvMUgsR0FDM0QsSUFBS0EsR0FBZ0MsbUJBQWJBLEVBQ3BCLE1BQU1rdkgsR0FBYWg2SCxPQUFPLGdDQUU5QmlCLEtBQUttZ0ksaUJBQW1CdDJILEdBUTVCcTJILEVBQWE3Z0ksVUFBVXNpSSxpQkFBbUIsU0FBVTc5RyxHQUNoRCxPQUFPLG9CQUFVOWpCLFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUlraUksRUFBV0MsRUFBWUMsRUFBZ0Iza0ksRUFDM0MsT0FBTyxzQkFBWXVDLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFFRCxPQURBbS9ILEVBQVksSUFBSUcsSUFBSXYrRyxFQUFLL1QsS0FBSzg0RixTQUFTMEYsTUFBTUEsS0FDdEMsQ0FBQyxFQUFhK3pCLE1BQ3pCLEtBQUssRUFHRCxJQUZBSCxFQUFhbDNILEVBQUdqSSxPQUNoQm8vSCxFQUFpQixLQUNaM2tJLEVBQUksRUFBR0EsRUFBSTBrSSxFQUFXOWhJLE9BQVE1QyxJQUcvQixHQUZrQixJQUFJNGtJLElBQUlGLEVBQVcxa0ksR0FBR3FtQixJQUFLL1QsS0FBSzg0RixTQUFTMEYsTUFDdERBLE9BQ21CMnpCLEVBQVcsQ0FDL0JFLEVBQWlCRCxFQUFXMWtJLEdBQzVCLE1BR1IsTUFBTyxDQUFDLEVBQWMya0ksV0FjMUNsQyxFQUFhN2dJLFVBQVUyaUksd0JBQTBCLFNBQVU5OUUsRUFBUW4rQyxHQUMvRCxPQUFPLG9CQUFVL0YsVUFBTSxPQUFRLEdBQVEsV0FDbkMsT0FBTyxzQkFBWUEsTUFBTSxTQUFVaUwsR0FHL0IsSUFBS2k1QyxFQUNELE1BQU02MEUsR0FBYWg2SCxPQUFPLDJCQUc5QixPQURBbWxELEVBQU9xK0UsWUFBWXg4SCxHQUNaLENBQUMsVUFVcEJtNkgsRUFBYTdnSSxVQUFVMmhJLG1CQUFxQixXQUN4QyxPQUFPLG9CQUFVaGhJLFVBQU0sT0FBUSxHQUFRLFdBRW5DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBQy9CLE9BQVFBLEVBQUdsSSxPQUNQLEtBQUssRUFBRyxNQUFPLENBQUMsRUFBYXUvSCxNQUM3QixLQUFLLEVBRUQsTUFBTyxDQUFDLEVBREtyM0gsRUFBR2pJLE9BQ2lCOGxCLE1BQUssU0FBVW83QixHQUN4QyxNQUFrQyxZQUEzQkEsRUFBT3NDLGtCQUdUdEMsRUFBT3BnQyxJQUFJaWEsV0FBVyxtQ0FjdkRtaUcsRUFBYTdnSSxVQUFVNGhJLDRCQUE4QixTQUFVTixHQUMzRCxPQUFPLG9CQUFVM2dJLFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUltaUksRUFBWWIsRUFDWjUzSCxFQUFRMUosS0FDWixPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWF1L0gsTUFDN0IsS0FBSyxFQUdELE9BRkFILEVBQWFsM0gsRUFBR2pJLE9BQ2hCcytILEVBQWNRLEdBQWFqSixHQUFZMkosa0JBQW1CN0IsR0FDbkQsQ0FBQyxFQUFhNStILFFBQVF1VCxJQUFJNnNILEVBQVdseEgsS0FBSSxTQUFVaXpDLEdBQ2xELE9BQU94NkMsRUFBTXM0SCx3QkFBd0I5OUUsRUFBUW85RSxRQUV6RCxLQUFLLEVBRUQsT0FEQXIySCxFQUFHakksT0FDSSxDQUFDLFdBUzVCazlILEVBQWE3Z0ksVUFBVXcrSCxtQkFBcUIsV0FDeEMsT0FBTyxvQkFBVTc5SCxVQUFNLE9BQVEsR0FBUSxXQUNuQyxPQUFPLHNCQUFZQSxNQUFNLFNBQVVpTCxHQUMvQixNQUFPLENBQUMsRUFBYzhFLEtBQUs0dUgscUJBUXZDdUIsRUFBYTdnSSxVQUFVeStILG1CQUFxQixXQUN4QyxPQUFPLG9CQUFVOTlILFVBQU0sT0FBUSxHQUFRLFdBQ25DLElBQUl3OUgsRUFBT2lGLEVBQ1gsT0FBTyxzQkFBWXppSSxNQUFNLFNBQVVpTCxHQUMvQixPQUFRQSxFQUFHbEksT0FDUCxLQUFLLEVBQUcsTUFBTyxDQUFDLEVBQWEvQyxLQUFLNjlILHNCQUNsQyxLQUFLLEVBRUQsS0FEQUwsRUFBUXZ5SCxFQUFHakksUUFFUCxNQUFNKzFILEdBQWFoNkgsT0FBTyw0QkFFOUIsTUFBTyxDQUFDLEVBQWFpQixLQUFLZ2dJLHVCQUF1Qi9DLG9CQUFvQk8sRUFBTVEsUUFDL0UsS0FBSyxFQUVELE9BQTRCLE9BRDVCeUUsRUFBdUJ4M0gsRUFBR2pJLFFBRWYsQ0FBQyxFQUFjZzJILElBRW5CLENBQUMsRUFBY3lKLFdBS25DdkMsRUFwWXNCLENBcVkvQixJQUNGLFNBQVNvQyxLQUNMLE9BQU92eUgsS0FBS28xQyxRQUFRdTlFLFNBQVMsQ0FDekI1dkgsS0FBTSxTQUNONnZILHFCQUFxQixJQUk3QixTQUFTYixHQUFhYyxFQUFTaHNDLEdBQzNCLE1BQU8sQ0FDSGlzQyxzQkFBdUJELEVBQ3ZCRSxzQkFBdUJsc0MsR0F5Qi9CLElBbUJJLEdBQWtDLFNBQVV6c0YsR0FLNUMsU0FBUzQ0SCxFQUFpQjV0SCxHQUN0QixJQUFJekwsRUFBUVMsRUFBT3ZNLEtBQUtvQyxLQUFNbVYsSUFBYW5WLEtBYTNDLE9BWkEwSixFQUFNczVILGtCQUFvQixLQUMxQnQ1SCxFQUFNdTVILG9CQUFzQixLQUM1QnY1SCxFQUFNdzVILGdCQUFrQixLQUV4Qng1SCxFQUFNeTVILHFCQUF1QixLQUM3Qno1SCxFQUFNMDVILGtCQUFvQiwyQkFBZ0IsU0FBVXQxSCxHQUNoRHBFLEVBQU13NUgsZ0JBQWtCcDFILEtBRTVCcEUsRUFBTTI1SCx1QkFBeUIsMkJBQWdCLFNBQVV2MUgsR0FDckRwRSxFQUFNeTVILHFCQUF1QnIxSCxLQUVqQ3BFLEVBQU00NUgsMEJBQ0M1NUgsRUE4T1gsT0FoUUEsb0JBQVVxNUgsRUFBa0I1NEgsR0E0QjVCNDRILEVBQWlCMWpJLFVBQVU4L0gsa0JBQW9CLFdBQzNDLE9BQU8sb0JBQVVuL0gsVUFBTSxPQUFRLEdBQVEsV0FDbkMsSUFBSXVqSSxFQUNKLE9BQU8sc0JBQVl2akksTUFBTSxTQUFVaUwsR0FDL0IsT0FBUUEsRUFBR2xJLE9BQ1AsS0FBSyxFQUNELE1BQWdDLFlBQTVCKzhILGFBQWF0ZixXQUNOLENBQUMsR0FFTCxDQUFDLEVBQWFzZixhQUFhWCxxQkFDdEMsS0FBSyxFQUVELEdBQXlCLGFBRHpCb0UsRUFBbUJ0NEgsRUFBR2pJLFFBRWxCLE1BQU8sQ0FBQyxHQUVQLEtBQXlCLFdBQXJCdWdJLEVBQ0N4SyxHQUFhaDZILE9BQU8sc0JBR3BCZzZILEdBQWFoNkgsT0FBTyw4QkFhbERna0ksRUFBaUIxakksVUFBVSsvSCxpQkFBbUIsU0FBVVQsR0FDcEQsS0FBTUEsYUFBd0I2RSwyQkFDMUIsTUFBTXpLLEdBQWFoNkgsT0FBTyw0QkFFOUIsR0FBOEIsTUFBMUJpQixLQUFLZ2pJLGtCQUNMLE1BQU1qSyxHQUFhaDZILE9BQU8sMkJBRTlCaUIsS0FBS2dqSSxrQkFBb0JyRSxHQVE3Qm9FLEVBQWlCMWpJLFVBQVVpZ0ksa0JBQW9CLFNBQVVtRSxHQUNyRCxHQUF5QixpQkFBZEEsRUFDUCxNQUFNMUssR0FBYWg2SCxPQUFPLDRCQUU5QixHQUFnQyxNQUE1QmlCLEtBQUtpakksb0JBQ0wsTUFBTWxLLEdBQWFoNkgsT0FBTyxtQ0FFOUIsSUFBSTJrSSxFQUFZM0ksR0FBb0IwSSxHQUNwQyxHQUF5QixLQUFyQkMsRUFBVXJqSSxPQUNWLE1BQU0wNEgsR0FBYWg2SCxPQUFPLHNDQUU5QmlCLEtBQUtpakksb0JBQXNCUyxHQVUvQlgsRUFBaUIxakksVUFBVTg4RCxVQUFZLFNBQVVqdUQsRUFBZ0JwSyxFQUFPNi9ILEdBQ3BFLE1BQThCLG1CQUFuQnoxSCxFQUNBbE8sS0FBS29qSSxrQkFBa0JsMUgsRUFBZ0JwSyxFQUFPNi9ILEdBRzlDM2pJLEtBQUtvakksa0JBQWtCbDFILElBVXRDNjBILEVBQWlCMWpJLFVBQVVzZ0ksZUFBaUIsU0FBVXp4SCxFQUFnQnBLLEVBQU82L0gsR0FDekUsTUFBOEIsbUJBQW5CejFILEVBQ0FsTyxLQUFLcWpJLHVCQUF1Qm4xSCxFQUFnQnBLLEVBQU82L0gsR0FHbkQzakksS0FBS3FqSSx1QkFBdUJuMUgsSUFXM0M2MEgsRUFBaUIxakksVUFBVXVrSSwrQkFBaUMsU0FBVWpGLEdBQ2xFLElBQUlrRixFQUFnQmxGLEVBQWFtRixZQUFjbkYsRUFBYW9GLFNBQVdwRixFQUFhNTZFLE9BQ3BGLE9BQU8sSUFBSWhpRCxTQUFRLFNBQVVDLEVBQVNDLEdBQ2xDLEdBQUs0aEksRUFPTCxHQUE0QixjQUF4QkEsRUFBY3pwRSxNQUlsQixHQUE0QixjQUF4QnlwRSxFQUFjenBFLE1BQWxCLENBSUEsSUFBSTRwRSxFQUFzQixXQUN0QixHQUE0QixjQUF4QkgsRUFBY3pwRSxNQUNkcDRELEVBQVEyOEgsT0FFUCxJQUE0QixjQUF4QmtGLEVBQWN6cEUsTUFLbkIsT0FKQW40RCxFQUFPODJILEdBQWFoNkgsT0FBTyxxQkFNL0I4a0ksRUFBY3A5RSxvQkFBb0IsY0FBZXU5RSxJQUVyREgsRUFBY3Q5RSxpQkFBaUIsY0FBZXk5RSxRQWhCMUMvaEksRUFBTzgySCxHQUFhaDZILE9BQU8sMEJBSjNCaUQsRUFBUTI4SCxRQU5SMThILEVBQU84MkgsR0FBYWg2SCxPQUFPLHFCQWlDdkNna0ksRUFBaUIxakksVUFBVXcrSCxtQkFBcUIsV0FDNUMsSUFBSW4wSCxFQUFRMUosS0FDWixPQUFJQSxLQUFLZ2pJLGtCQUNFaGpJLEtBQUs0akksK0JBQStCNWpJLEtBQUtnakksb0JBSXBEaGpJLEtBQUtnakksa0JBQW9CLEtBQ2xCaDVILFVBQVU2NUgsY0FDWkksU0FsTVMsNEJBa01pQixDQUMzQmpHLE1BbE1XLHlDQW9NVmwwSCxPQUFNLFNBQVVnRixHQUNqQixNQUFNaXFILEdBQWFoNkgsT0FBTyxvQ0FBdUUsQ0FDN0ZtbEksb0JBQXFCcDFILEVBQUkvSSxhQUc1QnZELE1BQUssU0FBVW04SCxHQUNoQixPQUFPajFILEVBQU1rNkgsK0JBQStCakYsR0FBY244SCxNQUFLLFdBTzNELE9BTkFrSCxFQUFNczVILGtCQUFvQnJFLEVBSzFCQSxFQUFhM3hILFNBQ04yeEgsVUFRbkJvRSxFQUFpQjFqSSxVQUFVeStILG1CQUFxQixXQUM1QyxPQUFPLG9CQUFVOTlILFVBQU0sT0FBUSxHQUFRLFdBQ25DLE9BQU8sc0JBQVlBLE1BQU0sU0FBVWlMLEdBQy9CLE9BQUlqTCxLQUFLaWpJLG9CQUNFLENBQUMsRUFBY2pqSSxLQUFLaWpJLHFCQUV4QixDQUFDLEVBQWNqSyxXQVdsQytKLEVBQWlCMWpJLFVBQVVpa0ksd0JBQTBCLFdBQ2pELElBQUk1NUgsRUFBUTFKLEtBQ1pnSyxVQUFVNjVILGNBQWN0OUUsaUJBQWlCLFdBQVcsU0FBVTVuQyxHQUFTLE9BQU8sb0JBQVVqVixPQUFPLE9BQVEsR0FBUSxXQUMzRyxJQUFJdUIsRUFBSTQzSCxFQUF1QkMsRUFBdUJwNEgsRUFBTXk1SCxFQUM1RCxPQUFPLHNCQUFZbmtJLE1BQU0sU0FBVWtMLEdBQy9CLE9BQVFBLEVBQUduSSxPQUNQLEtBQUssRUFDRCxPQUFLNGIsRUFBTWpVLE1BQ05pVSxFQUFNalUsS0FBS200SCx1QkFDWGxrSCxFQUFNalUsS0FBS280SCx1QkFJaEI3M0gsRUFBSzBULEVBQU1qVSxLQUFNbTRILEVBQXdCNTNILEVBQUc0M0gsc0JBQXVCQyxFQUF3QjczSCxFQUFHNjNILHNCQUMxRjlpSSxLQUFLa2pJLGlCQUNMbGpJLEtBQUtrakksZ0JBQWdCOWdJLEtBQUswZ0ksSUFFOUJwNEgsRUFBT280SCxFQUFzQnA0SCxPQWgyRGhDLG9CQWsyRHlCQSxHQUNzQixNQUF4Q0EsRUEvMURRLGlCQWcyRFp5NUgsRUFzQnhCLFNBQXNCQyxHQUNsQixPQUFRQSxHQUNKLEtBQUt2TCxHQUFZa0oscUJBQ2IsTUFBTyxvQkFDWCxLQUFLbEosR0FBWTJKLGtCQUNiLE1BQU8sMEJBQ1gsUUFDSSxNQUFNLElBQUl2OEgsT0E3QmNvK0gsQ0FBYXhCLEdBQ2xCLENBQUMsRUFBYTdpSSxLQUFLbVYsU0FBU212SCxrQkFBa0JobUksUUFGSSxDQUFDLEVBQWEsSUFUNUQsQ0FBQyxHQVloQixLQUFLLEVBQ1c0TSxFQUFHbEksT0FDTGcxSCxTQUFTbU0sRUFFbkIsQ0FDSUksYUFBYzc1SCxFQTEyRG5CLGtCQTIyREs4NUgsV0FBWTk1SCxFQTUyRG5CLG1CQTYyRE8rNUgsYUFBYy81SCxFQTMyRG5CLGlCQTQyREtnNkgsb0JBQXFCOXpILEtBQUtDLE1BQU14SCxLQUFLc0gsTUFBUSxPQUlqRHpGLEVBQUduSSxNQUFRLEVBQ2YsS0FBSyxFQUFHLE1BQU8sQ0FBQyxhQUdyQixJQUVKZ2dJLEVBalEwQixDQWtRbkMsSUFZRixJQUFJLEdBQU8sc0JBQ1AsR0FBVSxRQWlEZCxTQUFTNEIsS0FDTCxPQUFJNTBILE1BQVEsNkJBQThCQSxLQXlCbEMsZ0JBQWlCQSxNQUNyQixpQkFBa0JBLE1BQ2xCeXpILDBCQUEwQm5rSSxVQUFVQyxlQUFlLHFCQUNuRHNsSSxpQkFBaUJ2bEksVUFBVUMsZUFBZSxVQWZ0QzBLLFVBQVU2NkgsZUFDZCxrQkFBbUI3NkgsV0FDbkIsZ0JBQWlCa0csUUFDakIsaUJBQWtCQSxRQUNsQixVQUFXQSxRQUNYc3pILDBCQUEwQm5rSSxVQUFVQyxlQUFlLHFCQUNuRHNsSSxpQkFBaUJ2bEksVUFBVUMsZUFBZTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFuRGxELFNBQTJCNlUsR0FDdkIsSUF1Qkkyd0gsRUFBbUIsQ0FDbkJILFlBQWFBLElBRWpCeHdILEVBQVNxQixTQUFTdUQsa0JBQWtCLElBQUksWUExQnBCLGFBQ0EsU0FBVXZGLEdBRTFCLElBR0l1eEgsRUFBbUIsQ0FDbkJ6c0gsSUFKTTlFLEVBQVV1QyxZQUFZLE9BQU8xQixlQUtuQ2lqSCxjQUpnQjlqSCxFQUFVdUMsWUFBWSxpQkFBaUIxQixlQUt2RGl3SCxrQkFKb0I5d0gsRUFBVXVDLFlBQVksdUJBTTlDLElBQUs0dUgsS0FDRCxNQUFNNUwsR0FBYWg2SCxPQUFPLHVCQUU5QixPQUFJZ1IsTUFBUSw2QkFBOEJBLEtBRS9CLElBQUksR0FBYWcxSCxHQUlqQixJQUFJLEdBQWlCQSxLQU00QyxVQUF1QjN4SCxnQkFBZ0IweEgsSUFDdkgzd0gsRUFBU29FLGdCQUFnQixHQUFNLElBRW5DeXNILENBQWtCLEtDamtFbEIsZ0JBWHVCLENBQ3JCclUsT0FBUSwwQ0FDUnNVLFdBQVksOENBQ1pDLFlBQWEscURBQ2JoNUcsVUFBVyw4QkFDWGk1RyxjQUFlLDBDQUNmN0gsa0JBQW1CLGVBQ25CL0wsTUFBTyw4QyxtMUNDUUgsR0FBTSxJQUFJLEVBS1Y2VCxHQUFNLElESEwsTUFDTCxZQUFZOXNILEdBRVZ0WSxLQUFLcWxJLFVBQVksY0FHakJybEksS0FBS3FsSSxVQUFVbHBFLFVBQVVtcEUsSUFDdkJwOEgsUUFBUTRPLElBQUkscUJBQXNCd3RILEdBQ2xDLE1BQU01NkgsRUFBTzQ2SCxFQUFRNTZILEtBQ3JCNE4sRUFBSTAwRyxxQkFBcUJ1WSxvQkFBb0I3NkgsS0FJL0MxSyxLQUFLcWxJLFVBQVUxRixlQUFlLEtBQzVCMy9ILEtBQUtxbEksVUFBVXhwRSxXQUFXcjVELEtBQUtnakksSUFDN0J0OEgsUUFBUTRPLElBQUksdUJBQXdCMHRILEdBRXBDLGNBQXFCOXBHLFdBQVcsYUFBYTRRLElBQUlrNUYsR0FDOUN0eEgsSUFBSSxDQUFFNHpHLE1BQU94dkcsRUFBSSswRyxTQUFTblgsaUJBQzVCcHNHLE1BQU1nRixJQUNQNUYsUUFBUTRPLElBQUksc0NBQXVDaEosT0FRdkRvQixPQUFPdTFILGtCQUFvQixXQUN6QixjQUFxQjVwRSxXQUNsQnI1RCxLQUFLcUosSUFDSjNDLFFBQVE0TyxJQUFJak0sS0FFYi9CLE1BQU1nRixJQUNMNUYsUUFBUXBGLE1BQU1nTCxNQVFwQm9CLE9BQU91NEcseUJBQTJCLFdBQzNCaWQsZUFBZS8rRSxRQUFRLGdCQUMxQixjQUFxQmtWLFdBQVdyNUQsS0FBS3FKLElBQy9CQSxHQUNGM0MsUUFBUTRPLElBQUksdUJBQXdCak0sR0FFcEMsY0FBcUI2dkIsV0FBVyxhQUFhNFEsSUFBSXpnQyxHQUM5Q3FJLElBQUksQ0FBRTR6RyxNQUFPeHZHLEVBQUkrMEcsU0FBU25YLGVBRTdCd3ZCLGVBQWU5K0UsUUFBUSxjQUFlLzZDLElBR3RDN0wsS0FBSzJsSSxvQ0FFTjc3SCxNQUFNZ0YsSUFDUDVGLFFBQVFwRixNQUFNLDJCQUE0QmdMLE1BV2xELGtDQUNFNUYsUUFBUTRPLElBQUksMENBQ1osY0FBcUJxbkgsb0JBQW9CMzhILEtBQUssS0FDNUMwRyxRQUFRNE8sSUFBSSxvQ0FDWjVILE9BQU91NEcsNkJBQ04zK0csTUFBTWdGLElBQ1A1RixRQUFRcEYsTUFBTSxzQ0FBdUNnTCxPQ3ZFakMsS0FHMUJvQixPQUFPbS9HLGtCQUFtQixFQU10QixrQkFBbUJybEgsV0FDckJrRyxPQUFPcTJDLGlCQUFpQixRQUFRLFdBQzlCdjhDLFVBQVU2NUgsY0FBY0ksU0FBUyxzQkFDOUJ6aEksTUFBSyxTQUFBcytILEdBQ0o1M0gsUUFBUTRPLElBQUksNkJBQThCZ3BILEdBRXRDNXdILE9BQU9tL0csa0JBQWtCK1YsR0FBSUMsVUFBVWpHLGlCQUFpQjBCLE1BRTdEaDNILE9BQU0sU0FBQWdGLEdBQ0w1RixRQUFRcEYsTUFBTSx1QkFBd0JnTCxTQVE5Q29CLE9BQU8rekcsZUFBaUIsV0FDdEIsT0FBTyxHQUFJb0osVUFRVG45RyxPQUFPMDFILGtCQUNnQixJQUFJQSxpQkFBaUIsZUFFN0JDLFVBQVksU0FBQXJsSSxHQUNMLG9CQUFsQkEsRUFBRWtLLEtBQUtxcUIsU0FDVDdyQixRQUFRNE8sSUFBSSxpQ0FDWixHQUFJazFHLHFCQUFxQnVZLG9CQUFvQi9rSSxFQUFFa0ssS0FBS3FVLFdBSXhEN1YsUUFBUW1DLEtBQUssbURBTVUrVCxTQUFTcy9GLGVBQWUsb0JBRWhDL0IsUUFBVSxXQUN6QnY5RixTQUFTcy9GLGVBQWUsbUJBQW1CL0IsUUFBVSxLQUNyRCxHQUFJc0UsUUFBUXRnRyxNQUFNMmhHLFdBQWEsU0FDL0IsR0FBSXZCLGdCQUFnQm5GLFVBQVUza0YsSUFBSSxVQUVsQyxHQUFJNUcsTUFBTSxzQ0FPWixJQUdJeTFHLEdBSEVDLEdBQVksMkVBS2hCRCxHQUQwQixlQUF4QixpT0FBWUUsUUFDSiwwQ0FFQSwwQ0FJWixJQWFRck8sR0FiRnNPLEdBQWlCLENBQUMsOERBR2xCQyxHQUFTLHdDQUVUQyxHQUFrQi9tSCxTQUFTcy9GLGVBQWUsZ0JBQzFDMG5CLEdBQWdCaG5ILFNBQVNzL0YsZUFBZSxjQXdCOUMsU0FBUzJuQixLQUNQbmhELEtBQUtoaEMsT0FBT29pRixLQUFLLENBQ2YzVixPQUFRbVYsR0FDUm5zRixTQUFVb3NGLEdBQ1ZRLGNBQWVOLEdBQ2ZqSSxNQUFPa0ksS0FDTjFqSSxNQUFLLFdBRU4waUYsS0FBS3NoRCxNQUFNQyxrQkFBa0JDLFdBQVdwK0QsT0FBT3ErRCxJQUcvQ0EsR0FBbUJ6aEQsS0FBS3NoRCxNQUFNQyxrQkFBa0JDLFdBQVdwb0ksT0FDM0Q2bkksR0FBZ0J4cEIsUUFBVWlxQixHQUMxQlIsR0FBY3pwQixRQUFVa3FCLE1BQ3ZCLFNBQVUvaUksR0FDWG9GLFFBQVE0TyxJQUFJcE0sS0FBS3NHLFVBQVVsTyxFQUFPLEtBQU0sT0FTNUMsU0FBUzZpSSxHQUFtQkQsR0FDMUIsR0FBSUEsRUFBWSxDQUNkeDlILFFBQVE0TyxJQUFJLGVBRVosSUFBTW9VLEVBQVksRUFBU21pRixhQUFhbitGLE9BQU8yNEYsU0FBUzBGLE1BQU1ydUYsR0FFMUQsR0FBSXlyRyxtQkFBbUJ3RCxtQkFDekIsR0FBSXZILG1CQUdOLEdBQUlzRixjQUVKLEdBQUk3OEYsTUFBTW5FLFFBRVZoakIsUUFBUTRPLElBQUksa0JBK0JkLEdBQUl5ekcsZ0JBQWdCdWIsR0FBaUIsVUFBVSxHQUUvQzFuSCxTQUFTRyxjQUFjLFVBQVVvQixNQUFNOCtGLFFBQVUsT0FDakRyZ0csU0FBU0csY0FBYyxRQUFRb0IsTUFBTTgrRixRQUFVLE9BQy9DLEdBQUlzTSxzQkFBc0JwckcsTUFBTTgrRixRQUFVLE9BSzFDLEVBQVMvUSxVQUFVLEdBQUltWSxjQUN2Qm9ILFFBQVFDLGFBQWEsQ0FBRWtCLEtBQU0sa0JBQW9CLGlCQUFrQnZtQixTQUFTMEYsS0FBS2pqRyxRQUFRdTlGLFNBQVMvZSxPQUFRLEtBaEM1RyxTQUFTODhDLEtBQ1AxaEQsS0FBS3NoRCxNQUFNQyxrQkFBa0JNLFNBTy9CLFNBQVNGLEtBQ1AzaEQsS0FBS3NoRCxNQUFNQyxrQkFBa0JPLFdBekV2QnJQLEdBQVN2NEcsU0FBU3dCLGNBQWMsV0FDL0I5TixLQUFPLGtCQUNkNmtILEdBQU9zUCxPQUFRLEVBQ2Z0UCxHQUFPenZCLE9BQVMsV0FPaEJoakIsS0FBS2dpRCxLQUFLLGVBQWdCYixLQU4xQjFPLEdBQU83NEIsSUFBTSxvQ0FDYjEvRSxTQUFTRyxjQUFjLFFBQVEwQixZQUFZMDJHLElBMkU3QyxJQUFNbVAsR0FBa0IxbkgsU0FBU3MvRixlQUFlLG1CQXVCaEQsSUE0RUl5b0IsR0E1RUFDLEdBQWtELEtBRWhEQyxHQUFnQmpvSCxTQUFTcy9GLGVBQWUsY0FFOUMyb0IsR0FBYzlnRixpQkFBaUIsU0EyQi9CLFNBQW9CL2xELEdBRWxCNG1JLEdBQXNCRSxTQUVyQjltSSxFQUFFTSxPQUF1QnltSSxRQUFTLEVBRW5DSCxHQUFzQkksV0FDbkJobEksTUFBSyxTQUFBaWxJLEdBQ21CLGFBQW5CQSxFQUFPQyxRQUNUeCtILFFBQVE0TyxJQUFJLGdDQUFpQzJ2SCxHQUU3Q3YrSCxRQUFRNE8sSUFBSSxpQ0FBa0MydkgsR0FFaERMLEdBQXdCLFdBcEM5QmwzSCxPQUFPcTJDLGlCQUFpQix1QkFReEIsU0FBc0MvbEQsR0FHcENBLEVBQUVnK0YsaUJBRUY0b0MsR0FBd0I1bUksRUFFeEI2bUksR0FBY3RsSCxnQkFBZ0IsYUE0QmhDN1IsT0FBT3EyQyxpQkFBaUIsZ0JBT3hCLFNBQXlCL2xELEdBQ3ZCMEksUUFBUTRPLElBQUksMkNBQTRDdFgsTUFtQjFELEdBQUl3Z0gsYUFBYXpoRyxjQUFjLHFCQUFxQmduQyxpQkFBaUIsU0FBUyxTQUFnQi9sRCxHLDJHQUN4RjJtSSxJQUNGQSxHQUFrQnZyQixVQUFVdDZGLE9BQU8sVUFFckM2bEgsR0FBcUIzbUksRUFBRU0sT0FDakI2bUksRUFBWVIsR0FBa0I1ckIsUUFBUXI3RixHQUczQyxHQUFJOGdHLGFBQWF4QixTQUFTLEdBQW1CM0MsVUFBWXNxQixHQUFrQnRxQixVQUM1RXNxQixHQUFrQnZyQixVQUFVM2tGLElBQUksVUFHMUIyd0csRUFBbUIsR0FBSTdhLGlCQUFpQnBWLFNBQVNsekQsTUFBSyxTQUFBMW1ELEdBQUssT0FBQUEsRUFBRW1pQixLQUFPeW5ILFVBSzNCcCtILElBQTNDLEdBQUl3akgsaUJBQWlCbkssa0JBQXJCLFksUUFDNENyNUcsSUFBMUMsR0FBSXdqSCxpQkFBaUJ4UyxpQkFBckIsWUFDRXN0QixPQUFTLEUsaUJBRUMsTyxzQkFBQSxHQUFNLEVBQUl6dEIsZUFBZSxHQUFJMlMsaUJBQWlCeFMsbUIsY0FBMURzdEIsRUFBWSxTLDZCQUVaMytILFFBQVFwRixNQUFNLG9ELG9CQUVaK2pJLEtBQ0lDLEVBQVcxb0gsU0FBU3dCLGNBQWMsVUFDL0JpOEYsVUFBWWdyQixFQUFVbmxJLEtBQy9CMGMsU0FBU00sS0FBS3VCLFlBQVk2bUgsR0FDMUIsR0FBSS9hLGlCQUFpQm5LLGtCQUFvQmtsQixHLGFBRzNDNStILFFBQVFtQyxLQUFLLGlFLDZCQUtnQjlCLElBQTdCcStILEVBQWlCN29ILFFBQ25CLEdBQUlndUcsaUJBQWlCNUssV0FBV3lsQixJQUVoQyxHQUFJM2MsbUJBQW1CLFNBQVUsbUJBQ2pDLEVBQUk3USxlQUFldXRCLEdBQVdubEksTUFBSyxTQUFBMk8sR0FDakN5MkgsRUFBaUJyMEIsV0FBV3BpRyxFQUFJek8sTUFDaEMsR0FBSXFxSCxpQkFBaUI1SyxXQUFXeWxCLEdBQ2hDLEdBQUl2YyxzQkFDSm5pSCxRQUFRNE8sSUFBSSx1QkFDWCxTQUFBaEosR0FDRDVGLFFBQVE0TyxJQUFJaEosTyxjQVVsQixJQUZBLElBQU1pNUgsR0FBWTNvSCxTQUFTNG9ILHVCQUF1QixzQixZQUV6Q3ZxSSxHQUNQc3FJLEdBQVV0cUksR0FBRytoSCxTQUFTLEdBQUdqNUQsaUJBQWlCLFNBQVMsV0FDakR3aEYsR0FBVXRxSSxHQUFHbStHLFVBQVVrTixPQUFPLFdBRWhDaWYsR0FBVXRxSSxHQUFHOG9ELGlCQUFpQixjQUFjLFNBQUEvbEQsR0FDekNBLEVBQUV3aEgsY0FBOEJwRyxVQUFVdDZGLE9BQU8sWUFMN0MsR0FBSSxFQUFHLEdBQUl5bUgsR0FBVTFuSSxPQUFRLEssR0FBN0IsSUFZVCxJQUFNNG5JLEdBQWdCN29ILFNBQVNzL0YsZUFBZSxpQkFFOUN1cEIsR0FBYzFoRixpQkFBaUIsU0FBUyxXQUN0Q25uQyxTQUFTcy9GLGVBQWUsb0JBQW9COUMsVUFBVWtOLE9BQU8sVUFDN0RtZixHQUFjcnNCLFVBQVVrTixPQUFPIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTkpO1xuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgdHNsaWIgPSByZXF1aXJlKCd0c2xpYicpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgRmlyZWJhc2UgY29uc3RhbnRzLiAgU29tZSBvZiB0aGVzZSAoQGRlZmluZXMpIGNhbiBiZSBvdmVycmlkZGVuIGF0IGNvbXBpbGUtdGltZS5cclxuICovXHJcbnZhciBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG52YXIgYXNzZXJ0ID0gZnVuY3Rpb24gKGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBhc3NlcnRpb25FcnJvcihtZXNzYWdlKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gRXJyb3Igb2JqZWN0IHN1aXRhYmxlIGZvciB0aHJvd2luZy5cclxuICovXHJcbnZhciBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBzdHJpbmdUb0J5dGVBcnJheSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICB2YXIgb3V0ID0gW107XHJcbiAgICB2YXIgcCA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxyXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcclxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXHJcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cclxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXHJcbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cclxuICovXHJcbnZhciBieXRlQXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIChieXRlcykge1xyXG4gICAgLy8gVE9ETyh1c2VyKTogVXNlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgaWYvd2hlbiBhdmFpbGFibGVcclxuICAgIHZhciBvdXQgPSBbXTtcclxuICAgIHZhciBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICB2YXIgYzEgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMTkxICYmIGMxIDwgMjI0KSB7XHJcbiAgICAgICAgICAgIHZhciBjMiA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAzMSkgPDwgNikgfCAoYzIgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjMSA+IDIzOSAmJiBjMSA8IDM2NSkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICB2YXIgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIHZhciBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgdmFyIGM0ID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICB2YXIgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICB2YXIgYzMgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMTUpIDw8IDEyKSB8ICgoYzIgJiA2MykgPDwgNikgfCAoYzMgJiA2MykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQuam9pbignJyk7XHJcbn07XHJcbi8vIFdlIGRlZmluZSBpdCBhcyBhbiBvYmplY3QgbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY2xhc3MgYmVjYXVzZSBhIGNsYXNzIGNvbXBpbGVkIGRvd24gdG8gZXM1IGNhbid0XHJcbi8vIGJlIHRyZWVzaGFrZWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2xsdXAvcm9sbHVwL2lzc3Vlcy8xNjkxXHJcbi8vIFN0YXRpYyBsb29rdXAgbWFwcywgbGF6aWx5IHBvcHVsYXRlZCBieSBpbml0XygpXHJcbnZhciBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheTogZnVuY3Rpb24gKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGlucHV0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignZW5jb2RlQnl0ZUFycmF5IHRha2VzIGFuIGFycmF5IGFzIGEgcGFyYW1ldGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICB2YXIgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgdmFyIGJ5dGUxID0gaW5wdXRbaV07XHJcbiAgICAgICAgICAgIHZhciBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgdmFyIGhhdmVCeXRlMyA9IGkgKyAyIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICB2YXIgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xyXG4gICAgICAgICAgICB2YXIgb3V0Qnl0ZTIgPSAoKGJ5dGUxICYgMHgwMykgPDwgNCkgfCAoYnl0ZTIgPj4gNCk7XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlMyA9ICgoYnl0ZTIgJiAweDBmKSA8PCAyKSB8IChieXRlMyA+PiA2KTtcclxuICAgICAgICAgICAgdmFyIG91dEJ5dGU0ID0gYnl0ZTMgJiAweDNmO1xyXG4gICAgICAgICAgICBpZiAoIWhhdmVCeXRlMykge1xyXG4gICAgICAgICAgICAgICAgb3V0Qnl0ZTQgPSA2NDtcclxuICAgICAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Qnl0ZTMgPSA2NDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChieXRlVG9DaGFyTWFwW291dEJ5dGUxXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMl0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTNdLCBieXRlVG9DaGFyTWFwW291dEJ5dGU0XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQuam9pbignJyk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHN0cmluZyB0byBlbmNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBJZiB0cnVlLCB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVTdHJpbmc6IGZ1bmN0aW9uIChpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheShpbnB1dCksIHdlYlNhZmUpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWRlY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmc6IGZ1bmN0aW9uIChpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheTogZnVuY3Rpb24gKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIHZhciBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICB2YXIgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7KSB7XHJcbiAgICAgICAgICAgIHZhciBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGUyID0gaGF2ZUJ5dGUyID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogMDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICB2YXIgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgdmFyIGhhdmVCeXRlNCA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3V0Qnl0ZTIgPSAoKGJ5dGUyIDw8IDQpICYgMHhmMCkgfCAoYnl0ZTMgPj4gMik7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMik7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnl0ZTQgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxyXG4gICAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbml0XzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ieXRlVG9DaGFyTWFwXykge1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV8gPSB7fTtcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCBxdWljayBtYXBwaW5ncyBiYWNrIGFuZCBmb3J0aCwgc28gd2UgcHJlY29tcHV0ZSB0d28gbWFwcy5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLkVOQ09ERURfVkFMUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5ieXRlVG9DaGFyTWFwX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV0gPSB0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAvLyBCZSBmb3JnaXZpbmcgd2hlbiBkZWNvZGluZyBhbmQgY29ycmVjdGx5IGRlY29kZSBib3RoIGVuY29kaW5ncy5cclxuICAgICAgICAgICAgICAgIGlmIChpID49IHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLkVOQ09ERURfVkFMU19XRUJTQUZFLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfW3RoaXMuRU5DT0RFRF9WQUxTLmNoYXJBdChpKV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGVuY29kaW5nXHJcbiAqL1xyXG52YXIgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdmFyIHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5KHN0cik7XHJcbiAgICByZXR1cm4gYmFzZTY0LmVuY29kZUJ5dGVBcnJheSh1dGY4Qnl0ZXMsIHRydWUpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG52YXIgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdiYXNlNjREZWNvZGUgZmFpbGVkOiAnLCBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERvIGEgZGVlcC1jb3B5IG9mIGJhc2ljIEphdmFTY3JpcHQgT2JqZWN0cyBvciBBcnJheXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwQ29weSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGRlZXBFeHRlbmQodW5kZWZpbmVkLCB2YWx1ZSk7XHJcbn1cclxuLyoqXHJcbiAqIENvcHkgcHJvcGVydGllcyBmcm9tIHNvdXJjZSB0byB0YXJnZXQgKHJlY3Vyc2l2ZWx5IGFsbG93cyBleHRlbnNpb25cclxuICogb2YgT2JqZWN0cyBhbmQgQXJyYXlzKS4gIFNjYWxhciB2YWx1ZXMgaW4gdGhlIHRhcmdldCBhcmUgb3Zlci13cml0dGVuLlxyXG4gKiBJZiB0YXJnZXQgaXMgdW5kZWZpbmVkLCBhbiBvYmplY3Qgb2YgdGhlIGFwcHJvcHJpYXRlIHR5cGUgd2lsbCBiZSBjcmVhdGVkXHJcbiAqIChhbmQgcmV0dXJuZWQpLlxyXG4gKlxyXG4gKiBXZSByZWN1cnNpdmVseSBjb3B5IGFsbCBjaGlsZCBwcm9wZXJ0aWVzIG9mIHBsYWluIE9iamVjdHMgaW4gdGhlIHNvdXJjZS0gc29cclxuICogdGhhdCBuYW1lc3BhY2UtIGxpa2UgZGljdGlvbmFyaWVzIGFyZSBtZXJnZWQuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCB0aGUgdGFyZ2V0IGNhbiBiZSBhIGZ1bmN0aW9uLCBpbiB3aGljaCBjYXNlIHRoZSBwcm9wZXJ0aWVzIGluXHJcbiAqIHRoZSBzb3VyY2UgT2JqZWN0IGFyZSBjb3BpZWQgb250byBpdCBhcyBzdGF0aWMgcHJvcGVydGllcyBvZiB0aGUgRnVuY3Rpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIHZhciBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcclxuICAgICAgICBpZiAoIXNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gZGVlcEV4dGVuZCh0YXJnZXRbcHJvcF0sIHNvdXJjZVtwcm9wXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRGVmZXJyZWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEZWZlcnJlZCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlc29sdmUgPSByZXNvbHZlO1xyXG4gICAgICAgICAgICBfdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE91ciBBUEkgaW50ZXJuYWxzIGFyZSBub3QgcHJvbWlzZWlmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXHJcbiAgICAgKiBpbnZva2luZyBwcm9taXNlcyBpbmxpbmUsIHdoaWNoIFByb21pc2VzIGFyZSBmb3JiaWRkZW4gdG8gZG8uIFRoaXMgbWV0aG9kIGFjY2VwdHMgYW4gb3B0aW9uYWwgbm9kZS1zdHlsZSBjYWxsYmFja1xyXG4gICAgICogYW5kIHJldHVybnMgYSBub2RlLXN0eWxlIGNhbGxiYWNrIHdoaWNoIHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIERlZmVycmVkJ3MgcHJvbWlzZS5cclxuICAgICAqL1xyXG4gICAgRGVmZXJyZWQucHJvdG90eXBlLndyYXBDYWxsYmFjayA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlcnJvciwgdmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoaW5nIG5vb3AgaGFuZGxlciBqdXN0IGluIGNhc2UgZGV2ZWxvcGVyIHdhc24ndCBleHBlY3RpbmdcclxuICAgICAgICAgICAgICAgIC8vIHByb21pc2VzXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5wcm9taXNlLmNhdGNoKGZ1bmN0aW9uICgpIHsgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIG9mIG91ciBjYWxsYmFja3MgZG9uJ3QgZXhwZWN0IGEgdmFsdWUgYW5kIG91ciBvd24gdGVzdHNcclxuICAgICAgICAgICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVmZXJyZWQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbi8vIE5vZGUgZGV0ZWN0aW9uIGxvZ2ljIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pbGlha2FuL2RldGVjdC1ub2RlL1xyXG5mdW5jdGlvbiBpc05vZGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGY7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTm9kZVNkaygpIHtcclxuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG52YXIgRmlyZWJhc2VFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhGaXJlYmFzZUVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmlyZWJhc2VFcnJvcihjb2RlLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICBfdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcclxuICAgICAgICAvLyBGaXggRm9yIEVTNVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKF90aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKF90aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBGaXJlYmFzZUVycm9yO1xyXG59KEVycm9yKSk7XHJcbnZhciBFcnJvckZhY3RvcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFcnJvckZhY3Rvcnkoc2VydmljZSwgc2VydmljZU5hbWUsIGVycm9ycykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xyXG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xyXG4gICAgfVxyXG4gICAgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoY29kZSkge1xyXG4gICAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZGF0YVtfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIHZhciBmdWxsQ29kZSA9IHRoaXMuc2VydmljZSArIFwiL1wiICsgY29kZTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLmVycm9yc1tjb2RlXTtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIHZhciBmdWxsTWVzc2FnZSA9IHRoaXMuc2VydmljZU5hbWUgKyBcIjogXCIgKyBtZXNzYWdlICsgXCIgKFwiICsgZnVsbENvZGUgKyBcIikuXCI7XHJcbiAgICAgICAgdmFyIGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlKTtcclxuICAgICAgICAvLyBLZXlzIHdpdGggYW4gdW5kZXJzY29yZSBhdCB0aGUgZW5kIG9mIHRoZWlyIG5hbWUgYXJlIG5vdCBpbmNsdWRlZCBpblxyXG4gICAgICAgIC8vIGVycm9yLmRhdGEgZm9yIHNvbWUgcmVhc29uLlxyXG4gICAgICAgIC8vIFRPRE86IFJlcGxhY2Ugd2l0aCBPYmplY3QuZW50cmllcyB3aGVuIGxpYiBpcyB1cGRhdGVkIHRvIGVzMjAxNy5cclxuICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gT2JqZWN0LmtleXMoY3VzdG9tRGF0YSk7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBfYltfYV07XHJcbiAgICAgICAgICAgIGlmIChrZXkuc2xpY2UoLTEpICE9PSAnXycpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJPdmVyd3JpdGluZyBGaXJlYmFzZUVycm9yIGJhc2UgZmllbGQgXFxcIlwiICsga2V5ICsgXCJcXFwiIGNhbiBjYXVzZSB1bmV4cGVjdGVkIGJlaGF2aW9yLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVycm9yW2tleV0gPSBjdXN0b21EYXRhW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFcnJvckZhY3Rvcnk7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgZnVuY3Rpb24gKF8sIGtleSkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGRhdGFba2V5XTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCA/IHZhbHVlLnRvU3RyaW5nKCkgOiBcIjxcIiArIGtleSArIFwiPz5cIjtcclxuICAgIH0pO1xyXG59XHJcbnZhciBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG52YXIgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB2YXIgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcjogaGVhZGVyLFxyXG4gICAgICAgIGNsYWltczogY2xhaW1zLFxyXG4gICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgc2lnbmF0dXJlOiBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG52YXIgaXNWYWxpZFRpbWVzdGFtcCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgdmFyIG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIHZhciB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG52YXIgaXNzdWVkQXRUaW1lID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG52YXIgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgdmFyIGRlY29kZWQgPSBkZWNvZGUodG9rZW4pLCBjbGFpbXMgPSBkZWNvZGVkLmNsYWltcztcclxuICAgIHJldHVybiAhIWNsYWltcyAmJiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpO1xyXG59O1xyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gcGVlciBpbnRvIGFuIGF1dGggdG9rZW4gYW5kIGRldGVybWluZSBpZiBpdCdzIGFuIGFkbWluIGF1dGggdG9rZW4gYnkgbG9va2luZyBhdCB0aGUgY2xhaW1zIHBvcnRpb24uXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbnZhciBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICB2YXIgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29udGFpbnMob2JqLCBrZXkpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xyXG59XHJcbmZ1bmN0aW9uIHNhZmVHZXQob2JqLCBrZXkpIHtcclxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIG9ialtrZXldO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgdmFyIHJlcyA9IHt9O1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJlc1trZXldID0gZm4uY2FsbChjb250ZXh0T2JqLCBvYmpba2V5XSwga2V5LCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxyXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XHJcbiAgICB2YXIgcGFyYW1zID0gW107XHJcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGFycmF5VmFsKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIF9iID0gX2FbX2ldLCBrZXkgPSBfYlswXSwgdmFsdWUgPSBfYlsxXTtcclxuICAgICAgICBfbG9vcF8xKGtleSwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIHZhciB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XHJcbiAgICB0b2tlbnMuZm9yRWFjaChmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRva2VuLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIG9ialtrZXlbMF1dID0ga2V5WzFdO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxudmFyIFNoYTEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaGExKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICBTaGExLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBTaGExLnByb3RvdHlwZS5jb21wcmVzc18gPSBmdW5jdGlvbiAoYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgVyA9IHRoaXMuV187XHJcbiAgICAgICAgLy8gZ2V0IDE2IGJpZyBlbmRpYW4gd29yZHNcclxuICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHVzZXIpOiBbYnVnIDgxNDAxMjJdIFJlY2VudCB2ZXJzaW9ucyBvZiBTYWZhcmkgZm9yIE1hYyBPUyBhbmQgaU9TXHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcclxuICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RuZXNzIGFuZCB3aGljaCBpcyBhZmZlY3RlZCBieSB0aGlzIGJ1Zywgc28gSSd2ZSByZW1vdmVkIGFsbCB1c2VzXHJcbiAgICAgICAgICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTAzNikgaGFzIGJlZW4gZml4ZWQgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0KSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMyk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldF0gPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDJdIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmW29mZnNldCArIDNdO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE2OyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgdmFyIGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICB2YXIgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIHZhciBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgdmFyIGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICB2YXIgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH07XHJcbiAgICBTaGExLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGxlbmd0aCkge1xyXG4gICAgICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXHJcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIHZhciBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICB2YXIgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIHZhciBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9O1xyXG4gICAgLyoqIEBvdmVycmlkZSAqL1xyXG4gICAgU2hhMS5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkaWdlc3QgPSBbXTtcclxuICAgICAgICB2YXIgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIHZhciBuID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2hhMTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgdmFyIHByb3h5ID0gbmV3IE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpO1xyXG4gICAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcclxufVxyXG4vKipcclxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxyXG4gKiBmdW5jdGlvbi5cclxuICovXHJcbnZhciBPYnNlcnZlclByb3h5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICAgICAqICAgICBhcyBhIHByb3h5LlxyXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZXhlY3V0b3IoX3RoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcihmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcihmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xyXG4gICAgfTtcclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGNvbXBsZXRlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5uZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoX3RoaXMuZmluYWxFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xyXG4gICAgfTtcclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgT2JzZXJ2ZXJQcm94eS5wcm90b3R5cGUudW5zdWJzY3JpYmVPbmUgPSBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLmZvckVhY2hPYnNlcnZlciA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xyXG4gICAgLy8gY29uZmlybSB0aGF0IHRoZSBvYnNlcnZlIGhhcyBub3QgYmVlbiB1bnN1YnNjcmliZWQgc2luY2UgdGhpcyBhc3luY2hyb25vdXNcclxuICAgIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cclxuICAgIE9ic2VydmVyUHJveHkucHJvdG90eXBlLnNlbmRPbmUgPSBmdW5jdGlvbiAoaSwgZm4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLm9ic2VydmVycyAhPT0gdW5kZWZpbmVkICYmIF90aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKF90aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYnNlcnZlclByb3h5LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIF90aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9ic2VydmVyUHJveHk7XHJcbn0oKSk7XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZuLmFwcGx5KHZvaWQgMCwgYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBtZXRob2RzXzEgPSBtZXRob2RzOyBfaSA8IG1ldGhvZHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgbWV0aG9kID0gbWV0aG9kc18xW19pXTtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaGVjayB0byBtYWtlIHN1cmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIGZvciBhIHB1YmxpYyBmdW5jdGlvbi5cclxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBtaW5Db3VudCBUaGUgbWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gbWF4Q291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50IHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxyXG4gKi9cclxudmFyIHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICB2YXIgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICB2YXIgZXJyb3IgPSBmbk5hbWUgK1xyXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBhcmdDb3VudCArXHJcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcclxuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xyXG4gICAgICAgICAgICBhcmdFcnJvciArXHJcbiAgICAgICAgICAgICcuJztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyIFRoZSBpbmRleCBvZiB0aGUgYXJndW1lbnRcclxuICogQHBhcmFtIG9wdGlvbmFsIFdoZXRoZXIgb3Igbm90IHRoZSBhcmd1bWVudCBpcyBvcHRpb25hbFxyXG4gKiBAcmV0dXJuIFRoZSBwcmVmaXggdG8gYWRkIHRvIHRoZSBlcnJvciB0aHJvd24gZm9yIHZhbGlkYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBvcHRpb25hbCkge1xyXG4gICAgdmFyIGFyZ05hbWUgPSAnJztcclxuICAgIHN3aXRjaCAoYXJndW1lbnROdW1iZXIpIHtcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgIGFyZ05hbWUgPSBvcHRpb25hbCA/ICdmaXJzdCcgOiAnRmlyc3QnO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIGFyZ05hbWUgPSBvcHRpb25hbCA/ICdzZWNvbmQnIDogJ1NlY29uZCc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgYXJnTmFtZSA9IG9wdGlvbmFsID8gJ3RoaXJkJyA6ICdUaGlyZCc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgYXJnTmFtZSA9IG9wdGlvbmFsID8gJ2ZvdXJ0aCcgOiAnRm91cnRoJztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlcnJvclByZWZpeCBjYWxsZWQgd2l0aCBhcmd1bWVudE51bWJlciA+IDQuICBOZWVkIHRvIHVwZGF0ZSBpdD8nKTtcclxuICAgIH1cclxuICAgIHZhciBlcnJvciA9IGZuTmFtZSArICcgZmFpbGVkOiAnO1xyXG4gICAgZXJyb3IgKz0gYXJnTmFtZSArICcgYXJndW1lbnQgJztcclxuICAgIHJldHVybiBlcnJvcjtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG5hbWVzcGFjZSwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXHJcbiAgICAgICAgICAgICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCBhcmd1bWVudE51bWJlciwgY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBvcHRpb25hbCkgK1xyXG4gICAgICAgICAgICAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TnVtYmVyLCBjb250ZXh0LCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROdW1iZXIsIG9wdGlvbmFsKSArXHJcbiAgICAgICAgICAgICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxudmFyIHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB2YXIgb3V0ID0gW107XHJcbiAgICB2YXIgcCA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cclxuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgdmFyIGhpZ2ggPSBjIC0gMHhkODAwOyAvLyB0aGUgaGlnaCAxMCBiaXRzLlxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGFzc2VydChpIDwgc3RyLmxlbmd0aCwgJ1N1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLicpO1xyXG4gICAgICAgICAgICB2YXIgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxudmFyIHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIHZhciBwID0gMDtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBwKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIHAgKz0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgLy8gTGVhZCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpci4gIFRoZSBwYWlyIHRvZ2V0aGVyIHdpbGwgdGFrZSA0IGJ5dGVzIHRvIHJlcHJlc2VudC5cclxuICAgICAgICAgICAgcCArPSA0O1xyXG4gICAgICAgICAgICBpKys7IC8vIHNraXAgdHJhaWwgc3Vycm9nYXRlLlxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcCArPSAzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG59O1xuXG5leHBvcnRzLkNPTlNUQU5UUyA9IENPTlNUQU5UUztcbmV4cG9ydHMuRGVmZXJyZWQgPSBEZWZlcnJlZDtcbmV4cG9ydHMuRXJyb3JGYWN0b3J5ID0gRXJyb3JGYWN0b3J5O1xuZXhwb3J0cy5GaXJlYmFzZUVycm9yID0gRmlyZWJhc2VFcnJvcjtcbmV4cG9ydHMuU2hhMSA9IFNoYTE7XG5leHBvcnRzLmFzc2VydCA9IGFzc2VydDtcbmV4cG9ydHMuYXNzZXJ0aW9uRXJyb3IgPSBhc3NlcnRpb25FcnJvcjtcbmV4cG9ydHMuYXN5bmMgPSBhc3luYztcbmV4cG9ydHMuYmFzZTY0ID0gYmFzZTY0O1xuZXhwb3J0cy5iYXNlNjREZWNvZGUgPSBiYXNlNjREZWNvZGU7XG5leHBvcnRzLmJhc2U2NEVuY29kZSA9IGJhc2U2NEVuY29kZTtcbmV4cG9ydHMuY29udGFpbnMgPSBjb250YWlucztcbmV4cG9ydHMuY3JlYXRlU3Vic2NyaWJlID0gY3JlYXRlU3Vic2NyaWJlO1xuZXhwb3J0cy5kZWNvZGUgPSBkZWNvZGU7XG5leHBvcnRzLmRlZXBDb3B5ID0gZGVlcENvcHk7XG5leHBvcnRzLmRlZXBFeHRlbmQgPSBkZWVwRXh0ZW5kO1xuZXhwb3J0cy5lcnJvclByZWZpeCA9IGVycm9yUHJlZml4O1xuZXhwb3J0cy5nZXRVQSA9IGdldFVBO1xuZXhwb3J0cy5pc0FkbWluID0gaXNBZG1pbjtcbmV4cG9ydHMuaXNCcm93c2VyID0gaXNCcm93c2VyO1xuZXhwb3J0cy5pc0VtcHR5ID0gaXNFbXB0eTtcbmV4cG9ydHMuaXNNb2JpbGVDb3Jkb3ZhID0gaXNNb2JpbGVDb3Jkb3ZhO1xuZXhwb3J0cy5pc05vZGUgPSBpc05vZGU7XG5leHBvcnRzLmlzTm9kZVNkayA9IGlzTm9kZVNkaztcbmV4cG9ydHMuaXNSZWFjdE5hdGl2ZSA9IGlzUmVhY3ROYXRpdmU7XG5leHBvcnRzLmlzVmFsaWRGb3JtYXQgPSBpc1ZhbGlkRm9ybWF0O1xuZXhwb3J0cy5pc1ZhbGlkVGltZXN0YW1wID0gaXNWYWxpZFRpbWVzdGFtcDtcbmV4cG9ydHMuaXNzdWVkQXRUaW1lID0gaXNzdWVkQXRUaW1lO1xuZXhwb3J0cy5qc29uRXZhbCA9IGpzb25FdmFsO1xuZXhwb3J0cy5tYXAgPSBtYXA7XG5leHBvcnRzLnF1ZXJ5c3RyaW5nID0gcXVlcnlzdHJpbmc7XG5leHBvcnRzLnF1ZXJ5c3RyaW5nRGVjb2RlID0gcXVlcnlzdHJpbmdEZWNvZGU7XG5leHBvcnRzLnNhZmVHZXQgPSBzYWZlR2V0O1xuZXhwb3J0cy5zdHJpbmdMZW5ndGggPSBzdHJpbmdMZW5ndGg7XG5leHBvcnRzLnN0cmluZ1RvQnl0ZUFycmF5ID0gc3RyaW5nVG9CeXRlQXJyYXkkMTtcbmV4cG9ydHMuc3RyaW5naWZ5ID0gc3RyaW5naWZ5O1xuZXhwb3J0cy52YWxpZGF0ZUFyZ0NvdW50ID0gdmFsaWRhdGVBcmdDb3VudDtcbmV4cG9ydHMudmFsaWRhdGVDYWxsYmFjayA9IHZhbGlkYXRlQ2FsbGJhY2s7XG5leHBvcnRzLnZhbGlkYXRlQ29udGV4dE9iamVjdCA9IHZhbGlkYXRlQ29udGV4dE9iamVjdDtcbmV4cG9ydHMudmFsaWRhdGVOYW1lc3BhY2UgPSB2YWxpZGF0ZU5hbWVzcGFjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmNqcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIHRzbGliID0gcmVxdWlyZSgndHNsaWInKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQGZpcmViYXNlL3V0aWwnKTtcblxuLyoqXHJcbiAqIENvbXBvbmVudCBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbnZhciBDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgcHVibGljIHNlcnZpY2UgbmFtZSwgZS5nLiBhcHAsIGF1dGgsIGZpcmVzdG9yZSwgZGF0YWJhc2VcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUZhY3RvcnkgU2VydmljZSBmYWN0b3J5IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgcHVibGljIGludGVyZmFjZVxyXG4gICAgICogQHBhcmFtIHR5cGUgd2hlaHRlciB0aGUgc2VydmljZSBwcm92aWRlZCBieSB0aGUgY29tcG9uZW50IGlzIHB1YmxpYyBvciBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIENvbXBvbmVudChuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogTEFaWSAqLztcclxuICAgIH1cclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2V0SW5zdGFudGlhdGlvbk1vZGUgPSBmdW5jdGlvbiAobW9kZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBtb2RlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuc2V0TXVsdGlwbGVJbnN0YW5jZXMgPSBmdW5jdGlvbiAobXVsdGlwbGVJbnN0YW5jZXMpIHtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gbXVsdGlwbGVJbnN0YW5jZXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXRTZXJ2aWNlUHJvcHMgPSBmdW5jdGlvbiAocHJvcHMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb21wb25lbnQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxudmFyIFByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUHJvdmlkZXIobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQSBwcm92aWRlciBjYW4gcHJvdmlkZSBtdWxpdHBsZSBpbnN0YW5jZXMgb2YgYSBzZXJ2aWNlXHJcbiAgICAgKiBpZiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyBpcyB0cnVlLlxyXG4gICAgICovXHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGlkZW50aWZpZXIpIHtcclxuICAgICAgICBpZiAoaWRlbnRpZmllciA9PT0gdm9pZCAwKSB7IGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUU7IH1cclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIHZhciBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyB1dGlsLkRlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBzZXJ2aWNlIGluc3RhbmNlIGlzIGF2YWlsYWJsZSwgcmVzb2x2ZSB0aGUgcHJvbWlzZSB3aXRoIGl0IGltbWVkaWF0ZWx5XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uobm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuZ2V0SW1tZWRpYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2EgPSB0c2xpYi5fX2Fzc2lnbih7IGlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSwgb3B0aW9uYWw6IGZhbHNlIH0sIG9wdGlvbnMpLCBpZGVudGlmaWVyID0gX2EuaWRlbnRpZmllciwgb3B0aW9uYWwgPSBfYS5vcHRpb25hbDtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIHZhciBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZShub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmICghaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJTZXJ2aWNlIFwiICsgdGhpcy5uYW1lICsgXCIgaXMgbm90IGF2YWlsYWJsZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXRDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5zZXRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIGVfMSwgX2E7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJNaXNtYXRjaGluZyBDb21wb25lbnQgXCIgKyBjb21wb25lbnQubmFtZSArIFwiIGZvciBQcm92aWRlciBcIiArIHRoaXMubmFtZSArIFwiLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiQ29tcG9uZW50IGZvciBcIiArIHRoaXMubmFtZSArIFwiIGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKERFRkFVTFRfRU5UUllfTkFNRSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAgICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcclxuICAgICAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IHRzbGliLl9fdmFsdWVzKHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9kID0gdHNsaWIuX19yZWFkKF9jLnZhbHVlLCAyKSwgaW5zdGFuY2VJZGVudGlmaWVyID0gX2RbMF0sIGluc3RhbmNlRGVmZXJyZWQgPSBfZFsxXTtcclxuICAgICAgICAgICAgICAgIHZhciBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZShub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuY2xlYXJJbnN0YW5jZSA9IGZ1bmN0aW9uIChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGlkZW50aWZpZXIgPT09IHZvaWQgMCkgeyBpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfTtcclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNlcnZpY2VzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHNlcnZpY2UpIHsgcmV0dXJuICdJTlRFUk5BTCcgaW4gc2VydmljZTsgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHNlcnZpY2UpIHsgcmV0dXJuIHNlcnZpY2UuSU5URVJOQUwuZGVsZXRlKCk7IH0pKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUHJvdmlkZXIucHJvdG90eXBlLmlzQ29tcG9uZW50U2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudCAhPSBudWxsO1xyXG4gICAgfTtcclxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5nZXRPckluaXRpYWxpemVTZXJ2aWNlID0gZnVuY3Rpb24gKGlkZW50aWZpZXIpIHtcclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZSAmJiB0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IHRoaXMuY29tcG9uZW50Lmluc3RhbmNlRmFjdG9yeSh0aGlzLmNvbnRhaW5lciwgbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaWRlbnRpZmllcikpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH07XHJcbiAgICBQcm92aWRlci5wcm90b3R5cGUubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyID0gZnVuY3Rpb24gKGlkZW50aWZpZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBQcm92aWRlcjtcclxufSgpKTtcclxuLy8gdW5kZWZpbmVkIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIHNlcnZpY2UgZmFjdG9yeSBmb3IgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuZnVuY3Rpb24gbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaWRlbnRpZmllcikge1xyXG4gICAgcmV0dXJuIGlkZW50aWZpZXIgPT09IERFRkFVTFRfRU5UUllfTkFNRSA/IHVuZGVmaW5lZCA6IGlkZW50aWZpZXI7XHJcbn1cclxuZnVuY3Rpb24gaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBjb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgPT09IFwiRUFHRVJcIiAvKiBFQUdFUiAqLztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbnZhciBDb21wb25lbnRDb250YWluZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb21wb25lbnRDb250YWluZXIobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxyXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XHJcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcclxuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmFkZENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb21wb25lbnQgXCIgKyBjb21wb25lbnQubmFtZSArIFwiIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoIFwiICsgdGhpcy5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50Q29udGFpbmVyLnByb3RvdHlwZS5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB2YXIgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhlIGV4aXN0aW5nIHByb3ZpZGVyIGZyb20gdGhlIGNvbnRhaW5lciwgc28gd2UgY2FuIHJlZ2lzdGVyIHRoZSBuZXcgY29tcG9uZW50XHJcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXJzLmRlbGV0ZShjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBDb21wb25lbnRDb250YWluZXIucHJvdG90eXBlLmdldFByb3ZpZGVyID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm92aWRlcnMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVycy5nZXQobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNyZWF0ZSBhIFByb3ZpZGVyIGZvciBhIHNlcnZpY2UgdGhhdCBoYXNuJ3QgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlXHJcbiAgICAgICAgdmFyIHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudENvbnRhaW5lci5wcm90b3R5cGUuZ2V0UHJvdmlkZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29tcG9uZW50Q29udGFpbmVyO1xyXG59KCkpO1xuXG5leHBvcnRzLkNvbXBvbmVudCA9IENvbXBvbmVudDtcbmV4cG9ydHMuQ29tcG9uZW50Q29udGFpbmVyID0gQ29tcG9uZW50Q29udGFpbmVyO1xuZXhwb3J0cy5Qcm92aWRlciA9IFByb3ZpZGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguY2pzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgdHNsaWIgPSByZXF1aXJlKCd0c2xpYicpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAZmlyZWJhc2UvdXRpbCcpO1xudmFyIGNvbXBvbmVudCA9IHJlcXVpcmUoJ0BmaXJlYmFzZS9jb21wb25lbnQnKTtcbnZhciBsb2dnZXIkMSA9IHJlcXVpcmUoJ0BmaXJlYmFzZS9sb2dnZXInKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBfYTtcclxudmFyIEVSUk9SUyA9IChfYSA9IHt9LFxyXG4gICAgX2FbXCJuby1hcHBcIiAvKiBOT19BUFAgKi9dID0gXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgRmlyZWJhc2UgQXBwLmluaXRpYWxpemVBcHAoKScsXHJcbiAgICBfYVtcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqL10gPSBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBfYVtcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovXSA9IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0c1wiLFxyXG4gICAgX2FbXCJhcHAtZGVsZXRlZFwiIC8qIEFQUF9ERUxFVEVEICovXSA9IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIF9hW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqL10gPSAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIF9hKTtcclxudmFyIEVSUk9SX0ZBQ1RPUlkgPSBuZXcgdXRpbC5FcnJvckZhY3RvcnkoJ2FwcCcsICdGaXJlYmFzZScsIEVSUk9SUyk7XG5cbnZhciBuYW1lID0gXCJAZmlyZWJhc2UvYXBwXCI7XG52YXIgdmVyc2lvbiA9IFwiMC41LjBcIjtcblxudmFyIG5hbWUkMSA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG52YXIgbmFtZSQyID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG52YXIgbmFtZSQzID0gXCJAZmlyZWJhc2UvZGF0YWJhc2VcIjtcblxudmFyIG5hbWUkNCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9uc1wiO1xuXG52YXIgbmFtZSQ1ID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG52YXIgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nXCI7XG5cbnZhciBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG52YXIgbmFtZSQ4ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG52YXIgbmFtZSQ5ID0gXCJAZmlyZWJhc2Uvc3RvcmFnZVwiO1xuXG52YXIgbmFtZSRhID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbnZhciBuYW1lJGIgPSBcImZpcmViYXNlLXdyYXBwZXJcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBfYSQxO1xyXG52YXIgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbnZhciBQTEFURk9STV9MT0dfU1RSSU5HID0gKF9hJDEgPSB7fSxcclxuICAgIF9hJDFbbmFtZV0gPSAnZmlyZS1jb3JlJyxcclxuICAgIF9hJDFbbmFtZSQxXSA9ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBfYSQxW25hbWUkMl0gPSAnZmlyZS1hdXRoJyxcclxuICAgIF9hJDFbbmFtZSQzXSA9ICdmaXJlLXJ0ZGInLFxyXG4gICAgX2EkMVtuYW1lJDRdID0gJ2ZpcmUtZm4nLFxyXG4gICAgX2EkMVtuYW1lJDVdID0gJ2ZpcmUtaWlkJyxcclxuICAgIF9hJDFbbmFtZSQ2XSA9ICdmaXJlLWZjbScsXHJcbiAgICBfYSQxW25hbWUkN10gPSAnZmlyZS1wZXJmJyxcclxuICAgIF9hJDFbbmFtZSQ4XSA9ICdmaXJlLXJjJyxcclxuICAgIF9hJDFbbmFtZSQ5XSA9ICdmaXJlLWdjcycsXHJcbiAgICBfYSQxW25hbWUkYV0gPSAnZmlyZS1mc3QnLFxyXG4gICAgX2EkMVsnZmlyZS1qcyddID0gJ2ZpcmUtanMnLFxyXG4gICAgX2EkMVtuYW1lJGJdID0gJ2ZpcmUtanMtYWxsJyxcclxuICAgIF9hJDEpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIGxvZ2dlciA9IG5ldyBsb2dnZXIkMS5Mb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBHbG9iYWwgY29udGV4dCBvYmplY3QgZm9yIGEgY29sbGVjdGlvbiBvZiBzZXJ2aWNlcyB1c2luZ1xyXG4gKiBhIHNoYXJlZCBhdXRoZW50aWNhdGlvbiBzdGF0ZS5cclxuICovXHJcbnZhciBGaXJlYmFzZUFwcEltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBmaXJlYmFzZV8pIHtcclxuICAgICAgICB2YXIgZV8xLCBfYTtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZmlyZWJhc2VfID0gZmlyZWJhc2VfO1xyXG4gICAgICAgIHRoaXMuaXNEZWxldGVkXyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubmFtZV8gPSBjb25maWcubmFtZTtcclxuICAgICAgICB0aGlzLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZF8gPVxyXG4gICAgICAgICAgICBjb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub3B0aW9uc18gPSB1dGlsLmRlZXBDb3B5KG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gbmV3IGNvbXBvbmVudC5Db21wb25lbnRDb250YWluZXIoY29uZmlnLm5hbWUpO1xyXG4gICAgICAgIC8vIGFkZCBpdHNlbGYgdG8gY29udGFpbmVyXHJcbiAgICAgICAgdGhpcy5fYWRkQ29tcG9uZW50KG5ldyBjb21wb25lbnQuQ29tcG9uZW50KCdhcHAnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpczsgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBwb3B1bGF0ZSBDb21wb25lbnRDb250YWluZXIgd2l0aCBleGlzdGluZyBjb21wb25lbnRzXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9iID0gdHNsaWIuX192YWx1ZXModGhpcy5maXJlYmFzZV8uSU5URVJOQUwuY29tcG9uZW50cy52YWx1ZXMoKSksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnQkMSA9IF9jLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkQ29tcG9uZW50KGNvbXBvbmVudCQxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZSwgXCJhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkXygpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWRfO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWRfKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkXyA9IHZhbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLCBcIm5hbWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkXygpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lXztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLCBcIm9wdGlvbnNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkXygpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zXztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNoZWNrRGVzdHJveWVkXygpO1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5maXJlYmFzZV8uSU5URVJOQUwucmVtb3ZlQXBwKF90aGlzLm5hbWVfKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKF90aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKS5tYXAoZnVuY3Rpb24gKHByb3ZpZGVyKSB7IHJldHVybiBwcm92aWRlci5kZWxldGUoKTsgfSkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuaXNEZWxldGVkXyA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gYSBzZXJ2aWNlIGluc3RhbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGFwcCAoY3JlYXRpbmcgaXRcclxuICAgICAqIG9uIGRlbWFuZCksIGlkZW50aWZpZWQgYnkgdGhlIHBhc3NlZCBpbnN0YW5jZUlkZW50aWZpZXIuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogQ3VycmVudGx5IHN0b3JhZ2UgYW5kIGZ1bmN0aW9ucyBhcmUgdGhlIG9ubHkgb25lcyB0aGF0IGFyZSBsZXZlcmFnaW5nIHRoaXNcclxuICAgICAqIGZ1bmN0aW9uYWxpdHkuIFRoZXkgaW52b2tlIGl0IGJ5IGNhbGxpbmc6XHJcbiAgICAgKlxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogZmlyZWJhc2UuYXBwKCkuc3RvcmFnZSgnU1RPUkFHRSBCVUNLRVQgSUQnKVxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHNlcnZpY2UgbmFtZSBpcyBwYXNzZWQgdG8gdGhpcyBhbHJlYWR5XHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5fZ2V0U2VydmljZSA9IGZ1bmN0aW9uIChuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIpIHtcclxuICAgICAgICBpZiAoaW5zdGFuY2VJZGVudGlmaWVyID09PSB2b2lkIDApIHsgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FOyB9XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZF8oKTtcclxuICAgICAgICAvLyBnZXRJbW1lZGlhdGUgd2lsbCBhbHdheXMgc3VjY2VlZCBiZWNhdXNlIF9nZXRTZXJ2aWNlIGlzIG9ubHkgY2FsbGVkIGZvciByZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IGluc3RhbmNlSWRlbnRpZmllclxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGEgc2VydmljZSBpbnN0YW5jZSBmcm9tIHRoZSBjYWNoZSwgc28gd2Ugd2lsbCBjcmVhdGUgYSBuZXcgaW5zdGFuY2UgZm9yIHRoaXMgc2VydmljZVxyXG4gICAgICogd2hlbiBwZW9wbGUgdHJ5IHRvIGdldCB0aGlzIHNlcnZpY2UgYWdhaW4uXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogY3VycmVudGx5IG9ubHkgZmlyZXN0b3JlIGlzIHVzaW5nIHRoaXMgZnVuY3Rpb25hbGl0eSB0byBzdXBwb3J0IGZpcmVzdG9yZSBzaHV0ZG93bi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgc2VydmljZSBuYW1lXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIGFsbG93ZWRcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLl9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UgPSBmdW5jdGlvbiAobmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgaWYgKGluc3RhbmNlSWRlbnRpZmllciA9PT0gdm9pZCAwKSB7IGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRTsgfVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSkuY2xlYXJJbnN0YW5jZShpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAgICAgKi9cclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuX2FkZENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiQ29tcG9uZW50IFwiICsgY29tcG9uZW50Lm5hbWUgKyBcIiBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCBcIiArIHRoaXMubmFtZSwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuY2hlY2tEZXN0cm95ZWRfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZF8pIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtZGVsZXRlZFwiIC8qIEFQUF9ERUxFVEVEICovLCB7IGFwcE5hbWU6IHRoaXMubmFtZV8gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBGaXJlYmFzZUFwcEltcGw7XHJcbn0oKSk7XHJcbi8vIFByZXZlbnQgZGVhZC1jb2RlIGVsaW1pbmF0aW9uIG9mIHRoZXNlIG1ldGhvZHMgdy9vIGludmFsaWQgcHJvcGVydHlcclxuLy8gY29weWluZy5cclxuKEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUubmFtZSAmJiBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLm9wdGlvbnMpIHx8XHJcbiAgICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLmRlbGV0ZSB8fFxyXG4gICAgY29uc29sZS5sb2coJ2RjJyk7XG5cbnZhciB2ZXJzaW9uJDEgPSBcIjcuNi4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQmVjYXVzZSBhdXRoIGNhbid0IHNoYXJlIGNvZGUgd2l0aCBvdGhlciBjb21wb25lbnRzLCB3ZSBhdHRhY2ggdGhlIHV0aWxpdHkgZnVuY3Rpb25zXHJcbiAqIGluIGFuIGludGVybmFsIG5hbWVzcGFjZSB0byBzaGFyZSBjb2RlLlxyXG4gKiBUaGlzIGZ1bmN0aW9uIHJldHVybiBhIGZpcmViYXNlIG5hbWVzcGFjZSBvYmplY3Qgd2l0aG91dFxyXG4gKiBhbnkgdXRpbGl0eSBmdW5jdGlvbnMsIHNvIGl0IGNhbiBiZSBzaGFyZWQgYmV0d2VlbiB0aGUgcmVndWxhciBmaXJlYmFzZU5hbWVzcGFjZSBhbmRcclxuICogdGhlIGxpdGUgdmVyc2lvbi5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlQ29yZShmaXJlYmFzZUFwcEltcGwpIHtcclxuICAgIHZhciBhcHBzID0ge307XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgdmFyIGNvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbiAgICAvLyBBIG5hbWVzcGFjZSBpcyBhIHBsYWluIEphdmFTY3JpcHQgT2JqZWN0LlxyXG4gICAgdmFyIG5hbWVzcGFjZSA9IHtcclxuICAgICAgICAvLyBIYWNrIHRvIHByZXZlbnQgQmFiZWwgZnJvbSBtb2RpZnlpbmcgdGhlIG9iamVjdCByZXR1cm5lZFxyXG4gICAgICAgIC8vIGFzIHRoZSBmaXJlYmFzZSBuYW1lc3BhY2UuXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIF9fZXNNb2R1bGU6IHRydWUsXHJcbiAgICAgICAgaW5pdGlhbGl6ZUFwcDogaW5pdGlhbGl6ZUFwcCxcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgYXBwOiBhcHAsXHJcbiAgICAgICAgcmVnaXN0ZXJWZXJzaW9uOiByZWdpc3RlclZlcnNpb24sXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGFwcHM6IG51bGwsXHJcbiAgICAgICAgU0RLX1ZFUlNJT046IHZlcnNpb24kMSxcclxuICAgICAgICBJTlRFUk5BTDoge1xyXG4gICAgICAgICAgICByZWdpc3RlckNvbXBvbmVudDogcmVnaXN0ZXJDb21wb25lbnQsXHJcbiAgICAgICAgICAgIHJlbW92ZUFwcDogcmVtb3ZlQXBwLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzOiBjb21wb25lbnRzLFxyXG4gICAgICAgICAgICB1c2VBc1NlcnZpY2U6IHVzZUFzU2VydmljZVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBJbmplY3QgYSBjaXJjdWxhciBkZWZhdWx0IGV4cG9ydCB0byBhbGxvdyBCYWJlbCB1c2VycyB3aG8gd2VyZSBwcmV2aW91c2x5XHJcbiAgICAvLyB1c2luZzpcclxuICAgIC8vXHJcbiAgICAvLyAgIGltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XHJcbiAgICAvLyAgIHdoaWNoIGJlY29tZXM6IHZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJykuZGVmYXVsdDtcclxuICAgIC8vXHJcbiAgICAvLyBpbnN0ZWFkIG9mXHJcbiAgICAvL1xyXG4gICAgLy8gICBpbXBvcnQgKiBhcyBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XHJcbiAgICAvLyAgIHdoaWNoIGJlY29tZXM6IHZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJyk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgbmFtZXNwYWNlWydkZWZhdWx0J10gPSBuYW1lc3BhY2U7XHJcbiAgICAvLyBmaXJlYmFzZS5hcHBzIGlzIGEgcmVhZC1vbmx5IGdldHRlci5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYW1lc3BhY2UsICdhcHBzJywge1xyXG4gICAgICAgIGdldDogZ2V0QXBwc1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCBieSBBcHAuZGVsZXRlKCkgLSBidXQgYmVmb3JlIGFueSBzZXJ2aWNlcyBhc3NvY2lhdGVkIHdpdGggdGhlIEFwcFxyXG4gICAgICogYXJlIGRlbGV0ZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUFwcChuYW1lKSB7XHJcbiAgICAgICAgZGVsZXRlIGFwcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgQXBwIG9iamVjdCBmb3IgYSBnaXZlbiBuYW1lIChvciBERUZBVUxUKS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwKG5hbWUpIHtcclxuICAgICAgICBuYW1lID0gbmFtZSB8fCBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgaWYgKCF1dGlsLmNvbnRhaW5zKGFwcHMsIG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcHBzW25hbWVdO1xyXG4gICAgfVxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgYXBwWydBcHAnXSA9IGZpcmViYXNlQXBwSW1wbDtcclxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVBcHAob3B0aW9ucywgcmF3Q29uZmlnKSB7XHJcbiAgICAgICAgaWYgKHJhd0NvbmZpZyA9PT0gdm9pZCAwKSB7IHJhd0NvbmZpZyA9IHt9OyB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnIHx8IHJhd0NvbmZpZyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2YXIgbmFtZV8xID0gcmF3Q29uZmlnO1xyXG4gICAgICAgICAgICByYXdDb25maWcgPSB7IG5hbWU6IG5hbWVfMSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29uZmlnID0gcmF3Q29uZmlnO1xyXG4gICAgICAgIGlmIChjb25maWcubmFtZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbmZpZy5uYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHV0aWwuY29udGFpbnMoYXBwcywgbmFtZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYXBwID0gbmV3IGZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIG5hbWVzcGFjZSk7XHJcbiAgICAgICAgYXBwc1tuYW1lXSA9IGFwcDtcclxuICAgICAgICByZXR1cm4gYXBwO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBhbGwgdGhlIG5vbi1kZWxldGVkIEZpcmViYXNlQXBwcy5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgICAgICAvLyBNYWtlIGEgY29weSBzbyBjYWxsZXIgY2Fubm90IG11dGF0ZSB0aGUgYXBwcyBsaXN0LlxyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhhcHBzKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIGFwcHNbbmFtZV07IH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgdmFyIGVfMSwgX2E7XHJcbiAgICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgICAgICBpZiAoY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgXCIgKyBjb21wb25lbnROYW1lICsgXCIuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50LnR5cGUgPT09IFwiUFVCTElDXCIgLyogUFVCTElDICovXHJcbiAgICAgICAgICAgICAgICA/IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlW2NvbXBvbmVudE5hbWVdXHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAgICAgLy8gY3JlYXRlIHNlcnZpY2UgbmFtZXNwYWNlIGZvciBwdWJsaWMgY29tcG9uZW50c1xyXG4gICAgICAgIGlmIChjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhlIFNlcnZpY2UgbmFtZXNwYWNlIGlzIGFuIGFjY2Vzc29yIGZ1bmN0aW9uIC4uLlxyXG4gICAgICAgICAgICB2YXIgc2VydmljZU5hbWVzcGFjZSA9IGZ1bmN0aW9uIChhcHBBcmcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcHBBcmcgPT09IHZvaWQgMCkgeyBhcHBBcmcgPSBhcHAoKTsgfVxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXBwQXJnW2NvbXBvbmVudE5hbWVdICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZCBhcmd1bWVudC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGhhcHBlbnMgaW4gdGhlIGZvbGxvd2luZyBjYXNlOiBmaXJlYmFzZS5zdG9yYWdlKCdnczovJylcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwTmFtZTogY29tcG9uZW50TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gRm9yd2FyZCBzZXJ2aWNlIGluc3RhbmNlIGxvb2t1cCB0byB0aGUgRmlyZWJhc2VBcHAuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcEFyZ1tjb21wb25lbnROYW1lXSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyAuLi4gYW5kIGEgY29udGFpbmVyIGZvciBzZXJ2aWNlLWxldmVsIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQuc2VydmljZVByb3BzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHV0aWwuZGVlcEV4dGVuZChzZXJ2aWNlTmFtZXNwYWNlLCBjb21wb25lbnQuc2VydmljZVByb3BzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICBuYW1lc3BhY2VbY29tcG9uZW50TmFtZV0gPSBzZXJ2aWNlTmFtZXNwYWNlO1xyXG4gICAgICAgICAgICAvLyBQYXRjaCB0aGUgRmlyZWJhc2VBcHBJbXBsIHByb3RvdHlwZVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICBmaXJlYmFzZUFwcEltcGwucHJvdG90eXBlW2NvbXBvbmVudE5hbWVdID1cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IFRoZSBlc2xpbnQgZGlzYWJsZSBjYW4gYmUgcmVtb3ZlZCBhbmQgdGhlICdpZ25vcmVSZXN0QXJncydcclxuICAgICAgICAgICAgICAgIC8vIG9wdGlvbiBhZGRlZCB0byB0aGUgbm8tZXhwbGljaXQtYW55IHJ1bGUgd2hlbiBFU2xpbnQgcmVsZWFzZXMgaXQuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VydmljZUZ4biA9IHRoaXMuX2dldFNlcnZpY2UuYmluZCh0aGlzLCBjb21wb25lbnROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZUZ4bi5hcHBseSh0aGlzLCBjb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBhcmdzIDogW10pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBjb21wb25lbnQgdG8gZXhpc3RpbmcgYXBwIGluc3RhbmNlc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfYiA9IHRzbGliLl9fdmFsdWVzKE9iamVjdC5rZXlzKGFwcHMpKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFwcE5hbWUgPSBfYy52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGFwcHNbYXBwTmFtZV0uX2FkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcG9uZW50LnR5cGUgPT09IFwiUFVCTElDXCIgLyogUFVCTElDICovXHJcbiAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZVtjb21wb25lbnROYW1lXVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZWdpc3RlclZlcnNpb24obGlicmFyeUtleU9yTmFtZSwgdmVyc2lvbiwgdmFyaWFudCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcclxuICAgICAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cclxuICAgICAgICB2YXIgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0sIChfYSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBsaWJyYXJ5S2V5T3JOYW1lKSk7XHJcbiAgICAgICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICAgICAgbGlicmFyeSArPSBcIi1cIiArIHZhcmlhbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICAgICAgdmFyIHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoIHx8IHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB2YXIgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgICAgIFwiVW5hYmxlIHRvIHJlZ2lzdGVyIGxpYnJhcnkgXFxcIlwiICsgbGlicmFyeSArIFwiXFxcIiB3aXRoIHZlcnNpb24gXFxcIlwiICsgdmVyc2lvbiArIFwiXFxcIjpcIlxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5nLnB1c2goXCJsaWJyYXJ5IG5hbWUgXFxcIlwiICsgbGlicmFyeSArIFwiXFxcIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXFxcIi9cXFwiKVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoICYmIHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuaW5nLnB1c2goXCJ2ZXJzaW9uIG5hbWUgXFxcIlwiICsgdmVyc2lvbiArIFwiXFxcIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXFxcIi9cXFwiKVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVnaXN0ZXJDb21wb25lbnQobmV3IGNvbXBvbmVudC5Db21wb25lbnQobGlicmFyeSArIFwiLXZlcnNpb25cIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gKHsgbGlicmFyeTogbGlicmFyeSwgdmVyc2lvbjogdmVyc2lvbiB9KTsgfSwgXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLykpO1xyXG4gICAgfVxyXG4gICAgLy8gTWFwIHRoZSByZXF1ZXN0ZWQgc2VydmljZSB0byBhIHJlZ2lzdGVyZWQgc2VydmljZSBuYW1lXHJcbiAgICAvLyAodXNlZCB0byBtYXAgYXV0aCB0byBzZXJ2ZXJBdXRoIHNlcnZpY2Ugd2hlbiBuZWVkZWQpLlxyXG4gICAgZnVuY3Rpb24gdXNlQXNTZXJ2aWNlKGFwcCwgbmFtZSkge1xyXG4gICAgICAgIGlmIChuYW1lID09PSAnc2VydmVyQXV0aCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB1c2VTZXJ2aWNlID0gbmFtZTtcclxuICAgICAgICByZXR1cm4gdXNlU2VydmljZTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYW1lc3BhY2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm4gYSBmaXJlYmFzZSBuYW1lc3BhY2Ugb2JqZWN0LlxyXG4gKlxyXG4gKiBJbiBwcm9kdWN0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGV4YWN0bHkgb25jZSBhbmQgdGhlIHJlc3VsdFxyXG4gKiBhc3NpZ25lZCB0byB0aGUgJ2ZpcmViYXNlJyBnbG9iYWwuICBJdCBtYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzXHJcbiAqIGluIHVuaXQgdGVzdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSgpIHtcclxuICAgIHZhciBuYW1lc3BhY2UgPSBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUoRmlyZWJhc2VBcHBJbXBsKTtcclxuICAgIG5hbWVzcGFjZS5JTlRFUk5BTCA9IHRzbGliLl9fYXNzaWduKHRzbGliLl9fYXNzaWduKHt9LCBuYW1lc3BhY2UuSU5URVJOQUwpLCB7IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlOiBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSxcclxuICAgICAgICBleHRlbmROYW1lc3BhY2U6IGV4dGVuZE5hbWVzcGFjZSxcclxuICAgICAgICBjcmVhdGVTdWJzY3JpYmU6IHV0aWwuY3JlYXRlU3Vic2NyaWJlLFxyXG4gICAgICAgIEVycm9yRmFjdG9yeTogdXRpbC5FcnJvckZhY3RvcnksXHJcbiAgICAgICAgZGVlcEV4dGVuZDogdXRpbC5kZWVwRXh0ZW5kIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXRjaCB0aGUgdG9wLWxldmVsIGZpcmViYXNlIG5hbWVzcGFjZSB3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllcy5cclxuICAgICAqXHJcbiAgICAgKiBmaXJlYmFzZS5JTlRFUk5BTC5leHRlbmROYW1lc3BhY2UoKVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBleHRlbmROYW1lc3BhY2UocHJvcHMpIHtcclxuICAgICAgICB1dGlsLmRlZXBFeHRlbmQobmFtZXNwYWNlLCBwcm9wcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmFtZXNwYWNlO1xyXG59XHJcbnZhciBmaXJlYmFzZSA9IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlKCk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXHJcbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cclxuICAgIFBsYXRmb3JtTG9nZ2VyU2VydmljZS5wcm90b3R5cGUuZ2V0UGxhdGZvcm1JbmZvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXHJcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZS5saWJyYXJ5ICsgXCIvXCIgKyBzZXJ2aWNlLnZlcnNpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGxvZ1N0cmluZykgeyByZXR1cm4gbG9nU3RyaW5nOyB9KVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQbGF0Zm9ybUxvZ2dlclNlcnZpY2U7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHZhciBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoKF9hID0gY29tcG9uZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoZmlyZWJhc2UsIHZhcmlhbnQpIHtcclxuICAgIGZpcmViYXNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBjb21wb25lbnQuQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBmdW5jdGlvbiAoY29udGFpbmVyKSB7IHJldHVybiBuZXcgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlKGNvbnRhaW5lcik7IH0sIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICBmaXJlYmFzZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgdmFyaWFudCk7XHJcbiAgICAvLyBSZWdpc3RlciBwbGF0Zm9ybSBTREsgaWRlbnRpZmllciAobm8gdmVyc2lvbikuXHJcbiAgICBmaXJlYmFzZS5yZWdpc3RlclZlcnNpb24oJ2ZpcmUtanMnLCAnJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIEZpcmViYXNlIExpdGUgZGV0ZWN0aW9uXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmlmICh1dGlsLmlzQnJvd3NlcigpICYmIHNlbGYuZmlyZWJhc2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgbG9nZ2VyLndhcm4oXCJcXG4gICAgV2FybmluZzogRmlyZWJhc2UgaXMgYWxyZWFkeSBkZWZpbmVkIGluIHRoZSBnbG9iYWwgc2NvcGUuIFBsZWFzZSBtYWtlIHN1cmVcXG4gICAgRmlyZWJhc2UgbGlicmFyeSBpcyBvbmx5IGxvYWRlZCBvbmNlLlxcbiAgXCIpO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXHJcbiAgICB2YXIgc2RrVmVyc2lvbiA9IHNlbGYuZmlyZWJhc2UuU0RLX1ZFUlNJT047XHJcbiAgICBpZiAoc2RrVmVyc2lvbiAmJiBzZGtWZXJzaW9uLmluZGV4T2YoJ0xJVEUnKSA+PSAwKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJcXG4gICAgV2FybmluZzogWW91IGFyZSB0cnlpbmcgdG8gbG9hZCBGaXJlYmFzZSB3aGlsZSB1c2luZyBGaXJlYmFzZSBQZXJmb3JtYW5jZSBzdGFuZGFsb25lIHNjcmlwdC5cXG4gICAgWW91IHNob3VsZCBsb2FkIEZpcmViYXNlIFBlcmZvcm1hbmNlIHdpdGggdGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZSB0byBhdm9pZCBsb2FkaW5nIGR1cGxpY2F0ZSBjb2RlLlxcbiAgICBcIik7XHJcbiAgICB9XHJcbn1cclxudmFyIGluaXRpYWxpemVBcHAgPSBmaXJlYmFzZS5pbml0aWFsaXplQXBwO1xyXG4vLyBUT0RPOiBUaGlzIGRpc2FibGUgY2FuIGJlIHJlbW92ZWQgYW5kIHRoZSAnaWdub3JlUmVzdEFyZ3MnIG9wdGlvbiBhZGRlZCB0b1xyXG4vLyB0aGUgbm8tZXhwbGljaXQtYW55IHJ1bGUgd2hlbiBFU2xpbnQgcmVsZWFzZXMgaXQuXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmZpcmViYXNlLmluaXRpYWxpemVBcHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICAvLyBFbnZpcm9ubWVudCBjaGVjayBiZWZvcmUgaW5pdGlhbGl6aW5nIGFwcFxyXG4gICAgLy8gRG8gdGhlIGNoZWNrIGluIGluaXRpYWxpemVBcHAsIHNvIHBlb3BsZSBoYXZlIGEgY2hhbmNlIHRvIGRpc2FibGUgaXQgYnkgc2V0dGluZyBsb2dMZXZlbFxyXG4gICAgLy8gaW4gQGZpcmViYXNlL2xvZ2dlclxyXG4gICAgaWYgKHV0aWwuaXNOb2RlKCkpIHtcclxuICAgICAgICBsb2dnZXIud2FybihcIlxcbiAgICAgIFdhcm5pbmc6IFRoaXMgaXMgYSBicm93c2VyLXRhcmdldGVkIEZpcmViYXNlIGJ1bmRsZSBidXQgaXQgYXBwZWFycyBpdCBpcyBiZWluZ1xcbiAgICAgIHJ1biBpbiBhIE5vZGUgZW52aXJvbm1lbnQuICBJZiBydW5uaW5nIGluIGEgTm9kZSBlbnZpcm9ubWVudCwgbWFrZSBzdXJlIHlvdVxcbiAgICAgIGFyZSB1c2luZyB0aGUgYnVuZGxlIHNwZWNpZmllZCBieSB0aGUgXFxcIm1haW5cXFwiIGZpZWxkIGluIHBhY2thZ2UuanNvbi5cXG4gICAgICBcXG4gICAgICBJZiB5b3UgYXJlIHVzaW5nIFdlYnBhY2ssIHlvdSBjYW4gc3BlY2lmeSBcXFwibWFpblxcXCIgYXMgdGhlIGZpcnN0IGl0ZW0gaW5cXG4gICAgICBcXFwicmVzb2x2ZS5tYWluRmllbGRzXFxcIjpcXG4gICAgICBodHRwczovL3dlYnBhY2suanMub3JnL2NvbmZpZ3VyYXRpb24vcmVzb2x2ZS8jcmVzb2x2ZW1haW5maWVsZHNcXG4gICAgICBcXG4gICAgICBJZiB1c2luZyBSb2xsdXAsIHVzZSB0aGUgcm9sbHVwLXBsdWdpbi1ub2RlLXJlc29sdmUgcGx1Z2luIGFuZCBzcGVjaWZ5IFxcXCJtYWluXFxcIlxcbiAgICAgIGFzIHRoZSBmaXJzdCBpdGVtIGluIFxcXCJtYWluRmllbGRzXFxcIiwgZS5nLiBbJ21haW4nLCAnbW9kdWxlJ10uXFxuICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAtcGx1Z2luLW5vZGUtcmVzb2x2ZVxcbiAgICAgIFwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0aWFsaXplQXBwLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XHJcbn07XHJcbnZhciBmaXJlYmFzZSQxID0gZmlyZWJhc2U7XHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoZmlyZWJhc2UkMSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZpcmViYXNlJDE7XG5leHBvcnRzLmZpcmViYXNlID0gZmlyZWJhc2UkMTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmNqcy5qcy5tYXBcbiIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0IChleCkgeyByZXR1cm4gKGV4ICYmICh0eXBlb2YgZXggPT09ICdvYmplY3QnKSAmJiAnZGVmYXVsdCcgaW4gZXgpID8gZXhbJ2RlZmF1bHQnXSA6IGV4OyB9XG5cbnZhciBmaXJlYmFzZSA9IF9pbnRlcm9wRGVmYXVsdChyZXF1aXJlKCdAZmlyZWJhc2UvYXBwJykpO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI3LjYuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZmlyZWJhc2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmaXJlYmFzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmNqcy5qcy5tYXBcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG5mdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxudmFyIGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGxldmVsXHJcbiAqL1xyXG52YXIgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG52YXIgZGVmYXVsdExvZ0hhbmRsZXIgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIGxvZ1R5cGUpIHtcclxuICAgIHZhciBhcmdzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIHN3aXRjaCAobG9nVHlwZSkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICAgICAgICAgKiBjaHJvbWUpLiBUbyBhdm9pZCBmb3JjaW5nIHVzZXJzIHRvIGhhdmUgdG8gb3B0LWluIHRvIHRoZXNlIGxvZ3MgdHdpY2VcclxuICAgICAgICAgKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAgICAgICAgICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjYXNlIExvZ0xldmVsLkRFQlVHOlxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5cyhbXCJbXCIgKyBub3cgKyBcIl0gIFwiICsgaW5zdGFuY2UubmFtZSArIFwiOlwiXSwgYXJncykpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExvZ0xldmVsLlZFUkJPU0U6XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXlzKFtcIltcIiArIG5vdyArIFwiXSAgXCIgKyBpbnN0YW5jZS5uYW1lICsgXCI6XCJdLCBhcmdzKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuSU5GTzpcclxuICAgICAgICAgICAgY29uc29sZS5pbmZvLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXlzKFtcIltcIiArIG5vdyArIFwiXSAgXCIgKyBpbnN0YW5jZS5uYW1lICsgXCI6XCJdLCBhcmdzKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuV0FSTjpcclxuICAgICAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXlzKFtcIltcIiArIG5vdyArIFwiXSAgXCIgKyBpbnN0YW5jZS5uYW1lICsgXCI6XCJdLCBhcmdzKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheXMoW1wiW1wiICsgbm93ICsgXCJdICBcIiArIGluc3RhbmNlLm5hbWUgKyBcIjpcIl0sIGFyZ3MpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiBcIiArIGxvZ1R5cGUgKyBcIilcIik7XHJcbiAgICB9XHJcbn07XHJcbnZhciBMb2dnZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIExvZ2dlcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMb2dnZXIucHJvdG90eXBlLCBcImxvZ0xldmVsXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0xldmVsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgIGlmICghKHZhbCBpbiBMb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgdmFsdWUgYXNzaWduZWQgdG8gYGxvZ0xldmVsYCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdmFsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExvZ2dlci5wcm90b3R5cGUsIFwibG9nSGFuZGxlclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBhc3NpZ25lZCB0byBgbG9nSGFuZGxlcmAgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIExvZ2dlci5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLkRFQlVHXSwgYXJncykpO1xyXG4gICAgfTtcclxuICAgIExvZ2dlci5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXlzKFt0aGlzLCBMb2dMZXZlbC5WRVJCT1NFXSwgYXJncykpO1xyXG4gICAgfTtcclxuICAgIExvZ2dlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuSU5GT10sIGFyZ3MpKTtcclxuICAgIH07XHJcbiAgICBMb2dnZXIucHJvdG90eXBlLndhcm4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheXMoW3RoaXMsIExvZ0xldmVsLldBUk5dLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgTG9nZ2VyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlci5hcHBseSh0aGlzLCBfX3NwcmVhZEFycmF5cyhbdGhpcywgTG9nTGV2ZWwuRVJST1JdLCBhcmdzKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvZ2dlcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChmdW5jdGlvbiAoaW5zdCkge1xyXG4gICAgICAgIGluc3QubG9nTGV2ZWwgPSBsZXZlbDtcclxuICAgIH0pO1xyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KSA6XG4gIChnbG9iYWwgPSBnbG9iYWwgfHwgc2VsZiwgZmFjdG9yeShnbG9iYWwuaWRiID0ge30pKTtcbn0odGhpcywgZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIGZ1bmN0aW9uIHRvQXJyYXkoYXJyKSB7XG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycik7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcbiAgICAgIH07XG5cbiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpIHtcbiAgICB2YXIgcmVxdWVzdDtcbiAgICB2YXIgcCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVxdWVzdCA9IG9ialttZXRob2RdLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcblxuICAgIHAucmVxdWVzdCA9IHJlcXVlc3Q7XG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICBmdW5jdGlvbiBwcm9taXNpZnlDdXJzb3JSZXF1ZXN0Q2FsbChvYmosIG1ldGhvZCwgYXJncykge1xuICAgIHZhciBwID0gcHJvbWlzaWZ5UmVxdWVzdENhbGwob2JqLCBtZXRob2QsIGFyZ3MpO1xuICAgIHJldHVybiBwLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICghdmFsdWUpIHJldHVybjtcbiAgICAgIHJldHVybiBuZXcgQ3Vyc29yKHZhbHVlLCBwLnJlcXVlc3QpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlQcm9wZXJ0aWVzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIHByb3BlcnRpZXMpIHtcbiAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFByb3h5Q2xhc3MucHJvdG90eXBlLCBwcm9wLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgdGhpc1t0YXJnZXRQcm9wXVtwcm9wXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eVJlcXVlc3RNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3RDYWxsKHRoaXNbdGFyZ2V0UHJvcF0sIHByb3AsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJveHlNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbdGFyZ2V0UHJvcF1bcHJvcF0uYXBwbHkodGhpc1t0YXJnZXRQcm9wXSwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcm94eUN1cnNvclJlcXVlc3RNZXRob2RzKFByb3h5Q2xhc3MsIHRhcmdldFByb3AsIENvbnN0cnVjdG9yLCBwcm9wZXJ0aWVzKSB7XG4gICAgcHJvcGVydGllcy5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcbiAgICAgIGlmICghKHByb3AgaW4gQ29uc3RydWN0b3IucHJvdG90eXBlKSkgcmV0dXJuO1xuICAgICAgUHJveHlDbGFzcy5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeUN1cnNvclJlcXVlc3RDYWxsKHRoaXNbdGFyZ2V0UHJvcF0sIHByb3AsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gSW5kZXgoaW5kZXgpIHtcbiAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xuICB9XG5cbiAgcHJveHlQcm9wZXJ0aWVzKEluZGV4LCAnX2luZGV4JywgW1xuICAgICduYW1lJyxcbiAgICAna2V5UGF0aCcsXG4gICAgJ211bHRpRW50cnknLFxuICAgICd1bmlxdWUnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoSW5kZXgsICdfaW5kZXgnLCBJREJJbmRleCwgW1xuICAgICdnZXQnLFxuICAgICdnZXRLZXknLFxuICAgICdnZXRBbGwnLFxuICAgICdnZXRBbGxLZXlzJyxcbiAgICAnY291bnQnXG4gIF0pO1xuXG4gIHByb3h5Q3Vyc29yUmVxdWVzdE1ldGhvZHMoSW5kZXgsICdfaW5kZXgnLCBJREJJbmRleCwgW1xuICAgICdvcGVuQ3Vyc29yJyxcbiAgICAnb3BlbktleUN1cnNvcidcbiAgXSk7XG5cbiAgZnVuY3Rpb24gQ3Vyc29yKGN1cnNvciwgcmVxdWVzdCkge1xuICAgIHRoaXMuX2N1cnNvciA9IGN1cnNvcjtcbiAgICB0aGlzLl9yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgfVxuXG4gIHByb3h5UHJvcGVydGllcyhDdXJzb3IsICdfY3Vyc29yJywgW1xuICAgICdkaXJlY3Rpb24nLFxuICAgICdrZXknLFxuICAgICdwcmltYXJ5S2V5JyxcbiAgICAndmFsdWUnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoQ3Vyc29yLCAnX2N1cnNvcicsIElEQkN1cnNvciwgW1xuICAgICd1cGRhdGUnLFxuICAgICdkZWxldGUnXG4gIF0pO1xuXG4gIC8vIHByb3h5ICduZXh0JyBtZXRob2RzXG4gIFsnYWR2YW5jZScsICdjb250aW51ZScsICdjb250aW51ZVByaW1hcnlLZXknXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZE5hbWUpIHtcbiAgICBpZiAoIShtZXRob2ROYW1lIGluIElEQkN1cnNvci5wcm90b3R5cGUpKSByZXR1cm47XG4gICAgQ3Vyc29yLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGN1cnNvciA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBjdXJzb3IuX2N1cnNvclttZXRob2ROYW1lXS5hcHBseShjdXJzb3IuX2N1cnNvciwgYXJncyk7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KGN1cnNvci5fcmVxdWVzdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybjtcbiAgICAgICAgICByZXR1cm4gbmV3IEN1cnNvcih2YWx1ZSwgY3Vyc29yLl9yZXF1ZXN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBPYmplY3RTdG9yZShzdG9yZSkge1xuICAgIHRoaXMuX3N0b3JlID0gc3RvcmU7XG4gIH1cblxuICBPYmplY3RTdG9yZS5wcm90b3R5cGUuY3JlYXRlSW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IEluZGV4KHRoaXMuX3N0b3JlLmNyZWF0ZUluZGV4LmFwcGx5KHRoaXMuX3N0b3JlLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBPYmplY3RTdG9yZS5wcm90b3R5cGUuaW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IEluZGV4KHRoaXMuX3N0b3JlLmluZGV4LmFwcGx5KHRoaXMuX3N0b3JlLCBhcmd1bWVudHMpKTtcbiAgfTtcblxuICBwcm94eVByb3BlcnRpZXMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBbXG4gICAgJ25hbWUnLFxuICAgICdrZXlQYXRoJyxcbiAgICAnaW5kZXhOYW1lcycsXG4gICAgJ2F1dG9JbmNyZW1lbnQnXG4gIF0pO1xuXG4gIHByb3h5UmVxdWVzdE1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdwdXQnLFxuICAgICdhZGQnLFxuICAgICdkZWxldGUnLFxuICAgICdjbGVhcicsXG4gICAgJ2dldCcsXG4gICAgJ2dldEFsbCcsXG4gICAgJ2dldEtleScsXG4gICAgJ2dldEFsbEtleXMnLFxuICAgICdjb3VudCdcbiAgXSk7XG5cbiAgcHJveHlDdXJzb3JSZXF1ZXN0TWV0aG9kcyhPYmplY3RTdG9yZSwgJ19zdG9yZScsIElEQk9iamVjdFN0b3JlLCBbXG4gICAgJ29wZW5DdXJzb3InLFxuICAgICdvcGVuS2V5Q3Vyc29yJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoT2JqZWN0U3RvcmUsICdfc3RvcmUnLCBJREJPYmplY3RTdG9yZSwgW1xuICAgICdkZWxldGVJbmRleCdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gVHJhbnNhY3Rpb24oaWRiVHJhbnNhY3Rpb24pIHtcbiAgICB0aGlzLl90eCA9IGlkYlRyYW5zYWN0aW9uO1xuICAgIHRoaXMuY29tcGxldGUgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfTtcbiAgICAgIGlkYlRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KGlkYlRyYW5zYWN0aW9uLmVycm9yKTtcbiAgICAgIH07XG4gICAgICBpZGJUcmFuc2FjdGlvbi5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChpZGJUcmFuc2FjdGlvbi5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLm9iamVjdFN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZSh0aGlzLl90eC5vYmplY3RTdG9yZS5hcHBseSh0aGlzLl90eCwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKFRyYW5zYWN0aW9uLCAnX3R4JywgW1xuICAgICdvYmplY3RTdG9yZU5hbWVzJyxcbiAgICAnbW9kZSdcbiAgXSk7XG5cbiAgcHJveHlNZXRob2RzKFRyYW5zYWN0aW9uLCAnX3R4JywgSURCVHJhbnNhY3Rpb24sIFtcbiAgICAnYWJvcnQnXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIFVwZ3JhZGVEQihkYiwgb2xkVmVyc2lvbiwgdHJhbnNhY3Rpb24pIHtcbiAgICB0aGlzLl9kYiA9IGRiO1xuICAgIHRoaXMub2xkVmVyc2lvbiA9IG9sZFZlcnNpb247XG4gICAgdGhpcy50cmFuc2FjdGlvbiA9IG5ldyBUcmFuc2FjdGlvbih0cmFuc2FjdGlvbik7XG4gIH1cblxuICBVcGdyYWRlREIucHJvdG90eXBlLmNyZWF0ZU9iamVjdFN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZSh0aGlzLl9kYi5jcmVhdGVPYmplY3RTdG9yZS5hcHBseSh0aGlzLl9kYiwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKFVwZ3JhZGVEQiwgJ19kYicsIFtcbiAgICAnbmFtZScsXG4gICAgJ3ZlcnNpb24nLFxuICAgICdvYmplY3RTdG9yZU5hbWVzJ1xuICBdKTtcblxuICBwcm94eU1ldGhvZHMoVXBncmFkZURCLCAnX2RiJywgSURCRGF0YWJhc2UsIFtcbiAgICAnZGVsZXRlT2JqZWN0U3RvcmUnLFxuICAgICdjbG9zZSdcbiAgXSk7XG5cbiAgZnVuY3Rpb24gREIoZGIpIHtcbiAgICB0aGlzLl9kYiA9IGRiO1xuICB9XG5cbiAgREIucHJvdG90eXBlLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbih0aGlzLl9kYi50cmFuc2FjdGlvbi5hcHBseSh0aGlzLl9kYiwgYXJndW1lbnRzKSk7XG4gIH07XG5cbiAgcHJveHlQcm9wZXJ0aWVzKERCLCAnX2RiJywgW1xuICAgICduYW1lJyxcbiAgICAndmVyc2lvbicsXG4gICAgJ29iamVjdFN0b3JlTmFtZXMnXG4gIF0pO1xuXG4gIHByb3h5TWV0aG9kcyhEQiwgJ19kYicsIElEQkRhdGFiYXNlLCBbXG4gICAgJ2Nsb3NlJ1xuICBdKTtcblxuICAvLyBBZGQgY3Vyc29yIGl0ZXJhdG9yc1xuICAvLyBUT0RPOiByZW1vdmUgdGhpcyBvbmNlIGJyb3dzZXJzIGRvIHRoZSByaWdodCB0aGluZyB3aXRoIHByb21pc2VzXG4gIFsnb3BlbkN1cnNvcicsICdvcGVuS2V5Q3Vyc29yJ10uZm9yRWFjaChmdW5jdGlvbihmdW5jTmFtZSkge1xuICAgIFtPYmplY3RTdG9yZSwgSW5kZXhdLmZvckVhY2goZnVuY3Rpb24oQ29uc3RydWN0b3IpIHtcbiAgICAgIC8vIERvbid0IGNyZWF0ZSBpdGVyYXRlS2V5Q3Vyc29yIGlmIG9wZW5LZXlDdXJzb3IgZG9lc24ndCBleGlzdC5cbiAgICAgIGlmICghKGZ1bmNOYW1lIGluIENvbnN0cnVjdG9yLnByb3RvdHlwZSkpIHJldHVybjtcblxuICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlW2Z1bmNOYW1lLnJlcGxhY2UoJ29wZW4nLCAnaXRlcmF0ZScpXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuICAgICAgICB2YXIgbmF0aXZlT2JqZWN0ID0gdGhpcy5fc3RvcmUgfHwgdGhpcy5faW5kZXg7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gbmF0aXZlT2JqZWN0W2Z1bmNOYW1lXS5hcHBseShuYXRpdmVPYmplY3QsIGFyZ3Muc2xpY2UoMCwgLTEpKTtcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBwb2x5ZmlsbCBnZXRBbGxcbiAgW0luZGV4LCBPYmplY3RTdG9yZV0uZm9yRWFjaChmdW5jdGlvbihDb25zdHJ1Y3Rvcikge1xuICAgIGlmIChDb25zdHJ1Y3Rvci5wcm90b3R5cGUuZ2V0QWxsKSByZXR1cm47XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKHF1ZXJ5LCBjb3VudCkge1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgIHZhciBpdGVtcyA9IFtdO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgICBpbnN0YW5jZS5pdGVyYXRlQ3Vyc29yKHF1ZXJ5LCBmdW5jdGlvbihjdXJzb3IpIHtcbiAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goY3Vyc29yLnZhbHVlKTtcblxuICAgICAgICAgIGlmIChjb3VudCAhPT0gdW5kZWZpbmVkICYmIGl0ZW1zLmxlbmd0aCA9PSBjb3VudCkge1xuICAgICAgICAgICAgcmVzb2x2ZShpdGVtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIG9wZW5EYihuYW1lLCB2ZXJzaW9uLCB1cGdyYWRlQ2FsbGJhY2spIHtcbiAgICB2YXIgcCA9IHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ29wZW4nLCBbbmFtZSwgdmVyc2lvbl0pO1xuICAgIHZhciByZXF1ZXN0ID0gcC5yZXF1ZXN0O1xuXG4gICAgaWYgKHJlcXVlc3QpIHtcbiAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKHVwZ3JhZGVDYWxsYmFjaykge1xuICAgICAgICAgIHVwZ3JhZGVDYWxsYmFjayhuZXcgVXBncmFkZURCKHJlcXVlc3QucmVzdWx0LCBldmVudC5vbGRWZXJzaW9uLCByZXF1ZXN0LnRyYW5zYWN0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHAudGhlbihmdW5jdGlvbihkYikge1xuICAgICAgcmV0dXJuIG5ldyBEQihkYik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWxldGVEYihuYW1lKSB7XG4gICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3RDYWxsKGluZGV4ZWREQiwgJ2RlbGV0ZURhdGFiYXNlJywgW25hbWVdKTtcbiAgfVxuXG4gIGV4cG9ydHMub3BlbkRiID0gb3BlbkRiO1xuICBleHBvcnRzLmRlbGV0ZURiID0gZGVsZXRlRGI7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxufSkpO1xuIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tNy0yIS4vc3R5bGVzLnNjc3NcIik7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbiAgICAgICAgICAgIH1cblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzIHx8IHt9OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIik7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzBfX18gPSByZXF1aXJlKFwiLi4vYXNzZXRzL2ljb25zL2hhbWJ1cmdlckljb24uc3ZnXCIpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fID0gcmVxdWlyZShcIi4uL2Fzc2V0cy9pY29ucy9jcm9zc0ljb24uc3ZnXCIpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8yX19fID0gcmVxdWlyZShcIi4uL2Fzc2V0cy9pY29ucy9wcm9qZWN0c0xpc3RJY29uLnN2Z1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzBfX18gPSBfX19DU1NfTE9BREVSX0dFVF9VUkxfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8xX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMl9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzJfX18pO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubWFpblBhbmVse2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjQ2LDI0NiwyNDYsLjkpO3RyYW5zaXRpb246cmlnaHQgMXMsYm90dG9tIDFzOy0td2lkdGg6IDI1MHB4Oy0taGVpZ2h0OiAyMDBweH0ubWFpblBhbmVsLnJpZ2h0e2hlaWdodDoxMDAlO3dpZHRoOnZhcigtLXdpZHRoKTt0b3A6MDtyaWdodDpjYWxjKHZhcigtLXdpZHRoKSAqIC0xKX0ubWFpblBhbmVsLmJvdHRvbXtmbGV4LWRpcmVjdGlvbjpjb2x1bW47aGVpZ2h0OnZhcigtLWhlaWdodCk7d2lkdGg6MTAwJTtib3R0b206Y2FsYyh2YXIoLS1oZWlnaHQpICogLTEpfS5tYWluUGFuZWwucmlnaHQ+LnBhbmVsLWNvbnRlbnR7d2lkdGg6MTAwJX0ubWFpblBhbmVsLmJvdHRvbT4ucGFuZWwtY29udGVudHtkaXNwbGF5OmZsZXg7aGVpZ2h0OjEwMCV9Lm1haW5QYW5lbC5yaWdodC5vcGVue3JpZ2h0OjB9Lm1haW5QYW5lbC5ib3R0b20ub3Blbntib3R0b206MH0ubWFpblBhbmVsPi5wYW5lbC1ncmlwe2JhY2tncm91bmQ6IzJhOGZiMX0ubWFpblBhbmVsLnJpZ2h0Pi5wYW5lbC1ncmlwe2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7cGFkZGluZzowIDVweDtjdXJzb3I6Y29sLXJlc2l6ZX0ubWFpblBhbmVsLmJvdHRvbT4ucGFuZWwtZ3JpcHtwYWRkaW5nOjVweCAwO2N1cnNvcjpyb3ctcmVzaXplfS5tYWluUGFuZWw+LnBhbmVsLWdyaXA6OmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO2Rpc3BsYXk6YmxvY2t9Lm1haW5QYW5lbC5yaWdodD4ucGFuZWwtZ3JpcDo6YmVmb3Jle2hlaWdodDoyN3B4O2JvcmRlci1yaWdodDozcHggZG91YmxlICNmZmZ9Lm1haW5QYW5lbC5ib3R0b20+LnBhbmVsLWdyaXA6OmJlZm9yZXt3aWR0aDoyN3B4O2JvcmRlci10b3A6M3B4IGRvdWJsZSAjZmZmO21hcmdpbjphdXRvfS5tYWluUGFuZWw+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcntkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWFyb3VuZDthbGlnbi1pdGVtczpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXJ9Lm1haW5QYW5lbC5ib3R0b20+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWhlYWRlcntmbGV4LWRpcmVjdGlvbjpjb2x1bW59Lm1haW5QYW5lbD4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVyPnNwYW57cGFkZGluZzouMnJlbTtmbGV4LWdyb3c6MX0ubWFpblBhbmVsLmJvdHRvbT4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVyPnNwYW57d2lkdGg6MzVweDt3cml0aW5nLW1vZGU6dmVydGljYWwtcmw7LXdlYmtpdC13cml0aW5nLW1vZGU6dmVydGljYWwtcmx9Lm1haW5QYW5lbD4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVyPnNwYW46bm90KC5hY3RpdmUpe2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQtY29sb3I6I2U0ZTRlNH0ubWFpblBhbmVsLnJpZ2h0Pi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbjpub3QoLmFjdGl2ZSl7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2E2YTZhNn0ubWFpblBhbmVsLmJvdHRvbT4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVyPnNwYW46bm90KC5hY3RpdmUpe2JvcmRlci1yaWdodDoxcHggc29saWQgI2E2YTZhNn0ubWFpblBhbmVsLnJpZ2h0Pi5wYW5lbC1jb250ZW50Pi5wYW5lbC1oZWFkZXI+c3Bhbjpub3QoOmxhc3QtY2hpbGQpe2JvcmRlci1yaWdodDoxcHggc29saWQgI2E2YTZhNn0ubWFpblBhbmVsLmJvdHRvbT4ucGFuZWwtY29udGVudD4ucGFuZWwtaGVhZGVyPnNwYW46bm90KDpsYXN0LWNoaWxkKXtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjYTZhNmE2fS5tYWluUGFuZWw+LnBhbmVsLWNvbnRlbnQ+LnBhbmVsLWJvZHl7ZmxleC1ncm93OjE7cGFkZGluZzouNXJlbX0ubWFpblBhbmVsPi5wYW5lbC1jb250ZW50Pi5wYW5lbC1ib2R5Pi5oaWRkZW57ZGlzcGxheTpub25lfSNwcm9qZWN0c0xpc3RDb250YWluZXJ7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtwb3NpdGlvbjphYnNvbHV0ZTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I3Byb2plY3RzTGlzdENvbnRhaW5lcj5kaXY6Zmlyc3QtY2hpbGR7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmc6MXJlbX0jcHJvamVjdHNMaXN0Q29udGFpbmVyPmRpdjpmaXJzdC1jaGlsZD5zcGFue3dpZHRoOjIwJX1AbWVkaWEobWF4LXdpZHRoOiA1MDBweCl7I2Nsb3NlUHJvamVjdHNMaXN0QnRue2Rpc3BsYXk6bm9uZX19I2Nsb3NlUHJvamVjdHNMaXN0QnRue2Zsb2F0OnJpZ2h0fSNwcm9qZWN0c0xpc3RDb250YWluZXI+ZGl2OmZpcnN0LWNoaWxkPmg0e292ZXJmbG93LXg6aGlkZGVuO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXNpemU6MS42cmVtfSNwcm9qZWN0c0xpc3R7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO21hcmdpbi1sZWZ0OjFyZW07LS1pdGVtcy1oOiA2Oy0taXRlbS13aWR0aDogY2FsYygoMTAwJSAvIHZhcigtLWl0ZW1zLWgpKSAtIDFyZW0pOy0tcmVtYWluaW5nLWl0ZW1zOiB1bnNldH1AbWVkaWEobWF4LXdpZHRoOiAxMDAwcHgpeyNwcm9qZWN0c0xpc3R7LS1pdGVtcy1oOiA1fX1AbWVkaWEobWF4LXdpZHRoOiA4MDBweCl7I3Byb2plY3RzTGlzdHstLWl0ZW1zLWg6IDR9fUBtZWRpYShtYXgtd2lkdGg6IDYwMHB4KXsjcHJvamVjdHNMaXN0ey0taXRlbXMtaDogM319QG1lZGlhKG1heC13aWR0aDogNDAwcHgpeyNwcm9qZWN0c0xpc3R7LS1pdGVtcy1oOiAyfX1AbWVkaWEobWF4LXdpZHRoOiAyODBweCl7I3Byb2plY3RzTGlzdHstLWl0ZW1zLWg6IDF9fSNwcm9qZWN0c0xpc3Q6OmFmdGVye2NvbnRlbnQ6XFxcIlxcXCI7ZmxleC1ncm93OnZhcigtLXJlbWFpbmluZy1pdGVtcyk7d2lkdGg6Y2FsYygodmFyKC0taXRlbS13aWR0aCkgKyAxcmVtKSAqIHZhcigtLXJlbWFpbmluZy1pdGVtcykpfSNwcm9qZWN0c0xpc3Q+LmVtcHR5LW1zZ3t3aWR0aDoxMDAlO21hcmdpbi10b3A6M3JlbTttYXJnaW4tYm90dG9tOjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9LnByb2plY3RJdGVte2ZsZXgtZ3JvdzoxO3dpZHRoOnZhcigtLWl0ZW0td2lkdGgpO21hcmdpbi1ib3R0b206MXJlbTttYXJnaW4tcmlnaHQ6MXJlbTtwb3NpdGlvbjpyZWxhdGl2ZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2JveC1zaGFkb3c6MnB4IDJweCA3cHggI2IyYjJiMn0ucHJvamVjdEl0ZW0+aDR7YmFja2dyb3VuZC1jb2xvcjojZjlmOWY5fS5wcm9qZWN0SXRlbS5jdXJyZW50e2N1cnNvcjphdXRvO291dGxpbmU6NHB4IHNvbGlkICM3ZGE1YjY7Ym94LXNoYWRvdzpub25lfS5wcm9qZWN0SXRlbS51bnN5bmN7b3BhY2l0eTouNX0ucHJvamVjdEl0ZW06bm90KC5jdXJyZW50KTpob3Zlcntib3gtc2hhZG93OjJweCAycHggN3B4ICM2YjZiNmJ9LnByb2plY3RJdGVtPi5zaGFyZWRJY29ue3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjMwcHg7aGVpZ2h0OjMwcHg7cmlnaHQ6NnB4O3RvcDo2cHg7YmFja2dyb3VuZC1jb2xvcjojZWVlO3BhZGRpbmc6NXB4O2JvcmRlci1yYWRpdXM6NTAlfS5wcm9qZWN0SXRlbT4udGh1bWJ7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxNTBweDtvYmplY3QtZml0OmNvdmVyfS5wcm9qZWN0SXRlbT5oNHtwYWRkaW5nOi42cmVtO2ZvbnQtd2VpZ2h0Om5vcm1hbH0jbG9hZE1vcmVQcm9qQnRue2Rpc3BsYXk6YmxvY2s7bWFyZ2luOmF1dG99I21vZGFsRGlhbG9nQ29udGFpbmVye2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowfSNtb2RhbERpYWxvZ0NvbnRhaW5lcj5kaXZ7cGFkZGluZzoxcmVtO2JhY2tncm91bmQtY29sb3I6I2ZmZn0jbW9kYWxEaWFsb2dDb250YWluZXIuZ3JheVRyYW5zbHVjZW50e2JhY2tncm91bmQtY29sb3I6cmdiYSgyMTYsMjE2LDIxNiwuOCl9I21vZGFsRGlhbG9nQ29udGFpbmVyLmxpZ2h0T3BhcXVle2JhY2tncm91bmQtY29sb3I6I2ZmZn0jY2xvc2VNb2RhbEJ0bntmbG9hdDpyaWdodH0jbW9kYWxEaWFsb2dDb250YWluZXIgLm1vZGFsLW1haW4tYnRuc3tkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1lbmQ7anVzdGlmeS1jb250ZW50OmZsZXgtZW5kO21hcmdpbi10b3A6LjNyZW19I21vZGFsRGlhbG9nQ29udGFpbmVyIC5tb2RhbC1tYWluLWJ0bnM+YnV0dG9uOm5vdCg6Zmlyc3QtY2hpbGQpe21hcmdpbi1sZWZ0Oi41cmVtfSNhdXRob3JpemVEaWFsb2d7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtwYWRkaW5nOjFyZW19I2F1dGhvcml6ZURpYWxvZz5pbWd7YWxpZ24tc2VsZjpjZW50ZXJ9I2F1dGhvcml6ZURpYWxvZz5oMntmb250LXNpemU6MS42cmVtO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtd2VpZ2h0Om5vcm1hbDttYXJnaW4tYm90dG9tOjEuNXJlbTttYXJnaW4tdG9wOjFyZW19I2F1dGhvcml6ZURpYWxvZz5kaXY6bGFzdC1jaGlsZHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtZ3JvdzoxO2p1c3RpZnktY29udGVudDplbmR9I2F1dGhvcml6ZURpYWxvZz5kaXY6bGFzdC1jaGlsZD5idXR0b257Zm9udC1zaXplOjEuMnJlbX0jYXV0aG9yaXplRGlhbG9nPmRpdjpsYXN0LWNoaWxkPmJ1dHRvbjpub3QoOmxhc3QtY2hpbGQpe21hcmdpbi1ib3R0b206LjRyZW19I3VwbG9hZEZpbGVGb3Jte2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47bWluLXdpZHRoOjIwMHB4O3BhZGRpbmc6MXJlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I3VwbG9hZEZpbGVGb3JtPmlucHV0e2ZvbnQtZmFtaWx5OmluaGVyaXR9I3VwbG9hZEZpbGVGb3JtPmxhYmVse21hcmdpbi10b3A6MXJlbTt0ZXh0LWFsaWduOmNlbnRlcjtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjlyZW19I3VwbG9hZEZpbGVGb3JtPmJ1dHRvbjpsYXN0LWNoaWxke21hcmdpbi10b3A6LjVyZW19I2xvYWRpbmdGaWxle3BhZGRpbmc6MXJlbTt0ZXh0LWFsaWduOmNlbnRlcn0jc2lkZU5hdkNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO3Bvc2l0aW9uOmFic29sdXRlO2hlaWdodDoxMDB2aDt3aWR0aDozMTRweDt0b3A6MDtyaWdodDowO3otaW5kZXg6OTk5O3RyYW5zZm9ybTp0cmFuc2xhdGVYKDMxNHB4KTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9I3NpZGVOYXZDb250YWluZXIuYWN0aXZle3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApfS5zaWRlLW5hdi1oZWFkZXJ7cGFkZGluZy1yaWdodDoxcmVtO3BhZGRpbmctbGVmdDoxcmVtfSN1c2VyLWluZm97ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmZsZXgtZW5kO21hcmdpbi10b3A6dmFyKC0taGVhZGVyLWhlaWdodCl9I3VzZXItaW5mbz5pbWd7bWFyZ2luLXJpZ2h0Oi42cmVtfSN1c2VyLWluZm8+c3BhbntvdmVyZmxvdy14OmhpZGRlbn0jdXNlci1pbmZvPnNwYW4+c3BhbntkaXNwbGF5OmJsb2NrfSN1c2VyLWluZm8gLmVtYWlse2ZvbnQtd2VpZ2h0OmxpZ2h0ZXJ9LnNpZGUtbmF2LWJvZHl7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC1ncm93OjE7cGFkZGluZzoxcmVtO3RleHQtYWxpZ246Y2VudGVyfS5zaWRlLW5hdi1ib2R5IGJ1dHRvbnt3aWR0aDo4MCV9LnNpZGUtbmF2LWJvZHk+LnNpZGUtbmF2LXNlY3Rpb257d2lkdGg6MTAwJTtwYWRkaW5nLWJvdHRvbToxcmVtfS5zaWRlLW5hdi1ib2R5Pi5zaWRlLW5hdi1zZWN0aW9uLmdyb3d7ZmxleC1ncm93OjF9I3NpZGVOYXZUb2dnbGV7d2lkdGg6MjRweDtoZWlnaHQ6MjRweDttYXJnaW46LjRyZW07Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLXN0eWxlOm5vbmU7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fICsgXCIpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcn0jc2lkZU5hdlRvZ2dsZS5hY3RpdmV7YmFja2dyb3VuZC1pbWFnZTp1cmwoXCIgKyBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8xX19fICsgXCIpfSNzaWRlTmF2Q29udGFpbmVyKy5zaWRlLW5hdi1zaGFkZXtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjEwO2JhY2tncm91bmQtY29sb3I6IzAwMDt3aWR0aDoxMDAlO2hlaWdodDoxMDB2aDt0b3A6MDtvcGFjaXR5OjA7bGVmdDoxMDAlO3RyYW5zaXRpb246b3BhY2l0eSAuMjVzIGVhc2Utb3V0LGxlZnQgMHMgbGluZWFyIC4yNXN9I3NpZGVOYXZDb250YWluZXIuYWN0aXZlKy5zaWRlLW5hdi1zaGFkZXtvcGFjaXR5Oi43O2xlZnQ6MDt0cmFuc2l0aW9uOm9wYWNpdHkgLjI1cyBlYXNlLW91dCxsZWZ0IDBzIGxpbmVhcn0uc2lkZS1uYXYtZm9vdGVye3BhZGRpbmc6MXJlbTtmb250LXdlaWdodDpsaWdodGVyfSNjb21tZW50Rm9ybT4uaW5wdXRze21hcmdpbi1ib3R0b206LjhyZW19I2NvbW1lbnRGb3JtPi5pbnB1dHM+dGV4dGFyZWF7d2lkdGg6MTAwJTttaW4taGVpZ2h0OjE1MHB4fSNjb21tZW50Rm9ybS5ob3Jpem9udGFse2Rpc3BsYXk6ZmxleH0jY29tbWVudEZvcm0uaG9yaXpvbnRhbD4uaW5wdXRze2ZsZXgtZ3JvdzoxfSNjb21tZW50Rm9ybS5ob3Jpem9udGFsPi5pbnB1dHM+dGV4dGFyZWF7bWluLWhlaWdodDo2MHB4fSNjb21tZW50Rm9ybT4uaW5wdXRzPi5tZW1iZXJze21hcmdpbi10b3A6LjVyZW19I2NvbW1lbnRGb3JtPi5pbnB1dHM+Lm1lbWJlcnMuaGlkZGVue2Rpc3BsYXk6bm9uZX0jY29tbWVudEZvcm0+LmlucHV0cz4ubWVtYmVycz5wOmZpcnN0LWNoaWxke2ZvbnQtd2VpZ2h0OmxpZ2h0ZXI7bWFyZ2luLWJvdHRvbTouMnJlbX0jY29tbWVudEZvcm0+LmlucHV0cz4ubWVtYmVycz5zZWxlY3R7d2lkdGg6MTAwJX0jY29tbWVudEZvcm0gLmluZm97bWFyZ2luLXRvcDouMXJlbTtmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6bGlnaHRlcn0jY29tbWVudEZvcm0+LmZvcm1CdXR0b25zTW9kZXM+LmJ1dHRvbnNDb250YWluZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVufSNjb21tZW50Rm9ybS5ob3Jpem9udGFsPi5mb3JtQnV0dG9uc01vZGVze21hcmdpbi1sZWZ0Oi41cmVtfSNjb21tZW50Rm9ybS5ob3Jpem9udGFsPi5mb3JtQnV0dG9uc01vZGVzPi5idXR0b25zQ29udGFpbmVye2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0jY29tbWVudEZvcm0uaG9yaXpvbnRhbD4uZm9ybUJ1dHRvbnNNb2Rlcz4uYnV0dG9uc0NvbnRhaW5lcj5idXR0b257aGVpZ2h0OjUwcHh9I2NvbW1lbnRGb3JtLmhvcml6b250YWw+LmZvcm1CdXR0b25zTW9kZXM+LmJ1dHRvbnNDb250YWluZXI+YnV0dG9uOmZpcnN0LWNoaWxke21hcmdpbi10b3A6LjZyZW07b3JkZXI6MX0jc2hhcmVQcm9qZWN0RGlhbG9ne2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cG9zaXRpb246cmVsYXRpdmU7bWluLWhlaWdodDozNTBweDttaW4td2lkdGg6NDAwcHg7YmFja2dyb3VuZC1jb2xvcjojZmZmfSNzaGFyZVByb2plY3REaWFsb2cgLnRhYmxlLXdyYXBwZXJ7bWFyZ2luLXRvcDouNXJlbTttYXJnaW4tYm90dG9tOjFyZW07YmFja2dyb3VuZC1jb2xvcjojZjFmMWYxfSNzaGFyZVByb2plY3REaWFsb2cgLnRhYmxlLXdyYXBwZXIuZml4ZWQtaGVpZ2h0e2hlaWdodDoxMDBweDtvdmVyZmxvdy15OmF1dG99I3NoYXJlUHJvamVjdERpYWxvZyAudGFibGUtd3JhcHBlcj50YWJsZXt3aWR0aDoxMDAlO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTtiYWNrZ3JvdW5kLWNvbG9yOiNlZWV9I3NoYXJlUHJvamVjdERpYWxvZyAudGFibGUtd3JhcHBlcj4uZW1wdHktbXNne2Rpc3BsYXk6bm9uZTtoZWlnaHQ6MTAwJTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwYWRkaW5nOjFyZW19I3NoYXJlUHJvamVjdERpYWxvZz4udXNlcnMtY29udGFpbmVyLmVtcHR5IC5lbXB0eS1tc2d7ZGlzcGxheTpmbGV4fSNzaGFyZVByb2plY3REaWFsb2c+LnVzZXJzLWNvbnRhaW5lci5lbXB0eSB0YWJsZXtkaXNwbGF5Om5vbmV9I3NoYXJlUHJvamVjdERpYWxvZz4udXNlcnMtY29udGFpbmVyLmhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbn0jc2hhcmVQcm9qZWN0RGlhbG9nIHRkOmxhc3QtY2hpbGR7d2lkdGg6NDBweDt0ZXh0LWFsaWduOmNlbnRlcn0jc2hhcmVQcm9qZWN0RGlhbG9nIHRkOmxhc3QtY2hpbGQ+c3Zne3dpZHRoOjEycHg7aGVpZ2h0OjEycHh9I3NoYXJlUHJvamVjdERpYWxvZyB0ZC5hY3Rpb24tYnRue2N1cnNvcjpwb2ludGVyfSNzaGFyZVByb2plY3REaWFsb2cgdGQuYWN0aW9uLWJ0bjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNkYmRiZGJ9I3NoYXJlUHJvamVjdERpYWxvZyB0cntib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZmZmfSNzaGFyZVByb2plY3REaWFsb2cgdHIudG8tZGVsZXRlPnRkOmZpcnN0LWNoaWxke29wYWNpdHk6LjR9I3NoYXJlUHJvamVjdERpYWxvZyB0ZC51c2VyLWRhdGE+aW1ne2Zsb2F0OmxlZnQ7aGVpZ2h0OjY0cHg7d2lkdGg6NjRweDttYXJnaW4tcmlnaHQ6LjVyZW19I3NoYXJlUHJvamVjdERpYWxvZyB0ZC51c2VyLWRhdGE+ZGl2e2Rpc3BsYXk6ZmxleDtoZWlnaHQ6NjRweDtwYWRkaW5nOi40cmVtO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYXJvdW5kfSNzaGFyZVByb2plY3REaWFsb2cgdGQudXNlci1kYXRhPmRpdj5zcGFuOm50aC1jaGlsZCgyKXtmb250LXdlaWdodDpsaWdodGVyfSNzaGFyZVByb2plY3REaWFsb2c+LnBlbmRpbmctdXNlcnMgdGQudXNlci1kYXRhe3BhZGRpbmc6LjRyZW19I3NoYXJlUHJvamVjdERpYWxvZz5mb3JtPmxhYmVse2Rpc3BsYXk6YmxvY2t9I3NoYXJlUHJvamVjdERpYWxvZz5mb3JtPmRpdntkaXNwbGF5OmZsZXh9I3NoYXJlUHJvamVjdERpYWxvZz5mb3JtIGlucHV0e2ZsZXgtZ3JvdzoxfSNzaGFyZVByb2plY3REaWFsb2c+Zm9ybSBidXR0b257d2lkdGg6NjBweH0jc2hhcmVQcm9qZWN0RGlhbG9nPi5sb2FkZXItY29udGFpbmVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3RvcDowO2xlZnQ6MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjcpfSNzaGFyZVByb2plY3REaWFsb2c+LmxvYWRlci1jb250YWluZXIuaGlkZGVue2Rpc3BsYXk6bm9uZX0jc2hhcmVQcm9qZWN0RGlhbG9nIC5zaGFyZS1ub3RpZmljYXRpb257cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjB9I3NoYXJlUHJvamVjdERpYWxvZyAuc2hhcmUtbm90aWZpY2F0aW9uLmhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbn1kaXYjcHJvcHNUYWJsZXNDb250YWluZXJ7ZGlzcGxheTpmbGV4fS5tYWluUGFuZWwucmlnaHQgZGl2I3Byb3BzVGFibGVzQ29udGFpbmVye2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uZGF0YS10YWJsZXt0ZXh0LWFsaWduOmxlZnQ7d2lkdGg6MTAwJX0uZGF0YS10YWJsZT50aGVhZCB0aHtwYWRkaW5nLWxlZnQ6LjNyZW07cGFkZGluZy1yaWdodDouM3JlbTtiYWNrZ3JvdW5kLWNvbG9yOiNkZGR9LmRhdGEtdGFibGU+dGJvZHkgdGh7d2lkdGg6NTAlO2ZvbnQtd2VpZ2h0Om5vcm1hbH0uZGF0YS10YWJsZSB0ZHtmb250LXdlaWdodDpsaWdodGVyfSNtZXNzYWdlQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO3BhZGRpbmc6MXJlbTttYXgtd2lkdGg6MzAwcHg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmZsZXgtZW5kO2JvdHRvbToycmVtO3JpZ2h0OjJyZW07Ym94LXNoYWRvdzoycHggMnB4IDZweCAjYjJiMmIyfSNtZXNzYWdlQ29udGFpbmVyPmJ1dHRvbnttYXJnaW4tYm90dG9tOi41cmVtfSNtZXNzYWdlQ29udGFpbmVyPmJ1dHRvbj5pbWd7d2lkdGg6MXJlbX0jbWVzc2FnZUNvbnRhaW5lci5zdWNjZXNze2JhY2tncm91bmQtY29sb3I6I2FlZjVhZH0jbWVzc2FnZUNvbnRhaW5lci5lcnJvcntiYWNrZ3JvdW5kLWNvbG9yOiNkYzkzOTN9I21lc3NhZ2VDb250YWluZXIud2FybmluZ3tiYWNrZ3JvdW5kLWNvbG9yOiNlY2RhYTR9I3ZpZXdwb3J0TWVzc2FnZXtkaXNwbGF5Om5vbmU7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0b3A6MDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDpsaWdodGVyO2JhY2tncm91bmQtY29sb3I6cmdiYSgyNTUsMjU1LDI1NSwuOTUpfSN2aWV3cG9ydE1lc3NhZ2UuYWN0aXZle2Rpc3BsYXk6ZmxleH0jdmlld3BvcnRNZXNzYWdlIHB7cGFkZGluZy1ib3R0b206MXJlbX0jdmlld3BvcnRNZXNzYWdlIC5idG5zLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWFyb3VuZH0jbm90aWZpY2F0aW9uc0NvbnRhaW5lcntkaXNwbGF5Om5vbmU7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6NDUwcHg7dG9wOmNhbGModmFyKC0taGVhZGVyLWhlaWdodCkgKyAxcmVtKTtyaWdodDoxcmVtO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzIGVhc2UtaW47YmFja2dyb3VuZC1jb2xvcjojZjZmNmY2O2JveC1zaGFkb3c6MCAwIDEycHggcmdiYSgwLDAsMCwuMil9I25vdGlmaWNhdGlvbnNDb250YWluZXI+LmVtcHR5LW1zZ3tkaXNwbGF5Om5vbmU7cGFkZGluZzoycmVtIC44cmVtO3RleHQtYWxpZ246Y2VudGVyfSNub3RpZmljYXRpb25zQ29udGFpbmVyLm9wZW57ZGlzcGxheTp1bnNldDtvcGFjaXR5OjF9I25vdGlmaWNhdGlvbnNDb250YWluZXIuZW1wdHk+Lm5vdGlmaWNhdGlvbnMtYm9keXtkaXNwbGF5Om5vbmV9I25vdGlmaWNhdGlvbnNDb250YWluZXIuZW1wdHk+LmVtcHR5LW1zZ3tkaXNwbGF5OmJsb2NrfS5ub3RpZmljYXRpb25zLWhlYWRlcntwYWRkaW5nOi44cmVtO2JhY2tncm91bmQtY29sb3I6I2ZiZmJmYjtib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZGJkYmRifS5ub3RpZmljYXRpb25zLWJvZHl7bWF4LWhlaWdodDozNTBweDtvdmVyZmxvdzphdXRvfS5ub3RpZmljYXRpb25zLWJvZHk+bGl7ZGlzcGxheTpmbGV4O3BhZGRpbmc6LjhyZW07Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2RiZGJkYn0ubm90aWZpY2F0aW9ucy1ib2R5PmxpLnBlbmRpbmd7YmFja2dyb3VuZC1jb2xvcjojY2JlYWY1fS5ub3RpZmljYXRpb25zLWJvZHk+bGkucGVuZGluZzpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNjMmUwZWF9Lm5vdGlmaWNhdGlvbnMtYm9keT5saTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlYWVhZWF9Lm5vdGlmaWNhdGlvbi10aHVtYntoZWlnaHQ6NTBweDttYXJnaW4tcmlnaHQ6MXJlbX0ubm90aWZpY2F0aW9uLWNvbnRlbnQ+aDR7bWFyZ2luLWJvdHRvbTouMnJlbTtmb250LXdlaWdodDo1MDB9Lm5vdGlmaWNhdGlvbi1jb250ZW50PnB7Zm9udC13ZWlnaHQ6bGlnaHRlcn0jY29udGV4dE1lbnV7d2lkdGg6MTIwcHg7cG9zaXRpb246YWJzb2x1dGU7cGFkZGluZy10b3A6LjVyZW07YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaGFkb3c6MnB4IDJweCA3cHggcmdiYSgwLDAsMCwuMil9I2NvbnRleHRNZW51PnVsPmxpe3BhZGRpbmc6LjZyZW07Y3Vyc29yOnBvaW50ZXJ9I2NvbnRleHRNZW51PnVsPmxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuMil9LnNlbGVjdGVkey0tZmlsbDogI2ZmYmQwMDstLXN0cm9rZTogI2U4OTgwNzstLXN0cm9rZS13OiA4cHh9LnNlbGVjdGVkLmZpbGwuc3Ryb2tlPnBhdGgsLnNlbGVjdGVkLmZpbGwuc3Ryb2tlPnBvbHlnb24sLnNlbGVjdGVkLmZpbGwuc3Ryb2tlPmNpcmNsZSwuc2VsZWN0ZWQuZmlsbC5zdHJva2U+cmVjdHtmaWxsOnZhcigtLWZpbGwpO3N0cm9rZTp2YXIoLS1zdHJva2UpO3N0cm9rZS13aWR0aDp2YXIoLS1zdHJva2Utdyl9LnNlbGVjdGVkLnN0cm9rZT5wYXRoLC5zZWxlY3RlZC5zdHJva2U+cG9seWxpbmUsLnNlbGVjdGVkLnN0cm9rZT5saW5le3N0cm9rZTp2YXIoLS1zdHJva2UpO3N0cm9rZS13aWR0aDp2YXIoLS1zdHJva2Utdyl9LnNlbGVjdGVkLmZpbGw+cGF0aCwuc2VsZWN0ZWQuZmlsbD5wb2x5Z29uLC5zZWxlY3RlZC5maWxsPmNpcmNsZXtmaWxsOnZhcigtLWZpbGwpfS5zZWxlY3RlZC5zdHJva2U+LmhhdGNoPmxpbmV7c3Ryb2tlOnZhcigtLXN0cm9rZSk7c3Ryb2tlLXdpZHRoOnZhcigtLXN0cm9rZS13KX06cm9vdHstLWhlYWRlci1oZWlnaHQ6IDIuNXJlbTstLXRoZW1lLWJsdWU6ICMyYThmYjE7LS10aGVtZS15ZWxsb3c6ICNlYThjMTV9KiwqOjpiZWZvcmUsKjo6YWZ0ZXJ7Ym94LXNpemluZzpib3JkZXItYm94fWgxLGgyLGgzLGg0LGg1LHB7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MH11bCxvbHtsaXN0LXN0eWxlLXR5cGU6bm9uZTttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowO3BhZGRpbmctbGVmdDowfWJ1dHRvbntib3JkZXItc3R5bGU6bm9uZTtwYWRkaW5nOjA7YmFja2dyb3VuZC1jb2xvcjp1bnNldH1ib2R5e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47bWFyZ2luOjA7b3ZlcmZsb3c6aGlkZGVuO2NvbG9yOiM1NDU0NTQ7Zm9udC1mYW1pbHk6XFxcIk9zd2FsZFxcXCIsc2Fucy1zZXJpZn1zdmcuc3ZnLWxvYWRlcnt3aWR0aDoxMzBweDtoZWlnaHQ6OTBweH0uYnV0dG9uQmFzZXtwYWRkaW5nOi40cmVtO2N1cnNvcjpwb2ludGVyO2JvcmRlci13aWR0aDoxcHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2ZvbnQtZmFtaWx5OmluaGVyaXR9LmJ1dHRvbkJhc2Uuc2lkZXN7Ym9yZGVyLXRvcC1zdHlsZTpub25lO2JvcmRlci1ib3R0b20tc3R5bGU6bm9uZX0uYnV0dG9uQmFzZS5saWdodHtjb2xvcjojMzczNzM3O2JvcmRlci1jb2xvcjojY2ZjZmNmfS5idXR0b25CYXNlLmxpZ2h0Om5vdCguZGlzYWJsZWQpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2VjZWNlY30uYnV0dG9uQmFzZS5lbXBoYXNpemV7Ym9yZGVyLWNvbG9yOiNlMGUwZTA7YmFja2dyb3VuZC1jb2xvcjojZDFmMGVjfS5idXR0b25CYXNlLmVtcGhhc2l6ZTpub3QoLmRpc2FibGVkKTpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNhY2QzY2V9LmJ1dHRvbkJhc2UuZGFuZ2Vye2NvbG9yOiNmNTUyNTI7Ym9yZGVyLWNvbG9yOiNmYmE0YTR9LmJ1dHRvbkJhc2UuZGFuZ2VyOm5vdCguZGlzYWJsZWQpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2ZmZTllOX0uYnV0dG9uQmFzZS5kaXNhYmxlZHtjdXJzb3I6dW5zZXQ7b3BhY2l0eTouNX1idXR0b24uZGlzYWJsZWQ6Zm9jdXN7b3V0bGluZS1zdHlsZTpub25lfS5idXR0b25CYXNlLmxvY2tlZHtjdXJzb3I6dW5zZXR9LmJ1dHRvbkJhc2UubG9ja2VkOmhvdmVye2JhY2tncm91bmQtY29sb3I6dW5zZXR9Lmljb24tYnRue2N1cnNvcjpwb2ludGVyfWhlYWRlciAuaWNvbi1idG57cGFkZGluZzpjYWxjKCgodmFyKC0taGVhZGVyLWhlaWdodCkgLSAycHgpIC0gMjRweCkgLyAyKTtoZWlnaHQ6Y2FsYyh2YXIoLS1oZWFkZXItaGVpZ2h0KSAtIDJweCk7d2lkdGg6Y2FsYyh2YXIoLS1oZWFkZXItaGVpZ2h0KSAtIDJweCl9Lmljb24tYnRuOm5vdCguZGlzYWJsZWQpOm5vdCguYnRuLXRvb2wtZW5hYmxlZCk6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWNlY2VjfS5pY29uLWJ0bj5zdmd7ZGlzcGxheTpibG9jazt3aWR0aDoyNHB4O2hlaWdodDoyNHB4fS5pY29uLWJ0bi5kaXNhYmxlZHtvcGFjaXR5Oi4xO2N1cnNvcjphdXRvfS5pY29uLWJ0bi5oaWRkZW57ZGlzcGxheTpub25lfS5idG4tdG9vbC1lbmFibGVke2JhY2tncm91bmQtY29sb3I6Izk2Y2JkYn0uYnRuLWJnLWltZ3tiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbi15OmNlbnRlcjtiYWNrZ3JvdW5kLXBvc2l0aW9uLXg6LjhyZW19Lmdvb2dsZS1sb2dve2JhY2tncm91bmQtaW1hZ2U6dXJsKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1UZ2lJR2hsYVdkb2REMGlNVGdpSUhacFpYZENiM2c5SWpBZ01DQXhPQ0F4T0NJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0OGRHbDBiR1UrYzNWd1pYSWdaend2ZEdsMGJHVStQR2NnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWo0OGNHRjBhQ0JrUFNKTk9TQXpMalE0WXpFdU5qa2dNQ0F5TGpnekxqY3pJRE11TkRnZ01TNHpOR3d5TGpVMExUSXVORGhETVRNdU5EWXVPRGtnTVRFdU5ETWdNQ0E1SURBZ05TNDBPQ0F3SURJdU5EUWdNaTR3TWk0NU5pQTBMamsyYkRJdU9URWdNaTR5TmtNMExqWWdOUzR3TlNBMkxqWXlJRE11TkRnZ09TQXpMalE0ZWlJZ1ptbHNiRDBpSTBWQk5ETXpOU0l2UGp4d1lYUm9JR1E5SWsweE55NDJOQ0E1TGpKak1DMHVOelF0TGpBMkxURXVNamd0TGpFNUxURXVPRFJJT1hZekxqTTBhRFF1T1RaakxTNHhMamd6TFM0Mk5DQXlMakE0TFRFdU9EUWdNaTQ1TW13eUxqZzBJREl1TW1NeExqY3RNUzQxTnlBeUxqWTRMVE11T0RnZ01pNDJPQzAyTGpZeWVpSWdabWxzYkQwaUl6UXlPRFZHTkNJdlBqeHdZWFJvSUdROUlrMHpMamc0SURFd0xqYzRRVFV1TlRRZ05TNDFOQ0F3SURBZ01TQXpMalU0SURsak1DMHVOakl1TVRFdE1TNHlNaTR5T1MweExqYzRUQzQ1TmlBMExqazJRVGt1TURBNElEa3VNREE0SURBZ01DQXdJREFnT1dNd0lERXVORFV1TXpVZ01pNDRNaTQ1TmlBMExqQTBiREl1T1RJdE1pNHlObm9pSUdacGJHdzlJaU5HUWtKRE1EVWlMejQ4Y0dGMGFDQmtQU0pOT1NBeE9HTXlMalF6SURBZ05DNDBOeTB1T0NBMUxqazJMVEl1TVRoc0xUSXVPRFF0TWk0eVl5MHVOell1TlRNdE1TNDNPQzQ1TFRNdU1USXVPUzB5TGpNNElEQXROQzQwTFRFdU5UY3ROUzR4TWkwekxqYzBUQzQ1TnlBeE15NHdORU15TGpRMUlERTFMams0SURVdU5EZ2dNVGdnT1NBeE9Ib2lJR1pwYkd3OUlpTXpORUU0TlRNaUx6NDhjR0YwYUNCbWFXeHNQU0p1YjI1bElpQmtQU0pOTUNBd2FERTRkakU0U0RCNklpOCtQQzluUGp3dmMzWm5QZz09KX0jc2F2ZUJ0bi5lbmFibGVkPnN2Zywjbm90aWZpY2F0aW9uQnRuLmVuYWJsZWQ+c3Zne2ZpbGw6dmFyKC0tdGhlbWUteWVsbG93KTt0cmFuc2Zvcm06c2NhbGUoMS4yKX0jc2F2ZUJ0bj5zdmcucHJvZ3Jlc3MtaWNvbntkaXNwbGF5Om5vbmV9I3NhdmVCdG4ucHJvZ3Jlc3M6aG92ZXJ7Y3Vyc29yOmF1dG87YmFja2dyb3VuZC1jb2xvcjp1bnNldH0jc2F2ZUJ0bi5wcm9ncmVzcz5zdmcuc2F2ZS1pY29ue2Rpc3BsYXk6bm9uZX0jc2F2ZUJ0bi5wcm9ncmVzcz5zdmcucHJvZ3Jlc3MtaWNvbntkaXNwbGF5OmJsb2NrfWhlYWRlcntoZWlnaHQ6dmFyKC0taGVhZGVyLWhlaWdodCk7cGFkZGluZy1yaWdodDo4cmVtO2FsaWduLWl0ZW1zOnN0cmV0Y2g7ei1pbmRleDoxO2JhY2tncm91bmQtY29sb3I6I2Y2ZjZmNjtib3JkZXItYm90dG9tOjJweCBzb2xpZCB2YXIoLS10aGVtZS1ibHVlKX1oZWFkZXI+c3BhbjpmaXJzdC1jaGlsZHt3aWR0aDo0cmVtfWhlYWRlcj5zcGFuOmZpcnN0LWNoaWxkPmltZ3toZWlnaHQ6MTAwJTtwYWRkaW5nOi4zcmVtO21hcmdpbjphdXRvO2Rpc3BsYXk6YmxvY2t9aGVhZGVyPmgxe3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjEwMCV9I3Byb2plY3RzTGlzdEJ0bnttaW4td2lkdGg6MTByZW07Zm9udC1zaXplOjFyZW07Zm9udC13ZWlnaHQ6bm9ybWFsfSNwcm9qZWN0c0xpc3RCdG4+c3BhbntkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoxMDAlO3RleHQtYWxpZ246Y2VudGVyfUBtZWRpYShtYXgtd2lkdGg6IDUwMHB4KXsjcHJvamVjdHNMaXN0QnRue2Rpc3BsYXk6dW5zZXQ7bWluLXdpZHRoOnVuc2V0O3dpZHRoOjIuNXJlbTtmb250LXNpemU6MDtib3JkZXItbGVmdC1zdHlsZTpub25lO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtiYWNrZ3JvdW5kLWltYWdlOnVybChcIiArIF9fX0NTU19MT0FERVJfVVJMX1JFUExBQ0VNRU5UXzJfX18gKyBcIik7YmFja2dyb3VuZC1zaXplOjI0cHh9fSN0b29sYmFyc0NvbnRhaW5lcntmbGV4LWdyb3c6MTtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmR9I2RyYXdpbmdzQnRuc3ttaW4td2lkdGg6OHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0jZHJhd2luZ3NCdG5zPmJ1dHRvbntoZWlnaHQ6Y2FsYyh2YXIoLS1oZWFkZXItaGVpZ2h0KSAtIDJweCk7d2lkdGg6MTAwJTtib3JkZXItbGVmdC1zdHlsZTpub25lfSNkcmF3aW5nc0J0bnM+dWx7Zm9udC1zaXplOi45cmVtO2ZvbnQtd2VpZ2h0OmxpZ2h0ZXI7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjojZjZmNmY2O2JveC1zaGFkb3c6MHB4IDJweCA1cHggI2I2YjZiNn0jZHJhd2luZ3NCdG5zPnVsPmxpe3BhZGRpbmc6LjRyZW19I2RyYXdpbmdzQnRucz51bD5saS5hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjojYzJjMmMyO2N1cnNvcjphdXRvfSNkcmF3aW5nc0J0bnM+dWw+bGk6bm90KC5hY3RpdmUpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2RmZGZkZn0uZ2xvYmFsLW5hdi1idG5ze2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowO3otaW5kZXg6MTAwMDtib3JkZXItbGVmdDoxcHggc29saWQgI2M4YzhjOH1AbWVkaWEobWF4LXdpZHRoOiA1MDBweCl7aGVhZGVye29yZGVyOjE7Ym9yZGVyLXRvcDoycHggc29saWQgdmFyKC0tdGhlbWUtYmx1ZSk7Ym9yZGVyLWJvdHRvbTp1bnNldH1oZWFkZXI+c3BhbjpmaXJzdC1jaGlsZHtkaXNwbGF5Om5vbmV9I3Rvb2xiYXJzQ29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjB9I2RyYXdpbmdzQnRucz51bHtib3gtc2hhZG93OjBweCAtMnB4IDdweCAjYjZiNmI2fX0uZHJvcGRvd24tY29udGFpbmVye3otaW5kZXg6MTtwb3NpdGlvbjpyZWxhdGl2ZX0uZHJvcGRvd24tY29udGFpbmVyPi5kcm9wZG93bi1jb250ZW50e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47dHJhbnNpdGlvbjouNnM7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwMCUpO29wYWNpdHk6MDt6LWluZGV4Oi0xO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjA7bGVmdDowO3RvcDpjYWxjKHZhcigtLWhlYWRlci1oZWlnaHQpIC0gMnB4KX0uZHJvcGRvd24tY29udGFpbmVyLnJlc3BvbnNpdmU+LmRyb3Bkb3duLWNvbnRlbnR7ZGlzcGxheTppbmxpbmU7b3BhY2l0eTp1bnNldDt6LWluZGV4OnVuc2V0O3Bvc2l0aW9uOnVuc2V0fUBtZWRpYShtYXgtd2lkdGg6IDgwMHB4KXsuZHJvcGRvd24tY29udGFpbmVyLnJlc3BvbnNpdmU+LmRyb3Bkb3duLWNvbnRlbnR7ZGlzcGxheTpmbGV4O29wYWNpdHk6MDt6LWluZGV4Oi0xO3Bvc2l0aW9uOmFic29sdXRlfX0uZHJvcGRvd24tY29udGFpbmVyLm9wZW4+LmRyb3Bkb3duLWNvbnRlbnR7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCUpO29wYWNpdHk6MX1AbWVkaWEobWF4LXdpZHRoOiA1MDBweCl7LmRyb3Bkb3duLWNvbnRhaW5lcj4uZHJvcGRvd24tY29udGVudHt0cmFuc2Zvcm06dW5zZXR9LmRyb3Bkb3duLWNvbnRhaW5lci5vcGVuPi5kcm9wZG93bi1jb250ZW50e3RyYW5zZm9ybTp0cmFuc2xhdGVZKGNhbGMoLTEwMCUgLSAyLjVyZW0gKyAycHgpKX19bWFpbntwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6Y2FsYygxMDB2aCAtIHZhcigtLWhlYWRlci1oZWlnaHQpKX0jd29ya3NwYWNlc3toZWlnaHQ6MTAwJX0ud29ya3NwYWNle2hlaWdodDoxMDAlfWZvcm0gLnRvcC1sYWJlbHttYXJnaW4tYm90dG9tOi41cmVtfWZvcm0gLmJhc2UtaW5wdXR7cGFkZGluZzouNHJlbX1mb3JtIC5lcnJvci1tc2d7Zm9udC1zaXplOi45cmVtO2ZvbnQtd2VpZ2h0OmxpZ2h0ZXI7Y29sb3I6cmVkfWZvcm0gLmVycm9yLW1zZy5oaWRkZW57dmlzaWJpbGl0eTpoaWRkZW59I3JlbmFtZVByb2plY3RGb3JtIC5yZW5hbWUtZm9ybS1jb250ZW50e2Rpc3BsYXk6ZmxleDt3aWR0aDoxMDAlO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uZHJhd2luZ3NDb250YWluZXJ7aGVpZ2h0OjEwMCV9LmRyYXdpbmdzQ29udGFpbmVyPmRpdntoZWlnaHQ6MTAwJX0uZHJhd2luZ3NDb250YWluZXI+ZGl2PnN2Z3toZWlnaHQ6MTAwJTt3aWR0aDoxMDAlfUBtZWRpYSBhbGwgYW5kIChkaXNwbGF5LW1vZGU6IHN0YW5kYWxvbmUpe2hlYWRlcntib3JkZXItdG9wOjFweCBzb2xpZCAjZGVkZWRlfX1cIiwgXCJcIl0pO1xuLy8gRXhwb3J0c1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gIE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gIEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVzZVNvdXJjZU1hcCkge1xuICB2YXIgbGlzdCA9IFtdOyAvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKCcnKTtcbiAgfTsgLy8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcblxuXG4gIGxpc3QuaSA9IGZ1bmN0aW9uIChtb2R1bGVzLCBtZWRpYVF1ZXJ5LCBkZWR1cGUpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsICcnXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaV0pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJzsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1kZXN0cnVjdHVyaW5nXG5cbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXG4gIGlmICghY3NzTWFwcGluZykge1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG5cbiAgaWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuICAgIHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gXCIvKiMgc291cmNlVVJMPVwiLmNvbmNhdChjc3NNYXBwaW5nLnNvdXJjZVJvb3QgfHwgJycpLmNvbmNhdChzb3VyY2UsIFwiICovXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn0gLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuXG5cbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gIHJldHVybiBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBvcHRpb25zID0ge307XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlLCBuby1wYXJhbS1yZWFzc2lnblxuXG5cbiAgdXJsID0gdXJsICYmIHVybC5fX2VzTW9kdWxlID8gdXJsLmRlZmF1bHQgOiB1cmw7XG5cbiAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfSAvLyBJZiB1cmwgaXMgYWxyZWFkeSB3cmFwcGVkIGluIHF1b3RlcywgcmVtb3ZlIHRoZW1cblxuXG4gIGlmICgvXlsnXCJdLipbJ1wiXSQvLnRlc3QodXJsKSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHVybCA9IHVybC5zbGljZSgxLCAtMSk7XG4gIH1cblxuICBpZiAob3B0aW9ucy5oYXNoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgdXJsICs9IG9wdGlvbnMuaGFzaDtcbiAgfSAvLyBTaG91bGQgdXJsIGJlIHdyYXBwZWQ/XG4gIC8vIFNlZSBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3NzLXZhbHVlcy0zLyN1cmxzXG5cblxuICBpZiAoL1tcIicoKSBcXHRcXG5dLy50ZXN0KHVybCkgfHwgb3B0aW9ucy5uZWVkUXVvdGVzKSB7XG4gICAgcmV0dXJuIFwiXFxcIlwiLmNvbmNhdCh1cmwucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKSwgXCJcXFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07IiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcIjZhNTE2ZmY1ZmFjMjgxMzlhNWYwNWM1OTI5NzRhZDdhLnN2Z1wiOyIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJlMjY4NGQyMTdhODgyYWUwMmM4NjFiN2ZjNTMxNGU3Mi5zdmdcIjsiLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiNjk5NDg1YWQ0MjRmNjhmZjkwNjhhMTExZGVhYmEwNDcuc3ZnXCI7IiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQgKGV4KSB7IHJldHVybiAoZXggJiYgKHR5cGVvZiBleCA9PT0gJ29iamVjdCcpICYmICdkZWZhdWx0JyBpbiBleCkgPyBleFsnZGVmYXVsdCddIDogZXg7IH1cblxudmFyIGZpcmViYXNlID0gX2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ0BmaXJlYmFzZS9hcHAnKSk7XG52YXIgdHNsaWIgPSByZXF1aXJlKCd0c2xpYicpO1xudmFyIGxvZ2dlciA9IHJlcXVpcmUoJ0BmaXJlYmFzZS9sb2dnZXInKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQGZpcmViYXNlL3V0aWwnKTtcbnZhciBjb21wb25lbnQgPSByZXF1aXJlKCdAZmlyZWJhc2UvY29tcG9uZW50Jyk7XG52YXIgd2ViY2hhbm5lbFdyYXBwZXIgPSByZXF1aXJlKCdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogVGhlIHNlbXZlciAod3d3LnNlbXZlci5vcmcpIHZlcnNpb24gb2YgdGhlIFNESy4gKi9cclxudmFyIFNES19WRVJTSU9OID0gZmlyZWJhc2UuU0RLX1ZFUlNJT047XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgbG9nQ2xpZW50ID0gbmV3IGxvZ2dlci5Mb2dnZXIoJ0BmaXJlYmFzZS9maXJlc3RvcmUnKTtcclxudmFyIExvZ0xldmVsO1xyXG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkRFQlVHXCJdID0gMF0gPSBcIkRFQlVHXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gMV0gPSBcIkVSUk9SXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDJdID0gXCJTSUxFTlRcIjtcclxufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcclxuLy8gSGVscGVyIG1ldGhvZHMgYXJlIG5lZWRlZCBiZWNhdXNlIHZhcmlhYmxlcyBjYW4ndCBiZSBleHBvcnRlZCBhcyByZWFkL3dyaXRlXHJcbmZ1bmN0aW9uIGdldExvZ0xldmVsKCkge1xyXG4gICAgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA9PT0gbG9nZ2VyLkxvZ0xldmVsLkRFQlVHKSB7XHJcbiAgICAgICAgcmV0dXJuIExvZ0xldmVsLkRFQlVHO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobG9nQ2xpZW50LmxvZ0xldmVsID09PSBsb2dnZXIuTG9nTGV2ZWwuU0lMRU5UKSB7XHJcbiAgICAgICAgcmV0dXJuIExvZ0xldmVsLlNJTEVOVDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBMb2dMZXZlbC5FUlJPUjtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChuZXdMZXZlbCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXAgdGhlIG5ldyBsb2cgbGV2ZWwgdG8gdGhlIGFzc29jaWF0ZWQgRmlyZWJhc2UgTG9nIExldmVsXHJcbiAgICAgKi9cclxuICAgIHN3aXRjaCAobmV3TGV2ZWwpIHtcclxuICAgICAgICBjYXNlIExvZ0xldmVsLkRFQlVHOlxyXG4gICAgICAgICAgICBsb2dDbGllbnQubG9nTGV2ZWwgPSBsb2dnZXIuTG9nTGV2ZWwuREVCVUc7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XHJcbiAgICAgICAgICAgIGxvZ0NsaWVudC5sb2dMZXZlbCA9IGxvZ2dlci5Mb2dMZXZlbC5FUlJPUjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMb2dMZXZlbC5TSUxFTlQ6XHJcbiAgICAgICAgICAgIGxvZ0NsaWVudC5sb2dMZXZlbCA9IGxvZ2dlci5Mb2dMZXZlbC5TSUxFTlQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGxvZ0NsaWVudC5lcnJvcihcIkZpcmVzdG9yZSAoXCIgKyBTREtfVkVSU0lPTiArIFwiKTogSW52YWxpZCB2YWx1ZSBwYXNzZWQgdG8gYHNldExvZ0xldmVsYFwiKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBkZWJ1Zyh0YWcsIG1zZykge1xyXG4gICAgdmFyIG9iaiA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBvYmpbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsIDw9IGxvZ2dlci5Mb2dMZXZlbC5ERUJVRykge1xyXG4gICAgICAgIHZhciBhcmdzID0gb2JqLm1hcChhcmdUb1N0cmluZyk7XHJcbiAgICAgICAgbG9nQ2xpZW50LmRlYnVnLmFwcGx5KGxvZ0NsaWVudCwgdHNsaWIuX19zcHJlYWRBcnJheXMoW1wiRmlyZXN0b3JlIChcIiArIFNES19WRVJTSU9OICsgXCIpIFtcIiArIHRhZyArIFwiXTogXCIgKyBtc2ddLCBhcmdzKSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXJyb3IobXNnKSB7XHJcbiAgICB2YXIgb2JqID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIG9ialtfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIGlmIChsb2dDbGllbnQubG9nTGV2ZWwgPD0gbG9nZ2VyLkxvZ0xldmVsLkVSUk9SKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBvYmoubWFwKGFyZ1RvU3RyaW5nKTtcclxuICAgICAgICBsb2dDbGllbnQuZXJyb3IuYXBwbHkobG9nQ2xpZW50LCB0c2xpYi5fX3NwcmVhZEFycmF5cyhbXCJGaXJlc3RvcmUgKFwiICsgU0RLX1ZFUlNJT04gKyBcIik6IFwiICsgbXNnXSwgYXJncykpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBhbiBhZGRpdGlvbmFsIGxvZyBwYXJhbWV0ZXIgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBhcmdUb1N0cmluZyhvYmopIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB2YXIgcGxhdGZvcm0gPSBQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGxhdGZvcm0uZm9ybWF0SlNPTihvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0aW5nIHRvIEpTT04gZmFpbGVkLCBqdXN0IGxvZyB0aGUgb2JqZWN0IGRpcmVjdGx5XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVW5jb25kaXRpb25hbGx5IGZhaWxzLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLlxyXG4gKlxyXG4gKiBSZXR1cm5zIGFueSBzbyBpdCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcclxuICogQGV4YW1wbGVcclxuICogbGV0IGZ1dHVyZVZhciA9IGZhaWwoJ25vdCBpbXBsZW1lbnRlZCB5ZXQnKTtcclxuICovXHJcbmZ1bmN0aW9uIGZhaWwoZmFpbHVyZSkge1xyXG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxyXG4gICAgLy8gZXhjZXB0aW9uIGlzIHN3YWxsb3dlZC5cclxuICAgIHZhciBtZXNzYWdlID0gXCJGSVJFU1RPUkUgKFwiICsgU0RLX1ZFUlNJT04gKyBcIikgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogXCIgKyBmYWlsdXJlO1xyXG4gICAgZXJyb3IobWVzc2FnZSk7XHJcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZXN0b3JlRXJyb3IgaGVyZSBiZWNhdXNlIHRoZXNlIGFyZSBpbnRlcm5hbCBmYWlsdXJlc1xyXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcclxuICAgIC8vIGRlcGVuZGVuY3kgYmV0d2VlbiB0aGUgZXJyb3IgYW5kIGFzc2VydCBtb2R1bGVzIHdoaWNoIGRvZXNuJ3Qgd29yay4pXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbn1cclxuLyoqXHJcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxyXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cclxuICovXHJcbmZ1bmN0aW9uIGFzc2VydChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgZmFpbChtZXNzYWdlKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVzIHNpbmdsZXRvbiBoZWxwZXJzIHdoZXJlIHNldHVwIGNvZGUgY2FuIGluamVjdCBhIHBsYXRmb3JtIGF0IHJ1bnRpbWUuXHJcbiAqIHNldFBsYXRmb3JtIG5lZWRzIHRvIGJlIHNldCBiZWZvcmUgRmlyZXN0b3JlIGlzIHVzZWQgYW5kIG11c3QgYmUgc2V0IGV4YWN0bHlcclxuICogb25jZS5cclxuICovXHJcbnZhciBQbGF0Zm9ybVN1cHBvcnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQbGF0Zm9ybVN1cHBvcnQoKSB7XHJcbiAgICB9XHJcbiAgICBQbGF0Zm9ybVN1cHBvcnQuc2V0UGxhdGZvcm0gPSBmdW5jdGlvbiAocGxhdGZvcm0pIHtcclxuICAgICAgICBpZiAoUGxhdGZvcm1TdXBwb3J0LnBsYXRmb3JtKSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ1BsYXRmb3JtIGFscmVhZHkgZGVmaW5lZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBQbGF0Zm9ybVN1cHBvcnQucGxhdGZvcm0gPSBwbGF0Zm9ybTtcclxuICAgIH07XHJcbiAgICBQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCFQbGF0Zm9ybVN1cHBvcnQucGxhdGZvcm0pIHtcclxuICAgICAgICAgICAgZmFpbCgnUGxhdGZvcm0gbm90IHNldCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGxhdGZvcm1TdXBwb3J0LnBsYXRmb3JtO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQbGF0Zm9ybVN1cHBvcnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSByZXByZXNlbnRhdGlvbiBvZiBhbiBlbXB0eSBcInByb3RvXCIgYnl0ZSBzdHJpbmcgZm9yIHRoZVxyXG4gKiBwbGF0Zm9ybS5cclxuICovXHJcbmZ1bmN0aW9uIGVtcHR5Qnl0ZVN0cmluZygpIHtcclxuICAgIHJldHVybiBQbGF0Zm9ybVN1cHBvcnQuZ2V0UGxhdGZvcm0oKS5lbXB0eUJ5dGVTdHJpbmc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBDb2RlID0ge1xyXG4gICAgLy8gQ2F1c2VzIGFyZSBjb3BpZWQgZnJvbTpcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXHJcbiAgICAvKiogTm90IGFuIGVycm9yOyByZXR1cm5lZCBvbiBzdWNjZXNzLiAqL1xyXG4gICAgT0s6ICdvaycsXHJcbiAgICAvKiogVGhlIG9wZXJhdGlvbiB3YXMgY2FuY2VsbGVkICh0eXBpY2FsbHkgYnkgdGhlIGNhbGxlcikuICovXHJcbiAgICBDQU5DRUxMRUQ6ICdjYW5jZWxsZWQnLFxyXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXHJcbiAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAgICAvKipcclxuICAgICAqIENsaWVudCBzcGVjaWZpZWQgYW4gaW52YWxpZCBhcmd1bWVudC4gTm90ZSB0aGF0IHRoaXMgZGlmZmVycyBmcm9tXHJcbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcclxuICAgICAqIHByb2JsZW1hdGljIHJlZ2FyZGxlc3Mgb2YgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0gKGUuZy4sIGEgbWFsZm9ybWVkIGZpbGVcclxuICAgICAqIG5hbWUpLlxyXG4gICAgICovXHJcbiAgICBJTlZBTElEX0FSR1VNRU5UOiAnaW52YWxpZC1hcmd1bWVudCcsXHJcbiAgICAvKipcclxuICAgICAqIERlYWRsaW5lIGV4cGlyZWQgYmVmb3JlIG9wZXJhdGlvbiBjb3VsZCBjb21wbGV0ZS4gRm9yIG9wZXJhdGlvbnMgdGhhdFxyXG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxyXG4gICAgICogb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiBGb3IgZXhhbXBsZSwgYSBzdWNjZXNzZnVsIHJlc3BvbnNlXHJcbiAgICAgKiBmcm9tIGEgc2VydmVyIGNvdWxkIGhhdmUgYmVlbiBkZWxheWVkIGxvbmcgZW5vdWdoIGZvciB0aGUgZGVhZGxpbmUgdG9cclxuICAgICAqIGV4cGlyZS5cclxuICAgICAqL1xyXG4gICAgREVBRExJTkVfRVhDRUVERUQ6ICdkZWFkbGluZS1leGNlZWRlZCcsXHJcbiAgICAvKiogU29tZSByZXF1ZXN0ZWQgZW50aXR5IChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgd2FzIG5vdCBmb3VuZC4gKi9cclxuICAgIE5PVF9GT1VORDogJ25vdC1mb3VuZCcsXHJcbiAgICAvKipcclxuICAgICAqIFNvbWUgZW50aXR5IHRoYXQgd2UgYXR0ZW1wdGVkIHRvIGNyZWF0ZSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIGFscmVhZHlcclxuICAgICAqIGV4aXN0cy5cclxuICAgICAqL1xyXG4gICAgQUxSRUFEWV9FWElTVFM6ICdhbHJlYWR5LWV4aXN0cycsXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjYWxsZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGV4ZWN1dGUgdGhlIHNwZWNpZmllZCBvcGVyYXRpb24uXHJcbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXHJcbiAgICAgKiBzb21lIHJlc291cmNlICh1c2UgUkVTT1VSQ0VfRVhIQVVTVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXHJcbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGlmIHRoZSBjYWxsZXIgY2FuIG5vdCBiZSBpZGVudGlmaWVkXHJcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxyXG4gICAgICovXHJcbiAgICBQRVJNSVNTSU9OX0RFTklFRDogJ3Blcm1pc3Npb24tZGVuaWVkJyxcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXHJcbiAgICAgKiBvcGVyYXRpb24uXHJcbiAgICAgKi9cclxuICAgIFVOQVVUSEVOVElDQVRFRDogJ3VuYXV0aGVudGljYXRlZCcsXHJcbiAgICAvKipcclxuICAgICAqIFNvbWUgcmVzb3VyY2UgaGFzIGJlZW4gZXhoYXVzdGVkLCBwZXJoYXBzIGEgcGVyLXVzZXIgcXVvdGEsIG9yIHBlcmhhcHMgdGhlXHJcbiAgICAgKiBlbnRpcmUgZmlsZSBzeXN0ZW0gaXMgb3V0IG9mIHNwYWNlLlxyXG4gICAgICovXHJcbiAgICBSRVNPVVJDRV9FWEhBVVNURUQ6ICdyZXNvdXJjZS1leGhhdXN0ZWQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPcGVyYXRpb24gd2FzIHJlamVjdGVkIGJlY2F1c2UgdGhlIHN5c3RlbSBpcyBub3QgaW4gYSBzdGF0ZSByZXF1aXJlZCBmb3JcclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcclxuICAgICAqIG5vbi1lbXB0eSwgYW4gcm1kaXIgb3BlcmF0aW9uIGlzIGFwcGxpZWQgdG8gYSBub24tZGlyZWN0b3J5LCBldGMuXHJcbiAgICAgKlxyXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xyXG4gICAgICogYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELCBhbmQgVU5BVkFJTEFCTEU6XHJcbiAgICAgKiAgKGEpIFVzZSBVTkFWQUlMQUJMRSBpZiB0aGUgY2xpZW50IGNhbiByZXRyeSBqdXN0IHRoZSBmYWlsaW5nIGNhbGwuXHJcbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXHJcbiAgICAgKiAgICAgIChlLmcuLCByZXN0YXJ0aW5nIGEgcmVhZC1tb2RpZnktd3JpdGUgc2VxdWVuY2UpLlxyXG4gICAgICogIChjKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW50aWxcclxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcclxuICAgICAqICAgICAgZmFpbHMgYmVjYXVzZSB0aGUgZGlyZWN0b3J5IGlzIG5vbi1lbXB0eSwgRkFJTEVEX1BSRUNPTkRJVElPTlxyXG4gICAgICogICAgICBzaG91bGQgYmUgcmV0dXJuZWQgc2luY2UgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVubGVzc1xyXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxyXG4gICAgICogIChkKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHBlcmZvcm1zIGNvbmRpdGlvbmFsXHJcbiAgICAgKiAgICAgIFJFU1QgR2V0L1VwZGF0ZS9EZWxldGUgb24gYSByZXNvdXJjZSBhbmQgdGhlIHJlc291cmNlIG9uIHRoZVxyXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcclxuICAgICAqICAgICAgcmVhZC1tb2RpZnktd3JpdGUgb24gdGhlIHNhbWUgcmVzb3VyY2UuXHJcbiAgICAgKi9cclxuICAgIEZBSUxFRF9QUkVDT05ESVRJT046ICdmYWlsZWQtcHJlY29uZGl0aW9uJyxcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZCwgdHlwaWNhbGx5IGR1ZSB0byBhIGNvbmN1cnJlbmN5IGlzc3VlIGxpa2VcclxuICAgICAqIHNlcXVlbmNlciBjaGVjayBmYWlsdXJlcywgdHJhbnNhY3Rpb24gYWJvcnRzLCBldGMuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXHJcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXHJcbiAgICAgKi9cclxuICAgIEFCT1JURUQ6ICdhYm9ydGVkJyxcclxuICAgIC8qKlxyXG4gICAgICogT3BlcmF0aW9uIHdhcyBhdHRlbXB0ZWQgcGFzdCB0aGUgdmFsaWQgcmFuZ2UuIEUuZy4sIHNlZWtpbmcgb3IgcmVhZGluZ1xyXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cclxuICAgICAqXHJcbiAgICAgKiBVbmxpa2UgSU5WQUxJRF9BUkdVTUVOVCwgdGhpcyBlcnJvciBpbmRpY2F0ZXMgYSBwcm9ibGVtIHRoYXQgbWF5IGJlIGZpeGVkXHJcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXHJcbiAgICAgKiBnZW5lcmF0ZSBJTlZBTElEX0FSR1VNRU5UIGlmIGFza2VkIHRvIHJlYWQgYXQgYW4gb2Zmc2V0IHRoYXQgaXMgbm90IGluIHRoZVxyXG4gICAgICogcmFuZ2UgWzAsMl4zMi0xXSwgYnV0IGl0IHdpbGwgZ2VuZXJhdGUgT1VUX09GX1JBTkdFIGlmIGFza2VkIHRvIHJlYWQgZnJvbVxyXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxyXG4gICAgICpcclxuICAgICAqIFRoZXJlIGlzIGEgZmFpciBiaXQgb2Ygb3ZlcmxhcCBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXHJcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxyXG4gICAgICogd2hlbiBpdCBhcHBsaWVzIHNvIHRoYXQgY2FsbGVycyB3aG8gYXJlIGl0ZXJhdGluZyB0aHJvdWdoIGEgc3BhY2UgY2FuXHJcbiAgICAgKiBlYXNpbHkgbG9vayBmb3IgYW4gT1VUX09GX1JBTkdFIGVycm9yIHRvIGRldGVjdCB3aGVuIHRoZXkgYXJlIGRvbmUuXHJcbiAgICAgKi9cclxuICAgIE9VVF9PRl9SQU5HRTogJ291dC1vZi1yYW5nZScsXHJcbiAgICAvKiogT3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZCBvciBub3Qgc3VwcG9ydGVkL2VuYWJsZWQgaW4gdGhpcyBzZXJ2aWNlLiAqL1xyXG4gICAgVU5JTVBMRU1FTlRFRDogJ3VuaW1wbGVtZW50ZWQnLFxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcclxuICAgICAqIGJlZW4gYnJva2VuLiBJZiB5b3Ugc2VlIG9uZSBvZiB0aGVzZSBlcnJvcnMsIFNvbWV0aGluZyBpcyB2ZXJ5IGJyb2tlbi5cclxuICAgICAqL1xyXG4gICAgSU5URVJOQUw6ICdpbnRlcm5hbCcsXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzZXJ2aWNlIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4gVGhpcyBpcyBhIG1vc3QgbGlrZWx5IGEgdHJhbnNpZW50XHJcbiAgICAgKiBjb25kaXRpb24gYW5kIG1heSBiZSBjb3JyZWN0ZWQgYnkgcmV0cnlpbmcgd2l0aCBhIGJhY2tvZmYuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXHJcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXHJcbiAgICAgKi9cclxuICAgIFVOQVZBSUxBQkxFOiAndW5hdmFpbGFibGUnLFxyXG4gICAgLyoqIFVucmVjb3ZlcmFibGUgZGF0YSBsb3NzIG9yIGNvcnJ1cHRpb24uICovXHJcbiAgICBEQVRBX0xPU1M6ICdkYXRhLWxvc3MnXHJcbn07XHJcbi8qKlxyXG4gKiBBbiBlcnJvciBjbGFzcyB1c2VkIGZvciBGaXJlc3RvcmUtZ2VuZXJhdGVkIGVycm9ycy4gSWRlYWxseSB3ZSBzaG91bGQgYmVcclxuICogdXNpbmcgRmlyZWJhc2VFcnJvciwgYnV0IGludGVncmF0aW5nIHdpdGggaXQgaXMgb3Zlcmx5IGFyZHVvdXMgYXQgdGhlIG1vbWVudCxcclxuICogc28gd2UgZGVmaW5lIG91ciBvd24gY29tcGF0aWJsZSBlcnJvciBjbGFzcyAod2l0aCBhIGBuYW1lYCBvZiAnRmlyZWJhc2VFcnJvcidcclxuICogYW5kIGNvbXBhdGlibGUgYGNvZGVgIGFuZCBgbWVzc2FnZWAgZmllbGRzLilcclxuICovXHJcbnZhciBGaXJlc3RvcmVFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhGaXJlc3RvcmVFcnJvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEZpcmVzdG9yZUVycm9yKGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSAnRmlyZWJhc2VFcnJvcic7XHJcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcclxuICAgICAgICAvLyBjbGFzcyBhbmQgc28gaW5oZXJpdGFuY2UgZG9lcyBub3Qgd29yayBjb3JyZWN0bHkuIFdlIGNvdWxkIGFsdGVybmF0aXZlbHlcclxuICAgICAgICAvLyBkbyB0aGUgc2FtZSBcImJhY2stZG9vciBpbmhlcml0YW5jZVwiIHRyaWNrIHRoYXQgRmlyZWJhc2VFcnJvciBkb2VzLlxyXG4gICAgICAgIF90aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubmFtZSArIFwiOiBbY29kZT1cIiArIF90aGlzLmNvZGUgKyBcIl06IFwiICsgX3RoaXMubWVzc2FnZTsgfTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRmlyZXN0b3JlRXJyb3I7XHJcbn0oRXJyb3IpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gcHJldmVudCBpbnN0YW50aWF0aW9uIHRocm91Z2ggdGhlIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IGNvbnN0cnVjdG9yIHRoYXQgdGhyb3dzIHdoZW4gaXQncyBpbnZva2VkLlxyXG4gKiBUaGUgcHJvdG90eXBlIG9mIHRoYXQgY29uc3RydWN0b3IgaXMgdGhlbiBzZXQgdG8gdGhlIHByb3RvdHlwZSBvZiB0aGUgaGlkZGVuXHJcbiAqIFwiY2xhc3NcIiB0byBleHBvc2UgYWxsIHRoZSBwcm90b3R5cGUgbWV0aG9kcyBhbmQgYWxsb3cgZm9yIGluc3RhbmNlb2ZcclxuICogY2hlY2tzLlxyXG4gKlxyXG4gKiBUbyBhbHNvIG1ha2UgYWxsIHRoZSBzdGF0aWMgbWV0aG9kcyBhdmFpbGFibGUsIGFsbCBwcm9wZXJ0aWVzIG9mIHRoZVxyXG4gKiBvcmlnaW5hbCBjb25zdHJ1Y3RvciBhcmUgY29waWVkIHRvIHRoZSBuZXcgY29uc3RydWN0b3IuXHJcbiAqL1xyXG5mdW5jdGlvbiBtYWtlQ29uc3RydWN0b3JQcml2YXRlKGNscywgb3B0aW9uYWxNZXNzYWdlKSB7XHJcbiAgICBmdW5jdGlvbiBQdWJsaWNDb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB2YXIgZXJyb3IgPSAnVGhpcyBjb25zdHJ1Y3RvciBpcyBwcml2YXRlLic7XHJcbiAgICAgICAgaWYgKG9wdGlvbmFsTWVzc2FnZSkge1xyXG4gICAgICAgICAgICBlcnJvciArPSAnICc7XHJcbiAgICAgICAgICAgIGVycm9yICs9IG9wdGlvbmFsTWVzc2FnZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgLy8gTWFrZSBzdXJlIGluc3RhbmNlb2YgY2hlY2tzIHdvcmsgYW5kIGFsbCBtZXRob2RzIGFyZSBleHBvc2VkIG9uIHRoZSBwdWJsaWNcclxuICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICBQdWJsaWNDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBjbHMucHJvdG90eXBlO1xyXG4gICAgLy8gQ29weSBhbnkgc3RhdGljIG1ldGhvZHMvbWVtYmVyc1xyXG4gICAgZm9yICh2YXIgc3RhdGljUHJvcGVydHkgaW4gY2xzKSB7XHJcbiAgICAgICAgaWYgKGNscy5oYXNPd25Qcm9wZXJ0eShzdGF0aWNQcm9wZXJ0eSkpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgUHVibGljQ29uc3RydWN0b3Jbc3RhdGljUHJvcGVydHldID0gY2xzW3N0YXRpY1Byb3BlcnR5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgcmV0dXJuIFB1YmxpY0NvbnN0cnVjdG9yO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuLyoqIFJldHVybnMgdGhlIGdpdmVuIHZhbHVlIGlmIGl0J3MgZGVmaW5lZCBvciB0aGUgZGVmYXVsdFZhbHVlIG90aGVyd2lzZS4gKi9cclxuZnVuY3Rpb24gZGVmYXVsdGVkKHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBkZWZhdWx0VmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gZm9yRWFjaE51bWJlcihvYmosIGZuKSB7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgdmFyIG51bSA9IE51bWJlcihrZXkpO1xyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkpIHtcclxuICAgICAgICAgICAgICAgIGZuKG51bSwgb2JqW2tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbHVlcyhvYmopIHtcclxuICAgIHZhciB2cyA9IFtdO1xyXG4gICAgZm9yRWFjaChvYmosIGZ1bmN0aW9uIChfLCB2KSB7IHJldHVybiB2cy5wdXNoKHYpOyB9KTtcclxuICAgIHJldHVybiB2cztcclxufVxyXG5mdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4pIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICBmbihrZXksIG9ialtrZXldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGFzc2VydChvYmogIT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JywgJ2lzRW1wdHkoKSBleHBlY3RzIG9iamVjdCBwYXJhbWV0ZXIuJyk7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KG9iaikge1xyXG4gICAgYXNzZXJ0KG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JywgJ3NoYWxsb3dDb3B5KCkgZXhwZWN0cyBvYmplY3QgcGFyYW1ldGVyLicpO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IG5vIGFyZ3VtZW50cyB3ZXJlIHBhc3NlZCBpbiB0aGUgaW52b2NhdGlvbiBvZiBmdW5jdGlvbk5hbWUuXHJcbiAqXHJcbiAqIEZvcndhcmQgdGhlIG1hZ2ljIFwiYXJndW1lbnRzXCIgdmFyaWFibGUgYXMgc2Vjb25kIHBhcmFtZXRlciBvbiB3aGljaCB0aGVcclxuICogcGFyYW1ldGVyIHZhbGlkYXRpb24gaXMgcGVyZm9ybWVkOlxyXG4gKiB2YWxpZGF0ZU5vQXJncygnbXlGdW5jdGlvbicsIGFyZ3VtZW50cyk7XHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5vQXJncyhmdW5jdGlvbk5hbWUsIGFyZ3MpIHtcclxuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIGRvZXMgbm90IHN1cHBvcnQgYXJndW1lbnRzLCBcIiArXHJcbiAgICAgICAgICAgICdidXQgd2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBmb3JtYXRQbHVyYWwoYXJncy5sZW5ndGgsICdhcmd1bWVudCcpICtcclxuICAgICAgICAgICAgJy4nKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBpbnZvY2F0aW9uIG9mIGZ1bmN0aW9uTmFtZSBoYXMgdGhlIGV4YWN0IG51bWJlciBvZiBhcmd1bWVudHMuXHJcbiAqXHJcbiAqIEZvcndhcmQgdGhlIG1hZ2ljIFwiYXJndW1lbnRzXCIgdmFyaWFibGUgYXMgc2Vjb25kIHBhcmFtZXRlciBvbiB3aGljaCB0aGVcclxuICogcGFyYW1ldGVyIHZhbGlkYXRpb24gaXMgcGVyZm9ybWVkOlxyXG4gKiB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdteUZ1bmN0aW9uJywgYXJndW1lbnRzLCAyKTtcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoZnVuY3Rpb25OYW1lLCBhcmdzLCBudW1iZXJPZkFyZ3MpIHtcclxuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gbnVtYmVyT2ZBcmdzKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgXCIgK1xyXG4gICAgICAgICAgICBmb3JtYXRQbHVyYWwobnVtYmVyT2ZBcmdzLCAnYXJndW1lbnQnKSArXHJcbiAgICAgICAgICAgICcsIGJ1dCB3YXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGZvcm1hdFBsdXJhbChhcmdzLmxlbmd0aCwgJ2FyZ3VtZW50JykgK1xyXG4gICAgICAgICAgICAnLicpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIGludm9jYXRpb24gb2YgZnVuY3Rpb25OYW1lIGhhcyBhdCBsZWFzdCB0aGUgcHJvdmlkZWQgbnVtYmVyIG9mXHJcbiAqIGFyZ3VtZW50cyAoYnV0IGNhbiBoYXZlIG1hbnkgbW9yZSkuXHJcbiAqXHJcbiAqIEZvcndhcmQgdGhlIG1hZ2ljIFwiYXJndW1lbnRzXCIgdmFyaWFibGUgYXMgc2Vjb25kIHBhcmFtZXRlciBvbiB3aGljaCB0aGVcclxuICogcGFyYW1ldGVyIHZhbGlkYXRpb24gaXMgcGVyZm9ybWVkOlxyXG4gKiB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ215RnVuY3Rpb24nLCBhcmd1bWVudHMsIDIpO1xyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKGZ1bmN0aW9uTmFtZSwgYXJncywgbWluTnVtYmVyT2ZBcmdzKSB7XHJcbiAgICBpZiAoYXJncy5sZW5ndGggPCBtaW5OdW1iZXJPZkFyZ3MpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBhdCBsZWFzdCBcIiArXHJcbiAgICAgICAgICAgIGZvcm1hdFBsdXJhbChtaW5OdW1iZXJPZkFyZ3MsICdhcmd1bWVudCcpICtcclxuICAgICAgICAgICAgJywgYnV0IHdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgZm9ybWF0UGx1cmFsKGFyZ3MubGVuZ3RoLCAnYXJndW1lbnQnKSArXHJcbiAgICAgICAgICAgICcuJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgaW52b2NhdGlvbiBvZiBmdW5jdGlvbk5hbWUgaGFzIG51bWJlciBvZiBhcmd1bWVudHMgYmV0d2VlblxyXG4gKiB0aGUgdmFsdWVzIHByb3ZpZGVkLlxyXG4gKlxyXG4gKiBGb3J3YXJkIHRoZSBtYWdpYyBcImFyZ3VtZW50c1wiIHZhcmlhYmxlIGFzIHNlY29uZCBwYXJhbWV0ZXIgb24gd2hpY2ggdGhlXHJcbiAqIHBhcmFtZXRlciB2YWxpZGF0aW9uIGlzIHBlcmZvcm1lZDpcclxuICogdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdteUZ1bmN0aW9uJywgYXJndW1lbnRzLCAyLCAzKTtcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncyhmdW5jdGlvbk5hbWUsIGFyZ3MsIG1pbk51bWJlck9mQXJncywgbWF4TnVtYmVyT2ZBcmdzKSB7XHJcbiAgICBpZiAoYXJncy5sZW5ndGggPCBtaW5OdW1iZXJPZkFyZ3MgfHwgYXJncy5sZW5ndGggPiBtYXhOdW1iZXJPZkFyZ3MpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBiZXR3ZWVuIFwiICsgbWluTnVtYmVyT2ZBcmdzICsgXCIgYW5kIFwiICtcclxuICAgICAgICAgICAgKG1heE51bWJlck9mQXJncyArIFwiIGFyZ3VtZW50cywgYnV0IHdhcyBjYWxsZWQgd2l0aCBcIikgK1xyXG4gICAgICAgICAgICBmb3JtYXRQbHVyYWwoYXJncy5sZW5ndGgsICdhcmd1bWVudCcpICtcclxuICAgICAgICAgICAgJy4nKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBhcmd1bWVudCBpcyBhbiBhcnJheSBhbmQgaGFzIGFzIGxlYXN0IHRoZSBleHBlY3RlZFxyXG4gKiBudW1iZXIgb2YgZWxlbWVudHMuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVkQXJyYXlBdExlYXN0TnVtYmVyT2ZFbGVtZW50cyhmdW5jdGlvbk5hbWUsIHZhbHVlLCBuYW1lLCBtaW5OdW1iZXJPZkVsZW1lbnRzKSB7XHJcbiAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB8fCB2YWx1ZS5sZW5ndGggPCBtaW5OdW1iZXJPZkVsZW1lbnRzKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgaXRzIFwiICsgbmFtZSArIFwiIGFyZ3VtZW50IHRvIGJlIGFuIFwiICtcclxuICAgICAgICAgICAgJ2FycmF5IHdpdGggYXQgbGVhc3QgJyArXHJcbiAgICAgICAgICAgIChmb3JtYXRQbHVyYWwobWluTnVtYmVyT2ZFbGVtZW50cywgJ2VsZW1lbnQnKSArIFwiLlwiKSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgcHJvdmlkZWQgcG9zaXRpb25hbCBhcmd1bWVudCBoYXMgdGhlIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGVcclxuICogdXNpbmcgdHlwZW9mIGNoZWNrcy5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlQXJnVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIHBvc2l0aW9uLCBhcmd1bWVudCkge1xyXG4gICAgdmFsaWRhdGVUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgb3JkaW5hbChwb3NpdGlvbikgKyBcIiBhcmd1bWVudFwiLCBhcmd1bWVudCk7XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaGFzIHRoZSBuYXRpdmUgSmF2YVNjcmlwdCB0eXBlIHVzaW5nXHJcbiAqIHR5cGVvZiBjaGVja3Mgb3IgaXMgdW5kZWZpbmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBwb3NpdGlvbiwgYXJndW1lbnQpIHtcclxuICAgIGlmIChhcmd1bWVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgcG9zaXRpb24sIGFyZ3VtZW50KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBuYW1lZCBvcHRpb24gaGFzIHRoZSBuYXRpdmUgSmF2YVNjcmlwdCB0eXBlIHVzaW5nXHJcbiAqIHR5cGVvZiBjaGVja3MuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVkVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIG9wdGlvbk5hbWUsIGFyZ3VtZW50KSB7XHJcbiAgICB2YWxpZGF0ZVR5cGUoZnVuY3Rpb25OYW1lLCB0eXBlLCBvcHRpb25OYW1lICsgXCIgb3B0aW9uXCIsIGFyZ3VtZW50KTtcclxufVxyXG4vKipcclxuICogVmFsaWRhdGVzIHRoZSBwcm92aWRlZCBuYW1lZCBvcHRpb24gaGFzIHRoZSBuYXRpdmUgSmF2YVNjcmlwdCB0eXBlIHVzaW5nXHJcbiAqIHR5cGVvZiBjaGVja3Mgb3IgaXMgdW5kZWZpbmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIG9wdGlvbk5hbWUsIGFyZ3VtZW50KSB7XHJcbiAgICBpZiAoYXJndW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRUeXBlKGZ1bmN0aW9uTmFtZSwgdHlwZSwgb3B0aW9uTmFtZSwgYXJndW1lbnQpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQXJyYXlFbGVtZW50cyhmdW5jdGlvbk5hbWUsIG9wdGlvbk5hbWUsIHR5cGVEZXNjcmlwdGlvbiwgYXJndW1lbnQsIHZhbGlkYXRvcikge1xyXG4gICAgaWYgKCEoYXJndW1lbnQgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBpdHMgXCIgKyBvcHRpb25OYW1lICsgXCIgXCIgK1xyXG4gICAgICAgICAgICAoXCJvcHRpb24gdG8gYmUgYW4gYXJyYXksIGJ1dCBpdCB3YXM6IFwiICsgdmFsdWVEZXNjcmlwdGlvbihhcmd1bWVudCkpKTtcclxuICAgIH1cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnQubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBpZiAoIXZhbGlkYXRvcihhcmd1bWVudFtpXSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgcmVxdWlyZXMgYWxsIFwiICsgb3B0aW9uTmFtZSArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgIChcImVsZW1lbnRzIHRvIGJlIFwiICsgdHlwZURlc2NyaXB0aW9uICsgXCIsIGJ1dCB0aGUgdmFsdWUgYXQgaW5kZXggXCIgKyBpICsgXCIgXCIpICtcclxuICAgICAgICAgICAgICAgIChcIndhczogXCIgKyB2YWx1ZURlc2NyaXB0aW9uKGFyZ3VtZW50W2ldKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZU9wdGlvbmFsQXJyYXlFbGVtZW50cyhmdW5jdGlvbk5hbWUsIG9wdGlvbk5hbWUsIHR5cGVEZXNjcmlwdGlvbiwgYXJndW1lbnQsIHZhbGlkYXRvcikge1xyXG4gICAgaWYgKGFyZ3VtZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB2YWxpZGF0ZUFycmF5RWxlbWVudHMoZnVuY3Rpb25OYW1lLCBvcHRpb25OYW1lLCB0eXBlRGVzY3JpcHRpb24sIGFyZ3VtZW50LCB2YWxpZGF0b3IpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGUgcHJvdmlkZWQgbmFtZWQgb3B0aW9uIGVxdWFscyBvbmUgb2YgdGhlIGV4cGVjdGVkIHZhbHVlcy5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZWRQcm9wZXJ0eUVxdWFscyhmdW5jdGlvbk5hbWUsIGlucHV0TmFtZSwgb3B0aW9uTmFtZSwgaW5wdXQsIGV4cGVjdGVkKSB7XHJcbiAgICB2YXIgZXhwZWN0ZWREZXNjcmlwdGlvbiA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBleHBlY3RlZF8xID0gZXhwZWN0ZWQ7IF9pIDwgZXhwZWN0ZWRfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgdmFsID0gZXhwZWN0ZWRfMVtfaV07XHJcbiAgICAgICAgaWYgKHZhbCA9PT0gaW5wdXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBleHBlY3RlZERlc2NyaXB0aW9uLnB1c2godmFsdWVEZXNjcmlwdGlvbih2YWwpKTtcclxuICAgIH1cclxuICAgIHZhciBhY3R1YWxEZXNjcmlwdGlvbiA9IHZhbHVlRGVzY3JpcHRpb24oaW5wdXQpO1xyXG4gICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHZhbHVlIFwiICsgYWN0dWFsRGVzY3JpcHRpb24gKyBcIiBwcm92aWRlZCB0byBmdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkgZm9yIG9wdGlvbiBcIiArXHJcbiAgICAgICAgKFwiXFxcIlwiICsgb3B0aW9uTmFtZSArIFwiXFxcIi4gQWNjZXB0YWJsZSB2YWx1ZXM6IFwiICsgZXhwZWN0ZWREZXNjcmlwdGlvbi5qb2luKCcsICcpKSk7XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSBwcm92aWRlZCBuYW1lZCBvcHRpb24gZXF1YWxzIG9uZSBvZiB0aGUgZXhwZWN0ZWQgdmFsdWVzIG9yXHJcbiAqIGlzIHVuZGVmaW5lZC5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZWRPcHRpb25hbFByb3BlcnR5RXF1YWxzKGZ1bmN0aW9uTmFtZSwgaW5wdXROYW1lLCBvcHRpb25OYW1lLCBpbnB1dCwgZXhwZWN0ZWQpIHtcclxuICAgIGlmIChpbnB1dCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZFByb3BlcnR5RXF1YWxzKGZ1bmN0aW9uTmFtZSwgaW5wdXROYW1lLCBvcHRpb25OYW1lLCBpbnB1dCwgZXhwZWN0ZWQpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgYSB2YWxpZCBlbnVtLlxyXG4gKlxyXG4gKiBAcGFyYW0gZnVuY3Rpb25OYW1lIEZ1bmN0aW9uIG1ha2luZyB0aGUgdmFsaWRhdGlvbiBjYWxsLlxyXG4gKiBAcGFyYW0gZW51bXMgQXJyYXkgY29udGFpbmluZyBhbGwgcG9zc2libGUgdmFsdWVzIGZvciB0aGUgZW51bS5cclxuICogQHBhcmFtIHBvc2l0aW9uIFBvc2l0aW9uIG9mIHRoZSBhcmd1bWVudCBpbiBgZnVuY3Rpb25OYW1lYC5cclxuICogQHBhcmFtIGFyZ3VtZW50IEFydWdtZW50IHRvIHZhbGlkYXRlLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVTdHJpbmdFbnVtKGZ1bmN0aW9uTmFtZSwgZW51bXMsIHBvc2l0aW9uLCBhcmd1bWVudCkge1xyXG4gICAgaWYgKCFlbnVtcy5zb21lKGZ1bmN0aW9uIChlbGVtZW50KSB7IHJldHVybiBlbGVtZW50ID09PSBhcmd1bWVudDsgfSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgdmFsdWUgXCIgKyB2YWx1ZURlc2NyaXB0aW9uKGFyZ3VtZW50KSArIFwiIHByb3ZpZGVkIHRvIGZ1bmN0aW9uIFwiICtcclxuICAgICAgICAgICAgKGZ1bmN0aW9uTmFtZSArIFwiKCkgZm9yIGl0cyBcIiArIG9yZGluYWwocG9zaXRpb24pICsgXCIgYXJndW1lbnQuIEFjY2VwdGFibGUgXCIpICtcclxuICAgICAgICAgICAgKFwidmFsdWVzOiBcIiArIGVudW1zLmpvaW4oJywgJykpKTtcclxuICAgIH1cclxufVxyXG4vKiogSGVscGVyIHRvIHZhbGlkYXRlIHRoZSB0eXBlIG9mIGEgcHJvdmlkZWQgaW5wdXQuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlVHlwZShmdW5jdGlvbk5hbWUsIHR5cGUsIGlucHV0TmFtZSwgaW5wdXQpIHtcclxuICAgIHZhciB2YWxpZCA9IGZhbHNlO1xyXG4gICAgaWYgKHR5cGUgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgdmFsaWQgPSBpc1BsYWluT2JqZWN0KGlucHV0KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdub24tZW1wdHkgc3RyaW5nJykge1xyXG4gICAgICAgIHZhbGlkID0gdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyAmJiBpbnB1dCAhPT0gJyc7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB2YWxpZCA9IHR5cGVvZiBpbnB1dCA9PT0gdHlwZTtcclxuICAgIH1cclxuICAgIGlmICghdmFsaWQpIHtcclxuICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSB2YWx1ZURlc2NyaXB0aW9uKGlucHV0KTtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBpdHMgXCIgKyBpbnB1dE5hbWUgKyBcIiBcIiArXHJcbiAgICAgICAgICAgIChcInRvIGJlIG9mIHR5cGUgXCIgKyB0eXBlICsgXCIsIGJ1dCBpdCB3YXM6IFwiICsgZGVzY3JpcHRpb24pKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIGl0J3MgYSBub24tbnVsbCBvYmplY3Qgd2l0aG91dCBhIGN1c3RvbSBwcm90b3R5cGVcclxuICogKGkuZS4gZXhjbHVkZXMgQXJyYXksIERhdGUsIGV0Yy4pLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChpbnB1dCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgaW5wdXQgIT09IG51bGwgJiZcclxuICAgICAgICAoT2JqZWN0LmdldFByb3RvdHlwZU9mKGlucHV0KSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fFxyXG4gICAgICAgICAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2YoaW5wdXQpID09PSBudWxsKSk7XHJcbn1cclxuLyoqIFJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSAvIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBpbnB1dC4gKi9cclxuZnVuY3Rpb24gdmFsdWVEZXNjcmlwdGlvbihpbnB1dCkge1xyXG4gICAgaWYgKGlucHV0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpbnB1dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiAnbnVsbCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IDIwKSB7XHJcbiAgICAgICAgICAgIGlucHV0ID0gaW5wdXQuc3Vic3RyaW5nKDAsIDIwKSArIFwiLi4uXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShpbnB1dCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdudW1iZXInIHx8IHR5cGVvZiBpbnB1dCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgcmV0dXJuICcnICsgaW5wdXQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdhbiBhcnJheSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgY3VzdG9tT2JqZWN0TmFtZSA9IHRyeUdldEN1c3RvbU9iamVjdFR5cGUoaW5wdXQpO1xyXG4gICAgICAgICAgICBpZiAoY3VzdG9tT2JqZWN0TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYSBjdXN0b20gXCIgKyBjdXN0b21PYmplY3ROYW1lICsgXCIgb2JqZWN0XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FuIG9iamVjdCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICByZXR1cm4gJ2EgZnVuY3Rpb24nO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gd3JvbmcgdHlwZTogJyArIHR5cGVvZiBpbnB1dCk7XHJcbiAgICB9XHJcbn1cclxuLyoqIEhhY2t5IG1ldGhvZCB0byB0cnkgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvciBhbiBvYmplY3QuICovXHJcbmZ1bmN0aW9uIHRyeUdldEN1c3RvbU9iamVjdFR5cGUoaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dC5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIHZhciBmdW5jTmFtZVJlZ2V4ID0gL2Z1bmN0aW9uXFxzKyhbXlxccyhdKylcXHMqXFwoLztcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IGZ1bmNOYW1lUmVnZXguZXhlYyhpbnB1dC5jb25zdHJ1Y3Rvci50b1N0cmluZygpKTtcclxuICAgICAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuLyoqIFZhbGlkYXRlcyB0aGUgcHJvdmlkZWQgYXJndW1lbnQgaXMgZGVmaW5lZC4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVEZWZpbmVkKGZ1bmN0aW9uTmFtZSwgcG9zaXRpb24sIGFyZ3VtZW50KSB7XHJcbiAgICBpZiAoYXJndW1lbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpIHJlcXVpcmVzIGEgdmFsaWQgXCIgKyBvcmRpbmFsKHBvc2l0aW9uKSArIFwiIFwiICtcclxuICAgICAgICAgICAgXCJhcmd1bWVudCwgYnV0IGl0IHdhcyB1bmRlZmluZWQuXCIpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhlIHByb3ZpZGVkIHBvc2l0aW9uYWwgYXJndW1lbnQgaXMgYW4gb2JqZWN0LCBhbmQgaXRzIGtleXMgYW5kXHJcbiAqIHZhbHVlcyBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5cyBhbmQgdHlwZXMgcHJvdmlkZWQgaW4gb3B0aW9uVHlwZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU9wdGlvbk5hbWVzKGZ1bmN0aW9uTmFtZSwgb3B0aW9ucywgb3B0aW9uTmFtZXMpIHtcclxuICAgIGZvckVhY2gob3B0aW9ucywgZnVuY3Rpb24gKGtleSwgXykge1xyXG4gICAgICAgIGlmIChvcHRpb25OYW1lcy5pbmRleE9mKGtleSkgPCAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiVW5rbm93biBvcHRpb24gJ1wiICsga2V5ICsgXCInIHBhc3NlZCB0byBmdW5jdGlvbiBcIiArIGZ1bmN0aW9uTmFtZSArIFwiKCkuIFwiICtcclxuICAgICAgICAgICAgICAgICdBdmFpbGFibGUgb3B0aW9uczogJyArXHJcbiAgICAgICAgICAgICAgICBvcHRpb25OYW1lcy5qb2luKCcsICcpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogSGVscGVyIG1ldGhvZCB0byB0aHJvdyBhbiBlcnJvciB0aGF0IHRoZSBwcm92aWRlZCBhcmd1bWVudCBkaWQgbm90IHBhc3NcclxuICogYW4gaW5zdGFuY2VvZiBjaGVjay5cclxuICovXHJcbmZ1bmN0aW9uIGludmFsaWRDbGFzc0Vycm9yKGZ1bmN0aW9uTmFtZSwgdHlwZSwgcG9zaXRpb24sIGFyZ3VtZW50KSB7XHJcbiAgICB2YXIgZGVzY3JpcHRpb24gPSB2YWx1ZURlc2NyaXB0aW9uKGFyZ3VtZW50KTtcclxuICAgIHJldHVybiBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFwiICsgZnVuY3Rpb25OYW1lICsgXCIoKSByZXF1aXJlcyBpdHMgXCIgKyBvcmRpbmFsKHBvc2l0aW9uKSArIFwiIFwiICtcclxuICAgICAgICAoXCJhcmd1bWVudCB0byBiZSBhIFwiICsgdHlwZSArIFwiLCBidXQgaXQgd2FzOiBcIiArIGRlc2NyaXB0aW9uKSk7XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVQb3NpdGl2ZU51bWJlcihmdW5jdGlvbk5hbWUsIHBvc2l0aW9uLCBuKSB7XHJcbiAgICBpZiAobiA8PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcXFwiXCIgKyBmdW5jdGlvbk5hbWUgKyBcIigpXFxcIiByZXF1aXJlcyBpdHMgXCIgKyBvcmRpbmFsKHBvc2l0aW9uKSArIFwiIGFyZ3VtZW50IHRvIGJlIGEgcG9zaXRpdmUgbnVtYmVyLCBidXQgaXQgd2FzOiBcIiArIG4gKyBcIi5cIik7XHJcbiAgICB9XHJcbn1cclxuLyoqIENvbnZlcnRzIGEgbnVtYmVyIHRvIGl0cyBlbmdsaXNoIHdvcmQgcmVwcmVzZW50YXRpb24gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChudW0pIHtcclxuICAgIHN3aXRjaCAobnVtKSB7XHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2ZpcnN0JztcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIHJldHVybiAnc2Vjb25kJztcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgIHJldHVybiAndGhpcmQnO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBudW0gKyAndGgnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBGb3JtYXRzIHRoZSBnaXZlbiB3b3JkIGFzIHBsdXJhbCBjb25kaXRpb25hbGx5IGdpdmVuIHRoZSBwcmVjZWRpbmcgbnVtYmVyLlxyXG4gKi9cclxuZnVuY3Rpb24gZm9ybWF0UGx1cmFsKG51bSwgc3RyKSB7XHJcbiAgICByZXR1cm4gbnVtICsgXCIgXCIgKyBzdHIgKyAobnVtID09PSAxID8gJycgOiAncycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgQXV0b0lkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQXV0b0lkKCkge1xyXG4gICAgfVxyXG4gICAgQXV0b0lkLm5ld0lkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXHJcbiAgICAgICAgdmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcclxuICAgICAgICB2YXIgYXV0b0lkID0gJyc7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGF1dG9JZCArPSBjaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFzc2VydChhdXRvSWQubGVuZ3RoID09PSAyMCwgJ0ludmFsaWQgYXV0byBJRDogJyArIGF1dG9JZCk7XHJcbiAgICAgICAgcmV0dXJuIGF1dG9JZDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXV0b0lkO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBwcmltaXRpdmVDb21wYXJhdG9yKGxlZnQsIHJpZ2h0KSB7XHJcbiAgICBpZiAobGVmdCA8IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG4gICAgaWYgKGxlZnQgPiByaWdodCkge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDA7XHJcbn1cclxuLyoqIEhlbHBlciB0byBjb21wYXJlIG51bGxhYmxlIChvciB1bmRlZmluZWQtYWJsZSkgb2JqZWN0cyB1c2luZyBpc0VxdWFsKCkuICovXHJcbmZ1bmN0aW9uIGVxdWFscyhsZWZ0LCByaWdodCkge1xyXG4gICAgaWYgKGxlZnQgIT09IG51bGwgJiYgbGVmdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuICEhKHJpZ2h0ICYmIGxlZnQuaXNFcXVhbChyaWdodCkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gSEFDSzogRXhwbGljaXRseSBjYXN0IHNpbmNlIFR5cGVTY3JpcHQncyB0eXBlIG5hcnJvd2luZyBhcHBhcmVudGx5IGlzbid0XHJcbiAgICAgICAgLy8gc21hcnQgZW5vdWdoLlxyXG4gICAgICAgIHJldHVybiBsZWZ0ID09PSByaWdodDtcclxuICAgIH1cclxufVxyXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgYXJyYXlzIHVzaW5nIGlzRXF1YWwoKS4gKi9cclxuZnVuY3Rpb24gYXJyYXlFcXVhbHMobGVmdCwgcmlnaHQpIHtcclxuICAgIGlmIChsZWZ0Lmxlbmd0aCAhPT0gcmlnaHQubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZWZ0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKCFsZWZ0W2ldLmlzRXF1YWwocmlnaHRbaV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0aGUgaW1tZWRpYXRlIGxleGljb2dyYXBoaWNhbGx5LWZvbGxvd2luZyBzdHJpbmcuIFRoaXMgaXMgdXNlZnVsIHRvXHJcbiAqIGNvbnN0cnVjdCBhbiBpbmNsdXNpdmUgcmFuZ2UgZm9yIGluZGV4ZWRkYiBpdGVyYXRvcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbW1lZGlhdGVTdWNjZXNzb3Iocykge1xyXG4gICAgLy8gUmV0dXJuIHRoZSBpbnB1dCBzdHJpbmcsIHdpdGggYW4gYWRkaXRpb25hbCBOVUwgYnl0ZSBhcHBlbmRlZC5cclxuICAgIHJldHVybiBzICsgJ1xcMCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gYXNzZXJ0IFVpbnQ4QXJyYXkgaXMgYXZhaWxhYmxlIGF0IHJ1bnRpbWUuICovXHJcbmZ1bmN0aW9uIGFzc2VydFVpbnQ4QXJyYXlBdmFpbGFibGUoKSB7XHJcbiAgICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5JTVBMRU1FTlRFRCwgJ1VpbnQ4QXJyYXlzIGFyZSBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQuJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBhc3NlcnQgQmFzZTY0IGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlIGF0IHJ1bnRpbWUuICovXHJcbmZ1bmN0aW9uIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpIHtcclxuICAgIGlmICghUGxhdGZvcm1TdXBwb3J0LmdldFBsYXRmb3JtKCkuYmFzZTY0QXZhaWxhYmxlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5JTVBMRU1FTlRFRCwgJ0Jsb2JzIGFyZSB1bmF2YWlsYWJsZSBpbiBGaXJlc3RvcmUgaW4gdGhpcyBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogSW1tdXRhYmxlIGNsYXNzIGhvbGRpbmcgYSBibG9iIChiaW5hcnkgZGF0YSkuXHJcbiAqIFRoaXMgY2xhc3MgaXMgZGlyZWN0bHkgZXhwb3NlZCBpbiB0aGUgcHVibGljIEFQSS5cclxuICpcclxuICogTm90ZSB0aGF0IHdoaWxlIHlvdSBjYW4ndCBoaWRlIHRoZSBjb25zdHJ1Y3RvciBpbiBKYXZhU2NyaXB0IGNvZGUsIHdlIGFyZVxyXG4gKiB1c2luZyB0aGUgaGFjayBhYm92ZSB0byBtYWtlIHN1cmUgbm8tb25lIG91dHNpZGUgdGhpcyBtb2R1bGUgY2FuIGNhbGwgaXQuXHJcbiAqL1xyXG52YXIgQmxvYiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJsb2IoYmluYXJ5U3RyaW5nKSB7XHJcbiAgICAgICAgYXNzZXJ0QmFzZTY0QXZhaWxhYmxlKCk7XHJcbiAgICAgICAgdGhpcy5fYmluYXJ5U3RyaW5nID0gYmluYXJ5U3RyaW5nO1xyXG4gICAgfVxyXG4gICAgQmxvYi5mcm9tQmFzZTY0U3RyaW5nID0gZnVuY3Rpb24gKGJhc2U2NCkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0Jsb2IuZnJvbUJhc2U2NFN0cmluZycsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdCbG9iLmZyb21CYXNlNjRTdHJpbmcnLCAnc3RyaW5nJywgMSwgYmFzZTY0KTtcclxuICAgICAgICBhc3NlcnRCYXNlNjRBdmFpbGFibGUoKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgYmluYXJ5U3RyaW5nID0gUGxhdGZvcm1TdXBwb3J0LmdldFBsYXRmb3JtKCkuYXRvYihiYXNlNjQpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoYmluYXJ5U3RyaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ZhaWxlZCB0byBjb25zdHJ1Y3QgQmxvYiBmcm9tIEJhc2U2NCBzdHJpbmc6ICcgKyBlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQmxvYi5mcm9tVWludDhBcnJheSA9IGZ1bmN0aW9uIChhcnJheSkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0Jsb2IuZnJvbVVpbnQ4QXJyYXknLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIGFzc2VydFVpbnQ4QXJyYXlBdmFpbGFibGUoKTtcclxuICAgICAgICBpZiAoIShhcnJheSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKCdCbG9iLmZyb21VaW50OEFycmF5JywgJ1VpbnQ4QXJyYXknLCAxLCBhcnJheSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFdlIGNhbid0IGNhbGwgYXJyYXkubWFwIGRpcmVjdGx5IGJlY2F1c2UgaXQgZXhwZWN0cyB0aGUgcmV0dXJuIHR5cGUgdG9cclxuICAgICAgICAvLyBiZSBhIFVpbnQ4QXJyYXksIHdoZXJlYXMgd2UgY2FuIGNvbnZlcnQgaXQgdG8gYSByZWd1bGFyIGFycmF5IGJ5IGludm9raW5nXHJcbiAgICAgICAgLy8gbWFwIG9uIHRoZSBBcnJheSBwcm90b3R5cGUuXHJcbiAgICAgICAgdmFyIGJpbmFyeVN0cmluZyA9IEFycmF5LnByb3RvdHlwZS5tYXBcclxuICAgICAgICAgICAgLmNhbGwoYXJyYXksIGZ1bmN0aW9uIChjaGFyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5qb2luKCcnKTtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IoYmluYXJ5U3RyaW5nKTtcclxuICAgIH07XHJcbiAgICBCbG9iLnByb3RvdHlwZS50b0Jhc2U2NCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdCbG9iLnRvQmFzZTY0JywgYXJndW1lbnRzLCAwKTtcclxuICAgICAgICBhc3NlcnRCYXNlNjRBdmFpbGFibGUoKTtcclxuICAgICAgICByZXR1cm4gUGxhdGZvcm1TdXBwb3J0LmdldFBsYXRmb3JtKCkuYnRvYSh0aGlzLl9iaW5hcnlTdHJpbmcpO1xyXG4gICAgfTtcclxuICAgIEJsb2IucHJvdG90eXBlLnRvVWludDhBcnJheSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdCbG9iLnRvVWludDhBcnJheScsIGFyZ3VtZW50cywgMCk7XHJcbiAgICAgICAgYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSh0aGlzLl9iaW5hcnlTdHJpbmcubGVuZ3RoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2JpbmFyeVN0cmluZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBidWZmZXJbaV0gPSB0aGlzLl9iaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcclxuICAgIH07XHJcbiAgICBCbG9iLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJ0Jsb2IoYmFzZTY0OiAnICsgdGhpcy50b0Jhc2U2NCgpICsgJyknO1xyXG4gICAgfTtcclxuICAgIEJsb2IucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYmluYXJ5U3RyaW5nID09PSBvdGhlci5fYmluYXJ5U3RyaW5nO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxyXG4gICAgICogd2l0aCBhbiB1bmRlcnNjb3JlLlxyXG4gICAgICovXHJcbiAgICBCbG9iLnByb3RvdHlwZS5fY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5fYmluYXJ5U3RyaW5nLCBvdGhlci5fYmluYXJ5U3RyaW5nKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQmxvYjtcclxufSgpKTtcclxuLy8gUHVibGljIGluc3RhbmNlIHRoYXQgZGlzYWxsb3dzIGNvbnN0cnVjdGlvbiBhdCBydW50aW1lLiBUaGlzIGNvbnN0cnVjdG9yIGlzXHJcbi8vIHVzZWQgd2hlbiBleHBvcnRpbmcgQmxvYiBvbiBmaXJlYmFzZS5maXJlc3RvcmUuQmxvYiBhbmQgd2lsbCBiZSBjYWxsZWQgQmxvYlxyXG4vLyBwdWJsaWNseS4gSW50ZXJuYWxseSB3ZSBzdGlsbCB1c2UgQmxvYiB3aGljaCBoYXMgYSB0eXBlIGNoZWNrZWQgcHJpdmF0ZVxyXG4vLyBjb25zdHJ1Y3Rvci4gTm90ZSB0aGF0IEJsb2IgYW5kIFB1YmxpY0Jsb2IgY2FuIGJlIHVzZWQgaW50ZXJjaGFuZ2VhYmx5IGluXHJcbi8vIGluc3RhbmNlb2YgY2hlY2tzLlxyXG4vLyBGb3Igb3VyIGludGVybmFsIFR5cGVTY3JpcHQgY29kZSBQdWJsaWNCbG9iIGRvZXNuJ3QgZXhpc3QgYXMgYSB0eXBlLCBhbmQgc29cclxuLy8gd2UgbmVlZCB0byB1c2UgQmxvYiBhcyB0eXBlIGFuZCBleHBvcnQgaXQgdG9vLlxyXG52YXIgUHVibGljQmxvYiA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoQmxvYiwgJ1VzZSBCbG9iLmZyb21VaW50OEFycmF5KCkgb3IgQmxvYi5mcm9tQmFzZTY0U3RyaW5nKCkgaW5zdGVhZC4nKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBEYXRhYmFzZUluZm8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgYSBEYXRhYmFzZUluZm8gdXNpbmcgdGhlIHByb3ZpZGVkIGhvc3QsIGRhdGFiYXNlSWQgYW5kXHJcbiAgICAgKiBwZXJzaXN0ZW5jZUtleS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCBUaGUgZGF0YWJhc2UgdG8gdXNlLlxyXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoaXMgRmlyZXN0b3JlJ3MgbG9jYWxcclxuICAgICAqIHN0b3JhZ2UgKHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGF0YWJhc2VJZCkuXHJcbiAgICAgKiBAcGFyYW0gaG9zdCBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgaG9zdCB0byBjb25uZWN0IHRvLlxyXG4gICAgICogQHBhcmFtIHNzbCBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxyXG4gICAgICogQHBhcmFtIGZvcmNlTG9uZ1BvbGxpbmcgV2hldGhlciB0byB1c2UgdGhlIGZvcmNlTG9uZ1BvbGxpbmcgb3B0aW9uXHJcbiAgICAgKiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBEYXRhYmFzZUluZm8oZGF0YWJhc2VJZCwgcGVyc2lzdGVuY2VLZXksIGhvc3QsIHNzbCwgZm9yY2VMb25nUG9sbGluZykge1xyXG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IGRhdGFiYXNlSWQ7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IHBlcnNpc3RlbmNlS2V5O1xyXG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XHJcbiAgICAgICAgdGhpcy5zc2wgPSBzc2w7XHJcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gZm9yY2VMb25nUG9sbGluZztcclxuICAgIH1cclxuICAgIHJldHVybiBEYXRhYmFzZUluZm87XHJcbn0oKSk7XHJcbi8qKiBUaGUgZGVmYXVsdCBkYXRhYmFzZSBuYW1lIGZvciBhIHByb2plY3QuICovXHJcbnZhciBERUZBVUxUX0RBVEFCQVNFX05BTUUgPSAnKGRlZmF1bHQpJztcclxuLyoqIFJlcHJlc2VudHMgdGhlIGRhdGFiYXNlIElEIGEgRmlyZXN0b3JlIGNsaWVudCBpcyBhc3NvY2lhdGVkIHdpdGguICovXHJcbnZhciBEYXRhYmFzZUlkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGF0YWJhc2VJZChwcm9qZWN0SWQsIGRhdGFiYXNlKSB7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0SWQgPSBwcm9qZWN0SWQ7XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlID8gZGF0YWJhc2UgOiBERUZBVUxUX0RBVEFCQVNFX05BTUU7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YWJhc2VJZC5wcm90b3R5cGUsIFwiaXNEZWZhdWx0RGF0YWJhc2VcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZSA9PT0gREVGQVVMVF9EQVRBQkFTRV9OQU1FO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRGF0YWJhc2VJZC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBEYXRhYmFzZUlkICYmXHJcbiAgICAgICAgICAgIG90aGVyLnByb2plY3RJZCA9PT0gdGhpcy5wcm9qZWN0SWQgJiZcclxuICAgICAgICAgICAgb3RoZXIuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2UpO1xyXG4gICAgfTtcclxuICAgIERhdGFiYXNlSWQucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAocHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLnByb2plY3RJZCwgb3RoZXIucHJvamVjdElkKSB8fFxyXG4gICAgICAgICAgICBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuZGF0YWJhc2UsIG90aGVyLmRhdGFiYXNlKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERhdGFiYXNlSWQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogYExpc3RlblNlcXVlbmNlYCBpcyBhIG1vbm90b25pYyBzZXF1ZW5jZS4gSXQgaXMgaW5pdGlhbGl6ZWQgd2l0aCBhIG1pbmltdW0gdmFsdWUgdG9cclxuICogZXhjZWVkLiBBbGwgc3Vic2VxdWVudCBjYWxscyB0byBuZXh0IHdpbGwgcmV0dXJuIGluY3JlYXNpbmcgdmFsdWVzLiBJZiBwcm92aWRlZCB3aXRoIGFcclxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXHJcbiAqIHdlbGwgYXMgd3JpdGUgb3V0IHNlcXVlbmNlIG51bWJlcnMgdGhhdCBpdCBwcm9kdWNlcyB2aWEgYG5leHQoKWAuXHJcbiAqL1xyXG52YXIgTGlzdGVuU2VxdWVuY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMaXN0ZW5TZXF1ZW5jZShwcmV2aW91c1ZhbHVlLCBzZXF1ZW5jZU51bWJlclN5bmNlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gcHJldmlvdXNWYWx1ZTtcclxuICAgICAgICBpZiAoc2VxdWVuY2VOdW1iZXJTeW5jZXIpIHtcclxuICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJTeW5jZXIuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2V0UHJldmlvdXNWYWx1ZShzZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVOZXdTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcXVlbmNlTnVtYmVyU3luY2VyLndyaXRlU2VxdWVuY2VOdW1iZXIoc2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIExpc3RlblNlcXVlbmNlLnByb3RvdHlwZS5zZXRQcmV2aW91c1ZhbHVlID0gZnVuY3Rpb24gKGV4dGVybmFsUHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IE1hdGgubWF4KGV4dGVybmFsUHJldmlvdXNWYWx1ZSwgdGhpcy5wcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlO1xyXG4gICAgfTtcclxuICAgIExpc3RlblNlcXVlbmNlLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBuZXh0VmFsdWUgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcclxuICAgICAgICBpZiAodGhpcy53cml0ZU5ld1NlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVOZXdTZXF1ZW5jZU51bWJlcihuZXh0VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV4dFZhbHVlO1xyXG4gICAgfTtcclxuICAgIExpc3RlblNlcXVlbmNlLklOVkFMSUQgPSAtMTtcclxuICAgIHJldHVybiBMaXN0ZW5TZXF1ZW5jZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBET0NVTUVOVF9LRVlfTkFNRSA9ICdfX25hbWVfXyc7XHJcbi8qKlxyXG4gKiBQYXRoIHJlcHJlc2VudHMgYW4gb3JkZXJlZCBzZXF1ZW5jZSBvZiBzdHJpbmcgc2VnbWVudHMuXHJcbiAqL1xyXG52YXIgQmFzZVBhdGggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCYXNlUGF0aChzZWdtZW50cywgb2Zmc2V0LCBsZW5ndGgpIHtcclxuICAgICAgICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob2Zmc2V0ID4gc2VnbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ29mZnNldCAnICsgb2Zmc2V0ICsgJyBvdXQgb2YgcmFuZ2UgJyArIHNlZ21lbnRzLmxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBzZWdtZW50cy5sZW5ndGggLSBvZmZzZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGxlbmd0aCA+IHNlZ21lbnRzLmxlbmd0aCAtIG9mZnNldCkge1xyXG4gICAgICAgICAgICBmYWlsKCdsZW5ndGggJyArIGxlbmd0aCArICcgb3V0IG9mIHJhbmdlICcgKyAoc2VnbWVudHMubGVuZ3RoIC0gb2Zmc2V0KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSBzZWdtZW50cztcclxuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcclxuICAgICAgICB0aGlzLmxlbiA9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlUGF0aC5wcm90b3R5cGUsIFwibGVuZ3RoXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gQmFzZVBhdGguY29tcGFyYXRvcih0aGlzLCBvdGhlcikgPT09IDA7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmNoaWxkID0gZnVuY3Rpb24gKG5hbWVPclBhdGgpIHtcclxuICAgICAgICB2YXIgc2VnbWVudHMgPSB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xyXG4gICAgICAgIGlmIChuYW1lT3JQYXRoIGluc3RhbmNlb2YgQmFzZVBhdGgpIHtcclxuICAgICAgICAgICAgbmFtZU9yUGF0aC5mb3JFYWNoKGZ1bmN0aW9uIChzZWdtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50cy5wdXNoKHNlZ21lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlZ21lbnRzLnB1c2gobmFtZU9yUGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdChzZWdtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFRoZSBpbmRleCBvZiBvbmUgcGFzdCB0aGUgbGFzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiAqL1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmxpbWl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldCArIHRoaXMubGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5wb3BGaXJzdCA9IGZ1bmN0aW9uIChzaXplKSB7XHJcbiAgICAgICAgc2l6ZSA9IHNpemUgPT09IHVuZGVmaW5lZCA/IDEgOiBzaXplO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmxlbmd0aCA+PSBzaXplLCBcIkNhbid0IGNhbGwgcG9wRmlyc3QoKSB3aXRoIGxlc3Mgc2VnbWVudHNcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0ICsgc2l6ZSwgdGhpcy5sZW5ndGggLSBzaXplKTtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUucG9wTGFzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuaXNFbXB0eSgpLCBcIkNhbid0IGNhbGwgcG9wTGFzdCgpIG9uIGVtcHR5IHBhdGhcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDEpO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5maXJzdFNlZ21lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmlzRW1wdHkoKSwgXCJDYW4ndCBjYWxsIGZpcnN0U2VnbWVudCgpIG9uIGVtcHR5IHBhdGhcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXRdO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5sYXN0U2VnbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5sZW5ndGggLSAxKTtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgYXNzZXJ0KGluZGV4IDwgdGhpcy5sZW5ndGgsICdJbmRleCBvdXQgb2YgcmFuZ2UnKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldCArIGluZGV4XTtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGggPT09IDA7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLmlzUHJlZml4T2YgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIubGVuZ3RoIDwgdGhpcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0KGkpICE9PSBvdGhlci5nZXQoaSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBCYXNlUGF0aC5wcm90b3R5cGUuaXNJbW1lZGlhdGVQYXJlbnRPZiA9IGZ1bmN0aW9uIChwb3RlbnRpYWxDaGlsZCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCArIDEgIT09IHBvdGVudGlhbENoaWxkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXQoaSkgIT09IHBvdGVudGlhbENoaWxkLmdldChpKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIEJhc2VQYXRoLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMub2Zmc2V0LCBlbmQgPSB0aGlzLmxpbWl0KCk7IGkgPCBlbmQ7IGkrKykge1xyXG4gICAgICAgICAgICBmbih0aGlzLnNlZ21lbnRzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGgucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZVBhdGguY29tcGFyYXRvciA9IGZ1bmN0aW9uIChwMSwgcDIpIHtcclxuICAgICAgICB2YXIgbGVuID0gTWF0aC5taW4ocDEubGVuZ3RoLCBwMi5sZW5ndGgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGxlZnQgPSBwMS5nZXQoaSk7XHJcbiAgICAgICAgICAgIHZhciByaWdodCA9IHAyLmdldChpKTtcclxuICAgICAgICAgICAgaWYgKGxlZnQgPCByaWdodCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsZWZ0ID4gcmlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwMS5sZW5ndGggPCBwMi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocDEubGVuZ3RoID4gcDIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQmFzZVBhdGg7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIHNsYXNoLXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHJlc291cmNlcyAoZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucylcclxuICogd2l0aGluIEZpcmVzdG9yZS5cclxuICovXHJcbnZhciBSZXNvdXJjZVBhdGggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoUmVzb3VyY2VQYXRoLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUmVzb3VyY2VQYXRoKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFJlc291cmNlUGF0aC5wcm90b3R5cGUuY29uc3RydWN0ID0gZnVuY3Rpb24gKHNlZ21lbnRzLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKHNlZ21lbnRzLCBvZmZzZXQsIGxlbmd0aCk7XHJcbiAgICB9O1xyXG4gICAgUmVzb3VyY2VQYXRoLnByb3RvdHlwZS5jYW5vbmljYWxTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxyXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XHJcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oJy8nKTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZVBhdGgucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHJlc291cmNlIHBhdGggZnJvbSB0aGUgZ2l2ZW4gc2xhc2gtZGVsaW1pdGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcclxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxyXG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxyXG4gICAgICAgIGlmIChwYXRoLmluZGV4T2YoJy8vJykgPj0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcGF0aCAoXCIgKyBwYXRoICsgXCIpLiBQYXRocyBtdXN0IG5vdCBjb250YWluIC8vIGluIHRoZW0uXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSBtYXkgc3RpbGwgaGF2ZSBhbiBlbXB0eSBzZWdtZW50IGF0IHRoZSBiZWdpbm5pbmcgb3IgZW5kIGlmIHRoZXkgaGFkIGFcclxuICAgICAgICAvLyBsZWFkaW5nIG9yIHRyYWlsaW5nIHNsYXNoICh3aGljaCB3ZSBhbGxvdykuXHJcbiAgICAgICAgdmFyIHNlZ21lbnRzID0gcGF0aC5zcGxpdCgnLycpLmZpbHRlcihmdW5jdGlvbiAoc2VnbWVudCkgeyByZXR1cm4gc2VnbWVudC5sZW5ndGggPiAwOyB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChzZWdtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgUmVzb3VyY2VQYXRoLkVNUFRZX1BBVEggPSBuZXcgUmVzb3VyY2VQYXRoKFtdKTtcclxuICAgIHJldHVybiBSZXNvdXJjZVBhdGg7XHJcbn0oQmFzZVBhdGgpKTtcclxudmFyIGlkZW50aWZpZXJSZWdFeHAgPSAvXltfYS16QS1aXVtfYS16QS1aMC05XSokLztcclxuLyoqIEEgZG90LXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHN1Yi1vYmplY3RzIHdpdGhpbiBhIGRvY3VtZW50LiAqL1xyXG52YXIgRmllbGRQYXRoID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEZpZWxkUGF0aCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEZpZWxkUGF0aCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBGaWVsZFBhdGgucHJvdG90eXBlLmNvbnN0cnVjdCA9IGZ1bmN0aW9uIChzZWdtZW50cywgb2Zmc2V0LCBsZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aChzZWdtZW50cywgb2Zmc2V0LCBsZW5ndGgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJpbmcgY291bGQgYmUgdXNlZCBhcyBhIHNlZ21lbnQgaW4gYSBmaWVsZCBwYXRoXHJcbiAgICAgKiB3aXRob3V0IGVzY2FwaW5nLlxyXG4gICAgICovXHJcbiAgICBGaWVsZFBhdGguaXNWYWxpZElkZW50aWZpZXIgPSBmdW5jdGlvbiAoc2VnbWVudCkge1xyXG4gICAgICAgIHJldHVybiBpZGVudGlmaWVyUmVnRXhwLnRlc3Qoc2VnbWVudCk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRQYXRoLnByb3RvdHlwZS5jYW5vbmljYWxTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZSgnXFxcXCcsICdcXFxcXFxcXCcpLnJlcGxhY2UoJ2AnLCAnXFxcXGAnKTtcclxuICAgICAgICAgICAgaWYgKCFGaWVsZFBhdGguaXNWYWxpZElkZW50aWZpZXIoc3RyKSkge1xyXG4gICAgICAgICAgICAgICAgc3RyID0gJ2AnICsgc3RyICsgJ2AnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmpvaW4oJy4nKTtcclxuICAgIH07XHJcbiAgICBGaWVsZFBhdGgucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmllbGQgcmVmZXJlbmNlcyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXHJcbiAgICAgKi9cclxuICAgIEZpZWxkUGF0aC5wcm90b3R5cGUuaXNLZXlGaWVsZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGggPT09IDEgJiYgdGhpcy5nZXQoMCkgPT09IERPQ1VNRU5UX0tFWV9OQU1FO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZpZWxkIGRlc2lnbmF0aW5nIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cclxuICAgICAqL1xyXG4gICAgRmllbGRQYXRoLmtleUZpZWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoKFtET0NVTUVOVF9LRVlfTkFNRV0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgZmllbGQgc3RyaW5nIGZyb20gdGhlIGdpdmVuIHNlcnZlci1mb3JtYXR0ZWQgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIC0gU3BsaXR0aW5nIHRoZSBlbXB0eSBzdHJpbmcgaXMgbm90IGFsbG93ZWQgKGZvciBub3cgYXQgbGVhc3QpLlxyXG4gICAgICogLSBFbXB0eSBzZWdtZW50cyB3aXRoaW4gdGhlIHN0cmluZyAoZS5nLiBpZiB0aGVyZSBhcmUgdHdvIGNvbnNlY3V0aXZlXHJcbiAgICAgKiAgIHNlcGFyYXRvcnMpIGFyZSBub3QgYWxsb3dlZC5cclxuICAgICAqXHJcbiAgICAgKiBUT0RPKGIvMzcyNDQxNTcpOiB3ZSBzaG91bGQgbWFrZSB0aGlzIG1vcmUgc3RyaWN0LiBSaWdodCBub3csIGl0IGFsbG93c1xyXG4gICAgICogbm9uLWlkZW50aWZpZXIgcGF0aCBjb21wb25lbnRzLCBldmVuIGlmIHRoZXkgYXJlbid0IGVzY2FwZWQuXHJcbiAgICAgKi9cclxuICAgIEZpZWxkUGF0aC5mcm9tU2VydmVyRm9ybWF0ID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICB2YXIgc2VnbWVudHMgPSBbXTtcclxuICAgICAgICB2YXIgY3VycmVudCA9ICcnO1xyXG4gICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICB2YXIgYWRkQ3VycmVudFNlZ21lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIHBhdGggKFwiICsgcGF0aCArIFwiKS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIndpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWdtZW50cy5wdXNoKGN1cnJlbnQpO1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gJyc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgaW5CYWNrdGlja3MgPSBmYWxzZTtcclxuICAgICAgICB3aGlsZSAoaSA8IHBhdGgubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gcGF0aFtpXTtcclxuICAgICAgICAgICAgaWYgKGMgPT09ICdcXFxcJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgKyAxID09PSBwYXRoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdQYXRoIGhhcyB0cmFpbGluZyBlc2NhcGUgY2hhcmFjdGVyOiAnICsgcGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IHBhdGhbaSArIDFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEobmV4dCA9PT0gJ1xcXFwnIHx8IG5leHQgPT09ICcuJyB8fCBuZXh0ID09PSAnYCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1BhdGggaGFzIGludmFsaWQgZXNjYXBlIHNlcXVlbmNlOiAnICsgcGF0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ICs9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICBpICs9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gJ2AnKSB7XHJcbiAgICAgICAgICAgICAgICBpbkJhY2t0aWNrcyA9ICFpbkJhY2t0aWNrcztcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjID09PSAnLicgJiYgIWluQmFja3RpY2tzKSB7XHJcbiAgICAgICAgICAgICAgICBhZGRDdXJyZW50U2VnbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudCArPSBjO1xyXG4gICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFkZEN1cnJlbnRTZWdtZW50KCk7XHJcbiAgICAgICAgaWYgKGluQmFja3RpY2tzKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdVbnRlcm1pbmF0ZWQgYCBpbiBwYXRoOiAnICsgcGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRQYXRoKHNlZ21lbnRzKTtcclxuICAgIH07XHJcbiAgICBGaWVsZFBhdGguRU1QVFlfUEFUSCA9IG5ldyBGaWVsZFBhdGgoW10pO1xyXG4gICAgcmV0dXJuIEZpZWxkUGF0aDtcclxufShCYXNlUGF0aCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERvY3VtZW50S2V5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRLZXkocGF0aCkge1xyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICAgICAgYXNzZXJ0KERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkocGF0aCksICdJbnZhbGlkIERvY3VtZW50S2V5IHdpdGggYW4gb2RkIG51bWJlciBvZiBzZWdtZW50czogJyArXHJcbiAgICAgICAgICAgIHBhdGgudG9BcnJheSgpLmpvaW4oJy8nKSk7XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25JZC4gKi9cclxuICAgIERvY3VtZW50S2V5LnByb3RvdHlwZS5oYXNDb2xsZWN0aW9uSWQgPSBmdW5jdGlvbiAoY29sbGVjdGlvbklkKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBhdGgubGVuZ3RoID49IDIgJiZcclxuICAgICAgICAgICAgdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMikgPT09IGNvbGxlY3Rpb25JZCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRLZXkucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyICE9PSBudWxsICYmIFJlc291cmNlUGF0aC5jb21wYXJhdG9yKHRoaXMucGF0aCwgb3RoZXIucGF0aCkgPT09IDApO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50S2V5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnRvU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRLZXkuY29tcGFyYXRvciA9IGZ1bmN0aW9uIChrMSwgazIpIHtcclxuICAgICAgICByZXR1cm4gUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IoazEucGF0aCwgazIucGF0aCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleSA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGgubGVuZ3RoICUgMiA9PT0gMDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgZG9jdW1lbnQga2V5IHdpdGggdGhlIGdpdmVuIHNlZ21lbnRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSBzZWdtZW50cyBvZiB0aGUgcGF0aCB0byB0aGUgZG9jdW1lbnRcclxuICAgICAqIEByZXR1cm4gQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcclxuICAgICAqL1xyXG4gICAgRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzID0gZnVuY3Rpb24gKHNlZ21lbnRzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShuZXcgUmVzb3VyY2VQYXRoKHNlZ21lbnRzLnNsaWNlKCkpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgZG9jdW1lbnQga2V5IHVzaW5nICcvJyB0byBzcGxpdCB0aGUgc3RyaW5nIGludG9cclxuICAgICAqIHNlZ21lbnRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXRoIFRoZSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCBzdHJpbmcgdG8gdGhlIGRvY3VtZW50XHJcbiAgICAgKiBAcmV0dXJuIEEgbmV3IGluc3RhbmNlIG9mIERvY3VtZW50S2V5XHJcbiAgICAgKi9cclxuICAgIERvY3VtZW50S2V5LmZyb21QYXRoU3RyaW5nID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHBhdGgpKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEtleS5FTVBUWSA9IG5ldyBEb2N1bWVudEtleShuZXcgUmVzb3VyY2VQYXRoKFtdKSk7XHJcbiAgICByZXR1cm4gRG9jdW1lbnRLZXk7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRGVmZXJyZWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEZWZlcnJlZCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIF90aGlzLnJlamVjdCA9IHJlamVjdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBEZWZlcnJlZDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBXZWxsa25vd24gXCJ0aW1lclwiIElEcyB1c2VkIHdoZW4gc2NoZWR1bGluZyBkZWxheWVkIG9wZXJhdGlvbnMgb24gdGhlXHJcbiAqIEFzeW5jUXVldWUuIFRoZXNlIElEcyBjYW4gdGhlbiBiZSB1c2VkIGZyb20gdGVzdHMgdG8gY2hlY2sgZm9yIHRoZSBwcmVzZW5jZVxyXG4gKiBvZiBvcGVyYXRpb25zIG9yIHRvIHJ1biB0aGVtIGVhcmx5LlxyXG4gKlxyXG4gKiBUaGUgc3RyaW5nIHZhbHVlcyBhcmUgdXNlZCB3aGVuIGVuY29kaW5nIHRoZXNlIHRpbWVyIElEcyBpbiBKU09OIHNwZWMgdGVzdHMuXHJcbiAqL1xyXG52YXIgVGltZXJJZDtcclxuKGZ1bmN0aW9uIChUaW1lcklkKSB7XHJcbiAgICAvKiogQWxsIGNhbiBiZSB1c2VkIHdpdGggcnVuRGVsYXllZE9wZXJhdGlvbnNFYXJseSgpIHRvIHJ1biBhbGwgdGltZXJzLiAqL1xyXG4gICAgVGltZXJJZFtcIkFsbFwiXSA9IFwiYWxsXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmb2xsb3dpbmcgNCB0aW1lcnMgYXJlIHVzZWQgaW4gcGVyc2lzdGVudF9zdHJlYW0udHMgZm9yIHRoZSBsaXN0ZW4gYW5kXHJcbiAgICAgKiB3cml0ZSBzdHJlYW1zLiBUaGUgXCJJZGxlXCIgdGltZXIgaXMgdXNlZCB0byBjbG9zZSB0aGUgc3RyZWFtIGR1ZSB0b1xyXG4gICAgICogaW5hY3Rpdml0eS4gVGhlIFwiQ29ubmVjdGlvbkJhY2tvZmZcIiB0aW1lciBpcyB1c2VkIHRvIHJlc3RhcnQgYSBzdHJlYW0gb25jZVxyXG4gICAgICogdGhlIGFwcHJvcHJpYXRlIGJhY2tvZmYgZGVsYXkgaGFzIGVsYXBzZWQuXHJcbiAgICAgKi9cclxuICAgIFRpbWVySWRbXCJMaXN0ZW5TdHJlYW1JZGxlXCJdID0gXCJsaXN0ZW5fc3RyZWFtX2lkbGVcIjtcclxuICAgIFRpbWVySWRbXCJMaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZlwiXSA9IFwibGlzdGVuX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIjtcclxuICAgIFRpbWVySWRbXCJXcml0ZVN0cmVhbUlkbGVcIl0gPSBcIndyaXRlX3N0cmVhbV9pZGxlXCI7XHJcbiAgICBUaW1lcklkW1wiV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZlwiXSA9IFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIHRpbWVyIHVzZWQgaW4gb25saW5lX3N0YXRlX3RyYWNrZXIudHMgdG8gdHJhbnNpdGlvbiBmcm9tXHJcbiAgICAgKiBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9mZmxpbmUgYWZ0ZXIgYSBzZXQgdGltZW91dCwgcmF0aGVyIHRoYW4gd2FpdGluZ1xyXG4gICAgICogaW5kZWZpbml0ZWx5IGZvciBzdWNjZXNzIG9yIGZhaWx1cmUuXHJcbiAgICAgKi9cclxuICAgIFRpbWVySWRbXCJPbmxpbmVTdGF0ZVRpbWVvdXRcIl0gPSBcIm9ubGluZV9zdGF0ZV90aW1lb3V0XCI7XHJcbiAgICAvKipcclxuICAgICAqIEEgdGltZXIgdXNlZCB0byB1cGRhdGUgdGhlIGNsaWVudCBtZXRhZGF0YSBpbiBJbmRleGVkRGIsIHdoaWNoIGlzIHVzZWRcclxuICAgICAqIHRvIGRldGVybWluZSB0aGUgcHJpbWFyeSBsZWFzZWhvbGRlci5cclxuICAgICAqL1xyXG4gICAgVGltZXJJZFtcIkNsaWVudE1ldGFkYXRhUmVmcmVzaFwiXSA9IFwiY2xpZW50X21ldGFkYXRhX3JlZnJlc2hcIjtcclxuICAgIC8qKiBBIHRpbWVyIHVzZWQgdG8gcGVyaW9kaWNhbGx5IGF0dGVtcHQgTFJVIEdhcmJhZ2UgY29sbGVjdGlvbiAqL1xyXG4gICAgVGltZXJJZFtcIkxydUdhcmJhZ2VDb2xsZWN0aW9uXCJdID0gXCJscnVfZ2FyYmFnZV9jb2xsZWN0aW9uXCI7XHJcbiAgICAvKipcclxuICAgICAqIEEgdGltZXIgdXNlZCB0byByZXRyeSB0cmFuc2FjdGlvbnMuIFNpbmNlIHRoZXJlIGNhbiBiZSBtdWx0aXBsZSBjb25jdXJyZW50XHJcbiAgICAgKiB0cmFuc2FjdGlvbnMsIG11bHRpcGxlIG9mIHRoZXNlIG1heSBiZSBpbiB0aGUgcXVldWUgYXQgYSBnaXZlbiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBUaW1lcklkW1wiUmV0cnlUcmFuc2FjdGlvblwiXSA9IFwicmV0cnlfdHJhbnNhY3Rpb25cIjtcclxufSkoVGltZXJJZCB8fCAoVGltZXJJZCA9IHt9KSk7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGFuIG9wZXJhdGlvbiBzY2hlZHVsZWQgdG8gYmUgcnVuIGluIHRoZSBmdXR1cmUgb24gYW4gQXN5bmNRdWV1ZS5cclxuICpcclxuICogSXQgaXMgY3JlYXRlZCB2aWEgRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSgpLlxyXG4gKlxyXG4gKiBTdXBwb3J0cyBjYW5jZWxsYXRpb24gKHZpYSBjYW5jZWwoKSkgYW5kIGVhcmx5IGV4ZWN1dGlvbiAodmlhIHNraXBEZWxheSgpKS5cclxuICovXHJcbnZhciBEZWxheWVkT3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGVsYXllZE9wZXJhdGlvbihhc3luY1F1ZXVlLCB0aW1lcklkLCB0YXJnZXRUaW1lTXMsIG9wLCByZW1vdmFsQ2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBhc3luY1F1ZXVlO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHRpbWVySWQ7XHJcbiAgICAgICAgdGhpcy50YXJnZXRUaW1lTXMgPSB0YXJnZXRUaW1lTXM7XHJcbiAgICAgICAgdGhpcy5vcCA9IG9wO1xyXG4gICAgICAgIHRoaXMucmVtb3ZhbENhbGxiYWNrID0gcmVtb3ZhbENhbGxiYWNrO1xyXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICB0aGlzLnRoZW4gPSB0aGlzLmRlZmVycmVkLnByb21pc2UudGhlbi5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSk7XHJcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS5jYXRjaC5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSk7XHJcbiAgICAgICAgLy8gSXQncyBub3JtYWwgZm9yIHRoZSBkZWZlcnJlZCBwcm9taXNlIHRvIGJlIGNhbmNlbGVkIChkdWUgdG8gY2FuY2VsbGF0aW9uKVxyXG4gICAgICAgIC8vIGFuZCBzbyB3ZSBhdHRhY2ggYSBkdW1teSBjYXRjaCBjYWxsYmFjayB0byBhdm9pZFxyXG4gICAgICAgIC8vICdVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZycgbG9nIHNwYW0uXHJcbiAgICAgICAgdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBEZWxheWVkT3BlcmF0aW9uIHRoYXQgaGFzIGJlZW4gc2NoZWR1bGVkIHRvIGJlXHJcbiAgICAgKiBleGVjdXRlZCBvbiB0aGUgcHJvdmlkZWQgYXN5bmNRdWV1ZSBhZnRlciB0aGUgcHJvdmlkZWQgZGVsYXlNcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYXN5bmNRdWV1ZSBUaGUgcXVldWUgdG8gc2NoZWR1bGUgdGhlIG9wZXJhdGlvbiBvbi5cclxuICAgICAqIEBwYXJhbSBpZCBBIFRpbWVyIElEIGlkZW50aWZ5aW5nIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGlzIGlzLlxyXG4gICAgICogQHBhcmFtIGRlbGF5TXMgVGhlIGRlbGF5IChtcykgYmVmb3JlIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIHNjaGVkdWxlZC5cclxuICAgICAqIEBwYXJhbSBvcCBUaGUgb3BlcmF0aW9uIHRvIHJ1bi5cclxuICAgICAqIEBwYXJhbSByZW1vdmFsQ2FsbGJhY2sgQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBvbmNlIHRoZVxyXG4gICAgICogICBvcGVyYXRpb24gaXMgZXhlY3V0ZWQgb3IgY2FuY2VsZWQsIG5vdGlmeWluZyB0aGUgQXN5bmNRdWV1ZSB0byByZW1vdmUgaXRcclxuICAgICAqICAgZnJvbSBpdHMgZGVsYXllZE9wZXJhdGlvbnMgbGlzdC5cclxuICAgICAqICAgUE9SVElORyBOT1RFOiBUaGlzIGV4aXN0cyB0byBwcmV2ZW50IG1ha2luZyByZW1vdmVEZWxheWVkT3BlcmF0aW9uKCkgYW5kXHJcbiAgICAgKiAgIHRoZSBEZWxheWVkT3BlcmF0aW9uIGNsYXNzIHB1YmxpYy5cclxuICAgICAqL1xyXG4gICAgRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSA9IGZ1bmN0aW9uIChhc3luY1F1ZXVlLCB0aW1lcklkLCBkZWxheU1zLCBvcCwgcmVtb3ZhbENhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldFRpbWUgPSBEYXRlLm5vdygpICsgZGVsYXlNcztcclxuICAgICAgICB2YXIgZGVsYXllZE9wID0gbmV3IERlbGF5ZWRPcGVyYXRpb24oYXN5bmNRdWV1ZSwgdGltZXJJZCwgdGFyZ2V0VGltZSwgb3AsIHJlbW92YWxDYWxsYmFjayk7XHJcbiAgICAgICAgZGVsYXllZE9wLnN0YXJ0KGRlbGF5TXMpO1xyXG4gICAgICAgIHJldHVybiBkZWxheWVkT3A7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgdGhlIHRpbWVyLiBUaGlzIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciBjb25zdHJ1Y3Rpb24gYnlcclxuICAgICAqIGNyZWF0ZUFuZFNjaGVkdWxlKCkuXHJcbiAgICAgKi9cclxuICAgIERlbGF5ZWRPcGVyYXRpb24ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKGRlbGF5TXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpOyB9LCBkZWxheU1zKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFF1ZXVlcyB0aGUgb3BlcmF0aW9uIHRvIHJ1biBpbW1lZGlhdGVseSAoaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBydW4gb3JcclxuICAgICAqIGNhbmNlbGVkKS5cclxuICAgICAqL1xyXG4gICAgRGVsYXllZE9wZXJhdGlvbi5wcm90b3R5cGUuc2tpcERlbGF5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2FuY2VscyB0aGUgb3BlcmF0aW9uIGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQgb3IgY2FuY2VsZWQuIFRoZVxyXG4gICAgICogcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxyXG4gICAgICpcclxuICAgICAqIEFzIGxvbmcgYXMgdGhlIG9wZXJhdGlvbiBoYXMgbm90IHlldCBiZWVuIHJ1biwgY2FsbGluZyBjYW5jZWwoKSBwcm92aWRlcyBhXHJcbiAgICAgKiBndWFyYW50ZWUgdGhhdCB0aGUgb3BlcmF0aW9uIHdpbGwgbm90IGJlIHJ1bi5cclxuICAgICAqL1xyXG4gICAgRGVsYXllZE9wZXJhdGlvbi5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySGFuZGxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkNBTkNFTExFRCwgJ09wZXJhdGlvbiBjYW5jZWxsZWQnICsgKHJlYXNvbiA/ICc6ICcgKyByZWFzb24gOiAnJykpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGVsYXllZE9wZXJhdGlvbi5wcm90b3R5cGUuaGFuZGxlRGVsYXlFbGFwc2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMudGltZXJIYW5kbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNsZWFyVGltZW91dCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9wKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRlZmVycmVkLnJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGVsYXllZE9wZXJhdGlvbi5wcm90b3R5cGUuY2xlYXJUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySGFuZGxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpO1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lckhhbmRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVsYXllZE9wZXJhdGlvbjtcclxufSgpKTtcclxudmFyIEFzeW5jUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBc3luY1F1ZXVlKCkge1xyXG4gICAgICAgIC8vIFRoZSBsYXN0IHByb21pc2UgaW4gdGhlIHF1ZXVlLlxyXG4gICAgICAgIHRoaXMudGFpbCA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgQXN5bmNRdWV1ZSBiZWluZyBzaHV0IGRvd24/IE9uY2UgaXQgaXMgc2V0IHRvIHRydWUsIGl0IHdpbGwgbm90XHJcbiAgICAgICAgLy8gYmUgY2hhbmdlZCBhZ2Fpbi5cclxuICAgICAgICB0aGlzLl9pc1NodXR0aW5nRG93biA9IGZhbHNlO1xyXG4gICAgICAgIC8vIE9wZXJhdGlvbnMgc2NoZWR1bGVkIHRvIGJlIHF1ZXVlZCBpbiB0aGUgZnV0dXJlLiBPcGVyYXRpb25zIGFyZVxyXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBhZnRlciB0aGV5IGFyZSBydW4gb3IgY2FuY2VsZWQuXHJcbiAgICAgICAgdGhpcy5kZWxheWVkT3BlcmF0aW9ucyA9IFtdO1xyXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgICAgICB0aGlzLmZhaWx1cmUgPSBudWxsO1xyXG4gICAgICAgIC8vIEZsYWcgc2V0IHdoaWxlIHRoZXJlJ3MgYW4gb3V0c3RhbmRpbmcgQXN5bmNRdWV1ZSBvcGVyYXRpb24sIHVzZWQgZm9yXHJcbiAgICAgICAgLy8gYXNzZXJ0aW9uIHNhbml0eS1jaGVja3MuXHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgICAgICAgLy8gTGlzdCBvZiBUaW1lcklkcyB0byBmYXN0LWZvcndhcmQgZGVsYXlzIGZvci5cclxuICAgICAgICB0aGlzLnRpbWVySWRzVG9Ta2lwID0gW107XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXN5bmNRdWV1ZS5wcm90b3R5cGUsIFwiaXNTaHV0dGluZ0Rvd25cIiwge1xyXG4gICAgICAgIC8vIElzIHRoaXMgQXN5bmNRdWV1ZSBiZWluZyBzaHV0IGRvd24/IElmIHRydWUsIHRoaXMgaW5zdGFuY2Ugd2lsbCBub3QgZW5xdWV1ZVxyXG4gICAgICAgIC8vIGFueSBuZXcgb3BlcmF0aW9ucywgUHJvbWlzZXMgZnJvbSBlbnF1ZXVlIHJlcXVlc3RzIHdpbGwgbm90IHJlc29sdmUuXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc1NodXR0aW5nRG93bjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gY29tcGxldGUgKGkuZS5cclxuICAgICAqIHdlIGlnbm9yZSB0aGUgUHJvbWlzZSByZXN1bHQpLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlQW5kRm9yZ2V0ID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMuZW5xdWV1ZShvcCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdhcmRsZXNzIGlmIHRoZSBxdWV1ZSBoYXMgaW5pdGlhbGl6ZWQgc2h1dGRvd24sIGFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZVxyXG4gICAgICogcXVldWUgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAoaS5lLiB3ZSBpZ25vcmUgdGhlIFByb21pc2UgcmVzdWx0KS5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5BZnRlclNodXRkb3duID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RGYWlsZWQoKTtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy5lbnF1ZXVlSW50ZXJuYWwob3ApO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVnYXJkbGVzcyBpZiB0aGUgcXVldWUgaGFzIGluaXRpYWxpemVkIHNodXRkb3duLCBhZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGVcclxuICAgICAqIHF1ZXVlLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlRXZlbkFmdGVyU2h1dGRvd24gPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdEZhaWxlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVucXVldWVJbnRlcm5hbChvcCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUgYW5kIGluaXRpYWxpemUgdGhlIHNodXQgZG93biBvZiB0aGlzIHF1ZXVlLlxyXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdoZW4gdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlIG5ld1xyXG4gICAgICogb3BlcmF0aW9uIGlzICh3aXRoIGl0cyB2YWx1ZSkuXHJcbiAgICAgKiBPbmNlIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCwgdGhlIG9ubHkgcG9zc2libGUgd2F5IHRvIHJlcXVlc3QgcnVubmluZyBhbiBvcGVyYXRpb25cclxuICAgICAqIGlzIHRocm91Z2ggYGVucXVldWVBbmRGb3JnZXRFdmVuQWZ0ZXJTaHV0ZG93bmAuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmVucXVldWVBbmRJbml0aWF0ZVNodXRkb3duID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZlcmlmeU5vdEZhaWxlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLl9pc1NodXR0aW5nRG93bikgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzU2h1dHRpbmdEb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbnF1ZXVlRXZlbkFmdGVyU2h1dGRvd24ob3ApXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZS4gUmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkXHJcbiAgICAgKiB3aGVuIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZSBuZXcgb3BlcmF0aW9uIGlzICh3aXRoIGl0cyB2YWx1ZSkuXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLmVucXVldWUgPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdEZhaWxlZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1NodXR0aW5nRG93bikge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIG5ldmVyIHJlc29sdmVzLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVucXVldWVJbnRlcm5hbChvcCk7XHJcbiAgICB9O1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZUludGVybmFsID0gZnVuY3Rpb24gKG9wKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgbmV3VGFpbCA9IHRoaXMudGFpbC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMub3BlcmF0aW9uSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBvcCgpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yJDEpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZhaWx1cmUgPSBlcnJvciQxO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub3BlcmF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSBlcnJvciQxLnN0YWNrIHx8IGVycm9yJDEubWVzc2FnZSB8fCAnJztcclxuICAgICAgICAgICAgICAgIGVycm9yKCdJTlRFUk5BTCBVTkhBTkRMRUQgRVJST1I6ICcsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gRXNjYXBlIHRoZSBwcm9taXNlIGNoYWluIGFuZCB0aHJvdyB0aGUgZXJyb3IgZ2xvYmFsbHkgc28gdGhhdFxyXG4gICAgICAgICAgICAgICAgLy8gZS5nLiBhbnkgZ2xvYmFsIGNyYXNoIHJlcG9ydGluZyBsaWJyYXJ5IGRldGVjdHMgYW5kIHJlcG9ydHMgaXQuXHJcbiAgICAgICAgICAgICAgICAvLyAoYnV0IG5vdCBmb3Igc2ltdWxhdGVkIGVycm9ycyBpbiBvdXIgdGVzdHMgc2luY2UgdGhpcyBicmVha3MgbW9jaGEpXHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5pbmRleE9mKCdGaXJlc3RvcmUgVGVzdCBTaW11bGF0ZWQgRXJyb3InKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3IkMTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZSBlcnJvciBzbyB0aGF0IHRoaXMudGFpbCBiZWNvbWVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBhbmRcclxuICAgICAgICAgICAgICAgIC8vIGFsbCBmdXJ0aGVyIGF0dGVtcHRzIHRvIGNoYWluICh2aWEgLnRoZW4pIHdpbGwganVzdCBzaG9ydC1jaXJjdWl0XHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgcmV0dXJuIHRoZSByZWplY3RlZCBQcm9taXNlLlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3IkMTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9wZXJhdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudGFpbCA9IG5ld1RhaWw7XHJcbiAgICAgICAgcmV0dXJuIG5ld1RhaWw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTY2hlZHVsZXMgYW4gb3BlcmF0aW9uIHRvIGJlIHF1ZXVlZCBvbiB0aGUgQXN5bmNRdWV1ZSBvbmNlIHRoZSBzcGVjaWZpZWRcclxuICAgICAqIGBkZWxheU1zYCBoYXMgZWxhcHNlZC4gVGhlIHJldHVybmVkIENhbmNlbGFibGVQcm9taXNlIGNhbiBiZSB1c2VkIHRvIGNhbmNlbFxyXG4gICAgICogdGhlIG9wZXJhdGlvbiBwcmlvciB0byBpdHMgcnVubmluZy5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZUFmdGVyRGVsYXkgPSBmdW5jdGlvbiAodGltZXJJZCwgZGVsYXlNcywgb3ApIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90RmFpbGVkKCk7XHJcbiAgICAgICAgYXNzZXJ0KGRlbGF5TXMgPj0gMCwgXCJBdHRlbXB0ZWQgdG8gc2NoZWR1bGUgYW4gb3BlcmF0aW9uIHdpdGggYSBuZWdhdGl2ZSBkZWxheSBvZiBcIiArIGRlbGF5TXMpO1xyXG4gICAgICAgIC8vIEZhc3QtZm9yd2FyZCBkZWxheXMgZm9yIHRpbWVySWRzIHRoYXQgaGF2ZSBiZWVuIG92ZXJyaWRlbi5cclxuICAgICAgICBpZiAodGhpcy50aW1lcklkc1RvU2tpcC5pbmRleE9mKHRpbWVySWQpID4gLTEpIHtcclxuICAgICAgICAgICAgZGVsYXlNcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBkZWxheWVkT3AgPSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKHRoaXMsIHRpbWVySWQsIGRlbGF5TXMsIG9wLCBmdW5jdGlvbiAocmVtb3ZlZE9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmVEZWxheWVkT3BlcmF0aW9uKHJlbW92ZWRPcCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5kZWxheWVkT3BlcmF0aW9ucy5wdXNoKGRlbGF5ZWRPcCk7XHJcbiAgICAgICAgcmV0dXJuIGRlbGF5ZWRPcDtcclxuICAgIH07XHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS52ZXJpZnlOb3RGYWlsZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmFpbHVyZSkge1xyXG4gICAgICAgICAgICBmYWlsKCdBc3luY1F1ZXVlIGlzIGFscmVhZHkgZmFpbGVkOiAnICtcclxuICAgICAgICAgICAgICAgICh0aGlzLmZhaWx1cmUuc3RhY2sgfHwgdGhpcy5mYWlsdXJlLm1lc3NhZ2UpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBWZXJpZmllcyB0aGVyZSdzIGFuIG9wZXJhdGlvbiBjdXJyZW50bHkgaW4tcHJvZ3Jlc3Mgb24gdGhlIEFzeW5jUXVldWUuXHJcbiAgICAgKiBVbmZvcnR1bmF0ZWx5IHdlIGNhbid0IHZlcmlmeSB0aGF0IHRoZSBydW5uaW5nIGNvZGUgaXMgaW4gdGhlIHByb21pc2UgY2hhaW5cclxuICAgICAqIG9mIHRoYXQgb3BlcmF0aW9uLCBzbyB0aGlzIGlzbid0IGEgZm9vbHByb29mIGNoZWNrLCBidXQgaXQgc2hvdWxkIGJlIGVub3VnaFxyXG4gICAgICogdG8gY2F0Y2ggc29tZSBidWdzLlxyXG4gICAgICovXHJcbiAgICBBc3luY1F1ZXVlLnByb3RvdHlwZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLm9wZXJhdGlvbkluUHJvZ3Jlc3MsICd2ZXJpZnlPcEluUHJvZ3Jlc3MoKSBjYWxsZWQgd2hlbiBubyBvcCBpbiBwcm9ncmVzcyBvbiB0aGlzIHF1ZXVlLicpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBxdWV1ZWQgdGFza3MgYXJlIGZpbmlzaGVkIGV4ZWN1dGluZy4gRGVsYXllZFxyXG4gICAgICogb3BlcmF0aW9ucyBhcmUgbm90IHJ1bi5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuZHJhaW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gSXQgc2hvdWxkIHN0aWxsIGJlIHBvc3NpYmxlIHRvIGRyYWluIHRoZSBxdWV1ZSBhZnRlciBpdCBpcyBzaHV0dGluZyBkb3duLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmVucXVldWVFdmVuQWZ0ZXJTaHV0ZG93bihmdW5jdGlvbiAoKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgVGVzdHM6IERldGVybWluZSBpZiBhIGRlbGF5ZWQgb3BlcmF0aW9uIHdpdGggYSBwYXJ0aWN1bGFyIFRpbWVySWRcclxuICAgICAqIGV4aXN0cy5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuY29udGFpbnNEZWxheWVkT3BlcmF0aW9uID0gZnVuY3Rpb24gKHRpbWVySWQpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5kZWxheWVkT3BlcmF0aW9uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG9wID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAob3AudGltZXJJZCA9PT0gdGltZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRm9yIFRlc3RzOiBSdW5zIHNvbWUgb3IgYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucyBlYXJseS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbGFzdFRpbWVySWQgRGVsYXllZCBvcGVyYXRpb25zIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhpcyBUaW1lcklkIHdpbGxcclxuICAgICAqICBiZSBkcmFpbmVkLiBUaHJvd3MgaWYgbm8gc3VjaCBvcGVyYXRpb24gZXhpc3RzLiBQYXNzIFRpbWVySWQuQWxsIHRvIHJ1blxyXG4gICAgICogIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMuXHJcbiAgICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFsbCBvcGVyYXRpb25zIGhhdmUgYmVlbiBydW4uXHJcbiAgICAgKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLnJ1bkRlbGF5ZWRPcGVyYXRpb25zRWFybHkgPSBmdW5jdGlvbiAobGFzdFRpbWVySWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIE5vdGUgdGhhdCBkcmFpbmluZyBtYXkgZ2VuZXJhdGUgbW9yZSBkZWxheWVkIG9wcywgc28gd2UgZG8gdGhhdCBmaXJzdC5cclxuICAgICAgICByZXR1cm4gdGhpcy5kcmFpbigpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhc3NlcnQobGFzdFRpbWVySWQgPT09IFRpbWVySWQuQWxsIHx8XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb250YWluc0RlbGF5ZWRPcGVyYXRpb24obGFzdFRpbWVySWQpLCBcIkF0dGVtcHRlZCB0byBkcmFpbiB0byBtaXNzaW5nIG9wZXJhdGlvbiBcIiArIGxhc3RUaW1lcklkKTtcclxuICAgICAgICAgICAgLy8gUnVuIG9wcyBpbiB0aGUgc2FtZSBvcmRlciB0aGV5J2QgcnVuIGlmIHRoZXkgcmFuIG5hdHVyYWxseS5cclxuICAgICAgICAgICAgX3RoaXMuZGVsYXllZE9wZXJhdGlvbnMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS50YXJnZXRUaW1lTXMgLSBiLnRhcmdldFRpbWVNczsgfSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy5kZWxheWVkT3BlcmF0aW9uczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcCA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIG9wLnNraXBEZWxheSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RUaW1lcklkICE9PSBUaW1lcklkLkFsbCAmJiBvcC50aW1lcklkID09PSBsYXN0VGltZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5kcmFpbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRm9yIFRlc3RzOiBTa2lwIGFsbCBzdWJzZXF1ZW50IGRlbGF5cyBmb3IgYSB0aW1lciBpZC5cclxuICAgICAqL1xyXG4gICAgQXN5bmNRdWV1ZS5wcm90b3R5cGUuc2tpcERlbGF5c0ZvclRpbWVySWQgPSBmdW5jdGlvbiAodGltZXJJZCkge1xyXG4gICAgICAgIHRoaXMudGltZXJJZHNUb1NraXAucHVzaCh0aW1lcklkKTtcclxuICAgIH07XHJcbiAgICAvKiogQ2FsbGVkIG9uY2UgYSBEZWxheWVkT3BlcmF0aW9uIGlzIHJ1biBvciBjYW5jZWxlZC4gKi9cclxuICAgIEFzeW5jUXVldWUucHJvdG90eXBlLnJlbW92ZURlbGF5ZWRPcGVyYXRpb24gPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICAvLyBOT1RFOiBpbmRleE9mIC8gc2xpY2UgYXJlIE8obiksIGJ1dCBkZWxheWVkT3BlcmF0aW9ucyBpcyBleHBlY3RlZCB0byBiZSBzbWFsbC5cclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmRlbGF5ZWRPcGVyYXRpb25zLmluZGV4T2Yob3ApO1xyXG4gICAgICAgIGFzc2VydChpbmRleCA+PSAwLCAnRGVsYXllZCBvcGVyYXRpb24gbm90IGZvdW5kLicpO1xyXG4gICAgICAgIHRoaXMuZGVsYXllZE9wZXJhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXN5bmNRdWV1ZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBlc2NhcGVDaGFyID0gJ1xcdTAwMDEnO1xyXG52YXIgZW5jb2RlZFNlcGFyYXRvckNoYXIgPSAnXFx1MDAwMSc7XHJcbnZhciBlbmNvZGVkTnVsID0gJ1xcdTAwMTAnO1xyXG52YXIgZW5jb2RlZEVzY2FwZSA9ICdcXHUwMDExJztcclxuLyoqXHJcbiAqIEVuY29kZXMgYSByZXNvdXJjZSBwYXRoIGludG8gYSBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybS5cclxuICovXHJcbmZ1bmN0aW9uIGVuY29kZShwYXRoKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gJyc7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gZW5jb2RlU2VwYXJhdG9yKHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc3VsdCA9IGVuY29kZVNlZ21lbnQocGF0aC5nZXQoaSksIHJlc3VsdCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW5jb2RlU2VwYXJhdG9yKHJlc3VsdCk7XHJcbn1cclxuLyoqIEVuY29kZXMgYSBzaW5nbGUgc2VnbWVudCBvZiBhIHJlc291cmNlIHBhdGggaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovXHJcbmZ1bmN0aW9uIGVuY29kZVNlZ21lbnQoc2VnbWVudCwgcmVzdWx0QnVmKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gcmVzdWx0QnVmO1xyXG4gICAgdmFyIGxlbmd0aCA9IHNlZ21lbnQubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBjID0gc2VnbWVudC5jaGFyQXQoaSk7XHJcbiAgICAgICAgc3dpdGNoIChjKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ1xcMCc6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gZXNjYXBlQ2hhciArIGVuY29kZWROdWw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBlc2NhcGVDaGFyOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGVzY2FwZUNoYXIgKyBlbmNvZGVkRXNjYXBlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gYztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbi8qKiBFbmNvZGVzIGEgcGF0aCBzZXBhcmF0b3IgaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovXHJcbmZ1bmN0aW9uIGVuY29kZVNlcGFyYXRvcihyZXN1bHQpIHtcclxuICAgIHJldHVybiByZXN1bHQgKyBlc2NhcGVDaGFyICsgZW5jb2RlZFNlcGFyYXRvckNoYXI7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXHJcbiAqIGEgUmVzb3VyY2VQYXRoIGluc3RhbmNlLiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHN1aXRhYmxlIGZvciB1c2Ugd2l0aFxyXG4gKiBkZWNvZGluZyByZXNvdXJjZSBuYW1lcyBmcm9tIHRoZSBzZXJ2ZXI7IHRob3NlIGFyZSBPbmUgUGxhdGZvcm0gZm9ybWF0XHJcbiAqIHN0cmluZ3MuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWNvZGUocGF0aCkge1xyXG4gICAgLy8gRXZlbnQgdGhlIGVtcHR5IHBhdGggbXVzdCBlbmNvZGUgYXMgYSBwYXRoIG9mIGF0IGxlYXN0IGxlbmd0aCAyLiBBIHBhdGhcclxuICAgIC8vIHdpdGggZXhhY3RseSAyIG11c3QgYmUgdGhlIGVtcHR5IHBhdGguXHJcbiAgICB2YXIgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XHJcbiAgICBhc3NlcnQobGVuZ3RoID49IDIsICdJbnZhbGlkIHBhdGggJyArIHBhdGgpO1xyXG4gICAgaWYgKGxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgIGFzc2VydChwYXRoLmNoYXJBdCgwKSA9PT0gZXNjYXBlQ2hhciAmJiBwYXRoLmNoYXJBdCgxKSA9PT0gZW5jb2RlZFNlcGFyYXRvckNoYXIsICdOb24tZW1wdHkgcGF0aCAnICsgcGF0aCArICcgaGFkIGxlbmd0aCAyJyk7XHJcbiAgICAgICAgcmV0dXJuIFJlc291cmNlUGF0aC5FTVBUWV9QQVRIO1xyXG4gICAgfVxyXG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlcnMgY2Fubm90IGV4aXN0IHBhc3QgdGhlIHNlY29uZC10by1sYXN0IHBvc2l0aW9uIGluIHRoZVxyXG4gICAgLy8gc291cmNlIHZhbHVlLlxyXG4gICAgdmFyIGxhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXggPSBsZW5ndGggLSAyO1xyXG4gICAgdmFyIHNlZ21lbnRzID0gW107XHJcbiAgICB2YXIgc2VnbWVudEJ1aWxkZXIgPSAnJztcclxuICAgIGZvciAodmFyIHN0YXJ0ID0gMDsgc3RhcnQgPCBsZW5ndGg7KSB7XHJcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cclxuICAgICAgICAvLyB0aGVyZSBtdXN0IGJlIGFuIGVuZCB0byB0aGlzIHNlZ21lbnQuXHJcbiAgICAgICAgdmFyIGVuZCA9IHBhdGguaW5kZXhPZihlc2NhcGVDaGFyLCBzdGFydCk7XHJcbiAgICAgICAgaWYgKGVuZCA8IDAgfHwgZW5kID4gbGFzdFJlYXNvbmFibGVFc2NhcGVJbmRleCkge1xyXG4gICAgICAgICAgICBmYWlsKCdJbnZhbGlkIGVuY29kZWQgcmVzb3VyY2UgcGF0aDogXCInICsgcGF0aCArICdcIicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbmV4dCA9IHBhdGguY2hhckF0KGVuZCArIDEpO1xyXG4gICAgICAgIHN3aXRjaCAobmV4dCkge1xyXG4gICAgICAgICAgICBjYXNlIGVuY29kZWRTZXBhcmF0b3JDaGFyOlxyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQaWVjZSA9IHBhdGguc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlZ21lbnQgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VnbWVudEJ1aWxkZXIubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQXZvaWQgY29weWluZyBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGEgc2VnbWVudCB0aGF0IGV4Y2x1ZGVzIFxcMFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBcXDAwMVxyXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnQgPSBjdXJyZW50UGllY2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50QnVpbGRlciArPSBjdXJyZW50UGllY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudCA9IHNlZ21lbnRCdWlsZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRCdWlsZGVyID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50cy5wdXNoKHNlZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZW5jb2RlZE51bDpcclxuICAgICAgICAgICAgICAgIHNlZ21lbnRCdWlsZGVyICs9IHBhdGguc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xyXG4gICAgICAgICAgICAgICAgc2VnbWVudEJ1aWxkZXIgKz0gJ1xcMCc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBlbmNvZGVkRXNjYXBlOlxyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGVzY2FwZSBjaGFyYWN0ZXIgY2FuIGJlIHVzZWQgaW4gdGhlIG91dHB1dCB0byBlbmNvZGUgaXRzZWxmLlxyXG4gICAgICAgICAgICAgICAgc2VnbWVudEJ1aWxkZXIgKz0gcGF0aC5zdWJzdHJpbmcoc3RhcnQsIGVuZCArIDEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBmYWlsKCdJbnZhbGlkIGVuY29kZWQgcmVzb3VyY2UgcGF0aDogXCInICsgcGF0aCArICdcIicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdGFydCA9IGVuZCArIDI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChzZWdtZW50cyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBUaW1lc3RhbXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUaW1lc3RhbXAoc2Vjb25kcywgbmFub3NlY29uZHMpIHtcclxuICAgICAgICB0aGlzLnNlY29uZHMgPSBzZWNvbmRzO1xyXG4gICAgICAgIHRoaXMubmFub3NlY29uZHMgPSBuYW5vc2Vjb25kcztcclxuICAgICAgICBpZiAobmFub3NlY29uZHMgPCAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiAnICsgbmFub3NlY29uZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmFub3NlY29uZHMgPj0gMWU5KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiAnICsgbmFub3NlY29uZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNaWRuaWdodCBhdCB0aGUgYmVnaW5uaW5nIG9mIDEvMS8xIGlzIHRoZSBlYXJsaWVzdCBGaXJlc3RvcmUgc3VwcG9ydHMuXHJcbiAgICAgICAgaWYgKHNlY29uZHMgPCAtNjIxMzU1OTY4MDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1RpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogJyArIHNlY29uZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGlzIHdpbGwgYnJlYWsgaW4gdGhlIHllYXIgMTAsMDAwLlxyXG4gICAgICAgIGlmIChzZWNvbmRzID49IDI1MzQwMjMwMDgwMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiAnICsgc2Vjb25kcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgVGltZXN0YW1wLm5vdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gVGltZXN0YW1wLmZyb21NaWxsaXMoRGF0ZS5ub3coKSk7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wLmZyb21EYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICByZXR1cm4gVGltZXN0YW1wLmZyb21NaWxsaXMoZGF0ZS5nZXRUaW1lKCkpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcC5mcm9tTWlsbGlzID0gZnVuY3Rpb24gKG1pbGxpc2Vjb25kcykge1xyXG4gICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcihtaWxsaXNlY29uZHMgLyAxMDAwKTtcclxuICAgICAgICB2YXIgbmFub3MgPSAobWlsbGlzZWNvbmRzIC0gc2Vjb25kcyAqIDEwMDApICogMWU2O1xyXG4gICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wKHNlY29uZHMsIG5hbm9zKTtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXAucHJvdG90eXBlLnRvRGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy50b01pbGxpcygpKTtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXAucHJvdG90eXBlLnRvTWlsbGlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHMgKiAxMDAwICsgdGhpcy5uYW5vc2Vjb25kcyAvIDFlNjtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXAucHJvdG90eXBlLl9jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWNvbmRzID09PSBvdGhlci5zZWNvbmRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMubmFub3NlY29uZHMsIG90aGVyLm5hbm9zZWNvbmRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5zZWNvbmRzLCBvdGhlci5zZWNvbmRzKTtcclxuICAgIH07XHJcbiAgICBUaW1lc3RhbXAucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyLnNlY29uZHMgPT09IHRoaXMuc2Vjb25kcyAmJiBvdGhlci5uYW5vc2Vjb25kcyA9PT0gdGhpcy5uYW5vc2Vjb25kcyk7XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKCdUaW1lc3RhbXAoc2Vjb25kcz0nICtcclxuICAgICAgICAgICAgdGhpcy5zZWNvbmRzICtcclxuICAgICAgICAgICAgJywgbmFub3NlY29uZHM9JyArXHJcbiAgICAgICAgICAgIHRoaXMubmFub3NlY29uZHMgK1xyXG4gICAgICAgICAgICAnKScpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUaW1lc3RhbXA7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSB2ZXJzaW9uIG9mIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSB2ZXJzaW9uXHJcbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXHJcbiAqL1xyXG52YXIgU25hcHNob3RWZXJzaW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU25hcHNob3RWZXJzaW9uKHRpbWVzdGFtcCkge1xyXG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETyhiLzM0MTc2MzQ0KTogT25jZSB3ZSBubyBsb25nZXIgbmVlZCB0byB1c2UgdGhlIG9sZCBhbHBoYSBwcm90b3MsXHJcbiAgICAvLyBkZWxldGUgdGhpcyBjb25zdHJ1Y3RvciBhbmQgdXNlIGEgdGltZXN0YW1wLWJhY2tlZCB2ZXJzaW9uIGV2ZXJ5d2hlcmUuXHJcbiAgICBTbmFwc2hvdFZlcnNpb24uZnJvbU1pY3Jvc2Vjb25kcyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcih2YWx1ZSAvIDFlNik7XHJcbiAgICAgICAgdmFyIG5hbm9zID0gKHZhbHVlICUgMWU2KSAqIDFlMztcclxuICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90VmVyc2lvbihuZXcgVGltZXN0YW1wKHNlY29uZHMsIG5hbm9zKSk7XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90VmVyc2lvbih2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICB9O1xyXG4gICAgU25hcHNob3RWZXJzaW9uLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuX2NvbXBhcmVUbyhvdGhlci50aW1lc3RhbXApO1xyXG4gICAgfTtcclxuICAgIFNuYXBzaG90VmVyc2lvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5pc0VxdWFsKG90aGVyLnRpbWVzdGFtcCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlcnNpb24gZm9yIHVzZSBpbiBzcGVjIHRlc3RzLiAqL1xyXG4gICAgU25hcHNob3RWZXJzaW9uLnByb3RvdHlwZS50b01pY3Jvc2Vjb25kcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBDb252ZXJ0IHRvIG1pY3Jvc2Vjb25kcy5cclxuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuc2Vjb25kcyAqIDFlNiArIHRoaXMudGltZXN0YW1wLm5hbm9zZWNvbmRzIC8gMTAwMDtcclxuICAgIH07XHJcbiAgICBTbmFwc2hvdFZlcnNpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAnU25hcHNob3RWZXJzaW9uKCcgKyB0aGlzLnRpbWVzdGFtcC50b1N0cmluZygpICsgJyknO1xyXG4gICAgfTtcclxuICAgIFNuYXBzaG90VmVyc2lvbi5wcm90b3R5cGUudG9UaW1lc3RhbXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wO1xyXG4gICAgfTtcclxuICAgIFNuYXBzaG90VmVyc2lvbi5NSU4gPSBuZXcgU25hcHNob3RWZXJzaW9uKG5ldyBUaW1lc3RhbXAoMCwgMCkpO1xyXG4gICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcclxuLy8gdHJlZS5cclxudmFyIFNvcnRlZE1hcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNvcnRlZE1hcChjb21wYXJhdG9yLCByb290KSB7XHJcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gY29tcGFyYXRvcjtcclxuICAgICAgICB0aGlzLnJvb3QgPSByb290ID8gcm9vdCA6IExMUkJOb2RlLkVNUFRZO1xyXG4gICAgfVxyXG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdFxyXG4gICAgICAgICAgICAuaW5zZXJ0KGtleSwgdmFsdWUsIHRoaXMuY29tcGFyYXRvcilcclxuICAgICAgICAgICAgLmNvcHkobnVsbCwgbnVsbCwgTExSQk5vZGUuQkxBQ0ssIG51bGwsIG51bGwpKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdFxyXG4gICAgICAgICAgICAucmVtb3ZlKGtleSwgdGhpcy5jb21wYXJhdG9yKVxyXG4gICAgICAgICAgICAuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5yb290O1xyXG4gICAgICAgIHdoaWxlICghbm9kZS5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgdmFyIGNtcCA9IHRoaXMuY29tcGFyYXRvcihrZXksIG5vZGUua2V5KTtcclxuICAgICAgICAgICAgaWYgKGNtcCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY21wIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCBpbiB0aGlzIHNvcnRlZCBtYXAsIG9yIC0xIGlmIGl0IGRvZXNuJ3RcclxuICAgIC8vIGV4aXN0LlxyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIC8vIE51bWJlciBvZiBub2RlcyB0aGF0IHdlcmUgcHJ1bmVkIHdoZW4gZGVzY2VuZGluZyByaWdodFxyXG4gICAgICAgIHZhciBwcnVuZWROb2RlcyA9IDA7XHJcbiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLnJvb3Q7XHJcbiAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICB2YXIgY21wID0gdGhpcy5jb21wYXJhdG9yKGtleSwgbm9kZS5rZXkpO1xyXG4gICAgICAgICAgICBpZiAoY21wID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJ1bmVkTm9kZXMgKyBub2RlLmxlZnQuc2l6ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjbXAgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQ291bnQgYWxsIG5vZGVzIGxlZnQgb2YgdGhlIG5vZGUgcGx1cyB0aGUgbm9kZSBpdHNlbGZcclxuICAgICAgICAgICAgICAgIHBydW5lZE5vZGVzICs9IG5vZGUubGVmdC5zaXplICsgMTtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vZGUgbm90IGZvdW5kXHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290LmlzRW1wdHkoKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU29ydGVkTWFwLnByb3RvdHlwZSwgXCJzaXplXCIsIHtcclxuICAgICAgICAvLyBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBrZXkgaW4gdGhlIG1hcC5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUubWluS2V5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWluS2V5KCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIG1hcC5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUubWF4S2V5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWF4S2V5KCk7XHJcbiAgICB9O1xyXG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxyXG4gICAgLy8gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxyXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XHJcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXHJcbiAgICBTb3J0ZWRNYXAucHJvdG90eXBlLmlub3JkZXJUcmF2ZXJzYWwgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pbm9yZGVyVHJhdmVyc2FsKGFjdGlvbik7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgdGhpcy5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICAgICAgICAgIGZuKGssIHYpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkTWFwLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGVzY3JpcHRpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9ucy5wdXNoKGsgKyBcIjpcIiArIHYpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFwie1wiICsgZGVzY3JpcHRpb25zLmpvaW4oJywgJykgKyBcIn1cIjtcclxuICAgIH07XHJcbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cclxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXNcclxuICAgIC8vIGFib3J0ZWQuXHJcbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcclxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUucmV2ZXJzZVRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb290LnJldmVyc2VUcmF2ZXJzYWwoYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIFNvcnRlZE1hcC5cclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuZ2V0SXRlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuZ2V0SXRlcmF0b3JGcm9tID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBrZXksIHRoaXMuY29tcGFyYXRvciwgZmFsc2UpO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuZ2V0UmV2ZXJzZUl0ZXJhdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwSXRlcmF0b3IodGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsIHRydWUpO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZE1hcC5wcm90b3R5cGUuZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwga2V5LCB0aGlzLmNvbXBhcmF0b3IsIHRydWUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTb3J0ZWRNYXA7XHJcbn0oKSk7IC8vIGVuZCBTb3J0ZWRNYXBcclxuLy8gQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cclxudmFyIFNvcnRlZE1hcEl0ZXJhdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU29ydGVkTWFwSXRlcmF0b3Iobm9kZSwgc3RhcnRLZXksIGNvbXBhcmF0b3IsIGlzUmV2ZXJzZSkge1xyXG4gICAgICAgIHRoaXMuaXNSZXZlcnNlID0gaXNSZXZlcnNlO1xyXG4gICAgICAgIHRoaXMubm9kZVN0YWNrID0gW107XHJcbiAgICAgICAgdmFyIGNtcCA9IDE7XHJcbiAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICBjbXAgPSBzdGFydEtleSA/IGNvbXBhcmF0b3Iobm9kZS5rZXksIHN0YXJ0S2V5KSA6IDE7XHJcbiAgICAgICAgICAgIC8vIGZsaXAgdGhlIGNvbXBhcmlzb24gaWYgd2UncmUgZ29pbmcgaW4gcmV2ZXJzZVxyXG4gICAgICAgICAgICBpZiAoaXNSZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICBjbXAgKj0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNtcCA8IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBsZXNzIHRoYW4gb3VyIHN0YXJ0IGtleS4gaWdub3JlIGl0XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY21wID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjayxcclxuICAgICAgICAgICAgICAgIC8vIGJ1dCBzdG9wIGl0ZXJhdGluZztcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBncmVhdGVyIHRoYW4gb3VyIHN0YXJ0IGtleSwgYWRkIGl0IHRvIHRoZSBzdGFjayBhbmQgbW92ZVxyXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgb25lXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucmlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU29ydGVkTWFwSXRlcmF0b3IucHJvdG90eXBlLmdldE5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMubm9kZVN0YWNrLmxlbmd0aCA+IDAsICdnZXROZXh0KCkgY2FsbGVkIG9uIGl0ZXJhdG9yIHdoZW4gaGFzTmV4dCgpIGlzIGZhbHNlLicpO1xyXG4gICAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlU3RhY2sucG9wKCk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHsga2V5OiBub2RlLmtleSwgdmFsdWU6IG5vZGUudmFsdWUgfTtcclxuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIHtcclxuICAgICAgICAgICAgbm9kZSA9IG5vZGUubGVmdDtcclxuICAgICAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLnJpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBub2RlID0gbm9kZS5yaWdodDtcclxuICAgICAgICAgICAgd2hpbGUgKCFub2RlLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmxlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXBJdGVyYXRvci5wcm90b3R5cGUuaGFzTmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMDtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRNYXBJdGVyYXRvci5wcm90b3R5cGUucGVlayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5ub2RlU3RhY2subGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZVN0YWNrW3RoaXMubm9kZVN0YWNrLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIHJldHVybiB7IGtleTogbm9kZS5rZXksIHZhbHVlOiBub2RlLnZhbHVlIH07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNvcnRlZE1hcEl0ZXJhdG9yO1xyXG59KCkpOyAvLyBlbmQgU29ydGVkTWFwSXRlcmF0b3JcclxuLy8gUmVwcmVzZW50cyBhIG5vZGUgaW4gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrIHRyZWUuXHJcbnZhciBMTFJCTm9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExMUkJOb2RlKGtleSwgdmFsdWUsIGNvbG9yLCBsZWZ0LCByaWdodCkge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3IgIT0gbnVsbCA/IGNvbG9yIDogTExSQk5vZGUuUkVEO1xyXG4gICAgICAgIHRoaXMubGVmdCA9IGxlZnQgIT0gbnVsbCA/IGxlZnQgOiBMTFJCTm9kZS5FTVBUWTtcclxuICAgICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQgIT0gbnVsbCA/IHJpZ2h0IDogTExSQk5vZGUuRU1QVFk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gdGhpcy5sZWZ0LnNpemUgKyAxICsgdGhpcy5yaWdodC5zaXplO1xyXG4gICAgfVxyXG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZSwgb3B0aW9uYWxseSByZXBsYWNpbmcgcGllY2VzIG9mIGl0LlxyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29sb3IsIGxlZnQsIHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMTFJCTm9kZShrZXkgIT0gbnVsbCA/IGtleSA6IHRoaXMua2V5LCB2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiB0aGlzLnZhbHVlLCBjb2xvciAhPSBudWxsID8gY29sb3IgOiB0aGlzLmNvbG9yLCBsZWZ0ICE9IG51bGwgPyBsZWZ0IDogdGhpcy5sZWZ0LCByaWdodCAhPSBudWxsID8gcmlnaHQgOiB0aGlzLnJpZ2h0KTtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cclxuICAgIC8vIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxyXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XHJcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuaW5vcmRlclRyYXZlcnNhbCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKGFjdGlvbikgfHxcclxuICAgICAgICAgICAgYWN0aW9uKHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnJpZ2h0Lmlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxyXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXHJcbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcclxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5yZXZlcnNlVHJhdmVyc2FsID0gZnVuY3Rpb24gKGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5yaWdodC5yZXZlcnNlVHJhdmVyc2FsKGFjdGlvbikgfHxcclxuICAgICAgICAgICAgYWN0aW9uKHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fFxyXG4gICAgICAgICAgICB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbChhY3Rpb24pKTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIG5vZGUgaW4gdGhlIHRyZWUuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUubWluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5taW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUubWluS2V5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1pbigpLmtleTtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5tYXhLZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmtleTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJpZ2h0Lm1heEtleSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBrZXkvdmFsdWUgYWRkZWQuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGNvbXBhcmF0b3IpIHtcclxuICAgICAgICB2YXIgbiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNtcCA9IGNvbXBhcmF0b3Ioa2V5LCBuLmtleSk7XHJcbiAgICAgICAgaWYgKGNtcCA8IDApIHtcclxuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBuLmxlZnQuaW5zZXJ0KGtleSwgdmFsdWUsIGNvbXBhcmF0b3IpLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY21wID09PSAwKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLmNvcHkobnVsbCwgdmFsdWUsIG51bGwsIG51bGwsIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBuLnJpZ2h0Lmluc2VydChrZXksIHZhbHVlLCBjb21wYXJhdG9yKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuLmZpeFVwKCk7XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLnJlbW92ZU1pbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gTExSQk5vZGUuRU1QVFk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuID0gdGhpcztcclxuICAgICAgICBpZiAoIW4ubGVmdC5pc1JlZCgpICYmICFuLmxlZnQubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLm1vdmVSZWRMZWZ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG4gPSBuLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbi5sZWZ0LnJlbW92ZU1pbigpLCBudWxsKTtcclxuICAgICAgICByZXR1cm4gbi5maXhVcCgpO1xyXG4gICAgfTtcclxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBpdGVtIHJlbW92ZWQuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSwgY29tcGFyYXRvcikge1xyXG4gICAgICAgIHZhciBzbWFsbGVzdDtcclxuICAgICAgICB2YXIgbiA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGNvbXBhcmF0b3Ioa2V5LCBuLmtleSkgPCAwKSB7XHJcbiAgICAgICAgICAgIGlmICghbi5sZWZ0LmlzRW1wdHkoKSAmJiAhbi5sZWZ0LmlzUmVkKCkgJiYgIW4ubGVmdC5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgICAgIG4gPSBuLm1vdmVSZWRMZWZ0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBuLmxlZnQucmVtb3ZlKGtleSwgY29tcGFyYXRvciksIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG4ubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBuID0gbi5yb3RhdGVSaWdodCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghbi5yaWdodC5pc0VtcHR5KCkgJiYgIW4ucmlnaHQuaXNSZWQoKSAmJiAhbi5yaWdodC5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgICAgIG4gPSBuLm1vdmVSZWRSaWdodCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb21wYXJhdG9yKGtleSwgbi5rZXkpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobi5yaWdodC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTExSQk5vZGUuRU1QVFk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzbWFsbGVzdCA9IG4ucmlnaHQubWluKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbiA9IG4uY29weShzbWFsbGVzdC5rZXksIHNtYWxsZXN0LnZhbHVlLCBudWxsLCBudWxsLCBuLnJpZ2h0LnJlbW92ZU1pbigpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuID0gbi5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIG4ucmlnaHQucmVtb3ZlKGtleSwgY29tcGFyYXRvcikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbi5maXhVcCgpO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5pc1JlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcclxuICAgIH07XHJcbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlIGFmdGVyIHBlcmZvcm1pbmcgYW55IG5lZWRlZCByb3RhdGlvbnMuXHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUuZml4VXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG4gPSB0aGlzO1xyXG4gICAgICAgIGlmIChuLnJpZ2h0LmlzUmVkKCkgJiYgIW4ubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIG4gPSBuLnJvdGF0ZUxlZnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG4ubGVmdC5pc1JlZCgpICYmIG4ubGVmdC5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgbiA9IG4ucm90YXRlUmlnaHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG4ubGVmdC5pc1JlZCgpICYmIG4ucmlnaHQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICBuID0gbi5jb2xvckZsaXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG47XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLm1vdmVSZWRMZWZ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBuID0gdGhpcy5jb2xvckZsaXAoKTtcclxuICAgICAgICBpZiAobi5yaWdodC5sZWZ0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgbiA9IG4uY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBuLnJpZ2h0LnJvdGF0ZVJpZ2h0KCkpO1xyXG4gICAgICAgICAgICBuID0gbi5yb3RhdGVMZWZ0KCk7XHJcbiAgICAgICAgICAgIG4gPSBuLmNvbG9yRmxpcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbjtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUubW92ZVJlZFJpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBuID0gdGhpcy5jb2xvckZsaXAoKTtcclxuICAgICAgICBpZiAobi5sZWZ0LmxlZnQuaXNSZWQoKSkge1xyXG4gICAgICAgICAgICBuID0gbi5yb3RhdGVSaWdodCgpO1xyXG4gICAgICAgICAgICBuID0gbi5jb2xvckZsaXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG47XHJcbiAgICB9O1xyXG4gICAgTExSQk5vZGUucHJvdG90eXBlLnJvdGF0ZUxlZnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG5sID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgbnVsbCwgdGhpcy5yaWdodC5sZWZ0KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG5sLCBudWxsKTtcclxuICAgIH07XHJcbiAgICBMTFJCTm9kZS5wcm90b3R5cGUucm90YXRlUmlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG5yID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbnVsbCwgbnIpO1xyXG4gICAgfTtcclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5jb2xvckZsaXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxlZnQgPSB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCAhdGhpcy5sZWZ0LmNvbG9yLCBudWxsLCBudWxsKTtcclxuICAgICAgICB2YXIgcmlnaHQgPSB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMucmlnaHQuY29sb3IsIG51bGwsIG51bGwpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkobnVsbCwgbnVsbCwgIXRoaXMuY29sb3IsIGxlZnQsIHJpZ2h0KTtcclxuICAgIH07XHJcbiAgICAvLyBGb3IgdGVzdGluZy5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5jaGVja01heERlcHRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBibGFja0RlcHRoID0gdGhpcy5jaGVjaygpO1xyXG4gICAgICAgIGlmIChNYXRoLnBvdygyLjAsIGJsYWNrRGVwdGgpIDw9IHRoaXMuc2l6ZSArIDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIEluIGEgYmFsYW5jZWQgUkIgdHJlZSwgdGhlIGJsYWNrLWRlcHRoIChudW1iZXIgb2YgYmxhY2sgbm9kZXMpIGZyb20gcm9vdCB0b1xyXG4gICAgLy8gbGVhdmVzIGlzIGVxdWFsIG9uIGJvdGggc2lkZXMuICBUaGlzIGZ1bmN0aW9uIHZlcmlmaWVzIHRoYXQgb3IgYXNzZXJ0cy5cclxuICAgIExMUkJOb2RlLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1JlZCgpICYmIHRoaXMubGVmdC5pc1JlZCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ1JlZCBub2RlIGhhcyByZWQgY2hpbGQoJyArIHRoaXMua2V5ICsgJywnICsgdGhpcy52YWx1ZSArICcpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzUmVkKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnUmlnaHQgY2hpbGQgb2YgKCcgKyB0aGlzLmtleSArICcsJyArIHRoaXMudmFsdWUgKyAnKSBpcyByZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJsYWNrRGVwdGggPSB0aGlzLmxlZnQuY2hlY2soKTtcclxuICAgICAgICBpZiAoYmxhY2tEZXB0aCAhPT0gdGhpcy5yaWdodC5jaGVjaygpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ0JsYWNrIGRlcHRocyBkaWZmZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBibGFja0RlcHRoICsgKHRoaXMuaXNSZWQoKSA/IDAgOiAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gRW1wdHkgbm9kZSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgTExSQiB0cmVlcy5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICBMTFJCTm9kZS5FTVBUWSA9IG51bGw7XHJcbiAgICBMTFJCTm9kZS5SRUQgPSB0cnVlO1xyXG4gICAgTExSQk5vZGUuQkxBQ0sgPSBmYWxzZTtcclxuICAgIHJldHVybiBMTFJCTm9kZTtcclxufSgpKTsgLy8gZW5kIExMUkJOb2RlXHJcbi8vIFJlcHJlc2VudHMgYW4gZW1wdHkgbm9kZSAoYSBsZWFmIG5vZGUgaW4gdGhlIFJlZC1CbGFjayBUcmVlKS5cclxudmFyIExMUkJFbXB0eU5vZGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMTFJCRW1wdHlOb2RlKCkge1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUsIFwia2V5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnTExSQkVtcHR5Tm9kZSBoYXMgbm8ga2V5LicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExMUkJFbXB0eU5vZGUucHJvdG90eXBlLCBcInZhbHVlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnTExSQkVtcHR5Tm9kZSBoYXMgbm8gdmFsdWUuJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUsIFwiY29sb3JcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKCdMTFJCRW1wdHlOb2RlIGhhcyBubyBjb2xvci4nKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMTFJCRW1wdHlOb2RlLnByb3RvdHlwZSwgXCJsZWZ0XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnTExSQkVtcHR5Tm9kZSBoYXMgbm8gbGVmdCBjaGlsZC4nKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShMTFJCRW1wdHlOb2RlLnByb3RvdHlwZSwgXCJyaWdodFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ0xMUkJFbXB0eU5vZGUgaGFzIG5vIHJpZ2h0IGNoaWxkLicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZS5cclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29sb3IsIGxlZnQsIHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQuXHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29tcGFyYXRvcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgTExSQk5vZGUoa2V5LCB2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXksIGNvbXBhcmF0b3IpIHtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLmlub3JkZXJUcmF2ZXJzYWwgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLnJldmVyc2VUcmF2ZXJzYWwgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIExMUkJFbXB0eU5vZGUucHJvdG90eXBlLm1pbktleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5tYXhLZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUuaXNSZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8vIEZvciB0ZXN0aW5nLlxyXG4gICAgTExSQkVtcHR5Tm9kZS5wcm90b3R5cGUuY2hlY2tNYXhEZXB0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBMTFJCRW1wdHlOb2RlLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTExSQkVtcHR5Tm9kZTtcclxufSgpKTsgLy8gZW5kIExMUkJFbXB0eU5vZGVcclxuTExSQk5vZGUuRU1QVFkgPSBuZXcgTExSQkVtcHR5Tm9kZSgpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNvcnRlZFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBlbGVtZW50c1xyXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuXHJcbiAqXHJcbiAqIE5PVEU6IGlmIHByb3ZpZGVkIGNvbXBhcmF0b3IgcmV0dXJucyAwIGZvciB0d28gZWxlbWVudHMsIHdlIGNvbnNpZGVyIHRoZW0gdG9cclxuICogYmUgZXF1YWwhXHJcbiAqL1xyXG52YXIgU29ydGVkU2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU29ydGVkU2V0KGNvbXBhcmF0b3IpIHtcclxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBjb21wYXJhdG9yO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIFNvcnRlZFNldCBmcm9tIHRoZSBrZXlzIG9mIHRoZSBtYXAuXHJcbiAgICAgKiBUaGlzIGlzIGN1cnJlbnRseSBpbXBsZW1lbnRlZCBhcyBhbiBPKG4pIGNvcHkuXHJcbiAgICAgKi9cclxuICAgIFNvcnRlZFNldC5mcm9tTWFwS2V5cyA9IGZ1bmN0aW9uIChtYXApIHtcclxuICAgICAgICB2YXIga2V5cyA9IG5ldyBTb3J0ZWRTZXQobWFwLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIG1hcC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAga2V5cyA9IGtleXMuYWRkKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZ2V0KGVsZW0pICE9PSBudWxsO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuZmlyc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXhLZXkoKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU29ydGVkU2V0LnByb3RvdHlwZSwgXCJzaXplXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5zaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmluZGV4T2YoZWxlbSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEl0ZXJhdGVzIGVsZW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi9cclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYikge1xyXG4gICAgICAgIHRoaXMuZGF0YS5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICAgICAgICAgIGNiKGspO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHJhbmdlWzBdIDw9IGVsZW0gPCByYW5nZVsxXS4gKi9cclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuZm9yRWFjaEluUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UsIGNiKSB7XHJcbiAgICAgICAgdmFyIGl0ZXIgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHJhbmdlWzBdKTtcclxuICAgICAgICB3aGlsZSAoaXRlci5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW0gPSBpdGVyLmdldE5leHQoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcihlbGVtLmtleSwgcmFuZ2VbMV0pID49IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYihlbGVtLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogc3RhcnQgPD0gZWxlbSB1bnRpbCBmYWxzZSBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5mb3JFYWNoV2hpbGUgPSBmdW5jdGlvbiAoY2IsIHN0YXJ0KSB7XHJcbiAgICAgICAgdmFyIGl0ZXI7XHJcbiAgICAgICAgaWYgKHN0YXJ0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaXRlciA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oc3RhcnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaXRlciA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAoaXRlci5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW0gPSBpdGVyLmdldE5leHQoKTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNiKGVsZW0ua2V5KTtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogRmluZHMgdGhlIGxlYXN0IGVsZW1lbnQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBlbGVtYC4gKi9cclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuZmlyc3RBZnRlck9yRXF1YWwgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIHZhciBpdGVyID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlbGVtKTtcclxuICAgICAgICByZXR1cm4gaXRlci5oYXNOZXh0KCkgPyBpdGVyLmdldE5leHQoKS5rZXkgOiBudWxsO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuZ2V0SXRlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRTZXRJdGVyYXRvcih0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSk7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5nZXRJdGVyYXRvckZyb20gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRTZXRJdGVyYXRvcih0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGtleSkpO1xyXG4gICAgfTtcclxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZWxlbWVudCAqL1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZShlbGVtKS5pbnNlcnQoZWxlbSwgdHJ1ZSkpO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWxldGVzIGFuIGVsZW1lbnQgKi9cclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzKGVsZW0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUoZWxlbSkpO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmlzRW1wdHkoKTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLnVuaW9uV2l0aCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzO1xyXG4gICAgICAgIG90aGVyLmZvckVhY2goZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmFkZChlbGVtKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgU29ydGVkU2V0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IG90aGVyLnNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGhpc0l0ID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgdmFyIG90aGVySXQgPSBvdGhlci5kYXRhLmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgd2hpbGUgKHRoaXNJdC5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIHRoaXNFbGVtID0gdGhpc0l0LmdldE5leHQoKS5rZXk7XHJcbiAgICAgICAgICAgIHZhciBvdGhlckVsZW0gPSBvdGhlckl0LmdldE5leHQoKS5rZXk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmF0b3IodGhpc0VsZW0sIG90aGVyRWxlbSkgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXQucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgcmVzLnB1c2godGFyZ2V0SWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9O1xyXG4gICAgU29ydGVkU2V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7IHJldHVybiByZXN1bHQucHVzaChlbGVtKTsgfSk7XHJcbiAgICAgICAgcmV0dXJuICdTb3J0ZWRTZXQoJyArIHJlc3VsdC50b1N0cmluZygpICsgJyknO1xyXG4gICAgfTtcclxuICAgIFNvcnRlZFNldC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTb3J0ZWRTZXQodGhpcy5jb21wYXJhdG9yKTtcclxuICAgICAgICByZXN1bHQuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU29ydGVkU2V0O1xyXG59KCkpO1xyXG52YXIgU29ydGVkU2V0SXRlcmF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3J0ZWRTZXRJdGVyYXRvcihpdGVyKSB7XHJcbiAgICAgICAgdGhpcy5pdGVyID0gaXRlcjtcclxuICAgIH1cclxuICAgIFNvcnRlZFNldEl0ZXJhdG9yLnByb3RvdHlwZS5nZXROZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuZ2V0TmV4dCgpLmtleTtcclxuICAgIH07XHJcbiAgICBTb3J0ZWRTZXRJdGVyYXRvci5wcm90b3R5cGUuaGFzTmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmhhc05leHQoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU29ydGVkU2V0SXRlcmF0b3I7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRU1QVFlfTUFZQkVfRE9DVU1FTlRfTUFQID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuZnVuY3Rpb24gbWF5YmVEb2N1bWVudE1hcCgpIHtcclxuICAgIHJldHVybiBFTVBUWV9NQVlCRV9ET0NVTUVOVF9NQVA7XHJcbn1cclxuZnVuY3Rpb24gbnVsbGFibGVNYXliZURvY3VtZW50TWFwKCkge1xyXG4gICAgcmV0dXJuIG1heWJlRG9jdW1lbnRNYXAoKTtcclxufVxyXG52YXIgRU1QVFlfRE9DVU1FTlRfTUFQID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuZnVuY3Rpb24gZG9jdW1lbnRNYXAoKSB7XHJcbiAgICByZXR1cm4gRU1QVFlfRE9DVU1FTlRfTUFQO1xyXG59XHJcbnZhciBFTVBUWV9ET0NVTUVOVF9WRVJTSU9OX01BUCA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbmZ1bmN0aW9uIGRvY3VtZW50VmVyc2lvbk1hcCgpIHtcclxuICAgIHJldHVybiBFTVBUWV9ET0NVTUVOVF9WRVJTSU9OX01BUDtcclxufVxyXG52YXIgRU1QVFlfRE9DVU1FTlRfS0VZX1NFVCA9IG5ldyBTb3J0ZWRTZXQoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbmZ1bmN0aW9uIGRvY3VtZW50S2V5U2V0KCkge1xyXG4gICAgdmFyIGtleXMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAga2V5c1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgdmFyIHNldCA9IEVNUFRZX0RPQ1VNRU5UX0tFWV9TRVQ7XHJcbiAgICBmb3IgKHZhciBfYSA9IDAsIGtleXNfMSA9IGtleXM7IF9hIDwga2V5c18xLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgIHZhciBrZXkgPSBrZXlzXzFbX2FdO1xyXG4gICAgICAgIHNldCA9IHNldC5hZGQoa2V5KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZXQ7XHJcbn1cclxudmFyIEVNUFRZX1RBUkdFVF9JRF9TRVQgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG5mdW5jdGlvbiB0YXJnZXRJZFNldCgpIHtcclxuICAgIHJldHVybiBFTVBUWV9UQVJHRVRfSURfU0VUO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgQkFUQ0hJRF9VTktOT1dOID0gLTE7XHJcbi8qKlxyXG4gKiBBIGJhdGNoIG9mIG11dGF0aW9ucyB0aGF0IHdpbGwgYmUgc2VudCBhcyBvbmUgdW5pdCB0byB0aGUgYmFja2VuZC5cclxuICovXHJcbnZhciBNdXRhdGlvbkJhdGNoID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCBUaGUgdW5pcXVlIElEIG9mIHRoaXMgbXV0YXRpb24gYmF0Y2guXHJcbiAgICAgKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgVGhlIG9yaWdpbmFsIHdyaXRlIHRpbWUgb2YgdGhpcyBtdXRhdGlvbi5cclxuICAgICAqIEBwYXJhbSBiYXNlTXV0YXRpb25zIE11dGF0aW9ucyB0aGF0IGFyZSB1c2VkIHRvIHBvcHVsYXRlIHRoZSBiYXNlXHJcbiAgICAgKiB2YWx1ZXMgd2hlbiB0aGlzIG11dGF0aW9uIGlzIGFwcGxpZWQgbG9jYWxseS4gVGhpcyBjYW4gYmUgdXNlZCB0byBsb2NhbGx5XHJcbiAgICAgKiBvdmVyd3JpdGUgdmFsdWVzIHRoYXQgYXJlIHBlcnNpc3RlZCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBCYXNlXHJcbiAgICAgKiBtdXRhdGlvbnMgYXJlIG5ldmVyIHNlbnQgdG8gdGhlIGJhY2tlbmQuXHJcbiAgICAgKiBAcGFyYW0gbXV0YXRpb25zIFRoZSB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucyBpbiB0aGlzIG11dGF0aW9uIGJhdGNoLlxyXG4gICAgICogVXNlci1wcm92aWRlZCBtdXRhdGlvbnMgYXJlIGFwcGxpZWQgYm90aCBsb2NhbGx5IGFuZCByZW1vdGVseSBvbiB0aGVcclxuICAgICAqIGJhY2tlbmQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIE11dGF0aW9uQmF0Y2goYmF0Y2hJZCwgbG9jYWxXcml0ZVRpbWUsIGJhc2VNdXRhdGlvbnMsIG11dGF0aW9ucykge1xyXG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IGJhdGNoSWQ7XHJcbiAgICAgICAgdGhpcy5sb2NhbFdyaXRlVGltZSA9IGxvY2FsV3JpdGVUaW1lO1xyXG4gICAgICAgIHRoaXMuYmFzZU11dGF0aW9ucyA9IGJhc2VNdXRhdGlvbnM7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnMgPSBtdXRhdGlvbnM7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9ucy5sZW5ndGggPiAwLCAnQ2Fubm90IGNyZWF0ZSBhbiBlbXB0eSBtdXRhdGlvbiBiYXRjaCcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXMgTXV0YXRpb25CYXRjaCB0byB0aGUgc3BlY2lmaWVkIGRvY3VtZW50XHJcbiAgICAgKiB0byBjcmVhdGUgYSBuZXcgcmVtb3RlIGRvY3VtZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRvY0tleSBUaGUga2V5IG9mIHRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXHJcbiAgICAgKiBAcGFyYW0gbWF5YmVEb2MgVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cclxuICAgICAqIEBwYXJhbSBiYXRjaFJlc3VsdCBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBNdXRhdGlvbkJhdGNoIHRvIHRoZVxyXG4gICAgICogYmFja2VuZC5cclxuICAgICAqL1xyXG4gICAgTXV0YXRpb25CYXRjaC5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKGRvY0tleSwgbWF5YmVEb2MsIGJhdGNoUmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKG1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChtYXliZURvYy5rZXkuaXNFcXVhbChkb2NLZXkpLCBcImFwcGx5VG9SZW1vdGVEb2N1bWVudDoga2V5IFwiICsgZG9jS2V5ICsgXCIgc2hvdWxkIG1hdGNoIG1heWJlRG9jIGtleVxcbiAgICAgICAgXCIgKyBtYXliZURvYy5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbXV0YXRpb25SZXN1bHRzID0gYmF0Y2hSZXN1bHQubXV0YXRpb25SZXN1bHRzO1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvblJlc3VsdHMubGVuZ3RoID09PSB0aGlzLm11dGF0aW9ucy5sZW5ndGgsIFwiTWlzbWF0Y2ggYmV0d2VlbiBtdXRhdGlvbnMgbGVuZ3RoXFxuICAgICAgKFwiICsgdGhpcy5tdXRhdGlvbnMubGVuZ3RoICsgXCIpIGFuZCBtdXRhdGlvbiByZXN1bHRzIGxlbmd0aFxcbiAgICAgIChcIiArIG11dGF0aW9uUmVzdWx0cy5sZW5ndGggKyBcIikuXCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gdGhpcy5tdXRhdGlvbnNbaV07XHJcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbi5rZXkuaXNFcXVhbChkb2NLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb25SZXN1bHQgPSBtdXRhdGlvblJlc3VsdHNbaV07XHJcbiAgICAgICAgICAgICAgICBtYXliZURvYyA9IG11dGF0aW9uLmFwcGx5VG9SZW1vdGVEb2N1bWVudChtYXliZURvYywgbXV0YXRpb25SZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQgZ2l2ZW4gYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpc1xyXG4gICAgICogYmF0Y2guXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRvY0tleSBUaGUga2V5IG9mIHRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXHJcbiAgICAgKiBAcGFyYW0gbWF5YmVEb2MgVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cclxuICAgICAqL1xyXG4gICAgTXV0YXRpb25CYXRjaC5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChkb2NLZXksIG1heWJlRG9jKSB7XHJcbiAgICAgICAgaWYgKG1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChtYXliZURvYy5rZXkuaXNFcXVhbChkb2NLZXkpLCBcImFwcGx5VG9Mb2NhbERvY3VtZW50OiBrZXkgXCIgKyBkb2NLZXkgKyBcIiBzaG91bGQgbWF0Y2ggbWF5YmVEb2Mga2V5XFxuICAgICAgICBcIiArIG1heWJlRG9jLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEZpcnN0LCBhcHBseSB0aGUgYmFzZSBzdGF0ZS4gVGhpcyBhbGxvd3MgdXMgdG8gYXBwbHkgbm9uLWlkZW1wb3RlbnRcclxuICAgICAgICAvLyB0cmFuc2Zvcm0gYWdhaW5zdCBhIGNvbnNpc3RlbnQgc2V0IG9mIHZhbHVlcy5cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5iYXNlTXV0YXRpb25zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbi5rZXkuaXNFcXVhbChkb2NLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXliZURvYyA9IG11dGF0aW9uLmFwcGx5VG9Mb2NhbFZpZXcobWF5YmVEb2MsIG1heWJlRG9jLCB0aGlzLmxvY2FsV3JpdGVUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmFzZURvYyA9IG1heWJlRG9jO1xyXG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxyXG4gICAgICAgIGZvciAodmFyIF9iID0gMCwgX2MgPSB0aGlzLm11dGF0aW9uczsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gX2NbX2JdO1xyXG4gICAgICAgICAgICBpZiAobXV0YXRpb24ua2V5LmlzRXF1YWwoZG9jS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgbWF5YmVEb2MgPSBtdXRhdGlvbi5hcHBseVRvTG9jYWxWaWV3KG1heWJlRG9jLCBiYXNlRG9jLCB0aGlzLmxvY2FsV3JpdGVUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgYWxsIHByb3ZpZGVkIGRvY3VtZW50cyBnaXZlbiB0aGUgbXV0YXRpb25zIGluXHJcbiAgICAgKiB0aGlzIGJhdGNoLlxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvbkJhdGNoLnByb3RvdHlwZS5hcHBseVRvTG9jYWxEb2N1bWVudFNldCA9IGZ1bmN0aW9uIChtYXliZURvY3MpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcclxuICAgICAgICAvLyBkaXJlY3RseSAoYXMgZG9uZSBpbiBgYXBwbHlUb0xvY2FsVmlldygpYCksIHdlIGNhbiByZWR1Y2UgdGhlIGNvbXBsZXhpdHlcclxuICAgICAgICAvLyB0byBPKG4pLlxyXG4gICAgICAgIHZhciBtdXRhdGVkRG9jdW1lbnRzID0gbWF5YmVEb2NzO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgdmFyIG11dGF0ZWREb2N1bWVudCA9IF90aGlzLmFwcGx5VG9Mb2NhbFZpZXcobS5rZXksIG1heWJlRG9jcy5nZXQobS5rZXkpKTtcclxuICAgICAgICAgICAgaWYgKG11dGF0ZWREb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgbXV0YXRlZERvY3VtZW50cyA9IG11dGF0ZWREb2N1bWVudHMuaW5zZXJ0KG0ua2V5LCBtdXRhdGVkRG9jdW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0ZWREb2N1bWVudHM7XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25CYXRjaC5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChrZXlzLCBtKSB7IHJldHVybiBrZXlzLmFkZChtLmtleSk7IH0sIGRvY3VtZW50S2V5U2V0KCkpO1xyXG4gICAgfTtcclxuICAgIE11dGF0aW9uQmF0Y2gucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuYmF0Y2hJZCA9PT0gb3RoZXIuYmF0Y2hJZCAmJlxyXG4gICAgICAgICAgICBhcnJheUVxdWFscyh0aGlzLm11dGF0aW9ucywgb3RoZXIubXV0YXRpb25zKSAmJlxyXG4gICAgICAgICAgICBhcnJheUVxdWFscyh0aGlzLmJhc2VNdXRhdGlvbnMsIG90aGVyLmJhc2VNdXRhdGlvbnMpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTXV0YXRpb25CYXRjaDtcclxufSgpKTtcclxuLyoqIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSBtdXRhdGlvbiBiYXRjaCB0byB0aGUgYmFja2VuZC4gKi9cclxudmFyIE11dGF0aW9uQmF0Y2hSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNdXRhdGlvbkJhdGNoUmVzdWx0KGJhdGNoLCBjb21taXRWZXJzaW9uLCBtdXRhdGlvblJlc3VsdHMsIHN0cmVhbVRva2VuLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBwcmUtY29tcHV0ZWQgbWFwcGluZyBmcm9tIGVhY2ggbXV0YXRlZCBkb2N1bWVudCB0byB0aGUgcmVzdWx0aW5nXHJcbiAgICAgKiB2ZXJzaW9uLlxyXG4gICAgICovXHJcbiAgICBkb2NWZXJzaW9ucykge1xyXG4gICAgICAgIHRoaXMuYmF0Y2ggPSBiYXRjaDtcclxuICAgICAgICB0aGlzLmNvbW1pdFZlcnNpb24gPSBjb21taXRWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXN1bHRzID0gbXV0YXRpb25SZXN1bHRzO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtVG9rZW4gPSBzdHJlYW1Ub2tlbjtcclxuICAgICAgICB0aGlzLmRvY1ZlcnNpb25zID0gZG9jVmVyc2lvbnM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdCBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCByZXN1bHRzLiBUaGVyZVxyXG4gICAgICogbXVzdCBiZSBvbmUgcmVzdWx0IGZvciBlYWNoIG11dGF0aW9uIGluIHRoZSBiYXRjaC4gVGhpcyBzdGF0aWMgZmFjdG9yeVxyXG4gICAgICogY2FjaGVzIGEgZG9jdW1lbnQ9PnZlcnNpb24gbWFwcGluZyAoZG9jVmVyc2lvbnMpLlxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvbkJhdGNoUmVzdWx0LmZyb20gPSBmdW5jdGlvbiAoYmF0Y2gsIGNvbW1pdFZlcnNpb24sIHJlc3VsdHMsIHN0cmVhbVRva2VuKSB7XHJcbiAgICAgICAgYXNzZXJ0KGJhdGNoLm11dGF0aW9ucy5sZW5ndGggPT09IHJlc3VsdHMubGVuZ3RoLCAnTXV0YXRpb25zIHNlbnQgJyArXHJcbiAgICAgICAgICAgIGJhdGNoLm11dGF0aW9ucy5sZW5ndGggK1xyXG4gICAgICAgICAgICAnIG11c3QgZXF1YWwgcmVzdWx0cyByZWNlaXZlZCAnICtcclxuICAgICAgICAgICAgcmVzdWx0cy5sZW5ndGgpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uTWFwID0gZG9jdW1lbnRWZXJzaW9uTWFwKCk7XHJcbiAgICAgICAgdmFyIG11dGF0aW9ucyA9IGJhdGNoLm11dGF0aW9ucztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2ZXJzaW9uTWFwID0gdmVyc2lvbk1hcC5pbnNlcnQobXV0YXRpb25zW2ldLmtleSwgcmVzdWx0c1tpXS52ZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbkJhdGNoUmVzdWx0KGJhdGNoLCBjb21taXRWZXJzaW9uLCByZXN1bHRzLCBzdHJlYW1Ub2tlbiwgdmVyc2lvbk1hcCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE11dGF0aW9uQmF0Y2hSZXN1bHQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUGVyc2lzdGVuY2VQcm9taXNlPD4gaXMgZXNzZW50aWFsbHkgYSByZS1pbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlPD4gZXhjZXB0XHJcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXHJcbiAqIGFyZSBleGVjdXRlZCBzeW5jaHJvbm91c2x5IHdoZW4gYSBQZXJzaXN0ZW5jZVByb21pc2UgcmVzb2x2ZXMgcmF0aGVyIHRoYW5cclxuICogYXN5bmNocm9ub3VzbHkgKFByb21pc2U8PiBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxyXG4gKlxyXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBpbnRlcm9wZXJhdGUgd2l0aCBJbmRleGVkREIgd2hpY2ggd2lsbCBhdXRvbWF0aWNhbGx5XHJcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XHJcbiAqIHN5bmNocm9ub3VzbHkgaW5pdGlhdGluZyBhbm90aGVyIG9wZXJhdGlvbiBvbiB0aGUgdHJhbnNhY3Rpb24uXHJcbiAqXHJcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcclxuICogUHJvbWlzZXMuXHJcbiAqL1xyXG52YXIgUGVyc2lzdGVuY2VQcm9taXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGVyc2lzdGVuY2VQcm9taXNlKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBOT1RFOiBuZXh0L2NhdGNoQ2FsbGJhY2sgd2lsbCBhbHdheXMgcG9pbnQgdG8gb3VyIG93biB3cmFwcGVyIGZ1bmN0aW9ucyxcclxuICAgICAgICAvLyBub3QgdGhlIHVzZXIncyByYXcgbmV4dCgpIG9yIGNhdGNoKCkgY2FsbGJhY2tzLlxyXG4gICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgIC8vIFdoZW4gdGhlIG9wZXJhdGlvbiByZXNvbHZlcywgd2UnbGwgc2V0IHJlc3VsdCBvciBlcnJvciBhbmQgbWFyayBpc0RvbmUuXHJcbiAgICAgICAgdGhpcy5yZXN1bHQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmlzRG9uZSA9IGZhbHNlO1xyXG4gICAgICAgIC8vIFNldCB0byB0cnVlIHdoZW4gLnRoZW4oKSBvciAuY2F0Y2goKSBhcmUgY2FsbGVkIGFuZCBwcmV2ZW50cyBhZGRpdGlvbmFsXHJcbiAgICAgICAgLy8gY2hhaW5pbmcuXHJcbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgY2FsbGJhY2soZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmlzRG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgIF90aGlzLnJlc3VsdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMubmV4dENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZSBzaG91bGQgYmUgZGVmaW5lZCB1bmxlc3MgVCBpcyBWb2lkLCBidXQgd2UgY2FuJ3QgZXhwcmVzc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBpbiB0aGUgdHlwZSBzeXN0ZW0uXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5uZXh0Q2FsbGJhY2sodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmlzRG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgIF90aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5jYXRjaENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jYXRjaENhbGxiYWNrKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5leHQodW5kZWZpbmVkLCBmbik7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKG5leHRGbiwgY2F0Y2hGbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2tBdHRhY2hlZCkge1xyXG4gICAgICAgICAgICBmYWlsKCdDYWxsZWQgbmV4dCgpIG9yIGNhdGNoKCkgdHdpY2UgZm9yIFBlcnNpc3RlbmNlUHJvbWlzZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhbGxiYWNrQXR0YWNoZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG9uZSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndyYXBTdWNjZXNzKG5leHRGbiwgdGhpcy5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JhcEZhaWx1cmUoY2F0Y2hGbiwgdGhpcy5lcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm5leHRDYWxsYmFjayA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLndyYXBTdWNjZXNzKG5leHRGbiwgdmFsdWUpLm5leHQocmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jYXRjaENhbGxiYWNrID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMud3JhcEZhaWx1cmUoY2F0Y2hGbiwgZXJyb3IpLm5leHQocmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIF90aGlzLm5leHQocmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucHJvdG90eXBlLndyYXBVc2VyRnVuY3Rpb24gPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZm4oKTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucHJvdG90eXBlLndyYXBTdWNjZXNzID0gZnVuY3Rpb24gKG5leHRGbiwgdmFsdWUpIHtcclxuICAgICAgICBpZiAobmV4dEZuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndyYXBVc2VyRnVuY3Rpb24oZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV4dEZuKHZhbHVlKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIG5leHRGbiwgdGhlbiBSIG11c3QgYmUgdGhlIHNhbWUgYXMgVFxyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVByb21pc2UucHJvdG90eXBlLndyYXBGYWlsdXJlID0gZnVuY3Rpb24gKGNhdGNoRm4sIGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGNhdGNoRm4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JhcFVzZXJGdW5jdGlvbihmdW5jdGlvbiAoKSB7IHJldHVybiBjYXRjaEZuKGVycm9yKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IgPSBmdW5jdGlvbiAoXHJcbiAgICAvLyBBY2NlcHQgYWxsIFByb21pc2UgdHlwZXMgaW4gd2FpdEZvcigpLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIGFsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIGV4cGVjdGVkQ291bnQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgcmVzb2x2ZWRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBkb25lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGFsbC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICArK2V4cGVjdGVkQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICsrcmVzb2x2ZWRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSAmJiByZXNvbHZlZENvdW50ID09PSBleHBlY3RlZENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiByZWplY3QoZXJyKTsgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHJlc29sdmVkQ291bnQgPT09IGV4cGVjdGVkQ291bnQpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgcHJlZGljYXRlIGZ1bmN0aW9ucyB0aGF0IGFzeW5jaHJvbm91c2x5IGV2YWx1YXRlIHRvIGFcclxuICAgICAqIGJvb2xlYW4sIGltcGxlbWVudHMgYSBzaG9ydC1jaXJjdWl0aW5nIGBvcmAgYmV0d2VlbiB0aGUgcmVzdWx0cy4gUHJlZGljYXRlc1xyXG4gICAgICogd2lsbCBiZSBldmFsdWF0ZWQgdW50aWwgb25lIG9mIHRoZW0gcmV0dXJucyBgdHJ1ZWAsIHRoZW4gc3RvcC4gVGhlIGZpbmFsXHJcbiAgICAgKiByZXN1bHQgd2lsbCBiZSB3aGV0aGVyIGFueSBvZiB0aGVtIHJldHVybmVkIGB0cnVlYC5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLm9yID0gZnVuY3Rpb24gKHByZWRpY2F0ZXMpIHtcclxuICAgICAgICB2YXIgcCA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUpIHtcclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoaXNUcnVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNUcnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGlzVHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlZGljYXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBwcmVkaWNhdGVzXzEgPSBwcmVkaWNhdGVzOyBfaSA8IHByZWRpY2F0ZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZSA9IHByZWRpY2F0ZXNfMVtfaV07XHJcbiAgICAgICAgICAgIF9sb29wXzEocHJlZGljYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2ggPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgZikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgY29sbGVjdGlvbi5mb3JFYWNoKGZ1bmN0aW9uIChyLCBzKSB7XHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goZi5jYWxsKF90aGlzLCByLCBzKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2FpdEZvcihwcm9taXNlcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHID0gJ1NpbXBsZURiJztcclxuLyoqXHJcbiAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiByZXRyeSBhdHRlbXB0cyBmb3IgYW4gSW5kZXhlZERiIHRyYW5zYWN0aW9uIHRoYXQgZmFpbHNcclxuICogd2l0aCBhIERPTUV4Y2VwdGlvbi5cclxuICovXHJcbnZhciBUUkFOU0FDVElPTl9SRVRSWV9DT1VOVCA9IDM7XHJcbi8qKlxyXG4gKiBQcm92aWRlcyBhIHdyYXBwZXIgYXJvdW5kIEluZGV4ZWREYiB3aXRoIGEgc2ltcGxpZmllZCBpbnRlcmZhY2UgdGhhdCB1c2VzXHJcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcclxuICogc2luY2UgLnRoZW4oKSBjb250aW51YXRpb25zIGFyZSBleGVjdXRlZCBhc3luY2hyb25vdXNseSAoZS5nLiB2aWFcclxuICogLnNldEltbWVkaWF0ZSksIHdoaWNoIHdvdWxkIGNhdXNlIEluZGV4ZWREQiB0byBlbmQgdGhlIHRyYW5zYWN0aW9uLlxyXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXHJcbiAqL1xyXG52YXIgU2ltcGxlRGIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaW1wbGVEYihkYikge1xyXG4gICAgICAgIHRoaXMuZGIgPSBkYjtcclxuICAgICAgICB2YXIgaU9TVmVyc2lvbiA9IFNpbXBsZURiLmdldElPU1ZlcnNpb24odXRpbC5nZXRVQSgpKTtcclxuICAgICAgICAvLyBOT1RFOiBBY2NvcmRpbmcgdG8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE5NzA1MCwgdGhlXHJcbiAgICAgICAgLy8gYnVnIHdlJ3JlIGNoZWNraW5nIGZvciBzaG91bGQgZXhpc3QgaW4gaU9TID49IDEyLjIgYW5kIDwgMTMsIGJ1dCBmb3JcclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XHJcbiAgICAgICAgLy8gbG9nIG9uIDEyLjIuXHJcbiAgICAgICAgaWYgKGlPU1ZlcnNpb24gPT09IDEyLjIpIHtcclxuICAgICAgICAgICAgZXJyb3IoJ0ZpcmVzdG9yZSBwZXJzaXN0ZW5jZSBzdWZmZXJzIGZyb20gYSBidWcgaW4gaU9TIDEyLjIgJyArXHJcbiAgICAgICAgICAgICAgICAnU2FmYXJpIHRoYXQgbWF5IGNhdXNlIHlvdXIgYXBwIHRvIHN0b3Agd29ya2luZy4gU2VlICcgK1xyXG4gICAgICAgICAgICAgICAgJ2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgJyArXHJcbiAgICAgICAgICAgICAgICAnYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPcGVucyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLCBjcmVhdGluZyBvciB1cGdyYWRpbmcgaXQgaWYgbmVjZXNzYXJ5LlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCBgdmVyc2lvbmAgbXVzdCBub3QgYmUgYSBkb3duZ3JhZGUuIEluZGV4ZWREQiBkb2VzIG5vdCBzdXBwb3J0IGRvd25ncmFkaW5nIHRoZSBzY2hlbWFcclxuICAgICAqIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvIHZlcnNpb25pbmcgb3V0c2lkZSBvZiBJbmRleGVkREIncyB2ZXJzaW9uaW5nXHJcbiAgICAgKiBtZWNoYW5pc20sIGFzIG9ubHkgdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcclxuICAgICAqIG9iamVjdHN0b3Jlcy5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGIub3Blbk9yQ3JlYXRlID0gZnVuY3Rpb24gKG5hbWUsIHZlcnNpb24sIHNjaGVtYUNvbnZlcnRlcikge1xyXG4gICAgICAgIGFzc2VydChTaW1wbGVEYi5pc0F2YWlsYWJsZSgpLCAnSW5kZXhlZERCIG5vdCBzdXBwb3J0ZWQgaW4gY3VycmVudCBlbnZpcm9ubWVudC4nKTtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnT3BlbmluZyBkYXRhYmFzZTonLCBuYW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSW52ZXN0aWdhdGUgYnJvd3NlciBjb21wYXRpYmlsaXR5LlxyXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSS9Vc2luZ19JbmRleGVkREJcclxuICAgICAgICAgICAgLy8gc3VnZ2VzdHMgSUU5IGFuZCBvbGRlciBXZWJLaXQgYnJvd3NlcnMgaGFuZGxlIHVwZ3JhZGVcclxuICAgICAgICAgICAgLy8gZGlmZmVyZW50bHkuIFRoZXkgZXhwZWN0IHNldFZlcnNpb24sIGFzIGRlc2NyaWJlZCBoZXJlOlxyXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCVmVyc2lvbkNoYW5nZVJlcXVlc3Qvc2V0VmVyc2lvblxyXG4gICAgICAgICAgICB2YXIgcmVxdWVzdCA9IHdpbmRvdy5pbmRleGVkREIub3BlbihuYW1lLCB2ZXJzaW9uKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBTaW1wbGVEYihkYikpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uYmxvY2tlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCAnQ2Fubm90IHVwZ3JhZGUgSW5kZXhlZERCIHNjaGVtYSB3aGlsZSBhbm90aGVyIHRhYiBpcyBvcGVuLiAnICtcclxuICAgICAgICAgICAgICAgICAgICAnQ2xvc2UgYWxsIHRhYnMgdGhhdCBhY2Nlc3MgRmlyZXN0b3JlIGFuZCByZWxvYWQgdGhpcyBwYWdlIHRvIHByb2NlZWQuJykpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IGV2ZW50LnRhcmdldC5lcnJvcjtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnVmVyc2lvbkVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCAnQSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBGaXJlc3RvcmUgU0RLIHdhcyBwcmV2aW91c2x5IHVzZWQgYW5kIHNvIHRoZSBwZXJzaXN0ZWQgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHZlcnNpb24gb2YgdGhlIFNESyB5b3UgYXJlIG5vdyB1c2luZy4gVGhlIFNESyAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpbGwgb3BlcmF0ZSB3aXRoIHBlcnNpc3RlbmNlIGRpc2FibGVkLiBJZiB5b3UgbmVlZCBwZXJzaXN0ZW5jZSwgcGxlYXNlICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncmUtdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIFNESyBvciBlbHNlIGNsZWFyIHRoZSBwZXJzaXN0ZWQgSW5kZXhlZERCICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSBmb3IgeW91ciBhcHAgdG8gc3RhcnQgZnJlc2guJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUcsICdEYXRhYmFzZSBcIicgKyBuYW1lICsgJ1wiIHJlcXVpcmVzIHVwZ3JhZGUgZnJvbSB2ZXJzaW9uOicsIGV2ZW50Lm9sZFZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRiID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIHNjaGVtYUNvbnZlcnRlclxyXG4gICAgICAgICAgICAgICAgICAgIC5jcmVhdGVPclVwZ3JhZGUoZGIsIHJlcXVlc3QudHJhbnNhY3Rpb24sIGV2ZW50Lm9sZFZlcnNpb24sIFNDSEVNQV9WRVJTSU9OKVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnRGF0YWJhc2UgdXBncmFkZSB0byB2ZXJzaW9uICcgKyBTQ0hFTUFfVkVSU0lPTiArICcgY29tcGxldGUnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pLnRvUHJvbWlzZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWxldGVzIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuICovXHJcbiAgICBTaW1wbGVEYi5kZWxldGUgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUcsICdSZW1vdmluZyBkYXRhYmFzZTonLCBuYW1lKTtcclxuICAgICAgICByZXR1cm4gd3JhcFJlcXVlc3Qod2luZG93LmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShuYW1lKSkudG9Qcm9taXNlKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqL1xyXG4gICAgU2ltcGxlRGIuaXNBdmFpbGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHdpbmRvdy5pbmRleGVkREIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChTaW1wbGVEYi5pc01vY2tQZXJzaXN0ZW5jZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJbiBzb21lIE5vZGUgZW52aXJvbm1lbnRzLCBgd2luZG93YCBpcyBkZWZpbmVkLCBidXQgYHdpbmRvdy5uYXZpZ2F0b3JgIGlzXHJcbiAgICAgICAgLy8gbm90LiBXZSBkb24ndCBzdXBwb3J0IEluZGV4ZWREQiBwZXJzaXN0ZW5jZSBpbiBOb2RlIGlmIHRoZVxyXG4gICAgICAgIC8vIGlzTW9ja1BlcnNpc3RlbmNlKCkgY2hlY2sgYWJvdmUgcmV0dXJucyBmYWxzZS5cclxuICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2UgZXh0ZW5zaXZlbHkgdXNlIGluZGV4ZWQgYXJyYXkgdmFsdWVzIGFuZCBjb21wb3VuZCBrZXlzLFxyXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXHJcbiAgICAgICAgLy8gZGVmaW5lZCBvbiB0aGUgd2luZG93LCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGZvciB0aGVtIGhlcmUgYW5kIG1ha2Ugc3VyZVxyXG4gICAgICAgIC8vIHRvIHJldHVybiB0aGF0IHBlcnNpc3RlbmNlIGlzIG5vdCBlbmFibGVkIGZvciB0aG9zZSBicm93c2Vycy5cclxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vc3RhdHVzL2luZGV4ZWRkYmFycmF5c2FuZG11bHRpZW50cnlzdXBwb3J0L1xyXG4gICAgICAgIC8vIENoZWNrIHRoZSBVQSBzdHJpbmcgdG8gZmluZCBvdXQgdGhlIGJyb3dzZXIuXHJcbiAgICAgICAgdmFyIHVhID0gdXRpbC5nZXRVQSgpO1xyXG4gICAgICAgIC8vIElFIDEwXHJcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBOVCA2LjI7IFRyaWRlbnQvNi4wKSc7XHJcbiAgICAgICAgLy8gSUUgMTFcclxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjM7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvJztcclxuICAgICAgICAvLyBFZGdlXHJcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsXHJcbiAgICAgICAgLy8gbGlrZSBHZWNrbykgQ2hyb21lLzM5LjAuMjE3MS43MSBTYWZhcmkvNTM3LjM2IEVkZ2UvMTIuMCc7XHJcbiAgICAgICAgLy8gaU9TIFNhZmFyaTogRGlzYWJsZSBmb3IgdXNlcnMgcnVubmluZyBpT1MgdmVyc2lvbiA8IDEwLlxyXG4gICAgICAgIHZhciBpT1NWZXJzaW9uID0gU2ltcGxlRGIuZ2V0SU9TVmVyc2lvbih1YSk7XHJcbiAgICAgICAgdmFyIGlzVW5zdXBwb3J0ZWRJT1MgPSAwIDwgaU9TVmVyc2lvbiAmJiBpT1NWZXJzaW9uIDwgMTA7XHJcbiAgICAgICAgLy8gQW5kcm9pZCBicm93c2VyOiBEaXNhYmxlIGZvciB1c2Vyc2UgcnVubmluZyB2ZXJzaW9uIDwgNC41LlxyXG4gICAgICAgIHZhciBhbmRyb2lkVmVyc2lvbiA9IFNpbXBsZURiLmdldEFuZHJvaWRWZXJzaW9uKHVhKTtcclxuICAgICAgICB2YXIgaXNVbnN1cHBvcnRlZEFuZHJvaWQgPSAwIDwgYW5kcm9pZFZlcnNpb24gJiYgYW5kcm9pZFZlcnNpb24gPCA0LjU7XHJcbiAgICAgICAgaWYgKHVhLmluZGV4T2YoJ01TSUUgJykgPiAwIHx8XHJcbiAgICAgICAgICAgIHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPiAwIHx8XHJcbiAgICAgICAgICAgIHVhLmluZGV4T2YoJ0VkZ2UvJykgPiAwIHx8XHJcbiAgICAgICAgICAgIGlzVW5zdXBwb3J0ZWRJT1MgfHxcclxuICAgICAgICAgICAgaXNVbnN1cHBvcnRlZEFuZHJvaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBiYWNraW5nIEluZGV4ZWREQiBzdG9yZSBpcyB0aGUgTm9kZSBJbmRleGVkREJTaGltXHJcbiAgICAgKiAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbSkuXHJcbiAgICAgKi9cclxuICAgIFNpbXBsZURiLmlzTW9ja1BlcnNpc3RlbmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICAoKF9hID0gcHJvY2Vzcy5lbnYpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5VU0VfTU9DS19QRVJTSVNURU5DRSkgPT09ICdZRVMnKTtcclxuICAgIH07XHJcbiAgICAvKiogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZnJvbSBhIHRyYW5zYWN0aW9uLiAqL1xyXG4gICAgU2ltcGxlRGIuZ2V0U3RvcmUgPSBmdW5jdGlvbiAodHhuLCBzdG9yZSkge1xyXG4gICAgICAgIHJldHVybiB0eG4uc3RvcmUoc3RvcmUpO1xyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBpT1MgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXHJcbiAgICBTaW1wbGVEYi5nZXRJT1NWZXJzaW9uID0gZnVuY3Rpb24gKHVhKSB7XHJcbiAgICAgICAgdmFyIGlPU1ZlcnNpb25SZWdleCA9IHVhLm1hdGNoKC9pKD86cGhvbmV8cGFkfHBvZCkgb3MgKFtcXGRfXSspL2kpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gaU9TVmVyc2lvblJlZ2V4XHJcbiAgICAgICAgICAgID8gaU9TVmVyc2lvblJlZ2V4WzFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ18nKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIDIpXHJcbiAgICAgICAgICAgICAgICAuam9pbignLicpXHJcbiAgICAgICAgICAgIDogJy0xJztcclxuICAgICAgICByZXR1cm4gTnVtYmVyKHZlcnNpb24pO1xyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xyXG4gICAgU2ltcGxlRGIuZ2V0QW5kcm9pZFZlcnNpb24gPSBmdW5jdGlvbiAodWEpIHtcclxuICAgICAgICB2YXIgYW5kcm9pZFZlcnNpb25SZWdleCA9IHVhLm1hdGNoKC9BbmRyb2lkIChbXFxkLl0rKS9pKTtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9IGFuZHJvaWRWZXJzaW9uUmVnZXhcclxuICAgICAgICAgICAgPyBhbmRyb2lkVmVyc2lvblJlZ2V4WzFdXHJcbiAgICAgICAgICAgICAgICAuc3BsaXQoJy4nKVxyXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIDIpXHJcbiAgICAgICAgICAgICAgICAuam9pbignLicpXHJcbiAgICAgICAgICAgIDogJy0xJztcclxuICAgICAgICByZXR1cm4gTnVtYmVyKHZlcnNpb24pO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiLnByb3RvdHlwZS5zZXRWZXJzaW9uQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAodmVyc2lvbkNoYW5nZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZlcnNpb25DaGFuZ2VMaXN0ZW5lcihldmVudCk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYi5wcm90b3R5cGUucnVuVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAobW9kZSwgb2JqZWN0U3RvcmVzLCB0cmFuc2FjdGlvbkZuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVhZG9ubHksIGlkZW1wb3RlbnQsIGF0dGVtcHROdW1iZXIsIF9sb29wXzEsIHRoaXNfMSwgc3RhdGVfMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZG9ubHkgPSBtb2RlLnN0YXJ0c1dpdGgoJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkZW1wb3RlbnQgPSBtb2RlLmVuZHNXaXRoKCdpZGVtcG90ZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVtcHROdW1iZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9vcF8xID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uLCB0cmFuc2FjdGlvbkZuUmVzdWx0LCBlcnJvcl8xLCByZXRyeWFibGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2F0dGVtcHROdW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbiA9IFNpbXBsZURiVHJhbnNhY3Rpb24ub3Blbih0aGlzXzEuZGIsIHJlYWRvbmx5ID8gJ3JlYWRvbmx5JyA6ICdyZWFkd3JpdGUnLCBvYmplY3RTdG9yZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25GblJlc3VsdCA9IHRyYW5zYWN0aW9uRm4odHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSB0cmFuc2FjdGlvbiBpZiB0aGVyZSB3YXMgYW4gZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24uYWJvcnQoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhbm5vdCBhY3R1YWxseSByZWNvdmVyLCBhbmQgY2FsbGluZyBgYWJvcnQoKWAgd2lsbCBjYXVzZSB0aGUgdHJhbnNhY3Rpb24nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBsZXRpb24gcHJvbWlzZSB0byBiZSByZWplY3RlZC4gVGhpcyBpbiB0dXJuIG1lYW5zIHRoYXQgd2Ugd29uJ3QgdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYHRyYW5zYWN0aW9uRm5SZXN1bHRgIGJlbG93LiBXZSByZXR1cm4gYSByZWplY3Rpb24gaGVyZSBzbyB0aGF0IHdlIGRvbid0IGFkZCB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NzaWJpbGl0eSBvZiByZXR1cm5pbmcgYHZvaWRgIHRvIHRoZSB0eXBlIG9mIGB0cmFuc2FjdGlvbkZuUmVzdWx0YC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b1Byb21pc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzIG5vdGVkIGFib3ZlLCBlcnJvcnMgYXJlIHByb3BhZ2F0ZWQgYnkgYWJvcnRpbmcgdGhlIHRyYW5zYWN0aW9uLiBTb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2Ugc3dhbGxvdyBhbnkgZXJyb3IgaGVyZSB0byBhdm9pZCB0aGUgYnJvd3NlciBsb2dnaW5nIGl0IGFzIHVuaGFuZGxlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uRm5SZXN1bHQuY2F0Y2goZnVuY3Rpb24gKCkgeyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSB0cmFuc2FjdGlvbiB0byBjb21wbGV0ZSAoaS5lLiBJbmRleGVkRGIncyBvbnN1Y2Nlc3MgZXZlbnQgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcmUpLCBidXQgc3RpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0cmFuc2FjdGlvbkZuUmVzdWx0IGJhY2sgdG8gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0cmFuc2FjdGlvbi5jb21wbGV0aW9uUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSB0cmFuc2FjdGlvbiB0byBjb21wbGV0ZSAoaS5lLiBJbmRleGVkRGIncyBvbnN1Y2Nlc3MgZXZlbnQgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcmUpLCBidXQgc3RpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0cmFuc2FjdGlvbkZuUmVzdWx0IGJhY2sgdG8gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgeyB2YWx1ZTogdHJhbnNhY3Rpb25GblJlc3VsdCB9XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5YWJsZSA9IGlkZW1wb3RlbnQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xLm5hbWUgIT09ICdGaXJlYmFzZUVycm9yJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVtcHROdW1iZXIgPCBUUkFOU0FDVElPTl9SRVRSWV9DT1VOVDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUcsICdUcmFuc2FjdGlvbiBmYWlsZWQgd2l0aCBlcnJvcjogJXMuIFJldHJ5aW5nOiAlcy4nLCBlcnJvcl8xLm1lc3NhZ2UsIHJldHJ5YWJsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJldHJ5YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB7IHZhbHVlOiBQcm9taXNlLnJlamVjdChlcnJvcl8xKSB9XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs1IC8qeWllbGQqKi8sIF9sb29wXzEoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZV8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0YXRlXzEgPT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc3RhdGVfMS52YWx1ZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kYi5jbG9zZSgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTaW1wbGVEYjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgY29udHJvbGxlciBmb3IgaXRlcmF0aW5nIG92ZXIgYSBrZXkgcmFuZ2Ugb3IgaW5kZXguIEl0IGFsbG93cyBhbiBpdGVyYXRlXHJcbiAqIGNhbGxiYWNrIHRvIGRlbGV0ZSB0aGUgY3VycmVudGx5LXJlZmVyZW5jZWQgb2JqZWN0LCBvciBqdW1wIHRvIGEgbmV3IGtleVxyXG4gKiB3aXRoaW4gdGhlIGtleSByYW5nZSBvciBpbmRleC5cclxuICovXHJcbnZhciBJdGVyYXRpb25Db250cm9sbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSXRlcmF0aW9uQ29udHJvbGxlcihkYkN1cnNvcikge1xyXG4gICAgICAgIHRoaXMuZGJDdXJzb3IgPSBkYkN1cnNvcjtcclxuICAgICAgICB0aGlzLnNob3VsZFN0b3AgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5leHRLZXkgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEl0ZXJhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLCBcImlzRG9uZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3VsZFN0b3A7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSXRlcmF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUsIFwic2tpcFRvS2V5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV4dEtleTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShJdGVyYXRpb25Db250cm9sbGVyLnByb3RvdHlwZSwgXCJjdXJzb3JcIiwge1xyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGJDdXJzb3IgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHN0b3AgaXRlcmF0aW9uIGF0IGFueSBwb2ludC5cclxuICAgICAqL1xyXG4gICAgSXRlcmF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUuZG9uZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNob3VsZFN0b3AgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHNraXAgdG8gdGhhdCBuZXh0IGtleSwgd2hpY2ggY291bGQgYmVcclxuICAgICAqIGFuIGluZGV4IG9yIGEgcHJpbWFyeSBrZXkuXHJcbiAgICAgKi9cclxuICAgIEl0ZXJhdGlvbkNvbnRyb2xsZXIucHJvdG90eXBlLnNraXAgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5uZXh0S2V5ID0ga2V5O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogWW91IENBTk5PVCBkbyB0aGlzIHdpdGggYSBrZXlzT25seSBxdWVyeS5cclxuICAgICAqL1xyXG4gICAgSXRlcmF0aW9uQ29udHJvbGxlci5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB3cmFwUmVxdWVzdCh0aGlzLmRiQ3Vyc29yLmRlbGV0ZSgpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSXRlcmF0aW9uQ29udHJvbGxlcjtcclxufSgpKTtcclxuLyoqXHJcbiAqIFdyYXBzIGFuIElEQlRyYW5zYWN0aW9uIGFuZCBleHBvc2VzIGEgc3RvcmUoKSBtZXRob2QgdG8gZ2V0IGEgaGFuZGxlIHRvIGFcclxuICogc3BlY2lmaWMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxudmFyIFNpbXBsZURiVHJhbnNhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaW1wbGVEYlRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb247XHJcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbXBsZXRpb25EZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbi5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29tcGxldGlvbkRlZmVycmVkLnJlamVjdCh0cmFuc2FjdGlvbi5lcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGVycm9yID0gY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcihldmVudC50YXJnZXQuZXJyb3IpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgU2ltcGxlRGJUcmFuc2FjdGlvbi5vcGVuID0gZnVuY3Rpb24gKGRiLCBtb2RlLCBvYmplY3RTdG9yZU5hbWVzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVEYlRyYW5zYWN0aW9uKGRiLnRyYW5zYWN0aW9uKG9iamVjdFN0b3JlTmFtZXMsIG1vZGUpKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2ltcGxlRGJUcmFuc2FjdGlvbi5wcm90b3R5cGUsIFwiY29tcGxldGlvblByb21pc2VcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wbGV0aW9uRGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFNpbXBsZURiVHJhbnNhY3Rpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGlvbkRlZmVycmVkLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5hYm9ydGVkKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUcsICdBYm9ydGluZyB0cmFuc2FjdGlvbjonLCBlcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnQ2xpZW50LWluaXRpYXRlZCBhYm9ydCcpO1xyXG4gICAgICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zYWN0aW9uLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXHJcbiAgICAgKiBvcGVyYXRpb25zIHBlcmZvcm1lZCBvbiB0aGUgU2ltcGxlRGJTdG9yZSBoYXBwZW4gd2l0aGluIHRoZSBjb250ZXh0IG9mIHRoaXNcclxuICAgICAqIHRyYW5zYWN0aW9uIGFuZCBpdCBjYW5ub3QgYmUgdXNlZCBhbnltb3JlIG9uY2UgdGhlIHRyYW5zYWN0aW9uIGlzXHJcbiAgICAgKiBjb21wbGV0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHdlIGNhbid0IGFjdHVhbGx5IGVuZm9yY2UgdGhhdCB0aGUgS2V5VHlwZSBhbmQgVmFsdWVUeXBlIGFyZVxyXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXHJcbiAgICAgKi9cclxuICAgIFNpbXBsZURiVHJhbnNhY3Rpb24ucHJvdG90eXBlLnN0b3JlID0gZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xyXG4gICAgICAgIHZhciBzdG9yZSA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc3RvcmVOYW1lKTtcclxuICAgICAgICBhc3NlcnQoISFzdG9yZSwgJ09iamVjdCBzdG9yZSBub3QgcGFydCBvZiB0cmFuc2FjdGlvbjogJyArIHN0b3JlTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTaW1wbGVEYlN0b3JlKHN0b3JlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2ltcGxlRGJUcmFuc2FjdGlvbjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgd3JhcHBlciBhcm91bmQgYW4gSURCT2JqZWN0U3RvcmUgcHJvdmlkaW5nIGFuIEFQSSB0aGF0OlxyXG4gKlxyXG4gKiAxKSBIYXMgZ2VuZXJpYyBLZXlUeXBlIC8gVmFsdWVUeXBlIHBhcmFtZXRlcnMgdG8gcHJvdmlkZSBzdHJvbmdseS10eXBlZFxyXG4gKiBtZXRob2RzIGZvciBhY3RpbmcgYWdhaW5zdCB0aGUgb2JqZWN0IHN0b3JlLlxyXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcclxuICogbWV0aG9kIHJldHVybiBhIFBlcnNpc3RlbmNlUHJvbWlzZSBpbnN0ZWFkLlxyXG4gKiAzKSBQcm92aWRlcyBhIGhpZ2hlci1sZXZlbCBBUEkgdG8gYXZvaWQgbmVlZGluZyB0byBkbyBleGNlc3NpdmUgd3JhcHBpbmcgb2ZcclxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxyXG4gKi9cclxudmFyIFNpbXBsZURiU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaW1wbGVEYlN0b3JlKHN0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yZSA9IHN0b3JlO1xyXG4gICAgfVxyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGtleU9yVmFsdWUsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3Q7XHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ1BVVCcsIHRoaXMuc3RvcmUubmFtZSwga2V5T3JWYWx1ZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0ID0gdGhpcy5zdG9yZS5wdXQodmFsdWUsIGtleU9yVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ1BVVCcsIHRoaXMuc3RvcmUubmFtZSwgJzxhdXRvLWtleT4nLCBrZXlPclZhbHVlKTtcclxuICAgICAgICAgICAgcmVxdWVzdCA9IHRoaXMuc3RvcmUucHV0KGtleU9yVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gd3JhcFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgbmV3IHZhbHVlIGludG8gYW4gT2JqZWN0IFN0b3JlIGFuZCByZXR1cm5zIHRoZSBuZXcga2V5LiBTaW1pbGFyIHRvXHJcbiAgICAgKiBJbmRleGVkRGIncyBgYWRkKClgLCB0aGlzIG1ldGhvZCB3aWxsIGZhaWwgb24gcHJpbWFyeSBrZXkgY29sbGlzaW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIG9iamVjdCB0byB3cml0ZS5cclxuICAgICAqIEByZXR1cm4gVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHLCAnQUREJywgdGhpcy5zdG9yZS5uYW1lLCB2YWx1ZSwgdmFsdWUpO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ID0gdGhpcy5zdG9yZS5hZGQodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB3cmFwUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IGZyb20gdGhlIHNwZWNpZmllZCBzdG9yZSwgb3IgbnVsbFxyXG4gICAgICogaWYgbm8gb2JqZWN0IGV4aXN0cyB3aXRoIHRoZSBzcGVjaWZpZWQga2V5LlxyXG4gICAgICpcclxuICAgICAqIEBrZXkgVGhlIGtleSBvZiB0aGUgb2JqZWN0IHRvIGdldC5cclxuICAgICAqIEByZXR1cm4gVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cclxuICAgICAqL1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLnN0b3JlLmdldChrZXkpO1xyXG4gICAgICAgIC8vIFdlJ3JlIGRvaW5nIGFuIHVuc2FmZSBjYXN0IHRvIFZhbHVlVHlwZS5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHJldHVybiB3cmFwUmVxdWVzdChyZXF1ZXN0KS5uZXh0KGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgLy8gTm9ybWFsaXplIG5vbmV4aXN0ZW5jZSB0byBudWxsLlxyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRywgJ0dFVCcsIF90aGlzLnN0b3JlLm5hbWUsIGtleSwgcmVzdWx0KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTaW1wbGVEYlN0b3JlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRywgJ0RFTEVURScsIHRoaXMuc3RvcmUubmFtZSwga2V5KTtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHRoaXMuc3RvcmUuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSWYgd2UgZXZlciBuZWVkIG1vcmUgb2YgdGhlIGNvdW50IHZhcmlhbnRzLCB3ZSBjYW4gYWRkIG92ZXJsb2Fkcy4gRm9yIG5vdyxcclxuICAgICAqIGFsbCB3ZSBuZWVkIGlzIHRvIGNvdW50IGV2ZXJ5dGhpbmcgaW4gYSBzdG9yZS5cclxuICAgICAqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgc3RvcmUuXHJcbiAgICAgKi9cclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLmNvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUcsICdDT1VOVCcsIHRoaXMuc3RvcmUubmFtZSk7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB0aGlzLnN0b3JlLmNvdW50KCk7XHJcbiAgICAgICAgcmV0dXJuIHdyYXBSZXF1ZXN0KHJlcXVlc3QpO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLmxvYWRBbGwgPSBmdW5jdGlvbiAoaW5kZXhPclJhbmdlLCByYW5nZSkge1xyXG4gICAgICAgIHZhciBjdXJzb3IgPSB0aGlzLmN1cnNvcih0aGlzLm9wdGlvbnMoaW5kZXhPclJhbmdlLCByYW5nZSkpO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gW107XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0ZUN1cnNvcihjdXJzb3IsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLmRlbGV0ZUFsbCA9IGZ1bmN0aW9uIChpbmRleE9yUmFuZ2UsIHJhbmdlKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRywgJ0RFTEVURSBBTEwnLCB0aGlzLnN0b3JlLm5hbWUpO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zKGluZGV4T3JSYW5nZSwgcmFuZ2UpO1xyXG4gICAgICAgIG9wdGlvbnMua2V5c09ubHkgPSBmYWxzZTtcclxuICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5jdXJzb3Iob3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0ZUN1cnNvcihjdXJzb3IsIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIC8vIE5PVEU6IENhbGxpbmcgZGVsZXRlKCkgb24gYSBjdXJzb3IgaXMgZG9jdW1lbnRlZCBhcyBtb3JlIGVmZmljaWVudCB0aGFuXHJcbiAgICAgICAgICAgIC8vIGNhbGxpbmcgZGVsZXRlKCkgb24gYW4gb2JqZWN0IHN0b3JlIHdpdGggYSBzaW5nbGUga2V5XHJcbiAgICAgICAgICAgIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCT2JqZWN0U3RvcmUvZGVsZXRlKSxcclxuICAgICAgICAgICAgLy8gaG93ZXZlciwgdGhpcyByZXF1aXJlcyB1cyAqbm90KiB0byB1c2UgYSBrZXlzT25seSBjdXJzb3JcclxuICAgICAgICAgICAgLy8gKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJDdXJzb3IvZGVsZXRlKS4gV2VcclxuICAgICAgICAgICAgLy8gbWF5IHdhbnQgdG8gY29tcGFyZSB0aGUgcGVyZm9ybWFuY2Ugb2YgZWFjaCBtZXRob2QuXHJcbiAgICAgICAgICAgIHJldHVybiBjb250cm9sLmRlbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLml0ZXJhdGUgPSBmdW5jdGlvbiAob3B0aW9uc09yQ2FsbGJhY2ssIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnM7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgICAgIGNhbGxiYWNrID0gb3B0aW9uc09yQ2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc09yQ2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdXJzb3IgPSB0aGlzLmN1cnNvcihvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVyYXRlQ3Vyc29yKGN1cnNvciwgY2FsbGJhY2spO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHN0b3JlLCBidXQgd2FpdHMgZm9yIHRoZSBnaXZlbiBjYWxsYmFjayB0byBjb21wbGV0ZSBmb3JcclxuICAgICAqIGVhY2ggZW50cnkgYmVmb3JlIGl0ZXJhdGluZyB0aGUgbmV4dCBlbnRyeS4gVGhpcyBhbGxvd3MgdGhlIGNhbGxiYWNrIHRvIGRvXHJcbiAgICAgKiBhc3luY2hyb25vdXMgd29yayB0byBkZXRlcm1pbmUgaWYgdGhpcyBpdGVyYXRpb24gc2hvdWxkIGNvbnRpbnVlLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwcm92aWRlZCBjYWxsYmFjayBzaG91bGQgcmV0dXJuIGB0cnVlYCB0byBjb250aW51ZSBpdGVyYXRpb24sIGFuZFxyXG4gICAgICogYGZhbHNlYCBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIFNpbXBsZURiU3RvcmUucHJvdG90eXBlLml0ZXJhdGVTZXJpYWwgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgY3Vyc29yUmVxdWVzdCA9IHRoaXMuY3Vyc29yKHt9KTtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVycm9yID0gY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcihldmVudC50YXJnZXQuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSBldmVudC50YXJnZXQucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJzb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soY3Vyc29yLnByaW1hcnlLZXksIGN1cnNvci52YWx1ZSkubmV4dChmdW5jdGlvbiAoc2hvdWxkQ29udGludWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQ29udGludWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuaXRlcmF0ZUN1cnNvciA9IGZ1bmN0aW9uIChjdXJzb3JSZXF1ZXN0LCBmbikge1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gW107XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChldmVudC50YXJnZXQuZXJyb3IpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjdXJzb3JSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnNvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udHJvbGxlciA9IG5ldyBJdGVyYXRpb25Db250cm9sbGVyKGN1cnNvcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlclJlc3VsdCA9IGZuKGN1cnNvci5wcmltYXJ5S2V5LCBjdXJzb3IudmFsdWUsIGNvbnRyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJSZXN1bHQgaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZVByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlclByb21pc2UgPSB1c2VyUmVzdWx0LmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHVzZXJQcm9taXNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyLmlzRG9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRyb2xsZXIuc2tpcFRvS2V5ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3IuY29udGludWUoY29udHJvbGxlci5za2lwVG9LZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocmVzdWx0cyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUub3B0aW9ucyA9IGZ1bmN0aW9uIChpbmRleE9yUmFuZ2UsIHJhbmdlKSB7XHJcbiAgICAgICAgdmFyIGluZGV4TmFtZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAoaW5kZXhPclJhbmdlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbmRleE9yUmFuZ2UgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleE5hbWUgPSBpbmRleE9yUmFuZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQocmFuZ2UgPT09IHVuZGVmaW5lZCwgJzNyZCBhcmd1bWVudCBtdXN0IG5vdCBiZSBkZWZpbmVkIGlmIDJuZCBpcyBhIHJhbmdlLicpO1xyXG4gICAgICAgICAgICAgICAgcmFuZ2UgPSBpbmRleE9yUmFuZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgaW5kZXg6IGluZGV4TmFtZSwgcmFuZ2U6IHJhbmdlIH07XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlRGJTdG9yZS5wcm90b3R5cGUuY3Vyc29yID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGlyZWN0aW9uID0gJ25leHQnO1xyXG4gICAgICAgIGlmIChvcHRpb25zLnJldmVyc2UpIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uID0gJ3ByZXYnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3B0aW9ucy5pbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnN0b3JlLmluZGV4KG9wdGlvbnMuaW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5rZXlzT25seSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4Lm9wZW5LZXlDdXJzb3Iob3B0aW9ucy5yYW5nZSwgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleC5vcGVuQ3Vyc29yKG9wdGlvbnMucmFuZ2UsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0b3JlLm9wZW5DdXJzb3Iob3B0aW9ucy5yYW5nZSwgZGlyZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNpbXBsZURiU3RvcmU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxyXG4gKiBoYW5kbGVycyB0byByZXNvbHZlIC8gcmVqZWN0IHRoZSBQZXJzaXN0ZW5jZVByb21pc2UgYXMgYXBwcm9wcmlhdGUuXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwUmVxdWVzdChyZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBjaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGV2ZW50LnRhcmdldC5lcnJvcik7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG59XHJcbi8vIEd1YXJkIHNvIHdlIG9ubHkgcmVwb3J0IHRoZSBlcnJvciBvbmNlLlxyXG52YXIgcmVwb3J0ZWRJT1NFcnJvciA9IGZhbHNlO1xyXG5mdW5jdGlvbiBjaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKGVycm9yKSB7XHJcbiAgICB2YXIgaU9TVmVyc2lvbiA9IFNpbXBsZURiLmdldElPU1ZlcnNpb24odXRpbC5nZXRVQSgpKTtcclxuICAgIGlmIChpT1NWZXJzaW9uID49IDEyLjIgJiYgaU9TVmVyc2lvbiA8IDEzKSB7XHJcbiAgICAgICAgdmFyIElPU19FUlJPUiA9ICdBbiBpbnRlcm5hbCBlcnJvciB3YXMgZW5jb3VudGVyZWQgaW4gdGhlIEluZGV4ZWQgRGF0YWJhc2Ugc2VydmVyJztcclxuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmRleE9mKElPU19FUlJPUikgPj0gMCkge1xyXG4gICAgICAgICAgICAvLyBXcmFwIGVycm9yIGluIGEgbW9yZSBkZXNjcmlwdGl2ZSBvbmUuXHJcbiAgICAgICAgICAgIHZhciBuZXdFcnJvcl8xID0gbmV3IEZpcmVzdG9yZUVycm9yKCdpbnRlcm5hbCcsIFwiSU9TX0lOREVYRUREQl9CVUcxOiBJbmRleGVkRGIgaGFzIHRocm93biAnXCIgKyBJT1NfRVJST1IgKyBcIicuIFRoaXMgaXMgbGlrZWx5IFwiICtcclxuICAgICAgICAgICAgICAgIFwiZHVlIHRvIGFuIHVuYXZvaWRhYmxlIGJ1ZyBpbiBpT1MuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IFwiICtcclxuICAgICAgICAgICAgICAgIFwiZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuXCIpO1xyXG4gICAgICAgICAgICBpZiAoIXJlcG9ydGVkSU9TRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHJlcG9ydGVkSU9TRXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhyb3cgYSBnbG9iYWwgZXhjZXB0aW9uIG91dHNpZGUgb2YgdGhpcyBwcm9taXNlIGNoYWluLCBmb3IgdGhlIHVzZXIgdG9cclxuICAgICAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGNhdGNoLlxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3RXJyb3JfMTtcclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdFcnJvcl8xO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBlcnJvcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIEEgbXV0YXRpb24gcXVldWUgZm9yIGEgc3BlY2lmaWMgdXNlciwgYmFja2VkIGJ5IEluZGV4ZWREQi4gKi9cclxudmFyIEluZGV4ZWREYk11dGF0aW9uUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJNdXRhdGlvblF1ZXVlKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VySWQgKGUuZy4gbnVsbCBVSUQgPT4gXCJcIiB1c2VySWQpIHVzZWQgdG8gc3RvcmUgL1xyXG4gICAgICogcmV0cmlldmUgbXV0YXRpb25zLlxyXG4gICAgICovXHJcbiAgICB1c2VySWQsIHNlcmlhbGl6ZXIsIGluZGV4TWFuYWdlciwgcmVmZXJlbmNlRGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gaW5kZXhNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSByZWZlcmVuY2VEZWxlZ2F0ZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYWNoZXMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcy4gSWYgdGhlIG11dGF0aW9uXHJcbiAgICAgICAgICogaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIEluZGV4ZWREYiwgdGhlIGNhY2hlZCB2YWx1ZSBtYXkgY29udGludWUgdG9cclxuICAgICAgICAgKiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBiYXRjaCdzIGRvY3VtZW50IGtleXMuIFRvIHJlbW92ZSBhIGNhY2hlZCB2YWx1ZVxyXG4gICAgICAgICAqIGxvY2FsbHksIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgc2hvdWxkIGJlIGludm9rZWQgZWl0aGVyIGRpcmVjdGx5XHJcbiAgICAgICAgICogb3IgdGhyb3VnaCBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV2l0aCBtdWx0aS10YWIsIHdoZW4gdGhlIHByaW1hcnkgY2xpZW50IGFja25vd2xlZGdlcyBvciByZWplY3RzIGEgbXV0YXRpb24sXHJcbiAgICAgICAgICogdGhpcyBjYWNoZSBpcyB1c2VkIGJ5IHNlY29uZGFyeSBjbGllbnRzIHRvIGludmFsaWRhdGUgdGhlIGxvY2FsXHJcbiAgICAgICAgICogdmlldyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBwcmV2aW91c2x5IGFmZmVjdGVkIGJ5IHRoZSBtdXRhdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRLZXlzQnlCYXRjaElkID0ge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyLlxyXG4gICAgICogQHBhcmFtIHVzZXIgVGhlIHVzZXIgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIG11dGF0aW9uIHF1ZXVlLlxyXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHdoZW4gcGVyc2lzdGluZyB0byBJbmRleGVkRGIuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUuZm9yVXNlciA9IGZ1bmN0aW9uICh1c2VyLCBzZXJpYWxpemVyLCBpbmRleE1hbmFnZXIsIHJlZmVyZW5jZURlbGVnYXRlKSB7XHJcbiAgICAgICAgLy8gVE9ETyhtY2cpOiBGaWd1cmUgb3V0IHdoYXQgY29uc3RyYWludHMgdGhlcmUgYXJlIG9uIHVzZXJJRHNcclxuICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBhcmUgdGhlcmUgYW55IHJlc2VydmVkIGNoYXJhY3RlcnM/IGFyZSBlbXB0eSBpZHMgYWxsb3dlZD9cclxuICAgICAgICAvLyBGb3IgdGhlIG1vbWVudCBzdG9yZSB0aGVzZSB0b2dldGhlciBpbiB0aGUgc2FtZSBtdXRhdGlvbnMgdGFibGUgYXNzdW1pbmdcclxuICAgICAgICAvLyB0aGF0IGVtcHR5IHVzZXJJRHMgYXJlbid0IGFsbG93ZWQuXHJcbiAgICAgICAgYXNzZXJ0KHVzZXIudWlkICE9PSAnJywgJ1VzZXJJRCBtdXN0IG5vdCBiZSBhbiBlbXB0eSBzdHJpbmcuJyk7XHJcbiAgICAgICAgdmFyIHVzZXJJZCA9IHVzZXIuaXNBdXRoZW50aWNhdGVkKCkgPyB1c2VyLnVpZCA6ICcnO1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhlZERiTXV0YXRpb25RdWV1ZSh1c2VySWQsIHNlcmlhbGl6ZXIsIGluZGV4TWFuYWdlciwgcmVmZXJlbmNlRGVsZWdhdGUpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmNoZWNrRW1wdHkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgZW1wdHkgPSB0cnVlO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFt0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZXSwgW3RoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldKTtcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgaW5kZXg6IERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXgsIHJhbmdlOiByYW5nZSB9LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29udHJvbCkge1xyXG4gICAgICAgICAgICBlbXB0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBlbXB0eTsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuYWNrbm93bGVkZ2VCYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2gsIHN0cmVhbVRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TXV0YXRpb25RdWV1ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBtZXRhZGF0YS5sYXN0U3RyZWFtVG9rZW4gPSBjb252ZXJ0U3RyZWFtVG9rZW4oc3RyZWFtVG9rZW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gbXV0YXRpb25RdWV1ZXNTdG9yZSh0cmFuc2FjdGlvbikucHV0KG1ldGFkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRMYXN0U3RyZWFtVG9rZW4gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNdXRhdGlvblF1ZXVlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7IHJldHVybiBtZXRhZGF0YS5sYXN0U3RyZWFtVG9rZW47IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLnNldExhc3RTdHJlYW1Ub2tlbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgc3RyZWFtVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNdXRhdGlvblF1ZXVlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmxhc3RTdHJlYW1Ub2tlbiA9IGNvbnZlcnRTdHJlYW1Ub2tlbihzdHJlYW1Ub2tlbik7XHJcbiAgICAgICAgICAgIHJldHVybiBtdXRhdGlvblF1ZXVlc1N0b3JlKHRyYW5zYWN0aW9uKS5wdXQobWV0YWRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmFkZE11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGxvY2FsV3JpdGVUaW1lLCBiYXNlTXV0YXRpb25zLCBtdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkb2N1bWVudFN0b3JlID0gZG9jdW1lbnRNdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uU3RvcmUgPSBtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgLy8gVGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBpbiBDaHJvbWUgKGFuZCBGaXJlZm94KSBkb2VzIG5vdCBoYW5kbGVcclxuICAgICAgICAvLyBjb21wb3VuZCBpbmRpY2VzIHRoYXQgaW5jbHVkZSBhdXRvLWdlbmVyYXRlZCBrZXlzIGNvcnJlY3RseS4gVG8gZW5zdXJlXHJcbiAgICAgICAgLy8gdGhhdCB0aGUgaW5kZXggZW50cnkgaXMgYWRkZWQgY29ycmVjdGx5IGluIGFsbCBicm93c2Vycywgd2UgcGVyZm9ybSB0d29cclxuICAgICAgICAvLyB3cml0ZXM6IFRoZSBmaXJzdCB3cml0ZSBpcyB1c2VkIHRvIHJldHJpZXZlIHRoZSBuZXh0IGF1dG8tZ2VuZXJhdGVkIEJhdGNoXHJcbiAgICAgICAgLy8gSUQsIGFuZCB0aGUgc2Vjb25kIHdyaXRlIHBvcHVsYXRlcyB0aGUgaW5kZXggYW5kIHN0b3JlcyB0aGUgYWN0dWFsXHJcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2guXHJcbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD03MDE5NzJcclxuICAgICAgICAvLyBXZSB3cml0ZSBhbiBlbXB0eSBvYmplY3QgdG8gb2J0YWluIGtleVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uU3RvcmUuYWRkKHt9KS5uZXh0KGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgYmF0Y2hJZCA9PT0gJ251bWJlcicsICdBdXRvLWdlbmVyYXRlZCBrZXkgaXMgbm90IGEgbnVtYmVyJyk7XHJcbiAgICAgICAgICAgIHZhciBiYXRjaCA9IG5ldyBNdXRhdGlvbkJhdGNoKGJhdGNoSWQsIGxvY2FsV3JpdGVUaW1lLCBiYXNlTXV0YXRpb25zLCBtdXRhdGlvbnMpO1xyXG4gICAgICAgICAgICB2YXIgZGJCYXRjaCA9IF90aGlzLnNlcmlhbGl6ZXIudG9EYk11dGF0aW9uQmF0Y2goX3RoaXMudXNlcklkLCBiYXRjaCk7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvblBhcmVudHMgPSBuZXcgU29ydGVkU2V0KGZ1bmN0aW9uIChsLCByKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcihsLmNhbm9uaWNhbFN0cmluZygpLCByLmNhbm9uaWNhbFN0cmluZygpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgbXV0YXRpb25zXzEgPSBtdXRhdGlvbnM7IF9pIDwgbXV0YXRpb25zXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBtdXRhdGlvbnNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhLZXkgPSBEYkRvY3VtZW50TXV0YXRpb24ua2V5KF90aGlzLnVzZXJJZCwgbXV0YXRpb24ua2V5LnBhdGgsIGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvblBhcmVudHMgPSBjb2xsZWN0aW9uUGFyZW50cy5hZGQobXV0YXRpb24ua2V5LnBhdGgucG9wTGFzdCgpKTtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gobXV0YXRpb25TdG9yZS5wdXQoZGJCYXRjaCkpO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChkb2N1bWVudFN0b3JlLnB1dChpbmRleEtleSwgRGJEb2N1bWVudE11dGF0aW9uLlBMQUNFSE9MREVSKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29sbGVjdGlvblBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0cmFuc2FjdGlvbiwgcGFyZW50KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmRvY3VtZW50S2V5c0J5QmF0Y2hJZFtiYXRjaElkXSA9IGJhdGNoLmtleXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcykubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBiYXRjaDsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUubG9va3VwTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuZ2V0KGJhdGNoSWQpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkYkJhdGNoKSB7XHJcbiAgICAgICAgICAgIGlmIChkYkJhdGNoKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoZGJCYXRjaC51c2VySWQgPT09IF90aGlzLnVzZXJJZCwgXCJVbmV4cGVjdGVkIHVzZXIgJ1wiICsgZGJCYXRjaC51c2VySWQgKyBcIicgZm9yIG11dGF0aW9uIGJhdGNoIFwiICsgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJNdXRhdGlvbkJhdGNoKGRiQmF0Y2gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmxvb2t1cE11dGF0aW9uS2V5cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2hJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRLZXlzQnlCYXRjaElkW2JhdGNoSWRdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmRvY3VtZW50S2V5c0J5QmF0Y2hJZFtiYXRjaElkXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb29rdXBNdXRhdGlvbkJhdGNoKHRyYW5zYWN0aW9uLCBiYXRjaElkKS5uZXh0KGZ1bmN0aW9uIChiYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJhdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleXMgPSBiYXRjaC5rZXlzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRLZXlzQnlCYXRjaElkW2JhdGNoSWRdID0ga2V5cztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBuZXh0QmF0Y2hJZCA9IGJhdGNoSWQgKyAxO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoW3RoaXMudXNlcklkLCBuZXh0QmF0Y2hJZF0pO1xyXG4gICAgICAgIHZhciBmb3VuZEJhdGNoID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgaW5kZXg6IERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXgsIHJhbmdlOiByYW5nZSB9LCBmdW5jdGlvbiAoa2V5LCBkYkJhdGNoLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIGlmIChkYkJhdGNoLnVzZXJJZCA9PT0gX3RoaXMudXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoZGJCYXRjaC5iYXRjaElkID49IG5leHRCYXRjaElkLCAnU2hvdWxkIGhhdmUgZm91bmQgbXV0YXRpb24gYWZ0ZXIgJyArIG5leHRCYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIGZvdW5kQmF0Y2ggPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYk11dGF0aW9uQmF0Y2goZGJCYXRjaCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZm91bmRCYXRjaDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLnVwcGVyQm91bmQoW1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJJZCxcclxuICAgICAgICAgICAgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgdmFyIGJhdGNoSWQgPSBCQVRDSElEX1VOS05PV047XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IGluZGV4OiBEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0luZGV4LCByYW5nZTogcmFuZ2UsIHJldmVyc2U6IHRydWUgfSwgZnVuY3Rpb24gKGtleSwgZGJCYXRjaCwgY29udHJvbCkge1xyXG4gICAgICAgICAgICBiYXRjaElkID0gZGJCYXRjaC5iYXRjaElkO1xyXG4gICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBiYXRjaElkOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFt0aGlzLnVzZXJJZCwgQkFUQ0hJRF9VTktOT1dOXSwgW3RoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldKTtcclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5sb2FkQWxsKERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXgsIHJhbmdlKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZGJCYXRjaGVzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYkJhdGNoZXMubWFwKGZ1bmN0aW9uIChkYkJhdGNoKSB7IHJldHVybiBfdGhpcy5zZXJpYWxpemVyLmZyb21EYk11dGF0aW9uQmF0Y2goZGJCYXRjaCk7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXHJcbiAgICAgICAgLy8gdGhlIGdpdmVuIGRvY3VtZW50S2V5LlxyXG4gICAgICAgIHZhciBpbmRleFByZWZpeCA9IERiRG9jdW1lbnRNdXRhdGlvbi5wcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCBkb2N1bWVudEtleS5wYXRoKTtcclxuICAgICAgICB2YXIgaW5kZXhTdGFydCA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaW5kZXhQcmVmaXgpO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gW107XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50TXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgcmFuZ2U6IGluZGV4U3RhcnQgfSwgZnVuY3Rpb24gKGluZGV4S2V5LCBfLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VySUQgPSBpbmRleEtleVswXSwgZW5jb2RlZFBhdGggPSBpbmRleEtleVsxXSwgYmF0Y2hJZCA9IGluZGV4S2V5WzJdO1xyXG4gICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXHJcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcclxuICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxyXG4gICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcclxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxyXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXHJcbiAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cclxuICAgICAgICAgICAgdmFyIHBhdGggPSBkZWNvZGUoZW5jb2RlZFBhdGgpO1xyXG4gICAgICAgICAgICBpZiAodXNlcklEICE9PSBfdGhpcy51c2VySWQgfHwgIWRvY3VtZW50S2V5LnBhdGguaXNFcXVhbChwYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gTG9vayB1cCB0aGUgbXV0YXRpb24gYmF0Y2ggaW4gdGhlIHN0b3JlLlxyXG4gICAgICAgICAgICByZXR1cm4gbXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgICAgICAuZ2V0KGJhdGNoSWQpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobXV0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmICghbXV0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBmYWlsKCdEYW5nbGluZyBkb2N1bWVudC1tdXRhdGlvbiByZWZlcmVuY2UgZm91bmQ6ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleEtleSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgd2hpY2ggcG9pbnRzIHRvICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFzc2VydChtdXRhdGlvbi51c2VySWQgPT09IF90aGlzLnVzZXJJZCwgXCJVbmV4cGVjdGVkIHVzZXIgJ1wiICsgbXV0YXRpb24udXNlcklkICsgXCInIGZvciBtdXRhdGlvbiBiYXRjaCBcIiArIGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiTXV0YXRpb25CYXRjaChtdXRhdGlvbikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHRzOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVuaXF1ZUJhdGNoSURzID0gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICBkb2N1bWVudEtleXMuZm9yRWFjaChmdW5jdGlvbiAoZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4U3RhcnQgPSBEYkRvY3VtZW50TXV0YXRpb24ucHJlZml4Rm9yUGF0aChfdGhpcy51c2VySWQsIGRvY3VtZW50S2V5LnBhdGgpO1xyXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGluZGV4U3RhcnQpO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IGRvY3VtZW50TXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pLml0ZXJhdGUoeyByYW5nZTogcmFuZ2UgfSwgZnVuY3Rpb24gKGluZGV4S2V5LCBfLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlcklEID0gaW5kZXhLZXlbMF0sIGVuY29kZWRQYXRoID0gaW5kZXhLZXlbMV0sIGJhdGNoSUQgPSBpbmRleEtleVsyXTtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcclxuICAgICAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcclxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxyXG4gICAgICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxyXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBkZWNvZGUoZW5jb2RlZFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJJRCAhPT0gX3RoaXMudXNlcklkIHx8ICFkb2N1bWVudEtleS5wYXRoLmlzRXF1YWwocGF0aCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1bmlxdWVCYXRjaElEcyA9IHVuaXF1ZUJhdGNoSURzLmFkZChiYXRjaElEKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2gocHJvbWlzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2hlcyh0cmFuc2FjdGlvbiwgdW5pcXVlQmF0Y2hJRHMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KCFxdWVyeS5pc0RvY3VtZW50UXVlcnkoKSwgXCJEb2N1bWVudCBxdWVyaWVzIHNob3VsZG4ndCBnbyBkb3duIHRoaXMgcGF0aFwiKTtcclxuICAgICAgICBhc3NlcnQoIXF1ZXJ5LmlzQ29sbGVjdGlvbkdyb3VwUXVlcnkoKSwgJ0NvbGxlY3Rpb25Hcm91cCBxdWVyaWVzIHNob3VsZCBiZSBoYW5kbGVkIGluIExvY2FsRG9jdW1lbnRzVmlldycpO1xyXG4gICAgICAgIHZhciBxdWVyeVBhdGggPSBxdWVyeS5wYXRoO1xyXG4gICAgICAgIHZhciBpbW1lZGlhdGVDaGlsZHJlbkxlbmd0aCA9IHF1ZXJ5UGF0aC5sZW5ndGggKyAxO1xyXG4gICAgICAgIC8vIFRPRE8obWNnKTogQWN0dWFsbHkgaW1wbGVtZW50IGEgc2luZ2xlLWNvbGxlY3Rpb24gcXVlcnlcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFRoaXMgaXMgYWN0dWFsbHkgZXhlY3V0aW5nIGFuIGFuY2VzdG9yIHF1ZXJ5LCB0cmF2ZXJzaW5nIHRoZSB3aG9sZVxyXG4gICAgICAgIC8vIHN1YnRyZWUgYmVsb3cgdGhlIGNvbGxlY3Rpb24gd2hpY2ggY2FuIGJlIGhvcnJpZmljYWxseSBpbmVmZmljaWVudCBmb3JcclxuICAgICAgICAvLyBzb21lIHN0cnVjdHVyZXMuIFRoZSByaWdodCB3YXkgdG8gc29sdmUgdGhpcyBpcyB0byBpbXBsZW1lbnQgdGhlIGZ1bGxcclxuICAgICAgICAvLyB2YWx1ZSBpbmRleCwgYnV0IHRoYXQncyBub3QgaW4gdGhlIGNhcmRzIGluIHRoZSBuZWFyIGZ1dHVyZSBzbyB0aGlzIGlzXHJcbiAgICAgICAgLy8gdGhlIGJlc3Qgd2UgY2FuIGRvIGZvciB0aGUgbW9tZW50LlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gU2luY2Ugd2UgZG9uJ3QgeWV0IGluZGV4IHRoZSBhY3R1YWwgcHJvcGVydGllcyBpbiB0aGUgbXV0YXRpb25zLCBvdXJcclxuICAgICAgICAvLyBjdXJyZW50IGFwcHJvYWNoIGlzIHRvIGp1c3QgcmV0dXJuIGFsbCBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgYWZmZWN0XHJcbiAgICAgICAgLy8gZG9jdW1lbnRzIGluIHRoZSBjb2xsZWN0aW9uIGJlaW5nIHF1ZXJpZWQuXHJcbiAgICAgICAgdmFyIGluZGV4UHJlZml4ID0gRGJEb2N1bWVudE11dGF0aW9uLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIHF1ZXJ5UGF0aCk7XHJcbiAgICAgICAgdmFyIGluZGV4U3RhcnQgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGluZGV4UHJlZml4KTtcclxuICAgICAgICAvLyBDb2xsZWN0IHVwIHVuaXF1ZSBiYXRjaElEcyBlbmNvdW50ZXJlZCBkdXJpbmcgYSBzY2FuIG9mIHRoZSBpbmRleC4gVXNlIGFcclxuICAgICAgICAvLyBTb3J0ZWRTZXQgdG8gYWNjdW11bGF0ZSBiYXRjaCBJRHMgc28gdGhleSBjYW4gYmUgdHJhdmVyc2VkIGluIG9yZGVyIGluIGFcclxuICAgICAgICAvLyBzY2FuIG9mIHRoZSBtYWluIHRhYmxlLlxyXG4gICAgICAgIHZhciB1bmlxdWVCYXRjaElEcyA9IG5ldyBTb3J0ZWRTZXQocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50TXV0YXRpb25zU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgcmFuZ2U6IGluZGV4U3RhcnQgfSwgZnVuY3Rpb24gKGluZGV4S2V5LCBfLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VySUQgPSBpbmRleEtleVswXSwgZW5jb2RlZFBhdGggPSBpbmRleEtleVsxXSwgYmF0Y2hJRCA9IGluZGV4S2V5WzJdO1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGRlY29kZShlbmNvZGVkUGF0aCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VySUQgIT09IF90aGlzLnVzZXJJZCB8fCAhcXVlcnlQYXRoLmlzUHJlZml4T2YocGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGVcclxuICAgICAgICAgICAgLy8gcXVlcnkgcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnXHJcbiAgICAgICAgICAgIC8vIGNhbid0IG1hdGNoIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cclxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcclxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cclxuICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSBpbW1lZGlhdGVDaGlsZHJlbkxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVuaXF1ZUJhdGNoSURzID0gdW5pcXVlQmF0Y2hJRHMuYWRkKGJhdGNoSUQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2hlcyh0cmFuc2FjdGlvbiwgdW5pcXVlQmF0Y2hJRHMpOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5sb29rdXBNdXRhdGlvbkJhdGNoZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoSURzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIC8vIFRPRE8ocm9ja3dvb2QpOiBJbXBsZW1lbnQgdGhpcyB1c2luZyBpdGVyYXRlLlxyXG4gICAgICAgIGJhdGNoSURzLmZvckVhY2goZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChtdXRhdGlvbnNTdG9yZSh0cmFuc2FjdGlvbilcclxuICAgICAgICAgICAgICAgIC5nZXQoYmF0Y2hJZClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZmFpbCgnRGFuZ2xpbmcgZG9jdW1lbnQtbXV0YXRpb24gcmVmZXJlbmNlIGZvdW5kLCAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3doaWNoIHBvaW50cyB0byAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQobXV0YXRpb24udXNlcklkID09PSBfdGhpcy51c2VySWQsIFwiVW5leHBlY3RlZCB1c2VyICdcIiArIG11dGF0aW9uLnVzZXJJZCArIFwiJyBmb3IgbXV0YXRpb24gYmF0Y2ggXCIgKyBiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChfdGhpcy5zZXJpYWxpemVyLmZyb21EYk11dGF0aW9uQmF0Y2gobXV0YXRpb24pKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcykubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHRzOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHJlbW92ZU11dGF0aW9uQmF0Y2godHJhbnNhY3Rpb24uc2ltcGxlRGJUcmFuc2FjdGlvbiwgdGhpcy51c2VySWQsIGJhdGNoKS5uZXh0KGZ1bmN0aW9uIChyZW1vdmVkRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKGJhdGNoLmJhdGNoSWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHJlbW92ZWREb2N1bWVudHMsIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVNdXRhdGlvblJlZmVyZW5jZSh0cmFuc2FjdGlvbiwga2V5KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUucmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5kb2N1bWVudEtleXNCeUJhdGNoSWRbYmF0Y2hJZF07XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VtcHR5KHR4bikubmV4dChmdW5jdGlvbiAoZW1wdHkpIHtcclxuICAgICAgICAgICAgaWYgKCFlbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGRvY3VtZW50TXV0YXRpb25zIGluZGV4IGlmXHJcbiAgICAgICAgICAgIC8vIHRoZSBxdWV1ZSBpcyBlbXB0eS5cclxuICAgICAgICAgICAgdmFyIHN0YXJ0UmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKERiRG9jdW1lbnRNdXRhdGlvbi5wcmVmaXhGb3JVc2VyKF90aGlzLnVzZXJJZCkpO1xyXG4gICAgICAgICAgICB2YXIgZGFuZ2xpbmdNdXRhdGlvblJlZmVyZW5jZXMgPSBbXTtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50TXV0YXRpb25zU3RvcmUodHhuKVxyXG4gICAgICAgICAgICAgICAgLml0ZXJhdGUoeyByYW5nZTogc3RhcnRSYW5nZSB9LCBmdW5jdGlvbiAoa2V5LCBfLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlcklEID0ga2V5WzBdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJJRCAhPT0gX3RoaXMudXNlcklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGggPSBkZWNvZGUoa2V5WzFdKTtcclxuICAgICAgICAgICAgICAgICAgICBkYW5nbGluZ011dGF0aW9uUmVmZXJlbmNlcy5wdXNoKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KGRhbmdsaW5nTXV0YXRpb25SZWZlcmVuY2VzLmxlbmd0aCA9PT0gMCwgJ0RvY3VtZW50IGxlYWsgLS0gZGV0ZWN0ZWQgZGFuZ2xpbmcgbXV0YXRpb24gcmVmZXJlbmNlcyB3aGVuIHF1ZXVlIGlzIGVtcHR5LiAnICtcclxuICAgICAgICAgICAgICAgICAgICAnRGFuZ2xpbmcga2V5czogJyArXHJcbiAgICAgICAgICAgICAgICAgICAgZGFuZ2xpbmdNdXRhdGlvblJlZmVyZW5jZXMubWFwKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwLmNhbm9uaWNhbFN0cmluZygpOyB9KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYk11dGF0aW9uUXVldWUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uUXVldWVDb250YWluc0tleSh0eG4sIHRoaXMudXNlcklkLCBrZXkpO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkgKHN0YXRlIGlzIGhlbGQgaW4gbWVtb3J5IGluIG90aGVyIGNsaWVudHMpLlxyXG4gICAgLyoqIFJldHVybnMgdGhlIG11dGF0aW9uIHF1ZXVlJ3MgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuICovXHJcbiAgICBJbmRleGVkRGJNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRNdXRhdGlvblF1ZXVlTWV0YWRhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvblF1ZXVlc1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuZ2V0KHRoaXMudXNlcklkKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChtZXRhZGF0YSB8fFxyXG4gICAgICAgICAgICAgICAgbmV3IERiTXV0YXRpb25RdWV1ZShfdGhpcy51c2VySWQsIEJBVENISURfVU5LTk9XTiwgXHJcbiAgICAgICAgICAgICAgICAvKmxhc3RTdHJlYW1Ub2tlbj0qLyAnJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbmRleGVkRGJNdXRhdGlvblF1ZXVlO1xyXG59KCkpO1xyXG4vKipcclxuICogQHJldHVybiB0cnVlIGlmIHRoZSBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIgY29udGFpbnMgYSBwZW5kaW5nXHJcbiAqICAgICAgICAgbXV0YXRpb24gZm9yIHRoZSBnaXZlbiBrZXkuXHJcbiAqL1xyXG5mdW5jdGlvbiBtdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkodHhuLCB1c2VySWQsIGtleSkge1xyXG4gICAgdmFyIGluZGV4S2V5ID0gRGJEb2N1bWVudE11dGF0aW9uLnByZWZpeEZvclBhdGgodXNlcklkLCBrZXkucGF0aCk7XHJcbiAgICB2YXIgZW5jb2RlZFBhdGggPSBpbmRleEtleVsxXTtcclxuICAgIHZhciBzdGFydFJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpbmRleEtleSk7XHJcbiAgICB2YXIgY29udGFpbnNLZXkgPSBmYWxzZTtcclxuICAgIHJldHVybiBkb2N1bWVudE11dGF0aW9uc1N0b3JlKHR4bilcclxuICAgICAgICAuaXRlcmF0ZSh7IHJhbmdlOiBzdGFydFJhbmdlLCBrZXlzT25seTogdHJ1ZSB9LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29udHJvbCkge1xyXG4gICAgICAgIHZhciB1c2VySUQgPSBrZXlbMF0sIGtleVBhdGggPSBrZXlbMV0sIC8qYmF0Y2hJRCovIF8gPSBrZXlbMl07XHJcbiAgICAgICAgaWYgKHVzZXJJRCA9PT0gdXNlcklkICYmIGtleVBhdGggPT09IGVuY29kZWRQYXRoKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5zS2V5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICB9KVxyXG4gICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvbnRhaW5zS2V5OyB9KTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIGFueSBtdXRhdGlvbiBxdWV1ZSBjb250YWlucyB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovXHJcbmZ1bmN0aW9uIG11dGF0aW9uUXVldWVzQ29udGFpbktleSh0eG4sIGRvY0tleSkge1xyXG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XHJcbiAgICByZXR1cm4gbXV0YXRpb25RdWV1ZXNTdG9yZSh0eG4pXHJcbiAgICAgICAgLml0ZXJhdGVTZXJpYWwoZnVuY3Rpb24gKHVzZXJJZCkge1xyXG4gICAgICAgIHJldHVybiBtdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkodHhuLCB1c2VySWQsIGRvY0tleSkubmV4dChmdW5jdGlvbiAoY29udGFpbnNLZXkpIHtcclxuICAgICAgICAgICAgaWYgKGNvbnRhaW5zS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCFjb250YWluc0tleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZvdW5kOyB9KTtcclxufVxyXG4vKipcclxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cclxuICogQHJldHVybiBBIFBlcnNpc3RlbmNlUHJvbWlzZSBvZiB0aGUgZG9jdW1lbnQgbXV0YXRpb25zIHRoYXQgd2VyZSByZW1vdmVkLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVtb3ZlTXV0YXRpb25CYXRjaCh0eG4sIHVzZXJJZCwgYmF0Y2gpIHtcclxuICAgIHZhciBtdXRhdGlvblN0b3JlID0gdHhuLnN0b3JlKERiTXV0YXRpb25CYXRjaC5zdG9yZSk7XHJcbiAgICB2YXIgaW5kZXhUeG4gPSB0eG4uc3RvcmUoRGJEb2N1bWVudE11dGF0aW9uLnN0b3JlKTtcclxuICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2Uub25seShiYXRjaC5iYXRjaElkKTtcclxuICAgIHZhciBudW1EZWxldGVkID0gMDtcclxuICAgIHZhciByZW1vdmVQcm9taXNlID0gbXV0YXRpb25TdG9yZS5pdGVyYXRlKHsgcmFuZ2U6IHJhbmdlIH0sIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBjb250cm9sKSB7XHJcbiAgICAgICAgbnVtRGVsZXRlZCsrO1xyXG4gICAgICAgIHJldHVybiBjb250cm9sLmRlbGV0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBwcm9taXNlcy5wdXNoKHJlbW92ZVByb21pc2UubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KG51bURlbGV0ZWQgPT09IDEsICdEYW5nbGluZyBkb2N1bWVudC1tdXRhdGlvbiByZWZlcmVuY2UgZm91bmQ6IE1pc3NpbmcgYmF0Y2ggJyArXHJcbiAgICAgICAgICAgIGJhdGNoLmJhdGNoSWQpO1xyXG4gICAgfSkpO1xyXG4gICAgdmFyIHJlbW92ZWREb2N1bWVudHMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBiYXRjaC5tdXRhdGlvbnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uID0gX2FbX2ldO1xyXG4gICAgICAgIHZhciBpbmRleEtleSA9IERiRG9jdW1lbnRNdXRhdGlvbi5rZXkodXNlcklkLCBtdXRhdGlvbi5rZXkucGF0aCwgYmF0Y2guYmF0Y2hJZCk7XHJcbiAgICAgICAgcHJvbWlzZXMucHVzaChpbmRleFR4bi5kZWxldGUoaW5kZXhLZXkpKTtcclxuICAgICAgICByZW1vdmVkRG9jdW1lbnRzLnB1c2gobXV0YXRpb24ua2V5KTtcclxuICAgIH1cclxuICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcykubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZW1vdmVkRG9jdW1lbnRzOyB9KTtcclxufVxyXG5mdW5jdGlvbiBjb252ZXJ0U3RyZWFtVG9rZW4odG9rZW4pIHtcclxuICAgIGlmICh0b2tlbiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcclxuICAgICAgICAvLyBUT0RPKGIvNzg3NzE0MDMpOiBDb252ZXJ0IHRva2VucyB0byBzdHJpbmdzIGR1cmluZyBkZXNlcmlhbGl6YXRpb25cclxuICAgICAgICBhc3NlcnQoU2ltcGxlRGIuaXNNb2NrUGVyc2lzdGVuY2UoKSwgJ1BlcnNpc3Rpbmcgbm9uLXN0cmluZyBzdHJlYW0gdG9rZW5zIGlzIG9ubHkgc3VwcG9ydGVkIHdpdGggbW9jayBwZXJzaXN0ZW5jZS4nKTtcclxuICAgICAgICByZXR1cm4gdG9rZW4udG9TdHJpbmcoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0b2tlbjtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gbXV0YXRpb25zU3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYk11dGF0aW9uQmF0Y2guc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIGRvY3VtZW50TXV0YXRpb25zU3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYkRvY3VtZW50TXV0YXRpb24uc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIG11dGF0aW9uUXVldWVzU3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYk11dGF0aW9uUXVldWUuc3RvcmUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgUkVTRVJWRURfQklUUyA9IDE7XHJcbnZhciBHZW5lcmF0b3JJZHM7XHJcbihmdW5jdGlvbiAoR2VuZXJhdG9ySWRzKSB7XHJcbiAgICBHZW5lcmF0b3JJZHNbR2VuZXJhdG9ySWRzW1wiUXVlcnlDYWNoZVwiXSA9IDBdID0gXCJRdWVyeUNhY2hlXCI7XHJcbiAgICBHZW5lcmF0b3JJZHNbR2VuZXJhdG9ySWRzW1wiU3luY0VuZ2luZVwiXSA9IDFdID0gXCJTeW5jRW5naW5lXCI7IC8vIFRoZSB0YXJnZXQgSURzIGZvciBsaW1ibyBkZXRlY3Rpb24gYXJlIG9kZCAoZW5kIGluIDEpLlxyXG59KShHZW5lcmF0b3JJZHMgfHwgKEdlbmVyYXRvcklkcyA9IHt9KSk7XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIHRhcmdldCBJRHMgZm9yIHNlbmRpbmcgdGFyZ2V0cyB0byB0aGVcclxuICogd2F0Y2ggc3RyZWFtLlxyXG4gKlxyXG4gKiBUaGUgY2xpZW50IGNvbnN0cnVjdHMgdHdvIGdlbmVyYXRvcnMsIG9uZSBmb3IgdGhlIHF1ZXJ5IGNhY2hlICh2aWFcclxuICogZm9yUXVlcnlDYWNoZSgpKSwgYW5kIG9uZSBmb3IgbGltYm8gZG9jdW1lbnRzICh2aWEgZm9yU3luY0VuZ2luZSgpKS4gVGhlc2VcclxuICogdHdvIGdlbmVyYXRvcnMgcHJvZHVjZSBub24tb3ZlcmxhcHBpbmcgSURzIChieSB1c2luZyBldmVuIGFuZCBvZGQgSURzXHJcbiAqIHJlc3BlY3RpdmVseSkuXHJcbiAqXHJcbiAqIEJ5IHNlcGFyYXRpbmcgdGhlIHRhcmdldCBJRCBzcGFjZSwgdGhlIHF1ZXJ5IGNhY2hlIGNhbiBnZW5lcmF0ZSB0YXJnZXQgSURzXHJcbiAqIHRoYXQgcGVyc2lzdCBhY3Jvc3MgY2xpZW50IHJlc3RhcnRzLCB3aGlsZSBzeW5jIGVuZ2luZSBjYW4gaW5kZXBlbmRlbnRseVxyXG4gKiBnZW5lcmF0ZSBpbi1tZW1vcnkgdGFyZ2V0IElEcyB0aGF0IGFyZSB0cmFuc2llbnQgYW5kIGNhbiBiZSByZXVzZWQgYWZ0ZXIgYVxyXG4gKiByZXN0YXJ0LlxyXG4gKi9cclxuLy8gVE9ETyhtcnNjaG1pZHQpOiBFeHBsb3JlIHJlbW92aW5nIHRoaXMgY2xhc3MgaW4gZmF2b3Igb2YgZ2VuZXJhdGluZyB0aGVzZSBJRHNcclxuLy8gZGlyZWN0bHkgaW4gU3luY0VuZ2luZSBhbmQgTG9jYWxTdG9yZS5cclxudmFyIFRhcmdldElkR2VuZXJhdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnN0YW50aWF0ZXMgYSBuZXcgVGFyZ2V0SWRHZW5lcmF0b3IuIElmIGEgc2VlZCBpcyBwcm92aWRlZCwgdGhlIGdlbmVyYXRvclxyXG4gICAgICogd2lsbCB1c2UgdGhlIHNlZWQgdmFsdWUgYXMgdGhlIG5leHQgdGFyZ2V0IElELlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBUYXJnZXRJZEdlbmVyYXRvcihnZW5lcmF0b3JJZCwgc2VlZCkge1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdG9ySWQgPSBnZW5lcmF0b3JJZDtcclxuICAgICAgICBhc3NlcnQoKGdlbmVyYXRvcklkICYgUkVTRVJWRURfQklUUykgPT09IGdlbmVyYXRvcklkLCBcIkdlbmVyYXRvciBJRCBcIiArIGdlbmVyYXRvcklkICsgXCIgY29udGFpbnMgbW9yZSB0aGFuIFwiICsgUkVTRVJWRURfQklUUyArIFwiIHJlc2VydmVkIGJpdHNcIik7XHJcbiAgICAgICAgdGhpcy5zZWVrKHNlZWQgIT09IHVuZGVmaW5lZCA/IHNlZWQgOiB0aGlzLmdlbmVyYXRvcklkKTtcclxuICAgIH1cclxuICAgIFRhcmdldElkR2VuZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBuZXh0SWQgPSB0aGlzLm5leHRJZDtcclxuICAgICAgICB0aGlzLm5leHRJZCArPSAxIDw8IFJFU0VSVkVEX0JJVFM7XHJcbiAgICAgICAgcmV0dXJuIG5leHRJZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIElEIHRoYXQgZm9sbG93cyB0aGUgZ2l2ZW4gSUQuIFN1YnNlcXVlbnQgY2FsbHMgdG8gYG5leHQoKWBcclxuICAgICAqIHVzZSB0aGUgbmV3bHkgcmV0dXJuZWQgdGFyZ2V0IElEIGFzIHRoZWlyIGJhc2UuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBUYXJnZXRJZEdlbmVyYXRvci5wcm90b3R5cGUuYWZ0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLnNlZWsodGFyZ2V0SWQgKyAoMSA8PCBSRVNFUlZFRF9CSVRTKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCgpO1xyXG4gICAgfTtcclxuICAgIFRhcmdldElkR2VuZXJhdG9yLnByb3RvdHlwZS5zZWVrID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgYXNzZXJ0KCh0YXJnZXRJZCAmIFJFU0VSVkVEX0JJVFMpID09PSB0aGlzLmdlbmVyYXRvcklkLCAnQ2Fubm90IHN1cHBseSB0YXJnZXQgSUQgZnJvbSBkaWZmZXJlbnQgZ2VuZXJhdG9yIElEJyk7XHJcbiAgICAgICAgdGhpcy5uZXh0SWQgPSB0YXJnZXRJZDtcclxuICAgIH07XHJcbiAgICBUYXJnZXRJZEdlbmVyYXRvci5mb3JUYXJnZXRDYWNoZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBXZSBzZWVkIHRoZSBxdWVyeSBjYWNoZSBnZW5lcmF0b3IgdG8gcmV0dXJuICcyJyBhcyBpdHMgZmlyc3QgSUQsIGFzIHRoZXJlXHJcbiAgICAgICAgLy8gaXMgbm8gZGlmZmVyZW50aWF0aW9uIGluIHRoZSBwcm90b2NvbCBsYXllciBiZXR3ZWVuIGFuIHVuc2V0IG51bWJlciBhbmRcclxuICAgICAgICAvLyB0aGUgbnVtYmVyICcwJy4gSWYgd2Ugd2VyZSB0byBzZW50IGEgdGFyZ2V0IHdpdGggdGFyZ2V0IElEICcwJywgdGhlXHJcbiAgICAgICAgLy8gYmFja2VuZCB3b3VsZCBjb25zaWRlciBpdCB1bnNldCBhbmQgcmVwbGFjZSBpdCB3aXRoIGl0cyBvd24gSUQuXHJcbiAgICAgICAgdmFyIHRhcmdldElkR2VuZXJhdG9yID0gbmV3IFRhcmdldElkR2VuZXJhdG9yKEdlbmVyYXRvcklkcy5RdWVyeUNhY2hlLCAyKTtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0SWRHZW5lcmF0b3I7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0SWRHZW5lcmF0b3IuZm9yU3luY0VuZ2luZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBTeW5jIGVuZ2luZSBhc3NpZ25zIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRvY3VtZW50IGRldGVjdGlvbi5cclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldElkR2VuZXJhdG9yKEdlbmVyYXRvcklkcy5TeW5jRW5naW5lKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVGFyZ2V0SWRHZW5lcmF0b3I7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgSW5kZXhlZERiVGFyZ2V0Q2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJUYXJnZXRDYWNoZShyZWZlcmVuY2VEZWxlZ2F0ZSwgc2VyaWFsaXplcikge1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSByZWZlcmVuY2VEZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xyXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgY2FjaGUgZ2xvYmFsIG1ldGFkYXRhIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBzaW5jZVxyXG4gICAgICAgIC8vIHNvbWUgb2YgaXQgKGluIHBhcnRpY3VsYXIgYGhpZ2hlc3RUYXJnZXRJZGApIGNhbiBiZSBtb2RpZmllZCBieSBzZWNvbmRhcnlcclxuICAgICAgICAvLyB0YWJzLiBXZSBjb3VsZCBwZXJoYXBzIGJlIG1vcmUgZ3JhbnVsYXIgKGFuZCBlLmcuIHN0aWxsIGNhY2hlXHJcbiAgICAgICAgLy8gYGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb25gIGluIG1lbW9yeSkgYnV0IGZvciBzaW1wbGljaXR5IHdlIGN1cnJlbnRseSBnb1xyXG4gICAgICAgIC8vIHRvIEluZGV4ZWREYiB3aGVuZXZlciB3ZSBuZWVkIHRvIHJlYWQgbWV0YWRhdGEuIFdlIGNhbiByZXZpc2l0IGlmIGl0IHR1cm5zXHJcbiAgICAgICAgLy8gb3V0IHRvIGhhdmUgYSBtZWFuaW5nZnVsIHBlcmZvcm1hbmNlIGltcGFjdC5cclxuICAgICAgICB0aGlzLnRhcmdldElkR2VuZXJhdG9yID0gVGFyZ2V0SWRHZW5lcmF0b3IuZm9yVGFyZ2V0Q2FjaGUoKTtcclxuICAgIH1cclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5hbGxvY2F0ZVRhcmdldElkID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXRyaWV2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBtZXRhZGF0YS5oaWdoZXN0VGFyZ2V0SWQgPSBfdGhpcy50YXJnZXRJZEdlbmVyYXRvci5hZnRlcihtZXRhZGF0YS5oaWdoZXN0VGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2F2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uLCBtZXRhZGF0YSkubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBtZXRhZGF0YS5oaWdoZXN0VGFyZ2V0SWQ7IH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKG5ldyBUaW1lc3RhbXAobWV0YWRhdGEubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5zZWNvbmRzLCBtZXRhZGF0YS5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLm5hbm9zZWNvbmRzKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIodHJhbnNhY3Rpb24uc2ltcGxlRGJUcmFuc2FjdGlvbik7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnNldFRhcmdldHNNZXRhZGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyLCBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXRyaWV2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uKS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBtZXRhZGF0YS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgICAgIGlmIChsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPiBtZXRhZGF0YS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIG1ldGFkYXRhLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2F2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uLCBtZXRhZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFkZFRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmVUYXJnZXREYXRhKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhKS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJldHJpZXZlTWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS50YXJnZXRDb3VudCArPSAxO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlTWV0YWRhdGFGcm9tVGFyZ2V0RGF0YSh0YXJnZXREYXRhLCBtZXRhZGF0YSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2F2ZU1ldGFkYXRhKHRyYW5zYWN0aW9uLCBtZXRhZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS51cGRhdGVUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZVRhcmdldERhdGEodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YS50YXJnZXRJZClcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gdGFyZ2V0c1N0b3JlKHRyYW5zYWN0aW9uKS5kZWxldGUodGFyZ2V0RGF0YS50YXJnZXRJZCk7IH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnJldHJpZXZlTWV0YWRhdGEodHJhbnNhY3Rpb24pOyB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KG1ldGFkYXRhLnRhcmdldENvdW50ID4gMCwgJ1JlbW92aW5nIGZyb20gYW4gZW1wdHkgdGFyZ2V0IGNhY2hlJyk7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLnRhcmdldENvdW50IC09IDE7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zYXZlTWV0YWRhdGEodHJhbnNhY3Rpb24sIG1ldGFkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERyb3BzIGFueSB0YXJnZXRzIHdpdGggc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQsIGV4Y2VwdGluZyB0aG9zZVxyXG4gICAgICogcHJlc2VudCBpbiBgYWN0aXZlVGFyZ2V0SWRzYC4gRG9jdW1lbnQgYXNzb2NpYXRpb25zIGZvciB0aGUgcmVtb3ZlZCB0YXJnZXRzIGFyZSBhbHNvIHJlbW92ZWQuXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGFyZ2V0cyByZW1vdmVkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0cyA9IGZ1bmN0aW9uICh0eG4sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0c1N0b3JlKHR4bilcclxuICAgICAgICAgICAgLml0ZXJhdGUoZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRhcmdldCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyIDw9IHVwcGVyQm91bmQgJiZcclxuICAgICAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkcy5nZXQodGFyZ2V0RGF0YS50YXJnZXRJZCkgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLnJlbW92ZVRhcmdldERhdGEodHhuLCB0YXJnZXREYXRhKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcyk7IH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvdW50OyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gd2l0aCBlYWNoIGBUYXJnZXREYXRhYCB0aGF0IHdlIGhhdmUgY2FjaGVkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZm9yRWFjaFRhcmdldCA9IGZ1bmN0aW9uICh0eG4sIGYpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRzU3RvcmUodHhuKS5pdGVyYXRlKGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXREYXRhID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJUYXJnZXQodmFsdWUpO1xyXG4gICAgICAgICAgICBmKHRhcmdldERhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5yZXRyaWV2ZU1ldGFkYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHJldHJpZXZlTWV0YWRhdGEodHJhbnNhY3Rpb24uc2ltcGxlRGJUcmFuc2FjdGlvbik7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnNhdmVNZXRhZGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgbWV0YWRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsVGFyZ2V0U3RvcmUodHJhbnNhY3Rpb24pLnB1dChEYlRhcmdldEdsb2JhbC5rZXksIG1ldGFkYXRhKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuc2F2ZVRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0c1N0b3JlKHRyYW5zYWN0aW9uKS5wdXQodGhpcy5zZXJpYWxpemVyLnRvRGJUYXJnZXQodGFyZ2V0RGF0YSkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW4tcGxhY2UgdXBkYXRlcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEgdG8gYWNjb3VudCBmb3IgdmFsdWVzIGluIHRoZSBnaXZlblxyXG4gICAgICogVGFyZ2V0RGF0YS4gU2F2aW5nIGlzIGRvbmUgc2VwYXJhdGVseS4gUmV0dXJucyB0cnVlIGlmIHRoZXJlIHdlcmUgYW55XHJcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSBtZXRhZGF0YS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLnVwZGF0ZU1ldGFkYXRhRnJvbVRhcmdldERhdGEgPSBmdW5jdGlvbiAodGFyZ2V0RGF0YSwgbWV0YWRhdGEpIHtcclxuICAgICAgICB2YXIgdXBkYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0YXJnZXREYXRhLnRhcmdldElkID4gbWV0YWRhdGEuaGlnaGVzdFRhcmdldElkKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmhpZ2hlc3RUYXJnZXRJZCA9IHRhcmdldERhdGEudGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgIHVwZGF0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlciA+IG1ldGFkYXRhLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICBtZXRhZGF0YS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgICAgICB1cGRhdGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldFRhcmdldENvdW50ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cmlldmVNZXRhZGF0YSh0cmFuc2FjdGlvbikubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHsgcmV0dXJuIG1ldGFkYXRhLnRhcmdldENvdW50OyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0VGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBJdGVyYXRpbmcgYnkgdGhlIGNhbm9uaWNhbElkIG1heSB5aWVsZCBtb3JlIHRoYW4gb25lIHJlc3VsdCBiZWNhdXNlXHJcbiAgICAgICAgLy8gY2Fub25pY2FsSWQgdmFsdWVzIGFyZSBub3QgcmVxdWlyZWQgdG8gYmUgdW5pcXVlIHBlciB0YXJnZXQuIFRoaXMgcXVlcnlcclxuICAgICAgICAvLyBkZXBlbmRzIG9uIHRoZSBxdWVyeVRhcmdldHMgaW5kZXggdG8gYmUgZWZmaWNpZW50LlxyXG4gICAgICAgIHZhciBjYW5vbmljYWxJZCA9IHRhcmdldC5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFtjYW5vbmljYWxJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZXSwgW2Nhbm9uaWNhbElkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0c1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IHJhbmdlOiByYW5nZSwgaW5kZXg6IERiVGFyZ2V0LnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSB9LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgY29udHJvbCkge1xyXG4gICAgICAgICAgICB2YXIgZm91bmQgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlRhcmdldCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xyXG4gICAgICAgICAgICAvLyBhY3R1YWxseSBlcXVhbCB0byB0aGUgcmVxdWVzdGVkIHRhcmdldC5cclxuICAgICAgICAgICAgaWYgKHRhcmdldC5pc0VxdWFsKGZvdW5kLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZvdW5kO1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5kb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHQ7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5hZGRNYXRjaGluZ0tleXMgPSBmdW5jdGlvbiAodHhuLCBrZXlzLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxyXG4gICAgICAgIC8vIEluZGV4ZWREYi5cclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICB2YXIgc3RvcmUgPSBkb2N1bWVudFRhcmdldFN0b3JlKHR4bik7XHJcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBlbmNvZGUoa2V5LnBhdGgpO1xyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHN0b3JlLnB1dChuZXcgRGJUYXJnZXREb2N1bWVudCh0YXJnZXRJZCwgcGF0aCkpKTtcclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodHhuLCBrZXkpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocHJvbWlzZXMpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVNYXRjaGluZ0tleXMgPSBmdW5jdGlvbiAodHhuLCBrZXlzLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxyXG4gICAgICAgIC8vIEluZGV4ZWREYi5cclxuICAgICAgICB2YXIgc3RvcmUgPSBkb2N1bWVudFRhcmdldFN0b3JlKHR4bik7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGtleXMsIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBlbmNvZGUoa2V5LnBhdGgpO1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoW1xyXG4gICAgICAgICAgICAgICAgc3RvcmUuZGVsZXRlKFt0YXJnZXRJZCwgcGF0aF0pLFxyXG4gICAgICAgICAgICAgICAgX3RoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHR4biwga2V5KVxyXG4gICAgICAgICAgICBdKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJUYXJnZXRDYWNoZS5wcm90b3R5cGUucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQgPSBmdW5jdGlvbiAodHhuLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIHZhciBzdG9yZSA9IGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKTtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbdGFyZ2V0SWRdLCBbdGFyZ2V0SWQgKyAxXSwgXHJcbiAgICAgICAgLypsb3dlck9wZW49Ki8gZmFsc2UsIFxyXG4gICAgICAgIC8qdXBwZXJPcGVuPSovIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBzdG9yZS5kZWxldGUocmFuZ2UpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW3RhcmdldElkXSwgW3RhcmdldElkICsgMV0sIFxyXG4gICAgICAgIC8qbG93ZXJPcGVuPSovIGZhbHNlLCBcclxuICAgICAgICAvKnVwcGVyT3Blbj0qLyB0cnVlKTtcclxuICAgICAgICB2YXIgc3RvcmUgPSBkb2N1bWVudFRhcmdldFN0b3JlKHR4bik7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgcmFuZ2U6IHJhbmdlLCBrZXlzT25seTogdHJ1ZSB9LCBmdW5jdGlvbiAoa2V5LCBfLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gZGVjb2RlKGtleVsxXSk7XHJcbiAgICAgICAgICAgIHZhciBkb2NLZXkgPSBuZXcgRG9jdW1lbnRLZXkocGF0aCk7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5hZGQoZG9jS2V5KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHQ7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlRhcmdldENhY2hlLnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHZhciBwYXRoID0gZW5jb2RlKGtleS5wYXRoKTtcclxuICAgICAgICB2YXIgcmFuZ2UgPSBJREJLZXlSYW5nZS5ib3VuZChbcGF0aF0sIFtpbW1lZGlhdGVTdWNjZXNzb3IocGF0aCldLCBcclxuICAgICAgICAvKmxvd2VyT3Blbj0qLyBmYWxzZSwgXHJcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gdHJ1ZSk7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHtcclxuICAgICAgICAgICAgaW5kZXg6IERiVGFyZ2V0RG9jdW1lbnQuZG9jdW1lbnRUYXJnZXRzSW5kZXgsXHJcbiAgICAgICAgICAgIGtleXNPbmx5OiB0cnVlLFxyXG4gICAgICAgICAgICByYW5nZTogcmFuZ2VcclxuICAgICAgICB9LCBmdW5jdGlvbiAoX2EsIF8sIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gX2FbMF0sIHBhdGggPSBfYVsxXTtcclxuICAgICAgICAgICAgLy8gSGF2aW5nIGEgc2VudGluZWwgcm93IGZvciBhIGRvY3VtZW50IGRvZXMgbm90IGNvdW50IGFzIGNvbnRhaW5pbmcgdGhhdCBkb2N1bWVudDtcclxuICAgICAgICAgICAgLy8gRm9yIHRoZSB0YXJnZXQgY2FjaGUsIGNvbnRhaW5pbmcgdGhlIGRvY3VtZW50IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBwYXJ0IG9mIHNvbWVcclxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0SWQgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNvdW50ID4gMDsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiVGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldFRhcmdldERhdGFGb3JUYXJnZXQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGFyZ2V0c1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAuZ2V0KHRhcmdldElkKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZm91bmQpIHtcclxuICAgICAgICAgICAgaWYgKGZvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJUYXJnZXQoZm91bmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5kZXhlZERiVGFyZ2V0Q2FjaGU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gdGFyZ2V0c1N0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJUYXJnZXQuc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHRhcmdldCBnbG9iYWxzIG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIGdsb2JhbFRhcmdldFN0b3JlKHR4bikge1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYlBlcnNpc3RlbmNlLmdldFN0b3JlKHR4biwgRGJUYXJnZXRHbG9iYWwuc3RvcmUpO1xyXG59XHJcbmZ1bmN0aW9uIHJldHJpZXZlTWV0YWRhdGEodHhuKSB7XHJcbiAgICB2YXIgZ2xvYmFsU3RvcmUgPSBTaW1wbGVEYi5nZXRTdG9yZSh0eG4sIERiVGFyZ2V0R2xvYmFsLnN0b3JlKTtcclxuICAgIHJldHVybiBnbG9iYWxTdG9yZS5nZXQoRGJUYXJnZXRHbG9iYWwua2V5KS5uZXh0KGZ1bmN0aW9uIChtZXRhZGF0YSkge1xyXG4gICAgICAgIGFzc2VydChtZXRhZGF0YSAhPT0gbnVsbCwgJ01pc3NpbmcgbWV0YWRhdGEgcm93LicpO1xyXG4gICAgICAgIHJldHVybiBtZXRhZGF0YTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcih0eG4pIHtcclxuICAgIHJldHVybiByZXRyaWV2ZU1ldGFkYXRhKHR4bikubmV4dChmdW5jdGlvbiAodGFyZ2V0R2xvYmFsKSB7IHJldHVybiB0YXJnZXRHbG9iYWwuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyOyB9KTtcclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCB0YXJnZXQgb2JqZWN0IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiVGFyZ2V0RG9jdW1lbnQuc3RvcmUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXMgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGFydGlhbGx5IHBhdGNoIGEgZG9jdW1lbnQuXHJcbiAqIEZpZWxkTWFzayBpcyB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggT2JqZWN0VmFsdWUuXHJcbiAqIEV4YW1wbGVzOlxyXG4gKiAgIGZvbyAtIE92ZXJ3cml0ZXMgZm9vIGVudGlyZWx5IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLiBJZiBmb28gaXMgbm90XHJcbiAqICAgICAgICAgcHJlc2VudCBpbiB0aGUgY29tcGFuaW9uIE9iamVjdFZhbHVlLCB0aGUgZmllbGQgaXMgZGVsZXRlZC5cclxuICogICBmb28uYmFyIC0gT3ZlcndyaXRlcyBvbmx5IHRoZSBmaWVsZCBiYXIgb2YgdGhlIG9iamVjdCBmb28uXHJcbiAqICAgICAgICAgICAgIElmIGZvbyBpcyBub3QgYW4gb2JqZWN0LCBmb28gaXMgcmVwbGFjZWQgd2l0aCBhbiBvYmplY3RcclxuICogICAgICAgICAgICAgY29udGFpbmluZyBmb29cclxuICovXHJcbnZhciBGaWVsZE1hc2sgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWVsZE1hc2soZmllbGRzKSB7XHJcbiAgICAgICAgdGhpcy5maWVsZHMgPSBmaWVsZHM7XHJcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0aW9uIG9mIEZpZWxkTWFza1xyXG4gICAgfVxyXG4gICAgRmllbGRNYXNrLmZyb21TZXQgPSBmdW5jdGlvbiAoZmllbGRzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2soZmllbGRzKTtcclxuICAgIH07XHJcbiAgICBGaWVsZE1hc2suZnJvbUFycmF5ID0gZnVuY3Rpb24gKGZpZWxkcykge1xyXG4gICAgICAgIHZhciBmaWVsZHNBc1NldCA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIGZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZFBhdGgpIHsgcmV0dXJuIChmaWVsZHNBc1NldCA9IGZpZWxkc0FzU2V0LmFkZChmaWVsZFBhdGgpKTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2soZmllbGRzQXNTZXQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVmVyaWZpZXMgdGhhdCBgZmllbGRQYXRoYCBpcyBpbmNsdWRlZCBieSBhdCBsZWFzdCBvbmUgZmllbGQgaW4gdGhpcyBmaWVsZFxyXG4gICAgICogbWFzay5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGlzIGFuIE8obikgb3BlcmF0aW9uLCB3aGVyZSBgbmAgaXMgdGhlIHNpemUgb2YgdGhlIGZpZWxkIG1hc2suXHJcbiAgICAgKi9cclxuICAgIEZpZWxkTWFzay5wcm90b3R5cGUuY292ZXJzID0gZnVuY3Rpb24gKGZpZWxkUGF0aCkge1xyXG4gICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkTWFza1BhdGgpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTWFza1BhdGguaXNQcmVmaXhPZihmaWVsZFBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICB9O1xyXG4gICAgRmllbGRNYXNrLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRzLmlzRXF1YWwob3RoZXIuZmllbGRzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmllbGRNYXNrO1xyXG59KCkpO1xyXG4vKiogQSBmaWVsZCBwYXRoIGFuZCB0aGUgVHJhbnNmb3JtT3BlcmF0aW9uIHRvIHBlcmZvcm0gdXBvbiBpdC4gKi9cclxudmFyIEZpZWxkVHJhbnNmb3JtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmllbGRUcmFuc2Zvcm0oZmllbGQsIHRyYW5zZm9ybSkge1xyXG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcclxuICAgIH1cclxuICAgIEZpZWxkVHJhbnNmb3JtLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZpZWxkLmlzRXF1YWwob3RoZXIuZmllbGQpICYmIHRoaXMudHJhbnNmb3JtLmlzRXF1YWwob3RoZXIudHJhbnNmb3JtKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpZWxkVHJhbnNmb3JtO1xyXG59KCkpO1xyXG4vKiogVGhlIHJlc3VsdCBvZiBzdWNjZXNzZnVsbHkgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byB0aGUgYmFja2VuZC4gKi9cclxudmFyIE11dGF0aW9uUmVzdWx0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTXV0YXRpb25SZXN1bHQoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBtdXRhdGlvbiB3YXMgY29tbWl0dGVkOlxyXG4gICAgICpcclxuICAgICAqIC0gRm9yIG1vc3Qgb3BlcmF0aW9ucywgdGhpcyBpcyB0aGUgdXBkYXRlVGltZSBpbiB0aGUgV3JpdGVSZXN1bHQuXHJcbiAgICAgKiAtIEZvciBkZWxldGVzLCB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSAoYmVjYXVzZSBkZWxldGVzIGFyZVxyXG4gICAgICogICBub3Qgc3RvcmVkIGFuZCBoYXZlIG5vIHVwZGF0ZVRpbWUpLlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCB0aGVzZSB2ZXJzaW9ucyBjYW4gYmUgZGlmZmVyZW50OiBOby1vcCB3cml0ZXMgd2lsbCBub3QgY2hhbmdlXHJcbiAgICAgKiB0aGUgdXBkYXRlVGltZSBldmVuIHRob3VnaCB0aGUgY29tbWl0VGltZSBhZHZhbmNlcy5cclxuICAgICAqL1xyXG4gICAgdmVyc2lvbiwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSByZXN1bHRpbmcgZmllbGRzIHJldHVybmVkIGZyb20gdGhlIGJhY2tlbmQgYWZ0ZXIgYVxyXG4gICAgICogVHJhbnNmb3JtTXV0YXRpb24gaGFzIGJlZW4gY29tbWl0dGVkLiBDb250YWlucyBvbmUgRmllbGRWYWx1ZSBmb3IgZWFjaFxyXG4gICAgICogRmllbGRUcmFuc2Zvcm0gdGhhdCB3YXMgaW4gdGhlIG11dGF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFdpbGwgYmUgbnVsbCBpZiB0aGUgbXV0YXRpb24gd2FzIG5vdCBhIFRyYW5zZm9ybU11dGF0aW9uLlxyXG4gICAgICovXHJcbiAgICB0cmFuc2Zvcm1SZXN1bHRzKSB7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybVJlc3VsdHMgPSB0cmFuc2Zvcm1SZXN1bHRzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE11dGF0aW9uUmVzdWx0O1xyXG59KCkpO1xyXG52YXIgTXV0YXRpb25UeXBlO1xyXG4oZnVuY3Rpb24gKE11dGF0aW9uVHlwZSkge1xyXG4gICAgTXV0YXRpb25UeXBlW011dGF0aW9uVHlwZVtcIlNldFwiXSA9IDBdID0gXCJTZXRcIjtcclxuICAgIE11dGF0aW9uVHlwZVtNdXRhdGlvblR5cGVbXCJQYXRjaFwiXSA9IDFdID0gXCJQYXRjaFwiO1xyXG4gICAgTXV0YXRpb25UeXBlW011dGF0aW9uVHlwZVtcIlRyYW5zZm9ybVwiXSA9IDJdID0gXCJUcmFuc2Zvcm1cIjtcclxuICAgIE11dGF0aW9uVHlwZVtNdXRhdGlvblR5cGVbXCJEZWxldGVcIl0gPSAzXSA9IFwiRGVsZXRlXCI7XHJcbn0pKE11dGF0aW9uVHlwZSB8fCAoTXV0YXRpb25UeXBlID0ge30pKTtcclxuLyoqXHJcbiAqIEVuY29kZXMgYSBwcmVjb25kaXRpb24gZm9yIGEgbXV0YXRpb24uIFRoaXMgZm9sbG93cyB0aGUgbW9kZWwgdGhhdCB0aGVcclxuICogYmFja2VuZCBhY2NlcHRzIHdpdGggdGhlIHNwZWNpYWwgY2FzZSBvZiBhbiBleHBsaWNpdCBcImVtcHR5XCIgcHJlY29uZGl0aW9uXHJcbiAqIChtZWFuaW5nIG5vIHByZWNvbmRpdGlvbikuXHJcbiAqL1xyXG52YXIgUHJlY29uZGl0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUHJlY29uZGl0aW9uKHVwZGF0ZVRpbWUsIGV4aXN0cykge1xyXG4gICAgICAgIHRoaXMudXBkYXRlVGltZSA9IHVwZGF0ZVRpbWU7XHJcbiAgICAgICAgdGhpcy5leGlzdHMgPSBleGlzdHM7XHJcbiAgICAgICAgYXNzZXJ0KHVwZGF0ZVRpbWUgPT09IHVuZGVmaW5lZCB8fCBleGlzdHMgPT09IHVuZGVmaW5lZCwgJ1ByZWNvbmRpdGlvbiBjYW4gc3BlY2lmeSBcImV4aXN0c1wiIG9yIFwidXBkYXRlVGltZVwiIGJ1dCBub3QgYm90aCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIHdpdGggYW4gZXhpc3RzIGZsYWcuICovXHJcbiAgICBQcmVjb25kaXRpb24uZXhpc3RzID0gZnVuY3Rpb24gKGV4aXN0cykge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJlY29uZGl0aW9uKHVuZGVmaW5lZCwgZXhpc3RzKTtcclxuICAgIH07XHJcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gYmFzZWQgb24gYSB2ZXJzaW9uIGEgZG9jdW1lbnQgZXhpc3RzIGF0LiAqL1xyXG4gICAgUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUgPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJlY29uZGl0aW9uKHZlcnNpb24pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQcmVjb25kaXRpb24ucHJvdG90eXBlLCBcImlzTm9uZVwiLCB7XHJcbiAgICAgICAgLyoqIFJldHVybnMgd2hldGhlciB0aGlzIFByZWNvbmRpdGlvbiBpcyBlbXB0eS4gKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlVGltZSA9PT0gdW5kZWZpbmVkICYmIHRoaXMuZXhpc3RzID09PSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJlY29uZGl0aW9ucyBpcyB2YWxpZCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50XHJcbiAgICAgKiAob3IgbnVsbCBpZiBubyBkb2N1bWVudCBpcyBhdmFpbGFibGUpLlxyXG4gICAgICovXHJcbiAgICBQcmVjb25kaXRpb24ucHJvdG90eXBlLmlzVmFsaWRGb3IgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICBpZiAodGhpcy51cGRhdGVUaW1lICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50ICYmXHJcbiAgICAgICAgICAgICAgICBtYXliZURvYy52ZXJzaW9uLmlzRXF1YWwodGhpcy51cGRhdGVUaW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZXhpc3RzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzID09PSBtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuaXNOb25lLCAnUHJlY29uZGl0aW9uIHNob3VsZCBiZSBlbXB0eScpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUHJlY29uZGl0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChlcXVhbHModGhpcy51cGRhdGVUaW1lLCBvdGhlci51cGRhdGVUaW1lKSAmJlxyXG4gICAgICAgICAgICB0aGlzLmV4aXN0cyA9PT0gb3RoZXIuZXhpc3RzKTtcclxuICAgIH07XHJcbiAgICBQcmVjb25kaXRpb24uTk9ORSA9IG5ldyBQcmVjb25kaXRpb24oKTtcclxuICAgIHJldHVybiBQcmVjb25kaXRpb247XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIG11dGF0aW9uIGRlc2NyaWJlcyBhIHNlbGYtY29udGFpbmVkIGNoYW5nZSB0byBhIGRvY3VtZW50LiBNdXRhdGlvbnMgY2FuXHJcbiAqIGNyZWF0ZSwgcmVwbGFjZSwgZGVsZXRlLCBhbmQgdXBkYXRlIHN1YnNldHMgb2YgZG9jdW1lbnRzLlxyXG4gKlxyXG4gKiBNdXRhdGlvbnMgbm90IG9ubHkgYWN0IG9uIHRoZSB2YWx1ZSBvZiB0aGUgZG9jdW1lbnQgYnV0IGFsc28gaXQgdmVyc2lvbi5cclxuICpcclxuICogRm9yIGxvY2FsIG11dGF0aW9ucyAobXV0YXRpb25zIHRoYXQgaGF2ZW4ndCBiZWVuIGNvbW1pdHRlZCB5ZXQpLCB3ZSBwcmVzZXJ2ZVxyXG4gKiB0aGUgZXhpc3RpbmcgdmVyc2lvbiBmb3IgU2V0LCBQYXRjaCwgYW5kIFRyYW5zZm9ybSBtdXRhdGlvbnMuIEZvciBEZWxldGVcclxuICogbXV0YXRpb25zLCB3ZSByZXNldCB0aGUgdmVyc2lvbiB0byAwLlxyXG4gKlxyXG4gKiBIZXJlJ3MgdGhlIGV4cGVjdGVkIHRyYW5zaXRpb24gdGFibGUuXHJcbiAqXHJcbiAqIE1VVEFUSU9OICAgICAgICAgICBBUFBMSUVEIFRPICAgICAgICAgICAgUkVTVUxUUyBJTlxyXG4gKlxyXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxyXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIERvY3VtZW50KHYwKVxyXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgbnVsbCAgICAgICAgICAgICAgICAgIERvY3VtZW50KHYwKVxyXG4gKiBQYXRjaE11dGF0aW9uICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxyXG4gKiBQYXRjaE11dGF0aW9uICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjMpXHJcbiAqIFBhdGNoTXV0YXRpb24gICAgICBudWxsICAgICAgICAgICAgICAgICAgbnVsbFxyXG4gKiBUcmFuc2Zvcm1NdXRhdGlvbiAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxyXG4gKiBUcmFuc2Zvcm1NdXRhdGlvbiAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjMpXHJcbiAqIFRyYW5zZm9ybU11dGF0aW9uICBudWxsICAgICAgICAgICAgICAgICAgbnVsbFxyXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIE5vRG9jdW1lbnQodjApXHJcbiAqIERlbGV0ZU11dGF0aW9uICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MClcclxuICogRGVsZXRlTXV0YXRpb24gICAgIG51bGwgICAgICAgICAgICAgICAgICBOb0RvY3VtZW50KHYwKVxyXG4gKlxyXG4gKiBGb3IgYWNrbm93bGVkZ2VkIG11dGF0aW9ucywgd2UgdXNlIHRoZSB1cGRhdGVUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGFzXHJcbiAqIHRoZSByZXN1bHRpbmcgdmVyc2lvbiBmb3IgU2V0LCBQYXRjaCwgYW5kIFRyYW5zZm9ybSBtdXRhdGlvbnMuIEFzIGRlbGV0ZXNcclxuICogaGF2ZSBubyBleHBsaWNpdCB1cGRhdGUgdGltZSwgd2UgdXNlIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGZvclxyXG4gKiBEZWxldGUgbXV0YXRpb25zLlxyXG4gKlxyXG4gKiBJZiBhIG11dGF0aW9uIGlzIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZCBidXQgZmFpbHMgdGhlIHByZWNvbmRpdGlvbiBjaGVja1xyXG4gKiBsb2NhbGx5LCB3ZSByZXR1cm4gYW4gYFVua25vd25Eb2N1bWVudGAgYW5kIHJlbHkgb24gV2F0Y2ggdG8gc2VuZCB1cyB0aGVcclxuICogdXBkYXRlZCB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgVHJhbnNmb3JtTXV0YXRpb25zIGRvbid0IGNyZWF0ZSBEb2N1bWVudHMgKGluIHRoZSBjYXNlIG9mIGJlaW5nXHJcbiAqIGFwcGxpZWQgdG8gYSBOb0RvY3VtZW50KSwgZXZlbiB0aG91Z2ggdGhleSB3b3VsZCBvbiB0aGUgYmFja2VuZC4gVGhpcyBpc1xyXG4gKiBiZWNhdXNlIHRoZSBjbGllbnQgYWx3YXlzIGNvbWJpbmVzIHRoZSBUcmFuc2Zvcm1NdXRhdGlvbiB3aXRoIGEgU2V0TXV0YXRpb25cclxuICogb3IgUGF0Y2hNdXRhdGlvbiBhbmQgd2Ugb25seSB3YW50IHRvIGFwcGx5IHRoZSB0cmFuc2Zvcm0gaWYgdGhlIHByaW9yXHJcbiAqIG11dGF0aW9uIHJlc3VsdGVkIGluIGEgRG9jdW1lbnQgKGFsd2F5cyB0cnVlIGZvciBhIFNldE11dGF0aW9uLCBidXQgbm90XHJcbiAqIG5lY2Vzc2FyaWx5IGZvciBhIFBhdGNoTXV0YXRpb24pLlxyXG4gKlxyXG4gKiAjIyBTdWJjbGFzc2luZyBOb3Rlc1xyXG4gKlxyXG4gKiBTdWJjbGFzc2VzIG9mIE11dGF0aW9uIG5lZWQgdG8gaW1wbGVtZW50IGFwcGx5VG9SZW1vdGVEb2N1bWVudCgpIGFuZFxyXG4gKiBhcHBseVRvTG9jYWxWaWV3KCkgdG8gaW1wbGVtZW50IHRoZSBhY3R1YWwgYmVoYXZpb3Igb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uXHJcbiAqIHRvIHNvbWUgc291cmNlIGRvY3VtZW50LlxyXG4gKi9cclxudmFyIE11dGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTXV0YXRpb24oKSB7XHJcbiAgICB9XHJcbiAgICBNdXRhdGlvbi5wcm90b3R5cGUudmVyaWZ5S2V5TWF0Y2hlcyA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIGlmIChtYXliZURvYyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChtYXliZURvYy5rZXkuaXNFcXVhbCh0aGlzLmtleSksICdDYW4gb25seSBhcHBseSBhIG11dGF0aW9uIHRvIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXknKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIGZyb20gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB1c2UgYXMgdGhlIHJlc3VsdCBvZiBhXHJcbiAgICAgKiBtdXRhdGlvbi4gTXV0YXRpb25zIGFyZSBkZWZpbmVkIHRvIHJldHVybiB0aGUgdmVyc2lvbiBvZiB0aGUgYmFzZSBkb2N1bWVudFxyXG4gICAgICogb25seSBpZiBpdCBpcyBhbiBleGlzdGluZyBkb2N1bWVudC4gRGVsZXRlZCBhbmQgdW5rbm93biBkb2N1bWVudHMgaGF2ZSBhXHJcbiAgICAgKiBwb3N0LW11dGF0aW9uIHZlcnNpb24gb2YgU25hcHNob3RWZXJzaW9uLk1JTi5cclxuICAgICAqL1xyXG4gICAgTXV0YXRpb24uZ2V0UG9zdE11dGF0aW9uVmVyc2lvbiA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXliZURvYy52ZXJzaW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBNdXRhdGlvbjtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgbXV0YXRpb24gdGhhdCBjcmVhdGVzIG9yIHJlcGxhY2VzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXHJcbiAqIG9iamVjdCB2YWx1ZSBjb250ZW50cy5cclxuICovXHJcbnZhciBTZXRNdXRhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhTZXRNdXRhdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNldE11dGF0aW9uKGtleSwgdmFsdWUsIHByZWNvbmRpdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgX3RoaXMucHJlY29uZGl0aW9uID0gcHJlY29uZGl0aW9uO1xyXG4gICAgICAgIF90aGlzLnR5cGUgPSBNdXRhdGlvblR5cGUuU2V0O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFNldE11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAobWF5YmVEb2MsIG11dGF0aW9uUmVzdWx0KSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25SZXN1bHQudHJhbnNmb3JtUmVzdWx0cyA9PSBudWxsLCAnVHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgU2V0TXV0YXRpb24uJyk7XHJcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcclxuICAgICAgICAvLyBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvbiBtdXN0XHJcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gbXV0YXRpb25SZXN1bHQudmVyc2lvbjtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KHRoaXMua2V5LCB2ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogdHJ1ZVxyXG4gICAgICAgIH0sIHRoaXMudmFsdWUpO1xyXG4gICAgfTtcclxuICAgIFNldE11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBiYXNlRG9jLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZWNvbmRpdGlvbi5pc1ZhbGlkRm9yKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gTXV0YXRpb24uZ2V0UG9zdE11dGF0aW9uVmVyc2lvbihtYXliZURvYyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudCh0aGlzLmtleSwgdmVyc2lvbiwge1xyXG4gICAgICAgICAgICBoYXNMb2NhbE11dGF0aW9uczogdHJ1ZVxyXG4gICAgICAgIH0sIHRoaXMudmFsdWUpO1xyXG4gICAgfTtcclxuICAgIFNldE11dGF0aW9uLnByb3RvdHlwZS5leHRyYWN0QmFzZVZhbHVlID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgU2V0TXV0YXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgU2V0TXV0YXRpb24gJiZcclxuICAgICAgICAgICAgdGhpcy5rZXkuaXNFcXVhbChvdGhlci5rZXkpICYmXHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUuaXNFcXVhbChvdGhlci52YWx1ZSkgJiZcclxuICAgICAgICAgICAgdGhpcy5wcmVjb25kaXRpb24uaXNFcXVhbChvdGhlci5wcmVjb25kaXRpb24pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2V0TXV0YXRpb247XHJcbn0oTXV0YXRpb24pKTtcclxuLyoqXHJcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcclxuICogZ2l2ZW4gdmFsdWVzLiBUaGUgdmFsdWVzIGFyZSBhcHBsaWVkIHRocm91Z2ggYSBmaWVsZCBtYXNrOlxyXG4gKlxyXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gYm90aCB0aGUgbWFzayBhbmQgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcclxuICogICAgaXMgdXBkYXRlZC5cclxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIG5laXRoZXIgdGhlIG1hc2sgbm9yIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nXHJcbiAqICAgIGZpZWxkIGlzIHVubW9kaWZpZWQuXHJcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiB0aGUgbWFzayBidXQgbm90IGluIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXHJcbiAqICAgIGlzIGRlbGV0ZWQuXHJcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBub3QgaW4gdGhlIG1hc2sgYnV0IGlzIGluIHRoZSB2YWx1ZXMsIHRoZSB2YWx1ZXMgbWFwIGlzXHJcbiAqICAgIGlnbm9yZWQuXHJcbiAqL1xyXG52YXIgUGF0Y2hNdXRhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhQYXRjaE11dGF0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUGF0Y2hNdXRhdGlvbihrZXksIGRhdGEsIGZpZWxkTWFzaywgcHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgX3RoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgX3RoaXMuZmllbGRNYXNrID0gZmllbGRNYXNrO1xyXG4gICAgICAgIF90aGlzLnByZWNvbmRpdGlvbiA9IHByZWNvbmRpdGlvbjtcclxuICAgICAgICBfdGhpcy50eXBlID0gTXV0YXRpb25UeXBlLlBhdGNoO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFBhdGNoTXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYywgbXV0YXRpb25SZXN1bHQpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvblJlc3VsdC50cmFuc2Zvcm1SZXN1bHRzID09IG51bGwsICdUcmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSBQYXRjaE11dGF0aW9uLicpO1xyXG4gICAgICAgIGlmICghdGhpcy5wcmVjb25kaXRpb24uaXNWYWxpZEZvcihtYXliZURvYykpIHtcclxuICAgICAgICAgICAgLy8gU2luY2UgdGhlIG11dGF0aW9uIHdhcyBub3QgcmVqZWN0ZWQsIHdlIGtub3cgdGhhdCB0aGUgIHByZWNvbmRpdGlvblxyXG4gICAgICAgICAgICAvLyBtYXRjaGVkIG9uIHRoZSBiYWNrZW5kLiBXZSB0aGVyZWZvcmUgbXVzdCBub3QgaGF2ZSB0aGUgZXhwZWN0ZWQgdmVyc2lvblxyXG4gICAgICAgICAgICAvLyBvZiB0aGUgZG9jdW1lbnQgaW4gb3VyIGNhY2hlIGFuZCByZXR1cm4gYW4gVW5rbm93bkRvY3VtZW50IHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIGtub3duIHVwZGF0ZVRpbWUuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVW5rbm93bkRvY3VtZW50KHRoaXMua2V5LCBtdXRhdGlvblJlc3VsdC52ZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5ld0RhdGEgPSB0aGlzLnBhdGNoRG9jdW1lbnQobWF5YmVEb2MpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQodGhpcy5rZXksIG11dGF0aW9uUmVzdWx0LnZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSwgbmV3RGF0YSk7XHJcbiAgICB9O1xyXG4gICAgUGF0Y2hNdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb0xvY2FsVmlldyA9IGZ1bmN0aW9uIChtYXliZURvYywgYmFzZURvYywgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICB0aGlzLnZlcmlmeUtleU1hdGNoZXMobWF5YmVEb2MpO1xyXG4gICAgICAgIGlmICghdGhpcy5wcmVjb25kaXRpb24uaXNWYWxpZEZvcihtYXliZURvYykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdmVyc2lvbiA9IE11dGF0aW9uLmdldFBvc3RNdXRhdGlvblZlcnNpb24obWF5YmVEb2MpO1xyXG4gICAgICAgIHZhciBuZXdEYXRhID0gdGhpcy5wYXRjaERvY3VtZW50KG1heWJlRG9jKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KHRoaXMua2V5LCB2ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgIGhhc0xvY2FsTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSwgbmV3RGF0YSk7XHJcbiAgICB9O1xyXG4gICAgUGF0Y2hNdXRhdGlvbi5wcm90b3R5cGUuZXh0cmFjdEJhc2VWYWx1ZSA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIFBhdGNoTXV0YXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgUGF0Y2hNdXRhdGlvbiAmJlxyXG4gICAgICAgICAgICB0aGlzLmtleS5pc0VxdWFsKG90aGVyLmtleSkgJiZcclxuICAgICAgICAgICAgdGhpcy5maWVsZE1hc2suaXNFcXVhbChvdGhlci5maWVsZE1hc2spICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJlY29uZGl0aW9uLmlzRXF1YWwob3RoZXIucHJlY29uZGl0aW9uKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXRjaGVzIHRoZSBkYXRhIG9mIGRvY3VtZW50IGlmIGF2YWlsYWJsZSBvciBjcmVhdGVzIGEgbmV3IGRvY3VtZW50LiBOb3RlXHJcbiAgICAgKiB0aGF0IHRoaXMgZG9lcyBub3QgY2hlY2sgd2hldGhlciBvciBub3QgdGhlIHByZWNvbmRpdGlvbiBvZiB0aGlzIHBhdGNoXHJcbiAgICAgKiBob2xkcy5cclxuICAgICAqL1xyXG4gICAgUGF0Y2hNdXRhdGlvbi5wcm90b3R5cGUucGF0Y2hEb2N1bWVudCA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBtYXliZURvYy5kYXRhKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkYXRhID0gT2JqZWN0VmFsdWUuRU1QVFk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBhdGNoT2JqZWN0KGRhdGEpO1xyXG4gICAgfTtcclxuICAgIFBhdGNoTXV0YXRpb24ucHJvdG90eXBlLnBhdGNoT2JqZWN0ID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZFBhdGgpIHtcclxuICAgICAgICAgICAgaWYgKCFmaWVsZFBhdGguaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBfdGhpcy5kYXRhLmZpZWxkKGZpZWxkUGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5zZXQoZmllbGRQYXRoLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5kZWxldGUoZmllbGRQYXRoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQYXRjaE11dGF0aW9uO1xyXG59KE11dGF0aW9uKSk7XHJcbi8qKlxyXG4gKiBBIG11dGF0aW9uIHRoYXQgbW9kaWZpZXMgc3BlY2lmaWMgZmllbGRzIG9mIHRoZSBkb2N1bWVudCB3aXRoIHRyYW5zZm9ybVxyXG4gKiBvcGVyYXRpb25zLiBDdXJyZW50bHkgdGhlIG9ubHkgc3VwcG9ydGVkIHRyYW5zZm9ybSBpcyBhIHNlcnZlciB0aW1lc3RhbXAsIGJ1dFxyXG4gKiBJUCBBZGRyZXNzLCBpbmNyZW1lbnQobiksIGV0Yy4gY291bGQgYmUgc3VwcG9ydGVkIGluIHRoZSBmdXR1cmUuXHJcbiAqXHJcbiAqIEl0IGlzIHNvbWV3aGF0IHNpbWlsYXIgdG8gYSBQYXRjaE11dGF0aW9uIGluIHRoYXQgaXQgcGF0Y2hlcyBzcGVjaWZpYyBmaWVsZHNcclxuICogYW5kIGhhcyBubyBlZmZlY3Qgd2hlbiBhcHBsaWVkIHRvIGEgbnVsbCBvciBOb0RvY3VtZW50IChzZWUgY29tbWVudCBvblxyXG4gKiBNdXRhdGlvbiBmb3IgcmF0aW9uYWxlKS5cclxuICovXHJcbnZhciBUcmFuc2Zvcm1NdXRhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhUcmFuc2Zvcm1NdXRhdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRyYW5zZm9ybU11dGF0aW9uKGtleSwgZmllbGRUcmFuc2Zvcm1zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgX3RoaXMuZmllbGRUcmFuc2Zvcm1zID0gZmllbGRUcmFuc2Zvcm1zO1xyXG4gICAgICAgIF90aGlzLnR5cGUgPSBNdXRhdGlvblR5cGUuVHJhbnNmb3JtO1xyXG4gICAgICAgIC8vIE5PVEU6IFdlIHNldCBhIHByZWNvbmRpdGlvbiBvZiBleGlzdHM6IHRydWUgYXMgYSBzYWZldHktY2hlY2ssIHNpbmNlIHdlXHJcbiAgICAgICAgLy8gYWx3YXlzIGNvbWJpbmUgVHJhbnNmb3JtTXV0YXRpb25zIHdpdGggYSBTZXRNdXRhdGlvbiBvciBQYXRjaE11dGF0aW9uIHdoaWNoXHJcbiAgICAgICAgLy8gKGlmIHN1Y2Nlc3NmdWwpIHNob3VsZCBlbmQgdXAgd2l0aCBhbiBleGlzdGluZyBkb2N1bWVudC5cclxuICAgICAgICBfdGhpcy5wcmVjb25kaXRpb24gPSBQcmVjb25kaXRpb24uZXhpc3RzKHRydWUpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRyYW5zZm9ybU11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAobWF5YmVEb2MsIG11dGF0aW9uUmVzdWx0KSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25SZXN1bHQudHJhbnNmb3JtUmVzdWx0cyAhPSBudWxsLCAnVHJhbnNmb3JtIHJlc3VsdHMgbWlzc2luZyBmb3IgVHJhbnNmb3JtTXV0YXRpb24uJyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZWNvbmRpdGlvbi5pc1ZhbGlkRm9yKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSAgcHJlY29uZGl0aW9uXHJcbiAgICAgICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXHJcbiAgICAgICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIHJldHVybiBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8ga25vd24gdXBkYXRlVGltZS5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVbmtub3duRG9jdW1lbnQodGhpcy5rZXksIG11dGF0aW9uUmVzdWx0LnZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZG9jID0gdGhpcy5yZXF1aXJlRG9jdW1lbnQobWF5YmVEb2MpO1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXN1bHRzID0gdGhpcy5zZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzKG1heWJlRG9jLCBtdXRhdGlvblJlc3VsdC50cmFuc2Zvcm1SZXN1bHRzKTtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9IG11dGF0aW9uUmVzdWx0LnZlcnNpb247XHJcbiAgICAgICAgdmFyIG5ld0RhdGEgPSB0aGlzLnRyYW5zZm9ybU9iamVjdChkb2MuZGF0YSgpLCB0cmFuc2Zvcm1SZXN1bHRzKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KHRoaXMua2V5LCB2ZXJzaW9uLCB7XHJcbiAgICAgICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogdHJ1ZVxyXG4gICAgICAgIH0sIG5ld0RhdGEpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybU11dGF0aW9uLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBiYXNlRG9jLCBsb2NhbFdyaXRlVGltZSkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZWNvbmRpdGlvbi5pc1ZhbGlkRm9yKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBkb2MgPSB0aGlzLnJlcXVpcmVEb2N1bWVudChtYXliZURvYyk7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybVJlc3VsdHMgPSB0aGlzLmxvY2FsVHJhbnNmb3JtUmVzdWx0cyhsb2NhbFdyaXRlVGltZSwgbWF5YmVEb2MsIGJhc2VEb2MpO1xyXG4gICAgICAgIHZhciBuZXdEYXRhID0gdGhpcy50cmFuc2Zvcm1PYmplY3QoZG9jLmRhdGEoKSwgdHJhbnNmb3JtUmVzdWx0cyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudCh0aGlzLmtleSwgZG9jLnZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzTG9jYWxNdXRhdGlvbnM6IHRydWVcclxuICAgICAgICB9LCBuZXdEYXRhKTtcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm1NdXRhdGlvbi5wcm90b3R5cGUuZXh0cmFjdEJhc2VWYWx1ZSA9IGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgIHZhciBiYXNlT2JqZWN0ID0gbnVsbDtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5maWVsZFRyYW5zZm9ybXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFRyYW5zZm9ybSA9IF9hW19pXTtcclxuICAgICAgICAgICAgdmFyIGV4aXN0aW5nVmFsdWUgPSBtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50XHJcbiAgICAgICAgICAgICAgICA/IG1heWJlRG9jLmZpZWxkKGZpZWxkVHJhbnNmb3JtLmZpZWxkKVxyXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHZhciBjb2VyY2VkVmFsdWUgPSBmaWVsZFRyYW5zZm9ybS50cmFuc2Zvcm0uY29tcHV0ZUJhc2VWYWx1ZShleGlzdGluZ1ZhbHVlIHx8IG51bGwpO1xyXG4gICAgICAgICAgICBpZiAoY29lcmNlZFZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChiYXNlT2JqZWN0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlT2JqZWN0ID0gT2JqZWN0VmFsdWUuRU1QVFkuc2V0KGZpZWxkVHJhbnNmb3JtLmZpZWxkLCBjb2VyY2VkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZU9iamVjdCA9IGJhc2VPYmplY3Quc2V0KGZpZWxkVHJhbnNmb3JtLmZpZWxkLCBjb2VyY2VkVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBiYXNlT2JqZWN0O1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybU11dGF0aW9uLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIFRyYW5zZm9ybU11dGF0aW9uICYmXHJcbiAgICAgICAgICAgIHRoaXMua2V5LmlzRXF1YWwob3RoZXIua2V5KSAmJlxyXG4gICAgICAgICAgICBhcnJheUVxdWFscyh0aGlzLmZpZWxkVHJhbnNmb3Jtcywgb3RoZXIuZmllbGRUcmFuc2Zvcm1zKSAmJlxyXG4gICAgICAgICAgICB0aGlzLnByZWNvbmRpdGlvbi5pc0VxdWFsKG90aGVyLnByZWNvbmRpdGlvbikpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXNzZXJ0cyB0aGF0IHRoZSBnaXZlbiBNYXliZURvY3VtZW50IGlzIGFjdHVhbGx5IGEgRG9jdW1lbnQgYW5kIHZlcmlmaWVzXHJcbiAgICAgKiB0aGF0IGl0IG1hdGNoZXMgdGhlIGtleSBmb3IgdGhpcyBtdXRhdGlvbi4gU2luY2Ugd2Ugb25seSBzdXBwb3J0XHJcbiAgICAgKiB0cmFuc2Zvcm1hdGlvbnMgd2l0aCBwcmVjb25kaXRpb24gZXhpc3RzIHRoaXMgbWV0aG9kIGlzIGd1YXJhbnRlZWQgdG8gYmVcclxuICAgICAqIHNhZmUuXHJcbiAgICAgKi9cclxuICAgIFRyYW5zZm9ybU11dGF0aW9uLnByb3RvdHlwZS5yZXF1aXJlRG9jdW1lbnQgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICBhc3NlcnQobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCwgJ1Vua25vd24gTWF5YmVEb2N1bWVudCB0eXBlICcgKyBtYXliZURvYyk7XHJcbiAgICAgICAgYXNzZXJ0KG1heWJlRG9jLmtleS5pc0VxdWFsKHRoaXMua2V5KSwgJ0NhbiBvbmx5IHRyYW5zZm9ybSBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUga2V5Jyk7XHJcbiAgICAgICAgcmV0dXJuIG1heWJlRG9jO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxyXG4gICAgICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2UgYWZ0ZXIgYVxyXG4gICAgICogVHJhbnNmb3JtTXV0YXRpb24gaGFzIGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGJhc2VEb2MgVGhlIGRvY3VtZW50IHByaW9yIHRvIGFwcGx5aW5nIHRoaXMgbXV0YXRpb24gYmF0Y2guXHJcbiAgICAgKiBAcGFyYW0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgdGhlIHNlcnZlci5cclxuICAgICAqIEByZXR1cm4gVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXHJcbiAgICAgKi9cclxuICAgIFRyYW5zZm9ybU11dGF0aW9uLnByb3RvdHlwZS5zZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzID0gZnVuY3Rpb24gKGJhc2VEb2MsIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMpIHtcclxuICAgICAgICB2YXIgdHJhbnNmb3JtUmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggPT09IHNlcnZlclRyYW5zZm9ybVJlc3VsdHMubGVuZ3RoLCBcInNlcnZlciB0cmFuc2Zvcm0gcmVzdWx0IGNvdW50IChcIiArIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMubGVuZ3RoICsgXCIpIFwiICtcclxuICAgICAgICAgICAgKFwic2hvdWxkIG1hdGNoIGZpZWxkIHRyYW5zZm9ybSBjb3VudCAoXCIgKyB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggKyBcIilcIikpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VydmVyVHJhbnNmb3JtUmVzdWx0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZmllbGRUcmFuc2Zvcm0gPSB0aGlzLmZpZWxkVHJhbnNmb3Jtc1tpXTtcclxuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IGZpZWxkVHJhbnNmb3JtLnRyYW5zZm9ybTtcclxuICAgICAgICAgICAgdmFyIHByZXZpb3VzVmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoYmFzZURvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gYmFzZURvYy5maWVsZChmaWVsZFRyYW5zZm9ybS5maWVsZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJhbnNmb3JtUmVzdWx0cy5wdXNoKHRyYW5zZm9ybS5hcHBseVRvUmVtb3RlRG9jdW1lbnQocHJldmlvdXNWYWx1ZSwgc2VydmVyVHJhbnNmb3JtUmVzdWx0c1tpXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtUmVzdWx0cztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcclxuICAgICAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIHdoZW4gYXBwbHlpbmcgYVxyXG4gICAgICogVHJhbnNmb3JtTXV0YXRpb24gbG9jYWxseS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgVGhlIGxvY2FsIHRpbWUgb2YgdGhlIHRyYW5zZm9ybSBtdXRhdGlvbiAodXNlZCB0b1xyXG4gICAgICogICAgIGdlbmVyYXRlIFNlcnZlclRpbWVzdGFtcFZhbHVlcykuXHJcbiAgICAgKiBAcGFyYW0gbWF5YmVEb2MgVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxyXG4gICAgICogICAgIHByZXZpb3VzIG11dGF0aW9ucy5cclxuICAgICAqIEBwYXJhbSBiYXNlRG9jIFRoZSBkb2N1bWVudCBwcmlvciB0byBhcHBseWluZyB0aGlzIG11dGF0aW9uIGJhdGNoLlxyXG4gICAgICogQHJldHVybiBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cclxuICAgICAqL1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLmxvY2FsVHJhbnNmb3JtUmVzdWx0cyA9IGZ1bmN0aW9uIChsb2NhbFdyaXRlVGltZSwgbWF5YmVEb2MsIGJhc2VEb2MpIHtcclxuICAgICAgICB2YXIgdHJhbnNmb3JtUmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmZpZWxkVHJhbnNmb3JtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpZWxkVHJhbnNmb3JtID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gZmllbGRUcmFuc2Zvcm0udHJhbnNmb3JtO1xyXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1ZhbHVlID0gbWF5YmVEb2MuZmllbGQoZmllbGRUcmFuc2Zvcm0uZmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c1ZhbHVlID09PSBudWxsICYmIGJhc2VEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgZG9jdW1lbnQgZG9lcyBub3QgY29udGFpbiBhIHZhbHVlIGZvciB0aGUgbXV0YXRlZFxyXG4gICAgICAgICAgICAgICAgLy8gZmllbGQsIHVzZSB0aGUgdmFsdWUgdGhhdCBleGlzdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uXHJcbiAgICAgICAgICAgICAgICAvLyBiYXRjaC4gVGhpcyBzb2x2ZXMgYW4gZWRnZSBjYXNlIHdoZXJlIGEgUGF0Y2hNdXRhdGlvbiBjbGVhcnMgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZXMgaW4gYSBuZXN0ZWQgbWFwIGJlZm9yZSB0aGUgVHJhbnNmb3JtTXV0YXRpb24gaXMgYXBwbGllZC5cclxuICAgICAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSBiYXNlRG9jLmZpZWxkKGZpZWxkVHJhbnNmb3JtLmZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1SZXN1bHRzLnB1c2godHJhbnNmb3JtLmFwcGx5VG9Mb2NhbFZpZXcocHJldmlvdXNWYWx1ZSwgbG9jYWxXcml0ZVRpbWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVJlc3VsdHM7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtTXV0YXRpb24ucHJvdG90eXBlLnRyYW5zZm9ybU9iamVjdCA9IGZ1bmN0aW9uIChkYXRhLCB0cmFuc2Zvcm1SZXN1bHRzKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRyYW5zZm9ybVJlc3VsdHMubGVuZ3RoID09PSB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGgsICdUcmFuc2Zvcm1SZXN1bHRzIGxlbmd0aCBtaXNtYXRjaC4nKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWVsZFRyYW5zZm9ybSA9IHRoaXMuZmllbGRUcmFuc2Zvcm1zW2ldO1xyXG4gICAgICAgICAgICB2YXIgZmllbGRQYXRoID0gZmllbGRUcmFuc2Zvcm0uZmllbGQ7XHJcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLnNldChmaWVsZFBhdGgsIHRyYW5zZm9ybVJlc3VsdHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHJhbnNmb3JtTXV0YXRpb247XHJcbn0oTXV0YXRpb24pKTtcclxuLyoqIEEgbXV0YXRpb24gdGhhdCBkZWxldGVzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5LiAqL1xyXG52YXIgRGVsZXRlTXV0YXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRGVsZXRlTXV0YXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEZWxldGVNdXRhdGlvbihrZXksIHByZWNvbmRpdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIF90aGlzLnByZWNvbmRpdGlvbiA9IHByZWNvbmRpdGlvbjtcclxuICAgICAgICBfdGhpcy50eXBlID0gTXV0YXRpb25UeXBlLkRlbGV0ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBEZWxldGVNdXRhdGlvbi5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKG1heWJlRG9jLCBtdXRhdGlvblJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMudmVyaWZ5S2V5TWF0Y2hlcyhtYXliZURvYyk7XHJcbiAgICAgICAgYXNzZXJ0KG11dGF0aW9uUmVzdWx0LnRyYW5zZm9ybVJlc3VsdHMgPT0gbnVsbCwgJ1RyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IERlbGV0ZU11dGF0aW9uLicpO1xyXG4gICAgICAgIC8vIFVubGlrZSBhcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGEgcmVtb3RlXHJcbiAgICAgICAgLy8gZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb24gbXVzdFxyXG4gICAgICAgIC8vIGhhdmUgaGVsZC5cclxuICAgICAgICByZXR1cm4gbmV3IE5vRG9jdW1lbnQodGhpcy5rZXksIG11dGF0aW9uUmVzdWx0LnZlcnNpb24sIHtcclxuICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGVsZXRlTXV0YXRpb24ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAobWF5YmVEb2MsIGJhc2VEb2MsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlLZXlNYXRjaGVzKG1heWJlRG9jKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJlY29uZGl0aW9uLmlzVmFsaWRGb3IobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXliZURvYztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChtYXliZURvYy5rZXkuaXNFcXVhbCh0aGlzLmtleSksICdDYW4gb25seSBhcHBseSBtdXRhdGlvbiB0byBkb2N1bWVudCB3aXRoIHNhbWUga2V5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgTm9Eb2N1bWVudCh0aGlzLmtleSwgU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSk7XHJcbiAgICB9O1xyXG4gICAgRGVsZXRlTXV0YXRpb24ucHJvdG90eXBlLmV4dHJhY3RCYXNlVmFsdWUgPSBmdW5jdGlvbiAobWF5YmVEb2MpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBEZWxldGVNdXRhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBEZWxldGVNdXRhdGlvbiAmJlxyXG4gICAgICAgICAgICB0aGlzLmtleS5pc0VxdWFsKG90aGVyLmtleSkgJiZcclxuICAgICAgICAgICAgdGhpcy5wcmVjb25kaXRpb24uaXNFcXVhbChvdGhlci5wcmVjb25kaXRpb24pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVsZXRlTXV0YXRpb247XHJcbn0oTXV0YXRpb24pKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBUeXBlT3JkZXI7XHJcbihmdW5jdGlvbiAoVHlwZU9yZGVyKSB7XHJcbiAgICAvLyBUaGlzIG9yZGVyIGlzIGRlZmluZWQgYnkgdGhlIGJhY2tlbmQuXHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiTnVsbFZhbHVlXCJdID0gMF0gPSBcIk51bGxWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIkJvb2xlYW5WYWx1ZVwiXSA9IDFdID0gXCJCb29sZWFuVmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJOdW1iZXJWYWx1ZVwiXSA9IDJdID0gXCJOdW1iZXJWYWx1ZVwiO1xyXG4gICAgVHlwZU9yZGVyW1R5cGVPcmRlcltcIlRpbWVzdGFtcFZhbHVlXCJdID0gM10gPSBcIlRpbWVzdGFtcFZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiU3RyaW5nVmFsdWVcIl0gPSA0XSA9IFwiU3RyaW5nVmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJCbG9iVmFsdWVcIl0gPSA1XSA9IFwiQmxvYlZhbHVlXCI7XHJcbiAgICBUeXBlT3JkZXJbVHlwZU9yZGVyW1wiUmVmVmFsdWVcIl0gPSA2XSA9IFwiUmVmVmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJHZW9Qb2ludFZhbHVlXCJdID0gN10gPSBcIkdlb1BvaW50VmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJBcnJheVZhbHVlXCJdID0gOF0gPSBcIkFycmF5VmFsdWVcIjtcclxuICAgIFR5cGVPcmRlcltUeXBlT3JkZXJbXCJPYmplY3RWYWx1ZVwiXSA9IDldID0gXCJPYmplY3RWYWx1ZVwiO1xyXG59KShUeXBlT3JkZXIgfHwgKFR5cGVPcmRlciA9IHt9KSk7XHJcbi8qKiBEZWZpbmVzIHRoZSByZXR1cm4gdmFsdWUgZm9yIHBlbmRpbmcgc2VydmVyIHRpbWVzdGFtcHMuICovXHJcbnZhciBTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcjtcclxuKGZ1bmN0aW9uIChTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvcikge1xyXG4gICAgU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbU2VydmVyVGltZXN0YW1wQmVoYXZpb3JbXCJEZWZhdWx0XCJdID0gMF0gPSBcIkRlZmF1bHRcIjtcclxuICAgIFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yW1NlcnZlclRpbWVzdGFtcEJlaGF2aW9yW1wiRXN0aW1hdGVcIl0gPSAxXSA9IFwiRXN0aW1hdGVcIjtcclxuICAgIFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yW1NlcnZlclRpbWVzdGFtcEJlaGF2aW9yW1wiUHJldmlvdXNcIl0gPSAyXSA9IFwiUHJldmlvdXNcIjtcclxufSkoU2VydmVyVGltZXN0YW1wQmVoYXZpb3IgfHwgKFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yID0ge30pKTtcclxuLyoqIEhvbGRzIHByb3BlcnRpZXMgdGhhdCBkZWZpbmUgZmllbGQgdmFsdWUgZGVzZXJpYWxpemF0aW9uIG9wdGlvbnMuICovXHJcbnZhciBGaWVsZFZhbHVlT3B0aW9ucyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpZWxkVmFsdWVPcHRpb25zKHNlcnZlclRpbWVzdGFtcEJlaGF2aW9yLCB0aW1lc3RhbXBzSW5TbmFwc2hvdHMpIHtcclxuICAgICAgICB0aGlzLnNlcnZlclRpbWVzdGFtcEJlaGF2aW9yID0gc2VydmVyVGltZXN0YW1wQmVoYXZpb3I7XHJcbiAgICAgICAgdGhpcy50aW1lc3RhbXBzSW5TbmFwc2hvdHMgPSB0aW1lc3RhbXBzSW5TbmFwc2hvdHM7XHJcbiAgICB9XHJcbiAgICBGaWVsZFZhbHVlT3B0aW9ucy5mcm9tU25hcHNob3RPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMsIHRpbWVzdGFtcHNJblNuYXBzaG90cykge1xyXG4gICAgICAgIHN3aXRjaCAob3B0aW9ucy5zZXJ2ZXJUaW1lc3RhbXBzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2VzdGltYXRlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGRWYWx1ZU9wdGlvbnMoU2VydmVyVGltZXN0YW1wQmVoYXZpb3IuRXN0aW1hdGUsIHRpbWVzdGFtcHNJblNuYXBzaG90cyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ3ByZXZpb3VzJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGRWYWx1ZU9wdGlvbnMoU2VydmVyVGltZXN0YW1wQmVoYXZpb3IuUHJldmlvdXMsIHRpbWVzdGFtcHNJblNuYXBzaG90cyk7XHJcbiAgICAgICAgICAgIGNhc2UgJ25vbmUnOiAvLyBGYWxsLXRocm91Z2ggaW50ZW5kZWQuXHJcbiAgICAgICAgICAgIGNhc2UgdW5kZWZpbmVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlT3B0aW9ucyhTZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvci5EZWZhdWx0LCB0aW1lc3RhbXBzSW5TbmFwc2hvdHMpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ2Zyb21TbmFwc2hvdE9wdGlvbnMoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIG9wdGlvbnMuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWVsZFZhbHVlT3B0aW9ucztcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgZmllbGQgdmFsdWUgcmVwcmVzZW50cyBhIGRhdGF0eXBlIGFzIHN0b3JlZCBieSBGaXJlc3RvcmUuXHJcbiAqL1xyXG52YXIgRmllbGRWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpZWxkVmFsdWUoKSB7XHJcbiAgICB9XHJcbiAgICBGaWVsZFZhbHVlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdmFsID0gdGhpcy52YWx1ZSgpO1xyXG4gICAgICAgIHJldHVybiB2YWwgPT09IG51bGwgPyAnbnVsbCcgOiB2YWwudG9TdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICBGaWVsZFZhbHVlLnByb3RvdHlwZS5kZWZhdWx0Q29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMudHlwZU9yZGVyICE9PSBvdGhlci50eXBlT3JkZXIsICdEZWZhdWx0IGNvbXBhcmVUbyBzaG91bGQgbm90IGJlIHVzZWQgZm9yIHZhbHVlcyBvZiBzYW1lIHR5cGUuJyk7XHJcbiAgICAgICAgdmFyIGNtcCA9IHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy50eXBlT3JkZXIsIG90aGVyLnR5cGVPcmRlcik7XHJcbiAgICAgICAgcmV0dXJuIGNtcDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmllbGRWYWx1ZTtcclxufSgpKTtcclxudmFyIE51bGxWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhOdWxsVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBOdWxsVmFsdWUoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuTnVsbFZhbHVlO1xyXG4gICAgICAgIC8vIGludGVybmFsVmFsdWUgaXMgdW51c2VkIGJ1dCB3ZSBhZGQgaXQgdG8gd29yayBhcm91bmRcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzE1NTg1XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgTnVsbFZhbHVlLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG4gICAgTnVsbFZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgTnVsbFZhbHVlO1xyXG4gICAgfTtcclxuICAgIE51bGxWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgTnVsbFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0Q29tcGFyZVRvKG90aGVyKTtcclxuICAgIH07XHJcbiAgICBOdWxsVmFsdWUuSU5TVEFOQ0UgPSBuZXcgTnVsbFZhbHVlKCk7XHJcbiAgICByZXR1cm4gTnVsbFZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxudmFyIEJvb2xlYW5WYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhCb29sZWFuVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCb29sZWFuVmFsdWUoaW50ZXJuYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IGludGVybmFsVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBCb29sZWFuVmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlO1xyXG4gICAgfTtcclxuICAgIEJvb2xlYW5WYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBCb29sZWFuVmFsdWUgJiZcclxuICAgICAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlID09PSBvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgIH07XHJcbiAgICBCb29sZWFuVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEJvb2xlYW5WYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcih0aGlzLCBvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgfTtcclxuICAgIEJvb2xlYW5WYWx1ZS5vZiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSA/IEJvb2xlYW5WYWx1ZS5UUlVFIDogQm9vbGVhblZhbHVlLkZBTFNFO1xyXG4gICAgfTtcclxuICAgIEJvb2xlYW5WYWx1ZS5UUlVFID0gbmV3IEJvb2xlYW5WYWx1ZSh0cnVlKTtcclxuICAgIEJvb2xlYW5WYWx1ZS5GQUxTRSA9IG5ldyBCb29sZWFuVmFsdWUoZmFsc2UpO1xyXG4gICAgcmV0dXJuIEJvb2xlYW5WYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbi8qKiBCYXNlIGNsYXNzIGZvciBJbnRlZ2VyVmFsdWUgYW5kIERvdWJsZVZhbHVlLiAqL1xyXG52YXIgTnVtYmVyVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoTnVtYmVyVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBOdW1iZXJWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuTnVtYmVyVmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgTnVtYmVyVmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlO1xyXG4gICAgfTtcclxuICAgIE51bWJlclZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBOdW1iZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVtZXJpY0NvbXBhcmF0b3IodGhpcy5pbnRlcm5hbFZhbHVlLCBvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE51bWJlclZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxuLyoqIFV0aWxpdHkgZnVuY3Rpb24gdG8gY29tcGFyZSBkb3VibGVzICh1c2luZyBGaXJlc3RvcmUgc2VtYW50aWNzIGZvciBOYU4pLiAqL1xyXG5mdW5jdGlvbiBudW1lcmljQ29tcGFyYXRvcihsZWZ0LCByaWdodCkge1xyXG4gICAgaWYgKGxlZnQgPCByaWdodCkge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxlZnQgPiByaWdodCkge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGVmdCA9PT0gcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIG9uZSBvciBib3RoIGFyZSBOYU4uXHJcbiAgICAgICAgaWYgKGlzTmFOKGxlZnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpc05hTihyaWdodCkgPyAwIDogLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gY2hlY2sgbnVtYmVycyBmb3IgZXF1YWxpdHkgdXNpbmcgRmlyZXN0b3JlIHNlbWFudGljc1xyXG4gKiAoTmFOID09PSBOYU4sIC0wLjAgIT09IDAuMCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBudW1lcmljRXF1YWxzKGxlZnQsIHJpZ2h0KSB7XHJcbiAgICAvLyBJbXBsZW1lbnRlZCBiYXNlZCBvbiBPYmplY3QuaXMoKSBwb2x5ZmlsbCBmcm9tXHJcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNcclxuICAgIGlmIChsZWZ0ID09PSByaWdodCkge1xyXG4gICAgICAgIC8vICswICE9IC0wXHJcbiAgICAgICAgcmV0dXJuIGxlZnQgIT09IDAgfHwgMSAvIGxlZnQgPT09IDEgLyByaWdodDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIE5hTiA9PSBOYU5cclxuICAgICAgICByZXR1cm4gbGVmdCAhPT0gbGVmdCAmJiByaWdodCAhPT0gcmlnaHQ7XHJcbiAgICB9XHJcbn1cclxudmFyIEludGVnZXJWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhJbnRlZ2VyVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBJbnRlZ2VyVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgSW50ZWdlclZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgLy8gTk9URTogRG91YmxlVmFsdWUgYW5kIEludGVnZXJWYWx1ZSBpbnN0YW5jZXMgbWF5IGNvbXBhcmVUbygpIHRoZSBzYW1lLFxyXG4gICAgICAgIC8vIGJ1dCB0aGF0IGRvZXNuJ3QgbWFrZSB0aGVtIGVxdWFsIHZpYSBpc0VxdWFsKCkuXHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgSW50ZWdlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1lcmljRXF1YWxzKHRoaXMuaW50ZXJuYWxWYWx1ZSwgb3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBJbnRlZ2VyVmFsdWU7XHJcbn0oTnVtYmVyVmFsdWUpKTtcclxudmFyIERvdWJsZVZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKERvdWJsZVZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRG91YmxlVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgRG91YmxlVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICAvLyBOT1RFOiBEb3VibGVWYWx1ZSBhbmQgSW50ZWdlclZhbHVlIGluc3RhbmNlcyBtYXkgY29tcGFyZVRvKCkgdGhlIHNhbWUsXHJcbiAgICAgICAgLy8gYnV0IHRoYXQgZG9lc24ndCBtYWtlIHRoZW0gZXF1YWwgdmlhIGlzRXF1YWwoKS5cclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBEb3VibGVWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVtZXJpY0VxdWFscyh0aGlzLmludGVybmFsVmFsdWUsIG90aGVyLmludGVybmFsVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEb3VibGVWYWx1ZS5OQU4gPSBuZXcgRG91YmxlVmFsdWUoTmFOKTtcclxuICAgIERvdWJsZVZhbHVlLlBPU0lUSVZFX0lORklOSVRZID0gbmV3IERvdWJsZVZhbHVlKEluZmluaXR5KTtcclxuICAgIERvdWJsZVZhbHVlLk5FR0FUSVZFX0lORklOSVRZID0gbmV3IERvdWJsZVZhbHVlKC1JbmZpbml0eSk7XHJcbiAgICByZXR1cm4gRG91YmxlVmFsdWU7XHJcbn0oTnVtYmVyVmFsdWUpKTtcclxuLy8gVE9ETyhiLzM3MjY3ODg1KTogQWRkIHRydW5jYXRpb24gc3VwcG9ydFxyXG52YXIgU3RyaW5nVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoU3RyaW5nVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTdHJpbmdWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuU3RyaW5nVmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3RyaW5nVmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlO1xyXG4gICAgfTtcclxuICAgIFN0cmluZ1ZhbHVlLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIFN0cmluZ1ZhbHVlICYmIHRoaXMuaW50ZXJuYWxWYWx1ZSA9PT0gb3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgU3RyaW5nVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFN0cmluZ1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuaW50ZXJuYWxWYWx1ZSwgb3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdHJpbmdWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbnZhciBUaW1lc3RhbXBWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhUaW1lc3RhbXBWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRpbWVzdGFtcFZhbHVlKGludGVybmFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmludGVybmFsVmFsdWUgPSBpbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIGlmICghb3B0aW9ucyB8fCBvcHRpb25zLnRpbWVzdGFtcHNJblNuYXBzaG90cykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS50b0RhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVGltZXN0YW1wVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgVGltZXN0YW1wVmFsdWUgJiZcclxuICAgICAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlLmlzRXF1YWwob3RoZXIuaW50ZXJuYWxWYWx1ZSkpO1xyXG4gICAgfTtcclxuICAgIFRpbWVzdGFtcFZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBUaW1lc3RhbXBWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlLl9jb21wYXJlVG8ob3RoZXIuaW50ZXJuYWxWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG90aGVyIGluc3RhbmNlb2YgU2VydmVyVGltZXN0YW1wVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gQ29uY3JldGUgdGltZXN0YW1wcyBjb21lIGJlZm9yZSBzZXJ2ZXIgdGltZXN0YW1wcy5cclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBUaW1lc3RhbXBWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgbG9jYWxseS1hcHBsaWVkIFNlcnZlclRpbWVzdGFtcC5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gU2VydmVyVGltZXN0YW1wVmFsdWUgaW5zdGFuY2VzIGFyZSBjcmVhdGVkIGFzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYVxyXG4gKiAgIFRyYW5zZm9ybU11dGF0aW9uIChzZWUgVHJhbnNmb3JtTXV0YXRpb24uYXBwbHlUbygpKS4gVGhleSBjYW4gb25seSBleGlzdCBpblxyXG4gKiAgIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIFRoZXJlZm9yZSB0aGV5IGRvIG5vdCBuZWVkIHRvIGJlIHBhcnNlZCBvclxyXG4gKiAgIHNlcmlhbGl6ZWQuXHJcbiAqIC0gV2hlbiBldmFsdWF0ZWQgbG9jYWxseSAoZS5nLiBmb3Igc25hcHNob3QuZGF0YSgpKSwgdGhleSBieSBkZWZhdWx0XHJcbiAqICAgZXZhbHVhdGUgdG8gYG51bGxgLiBUaGlzIGJlaGF2aW9yIGNhbiBiZSBjb25maWd1cmVkIGJ5IHBhc3NpbmcgY3VzdG9tXHJcbiAqICAgRmllbGRWYWx1ZU9wdGlvbnMgdG8gdmFsdWUoKS5cclxuICogLSBXaXRoIHJlc3BlY3QgdG8gb3RoZXIgU2VydmVyVGltZXN0YW1wVmFsdWVzLCB0aGV5IHNvcnQgYnkgdGhlaXJcclxuICogICBsb2NhbFdyaXRlVGltZS5cclxuICovXHJcbnZhciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNlcnZlclRpbWVzdGFtcFZhbHVlKGxvY2FsV3JpdGVUaW1lLCBwcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5sb2NhbFdyaXRlVGltZSA9IGxvY2FsV3JpdGVUaW1lO1xyXG4gICAgICAgIF90aGlzLnByZXZpb3VzVmFsdWUgPSBwcmV2aW91c1ZhbHVlO1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmXHJcbiAgICAgICAgICAgIG9wdGlvbnMuc2VydmVyVGltZXN0YW1wQmVoYXZpb3IgPT09IFNlcnZlclRpbWVzdGFtcEJlaGF2aW9yLkVzdGltYXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wVmFsdWUodGhpcy5sb2NhbFdyaXRlVGltZSkudmFsdWUob3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMgJiZcclxuICAgICAgICAgICAgb3B0aW9ucy5zZXJ2ZXJUaW1lc3RhbXBCZWhhdmlvciA9PT0gU2VydmVyVGltZXN0YW1wQmVoYXZpb3IuUHJldmlvdXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZSA/IHRoaXMucHJldmlvdXNWYWx1ZS52YWx1ZShvcHRpb25zKSA6IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2VydmVyVGltZXN0YW1wVmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgU2VydmVyVGltZXN0YW1wVmFsdWUgJiZcclxuICAgICAgICAgICAgdGhpcy5sb2NhbFdyaXRlVGltZS5pc0VxdWFsKG90aGVyLmxvY2FsV3JpdGVUaW1lKSk7XHJcbiAgICB9O1xyXG4gICAgU2VydmVyVGltZXN0YW1wVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFNlcnZlclRpbWVzdGFtcFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsV3JpdGVUaW1lLl9jb21wYXJlVG8ob3RoZXIubG9jYWxXcml0ZVRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvdGhlciBpbnN0YW5jZW9mIFRpbWVzdGFtcFZhbHVlKSB7XHJcbiAgICAgICAgICAgIC8vIFNlcnZlciB0aW1lc3RhbXBzIGNvbWUgYWZ0ZXIgYWxsIGNvbmNyZXRlIHRpbWVzdGFtcHMuXHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNlcnZlclRpbWVzdGFtcFZhbHVlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJzxTZXJ2ZXJUaW1lc3RhbXAgbG9jYWxUaW1lPScgKyB0aGlzLmxvY2FsV3JpdGVUaW1lLnRvU3RyaW5nKCkgKyAnPic7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNlcnZlclRpbWVzdGFtcFZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxudmFyIEJsb2JWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhCbG9iVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCbG9iVmFsdWUoaW50ZXJuYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IGludGVybmFsVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLkJsb2JWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBCbG9iVmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbFZhbHVlO1xyXG4gICAgfTtcclxuICAgIEJsb2JWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBCbG9iVmFsdWUgJiZcclxuICAgICAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlLmlzRXF1YWwob3RoZXIuaW50ZXJuYWxWYWx1ZSkpO1xyXG4gICAgfTtcclxuICAgIEJsb2JWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgQmxvYlZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWUuX2NvbXBhcmVUbyhvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJsb2JWYWx1ZTtcclxufShGaWVsZFZhbHVlKSk7XHJcbnZhciBSZWZWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhSZWZWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFJlZlZhbHVlKGRhdGFiYXNlSWQsIGtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZGF0YWJhc2VJZCA9IGRhdGFiYXNlSWQ7XHJcbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xyXG4gICAgICAgIF90aGlzLnR5cGVPcmRlciA9IFR5cGVPcmRlci5SZWZWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBSZWZWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmtleTtcclxuICAgIH07XHJcbiAgICBSZWZWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFJlZlZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5rZXkuaXNFcXVhbChvdGhlci5rZXkpICYmIHRoaXMuZGF0YWJhc2VJZC5pc0VxdWFsKG90aGVyLmRhdGFiYXNlSWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUmVmVmFsdWUucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFJlZlZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBjbXAgPSB0aGlzLmRhdGFiYXNlSWQuY29tcGFyZVRvKG90aGVyLmRhdGFiYXNlSWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gY21wICE9PSAwID8gY21wIDogRG9jdW1lbnRLZXkuY29tcGFyYXRvcih0aGlzLmtleSwgb3RoZXIua2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlZlZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxudmFyIEdlb1BvaW50VmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoR2VvUG9pbnRWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEdlb1BvaW50VmFsdWUoaW50ZXJuYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IGludGVybmFsVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLkdlb1BvaW50VmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgR2VvUG9pbnRWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWU7XHJcbiAgICB9O1xyXG4gICAgR2VvUG9pbnRWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBHZW9Qb2ludFZhbHVlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaW50ZXJuYWxWYWx1ZS5pc0VxdWFsKG90aGVyLmludGVybmFsVmFsdWUpKTtcclxuICAgIH07XHJcbiAgICBHZW9Qb2ludFZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBHZW9Qb2ludFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWUuX2NvbXBhcmVUbyhvdGhlci5pbnRlcm5hbFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdENvbXBhcmVUbyhvdGhlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEdlb1BvaW50VmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xyXG52YXIgT2JqZWN0VmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoT2JqZWN0VmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBPYmplY3RWYWx1ZShpbnRlcm5hbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbnRlcm5hbFZhbHVlID0gaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICBfdGhpcy50eXBlT3JkZXIgPSBUeXBlT3JkZXIuT2JqZWN0VmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlLmlub3JkZXJUcmF2ZXJzYWwoZnVuY3Rpb24gKGtleSwgdmFsKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdmFsLnZhbHVlKG9wdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlLmlub3JkZXJUcmF2ZXJzYWwoYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBpdDEgPSB0aGlzLmludGVybmFsVmFsdWUuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICAgICAgdmFyIGl0MiA9IG90aGVyLmludGVybmFsVmFsdWUuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICAgICAgd2hpbGUgKGl0MS5oYXNOZXh0KCkgJiYgaXQyLmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHQxID0gaXQxLmdldE5leHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0MiA9IGl0Mi5nZXROZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dDEua2V5ICE9PSBuZXh0Mi5rZXkgfHwgIW5leHQxLnZhbHVlLmlzRXF1YWwobmV4dDIudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAhaXQxLmhhc05leHQoKSAmJiAhaXQyLmhhc05leHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgaXQxID0gdGhpcy5pbnRlcm5hbFZhbHVlLmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgICAgIHZhciBpdDIgPSBvdGhlci5pbnRlcm5hbFZhbHVlLmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgICAgIHdoaWxlIChpdDEuaGFzTmV4dCgpICYmIGl0Mi5oYXNOZXh0KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0MSA9IGl0MS5nZXROZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dDIgPSBpdDIuZ2V0TmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNtcCA9IHByaW1pdGl2ZUNvbXBhcmF0b3IobmV4dDEua2V5LCBuZXh0Mi5rZXkpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dDEudmFsdWUuY29tcGFyZVRvKG5leHQyLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChjbXApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY21wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE9ubHkgZXF1YWwgaWYgYm90aCBpdGVyYXRvcnMgYXJlIGV4aGF1c3RlZFxyXG4gICAgICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcihpdDEuaGFzTmV4dCgpLCBpdDIuaGFzTmV4dCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHBhdGgsIHRvKSB7XHJcbiAgICAgICAgYXNzZXJ0KCFwYXRoLmlzRW1wdHkoKSwgJ0Nhbm5vdCBzZXQgZmllbGQgZm9yIGVtcHR5IHBhdGggb24gT2JqZWN0VmFsdWUnKTtcclxuICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q2hpbGQocGF0aC5maXJzdFNlZ21lbnQoKSwgdG8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZChwYXRoLmZpcnN0U2VnbWVudCgpKTtcclxuICAgICAgICAgICAgaWYgKCEoY2hpbGQgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkID0gT2JqZWN0VmFsdWUuRU1QVFk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG5ld0NoaWxkID0gY2hpbGQuc2V0KHBhdGgucG9wRmlyc3QoKSwgdG8pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDaGlsZChwYXRoLmZpcnN0U2VnbWVudCgpLCBuZXdDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIGFzc2VydCghcGF0aC5pc0VtcHR5KCksICdDYW5ub3QgZGVsZXRlIGZpZWxkIGZvciBlbXB0eSBwYXRoIG9uIE9iamVjdFZhbHVlJyk7XHJcbiAgICAgICAgaWYgKHBhdGgubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0VmFsdWUodGhpcy5pbnRlcm5hbFZhbHVlLnJlbW92ZShwYXRoLmZpcnN0U2VnbWVudCgpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBuZXN0ZWQgZmllbGRcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZChwYXRoLmZpcnN0U2VnbWVudCgpKTtcclxuICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgT2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdDaGlsZCA9IGNoaWxkLmRlbGV0ZShwYXRoLnBvcEZpcnN0KCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RWYWx1ZSh0aGlzLmludGVybmFsVmFsdWUuaW5zZXJ0KHBhdGguZmlyc3RTZWdtZW50KCksIG5ld0NoaWxkKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEb24ndCBhY3R1YWxseSBjaGFuZ2UgYSBwcmltaXRpdmUgdmFsdWUgdG8gYW4gb2JqZWN0IGZvciBhIGRlbGV0ZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZChwYXRoKSAhPT0gbnVsbDtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuZmllbGQgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIGFzc2VydCghcGF0aC5pc0VtcHR5KCksIFwiQ2FuJ3QgZ2V0IGZpZWxkIG9mIGVtcHR5IHBhdGhcIik7XHJcbiAgICAgICAgdmFyIGZpZWxkID0gdGhpcztcclxuICAgICAgICBwYXRoLmZvckVhY2goZnVuY3Rpb24gKHBhdGhTZWdtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZCBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZCA9IGZpZWxkLmludGVybmFsVmFsdWUuZ2V0KHBhdGhTZWdtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBmaWVsZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgRmllbGRQYXRocyBzdGFydGluZyBmcm9tIHRoaXMgT2JqZWN0VmFsdWUsXHJcbiAgICAgKiBpbmNsdWRpbmcgcGF0aHMgZnJvbSBuZXN0ZWQgb2JqZWN0cy5cclxuICAgICAqL1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLmZpZWxkTWFzayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmllbGRzID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGguY29tcGFyYXRvcik7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbFZhbHVlLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQYXRoID0gbmV3IEZpZWxkUGF0aChba2V5XSk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmVzdGVkTWFzayA9IHZhbHVlLmZpZWxkTWFzaygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5lc3RlZEZpZWxkcyA9IG5lc3RlZE1hc2suZmllbGRzO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZEZpZWxkcy5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBQcmVzZXJ2ZSB0aGUgZW1wdHkgbWFwIGJ5IGFkZGluZyBpdCB0byB0aGUgRmllbGRNYXNrLlxyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkcy5hZGQoY3VycmVudFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cclxuICAgICAgICAgICAgICAgICAgICBuZXN0ZWRGaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAobmVzdGVkUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHMgPSBmaWVsZHMuYWRkKGN1cnJlbnRQYXRoLmNoaWxkKG5lc3RlZFBhdGgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkcyA9IGZpZWxkcy5hZGQoY3VycmVudFBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIEZpZWxkTWFzay5mcm9tU2V0KGZpZWxkcyk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWUudG9TdHJpbmcoKTtcclxuICAgIH07XHJcbiAgICBPYmplY3RWYWx1ZS5wcm90b3R5cGUuY2hpbGQgPSBmdW5jdGlvbiAoY2hpbGROYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxWYWx1ZS5nZXQoY2hpbGROYW1lKSB8fCB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0VmFsdWUucHJvdG90eXBlLnNldENoaWxkID0gZnVuY3Rpb24gKGNoaWxkTmFtZSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9iamVjdFZhbHVlKHRoaXMuaW50ZXJuYWxWYWx1ZS5pbnNlcnQoY2hpbGROYW1lLCB2YWx1ZSkpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdFZhbHVlLkVNUFRZID0gbmV3IE9iamVjdFZhbHVlKG5ldyBTb3J0ZWRNYXAocHJpbWl0aXZlQ29tcGFyYXRvcikpO1xyXG4gICAgcmV0dXJuIE9iamVjdFZhbHVlO1xyXG59KEZpZWxkVmFsdWUpKTtcclxudmFyIEFycmF5VmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQXJyYXlWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFycmF5VmFsdWUoaW50ZXJuYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW50ZXJuYWxWYWx1ZSA9IGludGVybmFsVmFsdWU7XHJcbiAgICAgICAgX3RoaXMudHlwZU9yZGVyID0gVHlwZU9yZGVyLkFycmF5VmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQXJyYXlWYWx1ZS5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsVmFsdWUubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiB2LnZhbHVlKG9wdGlvbnMpOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgY29udGFpbmVkIGluIHRoaXMgYXJyYXkuXHJcbiAgICAgKi9cclxuICAgIEFycmF5VmFsdWUucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuaW50ZXJuYWxWYWx1ZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmlzRXF1YWwodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlWYWx1ZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLmludGVybmFsVmFsdWUuZm9yRWFjaChhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIEFycmF5VmFsdWUucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBBcnJheVZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmludGVybmFsVmFsdWUubGVuZ3RoICE9PSBvdGhlci5pbnRlcm5hbFZhbHVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbnRlcm5hbFZhbHVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW50ZXJuYWxWYWx1ZVtpXS5pc0VxdWFsKG90aGVyLmludGVybmFsVmFsdWVbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlWYWx1ZS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgbWluTGVuZ3RoID0gTWF0aC5taW4odGhpcy5pbnRlcm5hbFZhbHVlLmxlbmd0aCwgb3RoZXIuaW50ZXJuYWxWYWx1ZS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1pbkxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY21wID0gdGhpcy5pbnRlcm5hbFZhbHVlW2ldLmNvbXBhcmVUbyhvdGhlci5pbnRlcm5hbFZhbHVlW2ldKTtcclxuICAgICAgICAgICAgICAgIGlmIChjbXApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY21wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuaW50ZXJuYWxWYWx1ZS5sZW5ndGgsIG90aGVyLmludGVybmFsVmFsdWUubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRDb21wYXJlVG8ob3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBBcnJheVZhbHVlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGVzY3JpcHRpb25zID0gdGhpcy5pbnRlcm5hbFZhbHVlLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gdi50b1N0cmluZygpOyB9KTtcclxuICAgICAgICByZXR1cm4gXCJbXCIgKyBkZXNjcmlwdGlvbnMuam9pbignLCcpICsgXCJdXCI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFycmF5VmFsdWU7XHJcbn0oRmllbGRWYWx1ZSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSByZXN1bHQgb2YgYSBsb29rdXAgZm9yIGEgZ2l2ZW4gcGF0aCBtYXkgYmUgYW4gZXhpc3RpbmcgZG9jdW1lbnQgb3IgYVxyXG4gKiBtYXJrZXIgdGhhdCB0aGlzIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IGF0IGEgZ2l2ZW4gdmVyc2lvbi5cclxuICovXHJcbnZhciBNYXliZURvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWF5YmVEb2N1bWVudChrZXksIHZlcnNpb24pIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgTWF5YmVEb2N1bWVudC5jb21wYXJlQnlLZXkgPSBmdW5jdGlvbiAoZDEsIGQyKSB7XHJcbiAgICAgICAgcmV0dXJuIERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZDEua2V5LCBkMi5rZXkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNYXliZURvY3VtZW50O1xyXG59KCkpO1xyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IGluIEZpcmVzdG9yZSB3aXRoIGEga2V5LCB2ZXJzaW9uLCBkYXRhIGFuZCB3aGV0aGVyIHRoZVxyXG4gKiBkYXRhIGhhcyBsb2NhbCBtdXRhdGlvbnMgYXBwbGllZCB0byBpdC5cclxuICovXHJcbnZhciBEb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhEb2N1bWVudCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50KGtleSwgdmVyc2lvbiwgb3B0aW9ucywgb2JqZWN0VmFsdWUsIHByb3RvLCBjb252ZXJ0ZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBrZXksIHZlcnNpb24pIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMub2JqZWN0VmFsdWUgPSBvYmplY3RWYWx1ZTtcclxuICAgICAgICBfdGhpcy5wcm90byA9IHByb3RvO1xyXG4gICAgICAgIF90aGlzLmNvbnZlcnRlciA9IGNvbnZlcnRlcjtcclxuICAgICAgICBhc3NlcnQoX3RoaXMub2JqZWN0VmFsdWUgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAoX3RoaXMucHJvdG8gIT09IHVuZGVmaW5lZCAmJiBfdGhpcy5jb252ZXJ0ZXIgIT09IHVuZGVmaW5lZCksICdJZiBvYmplY3RWYWx1ZSBpcyBub3QgZGVmaW5lZCwgcHJvdG8gYW5kIGNvbnZlcnRlciBuZWVkIHRvIGJlIHNldC4nKTtcclxuICAgICAgICBfdGhpcy5oYXNMb2NhbE11dGF0aW9ucyA9ICEhb3B0aW9ucy5oYXNMb2NhbE11dGF0aW9ucztcclxuICAgICAgICBfdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPSAhIW9wdGlvbnMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIERvY3VtZW50LnByb3RvdHlwZS5maWVsZCA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JqZWN0VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0VmFsdWUuZmllbGQocGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZmllbGRWYWx1ZUNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTM2MDkwNDQ1KTogUmVtb3ZlIHRoZSBjYWNoZSB3aGVuIGBnZXRGaWVsZGAgaXMgbm8gbG9uZ2VyXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsZWQgZHVyaW5nIFF1ZXJ5IG9yZGVyaW5nLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZFZhbHVlQ2FjaGUgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGNhbm9uaWNhbFBhdGggPSBwYXRoLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgZmllbGRWYWx1ZSA9IHRoaXMuZmllbGRWYWx1ZUNhY2hlLmdldChjYW5vbmljYWxQYXRoKTtcclxuICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW5zdGVhZCBvZiBkZXNlcmlhbGl6aW5nIHRoZSBmdWxsIERvY3VtZW50IHByb3RvLCB3ZSBvbmx5XHJcbiAgICAgICAgICAgICAgICAvLyBkZXNlcmlhbGl6ZSB0aGUgdmFsdWUgYXQgdGhlIHJlcXVlc3RlZCBmaWVsZCBwYXRoLiBUaGlzIHNwZWVkcyB1cFxyXG4gICAgICAgICAgICAgICAgLy8gUXVlcnkgZXhlY3V0aW9uIGFzIHF1ZXJ5IGZpbHRlcnMgY2FuIGRpc2NhcmQgZG9jdW1lbnRzIGJhc2VkIG9uIGFcclxuICAgICAgICAgICAgICAgIC8vIHNpbmdsZSBmaWVsZC5cclxuICAgICAgICAgICAgICAgIHZhciBwcm90b1ZhbHVlID0gdGhpcy5nZXRQcm90b0ZpZWxkKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3RvVmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVmFsdWUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IHRoaXMuY29udmVydGVyKHByb3RvVmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZFZhbHVlQ2FjaGUuc2V0KGNhbm9uaWNhbFBhdGgsIGZpZWxkVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmaWVsZFZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEb2N1bWVudC5wcm90b3R5cGUuZGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5vYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSBPYmplY3RWYWx1ZS5FTVBUWTtcclxuICAgICAgICAgICAgZm9yRWFjaCh0aGlzLnByb3RvLmZpZWxkcyB8fCB7fSwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdF8xID0gcmVzdWx0XzEuc2V0KG5ldyBGaWVsZFBhdGgoW2tleV0pLCBfdGhpcy5jb252ZXJ0ZXIodmFsdWUpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMub2JqZWN0VmFsdWUgPSByZXN1bHRfMTtcclxuICAgICAgICAgICAgLy8gT25jZSBvYmplY3RWYWx1ZSBpcyBjb21wdXRlZCwgdmFsdWVzIGluc2lkZSB0aGUgZmllbGRWYWx1ZUNhY2hlIGFyZSBub1xyXG4gICAgICAgICAgICAvLyBsb25nZXIgYWNjZXNzZWQuXHJcbiAgICAgICAgICAgIHRoaXMuZmllbGRWYWx1ZUNhY2hlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RWYWx1ZTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudC5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgpLnZhbHVlKCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgRG9jdW1lbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5rZXkuaXNFcXVhbChvdGhlci5rZXkpICYmXHJcbiAgICAgICAgICAgIHRoaXMudmVyc2lvbi5pc0VxdWFsKG90aGVyLnZlcnNpb24pICYmXHJcbiAgICAgICAgICAgIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgPT09IG90aGVyLmhhc0xvY2FsTXV0YXRpb25zICYmXHJcbiAgICAgICAgICAgIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zID09PSBvdGhlci5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiZcclxuICAgICAgICAgICAgdGhpcy5kYXRhKCkuaXNFcXVhbChvdGhlci5kYXRhKCkpKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcIkRvY3VtZW50KFwiICsgdGhpcy5rZXkgKyBcIiwgXCIgKyB0aGlzLnZlcnNpb24gKyBcIiwgXCIgKyB0aGlzLmRhdGEoKS50b1N0cmluZygpICsgXCIsIFwiICtcclxuICAgICAgICAgICAgKFwie2hhc0xvY2FsTXV0YXRpb25zOiBcIiArIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgKyBcIn0pLCBcIikgK1xyXG4gICAgICAgICAgICAoXCJ7aGFzQ29tbWl0dGVkTXV0YXRpb25zOiBcIiArIHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zICsgXCJ9KVwiKSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50LnByb3RvdHlwZSwgXCJoYXNQZW5kaW5nV3JpdGVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG5lc3RlZCBQcm90b2J1ZiB2YWx1ZSBmb3IgJ3BhdGhgLiBDYW4gb25seSBiZSBjYWxsZWQgaWZcclxuICAgICAqIGBwcm90b2Agd2FzIHByb3ZpZGVkIGF0IGNvbnN0cnVjdGlvbiB0aW1lLlxyXG4gICAgICovXHJcbiAgICBEb2N1bWVudC5wcm90b3R5cGUuZ2V0UHJvdG9GaWVsZCA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMucHJvdG8gIT09IHVuZGVmaW5lZCwgJ0NhbiBvbmx5IGNhbGwgZ2V0UHJvdG9GaWVsZCgpIHdoZW4gcHJvdG8gaXMgZGVmaW5lZCcpO1xyXG4gICAgICAgIHZhciBwcm90b1ZhbHVlID0gdGhpcy5wcm90by5maWVsZHNcclxuICAgICAgICAgICAgPyB0aGlzLnByb3RvLmZpZWxkc1twYXRoLmZpcnN0U2VnbWVudCgpXVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHBhdGgubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgaWYgKCFwcm90b1ZhbHVlIHx8ICFwcm90b1ZhbHVlLm1hcFZhbHVlIHx8ICFwcm90b1ZhbHVlLm1hcFZhbHVlLmZpZWxkcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcm90b1ZhbHVlID0gcHJvdG9WYWx1ZS5tYXBWYWx1ZS5maWVsZHNbcGF0aC5nZXQoaSldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvdG9WYWx1ZTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudC5jb21wYXJlQnlGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCwgZDEsIGQyKSB7XHJcbiAgICAgICAgdmFyIHYxID0gZDEuZmllbGQoZmllbGQpO1xyXG4gICAgICAgIHZhciB2MiA9IGQyLmZpZWxkKGZpZWxkKTtcclxuICAgICAgICBpZiAodjEgIT09IG51bGwgJiYgdjIgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHYxLmNvbXBhcmVUbyh2Mik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbChcIlRyeWluZyB0byBjb21wYXJlIGRvY3VtZW50cyBvbiBmaWVsZHMgdGhhdCBkb24ndCBleGlzdFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvY3VtZW50O1xyXG59KE1heWJlRG9jdW1lbnQpKTtcclxuLyoqXHJcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgZGVsZXRlZCBkb2N1bWVudC5cclxuICogVmVyc2lvbiBpcyBzZXQgdG8gMCBpZiB3ZSBkb24ndCBwb2ludCB0byBhbnkgc3BlY2lmaWMgdGltZSwgb3RoZXJ3aXNlIGl0XHJcbiAqIGRlbm90ZXMgdGltZSB3ZSBrbm93IGl0IGRpZG4ndCBleGlzdCBhdC5cclxuICovXHJcbnZhciBOb0RvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKE5vRG9jdW1lbnQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBOb0RvY3VtZW50KGtleSwgdmVyc2lvbiwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGtleSwgdmVyc2lvbikgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPSAhIShvcHRpb25zICYmIG9wdGlvbnMuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBOb0RvY3VtZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJOb0RvY3VtZW50KFwiICsgdGhpcy5rZXkgKyBcIiwgXCIgKyB0aGlzLnZlcnNpb24gKyBcIilcIjtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9Eb2N1bWVudC5wcm90b3R5cGUsIFwiaGFzUGVuZGluZ1dyaXRlc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE5vRG9jdW1lbnQucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgTm9Eb2N1bWVudCAmJlxyXG4gICAgICAgICAgICBvdGhlci5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPT09IHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmXHJcbiAgICAgICAgICAgIG90aGVyLnZlcnNpb24uaXNFcXVhbCh0aGlzLnZlcnNpb24pICYmXHJcbiAgICAgICAgICAgIG90aGVyLmtleS5pc0VxdWFsKHRoaXMua2V5KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE5vRG9jdW1lbnQ7XHJcbn0oTWF5YmVEb2N1bWVudCkpO1xyXG4vKipcclxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYW4gZXhpc3RpbmcgZG9jdW1lbnQgd2hvc2UgZGF0YSBpcyB1bmtub3duIChlLmcuIGFcclxuICogZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd24gYmFzZSBkb2N1bWVudCkuXHJcbiAqL1xyXG52YXIgVW5rbm93bkRvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKFVua25vd25Eb2N1bWVudCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFVua25vd25Eb2N1bWVudCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBVbmtub3duRG9jdW1lbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIlVua25vd25Eb2N1bWVudChcIiArIHRoaXMua2V5ICsgXCIsIFwiICsgdGhpcy52ZXJzaW9uICsgXCIpXCI7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVua25vd25Eb2N1bWVudC5wcm90b3R5cGUsIFwiaGFzUGVuZGluZ1dyaXRlc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgVW5rbm93bkRvY3VtZW50LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChvdGhlciBpbnN0YW5jZW9mIFVua25vd25Eb2N1bWVudCAmJlxyXG4gICAgICAgICAgICBvdGhlci52ZXJzaW9uLmlzRXF1YWwodGhpcy52ZXJzaW9uKSAmJlxyXG4gICAgICAgICAgICBvdGhlci5rZXkuaXNFcXVhbCh0aGlzLmtleSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBVbmtub3duRG9jdW1lbnQ7XHJcbn0oTWF5YmVEb2N1bWVudCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgbWFwIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBvYmplY3RzIGFzIGtleXMuIE9iamVjdHMgbXVzdCBpbXBsZW1lbnQgdGhlXHJcbiAqIEVxdWF0YWJsZSBpbnRlcmZhY2UgYW5kIG11c3QgYmUgaW1tdXRhYmxlLiBFbnRyaWVzIGluIHRoZSBtYXAgYXJlIHN0b3JlZFxyXG4gKiB0b2dldGhlciB3aXRoIHRoZSBrZXkgYmVpbmcgcHJvZHVjZWQgZnJvbSB0aGUgbWFwS2V5Rm4uIFRoaXMgbWFwXHJcbiAqIGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBjb2xsaXNpb25zIG9mIGtleXMuXHJcbiAqL1xyXG52YXIgT2JqZWN0TWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gT2JqZWN0TWFwKG1hcEtleUZuKSB7XHJcbiAgICAgICAgdGhpcy5tYXBLZXlGbiA9IG1hcEtleUZuO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBpbm5lciBtYXAgZm9yIGEga2V5IC0+IHZhbHVlIHBhaXIuIER1ZSB0byB0aGUgcG9zc2liaWxpdHkgb2ZcclxuICAgICAgICAgKiBjb2xsaXNpb25zIHdlIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaFxyXG4gICAgICAgICAqIHRvIGZpbmQgYW4gYWN0dWFsIG1hdGNoLiBOb3RlIHRoYXQgY29sbGlzaW9ucyBzaG91bGQgYmUgcmFyZSwgc28gd2Ugc3RpbGxcclxuICAgICAgICAgKiBleHBlY3QgbmVhciBjb25zdGFudCB0aW1lIGxvb2t1cHMgaW4gcHJhY3RpY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbm5lciA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqL1xyXG4gICAgT2JqZWN0TWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIGlkID0gdGhpcy5tYXBLZXlGbihrZXkpO1xyXG4gICAgICAgIHZhciBtYXRjaGVzID0gdGhpcy5pbm5lcltpZF07XHJcbiAgICAgICAgaWYgKG1hdGNoZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG1hdGNoZXNfMSA9IG1hdGNoZXM7IF9pIDwgbWF0Y2hlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgX2EgPSBtYXRjaGVzXzFbX2ldLCBvdGhlcktleSA9IF9hWzBdLCB2YWx1ZSA9IF9hWzFdO1xyXG4gICAgICAgICAgICBpZiAob3RoZXJLZXkuaXNFcXVhbChrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICBPYmplY3RNYXAucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXQoa2V5KSAhPT0gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovXHJcbiAgICBPYmplY3RNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGlkID0gdGhpcy5tYXBLZXlGbihrZXkpO1xyXG4gICAgICAgIHZhciBtYXRjaGVzID0gdGhpcy5pbm5lcltpZF07XHJcbiAgICAgICAgaWYgKG1hdGNoZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmlubmVyW2lkXSA9IFtba2V5LCB2YWx1ZV1dO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hlc1tpXVswXS5pc0VxdWFsKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXNbaV0gPSBba2V5LCB2YWx1ZV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbWF0Y2hlcy5wdXNoKFtrZXksIHZhbHVlXSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgbWFwLiBSZXR1cm5zIGEgYm9vbGVhbiBpZiBhbnl0aGluZyB3YXMgZGVsZXRlZC5cclxuICAgICAqL1xyXG4gICAgT2JqZWN0TWFwLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIGlkID0gdGhpcy5tYXBLZXlGbihrZXkpO1xyXG4gICAgICAgIHZhciBtYXRjaGVzID0gdGhpcy5pbm5lcltpZF07XHJcbiAgICAgICAgaWYgKG1hdGNoZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hlc1tpXVswXS5pc0VxdWFsKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmlubmVyW2lkXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIE9iamVjdE1hcC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIGZvckVhY2godGhpcy5pbm5lciwgZnVuY3Rpb24gKF8sIGVudHJpZXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbnRyaWVzXzEgPSBlbnRyaWVzOyBfaSA8IGVudHJpZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBfYSA9IGVudHJpZXNfMVtfaV0sIGsgPSBfYVswXSwgdiA9IF9hWzFdO1xyXG4gICAgICAgICAgICAgICAgZm4oaywgdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYmplY3RNYXAucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGlzRW1wdHkodGhpcy5pbm5lcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9iamVjdE1hcDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXHJcbiAqIEl0IGNhbiBiZSB1c2VkIHRvIGJhdGNoIHVwIGEgc2V0IG9mIGNoYW5nZXMgdG8gYmUgd3JpdHRlbiB0byB0aGUgY2FjaGUsIGJ1dFxyXG4gKiBhZGRpdGlvbmFsbHkgc3VwcG9ydHMgcmVhZGluZyBlbnRyaWVzIGJhY2sgd2l0aCB0aGUgYGdldEVudHJ5KClgIG1ldGhvZCxcclxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcclxuICogYnVmZmVyZWQuXHJcbiAqXHJcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcclxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUgZGVsdGEgb2YgdGhlIHBlbmRpbmcgY2hhbmdlcy5cclxuICpcclxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXHJcbiAqIElmIGJ5dGUtY291bnRpbmcgZW5kcyB1cCBiZWluZyBuZWVkZWQgb24gdGhlIG90aGVyIHBsYXRmb3JtcywgY29uc2lkZXJcclxuICogcG9ydGluZyB0aGlzIGNsYXNzIGFzIHBhcnQgb2YgdGhhdCBpbXBsZW1lbnRhdGlvbiB3b3JrLlxyXG4gKi9cclxudmFyIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIoKSB7XHJcbiAgICAgICAgLy8gQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleSB0byB0aGUgbmV3IGNhY2hlIGVudHJ5IHRoYXQgc2hvdWxkIGJlIHdyaXR0ZW4gKG9yIG51bGwgaWYgYW55XHJcbiAgICAgICAgLy8gZXhpc3RpbmcgY2FjaGUgZW50cnkgc2hvdWxkIGJlIHJlbW92ZWQpLlxyXG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnRvU3RyaW5nKCk7IH0pO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlci5wcm90b3R5cGUsIFwicmVhZFRpbWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5fcmVhZFRpbWUgIT09IHVuZGVmaW5lZCwgJ1JlYWQgdGltZSBpcyBub3Qgc2V0LiBBbGwgcmVtb3ZlRW50cnkoKSBjYWxscyBtdXN0IGluY2x1ZGUgYSByZWFkVGltZSBpZiBgdHJhY2tSZW1vdmFsc2AgaXMgdXNlZC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWRUaW1lO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gUmlnaHQgbm93IChmb3Igc2ltcGxpY2l0eSkgd2UganVzdCB0cmFjayBhIHNpbmdsZSByZWFkVGltZSBmb3IgYWxsIHRoZVxyXG4gICAgICAgICAgICAvLyBhZGRlZCBlbnRyaWVzIHNpbmNlIHdlIGV4cGVjdCB0aGVtIHRvIGFsbCBiZSB0aGUgc2FtZSwgYnV0IHdlIGNvdWxkXHJcbiAgICAgICAgICAgIC8vIHJld29yayB0byBzdG9yZSBwZXItZW50cnkgcmVhZFRpbWVzIGlmIG5lY2Vzc2FyeS5cclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuX3JlYWRUaW1lID09PSB1bmRlZmluZWQgfHwgdGhpcy5fcmVhZFRpbWUuaXNFcXVhbCh2YWx1ZSksICdBbGwgY2hhbmdlcyBpbiBhIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIG11c3QgaGF2ZSB0aGUgc2FtZSByZWFkIHRpbWUnKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVhZFRpbWUgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXHJcbiAgICAgKlxyXG4gICAgICogWW91IGNhbiBvbmx5IG1vZGlmeSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXHJcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlci5wcm90b3R5cGUuYWRkRW50cnkgPSBmdW5jdGlvbiAobWF5YmVEb2N1bWVudCwgcmVhZFRpbWUpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcclxuICAgICAgICB0aGlzLnJlYWRUaW1lID0gcmVhZFRpbWU7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VzLnNldChtYXliZURvY3VtZW50LmtleSwgbWF5YmVEb2N1bWVudCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cclxuICAgICAqXHJcbiAgICAgKiBZb3UgY2FuIG9ubHkgcmVtb3ZlIGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcclxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZS5yZW1vdmVFbnRyeSA9IGZ1bmN0aW9uIChrZXksIHJlYWRUaW1lKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XHJcbiAgICAgICAgaWYgKHJlYWRUaW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVhZFRpbWUgPSByZWFkVGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VzLnNldChrZXksIG51bGwpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXHJcbiAgICAgKiBhbmQgaWYgbm8gYnVmZmVyZWQgY2hhbmdlIGFwcGxpZXMsIHRoaXMgd2lsbCBmb3J3YXJkIHRvXHJcbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXHJcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cclxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxyXG4gICAgICogQHJldHVybiBUaGUgY2FjaGVkIERvY3VtZW50IG9yIE5vRG9jdW1lbnQgZW50cnksIG9yIG51bGwgaWYgd2UgaGF2ZSBub3RoaW5nXHJcbiAgICAgKiBjYWNoZWQuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZS5nZXRFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcclxuICAgICAgICB2YXIgYnVmZmVyZWRFbnRyeSA9IHRoaXMuY2hhbmdlcy5nZXQoZG9jdW1lbnRLZXkpO1xyXG4gICAgICAgIGlmIChidWZmZXJlZEVudHJ5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGJ1ZmZlcmVkRW50cnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RnJvbUNhY2hlKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xyXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxyXG4gICAgICogICAgIG9wZXJhdGlvbnMuXHJcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXHJcbiAgICAgKiBAcmV0dXJuIEEgbWFwIG9mIGNhY2hlZCBgRG9jdW1lbnRgcyBvciBgTm9Eb2N1bWVudGBzLCBpbmRleGVkIGJ5IGtleS4gSWYgYW5cclxuICAgICAqICAgICBlbnRyeSBjYW5ub3QgYmUgZm91bmQsIHRoZSBjb3JyZXNwb25kaW5nIGtleSB3aWxsIGJlIG1hcHBlZCB0byBhIG51bGxcclxuICAgICAqICAgICB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIucHJvdG90eXBlLmdldEVudHJpZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbEZyb21DYWNoZSh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xyXG4gICAgICogdGhlIHByb3ZpZGVkIHRyYW5zYWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlci5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZXNBcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXModHJhbnNhY3Rpb24pO1xyXG4gICAgfTtcclxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi9cclxuICAgIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLnByb3RvdHlwZS5hc3NlcnROb3RBcHBsaWVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5jaGFuZ2VzQXBwbGllZCwgJ0NoYW5nZXMgaGF2ZSBhbHJlYWR5IGJlZW4gYXBwbGllZC4nKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtMb2NhbFNlcmlhbGl6ZXJ9IHNlcmlhbGl6ZXIgVGhlIGRvY3VtZW50IHNlcmlhbGl6ZXIuXHJcbiAgICAgKiBAcGFyYW0ge0luZGV4TWFuYWdlcn0gaW5kZXhNYW5hZ2VyIFRoZSBxdWVyeSBpbmRleGVzIHRoYXQgbmVlZCB0byBiZSBtYWludGFpbmVkLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKHNlcmlhbGl6ZXIsIGluZGV4TWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBpbmRleE1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJpZXMgdG8gdGhlIGNhY2hlLlxyXG4gICAgICpcclxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmFkZEVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBrZXksIGRvYykge1xyXG4gICAgICAgIHZhciBkb2N1bWVudFN0b3JlID0gcmVtb3RlRG9jdW1lbnRzU3RvcmUodHJhbnNhY3Rpb24pO1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudFN0b3JlLnB1dChkYktleShrZXkpLCBkb2MpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxyXG4gICAgICpcclxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5yZW1vdmVFbnRyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICB2YXIgc3RvcmUgPSByZW1vdGVEb2N1bWVudHNTdG9yZSh0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgdmFyIGtleSA9IGRiS2V5KGRvY3VtZW50S2V5KTtcclxuICAgICAgICByZXR1cm4gc3RvcmUuZGVsZXRlKGtleSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBjdXJyZW50IGNhY2hlIHNpemUuXHJcbiAgICAgKlxyXG4gICAgICogQ2FsbGVycyB0byBgYWRkRW50cnkoKWAgYW5kIGByZW1vdmVFbnRyeSgpYCAqbXVzdCogY2FsbCB0aGlzIGFmdGVyd2FyZHMgdG8gdXBkYXRlIHRoZVxyXG4gICAgICogY2FjaGUncyBtZXRhZGF0YS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUudXBkYXRlTWV0YWRhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHNpemVEZWx0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEodHJhbnNhY3Rpb24pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLmJ5dGVTaXplICs9IHNpemVEZWx0YTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldE1ldGFkYXRhKHRyYW5zYWN0aW9uLCBtZXRhZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0RW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gcmVtb3RlRG9jdW1lbnRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5nZXQoZGJLZXkoZG9jdW1lbnRLZXkpKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm1heWJlRGVjb2RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxyXG4gICAgICogQHJldHVybiBUaGUgY2FjaGVkIE1heWJlRG9jdW1lbnQgZW50cnkgYW5kIGl0cyBzaXplLCBvciBudWxsIGlmIHdlIGhhdmUgbm90aGluZyBjYWNoZWQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldFNpemVkRW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gcmVtb3RlRG9jdW1lbnRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5nZXQoZGJLZXkoZG9jdW1lbnRLZXkpKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IF90aGlzLm1heWJlRGVjb2RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jXHJcbiAgICAgICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgICAgICBtYXliZURvY3VtZW50OiBkb2MsXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogZGJEb2N1bWVudFNpemUoZGJSZW1vdGVEb2MpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0RW50cmllcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0cyA9IG51bGxhYmxlTWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2hEYkVudHJ5KHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMsIGZ1bmN0aW9uIChrZXksIGRiUmVtb3RlRG9jKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBfdGhpcy5tYXliZURlY29kZURvY3VtZW50KGRiUmVtb3RlRG9jKTtcclxuICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGtleSwgZG9jKTtcclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc3VsdHM7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIFRoZSBzZXQgb2Yga2V5cyBlbnRyaWVzIHRvIGxvb2sgdXAuXHJcbiAgICAgKiBAcmV0dXJuIEEgbWFwIG9mIE1heWJlRG9jdW1lbnRzIGluZGV4ZWQgYnkga2V5IChpZiBhIGRvY3VtZW50IGNhbm5vdCBiZVxyXG4gICAgICogICAgIGZvdW5kLCB0aGUga2V5IHdpbGwgYmUgbWFwcGVkIHRvIG51bGwpIGFuZCBhIG1hcCBvZiBzaXplcyBpbmRleGVkIGJ5XHJcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBrZXkgY2Fubm90IGJlIGZvdW5kKS5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0U2l6ZWRFbnRyaWVzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gbnVsbGFibGVNYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgdmFyIHNpemVNYXAgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2hEYkVudHJ5KHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMsIGZ1bmN0aW9uIChrZXksIGRiUmVtb3RlRG9jKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBfdGhpcy5tYXliZURlY29kZURvY3VtZW50KGRiUmVtb3RlRG9jKTtcclxuICAgICAgICAgICAgaWYgKGRvYykge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGtleSwgZG9jKTtcclxuICAgICAgICAgICAgICAgIHNpemVNYXAgPSBzaXplTWFwLmluc2VydChrZXksIGRiRG9jdW1lbnRTaXplKGRiUmVtb3RlRG9jKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBudWxsKTtcclxuICAgICAgICAgICAgICAgIHNpemVNYXAgPSBzaXplTWFwLmluc2VydChrZXksIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IG1heWJlRG9jdW1lbnRzOiByZXN1bHRzLCBzaXplTWFwOiBzaXplTWFwIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZm9yRWFjaERiRW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cywgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnRLZXlzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoZG9jdW1lbnRLZXlzLmZpcnN0KCkucGF0aC50b0FycmF5KCksIGRvY3VtZW50S2V5cy5sYXN0KCkucGF0aC50b0FycmF5KCkpO1xyXG4gICAgICAgIHZhciBrZXlJdGVyID0gZG9jdW1lbnRLZXlzLmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgdmFyIG5leHRLZXkgPSBrZXlJdGVyLmdldE5leHQoKTtcclxuICAgICAgICByZXR1cm4gcmVtb3RlRG9jdW1lbnRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHsgcmFuZ2U6IHJhbmdlIH0sIGZ1bmN0aW9uIChwb3RlbnRpYWxLZXlSYXcsIGRiUmVtb3RlRG9jLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIHZhciBwb3RlbnRpYWxLZXkgPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMocG90ZW50aWFsS2V5UmF3KTtcclxuICAgICAgICAgICAgLy8gR28gdGhyb3VnaCBrZXlzIG5vdCBmb3VuZCBpbiBjYWNoZS5cclxuICAgICAgICAgICAgd2hpbGUgKG5leHRLZXkgJiYgRG9jdW1lbnRLZXkuY29tcGFyYXRvcihuZXh0S2V5LCBwb3RlbnRpYWxLZXkpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobmV4dEtleSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBuZXh0S2V5ID0ga2V5SXRlci5nZXROZXh0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5leHRLZXkgJiYgbmV4dEtleS5pc0VxdWFsKHBvdGVudGlhbEtleSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEtleSBmb3VuZCBpbiBjYWNoZS5cclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5leHRLZXksIGRiUmVtb3RlRG9jKTtcclxuICAgICAgICAgICAgICAgIG5leHRLZXkgPSBrZXlJdGVyLmhhc05leHQoKSA/IGtleUl0ZXIuZ2V0TmV4dCgpIDogbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTa2lwIHRvIHRoZSBuZXh0IGtleSAoaWYgdGhlcmUgaXMgb25lKS5cclxuICAgICAgICAgICAgaWYgKG5leHRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuc2tpcChuZXh0S2V5LnBhdGgudG9BcnJheSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBUaGUgcmVzdCBvZiB0aGUga2V5cyBhcmUgbm90IGluIHRoZSBjYWNoZS4gT25lIGNhc2Ugd2hlcmUgYGl0ZXJhdGVgXHJcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cclxuICAgICAgICAgICAgd2hpbGUgKG5leHRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5leHRLZXksIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgbmV4dEtleSA9IGtleUl0ZXIuaGFzTmV4dCgpID8ga2V5SXRlci5nZXROZXh0KCkgOiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghcXVlcnkuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSgpLCAnQ29sbGVjdGlvbkdyb3VwIHF1ZXJpZXMgc2hvdWxkIGJlIGhhbmRsZWQgaW4gTG9jYWxEb2N1bWVudHNWaWV3Jyk7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBkb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHZhciBpbW1lZGlhdGVDaGlsZHJlblBhdGhMZW5ndGggPSBxdWVyeS5wYXRoLmxlbmd0aCArIDE7XHJcbiAgICAgICAgdmFyIGl0ZXJhdGlvbk9wdGlvbnMgPSB7fTtcclxuICAgICAgICBpZiAoc2luY2VSZWFkVGltZS5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pKSB7XHJcbiAgICAgICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3dcclxuICAgICAgICAgICAgLy8gZG93biB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXHJcbiAgICAgICAgICAgIHZhciBzdGFydEtleSA9IHF1ZXJ5LnBhdGgudG9BcnJheSgpO1xyXG4gICAgICAgICAgICBpdGVyYXRpb25PcHRpb25zLnJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChzdGFydEtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBFeGVjdXRlIGFuIGluZGV4LWZyZWUgcXVlcnkgYW5kIGZpbHRlciBieSByZWFkIHRpbWUuIFRoaXMgaXMgc2FmZVxyXG4gICAgICAgICAgICAvLyBzaW5jZSBhbGwgZG9jdW1lbnQgY2hhbmdlcyB0byBxdWVyaWVzIHRoYXQgaGF2ZSBhXHJcbiAgICAgICAgICAgIC8vIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gKGBzaW5jZVJlYWRUaW1lYCkgaGF2ZSBhIHJlYWQgdGltZSBzZXQuXHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uS2V5ID0gcXVlcnkucGF0aC50b0FycmF5KCk7XHJcbiAgICAgICAgICAgIHZhciByZWFkVGltZUtleSA9IHRoaXMuc2VyaWFsaXplci50b0RiVGltZXN0YW1wS2V5KHNpbmNlUmVhZFRpbWUpO1xyXG4gICAgICAgICAgICBpdGVyYXRpb25PcHRpb25zLnJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbY29sbGVjdGlvbktleSwgcmVhZFRpbWVLZXldLCBcclxuICAgICAgICAgICAgLyogb3Blbj0gKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIGl0ZXJhdGlvbk9wdGlvbnMuaW5kZXggPSBEYlJlbW90ZURvY3VtZW50LmNvbGxlY3Rpb25SZWFkVGltZUluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVtb3RlRG9jdW1lbnRzU3RvcmUodHJhbnNhY3Rpb24pXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKGl0ZXJhdGlvbk9wdGlvbnMsIGZ1bmN0aW9uIChrZXksIGRiUmVtb3RlRG9jLCBjb250cm9sKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBxdWVyeSBpcyBhY3R1YWxseSByZXR1cm5pbmcgYW55IHBhdGggdGhhdCBzdGFydHMgd2l0aCB0aGUgcXVlcnlcclxuICAgICAgICAgICAgLy8gcGF0aCBwcmVmaXggd2hpY2ggbWF5IGluY2x1ZGUgZG9jdW1lbnRzIGluIHN1YmNvbGxlY3Rpb25zLiBGb3JcclxuICAgICAgICAgICAgLy8gZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIHdpbGwgcmV0dXJuIHJvb21zL2FiYy9tZXNzYWdlcy94eXggYnV0IHdlXHJcbiAgICAgICAgICAgIC8vIHNob3VsZG4ndCBtYXRjaCBpdC4gRml4IHRoaXMgYnkgZGlzY2FyZGluZyByb3dzIHdpdGggZG9jdW1lbnQga2V5c1xyXG4gICAgICAgICAgICAvLyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5IHBhdGguXHJcbiAgICAgICAgICAgIGlmIChrZXkubGVuZ3RoICE9PSBpbW1lZGlhdGVDaGlsZHJlblBhdGhMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbWF5YmVEb2MgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21EYlJlbW90ZURvY3VtZW50KGRiUmVtb3RlRG9jKTtcclxuICAgICAgICAgICAgaWYgKCFxdWVyeS5wYXRoLmlzUHJlZml4T2YobWF5YmVEb2Mua2V5LnBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLmRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50ICYmIHF1ZXJ5Lm1hdGNoZXMobWF5YmVEb2MpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQobWF5YmVEb2Mua2V5LCBtYXliZURvYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHRzOyB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgc3BlY2lmaWVkIHJlYWRcclxuICAgICAqIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXROZXdEb2N1bWVudENoYW5nZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHNpbmNlUmVhZFRpbWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjaGFuZ2VkRG9jcyA9IG1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICB2YXIgbGFzdFJlYWRUaW1lID0gdGhpcy5zZXJpYWxpemVyLnRvRGJUaW1lc3RhbXBLZXkoc2luY2VSZWFkVGltZSk7XHJcbiAgICAgICAgdmFyIGRvY3VtZW50c1N0b3JlID0gcmVtb3RlRG9jdW1lbnRzU3RvcmUodHJhbnNhY3Rpb24pO1xyXG4gICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQobGFzdFJlYWRUaW1lLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnRzU3RvcmVcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyBpbmRleDogRGJSZW1vdGVEb2N1bWVudC5yZWFkVGltZUluZGV4LCByYW5nZTogcmFuZ2UgfSwgZnVuY3Rpb24gKF8sIGRiUmVtb3RlRG9jKSB7XHJcbiAgICAgICAgICAgIC8vIFVubGlrZSBgZ2V0RW50cnkoKWAgYW5kIG90aGVycywgYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYCBwYXJzZXNcclxuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50cyBkaXJlY3RseSBzaW5jZSB3ZSB3YW50IHRvIGtlZXAgc2VudGluZWwgZGVsZXRlcy5cclxuICAgICAgICAgICAgdmFyIGRvYyA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiUmVtb3RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICBjaGFuZ2VkRG9jcyA9IGNoYW5nZWREb2NzLmluc2VydChkb2Mua2V5LCBkb2MpO1xyXG4gICAgICAgICAgICBsYXN0UmVhZFRpbWUgPSBkYlJlbW90ZURvYy5yZWFkVGltZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VkRG9jczogY2hhbmdlZERvY3MsXHJcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX3RoaXMuc2VyaWFsaXplci5mcm9tRGJUaW1lc3RhbXBLZXkobGFzdFJlYWRUaW1lKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbGFzdCBkb2N1bWVudCB0aGF0IGhhcyBjaGFuZ2VkLCBhcyB3ZWxsIGFzIHRoZSByZWFkIHRpbWUgb2YgdGhlXHJcbiAgICAgKiBsYXN0IGNoYW5nZS4gSWYgbm8gZG9jdW1lbnQgaGFzIGNoYW5nZWQsIHJldHVybnMgU25hcHNob3RWZXJzaW9uLk1JTi5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldExhc3REb2N1bWVudENoYW5nZSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGRvY3VtZW50c1N0b3JlID0gcmVtb3RlRG9jdW1lbnRzU3RvcmUodHJhbnNhY3Rpb24pO1xyXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBleGlzdGluZyBlbnRyaWVzLCB3ZSByZXR1cm4gU25hcHNob3RWZXJzaW9uLk1JTi5cclxuICAgICAgICB2YXIgcmVhZFRpbWUgPSBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIHZhciBjaGFuZ2VkRG9jO1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudHNTdG9yZVxyXG4gICAgICAgICAgICAuaXRlcmF0ZSh7IGluZGV4OiBEYlJlbW90ZURvY3VtZW50LnJlYWRUaW1lSW5kZXgsIHJldmVyc2U6IHRydWUgfSwgZnVuY3Rpb24gKGtleSwgZGJSZW1vdGVEb2MsIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgY2hhbmdlZERvYyA9IF90aGlzLnNlcmlhbGl6ZXIuZnJvbURiUmVtb3RlRG9jdW1lbnQoZGJSZW1vdGVEb2MpO1xyXG4gICAgICAgICAgICBpZiAoZGJSZW1vdGVEb2MucmVhZFRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHJlYWRUaW1lID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJUaW1lc3RhbXBLZXkoZGJSZW1vdGVEb2MucmVhZFRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnRyb2wuZG9uZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgY2hhbmdlZERvYzogY2hhbmdlZERvYywgcmVhZFRpbWU6IHJlYWRUaW1lIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUubmV3Q2hhbmdlQnVmZmVyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIodGhpcywgISFvcHRpb25zICYmIG9wdGlvbnMudHJhY2tSZW1vdmFscyk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0eG4pLm5leHQoZnVuY3Rpb24gKG1ldGFkYXRhKSB7IHJldHVybiBtZXRhZGF0YS5ieXRlU2l6ZTsgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50R2xvYmFsU3RvcmUodHhuKVxyXG4gICAgICAgICAgICAuZ2V0KERiUmVtb3RlRG9jdW1lbnRHbG9iYWwua2V5KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KCEhbWV0YWRhdGEsICdNaXNzaW5nIGRvY3VtZW50IGNhY2hlIG1ldGFkYXRhJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5zZXRNZXRhZGF0YSA9IGZ1bmN0aW9uICh0eG4sIG1ldGFkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50R2xvYmFsU3RvcmUodHhuKS5wdXQoRGJSZW1vdGVEb2N1bWVudEdsb2JhbC5rZXksIG1ldGFkYXRhKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERlY29kZXMgYHJlbW90ZURvY2AgYW5kIHJldHVybnMgdGhlIGRvY3VtZW50IChvciBudWxsLCBpZiB0aGUgZG9jdW1lbnRcclxuICAgICAqIGNvcnJlc3BvbmRzIHRvIHRoZSBmb3JtYXQgdXNlZCBmb3Igc2VudGluZWwgZGVsZXRlcykuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLm1heWJlRGVjb2RlRG9jdW1lbnQgPSBmdW5jdGlvbiAoZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICBpZiAoZGJSZW1vdGVEb2MpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMuc2VyaWFsaXplci5mcm9tRGJSZW1vdGVEb2N1bWVudChkYlJlbW90ZURvYyk7XHJcbiAgICAgICAgICAgIGlmIChkb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50ICYmXHJcbiAgICAgICAgICAgICAgICBkb2MudmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgaXMgYSBzZW50aW5lbCByZW1vdmFsIGFuZCBzaG91bGQgb25seSBiZSB1c2VkIGluIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkb2M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cclxuICAgICAqXHJcbiAgICAgKiBVbmxpa2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLCB0aGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGNvbXB1dGVzIHRoZSBzaXplXHJcbiAgICAgKiBkZWx0YSBmb3IgYWxsIHN1Ym1pdHRlZCBjaGFuZ2VzLiBUaGlzIGF2b2lkcyBoYXZpbmcgdG8gcmUtcmVhZCBhbGwgZG9jdW1lbnRzIGZyb20gSW5kZXhlZERiXHJcbiAgICAgKiB3aGVuIHdlIGFwcGx5IHRoZSBjaGFuZ2VzLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLlJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIHRzbGliLl9fZXh0ZW5kcyhjbGFzc18xLCBfc3VwZXIpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSBkb2N1bWVudENhY2hlIFRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlIHRvIGFwcGx5IHRoZSBjaGFuZ2VzIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFja1JlbW92YWxzIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxyXG4gICAgICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xhc3NfMShkb2N1bWVudENhY2hlLCB0cmFja1JlbW92YWxzKSB7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgICAgIF90aGlzLmRvY3VtZW50Q2FjaGUgPSBkb2N1bWVudENhY2hlO1xyXG4gICAgICAgICAgICBfdGhpcy50cmFja1JlbW92YWxzID0gdHJhY2tSZW1vdmFscztcclxuICAgICAgICAgICAgLy8gQSBtYXAgb2YgZG9jdW1lbnQgc2l6ZXMgcHJpb3IgdG8gYXBwbHlpbmcgdGhlIGNoYW5nZXMgaW4gdGhpcyBidWZmZXIuXHJcbiAgICAgICAgICAgIF90aGlzLmRvY3VtZW50U2l6ZXMgPSBuZXcgT2JqZWN0TWFwKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGtleS50b1N0cmluZygpOyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5hcHBseUNoYW5nZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgICAgIHZhciBzaXplRGVsdGEgPSAwO1xyXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvblBhcmVudHMgPSBuZXcgU29ydGVkU2V0KGZ1bmN0aW9uIChsLCByKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcihsLmNhbm9uaWNhbFN0cmluZygpLCByLmNhbm9uaWNhbFN0cmluZygpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIG1heWJlRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcmV2aW91c1NpemUgPSBfdGhpcy5kb2N1bWVudFNpemVzLmdldChrZXkpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHByZXZpb3VzU2l6ZSAhPT0gdW5kZWZpbmVkLCBcIkNhbm5vdCBtb2RpZnkgYSBkb2N1bWVudCB0aGF0IHdhc24ndCByZWFkIChmb3IgXCIgKyBrZXkgKyBcIilcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF5YmVEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydCghX3RoaXMucmVhZFRpbWUuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSwgJ0Nhbm5vdCBhZGQgYSBkb2N1bWVudCB3aXRoIGEgcmVhZCB0aW1lIG9mIHplcm8nKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZG9jID0gX3RoaXMuZG9jdW1lbnRDYWNoZS5zZXJpYWxpemVyLnRvRGJSZW1vdGVEb2N1bWVudChtYXliZURvY3VtZW50LCBfdGhpcy5yZWFkVGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvblBhcmVudHMgPSBjb2xsZWN0aW9uUGFyZW50cy5hZGQoa2V5LnBhdGgucG9wTGFzdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGRiRG9jdW1lbnRTaXplKGRvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZURlbHRhICs9IHNpemUgLSBwcmV2aW91c1NpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5kb2N1bWVudENhY2hlLmFkZEVudHJ5KHRyYW5zYWN0aW9uLCBrZXksIGRvYykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZURlbHRhIC09IHByZXZpb3VzU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMudHJhY2tSZW1vdmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byB0cmFjayByZW1vdmFscywgd2Ugc3RvcmUgYSBcInNlbnRpbmVsIGRlbGV0ZVwiIGluIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdGVEb2N1bWVudENhY2hlLiBUaGlzIGVudHJ5IGlzIHJlcHJlc2VudGVkIGJ5IGEgTm9Eb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGEgdmVyc2lvbiBvZiAwIGFuZCBpZ25vcmVkIGJ5IGBtYXliZURlY29kZURvY3VtZW50KClgIGJ1dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbGV0ZWREb2MgPSBfdGhpcy5kb2N1bWVudENhY2hlLnNlcmlhbGl6ZXIudG9EYlJlbW90ZURvY3VtZW50KG5ldyBOb0RvY3VtZW50KGtleSwgU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSksIF90aGlzLnJlYWRUaW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5kb2N1bWVudENhY2hlLmFkZEVudHJ5KHRyYW5zYWN0aW9uLCBrZXksIGRlbGV0ZWREb2MpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuZG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeSh0cmFuc2FjdGlvbiwga2V5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29sbGVjdGlvblBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLmRvY3VtZW50Q2FjaGUuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHRyYW5zYWN0aW9uLCBwYXJlbnQpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5kb2N1bWVudENhY2hlLnVwZGF0ZU1ldGFkYXRhKHRyYW5zYWN0aW9uLCBzaXplRGVsdGEpKTtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmdldEZyb21DYWNoZSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZSBhIGRlbHRhIGxhdGVyLlxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudENhY2hlXHJcbiAgICAgICAgICAgICAgICAuZ2V0U2l6ZWRFbnRyeSh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZ2V0UmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2V0UmVzdWx0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRTaXplcy5zZXQoZG9jdW1lbnRLZXksIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRTaXplcy5zZXQoZG9jdW1lbnRLZXksIGdldFJlc3VsdC5zaXplKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UmVzdWx0Lm1heWJlRG9jdW1lbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0QWxsRnJvbUNhY2hlID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZVxyXG4gICAgICAgICAgICAvLyBhIGRlbHRhIGxhdGVyLlxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudENhY2hlXHJcbiAgICAgICAgICAgICAgICAuZ2V0U2l6ZWRFbnRyaWVzKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXliZURvY3VtZW50cyA9IF9hLm1heWJlRG9jdW1lbnRzLCBzaXplTWFwID0gX2Euc2l6ZU1hcDtcclxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IGBnZXRBbGxGcm9tQ2FjaGVgIHJldHVybnMgdHdvIG1hcHMgaW5zdGVhZCBvZiBhIHNpbmdsZSBtYXAgZnJvbVxyXG4gICAgICAgICAgICAgICAgLy8ga2V5cyB0byBgRG9jdW1lbnRTaXplRW50cnlgcy4gVGhpcyBpcyB0byBhbGxvdyByZXR1cm5pbmcgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBgTnVsbGFibGVNYXliZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXHJcbiAgICAgICAgICAgICAgICBzaXplTWFwLmZvckVhY2goZnVuY3Rpb24gKGRvY3VtZW50S2V5LCBzaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRTaXplcy5zZXQoZG9jdW1lbnRLZXksIHNpemUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVEb2N1bWVudHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNsYXNzXzE7XHJcbiAgICB9KFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyKSk7XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZTtcclxufSgpKTtcclxuZnVuY3Rpb24gZG9jdW1lbnRHbG9iYWxTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiUmVtb3RlRG9jdW1lbnRHbG9iYWwuc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdGVEb2N1bWVudHNTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiUmVtb3RlRG9jdW1lbnQuc3RvcmUpO1xyXG59XHJcbmZ1bmN0aW9uIGRiS2V5KGRvY0tleSkge1xyXG4gICAgcmV0dXJuIGRvY0tleS5wYXRoLnRvQXJyYXkoKTtcclxufVxyXG4vKipcclxuICogUmV0cnVzbiBhbiBhcHByb3hpbWF0ZSBzaXplIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBkYkRvY3VtZW50U2l6ZShkb2MpIHtcclxuICAgIHZhciB2YWx1ZTtcclxuICAgIGlmIChkb2MuZG9jdW1lbnQpIHtcclxuICAgICAgICB2YWx1ZSA9IGRvYy5kb2N1bWVudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRvYy51bmtub3duRG9jdW1lbnQpIHtcclxuICAgICAgICB2YWx1ZSA9IGRvYy51bmtub3duRG9jdW1lbnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkb2Mubm9Eb2N1bWVudCkge1xyXG4gICAgICAgIHZhbHVlID0gZG9jLm5vRG9jdW1lbnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBmYWlsKCdVbmtub3duIHJlbW90ZSBkb2N1bWVudCB0eXBlJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXHJcbiAqL1xyXG52YXIgTWVtb3J5SW5kZXhNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5SW5kZXhNYW5hZ2VyKCkge1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvblBhcmVudEluZGV4ID0gbmV3IE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCgpO1xyXG4gICAgfVxyXG4gICAgTWVtb3J5SW5kZXhNYW5hZ2VyLnByb3RvdHlwZS5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgY29sbGVjdGlvblBhdGgpIHtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb25QYXJlbnRJbmRleC5hZGQoY29sbGVjdGlvblBhdGgpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUluZGV4TWFuYWdlci5wcm90b3R5cGUuZ2V0Q29sbGVjdGlvblBhcmVudHMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmNvbGxlY3Rpb25QYXJlbnRJbmRleC5nZXRFbnRyaWVzKGNvbGxlY3Rpb25JZCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZW1vcnlJbmRleE1hbmFnZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZXhwb3NlZCBieSBNZW1vcnlJbmRleE1hbmFnZXIuXHJcbiAqIEFsc28gdXNlZCBmb3IgaW4tbWVtb3J5IGNhY2hpbmcgYnkgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIGFuZCBpbml0aWFsIGluZGV4IHBvcHVsYXRpb25cclxuICogaW4gaW5kZXhlZGRiX3NjaGVtYS50c1xyXG4gKi9cclxudmFyIE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleCgpIHtcclxuICAgICAgICB0aGlzLmluZGV4ID0ge307XHJcbiAgICB9XHJcbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBlbnRyeSBhbHJlYWR5IGV4aXN0ZWQuXHJcbiAgICBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uUGF0aCkge1xyXG4gICAgICAgIGFzc2VydChjb2xsZWN0aW9uUGF0aC5sZW5ndGggJSAyID09PSAxLCAnRXhwZWN0ZWQgYSBjb2xsZWN0aW9uIHBhdGguJyk7XHJcbiAgICAgICAgdmFyIGNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25QYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgdmFyIHBhcmVudFBhdGggPSBjb2xsZWN0aW9uUGF0aC5wb3BMYXN0KCk7XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nUGFyZW50cyA9IHRoaXMuaW5kZXhbY29sbGVjdGlvbklkXSB8fFxyXG4gICAgICAgICAgICBuZXcgU29ydGVkU2V0KFJlc291cmNlUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICB2YXIgYWRkZWQgPSAhZXhpc3RpbmdQYXJlbnRzLmhhcyhwYXJlbnRQYXRoKTtcclxuICAgICAgICB0aGlzLmluZGV4W2NvbGxlY3Rpb25JZF0gPSBleGlzdGluZ1BhcmVudHMuYWRkKHBhcmVudFBhdGgpO1xyXG4gICAgICAgIHJldHVybiBhZGRlZDtcclxuICAgIH07XHJcbiAgICBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uUGF0aCkge1xyXG4gICAgICAgIHZhciBjb2xsZWN0aW9uSWQgPSBjb2xsZWN0aW9uUGF0aC5sYXN0U2VnbWVudCgpO1xyXG4gICAgICAgIHZhciBwYXJlbnRQYXRoID0gY29sbGVjdGlvblBhdGgucG9wTGFzdCgpO1xyXG4gICAgICAgIHZhciBleGlzdGluZ1BhcmVudHMgPSB0aGlzLmluZGV4W2NvbGxlY3Rpb25JZF07XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUGFyZW50cyAmJiBleGlzdGluZ1BhcmVudHMuaGFzKHBhcmVudFBhdGgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUNvbGxlY3Rpb25QYXJlbnRJbmRleC5wcm90b3R5cGUuZ2V0RW50cmllcyA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICB2YXIgcGFyZW50UGF0aHMgPSB0aGlzLmluZGV4W2NvbGxlY3Rpb25JZF0gfHxcclxuICAgICAgICAgICAgbmV3IFNvcnRlZFNldChSZXNvdXJjZVBhdGguY29tcGFyYXRvcik7XHJcbiAgICAgICAgcmV0dXJuIHBhcmVudFBhdGhzLnRvQXJyYXkoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNjaGVtYSBWZXJzaW9uIGZvciB0aGUgV2ViIGNsaWVudDpcclxuICogMS4gSW5pdGlhbCB2ZXJzaW9uIGluY2x1ZGluZyBNdXRhdGlvbiBRdWV1ZSwgUXVlcnkgQ2FjaGUsIGFuZCBSZW1vdGUgRG9jdW1lbnRcclxuICogICAgQ2FjaGVcclxuICogMi4gVXNlZCB0byBlbnN1cmUgYSB0YXJnZXRHbG9iYWwgb2JqZWN0IGV4aXN0cyBhbmQgYWRkIHRhcmdldENvdW50IHRvIGl0LiBOb1xyXG4gKiAgICBsb25nZXIgcmVxdWlyZWQgYmVjYXVzZSBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxyXG4gKiAzLiBEcm9wcGVkIGFuZCByZS1jcmVhdGVkIFF1ZXJ5IENhY2hlIHRvIGRlYWwgd2l0aCBjYWNoZSBjb3JydXB0aW9uIHJlbGF0ZWRcclxuICogICAgdG8gbGltYm8gcmVzb2x1dGlvbi4gQWRkcmVzc2VzXHJcbiAqICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1pb3Mtc2RrL2lzc3Vlcy8xNTQ4XHJcbiAqIDQuIE11bHRpLVRhYiBTdXBwb3J0LlxyXG4gKiA1LiBSZW1vdmFsIG9mIGhlbGQgd3JpdGUgYWNrcy5cclxuICogNi4gQ3JlYXRlIGRvY3VtZW50IGdsb2JhbCBmb3IgdHJhY2tpbmcgZG9jdW1lbnQgY2FjaGUgc2l6ZS5cclxuICogNy4gRW5zdXJlIGV2ZXJ5IGNhY2hlZCBkb2N1bWVudCBoYXMgYSBzZW50aW5lbCByb3cgd2l0aCBhIHNlcXVlbmNlIG51bWJlci5cclxuICogOC4gQWRkIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGZvciBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJpZXMuXHJcbiAqIDkuIENoYW5nZSBSZW1vdGVEb2N1bWVudENoYW5nZXMgc3RvcmUgdG8gYmUga2V5ZWQgYnkgcmVhZFRpbWUgcmF0aGVyIHRoYW5cclxuICogICAgYW4gYXV0by1pbmNyZW1lbnRpbmcgSUQuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIEluZGV4LUZyZWUgcXVlcmllcy5cclxuICovXHJcbnZhciBTQ0hFTUFfVkVSU0lPTiA9IDk7XHJcbi8qKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLiAqL1xyXG52YXIgU2NoZW1hQ29udmVydGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2NoZW1hQ29udmVydGVyKHNlcmlhbGl6ZXIpIHtcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCBpbiBwcm9kdWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IGV2ZXIgdXNlZCB0byB1cGdyYWRlIHRoZSBzY2hlbWFcclxuICAgICAqIHRvIFNDSEVNQV9WRVJTSU9OLiBEaWZmZXJlbnQgdmFsdWVzIG9mIHRvVmVyc2lvbiBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nXHJcbiAgICAgKiBhbmQgbG9jYWwgZmVhdHVyZSBkZXZlbG9wbWVudC5cclxuICAgICAqL1xyXG4gICAgU2NoZW1hQ29udmVydGVyLnByb3RvdHlwZS5jcmVhdGVPclVwZ3JhZGUgPSBmdW5jdGlvbiAoZGIsIHR4biwgZnJvbVZlcnNpb24sIHRvVmVyc2lvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KGZyb21WZXJzaW9uIDwgdG9WZXJzaW9uICYmXHJcbiAgICAgICAgICAgIGZyb21WZXJzaW9uID49IDAgJiZcclxuICAgICAgICAgICAgdG9WZXJzaW9uIDw9IFNDSEVNQV9WRVJTSU9OLCBcIlVuZXhwZWN0ZWQgc2NoZW1hIHVwZ3JhZGUgZnJvbSB2XCIgKyBmcm9tVmVyc2lvbiArIFwiIHRvIHZ7dG9WZXJzaW9ufS5cIik7XHJcbiAgICAgICAgdmFyIHNpbXBsZURiVHJhbnNhY3Rpb24gPSBuZXcgU2ltcGxlRGJUcmFuc2FjdGlvbih0eG4pO1xyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDEgJiYgdG9WZXJzaW9uID49IDEpIHtcclxuICAgICAgICAgICAgY3JlYXRlUHJpbWFyeUNsaWVudFN0b3JlKGRiKTtcclxuICAgICAgICAgICAgY3JlYXRlTXV0YXRpb25RdWV1ZShkYik7XHJcbiAgICAgICAgICAgIGNyZWF0ZVF1ZXJ5Q2FjaGUoZGIpO1xyXG4gICAgICAgICAgICBjcmVhdGVSZW1vdGVEb2N1bWVudENhY2hlKGRiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTWlncmF0aW9uIDIgdG8gcG9wdWxhdGUgdGhlIHRhcmdldEdsb2JhbCBvYmplY3Qgbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZVxyXG4gICAgICAgIC8vIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXHJcbiAgICAgICAgdmFyIHAgPSBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDMgJiYgdG9WZXJzaW9uID49IDMpIHtcclxuICAgICAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcclxuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXHJcbiAgICAgICAgICAgIGlmIChmcm9tVmVyc2lvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZHJvcFF1ZXJ5Q2FjaGUoZGIpO1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlUXVlcnlDYWNoZShkYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiB3cml0ZUVtcHR5VGFyZ2V0R2xvYmFsRW50cnkoc2ltcGxlRGJUcmFuc2FjdGlvbik7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbVZlcnNpb24gPCA0ICYmIHRvVmVyc2lvbiA+PSA0KSB7XHJcbiAgICAgICAgICAgIGlmIChmcm9tVmVyc2lvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXHJcbiAgICAgICAgICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaCBJRHMgKHRoaXMgd2FzIHByZXZpb3VzbHkgZW5zdXJlZCBpbnRlcm5hbGx5IGJ5IHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gY2xpZW50KS4gVG8gbWlncmF0ZSB0byB0aGUgbmV3IHNjaGVtYSwgd2UgaGF2ZSB0byByZWFkIGFsbCBtdXRhdGlvbnNcclxuICAgICAgICAgICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxyXG4gICAgICAgICAgICAgICAgLy8gY29uc2lzdGVuY3kgd2l0aCBvdGhlciBvYmplY3Qgc3RvcmVzLiBBbnkgZnVydGhlciBtdXRhdGlvbiBiYXRjaCBJRHMgd2lsbFxyXG4gICAgICAgICAgICAgICAgLy8gYmUgYXV0by1nZW5lcmF0ZWQuXHJcbiAgICAgICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBncmFkZU11dGF0aW9uQmF0Y2hTY2hlbWFBbmRNaWdyYXRlRGF0YShkYiwgc2ltcGxlRGJUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUNsaWVudE1ldGFkYXRhU3RvcmUoZGIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb21WZXJzaW9uIDwgNSAmJiB0b1ZlcnNpb24gPj0gNSkge1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnJlbW92ZUFja25vd2xlZGdlZE11dGF0aW9ucyhzaW1wbGVEYlRyYW5zYWN0aW9uKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDYgJiYgdG9WZXJzaW9uID49IDYpIHtcclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVEb2N1bWVudEdsb2JhbFN0b3JlKGRiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5hZGREb2N1bWVudEdsb2JhbChzaW1wbGVEYlRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tVmVyc2lvbiA8IDcgJiYgdG9WZXJzaW9uID49IDcpIHtcclxuICAgICAgICAgICAgcCA9IHAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5lbnN1cmVTZXF1ZW5jZU51bWJlcnMoc2ltcGxlRGJUcmFuc2FjdGlvbik7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbVZlcnNpb24gPCA4ICYmIHRvVmVyc2lvbiA+PSA4KSB7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNyZWF0ZUNvbGxlY3Rpb25QYXJlbnRJbmRleChkYiwgc2ltcGxlRGJUcmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZnJvbVZlcnNpb24gPCA5ICYmIHRvVmVyc2lvbiA+PSA5KSB7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTXVsdGktVGFiIHVzZWQgdG8gbWFuYWdlIGl0cyBvd24gY2hhbmdlbG9nLCBidXQgdGhpcyBoYXMgYmVlbiBtb3ZlZFxyXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlIGl0c2VsZi4gU2luY2UgdGhlIHByZXZpb3VzIGNoYW5nZVxyXG4gICAgICAgICAgICAgICAgLy8gbG9nIG9ubHkgY29udGFpbmVkIHRyYW5zaWVudCBkYXRhLCB3ZSBjYW4gZHJvcCBpdHMgb2JqZWN0IHN0b3JlLlxyXG4gICAgICAgICAgICAgICAgZHJvcFJlbW90ZURvY3VtZW50Q2hhbmdlc1N0b3JlKGRiKTtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVJlbW90ZURvY3VtZW50UmVhZFRpbWVJbmRleCh0eG4pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICB9O1xyXG4gICAgU2NoZW1hQ29udmVydGVyLnByb3RvdHlwZS5hZGREb2N1bWVudEdsb2JhbCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgYnl0ZUNvdW50ID0gMDtcclxuICAgICAgICByZXR1cm4gdHhuXHJcbiAgICAgICAgICAgIC5zdG9yZShEYlJlbW90ZURvY3VtZW50LnN0b3JlKVxyXG4gICAgICAgICAgICAuaXRlcmF0ZShmdW5jdGlvbiAoXywgZG9jKSB7XHJcbiAgICAgICAgICAgIGJ5dGVDb3VudCArPSBkYkRvY3VtZW50U2l6ZShkb2MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG1ldGFkYXRhID0gbmV3IERiUmVtb3RlRG9jdW1lbnRHbG9iYWwoYnl0ZUNvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIHR4blxyXG4gICAgICAgICAgICAgICAgLnN0b3JlKERiUmVtb3RlRG9jdW1lbnRHbG9iYWwuc3RvcmUpXHJcbiAgICAgICAgICAgICAgICAucHV0KERiUmVtb3RlRG9jdW1lbnRHbG9iYWwua2V5LCBtZXRhZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2NoZW1hQ29udmVydGVyLnByb3RvdHlwZS5yZW1vdmVBY2tub3dsZWRnZWRNdXRhdGlvbnMgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcXVldWVzU3RvcmUgPSB0eG4uc3RvcmUoRGJNdXRhdGlvblF1ZXVlLnN0b3JlKTtcclxuICAgICAgICB2YXIgbXV0YXRpb25zU3RvcmUgPSB0eG4uc3RvcmUoRGJNdXRhdGlvbkJhdGNoLnN0b3JlKTtcclxuICAgICAgICByZXR1cm4gcXVldWVzU3RvcmUubG9hZEFsbCgpLm5leHQoZnVuY3Rpb24gKHF1ZXVlcykge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gocXVldWVzLCBmdW5jdGlvbiAocXVldWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IElEQktleVJhbmdlLmJvdW5kKFtxdWV1ZS51c2VySWQsIEJBVENISURfVU5LTk9XTl0sIFtxdWV1ZS51c2VySWQsIHF1ZXVlLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkXSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbXV0YXRpb25zU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAubG9hZEFsbChEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0luZGV4LCByYW5nZSlcclxuICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZGJCYXRjaGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGRiQmF0Y2hlcywgZnVuY3Rpb24gKGRiQmF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGRiQmF0Y2gudXNlcklkID09PSBxdWV1ZS51c2VySWQsIFwiQ2Fubm90IHByb2Nlc3MgYmF0Y2ggXCIgKyBkYkJhdGNoLmJhdGNoSWQgKyBcIiBmcm9tIHVuZXhwZWN0ZWQgdXNlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gX3RoaXMuc2VyaWFsaXplci5mcm9tRGJNdXRhdGlvbkJhdGNoKGRiQmF0Y2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlTXV0YXRpb25CYXRjaCh0eG4sIHF1ZXVlLnVzZXJJZCwgYmF0Y2gpLm5leHQoZnVuY3Rpb24gKCkgeyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEVuc3VyZXMgdGhhdCBldmVyeSBkb2N1bWVudCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIGhhcyBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93XHJcbiAgICAgKiB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLiBNaXNzaW5nIHJvd3MgYXJlIGdpdmVuIHRoZSBtb3N0IHJlY2VudGx5IHVzZWQgc2VxdWVuY2UgbnVtYmVyLlxyXG4gICAgICovXHJcbiAgICBTY2hlbWFDb252ZXJ0ZXIucHJvdG90eXBlLmVuc3VyZVNlcXVlbmNlTnVtYmVycyA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgZG9jdW1lbnRUYXJnZXRTdG9yZSA9IHR4bi5zdG9yZShEYlRhcmdldERvY3VtZW50LnN0b3JlKTtcclxuICAgICAgICB2YXIgZG9jdW1lbnRzU3RvcmUgPSB0eG4uc3RvcmUoRGJSZW1vdGVEb2N1bWVudC5zdG9yZSk7XHJcbiAgICAgICAgcmV0dXJuIGdldEhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcih0eG4pLm5leHQoZnVuY3Rpb24gKGN1cnJlbnRTZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICB2YXIgd3JpdGVTZW50aW5lbEtleSA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRUYXJnZXRTdG9yZS5wdXQobmV3IERiVGFyZ2V0RG9jdW1lbnQoMCwgZW5jb2RlKHBhdGgpLCBjdXJyZW50U2VxdWVuY2VOdW1iZXIpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudHNTdG9yZVxyXG4gICAgICAgICAgICAgICAgLml0ZXJhdGUoZnVuY3Rpb24gKGtleSwgZG9jKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IG5ldyBSZXNvdXJjZVBhdGgoa2V5KTtcclxuICAgICAgICAgICAgICAgIHZhciBkb2NTZW50aW5lbEtleSA9IHNlbnRpbmVsS2V5KHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChkb2N1bWVudFRhcmdldFN0b3JlLmdldChkb2NTZW50aW5lbEtleSkubmV4dChmdW5jdGlvbiAobWF5YmVTZW50aW5lbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWF5YmVTZW50aW5lbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JpdGVTZW50aW5lbEtleShwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2NoZW1hQ29udmVydGVyLnByb3RvdHlwZS5jcmVhdGVDb2xsZWN0aW9uUGFyZW50SW5kZXggPSBmdW5jdGlvbiAoZGIsIHR4bikge1xyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgaW5kZXguXHJcbiAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJDb2xsZWN0aW9uUGFyZW50LnN0b3JlLCB7XHJcbiAgICAgICAgICAgIGtleVBhdGg6IERiQ29sbGVjdGlvblBhcmVudC5rZXlQYXRoXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGNvbGxlY3Rpb25QYXJlbnRzU3RvcmUgPSB0eG4uc3RvcmUoRGJDb2xsZWN0aW9uUGFyZW50LnN0b3JlKTtcclxuICAgICAgICAvLyBIZWxwZXIgdG8gYWRkIGFuIGluZGV4IGVudHJ5IGlmZiB3ZSBoYXZlbid0IGFscmVhZHkgd3JpdHRlbiBpdC5cclxuICAgICAgICB2YXIgY2FjaGUgPSBuZXcgTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4KCk7XHJcbiAgICAgICAgdmFyIGFkZEVudHJ5ID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25QYXRoKSB7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZS5hZGQoY29sbGVjdGlvblBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvbklkID0gY29sbGVjdGlvblBhdGgubGFzdFNlZ21lbnQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRQYXRoID0gY29sbGVjdGlvblBhdGgucG9wTGFzdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb25QYXJlbnRzU3RvcmUucHV0KHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGNvbGxlY3Rpb25JZCxcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGVuY29kZShwYXJlbnRQYXRoKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIEluZGV4IGV4aXN0aW5nIHJlbW90ZSBkb2N1bWVudHMuXHJcbiAgICAgICAgcmV0dXJuIHR4blxyXG4gICAgICAgICAgICAuc3RvcmUoRGJSZW1vdGVEb2N1bWVudC5zdG9yZSlcclxuICAgICAgICAgICAgLml0ZXJhdGUoeyBrZXlzT25seTogdHJ1ZSB9LCBmdW5jdGlvbiAocGF0aFNlZ21lbnRzLCBfKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gbmV3IFJlc291cmNlUGF0aChwYXRoU2VnbWVudHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYWRkRW50cnkocGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgbXV0YXRpb25zLlxyXG4gICAgICAgICAgICByZXR1cm4gdHhuXHJcbiAgICAgICAgICAgICAgICAuc3RvcmUoRGJEb2N1bWVudE11dGF0aW9uLnN0b3JlKVxyXG4gICAgICAgICAgICAgICAgLml0ZXJhdGUoeyBrZXlzT25seTogdHJ1ZSB9LCBmdW5jdGlvbiAoX2EsIF8pIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VySUQgPSBfYVswXSwgZW5jb2RlZFBhdGggPSBfYVsxXSwgYmF0Y2hJZCA9IF9hWzJdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBkZWNvZGUoZW5jb2RlZFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZEVudHJ5KHBhdGgucG9wTGFzdCgpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNjaGVtYUNvbnZlcnRlcjtcclxufSgpKTtcclxuZnVuY3Rpb24gc2VudGluZWxLZXkocGF0aCkge1xyXG4gICAgcmV0dXJuIFswLCBlbmNvZGUocGF0aCldO1xyXG59XHJcbi8qKlxyXG4gKiBXcmFwcGVyIGNsYXNzIHRvIHN0b3JlIHRpbWVzdGFtcHMgKHNlY29uZHMgYW5kIG5hbm9zKSBpbiBJbmRleGVkRGIgb2JqZWN0cy5cclxuICovXHJcbnZhciBEYlRpbWVzdGFtcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiVGltZXN0YW1wKHNlY29uZHMsIG5hbm9zZWNvbmRzKSB7XHJcbiAgICAgICAgdGhpcy5zZWNvbmRzID0gc2Vjb25kcztcclxuICAgICAgICB0aGlzLm5hbm9zZWNvbmRzID0gbmFub3NlY29uZHM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRGJUaW1lc3RhbXA7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIHNpbmdsZXRvbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnb3duZXInIHN0b3JlIGluIEluZGV4ZWREYi5cclxuICpcclxuICogQSBnaXZlbiBkYXRhYmFzZSBjYW4gaGF2ZSBhIHNpbmdsZSBwcmltYXJ5IHRhYiBhc3NpZ25lZCBhdCBhIGdpdmVuIHRpbWUuIFRoYXRcclxuICogdGFiIG11c3QgdmFsaWRhdGUgdGhhdCBpdCBpcyBzdGlsbCBob2xkaW5nIHRoZSBwcmltYXJ5IGxlYXNlIGJlZm9yZSBldmVyeVxyXG4gKiBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyBsb2NrZWQgYWNjZXNzLiBUaGUgcHJpbWFyeSB0YWIgc2hvdWxkIHJlZ3VsYXJseVxyXG4gKiB3cml0ZSBhbiB1cGRhdGVkIHRpbWVzdGFtcCB0byB0aGlzIGxlYXNlIHRvIHByZXZlbnQgb3RoZXIgdGFicyBmcm9tXHJcbiAqIFwic3RlYWxpbmdcIiB0aGUgcHJpbWFyeSBsZWFzZVxyXG4gKi9cclxudmFyIERiUHJpbWFyeUNsaWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiUHJpbWFyeUNsaWVudChvd25lcklkLCBcclxuICAgIC8qKiBXaGV0aGVyIHRvIGFsbG93IHNoYXJlZCBhY2Nlc3MgZnJvbSBtdWx0aXBsZSB0YWJzLiAqL1xyXG4gICAgYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sIGxlYXNlVGltZXN0YW1wTXMpIHtcclxuICAgICAgICB0aGlzLm93bmVySWQgPSBvd25lcklkO1xyXG4gICAgICAgIHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSBhbGxvd1RhYlN5bmNocm9uaXphdGlvbjtcclxuICAgICAgICB0aGlzLmxlYXNlVGltZXN0YW1wTXMgPSBsZWFzZVRpbWVzdGFtcE1zO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCB0aGUgbmFtZSAnb3duZXInIGlzIGNob3NlbiB0byBlbnN1cmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxyXG4gICAgICogb2xkZXIgY2xpZW50cyB0aGF0IG9ubHkgc3VwcG9ydGVkIHNpbmdsZSBsb2NrZWQgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZVxyXG4gICAgICogbGF5ZXIuXHJcbiAgICAgKi9cclxuICAgIERiUHJpbWFyeUNsaWVudC5zdG9yZSA9ICdvd25lcic7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBrZXkgc3RyaW5nIHVzZWQgZm9yIHRoZSBzaW5nbGUgb2JqZWN0IHRoYXQgZXhpc3RzIGluIHRoZVxyXG4gICAgICogRGJQcmltYXJ5Q2xpZW50IHN0b3JlLlxyXG4gICAgICovXHJcbiAgICBEYlByaW1hcnlDbGllbnQua2V5ID0gJ293bmVyJztcclxuICAgIHJldHVybiBEYlByaW1hcnlDbGllbnQ7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVByaW1hcnlDbGllbnRTdG9yZShkYikge1xyXG4gICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJQcmltYXJ5Q2xpZW50LnN0b3JlKTtcclxufVxyXG4vKipcclxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ211dGF0aW9uUXVldWVzJyBzdG9yZSBpbiBJbmRleGVkRGIuXHJcbiAqXHJcbiAqIEVhY2ggdXNlciBnZXRzIGEgc2luZ2xlIHF1ZXVlIG9mIE11dGF0aW9uQmF0Y2hlcyB0byBhcHBseSB0byB0aGUgc2VydmVyLlxyXG4gKiBEYk11dGF0aW9uUXVldWUgdHJhY2tzIHRoZSBtZXRhZGF0YSBhYm91dCB0aGUgcXVldWUuXHJcbiAqL1xyXG52YXIgRGJNdXRhdGlvblF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJNdXRhdGlvblF1ZXVlKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VyIElEIHRvIHdoaWNoIHRoaXMgcXVldWUgYmVsb25ncy5cclxuICAgICAqL1xyXG4gICAgdXNlcklkLCBcclxuICAgIC8qKlxyXG4gICAgICogQW4gaWRlbnRpZmllciBmb3IgdGhlIGhpZ2hlc3QgbnVtYmVyZWQgYmF0Y2ggdGhhdCBoYXMgYmVlbiBhY2tub3dsZWRnZWRcclxuICAgICAqIGJ5IHRoZSBzZXJ2ZXIuIEFsbCBNdXRhdGlvbkJhdGNoZXMgaW4gdGhpcyBxdWV1ZSB3aXRoIGJhdGNoSWRzIGxlc3NcclxuICAgICAqIHRoYW4gb3IgZXF1YWwgdG8gdGhpcyB2YWx1ZSBhcmUgY29uc2lkZXJlZCB0byBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIGJ5XHJcbiAgICAgKiB0aGUgc2VydmVyLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IHRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIHVzZWQgYnkgdGhlIGNvZGUuXHJcbiAgICAgKi9cclxuICAgIGxhc3RBY2tub3dsZWRnZWRCYXRjaElkLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBzdHJlYW0gdG9rZW4gdGhhdCB3YXMgcHJldmlvdXNseSBzZW50IGJ5IHRoZSBzZXJ2ZXIuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIFN0cmVhbWluZ1dyaXRlUmVxdWVzdCBpbiBkYXRhc3RvcmUucHJvdG8gZm9yIG1vcmUgZGV0YWlscyBhYm91dFxyXG4gICAgICogdXNhZ2UuXHJcbiAgICAgKlxyXG4gICAgICogQWZ0ZXIgc2VuZGluZyB0aGlzIHRva2VuLCBlYXJsaWVyIHRva2VucyBtYXkgbm90IGJlIHVzZWQgYW55bW9yZSBzb1xyXG4gICAgICogb25seSBhIHNpbmdsZSBzdHJlYW0gdG9rZW4gaXMgcmV0YWluZWQuXHJcbiAgICAgKi9cclxuICAgIGxhc3RTdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIHRoaXMubGFzdEFja25vd2xlZGdlZEJhdGNoSWQgPSBsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZDtcclxuICAgICAgICB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IGxhc3RTdHJlYW1Ub2tlbjtcclxuICAgIH1cclxuICAgIC8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi9cclxuICAgIERiTXV0YXRpb25RdWV1ZS5zdG9yZSA9ICdtdXRhdGlvblF1ZXVlcyc7XHJcbiAgICAvKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHVzZXJJZCBwcm9wZXJ0eS4gKi9cclxuICAgIERiTXV0YXRpb25RdWV1ZS5rZXlQYXRoID0gJ3VzZXJJZCc7XHJcbiAgICByZXR1cm4gRGJNdXRhdGlvblF1ZXVlO1xyXG59KCkpO1xyXG4vKipcclxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ211dGF0aW9ucycgc3RvcmUgaW4gSW5kZXhlZERiLlxyXG4gKlxyXG4gKiBSZXByZXNlbnRzIGEgYmF0Y2ggb2YgdXNlci1sZXZlbCBtdXRhdGlvbnMgaW50ZW5kZWQgdG8gYmUgc2VudCB0byB0aGUgc2VydmVyXHJcbiAqIGluIGEgc2luZ2xlIHdyaXRlLiBFYWNoIHVzZXItbGV2ZWwgYmF0Y2ggZ2V0cyBhIHNlcGFyYXRlIERiTXV0YXRpb25CYXRjaFxyXG4gKiB3aXRoIGEgbmV3IGJhdGNoSWQuXHJcbiAqL1xyXG52YXIgRGJNdXRhdGlvbkJhdGNoID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJNdXRhdGlvbkJhdGNoKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VyIElEIHRvIHdoaWNoIHRoaXMgYmF0Y2ggYmVsb25ncy5cclxuICAgICAqL1xyXG4gICAgdXNlcklkLCBcclxuICAgIC8qKlxyXG4gICAgICogQW4gaWRlbnRpZmllciBmb3IgdGhpcyBiYXRjaCwgYWxsb2NhdGVkIHVzaW5nIGFuIGF1dG8tZ2VuZXJhdGVkIGtleS5cclxuICAgICAqL1xyXG4gICAgYmF0Y2hJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBsb2NhbCB3cml0ZSB0aW1lIG9mIHRoZSBiYXRjaCwgc3RvcmVkIGFzIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGVcclxuICAgICAqIGVwb2NoLlxyXG4gICAgICovXHJcbiAgICBsb2NhbFdyaXRlVGltZU1zLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBsaXN0IG9mIFwibXV0YXRpb25zXCIgdGhhdCByZXByZXNlbnQgYSBwYXJ0aWFsIGJhc2Ugc3RhdGUgZnJvbSB3aGVuIHRoaXNcclxuICAgICAqIHdyaXRlIGJhdGNoIHdhcyBpbml0aWFsbHkgY3JlYXRlZC4gRHVyaW5nIGxvY2FsIGFwcGxpY2F0aW9uIG9mIHRoZSB3cml0ZVxyXG4gICAgICogYmF0Y2gsIHRoZXNlIGJhc2VNdXRhdGlvbnMgYXJlIGFwcGxpZWQgcHJpb3IgdG8gdGhlIHJlYWwgd3JpdGVzIGluIG9yZGVyXHJcbiAgICAgKiB0byBvdmVycmlkZSBjZXJ0YWluIGRvY3VtZW50IGZpZWxkcyBmcm9tIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIFRoaXNcclxuICAgICAqIGlzIG5lY2Vzc2FyeSBpbiB0aGUgY2FzZSBvZiBub24taWRlbXBvdGVudCB3cml0ZXMgKGUuZy4gYGluY3JlbWVudCgpYFxyXG4gICAgICogdHJhbnNmb3JtcykgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIG1vZGlmaWVkIGRvY3VtZW50c1xyXG4gICAgICogZG9lc24ndCBmbGlja2VyIGlmIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgcmVjZWl2ZXMgdGhlIHJlc3VsdCBvZiB0aGVcclxuICAgICAqIG5vbi1pZGVtcG90ZW50IHdyaXRlIGJlZm9yZSB0aGUgd3JpdGUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBxdWV1ZS5cclxuICAgICAqXHJcbiAgICAgKiBUaGVzZSBtdXRhdGlvbnMgYXJlIG5ldmVyIHNlbnQgdG8gdGhlIGJhY2tlbmQuXHJcbiAgICAgKi9cclxuICAgIGJhc2VNdXRhdGlvbnMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGxpc3Qgb2YgbXV0YXRpb25zIHRvIGFwcGx5LiBBbGwgbXV0YXRpb25zIHdpbGwgYmUgYXBwbGllZCBhdG9taWNhbGx5LlxyXG4gICAgICpcclxuICAgICAqIE11dGF0aW9ucyBhcmUgc2VyaWFsaXplZCB2aWEgSnNvblByb3RvU2VyaWFsaXplci50b011dGF0aW9uKCkuXHJcbiAgICAgKi9cclxuICAgIG11dGF0aW9ucykge1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IGJhdGNoSWQ7XHJcbiAgICAgICAgdGhpcy5sb2NhbFdyaXRlVGltZU1zID0gbG9jYWxXcml0ZVRpbWVNcztcclxuICAgICAgICB0aGlzLmJhc2VNdXRhdGlvbnMgPSBiYXNlTXV0YXRpb25zO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25zID0gbXV0YXRpb25zO1xyXG4gICAgfVxyXG4gICAgLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqL1xyXG4gICAgRGJNdXRhdGlvbkJhdGNoLnN0b3JlID0gJ211dGF0aW9ucyc7XHJcbiAgICAvKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHVzZXJJZCwgYmF0Y2hJZCBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgRGJNdXRhdGlvbkJhdGNoLmtleVBhdGggPSAnYmF0Y2hJZCc7XHJcbiAgICAvKiogVGhlIGluZGV4IG5hbWUgZm9yIGxvb2t1cCBvZiBtdXRhdGlvbnMgYnkgdXNlci4gKi9cclxuICAgIERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXggPSAndXNlck11dGF0aW9uc0luZGV4JztcclxuICAgIC8qKiBUaGUgdXNlciBtdXRhdGlvbnMgaW5kZXggaXMga2V5ZWQgYnkgW3VzZXJJZCwgYmF0Y2hJZF0gcGFpcnMuICovXHJcbiAgICBEYk11dGF0aW9uQmF0Y2gudXNlck11dGF0aW9uc0tleVBhdGggPSBbJ3VzZXJJZCcsICdiYXRjaElkJ107XHJcbiAgICByZXR1cm4gRGJNdXRhdGlvbkJhdGNoO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjcmVhdGVNdXRhdGlvblF1ZXVlKGRiKSB7XHJcbiAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYk11dGF0aW9uUXVldWUuc3RvcmUsIHtcclxuICAgICAgICBrZXlQYXRoOiBEYk11dGF0aW9uUXVldWUua2V5UGF0aFxyXG4gICAgfSk7XHJcbiAgICB2YXIgbXV0YXRpb25CYXRjaGVzU3RvcmUgPSBkYi5jcmVhdGVPYmplY3RTdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUsIHtcclxuICAgICAgICBrZXlQYXRoOiBEYk11dGF0aW9uQmF0Y2gua2V5UGF0aCxcclxuICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlXHJcbiAgICB9KTtcclxuICAgIG11dGF0aW9uQmF0Y2hlc1N0b3JlLmNyZWF0ZUluZGV4KERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zSW5kZXgsIERiTXV0YXRpb25CYXRjaC51c2VyTXV0YXRpb25zS2V5UGF0aCwgeyB1bmlxdWU6IHRydWUgfSk7XHJcbiAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYkRvY3VtZW50TXV0YXRpb24uc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGdyYWRlIGZ1bmN0aW9uIHRvIG1pZ3JhdGUgdGhlICdtdXRhdGlvbnMnIHN0b3JlIGZyb20gVjEgdG8gVjMuIExvYWRzXHJcbiAqIGFuZCByZXdyaXRlcyBhbGwgZGF0YS5cclxuICovXHJcbmZ1bmN0aW9uIHVwZ3JhZGVNdXRhdGlvbkJhdGNoU2NoZW1hQW5kTWlncmF0ZURhdGEoZGIsIHR4bikge1xyXG4gICAgdmFyIHYxTXV0YXRpb25zU3RvcmUgPSB0eG4uc3RvcmUoRGJNdXRhdGlvbkJhdGNoLnN0b3JlKTtcclxuICAgIHJldHVybiB2MU11dGF0aW9uc1N0b3JlLmxvYWRBbGwoKS5uZXh0KGZ1bmN0aW9uIChleGlzdGluZ011dGF0aW9ucykge1xyXG4gICAgICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKERiTXV0YXRpb25CYXRjaC5zdG9yZSk7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uc1N0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJNdXRhdGlvbkJhdGNoLnN0b3JlLCB7XHJcbiAgICAgICAgICAgIGtleVBhdGg6IERiTXV0YXRpb25CYXRjaC5rZXlQYXRoLFxyXG4gICAgICAgICAgICBhdXRvSW5jcmVtZW50OiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbXV0YXRpb25zU3RvcmUuY3JlYXRlSW5kZXgoRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNJbmRleCwgRGJNdXRhdGlvbkJhdGNoLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgICAgICB2YXIgdjNNdXRhdGlvbnNTdG9yZSA9IHR4bi5zdG9yZShEYk11dGF0aW9uQmF0Y2guc3RvcmUpO1xyXG4gICAgICAgIHZhciB3cml0ZUFsbCA9IGV4aXN0aW5nTXV0YXRpb25zLm1hcChmdW5jdGlvbiAobXV0YXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHYzTXV0YXRpb25zU3RvcmUucHV0KG11dGF0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3Iod3JpdGVBbGwpO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdkb2N1bWVudE11dGF0aW9ucycgc3RvcmUgaW4gSW5kZXhlZERiLlxyXG4gKlxyXG4gKiBBIG1hbnVhbGx5IG1haW50YWluZWQgaW5kZXggb2YgYWxsIHRoZSBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgYWZmZWN0IGEgZ2l2ZW5cclxuICogZG9jdW1lbnQga2V5LiBUaGUgcm93cyBpbiB0aGlzIHRhYmxlIGFyZSByZWZlcmVuY2VzIGJhc2VkIG9uIHRoZSBjb250ZW50cyBvZlxyXG4gKiBEYk11dGF0aW9uQmF0Y2gubXV0YXRpb25zLlxyXG4gKi9cclxudmFyIERiRG9jdW1lbnRNdXRhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiRG9jdW1lbnRNdXRhdGlvbigpIHtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIFt1c2VySWRdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4IHRvIGl0ZXJhdGVcclxuICAgICAqIG92ZXIgYWxsIG9mIGEgdXNlcidzIGRvY3VtZW50IG11dGF0aW9ucy5cclxuICAgICAqL1xyXG4gICAgRGJEb2N1bWVudE11dGF0aW9uLnByZWZpeEZvclVzZXIgPSBmdW5jdGlvbiAodXNlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIFt1c2VySWRdO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIFt1c2VySWQsIGVuY29kZWRQYXRoXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9uc1xyXG4gICAgICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cclxuICAgICAqL1xyXG4gICAgRGJEb2N1bWVudE11dGF0aW9uLnByZWZpeEZvclBhdGggPSBmdW5jdGlvbiAodXNlcklkLCBwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIFt1c2VySWQsIGVuY29kZShwYXRoKV07XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcclxuICAgICAqIGFuZCBkZWxldGluZyBpbnRvIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4LlxyXG4gICAgICovXHJcbiAgICBEYkRvY3VtZW50TXV0YXRpb24ua2V5ID0gZnVuY3Rpb24gKHVzZXJJZCwgcGF0aCwgYmF0Y2hJZCkge1xyXG4gICAgICAgIHJldHVybiBbdXNlcklkLCBlbmNvZGUocGF0aCksIGJhdGNoSWRdO1xyXG4gICAgfTtcclxuICAgIERiRG9jdW1lbnRNdXRhdGlvbi5zdG9yZSA9ICdkb2N1bWVudE11dGF0aW9ucyc7XHJcbiAgICAvKipcclxuICAgICAqIEJlY2F1c2Ugd2Ugc3RvcmUgYWxsIHRoZSB1c2VmdWwgaW5mb3JtYXRpb24gZm9yIHRoaXMgc3RvcmUgaW4gdGhlIGtleSxcclxuICAgICAqIHRoZXJlIGlzIG5vIHVzZWZ1bCBpbmZvcm1hdGlvbiB0byBzdG9yZSBhcyB0aGUgdmFsdWUuIFRoZSByYXcgKHVuZW5jb2RlZClcclxuICAgICAqIHBhdGggY2Fubm90IGJlIHN0b3JlZCBiZWNhdXNlIEluZGV4ZWREYiBkb2Vzbid0IHN0b3JlIHByb3RvdHlwZVxyXG4gICAgICogaW5mb3JtYXRpb24uXHJcbiAgICAgKi9cclxuICAgIERiRG9jdW1lbnRNdXRhdGlvbi5QTEFDRUhPTERFUiA9IG5ldyBEYkRvY3VtZW50TXV0YXRpb24oKTtcclxuICAgIHJldHVybiBEYkRvY3VtZW50TXV0YXRpb247XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVJlbW90ZURvY3VtZW50Q2FjaGUoZGIpIHtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiUmVtb3RlRG9jdW1lbnQuc3RvcmUpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSBrbm93biBhYnNlbmNlIG9mIGEgZG9jdW1lbnQgYXQgYSBwYXJ0aWN1bGFyIHZlcnNpb24uXHJcbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxyXG4gKi9cclxudmFyIERiTm9Eb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiTm9Eb2N1bWVudChwYXRoLCByZWFkVGltZSkge1xyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IHJlYWRUaW1lO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERiTm9Eb2N1bWVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IGJ1dCB3aG9zZSBkYXRhIGlzIHVua25vd24uXHJcbiAqIFN0b3JlZCBpbiBJbmRleGVkRGIgYXMgcGFydCBvZiBhIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0LlxyXG4gKi9cclxudmFyIERiVW5rbm93bkRvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJVbmtub3duRG9jdW1lbnQocGF0aCwgdmVyc2lvbikge1xyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcclxuICAgIH1cclxuICAgIHJldHVybiBEYlVua25vd25Eb2N1bWVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdyZW1vdGVEb2N1bWVudHMnIHN0b3JlIGluIEluZGV4ZWREYi5cclxuICogSXQgcmVwcmVzZW50cyBlaXRoZXI6XHJcbiAqXHJcbiAqIC0gQSBjb21wbGV0ZSBkb2N1bWVudC5cclxuICogLSBBIFwibm8gZG9jdW1lbnRcIiByZXByZXNlbnRpbmcgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIG5vdCB0byBleGlzdCAoYXRcclxuICogc29tZSB2ZXJzaW9uKS5cclxuICogLSBBbiBcInVua25vd24gZG9jdW1lbnRcIiByZXByZXNlbnRpbmcgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IChhdFxyXG4gKiBzb21lIHZlcnNpb24pIGJ1dCB3aG9zZSBjb250ZW50cyBhcmUgdW5rbm93bi5cclxuICpcclxuICogTm90ZTogVGhpcyBpcyB0aGUgcGVyc2lzdGVkIGVxdWl2YWxlbnQgb2YgYSBNYXliZURvY3VtZW50IGFuZCBjb3VsZCBwZXJoYXBzXHJcbiAqIGJlIG1hZGUgbW9yZSBnZW5lcmFsIGlmIG5lY2Vzc2FyeS5cclxuICovXHJcbnZhciBEYlJlbW90ZURvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gVE9ETzogV2UgYXJlIGN1cnJlbnRseSBzdG9yaW5nIGZ1bGwgZG9jdW1lbnQga2V5cyBhbG1vc3QgdGhyZWUgdGltZXNcclxuICAgIC8vIChvbmNlIGFzIHBhcnQgb2YgdGhlIHByaW1hcnkga2V5LCBvbmNlIC0gcGFydGx5IC0gYXMgYHBhcmVudFBhdGhgIGFuZCBvbmNlXHJcbiAgICAvLyBpbnNpZGUgdGhlIGVuY29kZWQgZG9jdW1lbnRzKS4gRHVyaW5nIG91ciBuZXh0IG1pZ3JhdGlvbiwgd2Ugc2hvdWxkXHJcbiAgICAvLyByZXdyaXRlIHRoZSBwcmltYXJ5IGtleSBhcyBwYXJlbnRQYXRoICsgZG9jdW1lbnQgSUQgd2hpY2ggd291bGQgYWxsb3cgdXNcclxuICAgIC8vIHRvIGRyb3Agb25lIHZhbHVlLlxyXG4gICAgZnVuY3Rpb24gRGJSZW1vdGVEb2N1bWVudChcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIERiVW5rbm93bkRvY3VtZW50IGlmIHRoZSBkYXRhIGZvciBhIGRvY3VtZW50IGlzXHJcbiAgICAgKiBub3Qga25vd24sIGJ1dCBpdCBpcyBrbm93biB0aGF0IGEgZG9jdW1lbnQgZXhpc3RzIGF0IHRoZSBzcGVjaWZpZWRcclxuICAgICAqIHZlcnNpb24gKGUuZy4gaXQgaGFkIGEgc3VjY2Vzc2Z1bCB1cGRhdGUgYXBwbGllZCB0byBpdClcclxuICAgICAqL1xyXG4gICAgdW5rbm93bkRvY3VtZW50LCBcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIGEgRGJOb0RvY3VtZW50IGlmIGl0IGlzIGtub3duIHRoYXQgbm8gZG9jdW1lbnRcclxuICAgICAqIGV4aXN0cy5cclxuICAgICAqL1xyXG4gICAgbm9Eb2N1bWVudCwgXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBhIERvY3VtZW50IGlmIHRoZXJlJ3MgYSBjYWNoZWQgdmVyc2lvbiBvZiB0aGVcclxuICAgICAqIGRvY3VtZW50LlxyXG4gICAgICovXHJcbiAgICBkb2N1bWVudCwgXHJcbiAgICAvKipcclxuICAgICAqIERvY3VtZW50cyB0aGF0IHdlcmUgd3JpdHRlbiB0byB0aGUgcmVtb3RlIGRvY3VtZW50IHN0b3JlIGJhc2VkIG9uXHJcbiAgICAgKiBhIHdyaXRlIGFja25vd2xlZGdtZW50IGFyZSBtYXJrZWQgd2l0aCBgaGFzQ29tbWl0dGVkTXV0YXRpb25zYC4gVGhlc2VcclxuICAgICAqIGRvY3VtZW50cyBhcmUgcG90ZW50aWFsbHkgaW5jb25zaXN0ZW50IHdpdGggdGhlIGJhY2tlbmQncyBjb3B5IGFuZCB1c2VcclxuICAgICAqIHRoZSB3cml0ZSdzIGNvbW1pdCB2ZXJzaW9uIGFzIHRoZWlyIGRvY3VtZW50IHZlcnNpb24uXHJcbiAgICAgKi9cclxuICAgIGhhc0NvbW1pdHRlZE11dGF0aW9ucywgXHJcbiAgICAvKipcclxuICAgICAqIFdoZW4gdGhlIGRvY3VtZW50IHdhcyByZWFkIGZyb20gdGhlIGJhY2tlbmQuIFVuZGVmaW5lZCBmb3IgZGF0YSB3cml0dGVuXHJcbiAgICAgKiBwcmlvciB0byBzY2hlbWEgdmVyc2lvbiA5LlxyXG4gICAgICovXHJcbiAgICByZWFkVGltZSwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBwYXRoIG9mIHRoZSBjb2xsZWN0aW9uIHRoaXMgZG9jdW1lbnQgaXMgcGFydCBvZi4gVW5kZWZpbmVkIGZvciBkYXRhXHJcbiAgICAgKiB3cml0dGVuIHByaW9yIHRvIHNjaGVtYSB2ZXJzaW9uIDkuXHJcbiAgICAgKi9cclxuICAgIHBhcmVudFBhdGgpIHtcclxuICAgICAgICB0aGlzLnVua25vd25Eb2N1bWVudCA9IHVua25vd25Eb2N1bWVudDtcclxuICAgICAgICB0aGlzLm5vRG9jdW1lbnQgPSBub0RvY3VtZW50O1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcclxuICAgICAgICB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9IGhhc0NvbW1pdHRlZE11dGF0aW9ucztcclxuICAgICAgICB0aGlzLnJlYWRUaW1lID0gcmVhZFRpbWU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRQYXRoID0gcGFyZW50UGF0aDtcclxuICAgIH1cclxuICAgIERiUmVtb3RlRG9jdW1lbnQuc3RvcmUgPSAncmVtb3RlRG9jdW1lbnRzJztcclxuICAgIC8qKlxyXG4gICAgICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gYWxsIGVudHJpZXMgc29ydGVkIGJ5IHJlYWQgdGltZSAod2hpY2hcclxuICAgICAqIGNvcnJlc3BvbmRzIHRvIHRoZSBsYXN0IG1vZGlmaWNhdGlvbiB0aW1lIG9mIGVhY2ggcm93KS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gcHJvdmlkZSBhIGNoYW5nZWxvZyBmb3IgTXVsdGktVGFiLlxyXG4gICAgICovXHJcbiAgICBEYlJlbW90ZURvY3VtZW50LnJlYWRUaW1lSW5kZXggPSAncmVhZFRpbWVJbmRleCc7XHJcbiAgICBEYlJlbW90ZURvY3VtZW50LnJlYWRUaW1lSW5kZXhQYXRoID0gJ3JlYWRUaW1lJztcclxuICAgIC8qKlxyXG4gICAgICogQW4gaW5kZXggdGhhdCBwcm92aWRlcyBhY2Nlc3MgdG8gZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbiBzb3J0ZWQgYnkgcmVhZFxyXG4gICAgICogdGltZS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGluZGV4IGlzIHVzZWQgdG8gYWxsb3cgdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgdG8gZmV0Y2ggbmV3bHkgY2hhbmdlZFxyXG4gICAgICogZG9jdW1lbnRzIGluIGEgY29sbGVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgRGJSZW1vdGVEb2N1bWVudC5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleCA9ICdjb2xsZWN0aW9uUmVhZFRpbWVJbmRleCc7XHJcbiAgICBEYlJlbW90ZURvY3VtZW50LmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCA9IFsncGFyZW50UGF0aCcsICdyZWFkVGltZSddO1xyXG4gICAgcmV0dXJuIERiUmVtb3RlRG9jdW1lbnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBDb250YWlucyBhIHNpbmdsZSBlbnRyeSB0aGF0IGhhcyBtZXRhZGF0YSBhYm91dCB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLlxyXG4gKi9cclxudmFyIERiUmVtb3RlRG9jdW1lbnRHbG9iYWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBieXRlU2l6ZSBBcHByb3hpbWF0ZWx5IHRoZSB0b3RhbCBzaXplIGluIGJ5dGVzIG9mIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBkb2N1bWVudFxyXG4gICAgICogY2FjaGUuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIERiUmVtb3RlRG9jdW1lbnRHbG9iYWwoYnl0ZVNpemUpIHtcclxuICAgICAgICB0aGlzLmJ5dGVTaXplID0gYnl0ZVNpemU7XHJcbiAgICB9XHJcbiAgICBEYlJlbW90ZURvY3VtZW50R2xvYmFsLnN0b3JlID0gJ3JlbW90ZURvY3VtZW50R2xvYmFsJztcclxuICAgIERiUmVtb3RlRG9jdW1lbnRHbG9iYWwua2V5ID0gJ3JlbW90ZURvY3VtZW50R2xvYmFsS2V5JztcclxuICAgIHJldHVybiBEYlJlbW90ZURvY3VtZW50R2xvYmFsO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjcmVhdGVEb2N1bWVudEdsb2JhbFN0b3JlKGRiKSB7XHJcbiAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYlJlbW90ZURvY3VtZW50R2xvYmFsLnN0b3JlKTtcclxufVxyXG4vKipcclxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ3RhcmdldHMnIHN0b3JlIGluIEluZGV4ZWREYi5cclxuICpcclxuICogVGhpcyBpcyBiYXNlZCBvbiBhbmQgc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBwcm90byB1c2VkIGluIHRoZSBpT1NcclxuICogY2xpZW50LlxyXG4gKlxyXG4gKiBFYWNoIHF1ZXJ5IHRoZSBjbGllbnQgbGlzdGVucyB0byBhZ2FpbnN0IHRoZSBzZXJ2ZXIgaXMgdHJhY2tlZCBvbiBkaXNrIHNvXHJcbiAqIHRoYXQgdGhlIHF1ZXJ5IGNhbiBiZSBlZmZpY2llbnRseSByZXN1bWVkIG9uIHJlc3RhcnQuXHJcbiAqL1xyXG52YXIgRGJUYXJnZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYlRhcmdldChcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXV0by1nZW5lcmF0ZWQgc2VxdWVudGlhbCBudW1lcmljIGlkZW50aWZpZXIgZm9yIHRoZSBxdWVyeS5cclxuICAgICAqXHJcbiAgICAgKiBRdWVyaWVzIGFyZSBzdG9yZWQgdXNpbmcgdGhlaXIgY2Fub25pY2FsSWQgYXMgdGhlIGtleSwgYnV0IHRoZXNlXHJcbiAgICAgKiBjYW5vbmljYWxJZHMgY2FuIGJlIHF1aXRlIGxvbmcgc28gd2UgYWRkaXRpb25hbGx5IGFzc2lnbiBhIHVuaXF1ZVxyXG4gICAgICogcXVlcnlJZCB3aGljaCBjYW4gYmUgdXNlZCBieSByZWZlcmVuY2VkIGRhdGEgc3RydWN0dXJlcyAoZS5nLlxyXG4gICAgICogaW5kZXhlcykgdG8gbWluaW1pemUgdGhlIG9uLWRpc2sgY29zdC5cclxuICAgICAqL1xyXG4gICAgdGFyZ2V0SWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY2Fub25pY2FsIHN0cmluZyByZXByZXNlbnRpbmcgdGhpcyBxdWVyeS4gVGhpcyBpcyBub3QgdW5pcXVlLlxyXG4gICAgICovXHJcbiAgICBjYW5vbmljYWxJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBsYXN0IHJlYWRUaW1lIHJlY2VpdmVkIGZyb20gdGhlIFdhdGNoIFNlcnZpY2UgZm9yIHRoaXMgcXVlcnkuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpcyB0aGUgc2FtZSB2YWx1ZSBhcyBUYXJnZXRDaGFuZ2UucmVhZF90aW1lIGluIHRoZSBwcm90b3MuXHJcbiAgICAgKi9cclxuICAgIHJlYWRUaW1lLCBcclxuICAgIC8qKlxyXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSBxdWVyeSB0byBiZVxyXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhXHJcbiAgICAgKiB0aGF0IG1hdGNoZXMgdGhlIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYVxyXG4gICAgICogcG9pbnQgaW4gdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBpcyByZWxhdGVkIHRvIHRoZSBzbmFwc2hvdFZlcnNpb24gaW4gdGhhdCB0aGUgcmVzdW1lVG9rZW5cclxuICAgICAqIGVmZmVjdGl2ZWx5IGFsc28gZW5jb2RlcyB0aGF0IHZhbHVlLCBidXQgdGhlIHJlc3VtZVRva2VuIGlzIG9wYXF1ZVxyXG4gICAgICogYW5kIHNvbWV0aW1lcyBlbmNvZGVzIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQSBjb25zZXF1ZW5jZSBvZiB0aGlzIGlzIHRoYXQgdGhlIHJlc3VtZVRva2VuIHNob3VsZCBiZSB1c2VkIHdoZW5cclxuICAgICAqIGFza2luZyB0aGUgc2VydmVyIHRvIHJlYXNvbiBhYm91dCB3aGVyZSB0aGlzIGNsaWVudCBpcyBpbiB0aGUgd2F0Y2hcclxuICAgICAqIHN0cmVhbSwgYnV0IHRoZSBjbGllbnQgc2hvdWxkIHVzZSB0aGUgc25hcHNob3RWZXJzaW9uIGZvciBpdHMgb3duXHJcbiAgICAgKiBwdXJwb3Nlcy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZXN1bWVfdG9rZW4gaW4gdGhlIHByb3Rvcy5cclxuICAgICAqL1xyXG4gICAgcmVzdW1lVG9rZW4sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHNlcXVlbmNlIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGxhc3QgdGltZSB0aGlzIHF1ZXJ5IHdhc1xyXG4gICAgICogbGlzdGVuZWQgdG8sIHVzZWQgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiBwdXJwb3Nlcy5cclxuICAgICAqXHJcbiAgICAgKiBDb252ZW50aW9uYWxseSB0aGlzIHdvdWxkIGJlIGEgdGltZXN0YW1wIHZhbHVlLCBidXQgZGV2aWNlLWxvY2FsXHJcbiAgICAgKiBjbG9ja3MgYXJlIHVucmVsaWFibGUgYW5kIHRoZXkgbXVzdCBiZSBhYmxlIHRvIGNyZWF0ZSBuZXcgbGlzdGVuc1xyXG4gICAgICogZXZlbiB3aGlsZSBkaXNjb25uZWN0ZWQuIEluc3RlYWQgdGhpcyBzaG91bGQgYmUgYSBtb25vdG9uaWNhbGx5XHJcbiAgICAgKiBpbmNyZWFzaW5nIG51bWJlciB0aGF0J3MgaW5jcmVtZW50ZWQgb24gZWFjaCBsaXN0ZW4gY2FsbC5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBxdWVyeUlkIHNpbmNlIHRoZSBxdWVyeUlkIGlzIGFuXHJcbiAgICAgKiBpbW11dGFibGUgaWRlbnRpZmllciBhc3NpZ25lZCB0byB0aGUgUXVlcnkgb24gZmlyc3QgdXNlIHdoaWxlXHJcbiAgICAgKiBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgdXBkYXRlZCBldmVyeSB0aW1lIHRoZSBxdWVyeSBpc1xyXG4gICAgICogbGlzdGVuZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgXHJcbiAgICAvKipcclxuICAgICAqIERlbm90ZXMgdGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCBxdWVyeSB2aWV3XHJcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLiAgVW5kZWZpbmVkIGZvciBkYXRhIHdyaXR0ZW4gcHJpb3IgdG9cclxuICAgICAqIHNjaGVtYSB2ZXJzaW9uIDkuXHJcbiAgICAgKi9cclxuICAgIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcXVlcnkgZm9yIHRoaXMgdGFyZ2V0LlxyXG4gICAgICpcclxuICAgICAqIEJlY2F1c2UgY2Fub25pY2FsIGlkcyBhcmUgbm90IHVuaXF1ZSB3ZSBtdXN0IHN0b3JlIHRoZSBhY3R1YWwgcXVlcnkuIFdlXHJcbiAgICAgKiB1c2UgdGhlIHByb3RvIHRvIGhhdmUgYW4gb2JqZWN0IHdlIGNhbiBwZXJzaXN0IHdpdGhvdXQgaGF2aW5nIHRvXHJcbiAgICAgKiBkdXBsaWNhdGUgdHJhbnNsYXRpb24gbG9naWMgdG8gYW5kIGZyb20gYSBgUXVlcnlgIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgcXVlcnkpIHtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5jYW5vbmljYWxJZCA9IGNhbm9uaWNhbElkO1xyXG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSByZWFkVGltZTtcclxuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gcmVzdW1lVG9rZW47XHJcbiAgICAgICAgdGhpcy5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICB9XHJcbiAgICBEYlRhcmdldC5zdG9yZSA9ICd0YXJnZXRzJztcclxuICAgIC8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdGFyZ2V0SWQgcHJvcGVydHkuICovXHJcbiAgICBEYlRhcmdldC5rZXlQYXRoID0gJ3RhcmdldElkJztcclxuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4LiAqL1xyXG4gICAgRGJUYXJnZXQucXVlcnlUYXJnZXRzSW5kZXhOYW1lID0gJ3F1ZXJ5VGFyZ2V0c0luZGV4JztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIGFsbCBjYW5vbmljYWxJZHMgdG8gdGhlIHRhcmdldHMgdGhhdCB0aGV5IG1hdGNoLiBUaGlzIGlzIG5vdFxyXG4gICAgICogYSB1bmlxdWUgbWFwcGluZyBiZWNhdXNlIGNhbm9uaWNhbElkIGRvZXMgbm90IHByb21pc2UgYSB1bmlxdWUgbmFtZSBmb3IgYWxsXHJcbiAgICAgKiBwb3NzaWJsZSBxdWVyaWVzLCBzbyB3ZSBhcHBlbmQgdGhlIHRhcmdldElkIHRvIG1ha2UgdGhlIG1hcHBpbmcgdW5pcXVlLlxyXG4gICAgICovXHJcbiAgICBEYlRhcmdldC5xdWVyeVRhcmdldHNLZXlQYXRoID0gWydjYW5vbmljYWxJZCcsICd0YXJnZXRJZCddO1xyXG4gICAgcmV0dXJuIERiVGFyZ2V0O1xyXG59KCkpO1xyXG4vKipcclxuICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgdGFyZ2V0IGFuZCBhIGRvY3VtZW50LCBvciBhXHJcbiAqIHNlbnRpbmVsIHJvdyBtYXJraW5nIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhdCB3aGljaCBhIGRvY3VtZW50IHdhcyB1c2VkLlxyXG4gKiBFYWNoIGRvY3VtZW50IGNhY2hlZCBtdXN0IGhhdmUgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvdyBiZWZvcmUgbHJ1XHJcbiAqIGdhcmJhZ2UgY29sbGVjdGlvbiBpcyBlbmFibGVkLlxyXG4gKlxyXG4gKiBUaGUgdGFyZ2V0IGFzc29jaWF0aW9ucyBhbmQgc2VudGluZWwgcm93cyBhcmUgY28tbG9jYXRlZCBzbyB0aGF0IG9ycGhhbmVkXHJcbiAqIGRvY3VtZW50cyBhbmQgdGhlaXIgc2VxdWVuY2UgbnVtYmVycyBjYW4gYmUgaWRlbnRpZmllZCBlZmZpY2llbnRseSB2aWEgYSBzY2FuXHJcbiAqIG9mIHRoaXMgc3RvcmUuXHJcbiAqL1xyXG52YXIgRGJUYXJnZXREb2N1bWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERiVGFyZ2V0RG9jdW1lbnQoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0YXJnZXRJZCBpZGVudGlmeWluZyBhIHRhcmdldCBvciAwIGZvciBhIHNlbnRpbmVsIHJvdy5cclxuICAgICAqL1xyXG4gICAgdGFyZ2V0SWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgcGF0aCB0byB0aGUgZG9jdW1lbnQsIGFzIGVuY29kZWQgaW4gdGhlIGtleS5cclxuICAgICAqL1xyXG4gICAgcGF0aCwgXHJcbiAgICAvKipcclxuICAgICAqIElmIHRoaXMgaXMgYSBzZW50aW5lbCByb3csIHRoaXMgc2hvdWxkIGJlIHRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3RcclxuICAgICAqIHRpbWUgdGhlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcGF0aGAgd2FzIHVzZWQuIE90aGVyd2lzZSwgaXQgc2hvdWxkIGJlXHJcbiAgICAgKiBgdW5kZWZpbmVkYC5cclxuICAgICAqL1xyXG4gICAgc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgYXNzZXJ0KCh0YXJnZXRJZCA9PT0gMCkgPT09IChzZXF1ZW5jZU51bWJlciAhPT0gdW5kZWZpbmVkKSwgJ0EgdGFyZ2V0LWRvY3VtZW50IHJvdyBtdXN0IGVpdGhlciBoYXZlIHRhcmdldElkID09IDAgYW5kIGEgZGVmaW5lZCBzZXF1ZW5jZSBudW1iZXIsIG9yIGEgbm9uLXplcm8gdGFyZ2V0SWQgYW5kIG5vIHNlcXVlbmNlIG51bWJlcicpO1xyXG4gICAgfVxyXG4gICAgLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqL1xyXG4gICAgRGJUYXJnZXREb2N1bWVudC5zdG9yZSA9ICd0YXJnZXREb2N1bWVudHMnO1xyXG4gICAgLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB0YXJnZXRJZCwgcGF0aCBwcm9wZXJ0aWVzLiAqL1xyXG4gICAgRGJUYXJnZXREb2N1bWVudC5rZXlQYXRoID0gWyd0YXJnZXRJZCcsICdwYXRoJ107XHJcbiAgICAvKiogVGhlIGluZGV4IG5hbWUgZm9yIHRoZSByZXZlcnNlIGluZGV4LiAqL1xyXG4gICAgRGJUYXJnZXREb2N1bWVudC5kb2N1bWVudFRhcmdldHNJbmRleCA9ICdkb2N1bWVudFRhcmdldHNJbmRleCc7XHJcbiAgICAvKiogV2UgYWxzbyBuZWVkIHRvIGNyZWF0ZSB0aGUgcmV2ZXJzZSBpbmRleCBmb3IgdGhlc2UgcHJvcGVydGllcy4gKi9cclxuICAgIERiVGFyZ2V0RG9jdW1lbnQuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCA9IFsncGF0aCcsICd0YXJnZXRJZCddO1xyXG4gICAgcmV0dXJuIERiVGFyZ2V0RG9jdW1lbnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIHJlY29yZCBvZiBnbG9iYWwgc3RhdGUgdHJhY2tlZCBhY3Jvc3MgYWxsIFRhcmdldHMsIHRyYWNrZWQgc2VwYXJhdGVseVxyXG4gKiB0byBhdm9pZCB0aGUgbmVlZCBmb3IgZXh0cmEgaW5kZXhlcy5cclxuICpcclxuICogVGhpcyBzaG91bGQgYmUga2VwdCBpbi1zeW5jIHdpdGggdGhlIHByb3RvIHVzZWQgaW4gdGhlIGlPUyBjbGllbnQuXHJcbiAqL1xyXG52YXIgRGJUYXJnZXRHbG9iYWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYlRhcmdldEdsb2JhbChcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IGlkIGFjcm9zcyBhbGwgdGFyZ2V0cy5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgRGJUYXJnZXQudGFyZ2V0SWQuXHJcbiAgICAgKi9cclxuICAgIGhpZ2hlc3RUYXJnZXRJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBoaWdoZXN0IG51bWJlcmVkIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBhY3Jvc3MgYWxsIHRhcmdldHMuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIERiVGFyZ2V0Lmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlci5cclxuICAgICAqL1xyXG4gICAgaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBnbG9iYWwgc25hcHNob3QgdmVyc2lvbiByZXByZXNlbnRpbmcgdGhlIGxhc3QgY29uc2lzdGVudCBzbmFwc2hvdCB3ZVxyXG4gICAgICogcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZC4gVGhpcyBpcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgYW5kIGFueVxyXG4gICAgICogc25hcHNob3RzIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQgcHJpb3IgdG8gdGhpcyB2ZXJzaW9uIChlLmcuIGZvclxyXG4gICAgICogdGFyZ2V0cyByZXN1bWVkIHdpdGggYSByZXN1bWVUb2tlbikgc2hvdWxkIGJlIHN1cHByZXNzZWQgKGJ1ZmZlcmVkKVxyXG4gICAgICogdW50aWwgdGhlIGJhY2tlbmQgaGFzIGNhdWdodCB1cCB0byB0aGlzIHNuYXBzaG90IHZlcnNpb24gYWdhaW4uIFRoaXNcclxuICAgICAqIHByZXZlbnRzIG91ciBjYWNoZSBmcm9tIGV2ZXIgZ29pbmcgYmFja3dhcmRzIGluIHRpbWUuXHJcbiAgICAgKi9cclxuICAgIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRhcmdldHMgcGVyc2lzdGVkLlxyXG4gICAgICovXHJcbiAgICB0YXJnZXRDb3VudCkge1xyXG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gaGlnaGVzdFRhcmdldElkO1xyXG4gICAgICAgIHRoaXMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgdGhpcy50YXJnZXRDb3VudCA9IHRhcmdldENvdW50O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUga2V5IHN0cmluZyB1c2VkIGZvciB0aGUgc2luZ2xlIG9iamVjdCB0aGF0IGV4aXN0cyBpbiB0aGVcclxuICAgICAqIERiVGFyZ2V0R2xvYmFsIHN0b3JlLlxyXG4gICAgICovXHJcbiAgICBEYlRhcmdldEdsb2JhbC5rZXkgPSAndGFyZ2V0R2xvYmFsS2V5JztcclxuICAgIERiVGFyZ2V0R2xvYmFsLnN0b3JlID0gJ3RhcmdldEdsb2JhbCc7XHJcbiAgICByZXR1cm4gRGJUYXJnZXRHbG9iYWw7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFzc29jaWF0aW9uIGJldHdlZW4gYSBDb2xsZWN0aW9uIGlkIChlLmcuICdtZXNzYWdlcycpXHJcbiAqIHRvIGEgcGFyZW50IHBhdGggKGUuZy4gJy9jaGF0cy8xMjMnKSB0aGF0IGNvbnRhaW5zIGl0IGFzIGEgKHN1Yiljb2xsZWN0aW9uLlxyXG4gKiBUaGlzIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgZmluZCBhbGwgY29sbGVjdGlvbnMgdG8gcXVlcnkgd2hlbiBwZXJmb3JtaW5nXHJcbiAqIGEgQ29sbGVjdGlvbiBHcm91cCBxdWVyeS5cclxuICovXHJcbnZhciBEYkNvbGxlY3Rpb25QYXJlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYkNvbGxlY3Rpb25QYXJlbnQoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb2xsZWN0aW9uSWQgKGUuZy4gJ21lc3NhZ2VzJylcclxuICAgICAqL1xyXG4gICAgY29sbGVjdGlvbklkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHBhdGggdG8gdGhlIHBhcmVudCAoZWl0aGVyIGEgZG9jdW1lbnQgbG9jYXRpb24gb3IgYW4gZW1wdHkgcGF0aCBmb3JcclxuICAgICAqIGEgcm9vdC1sZXZlbCBjb2xsZWN0aW9uKS5cclxuICAgICAqL1xyXG4gICAgcGFyZW50KSB7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uSWQgPSBjb2xsZWN0aW9uSWQ7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICB9XHJcbiAgICAvKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi9cclxuICAgIERiQ29sbGVjdGlvblBhcmVudC5zdG9yZSA9ICdjb2xsZWN0aW9uUGFyZW50cyc7XHJcbiAgICAvKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIGNvbGxlY3Rpb25JZCwgcGFyZW50IHByb3BlcnRpZXMuICovXHJcbiAgICBEYkNvbGxlY3Rpb25QYXJlbnQua2V5UGF0aCA9IFsnY29sbGVjdGlvbklkJywgJ3BhcmVudCddO1xyXG4gICAgcmV0dXJuIERiQ29sbGVjdGlvblBhcmVudDtcclxufSgpKTtcclxuZnVuY3Rpb24gY3JlYXRlUXVlcnlDYWNoZShkYikge1xyXG4gICAgdmFyIHRhcmdldERvY3VtZW50c1N0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJUYXJnZXREb2N1bWVudC5zdG9yZSwge1xyXG4gICAgICAgIGtleVBhdGg6IERiVGFyZ2V0RG9jdW1lbnQua2V5UGF0aFxyXG4gICAgfSk7XHJcbiAgICB0YXJnZXREb2N1bWVudHNTdG9yZS5jcmVhdGVJbmRleChEYlRhcmdldERvY3VtZW50LmRvY3VtZW50VGFyZ2V0c0luZGV4LCBEYlRhcmdldERvY3VtZW50LmRvY3VtZW50VGFyZ2V0c0tleVBhdGgsIHsgdW5pcXVlOiB0cnVlIH0pO1xyXG4gICAgdmFyIHRhcmdldFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUoRGJUYXJnZXQuc3RvcmUsIHtcclxuICAgICAgICBrZXlQYXRoOiBEYlRhcmdldC5rZXlQYXRoXHJcbiAgICB9KTtcclxuICAgIC8vIE5PVEU6IFRoaXMgaXMgdW5pcXVlIG9ubHkgYmVjYXVzZSB0aGUgVGFyZ2V0SWQgaXMgdGhlIHN1ZmZpeC5cclxuICAgIHRhcmdldFN0b3JlLmNyZWF0ZUluZGV4KERiVGFyZ2V0LnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSwgRGJUYXJnZXQucXVlcnlUYXJnZXRzS2V5UGF0aCwgeyB1bmlxdWU6IHRydWUgfSk7XHJcbiAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShEYlRhcmdldEdsb2JhbC5zdG9yZSk7XHJcbn1cclxuZnVuY3Rpb24gZHJvcFF1ZXJ5Q2FjaGUoZGIpIHtcclxuICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKERiVGFyZ2V0RG9jdW1lbnQuc3RvcmUpO1xyXG4gICAgZGIuZGVsZXRlT2JqZWN0U3RvcmUoRGJUYXJnZXQuc3RvcmUpO1xyXG4gICAgZGIuZGVsZXRlT2JqZWN0U3RvcmUoRGJUYXJnZXRHbG9iYWwuc3RvcmUpO1xyXG59XHJcbmZ1bmN0aW9uIGRyb3BSZW1vdGVEb2N1bWVudENoYW5nZXNTdG9yZShkYikge1xyXG4gICAgaWYgKGRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoJ3JlbW90ZURvY3VtZW50Q2hhbmdlcycpKSB7XHJcbiAgICAgICAgZGIuZGVsZXRlT2JqZWN0U3RvcmUoJ3JlbW90ZURvY3VtZW50Q2hhbmdlcycpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIHRoZSB0YXJnZXQgZ2xvYmFsIHNpbmdsZXRvbiByb3cuXHJcbiAqXHJcbiAqIEBwYXJhbSB7SURCVHJhbnNhY3Rpb259IHR4biBUaGUgdmVyc2lvbiB1cGdyYWRlIHRyYW5zYWN0aW9uIGZvciBpbmRleGVkZGJcclxuICovXHJcbmZ1bmN0aW9uIHdyaXRlRW1wdHlUYXJnZXRHbG9iYWxFbnRyeSh0eG4pIHtcclxuICAgIHZhciBnbG9iYWxTdG9yZSA9IHR4bi5zdG9yZShEYlRhcmdldEdsb2JhbC5zdG9yZSk7XHJcbiAgICB2YXIgbWV0YWRhdGEgPSBuZXcgRGJUYXJnZXRHbG9iYWwoXHJcbiAgICAvKmhpZ2hlc3RUYXJnZXRJZD0qLyAwLCBcclxuICAgIC8qbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyPSovIDAsIFNuYXBzaG90VmVyc2lvbi5NSU4udG9UaW1lc3RhbXAoKSwgXHJcbiAgICAvKnRhcmdldENvdW50PSovIDApO1xyXG4gICAgcmV0dXJuIGdsb2JhbFN0b3JlLnB1dChEYlRhcmdldEdsb2JhbC5rZXksIG1ldGFkYXRhKTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBpbmRpY2VzIG9uIHRoZSBSZW1vdGVEb2N1bWVudHMgc3RvcmUgdXNlZCBmb3IgYm90aCBtdWx0aS10YWJcclxuICogYW5kIEluZGV4LUZyZWUgcXVlcmllcy5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVJlbW90ZURvY3VtZW50UmVhZFRpbWVJbmRleCh0eG4pIHtcclxuICAgIHZhciByZW1vdGVEb2N1bWVudFN0b3JlID0gdHhuLm9iamVjdFN0b3JlKERiUmVtb3RlRG9jdW1lbnQuc3RvcmUpO1xyXG4gICAgcmVtb3RlRG9jdW1lbnRTdG9yZS5jcmVhdGVJbmRleChEYlJlbW90ZURvY3VtZW50LnJlYWRUaW1lSW5kZXgsIERiUmVtb3RlRG9jdW1lbnQucmVhZFRpbWVJbmRleFBhdGgsIHsgdW5pcXVlOiBmYWxzZSB9KTtcclxuICAgIHJlbW90ZURvY3VtZW50U3RvcmUuY3JlYXRlSW5kZXgoRGJSZW1vdGVEb2N1bWVudC5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleCwgRGJSZW1vdGVEb2N1bWVudC5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGgsIHsgdW5pcXVlOiBmYWxzZSB9KTtcclxufVxyXG4vKipcclxuICogQSByZWNvcmQgb2YgdGhlIG1ldGFkYXRhIHN0YXRlIG9mIGVhY2ggY2xpZW50LlxyXG4gKlxyXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgdXNlZCB0byBzeW5jaHJvbml6ZSBtdWx0aS10YWIgc3RhdGUgYW5kIGRvZXMgbm90IG5lZWRcclxuICogdG8gYmUgcG9ydGVkIHRvIGlPUyBvciBBbmRyb2lkLlxyXG4gKi9cclxudmFyIERiQ2xpZW50TWV0YWRhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYkNsaWVudE1ldGFkYXRhKFxyXG4gICAgLy8gTm90ZTogUHJldmlvdXMgc2NoZW1hIHZlcnNpb25zIGluY2x1ZGVkIGEgZmllbGRcclxuICAgIC8vIFwibGFzdFByb2Nlc3NlZERvY3VtZW50Q2hhbmdlSWRcIi4gRG9uJ3QgdXNlIGFueW1vcmUuXHJcbiAgICAvKiogVGhlIGF1dG8tZ2VuZXJhdGVkIGNsaWVudCBpZCBhc3NpZ25lZCBhdCBjbGllbnQgc3RhcnR1cC4gKi9cclxuICAgIGNsaWVudElkLCBcclxuICAgIC8qKiBUaGUgbGFzdCB0aW1lIHRoaXMgc3RhdGUgd2FzIHVwZGF0ZWQuICovXHJcbiAgICB1cGRhdGVUaW1lTXMsIFxyXG4gICAgLyoqIFdoZXRoZXIgdGhlIGNsaWVudCdzIG5ldHdvcmsgY29ubmVjdGlvbiBpcyBlbmFibGVkLiAqL1xyXG4gICAgbmV0d29ya0VuYWJsZWQsIFxyXG4gICAgLyoqIFdoZXRoZXIgdGhpcyBjbGllbnQgaXMgcnVubmluZyBpbiBhIGZvcmVncm91bmQgdGFiLiAqL1xyXG4gICAgaW5Gb3JlZ3JvdW5kKSB7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVGltZU1zID0gdXBkYXRlVGltZU1zO1xyXG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSBuZXR3b3JrRW5hYmxlZDtcclxuICAgICAgICB0aGlzLmluRm9yZWdyb3VuZCA9IGluRm9yZWdyb3VuZDtcclxuICAgIH1cclxuICAgIC8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqL1xyXG4gICAgRGJDbGllbnRNZXRhZGF0YS5zdG9yZSA9ICdjbGllbnRNZXRhZGF0YSc7XHJcbiAgICAvKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIGNsaWVudElkIHByb3BlcnRpZXMuICovXHJcbiAgICBEYkNsaWVudE1ldGFkYXRhLmtleVBhdGggPSAnY2xpZW50SWQnO1xyXG4gICAgcmV0dXJuIERiQ2xpZW50TWV0YWRhdGE7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZUNsaWVudE1ldGFkYXRhU3RvcmUoZGIpIHtcclxuICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERiQ2xpZW50TWV0YWRhdGEuc3RvcmUsIHtcclxuICAgICAgICBrZXlQYXRoOiBEYkNsaWVudE1ldGFkYXRhLmtleVBhdGhcclxuICAgIH0pO1xyXG59XHJcbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxudmFyIFYxX1NUT1JFUyA9IFtcclxuICAgIERiTXV0YXRpb25RdWV1ZS5zdG9yZSxcclxuICAgIERiTXV0YXRpb25CYXRjaC5zdG9yZSxcclxuICAgIERiRG9jdW1lbnRNdXRhdGlvbi5zdG9yZSxcclxuICAgIERiUmVtb3RlRG9jdW1lbnQuc3RvcmUsXHJcbiAgICBEYlRhcmdldC5zdG9yZSxcclxuICAgIERiUHJpbWFyeUNsaWVudC5zdG9yZSxcclxuICAgIERiVGFyZ2V0R2xvYmFsLnN0b3JlLFxyXG4gICAgRGJUYXJnZXREb2N1bWVudC5zdG9yZVxyXG5dO1xyXG4vLyBWMiBpcyBubyBsb25nZXIgdXNhYmxlIChzZWUgY29tbWVudCBhdCB0b3Agb2YgZmlsZSlcclxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG52YXIgVjNfU1RPUkVTID0gVjFfU1RPUkVTO1xyXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbi8vIE5vdGU6IERiUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIGlzIG5vIGxvbmdlciB1c2VkIGFuZCBkcm9wcGVkIHdpdGggdjkuXHJcbnZhciBWNF9TVE9SRVMgPSB0c2xpYi5fX3NwcmVhZEFycmF5cyhWM19TVE9SRVMsIFtEYkNsaWVudE1ldGFkYXRhLnN0b3JlXSk7XHJcbi8vIFY1IGRvZXMgbm90IGNoYW5nZSB0aGUgc2V0IG9mIHN0b3Jlcy5cclxudmFyIFY2X1NUT1JFUyA9IHRzbGliLl9fc3ByZWFkQXJyYXlzKFY0X1NUT1JFUywgW0RiUmVtb3RlRG9jdW1lbnRHbG9iYWwuc3RvcmVdKTtcclxuLy8gVjcgZG9lcyBub3QgY2hhbmdlIHRoZSBzZXQgb2Ygc3RvcmVzLlxyXG52YXIgVjhfU1RPUkVTID0gdHNsaWIuX19zcHJlYWRBcnJheXMoVjZfU1RPUkVTLCBbRGJDb2xsZWN0aW9uUGFyZW50LnN0b3JlXSk7XHJcbi8vIFY5IGRvZXMgbm90IGNoYW5nZSB0aGUgc2V0IG9mIHN0b3Jlcy5cclxuLyoqXHJcbiAqIFRoZSBsaXN0IG9mIGFsbCBkZWZhdWx0IEluZGV4ZWREQiBzdG9yZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBTREsuIFRoaXMgaXNcclxuICogdXNlZCB3aGVuIGNyZWF0aW5nIHRyYW5zYWN0aW9ucyBzbyB0aGF0IGFjY2VzcyBhY3Jvc3MgYWxsIHN0b3JlcyBpcyBkb25lXHJcbiAqIGF0b21pY2FsbHkuXHJcbiAqL1xyXG52YXIgQUxMX1NUT1JFUyA9IFY4X1NUT1JFUztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXHJcbiAqL1xyXG52YXIgSW5kZXhlZERiSW5kZXhNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiSW5kZXhNYW5hZ2VyKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGluLW1lbW9yeSBjb3B5IG9mIHRoZSBpbmRleCBlbnRyaWVzIHdlJ3ZlIGFscmVhZHkgd3JpdHRlbiBzaW5jZSB0aGUgU0RLXHJcbiAgICAgICAgICogbGF1bmNoZWQuIFVzZWQgdG8gYXZvaWQgcmUtd3JpdGluZyB0aGUgc2FtZSBlbnRyeSByZXBlYXRlZGx5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhpcyBpcyAqTk9UKiBhIGNvbXBsZXRlIGNhY2hlIG9mIHdoYXQncyBpbiBwZXJzaXN0ZW5jZSBhbmQgc28gY2FuIG5ldmVyIGJlIHVzZWQgdG9cclxuICAgICAgICAgKiBzYXRpc2Z5IHJlYWRzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvblBhcmVudHNDYWNoZSA9IG5ldyBNZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIG5ldyBlbnRyeSB0byB0aGUgY29sbGVjdGlvbiBwYXJlbnQgaW5kZXguXHJcbiAgICAgKlxyXG4gICAgICogUmVwZWF0ZWQgY2FsbHMgZm9yIHRoZSBzYW1lIGNvbGxlY3Rpb25QYXRoIHNob3VsZCBiZSBhdm9pZGVkIHdpdGhpbiBhXHJcbiAgICAgKiB0cmFuc2FjdGlvbiBhcyBJbmRleGVkRGJJbmRleE1hbmFnZXIgb25seSBjYWNoZXMgd3JpdGVzIG9uY2UgYSB0cmFuc2FjdGlvblxyXG4gICAgICogaGFzIGJlZW4gY29tbWl0dGVkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJJbmRleE1hbmFnZXIucHJvdG90eXBlLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBjb2xsZWN0aW9uUGF0aCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KGNvbGxlY3Rpb25QYXRoLmxlbmd0aCAlIDIgPT09IDEsICdFeHBlY3RlZCBhIGNvbGxlY3Rpb24gcGF0aC4nKTtcclxuICAgICAgICBpZiAoIXRoaXMuY29sbGVjdGlvblBhcmVudHNDYWNoZS5oYXMoY29sbGVjdGlvblBhdGgpKSB7XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uSWQgPSBjb2xsZWN0aW9uUGF0aC5sYXN0U2VnbWVudCgpO1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50UGF0aCA9IGNvbGxlY3Rpb25QYXRoLnBvcExhc3QoKTtcclxuICAgICAgICAgICAgdHJhbnNhY3Rpb24uYWRkT25Db21taXR0ZWRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGNvbGxlY3Rpb24gdG8gdGhlIGluIG1lbW9yeSBjYWNoZSBvbmx5IGlmIHRoZSB0cmFuc2FjdGlvbiB3YXNcclxuICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NmdWxseSBjb21taXR0ZWQuXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb2xsZWN0aW9uUGFyZW50c0NhY2hlLmFkZChjb2xsZWN0aW9uUGF0aCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvblBhcmVudCA9IHtcclxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogY29sbGVjdGlvbklkLFxyXG4gICAgICAgICAgICAgICAgcGFyZW50OiBlbmNvZGUocGFyZW50UGF0aClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb25QYXJlbnRzU3RvcmUodHJhbnNhY3Rpb24pLnB1dChjb2xsZWN0aW9uUGFyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiSW5kZXhNYW5hZ2VyLnByb3RvdHlwZS5nZXRDb2xsZWN0aW9uUGFyZW50cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgY29sbGVjdGlvbklkKSB7XHJcbiAgICAgICAgdmFyIHBhcmVudFBhdGhzID0gW107XHJcbiAgICAgICAgdmFyIHJhbmdlID0gSURCS2V5UmFuZ2UuYm91bmQoW2NvbGxlY3Rpb25JZCwgJyddLCBbaW1tZWRpYXRlU3VjY2Vzc29yKGNvbGxlY3Rpb25JZCksICcnXSwgXHJcbiAgICAgICAgLypsb3dlck9wZW49Ki8gZmFsc2UsIFxyXG4gICAgICAgIC8qdXBwZXJPcGVuPSovIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uUGFyZW50c1N0b3JlKHRyYW5zYWN0aW9uKVxyXG4gICAgICAgICAgICAubG9hZEFsbChyYW5nZSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGVudHJpZXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBlbnRyaWVzXzEgPSBlbnRyaWVzOyBfaSA8IGVudHJpZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IGVudHJpZXNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbGxlY3Rpb25JZCBndWFyZCBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5IChhbmQgaXNuJ3QgYXMgbG9uZ1xyXG4gICAgICAgICAgICAgICAgLy8gYXMgd2UncmUgcnVubmluZyBpbiBhIHJlYWwgYnJvd3NlciksIGJ1dCB0aGVyZSdzIGEgYnVnIGluXHJcbiAgICAgICAgICAgICAgICAvLyBpbmRleGVkZGJzaGltIHRoYXQgYnJlYWtzIG91ciByYW5nZSBpbiBvdXIgdGVzdHMgcnVubmluZyBpbiBub2RlOlxyXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltL2lzc3Vlcy8zMzRcclxuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5jb2xsZWN0aW9uSWQgIT09IGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFyZW50UGF0aHMucHVzaChkZWNvZGUoZW50cnkucGFyZW50KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudFBhdGhzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbmRleGVkRGJJbmRleE1hbmFnZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNvbGxlY3Rpb25QYXJlbnRzXHJcbiAqIGRvY3VtZW50IHN0b3JlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29sbGVjdGlvblBhcmVudHNTdG9yZSh0eG4pIHtcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSh0eG4sIERiQ29sbGVjdGlvblBhcmVudC5zdG9yZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBBbiBlbnVtZXJhdGlvbiBvZiB0aGUgZGlmZmVyZW50IHB1cnBvc2VzIHdlIGhhdmUgZm9yIHRhcmdldHMuICovXHJcbnZhciBUYXJnZXRQdXJwb3NlO1xyXG4oZnVuY3Rpb24gKFRhcmdldFB1cnBvc2UpIHtcclxuICAgIC8qKiBBIHJlZ3VsYXIsIG5vcm1hbCBxdWVyeSB0YXJnZXQuICovXHJcbiAgICBUYXJnZXRQdXJwb3NlW1RhcmdldFB1cnBvc2VbXCJMaXN0ZW5cIl0gPSAwXSA9IFwiTGlzdGVuXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBxdWVyeSB0YXJnZXQgd2FzIHVzZWQgdG8gcmVmaWxsIGEgcXVlcnkgYWZ0ZXIgYW4gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0UHVycG9zZVtUYXJnZXRQdXJwb3NlW1wiRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIl0gPSAxXSA9IFwiRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIjtcclxuICAgIC8qKiBUaGUgcXVlcnkgdGFyZ2V0IHdhcyB1c2VkIHRvIHJlc29sdmUgYSBsaW1ibyBkb2N1bWVudC4gKi9cclxuICAgIFRhcmdldFB1cnBvc2VbVGFyZ2V0UHVycG9zZVtcIkxpbWJvUmVzb2x1dGlvblwiXSA9IDJdID0gXCJMaW1ib1Jlc29sdXRpb25cIjtcclxufSkoVGFyZ2V0UHVycG9zZSB8fCAoVGFyZ2V0UHVycG9zZSA9IHt9KSk7XHJcbi8qKlxyXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXHJcbiAqL1xyXG52YXIgVGFyZ2V0RGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRhcmdldERhdGEoXHJcbiAgICAvKiogVGhlIHRhcmdldCBiZWluZyBsaXN0ZW5lZCB0by4gKi9cclxuICAgIHRhcmdldCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0YXJnZXQgSUQgdG8gd2hpY2ggdGhlIHRhcmdldCBjb3JyZXNwb25kczsgQXNzaWduZWQgYnkgdGhlXHJcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxyXG4gICAgICovXHJcbiAgICB0YXJnZXRJZCwgXHJcbiAgICAvKiogVGhlIHB1cnBvc2Ugb2YgdGhlIHRhcmdldC4gKi9cclxuICAgIHB1cnBvc2UsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0IHRyYW5zYWN0aW9uIGR1cmluZyB3aGljaCB0aGlzIHRhcmdldCBkYXRhXHJcbiAgICAgKiB3YXMgbW9kaWZpZWQuXHJcbiAgICAgKi9cclxuICAgIHNlcXVlbmNlTnVtYmVyLCBcclxuICAgIC8qKiBUaGUgbGF0ZXN0IHNuYXBzaG90IHZlcnNpb24gc2VlbiBmb3IgdGhpcyB0YXJnZXQuICovXHJcbiAgICBzbmFwc2hvdFZlcnNpb24sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHZpZXdcclxuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuXHJcbiAgICAgKi9cclxuICAgIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxyXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcclxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cclxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxyXG4gICAgICovXHJcbiAgICByZXN1bWVUb2tlbikge1xyXG4gICAgICAgIGlmIChzbmFwc2hvdFZlcnNpb24gPT09IHZvaWQgMCkgeyBzbmFwc2hvdFZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24uTUlOOyB9XHJcbiAgICAgICAgaWYgKGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPT09IHZvaWQgMCkgeyBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gU25hcHNob3RWZXJzaW9uLk1JTjsgfVxyXG4gICAgICAgIGlmIChyZXN1bWVUb2tlbiA9PT0gdm9pZCAwKSB7IHJlc3VtZVRva2VuID0gZW1wdHlCeXRlU3RyaW5nKCk7IH1cclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgICAgICB0aGlzLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5wdXJwb3NlID0gcHVycG9zZTtcclxuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBzbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gcmVzdW1lVG9rZW47XHJcbiAgICB9XHJcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgc2VxdWVuY2UgbnVtYmVyLiAqL1xyXG4gICAgVGFyZ2V0RGF0YS5wcm90b3R5cGUud2l0aFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHJlc3VtZSB0b2tlbiBhbmRcclxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXHJcbiAgICAgKi9cclxuICAgIFRhcmdldERhdGEucHJvdG90eXBlLndpdGhSZXN1bWVUb2tlbiA9IGZ1bmN0aW9uIChyZXN1bWVUb2tlbiwgc25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIHNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCByZXN1bWVUb2tlbik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBsYXN0IGxpbWJvIGZyZWVcclxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxyXG4gICAgICovXHJcbiAgICBUYXJnZXREYXRhLnByb3RvdHlwZS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IGZ1bmN0aW9uIChsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIHRoaXMuc25hcHNob3RWZXJzaW9uLCBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuKTtcclxuICAgIH07XHJcbiAgICBUYXJnZXREYXRhLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnRhcmdldElkID09PSBvdGhlci50YXJnZXRJZCAmJlxyXG4gICAgICAgICAgICB0aGlzLnB1cnBvc2UgPT09IG90aGVyLnB1cnBvc2UgJiZcclxuICAgICAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlciA9PT0gb3RoZXIuc2VxdWVuY2VOdW1iZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24uaXNFcXVhbChvdGhlci5zbmFwc2hvdFZlcnNpb24pICYmXHJcbiAgICAgICAgICAgIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbi5pc0VxdWFsKG90aGVyLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pICYmXHJcbiAgICAgICAgICAgIHRoaXMucmVzdW1lVG9rZW4gPT09IG90aGVyLnJlc3VtZVRva2VuICYmXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmlzRXF1YWwob3RoZXIudGFyZ2V0KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRhcmdldERhdGE7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogU2VyaWFsaXplciBmb3IgdmFsdWVzIHN0b3JlZCBpbiB0aGUgTG9jYWxTdG9yZS4gKi9cclxudmFyIExvY2FsU2VyaWFsaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExvY2FsU2VyaWFsaXplcihyZW1vdGVTZXJpYWxpemVyKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdGVTZXJpYWxpemVyID0gcmVtb3RlU2VyaWFsaXplcjtcclxuICAgIH1cclxuICAgIC8qKiBEZWNvZGVzIGEgcmVtb3RlIGRvY3VtZW50IGZyb20gc3RvcmFnZSBsb2NhbGx5IHRvIGEgRG9jdW1lbnQuICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EYlJlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKHJlbW90ZURvYykge1xyXG4gICAgICAgIGlmIChyZW1vdGVEb2MuZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlU2VyaWFsaXplci5mcm9tRG9jdW1lbnQocmVtb3RlRG9jLmRvY3VtZW50LCAhIXJlbW90ZURvYy5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyZW1vdGVEb2Mubm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHJlbW90ZURvYy5ub0RvY3VtZW50LnBhdGgpO1xyXG4gICAgICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMuZnJvbURiVGltZXN0YW1wKHJlbW90ZURvYy5ub0RvY3VtZW50LnJlYWRUaW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb0RvY3VtZW50KGtleSwgdmVyc2lvbiwge1xyXG4gICAgICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiAhIXJlbW90ZURvYy5oYXNDb21taXR0ZWRNdXRhdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlbW90ZURvYy51bmtub3duRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhyZW1vdGVEb2MudW5rbm93bkRvY3VtZW50LnBhdGgpO1xyXG4gICAgICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMuZnJvbURiVGltZXN0YW1wKHJlbW90ZURvYy51bmtub3duRG9jdW1lbnQudmVyc2lvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVW5rbm93bkRvY3VtZW50KGtleSwgdmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5leHBlY3RlZCBEYlJlbW90ZURvY3VtZW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUudG9EYlJlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKG1heWJlRG9jLCByZWFkVGltZSkge1xyXG4gICAgICAgIHZhciBkYlJlYWRUaW1lID0gdGhpcy50b0RiVGltZXN0YW1wS2V5KHJlYWRUaW1lKTtcclxuICAgICAgICB2YXIgcGFyZW50UGF0aCA9IG1heWJlRG9jLmtleS5wYXRoLnBvcExhc3QoKS50b0FycmF5KCk7XHJcbiAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGRvYyA9IG1heWJlRG9jLnByb3RvXHJcbiAgICAgICAgICAgICAgICA/IG1heWJlRG9jLnByb3RvXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMucmVtb3RlU2VyaWFsaXplci50b0RvY3VtZW50KG1heWJlRG9jKTtcclxuICAgICAgICAgICAgdmFyIGhhc0NvbW1pdHRlZE11dGF0aW9ucyA9IG1heWJlRG9jLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYlJlbW90ZURvY3VtZW50KFxyXG4gICAgICAgICAgICAvKiB1bmtub3duRG9jdW1lbnQ9ICovIG51bGwsIFxyXG4gICAgICAgICAgICAvKiBub0RvY3VtZW50PSAqLyBudWxsLCBkb2MsIGhhc0NvbW1pdHRlZE11dGF0aW9ucywgZGJSZWFkVGltZSwgcGFyZW50UGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgTm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IG1heWJlRG9jLmtleS5wYXRoLnRvQXJyYXkoKTtcclxuICAgICAgICAgICAgdmFyIHJlYWRUaW1lXzEgPSB0aGlzLnRvRGJUaW1lc3RhbXAobWF5YmVEb2MudmVyc2lvbik7XHJcbiAgICAgICAgICAgIHZhciBoYXNDb21taXR0ZWRNdXRhdGlvbnMgPSBtYXliZURvYy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGJSZW1vdGVEb2N1bWVudChcclxuICAgICAgICAgICAgLyogdW5rbm93bkRvY3VtZW50PSAqLyBudWxsLCBuZXcgRGJOb0RvY3VtZW50KHBhdGgsIHJlYWRUaW1lXzEpLCBcclxuICAgICAgICAgICAgLyogZG9jdW1lbnQ9ICovIG51bGwsIGhhc0NvbW1pdHRlZE11dGF0aW9ucywgZGJSZWFkVGltZSwgcGFyZW50UGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgVW5rbm93bkRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gbWF5YmVEb2Mua2V5LnBhdGgudG9BcnJheSgpO1xyXG4gICAgICAgICAgICB2YXIgcmVhZFRpbWVfMiA9IHRoaXMudG9EYlRpbWVzdGFtcChtYXliZURvYy52ZXJzaW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYlJlbW90ZURvY3VtZW50KG5ldyBEYlVua25vd25Eb2N1bWVudChwYXRoLCByZWFkVGltZV8yKSwgXHJcbiAgICAgICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIFxyXG4gICAgICAgICAgICAvKiBkb2N1bWVudD0gKi8gbnVsbCwgXHJcbiAgICAgICAgICAgIC8qIGhhc0NvbW1pdHRlZE11dGF0aW9ucz0gKi8gdHJ1ZSwgZGJSZWFkVGltZSwgcGFyZW50UGF0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5leHBlY3RlZCBNYXliZURvY3VtZW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUudG9EYlRpbWVzdGFtcEtleSA9IGZ1bmN0aW9uIChzbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICB2YXIgdGltZXN0YW1wID0gc25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCk7XHJcbiAgICAgICAgcmV0dXJuIFt0aW1lc3RhbXAuc2Vjb25kcywgdGltZXN0YW1wLm5hbm9zZWNvbmRzXTtcclxuICAgIH07XHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21EYlRpbWVzdGFtcEtleSA9IGZ1bmN0aW9uIChkYlRpbWVzdGFtcEtleSkge1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBuZXcgVGltZXN0YW1wKGRiVGltZXN0YW1wS2V5WzBdLCBkYlRpbWVzdGFtcEtleVsxXSk7XHJcbiAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5mcm9tVGltZXN0YW1wKHRpbWVzdGFtcCk7XHJcbiAgICB9O1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS50b0RiVGltZXN0YW1wID0gZnVuY3Rpb24gKHNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSBzbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKTtcclxuICAgICAgICByZXR1cm4gbmV3IERiVGltZXN0YW1wKHRpbWVzdGFtcC5zZWNvbmRzLCB0aW1lc3RhbXAubmFub3NlY29uZHMpO1xyXG4gICAgfTtcclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURiVGltZXN0YW1wID0gZnVuY3Rpb24gKGRiVGltZXN0YW1wKSB7XHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IG5ldyBUaW1lc3RhbXAoZGJUaW1lc3RhbXAuc2Vjb25kcywgZGJUaW1lc3RhbXAubmFub3NlY29uZHMpO1xyXG4gICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCh0aW1lc3RhbXApO1xyXG4gICAgfTtcclxuICAgIC8qKiBFbmNvZGVzIGEgYmF0Y2ggb2YgbXV0YXRpb25zIGludG8gYSBEYk11dGF0aW9uQmF0Y2ggZm9yIGxvY2FsIHN0b3JhZ2UuICovXHJcbiAgICBMb2NhbFNlcmlhbGl6ZXIucHJvdG90eXBlLnRvRGJNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKHVzZXJJZCwgYmF0Y2gpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzZXJpYWxpemVkQmFzZU11dGF0aW9ucyA9IGJhdGNoLmJhc2VNdXRhdGlvbnMubWFwKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdGVTZXJpYWxpemVyLnRvTXV0YXRpb24obSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHNlcmlhbGl6ZWRNdXRhdGlvbnMgPSBiYXRjaC5tdXRhdGlvbnMubWFwKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdGVTZXJpYWxpemVyLnRvTXV0YXRpb24obSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYk11dGF0aW9uQmF0Y2godXNlcklkLCBiYXRjaC5iYXRjaElkLCBiYXRjaC5sb2NhbFdyaXRlVGltZS50b01pbGxpcygpLCBzZXJpYWxpemVkQmFzZU11dGF0aW9ucywgc2VyaWFsaXplZE11dGF0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIERlY29kZXMgYSBEYk11dGF0aW9uQmF0Y2ggaW50byBhIE11dGF0aW9uQmF0Y2ggKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURiTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uIChkYkJhdGNoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYmFzZU11dGF0aW9ucyA9IChkYkJhdGNoLmJhc2VNdXRhdGlvbnMgfHwgW10pLm1hcChmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3RlU2VyaWFsaXplci5mcm9tTXV0YXRpb24obSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG11dGF0aW9ucyA9IGRiQmF0Y2gubXV0YXRpb25zLm1hcChmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3RlU2VyaWFsaXplci5mcm9tTXV0YXRpb24obSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IFRpbWVzdGFtcC5mcm9tTWlsbGlzKGRiQmF0Y2gubG9jYWxXcml0ZVRpbWVNcyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbkJhdGNoKGRiQmF0Y2guYmF0Y2hJZCwgdGltZXN0YW1wLCBiYXNlTXV0YXRpb25zLCBtdXRhdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIC8qXHJcbiAgICAgKiBFbmNvZGVzIGEgc2V0IG9mIGRvY3VtZW50IGtleXMgaW50byBhbiBhcnJheSBvZiBFbmNvZGVkUmVzb3VyY2VQYXRocy5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS50b0RiUmVzb3VyY2VQYXRocyA9IGZ1bmN0aW9uIChrZXlzKSB7XHJcbiAgICAgICAgdmFyIGVuY29kZWRLZXlzID0gW107XHJcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgZW5jb2RlZEtleXMucHVzaChlbmNvZGUoa2V5LnBhdGgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZW5jb2RlZEtleXM7XHJcbiAgICB9O1xyXG4gICAgLyoqIERlY29kZXMgYW4gYXJyYXkgb2YgRW5jb2RlZFJlc291cmNlUGF0aHMgaW50byBhIHNldCBvZiBkb2N1bWVudCBrZXlzLiAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRGJSZXNvdXJjZVBhdGhzID0gZnVuY3Rpb24gKGVuY29kZWRQYXRocykge1xyXG4gICAgICAgIHZhciBrZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGVuY29kZWRQYXRoc18xID0gZW5jb2RlZFBhdGhzOyBfaSA8IGVuY29kZWRQYXRoc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZG9jdW1lbnRLZXkgPSBlbmNvZGVkUGF0aHNfMVtfaV07XHJcbiAgICAgICAgICAgIGtleXMgPSBrZXlzLmFkZChuZXcgRG9jdW1lbnRLZXkoZGVjb2RlKGRvY3VtZW50S2V5KSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH07XHJcbiAgICAvKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqL1xyXG4gICAgTG9jYWxTZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRGJUYXJnZXQgPSBmdW5jdGlvbiAoZGJUYXJnZXQpIHtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMuZnJvbURiVGltZXN0YW1wKGRiVGFyZ2V0LnJlYWRUaW1lKTtcclxuICAgICAgICB2YXIgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IGRiVGFyZ2V0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IHRoaXMuZnJvbURiVGltZXN0YW1wKGRiVGFyZ2V0Lmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pXHJcbiAgICAgICAgICAgIDogU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICAvLyBUT0RPKGIvMTQwNTczNDg2KTogQ29udmVydCB0byBwbGF0Zm9ybSByZXByZXNlbnRhdGlvblxyXG4gICAgICAgIHZhciByZXN1bWVUb2tlbiA9IGRiVGFyZ2V0LnJlc3VtZVRva2VuO1xyXG4gICAgICAgIHZhciB0YXJnZXQ7XHJcbiAgICAgICAgaWYgKGlzRG9jdW1lbnRRdWVyeShkYlRhcmdldC5xdWVyeSkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5yZW1vdGVTZXJpYWxpemVyLmZyb21Eb2N1bWVudHNUYXJnZXQoZGJUYXJnZXQucXVlcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5yZW1vdGVTZXJpYWxpemVyLmZyb21RdWVyeVRhcmdldChkYlRhcmdldC5xdWVyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0YXJnZXQsIGRiVGFyZ2V0LnRhcmdldElkLCBUYXJnZXRQdXJwb3NlLkxpc3RlbiwgZGJUYXJnZXQubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLCB2ZXJzaW9uLCBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCByZXN1bWVUb2tlbik7XHJcbiAgICB9O1xyXG4gICAgLyoqIEVuY29kZXMgVGFyZ2V0RGF0YSBpbnRvIGEgRGJUYXJnZXQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi9cclxuICAgIExvY2FsU2VyaWFsaXplci5wcm90b3R5cGUudG9EYlRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgYXNzZXJ0KFRhcmdldFB1cnBvc2UuTGlzdGVuID09PSB0YXJnZXREYXRhLnB1cnBvc2UsICdPbmx5IHF1ZXJpZXMgd2l0aCBwdXJwb3NlICcgK1xyXG4gICAgICAgICAgICBUYXJnZXRQdXJwb3NlLkxpc3RlbiArXHJcbiAgICAgICAgICAgICcgbWF5IGJlIHN0b3JlZCwgZ290ICcgK1xyXG4gICAgICAgICAgICB0YXJnZXREYXRhLnB1cnBvc2UpO1xyXG4gICAgICAgIHZhciBkYlRpbWVzdGFtcCA9IHRoaXMudG9EYlRpbWVzdGFtcCh0YXJnZXREYXRhLnNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgdmFyIGRiTGFzdExpbWJvRnJlZVRpbWVzdGFtcCA9IHRoaXMudG9EYlRpbWVzdGFtcCh0YXJnZXREYXRhLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pO1xyXG4gICAgICAgIHZhciBxdWVyeVByb3RvO1xyXG4gICAgICAgIGlmICh0YXJnZXREYXRhLnRhcmdldC5pc0RvY3VtZW50UXVlcnkoKSkge1xyXG4gICAgICAgICAgICBxdWVyeVByb3RvID0gdGhpcy5yZW1vdGVTZXJpYWxpemVyLnRvRG9jdW1lbnRzVGFyZ2V0KHRhcmdldERhdGEudGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UHJvdG8gPSB0aGlzLnJlbW90ZVNlcmlhbGl6ZXIudG9RdWVyeVRhcmdldCh0YXJnZXREYXRhLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByZXN1bWVUb2tlbjtcclxuICAgICAgICBpZiAodGFyZ2V0RGF0YS5yZXN1bWVUb2tlbiBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyhiLzc4NzcxNDAzKTogQ29udmVydCB0b2tlbnMgdG8gc3RyaW5ncyBkdXJpbmcgZGVzZXJpYWxpemF0aW9uXHJcbiAgICAgICAgICAgIGFzc2VydChTaW1wbGVEYi5pc01vY2tQZXJzaXN0ZW5jZSgpLCAnUGVyc2lzdGluZyBub24tc3RyaW5nIHN0cmVhbSB0b2tlbnMgaXMgb25seSBzdXBwb3J0ZWQgd2l0aCBtb2NrIHBlcnNpc3RlbmNlIC4nKTtcclxuICAgICAgICAgICAgcmVzdW1lVG9rZW4gPSB0YXJnZXREYXRhLnJlc3VtZVRva2VuLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bWVUb2tlbiA9IHRhcmdldERhdGEucmVzdW1lVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyBhbHdheXMgMCB1bnRpbCB3ZSBkbyByZWFsIEdDLlxyXG4gICAgICAgIHJldHVybiBuZXcgRGJUYXJnZXQodGFyZ2V0RGF0YS50YXJnZXRJZCwgdGFyZ2V0RGF0YS50YXJnZXQuY2Fub25pY2FsSWQoKSwgZGJUaW1lc3RhbXAsIHJlc3VtZVRva2VuLCB0YXJnZXREYXRhLnNlcXVlbmNlTnVtYmVyLCBkYkxhc3RMaW1ib0ZyZWVUaW1lc3RhbXAsIHF1ZXJ5UHJvdG8pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMb2NhbFNlcmlhbGl6ZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZmlndXJpbmcgb3V0IHdoYXQga2luZCBvZiBxdWVyeSBoYXMgYmVlbiBzdG9yZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0RvY3VtZW50UXVlcnkoZGJRdWVyeSkge1xyXG4gICAgcmV0dXJuIGRiUXVlcnkuZG9jdW1lbnRzICE9PSB1bmRlZmluZWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGJ1ZmZlckVudHJ5Q29tcGFyYXRvcihfYSwgX2IpIHtcclxuICAgIHZhciBhU2VxdWVuY2UgPSBfYVswXSwgYUluZGV4ID0gX2FbMV07XHJcbiAgICB2YXIgYlNlcXVlbmNlID0gX2JbMF0sIGJJbmRleCA9IF9iWzFdO1xyXG4gICAgdmFyIHNlcUNtcCA9IHByaW1pdGl2ZUNvbXBhcmF0b3IoYVNlcXVlbmNlLCBiU2VxdWVuY2UpO1xyXG4gICAgaWYgKHNlcUNtcCA9PT0gMCkge1xyXG4gICAgICAgIC8vIFRoaXMgb3JkZXIgZG9lc24ndCBtYXR0ZXIsIGJ1dCB3ZSBjYW4gYmlhcyBhZ2FpbnN0IGNodXJuIGJ5IHNvcnRpbmdcclxuICAgICAgICAvLyBlbnRyaWVzIGNyZWF0ZWQgZWFybGllciBhcyBsZXNzIHRoYW4gbmV3ZXIgZW50cmllcy5cclxuICAgICAgICByZXR1cm4gcHJpbWl0aXZlQ29tcGFyYXRvcihhSW5kZXgsIGJJbmRleCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VxQ21wO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVc2VkIHRvIGNhbGN1bGF0ZSB0aGUgbnRoIHNlcXVlbmNlIG51bWJlci4gS2VlcHMgYSByb2xsaW5nIGJ1ZmZlciBvZiB0aGVcclxuICogbG93ZXN0IG4gdmFsdWVzIHBhc3NlZCB0byBgYWRkRWxlbWVudGAsIGFuZCBmaW5hbGx5IHJlcG9ydHMgdGhlIGxhcmdlc3Qgb2ZcclxuICogdGhlbSBpbiBgbWF4VmFsdWVgLlxyXG4gKi9cclxudmFyIFJvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlcihtYXhFbGVtZW50cykge1xyXG4gICAgICAgIHRoaXMubWF4RWxlbWVudHMgPSBtYXhFbGVtZW50cztcclxuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBTb3J0ZWRTZXQoYnVmZmVyRW50cnlDb21wYXJhdG9yKTtcclxuICAgICAgICB0aGlzLnByZXZpb3VzSW5kZXggPSAwO1xyXG4gICAgfVxyXG4gICAgUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyLnByb3RvdHlwZS5uZXh0SW5kZXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICsrdGhpcy5wcmV2aW91c0luZGV4O1xyXG4gICAgfTtcclxuICAgIFJvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlci5wcm90b3R5cGUuYWRkRWxlbWVudCA9IGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgIHZhciBlbnRyeSA9IFtzZXF1ZW5jZU51bWJlciwgdGhpcy5uZXh0SW5kZXgoKV07XHJcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnNpemUgPCB0aGlzLm1heEVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuYWRkKGVudHJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBoaWdoZXN0VmFsdWUgPSB0aGlzLmJ1ZmZlci5sYXN0KCk7XHJcbiAgICAgICAgICAgIGlmIChidWZmZXJFbnRyeUNvbXBhcmF0b3IoZW50cnksIGhpZ2hlc3RWYWx1ZSkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmRlbGV0ZShoaWdoZXN0VmFsdWUpLmFkZChlbnRyeSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJvbGxpbmdTZXF1ZW5jZU51bWJlckJ1ZmZlci5wcm90b3R5cGUsIFwibWF4VmFsdWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBHdWFyYW50ZWVkIHRvIGJlIG5vbi1lbXB0eS4gSWYgd2UgZGVjaWRlIHdlIGFyZSBub3QgY29sbGVjdGluZyBhbnlcclxuICAgICAgICAgICAgLy8gc2VxdWVuY2UgbnVtYmVycywgbnRoU2VxdWVuY2VOdW1iZXIgYmVsb3cgc2hvcnQtY2lyY3VpdHMuIElmIHdlIGhhdmVcclxuICAgICAgICAgICAgLy8gZGVjaWRlZCB0aGF0IHdlIGFyZSBjb2xsZWN0aW5nIG4gc2VxdWVuY2UgbnVtYmVycywgaXQncyBiZWNhdXNlIG4gaXMgc29tZVxyXG4gICAgICAgICAgICAvLyBwZXJjZW50YWdlIG9mIHRoZSBleGlzdGluZyBzZXF1ZW5jZSBudW1iZXJzLiBUaGF0IG1lYW5zIHdlIHNob3VsZCBuZXZlclxyXG4gICAgICAgICAgICAvLyBiZSBpbiBhIHNpdHVhdGlvbiB3aGVyZSB3ZSBhcmUgY29sbGVjdGluZyBzZXF1ZW5jZSBudW1iZXJzIGJ1dCBkb24ndFxyXG4gICAgICAgICAgICAvLyBhY3R1YWxseSBoYXZlIGFueS5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxhc3QoKVswXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBSb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXI7XHJcbn0oKSk7XHJcbnZhciBHQ19ESURfTk9UX1JVTiA9IHtcclxuICAgIGRpZFJ1bjogZmFsc2UsXHJcbiAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IDAsXHJcbiAgICB0YXJnZXRzUmVtb3ZlZDogMCxcclxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcclxufTtcclxudmFyIExydVBhcmFtcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExydVBhcmFtcyhcclxuICAgIC8vIFdoZW4gd2UgYXR0ZW1wdCB0byBjb2xsZWN0LCB3ZSB3aWxsIG9ubHkgZG8gc28gaWYgdGhlIGNhY2hlIHNpemUgaXMgZ3JlYXRlciB0aGFuIHRoaXNcclxuICAgIC8vIHRocmVzaG9sZC4gUGFzc2luZyBgQ09MTEVDVElPTl9ESVNBQkxFRGAgaGVyZSB3aWxsIGNhdXNlIGNvbGxlY3Rpb24gdG8gYWx3YXlzIGJlIHNraXBwZWQuXHJcbiAgICBjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkLCBcclxuICAgIC8vIFRoZSBwZXJjZW50YWdlIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3ZSB3aWxsIGF0dGVtcHQgdG8gY29sbGVjdFxyXG4gICAgcGVyY2VudGlsZVRvQ29sbGVjdCwgXHJcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xyXG4gICAgLy8gdXMgZnJvbSBjb2xsZWN0aW5nIGEgaHVnZSBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyBpZiB0aGUgY2FjaGUgaGFzIGdyb3duIHZlcnkgbGFyZ2UuXHJcbiAgICBtYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZDtcclxuICAgICAgICB0aGlzLnBlcmNlbnRpbGVUb0NvbGxlY3QgPSBwZXJjZW50aWxlVG9Db2xsZWN0O1xyXG4gICAgICAgIHRoaXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IG1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3Q7XHJcbiAgICB9XHJcbiAgICBMcnVQYXJhbXMud2l0aENhY2hlU2l6ZSA9IGZ1bmN0aW9uIChjYWNoZVNpemUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IExydVBhcmFtcyhjYWNoZVNpemUsIExydVBhcmFtcy5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgTHJ1UGFyYW1zLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCk7XHJcbiAgICB9O1xyXG4gICAgTHJ1UGFyYW1zLkNPTExFQ1RJT05fRElTQUJMRUQgPSAtMTtcclxuICAgIExydVBhcmFtcy5NSU5JTVVNX0NBQ0hFX1NJWkVfQllURVMgPSAxICogMTAyNCAqIDEwMjQ7XHJcbiAgICBMcnVQYXJhbXMuREVGQVVMVF9DQUNIRV9TSVpFX0JZVEVTID0gNDAgKiAxMDI0ICogMTAyNDtcclxuICAgIExydVBhcmFtcy5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSA9IDEwO1xyXG4gICAgTHJ1UGFyYW1zLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCA9IDEwMDA7XHJcbiAgICBMcnVQYXJhbXMuREVGQVVMVCA9IG5ldyBMcnVQYXJhbXMoTHJ1UGFyYW1zLkRFRkFVTFRfQ0FDSEVfU0laRV9CWVRFUywgTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBMcnVQYXJhbXMuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcclxuICAgIExydVBhcmFtcy5ESVNBQkxFRCA9IG5ldyBMcnVQYXJhbXMoTHJ1UGFyYW1zLkNPTExFQ1RJT05fRElTQUJMRUQsIDAsIDApO1xyXG4gICAgcmV0dXJuIExydVBhcmFtcztcclxufSgpKTtcclxuLyoqIEhvdyBsb25nIHdlIHdhaXQgdG8gdHJ5IHJ1bm5pbmcgTFJVIEdDIGFmdGVyIFNESyBpbml0aWFsaXphdGlvbi4gKi9cclxudmFyIElOSVRJQUxfR0NfREVMQVlfTVMgPSAxICogNjAgKiAxMDAwO1xyXG4vKiogTWluaW11bSBhbW91bnQgb2YgdGltZSBiZXR3ZWVuIEdDIGNoZWNrcywgYWZ0ZXIgdGhlIGZpcnN0IG9uZS4gKi9cclxudmFyIFJFR1VMQVJfR0NfREVMQVlfTVMgPSA1ICogNjAgKiAxMDAwO1xyXG4vKipcclxuICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gSXQgaGFuZGxlcyBjaGVja2luZ1xyXG4gKiB3aGV0aGVyIG9yIG5vdCBHQyBpcyBlbmFibGVkLCBhcyB3ZWxsIGFzIHdoaWNoIGRlbGF5IHRvIHVzZSBiZWZvcmUgdGhlIG5leHQgcnVuLlxyXG4gKi9cclxudmFyIExydVNjaGVkdWxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExydVNjaGVkdWxlcihnYXJiYWdlQ29sbGVjdG9yLCBhc3luY1F1ZXVlLCBsb2NhbFN0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gZ2FyYmFnZUNvbGxlY3RvcjtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBhc3luY1F1ZXVlO1xyXG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IGxvY2FsU3RvcmU7XHJcbiAgICAgICAgdGhpcy5oYXNSdW4gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmdjVGFzayA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBMcnVTY2hlZHVsZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmdjVGFzayA9PT0gbnVsbCwgJ0Nhbm5vdCBzdGFydCBhbiBhbHJlYWR5IHN0YXJ0ZWQgTHJ1U2NoZWR1bGVyJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2FyYmFnZUNvbGxlY3Rvci5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCAhPT1cclxuICAgICAgICAgICAgTHJ1UGFyYW1zLkNPTExFQ1RJT05fRElTQUJMRUQpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUdDKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExydVNjaGVkdWxlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5nY1Rhc2spIHtcclxuICAgICAgICAgICAgdGhpcy5nY1Rhc2suY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2NUYXNrID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KExydVNjaGVkdWxlci5wcm90b3R5cGUsIFwic3RhcnRlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdjVGFzayAhPT0gbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIExydVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVHQyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmdjVGFzayA9PT0gbnVsbCwgJ0Nhbm5vdCBzY2hlZHVsZSBHQyB3aGlsZSBhIHRhc2sgaXMgcGVuZGluZycpO1xyXG4gICAgICAgIHZhciBkZWxheSA9IHRoaXMuaGFzUnVuID8gUkVHVUxBUl9HQ19ERUxBWV9NUyA6IElOSVRJQUxfR0NfREVMQVlfTVM7XHJcbiAgICAgICAgZGVidWcoJ0xydUdhcmJhZ2VDb2xsZWN0b3InLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBzY2hlZHVsZWQgaW4gXCIgKyBkZWxheSArIFwibXNcIik7XHJcbiAgICAgICAgdGhpcy5nY1Rhc2sgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoVGltZXJJZC5McnVHYXJiYWdlQ29sbGVjdGlvbiwgZGVsYXksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZ2NUYXNrID0gbnVsbDtcclxuICAgICAgICAgICAgX3RoaXMuaGFzUnVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsU3RvcmVcclxuICAgICAgICAgICAgICAgIC5jb2xsZWN0R2FyYmFnZShfdGhpcy5nYXJiYWdlQ29sbGVjdG9yKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2NoZWR1bGVHQygpOyB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExydVNjaGVkdWxlcjtcclxufSgpKTtcclxuLyoqIEltcGxlbWVudHMgdGhlIHN0ZXBzIGZvciBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiAqL1xyXG52YXIgTHJ1R2FyYmFnZUNvbGxlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExydUdhcmJhZ2VDb2xsZWN0b3IoZGVsZWdhdGUsIHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuICAgIC8qKiBHaXZlbiBhIHBlcmNlbnRpbGUgb2YgdGFyZ2V0IHRvIGNvbGxlY3QsIHJldHVybnMgdGhlIG51bWJlciBvZiB0YXJnZXRzIHRvIGNvbGxlY3QuICovXHJcbiAgICBMcnVHYXJiYWdlQ29sbGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVUYXJnZXRDb3VudCA9IGZ1bmN0aW9uICh0eG4sIHBlcmNlbnRpbGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5nZXRTZXF1ZW5jZU51bWJlckNvdW50KHR4bikubmV4dChmdW5jdGlvbiAodGFyZ2V0Q291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHBlcmNlbnRpbGUgLyAxMDAuMCkgKiB0YXJnZXRDb3VudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIsIGNvdW50aW5nIGluIG9yZGVyIGZyb20gdGhlIHNtYWxsZXN0LiAqL1xyXG4gICAgTHJ1R2FyYmFnZUNvbGxlY3Rvci5wcm90b3R5cGUubnRoU2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAodHhuLCBuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAobiA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoTGlzdGVuU2VxdWVuY2UuSU5WQUxJRCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBidWZmZXIgPSBuZXcgUm9sbGluZ1NlcXVlbmNlTnVtYmVyQnVmZmVyKG4pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlXHJcbiAgICAgICAgICAgIC5mb3JFYWNoVGFyZ2V0KHR4biwgZnVuY3Rpb24gKHRhcmdldCkgeyByZXR1cm4gYnVmZmVyLmFkZEVsZW1lbnQodGFyZ2V0LnNlcXVlbmNlTnVtYmVyKTsgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZGVsZWdhdGUuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnRTZXF1ZW5jZU51bWJlcih0eG4sIGZ1bmN0aW9uIChzZXF1ZW5jZU51bWJlcikgeyByZXR1cm4gYnVmZmVyLmFkZEVsZW1lbnQoc2VxdWVuY2VOdW1iZXIpOyB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBidWZmZXIubWF4VmFsdWU7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0YXJnZXRzIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIgZXF1YWwgdG8gb3IgbGVzcyB0aGFuIHRoZSBnaXZlbiB1cHBlciBib3VuZCwgYW5kIHJlbW92ZXNcclxuICAgICAqIGRvY3VtZW50IGFzc29jaWF0aW9ucyB3aXRoIHRob3NlIHRhcmdldHMuXHJcbiAgICAgKi9cclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLnJlbW92ZVRhcmdldHMgPSBmdW5jdGlvbiAodHhuLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5yZW1vdmVUYXJnZXRzKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhIHNlcXVlbmNlIG51bWJlciBlcXVhbCB0byBvciBsZXNzIHRoYW4gdGhlIHVwcGVyIGJvdW5kIGFuZCBhcmUgbm90XHJcbiAgICAgKiBvdGhlcndpc2UgcGlubmVkLlxyXG4gICAgICovXHJcbiAgICBMcnVHYXJiYWdlQ29sbGVjdG9yLnByb3RvdHlwZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyA9IGZ1bmN0aW9uICh0eG4sIHVwcGVyQm91bmQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0eG4sIHVwcGVyQm91bmQpO1xyXG4gICAgfTtcclxuICAgIExydUdhcmJhZ2VDb2xsZWN0b3IucHJvdG90eXBlLmNvbGxlY3QgPSBmdW5jdGlvbiAodHhuLCBhY3RpdmVUYXJnZXRJZHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID09PSBMcnVQYXJhbXMuQ09MTEVDVElPTl9ESVNBQkxFRCkge1xyXG4gICAgICAgICAgICBkZWJ1ZygnTHJ1R2FyYmFnZUNvbGxlY3RvcicsICdHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKEdDX0RJRF9OT1RfUlVOKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FjaGVTaXplKHR4bikubmV4dChmdW5jdGlvbiAoY2FjaGVTaXplKSB7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZVNpemUgPCBfdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoJ0xydUdhcmJhZ2VDb2xsZWN0b3InLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBDYWNoZSBzaXplIFwiICsgY2FjaGVTaXplICsgXCIgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcImlzIGxvd2VyIHRoYW4gdGhyZXNob2xkIFwiICsgX3RoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBHQ19ESURfTk9UX1JVTjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5ydW5HYXJiYWdlQ29sbGVjdGlvbih0eG4sIGFjdGl2ZVRhcmdldElkcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMcnVHYXJiYWdlQ29sbGVjdG9yLnByb3RvdHlwZS5nZXRDYWNoZVNpemUgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZWdhdGUuZ2V0Q2FjaGVTaXplKHR4bik7XHJcbiAgICB9O1xyXG4gICAgTHJ1R2FyYmFnZUNvbGxlY3Rvci5wcm90b3R5cGUucnVuR2FyYmFnZUNvbGxlY3Rpb24gPSBmdW5jdGlvbiAodHhuLCBhY3RpdmVUYXJnZXRJZHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB1cHBlckJvdW5kU2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgdmFyIHNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCwgdGFyZ2V0c1JlbW92ZWQ7XHJcbiAgICAgICAgLy8gVGltZXN0YW1wcyBmb3IgdmFyaW91cyBwaWVjZXMgb2YgdGhlIHByb2Nlc3NcclxuICAgICAgICB2YXIgY291bnRlZFRhcmdldHNUcywgZm91bmRVcHBlckJvdW5kVHMsIHJlbW92ZWRUYXJnZXRzVHMsIHJlbW92ZWREb2N1bWVudHNUcztcclxuICAgICAgICB2YXIgc3RhcnRUcyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlVGFyZ2V0Q291bnQodHhuLCB0aGlzLnBhcmFtcy5wZXJjZW50aWxlVG9Db2xsZWN0KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXJzKSB7XHJcbiAgICAgICAgICAgIC8vIENhcCBhdCB0aGUgY29uZmlndXJlZCBtYXhcclxuICAgICAgICAgICAgaWYgKHNlcXVlbmNlTnVtYmVycyA+IF90aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZygnTHJ1R2FyYmFnZUNvbGxlY3RvcicsICdDYXBwaW5nIHNlcXVlbmNlIG51bWJlcnMgdG8gY29sbGVjdCBkb3duICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcInRvIHRoZSBtYXhpbXVtIG9mIFwiICsgX3RoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgKyBcIiBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcImZyb20gXCIgKyBzZXF1ZW5jZU51bWJlcnMpKTtcclxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IF90aGlzLnBhcmFtc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gc2VxdWVuY2VOdW1iZXJzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvdW50ZWRUYXJnZXRzVHMgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubnRoU2VxdWVuY2VOdW1iZXIodHhuLCBzZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICh1cHBlckJvdW5kKSB7XHJcbiAgICAgICAgICAgIHVwcGVyQm91bmRTZXF1ZW5jZU51bWJlciA9IHVwcGVyQm91bmQ7XHJcbiAgICAgICAgICAgIGZvdW5kVXBwZXJCb3VuZFRzID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZVRhcmdldHModHhuLCB1cHBlckJvdW5kU2VxdWVuY2VOdW1iZXIsIGFjdGl2ZVRhcmdldElkcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKG51bVRhcmdldHNSZW1vdmVkKSB7XHJcbiAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkID0gbnVtVGFyZ2V0c1JlbW92ZWQ7XHJcbiAgICAgICAgICAgIHJlbW92ZWRUYXJnZXRzVHMgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModHhuLCB1cHBlckJvdW5kU2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkb2N1bWVudHNSZW1vdmVkKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZWREb2N1bWVudHNUcyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIGlmIChnZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVzYyA9ICdMUlUgR2FyYmFnZSBDb2xsZWN0aW9uXFxuJyArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiXFx0Q291bnRlZCB0YXJnZXRzIGluIFwiICsgKGNvdW50ZWRUYXJnZXRzVHMgLSBzdGFydFRzKSArIFwibXNcXG5cIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcIlxcdERldGVybWluZWQgbGVhc3QgcmVjZW50bHkgdXNlZCBcIiArIHNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCArIFwiIGluIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKGZvdW5kVXBwZXJCb3VuZFRzIC0gY291bnRlZFRhcmdldHNUcyArIFwibXNcXG5cIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcIlxcdFJlbW92ZWQgXCIgKyB0YXJnZXRzUmVtb3ZlZCArIFwiIHRhcmdldHMgaW4gXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAocmVtb3ZlZFRhcmdldHNUcyAtIGZvdW5kVXBwZXJCb3VuZFRzICsgXCJtc1xcblwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiXFx0UmVtb3ZlZCBcIiArIGRvY3VtZW50c1JlbW92ZWQgKyBcIiBkb2N1bWVudHMgaW4gXCIpICtcclxuICAgICAgICAgICAgICAgICAgICAocmVtb3ZlZERvY3VtZW50c1RzIC0gcmVtb3ZlZFRhcmdldHNUcyArIFwibXNcXG5cIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcIlRvdGFsIER1cmF0aW9uOiBcIiArIChyZW1vdmVkRG9jdW1lbnRzVHMgLSBzdGFydFRzKSArIFwibXNcIik7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZygnTHJ1R2FyYmFnZUNvbGxlY3RvcicsIGRlc2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh7XHJcbiAgICAgICAgICAgICAgICBkaWRSdW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IHNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCxcclxuICAgICAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkOiB0YXJnZXRzUmVtb3ZlZCxcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50c1JlbW92ZWQ6IGRvY3VtZW50c1JlbW92ZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExydUdhcmJhZ2VDb2xsZWN0b3I7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBiYXNlIGNsYXNzIHJlcHJlc2VudGluZyBhIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLCBlbmNhcHN1bGF0aW5nIGJvdGggdGhlXHJcbiAqIHRyYW5zYWN0aW9uJ3Mgc2VxdWVuY2UgbnVtYmVycyBhcyB3ZWxsIGFzIGEgbGlzdCBvZiBvbkNvbW1pdHRlZCBsaXN0ZW5lcnMuXHJcbiAqXHJcbiAqIFdoZW4geW91IGNhbGwgUGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oKSwgaXQgd2lsbCBjcmVhdGUgYSB0cmFuc2FjdGlvbiBhbmRcclxuICogcGFzcyBpdCB0byB5b3VyIGNhbGxiYWNrLiBZb3UgdGhlbiBwYXNzIGl0IHRvIGFueSBtZXRob2QgdGhhdCBvcGVyYXRlc1xyXG4gKiBvbiBwZXJzaXN0ZW5jZS5cclxuICovXHJcbnZhciBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGVyc2lzdGVuY2VUcmFuc2FjdGlvbigpIHtcclxuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzID0gW107XHJcbiAgICB9XHJcbiAgICBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uLnByb3RvdHlwZS5hZGRPbkNvbW1pdHRlZExpc3RlbmVyID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uLnByb3RvdHlwZS5yYWlzZU9uQ29tbWl0dGVkRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gbGlzdGVuZXIoKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBlcnNpc3RlbmNlVHJhbnNhY3Rpb247XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQxID0gJ0luZGV4ZWREYlBlcnNpc3RlbmNlJztcclxuLyoqXHJcbiAqIE9sZGVzdCBhY2NlcHRhYmxlIGFnZSBpbiBtaWxsaXNlY29uZHMgZm9yIGNsaWVudCBtZXRhZGF0YSBiZWZvcmUgdGhlIGNsaWVudFxyXG4gKiBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCBpdHMgYXNzb2NpYXRlZCBkYXRhIGlzIGdhcmJhZ2UgY29sbGVjdGVkLlxyXG4gKi9cclxudmFyIE1BWF9DTElFTlRfQUdFX01TID0gMzAgKiA2MCAqIDEwMDA7IC8vIDMwIG1pbnV0ZXNcclxuLyoqXHJcbiAqIE9sZGVzdCBhY2NlcHRhYmxlIG1ldGFkYXRhIGFnZSBmb3IgY2xpZW50cyB0aGF0IG1heSBwYXJ0aWNpcGF0ZSBpbiB0aGVcclxuICogcHJpbWFyeSBsZWFzZSBlbGVjdGlvbi4gQ2xpZW50cyB0aGF0IGhhdmUgbm90IHVwZGF0ZWQgdGhlaXIgY2xpZW50IG1ldGFkYXRhXHJcbiAqIHdpdGhpbiA1IHNlY29uZHMgYXJlIG5vdCBlbGlnaWJsZSB0byByZWNlaXZlIGEgcHJpbWFyeSBsZWFzZS5cclxuICovXHJcbnZhciBNQVhfUFJJTUFSWV9FTElHSUJMRV9BR0VfTVMgPSA1MDAwO1xyXG4vKipcclxuICogVGhlIGludGVydmFsIGF0IHdoaWNoIGNsaWVudHMgd2lsbCB1cGRhdGUgdGhlaXIgbWV0YWRhdGEsIGluY2x1ZGluZ1xyXG4gKiByZWZyZXNoaW5nIHRoZWlyIHByaW1hcnkgbGVhc2UgaWYgaGVsZCBvciBwb3RlbnRpYWxseSB0cnlpbmcgdG8gYWNxdWlyZSBpdCBpZlxyXG4gKiBub3QgaGVsZC5cclxuICpcclxuICogUHJpbWFyeSBjbGllbnRzIG1heSBvcHBvcnR1bmlzdGljYWxseSByZWZyZXNoIHRoZWlyIG1ldGFkYXRhIGVhcmxpZXJcclxuICogaWYgdGhleSdyZSBhbHJlYWR5IHBlcmZvcm1pbmcgYW4gSW5kZXhlZERCIG9wZXJhdGlvbi5cclxuICovXHJcbnZhciBDTElFTlRfTUVUQURBVEFfUkVGUkVTSF9JTlRFUlZBTF9NUyA9IDQwMDA7XHJcbi8qKiBVc2VyLWZhY2luZyBlcnJvciB3aGVuIHRoZSBwcmltYXJ5IGxlYXNlIGlzIHJlcXVpcmVkIGJ1dCBub3QgYXZhaWxhYmxlLiAqL1xyXG52YXIgUFJJTUFSWV9MRUFTRV9MT1NUX0VSUk9SX01TRyA9ICdUaGUgY3VycmVudCB0YWIgaXMgbm90IGluIHRoZSByZXF1aXJlZCBzdGF0ZSB0byBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uLiAnICtcclxuICAgICdJdCBtaWdodCBiZSBuZWNlc3NhcnkgdG8gcmVmcmVzaCB0aGUgYnJvd3NlciB0YWIuJztcclxudmFyIFBSSU1BUllfTEVBU0VfRVhDTFVTSVZFX0VSUk9SX01TRyA9ICdBbm90aGVyIHRhYiBoYXMgZXhjbHVzaXZlIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2UgbGF5ZXIuICcgK1xyXG4gICAgJ1RvIGFsbG93IHNoYXJlZCBhY2Nlc3MsIG1ha2Ugc3VyZSB0byBpbnZva2UgJyArXHJcbiAgICAnYGVuYWJsZVBlcnNpc3RlbmNlKClgIHdpdGggYHN5bmNocm9uaXplVGFiczp0cnVlYCBpbiBhbGwgdGFicy4nO1xyXG52YXIgVU5TVVBQT1JURURfUExBVEZPUk1fRVJST1JfTVNHID0gJ1RoaXMgcGxhdGZvcm0gaXMgZWl0aGVyIG1pc3NpbmcnICtcclxuICAgICcgSW5kZXhlZERCIG9yIGlzIGtub3duIHRvIGhhdmUgYW4gaW5jb21wbGV0ZSBpbXBsZW1lbnRhdGlvbi4gT2ZmbGluZScgK1xyXG4gICAgJyBwZXJzaXN0ZW5jZSBoYXMgYmVlbiBkaXNhYmxlZC4nO1xyXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBMb2NhbFN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHpvbWJpZWQgY2xpZW50IGlzOlxyXG4vLyAgICAgZmlyZXN0b3JlX3pvbWJpZV88cGVyc2lzdGVuY2VfcHJlZml4Pl88aW5zdGFuY2Vfa2V5PlxyXG52YXIgWk9NQklFRF9DTElFTlRTX0tFWV9QUkVGSVggPSAnZmlyZXN0b3JlX3pvbWJpZSc7XHJcbnZhciBJbmRleGVkRGJUcmFuc2FjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhJbmRleGVkRGJUcmFuc2FjdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYlRyYW5zYWN0aW9uKHNpbXBsZURiVHJhbnNhY3Rpb24sIGN1cnJlbnRTZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc2ltcGxlRGJUcmFuc2FjdGlvbiA9IHNpbXBsZURiVHJhbnNhY3Rpb247XHJcbiAgICAgICAgX3RoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gY3VycmVudFNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBJbmRleGVkRGJUcmFuc2FjdGlvbjtcclxufShQZXJzaXN0ZW5jZVRyYW5zYWN0aW9uKSk7XHJcbi8qKlxyXG4gKiBBbiBJbmRleGVkREItYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBwZXJzaXN0ZW50bHlcclxuICogYWNyb3NzIHNlc3Npb25zLlxyXG4gKlxyXG4gKiBPbiBXZWIgb25seSwgdGhlIEZpcmVzdG9yZSBTREtzIHN1cHBvcnQgc2hhcmVkIGFjY2VzcyB0byBpdHMgcGVyc2lzdGVuY2VcclxuICogbGF5ZXIuIFRoaXMgYWxsb3dzIG11bHRpcGxlIGJyb3dzZXIgdGFicyB0byByZWFkIGFuZCB3cml0ZSB0byBJbmRleGVkRGIgYW5kXHJcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xyXG4gKiBjdXJyZW50bHkgb3B0aW9uYWwgYW5kIG5vdCBlbmFibGVkIHVubGVzcyBhbGwgY2xpZW50cyBpbnZva2VcclxuICogYGVuYWJsZVBlcnNpc3RlbmNlKClgIHdpdGggYHtzeW5jaHJvbml6ZVRhYnM6dHJ1ZX1gLlxyXG4gKlxyXG4gKiBJbiBtdWx0aS10YWIgbW9kZSwgaWYgbXVsdGlwbGUgY2xpZW50cyBhcmUgYWN0aXZlIGF0IHRoZSBzYW1lIHRpbWUsIHRoZSBTREtcclxuICogd2lsbCBkZXNpZ25hdGUgb25lIGNsaWVudCBhcyB0aGUg4oCccHJpbWFyeSBjbGllbnTigJ0uIEFuIGVmZm9ydCBpcyBtYWRlIHRvIHBpY2tcclxuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXHJcbiAqIHJlc3BvbnNpYmxlIGZvciBsZXR0aW5nIG90aGVyIGNsaWVudHMga25vdyBhYm91dCBpdHMgcHJlc2VuY2UuIFRoZSBwcmltYXJ5XHJcbiAqIGNsaWVudCB3cml0ZXMgYSB1bmlxdWUgY2xpZW50LWdlbmVyYXRlZCBpZGVudGlmaWVyICh0aGUgY2xpZW50IElEKSB0b1xyXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXHJcbiAqIHVwZGF0ZSB0aGlzIGVudHJ5LCBhbm90aGVyIGNsaWVudCBjYW4gYWNxdWlyZSB0aGUgbGVhc2UgYW5kIHRha2Ugb3ZlciBhc1xyXG4gKiBwcmltYXJ5LlxyXG4gKlxyXG4gKiBTb21lIHBlcnNpc3RlbmNlIG9wZXJhdGlvbnMgaW4gdGhlIFNESyBhcmUgZGVzaWduYXRlZCBhcyBwcmltYXJ5LWNsaWVudCBvbmx5XHJcbiAqIG9wZXJhdGlvbnMuIFRoaXMgaW5jbHVkZXMgdGhlIGFja25vd2xlZGdtZW50IG9mIG11dGF0aW9ucyBhbmQgYWxsIHVwZGF0ZXMgb2ZcclxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxyXG4gKiBhbmQgdGhlbiBicm9hZGNhc3QgdG8gb3RoZXIgdGFicyB2aWEgTG9jYWxTdG9yYWdlIChzZWVcclxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWApLCB3aGljaCB0aGVuIHJlZnJlc2ggdGhlaXIgc3RhdGUgZnJvbVxyXG4gKiBwZXJzaXN0ZW5jZS5cclxuICpcclxuICogU2ltaWxhcmx5LCB0aGUgcHJpbWFyeSBjbGllbnQgbGlzdGVucyB0byBub3RpZmljYXRpb25zIHNlbnQgYnkgc2Vjb25kYXJ5XHJcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXHJcbiAqIHRoZSBhZGRpdGlvbiBvZiBuZXcgbXV0YXRpb25zIGFuZCBxdWVyeSB0YXJnZXRzLlxyXG4gKlxyXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcclxuICogbGVhc2UsIEluZGV4ZWREYlBlcnNpc3RlbmNlIGVudGVycyBhIGZhaWxlZCBzdGF0ZSBhbmQgYWxsIHN1YnNlcXVlbnRcclxuICogb3BlcmF0aW9ucyB3aWxsIGF1dG9tYXRpY2FsbHkgZmFpbC5cclxuICpcclxuICogQWRkaXRpb25hbGx5LCB0aGVyZSBpcyBhbiBvcHRpbWl6YXRpb24gc28gdGhhdCB3aGVuIGEgdGFiIGlzIGNsb3NlZCwgdGhlXHJcbiAqIHByaW1hcnkgbGVhc2UgaXMgcmVsZWFzZWQgaW1tZWRpYXRlbHkgKHRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgdG8gbWFrZVxyXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxyXG4gKiBsZWFzZSkuIFVuZm9ydHVuYXRlbHksIEluZGV4ZWREQiBjYW5ub3QgYmUgcmVsaWFibHkgdXNlZCBpbiB3aW5kb3cudW5sb2FkXHJcbiAqIHNpbmNlIGl0IGlzIGFuIGFzeW5jaHJvbm91cyBBUEkuIFNvIGluIGFkZGl0aW9uIHRvIGF0dGVtcHRpbmcgdG8gZ2l2ZSB1cCB0aGVcclxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXHJcbiAqIExvY2FsU3RvcmFnZSB3aGljaCBhY3RzIGFzIGFuIGluZGljYXRvciB0aGF0IGFub3RoZXIgdGFiIHNob3VsZCBnbyBhaGVhZCBhbmRcclxuICogdGFrZSB0aGUgcHJpbWFyeSBsZWFzZSBpbW1lZGlhdGVseSByZWdhcmRsZXNzIG9mIHRoZSBjdXJyZW50IGxlYXNlIHRpbWVzdGFtcC5cclxuICpcclxuICogVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSBgc3luY2hyb25pemVUYWJzYCBzZWN0aW9uIHdoZW4gbXVsdGktdGFiIGlzIG5vXHJcbiAqIGxvbmdlciBvcHRpb25hbC5cclxuICovXHJcbnZhciBJbmRleGVkRGJQZXJzaXN0ZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEluZGV4ZWREYlBlcnNpc3RlbmNlKGFsbG93VGFiU3luY2hyb25pemF0aW9uLCBwZXJzaXN0ZW5jZUtleSwgY2xpZW50SWQsIHBsYXRmb3JtLCBscnVQYXJhbXMsIHF1ZXVlLCBzZXJpYWxpemVyLCBzZXF1ZW5jZU51bWJlclN5bmNlcikge1xyXG4gICAgICAgIHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSBhbGxvd1RhYlN5bmNocm9uaXphdGlvbjtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gcGVyc2lzdGVuY2VLZXk7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBxdWV1ZTtcclxuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVyU3luY2VyID0gc2VxdWVuY2VOdW1iZXJTeW5jZXI7XHJcbiAgICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNQcmltYXJ5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgLyoqIE91ciB3aW5kb3cudW5sb2FkIGhhbmRsZXIsIGlmIHJlZ2lzdGVyZWQuICovXHJcbiAgICAgICAgdGhpcy53aW5kb3dVbmxvYWRIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluRm9yZWdyb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgIC8qKiBPdXIgJ3Zpc2liaWxpdHljaGFuZ2UnIGxpc3RlbmVyIGlmIHJlZ2lzdGVyZWQuICovXHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFZpc2liaWxpdHlIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKiogVGhlIGNsaWVudCBtZXRhZGF0YSByZWZyZXNoIHRhc2suICovXHJcbiAgICAgICAgdGhpcy5jbGllbnRNZXRhZGF0YVJlZnJlc2hlciA9IG51bGw7XHJcbiAgICAgICAgLyoqIFRoZSBsYXN0IHRpbWUgd2UgZ2FyYmFnZSBjb2xsZWN0ZWQgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuICovXHJcbiAgICAgICAgdGhpcy5sYXN0R2FyYmFnZUNvbGxlY3Rpb25UaW1lID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xyXG4gICAgICAgIC8qKiBBIGxpc3RlbmVyIHRvIG5vdGlmeSBvbiBwcmltYXJ5IHN0YXRlIGNoYW5nZXMuICovXHJcbiAgICAgICAgdGhpcy5wcmltYXJ5U3RhdGVMaXN0ZW5lciA9IGZ1bmN0aW9uIChfKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgfTtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IEluZGV4ZWREYkxydURlbGVnYXRlKHRoaXMsIGxydVBhcmFtcyk7XHJcbiAgICAgICAgdGhpcy5kYk5hbWUgPSBwZXJzaXN0ZW5jZUtleSArIEluZGV4ZWREYlBlcnNpc3RlbmNlLk1BSU5fREFUQUJBU0U7XHJcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gbmV3IExvY2FsU2VyaWFsaXplcihzZXJpYWxpemVyKTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50ID0gcGxhdGZvcm0uZG9jdW1lbnQ7XHJcbiAgICAgICAgdGhpcy50YXJnZXRDYWNoZSA9IG5ldyBJbmRleGVkRGJUYXJnZXRDYWNoZSh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLCB0aGlzLnNlcmlhbGl6ZXIpO1xyXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gbmV3IEluZGV4ZWREYkluZGV4TWFuYWdlcigpO1xyXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IG5ldyBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKHRoaXMuc2VyaWFsaXplciwgdGhpcy5pbmRleE1hbmFnZXIpO1xyXG4gICAgICAgIGlmIChwbGF0Zm9ybS53aW5kb3cgJiYgcGxhdGZvcm0ud2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICAgICAgICB0aGlzLndpbmRvdyA9IHBsYXRmb3JtLndpbmRvdztcclxuICAgICAgICAgICAgdGhpcy53ZWJTdG9yYWdlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5JTVBMRU1FTlRFRCwgJ0luZGV4ZWREQiBwZXJzaXN0ZW5jZSBpcyBvbmx5IGF2YWlsYWJsZSBvbiBwbGF0Zm9ybXMgdGhhdCBzdXBwb3J0IExvY2FsU3RvcmFnZS4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5nZXRTdG9yZSA9IGZ1bmN0aW9uICh0eG4sIHN0b3JlKSB7XHJcbiAgICAgICAgaWYgKHR4biBpbnN0YW5jZW9mIEluZGV4ZWREYlRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTaW1wbGVEYi5nZXRTdG9yZSh0eG4uc2ltcGxlRGJUcmFuc2FjdGlvbiwgc3RvcmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnSW5kZXhlZERiUGVyc2lzdGVuY2UgbXVzdCB1c2UgaW5zdGFuY2VzIG9mIEluZGV4ZWREYlRyYW5zYWN0aW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLmNyZWF0ZUluZGV4ZWREYlBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFJbmRleGVkRGJQZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCBVTlNVUFBPUlRFRF9QTEFURk9STV9FUlJPUl9NU0cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlID0gbmV3IEluZGV4ZWREYlBlcnNpc3RlbmNlKG9wdGlvbnMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sIG9wdGlvbnMucGVyc2lzdGVuY2VLZXksIG9wdGlvbnMuY2xpZW50SWQsIG9wdGlvbnMucGxhdGZvcm0sIG9wdGlvbnMubHJ1UGFyYW1zLCBvcHRpb25zLnF1ZXVlLCBvcHRpb25zLnNlcmlhbGl6ZXIsIG9wdGlvbnMuc2VxdWVuY2VOdW1iZXJTeW5jZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwZXJzaXN0ZW5jZS5zdGFydCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHBlcnNpc3RlbmNlXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBdHRlbXB0IHRvIHN0YXJ0IEluZGV4ZWREYiBwZXJzaXN0ZW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fSBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoIXRoaXMuc3RhcnRlZCwgJ0luZGV4ZWREYlBlcnNpc3RlbmNlIGRvdWJsZS1zdGFydGVkIScpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLndpbmRvdyAhPT0gbnVsbCwgXCJFeHBlY3RlZCAnd2luZG93JyB0byBiZSBkZWZpbmVkXCIpO1xyXG4gICAgICAgIHJldHVybiBTaW1wbGVEYi5vcGVuT3JDcmVhdGUodGhpcy5kYk5hbWUsIFNDSEVNQV9WRVJTSU9OLCBuZXcgU2NoZW1hQ29udmVydGVyKHRoaXMuc2VyaWFsaXplcikpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYikge1xyXG4gICAgICAgICAgICBfdGhpcy5zaW1wbGVEYiA9IGRiO1xyXG4gICAgICAgICAgICAvLyBOT1RFOiBUaGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgc29tZXRpbWVzIChpbiB0aGUgY2FzZSBvZiBhbm90aGVyIHRhYiBhbHJlYWR5XHJcbiAgICAgICAgICAgIC8vIGhhdmluZyB0aGUgcGVyc2lzdGVuY2UgbG9jayksIHNvIGl0J3MgdGhlIGZpcnN0IHRoaW5nIHdlIHNob3VsZCBkby5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZUNsaWVudE1ldGFkYXRhQW5kVHJ5QmVjb21lUHJpbWFyeSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuYXR0YWNoVmlzaWJpbGl0eUhhbmRsZXIoKTtcclxuICAgICAgICAgICAgX3RoaXMuYXR0YWNoV2luZG93VW5sb2FkSG9vaygpO1xyXG4gICAgICAgICAgICBfdGhpcy5zY2hlZHVsZUNsaWVudE1ldGFkYXRhQW5kUHJpbWFyeUxlYXNlUmVmcmVzaGVzKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zaW1wbGVEYi5ydW5UcmFuc2FjdGlvbigncmVhZG9ubHktaWRlbXBvdGVudCcsIFtEYlRhcmdldEdsb2JhbC5zdG9yZV0sIGZ1bmN0aW9uICh0eG4pIHsgcmV0dXJuIGdldEhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcih0eG4pOyB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmxpc3RlblNlcXVlbmNlID0gbmV3IExpc3RlblNlcXVlbmNlKGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciwgX3RoaXMuc2VxdWVuY2VOdW1iZXJTeW5jZXIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNpbXBsZURiICYmIF90aGlzLnNpbXBsZURiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5zZXRQcmltYXJ5U3RhdGVMaXN0ZW5lciA9IGZ1bmN0aW9uIChwcmltYXJ5U3RhdGVMaXN0ZW5lcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5wcmltYXJ5U3RhdGVMaXN0ZW5lciA9IGZ1bmN0aW9uIChwcmltYXJ5U3RhdGUpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBwcmltYXJ5U3RhdGVMaXN0ZW5lcihwcmltYXJ5U3RhdGUpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH07XHJcbiAgICAgICAgcmV0dXJuIHByaW1hcnlTdGF0ZUxpc3RlbmVyKHRoaXMuaXNQcmltYXJ5KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIgPSBmdW5jdGlvbiAoZGF0YWJhc2VEZWxldGVkTGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc2ltcGxlRGIuc2V0VmVyc2lvbkNoYW5nZUxpc3RlbmVyKGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShldmVudC5uZXdWZXJzaW9uID09PSBudWxsKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGRhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2V0TmV0d29ya0VuYWJsZWQgPSBmdW5jdGlvbiAobmV0d29ya0VuYWJsZWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLm5ldHdvcmtFbmFibGVkICE9PSBuZXR3b3JrRW5hYmxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gbmV0d29ya0VuYWJsZWQ7XHJcbiAgICAgICAgICAgIC8vIFNjaGVkdWxlIGEgcHJpbWFyeSBsZWFzZSByZWZyZXNoIGZvciBpbW1lZGlhdGUgZXhlY3V0aW9uLiBUaGUgZXZlbnR1YWxcclxuICAgICAgICAgICAgLy8gbGVhc2UgdXBkYXRlIHdpbGwgYmUgcHJvcGFnYXRlZCB2aWEgYHByaW1hcnlTdGF0ZUxpc3RlbmVyYC5cclxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMudXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5KCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxyXG4gICAgICogZXh0ZW5kIHRoZSBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBBc3luY2hyb25vdXNseSBub3RpZmllcyB0aGVcclxuICAgICAqIHByaW1hcnkgc3RhdGUgbGlzdGVuZXIgaWYgdGhlIGNsaWVudCBlaXRoZXIgbmV3bHkgb2J0YWluZWQgb3IgcmVsZWFzZWQgaXRzXHJcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUudXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxlRGJcclxuICAgICAgICAgICAgLnJ1blRyYW5zYWN0aW9uKCdyZWFkd3JpdGUtaWRlbXBvdGVudCcsIEFMTF9TVE9SRVMsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgdmFyIG1ldGFkYXRhU3RvcmUgPSBjbGllbnRNZXRhZGF0YVN0b3JlKHR4bik7XHJcbiAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YVN0b3JlXHJcbiAgICAgICAgICAgICAgICAucHV0KG5ldyBEYkNsaWVudE1ldGFkYXRhKF90aGlzLmNsaWVudElkLCBEYXRlLm5vdygpLCBfdGhpcy5uZXR3b3JrRW5hYmxlZCwgX3RoaXMuaW5Gb3JlZ3JvdW5kKSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudmVyaWZ5UHJpbWFyeUxlYXNlKHR4bikubmV4dChmdW5jdGlvbiAoc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzUHJpbWFyeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByaW1hcnlTdGF0ZUxpc3RlbmVyKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5jYW5BY3RBc1ByaW1hcnkodHhuKTsgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChjYW5BY3RBc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1ByaW1hcnkgJiYgIWNhbkFjdEFzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWxlYXNlUHJpbWFyeUxlYXNlSWZIZWxkKHR4bikubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjYW5BY3RBc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYWNxdWlyZU9yRXh0ZW5kUHJpbWFyeUxlYXNlKHR4bikubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAvKiBjYW5BY3RBc1ByaW1hcnk9ICovIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDEsICdSZWxlYXNpbmcgb3duZXIgbGVhc2UgYWZ0ZXIgZXJyb3IgZHVyaW5nIGxlYXNlIHJlZnJlc2gnLCBlKTtcclxuICAgICAgICAgICAgcmV0dXJuIC8qIGlzUHJpbWFyeT0gKi8gZmFsc2U7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNQcmltYXJ5ICE9PSBpc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcmltYXJ5U3RhdGVMaXN0ZW5lcihpc1ByaW1hcnkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuaXNQcmltYXJ5ID0gaXNQcmltYXJ5O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS52ZXJpZnlQcmltYXJ5TGVhc2UgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc3RvcmUgPSBwcmltYXJ5Q2xpZW50U3RvcmUodHhuKTtcclxuICAgICAgICByZXR1cm4gc3RvcmUuZ2V0KERiUHJpbWFyeUNsaWVudC5rZXkpLm5leHQoZnVuY3Rpb24gKHByaW1hcnlDbGllbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKF90aGlzLmlzTG9jYWxDbGllbnQocHJpbWFyeUNsaWVudCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5yZW1vdmVDbGllbnRNZXRhZGF0YSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgbWV0YWRhdGFTdG9yZSA9IGNsaWVudE1ldGFkYXRhU3RvcmUodHhuKTtcclxuICAgICAgICByZXR1cm4gbWV0YWRhdGFTdG9yZS5kZWxldGUodGhpcy5jbGllbnRJZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgZ2FyYmFnZSBjb2xsZWN0aW9uIHRocmVzaG9sZCBoYXMgcGFzc2VkLCBwcnVuZXMgdGhlXHJcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcclxuICAgICAqIHRpbWUgb2YgYWxsIGNsaWVudHMuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5tYXliZUdhcmJhZ2VDb2xsZWN0TXVsdGlDbGllbnRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmFjdGl2ZUNsaWVudHM7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMuaXNQcmltYXJ5ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5pc1dpdGhpbkFnZSh0aGlzLmxhc3RHYXJiYWdlQ29sbGVjdGlvblRpbWUsIE1BWF9DTElFTlRfQUdFX01TKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RHYXJiYWdlQ29sbGVjdGlvblRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJ1blRyYW5zYWN0aW9uKCdtYXliZUdhcmJhZ2VDb2xsZWN0TXVsdGlDbGllbnRTdGF0ZScsICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRhZGF0YVN0b3JlID0gSW5kZXhlZERiUGVyc2lzdGVuY2UuZ2V0U3RvcmUodHhuLCBEYkNsaWVudE1ldGFkYXRhLnN0b3JlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWRhdGFTdG9yZS5sb2FkQWxsKCkubmV4dChmdW5jdGlvbiAoZXhpc3RpbmdDbGllbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmUgPSBfdGhpcy5maWx0ZXJBY3RpdmVDbGllbnRzKGV4aXN0aW5nQ2xpZW50cywgTUFYX0NMSUVOVF9BR0VfTVMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5hY3RpdmUgPSBleGlzdGluZ0NsaWVudHMuZmlsdGVyKGZ1bmN0aW9uIChjbGllbnQpIHsgcmV0dXJuIGFjdGl2ZS5pbmRleE9mKGNsaWVudCkgPT09IC0xOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG1ldGFkYXRhIGZvciBjbGllbnRzIHRoYXQgYXJlIG5vIGxvbmdlciBjb25zaWRlcmVkIGFjdGl2ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGluYWN0aXZlLCBmdW5jdGlvbiAoaW5hY3RpdmVDbGllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YVN0b3JlLmRlbGV0ZShpbmFjdGl2ZUNsaWVudC5jbGllbnRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5hY3RpdmU7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5hY3RpdmVDbGllbnRzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgcG90ZW50aWFsIGxlZnRvdmVyIGVudHJpZXMgdGhhdCBtYXkgY29udGludWUgdG8gbWFyayB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5hY3RpdmUgY2xpZW50cyBhcyB6b21iaWVkIGluIExvY2FsU3RvcmFnZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGRlbGV0ZSB0aGUgSW5kZXhlZERiIGFuZCBMb2NhbFN0b3JhZ2Ugem9tYmllIGVudHJpZXMgZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjbGllbnQgYXRvbWljYWxseSwgYnV0IHdlIGNhbid0LiBTbyB3ZSBvcHQgdG8gZGVsZXRlIHRoZSBJbmRleGVkRGJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50cmllcyBmaXJzdCB0byBhdm9pZCBwb3RlbnRpYWxseSByZXZpdmluZyBhIHpvbWJpZWQgY2xpZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmFjdGl2ZUNsaWVudHMuZm9yRWFjaChmdW5jdGlvbiAoaW5hY3RpdmVDbGllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShfdGhpcy56b21iaWVkQ2xpZW50TG9jYWxTdG9yYWdlS2V5KGluYWN0aXZlQ2xpZW50LmNsaWVudElkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2NoZWR1bGVzIGEgcmVjdXJyaW5nIHRpbWVyIHRvIHVwZGF0ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGFuZCB0byBlaXRoZXJcclxuICAgICAqIGV4dGVuZCBvciBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIGlmIHRoZSBjbGllbnQgaXMgZWxpZ2libGUuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5zY2hlZHVsZUNsaWVudE1ldGFkYXRhQW5kUHJpbWFyeUxlYXNlUmVmcmVzaGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jbGllbnRNZXRhZGF0YVJlZnJlc2hlciA9IHRoaXMucXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoVGltZXJJZC5DbGllbnRNZXRhZGF0YVJlZnJlc2gsIENMSUVOVF9NRVRBREFUQV9SRUZSRVNIX0lOVEVSVkFMX01TLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnkoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGUoKTsgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNjaGVkdWxlQ2xpZW50TWV0YWRhdGFBbmRQcmltYXJ5TGVhc2VSZWZyZXNoZXMoKTsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIENoZWNrcyB3aGV0aGVyIGBjbGllbnRgIGlzIHRoZSBsb2NhbCBjbGllbnQuICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuaXNMb2NhbENsaWVudCA9IGZ1bmN0aW9uIChjbGllbnQpIHtcclxuICAgICAgICByZXR1cm4gY2xpZW50ID8gY2xpZW50Lm93bmVySWQgPT09IHRoaXMuY2xpZW50SWQgOiBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEV2YWx1YXRlIHRoZSBzdGF0ZSBvZiBhbGwgYWN0aXZlIGNsaWVudHMgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoZSBsb2NhbFxyXG4gICAgICogY2xpZW50IGlzIG9yIGNhbiBhY3QgYXMgdGhlIGhvbGRlciBvZiB0aGUgcHJpbWFyeSBsZWFzZS4gUmV0dXJucyB3aGV0aGVyXHJcbiAgICAgKiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgbGVhc2UsIGJ1dCBkb2VzIG5vdCBhY3R1YWxseSBhY3F1aXJlIGl0LlxyXG4gICAgICogTWF5IHJldHVybiAnZmFsc2UnIGV2ZW4gaWYgdGhlcmUgaXMgbm8gYWN0aXZlIGxlYXNlaG9sZGVyIGFuZCBhbm90aGVyXHJcbiAgICAgKiAoZm9yZWdyb3VuZCkgY2xpZW50IHNob3VsZCBiZWNvbWUgbGVhc2Vob2xkZXIgaW5zdGVhZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmNhbkFjdEFzUHJpbWFyeSA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzdG9yZSA9IHByaW1hcnlDbGllbnRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHJldHVybiBzdG9yZVxyXG4gICAgICAgICAgICAuZ2V0KERiUHJpbWFyeUNsaWVudC5rZXkpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChjdXJyZW50UHJpbWFyeSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudExlYXNlSXNWYWxpZCA9IGN1cnJlbnRQcmltYXJ5ICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pc1dpdGhpbkFnZShjdXJyZW50UHJpbWFyeS5sZWFzZVRpbWVzdGFtcE1zLCBNQVhfUFJJTUFSWV9FTElHSUJMRV9BR0VfTVMpICYmXHJcbiAgICAgICAgICAgICAgICAhX3RoaXMuaXNDbGllbnRab21iaWVkKGN1cnJlbnRQcmltYXJ5Lm93bmVySWQpO1xyXG4gICAgICAgICAgICAvLyBBIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIHByaW1hcnkgbGVhc2UgaWY6XHJcbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGUgZm9yZWdyb3VuZC5cclxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW4gdGhlXHJcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cclxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlXHJcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cclxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpblxyXG4gICAgICAgICAgICAvLyAgIHRoZSBmb3JlZ3JvdW5kLlxyXG4gICAgICAgICAgICBpZiAoY3VycmVudExlYXNlSXNWYWxpZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTG9jYWxDbGllbnQoY3VycmVudFByaW1hcnkpICYmIF90aGlzLm5ldHdvcmtFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzTG9jYWxDbGllbnQoY3VycmVudFByaW1hcnkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50UHJpbWFyeS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHRoZSBgY2FuQWN0QXNQcmltYXJ5YCBjaGVjayBpZiB0aGUgY3VycmVudCBsZWFzZWhvbGRlciBoYXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm90IG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi4gSWYgdGhpcyBoYXBwZW5zIGF0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsaWVudCBzdGFydHVwLCB3ZSByZWplY3QgdGhlIFByb21pc2UgcmV0dXJuZWQgYnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYGVuYWJsZVBlcnNpc3RlbmNlKClgIGFuZCB0aGUgdXNlciBjYW4gY29udGludWUgdG8gdXNlIEZpcmVzdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscyBkdXJpbmcgYSBsZWFzZSByZWZyZXNoLCB3ZSB3aWxsIGluc3RlYWQgYmxvY2sgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgZnJvbSBleGVjdXRpbmcgZnVydGhlciBvcGVyYXRpb25zLiBOb3RlIHRoYXQgdGhpcyBpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhY2NlcHRhYmxlIHNpbmNlIG1peGluZyAmIG1hdGNoaW5nIGRpZmZlcmVudCBgc3luY2hyb25pemVUYWJzYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5ncyBpcyBub3Qgc3VwcG9ydGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIGJlIHR1cm5lZCBvZmYuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sIFBSSU1BUllfTEVBU0VfRVhDTFVTSVZFX0VSUk9SX01TRyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX3RoaXMubmV0d29ya0VuYWJsZWQgJiYgX3RoaXMuaW5Gb3JlZ3JvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY2xpZW50TWV0YWRhdGFTdG9yZSh0eG4pXHJcbiAgICAgICAgICAgICAgICAubG9hZEFsbCgpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZXhpc3RpbmdDbGllbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIGFsbCBleGlzdGluZyBjbGllbnRzIGFuZCBkZXRlcm1pbmUgd2hldGhlciBhdCBsZWFzdCBvbmUgb2ZcclxuICAgICAgICAgICAgICAgIC8vIHRoZW0gaXMgYmV0dGVyIHN1aXRlZCB0byBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJlZmVycmVkQ2FuZGlkYXRlID0gX3RoaXMuZmlsdGVyQWN0aXZlQ2xpZW50cyhleGlzdGluZ0NsaWVudHMsIE1BWF9QUklNQVJZX0VMSUdJQkxFX0FHRV9NUykuZmluZChmdW5jdGlvbiAob3RoZXJDbGllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY2xpZW50SWQgIT09IG90aGVyQ2xpZW50LmNsaWVudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvdGhlckNsaWVudEhhc0JldHRlck5ldHdvcmtTdGF0ZSA9ICFfdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiBvdGhlckNsaWVudC5uZXR3b3JrRW5hYmxlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG90aGVyQ2xpZW50SGFzQmV0dGVyVmlzaWJpbGl0eSA9ICFfdGhpcy5pbkZvcmVncm91bmQgJiYgb3RoZXJDbGllbnQuaW5Gb3JlZ3JvdW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3RoZXJDbGllbnRIYXNTYW1lTmV0d29ya1N0YXRlID0gX3RoaXMubmV0d29ya0VuYWJsZWQgPT09IG90aGVyQ2xpZW50Lm5ldHdvcmtFbmFibGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3RoZXJDbGllbnRIYXNCZXR0ZXJOZXR3b3JrU3RhdGUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvdGhlckNsaWVudEhhc0JldHRlclZpc2liaWxpdHkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdGhlckNsaWVudEhhc1NhbWVOZXR3b3JrU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmVmZXJyZWRDYW5kaWRhdGUgPT09IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGNhbkFjdEFzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNQcmltYXJ5ICE9PSBjYW5BY3RBc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckMSwgXCJDbGllbnQgXCIgKyAoY2FuQWN0QXNQcmltYXJ5ID8gJ2lzJyA6ICdpcyBub3QnKSArIFwiIGVsaWdpYmxlIGZvciBhIHByaW1hcnkgbGVhc2UuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjYW5BY3RBc1ByaW1hcnk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHNodXRkb3duKCkgb3BlcmF0aW9ucyBhcmUgaWRlbXBvdGVudCBhbmQgY2FuIGJlIGNhbGxlZCBldmVuIHdoZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnQoKSBhYm9ydGVkIChlLmcuIGJlY2F1c2UgaXQgY291bGRuJ3QgYWNxdWlyZSB0aGUgcGVyc2lzdGVuY2UgbGVhc2UpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFya0NsaWVudFpvbWJpZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50TWV0YWRhdGFSZWZyZXNoZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50TWV0YWRhdGFSZWZyZXNoZXIuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWVudE1ldGFkYXRhUmVmcmVzaGVyID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGFjaFZpc2liaWxpdHlIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWNoV2luZG93VW5sb2FkSG9vaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnNpbXBsZURiLnJ1blRyYW5zYWN0aW9uKCdyZWFkd3JpdGUtaWRlbXBvdGVudCcsIFtEYlByaW1hcnlDbGllbnQuc3RvcmUsIERiQ2xpZW50TWV0YWRhdGEuc3RvcmVdLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbGVhc2VQcmltYXJ5TGVhc2VJZkhlbGQodHhuKS5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlbW92ZUNsaWVudE1ldGFkYXRhKHR4bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2ltcGxlRGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBtYXJraW5nIHRoZSBjbGllbnQgYXMgem9tYmllZCBmcm9tIExvY2FsU3RvcmFnZSBzaW5jZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBzdWNjZXNzZnVsbHkgZGVsZXRlZCBpdHMgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xpZW50Wm9tYmllZEVudHJ5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGNsaWVudHMgdGhhdCBhcmUgbm90IHpvbWJpZWQgYW5kIGhhdmUgYW4gdXBkYXRlVGltZSB3aXRoaW4gdGhlXHJcbiAgICAgKiBwcm92aWRlZCB0aHJlc2hvbGQuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5maWx0ZXJBY3RpdmVDbGllbnRzID0gZnVuY3Rpb24gKGNsaWVudHMsIGFjdGl2aXR5VGhyZXNob2xkTXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBjbGllbnRzLmZpbHRlcihmdW5jdGlvbiAoY2xpZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5pc1dpdGhpbkFnZShjbGllbnQudXBkYXRlVGltZU1zLCBhY3Rpdml0eVRocmVzaG9sZE1zKSAmJlxyXG4gICAgICAgICAgICAgICAgIV90aGlzLmlzQ2xpZW50Wm9tYmllZChjbGllbnQuY2xpZW50SWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRBY3RpdmVDbGllbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxlRGIucnVuVHJhbnNhY3Rpb24oJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBbRGJDbGllbnRNZXRhZGF0YS5zdG9yZV0sIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNsaWVudE1ldGFkYXRhU3RvcmUodHhuKVxyXG4gICAgICAgICAgICAgICAgLmxvYWRBbGwoKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGNsaWVudHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5maWx0ZXJBY3RpdmVDbGllbnRzKGNsaWVudHMsIE1BWF9DTElFTlRfQUdFX01TKS5tYXAoZnVuY3Rpb24gKGNsaWVudE1ldGFkYXRhKSB7IHJldHVybiBjbGllbnRNZXRhZGF0YS5jbGllbnRJZDsgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLmNsZWFyUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAocGVyc2lzdGVuY2VLZXkpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYk5hbWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghSW5kZXhlZERiUGVyc2lzdGVuY2UuaXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UucmVzb2x2ZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYk5hbWUgPSBwZXJzaXN0ZW5jZUtleSArIEluZGV4ZWREYlBlcnNpc3RlbmNlLk1BSU5fREFUQUJBU0U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFNpbXBsZURiLmRlbGV0ZShkYk5hbWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLCBcInN0YXJ0ZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnRlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRNdXRhdGlvblF1ZXVlID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5zdGFydGVkLCAnQ2Fubm90IGluaXRpYWxpemUgTXV0YXRpb25RdWV1ZSBiZWZvcmUgcGVyc2lzdGVuY2UgaXMgc3RhcnRlZC4nKTtcclxuICAgICAgICByZXR1cm4gSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5mb3JVc2VyKHVzZXIsIHRoaXMuc2VyaWFsaXplciwgdGhpcy5pbmRleE1hbmFnZXIsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRUYXJnZXRDYWNoZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5zdGFydGVkLCAnQ2Fubm90IGluaXRpYWxpemUgVGFyZ2V0Q2FjaGUgYmVmb3JlIHBlcnNpc3RlbmNlIGlzIHN0YXJ0ZWQuJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0Q2FjaGU7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhcnRlZCwgJ0Nhbm5vdCBpbml0aWFsaXplIFJlbW90ZURvY3VtZW50Q2FjaGUgYmVmb3JlIHBlcnNpc3RlbmNlIGlzIHN0YXJ0ZWQuJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0SW5kZXhNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXJ0ZWQsICdDYW5ub3QgaW5pdGlhbGl6ZSBJbmRleE1hbmFnZXIgYmVmb3JlIHBlcnNpc3RlbmNlIGlzIHN0YXJ0ZWQuJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5ydW5UcmFuc2FjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24sIG1vZGUsIHRyYW5zYWN0aW9uT3BlcmF0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJDEsICdTdGFydGluZyB0cmFuc2FjdGlvbjonLCBhY3Rpb24pO1xyXG4gICAgICAgIC8vIFRPRE8oc2NobWlkdC1zZWJhc3RpYW4pOiBTaW1wbGlmeSBvbmNlIGFsbCB0cmFuc2FjdGlvbnMgYXJlIGlkZW1wb3RlbnQuXHJcbiAgICAgICAgdmFyIGlkZW1wb3RlbnQgPSBtb2RlLmVuZHNXaXRoKCdpZGVtcG90ZW50Jyk7XHJcbiAgICAgICAgdmFyIHJlYWRvbmx5ID0gbW9kZS5zdGFydHNXaXRoKCdyZWFkb25seScpO1xyXG4gICAgICAgIHZhciBzaW1wbGVEYk1vZGUgPSByZWFkb25seVxyXG4gICAgICAgICAgICA/IGlkZW1wb3RlbnRcclxuICAgICAgICAgICAgICAgID8gJ3JlYWRvbmx5LWlkZW1wb3RlbnQnXHJcbiAgICAgICAgICAgICAgICA6ICdyZWFkb25seSdcclxuICAgICAgICAgICAgOiBpZGVtcG90ZW50XHJcbiAgICAgICAgICAgICAgICA/ICdyZWFkd3JpdGUtaWRlbXBvdGVudCdcclxuICAgICAgICAgICAgICAgIDogJ3JlYWR3cml0ZSc7XHJcbiAgICAgICAgdmFyIHBlcnNpc3RlbmNlVHJhbnNhY3Rpb247XHJcbiAgICAgICAgLy8gRG8gYWxsIHRyYW5zYWN0aW9ucyBhcyByZWFkd3JpdGUgYWdhaW5zdCBhbGwgb2JqZWN0IHN0b3Jlcywgc2luY2Ugd2VcclxuICAgICAgICAvLyBhcmUgdGhlIG9ubHkgcmVhZGVyL3dyaXRlci5cclxuICAgICAgICByZXR1cm4gdGhpcy5zaW1wbGVEYlxyXG4gICAgICAgICAgICAucnVuVHJhbnNhY3Rpb24oc2ltcGxlRGJNb2RlLCBBTExfU1RPUkVTLCBmdW5jdGlvbiAoc2ltcGxlRGJUeG4pIHtcclxuICAgICAgICAgICAgcGVyc2lzdGVuY2VUcmFuc2FjdGlvbiA9IG5ldyBJbmRleGVkRGJUcmFuc2FjdGlvbihzaW1wbGVEYlR4biwgX3RoaXMubGlzdGVuU2VxdWVuY2UubmV4dCgpKTtcclxuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdyZWFkd3JpdGUtcHJpbWFyeScgfHxcclxuICAgICAgICAgICAgICAgIG1vZGUgPT09ICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50Jykge1xyXG4gICAgICAgICAgICAgICAgLy8gV2hpbGUgd2UgbWVyZWx5IHZlcmlmeSB0aGF0IHdlIGhhdmUgKG9yIGNhbiBhY3F1aXJlKSB0aGUgbGVhc2VcclxuICAgICAgICAgICAgICAgIC8vIGltbWVkaWF0ZWx5LCB3ZSB3YWl0IHRvIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSB1bnRpbCBhZnRlclxyXG4gICAgICAgICAgICAgICAgLy8gZXhlY3V0aW5nIHRyYW5zYWN0aW9uT3BlcmF0aW9uKCkuIFRoaXMgZW5zdXJlcyB0aGF0IGV2ZW4gaWYgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2FjdGlvbk9wZXJhdGlvbiB0YWtlcyBhIGxvbmcgdGltZSwgd2UnbGwgdXNlIGEgcmVjZW50XHJcbiAgICAgICAgICAgICAgICAvLyBsZWFzZVRpbWVzdGFtcE1zIGluIHRoZSBleHRlbmRlZCAob3IgbmV3bHkgYWNxdWlyZWQpIGxlYXNlLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnZlcmlmeVByaW1hcnlMZWFzZShzaW1wbGVEYlR4bilcclxuICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoaG9sZHNQcmltYXJ5TGVhc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaG9sZHNQcmltYXJ5TGVhc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC8qIGhvbGRzUHJpbWFyeUxlYXNlPSAqLyB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY2FuQWN0QXNQcmltYXJ5KHNpbXBsZURiVHhuKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGhvbGRzUHJpbWFyeUxlYXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFob2xkc1ByaW1hcnlMZWFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcihcIkZhaWxlZCB0byBvYnRhaW4gcHJpbWFyeSBsZWFzZSBmb3IgYWN0aW9uICdcIiArIGFjdGlvbiArIFwiJy5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzUHJpbWFyeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcmltYXJ5U3RhdGVMaXN0ZW5lcihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCBQUklNQVJZX0xFQVNFX0xPU1RfRVJST1JfTVNHKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uT3BlcmF0aW9uKHBlcnNpc3RlbmNlVHJhbnNhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFjcXVpcmVPckV4dGVuZFByaW1hcnlMZWFzZShzaW1wbGVEYlR4bikubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHQ7IH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudmVyaWZ5QWxsb3dUYWJTeW5jaHJvbml6YXRpb24oc2ltcGxlRGJUeG4pLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbk9wZXJhdGlvbihwZXJzaXN0ZW5jZVRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBwZXJzaXN0ZW5jZVRyYW5zYWN0aW9uLnJhaXNlT25Db21taXR0ZWRFdmVudCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgY3VycmVudCB0YWIgaXMgdGhlIHByaW1hcnkgbGVhc2Vob2xkZXIgb3IgYWx0ZXJuYXRpdmVseVxyXG4gICAgICogdGhhdCB0aGUgbGVhc2Vob2xkZXIgaGFzIG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cclxuICAgICAqL1xyXG4gICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuIG5vIGxvbmdlclxyXG4gICAgLy8gYmUgdHVybmVkIG9mZi5cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS52ZXJpZnlBbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzdG9yZSA9IHByaW1hcnlDbGllbnRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHJldHVybiBzdG9yZS5nZXQoRGJQcmltYXJ5Q2xpZW50LmtleSkubmV4dChmdW5jdGlvbiAoY3VycmVudFByaW1hcnkpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRMZWFzZUlzVmFsaWQgPSBjdXJyZW50UHJpbWFyeSAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgX3RoaXMuaXNXaXRoaW5BZ2UoY3VycmVudFByaW1hcnkubGVhc2VUaW1lc3RhbXBNcywgTUFYX1BSSU1BUllfRUxJR0lCTEVfQUdFX01TKSAmJlxyXG4gICAgICAgICAgICAgICAgIV90aGlzLmlzQ2xpZW50Wm9tYmllZChjdXJyZW50UHJpbWFyeS5vd25lcklkKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMZWFzZUlzVmFsaWQgJiYgIV90aGlzLmlzTG9jYWxDbGllbnQoY3VycmVudFByaW1hcnkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRQcmltYXJ5LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgUFJJTUFSWV9MRUFTRV9FWENMVVNJVkVfRVJST1JfTVNHKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xyXG4gICAgICogbWV0aG9kIGRvZXMgbm90IHZlcmlmeSB0aGF0IHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoaXMgbGVhc2UuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5hY3F1aXJlT3JFeHRlbmRQcmltYXJ5TGVhc2UgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIG5ld1ByaW1hcnkgPSBuZXcgRGJQcmltYXJ5Q2xpZW50KHRoaXMuY2xpZW50SWQsIHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sIERhdGUubm93KCkpO1xyXG4gICAgICAgIHJldHVybiBwcmltYXJ5Q2xpZW50U3RvcmUodHhuKS5wdXQoRGJQcmltYXJ5Q2xpZW50LmtleSwgbmV3UHJpbWFyeSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UuaXNBdmFpbGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFNpbXBsZURiLmlzQXZhaWxhYmxlKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdXNlZCBhcyBhIHByZWZpeCB3aGVuIHN0b3JpbmcgZGF0YSBpbiBJbmRleGVkREIgYW5kXHJcbiAgICAgKiBMb2NhbFN0b3JhZ2UuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLmJ1aWxkU3RvcmFnZVByZWZpeCA9IGZ1bmN0aW9uIChkYXRhYmFzZUluZm8pIHtcclxuICAgICAgICAvLyBVc2UgdHdvIGRpZmZlcmVudCBwcmVmaXggZm9ybWF0czpcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAuIGRhdGFiYXNlSUQgLyAuLi5cclxuICAgICAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLyAuLi5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIHByb2plY3RJRHMgYXJlIEROUy1jb21wYXRpYmxlIG5hbWVzIGFuZCBjYW5ub3QgY29udGFpbiBkb3RzXHJcbiAgICAgICAgLy8gc28gdGhlcmUncyBubyBkYW5nZXIgb2YgY29sbGlzaW9ucy5cclxuICAgICAgICB2YXIgZGF0YWJhc2UgPSBkYXRhYmFzZUluZm8uZGF0YWJhc2VJZC5wcm9qZWN0SWQ7XHJcbiAgICAgICAgaWYgKCFkYXRhYmFzZUluZm8uZGF0YWJhc2VJZC5pc0RlZmF1bHREYXRhYmFzZSkge1xyXG4gICAgICAgICAgICBkYXRhYmFzZSArPSAnLicgKyBkYXRhYmFzZUluZm8uZGF0YWJhc2VJZC5kYXRhYmFzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICdmaXJlc3RvcmUvJyArIGRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSArICcvJyArIGRhdGFiYXNlICsgJy8nO1xyXG4gICAgfTtcclxuICAgIC8qKiBDaGVja3MgdGhlIHByaW1hcnkgbGVhc2UgYW5kIHJlbW92ZXMgaXQgaWYgd2UgYXJlIHRoZSBjdXJyZW50IHByaW1hcnkuICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUucmVsZWFzZVByaW1hcnlMZWFzZUlmSGVsZCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzdG9yZSA9IHByaW1hcnlDbGllbnRTdG9yZSh0eG4pO1xyXG4gICAgICAgIHJldHVybiBzdG9yZS5nZXQoRGJQcmltYXJ5Q2xpZW50LmtleSkubmV4dChmdW5jdGlvbiAocHJpbWFyeUNsaWVudCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuaXNMb2NhbENsaWVudChwcmltYXJ5Q2xpZW50KSkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQxLCAnUmVsZWFzaW5nIHByaW1hcnkgbGVhc2UuJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGVsZXRlKERiUHJpbWFyeUNsaWVudC5rZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5pc1dpdGhpbkFnZSA9IGZ1bmN0aW9uICh1cGRhdGVUaW1lTXMsIG1heEFnZU1zKSB7XHJcbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdmFyIG1pbkFjY2VwdGFibGUgPSBub3cgLSBtYXhBZ2VNcztcclxuICAgICAgICB2YXIgbWF4QWNjZXB0YWJsZSA9IG5vdztcclxuICAgICAgICBpZiAodXBkYXRlVGltZU1zIDwgbWluQWNjZXB0YWJsZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHVwZGF0ZVRpbWVNcyA+IG1heEFjY2VwdGFibGUpIHtcclxuICAgICAgICAgICAgZXJyb3IoXCJEZXRlY3RlZCBhbiB1cGRhdGUgdGltZSB0aGF0IGlzIGluIHRoZSBmdXR1cmU6IFwiICsgdXBkYXRlVGltZU1zICsgXCIgPiBcIiArIG1heEFjY2VwdGFibGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5hdHRhY2hWaXNpYmlsaXR5SGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmRvY3VtZW50ICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudFZpc2liaWxpdHlIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5Gb3JlZ3JvdW5kID0gX3RoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnVwZGF0ZUNsaWVudE1ldGFkYXRhQW5kVHJ5QmVjb21lUHJpbWFyeSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMuZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlcik7XHJcbiAgICAgICAgICAgIHRoaXMuaW5Gb3JlZ3JvdW5kID0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmRldGFjaFZpc2liaWxpdHlIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRvY3VtZW50VmlzaWJpbGl0eUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuZG9jdW1lbnQgIT09IG51bGwgJiZcclxuICAgICAgICAgICAgICAgIHR5cGVvZiB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicsIFwiRXhwZWN0ZWQgJ2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXInIHRvIGJlIGEgZnVuY3Rpb25cIik7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMuZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlcik7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRWaXNpYmlsaXR5SGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoZXMgYSB3aW5kb3cudW5sb2FkIGhhbmRsZXIgdGhhdCB3aWxsIHN5bmNocm9ub3VzbHkgd3JpdGUgb3VyXHJcbiAgICAgKiBjbGllbnRJZCB0byBhIFwiem9tYmllIGNsaWVudCBpZFwiIGxvY2F0aW9uIGluIExvY2FsU3RvcmFnZS4gVGhpcyBjYW4gYmUgdXNlZFxyXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcclxuICAgICAqIGlzIG5vIGxvbmdlciB2YWxpZCBldmVuIGlmIHRoZSB0aW1lc3RhbXAgaXMgcmVjZW50LiBUaGlzIGlzIHBhcnRpY3VsYXJseVxyXG4gICAgICogaW1wb3J0YW50IGZvciB0aGUgcmVmcmVzaCBjYXNlIChzbyB0aGUgdGFiIGNvcnJlY3RseSByZS1hY3F1aXJlcyB0aGVcclxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxyXG4gICAgICogaXQgaXMgYSBzeW5jaHJvbm91cyBBUEkgYW5kIHNvIGNhbiBiZSB1c2VkIHJlbGlhYmx5IGZyb20gIGFuIHVubG9hZFxyXG4gICAgICogaGFuZGxlci5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UucHJvdG90eXBlLmF0dGFjaFdpbmRvd1VubG9hZEhvb2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3dVbmxvYWRIYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogSW4gdGhlb3J5LCB0aGlzIHNob3VsZCBiZSBzY2hlZHVsZWQgb24gdGhlIEFzeW5jUXVldWUgc2luY2UgaXRcclxuICAgICAgICAgICAgICAgIC8vIGFjY2Vzc2VzIGludGVybmFsIHN0YXRlLiBXZSBleGVjdXRlIHRoaXMgY29kZSBkaXJlY3RseSBkdXJpbmcgc2h1dGRvd25cclxuICAgICAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBpdCBnZXRzIGEgY2hhbmNlIHRvIHJ1bi5cclxuICAgICAgICAgICAgICAgIF90aGlzLm1hcmtDbGllbnRab21iaWVkKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IGdyYWNlZnVsIHNodXRkb3duIChpbmNsdWRpbmcgcmVsZWFzaW5nIG91ciBwcmltYXJ5IGxlYXNlKSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgdGhlcmUncyBubyBndWFyYW50ZWUgaXQgd2lsbCBjb21wbGV0ZS5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2h1dGRvd24oKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmxvYWQnLCB0aGlzLndpbmRvd1VubG9hZEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZGV0YWNoV2luZG93VW5sb2FkSG9vayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy53aW5kb3dVbmxvYWRIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgdGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJywgXCJFeHBlY3RlZCAnd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXInIHRvIGJlIGEgZnVuY3Rpb25cIik7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIHRoaXMud2luZG93VW5sb2FkSGFuZGxlcik7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93VW5sb2FkSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB3aGV0aGVyIGEgY2xpZW50IGlzIFwiem9tYmllZFwiIGJhc2VkIG9uIGl0cyBMb2NhbFN0b3JhZ2UgZW50cnkuXHJcbiAgICAgKiBDbGllbnRzIGJlY29tZSB6b21iaWVkIHdoZW4gdGhlaXIgdGFiIGNsb3NlcyB3aXRob3V0IHJ1bm5pbmcgYWxsIG9mIHRoZVxyXG4gICAgICogY2xlYW51cCBsb2dpYyBpbiBgc2h1dGRvd24oKWAuXHJcbiAgICAgKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5pc0NsaWVudFpvbWJpZWQgPSBmdW5jdGlvbiAoY2xpZW50SWQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgaXNab21iaWVkID0gdGhpcy53ZWJTdG9yYWdlLmdldEl0ZW0odGhpcy56b21iaWVkQ2xpZW50TG9jYWxTdG9yYWdlS2V5KGNsaWVudElkKSkgIT09XHJcbiAgICAgICAgICAgICAgICBudWxsO1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDEsIFwiQ2xpZW50ICdcIiArIGNsaWVudElkICsgXCInIFwiICsgKGlzWm9tYmllZCA/ICdpcycgOiAnaXMgbm90JykgKyBcIiB6b21iaWVkIGluIExvY2FsU3RvcmFnZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlzWm9tYmllZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IHdvcmtpbmcuXHJcbiAgICAgICAgICAgIGVycm9yKExPR19UQUckMSwgJ0ZhaWxlZCB0byBnZXQgem9tYmllZCBjbGllbnQgaWQuJywgZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNvcmQgY2xpZW50IGFzIHpvbWJpZWQgKGEgY2xpZW50IHRoYXQgaGFkIGl0cyB0YWIgY2xvc2VkKS4gWm9tYmllZFxyXG4gICAgICogY2xpZW50cyBhcmUgaWdub3JlZCBkdXJpbmcgcHJpbWFyeSB0YWIgc2VsZWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJQZXJzaXN0ZW5jZS5wcm90b3R5cGUubWFya0NsaWVudFpvbWJpZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy53ZWJTdG9yYWdlLnNldEl0ZW0odGhpcy56b21iaWVkQ2xpZW50TG9jYWxTdG9yYWdlS2V5KHRoaXMuY2xpZW50SWQpLCBTdHJpbmcoRGF0ZS5ub3coKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3QgYXZhaWxhYmxlIC8gd29ya2luZy5cclxuICAgICAgICAgICAgZXJyb3IoJ0ZhaWxlZCB0byBzZXQgem9tYmllIGNsaWVudCBpZC4nLCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIFJlbW92ZXMgdGhlIHpvbWJpZWQgY2xpZW50IGVudHJ5IGlmIGl0IGV4aXN0cy4gKi9cclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS5yZW1vdmVDbGllbnRab21iaWVkRW50cnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy53ZWJTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy56b21iaWVkQ2xpZW50TG9jYWxTdG9yYWdlS2V5KHRoaXMuY2xpZW50SWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gSWdub3JlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYlBlcnNpc3RlbmNlLnByb3RvdHlwZS56b21iaWVkQ2xpZW50TG9jYWxTdG9yYWdlS2V5ID0gZnVuY3Rpb24gKGNsaWVudElkKSB7XHJcbiAgICAgICAgcmV0dXJuIFpPTUJJRURfQ0xJRU5UU19LRVlfUFJFRklYICsgXCJfXCIgKyB0aGlzLnBlcnNpc3RlbmNlS2V5ICsgXCJfXCIgKyBjbGllbnRJZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBtYWluIChhbmQgY3VycmVudGx5IG9ubHkpIEluZGV4ZWREQiBkYXRhYmFzZS4gdGhpcyBuYW1lIGlzXHJcbiAgICAgKiBhcHBlbmRlZCB0byB0aGUgcHJlZml4IHByb3ZpZGVkIHRvIHRoZSBJbmRleGVkRGJQZXJzaXN0ZW5jZSBjb25zdHJ1Y3Rvci5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2UuTUFJTl9EQVRBQkFTRSA9ICdtYWluJztcclxuICAgIHJldHVybiBJbmRleGVkRGJQZXJzaXN0ZW5jZTtcclxufSgpKTtcclxuZnVuY3Rpb24gaXNQcmltYXJ5TGVhc2VMb3N0RXJyb3IoZXJyKSB7XHJcbiAgICByZXR1cm4gKGVyci5jb2RlID09PSBDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04gJiZcclxuICAgICAgICBlcnIubWVzc2FnZSA9PT0gUFJJTUFSWV9MRUFTRV9MT1NUX0VSUk9SX01TRyk7XHJcbn1cclxuLyoqXHJcbiAqIFZlcmlmaWVzIHRoZSBlcnJvciB0aHJvd24gYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi4gSWYgYSBMb2NhbFN0b3JlXHJcbiAqIG9wZXJhdGlvbiBmYWlscyBiZWNhdXNlIHRoZSBwcmltYXJ5IGxlYXNlIGhhcyBiZWVuIHRha2VuIGJ5IGFub3RoZXIgY2xpZW50LFxyXG4gKiB3ZSBpZ25vcmUgdGhlIGVycm9yICh0aGUgcGVyc2lzdGVuY2UgbGF5ZXIgd2lsbCBpbW1lZGlhdGVseSBjYWxsXHJcbiAqIGBhcHBseVByaW1hcnlMZWFzZWAgdG8gcHJvcGFnYXRlIHRoZSBwcmltYXJ5IHN0YXRlIGNoYW5nZSkuIEFsbCBvdGhlciBlcnJvcnNcclxuICogYXJlIHJlLXRocm93bi5cclxuICpcclxuICogQHBhcmFtIGVyciBBbiBlcnJvciByZXR1cm5lZCBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLlxyXG4gKiBAcmV0dXJuIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHdlIHJlY292ZXJlZCwgb3IgdGhlIG9yaWdpbmFsIGVycm9yLlxyXG4gKi9cclxuZnVuY3Rpb24gaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGVycikge1xyXG4gICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgaWYgKGlzUHJpbWFyeUxlYXNlTG9zdEVycm9yKGVycikpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckMSwgJ1VuZXhwZWN0ZWRseSBsb3N0IHByaW1hcnkgbGVhc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBwcmltYXJ5IGNsaWVudCBvYmplY3Qgc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBwcmltYXJ5Q2xpZW50U3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gdHhuLnN0b3JlKERiUHJpbWFyeUNsaWVudC5zdG9yZSk7XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS5cclxuICovXHJcbmZ1bmN0aW9uIGNsaWVudE1ldGFkYXRhU3RvcmUodHhuKSB7XHJcbiAgICByZXR1cm4gdHhuLnN0b3JlKERiQ2xpZW50TWV0YWRhdGEuc3RvcmUpO1xyXG59XHJcbi8qKiBQcm92aWRlcyBMUlUgZnVuY3Rpb25hbGl0eSBmb3IgSW5kZXhlZERCIHBlcnNpc3RlbmNlLiAqL1xyXG52YXIgSW5kZXhlZERiTHJ1RGVsZWdhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJbmRleGVkRGJMcnVEZWxlZ2F0ZShkYiwgcGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5kYiA9IGRiO1xyXG4gICAgICAgIHRoaXMuaW5NZW1vcnlQaW5zID0gbnVsbDtcclxuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBuZXcgTHJ1R2FyYmFnZUNvbGxlY3Rvcih0aGlzLCBwYXJhbXMpO1xyXG4gICAgfVxyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLmdldFNlcXVlbmNlTnVtYmVyQ291bnQgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIGRvY0NvdW50UHJvbWlzZSA9IHRoaXMub3JwaGFuZWREb2NtZW50Q291bnQodHhuKTtcclxuICAgICAgICB2YXIgdGFyZ2V0Q291bnRQcm9taXNlID0gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KHR4bik7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldENvdW50UHJvbWlzZS5uZXh0KGZ1bmN0aW9uICh0YXJnZXRDb3VudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jQ291bnRQcm9taXNlLm5leHQoZnVuY3Rpb24gKGRvY0NvdW50KSB7IHJldHVybiB0YXJnZXRDb3VudCArIGRvY0NvdW50OyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUub3JwaGFuZWREb2NtZW50Q291bnQgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIG9ycGhhbmVkQ291bnQgPSAwO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2hPcnBoYW5lZERvY3VtZW50U2VxdWVuY2VOdW1iZXIodHhuLCBmdW5jdGlvbiAoXykge1xyXG4gICAgICAgICAgICBvcnBoYW5lZENvdW50Kys7XHJcbiAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBvcnBoYW5lZENvdW50OyB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZm9yRWFjaFRhcmdldCA9IGZ1bmN0aW9uICh0eG4sIGYpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodHhuLCBmKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnRTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uICh0eG4sIGYpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoT3JwaGFuZWREb2N1bWVudCh0eG4sIGZ1bmN0aW9uIChkb2NLZXksIHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmKHNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuc2V0SW5NZW1vcnlQaW5zID0gZnVuY3Rpb24gKGluTWVtb3J5UGlucykge1xyXG4gICAgICAgIHRoaXMuaW5NZW1vcnlQaW5zID0gaW5NZW1vcnlQaW5zO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5hZGRSZWZlcmVuY2UgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gd3JpdGVTZW50aW5lbEtleSh0eG4sIGtleSk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHJldHVybiB3cml0ZVNlbnRpbmVsS2V5KHR4biwga2V5KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0cyA9IGZ1bmN0aW9uICh0eG4sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRiXHJcbiAgICAgICAgICAgIC5nZXRUYXJnZXRDYWNoZSgpXHJcbiAgICAgICAgICAgIC5yZW1vdmVUYXJnZXRzKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlTXV0YXRpb25SZWZlcmVuY2UgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gd3JpdGVTZW50aW5lbEtleSh0eG4sIGtleSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55dGhpbmcgd291bGQgcHJldmVudCB0aGlzIGRvY3VtZW50IGZyb20gYmVpbmcgZ2FyYmFnZVxyXG4gICAgICogY29sbGVjdGVkLCBnaXZlbiB0aGF0IHRoZSBkb2N1bWVudCBpbiBxdWVzdGlvbiBpcyBub3QgcHJlc2VudCBpbiBhbnlcclxuICAgICAqIHRhcmdldHMgYW5kIGhhcyBhIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kIGZvclxyXG4gICAgICogdGhlIGNvbGxlY3Rpb24gcnVuLlxyXG4gICAgICovXHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuaXNQaW5uZWQgPSBmdW5jdGlvbiAodHhuLCBkb2NLZXkpIHtcclxuICAgICAgICBpZiAodGhpcy5pbk1lbW9yeVBpbnMuY29udGFpbnNLZXkoZG9jS2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbXV0YXRpb25RdWV1ZXNDb250YWluS2V5KHR4biwgZG9jS2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzID0gZnVuY3Rpb24gKHR4biwgdXBwZXJCb3VuZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGRvY3VtZW50Q2FjaGUgPSB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKTtcclxuICAgICAgICB2YXIgY2hhbmdlQnVmZmVyID0gZG9jdW1lbnRDYWNoZS5uZXdDaGFuZ2VCdWZmZXIoKTtcclxuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICB2YXIgZG9jdW1lbnRDb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIGl0ZXJhdGlvbiA9IHRoaXMuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnQodHhuLCBmdW5jdGlvbiAoZG9jS2V5LCBzZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICBpZiAoc2VxdWVuY2VOdW1iZXIgPD0gdXBwZXJCb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBfdGhpcy5pc1Bpbm5lZCh0eG4sIGRvY0tleSkubmV4dChmdW5jdGlvbiAoaXNQaW5uZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUGlubmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50Q291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNpemUgYWNjb3VudGluZyByZXF1aXJlcyB1cyB0byByZWFkIGFsbCBkb2N1bWVudHMgYmVmb3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIHRoZW0uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGFuZ2VCdWZmZXIuZ2V0RW50cnkodHhuLCBkb2NLZXkpLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlQnVmZmVyLnJlbW92ZUVudHJ5KGRvY0tleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRUYXJnZXRTdG9yZSh0eG4pLmRlbGV0ZShzZW50aW5lbEtleSQxKGRvY0tleSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gaXRlcmF0aW9uXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTsgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY2hhbmdlQnVmZmVyLmFwcGx5KHR4bik7IH0pXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50Q291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIEluZGV4ZWREYkxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXQgPSBmdW5jdGlvbiAodHhuLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIHVwZGF0ZWQgPSB0YXJnZXREYXRhLndpdGhTZXF1ZW5jZU51bWJlcih0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEodHhuLCB1cGRhdGVkKTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUudXBkYXRlTGltYm9Eb2N1bWVudCA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHJldHVybiB3cml0ZVNlbnRpbmVsS2V5KHR4biwga2V5KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggZG9jdW1lbnQgaW4gdGhlIGNhY2hlIHRoYXQgaXMgJ29ycGhhbmVkJy4gT3JwaGFuZWRcclxuICAgICAqIG1lYW5zIG5vdCBhIHBhcnQgb2YgYW55IHRhcmdldCwgc28gdGhlIG9ubHkgZW50cnkgaW4gdGhlIHRhcmdldC1kb2N1bWVudCBpbmRleCBmb3JcclxuICAgICAqIHRoYXQgZG9jdW1lbnQgd2lsbCBiZSB0aGUgc2VudGluZWwgcm93ICh0YXJnZXRJZCAwKSwgd2hpY2ggd2lsbCBhbHNvIGhhdmUgdGhlIHNlcXVlbmNlXHJcbiAgICAgKiBudW1iZXIgZm9yIHRoZSBsYXN0IHRpbWUgdGhlIGRvY3VtZW50IHdhcyBhY2Nlc3NlZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhlZERiTHJ1RGVsZWdhdGUucHJvdG90eXBlLmZvckVhY2hPcnBoYW5lZERvY3VtZW50ID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHZhciBzdG9yZSA9IGRvY3VtZW50VGFyZ2V0U3RvcmUodHhuKTtcclxuICAgICAgICB2YXIgbmV4dFRvUmVwb3J0ID0gTGlzdGVuU2VxdWVuY2UuSU5WQUxJRDtcclxuICAgICAgICB2YXIgbmV4dFBhdGg7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlXHJcbiAgICAgICAgICAgIC5pdGVyYXRlKHtcclxuICAgICAgICAgICAgaW5kZXg6IERiVGFyZ2V0RG9jdW1lbnQuZG9jdW1lbnRUYXJnZXRzSW5kZXhcclxuICAgICAgICB9LCBmdW5jdGlvbiAoX2EsIF9iKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IF9hWzBdLCBkb2NLZXkgPSBfYVsxXTtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBfYi5wYXRoLCBzZXF1ZW5jZU51bWJlciA9IF9iLnNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0SWQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIG5leHRUb1JlcG9ydCBpcyB2YWxpZCwgcmVwb3J0IGl0LCB0aGlzIGlzIGEgbmV3IGtleSBzbyB0aGVcclxuICAgICAgICAgICAgICAgIC8vIGxhc3Qgb25lIG11c3Qgbm90IGJlIGEgbWVtYmVyIG9mIGFueSB0YXJnZXRzLlxyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRUb1JlcG9ydCAhPT0gTGlzdGVuU2VxdWVuY2UuSU5WQUxJRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYobmV3IERvY3VtZW50S2V5KGRlY29kZShuZXh0UGF0aCkpLCBuZXh0VG9SZXBvcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSB0aGlzIHNlcXVlbmNlIG51bWJlci4gSXQncyB0aGUgbmV4dCBvbmUgd2VcclxuICAgICAgICAgICAgICAgIC8vIG1pZ2h0IHJlcG9ydCwgaWYgd2UgZG9uJ3QgZmluZCBhbnkgdGFyZ2V0cyBmb3IgdGhpcyBkb2N1bWVudC5cclxuICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgc2VxdWVuY2UgbnVtYmVyIG11c3QgYmUgZGVmaW5lZCB3aGVuIHRoZSB0YXJnZXRJZFxyXG4gICAgICAgICAgICAgICAgLy8gaXMgMC5cclxuICAgICAgICAgICAgICAgIG5leHRUb1JlcG9ydCA9IHNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgbmV4dFBhdGggPSBwYXRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSBpbnZhbGlkLCB3ZSBrbm93IHdlIGRvbid0IG5lZWQgdG8gcmVwb3J0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIG9uZSBzaW5jZSB3ZSBmb3VuZCBhIHRhcmdldCBmb3IgaXQuXHJcbiAgICAgICAgICAgICAgICBuZXh0VG9SZXBvcnQgPSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSByZXBvcnQgc2VxdWVuY2UgbnVtYmVycyBhZnRlciBnZXR0aW5nIHRvIHRoZSBuZXh0IGtleSwgd2VcclxuICAgICAgICAgICAgLy8gbmVlZCB0byBjaGVjayBpZiB0aGUgbGFzdCBrZXkgd2UgaXRlcmF0ZWQgb3ZlciB3YXMgYW4gb3JwaGFuZWRcclxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgYW5kIHJlcG9ydCBpdC5cclxuICAgICAgICAgICAgaWYgKG5leHRUb1JlcG9ydCAhPT0gTGlzdGVuU2VxdWVuY2UuSU5WQUxJRCkge1xyXG4gICAgICAgICAgICAgICAgZihuZXcgRG9jdW1lbnRLZXkoZGVjb2RlKG5leHRQYXRoKSksIG5leHRUb1JlcG9ydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBJbmRleGVkRGJMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZ2V0Q2FjaGVTaXplID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5nZXRTaXplKHR4bik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluZGV4ZWREYkxydURlbGVnYXRlO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBzZW50aW5lbEtleSQxKGtleSkge1xyXG4gICAgcmV0dXJuIFswLCBlbmNvZGUoa2V5LnBhdGgpXTtcclxufVxyXG4vKipcclxuICogQHJldHVybiBBIHZhbHVlIHN1aXRhYmxlIGZvciB3cml0aW5nIGEgc2VudGluZWwgcm93IGluIHRoZSB0YXJnZXQtZG9jdW1lbnRcclxuICogc3RvcmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZW50aW5lbFJvdyhrZXksIHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICByZXR1cm4gbmV3IERiVGFyZ2V0RG9jdW1lbnQoMCwgZW5jb2RlKGtleS5wYXRoKSwgc2VxdWVuY2VOdW1iZXIpO1xyXG59XHJcbmZ1bmN0aW9uIHdyaXRlU2VudGluZWxLZXkodHhuLCBrZXkpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFRhcmdldFN0b3JlKHR4bikucHV0KHNlbnRpbmVsUm93KGtleSwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBVbnR5cGVkIE51bWJlciBhbGlhcyB3ZSBjYW4gdXNlIHRvIGNoZWNrIGZvciBFUzYgbWV0aG9kcyAvIHByb3BlcnRpZXMuXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbnZhciBOdW1iZXJBc0FueSA9IE51bWJlcjtcclxuLyoqXHJcbiAqIE1pbmltdW0gc2FmZSBpbnRlZ2VyIGluIEphdmFzY3JpcHQgYmVjYXVzZSBvZiBmbG9hdGluZyBwb2ludCBwcmVjaXNpb24uXHJcbiAqIEFkZGVkIHRvIG5vdCByZWx5IG9uIEVTNiBmZWF0dXJlcy5cclxuICovXHJcbnZhciBNSU5fU0FGRV9JTlRFR0VSID0gTnVtYmVyQXNBbnkuTUlOX1NBRkVfSU5URUdFUiB8fCAtKE1hdGgucG93KDIsIDUzKSAtIDEpO1xyXG4vKipcclxuICogTWF4aW11bSBzYWZlIGludGVnZXIgaW4gSmF2YXNjcmlwdCBiZWNhdXNlIG9mIGZsb2F0aW5nIHBvaW50IHByZWNpc2lvbi5cclxuICogQWRkZWQgdG8gbm90IHJlbHkgb24gRVM2IGZlYXR1cmVzLlxyXG4gKi9cclxudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSBOdW1iZXJBc0FueS5NQVhfU0FGRV9JTlRFR0VSIHx8IE1hdGgucG93KDIsIDUzKSAtIDE7XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHdoZXRoZXIgYW4gbnVtYmVyIGlzIGFuIGludGVnZXIsIHVzZXMgbmF0aXZlIGltcGxlbWVudGF0aW9uIGlmXHJcbiAqIGF2YWlsYWJsZS5cclxuICogQWRkZWQgdG8gbm90IHJlbHkgb24gRVM2IGZlYXR1cmVzLlxyXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHRlc3QgZm9yIGJlaW5nIGFuIGludGVnZXJcclxuICovXHJcbnZhciBpc0ludGVnZXIgPSBOdW1iZXJBc0FueS5pc0ludGVnZXIgfHxcclxuICAgIChmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJlxyXG4gICAgICAgICAgICBpc0Zpbml0ZSh2YWx1ZSkgJiZcclxuICAgICAgICAgICAgTWF0aC5mbG9vcih2YWx1ZSkgPT09IHZhbHVlO1xyXG4gICAgfSk7XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YXJpYWJsZSBpcyBlaXRoZXIgdW5kZWZpbmVkIG9yIG51bGwuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBhIHZhbHVlIGlzIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIGludGVnZXIgcmFuZ2VcclxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byB0ZXN0IGZvciBiZWluZyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSByYW5nZVxyXG4gKi9cclxuZnVuY3Rpb24gaXNTYWZlSW50ZWdlcih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIChpc0ludGVnZXIodmFsdWUpICYmXHJcbiAgICAgICAgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUiAmJlxyXG4gICAgICAgIHZhbHVlID49IE1JTl9TQUZFX0lOVEVHRVIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBUYXJnZXQgcmVwcmVzZW50cyB0aGUgV2F0Y2hUYXJnZXQgcmVwcmVzZW50YXRpb24gb2YgYSBRdWVyeSwgd2hpY2ggaXMgdXNlZFxyXG4gKiBieSB0aGUgTG9jYWxTdG9yZSBhbmQgdGhlIFJlbW90ZVN0b3JlIHRvIGtlZXAgdHJhY2sgb2YgYW5kIHRvIGV4ZWN1dGVcclxuICogYmFja2VuZCBxdWVyaWVzLiBXaGlsZSBhIFF1ZXJ5IGNhbiByZXByZXNlbnQgbXVsdGlwbGUgVGFyZ2V0cywgZWFjaCBUYXJnZXRzXHJcbiAqIG1hcHMgdG8gYSBzaW5nbGUgV2F0Y2hUYXJnZXQgaW4gUmVtb3RlU3RvcmUgYW5kIGEgc2luZ2xlIFRhcmdldERhdGEgZW50cnlcclxuICogaW4gcGVyc2lzdGVuY2UuXHJcbiAqL1xyXG52YXIgVGFyZ2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBhIFRhcmdldCB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cclxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogeW91IHNob3VsZCBhbHdheXMgY29uc3RydWN0IGBUYXJnZXRgIGZyb20gYFF1ZXJ5LnRvVGFyZ2V0YCBpbnN0ZWFkIG9mXHJcbiAgICAgKiB1c2luZyB0aGlzIGNvbnN0cnVjdG9yLCBiZWNhdXNlIGBRdWVyeWAgcHJvdmlkZXMgYW4gaW1wbGljaXQgYG9yZGVyQnlgXHJcbiAgICAgKiBwcm9wZXJ0eS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gVGFyZ2V0KHBhdGgsIGNvbGxlY3Rpb25Hcm91cCwgb3JkZXJCeSwgZmlsdGVycywgbGltaXQsIHN0YXJ0QXQsIGVuZEF0KSB7XHJcbiAgICAgICAgaWYgKGNvbGxlY3Rpb25Hcm91cCA9PT0gdm9pZCAwKSB7IGNvbGxlY3Rpb25Hcm91cCA9IG51bGw7IH1cclxuICAgICAgICBpZiAob3JkZXJCeSA9PT0gdm9pZCAwKSB7IG9yZGVyQnkgPSBbXTsgfVxyXG4gICAgICAgIGlmIChmaWx0ZXJzID09PSB2b2lkIDApIHsgZmlsdGVycyA9IFtdOyB9XHJcbiAgICAgICAgaWYgKGxpbWl0ID09PSB2b2lkIDApIHsgbGltaXQgPSBudWxsOyB9XHJcbiAgICAgICAgaWYgKHN0YXJ0QXQgPT09IHZvaWQgMCkgeyBzdGFydEF0ID0gbnVsbDsgfVxyXG4gICAgICAgIGlmIChlbmRBdCA9PT0gdm9pZCAwKSB7IGVuZEF0ID0gbnVsbDsgfVxyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBjb2xsZWN0aW9uR3JvdXA7XHJcbiAgICAgICAgdGhpcy5vcmRlckJ5ID0gb3JkZXJCeTtcclxuICAgICAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzO1xyXG4gICAgICAgIHRoaXMubGltaXQgPSBsaW1pdDtcclxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSBzdGFydEF0O1xyXG4gICAgICAgIHRoaXMuZW5kQXQgPSBlbmRBdDtcclxuICAgICAgICB0aGlzLm1lbW9pemVkQ2Fub25pY2FsSWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5jYW5vbmljYWxJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5tZW1vaXplZENhbm9uaWNhbElkID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBjYW5vbmljYWxJZCA9IHRoaXMucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbkdyb3VwICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnfGNnOicgKyB0aGlzLmNvbGxlY3Rpb25Hcm91cDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnfGY6JztcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZmlsdGVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSBmaWx0ZXIuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICcsJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnfG9iOic7XHJcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogbWFrZSB0aGlzIGNvbGxpc2lvbiByZXNpc3RhbnRcclxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IHRoaXMub3JkZXJCeTsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRlckJ5ID0gX2NbX2JdO1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gb3JkZXJCeS5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJywnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcy5saW1pdCkpIHtcclxuICAgICAgICAgICAgICAgIGNhbm9uaWNhbElkICs9ICd8bDonO1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gdGhpcy5saW1pdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydEF0KSB7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSAnfGxiOic7XHJcbiAgICAgICAgICAgICAgICBjYW5vbmljYWxJZCArPSB0aGlzLnN0YXJ0QXQuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5lbmRBdCkge1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gJ3x1YjonO1xyXG4gICAgICAgICAgICAgICAgY2Fub25pY2FsSWQgKz0gdGhpcy5lbmRBdC5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRDYW5vbmljYWxJZCA9IGNhbm9uaWNhbElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5tZW1vaXplZENhbm9uaWNhbElkO1xyXG4gICAgfTtcclxuICAgIFRhcmdldC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHN0ciA9IHRoaXMucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9uR3JvdXAgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgc3RyICs9ICcgY29sbGVjdGlvbkdyb3VwPScgKyB0aGlzLmNvbGxlY3Rpb25Hcm91cDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHN0ciArPSBcIiwgZmlsdGVyczogW1wiICsgdGhpcy5maWx0ZXJzLmpvaW4oJywgJykgKyBcIl1cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLmxpbWl0KSkge1xyXG4gICAgICAgICAgICBzdHIgKz0gJywgbGltaXQ6ICcgKyB0aGlzLmxpbWl0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5vcmRlckJ5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgc3RyICs9IFwiLCBvcmRlckJ5OiBbXCIgKyB0aGlzLm9yZGVyQnkuam9pbignLCAnKSArIFwiXVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zdGFydEF0KSB7XHJcbiAgICAgICAgICAgIHN0ciArPSAnLCBzdGFydEF0OiAnICsgdGhpcy5zdGFydEF0LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmVuZEF0KSB7XHJcbiAgICAgICAgICAgIHN0ciArPSAnLCBlbmRBdDogJyArIHRoaXMuZW5kQXQuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFwiVGFyZ2V0KFwiICsgc3RyICsgXCIpXCI7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGltaXQgIT09IG90aGVyLmxpbWl0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMub3JkZXJCeS5sZW5ndGggIT09IG90aGVyLm9yZGVyQnkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm9yZGVyQnkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLm9yZGVyQnlbaV0uaXNFcXVhbChvdGhlci5vcmRlckJ5W2ldKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZpbHRlcnMubGVuZ3RoICE9PSBvdGhlci5maWx0ZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWx0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5maWx0ZXJzW2ldLmlzRXF1YWwob3RoZXIuZmlsdGVyc1tpXSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9uR3JvdXAgIT09IG90aGVyLmNvbGxlY3Rpb25Hcm91cCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5wYXRoLmlzRXF1YWwob3RoZXIucGF0aCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zdGFydEF0ICE9PSBudWxsXHJcbiAgICAgICAgICAgID8gIXRoaXMuc3RhcnRBdC5pc0VxdWFsKG90aGVyLnN0YXJ0QXQpXHJcbiAgICAgICAgICAgIDogb3RoZXIuc3RhcnRBdCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuZEF0ICE9PSBudWxsXHJcbiAgICAgICAgICAgID8gdGhpcy5lbmRBdC5pc0VxdWFsKG90aGVyLmVuZEF0KVxyXG4gICAgICAgICAgICA6IG90aGVyLmVuZEF0ID09PSBudWxsO1xyXG4gICAgfTtcclxuICAgIFRhcmdldC5wcm90b3R5cGUuaXNEb2N1bWVudFF1ZXJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleSh0aGlzLnBhdGgpICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3VwID09PSBudWxsICYmXHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVycy5sZW5ndGggPT09IDApO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUYXJnZXQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTGltaXRUeXBlO1xyXG4oZnVuY3Rpb24gKExpbWl0VHlwZSkge1xyXG4gICAgTGltaXRUeXBlW1wiRmlyc3RcIl0gPSBcIkZcIjtcclxuICAgIExpbWl0VHlwZVtcIkxhc3RcIl0gPSBcIkxcIjtcclxufSkoTGltaXRUeXBlIHx8IChMaW1pdFR5cGUgPSB7fSkpO1xyXG4vKipcclxuICogUXVlcnkgZW5jYXBzdWxhdGVzIGFsbCB0aGUgcXVlcnkgYXR0cmlidXRlcyB3ZSBzdXBwb3J0IGluIHRoZSBTREsuIEl0IGNhblxyXG4gKiBiZSBydW4gYWdhaW5zdCB0aGUgTG9jYWxTdG9yZSwgYXMgd2VsbCBhcyBiZSBjb252ZXJ0ZWQgdG8gYSBgVGFyZ2V0YCB0b1xyXG4gKiBxdWVyeSB0aGUgUmVtb3RlU3RvcmUgcmVzdWx0cy5cclxuICovXHJcbnZhciBRdWVyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgYSBRdWVyeSB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cclxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFF1ZXJ5KHBhdGgsIGNvbGxlY3Rpb25Hcm91cCwgZXhwbGljaXRPcmRlckJ5LCBmaWx0ZXJzLCBsaW1pdCwgbGltaXRUeXBlLCBzdGFydEF0LCBlbmRBdCkge1xyXG4gICAgICAgIGlmIChjb2xsZWN0aW9uR3JvdXAgPT09IHZvaWQgMCkgeyBjb2xsZWN0aW9uR3JvdXAgPSBudWxsOyB9XHJcbiAgICAgICAgaWYgKGV4cGxpY2l0T3JkZXJCeSA9PT0gdm9pZCAwKSB7IGV4cGxpY2l0T3JkZXJCeSA9IFtdOyB9XHJcbiAgICAgICAgaWYgKGZpbHRlcnMgPT09IHZvaWQgMCkgeyBmaWx0ZXJzID0gW107IH1cclxuICAgICAgICBpZiAobGltaXQgPT09IHZvaWQgMCkgeyBsaW1pdCA9IG51bGw7IH1cclxuICAgICAgICBpZiAobGltaXRUeXBlID09PSB2b2lkIDApIHsgbGltaXRUeXBlID0gTGltaXRUeXBlLkZpcnN0OyB9XHJcbiAgICAgICAgaWYgKHN0YXJ0QXQgPT09IHZvaWQgMCkgeyBzdGFydEF0ID0gbnVsbDsgfVxyXG4gICAgICAgIGlmIChlbmRBdCA9PT0gdm9pZCAwKSB7IGVuZEF0ID0gbnVsbDsgfVxyXG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGg7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBjb2xsZWN0aW9uR3JvdXA7XHJcbiAgICAgICAgdGhpcy5leHBsaWNpdE9yZGVyQnkgPSBleHBsaWNpdE9yZGVyQnk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJzID0gZmlsdGVycztcclxuICAgICAgICB0aGlzLmxpbWl0ID0gbGltaXQ7XHJcbiAgICAgICAgdGhpcy5saW1pdFR5cGUgPSBsaW1pdFR5cGU7XHJcbiAgICAgICAgdGhpcy5zdGFydEF0ID0gc3RhcnRBdDtcclxuICAgICAgICB0aGlzLmVuZEF0ID0gZW5kQXQ7XHJcbiAgICAgICAgdGhpcy5tZW1vaXplZE9yZGVyQnkgPSBudWxsO1xyXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZS5cclxuICAgICAgICB0aGlzLm1lbW9pemVkVGFyZ2V0ID0gbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5zdGFydEF0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0VmFsaWRCb3VuZCh0aGlzLnN0YXJ0QXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5lbmRBdCkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VydFZhbGlkQm91bmQodGhpcy5lbmRBdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgUXVlcnkuYXRQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHBhdGgpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeS5wcm90b3R5cGUsIFwib3JkZXJCeVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1lbW9pemVkT3JkZXJCeSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZXF1YWxpdHlGaWVsZCA9IHRoaXMuZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RPcmRlckJ5RmllbGQgPSB0aGlzLmdldEZpcnN0T3JkZXJCeUZpZWxkKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5lcXVhbGl0eUZpZWxkICE9PSBudWxsICYmIGZpcnN0T3JkZXJCeUZpZWxkID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gaW1wbGljaXRseSBhZGQga2V5IG9yZGVyaW5nLCB3ZSBtdXN0IGFsc28gYWRkIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGluZXF1YWxpdHkgZmlsdGVyIGZpZWxkIGZvciBpdCB0byBiZSBhIHZhbGlkIHF1ZXJ5LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgZGVmYXVsdCBpbmVxdWFsaXR5IGZpZWxkIGFuZCBrZXkgb3JkZXJpbmcgaXMgYXNjZW5kaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmVxdWFsaXR5RmllbGQuaXNLZXlGaWVsZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZWRPcmRlckJ5ID0gW0tFWV9PUkRFUklOR19BU0NdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplZE9yZGVyQnkgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgT3JkZXJCeShpbmVxdWFsaXR5RmllbGQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgS0VZX09SREVSSU5HX0FTQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydChpbmVxdWFsaXR5RmllbGQgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGZpcnN0T3JkZXJCeUZpZWxkICE9PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmVxdWFsaXR5RmllbGQuaXNFcXVhbChmaXJzdE9yZGVyQnlGaWVsZCkpLCAnRmlyc3Qgb3JkZXJCeSBzaG91bGQgbWF0Y2ggaW5lcXVhbGl0eSBmaWVsZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkT3JkZXJCeSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZEtleU9yZGVyaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZXhwbGljaXRPcmRlckJ5OyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJCeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplZE9yZGVyQnkucHVzaChvcmRlckJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyQnkuZmllbGQuaXNLZXlGaWVsZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZEtleU9yZGVyaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kS2V5T3JkZXJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG9yZGVyIG9mIHRoZSBpbXBsaWNpdCBrZXkgb3JkZXJpbmcgYWx3YXlzIG1hdGNoZXMgdGhlIGxhc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwbGljaXQgb3JkZXIgYnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3REaXJlY3Rpb24gPSB0aGlzLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZXhwbGljaXRPcmRlckJ5W3RoaXMuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBEaXJlY3Rpb24uQVNDRU5ESU5HO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkT3JkZXJCeS5wdXNoKGxhc3REaXJlY3Rpb24gPT09IERpcmVjdGlvbi5BU0NFTkRJTkdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gS0VZX09SREVSSU5HX0FTQ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBLRVlfT1JERVJJTkdfREVTQyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbW9pemVkT3JkZXJCeTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5hZGRGaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKCkgPT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAhKGZpbHRlciBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSB8fFxyXG4gICAgICAgICAgICAhZmlsdGVyLmlzSW5lcXVhbGl0eSgpIHx8XHJcbiAgICAgICAgICAgIGZpbHRlci5maWVsZC5pc0VxdWFsKHRoaXMuZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkKCkpLCAnUXVlcnkgbXVzdCBvbmx5IGhhdmUgb25lIGluZXF1YWxpdHkgZmllbGQuJyk7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmlzRG9jdW1lbnRRdWVyeSgpLCAnTm8gZmlsdGVyaW5nIGFsbG93ZWQgZm9yIGRvY3VtZW50IHF1ZXJ5Jyk7XHJcbiAgICAgICAgdmFyIG5ld0ZpbHRlcnMgPSB0aGlzLmZpbHRlcnMuY29uY2F0KFtmaWx0ZXJdKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMucGF0aCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAsIHRoaXMuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIG5ld0ZpbHRlcnMsIHRoaXMubGltaXQsIHRoaXMubGltaXRUeXBlLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5hZGRPcmRlckJ5ID0gZnVuY3Rpb24gKG9yZGVyQnkpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuc3RhcnRBdCAmJiAhdGhpcy5lbmRBdCwgJ0JvdW5kcyBtdXN0IGJlIHNldCBhZnRlciBvcmRlckJ5Jyk7XHJcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0ZSB0aGF0IG9yZGVyQnkgZG9lcyBub3QgbGlzdCB0aGUgc2FtZSBrZXkgdHdpY2UuXHJcbiAgICAgICAgdmFyIG5ld09yZGVyQnkgPSB0aGlzLmV4cGxpY2l0T3JkZXJCeS5jb25jYXQoW29yZGVyQnldKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMucGF0aCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAsIG5ld09yZGVyQnksIHRoaXMuZmlsdGVycy5zbGljZSgpLCB0aGlzLmxpbWl0LCB0aGlzLmxpbWl0VHlwZSwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0KTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUud2l0aExpbWl0VG9GaXJzdCA9IGZ1bmN0aW9uIChsaW1pdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIGxpbWl0LCBMaW1pdFR5cGUuRmlyc3QsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdCk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLndpdGhMaW1pdFRvTGFzdCA9IGZ1bmN0aW9uIChsaW1pdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgdGhpcy5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdGhpcy5maWx0ZXJzLnNsaWNlKCksIGxpbWl0LCBMaW1pdFR5cGUuTGFzdCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0KTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUud2l0aFN0YXJ0QXQgPSBmdW5jdGlvbiAoYm91bmQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMucGF0aCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAsIHRoaXMuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHRoaXMuZmlsdGVycy5zbGljZSgpLCB0aGlzLmxpbWl0LCB0aGlzLmxpbWl0VHlwZSwgYm91bmQsIHRoaXMuZW5kQXQpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS53aXRoRW5kQXQgPSBmdW5jdGlvbiAoYm91bmQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMucGF0aCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAsIHRoaXMuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHRoaXMuZmlsdGVycy5zbGljZSgpLCB0aGlzLmxpbWl0LCB0aGlzLmxpbWl0VHlwZSwgdGhpcy5zdGFydEF0LCBib3VuZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgdG8gY29udmVydCBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgaW50byBhIGNvbGxlY3Rpb24gcXVlcnkgYXQgYVxyXG4gICAgICogc3BlY2lmaWMgcGF0aC4gVGhpcyBpcyB1c2VkIHdoZW4gZXhlY3V0aW5nIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcywgc2luY2VcclxuICAgICAqIHdlIGhhdmUgdG8gc3BsaXQgdGhlIHF1ZXJ5IGludG8gYSBzZXQgb2YgY29sbGVjdGlvbiBxdWVyaWVzIGF0IG11bHRpcGxlXHJcbiAgICAgKiBwYXRocy5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmFzQ29sbGVjdGlvblF1ZXJ5QXRQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHBhdGgsIFxyXG4gICAgICAgIC8qY29sbGVjdGlvbkdyb3VwPSovIG51bGwsIHRoaXMuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHRoaXMuZmlsdGVycy5zbGljZSgpLCB0aGlzLmxpbWl0LCB0aGlzLmxpbWl0VHlwZSwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcclxuICAgICAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxyXG4gICAgICovXHJcbiAgICBRdWVyeS5wcm90b3R5cGUubWF0Y2hlc0FsbERvY3VtZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuZmlsdGVycy5sZW5ndGggPT09IDAgJiZcclxuICAgICAgICAgICAgdGhpcy5saW1pdCA9PT0gbnVsbCAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0QXQgPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICB0aGlzLmVuZEF0ID09IG51bGwgJiZcclxuICAgICAgICAgICAgKHRoaXMuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA9PT0gMCB8fFxyXG4gICAgICAgICAgICAgICAgKHRoaXMuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA9PT0gMSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkLmlzS2V5RmllbGQoKSkpKTtcclxuICAgIH07XHJcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgdW5pcXVlIHN0cmluZyBmcm9tIGEgcXVlcnkgdG8sIGZvclxyXG4gICAgLy8gZXhhbXBsZSwgdXNlIGFzIGEgZGljdGlvbmFyeSBrZXksIGJ1dCB0aGUgaW1wbGVtZW50YXRpb24gaXMgc3ViamVjdCB0b1xyXG4gICAgLy8gY29sbGlzaW9ucy4gTWFrZSBpdCBjb2xsaXNpb24tZnJlZS5cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5jYW5vbmljYWxJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1RhcmdldCgpLmNhbm9uaWNhbElkKCkgKyBcInxsdDpcIiArIHRoaXMubGltaXRUeXBlO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXCJRdWVyeSh0YXJnZXQ9XCIgKyB0aGlzLnRvVGFyZ2V0KCkudG9TdHJpbmcoKSArIFwiOyBsaW1pdFR5cGU9XCIgKyB0aGlzLmxpbWl0VHlwZSArIFwiKVwiO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnRvVGFyZ2V0KCkuaXNFcXVhbChvdGhlci50b1RhcmdldCgpKSAmJlxyXG4gICAgICAgICAgICB0aGlzLmxpbWl0VHlwZSA9PT0gb3RoZXIubGltaXRUeXBlKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZG9jQ29tcGFyYXRvciA9IGZ1bmN0aW9uIChkMSwgZDIpIHtcclxuICAgICAgICB2YXIgY29tcGFyZWRPbktleUZpZWxkID0gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMub3JkZXJCeTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG9yZGVyQnkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciBjb21wID0gb3JkZXJCeS5jb21wYXJlKGQxLCBkMik7XHJcbiAgICAgICAgICAgIGlmIChjb21wICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb21wYXJlZE9uS2V5RmllbGQgPSBjb21wYXJlZE9uS2V5RmllbGQgfHwgb3JkZXJCeS5maWVsZC5pc0tleUZpZWxkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VydCB0aGF0IHdlIGFjdHVhbGx5IGNvbXBhcmVkIGJ5IGtleVxyXG4gICAgICAgIGFzc2VydChjb21wYXJlZE9uS2V5RmllbGQsIFwib3JkZXJCeSB1c2VkIHRoYXQgZG9lc24ndCBjb21wYXJlIG9uIGtleSBmaWVsZFwiKTtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUubWF0Y2hlcyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMubWF0Y2hlc1BhdGhBbmRDb2xsZWN0aW9uR3JvdXAoZG9jKSAmJlxyXG4gICAgICAgICAgICB0aGlzLm1hdGNoZXNPcmRlckJ5KGRvYykgJiZcclxuICAgICAgICAgICAgdGhpcy5tYXRjaGVzRmlsdGVycyhkb2MpICYmXHJcbiAgICAgICAgICAgIHRoaXMubWF0Y2hlc0JvdW5kcyhkb2MpKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuaGFzTGltaXRUb0ZpcnN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5saW1pdCkgJiYgdGhpcy5saW1pdFR5cGUgPT09IExpbWl0VHlwZS5GaXJzdDtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuaGFzTGltaXRUb0xhc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICFpc051bGxPclVuZGVmaW5lZCh0aGlzLmxpbWl0KSAmJiB0aGlzLmxpbWl0VHlwZSA9PT0gTGltaXRUeXBlLkxhc3Q7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmdldEZpcnN0T3JkZXJCeUZpZWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgID8gdGhpcy5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGRcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5nZXRJbmVxdWFsaXR5RmlsdGVyRmllbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZmlsdGVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGZpbHRlciA9IF9hW19pXTtcclxuICAgICAgICAgICAgaWYgKGZpbHRlciBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyICYmIGZpbHRlci5pc0luZXF1YWxpdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlci5maWVsZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICAvLyBDaGVja3MgaWYgYW55IG9mIHRoZSBwcm92aWRlZCBPcGVyYXRvcnMgYXJlIGluY2x1ZGVkIGluIHRoZSBxdWVyeSBhbmRcclxuICAgIC8vIHJldHVybnMgdGhlIGZpcnN0IG9uZSB0aGF0IGlzLCBvciBudWxsIGlmIG5vbmUgYXJlLlxyXG4gICAgUXVlcnkucHJvdG90eXBlLmZpbmRGaWx0ZXJPcGVyYXRvciA9IGZ1bmN0aW9uIChvcGVyYXRvcnMpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5maWx0ZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmlsdGVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRvcnMuaW5kZXhPZihmaWx0ZXIub3ApID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLm9wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5pc0RvY3VtZW50UXVlcnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9UYXJnZXQoKS5pc0RvY3VtZW50UXVlcnkoKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2xsZWN0aW9uR3JvdXAgIT09IG51bGw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXQncyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgXHJcbiAgICAgKiByZXByZXNlbnRhdGlvbi5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnRvVGFyZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5tZW1vaXplZFRhcmdldCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saW1pdFR5cGUgPT09IExpbWl0VHlwZS5GaXJzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplZFRhcmdldCA9IG5ldyBUYXJnZXQodGhpcy5wYXRoLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCwgdGhpcy5vcmRlckJ5LCB0aGlzLmZpbHRlcnMsIHRoaXMubGltaXQsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXHJcbiAgICAgICAgICAgICAgICB2YXIgb3JkZXJCeXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLm9yZGVyQnk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyQnkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpciA9IG9yZGVyQnkuZGlyID09PSBEaXJlY3Rpb24uREVTQ0VORElOR1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IERpcmVjdGlvbi5BU0NFTkRJTkdcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBEaXJlY3Rpb24uREVTQ0VORElORztcclxuICAgICAgICAgICAgICAgICAgICBvcmRlckJ5cy5wdXNoKG5ldyBPcmRlckJ5KG9yZGVyQnkuZmllbGQsIGRpcikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBzd2FwIHRoZSBjdXJzb3JzIHRvIG1hdGNoIHRoZSBub3ctZmxpcHBlZCBxdWVyeSBvcmRlcmluZy5cclxuICAgICAgICAgICAgICAgIHZhciBzdGFydEF0ID0gdGhpcy5lbmRBdFxyXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IEJvdW5kKHRoaXMuZW5kQXQucG9zaXRpb24sICF0aGlzLmVuZEF0LmJlZm9yZSlcclxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kQXQgPSB0aGlzLnN0YXJ0QXRcclxuICAgICAgICAgICAgICAgICAgICA/IG5ldyBCb3VuZCh0aGlzLnN0YXJ0QXQucG9zaXRpb24sICF0aGlzLnN0YXJ0QXQuYmVmb3JlKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIC8vIE5vdyByZXR1cm4gYXMgYSBMaW1pdFR5cGUuRmlyc3QgcXVlcnkuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVkVGFyZ2V0ID0gbmV3IFRhcmdldCh0aGlzLnBhdGgsIHRoaXMuY29sbGVjdGlvbkdyb3VwLCBvcmRlckJ5cywgdGhpcy5maWx0ZXJzLCB0aGlzLmxpbWl0LCBzdGFydEF0LCBlbmRBdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZWRUYXJnZXQ7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm1hdGNoZXNQYXRoQW5kQ29sbGVjdGlvbkdyb3VwID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBkb2NQYXRoID0gZG9jLmtleS5wYXRoO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25Hcm91cCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBOT1RFOiB0aGlzLnBhdGggaXMgY3VycmVudGx5IGFsd2F5cyBlbXB0eSBzaW5jZSB3ZSBkb24ndCBleHBvc2UgQ29sbGVjdGlvblxyXG4gICAgICAgICAgICAvLyBHcm91cCBxdWVyaWVzIHJvb3RlZCBhdCBhIGRvY3VtZW50IHBhdGggeWV0LlxyXG4gICAgICAgICAgICByZXR1cm4gKGRvYy5rZXkuaGFzQ29sbGVjdGlvbklkKHRoaXMuY29sbGVjdGlvbkdyb3VwKSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXRoLmlzUHJlZml4T2YoZG9jUGF0aCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHRoaXMucGF0aCkpIHtcclxuICAgICAgICAgICAgLy8gZXhhY3QgbWF0Y2ggZm9yIGRvY3VtZW50IHF1ZXJpZXNcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5pc0VxdWFsKGRvY1BhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2hhbGxvdyBhbmNlc3RvciBxdWVyaWVzIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKGRvY1BhdGgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEEgZG9jdW1lbnQgbXVzdCBoYXZlIGEgdmFsdWUgZm9yIGV2ZXJ5IG9yZGVyaW5nIGNsYXVzZSBpbiBvcmRlciB0byBzaG93IHVwXHJcbiAgICAgKiBpbiB0aGUgcmVzdWx0cy5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLm1hdGNoZXNPcmRlckJ5ID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmV4cGxpY2l0T3JkZXJCeTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG9yZGVyQnkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIC8vIG9yZGVyIGJ5IGtleSBhbHdheXMgbWF0Y2hlc1xyXG4gICAgICAgICAgICBpZiAoIW9yZGVyQnkuZmllbGQuaXNLZXlGaWVsZCgpICYmIGRvYy5maWVsZChvcmRlckJ5LmZpZWxkKSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5tYXRjaGVzRmlsdGVycyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5maWx0ZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmlsdGVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoIWZpbHRlci5tYXRjaGVzKGRvYykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5tYXRjaGVzQm91bmRzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0QXQgJiYgIXRoaXMuc3RhcnRBdC5zb3J0c0JlZm9yZURvY3VtZW50KHRoaXMub3JkZXJCeSwgZG9jKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmVuZEF0ICYmIHRoaXMuZW5kQXQuc29ydHNCZWZvcmVEb2N1bWVudCh0aGlzLm9yZGVyQnksIGRvYykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuYXNzZXJ0VmFsaWRCb3VuZCA9IGZ1bmN0aW9uIChib3VuZCkge1xyXG4gICAgICAgIGFzc2VydChib3VuZC5wb3NpdGlvbi5sZW5ndGggPD0gdGhpcy5vcmRlckJ5Lmxlbmd0aCwgJ0JvdW5kIGlzIGxvbmdlciB0aGFuIG9yZGVyQnknKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUXVlcnk7XHJcbn0oKSk7XHJcbnZhciBGaWx0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWx0ZXIoKSB7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRmlsdGVyO1xyXG59KCkpO1xyXG52YXIgT3BlcmF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPcGVyYXRvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIH1cclxuICAgIE9wZXJhdG9yLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAob3ApIHtcclxuICAgICAgICBzd2l0Y2ggKG9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJzwnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkxFU1NfVEhBTjtcclxuICAgICAgICAgICAgY2FzZSAnPD0nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTDtcclxuICAgICAgICAgICAgY2FzZSAnPT0nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkVRVUFMO1xyXG4gICAgICAgICAgICBjYXNlICc+PSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMO1xyXG4gICAgICAgICAgICBjYXNlICc+JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5HUkVBVEVSX1RIQU47XHJcbiAgICAgICAgICAgIGNhc2UgJ2FycmF5LWNvbnRhaW5zJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUztcclxuICAgICAgICAgICAgY2FzZSAnaW4nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLklOO1xyXG4gICAgICAgICAgICBjYXNlICdhcnJheS1jb250YWlucy1hbnknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIEZpZWxkRmlsdGVyIG9wZXJhdG9yOiAnICsgb3ApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPcGVyYXRvci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcclxuICAgIH07XHJcbiAgICBPcGVyYXRvci5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5hbWUgPT09IG90aGVyLm5hbWU7XHJcbiAgICB9O1xyXG4gICAgT3BlcmF0b3IuTEVTU19USEFOID0gbmV3IE9wZXJhdG9yKCc8Jyk7XHJcbiAgICBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgPSBuZXcgT3BlcmF0b3IoJzw9Jyk7XHJcbiAgICBPcGVyYXRvci5FUVVBTCA9IG5ldyBPcGVyYXRvcignPT0nKTtcclxuICAgIE9wZXJhdG9yLkdSRUFURVJfVEhBTiA9IG5ldyBPcGVyYXRvcignPicpO1xyXG4gICAgT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMID0gbmV3IE9wZXJhdG9yKCc+PScpO1xyXG4gICAgT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgPSBuZXcgT3BlcmF0b3IoJ2FycmF5LWNvbnRhaW5zJyk7XHJcbiAgICBPcGVyYXRvci5JTiA9IG5ldyBPcGVyYXRvcignaW4nKTtcclxuICAgIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSA9IG5ldyBPcGVyYXRvcignYXJyYXktY29udGFpbnMtYW55Jyk7XHJcbiAgICByZXR1cm4gT3BlcmF0b3I7XHJcbn0oKSk7XHJcbnZhciBGaWVsZEZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhGaWVsZEZpbHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEZpZWxkRmlsdGVyKGZpZWxkLCBvcCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmZpZWxkID0gZmllbGQ7XHJcbiAgICAgICAgX3RoaXMub3AgPSBvcDtcclxuICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBGaWVsZEZpbHRlci5jcmVhdGUgPSBmdW5jdGlvbiAoZmllbGQsIG9wLCB2YWx1ZSkge1xyXG4gICAgICAgIGlmIChmaWVsZC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgaWYgKG9wID09PSBPcGVyYXRvci5JTikge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHZhbHVlIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSwgJ0NvbXBhcmluZyBvbiBrZXkgd2l0aCBJTiwgYnV0IGZpbHRlciB2YWx1ZSBub3QgYW4gQXJyYXlWYWx1ZScpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHZhbHVlLmludGVybmFsVmFsdWUuZXZlcnkoZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbSBpbnN0YW5jZW9mIFJlZlZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSksICdDb21wYXJpbmcgb24ga2V5IHdpdGggSU4sIGJ1dCBhbiBhcnJheSB2YWx1ZSB3YXMgbm90IGEgUmVmVmFsdWUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgS2V5RmllbGRJbkZpbHRlcihmaWVsZCwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHZhbHVlIGluc3RhbmNlb2YgUmVmVmFsdWUsICdDb21wYXJpbmcgb24ga2V5LCBidXQgZmlsdGVyIHZhbHVlIG5vdCBhIFJlZlZhbHVlJyk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQob3AgIT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICYmIG9wICE9PSBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlksIFwiJ1wiICsgb3AudG9TdHJpbmcoKSArIFwiJyBxdWVyaWVzIGRvbid0IG1ha2Ugc2Vuc2Ugb24gZG9jdW1lbnQga2V5cy5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEtleUZpZWxkRmlsdGVyKGZpZWxkLCBvcCwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlLmlzRXF1YWwoTnVsbFZhbHVlLklOU1RBTkNFKSkge1xyXG4gICAgICAgICAgICBpZiAob3AgIT09IE9wZXJhdG9yLkVRVUFMKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gTnVsbCBzdXBwb3J0cyBvbmx5IGVxdWFsaXR5IGNvbXBhcmlzb25zLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmllbGRGaWx0ZXIoZmllbGQsIG9wLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlLmlzRXF1YWwoRG91YmxlVmFsdWUuTkFOKSkge1xyXG4gICAgICAgICAgICBpZiAob3AgIT09IE9wZXJhdG9yLkVRVUFMKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gTmFOIHN1cHBvcnRzIG9ubHkgZXF1YWxpdHkgY29tcGFyaXNvbnMuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZEZpbHRlcihmaWVsZCwgb3AsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3AgPT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlDb250YWluc0ZpbHRlcihmaWVsZCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvcCA9PT0gT3BlcmF0b3IuSU4pIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHZhbHVlIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSwgJ0lOIGZpbHRlciBoYXMgaW52YWxpZCB2YWx1ZTogJyArIHZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEluRmlsdGVyKGZpZWxkLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9wID09PSBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHZhbHVlIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSwgJ0FSUkFZX0NPTlRBSU5TX0FOWSBmaWx0ZXIgaGFzIGludmFsaWQgdmFsdWU6ICcgKyB2YWx1ZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUNvbnRhaW5zQW55RmlsdGVyKGZpZWxkLCB2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpZWxkRmlsdGVyKGZpZWxkLCBvcCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaWVsZEZpbHRlci5wcm90b3R5cGUubWF0Y2hlcyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgb3RoZXIgPSBkb2MuZmllbGQodGhpcy5maWVsZCk7XHJcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHR5cGVzIHdpdGggbWF0Y2hpbmcgYmFja2VuZCBvcmRlciAoc3VjaCBhcyBkb3VibGUgYW5kIGludCkuXHJcbiAgICAgICAgcmV0dXJuIChvdGhlciAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICB0aGlzLnZhbHVlLnR5cGVPcmRlciA9PT0gb3RoZXIudHlwZU9yZGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24ob3RoZXIuY29tcGFyZVRvKHRoaXMudmFsdWUpKSk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRGaWx0ZXIucHJvdG90eXBlLm1hdGNoZXNDb21wYXJpc29uID0gZnVuY3Rpb24gKGNvbXBhcmlzb24pIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMub3ApIHtcclxuICAgICAgICAgICAgY2FzZSBPcGVyYXRvci5MRVNTX1RIQU46XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbiA8IDA7XHJcbiAgICAgICAgICAgIGNhc2UgT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb24gPD0gMDtcclxuICAgICAgICAgICAgY2FzZSBPcGVyYXRvci5FUVVBTDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uID09PSAwO1xyXG4gICAgICAgICAgICBjYXNlIE9wZXJhdG9yLkdSRUFURVJfVEhBTjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJpc29uID4gMDtcclxuICAgICAgICAgICAgY2FzZSBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUw6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyaXNvbiA+PSAwO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gRmllbGRGaWx0ZXIgb3BlcmF0b3I6ICcgKyB0aGlzLm9wKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmllbGRGaWx0ZXIucHJvdG90eXBlLmlzSW5lcXVhbGl0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKFtcclxuICAgICAgICAgICAgT3BlcmF0b3IuTEVTU19USEFOLFxyXG4gICAgICAgICAgICBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwsXHJcbiAgICAgICAgICAgIE9wZXJhdG9yLkdSRUFURVJfVEhBTixcclxuICAgICAgICAgICAgT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMXHJcbiAgICAgICAgXS5pbmRleE9mKHRoaXMub3ApID49IDApO1xyXG4gICAgfTtcclxuICAgIEZpZWxkRmlsdGVyLnByb3RvdHlwZS5jYW5vbmljYWxJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUZWNobmljYWxseSwgdGhpcyB3b24ndCBiZSB1bmlxdWUgaWYgdHdvIHZhbHVlcyBoYXZlXHJcbiAgICAgICAgLy8gdGhlIHNhbWUgZGVzY3JpcHRpb24sIHN1Y2ggYXMgdGhlIGludCAzIGFuZCB0aGUgc3RyaW5nIFwiM1wiLiBTbyB3ZSBzaG91bGRcclxuICAgICAgICAvLyBhZGQgdGhlIHR5cGVzIGluIGhlcmUgc29tZWhvdywgdG9vLlxyXG4gICAgICAgIHJldHVybiAodGhpcy5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHRoaXMub3AudG9TdHJpbmcoKSArIHRoaXMudmFsdWUudG9TdHJpbmcoKSk7XHJcbiAgICB9O1xyXG4gICAgRmllbGRGaWx0ZXIucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMub3AuaXNFcXVhbChvdGhlci5vcCkgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuZmllbGQuaXNFcXVhbChvdGhlci5maWVsZCkgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUuaXNFcXVhbChvdGhlci52YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaWVsZEZpbHRlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyBcIiBcIiArIHRoaXMub3AgKyBcIiBcIiArIHRoaXMudmFsdWUudmFsdWUoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmllbGRGaWx0ZXI7XHJcbn0oRmlsdGVyKSk7XHJcbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgKGkuZS4gJ19fbmFtZV9fJykuICovXHJcbnZhciBLZXlGaWVsZEZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhLZXlGaWVsZEZpbHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEtleUZpZWxkRmlsdGVyKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIEtleUZpZWxkRmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciByZWZWYWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgdmFyIGNvbXBhcmlzb24gPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKGRvYy5rZXksIHJlZlZhbHVlLmtleSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24oY29tcGFyaXNvbik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtleUZpZWxkRmlsdGVyO1xyXG59KEZpZWxkRmlsdGVyKSk7XHJcbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqL1xyXG52YXIgS2V5RmllbGRJbkZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhLZXlGaWVsZEluRmlsdGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gS2V5RmllbGRJbkZpbHRlcihmaWVsZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmaWVsZCwgT3BlcmF0b3IuSU4sIHZhbHVlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgS2V5RmllbGRJbkZpbHRlci5wcm90b3R5cGUubWF0Y2hlcyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgYXJyYXlWYWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5VmFsdWUuaW50ZXJuYWxWYWx1ZS5zb21lKGZ1bmN0aW9uIChyZWZWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jLmtleS5pc0VxdWFsKHJlZlZhbHVlLmtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtleUZpZWxkSW5GaWx0ZXI7XHJcbn0oRmllbGRGaWx0ZXIpKTtcclxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMgb3BlcmF0b3IuICovXHJcbnZhciBBcnJheUNvbnRhaW5zRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEFycmF5Q29udGFpbnNGaWx0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBcnJheUNvbnRhaW5zRmlsdGVyKGZpZWxkLCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBmaWVsZCwgT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMsIHZhbHVlKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgQXJyYXlDb250YWluc0ZpbHRlci5wcm90b3R5cGUubWF0Y2hlcyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgb3RoZXIgPSBkb2MuZmllbGQodGhpcy5maWVsZCk7XHJcbiAgICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSAmJiBvdGhlci5jb250YWlucyh0aGlzLnZhbHVlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXJyYXlDb250YWluc0ZpbHRlcjtcclxufShGaWVsZEZpbHRlcikpO1xyXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi9cclxudmFyIEluRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEluRmlsdGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSW5GaWx0ZXIoZmllbGQsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZmllbGQsIE9wZXJhdG9yLklOLCB2YWx1ZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEluRmlsdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBhcnJheVZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgICAgICB2YXIgb3RoZXIgPSBkb2MuZmllbGQodGhpcy5maWVsZCk7XHJcbiAgICAgICAgcmV0dXJuIG90aGVyICE9PSBudWxsICYmIGFycmF5VmFsdWUuY29udGFpbnMob3RoZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBJbkZpbHRlcjtcclxufShGaWVsZEZpbHRlcikpO1xyXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucy1hbnkgb3BlcmF0b3IuICovXHJcbnZhciBBcnJheUNvbnRhaW5zQW55RmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKEFycmF5Q29udGFpbnNBbnlGaWx0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBcnJheUNvbnRhaW5zQW55RmlsdGVyKGZpZWxkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZpZWxkLCBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlksIHZhbHVlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQXJyYXlDb250YWluc0FueUZpbHRlci5wcm90b3R5cGUubWF0Y2hlcyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBvdGhlciA9IGRvYy5maWVsZCh0aGlzLmZpZWxkKTtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSAmJlxyXG4gICAgICAgICAgICBvdGhlci5pbnRlcm5hbFZhbHVlLnNvbWUoZnVuY3Rpb24gKGxoc0VsZW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy52YWx1ZS5jb250YWlucyhsaHNFbGVtKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBcnJheUNvbnRhaW5zQW55RmlsdGVyO1xyXG59KEZpZWxkRmlsdGVyKSk7XHJcbi8qKlxyXG4gKiBUaGUgZGlyZWN0aW9uIG9mIHNvcnRpbmcgaW4gYW4gb3JkZXIgYnkuXHJcbiAqL1xyXG52YXIgRGlyZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGlyZWN0aW9uKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgfVxyXG4gICAgRGlyZWN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xyXG4gICAgfTtcclxuICAgIERpcmVjdGlvbi5BU0NFTkRJTkcgPSBuZXcgRGlyZWN0aW9uKCdhc2MnKTtcclxuICAgIERpcmVjdGlvbi5ERVNDRU5ESU5HID0gbmV3IERpcmVjdGlvbignZGVzYycpO1xyXG4gICAgcmV0dXJuIERpcmVjdGlvbjtcclxufSgpKTtcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBib3VuZCBvZiBhIHF1ZXJ5LlxyXG4gKlxyXG4gKiBUaGUgYm91bmQgaXMgc3BlY2lmaWVkIHdpdGggdGhlIGdpdmVuIGNvbXBvbmVudHMgcmVwcmVzZW50aW5nIGEgcG9zaXRpb24gYW5kXHJcbiAqIHdoZXRoZXIgaXQncyBqdXN0IGJlZm9yZSBvciBqdXN0IGFmdGVyIHRoZSBwb3NpdGlvbiAocmVsYXRpdmUgdG8gd2hhdGV2ZXIgdGhlXHJcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cclxuICpcclxuICogVGhlIHBvc2l0aW9uIHJlcHJlc2VudHMgYSBsb2dpY2FsIGluZGV4IHBvc2l0aW9uIGZvciBhIHF1ZXJ5LiBJdCdzIGEgcHJlZml4XHJcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxyXG4gKlxyXG4gKiBCb3VuZCBwcm92aWRlcyBhIGZ1bmN0aW9uIHRvIGRldGVybWluZSB3aGV0aGVyIGEgZG9jdW1lbnQgY29tZXMgYmVmb3JlIG9yXHJcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxyXG4gKiBqdXN0IGFmdGVyIHRoZSBwcm92aWRlZCB2YWx1ZXMuXHJcbiAqL1xyXG52YXIgQm91bmQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCb3VuZChwb3NpdGlvbiwgYmVmb3JlKSB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuYmVmb3JlID0gYmVmb3JlO1xyXG4gICAgfVxyXG4gICAgQm91bmQucHJvdG90eXBlLmNhbm9uaWNhbElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxyXG4gICAgICAgIHZhciBjYW5vbmljYWxJZCA9IHRoaXMuYmVmb3JlID8gJ2I6JyA6ICdhOic7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucG9zaXRpb247IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGNhbm9uaWNhbElkICs9IGNvbXBvbmVudC50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2Fub25pY2FsSWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBiZWZvcmUgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxyXG4gICAgICogb3JkZXIuXHJcbiAgICAgKi9cclxuICAgIEJvdW5kLnByb3RvdHlwZS5zb3J0c0JlZm9yZURvY3VtZW50ID0gZnVuY3Rpb24gKG9yZGVyQnksIGRvYykge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnBvc2l0aW9uLmxlbmd0aCA8PSBvcmRlckJ5Lmxlbmd0aCwgXCJCb3VuZCBoYXMgbW9yZSBjb21wb25lbnRzIHRoYW4gcXVlcnkncyBvcmRlckJ5XCIpO1xyXG4gICAgICAgIHZhciBjb21wYXJpc29uID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIG9yZGVyQnlDb21wb25lbnQgPSBvcmRlckJ5W2ldO1xyXG4gICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5wb3NpdGlvbltpXTtcclxuICAgICAgICAgICAgaWYgKG9yZGVyQnlDb21wb25lbnQuZmllbGQuaXNLZXlGaWVsZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoY29tcG9uZW50IGluc3RhbmNlb2YgUmVmVmFsdWUsICdCb3VuZCBoYXMgYSBub24ta2V5IHZhbHVlIHdoZXJlIHRoZSBrZXkgcGF0aCBpcyBiZWluZyB1c2VkLicpO1xyXG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IERvY3VtZW50S2V5LmNvbXBhcmF0b3IoY29tcG9uZW50LmtleSwgZG9jLmtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZG9jVmFsdWUgPSBkb2MuZmllbGQob3JkZXJCeUNvbXBvbmVudC5maWVsZCk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoZG9jVmFsdWUgIT09IG51bGwsICdGaWVsZCBzaG91bGQgZXhpc3Qgc2luY2UgZG9jdW1lbnQgbWF0Y2hlZCB0aGUgb3JkZXJCeSBhbHJlYWR5LicpO1xyXG4gICAgICAgICAgICAgICAgY29tcGFyaXNvbiA9IGNvbXBvbmVudC5jb21wYXJlVG8oZG9jVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcmRlckJ5Q29tcG9uZW50LmRpciA9PT0gRGlyZWN0aW9uLkRFU0NFTkRJTkcpIHtcclxuICAgICAgICAgICAgICAgIGNvbXBhcmlzb24gPSBjb21wYXJpc29uICogLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbXBhcmlzb24gIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmJlZm9yZSA/IGNvbXBhcmlzb24gPD0gMCA6IGNvbXBhcmlzb24gPCAwO1xyXG4gICAgfTtcclxuICAgIEJvdW5kLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKG90aGVyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYmVmb3JlICE9PSBvdGhlci5iZWZvcmUgfHxcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi5sZW5ndGggIT09IG90aGVyLnBvc2l0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgdGhpc1Bvc2l0aW9uID0gdGhpcy5wb3NpdGlvbltpXTtcclxuICAgICAgICAgICAgdmFyIG90aGVyUG9zaXRpb24gPSBvdGhlci5wb3NpdGlvbltpXTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzUG9zaXRpb24uaXNFcXVhbChvdGhlclBvc2l0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCb3VuZDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEFuIG9yZGVyaW5nIG9uIGEgZmllbGQsIGluIHNvbWUgRGlyZWN0aW9uLiBEaXJlY3Rpb24gZGVmYXVsdHMgdG8gQVNDRU5ESU5HLlxyXG4gKi9cclxudmFyIE9yZGVyQnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPcmRlckJ5KGZpZWxkLCBkaXIpIHtcclxuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XHJcbiAgICAgICAgaWYgKGRpciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGRpciA9IERpcmVjdGlvbi5BU0NFTkRJTkc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGlyID0gZGlyO1xyXG4gICAgICAgIHRoaXMuaXNLZXlPcmRlckJ5ID0gZmllbGQuaXNLZXlGaWVsZCgpO1xyXG4gICAgfVxyXG4gICAgT3JkZXJCeS5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIChkMSwgZDIpIHtcclxuICAgICAgICB2YXIgY29tcGFyaXNvbiA9IHRoaXMuaXNLZXlPcmRlckJ5XHJcbiAgICAgICAgICAgID8gRG9jdW1lbnQuY29tcGFyZUJ5S2V5KGQxLCBkMilcclxuICAgICAgICAgICAgOiBEb2N1bWVudC5jb21wYXJlQnlGaWVsZCh0aGlzLmZpZWxkLCBkMSwgZDIpO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5kaXIpIHtcclxuICAgICAgICAgICAgY2FzZSBEaXJlY3Rpb24uQVNDRU5ESU5HOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb247XHJcbiAgICAgICAgICAgIGNhc2UgRGlyZWN0aW9uLkRFU0NFTkRJTkc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTEgKiBjb21wYXJpc29uO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gZGlyZWN0aW9uOiAnICsgdGhpcy5kaXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPcmRlckJ5LnByb3RvdHlwZS5jYW5vbmljYWxJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBNYWtlIHRoaXMgY29sbGlzaW9uIHJvYnVzdC5cclxuICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHRoaXMuZGlyLnRvU3RyaW5nKCk7XHJcbiAgICB9O1xyXG4gICAgT3JkZXJCeS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyBcIiAoXCIgKyB0aGlzLmRpciArIFwiKVwiO1xyXG4gICAgfTtcclxuICAgIE9yZGVyQnkucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kaXIgPT09IG90aGVyLmRpciAmJiB0aGlzLmZpZWxkLmlzRXF1YWwob3RoZXIuZmllbGQpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBPcmRlckJ5O1xyXG59KCkpO1xyXG52YXIgS0VZX09SREVSSU5HX0FTQyA9IG5ldyBPcmRlckJ5KEZpZWxkUGF0aC5rZXlGaWVsZCgpLCBEaXJlY3Rpb24uQVNDRU5ESU5HKTtcclxudmFyIEtFWV9PUkRFUklOR19ERVNDID0gbmV3IE9yZGVyQnkoRmllbGRQYXRoLmtleUZpZWxkKCksIERpcmVjdGlvbi5ERVNDRU5ESU5HKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRPT0QoYi8xNDA5Mzg1MTIpOiBEcm9wIFNpbXBsZVF1ZXJ5RW5naW5lIGFuZCByZW5hbWUgSW5kZXhGcmVlUXVlcnlFbmdpbmUuXHJcbi8qKlxyXG4gKiBBIHF1ZXJ5IGVuZ2luZSB0aGF0IHRha2VzIGFkdmFudGFnZSBvZiB0aGUgdGFyZ2V0IGRvY3VtZW50IG1hcHBpbmcgaW4gdGhlXHJcbiAqIFF1ZXJ5Q2FjaGUuIFRoZSBJbmRleEZyZWVRdWVyeUVuZ2luZSBvcHRpbWl6ZXMgcXVlcnkgZXhlY3V0aW9uIGJ5IG9ubHlcclxuICogcmVhZGluZyB0aGUgZG9jdW1lbnRzIHRoYXQgcHJldmlvdXNseSBtYXRjaGVkIGEgcXVlcnkgcGx1cyBhbnkgZG9jdW1lbnRzIHRoYXQgd2VyZVxyXG4gKiBlZGl0ZWQgYWZ0ZXIgdGhlIHF1ZXJ5IHdhcyBsYXN0IGxpc3RlbmVkIHRvLlxyXG4gKlxyXG4gKiBUaGVyZSBhcmUgc29tZSBjYXNlcyB3aGVyZSBJbmRleC1GcmVlIHF1ZXJpZXMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIHByb2R1Y2VcclxuICogdGhlIHNhbWUgcmVzdWx0cyBhcyBmdWxsIGNvbGxlY3Rpb24gc2NhbnMuIEluIHRoZXNlIGNhc2VzLCB0aGVcclxuICogSW5kZXhGcmVlUXVlcnlFbmdpbmUgZmFsbHMgYmFjayB0byBmdWxsIHF1ZXJ5IHByb2Nlc3NpbmcuIFRoZXNlIGNhc2VzIGFyZTpcclxuICpcclxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBwcmV2aW91c2x5IG5vIGxvbmdlclxyXG4gKiAgIG1hdGNoZXMgdGhlIHF1ZXJ5LlxyXG4gKlxyXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCBlZGl0IG1heSBjYXVzZSB0aGUgZG9jdW1lbnQgdG8gc29ydCBiZWxvd1xyXG4gKiAgIGFub3RoZXIgZG9jdW1lbnQgdGhhdCBpcyBpbiB0aGUgbG9jYWwgY2FjaGUuXHJcbiAqXHJcbiAqIC0gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgYmVlbiBDVVJSRU5UIG9yIGZyZWUgb2YgTGltYm8gZG9jdW1lbnRzLlxyXG4gKi9cclxudmFyIEluZGV4RnJlZVF1ZXJ5RW5naW5lID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW5kZXhGcmVlUXVlcnlFbmdpbmUoKSB7XHJcbiAgICB9XHJcbiAgICBJbmRleEZyZWVRdWVyeUVuZ2luZS5wcm90b3R5cGUuc2V0TG9jYWxEb2N1bWVudHNWaWV3ID0gZnVuY3Rpb24gKGxvY2FsRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbERvY3VtZW50c1ZpZXcgPSBsb2NhbERvY3VtZW50cztcclxuICAgIH07XHJcbiAgICBJbmRleEZyZWVRdWVyeUVuZ2luZS5wcm90b3R5cGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcXVlcnksIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHJlbW90ZUtleXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmxvY2FsRG9jdW1lbnRzVmlldyAhPT0gdW5kZWZpbmVkLCAnc2V0TG9jYWxEb2N1bWVudHNWaWV3KCkgbm90IGNhbGxlZCcpO1xyXG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBtYXRjaCBhbGwgZG9jdW1lbnRzIGRvbid0IGJlbmVmaXQgZnJvbSB1c2luZ1xyXG4gICAgICAgIC8vIEluZGV4RnJlZVF1ZXJpZXMuIEl0IGlzIG1vcmUgZWZmaWNpZW50IHRvIHNjYW4gYWxsIGRvY3VtZW50cyBpbiBhXHJcbiAgICAgICAgLy8gY29sbGVjdGlvbiwgcmF0aGVyIHRoYW4gdG8gcGVyZm9ybSBpbmRpdmlkdWFsIGxvb2t1cHMuXHJcbiAgICAgICAgaWYgKHF1ZXJ5Lm1hdGNoZXNBbGxEb2N1bWVudHMoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlRnVsbENvbGxlY3Rpb25TY2FuKHRyYW5zYWN0aW9uLCBxdWVyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXHJcbiAgICAgICAgLy8gc2hvdWxkIGFsc28gYmUgcnVuIGFzIGEgZnVsbCBjb2xsZWN0aW9uIHNjYW4uXHJcbiAgICAgICAgaWYgKGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlRnVsbENvbGxlY3Rpb25TY2FuKHRyYW5zYWN0aW9uLCBxdWVyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsRG9jdW1lbnRzVmlldy5nZXREb2N1bWVudHModHJhbnNhY3Rpb24sIHJlbW90ZUtleXMpLm5leHQoZnVuY3Rpb24gKGRvY3VtZW50cykge1xyXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNSZXN1bHRzID0gX3RoaXMuYXBwbHlRdWVyeShxdWVyeSwgZG9jdW1lbnRzKTtcclxuICAgICAgICAgICAgaWYgKChxdWVyeS5oYXNMaW1pdFRvRmlyc3QoKSB8fCBxdWVyeS5oYXNMaW1pdFRvTGFzdCgpKSAmJlxyXG4gICAgICAgICAgICAgICAgX3RoaXMubmVlZHNSZWZpbGwocXVlcnkubGltaXRUeXBlLCBwcmV2aW91c1Jlc3VsdHMsIHJlbW90ZUtleXMsIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZXhlY3V0ZUZ1bGxDb2xsZWN0aW9uU2Nhbih0cmFuc2FjdGlvbiwgcXVlcnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChnZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZygnSW5kZXhGcmVlUXVlcnlFbmdpbmUnLCAnUmUtdXNpbmcgcHJldmlvdXMgcmVzdWx0IGZyb20gJXMgdG8gZXhlY3V0ZSBxdWVyeTogJXMnLCBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLnRvU3RyaW5nKCksIHF1ZXJ5LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFJldHJpZXZlIGFsbCByZXN1bHRzIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3RcclxuICAgICAgICAgICAgLy8gbGltYm8tZG9jdW1lbnQgZnJlZSByZW1vdGUgc25hcHNob3QuXHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50c1ZpZXcuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnksIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pLm5leHQoZnVuY3Rpb24gKHVwZGF0ZWRSZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBtZXJnZSBgcHJldmlvdXNSZXN1bHRzYCBpbnRvIGB1cGRhdGVSZXN1bHRzYCwgc2luY2VcclxuICAgICAgICAgICAgICAgIC8vIGB1cGRhdGVSZXN1bHRzYCBpcyBhbHJlYWR5IGEgRG9jdW1lbnRNYXAuIElmIGEgZG9jdW1lbnQgaXNcclxuICAgICAgICAgICAgICAgIC8vIGNvbnRhaW5lZCBpbiBib3RoIGxpc3RzLCB0aGVuIGl0cyBjb250ZW50cyBhcmUgdGhlIHNhbWUuXHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3VsdHMuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFJlc3VsdHMgPSB1cGRhdGVkUmVzdWx0cy5pbnNlcnQoZG9jLmtleSwgZG9jKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWRSZXN1bHRzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogQXBwbGllcyB0aGUgcXVlcnkgZmlsdGVyIGFuZCBzb3J0aW5nIHRvIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuICAqL1xyXG4gICAgSW5kZXhGcmVlUXVlcnlFbmdpbmUucHJvdG90eXBlLmFwcGx5UXVlcnkgPSBmdW5jdGlvbiAocXVlcnksIGRvY3VtZW50cykge1xyXG4gICAgICAgIC8vIFNvcnQgdGhlIGRvY3VtZW50cyBhbmQgcmUtYXBwbHkgdGhlIHF1ZXJ5IGZpbHRlciBzaW5jZSBwcmV2aW91c2x5XHJcbiAgICAgICAgLy8gbWF0Y2hpbmcgZG9jdW1lbnRzIGRvIG5vdCBuZWNlc3NhcmlseSBzdGlsbCBtYXRjaCB0aGUgcXVlcnkuXHJcbiAgICAgICAgdmFyIHF1ZXJ5UmVzdWx0cyA9IG5ldyBTb3J0ZWRTZXQoZnVuY3Rpb24gKGQxLCBkMikge1xyXG4gICAgICAgICAgICByZXR1cm4gcXVlcnkuZG9jQ29tcGFyYXRvcihkMSwgZDIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChfLCBtYXliZURvYykge1xyXG4gICAgICAgICAgICBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBEb2N1bWVudCAmJiBxdWVyeS5tYXRjaGVzKG1heWJlRG9jKSkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlSZXN1bHRzID0gcXVlcnlSZXN1bHRzLmFkZChtYXliZURvYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcXVlcnlSZXN1bHRzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxyXG4gICAgICogaW5lbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBleGVjdXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNvcnRlZFByZXZpb3VzUmVzdWx0cyBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgd2hlbiBpdFxyXG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLCBzb3J0ZWQgYnkgdGhlIHF1ZXJ5J3MgY29tcGFyYXRvci5cclxuICAgICAqIEBwYXJhbSByZW1vdGVLZXlzIFRoZSBkb2N1bWVudCBrZXlzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIGxhc3RcclxuICAgICAqIHNuYXBzaG90LlxyXG4gICAgICogQHBhcmFtIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiBUaGUgdmVyc2lvbiBvZiB0aGUgc25hcHNob3Qgd2hlbiB0aGUgcXVlcnlcclxuICAgICAqIHdhcyBsYXN0IHN5bmNocm9uaXplZC5cclxuICAgICAqL1xyXG4gICAgSW5kZXhGcmVlUXVlcnlFbmdpbmUucHJvdG90eXBlLm5lZWRzUmVmaWxsID0gZnVuY3Rpb24gKGxpbWl0VHlwZSwgc29ydGVkUHJldmlvdXNSZXN1bHRzLCByZW1vdGVLZXlzLCBsaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICAvLyBUaGUgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgaWYgYSBwcmV2aW91c2x5IG1hdGNoaW5nIGRvY3VtZW50IG5vXHJcbiAgICAgICAgLy8gbG9uZ2VyIG1hdGNoZXMuXHJcbiAgICAgICAgaWYgKHJlbW90ZUtleXMuc2l6ZSAhPT0gc29ydGVkUHJldmlvdXNSZXN1bHRzLnNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIExpbWl0IHF1ZXJpZXMgYXJlIG5vdCBlbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBxdWVyeSBleGVjdXRpb24gaWYgdGhlcmUgaXNcclxuICAgICAgICAvLyBhIHBvdGVudGlhbCB0aGF0IGFuIG9sZGVyIGRvY3VtZW50IGZyb20gY2FjaGUgbm93IHNvcnRzIGJlZm9yZSBhIGRvY3VtZW50XHJcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXHJcbiAgICAgICAgLy8gdGhlIGRvY3VtZW50IGF0IHRoZSBlZGdlIG9mIHRoZSBsaW1pdCBnb2VzIG91dCBvZiBsaW1pdC5cclxuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IHRoYXQgaXMgbm90IHRoZSBsaW1pdCBib3VuZGFyeSBzb3J0cyBkaWZmZXJlbnRseSxcclxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcclxuICAgICAgICAvLyB3aWxsIGNvbnRpbnVlIHRvIGJlIFwicmVqZWN0ZWRcIiBieSB0aGlzIGJvdW5kYXJ5LiBUaGVyZWZvcmUsIHdlIGNhbiBpZ25vcmVcclxuICAgICAgICAvLyBhbnkgbW9kaWZpY2F0aW9ucyB0aGF0IGRvbid0IGFmZmVjdCB0aGUgbGFzdCBkb2N1bWVudC5cclxuICAgICAgICB2YXIgZG9jQXRMaW1pdEVkZ2UgPSBsaW1pdFR5cGUgPT09IExpbWl0VHlwZS5GaXJzdFxyXG4gICAgICAgICAgICA/IHNvcnRlZFByZXZpb3VzUmVzdWx0cy5sYXN0KClcclxuICAgICAgICAgICAgOiBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMuZmlyc3QoKTtcclxuICAgICAgICBpZiAoIWRvY0F0TGltaXRFZGdlKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gcmVmaWxsIHRoZSBxdWVyeSBpZiB0aGVyZSB3ZXJlIGFscmVhZHkgbm8gZG9jdW1lbnRzLlxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoZG9jQXRMaW1pdEVkZ2UuaGFzUGVuZGluZ1dyaXRlcyB8fFxyXG4gICAgICAgICAgICBkb2NBdExpbWl0RWRnZS52ZXJzaW9uLmNvbXBhcmVUbyhsaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pID4gMCk7XHJcbiAgICB9O1xyXG4gICAgSW5kZXhGcmVlUXVlcnlFbmdpbmUucHJvdG90eXBlLmV4ZWN1dGVGdWxsQ29sbGVjdGlvblNjYW4gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5KSB7XHJcbiAgICAgICAgaWYgKGdldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICAgICAgZGVidWcoJ0luZGV4RnJlZVF1ZXJ5RW5naW5lJywgJ1VzaW5nIGZ1bGwgY29sbGVjdGlvbiBzY2FuIHRvIGV4ZWN1dGUgcXVlcnk6ICVzJywgcXVlcnkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsRG9jdW1lbnRzVmlldy5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHRyYW5zYWN0aW9uLCBxdWVyeSwgU25hcHNob3RWZXJzaW9uLk1JTik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEluZGV4RnJlZVF1ZXJ5RW5naW5lO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgcmVhZG9ubHkgdmlldyBvZiB0aGUgbG9jYWwgc3RhdGUgb2YgYWxsIGRvY3VtZW50cyB3ZSdyZSB0cmFja2luZyAoaS5lLiB3ZVxyXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxyXG4gKiBkb2N1bWVudCkuIFRoZSB2aWV3IGlzIGNvbXB1dGVkIGJ5IGFwcGx5aW5nIHRoZSBtdXRhdGlvbnMgaW4gdGhlXHJcbiAqIE11dGF0aW9uUXVldWUgdG8gdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUuXHJcbiAqL1xyXG52YXIgTG9jYWxEb2N1bWVudHNWaWV3ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTG9jYWxEb2N1bWVudHNWaWV3KHJlbW90ZURvY3VtZW50Q2FjaGUsIG11dGF0aW9uUXVldWUsIGluZGV4TWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IHJlbW90ZURvY3VtZW50Q2FjaGU7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gbXV0YXRpb25RdWV1ZTtcclxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGluZGV4TWFuYWdlcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBpZGVudGlmaWVkIGJ5IGBrZXlgLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gTG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgb3IgbnVsbCBpZiB3ZSBkb24ndCBoYXZlIGFueSBjYWNoZWRcclxuICAgICAqIHN0YXRlIGZvciBpdC5cclxuICAgICAqL1xyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5nZXREb2N1bWVudCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwga2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlXHJcbiAgICAgICAgICAgIC5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0cmFuc2FjdGlvbiwga2V5KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoYmF0Y2hlcykgeyByZXR1cm4gX3RoaXMuZ2V0RG9jdW1lbnRJbnRlcm5hbCh0cmFuc2FjdGlvbiwga2V5LCBiYXRjaGVzKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEludGVybmFsIHZlcnNpb24gb2YgYGdldERvY3VtZW50YCB0aGF0IGFsbG93cyByZXVzaW5nIGJhdGNoZXMuICovXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50SW50ZXJuYWwgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGtleSwgaW5CYXRjaGVzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSh0cmFuc2FjdGlvbiwga2V5KS5uZXh0KGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpbkJhdGNoZXNfMSA9IGluQmF0Y2hlczsgX2kgPCBpbkJhdGNoZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYXRjaCA9IGluQmF0Y2hlc18xW19pXTtcclxuICAgICAgICAgICAgICAgIGRvYyA9IGJhdGNoLmFwcGx5VG9Mb2NhbFZpZXcoa2V5LCBkb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkb2M7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmV0dXJucyB0aGUgdmlldyBvZiB0aGUgZ2l2ZW4gYGRvY3NgIGFzIHRoZXkgd291bGQgYXBwZWFyIGFmdGVyIGFwcGx5aW5nXHJcbiAgICAvLyBhbGwgbXV0YXRpb25zIGluIHRoZSBnaXZlbiBgYmF0Y2hlc2AuXHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmFwcGx5TG9jYWxNdXRhdGlvbnNUb0RvY3VtZW50cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jcywgYmF0Y2hlcykge1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gbnVsbGFibGVNYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgZG9jcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGxvY2FsVmlldykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGJhdGNoZXNfMSA9IGJhdGNoZXM7IF9pIDwgYmF0Y2hlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gYmF0Y2hlc18xW19pXTtcclxuICAgICAgICAgICAgICAgIGxvY2FsVmlldyA9IGJhdGNoLmFwcGx5VG9Mb2NhbFZpZXcoa2V5LCBsb2NhbFZpZXcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChrZXksIGxvY2FsVmlldyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgaWRlbnRpZmllZCBieSBga2V5c2AuXHJcbiAgICAgKlxyXG4gICAgICogSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc3RhdGUgZm9yIGEgZG9jdW1lbnQgaW4gYGtleXNgLCBhIE5vRG9jdW1lbnQgd2lsbFxyXG4gICAgICogYmUgc3RvcmVkIGZvciB0aGF0IGtleSBpbiB0aGUgcmVzdWx0aW5nIHNldC5cclxuICAgICAqL1xyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5nZXREb2N1bWVudHMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGtleXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGVcclxuICAgICAgICAgICAgLmdldEVudHJpZXModHJhbnNhY3Rpb24sIGtleXMpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChkb2NzKSB7IHJldHVybiBfdGhpcy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyh0cmFuc2FjdGlvbiwgZG9jcyk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2ltaWxhciB0byBgZ2V0RG9jdW1lbnRzYCwgYnV0IGNyZWF0ZXMgdGhlIGxvY2FsIHZpZXcgZnJvbSB0aGUgZ2l2ZW5cclxuICAgICAqIGBiYXNlRG9jc2Agd2l0aG91dCByZXRyaWV2aW5nIGRvY3VtZW50cyBmcm9tIHRoZSBsb2NhbCBzdG9yZS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmFzZURvY3MpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWVcclxuICAgICAgICAgICAgLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0cmFuc2FjdGlvbiwgYmFzZURvY3MpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChiYXRjaGVzKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2NzID0gX3RoaXMuYXBwbHlMb2NhbE11dGF0aW9uc1RvRG9jdW1lbnRzKHRyYW5zYWN0aW9uLCBiYXNlRG9jcywgYmF0Y2hlcyk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgICAgICBkb2NzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgbWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oaHR0cDovL2IvMzIyNzUzNzgpOiBEb24ndCBjb25mbGF0ZSBtaXNzaW5nIC8gZGVsZXRlZC5cclxuICAgICAgICAgICAgICAgIGlmICghbWF5YmVEb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXliZURvYyA9IG5ldyBOb0RvY3VtZW50KGtleSwgU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoa2V5LCBtYXliZURvYyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgdmlldyBvZiBhbGwgZG9jdW1lbnRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiBUaGUgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHRvIG1hdGNoIGRvY3VtZW50cyBhZ2FpbnN0LlxyXG4gICAgICogQHBhcmFtIHNpbmNlUmVhZFRpbWUgSWYgbm90IHNldCB0byBTbmFwc2hvdFZlcnNpb24uTUlOLCByZXR1cm4gb25seVxyXG4gICAgICogICAgIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiByZWFkIHNpbmNlIHRoaXMgc25hcHNob3QgdmVyc2lvbiAoZXhjbHVzaXZlKS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSkge1xyXG4gICAgICAgIGlmIChxdWVyeS5pc0RvY3VtZW50UXVlcnkoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkodHJhbnNhY3Rpb24sIHF1ZXJ5LnBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChxdWVyeS5pc0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uR3JvdXBRdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTG9jYWxEb2N1bWVudHNWaWV3LnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY1BhdGgpIHtcclxuICAgICAgICAvLyBKdXN0IGRvIGEgc2ltcGxlIGRvY3VtZW50IGxvb2t1cC5cclxuICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudCh0cmFuc2FjdGlvbiwgbmV3IERvY3VtZW50S2V5KGRvY1BhdGgpKS5uZXh0KGZ1bmN0aW9uIChtYXliZURvYykge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZG9jdW1lbnRNYXAoKTtcclxuICAgICAgICAgICAgaWYgKG1heWJlRG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5pbnNlcnQobWF5YmVEb2Mua2V5LCBtYXliZURvYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHF1ZXJ5LCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQocXVlcnkucGF0aC5pc0VtcHR5KCksICdDdXJyZW50bHkgd2Ugb25seSBzdXBwb3J0IGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcyBhdCB0aGUgcm9vdC4nKTtcclxuICAgICAgICB2YXIgY29sbGVjdGlvbklkID0gcXVlcnkuY29sbGVjdGlvbkdyb3VwO1xyXG4gICAgICAgIHZhciByZXN1bHRzID0gZG9jdW1lbnRNYXAoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXJcclxuICAgICAgICAgICAgLmdldENvbGxlY3Rpb25QYXJlbnRzKHRyYW5zYWN0aW9uLCBjb2xsZWN0aW9uSWQpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChwYXJlbnRzKSB7XHJcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gYSBjb2xsZWN0aW9uIHF1ZXJ5IGFnYWluc3QgZWFjaCBwYXJlbnQgdGhhdCBjb250YWlucyB0aGVcclxuICAgICAgICAgICAgLy8gY29sbGVjdGlvbklkIGFuZCBhZ2dyZWdhdGUgdGhlIHJlc3VsdHMuXHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChwYXJlbnRzLCBmdW5jdGlvbiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvblF1ZXJ5ID0gcXVlcnkuYXNDb2xsZWN0aW9uUXVlcnlBdFBhdGgocGFyZW50LmNoaWxkKGNvbGxlY3Rpb25JZCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KHRyYW5zYWN0aW9uLCBjb2xsZWN0aW9uUXVlcnksIHNpbmNlUmVhZFRpbWUpLm5leHQoZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICByLmZvckVhY2goZnVuY3Rpb24gKGtleSwgZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChrZXksIGRvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiByZXN1bHRzOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gUXVlcnkgdGhlIHJlbW90ZSBkb2N1bWVudHMgYW5kIG92ZXJsYXkgbXV0YXRpb25zLlxyXG4gICAgICAgIHZhciByZXN1bHRzO1xyXG4gICAgICAgIHZhciBtdXRhdGlvbkJhdGNoZXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZVxyXG4gICAgICAgICAgICAuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0cmFuc2FjdGlvbiwgcXVlcnksIHNpbmNlUmVhZFRpbWUpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChxdWVyeVJlc3VsdHMpIHtcclxuICAgICAgICAgICAgcmVzdWx0cyA9IHF1ZXJ5UmVzdWx0cztcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodHJhbnNhY3Rpb24sIHF1ZXJ5KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAobWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXMpIHtcclxuICAgICAgICAgICAgbXV0YXRpb25CYXRjaGVzID0gbWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXM7XHJcbiAgICAgICAgICAgIC8vIEl0IGlzIHBvc3NpYmxlIHRoYXQgYSBQYXRjaE11dGF0aW9uIGNhbiBtYWtlIGEgZG9jdW1lbnQgbWF0Y2ggYSBxdWVyeSwgZXZlbiBpZlxyXG4gICAgICAgICAgICAvLyB0aGUgdmVyc2lvbiBpbiB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZSBpcyBub3QgYSBtYXRjaCB5ZXQgKHdhaXRpbmcgZm9yIHNlcnZlclxyXG4gICAgICAgICAgICAvLyB0byBhY2spLiBUbyBoYW5kbGUgdGhpcywgd2UgZmluZCBhbGwgZG9jdW1lbnQga2V5cyBhZmZlY3RlZCBieSB0aGUgUGF0Y2hNdXRhdGlvbnNcclxuICAgICAgICAgICAgLy8gdGhhdCBhcmUgbm90IGluIGByZXN1bHRgIHlldCwgYW5kIGJhY2sgZmlsbCB0aGVtIHZpYSBgcmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyaWVzYCxcclxuICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRob3NlIGBQYXRjaE11dGF0aW9uc2Agd2lsbCBiZSBpZ25vcmVkIGJlY2F1c2Ugbm8gYmFzZSBkb2N1bWVudCBjYW4gYmUgZm91bmQsXHJcbiAgICAgICAgICAgIC8vIGFuZCBsZWFkIHRvIG1pc3NpbmcgcmVzdWx0IGZvciB0aGUgcXVlcnkuXHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5hZGRNaXNzaW5nQmFzZURvY3VtZW50cyh0cmFuc2FjdGlvbiwgbXV0YXRpb25CYXRjaGVzLCByZXN1bHRzKS5uZXh0KGZ1bmN0aW9uIChtZXJnZWREb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBtZXJnZWREb2N1bWVudHM7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG11dGF0aW9uQmF0Y2hlc18xID0gbXV0YXRpb25CYXRjaGVzOyBfaSA8IG11dGF0aW9uQmF0Y2hlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYXRjaCA9IG11dGF0aW9uQmF0Y2hlc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gYmF0Y2gubXV0YXRpb25zOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfYltfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBtdXRhdGlvbi5rZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYXNlRG9jID0gcmVzdWx0cy5nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG11dGF0ZWREb2MgPSBtdXRhdGlvbi5hcHBseVRvTG9jYWxWaWV3KGJhc2VEb2MsIGJhc2VEb2MsIGJhdGNoLmxvY2FsV3JpdGVUaW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0ZWREb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuaW5zZXJ0KGtleSwgbXV0YXRlZERvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5yZW1vdmUoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBGaW5hbGx5LCBmaWx0ZXIgb3V0IGFueSBkb2N1bWVudHMgdGhhdCBkb24ndCBhY3R1YWxseSBtYXRjaFxyXG4gICAgICAgICAgICAvLyB0aGUgcXVlcnkuXHJcbiAgICAgICAgICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgIGlmICghcXVlcnkubWF0Y2hlcyhkb2MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMucmVtb3ZlKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMb2NhbERvY3VtZW50c1ZpZXcucHJvdG90eXBlLmFkZE1pc3NpbmdCYXNlRG9jdW1lbnRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBtYXRjaGluZ011dGF0aW9uQmF0Y2hlcywgZXhpc3RpbmdEb2N1bWVudHMpIHtcclxuICAgICAgICB2YXIgbWlzc2luZ0Jhc2VEb2NFbnRyaWVzRm9yUGF0Y2hpbmcgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgbWF0Y2hpbmdNdXRhdGlvbkJhdGNoZXNfMSA9IG1hdGNoaW5nTXV0YXRpb25CYXRjaGVzOyBfaSA8IG1hdGNoaW5nTXV0YXRpb25CYXRjaGVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBiYXRjaCA9IG1hdGNoaW5nTXV0YXRpb25CYXRjaGVzXzFbX2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gYmF0Y2gubXV0YXRpb25zOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gX2JbX2FdO1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uIGluc3RhbmNlb2YgUGF0Y2hNdXRhdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nRG9jdW1lbnRzLmdldChtdXRhdGlvbi5rZXkpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWlzc2luZ0Jhc2VEb2NFbnRyaWVzRm9yUGF0Y2hpbmcgPSBtaXNzaW5nQmFzZURvY0VudHJpZXNGb3JQYXRjaGluZy5hZGQobXV0YXRpb24ua2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbWVyZ2VkRG9jdW1lbnRzID0gZXhpc3RpbmdEb2N1bWVudHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZVxyXG4gICAgICAgICAgICAuZ2V0RW50cmllcyh0cmFuc2FjdGlvbiwgbWlzc2luZ0Jhc2VEb2NFbnRyaWVzRm9yUGF0Y2hpbmcpXHJcbiAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChtaXNzaW5nQmFzZURvY3MpIHtcclxuICAgICAgICAgICAgbWlzc2luZ0Jhc2VEb2NzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgZG9jKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jICE9PSBudWxsICYmIGRvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkRG9jdW1lbnRzID0gbWVyZ2VkRG9jdW1lbnRzLmluc2VydChrZXksIGRvYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gbWVyZ2VkRG9jdW1lbnRzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMb2NhbERvY3VtZW50c1ZpZXc7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcclxuICogKGVpdGhlciBhIHRhcmdldCBJRCBvciBiYXRjaCBJRCkuIEFzIHJlZmVyZW5jZXMgYXJlIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbVxyXG4gKiB0aGUgc2V0IGNvcnJlc3BvbmRpbmcgZXZlbnRzIGFyZSBlbWl0dGVkIHRvIGEgcmVnaXN0ZXJlZCBnYXJiYWdlIGNvbGxlY3Rvci5cclxuICpcclxuICogRWFjaCByZWZlcmVuY2UgaXMgcmVwcmVzZW50ZWQgYnkgYSBEb2N1bWVudFJlZmVyZW5jZSBvYmplY3QuIEVhY2ggb2YgdGhlbVxyXG4gKiBjb250YWlucyBlbm91Z2ggaW5mb3JtYXRpb24gdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhlIHJlZmVyZW5jZS4gVGhleSBhcmUgYWxsXHJcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcclxuICogdGhlcmUncyBubyByZWZlcmVuY2VzIGluIHRoYXQgc2V0ICh0aGlzIGNhbiBiZSBlZmZpY2llbnRseSBjaGVja2VkIHRoYW5rcyB0b1xyXG4gKiBzb3J0aW5nIGJ5IGtleSkuXHJcbiAqXHJcbiAqIFJlZmVyZW5jZVNldCBhbHNvIGtlZXBzIGEgc2Vjb25kYXJ5IHNldCB0aGF0IGNvbnRhaW5zIHJlZmVyZW5jZXMgc29ydGVkIGJ5XHJcbiAqIElEcy4gVGhpcyBvbmUgaXMgdXNlZCB0byBlZmZpY2llbnRseSBpbXBsZW1lbnQgcmVtb3ZhbCBvZiBhbGwgcmVmZXJlbmNlcyBieVxyXG4gKiBzb21lIHRhcmdldCBJRC5cclxuICovXHJcbnZhciBSZWZlcmVuY2VTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZWZlcmVuY2VTZXQoKSB7XHJcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSBrZXkuXHJcbiAgICAgICAgdGhpcy5yZWZzQnlLZXkgPSBuZXcgU29ydGVkU2V0KERvY1JlZmVyZW5jZS5jb21wYXJlQnlLZXkpO1xyXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxyXG4gICAgICAgIHRoaXMucmVmc0J5VGFyZ2V0ID0gbmV3IFNvcnRlZFNldChEb2NSZWZlcmVuY2UuY29tcGFyZUJ5VGFyZ2V0SWQpO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqL1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZnNCeUtleS5pc0VtcHR5KCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEFkZHMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuIElELiAqL1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5hZGRSZWZlcmVuY2UgPSBmdW5jdGlvbiAoa2V5LCBpZCkge1xyXG4gICAgICAgIHZhciByZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGtleSwgaWQpO1xyXG4gICAgICAgIHRoaXMucmVmc0J5S2V5ID0gdGhpcy5yZWZzQnlLZXkuYWRkKHJlZik7XHJcbiAgICAgICAgdGhpcy5yZWZzQnlUYXJnZXQgPSB0aGlzLnJlZnNCeVRhcmdldC5hZGQocmVmKTtcclxuICAgIH07XHJcbiAgICAvKiogQWRkIHJlZmVyZW5jZXMgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleXMgZm9yIHRoZSBnaXZlbiBJRC4gKi9cclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUuYWRkUmVmZXJlbmNlcyA9IGZ1bmN0aW9uIChrZXlzLCBpZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIF90aGlzLmFkZFJlZmVyZW5jZShrZXksIGlkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlblxyXG4gICAgICogSUQuXHJcbiAgICAgKi9cclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUucmVtb3ZlUmVmZXJlbmNlID0gZnVuY3Rpb24gKGtleSwgaWQpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZVJlZihuZXcgRG9jUmVmZXJlbmNlKGtleSwgaWQpKTtcclxuICAgIH07XHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLnJlbW92ZVJlZmVyZW5jZXMgPSBmdW5jdGlvbiAoa2V5cywgaWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBfdGhpcy5yZW1vdmVSZWZlcmVuY2Uoa2V5LCBpZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIGFsbCByZWZlcmVuY2VzIHdpdGggYSBnaXZlbiBJRC4gQ2FsbHMgcmVtb3ZlUmVmKCkgZm9yIGVhY2gga2V5XHJcbiAgICAgKiByZW1vdmVkLlxyXG4gICAgICovXHJcbiAgICBSZWZlcmVuY2VTZXQucHJvdG90eXBlLnJlbW92ZVJlZmVyZW5jZXNGb3JJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGVtcHR5S2V5ID0gRG9jdW1lbnRLZXkuRU1QVFk7XHJcbiAgICAgICAgdmFyIHN0YXJ0UmVmID0gbmV3IERvY1JlZmVyZW5jZShlbXB0eUtleSwgaWQpO1xyXG4gICAgICAgIHZhciBlbmRSZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGVtcHR5S2V5LCBpZCArIDEpO1xyXG4gICAgICAgIHZhciBrZXlzID0gW107XHJcbiAgICAgICAgdGhpcy5yZWZzQnlUYXJnZXQuZm9yRWFjaEluUmFuZ2UoW3N0YXJ0UmVmLCBlbmRSZWZdLCBmdW5jdGlvbiAocmVmKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlbW92ZVJlZihyZWYpO1xyXG4gICAgICAgICAgICBrZXlzLnB1c2gocmVmLmtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICB9O1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5yZW1vdmVBbGxSZWZlcmVuY2VzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5yZWZzQnlLZXkuZm9yRWFjaChmdW5jdGlvbiAocmVmKSB7IHJldHVybiBfdGhpcy5yZW1vdmVSZWYocmVmKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVmZXJlbmNlU2V0LnByb3RvdHlwZS5yZW1vdmVSZWYgPSBmdW5jdGlvbiAocmVmKSB7XHJcbiAgICAgICAgdGhpcy5yZWZzQnlLZXkgPSB0aGlzLnJlZnNCeUtleS5kZWxldGUocmVmKTtcclxuICAgICAgICB0aGlzLnJlZnNCeVRhcmdldCA9IHRoaXMucmVmc0J5VGFyZ2V0LmRlbGV0ZShyZWYpO1xyXG4gICAgfTtcclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUucmVmZXJlbmNlc0ZvcklkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdmFyIGVtcHR5S2V5ID0gRG9jdW1lbnRLZXkuRU1QVFk7XHJcbiAgICAgICAgdmFyIHN0YXJ0UmVmID0gbmV3IERvY1JlZmVyZW5jZShlbXB0eUtleSwgaWQpO1xyXG4gICAgICAgIHZhciBlbmRSZWYgPSBuZXcgRG9jUmVmZXJlbmNlKGVtcHR5S2V5LCBpZCArIDEpO1xyXG4gICAgICAgIHZhciBrZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB0aGlzLnJlZnNCeVRhcmdldC5mb3JFYWNoSW5SYW5nZShbc3RhcnRSZWYsIGVuZFJlZl0sIGZ1bmN0aW9uIChyZWYpIHtcclxuICAgICAgICAgICAga2V5cyA9IGtleXMuYWRkKHJlZi5rZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfTtcclxuICAgIFJlZmVyZW5jZVNldC5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIHJlZiA9IG5ldyBEb2NSZWZlcmVuY2Uoa2V5LCAwKTtcclxuICAgICAgICB2YXIgZmlyc3RSZWYgPSB0aGlzLnJlZnNCeUtleS5maXJzdEFmdGVyT3JFcXVhbChyZWYpO1xyXG4gICAgICAgIHJldHVybiBmaXJzdFJlZiAhPT0gbnVsbCAmJiBrZXkuaXNFcXVhbChmaXJzdFJlZi5rZXkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZWZlcmVuY2VTZXQ7XHJcbn0oKSk7XHJcbnZhciBEb2NSZWZlcmVuY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2NSZWZlcmVuY2Uoa2V5LCB0YXJnZXRPckJhdGNoSWQpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICB0aGlzLnRhcmdldE9yQmF0Y2hJZCA9IHRhcmdldE9yQmF0Y2hJZDtcclxuICAgIH1cclxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovXHJcbiAgICBEb2NSZWZlcmVuY2UuY29tcGFyZUJ5S2V5ID0gZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIChEb2N1bWVudEtleS5jb21wYXJhdG9yKGxlZnQua2V5LCByaWdodC5rZXkpIHx8XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdC50YXJnZXRPckJhdGNoSWQsIHJpZ2h0LnRhcmdldE9yQmF0Y2hJZCkpO1xyXG4gICAgfTtcclxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovXHJcbiAgICBEb2NSZWZlcmVuY2UuY29tcGFyZUJ5VGFyZ2V0SWQgPSBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gKHByaW1pdGl2ZUNvbXBhcmF0b3IobGVmdC50YXJnZXRPckJhdGNoSWQsIHJpZ2h0LnRhcmdldE9yQmF0Y2hJZCkgfHxcclxuICAgICAgICAgICAgRG9jdW1lbnRLZXkuY29tcGFyYXRvcihsZWZ0LmtleSwgcmlnaHQua2V5KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvY1JlZmVyZW5jZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDIgPSAnTG9jYWxTdG9yZSc7XHJcbi8qKlxyXG4gKiBMb2NhbCBzdG9yYWdlIGluIHRoZSBGaXJlc3RvcmUgY2xpZW50LiBDb29yZGluYXRlcyBwZXJzaXN0ZW5jZSBjb21wb25lbnRzXHJcbiAqIGxpa2UgdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCByZW1vdGUgZG9jdW1lbnQgY2FjaGUgdG8gcHJlc2VudCBhXHJcbiAqIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmlldyBvZiBzdG9yZWQgZGF0YS5cclxuICpcclxuICogVGhlIExvY2FsU3RvcmUgaXMgcmVzcG9uc2libGUgZm9yIGFjY2VwdGluZyBtdXRhdGlvbnMgZnJvbSB0aGUgU3luYyBFbmdpbmUuXHJcbiAqIFdyaXRlcyBmcm9tIHRoZSBjbGllbnQgYXJlIHB1dCBpbnRvIGEgcXVldWUgYXMgcHJvdmlzaW9uYWwgTXV0YXRpb25zIHVudGlsXHJcbiAqIHRoZXkgYXJlIHByb2Nlc3NlZCBieSB0aGUgUmVtb3RlU3RvcmUgYW5kIGNvbmZpcm1lZCBhcyBoYXZpbmcgYmVlbiB3cml0dGVuXHJcbiAqIHRvIHRoZSBzZXJ2ZXIuXHJcbiAqXHJcbiAqIFRoZSBsb2NhbCBzdG9yZSBwcm92aWRlcyB0aGUgbG9jYWwgdmVyc2lvbiBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW5cclxuICogbW9kaWZpZWQgbG9jYWxseS4gSXQgbWFpbnRhaW5zIHRoZSBjb25zdHJhaW50OlxyXG4gKlxyXG4gKiAgIExvY2FsRG9jdW1lbnQgPSBSZW1vdGVEb2N1bWVudCArIEFjdGl2ZShMb2NhbE11dGF0aW9ucylcclxuICpcclxuICogKEFjdGl2ZSBtdXRhdGlvbnMgYXJlIHRob3NlIHRoYXQgYXJlIGVucXVldWVkIGFuZCBoYXZlIG5vdCBiZWVuIHByZXZpb3VzbHlcclxuICogYWNrbm93bGVkZ2VkIG9yIHJlamVjdGVkKS5cclxuICpcclxuICogVGhlIFJlbW90ZURvY3VtZW50IChcImdyb3VuZCB0cnV0aFwiKSBzdGF0ZSBpcyBwcm92aWRlZCB2aWEgdGhlXHJcbiAqIGFwcGx5Q2hhbmdlQmF0Y2ggbWV0aG9kLiBJdCB3aWxsIGJlIHNvbWUgdmVyc2lvbiBvZiBhIHNlcnZlci1wcm92aWRlZFxyXG4gKiBkb2N1bWVudCBPUiB3aWxsIGJlIGEgc2VydmVyLXByb3ZpZGVkIGRvY3VtZW50IFBMVVMgYWNrbm93bGVkZ2VkIG11dGF0aW9uczpcclxuICpcclxuICogICBSZW1vdGVEb2N1bWVudCcgPSBSZW1vdGVEb2N1bWVudCArIEFja25vd2xlZGdlZChMb2NhbE11dGF0aW9ucylcclxuICpcclxuICogTm90ZSB0aGF0IHRoaXMgXCJkaXJ0eVwiIHZlcnNpb24gb2YgYSBSZW1vdGVEb2N1bWVudCB3aWxsIG5vdCBiZSBpZGVudGljYWwgdG8gYVxyXG4gKiBzZXJ2ZXIgYmFzZSB2ZXJzaW9uLCBzaW5jZSBpdCBoYXMgTG9jYWxNdXRhdGlvbnMgYWRkZWQgdG8gaXQgcGVuZGluZyBnZXR0aW5nXHJcbiAqIGFuIGF1dGhvcml0YXRpdmUgY29weSBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAqXHJcbiAqIFNpbmNlIExvY2FsTXV0YXRpb25zIGNhbiBiZSByZWplY3RlZCBieSB0aGUgc2VydmVyLCB3ZSBoYXZlIHRvIGJlIGFibGUgdG9cclxuICogcmV2ZXJ0IGEgTG9jYWxNdXRhdGlvbiB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0aGUgTG9jYWxEb2N1bWVudFxyXG4gKiAodHlwaWNhbGx5IGRvbmUgYnkgcmVwbGF5aW5nIGFsbCByZW1haW5pbmcgTG9jYWxNdXRhdGlvbnMgdG8gdGhlXHJcbiAqIFJlbW90ZURvY3VtZW50IHRvIHJlLWFwcGx5KS5cclxuICpcclxuICogVGhlIExvY2FsU3RvcmUgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gb2YgdGhlIGRvY3VtZW50cyBpdFxyXG4gKiBjb250YWlucy4gRm9yIG5vdywgaXQgZXZlcnkgZG9jIHJlZmVyZW5jZWQgYnkgYSB2aWV3LCB0aGUgbXV0YXRpb24gcXVldWUsIG9yXHJcbiAqIHRoZSBSZW1vdGVTdG9yZS5cclxuICpcclxuICogSXQgYWxzbyBtYWludGFpbnMgdGhlIHBlcnNpc3RlbmNlIG9mIG1hcHBpbmcgcXVlcmllcyB0byByZXN1bWUgdG9rZW5zIGFuZFxyXG4gKiB0YXJnZXQgaWRzLiBJdCBuZWVkcyB0byBrbm93IHRoaXMgZGF0YSBhYm91dCBxdWVyaWVzIHRvIHByb3Blcmx5IGtub3cgd2hhdFxyXG4gKiBkb2NzIGl0IHdvdWxkIGJlIGFsbG93ZWQgdG8gZ2FyYmFnZSBjb2xsZWN0LlxyXG4gKlxyXG4gKiBUaGUgTG9jYWxTdG9yZSBtdXN0IGJlIGFibGUgdG8gZWZmaWNpZW50bHkgZXhlY3V0ZSBxdWVyaWVzIGFnYWluc3QgaXRzIGxvY2FsXHJcbiAqIGNhY2hlIG9mIHRoZSBkb2N1bWVudHMsIHRvIHByb3ZpZGUgdGhlIGluaXRpYWwgc2V0IG9mIHJlc3VsdHMgYmVmb3JlIGFueVxyXG4gKiByZW1vdGUgY2hhbmdlcyBoYXZlIGJlZW4gcmVjZWl2ZWQuXHJcbiAqXHJcbiAqIE5vdGU6IEluIFR5cGVTY3JpcHQsIG1vc3QgbWV0aG9kcyByZXR1cm4gUHJvbWlzZXMgc2luY2UgdGhlIGltcGxlbWVudGF0aW9uXHJcbiAqIG1heSByZWx5IG9uIGZldGNoaW5nIGRhdGEgZnJvbSBJbmRleGVkREIgd2hpY2ggaXMgYXN5bmMuXHJcbiAqIFRoZXNlIFByb21pc2VzIHdpbGwgb25seSBiZSByZWplY3RlZCBvbiBhbiBJL08gZXJyb3Igb3Igb3RoZXIgaW50ZXJuYWxcclxuICogKHVuZXhwZWN0ZWQpIGZhaWx1cmUgKGUuZy4gZmFpbGVkIGFzc2VydCkgYW5kIGFsd2F5cyByZXByZXNlbnQgYW5cclxuICogdW5yZWNvdmVyYWJsZSBlcnJvciAoc2hvdWxkIGJlIGNhdWdodCAvIHJlcG9ydGVkIGJ5IHRoZSBhc3luY19xdWV1ZSkuXHJcbiAqL1xyXG52YXIgTG9jYWxTdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExvY2FsU3RvcmUoXHJcbiAgICAvKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXHJcbiAgICBwZXJzaXN0ZW5jZSwgcXVlcnlFbmdpbmUsIGluaXRpYWxVc2VyKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMucXVlcnlFbmdpbmUgPSBxdWVyeUVuZ2luZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50IHJlZmVyZW5jZXMgbWFpbnRhaW5lZCBieSBhbnkgbG9jYWwgdmlld3MuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5sb2NhbFZpZXdSZWZlcmVuY2VzID0gbmV3IFJlZmVyZW5jZVNldCgpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXRJRCB0byBkYXRhIGFib3V0IGl0cyB0YXJnZXQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xyXG4gICAgICAgICAqIG9mIGBhcHBseVJlbW90ZUV2ZW50KClgIGlkZW1wb3RlbnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50YXJnZXREYXRhQnlUYXJnZXQgPSBuZXcgU29ydGVkTWFwKHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIC8qKiBNYXBzIGEgdGFyZ2V0IHRvIGl0cyB0YXJnZXRJRC4gKi9cclxuICAgICAgICAvLyBUT0RPKHd1YW5keSk6IEV2YWx1YXRlIGlmIFRhcmdldElkIGNhbiBiZSBwYXJ0IG9mIFRhcmdldC5cclxuICAgICAgICB0aGlzLnRhcmdldElkQnlUYXJnZXQgPSBuZXcgT2JqZWN0TWFwKGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0LmNhbm9uaWNhbElkKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHJlYWQgdGltZSBvZiB0aGUgbGFzdCBlbnRyeSBwcm9jZXNzZWQgYnkgYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5sYXN0RG9jdW1lbnRDaGFuZ2VSZWFkVGltZSA9IFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgYXNzZXJ0KHBlcnNpc3RlbmNlLnN0YXJ0ZWQsICdMb2NhbFN0b3JlIHdhcyBwYXNzZWQgYW4gdW5zdGFydGVkIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uJyk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5zZXRJbk1lbW9yeVBpbnModGhpcy5sb2NhbFZpZXdSZWZlcmVuY2VzKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBwZXJzaXN0ZW5jZS5nZXRNdXRhdGlvblF1ZXVlKGluaXRpYWxVc2VyKTtcclxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50cyA9IHBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKTtcclxuICAgICAgICB0aGlzLnRhcmdldENhY2hlID0gcGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcclxuICAgICAgICB0aGlzLmxvY2FsRG9jdW1lbnRzID0gbmV3IExvY2FsRG9jdW1lbnRzVmlldyh0aGlzLnJlbW90ZURvY3VtZW50cywgdGhpcy5tdXRhdGlvblF1ZXVlLCB0aGlzLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcigpKTtcclxuICAgICAgICB0aGlzLnF1ZXJ5RW5naW5lLnNldExvY2FsRG9jdW1lbnRzVmlldyh0aGlzLmxvY2FsRG9jdW1lbnRzKTtcclxuICAgIH1cclxuICAgIC8qKiBTdGFydHMgdGhlIExvY2FsU3RvcmUuICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zeW5jaHJvbml6ZUxhc3REb2N1bWVudENoYW5nZVJlYWRUaW1lKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUZWxscyB0aGUgTG9jYWxTdG9yZSB0aGF0IHRoZSBjdXJyZW50bHkgYXV0aGVudGljYXRlZCB1c2VyIGhhcyBjaGFuZ2VkLlxyXG4gICAgICpcclxuICAgICAqIEluIHJlc3BvbnNlIHRoZSBsb2NhbCBzdG9yZSBzd2l0Y2hlcyB0aGUgbXV0YXRpb24gcXVldWUgdG8gdGhlIG5ldyB1c2VyIGFuZFxyXG4gICAgICogcmV0dXJucyBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogQW5kcm9pZCBhbmQgaU9TIG9ubHkgcmV0dXJuIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgdGhlXHJcbiAgICAvLyBjaGFuZ2UuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5oYW5kbGVVc2VyQ2hhbmdlID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdNdXRhdGlvblF1ZXVlLCBuZXdMb2NhbERvY3VtZW50cywgcmVzdWx0O1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNdXRhdGlvblF1ZXVlID0gdGhpcy5tdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdMb2NhbERvY3VtZW50cyA9IHRoaXMubG9jYWxEb2N1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0hhbmRsZSB1c2VyIGNoYW5nZScsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN3YXAgb3V0IHRoZSBtdXRhdGlvbiBxdWV1ZSwgZ3JhYmJpbmcgdGhlIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZSBhbmQgYWZ0ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEJhdGNoZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0eG4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChwcm9taXNlZE9sZEJhdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkQmF0Y2hlcyA9IHByb21pc2VkT2xkQmF0Y2hlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3TXV0YXRpb25RdWV1ZSA9IF90aGlzLnBlcnNpc3RlbmNlLmdldE11dGF0aW9uUXVldWUodXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY3JlYXRlIG91ciBMb2NhbERvY3VtZW50c1ZpZXcgdXNpbmcgdGhlIG5ld1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNdXRhdGlvblF1ZXVlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdMb2NhbERvY3VtZW50cyA9IG5ldyBMb2NhbERvY3VtZW50c1ZpZXcoX3RoaXMucmVtb3RlRG9jdW1lbnRzLCBuZXdNdXRhdGlvblF1ZXVlLCBfdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdNdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0eG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChuZXdCYXRjaGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdmVkQmF0Y2hJZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFkZGVkQmF0Y2hJZHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5pb24gdGhlIG9sZC9uZXcgY2hhbmdlZCBrZXlzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhbmdlZEtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIG9sZEJhdGNoZXNfMSA9IG9sZEJhdGNoZXM7IF9pIDwgb2xkQmF0Y2hlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gb2xkQmF0Y2hlc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRCYXRjaElkcy5wdXNoKGJhdGNoLmJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IGJhdGNoLm11dGF0aW9uczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBfYltfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZEtleXMgPSBjaGFuZ2VkS2V5cy5hZGQobXV0YXRpb24ua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfYyA9IDAsIG5ld0JhdGNoZXNfMSA9IG5ld0JhdGNoZXM7IF9jIDwgbmV3QmF0Y2hlc18xLmxlbmd0aDsgX2MrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhdGNoID0gbmV3QmF0Y2hlc18xW19jXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkQmF0Y2hJZHMucHVzaChiYXRjaC5iYXRjaElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9kID0gMCwgX2UgPSBiYXRjaC5tdXRhdGlvbnM7IF9kIDwgX2UubGVuZ3RoOyBfZCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG11dGF0aW9uID0gX2VbX2RdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWRLZXlzID0gY2hhbmdlZEtleXMuYWRkKG11dGF0aW9uLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBzZXQgb2YgYWxsIChwb3RlbnRpYWxseSkgY2hhbmdlZCBkb2N1bWVudHMgYW5kIHRoZSBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIG11dGF0aW9uIGJhdGNoIElEcyB0aGF0IHdlcmUgYWZmZWN0ZWQgYnkgY2hhbmdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TG9jYWxEb2N1bWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXREb2N1bWVudHModHhuLCBjaGFuZ2VkS2V5cylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChhZmZlY3RlZERvY3VtZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZmZlY3RlZERvY3VtZW50czogYWZmZWN0ZWREb2N1bWVudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZEJhdGNoSWRzOiByZW1vdmVkQmF0Y2hJZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRCYXRjaElkczogYWRkZWRCYXRjaElkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IG5ld011dGF0aW9uUXVldWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxEb2N1bWVudHMgPSBuZXdMb2NhbERvY3VtZW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeUVuZ2luZS5zZXRMb2NhbERvY3VtZW50c1ZpZXcodGhpcy5sb2NhbERvY3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiBBY2NlcHQgbG9jYWxseSBnZW5lcmF0ZWQgTXV0YXRpb25zIGFuZCBjb21taXQgdGhlbSB0byBzdG9yYWdlLiAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUubG9jYWxXcml0ZSA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBsb2NhbFdyaXRlVGltZSA9IFRpbWVzdGFtcC5ub3coKTtcclxuICAgICAgICB2YXIga2V5cyA9IG11dGF0aW9ucy5yZWR1Y2UoZnVuY3Rpb24gKGtleXMsIG0pIHsgcmV0dXJuIGtleXMuYWRkKG0ua2V5KTsgfSwgZG9jdW1lbnRLZXlTZXQoKSk7XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nRG9jcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAucnVuVHJhbnNhY3Rpb24oJ0xvY2FsbHkgd3JpdGUgbXV0YXRpb25zJywgJ3JlYWR3cml0ZS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICAvLyBMb2FkIGFuZCBhcHBseSBhbGwgZXhpc3RpbmcgbXV0YXRpb25zLiBUaGlzIGxldHMgdXMgY29tcHV0ZSB0aGVcclxuICAgICAgICAgICAgLy8gY3VycmVudCBiYXNlIHN0YXRlIGZvciBhbGwgbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBiZWZvcmUgYXBwbHlpbmdcclxuICAgICAgICAgICAgLy8gYW55IGFkZGl0aW9uYWwgdXNlci1wcm92aWRlZCB3cml0ZXMuXHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModHhuLCBrZXlzKS5uZXh0KGZ1bmN0aW9uIChkb2NzKSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZ0RvY3MgPSBkb2NzO1xyXG4gICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1pZGVtcG90ZW50IG11dGF0aW9ucyAoc3VjaCBhcyBgRmllbGRWYWx1ZS5pbmNyZW1lbnQoKWApLFxyXG4gICAgICAgICAgICAgICAgLy8gd2UgcmVjb3JkIHRoZSBiYXNlIHN0YXRlIGluIGEgc2VwYXJhdGUgcGF0Y2ggbXV0YXRpb24uIFRoaXMgaXNcclxuICAgICAgICAgICAgICAgIC8vIGxhdGVyIHVzZWQgdG8gZ3VhcmFudGVlIGNvbnNpc3RlbnQgdmFsdWVzIGFuZCBwcmV2ZW50cyBmbGlja2VyXHJcbiAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSBiYWNrZW5kIHNlbmRzIHVzIGFuIHVwZGF0ZSB0aGF0IGFscmVhZHkgaW5jbHVkZXMgb3VyXHJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0uXHJcbiAgICAgICAgICAgICAgICB2YXIgYmFzZU11dGF0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBtdXRhdGlvbnNfMSA9IG11dGF0aW9uczsgX2kgPCBtdXRhdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbXV0YXRpb24gPSBtdXRhdGlvbnNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VWYWx1ZSA9IG11dGF0aW9uLmV4dHJhY3RCYXNlVmFsdWUoZXhpc3RpbmdEb2NzLmdldChtdXRhdGlvbi5rZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZVZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhlIGJhc2Ugc3RhdGUgc2hvdWxkIG9ubHkgYmUgYXBwbGllZCBpZiB0aGVyZSdzIHNvbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBleGlzdHM9dHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlTXV0YXRpb25zLnB1c2gobmV3IFBhdGNoTXV0YXRpb24obXV0YXRpb24ua2V5LCBiYXNlVmFsdWUsIGJhc2VWYWx1ZS5maWVsZE1hc2soKSwgUHJlY29uZGl0aW9uLmV4aXN0cyh0cnVlKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLmFkZE11dGF0aW9uQmF0Y2godHhuLCBsb2NhbFdyaXRlVGltZSwgYmFzZU11dGF0aW9ucywgbXV0YXRpb25zKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGJhdGNoKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFuZ2VzID0gYmF0Y2guYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQoZXhpc3RpbmdEb2NzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgYmF0Y2hJZDogYmF0Y2guYmF0Y2hJZCwgY2hhbmdlczogY2hhbmdlcyB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZXR1cm5zIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgYSBtdXRhdGlvbiBiYXRjaC4gKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5sb29rdXBNdXRhdGlvbkRvY3VtZW50cyA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignTG9va3VwIG11dGF0aW9uIGRvY3VtZW50cycsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZVxyXG4gICAgICAgICAgICAgICAgLmxvb2t1cE11dGF0aW9uS2V5cyh0eG4sIGJhdGNoSWQpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoa2V5cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHR4biwga2V5cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWNrbm93bGVkZ2UgdGhlIGdpdmVuIGJhdGNoLlxyXG4gICAgICpcclxuICAgICAqIE9uIHRoZSBoYXBweSBwYXRoIHdoZW4gYSBiYXRjaCBpcyBhY2tub3dsZWRnZWQsIHRoZSBsb2NhbCBzdG9yZSB3aWxsXHJcbiAgICAgKlxyXG4gICAgICogICsgcmVtb3ZlIHRoZSBiYXRjaCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZTtcclxuICAgICAqICArIGFwcGx5IHRoZSBjaGFuZ2VzIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGU7XHJcbiAgICAgKiAgKyByZWNhbGN1bGF0ZSB0aGUgbGF0ZW5jeSBjb21wZW5zYXRlZCB2aWV3IGltcGxpZWQgYnkgdGhvc2UgY2hhbmdlcyAodGhlcmVcclxuICAgICAqICAgIG1heSBiZSBtdXRhdGlvbnMgaW4gdGhlIHF1ZXVlIHRoYXQgYWZmZWN0IHRoZSBkb2N1bWVudHMgYnV0IGhhdmVuJ3QgYmVlblxyXG4gICAgICogICAgYWNrbm93bGVkZ2VkIHlldCk7IGFuZFxyXG4gICAgICogICsgZ2l2ZSB0aGUgY2hhbmdlZCBkb2N1bWVudHMgYmFjayB0aGUgc3luYyBlbmdpbmVcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIChtb2RpZmllZCkgZG9jdW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5hY2tub3dsZWRnZUJhdGNoID0gZnVuY3Rpb24gKGJhdGNoUmVzdWx0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignQWNrbm93bGVkZ2UgYmF0Y2gnLCAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgdmFyIGFmZmVjdGVkID0gYmF0Y2hSZXN1bHQuYmF0Y2gua2V5cygpO1xyXG4gICAgICAgICAgICB2YXIgZG9jdW1lbnRCdWZmZXIgPSBfdGhpcy5yZW1vdGVEb2N1bWVudHMubmV3Q2hhbmdlQnVmZmVyKHtcclxuICAgICAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6IHRydWUgLy8gTWFrZSBzdXJlIGRvY3VtZW50IHJlbW92YWxzIHNob3cgdXAgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWVcclxuICAgICAgICAgICAgICAgIC5hY2tub3dsZWRnZUJhdGNoKHR4biwgYmF0Y2hSZXN1bHQuYmF0Y2gsIGJhdGNoUmVzdWx0LnN0cmVhbVRva2VuKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFwcGx5V3JpdGVUb1JlbW90ZURvY3VtZW50cyh0eG4sIGJhdGNoUmVzdWx0LCBkb2N1bWVudEJ1ZmZlcik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudEJ1ZmZlci5hcHBseSh0eG4pOyB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0eG4pOyB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHR4biwgYWZmZWN0ZWQpOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBtdXRhdGlvbnMgZnJvbSB0aGUgTXV0YXRpb25RdWV1ZSBmb3IgdGhlIHNwZWNpZmllZCBiYXRjaDtcclxuICAgICAqIExvY2FsRG9jdW1lbnRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgbW9kaWZpZWQgZG9jdW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5yZWplY3RCYXRjaCA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignUmVqZWN0IGJhdGNoJywgJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHZhciBhZmZlY3RlZEtleXM7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlXHJcbiAgICAgICAgICAgICAgICAubG9va3VwTXV0YXRpb25CYXRjaCh0eG4sIGJhdGNoSWQpXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoYmF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChiYXRjaCAhPT0gbnVsbCwgJ0F0dGVtcHQgdG8gcmVqZWN0IG5vbmV4aXN0ZW50IGJhdGNoIScpO1xyXG4gICAgICAgICAgICAgICAgYWZmZWN0ZWRLZXlzID0gYmF0Y2gua2V5cygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUucmVtb3ZlTXV0YXRpb25CYXRjaCh0eG4sIGJhdGNoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5tdXRhdGlvblF1ZXVlLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHR4bik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHR4biwgYWZmZWN0ZWRLZXlzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXJnZXN0IChsYXRlc3QpIGJhdGNoIGlkIGluIG11dGF0aW9uIHF1ZXVlIHRoYXQgaXMgcGVuZGluZyBzZXJ2ZXIgcmVzcG9uc2UuXHJcbiAgICAgKiBSZXR1cm5zIGBCQVRDSElEX1VOS05PV05gIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZCcsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHR4bik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgdGhlIGxhc3QgcmVjb3JkZWQgc3RyZWFtIHRva2VuIGZvciB0aGUgY3VycmVudCB1c2VyLiAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZ2V0TGFzdFN0cmVhbVRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0dldCBsYXN0IHN0cmVhbSB0b2tlbicsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5nZXRMYXN0U3RyZWFtVG9rZW4odHhuKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHN0cmVhbSB0b2tlbiBmb3IgdGhlIGN1cnJlbnQgdXNlciB3aXRob3V0IGFja25vd2xlZGdpbmcgYW55XHJcbiAgICAgKiBtdXRhdGlvbiBiYXRjaC4gVGhpcyBpcyB1c3VhbGx5IG9ubHkgdXNlZnVsIGFmdGVyIGEgc3RyZWFtIGhhbmRzaGFrZSBvciBpblxyXG4gICAgICogcmVzcG9uc2UgdG8gYW4gZXJyb3IgdGhhdCByZXF1aXJlcyBjbGVhcmluZyB0aGUgc3RyZWFtIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5zZXRMYXN0U3RyZWFtVG9rZW4gPSBmdW5jdGlvbiAoc3RyZWFtVG9rZW4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdTZXQgbGFzdCBzdHJlYW0gdG9rZW4nLCAncmVhZHdyaXRlLXByaW1hcnktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUuc2V0TGFzdFN0cmVhbVRva2VuKHR4biwgc3RyZWFtVG9rZW4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHByb2Nlc3NlZCAodXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG9cclxuICAgICAqIGRldGVybWluZSB3aGV0aGVyIHRvIGJ1ZmZlciBpbmNvbWluZyBzbmFwc2hvdHMgZnJvbSB0aGUgYmFja2VuZCkuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignR2V0IGxhc3QgcmVtb3RlIHNuYXBzaG90IHZlcnNpb24nLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHsgcmV0dXJuIF90aGlzLnRhcmdldENhY2hlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odHhuKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSkgZG9jdW1lbnRzLiBXZSBhc3N1bWUgdGhhdCB0aGUgcmVtb3RlXHJcbiAgICAgKiBldmVudCByZWZsZWN0cyBhbnkgd3JpdGUgYmF0Y2hlcyB0aGF0IGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgb3IgcmVqZWN0ZWRcclxuICAgICAqIChpLmUuIHdlIGRvIG5vdCByZS1hcHBseSBsb2NhbCBtdXRhdGlvbnMgdG8gdXBkYXRlcyBmcm9tIHRoaXMgZXZlbnQpLlxyXG4gICAgICpcclxuICAgICAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxyXG4gICAgICogcXVldWUuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmFwcGx5UmVtb3RlRXZlbnQgPSBmdW5jdGlvbiAocmVtb3RlRXZlbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZW1vdGVWZXJzaW9uID0gcmVtb3RlRXZlbnQuc25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIHZhciBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgPSB0aGlzLnRhcmdldERhdGFCeVRhcmdldDtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAucnVuVHJhbnNhY3Rpb24oJ0FwcGx5IHJlbW90ZSBldmVudCcsICdyZWFkd3JpdGUtcHJpbWFyeS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICB2YXIgZG9jdW1lbnRCdWZmZXIgPSBfdGhpcy5yZW1vdGVEb2N1bWVudHMubmV3Q2hhbmdlQnVmZmVyKHtcclxuICAgICAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6IHRydWUgLy8gTWFrZSBzdXJlIGRvY3VtZW50IHJlbW92YWxzIHNob3cgdXAgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gUmVzZXQgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwIGluIGNhc2UgdGhpcyB0cmFuc2FjdGlvbiBnZXRzIHJlLXJ1bi5cclxuICAgICAgICAgICAgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwID0gX3RoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0O1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yRWFjaE51bWJlcihyZW1vdGVFdmVudC50YXJnZXRDaGFuZ2VzLCBmdW5jdGlvbiAodGFyZ2V0SWQsIGNoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9sZFRhcmdldERhdGEgPSBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAuZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIGlmICghb2xkVGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSByZW1vdGUga2V5cyBpZiB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZS4gVGhpc1xyXG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGF0IHdlIGNhbiBwZXJzaXN0IHRoZSB1cGRhdGVkIHRhcmdldCBkYXRhIGFsb25nIHdpdGhcclxuICAgICAgICAgICAgICAgIC8vIHRoZSB1cGRhdGVkIGFzc2lnbm1lbnQuXHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLnRhcmdldENhY2hlXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZU1hdGNoaW5nS2V5cyh0eG4sIGNoYW5nZS5yZW1vdmVkRG9jdW1lbnRzLCB0YXJnZXRJZClcclxuICAgICAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRhcmdldENhY2hlLmFkZE1hdGNoaW5nS2V5cyh0eG4sIGNoYW5nZS5hZGRlZERvY3VtZW50cywgdGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VtZVRva2VuID0gY2hhbmdlLnJlc3VtZVRva2VuO1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSByZXN1bWUgdG9rZW4gaWYgdGhlIGNoYW5nZSBpbmNsdWRlcyBvbmUuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdW1lVG9rZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdUYXJnZXREYXRhID0gb2xkVGFyZ2V0RGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aFJlc3VtZVRva2VuKHJlc3VtZVRva2VuLCByZW1vdGVWZXJzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAud2l0aFNlcXVlbmNlTnVtYmVyKHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCA9IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcC5pbnNlcnQodGFyZ2V0SWQsIG5ld1RhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFyZ2V0IGRhdGEgaWYgdGhlcmUgYXJlIHRhcmdldCBjaGFuZ2VzIChvciBpZlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN1ZmZpY2llbnQgdGltZSBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHVwZGF0ZSkuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKExvY2FsU3RvcmUuc2hvdWxkUGVyc2lzdFRhcmdldERhdGEob2xkVGFyZ2V0RGF0YSwgbmV3VGFyZ2V0RGF0YSwgY2hhbmdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzLnRhcmdldENhY2hlLnVwZGF0ZVRhcmdldERhdGEodHhuLCBuZXdUYXJnZXREYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZWREb2NzID0gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgICAgICB2YXIgdXBkYXRlZEtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgICAgICByZW1vdGVFdmVudC5kb2N1bWVudFVwZGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBkb2MpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRLZXlzID0gdXBkYXRlZEtleXMuYWRkKGtleSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBFYWNoIGxvb3AgaXRlcmF0aW9uIG9ubHkgYWZmZWN0cyBpdHMgXCJvd25cIiBkb2MsIHNvIGl0J3Mgc2FmZSB0byBnZXQgYWxsIHRoZSByZW1vdGVcclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIGluIGFkdmFuY2UgaW4gYSBzaW5nbGUgY2FsbC5cclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChkb2N1bWVudEJ1ZmZlci5nZXRFbnRyaWVzKHR4biwgdXBkYXRlZEtleXMpLm5leHQoZnVuY3Rpb24gKGV4aXN0aW5nRG9jcykge1xyXG4gICAgICAgICAgICAgICAgcmVtb3RlRXZlbnQuZG9jdW1lbnRVcGRhdGVzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0aW5nRG9jID0gZXhpc3RpbmdEb2NzLmdldChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgcmVqZWN0ZWQgbGltYm8gcmVzb2x1dGlvbnMgKHdoaWNoIGZhYnJpY2F0ZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLk1JTikgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhY2hlLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy52ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24uTUlOIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVudHMuIFdlIHJlbW92ZSB0aGVzZSBkb2N1bWVudHMgZnJvbSBjYWNoZSBzaW5jZSB3ZSBsb3N0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY2Vzcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRCdWZmZXIucmVtb3ZlRW50cnkoa2V5LCByZW1vdGVWZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZERvY3MgPSBjaGFuZ2VkRG9jcy5pbnNlcnQoa2V5LCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChleGlzdGluZ0RvYyA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy52ZXJzaW9uLmNvbXBhcmVUbyhleGlzdGluZ0RvYy52ZXJzaW9uKSA+IDAgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGRvYy52ZXJzaW9uLmNvbXBhcmVUbyhleGlzdGluZ0RvYy52ZXJzaW9uKSA9PT0gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdEb2MuaGFzUGVuZGluZ1dyaXRlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCFTbmFwc2hvdFZlcnNpb24uTUlOLmlzRXF1YWwocmVtb3RlVmVyc2lvbiksICdDYW5ub3QgYWRkIGEgZG9jdW1lbnQgd2hlbiB0aGUgcmVtb3RlIHZlcnNpb24gaXMgemVybycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudEJ1ZmZlci5hZGRFbnRyeShkb2MsIHJlbW90ZVZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkRG9jcyA9IGNoYW5nZWREb2NzLmluc2VydChrZXksIGRvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDIsICdJZ25vcmluZyBvdXRkYXRlZCB3YXRjaCB1cGRhdGUgZm9yICcsIGtleSwgJy4gQ3VycmVudCB2ZXJzaW9uOicsIGV4aXN0aW5nRG9jLnZlcnNpb24sICcgV2F0Y2ggdmVyc2lvbjonLCBkb2MudmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdGVFdmVudC5yZXNvbHZlZExpbWJvRG9jdW1lbnRzLmhhcyhrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUudXBkYXRlTGltYm9Eb2N1bWVudCh0eG4sIGtleSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXHJcbiAgICAgICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXHJcbiAgICAgICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cclxuICAgICAgICAgICAgLy8gbGltYm8uXHJcbiAgICAgICAgICAgIGlmICghcmVtb3RlVmVyc2lvbi5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXBkYXRlUmVtb3RlVmVyc2lvbiA9IF90aGlzLnRhcmdldENhY2hlXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odHhuKVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHJlbW90ZVZlcnNpb24uY29tcGFyZVRvKGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pID49IDAsICdXYXRjaCBzdHJlYW0gcmV2ZXJ0ZWQgdG8gcHJldmlvdXMgc25hcHNob3Q/PyAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlVmVyc2lvbiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgPCAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRhcmdldENhY2hlLnNldFRhcmdldHNNZXRhZGF0YSh0eG4sIHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIsIHJlbW90ZVZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHVwZGF0ZVJlbW90ZVZlcnNpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcylcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50QnVmZmVyLmFwcGx5KHR4bik7IH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxEb2N1bWVudHMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHModHhuLCBjaGFuZ2VkRG9jcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjaGFuZ2VkRG9jcykge1xyXG4gICAgICAgICAgICBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQgPSBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXA7XHJcbiAgICAgICAgICAgIHJldHVybiBjaGFuZ2VkRG9jcztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgbmV3VGFyZ2V0RGF0YSBzaG91bGQgYmUgcGVyc2lzdGVkIGR1cmluZyBhbiB1cGRhdGUgb2ZcclxuICAgICAqIGFuIGFjdGl2ZSB0YXJnZXQuIFRhcmdldERhdGEgc2hvdWxkIGFsd2F5cyBiZSBwZXJzaXN0ZWQgd2hlbiBhIHRhcmdldCBpc1xyXG4gICAgICogYmVpbmcgcmVsZWFzZWQgYW5kIHNob3VsZCBub3QgY2FsbCB0aGlzIGZ1bmN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFdoaWxlIHRoZSB0YXJnZXQgaXMgYWN0aXZlLCBUYXJnZXREYXRhIHVwZGF0ZXMgY2FuIGJlIG9taXR0ZWQgd2hlbiBub3RoaW5nXHJcbiAgICAgKiBhYm91dCB0aGUgdGFyZ2V0IGhhcyBjaGFuZ2VkIGV4Y2VwdCBtZXRhZGF0YSBsaWtlIHRoZSByZXN1bWUgdG9rZW4gb3JcclxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uIE9jY2FzaW9uYWxseSBpdCdzIHdvcnRoIHRoZSBleHRyYSB3cml0ZSB0byBwcmV2ZW50IHRoZXNlXHJcbiAgICAgKiB2YWx1ZXMgZnJvbSBnZXR0aW5nIHRvbyBzdGFsZSBhZnRlciBhIGNyYXNoLCBidXQgdGhpcyBkb2Vzbid0IGhhdmUgdG8gYmVcclxuICAgICAqIHRvbyBmcmVxdWVudC5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5zaG91bGRQZXJzaXN0VGFyZ2V0RGF0YSA9IGZ1bmN0aW9uIChvbGRUYXJnZXREYXRhLCBuZXdUYXJnZXREYXRhLCBjaGFuZ2UpIHtcclxuICAgICAgICBhc3NlcnQobmV3VGFyZ2V0RGF0YS5yZXN1bWVUb2tlbi5sZW5ndGggPiAwLCAnQXR0ZW1wdGVkIHRvIHBlcnNpc3QgdGFyZ2V0IGRhdGEgd2l0aCBubyByZXN1bWUgdG9rZW4nKTtcclxuICAgICAgICAvLyBBbHdheXMgcGVyc2lzdCB0YXJnZXQgZGF0YSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgYSByZXN1bWUgdG9rZW4uXHJcbiAgICAgICAgaWYgKG9sZFRhcmdldERhdGEucmVzdW1lVG9rZW4ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEb24ndCBhbGxvdyByZXN1bWUgdG9rZW4gY2hhbmdlcyB0byBiZSBidWZmZXJlZCBpbmRlZmluaXRlbHkuIFRoaXNcclxuICAgICAgICAvLyBhbGxvd3MgdXMgdG8gYmUgcmVhc29uYWJseSB1cC10by1kYXRlIGFmdGVyIGEgY3Jhc2ggYW5kIGF2b2lkcyBuZWVkaW5nXHJcbiAgICAgICAgLy8gdG8gbG9vcCBvdmVyIGFsbCBhY3RpdmUgcXVlcmllcyBvbiBzaHV0ZG93bi4gRXNwZWNpYWxseSBpbiB0aGUgYnJvd3NlclxyXG4gICAgICAgIC8vIHdlIG1heSBub3QgZ2V0IHRpbWUgdG8gZG8gYW55dGhpbmcgaW50ZXJlc3Rpbmcgd2hpbGUgdGhlIGN1cnJlbnQgdGFiIGlzXHJcbiAgICAgICAgLy8gY2xvc2luZy5cclxuICAgICAgICB2YXIgdGltZURlbHRhID0gbmV3VGFyZ2V0RGF0YS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtXHJcbiAgICAgICAgICAgIG9sZFRhcmdldERhdGEuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCk7XHJcbiAgICAgICAgaWYgKHRpbWVEZWx0YSA+PSB0aGlzLlJFU1VNRV9UT0tFTl9NQVhfQUdFX01JQ1JPUykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gT3RoZXJ3aXNlIGlmIHRoZSBvbmx5IHRoaW5nIHRoYXQgaGFzIGNoYW5nZWQgYWJvdXQgYSB0YXJnZXQgaXMgaXRzIHJlc3VtZVxyXG4gICAgICAgIC8vIHRva2VuIGl0J3Mgbm90IHdvcnRoIHBlcnNpc3RpbmcuIE5vdGUgdGhhdCB0aGUgUmVtb3RlU3RvcmUga2VlcHMgYW5cclxuICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XHJcbiAgICAgICAgLy8gcmVzdW1lIHRva2VuLCBzbyBzdHJlYW0gZmFpbHVyZSBvciB1c2VyIGNoYW5nZXMgd2lsbCBzdGlsbCB1c2UgYW5cclxuICAgICAgICAvLyB1cC10by1kYXRlIHJlc3VtZSB0b2tlbiByZWdhcmRsZXNzIG9mIHdoYXQgd2UgZG8gaGVyZS5cclxuICAgICAgICB2YXIgY2hhbmdlcyA9IGNoYW5nZS5hZGRlZERvY3VtZW50cy5zaXplICtcclxuICAgICAgICAgICAgY2hhbmdlLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgK1xyXG4gICAgICAgICAgICBjaGFuZ2UucmVtb3ZlZERvY3VtZW50cy5zaXplO1xyXG4gICAgICAgIHJldHVybiBjaGFuZ2VzID4gMDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE5vdGlmeSBsb2NhbCBzdG9yZSBvZiB0aGUgY2hhbmdlZCB2aWV3cyB0byBsb2NhbGx5IHBpbiBkb2N1bWVudHMuXHJcbiAgICAgKi9cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLm5vdGlmeUxvY2FsVmlld0NoYW5nZXMgPSBmdW5jdGlvbiAodmlld0NoYW5nZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgdmlld0NoYW5nZXNfMSA9IHZpZXdDaGFuZ2VzOyBfaSA8IHZpZXdDaGFuZ2VzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB2aWV3Q2hhbmdlID0gdmlld0NoYW5nZXNfMVtfaV07XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IHZpZXdDaGFuZ2UudGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxWaWV3UmVmZXJlbmNlcy5hZGRSZWZlcmVuY2VzKHZpZXdDaGFuZ2UuYWRkZWRLZXlzLCB0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxWaWV3UmVmZXJlbmNlcy5yZW1vdmVSZWZlcmVuY2VzKHZpZXdDaGFuZ2UucmVtb3ZlZEtleXMsIHRhcmdldElkKTtcclxuICAgICAgICAgICAgaWYgKCF2aWV3Q2hhbmdlLmZyb21DYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSB0aGlzLnRhcmdldERhdGFCeVRhcmdldC5nZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHRhcmdldERhdGEgIT09IG51bGwsIFwiQ2FuJ3Qgc2V0IGxpbWJvLWZyZWUgc25hcHNob3QgdmVyc2lvbiBmb3IgdW5rbm93biB0YXJnZXQ6IFwiICsgdGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgbGFzdCBsaW1ibyBmcmVlIHNuYXBzaG90IHZlcnNpb25cclxuICAgICAgICAgICAgICAgIHZhciBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gdGFyZ2V0RGF0YS5zbmFwc2hvdFZlcnNpb247XHJcbiAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZFRhcmdldERhdGEgPSB0YXJnZXREYXRhLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXREYXRhQnlUYXJnZXQgPSB0aGlzLnRhcmdldERhdGFCeVRhcmdldC5pbnNlcnQodGFyZ2V0SWQsIHVwZGF0ZWRUYXJnZXREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignbm90aWZ5TG9jYWxWaWV3Q2hhbmdlcycsICdyZWFkd3JpdGUtaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHZpZXdDaGFuZ2VzLCBmdW5jdGlvbiAodmlld0NoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHZpZXdDaGFuZ2UucmVtb3ZlZEtleXMsIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHR4biwga2V5KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIG11dGF0aW9uIGJhdGNoIGFmdGVyIHRoZSBwYXNzZWQgaW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWVcclxuICAgICAqIG9yIG51bGwgaWYgZW1wdHkuXHJcbiAgICAgKiBAcGFyYW0gYWZ0ZXJCYXRjaElkIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxyXG4gICAgICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5uZXh0TXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uIChhZnRlckJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCdHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaCcsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICBpZiAoYWZ0ZXJCYXRjaElkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGFmdGVyQmF0Y2hJZCA9IEJBVENISURfVU5LTk9XTjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubXV0YXRpb25RdWV1ZS5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0eG4sIGFmdGVyQmF0Y2hJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkIHRoZSBjdXJyZW50IHZhbHVlIG9mIGEgRG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSBvciBudWxsIGlmIG5vdFxyXG4gICAgICogZm91bmQgLSB1c2VkIGZvciB0ZXN0aW5nLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5yZWFkRG9jdW1lbnQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigncmVhZCBkb2N1bWVudCcsICdyZWFkb25seS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnQodHhuLCBrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xyXG4gICAgICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxyXG4gICAgICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cclxuICAgICAqXHJcbiAgICAgKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcclxuICAgICAqIGZvciB0aGF0IGBUYXJnZXRgLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5hbGxvY2F0ZVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbignQWxsb2NhdGUgdGFyZ2V0JywgJ3JlYWR3cml0ZS1pZGVtcG90ZW50JywgZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRhcmdldENhY2hlXHJcbiAgICAgICAgICAgICAgICAuZ2V0VGFyZ2V0RGF0YSh0eG4sIHRhcmdldClcclxuICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uIChjYWNoZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHRhcmdldCBoYXMgYmVlbiBsaXN0ZW5lZCB0byBwcmV2aW91c2x5LCBzbyByZXVzZSB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKG1jZyk6IGZyZXNoZW4gbGFzdCBhY2Nlc3NlZCBkYXRlP1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSBjYWNoZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRhcmdldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRhcmdldENhY2hlLmFsbG9jYXRlVGFyZ2V0SWQodHhuKS5uZXh0KGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gbmV3IFRhcmdldERhdGEodGFyZ2V0LCB0YXJnZXRJZCwgVGFyZ2V0UHVycG9zZS5MaXN0ZW4sIHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRUYXJnZXREYXRhKHR4biwgdGFyZ2V0RGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRhcmdldERhdGE7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0LmdldCh0YXJnZXREYXRhLnRhcmdldElkKSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0ID0gX3RoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0Lmluc2VydCh0YXJnZXREYXRhLnRhcmdldElkLCB0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRhcmdldElkQnlUYXJnZXQuc2V0KHRhcmdldCwgdGFyZ2V0RGF0YS50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldERhdGE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGFzIHNlZW4gYnkgdGhlIExvY2FsU3RvcmUsIGluY2x1ZGluZyB1cGRhdGVzIHRoYXQgbWF5XHJcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQgdG8gdGhlIFRhcmdldENhY2hlLlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZ2V0VGFyZ2V0RGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIHRhcmdldElkID0gdGhpcy50YXJnZXRJZEJ5VGFyZ2V0LmdldCh0YXJnZXQpO1xyXG4gICAgICAgIGlmICh0YXJnZXRJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnRhcmdldERhdGFCeVRhcmdldC5nZXQodGFyZ2V0SWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhcmdldENhY2hlLmdldFRhcmdldERhdGEodHJhbnNhY3Rpb24sIHRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVW5waW4gYWxsIHRoZSBkb2N1bWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiB0YXJnZXQuIElmXHJcbiAgICAgKiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIHNldCB0byBmYWxzZSBhbmQgRWFnZXIgR0MgZW5hYmxlZCwgdGhlIG1ldGhvZFxyXG4gICAgICogZGlyZWN0bHkgcmVtb3ZlcyB0aGUgYXNzb2NpYXRlZCB0YXJnZXQgZGF0YSBmcm9tIHRoZSB0YXJnZXQgY2FjaGUuXHJcbiAgICAgKlxyXG4gICAgICogUmVsZWFzaW5nIGEgbm9uLWV4aXN0aW5nIGBUYXJnZXRgIGlzIGEgbm8tb3AuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBtdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnJlbGVhc2VUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0LmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgYXNzZXJ0KHRhcmdldERhdGEgIT09IG51bGwsIFwiVHJpZWQgdG8gcmVsZWFzZSBub25leGlzdGVudCB0YXJnZXQ6IFwiICsgdGFyZ2V0SWQpO1xyXG4gICAgICAgIHZhciBtb2RlID0ga2VlcFBlcnNpc3RlZFRhcmdldERhdGFcclxuICAgICAgICAgICAgPyAncmVhZHdyaXRlLWlkZW1wb3RlbnQnXHJcbiAgICAgICAgICAgIDogJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbignUmVsZWFzZSB0YXJnZXQnLCBtb2RlLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIC8vIFJlZmVyZW5jZXMgZm9yIGRvY3VtZW50cyBzZW50IHZpYSBXYXRjaCBhcmUgYXV0b21hdGljYWxseSByZW1vdmVkXHJcbiAgICAgICAgICAgIC8vIHdoZW4gd2UgZGVsZXRlIGEgdGFyZ2V0J3MgZGF0YSBmcm9tIHRoZSByZWZlcmVuY2UgZGVsZWdhdGUuXHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgZG9lcyBub3QgcmVtb3ZlIHJlZmVyZW5jZXMgZm9yIGxvY2FsbHkgbXV0YXRlZCBkb2N1bWVudHMsXHJcbiAgICAgICAgICAgIC8vIHdlIGhhdmUgdG8gcmVtb3ZlIHRoZSB0YXJnZXQgYXNzb2NpYXRpb25zIGZvciB0aGVzZSBkb2N1bWVudHNcclxuICAgICAgICAgICAgLy8gbWFudWFsbHkuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgb3BlcmF0aW9uIG5lZWRzIHRvIGJlIHJ1biBpbnNpZGUgdGhlIHRyYW5zYWN0aW9uIHNpbmNlIEVhZ2VyR0NcclxuICAgICAgICAgICAgLy8gdXNlcyB0aGUgbG9jYWwgdmlldyByZWZlcmVuY2VzIGR1cmluZyB0aGUgdHJhbnNhY3Rpb24ncyBjb21taXQuXHJcbiAgICAgICAgICAgIC8vIEZvcnR1bmF0ZWx5LCB0aGUgb3BlcmF0aW9uIGlzIHNhZmUgdG8gYmUgcmUtcnVuIGluIGNhc2UgdGhlXHJcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uIGZhaWxzIHNpbmNlIHRoZXJlIGFyZSBubyBzaWRlIGVmZmVjdHMgaWYgdGhlIHRhcmdldCBoYXNcclxuICAgICAgICAgICAgLy8gYWxyZWFkeSBiZWVuIHJlbW92ZWQuXHJcbiAgICAgICAgICAgIHZhciByZW1vdmVkID0gX3RoaXMubG9jYWxWaWV3UmVmZXJlbmNlcy5yZW1vdmVSZWZlcmVuY2VzRm9ySWQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICBpZiAoIWtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2gocmVtb3ZlZCwgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodHhuLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfSkubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KHR4biwgdGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQgPSBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQucmVtb3ZlKHRhcmdldElkKTtcclxuICAgICAgICAgICAgX3RoaXMudGFyZ2V0SWRCeVRhcmdldC5kZWxldGUodGFyZ2V0RGF0YS50YXJnZXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUnVucyB0aGUgc3BlY2lmaWVkIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzLFxyXG4gICAgICogcG90ZW50aWFsbHkgdGFraW5nIGFkdmFudGFnZSBvZiBxdWVyeSBkYXRhIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyAoc3VjaFxyXG4gICAgICogYXMgdGhlIHNldCBvZiByZW1vdGUga2V5cykuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZVByZXZpb3VzUmVzdWx0cyBXaGV0aGVyIHJlc3VsdHMgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIGNhblxyXG4gICAgICogYmUgdXNlZCB0byBvcHRpbWl6ZSB0aGlzIHF1ZXJ5IGV4ZWN1dGlvbi5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZXhlY3V0ZVF1ZXJ5ID0gZnVuY3Rpb24gKHF1ZXJ5LCB1c2VQcmV2aW91c1Jlc3VsdHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICB2YXIgcmVtb3RlS2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oJ0V4ZWN1dGUgcXVlcnknLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldFRhcmdldERhdGEodHhuLCBxdWVyeS50b1RhcmdldCgpKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHR4biwgdGFyZ2V0RGF0YS50YXJnZXRJZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVLZXlzID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnF1ZXJ5RW5naW5lLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodHhuLCBxdWVyeSwgdXNlUHJldmlvdXNSZXN1bHRzXHJcbiAgICAgICAgICAgICAgICAgICAgPyBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgOiBTbmFwc2hvdFZlcnNpb24uTUlOLCB1c2VQcmV2aW91c1Jlc3VsdHMgPyByZW1vdGVLZXlzIDogZG9jdW1lbnRLZXlTZXQoKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoZG9jdW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkb2N1bWVudHM6IGRvY3VtZW50cywgcmVtb3RlS2V5czogcmVtb3RlS2V5cyB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGtleXMgb2YgdGhlIGRvY3VtZW50cyB0aGF0IGFyZSBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuXHJcbiAgICAgKiB0YXJnZXQgaWQgaW4gdGhlIHJlbW90ZSB0YWJsZS5cclxuICAgICAqL1xyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUucmVtb3RlRG9jdW1lbnRLZXlzID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignUmVtb3RlIGRvY3VtZW50IGtleXMnLCAncmVhZG9ubHktaWRlbXBvdGVudCcsIGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRhcmdldENhY2hlLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHR4biwgdGFyZ2V0SWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5nZXRBY3RpdmVDbGllbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldEFjdGl2ZUNsaWVudHMoKTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUucmVtb3ZlQ2FjaGVkTXV0YXRpb25CYXRjaE1ldGFkYXRhID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUucmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKGJhdGNoSWQpO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5zZXROZXR3b3JrRW5hYmxlZCA9IGZ1bmN0aW9uIChuZXR3b3JrRW5hYmxlZCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2Uuc2V0TmV0d29ya0VuYWJsZWQobmV0d29ya0VuYWJsZWQpO1xyXG4gICAgfTtcclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmFwcGx5V3JpdGVUb1JlbW90ZURvY3VtZW50cyA9IGZ1bmN0aW9uICh0eG4sIGJhdGNoUmVzdWx0LCBkb2N1bWVudEJ1ZmZlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGJhdGNoID0gYmF0Y2hSZXN1bHQuYmF0Y2g7XHJcbiAgICAgICAgdmFyIGRvY0tleXMgPSBiYXRjaC5rZXlzKCk7XHJcbiAgICAgICAgdmFyIHByb21pc2VDaGFpbiA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgZG9jS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2NLZXkpIHtcclxuICAgICAgICAgICAgcHJvbWlzZUNoYWluID0gcHJvbWlzZUNoYWluXHJcbiAgICAgICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRCdWZmZXIuZ2V0RW50cnkodHhuLCBkb2NLZXkpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKHJlbW90ZURvYykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IHJlbW90ZURvYztcclxuICAgICAgICAgICAgICAgIHZhciBhY2tWZXJzaW9uID0gYmF0Y2hSZXN1bHQuZG9jVmVyc2lvbnMuZ2V0KGRvY0tleSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoYWNrVmVyc2lvbiAhPT0gbnVsbCwgJ2Fja1ZlcnNpb25zIHNob3VsZCBjb250YWluIGV2ZXJ5IGRvYyBpbiB0aGUgd3JpdGUuJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRvYyB8fCBkb2MudmVyc2lvbi5jb21wYXJlVG8oYWNrVmVyc2lvbikgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jID0gYmF0Y2guYXBwbHlUb1JlbW90ZURvY3VtZW50KGRvY0tleSwgZG9jLCBiYXRjaFJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCFyZW1vdGVEb2MsICdNdXRhdGlvbiBiYXRjaCAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgYXBwbGllZCB0byBkb2N1bWVudCAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZURvYyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHJlc3VsdGVkIGluIG51bGwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudEJ1ZmZlci5hZGRFbnRyeShkb2MsIGJhdGNoUmVzdWx0LmNvbW1pdFZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2VDaGFpbi5uZXh0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm11dGF0aW9uUXVldWUucmVtb3ZlTXV0YXRpb25CYXRjaCh0eG4sIGJhdGNoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBMb2NhbFN0b3JlLnByb3RvdHlwZS5jb2xsZWN0R2FyYmFnZSA9IGZ1bmN0aW9uIChnYXJiYWdlQ29sbGVjdG9yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignQ29sbGVjdCBnYXJiYWdlJywgJ3JlYWR3cml0ZS1wcmltYXJ5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7IHJldHVybiBnYXJiYWdlQ29sbGVjdG9yLmNvbGxlY3QodHhuLCBfdGhpcy50YXJnZXREYXRhQnlUYXJnZXQpOyB9KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgTG9jYWxTdG9yZS5wcm90b3R5cGUuZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY2FjaGVkVGFyZ2V0RGF0YSA9IHRoaXMudGFyZ2V0RGF0YUJ5VGFyZ2V0LmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgaWYgKGNhY2hlZFRhcmdldERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjYWNoZWRUYXJnZXREYXRhLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbignR2V0IHRhcmdldCBkYXRhJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudGFyZ2V0Q2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCh0eG4sIHRhcmdldElkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7IHJldHVybiAodGFyZ2V0RGF0YSA/IHRhcmdldERhdGEudGFyZ2V0IDogbnVsbCk7IH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3QgY2FsbC5cclxuICAgICAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIHJldHVybnMgdGhlIHNldCBvZiBjaGFuZ2VzIHNpbmNlIGNsaWVudFxyXG4gICAgICogaW5pdGlhbGl6YXRpb24uIEZ1cnRoZXIgaW52b2NhdGlvbnMgd2lsbCByZXR1cm4gZG9jdW1lbnQgY2hhbmdlcyBzaW5jZVxyXG4gICAgICogdGhlIHBvaW50IG9mIHJlamVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLmdldE5ld0RvY3VtZW50Q2hhbmdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbignR2V0IG5ldyBkb2N1bWVudCBjaGFuZ2VzJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZW1vdGVEb2N1bWVudHMuZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKHR4biwgX3RoaXMubGFzdERvY3VtZW50Q2hhbmdlUmVhZFRpbWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICB2YXIgY2hhbmdlZERvY3MgPSBfYS5jaGFuZ2VkRG9jcywgcmVhZFRpbWUgPSBfYS5yZWFkVGltZTtcclxuICAgICAgICAgICAgX3RoaXMubGFzdERvY3VtZW50Q2hhbmdlUmVhZFRpbWUgPSByZWFkVGltZTtcclxuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZWREb2NzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVhZHMgdGhlIG5ld2VzdCBkb2N1bWVudCBjaGFuZ2UgZnJvbSBwZXJzaXN0ZW5jZSBhbmQgZm9yd2FyZHMgdGhlIGludGVybmFsXHJcbiAgICAgKiBzeW5jaHJvbml6YXRpb24gbWFya2VyIHNvIHRoYXQgY2FsbHMgdG8gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYFxyXG4gICAgICogb25seSByZXR1cm4gY2hhbmdlcyB0aGF0IGhhcHBlbmVkIGFmdGVyIGNsaWVudCBpbml0aWFsaXphdGlvbi5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIExvY2FsU3RvcmUucHJvdG90eXBlLnN5bmNocm9uaXplTGFzdERvY3VtZW50Q2hhbmdlUmVhZFRpbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVtb3RlRG9jdW1lbnRDYWNoZV8xO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZW1vdGVEb2N1bWVudHMgaW5zdGFuY2VvZiBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlRG9jdW1lbnRDYWNoZV8xID0gdGhpcy5yZW1vdGVEb2N1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5ydW5UcmFuc2FjdGlvbignU3luY2hyb25pemUgbGFzdCBkb2N1bWVudCBjaGFuZ2UgcmVhZCB0aW1lJywgJ3JlYWRvbmx5LWlkZW1wb3RlbnQnLCBmdW5jdGlvbiAodHhuKSB7IHJldHVybiByZW1vdGVEb2N1bWVudENhY2hlXzEuZ2V0TGFzdERvY3VtZW50Q2hhbmdlKHR4bik7IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkVGltZSA9IF9hLnJlYWRUaW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGFzdERvY3VtZW50Q2hhbmdlUmVhZFRpbWUgPSByZWFkVGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYXhpbXVtIHRpbWUgdG8gbGVhdmUgYSByZXN1bWUgdG9rZW4gYnVmZmVyZWQgd2l0aG91dCB3cml0aW5nIGl0IG91dC5cclxuICAgICAqIFRoaXMgdmFsdWUgaXMgYXJiaXRyYXJ5OiBpdCdzIGxvbmcgZW5vdWdoIHRvIGF2b2lkIHNldmVyYWwgd3JpdGVzXHJcbiAgICAgKiAocG9zc2libHkgaW5kZWZpbml0ZWx5IGlmIHVwZGF0ZXMgY29tZSBtb3JlIGZyZXF1ZW50bHkgdGhhbiB0aGlzKSBidXRcclxuICAgICAqIHNob3J0IGVub3VnaCB0aGF0IHJlc3RhcnRpbmcgYWZ0ZXIgY3Jhc2hpbmcgd2lsbCBzdGlsbCBoYXZlIGEgcHJldHR5XHJcbiAgICAgKiByZWNlbnQgcmVzdW1lIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBMb2NhbFN0b3JlLlJFU1VNRV9UT0tFTl9NQVhfQUdFX01JQ1JPUyA9IDUgKiA2MCAqIDFlNjtcclxuICAgIHJldHVybiBMb2NhbFN0b3JlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIE1lbW9yeU11dGF0aW9uUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlNdXRhdGlvblF1ZXVlKGluZGV4TWFuYWdlciwgcmVmZXJlbmNlRGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGluZGV4TWFuYWdlcjtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gcmVmZXJlbmNlRGVsZWdhdGU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXHJcbiAgICAgICAgICogdGhlIGJhY2tlbmQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gW107XHJcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXHJcbiAgICAgICAgdGhpcy5uZXh0QmF0Y2hJZCA9IDE7XHJcbiAgICAgICAgLyoqIFRoZSBsYXN0IHJlY2VpdmVkIHN0cmVhbSB0b2tlbiBmcm9tIHRoZSBzZXJ2ZXIsIHVzZWQgdG8gYWNrbm93bGVkZ2Ugd2hpY2hcclxuICAgICAgICAgKiByZXNwb25zZXMgdGhlIGNsaWVudCBoYXMgcHJvY2Vzc2VkLiBTdHJlYW0gdG9rZW5zIGFyZSBvcGFxdWUgY2hlY2twb2ludFxyXG4gICAgICAgICAqIG1hcmtlcnMgd2hvc2Ugb25seSByZWFsIHZhbHVlIGlzIHRoZWlyIGluY2x1c2lvbiBpbiB0aGUgbmV4dCByZXF1ZXN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubGFzdFN0cmVhbVRva2VuID0gZW1wdHlCeXRlU3RyaW5nKCk7XHJcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXHJcbiAgICAgICAgdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleSA9IG5ldyBTb3J0ZWRTZXQoRG9jUmVmZXJlbmNlLmNvbXBhcmVCeUtleSk7XHJcbiAgICB9XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5jaGVja0VtcHR5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPT09IDApO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmFja25vd2xlZGdlQmF0Y2ggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoLCBzdHJlYW1Ub2tlbikge1xyXG4gICAgICAgIHZhciBiYXRjaElkID0gYmF0Y2guYmF0Y2hJZDtcclxuICAgICAgICB2YXIgYmF0Y2hJbmRleCA9IHRoaXMuaW5kZXhPZkV4aXN0aW5nQmF0Y2hJZChiYXRjaElkLCAnYWNrbm93bGVkZ2VkJyk7XHJcbiAgICAgICAgYXNzZXJ0KGJhdGNoSW5kZXggPT09IDAsICdDYW4gb25seSBhY2tub3dsZWRnZSB0aGUgZmlyc3QgYmF0Y2ggaW4gdGhlIG11dGF0aW9uIHF1ZXVlJyk7XHJcbiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlIGJhdGNoIGluIHRoZSBxdWV1ZSBpcyB0aGUgb25lIHRvIGJlIGFja25vd2xlZGdlZC5cclxuICAgICAgICB2YXIgY2hlY2sgPSB0aGlzLm11dGF0aW9uUXVldWVbYmF0Y2hJbmRleF07XHJcbiAgICAgICAgYXNzZXJ0KGJhdGNoSWQgPT09IGNoZWNrLmJhdGNoSWQsICdRdWV1ZSBvcmRlcmluZyBmYWlsdXJlOiBleHBlY3RlZCBiYXRjaCAnICtcclxuICAgICAgICAgICAgYmF0Y2hJZCArXHJcbiAgICAgICAgICAgICcsIGdvdCBiYXRjaCAnICtcclxuICAgICAgICAgICAgY2hlY2suYmF0Y2hJZCk7XHJcbiAgICAgICAgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSBzdHJlYW1Ub2tlbjtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRMYXN0U3RyZWFtVG9rZW4gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5sYXN0U3RyZWFtVG9rZW4pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLnNldExhc3RTdHJlYW1Ub2tlbiA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgc3RyZWFtVG9rZW4pIHtcclxuICAgICAgICB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHN0cmVhbVRva2VuO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmFkZE11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGxvY2FsV3JpdGVUaW1lLCBiYXNlTXV0YXRpb25zLCBtdXRhdGlvbnMpIHtcclxuICAgICAgICBhc3NlcnQobXV0YXRpb25zLmxlbmd0aCAhPT0gMCwgJ011dGF0aW9uIGJhdGNoZXMgc2hvdWxkIG5vdCBiZSBlbXB0eScpO1xyXG4gICAgICAgIHZhciBiYXRjaElkID0gdGhpcy5uZXh0QmF0Y2hJZDtcclxuICAgICAgICB0aGlzLm5leHRCYXRjaElkKys7XHJcbiAgICAgICAgaWYgKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBwcmlvciA9IHRoaXMubXV0YXRpb25RdWV1ZVt0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIGFzc2VydChwcmlvci5iYXRjaElkIDwgYmF0Y2hJZCwgJ011dGF0aW9uIGJhdGNoSURzIG11c3QgYmUgbW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIG9yZGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBiYXRjaCA9IG5ldyBNdXRhdGlvbkJhdGNoKGJhdGNoSWQsIGxvY2FsV3JpdGVUaW1lLCBiYXNlTXV0YXRpb25zLCBtdXRhdGlvbnMpO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5wdXNoKGJhdGNoKTtcclxuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgbXV0YXRpb25zXzEgPSBtdXRhdGlvbnM7IF9pIDwgbXV0YXRpb25zXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IG11dGF0aW9uc18xW19pXTtcclxuICAgICAgICAgICAgdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleSA9IHRoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXkuYWRkKG5ldyBEb2NSZWZlcmVuY2UobXV0YXRpb24ua2V5LCBiYXRjaElkKSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHRyYW5zYWN0aW9uLCBtdXRhdGlvbi5rZXkucGF0aC5wb3BMYXN0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoYmF0Y2gpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmxvb2t1cE11dGF0aW9uQmF0Y2ggPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGJhdGNoSWQpIHtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5maW5kTXV0YXRpb25CYXRjaChiYXRjaElkKSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUubG9va3VwTXV0YXRpb25LZXlzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uQmF0Y2ggPSB0aGlzLmZpbmRNdXRhdGlvbkJhdGNoKGJhdGNoSWQpO1xyXG4gICAgICAgIGFzc2VydChtdXRhdGlvbkJhdGNoICE9IG51bGwsICdGYWlsZWQgdG8gZmluZCBsb2NhbCBtdXRhdGlvbiBiYXRjaC4nKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobXV0YXRpb25CYXRjaC5rZXlzKCkpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBiYXRjaElkKSB7XHJcbiAgICAgICAgdmFyIG5leHRCYXRjaElkID0gYmF0Y2hJZCArIDE7XHJcbiAgICAgICAgLy8gVGhlIHJlcXVlc3RlZCBiYXRjaElkIG1heSBzdGlsbCBiZSBvdXQgb2YgcmFuZ2Ugc28gbm9ybWFsaXplIGl0IHRvIHRoZVxyXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBxdWV1ZS5cclxuICAgICAgICB2YXIgcmF3SW5kZXggPSB0aGlzLmluZGV4T2ZCYXRjaElkKG5leHRCYXRjaElkKTtcclxuICAgICAgICB2YXIgaW5kZXggPSByYXdJbmRleCA8IDAgPyAwIDogcmF3SW5kZXg7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiBpbmRleCA/IHRoaXMubXV0YXRpb25RdWV1ZVtpbmRleF0gOiBudWxsKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID09PSAwID8gQkFUQ0hJRF9VTktOT1dOIDogdGhpcy5uZXh0QmF0Y2hJZCAtIDEpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUuc2xpY2UoKSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc3RhcnQgPSBuZXcgRG9jUmVmZXJlbmNlKGRvY3VtZW50S2V5LCAwKTtcclxuICAgICAgICB2YXIgZW5kID0gbmV3IERvY1JlZmVyZW5jZShkb2N1bWVudEtleSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5mb3JFYWNoSW5SYW5nZShbc3RhcnQsIGVuZF0sIGZ1bmN0aW9uIChyZWYpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KGRvY3VtZW50S2V5LmlzRXF1YWwocmVmLmtleSksIFwiU2hvdWxkIG9ubHkgaXRlcmF0ZSBvdmVyIGEgc2luZ2xlIGtleSdzIGJhdGNoZXNcIik7XHJcbiAgICAgICAgICAgIHZhciBiYXRjaCA9IF90aGlzLmZpbmRNdXRhdGlvbkJhdGNoKHJlZi50YXJnZXRPckJhdGNoSWQpO1xyXG4gICAgICAgICAgICBhc3NlcnQoYmF0Y2ggIT09IG51bGwsICdCYXRjaGVzIGluIHRoZSBpbmRleCBtdXN0IGV4aXN0IGluIHRoZSBtYWluIHRhYmxlJyk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGJhdGNoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVuaXF1ZUJhdGNoSURzID0gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICBkb2N1bWVudEtleXMuZm9yRWFjaChmdW5jdGlvbiAoZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gbmV3IERvY1JlZmVyZW5jZShkb2N1bWVudEtleSwgMCk7XHJcbiAgICAgICAgICAgIHZhciBlbmQgPSBuZXcgRG9jUmVmZXJlbmNlKGRvY3VtZW50S2V5LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xyXG4gICAgICAgICAgICBfdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleS5mb3JFYWNoSW5SYW5nZShbc3RhcnQsIGVuZF0sIGZ1bmN0aW9uIChyZWYpIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChkb2N1bWVudEtleS5pc0VxdWFsKHJlZi5rZXkpLCBcIkZvciBlYWNoIGtleSwgc2hvdWxkIG9ubHkgaXRlcmF0ZSBvdmVyIGEgc2luZ2xlIGtleSdzIGJhdGNoZXNcIik7XHJcbiAgICAgICAgICAgICAgICB1bmlxdWVCYXRjaElEcyA9IHVuaXF1ZUJhdGNoSURzLmFkZChyZWYudGFyZ2V0T3JCYXRjaElkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuZmluZE11dGF0aW9uQmF0Y2hlcyh1bmlxdWVCYXRjaElEcykpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSkge1xyXG4gICAgICAgIGFzc2VydCghcXVlcnkuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSgpLCAnQ29sbGVjdGlvbkdyb3VwIHF1ZXJpZXMgc2hvdWxkIGJlIGhhbmRsZWQgaW4gTG9jYWxEb2N1bWVudHNWaWV3Jyk7XHJcbiAgICAgICAgLy8gVXNlIHRoZSBxdWVyeSBwYXRoIGFzIGEgcHJlZml4IGZvciB0ZXN0aW5nIGlmIGEgZG9jdW1lbnQgbWF0Y2hlcyB0aGVcclxuICAgICAgICAvLyBxdWVyeS5cclxuICAgICAgICB2YXIgcHJlZml4ID0gcXVlcnkucGF0aDtcclxuICAgICAgICB2YXIgaW1tZWRpYXRlQ2hpbGRyZW5QYXRoTGVuZ3RoID0gcHJlZml4Lmxlbmd0aCArIDE7XHJcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxyXG4gICAgICAgIC8vIHRoZSBwcmVmaXggdGhlIGRvY3VtZW50IGtleSBpbiB0aGlzIHJlZmVyZW5jZSBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2ZcclxuICAgICAgICAvLyBzZWdtZW50cy4gVGhlIGVtcHR5IHNlZ21lbnQgY2FuIGJlIHVzZWQgYSBzdWZmaXggb2YgdGhlIHF1ZXJ5IHBhdGhcclxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cclxuICAgICAgICB2YXIgc3RhcnRQYXRoID0gcHJlZml4O1xyXG4gICAgICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShzdGFydFBhdGgpKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0UGF0aCA9IHN0YXJ0UGF0aC5jaGlsZCgnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzdGFydCA9IG5ldyBEb2NSZWZlcmVuY2UobmV3IERvY3VtZW50S2V5KHN0YXJ0UGF0aCksIDApO1xyXG4gICAgICAgIC8vIEZpbmQgdW5pcXVlIGJhdGNoSURzIHJlZmVyZW5jZWQgYnkgYWxsIGRvY3VtZW50cyBwb3RlbnRpYWxseSBtYXRjaGluZyB0aGVcclxuICAgICAgICAvLyBxdWVyeS5cclxuICAgICAgICB2YXIgdW5pcXVlQmF0Y2hJRHMgPSBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHRoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXkuZm9yRWFjaFdoaWxlKGZ1bmN0aW9uIChyZWYpIHtcclxuICAgICAgICAgICAgdmFyIHJvd0tleVBhdGggPSByZWYua2V5LnBhdGg7XHJcbiAgICAgICAgICAgIGlmICghcHJlZml4LmlzUHJlZml4T2Yocm93S2V5UGF0aCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnlcclxuICAgICAgICAgICAgICAgIC8vIHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyBjYW4ndCBtYXRjaFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXHJcbiAgICAgICAgICAgICAgICBpZiAocm93S2V5UGF0aC5sZW5ndGggPT09IGltbWVkaWF0ZUNoaWxkcmVuUGF0aExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZUJhdGNoSURzID0gdW5pcXVlQmF0Y2hJRHMuYWRkKHJlZi50YXJnZXRPckJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBzdGFydCk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuZmluZE11dGF0aW9uQmF0Y2hlcyh1bmlxdWVCYXRjaElEcykpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmZpbmRNdXRhdGlvbkJhdGNoZXMgPSBmdW5jdGlvbiAoYmF0Y2hJRHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhcnJheSBvZiBtYXRjaGluZyBiYXRjaGVzLCBzb3J0ZWQgYnkgYmF0Y2hJRCB0byBlbnN1cmUgdGhhdFxyXG4gICAgICAgIC8vIG11bHRpcGxlIG11dGF0aW9ucyBhZmZlY3RpbmcgdGhlIHNhbWUgZG9jdW1lbnQga2V5IGFyZSBhcHBsaWVkIGluIG9yZGVyLlxyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICBiYXRjaElEcy5mb3JFYWNoKGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgICAgIHZhciBiYXRjaCA9IF90aGlzLmZpbmRNdXRhdGlvbkJhdGNoKGJhdGNoSWQpO1xyXG4gICAgICAgICAgICBpZiAoYmF0Y2ggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGJhdGNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUucmVtb3ZlTXV0YXRpb25CYXRjaCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgYmF0Y2gpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIEZpbmQgdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBiYXRjaCBmb3IgcmVtb3ZhbC4gVGhpcyBuZWVkIG5vdCBiZSB0aGVcclxuICAgICAgICAvLyBmaXJzdCBlbnRyeSBpbiB0aGUgcXVldWUuXHJcbiAgICAgICAgdmFyIGJhdGNoSW5kZXggPSB0aGlzLmluZGV4T2ZFeGlzdGluZ0JhdGNoSWQoYmF0Y2guYmF0Y2hJZCwgJ3JlbW92ZWQnKTtcclxuICAgICAgICBhc3NlcnQoYmF0Y2hJbmRleCA9PT0gMCwgJ0NhbiBvbmx5IHJlbW92ZSB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIG11dGF0aW9uIHF1ZXVlJyk7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgdmFyIHJlZmVyZW5jZXMgPSB0aGlzLmJhdGNoZXNCeURvY3VtZW50S2V5O1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChiYXRjaC5tdXRhdGlvbnMsIGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgcmVmID0gbmV3IERvY1JlZmVyZW5jZShtdXRhdGlvbi5rZXksIGJhdGNoLmJhdGNoSWQpO1xyXG4gICAgICAgICAgICByZWZlcmVuY2VzID0gcmVmZXJlbmNlcy5kZWxldGUocmVmKTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZU11dGF0aW9uUmVmZXJlbmNlKHRyYW5zYWN0aW9uLCBtdXRhdGlvbi5rZXkpO1xyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5iYXRjaGVzQnlEb2N1bWVudEtleSA9IHJlZmVyZW5jZXM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUucmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAvLyBOby1vcCBzaW5jZSB0aGUgbWVtb3J5IG11dGF0aW9uIHF1ZXVlIGRvZXMgbm90IG1haW50YWluIGEgc2VwYXJhdGUgY2FjaGUuXHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuY29udGFpbnNLZXkgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB2YXIgcmVmID0gbmV3IERvY1JlZmVyZW5jZShrZXksIDApO1xyXG4gICAgICAgIHZhciBmaXJzdFJlZiA9IHRoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXkuZmlyc3RBZnRlck9yRXF1YWwocmVmKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoa2V5LmlzRXF1YWwoZmlyc3RSZWYgJiYgZmlyc3RSZWYua2V5KSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5TXV0YXRpb25RdWV1ZS5wcm90b3R5cGUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuYmF0Y2hlc0J5RG9jdW1lbnRLZXkuaXNFbXB0eSgpLCAnRG9jdW1lbnQgbGVhayAtLSBkZXRlY3RlZCBkYW5nbGluZyBtdXRhdGlvbiByZWZlcmVuY2VzIHdoZW4gcXVldWUgaXMgZW1wdHkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZSBhbmQgYXNzZXJ0cyB0aGF0XHJcbiAgICAgKiB0aGUgcmVzdWx0aW5nIGluZGV4IGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBxdWV1ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCBUaGUgYmF0Y2hJZCB0byBzZWFyY2ggZm9yXHJcbiAgICAgKiBAcGFyYW0gYWN0aW9uIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgY2FsbGVyIGlzIGRvaW5nLCBwaHJhc2VkIGluIHBhc3NpdmVcclxuICAgICAqIGZvcm0gKGUuZy4gXCJhY2tub3dsZWRnZWRcIiBpbiBhIHJvdXRpbmUgdGhhdCBhY2tub3dsZWRnZXMgYmF0Y2hlcykuXHJcbiAgICAgKi9cclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmluZGV4T2ZFeGlzdGluZ0JhdGNoSWQgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgYWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mQmF0Y2hJZChiYXRjaElkKTtcclxuICAgICAgICBhc3NlcnQoaW5kZXggPj0gMCAmJiBpbmRleCA8IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgsICdCYXRjaGVzIG11c3QgZXhpc3QgdG8gYmUgJyArIGFjdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZS4gVGhpcyBvcGVyYXRpb25cclxuICAgICAqIGlzIE8oMSkuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBUaGUgY29tcHV0ZWQgaW5kZXggb2YgdGhlIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQsIGJhc2VkIG9uXHJcbiAgICAgKiB0aGUgc3RhdGUgb2YgdGhlIHF1ZXVlLiBOb3RlIHRoaXMgaW5kZXggY2FuIGJlIG5lZ2F0aXZlIGlmIHRoZSByZXF1ZXN0ZWRcclxuICAgICAqIGJhdGNoSWQgaGFzIGFscmVhZHkgYmVlbiByZW12b2VkIGZyb20gdGhlIHF1ZXVlIG9yIHBhc3QgdGhlIGVuZCBvZiB0aGVcclxuICAgICAqIHF1ZXVlIGlmIHRoZSBiYXRjaElkIGlzIGxhcmdlciB0aGFuIHRoZSBsYXN0IGFkZGVkIGJhdGNoLlxyXG4gICAgICovXHJcbiAgICBNZW1vcnlNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5pbmRleE9mQmF0Y2hJZCA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgLy8gQXMgYW4gaW5kZXggdGhpcyBpcyBwYXN0IHRoZSBlbmQgb2YgdGhlIHF1ZXVlXHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFeGFtaW5lIHRoZSBmcm9udCBvZiB0aGUgcXVldWUgdG8gZmlndXJlIG91dCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZVxyXG4gICAgICAgIC8vIGJhdGNoSWQgYW5kIGluZGV4ZXMgaW4gdGhlIGFycmF5LiBOb3RlIHRoYXQgc2luY2UgdGhlIHF1ZXVlIGlzIG9yZGVyZWRcclxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXHJcbiAgICAgICAgLy8gYmF0Y2hJZCBkb2Vzbid0IGV4aXN0IGluIHRoZSBxdWV1ZS5cclxuICAgICAgICB2YXIgZmlyc3RCYXRjaElkID0gdGhpcy5tdXRhdGlvblF1ZXVlWzBdLmJhdGNoSWQ7XHJcbiAgICAgICAgcmV0dXJuIGJhdGNoSWQgLSBmaXJzdEJhdGNoSWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIHZlcnNpb24gb2YgbG9va3VwTXV0YXRpb25CYXRjaCB0aGF0IGRvZXNuJ3QgcmV0dXJuIGEgcHJvbWlzZSwgdGhpcyBtYWtlc1xyXG4gICAgICogb3RoZXIgZnVuY3Rpb25zIHRoYXQgdXNlcyB0aGlzIGNvZGUgZWFzaWVyIHRvIHJlYWQgYW5kIG1vcmUgZWZmaWNlbnQuXHJcbiAgICAgKi9cclxuICAgIE1lbW9yeU11dGF0aW9uUXVldWUucHJvdG90eXBlLmZpbmRNdXRhdGlvbkJhdGNoID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2ZCYXRjaElkKGJhdGNoSWQpO1xyXG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJhdGNoID0gdGhpcy5tdXRhdGlvblF1ZXVlW2luZGV4XTtcclxuICAgICAgICBhc3NlcnQoYmF0Y2guYmF0Y2hJZCA9PT0gYmF0Y2hJZCwgJ0lmIGZvdW5kIGJhdGNoIG11c3QgbWF0Y2gnKTtcclxuICAgICAgICByZXR1cm4gYmF0Y2g7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeU11dGF0aW9uUXVldWU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBkb2N1bWVudEVudHJ5TWFwKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbn1cclxudmFyIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBzaXplciBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXMgZXhwZWN0ZWQgdG8ganVzdFxyXG4gICAgICogcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZShpbmRleE1hbmFnZXIsIHNpemVyKSB7XHJcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBpbmRleE1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5zaXplciA9IHNpemVyO1xyXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cclxuICAgICAgICB0aGlzLmRvY3MgPSBkb2N1bWVudEVudHJ5TWFwKCk7XHJcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXHJcbiAgICAgICAgdGhpcy5zaXplID0gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cnkgdG8gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxyXG4gICAgICpcclxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXHJcbiAgICAgKi9cclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmFkZEVudHJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2MsIHJlYWRUaW1lKSB7XHJcbiAgICAgICAgYXNzZXJ0KCFyZWFkVGltZS5pc0VxdWFsKFNuYXBzaG90VmVyc2lvbi5NSU4pLCAnQ2Fubm90IGFkZCBhIGRvY3VtZW50IHdpdGggYSByZWFkIHRpbWUgb2YgemVybycpO1xyXG4gICAgICAgIHZhciBrZXkgPSBkb2Mua2V5O1xyXG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuZG9jcy5nZXQoa2V5KTtcclxuICAgICAgICB2YXIgcHJldmlvdXNTaXplID0gZW50cnkgPyBlbnRyeS5zaXplIDogMDtcclxuICAgICAgICB2YXIgY3VycmVudFNpemUgPSB0aGlzLnNpemVyKGRvYyk7XHJcbiAgICAgICAgdGhpcy5kb2NzID0gdGhpcy5kb2NzLmluc2VydChrZXksIHtcclxuICAgICAgICAgICAgbWF5YmVEb2N1bWVudDogZG9jLFxyXG4gICAgICAgICAgICBzaXplOiBjdXJyZW50U2l6ZSxcclxuICAgICAgICAgICAgcmVhZFRpbWU6IHJlYWRUaW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zaXplICs9IGN1cnJlbnRTaXplIC0gcHJldmlvdXNTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0cmFuc2FjdGlvbiwga2V5LnBhdGgucG9wTGFzdCgpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBlbnRyeSBmcm9tIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cclxuICAgICAqXHJcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXHJcbiAgICAgKi9cclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLnJlbW92ZUVudHJ5ID0gZnVuY3Rpb24gKGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5kb2NzLmdldChkb2N1bWVudEtleSk7XHJcbiAgICAgICAgaWYgKGVudHJ5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5yZW1vdmUoZG9jdW1lbnRLZXkpO1xyXG4gICAgICAgICAgICB0aGlzLnNpemUgLT0gZW50cnkuc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0RW50cnkgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5KSB7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5kb2NzLmdldChkb2N1bWVudEtleSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGVudHJ5ID8gZW50cnkubWF5YmVEb2N1bWVudCA6IG51bGwpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldEVudHJpZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIGRvY3VtZW50S2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBudWxsYWJsZU1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICBkb2N1bWVudEtleXMuZm9yRWFjaChmdW5jdGlvbiAoZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0gX3RoaXMuZG9jcy5nZXQoZG9jdW1lbnRLZXkpO1xyXG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cy5pbnNlcnQoZG9jdW1lbnRLZXksIGVudHJ5ID8gZW50cnkubWF5YmVEb2N1bWVudCA6IG51bGwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBxdWVyeSwgc2luY2VSZWFkVGltZSkge1xyXG4gICAgICAgIGFzc2VydCghcXVlcnkuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSgpLCAnQ29sbGVjdGlvbkdyb3VwIHF1ZXJpZXMgc2hvdWxkIGJlIGhhbmRsZWQgaW4gTG9jYWxEb2N1bWVudHNWaWV3Jyk7XHJcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBkb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxyXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cclxuICAgICAgICB2YXIgcHJlZml4ID0gbmV3IERvY3VtZW50S2V5KHF1ZXJ5LnBhdGguY2hpbGQoJycpKTtcclxuICAgICAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLmRvY3MuZ2V0SXRlcmF0b3JGcm9tKHByZWZpeCk7XHJcbiAgICAgICAgd2hpbGUgKGl0ZXJhdG9yLmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgX2EgPSBpdGVyYXRvci5nZXROZXh0KCksIGtleSA9IF9hLmtleSwgX2IgPSBfYS52YWx1ZSwgbWF5YmVEb2N1bWVudCA9IF9iLm1heWJlRG9jdW1lbnQsIHJlYWRUaW1lID0gX2IucmVhZFRpbWU7XHJcbiAgICAgICAgICAgIGlmICghcXVlcnkucGF0aC5pc1ByZWZpeE9mKGtleS5wYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHJlYWRUaW1lLmNvbXBhcmVUbyhzaW5jZVJlYWRUaW1lKSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobWF5YmVEb2N1bWVudCBpbnN0YW5jZW9mIERvY3VtZW50ICYmIHF1ZXJ5Lm1hdGNoZXMobWF5YmVEb2N1bWVudCkpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmluc2VydChtYXliZURvY3VtZW50LmtleSwgbWF5YmVEb2N1bWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmZvckVhY2hEb2N1bWVudEtleSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0aGlzLmRvY3MsIGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGYoa2V5KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5wcm90b3R5cGUuZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBzaW5jZVJlYWRUaW1lKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdnZXROZXdEb2N1bWVudENoYW5nZXMoKSBpcyBub3Qgc3VwcG9ydGVkIHdpdGggTWVtb3J5UGVyc2lzdGVuY2UnKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLnByb3RvdHlwZS5uZXdDaGFuZ2VCdWZmZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIC8vIGB0cmFja1JlbW92YWxzYCBpcyBpZ25vcmVzIHNpbmNlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlIGtlZXBzXHJcbiAgICAgICAgLy8gYSBzZXBhcmF0ZSBjaGFuZ2Vsb2cgYW5kIGRvZXMgbm90IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBmb3IgcmVtb3ZhbHMuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLlJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuc2l6ZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLlxyXG4gICAgICovXHJcbiAgICBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLlJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgICAgIHRzbGliLl9fZXh0ZW5kcyhjbGFzc18xLCBfc3VwZXIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsYXNzXzEoZG9jdW1lbnRDYWNoZSkge1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgICAgICBfdGhpcy5kb2N1bWVudENhY2hlID0gZG9jdW1lbnRDYWNoZTtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5hcHBseUNoYW5nZXMgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGRvYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuZG9jdW1lbnRDYWNoZS5hZGRFbnRyeSh0cmFuc2FjdGlvbiwgZG9jLCBfdGhpcy5yZWFkVGltZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmdldEZyb21DYWNoZSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRDYWNoZS5nZXRFbnRyeSh0cmFuc2FjdGlvbiwgZG9jdW1lbnRLZXkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0QWxsRnJvbUNhY2hlID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRDYWNoZS5nZXRFbnRyaWVzKHRyYW5zYWN0aW9uLCBkb2N1bWVudEtleXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGNsYXNzXzE7XHJcbiAgICB9KFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyKSk7XHJcbiAgICByZXR1cm4gTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBNZW1vcnlUYXJnZXRDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeVRhcmdldENhY2hlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXQgdG8gdGhlIGRhdGEgYWJvdXQgdGhhdCB0YXJnZXRcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRhcmdldHMgPSBuZXcgT2JqZWN0TWFwKGZ1bmN0aW9uICh0KSB7IHJldHVybiB0LmNhbm9uaWNhbElkKCk7IH0pO1xyXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZWNlaXZlZCBzbmFwc2hvdCB2ZXJzaW9uLiAqL1xyXG4gICAgICAgIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBJRCBlbmNvdW50ZXJlZC4gKi9cclxuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDA7XHJcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IHNlcXVlbmNlIG51bWJlciBlbmNvdW50ZXJlZC4gKi9cclxuICAgICAgICB0aGlzLmhpZ2hlc3RTZXF1ZW5jZU51bWJlciA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBvcmRlcmVkIGJpZGlyZWN0aW9uYWwgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIHJlbW90ZSB0YXJnZXRcclxuICAgICAgICAgKiBJRHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VzID0gbmV3IFJlZmVyZW5jZVNldCgpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWRHZW5lcmF0b3IgPSBUYXJnZXRJZEdlbmVyYXRvci5mb3JUYXJnZXRDYWNoZSgpO1xyXG4gICAgfVxyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmZvckVhY2hUYXJnZXQgPSBmdW5jdGlvbiAodHhuLCBmKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRzLmZvckVhY2goZnVuY3Rpb24gKF8sIHRhcmdldERhdGEpIHsgcmV0dXJuIGYodGFyZ2V0RGF0YSk7IH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbik7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLmhpZ2hlc3RTZXF1ZW5jZU51bWJlcik7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmFsbG9jYXRlVGFyZ2V0SWQgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB2YXIgbmV4dFRhcmdldElkID0gdGhpcy50YXJnZXRJZEdlbmVyYXRvci5hZnRlcih0aGlzLmhpZ2hlc3RUYXJnZXRJZCk7XHJcbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBuZXh0VGFyZ2V0SWQ7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG5leHRUYXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLnNldFRhcmdldHNNZXRhZGF0YSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyLCBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgaWYgKGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA+IHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlnaGVzdFNlcXVlbmNlTnVtYmVyID0gaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuc2F2ZVRhcmdldERhdGEgPSBmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0cy5zZXQodGFyZ2V0RGF0YS50YXJnZXQsIHRhcmdldERhdGEpO1xyXG4gICAgICAgIHZhciB0YXJnZXRJZCA9IHRhcmdldERhdGEudGFyZ2V0SWQ7XHJcbiAgICAgICAgaWYgKHRhcmdldElkID4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXIgPiB0aGlzLmhpZ2hlc3RTZXF1ZW5jZU51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLmhpZ2hlc3RTZXF1ZW5jZU51bWJlciA9IHRhcmdldERhdGEuc2VxdWVuY2VOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5hZGRUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLnRhcmdldHMuaGFzKHRhcmdldERhdGEudGFyZ2V0KSwgJ0FkZGluZyBhIHRhcmdldCB0aGF0IGFscmVhZHkgZXhpc3RzJyk7XHJcbiAgICAgICAgdGhpcy5zYXZlVGFyZ2V0RGF0YSh0YXJnZXREYXRhKTtcclxuICAgICAgICB0aGlzLnRhcmdldENvdW50ICs9IDE7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLnVwZGF0ZVRhcmdldERhdGEgPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHRhcmdldERhdGEpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy50YXJnZXRzLmhhcyh0YXJnZXREYXRhLnRhcmdldCksICdVcGRhdGluZyBhIG5vbi1leGlzdGVudCB0YXJnZXQnKTtcclxuICAgICAgICB0aGlzLnNhdmVUYXJnZXREYXRhKHRhcmdldERhdGEpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMudGFyZ2V0Q291bnQgPiAwLCAnUmVtb3ZpbmcgYSB0YXJnZXQgZnJvbSBhbiBlbXB0eSBjYWNoZScpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnRhcmdldHMuaGFzKHRhcmdldERhdGEudGFyZ2V0KSwgJ1JlbW92aW5nIGEgbm9uLWV4aXN0ZW50IHRhcmdldCBmcm9tIHRoZSBjYWNoZScpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0cy5kZWxldGUodGFyZ2V0RGF0YS50YXJnZXQpO1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlcy5yZW1vdmVSZWZlcmVuY2VzRm9ySWQodGFyZ2V0RGF0YS50YXJnZXRJZCk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRDb3VudCAtPSAxO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5yZW1vdmVUYXJnZXRzID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB1cHBlckJvdW5kLCBhY3RpdmVUYXJnZXRJZHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIHJlbW92YWxzID0gW107XHJcbiAgICAgICAgdGhpcy50YXJnZXRzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlciA8PSB1cHBlckJvdW5kICYmXHJcbiAgICAgICAgICAgICAgICBhY3RpdmVUYXJnZXRJZHMuZ2V0KHRhcmdldERhdGEudGFyZ2V0SWQpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50YXJnZXRzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZhbHMucHVzaChfdGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0cmFuc2FjdGlvbiwgdGFyZ2V0RGF0YS50YXJnZXRJZCkpO1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyZW1vdmFscykubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjb3VudDsgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLmdldFRhcmdldENvdW50ID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRUYXJnZXREYXRhID0gZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCB0YXJnZXQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IHRoaXMudGFyZ2V0cy5nZXQodGFyZ2V0KSB8fCBudWxsO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0YXJnZXREYXRhKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUuZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgdGFyZ2V0SWQpIHtcclxuICAgICAgICAvLyBUaGlzIG1ldGhvZCBpcyBvbmx5IG5lZWRlZCBmb3IgbXVsdGktdGFiIGFuZCB3ZSBjYW4ndCBpbXBsZW1lbnQgaXRcclxuICAgICAgICAvLyBlZmZpY2llbnRseSB3aXRob3V0IGFkZGl0aW9uYWwgZGF0YSBzdHJ1Y3R1cmVzLlxyXG4gICAgICAgIHJldHVybiBmYWlsKCdOb3QgeWV0IGltcGxlbWVudGVkLicpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5hZGRNYXRjaGluZ0tleXMgPSBmdW5jdGlvbiAodHhuLCBrZXlzLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlcy5hZGRSZWZlcmVuY2VzKGtleXMsIHRhcmdldElkKTtcclxuICAgICAgICB2YXIgcmVmZXJlbmNlRGVsZWdhdGUgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlO1xyXG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xyXG4gICAgICAgIGlmIChyZWZlcmVuY2VEZWxlZ2F0ZSkge1xyXG4gICAgICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChyZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodHhuLCBrZXkpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihwcm9taXNlcyk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5VGFyZ2V0Q2FjaGUucHJvdG90eXBlLnJlbW92ZU1hdGNoaW5nS2V5cyA9IGZ1bmN0aW9uICh0eG4sIGtleXMsIHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VzLnJlbW92ZVJlZmVyZW5jZXMoa2V5cywgdGFyZ2V0SWQpO1xyXG4gICAgICAgIHZhciByZWZlcmVuY2VEZWxlZ2F0ZSA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGU7XHJcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgaWYgKHJlZmVyZW5jZURlbGVnYXRlKSB7XHJcbiAgICAgICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0eG4sIGtleSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHByb21pc2VzKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlUYXJnZXRDYWNoZS5wcm90b3R5cGUucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQgPSBmdW5jdGlvbiAodHhuLCB0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlcy5yZW1vdmVSZWZlcmVuY2VzRm9ySWQodGFyZ2V0SWQpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIG1hdGNoaW5nS2V5cyA9IHRoaXMucmVmZXJlbmNlcy5yZWZlcmVuY2VzRm9ySWQodGFyZ2V0SWQpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShtYXRjaGluZ0tleXMpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVRhcmdldENhY2hlLnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLnJlZmVyZW5jZXMuY29udGFpbnNLZXkoa2V5KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeVRhcmdldENhY2hlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckMyA9ICdNZW1vcnlQZXJzaXN0ZW5jZSc7XHJcbi8qKlxyXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxyXG4gKiBub3QgcGVyc2lzdGVkIGFjcm9zcyBzZXNzaW9ucy5cclxuICovXHJcbnZhciBNZW1vcnlQZXJzaXN0ZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIGFjY2VwdHMgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBhIHJlZmVyZW5jZSBkZWxlZ2F0ZS4gVGhpc1xyXG4gICAgICogYWxsb3dzIGJvdGggdGhlIGRlbGVnYXRlIGFuZCB0aGlzIGluc3RhbmNlIHRvIGhhdmUgc3Ryb25nIHJlZmVyZW5jZXMgdG9cclxuICAgICAqIGVhY2ggb3RoZXIgd2l0aG91dCBoYXZpbmcgbnVsbGFibGUgZmllbGRzIHRoYXQgd291bGQgdGhlbiBuZWVkIHRvIGJlXHJcbiAgICAgKiBjaGVja2VkIG9yIGFzc2VydGVkIG9uIGV2ZXJ5IGFjY2Vzcy5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gTWVtb3J5UGVyc2lzdGVuY2UoY2xpZW50SWQsIHJlZmVyZW5jZURlbGVnYXRlRmFjdG9yeSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZXMgPSB7fTtcclxuICAgICAgICB0aGlzLmxpc3RlblNlcXVlbmNlID0gbmV3IExpc3RlblNlcXVlbmNlKDApO1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9zdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gcmVmZXJlbmNlRGVsZWdhdGVGYWN0b3J5KHRoaXMpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q2FjaGUgPSBuZXcgTWVtb3J5VGFyZ2V0Q2FjaGUodGhpcyk7XHJcbiAgICAgICAgdmFyIHNpemVyID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucmVmZXJlbmNlRGVsZWdhdGUuZG9jdW1lbnRTaXplKGRvYyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IG5ldyBNZW1vcnlJbmRleE1hbmFnZXIoKTtcclxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBuZXcgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSh0aGlzLmluZGV4TWFuYWdlciwgc2l6ZXIpO1xyXG4gICAgfVxyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UuY3JlYXRlTHJ1UGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAoY2xpZW50SWQsIHNlcmlhbGl6ZXIsIHBhcmFtcykge1xyXG4gICAgICAgIHZhciBmYWN0b3J5ID0gZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZW1vcnlMcnVEZWxlZ2F0ZShwLCBuZXcgTG9jYWxTZXJpYWxpemVyKHNlcmlhbGl6ZXIpLCBwYXJhbXMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNZW1vcnlQZXJzaXN0ZW5jZShjbGllbnRJZCwgZmFjdG9yeSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UuY3JlYXRlRWFnZXJQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uIChjbGllbnRJZCkge1xyXG4gICAgICAgIHZhciBmYWN0b3J5ID0gZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZW1vcnlFYWdlckRlbGVnYXRlKHApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNZW1vcnlQZXJzaXN0ZW5jZShjbGllbnRJZCwgZmFjdG9yeSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIE5vIGR1cmFibGUgc3RhdGUgdG8gZW5zdXJlIGlzIGNsb3NlZCBvbiBzaHV0ZG93bi5cclxuICAgICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUsIFwic3RhcnRlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGFydGVkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLmdldEFjdGl2ZUNsaWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW3RoaXMuY2xpZW50SWRdXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLnNldFByaW1hcnlTdGF0ZUxpc3RlbmVyID0gZnVuY3Rpb24gKHByaW1hcnlTdGF0ZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gQWxsIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlIGFjdCBhcyBwcmltYXJ5LlxyXG4gICAgICAgIHJldHVybiBwcmltYXJ5U3RhdGVMaXN0ZW5lcih0cnVlKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gTm8gb3AuXHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLnNldE5ldHdvcmtFbmFibGVkID0gZnVuY3Rpb24gKG5ldHdvcmtFbmFibGVkKSB7XHJcbiAgICAgICAgLy8gTm8gb3AuXHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLmdldEluZGV4TWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXI7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLmdldE11dGF0aW9uUXVldWUgPSBmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgIHZhciBxdWV1ZSA9IHRoaXMubXV0YXRpb25RdWV1ZXNbdXNlci50b0tleSgpXTtcclxuICAgICAgICBpZiAoIXF1ZXVlKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlID0gbmV3IE1lbW9yeU11dGF0aW9uUXVldWUodGhpcy5pbmRleE1hbmFnZXIsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpO1xyXG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uUXVldWVzW3VzZXIudG9LZXkoKV0gPSBxdWV1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHF1ZXVlO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5nZXRUYXJnZXRDYWNoZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRDYWNoZTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlQZXJzaXN0ZW5jZS5wcm90b3R5cGUuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVBlcnNpc3RlbmNlLnByb3RvdHlwZS5ydW5UcmFuc2FjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24sIG1vZGUsIHRyYW5zYWN0aW9uT3BlcmF0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJDMsICdTdGFydGluZyB0cmFuc2FjdGlvbjonLCBhY3Rpb24pO1xyXG4gICAgICAgIHZhciB0eG4gPSBuZXcgTWVtb3J5VHJhbnNhY3Rpb24odGhpcy5saXN0ZW5TZXF1ZW5jZS5uZXh0KCkpO1xyXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUub25UcmFuc2FjdGlvblN0YXJ0ZWQoKTtcclxuICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25PcGVyYXRpb24odHhuKVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZVxyXG4gICAgICAgICAgICAgICAgLm9uVHJhbnNhY3Rpb25Db21taXR0ZWQodHhuKVxyXG4gICAgICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzdWx0OyB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudG9Qcm9taXNlKClcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICB0eG4ucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5UGVyc2lzdGVuY2UucHJvdG90eXBlLm11dGF0aW9uUXVldWVzQ29udGFpbktleSA9IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwga2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5vcih2YWx1ZXModGhpcy5tdXRhdGlvblF1ZXVlcylcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocXVldWUpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHF1ZXVlLmNvbnRhaW5zS2V5KHRyYW5zYWN0aW9uLCBrZXkpOyB9OyB9KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeVBlcnNpc3RlbmNlO1xyXG59KCkpO1xyXG4vKipcclxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xyXG4gKiBtYXkgaGF2ZSB0cmFuc2FjdGlvbi1zY29wZWQgc3RhdGUuXHJcbiAqL1xyXG52YXIgTWVtb3J5VHJhbnNhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoTWVtb3J5VHJhbnNhY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlUcmFuc2FjdGlvbihjdXJyZW50U2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IGN1cnJlbnRTZXF1ZW5jZU51bWJlcjtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTWVtb3J5VHJhbnNhY3Rpb247XHJcbn0oUGVyc2lzdGVuY2VUcmFuc2FjdGlvbikpO1xyXG52YXIgTWVtb3J5RWFnZXJEZWxlZ2F0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lbW9yeUVhZ2VyRGVsZWdhdGUocGVyc2lzdGVuY2UpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5pbk1lbW9yeVBpbnMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29ycGhhbmVkRG9jdW1lbnRzID0gbnVsbDtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZSwgXCJvcnBoYW5lZERvY3VtZW50c1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fb3JwaGFuZWREb2N1bWVudHMpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGZhaWwoJ29ycGhhbmVkRG9jdW1lbnRzIGlzIG9ubHkgdmFsaWQgZHVyaW5nIGEgdHJhbnNhY3Rpb24uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb3JwaGFuZWREb2N1bWVudHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLnNldEluTWVtb3J5UGlucyA9IGZ1bmN0aW9uIChpbk1lbW9yeVBpbnMpIHtcclxuICAgICAgICB0aGlzLmluTWVtb3J5UGlucyA9IGluTWVtb3J5UGlucztcclxuICAgIH07XHJcbiAgICBNZW1vcnlFYWdlckRlbGVnYXRlLnByb3RvdHlwZS5hZGRSZWZlcmVuY2UgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB0aGlzLm9ycGhhbmVkRG9jdW1lbnRzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWREb2N1bWVudHMuYWRkKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlTXV0YXRpb25SZWZlcmVuY2UgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB0aGlzLm9ycGhhbmVkRG9jdW1lbnRzLmFkZChrZXkpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVRhcmdldCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcclxuICAgICAgICByZXR1cm4gY2FjaGVcclxuICAgICAgICAgICAgLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHR4biwgdGFyZ2V0RGF0YS50YXJnZXRJZClcclxuICAgICAgICAgICAgLm5leHQoZnVuY3Rpb24gKGtleXMpIHtcclxuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIF90aGlzLm9ycGhhbmVkRG9jdW1lbnRzLmFkZChrZXkpOyB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAubmV4dChmdW5jdGlvbiAoKSB7IHJldHVybiBjYWNoZS5yZW1vdmVUYXJnZXREYXRhKHR4biwgdGFyZ2V0RGF0YSk7IH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLm9uVHJhbnNhY3Rpb25TdGFydGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX29ycGhhbmVkRG9jdW1lbnRzID0gbmV3IFNldCgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLm9uVHJhbnNhY3Rpb25Db21taXR0ZWQgPSBmdW5jdGlvbiAodHhuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBSZW1vdmUgbmV3bHkgb3JwaGFuZWQgZG9jdW1lbnRzLlxyXG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpO1xyXG4gICAgICAgIHZhciBjaGFuZ2VCdWZmZXIgPSBjYWNoZS5uZXdDaGFuZ2VCdWZmZXIoKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5vcnBoYW5lZERvY3VtZW50cywgZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuaXNSZWZlcmVuY2VkKHR4biwga2V5KS5uZXh0KGZ1bmN0aW9uIChpc1JlZmVyZW5jZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNSZWZlcmVuY2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQnVmZmVyLnJlbW92ZUVudHJ5KGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLm5leHQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5fb3JwaGFuZWREb2N1bWVudHMgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hhbmdlQnVmZmVyLmFwcGx5KHR4bik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUudXBkYXRlTGltYm9Eb2N1bWVudCA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNSZWZlcmVuY2VkKHR4biwga2V5KS5uZXh0KGZ1bmN0aW9uIChpc1JlZmVyZW5jZWQpIHtcclxuICAgICAgICAgICAgaWYgKGlzUmVmZXJlbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMub3JwaGFuZWREb2N1bWVudHMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcnBoYW5lZERvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUVhZ2VyRGVsZWdhdGUucHJvdG90eXBlLmRvY3VtZW50U2l6ZSA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAvLyBGb3IgZWFnZXIgR0MsIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIGRvY3VtZW50IHNpemUsIHRoZXJlIGFyZSBubyBzaXplIHRocmVzaG9sZHMuXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5RWFnZXJEZWxlZ2F0ZS5wcm90b3R5cGUuaXNSZWZlcmVuY2VkID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLm9yKFtcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5jb250YWluc0tleSh0eG4sIGtleSk7IH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnBlcnNpc3RlbmNlLm11dGF0aW9uUXVldWVzQ29udGFpbktleSh0eG4sIGtleSk7IH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKF90aGlzLmluTWVtb3J5UGlucy5jb250YWluc0tleShrZXkpKTsgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZW1vcnlFYWdlckRlbGVnYXRlO1xyXG59KCkpO1xyXG52YXIgTWVtb3J5THJ1RGVsZWdhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlMcnVEZWxlZ2F0ZShwZXJzaXN0ZW5jZSwgc2VyaWFsaXplciwgbHJ1UGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHNlcmlhbGl6ZXI7XHJcbiAgICAgICAgdGhpcy5pbk1lbW9yeVBpbnMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMgPSBuZXcgT2JqZWN0TWFwKGZ1bmN0aW9uIChrKSB7IHJldHVybiBlbmNvZGUoay5wYXRoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gbmV3IExydUdhcmJhZ2VDb2xsZWN0b3IodGhpcywgbHJ1UGFyYW1zKTtcclxuICAgIH1cclxuICAgIC8vIE5vLW9wcywgcHJlc2VudCBzbyBtZW1vcnkgcGVyc2lzdGVuY2UgZG9lc24ndCBoYXZlIHRvIGNhcmUgd2hpY2ggZGVsZWdhdGVcclxuICAgIC8vIGl0IGhhcy5cclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5vblRyYW5zYWN0aW9uU3RhcnRlZCA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5vblRyYW5zYWN0aW9uQ29tbWl0dGVkID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5mb3JFYWNoVGFyZ2V0ID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0eG4sIGYpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5nZXRTZXF1ZW5jZU51bWJlckNvdW50ID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHZhciBkb2NDb3VudFByb21pc2UgPSB0aGlzLm9ycGhhbmVkRG9jdW1lbnRDb3VudCh0eG4pO1xyXG4gICAgICAgIHZhciB0YXJnZXRDb3VudFByb21pc2UgPSB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgIC5nZXRUYXJnZXRDYWNoZSgpXHJcbiAgICAgICAgICAgIC5nZXRUYXJnZXRDb3VudCh0eG4pO1xyXG4gICAgICAgIHJldHVybiB0YXJnZXRDb3VudFByb21pc2UubmV4dChmdW5jdGlvbiAodGFyZ2V0Q291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY0NvdW50UHJvbWlzZS5uZXh0KGZ1bmN0aW9uIChkb2NDb3VudCkgeyByZXR1cm4gdGFyZ2V0Q291bnQgKyBkb2NDb3VudDsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLm9ycGhhbmVkRG9jdW1lbnRDb3VudCA9IGZ1bmN0aW9uICh0eG4pIHtcclxuICAgICAgICB2YXIgb3JwaGFuZWRDb3VudCA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaE9ycGhhbmVkRG9jdW1lbnRTZXF1ZW5jZU51bWJlcih0eG4sIGZ1bmN0aW9uIChfKSB7XHJcbiAgICAgICAgICAgIG9ycGhhbmVkQ291bnQrKztcclxuICAgICAgICB9KS5uZXh0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9ycGhhbmVkQ291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5mb3JFYWNoT3JwaGFuZWREb2N1bWVudFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKHR4biwgZikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMsIGZ1bmN0aW9uIChrZXksIHNlcXVlbmNlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vIFBhc3MgaW4gdGhlIGV4YWN0IHNlcXVlbmNlIG51bWJlciBhcyB0aGUgdXBwZXIgYm91bmQgc28gd2Uga25vdyBpdCB3b24ndCBiZSBwaW5uZWQgYnlcclxuICAgICAgICAgICAgLy8gYmVpbmcgdG9vIHJlY2VudC5cclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmlzUGlubmVkKHR4biwga2V5LCBzZXF1ZW5jZU51bWJlcikubmV4dChmdW5jdGlvbiAoaXNQaW5uZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNQaW5uZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZihzZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnNldEluTWVtb3J5UGlucyA9IGZ1bmN0aW9uIChpbk1lbW9yeVBpbnMpIHtcclxuICAgICAgICB0aGlzLmluTWVtb3J5UGlucyA9IGluTWVtb3J5UGlucztcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlVGFyZ2V0cyA9IGZ1bmN0aW9uICh0eG4sIHVwcGVyQm91bmQsIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlXHJcbiAgICAgICAgICAgIC5nZXRUYXJnZXRDYWNoZSgpXHJcbiAgICAgICAgICAgIC5yZW1vdmVUYXJnZXRzKHR4biwgdXBwZXJCb3VuZCwgYWN0aXZlVGFyZ2V0SWRzKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUucmVtb3ZlT3JwaGFuZWREb2N1bWVudHMgPSBmdW5jdGlvbiAodHhuLCB1cHBlckJvdW5kKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY291bnQgPSAwO1xyXG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpO1xyXG4gICAgICAgIHZhciBjaGFuZ2VCdWZmZXIgPSBjYWNoZS5uZXdDaGFuZ2VCdWZmZXIoKTtcclxuICAgICAgICB2YXIgcCA9IGNhY2hlLmZvckVhY2hEb2N1bWVudEtleSh0eG4sIGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmlzUGlubmVkKHR4biwga2V5LCB1cHBlckJvdW5kKS5uZXh0KGZ1bmN0aW9uIChpc1Bpbm5lZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1Bpbm5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQnVmZmVyLnJlbW92ZUVudHJ5KGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY2hhbmdlQnVmZmVyLmFwcGx5KHR4bik7IH0pLm5leHQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY291bnQ7IH0pO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvblJlZmVyZW5jZSA9IGZ1bmN0aW9uICh0eG4sIGtleSkge1xyXG4gICAgICAgIHRoaXMub3JwaGFuZWRTZXF1ZW5jZU51bWJlcnMuc2V0KGtleSwgdHhuLmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5THJ1RGVsZWdhdGUucHJvdG90eXBlLnJlbW92ZVRhcmdldCA9IGZ1bmN0aW9uICh0eG4sIHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgdXBkYXRlZCA9IHRhcmdldERhdGEud2l0aFNlcXVlbmNlTnVtYmVyKHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0eG4sIHVwZGF0ZWQpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5hZGRSZWZlcmVuY2UgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB0aGlzLm9ycGhhbmVkU2VxdWVuY2VOdW1iZXJzLnNldChrZXksIHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS5yZW1vdmVSZWZlcmVuY2UgPSBmdW5jdGlvbiAodHhuLCBrZXkpIHtcclxuICAgICAgICB0aGlzLm9ycGhhbmVkU2VxdWVuY2VOdW1iZXJzLnNldChrZXksIHR4bi5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeUxydURlbGVnYXRlLnByb3RvdHlwZS51cGRhdGVMaW1ib0RvY3VtZW50ID0gZnVuY3Rpb24gKHR4biwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5vcnBoYW5lZFNlcXVlbmNlTnVtYmVycy5zZXQoa2V5LCB0eG4uY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcclxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZG9jdW1lbnRTaXplID0gZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgdmFyIHJlbW90ZURvY3VtZW50ID0gdGhpcy5zZXJpYWxpemVyLnRvRGJSZW1vdGVEb2N1bWVudChtYXliZURvYywgbWF5YmVEb2MudmVyc2lvbik7XHJcbiAgICAgICAgdmFyIHZhbHVlO1xyXG4gICAgICAgIGlmIChyZW1vdGVEb2N1bWVudC5kb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHJlbW90ZURvY3VtZW50LmRvY3VtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChyZW1vdGVEb2N1bWVudC51bmtub3duRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSByZW1vdGVEb2N1bWVudC51bmtub3duRG9jdW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlbW90ZURvY3VtZW50Lm5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSByZW1vdGVEb2N1bWVudC5ub0RvY3VtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnVW5rbm93biByZW1vdGUgZG9jdW1lbnQgdHlwZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpLmxlbmd0aDtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuaXNQaW5uZWQgPSBmdW5jdGlvbiAodHhuLCBrZXksIHVwcGVyQm91bmQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoW1xyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5wZXJzaXN0ZW5jZS5tdXRhdGlvblF1ZXVlc0NvbnRhaW5LZXkodHhuLCBrZXkpOyB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShfdGhpcy5pbk1lbW9yeVBpbnMuY29udGFpbnNLZXkoa2V5KSk7IH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodHhuLCBrZXkpOyB9LFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JwaGFuZWRBdCA9IF90aGlzLm9ycGhhbmVkU2VxdWVuY2VOdW1iZXJzLmdldChrZXkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG9ycGhhbmVkQXQgIT09IHVuZGVmaW5lZCAmJiBvcnBoYW5lZEF0ID4gdXBwZXJCb3VuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlMcnVEZWxlZ2F0ZS5wcm90b3R5cGUuZ2V0Q2FjaGVTaXplID0gZnVuY3Rpb24gKHR4bikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5nZXRTaXplKHR4bik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1lbW9yeUxydURlbGVnYXRlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckNCA9ICdFeHBvbmVudGlhbEJhY2tvZmYnO1xyXG4vKipcclxuICogSW5pdGlhbCBiYWNrb2ZmIHRpbWUgaW4gbWlsbGlzZWNvbmRzIGFmdGVyIGFuIGVycm9yLlxyXG4gKiBTZXQgdG8gMXMgYWNjb3JkaW5nIHRvIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2Rlc2lnbi9lcnJvcnMuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9CQUNLT0ZGX0lOSVRJQUxfREVMQVlfTVMgPSAxMDAwO1xyXG52YXIgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDEuNTtcclxuLyoqIE1heGltdW0gYmFja29mZiB0aW1lIGluIG1pbGxpc2Vjb25kcyAqL1xyXG52YXIgREVGQVVMVF9CQUNLT0ZGX01BWF9ERUxBWV9NUyA9IDYwICogMTAwMDtcclxuLyoqXHJcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcclxuICogYmV0d2VlbiBhdHRlbXB0cy5cclxuICpcclxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcclxuICogYmFja29mZiBjdXJ2ZSwgYW5kIGEgKy8tIDUwJSBcImppdHRlclwiIHRoYXQgaXMgY2FsY3VsYXRlZCBhbmQgYWRkZWQgdG8gdGhlXHJcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXHJcbiAqIGRlbGF5cyBjYXVzaW5nIHNwaWtlcyBvZiBsb2FkIHRvIHRoZSBiYWNrZW5kLlxyXG4gKi9cclxudmFyIEV4cG9uZW50aWFsQmFja29mZiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV4cG9uZW50aWFsQmFja29mZihcclxuICAgIC8qKlxyXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cclxuICAgICAqL1xyXG4gICAgcXVldWUsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXHJcbiAgICAgKi9cclxuICAgIHRpbWVySWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5pdGlhbCBkZWxheSAodXNlZCBhcyB0aGUgYmFzZSBkZWxheSBvbiB0aGUgZmlyc3QgcmV0cnkgYXR0ZW1wdCkuXHJcbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xyXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cclxuICAgICAqL1xyXG4gICAgaW5pdGlhbERlbGF5TXMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbXVsdGlwbGllciB0byB1c2UgdG8gZGV0ZXJtaW5lIHRoZSBleHRlbmRlZCBiYXNlIGRlbGF5IGFmdGVyIGVhY2hcclxuICAgICAqIGF0dGVtcHQuXHJcbiAgICAgKi9cclxuICAgIGJhY2tvZmZGYWN0b3IsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbWF4aW11bSBiYXNlIGRlbGF5IGFmdGVyIHdoaWNoIG5vIGZ1cnRoZXIgYmFja29mZiBpcyBwZXJmb3JtZWQuXHJcbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xyXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cclxuICAgICAqL1xyXG4gICAgbWF4RGVsYXlNcykge1xyXG4gICAgICAgIGlmIChpbml0aWFsRGVsYXlNcyA9PT0gdm9pZCAwKSB7IGluaXRpYWxEZWxheU1zID0gREVGQVVMVF9CQUNLT0ZGX0lOSVRJQUxfREVMQVlfTVM7IH1cclxuICAgICAgICBpZiAoYmFja29mZkZhY3RvciA9PT0gdm9pZCAwKSB7IGJhY2tvZmZGYWN0b3IgPSBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SOyB9XHJcbiAgICAgICAgaWYgKG1heERlbGF5TXMgPT09IHZvaWQgMCkgeyBtYXhEZWxheU1zID0gREVGQVVMVF9CQUNLT0ZGX01BWF9ERUxBWV9NUzsgfVxyXG4gICAgICAgIHRoaXMucXVldWUgPSBxdWV1ZTtcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSB0aW1lcklkO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbERlbGF5TXMgPSBpbml0aWFsRGVsYXlNcztcclxuICAgICAgICB0aGlzLmJhY2tvZmZGYWN0b3IgPSBiYWNrb2ZmRmFjdG9yO1xyXG4gICAgICAgIHRoaXMubWF4RGVsYXlNcyA9IG1heERlbGF5TXM7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zID0gMDtcclxuICAgICAgICB0aGlzLnRpbWVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xyXG4gICAgICAgIHRoaXMubGFzdEF0dGVtcHRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheS5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cclxuICAgICAqIChpLmUuIGR1ZSB0byBhbiBlcnJvciksIGluaXRpYWxEZWxheU1zIChwbHVzIGppdHRlcikgd2lsbCBiZSB1c2VkLCBhbmRcclxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cclxuICAgICAqL1xyXG4gICAgRXhwb25lbnRpYWxCYWNrb2ZmLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgPSAwO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5IHRvIHRoZSBtYXhpbXVtIGRlbGF5IChlLmcuIGZvciB1c2UgYWZ0ZXIgYVxyXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cclxuICAgICAqL1xyXG4gICAgRXhwb25lbnRpYWxCYWNrb2ZmLnByb3RvdHlwZS5yZXNldFRvTWF4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEJhc2VNcyA9IHRoaXMubWF4RGVsYXlNcztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXHJcbiAgICAgKiBkZWxheSBmb3IgYW55IHN1YnNlcXVlbnQgYXR0ZW1wdHMuIElmIHRoZXJlIHdhcyBhIHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb25cclxuICAgICAqIGFscmVhZHksIGl0IHdpbGwgYmUgY2FuY2VsZWQuXHJcbiAgICAgKi9cclxuICAgIEV4cG9uZW50aWFsQmFja29mZi5wcm90b3R5cGUuYmFja29mZkFuZFJ1biA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uLlxyXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XHJcbiAgICAgICAgLy8gRmlyc3Qgc2NoZWR1bGUgdXNpbmcgdGhlIGN1cnJlbnQgYmFzZSAod2hpY2ggbWF5IGJlIDAgYW5kIHNob3VsZCBiZVxyXG4gICAgICAgIC8vIGhvbm9yZWQgYXMgc3VjaCkuXHJcbiAgICAgICAgdmFyIGRlc2lyZWREZWxheVdpdGhKaXR0ZXJNcyA9IE1hdGguZmxvb3IodGhpcy5jdXJyZW50QmFzZU1zICsgdGhpcy5qaXR0ZXJEZWxheU1zKCkpO1xyXG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxyXG4gICAgICAgIHZhciBkZWxheVNvRmFyTXMgPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5sYXN0QXR0ZW1wdFRpbWUpO1xyXG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgdGhlIGJhY2tvZmYgZGVsYXkgYWxyZWFkeSBiZWluZyBwYXN0LlxyXG4gICAgICAgIHZhciByZW1haW5pbmdEZWxheU1zID0gTWF0aC5tYXgoMCwgZGVzaXJlZERlbGF5V2l0aEppdHRlck1zIC0gZGVsYXlTb0Zhck1zKTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50QmFzZU1zID4gMCkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDQsIFwiQmFja2luZyBvZmYgZm9yIFwiICsgcmVtYWluaW5nRGVsYXlNcyArIFwiIG1zIFwiICtcclxuICAgICAgICAgICAgICAgIChcIihiYXNlIGRlbGF5OiBcIiArIHRoaXMuY3VycmVudEJhc2VNcyArIFwiIG1zLCBcIikgK1xyXG4gICAgICAgICAgICAgICAgKFwiZGVsYXkgd2l0aCBqaXR0ZXI6IFwiICsgZGVzaXJlZERlbGF5V2l0aEppdHRlck1zICsgXCIgbXMsIFwiKSArXHJcbiAgICAgICAgICAgICAgICAoXCJsYXN0IGF0dGVtcHQ6IFwiICsgZGVsYXlTb0Zhck1zICsgXCIgbXMgYWdvKVwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGltZXJQcm9taXNlID0gdGhpcy5xdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnRpbWVySWQsIHJlbWFpbmluZ0RlbGF5TXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMubGFzdEF0dGVtcHRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9wKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQXBwbHkgYmFja29mZiBmYWN0b3IgdG8gZGV0ZXJtaW5lIG5leHQgZGVsYXkgYW5kIGVuc3VyZSBpdCBpcyB3aXRoaW5cclxuICAgICAgICAvLyBib3VuZHMuXHJcbiAgICAgICAgdGhpcy5jdXJyZW50QmFzZU1zICo9IHRoaXMuYmFja29mZkZhY3RvcjtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50QmFzZU1zIDwgdGhpcy5pbml0aWFsRGVsYXlNcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCYXNlTXMgPSB0aGlzLmluaXRpYWxEZWxheU1zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50QmFzZU1zID4gdGhpcy5tYXhEZWxheU1zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJhc2VNcyA9IHRoaXMubWF4RGVsYXlNcztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRXhwb25lbnRpYWxCYWNrb2ZmLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJQcm9taXNlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJQcm9taXNlLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHZhbHVlIGluIHRoZSByYW5nZSBbLWN1cnJlbnRCYXNlTXMvMiwgY3VycmVudEJhc2VNcy8yXSAqL1xyXG4gICAgRXhwb25lbnRpYWxCYWNrb2ZmLnByb3RvdHlwZS5qaXR0ZXJEZWxheU1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiB0aGlzLmN1cnJlbnRCYXNlTXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4cG9uZW50aWFsQmFja29mZjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDUgPSAnUGVyc2lzdGVudFN0cmVhbSc7XHJcbi8qKlxyXG4gKiBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBpbiBvbmUgb2YgNSBzdGF0ZXMgKGVhY2ggZGVzY3JpYmVkIGluIGRldGFpbCBiZWxvdylcclxuICogYmFzZWQgb24gdGhlIGZvbGxvd2luZyBzdGF0ZSB0cmFuc2l0aW9uIGRpYWdyYW06XHJcbiAqXHJcbiAqICAgICAgICAgIHN0YXJ0KCkgY2FsbGVkICAgICAgICAgICAgIGF1dGggJiBjb25uZWN0aW9uIHN1Y2NlZWRlZFxyXG4gKiBJTklUSUFMIC0tLS0tLS0tLS0tLS0tLS0+IFNUQVJUSU5HIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPiBPUEVOXHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICB8ICAgICAgICAgICAgICAgICAgICBlcnJvciBvY2N1cnJlZCB8XHJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICBcXC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tdi0tLS0tL1xyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiAgICAgICAgICAgICAgICAgICAgYmFja29mZiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gKiAgICAgICAgICAgICAgICAgICAgZWxhcHNlZCAgfCAgICAgICAgICAgICAgc3RhcnQoKSBjYWxsZWQgICAgfFxyXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFwtLS0gQkFDS09GRiA8LS0tLS0tLS0tLS0tLS0tLSBFUlJPUlxyXG4gKlxyXG4gKiBbYW55IHN0YXRlXSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT4gSU5JVElBTFxyXG4gKiAgICAgICAgICAgICAgIHN0b3AoKSBjYWxsZWQgb3JcclxuICogICAgICAgICAgICAgICBpZGxlIHRpbWVyIGV4cGlyZWRcclxuICovXHJcbnZhciBQZXJzaXN0ZW50U3RyZWFtU3RhdGU7XHJcbihmdW5jdGlvbiAoUGVyc2lzdGVudFN0cmVhbVN0YXRlKSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzdHJlYW1pbmcgUlBDIGlzIG5vdCB5ZXQgcnVubmluZyBhbmQgdGhlcmUncyBubyBlcnJvciBjb25kaXRpb24uXHJcbiAgICAgKiBDYWxsaW5nIHN0YXJ0KCkgd2lsbCBzdGFydCB0aGUgc3RyZWFtIGltbWVkaWF0ZWx5IHdpdGhvdXQgYmFja29mZi5cclxuICAgICAqIFdoaWxlIGluIHRoaXMgc3RhdGUgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZVtQZXJzaXN0ZW50U3RyZWFtU3RhdGVbXCJJbml0aWFsXCJdID0gMF0gPSBcIkluaXRpYWxcIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHN0cmVhbSBpcyBzdGFydGluZywgZWl0aGVyIHdhaXRpbmcgZm9yIGFuIGF1dGggdG9rZW4gb3IgZm9yIHRoZSBzdHJlYW1cclxuICAgICAqIHRvIHN1Y2Nlc3NmdWxseSBvcGVuLiBXaGlsZSBpbiB0aGlzIHN0YXRlLCBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlIGJ1dFxyXG4gICAgICogaXNPcGVuKCkgd2lsbCByZXR1cm4gZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZVtQZXJzaXN0ZW50U3RyZWFtU3RhdGVbXCJTdGFydGluZ1wiXSA9IDFdID0gXCJTdGFydGluZ1wiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RyZWFtaW5nIFJQQyBpcyB1cCBhbmQgcnVubmluZy4gUmVxdWVzdHMgYW5kIHJlc3BvbnNlcyBjYW4gZmxvd1xyXG4gICAgICogZnJlZWx5LiBCb3RoIGlzU3RhcnRlZCgpIGFuZCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtU3RhdGVbUGVyc2lzdGVudFN0cmVhbVN0YXRlW1wiT3BlblwiXSA9IDJdID0gXCJPcGVuXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzdHJlYW0gZW5jb3VudGVyZWQgYW4gZXJyb3IuIFRoZSBuZXh0IHN0YXJ0IGF0dGVtcHQgd2lsbCBiYWNrIG9mZi5cclxuICAgICAqIFdoaWxlIGluIHRoaXMgc3RhdGUgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZVtQZXJzaXN0ZW50U3RyZWFtU3RhdGVbXCJFcnJvclwiXSA9IDNdID0gXCJFcnJvclwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBpbi1iZXR3ZWVuIHN0YXRlIGFmdGVyIGFuIGVycm9yIHdoZXJlIHRoZSBzdHJlYW0gaXMgd2FpdGluZyBiZWZvcmVcclxuICAgICAqIHJlLXN0YXJ0aW5nLiBBZnRlciB3YWl0aW5nIGlzIGNvbXBsZXRlLCB0aGUgc3RyZWFtIHdpbGwgdHJ5IHRvIG9wZW4uXHJcbiAgICAgKiBXaGlsZSBpbiB0aGlzIHN0YXRlIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUgYnV0IGlzT3BlbigpIHdpbGwgcmV0dXJuXHJcbiAgICAgKiBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbVN0YXRlW1BlcnNpc3RlbnRTdHJlYW1TdGF0ZVtcIkJhY2tvZmZcIl0gPSA0XSA9IFwiQmFja29mZlwiO1xyXG59KShQZXJzaXN0ZW50U3RyZWFtU3RhdGUgfHwgKFBlcnNpc3RlbnRTdHJlYW1TdGF0ZSA9IHt9KSk7XHJcbi8qKiBUaGUgdGltZSBhIHN0cmVhbSBzdGF5cyBvcGVuIGFmdGVyIGl0IGlzIG1hcmtlZCBpZGxlLiAqL1xyXG52YXIgSURMRV9USU1FT1VUX01TID0gNjAgKiAxMDAwO1xyXG4vKipcclxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xyXG4gKiB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQuIEl0J3MgYnVpbHQgb24gdG9wIG9mIHRoZSBjb25uZWN0aW9ucyBvd24gc3VwcG9ydFxyXG4gKiBmb3Igc3RyZWFtaW5nIFJQQ3MsIGFuZCBhZGRzIHNldmVyYWwgY3JpdGljYWwgZmVhdHVyZXMgZm9yIG91ciBjbGllbnRzOlxyXG4gKlxyXG4gKiAgIC0gRXhwb25lbnRpYWwgYmFja29mZiBvbiBmYWlsdXJlXHJcbiAqICAgLSBBdXRoZW50aWNhdGlvbiB2aWEgQ3JlZGVudGlhbHNQcm92aWRlclxyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXHJcbiAqICAgLSBDbG9zaW5nIGlkbGUgc3RyZWFtcyBhZnRlciA2MCBzZWNvbmRzIG9mIGluYWN0aXZpdHlcclxuICpcclxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcclxuICogZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgcHJvdG9jb2wgYnVmZmVycyBmb3IgYSBzcGVjaWZpY1xyXG4gKiBzdHJlYW1pbmcgUlBDLlxyXG4gKlxyXG4gKiAjIyBTdGFydGluZyBhbmQgU3RvcHBpbmdcclxuICpcclxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXHJcbiAqIGJlIHNlbnQgYW5kIHJlY2VpdmVkLiBUaGUgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIG9uT3BlbigpIGZ1bmN0aW9uXHJcbiAqIG9mIHRoZSBsaXN0ZW5lciBvbmNlIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IHJlcXVlc3RzLlxyXG4gKlxyXG4gKiBTaG91bGQgYSBzdGFydCgpIGZhaWwsIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSByZWdpc3RlcmVkIG9uQ2xvc2UoKVxyXG4gKiBsaXN0ZW5lciB3aXRoIGEgRmlyZXN0b3JlRXJyb3IgaW5kaWNhdGluZyB3aGF0IHdlbnQgd3JvbmcuXHJcbiAqXHJcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBjYW4gYmUgc3RhcnRlZCBhbmQgc3RvcHBlZCByZXBlYXRlZGx5LlxyXG4gKlxyXG4gKiBHZW5lcmljIHR5cGVzOlxyXG4gKiAgU2VuZFR5cGU6IFRoZSB0eXBlIG9mIHRoZSBvdXRnb2luZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXHJcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXHJcbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcclxuICogICAgY29ubmVjdGlvbiBzdHJlYW1cclxuICogIExpc3RlbmVyVHlwZTogVGhlIHR5cGUgb2YgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBjYWxsYmFja3NcclxuICovXHJcbnZhciBQZXJzaXN0ZW50U3RyZWFtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGVyc2lzdGVudFN0cmVhbShxdWV1ZSwgY29ubmVjdGlvblRpbWVySWQsIGlkbGVUaW1lcklkLCBjb25uZWN0aW9uLCBjcmVkZW50aWFsc1Byb3ZpZGVyLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBxdWV1ZTtcclxuICAgICAgICB0aGlzLmlkbGVUaW1lcklkID0gaWRsZVRpbWVySWQ7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzUHJvdmlkZXIgPSBjcmVkZW50aWFsc1Byb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBsaXN0ZW5lcjtcclxuICAgICAgICB0aGlzLnN0YXRlID0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBjbG9zZSBjb3VudCB0aGF0J3MgaW5jcmVtZW50ZWQgZXZlcnkgdGltZSB0aGUgc3RyZWFtIGlzIGNsb3NlZDsgdXNlZCBieVxyXG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxyXG4gICAgICAgICAqIGNsb3NlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2xvc2VDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5pZGxlVGltZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtID0gbnVsbDtcclxuICAgICAgICB0aGlzLmJhY2tvZmYgPSBuZXcgRXhwb25lbnRpYWxCYWNrb2ZmKHF1ZXVlLCBjb25uZWN0aW9uVGltZXJJZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBzdGFydCgpIGhhcyBiZWVuIGNhbGxlZCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnVlXHJcbiAgICAgKiBpbmRpY2F0ZXMgdGhlIHN0cmVhbSBpcyBvcGVuIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcgKHdoaWNoXHJcbiAgICAgKiBlbmNvbXBhc3NlcyByZXNwZWN0aW5nIGJhY2tvZmYsIGdldHRpbmcgYXV0aCB0b2tlbnMsIGFuZCBzdGFydGluZyB0aGVcclxuICAgICAqIGFjdHVhbCBSUEMpLiBVc2UgaXNPcGVuKCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgb3BlbiBhbmQgcmVhZHkgZm9yXHJcbiAgICAgKiBvdXRib3VuZCByZXF1ZXN0cy5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuaXNTdGFydGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5PcGVuIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5CYWNrb2ZmKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXHJcbiAgICAgKiBjYWxsZWQpIGFuZCB0aGUgc3RyZWFtIGlzIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cy5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuaXNPcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyB0aGUgUlBDLiBPbmx5IGFsbG93ZWQgaWYgaXNTdGFydGVkKCkgcmV0dXJucyBmYWxzZS4gVGhlIHN0cmVhbSBpc1xyXG4gICAgICogbm90IGltbWVkaWF0ZWx5IHJlYWR5IGZvciB1c2U6IG9uT3BlbigpIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBSUEMgaXNcclxuICAgICAqIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cywgYXQgd2hpY2ggcG9pbnQgaXNPcGVuKCkgd2lsbCByZXR1cm4gdHJ1ZS5cclxuICAgICAqXHJcbiAgICAgKiBXaGVuIHN0YXJ0IHJldHVybnMsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtQmFja29mZigpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFzc2VydCh0aGlzLnN0YXRlID09PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCwgJ0FscmVhZHkgc3RhcnRlZCcpO1xyXG4gICAgICAgIHRoaXMuYXV0aCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RvcHMgdGhlIFJQQy4gVGhpcyBjYWxsIGlzIGlkZW1wb3RlbnQgYW5kIGFsbG93ZWQgcmVnYXJkbGVzcyBvZiB0aGVcclxuICAgICAqIGN1cnJlbnQgaXNTdGFydGVkKCkgc3RhdGUuXHJcbiAgICAgKlxyXG4gICAgICogV2hlbiBzdG9wIHJldHVybnMsIGlzU3RhcnRlZCgpIGFuZCBpc09wZW4oKSB3aWxsIGJvdGggcmV0dXJuIGZhbHNlLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzU3RhcnRlZCgpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5jbG9zZShQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQWZ0ZXIgYW4gZXJyb3IgdGhlIHN0cmVhbSB3aWxsIHVzdWFsbHkgYmFjayBvZmYgb24gdGhlIG5leHQgYXR0ZW1wdCB0b1xyXG4gICAgICogc3RhcnQgaXQuIElmIHRoZSBlcnJvciB3YXJyYW50cyBhbiBpbW1lZGlhdGUgcmVzdGFydCBvZiB0aGUgc3RyZWFtLCB0aGVcclxuICAgICAqIHNlbmRlciBjYW4gdXNlIHRoaXMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVjZWl2ZXIgc2hvdWxkIG5vdCBiYWNrIG9mZi5cclxuICAgICAqXHJcbiAgICAgKiBFYWNoIGVycm9yIHdpbGwgY2FsbCB0aGUgb25DbG9zZSgpIGxpc3RlbmVyLiBUaGF0IGZ1bmN0aW9uIGNhbiBkZWNpZGUgdG9cclxuICAgICAqIGluaGliaXQgYmFja29mZiBpZiByZXF1aXJlZC5cclxuICAgICAqL1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUuaW5oaWJpdEJhY2tvZmYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmlzU3RhcnRlZCgpLCAnQ2FuIG9ubHkgaW5oaWJpdCBiYWNrb2ZmIGluIGEgc3RvcHBlZCBzdGF0ZScpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbDtcclxuICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXQoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIE1hcmtzIHRoaXMgc3RyZWFtIGFzIGlkbGUuIElmIG5vIGZ1cnRoZXIgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIG9uIHRoZVxyXG4gICAgICogc3RyZWFtIGZvciBvbmUgbWludXRlLCB0aGUgc3RyZWFtIHdpbGwgYXV0b21hdGljYWxseSBjbG9zZSBpdHNlbGYgYW5kXHJcbiAgICAgKiBub3RpZnkgdGhlIHN0cmVhbSdzIG9uQ2xvc2UoKSBoYW5kbGVyIHdpdGggU3RhdHVzLk9LLiBUaGUgc3RyZWFtIHdpbGwgdGhlblxyXG4gICAgICogYmUgaW4gYSAhaXNTdGFydGVkKCkgc3RhdGUsIHJlcXVpcmluZyB0aGUgY2FsbGVyIHRvIHN0YXJ0IHRoZSBzdHJlYW0gYWdhaW5cclxuICAgICAqIGJlZm9yZSBmdXJ0aGVyIHVzZS5cclxuICAgICAqXHJcbiAgICAgKiBPbmx5IHN0cmVhbXMgdGhhdCBhcmUgaW4gc3RhdGUgJ09wZW4nIGNhbiBiZSBtYXJrZWQgaWRsZSwgYXMgYWxsIG90aGVyXHJcbiAgICAgKiBzdGF0ZXMgaW1wbHkgcGVuZGluZyBuZXR3b3JrIG9wZXJhdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLm1hcmtJZGxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gU3RhcnRzIHRoZSBpZGxlIHRpbWUgaWYgd2UgYXJlIGluIHN0YXRlICdPcGVuJyBhbmQgYXJlIG5vdCB5ZXQgYWxyZWFkeVxyXG4gICAgICAgIC8vIHJ1bm5pbmcgYSB0aW1lciAoaW4gd2hpY2ggY2FzZSB0aGUgcHJldmlvdXMgaWRsZSB0aW1lb3V0IHN0aWxsIGFwcGxpZXMpLlxyXG4gICAgICAgIGlmICh0aGlzLmlzT3BlbigpICYmIHRoaXMuaWRsZVRpbWVyID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaWRsZVRpbWVyID0gdGhpcy5xdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLmlkbGVUaW1lcklkLCBJRExFX1RJTUVPVVRfTVMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmhhbmRsZUlkbGVDbG9zZVRpbWVyKCk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKiogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4gKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLnNlbmRSZXF1ZXN0ID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHRoaXMuY2FuY2VsSWRsZUNoZWNrKCk7XHJcbiAgICAgICAgdGhpcy5zdHJlYW0uc2VuZChtc2cpO1xyXG4gICAgfTtcclxuICAgIC8qKiBDYWxsZWQgYnkgdGhlIGlkbGUgdGltZXIgd2hlbiB0aGUgc3RyZWFtIHNob3VsZCBjbG9zZSBkdWUgdG8gaW5hY3Rpdml0eS4gKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmhhbmRsZUlkbGVDbG9zZVRpbWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRpbWluZyBvdXQgYW4gaWRsZSBzdHJlYW0gdGhlcmUncyBubyByZWFzb24gdG8gZm9yY2UgdGhlIHN0cmVhbSBpbnRvIGJhY2tvZmYgd2hlblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0IHJlc3RhcnRzIHNvIHNldCB0aGUgc3RyZWFtIHN0YXRlIHRvIEluaXRpYWwgaW5zdGVhZCBvZiBFcnJvci5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5jbG9zZShQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogTWFya3MgdGhlIHN0cmVhbSBhcyBhY3RpdmUgYWdhaW4uICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5jYW5jZWxJZGxlQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaWRsZVRpbWVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaWRsZVRpbWVyLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICB0aGlzLmlkbGVUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XHJcbiAgICAgKlxyXG4gICAgICogKiBjbG9zZXMgdGhlIHVuZGVybHlpbmcgR1JQQyBzdHJlYW07XHJcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcclxuICAgICAqICogc2V0cyBpbnRlcm5hbCBzdHJlYW0gc3RhdGUgdG8gJ2ZpbmFsU3RhdGUnO1xyXG4gICAgICogKiBhZGp1c3RzIHRoZSBiYWNrb2ZmIHRpbWVyIGJhc2VkIG9uIHRoZSBlcnJvclxyXG4gICAgICpcclxuICAgICAqIEEgbmV3IHN0cmVhbSBjYW4gYmUgb3BlbmVkIGJ5IGNhbGxpbmcgc3RhcnQoKS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSB0aGUgaW50ZW5kZWQgc3RhdGUgb2YgdGhlIHN0cmVhbSBhZnRlciBjbG9zaW5nLlxyXG4gICAgICogQHBhcmFtIGVycm9yIHRoZSBlcnJvciB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIHdpdGguXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKGZpbmFsU3RhdGUsIGVycm9yJDEpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLmlzU3RhcnRlZCgpLCAnT25seSBzdGFydGVkIHN0cmVhbXMgc2hvdWxkIGJlIGNsb3NlZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGZpbmFsU3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciB8fCBpc051bGxPclVuZGVmaW5lZChlcnJvciQxKSwgXCJDYW4ndCBwcm92aWRlIGFuIGVycm9yIHdoZW4gbm90IGluIGFuIGVycm9yIHN0YXRlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FuY2VsIGFueSBvdXRzdGFuZGluZyB0aW1lcnMgKHRoZXkncmUgZ3VhcmFudGVlZCBub3QgdG8gZXhlY3V0ZSkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsSWRsZUNoZWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja29mZi5jYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZGF0ZXMgYW55IHN0cmVhbS1yZWxhdGVkIGNhbGxiYWNrcyAoZS5nLiBmcm9tIGF1dGggb3IgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVuZGVybHlpbmcgc3RyZWFtKSwgZ3VhcmFudGVlaW5nIHRoZXkgd29uJ3QgZXhlY3V0ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZUNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaW5hbFN0YXRlICE9PSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYW4gaW50ZW50aW9uYWwgY2xvc2UgZW5zdXJlIHdlIGRvbid0IGRlbGF5IG91ciBuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFja29mZi5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVycm9yJDEgJiYgZXJyb3IkMS5jb2RlID09PSBDb2RlLlJFU09VUkNFX0VYSEFVU1RFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9nIHRoZSBlcnJvci4gKFByb2JhYmx5IGVpdGhlciAncXVvdGEgZXhjZWVkZWQnIG9yICdtYXggcXVldWUgbGVuZ3RoIHJlYWNoZWQnLilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKGVycm9yJDEudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignVXNpbmcgbWF4aW11bSBiYWNrb2ZmIGRlbGF5IHRvIHByZXZlbnQgb3ZlcmxvYWRpbmcgdGhlIGJhY2tlbmQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJhY2tvZmYucmVzZXRUb01heCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVycm9yJDEgJiYgZXJyb3IkMS5jb2RlID09PSBDb2RlLlVOQVVUSEVOVElDQVRFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJ1bmF1dGhlbnRpY2F0ZWRcIiBlcnJvciBtZWFucyB0aGUgdG9rZW4gd2FzIHJlamVjdGVkLiBUcnkgZm9yY2UgcmVmcmVzaGluZyBpdCBpbiBjYXNlIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBqdXN0IGV4cGlyZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGJlY2F1c2Ugd2UgYXJlIG5vIGxvbmdlciBpbnRlcmVzdGVkIGluIGV2ZW50cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RyZWFtICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlYXJEb3duKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmVhbS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJlYW0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgc3RhdGUgbXVzdCBiZSBhc3NpZ25lZCBiZWZvcmUgY2FsbGluZyBvbkNsb3NlKCkgdG8gYWxsb3cgdGhlIGNhbGxiYWNrIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluaGliaXQgYmFja29mZiBvciBvdGhlcndpc2UgbWFuaXB1bGF0ZSB0aGUgc3RhdGUgaW4gaXRzIG5vbi1zdGFydGVkIHN0YXRlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gZmluYWxTdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IHRoZSBsaXN0ZW5lciB0aGF0IHRoZSBzdHJlYW0gY2xvc2VkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxpc3RlbmVyLm9uQ2xvc2UoZXJyb3IkMSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IHRoZSBsaXN0ZW5lciB0aGF0IHRoZSBzdHJlYW0gY2xvc2VkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYW4gYmUgb3ZlcnJpZGRlbiB0byBwZXJmb3JtIGFkZGl0aW9uYWwgY2xlYW51cCBiZWZvcmUgdGhlIHN0cmVhbSBpcyBjbG9zZWQuXHJcbiAgICAgKiBDYWxsaW5nIHN1cGVyLnRlYXJEb3duKCkgaXMgbm90IHJlcXVpcmVkLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS50ZWFyRG93biA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgIFBlcnNpc3RlbnRTdHJlYW0ucHJvdG90eXBlLmF1dGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQodGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwsICdNdXN0IGJlIGluIGluaXRpYWwgc3RhdGUgdG8gYXV0aCcpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmc7XHJcbiAgICAgICAgdmFyIGRpc3BhdGNoSWZOb3RDbG9zZWQgPSB0aGlzLmdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIodGhpcy5jbG9zZUNvdW50KTtcclxuICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWQsIGJ1dCBzZWUgVE9ETyBiZWxvdy5cclxuICAgICAgICB2YXIgY2xvc2VDb3VudCA9IHRoaXMuY2xvc2VDb3VudDtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKS50aGVuKGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgICAgICAvLyBTdHJlYW0gY2FuIGJlIHN0b3BwZWQgd2hpbGUgd2FpdGluZyBmb3IgYXV0aGVudGljYXRpb24uXHJcbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogV2UgcmVhbGx5IHNob3VsZCBqdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkXHJcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgdGhpcyBkaXNwYXRjaCBvbnRvIHRoZSBxdWV1ZSwgYnV0IHRoYXQgb3BlbmVkIGEgc3BlYyB0ZXN0IGNhblxyXG4gICAgICAgICAgICAvLyBvZiB3b3JtcyB0aGF0IEkgZG9uJ3Qgd2FudCB0byBkZWFsIHdpdGggaW4gdGhpcyBQUi5cclxuICAgICAgICAgICAgaWYgKF90aGlzLmNsb3NlQ291bnQgPT09IGNsb3NlQ291bnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vcm1hbGx5IHdlJ2QgaGF2ZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgb24gdGhlIEFzeW5jUXVldWUuXHJcbiAgICAgICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgZm9sbG93aW5nIGNhbGxzIGFyZSBzYWZlIHRvIGJlIGNhbGxlZCBvdXRzaWRlIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBzaW5jZSB0aGV5IGRvbid0IGNoYWluIGFzeW5jaHJvbm91cyBjYWxsc1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc3RhcnRTdHJlYW0odG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoSWZOb3RDbG9zZWQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJwY0Vycm9yID0gbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5LTk9XTiwgJ0ZldGNoaW5nIGF1dGggdG9rZW4gZmFpbGVkOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaGFuZGxlU3RyZWFtQ2xvc2UocnBjRXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5zdGFydFN0cmVhbSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZywgJ1RyeWluZyB0byBzdGFydCBzdHJlYW0gaW4gYSBub24tc3RhcnRpbmcgc3RhdGUnKTtcclxuICAgICAgICB2YXIgZGlzcGF0Y2hJZk5vdENsb3NlZCA9IHRoaXMuZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlcih0aGlzLmNsb3NlQ291bnQpO1xyXG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy5zdGFydFJwYyh0b2tlbik7XHJcbiAgICAgICAgdGhpcy5zdHJlYW0ub25PcGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2hJZk5vdENsb3NlZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoX3RoaXMuc3RhdGUgPT09IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZywgJ0V4cGVjdGVkIHN0cmVhbSB0byBiZSBpbiBzdGF0ZSBTdGFydGluZywgYnV0IHdhcyAnICsgX3RoaXMuc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5saXN0ZW5lci5vbk9wZW4oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zdHJlYW0ub25DbG9zZShmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2hJZk5vdENsb3NlZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuaGFuZGxlU3RyZWFtQ2xvc2UoZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN0cmVhbS5vbk1lc3NhZ2UoZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICBkaXNwYXRjaElmTm90Q2xvc2VkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5vbk1lc3NhZ2UobXNnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVudFN0cmVhbS5wcm90b3R5cGUucGVyZm9ybUJhY2tvZmYgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQodGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yLCAnU2hvdWxkIG9ubHkgcGVyZm9ybSBiYWNrb2ZmIHdoZW4gaW4gRXJyb3Igc3RhdGUnKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkJhY2tvZmY7XHJcbiAgICAgICAgdGhpcy5iYWNrb2ZmLmJhY2tvZmZBbmRSdW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQodGhpcy5zdGF0ZSA9PT0gUGVyc2lzdGVudFN0cmVhbVN0YXRlLkJhY2tvZmYsICdCYWNrb2ZmIGVsYXBzZWQgYnV0IHN0YXRlIGlzIG5vdzogJyArIHRoaXMuc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHRoaXMuaXNTdGFydGVkKCksICdQZXJzaXN0ZW50U3RyZWFtIHNob3VsZCBoYXZlIHN0YXJ0ZWQnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RzXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5oYW5kbGVTdHJlYW1DbG9zZSA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmlzU3RhcnRlZCgpLCBcIkNhbid0IGhhbmRsZSBzZXJ2ZXIgY2xvc2Ugb24gbm9uLXN0YXJ0ZWQgc3RyZWFtXCIpO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckNSwgXCJjbG9zZSB3aXRoIGVycm9yOiBcIiArIGVycm9yKTtcclxuICAgICAgICB0aGlzLnN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcclxuICAgICAgICAvLyB3ZSBuZXZlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVjYXVzZSBpZiB3ZSBzdG9wIGEgc3RyZWFtIG91cnNlbHZlcyxcclxuICAgICAgICAvLyB0aGlzIGNhbGxiYWNrIHdpbGwgbmV2ZXIgYmUgY2FsbGVkLiBUbyBwcmV2ZW50IGNhc2VzIHdoZXJlIHdlIHJldHJ5XHJcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yLCBlcnJvcik7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcclxuICAgICAqIEFzeW5jUXVldWUgYnV0IG9ubHkgcnVucyB0aGVtIGlmIGNsb3NlQ291bnQgcmVtYWlucyB1bmNoYW5nZWQuIFRoaXMgYWxsb3dzXHJcbiAgICAgKiB1cyB0byB0dXJuIGF1dGggLyBzdHJlYW0gY2FsbGJhY2tzIGludG8gbm8tb3BzIGlmIHRoZSBzdHJlYW0gaXMgY2xvc2VkIC9cclxuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50U3RyZWFtLnByb3RvdHlwZS5nZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyID0gZnVuY3Rpb24gKHN0YXJ0Q2xvc2VDb3VudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgICAgICBfdGhpcy5xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jbG9zZUNvdW50ID09PSBzdGFydENsb3NlQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckNSwgJ3N0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQZXJzaXN0ZW50U3RyZWFtO1xyXG59KCkpO1xyXG4vKipcclxuICogQSBQZXJzaXN0ZW50U3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgTGlzdGVuIFJQQy5cclxuICpcclxuICogT25jZSB0aGUgTGlzdGVuIHN0cmVhbSBoYXMgY2FsbGVkIHRoZSBvbk9wZW4oKSBsaXN0ZW5lciwgYW55IG51bWJlciBvZlxyXG4gKiBsaXN0ZW4oKSBhbmQgdW5saXN0ZW4oKSBjYWxscyBjYW4gYmUgbWFkZSB0byBjb250cm9sIHdoYXQgY2hhbmdlcyB3aWxsIGJlXHJcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXHJcbiAqL1xyXG52YXIgUGVyc2lzdGVudExpc3RlblN0cmVhbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhQZXJzaXN0ZW50TGlzdGVuU3RyZWFtLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUGVyc2lzdGVudExpc3RlblN0cmVhbShxdWV1ZSwgY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIHNlcmlhbGl6ZXIsIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcXVldWUsIFRpbWVySWQuTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYsIFRpbWVySWQuTGlzdGVuU3RyZWFtSWRsZSwgY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIGxpc3RlbmVyKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFBlcnNpc3RlbnRMaXN0ZW5TdHJlYW0ucHJvdG90eXBlLnN0YXJ0UnBjID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5vcGVuU3RyZWFtKCdMaXN0ZW4nLCB0b2tlbik7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVudExpc3RlblN0cmVhbS5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKHdhdGNoQ2hhbmdlUHJvdG8pIHtcclxuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XHJcbiAgICAgICAgdGhpcy5iYWNrb2ZmLnJlc2V0KCk7XHJcbiAgICAgICAgdmFyIHdhdGNoQ2hhbmdlID0gdGhpcy5zZXJpYWxpemVyLmZyb21XYXRjaENoYW5nZSh3YXRjaENoYW5nZVByb3RvKTtcclxuICAgICAgICB2YXIgc25hcHNob3QgPSB0aGlzLnNlcmlhbGl6ZXIudmVyc2lvbkZyb21MaXN0ZW5SZXNwb25zZSh3YXRjaENoYW5nZVByb3RvKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5vbldhdGNoQ2hhbmdlKHdhdGNoQ2hhbmdlLCBzbmFwc2hvdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIGdpdmVuIHRhcmdldC4gSWYgdGhlIHRhcmdldFxyXG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcclxuICAgICAqIGFmZmVjdCB0aGUgdGFyZ2V0IHdpbGwgYmUgc3RyZWFtZWQgYmFjayBhcyBXYXRjaENoYW5nZSBtZXNzYWdlcyB0aGF0XHJcbiAgICAgKiByZWZlcmVuY2UgdGhlIHRhcmdldElkLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtLnByb3RvdHlwZS53YXRjaCA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7fTtcclxuICAgICAgICByZXF1ZXN0LmRhdGFiYXNlID0gdGhpcy5zZXJpYWxpemVyLmVuY29kZWREYXRhYmFzZUlkO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkVGFyZ2V0ID0gdGhpcy5zZXJpYWxpemVyLnRvVGFyZ2V0KHRhcmdldERhdGEpO1xyXG4gICAgICAgIHZhciBsYWJlbHMgPSB0aGlzLnNlcmlhbGl6ZXIudG9MaXN0ZW5SZXF1ZXN0TGFiZWxzKHRhcmdldERhdGEpO1xyXG4gICAgICAgIGlmIChsYWJlbHMpIHtcclxuICAgICAgICAgICAgcmVxdWVzdC5sYWJlbHMgPSBsYWJlbHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VuZFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVbnJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGVcclxuICAgICAqIGdpdmVuIHRhcmdldElkLlxyXG4gICAgICovXHJcbiAgICBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtLnByb3RvdHlwZS51bndhdGNoID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7fTtcclxuICAgICAgICByZXF1ZXN0LmRhdGFiYXNlID0gdGhpcy5zZXJpYWxpemVyLmVuY29kZWREYXRhYmFzZUlkO1xyXG4gICAgICAgIHJlcXVlc3QucmVtb3ZlVGFyZ2V0ID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGVyc2lzdGVudExpc3RlblN0cmVhbTtcclxufShQZXJzaXN0ZW50U3RyZWFtKSk7XHJcbi8qKlxyXG4gKiBBIFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIFdyaXRlIFJQQy5cclxuICpcclxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cclxuICogc3RhdGUgaW4gYmV0d2VlbiBjYWxscywgdG8gaGVscCB0aGUgc2VydmVyIHVuZGVyc3RhbmQgd2hpY2ggcmVzcG9uc2VzIHRoZVxyXG4gKiBjbGllbnQgaGFzIHByb2Nlc3NlZCBieSB0aGUgdGltZSB0aGUgbmV4dCByZXF1ZXN0IGlzIG1hZGUuIEV2ZXJ5IHJlc3BvbnNlXHJcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XHJcbiAqIHJlcXVlc3QuXHJcbiAqXHJcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxyXG4gKiBjb250YWluaW5nIHdoYXRldmVyIHN0cmVhbVRva2VuIGlzIG9uIGhhbmQuIE9uY2UgYSByZXNwb25zZSB0byB0aGlzXHJcbiAqIHJlcXVlc3QgaXMgcmVjZWl2ZWQsIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBtYXkgYmUgc3VibWl0dGVkLiBXaGVuXHJcbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xyXG4gKiBva2F5IHRvIHVzZSB0aGUgc2FtZSBzdHJlYW1Ub2tlbiBmb3IgdGhlIGNhbGxzIHRvIHdyaXRlTXV0YXRpb25zLlxyXG4gKlxyXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcclxuICovXHJcbnZhciBQZXJzaXN0ZW50V3JpdGVTdHJlYW0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoUGVyc2lzdGVudFdyaXRlU3RyZWFtLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUGVyc2lzdGVudFdyaXRlU3RyZWFtKHF1ZXVlLCBjb25uZWN0aW9uLCBjcmVkZW50aWFscywgc2VyaWFsaXplciwgbGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBxdWV1ZSwgVGltZXJJZC5Xcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmLCBUaW1lcklkLldyaXRlU3RyZWFtSWRsZSwgY29ubmVjdGlvbiwgY3JlZGVudGlhbHMsIGxpc3RlbmVyKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xyXG4gICAgICAgIF90aGlzLmhhbmRzaGFrZUNvbXBsZXRlXyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsYXN0IHJlY2VpdmVkIHN0cmVhbSB0b2tlbiBmcm9tIHRoZSBzZXJ2ZXIsIHVzZWQgdG8gYWNrbm93bGVkZ2Ugd2hpY2hcclxuICAgICAgICAgKiByZXNwb25zZXMgdGhlIGNsaWVudCBoYXMgcHJvY2Vzc2VkLiBTdHJlYW0gdG9rZW5zIGFyZSBvcGFxdWUgY2hlY2twb2ludFxyXG4gICAgICAgICAqIG1hcmtlcnMgd2hvc2Ugb25seSByZWFsIHZhbHVlIGlzIHRoZWlyIGluY2x1c2lvbiBpbiB0aGUgbmV4dCByZXF1ZXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogUGVyc2lzdGVudFdyaXRlU3RyZWFtIG1hbmFnZXMgcHJvcGFnYXRpbmcgdGhpcyB2YWx1ZSBmcm9tIHJlc3BvbnNlcyB0byB0aGVcclxuICAgICAgICAgKiBuZXh0IHJlcXVlc3QuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgX3RoaXMubGFzdFN0cmVhbVRva2VuID0gZW1wdHlCeXRlU3RyaW5nKCk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNpc3RlbnRXcml0ZVN0cmVhbS5wcm90b3R5cGUsIFwiaGFuZHNoYWtlQ29tcGxldGVcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRyYWNrcyB3aGV0aGVyIG9yIG5vdCBhIGhhbmRzaGFrZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZXhjaGFuZ2VkIGFuZFxyXG4gICAgICAgICAqIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IG11dGF0aW9ucy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZHNoYWtlQ29tcGxldGVfO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLy8gT3ZlcnJpZGUgb2YgUGVyc2lzdGVudFN0cmVhbS5zdGFydFxyXG4gICAgUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmhhbmRzaGFrZUNvbXBsZXRlXyA9IGZhbHNlO1xyXG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuc3RhcnQuY2FsbCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBQZXJzaXN0ZW50V3JpdGVTdHJlYW0ucHJvdG90eXBlLnRlYXJEb3duID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhhbmRzaGFrZUNvbXBsZXRlXykge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlTXV0YXRpb25zKFtdKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZS5zdGFydFJwYyA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24ub3BlblN0cmVhbSgnV3JpdGUnLCB0b2tlbik7XHJcbiAgICB9O1xyXG4gICAgUGVyc2lzdGVudFdyaXRlU3RyZWFtLnByb3RvdHlwZS5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAocmVzcG9uc2VQcm90bykge1xyXG4gICAgICAgIC8vIEFsd2F5cyBjYXB0dXJlIHRoZSBsYXN0IHN0cmVhbSB0b2tlbi5cclxuICAgICAgICBhc3NlcnQoISFyZXNwb25zZVByb3RvLnN0cmVhbVRva2VuLCAnR290IGEgd3JpdGUgcmVzcG9uc2Ugd2l0aG91dCBhIHN0cmVhbSB0b2tlbicpO1xyXG4gICAgICAgIHRoaXMubGFzdFN0cmVhbVRva2VuID0gcmVzcG9uc2VQcm90by5zdHJlYW1Ub2tlbjtcclxuICAgICAgICBpZiAoIXRoaXMuaGFuZHNoYWtlQ29tcGxldGVfKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBmaXJzdCByZXNwb25zZSBpcyBhbHdheXMgdGhlIGhhbmRzaGFrZSByZXNwb25zZVxyXG4gICAgICAgICAgICBhc3NlcnQoIXJlc3BvbnNlUHJvdG8ud3JpdGVSZXN1bHRzIHx8IHJlc3BvbnNlUHJvdG8ud3JpdGVSZXN1bHRzLmxlbmd0aCA9PT0gMCwgJ0dvdCBtdXRhdGlvbiByZXN1bHRzIGZvciBoYW5kc2hha2UnKTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kc2hha2VDb21wbGV0ZV8gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5vbkhhbmRzaGFrZUNvbXBsZXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgZmlyc3Qgd3JpdGUgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5LFxyXG4gICAgICAgICAgICAvLyBOb3RlLCB0aGF0IHdlIGNvdWxkIGNvbnNpZGVyIGEgc3VjY2Vzc2Z1bCBoYW5kc2hha2UgaGVhbHRoeSwgaG93ZXZlcixcclxuICAgICAgICAgICAgLy8gdGhlIHdyaXRlIGl0c2VsZiBtaWdodCBiZSBjYXVzaW5nIGFuIGVycm9yIHdlIHdhbnQgdG8gYmFjayBvZmYgZnJvbS5cclxuICAgICAgICAgICAgdGhpcy5iYWNrb2ZmLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gdGhpcy5zZXJpYWxpemVyLmZyb21Xcml0ZVJlc3VsdHMocmVzcG9uc2VQcm90by53cml0ZVJlc3VsdHMsIHJlc3BvbnNlUHJvdG8uY29tbWl0VGltZSk7XHJcbiAgICAgICAgICAgIHZhciBjb21taXRWZXJzaW9uID0gdGhpcy5zZXJpYWxpemVyLmZyb21WZXJzaW9uKHJlc3BvbnNlUHJvdG8uY29tbWl0VGltZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLm9uTXV0YXRpb25SZXN1bHQoY29tbWl0VmVyc2lvbiwgcmVzdWx0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgYW4gaW5pdGlhbCBzdHJlYW1Ub2tlbiB0byB0aGUgc2VydmVyLCBwZXJmb3JtaW5nIHRoZSBoYW5kc2hha2VcclxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XHJcbiAgICAgKiBjYWxscyBzaG91bGQgd2FpdCB1bnRpbCBvbkhhbmRzaGFrZUNvbXBsZXRlIHdhcyBjYWxsZWQuXHJcbiAgICAgKi9cclxuICAgIFBlcnNpc3RlbnRXcml0ZVN0cmVhbS5wcm90b3R5cGUud3JpdGVIYW5kc2hha2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuaXNPcGVuKCksICdXcml0aW5nIGhhbmRzaGFrZSByZXF1aXJlcyBhbiBvcGVuZWQgc3RyZWFtJyk7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLmhhbmRzaGFrZUNvbXBsZXRlXywgJ0hhbmRzaGFrZSBhbHJlYWR5IGNvbXBsZXRlZCcpO1xyXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogU3VwcG9ydCBzdHJlYW0gcmVzdW1wdGlvbi4gV2UgaW50ZW50aW9uYWxseSBkbyBub3Qgc2V0IHRoZVxyXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7fTtcclxuICAgICAgICByZXF1ZXN0LmRhdGFiYXNlID0gdGhpcy5zZXJpYWxpemVyLmVuY29kZWREYXRhYmFzZUlkO1xyXG4gICAgICAgIHRoaXMuc2VuZFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFNlbmRzIGEgZ3JvdXAgb2YgbXV0YXRpb25zIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZCB0byBhcHBseS4gKi9cclxuICAgIFBlcnNpc3RlbnRXcml0ZVN0cmVhbS5wcm90b3R5cGUud3JpdGVNdXRhdGlvbnMgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQodGhpcy5pc09wZW4oKSwgJ1dyaXRpbmcgbXV0YXRpb25zIHJlcXVpcmVzIGFuIG9wZW5lZCBzdHJlYW0nKTtcclxuICAgICAgICBhc3NlcnQodGhpcy5oYW5kc2hha2VDb21wbGV0ZV8sICdIYW5kc2hha2UgbXVzdCBiZSBjb21wbGV0ZSBiZWZvcmUgd3JpdGluZyBtdXRhdGlvbnMnKTtcclxuICAgICAgICBhc3NlcnQodGhpcy5sYXN0U3RyZWFtVG9rZW4ubGVuZ3RoID4gMCwgJ1RyeWluZyB0byB3cml0ZSBtdXRhdGlvbiB3aXRob3V0IGEgdG9rZW4nKTtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgLy8gUHJvdG9zIGFyZSB0eXBlZCB3aXRoIHN0cmluZywgYnV0IHdlIHN1cHBvcnQgVUludDhBcnJheSBvbiBOb2RlXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcclxuICAgICAgICAgICAgd3JpdGVzOiBtdXRhdGlvbnMubWFwKGZ1bmN0aW9uIChtdXRhdGlvbikgeyByZXR1cm4gX3RoaXMuc2VyaWFsaXplci50b011dGF0aW9uKG11dGF0aW9uKTsgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2VuZFJlcXVlc3QocmVxdWVzdCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBlcnNpc3RlbnRXcml0ZVN0cmVhbTtcclxufShQZXJzaXN0ZW50U3RyZWFtKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGF0YXN0b3JlIGlzIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZSBDbG91ZCBEYXRhc3RvcmUgZ3JwYyBBUEksXHJcbiAqIHdoaWNoIHByb3ZpZGVzIGFuIGludGVyZmFjZSB0aGF0IGlzIG1vcmUgY29udmVuaWVudCBmb3IgdGhlIHJlc3Qgb2YgdGhlXHJcbiAqIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlIHRvIGNvbnN1bWUuXHJcbiAqL1xyXG52YXIgRGF0YXN0b3JlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGF0YXN0b3JlKHF1ZXVlLCBjb25uZWN0aW9uLCBjcmVkZW50aWFscywgc2VyaWFsaXplcikge1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBxdWV1ZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBjcmVkZW50aWFscztcclxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBzZXJpYWxpemVyO1xyXG4gICAgfVxyXG4gICAgRGF0YXN0b3JlLnByb3RvdHlwZS5uZXdQZXJzaXN0ZW50V3JpdGVTdHJlYW0gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbnRXcml0ZVN0cmVhbSh0aGlzLnF1ZXVlLCB0aGlzLmNvbm5lY3Rpb24sIHRoaXMuY3JlZGVudGlhbHMsIHRoaXMuc2VyaWFsaXplciwgbGlzdGVuZXIpO1xyXG4gICAgfTtcclxuICAgIERhdGFzdG9yZS5wcm90b3R5cGUubmV3UGVyc2lzdGVudFdhdGNoU3RyZWFtID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW50TGlzdGVuU3RyZWFtKHRoaXMucXVldWUsIHRoaXMuY29ubmVjdGlvbiwgdGhpcy5jcmVkZW50aWFscywgdGhpcy5zZXJpYWxpemVyLCBsaXN0ZW5lcik7XHJcbiAgICB9O1xyXG4gICAgRGF0YXN0b3JlLnByb3RvdHlwZS5jb21taXQgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICBkYXRhYmFzZTogdGhpcy5zZXJpYWxpemVyLmVuY29kZWREYXRhYmFzZUlkLFxyXG4gICAgICAgICAgICB3cml0ZXM6IG11dGF0aW9ucy5tYXAoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIF90aGlzLnNlcmlhbGl6ZXIudG9NdXRhdGlvbihtKTsgfSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmludm9rZVJQQygnQ29tbWl0JywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2VyaWFsaXplci5mcm9tV3JpdGVSZXN1bHRzKHJlc3BvbnNlLndyaXRlUmVzdWx0cywgcmVzcG9uc2UuY29tbWl0VGltZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGF0YXN0b3JlLnByb3RvdHlwZS5sb29rdXAgPSBmdW5jdGlvbiAoa2V5cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgZGF0YWJhc2U6IHRoaXMuc2VyaWFsaXplci5lbmNvZGVkRGF0YWJhc2VJZCxcclxuICAgICAgICAgICAgZG9jdW1lbnRzOiBrZXlzLm1hcChmdW5jdGlvbiAoaykgeyByZXR1cm4gX3RoaXMuc2VyaWFsaXplci50b05hbWUoayk7IH0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnZva2VTdHJlYW1pbmdSUEMoJ0JhdGNoR2V0RG9jdW1lbnRzJywgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICB2YXIgZG9jcyA9IG1heWJlRG9jdW1lbnRNYXAoKTtcclxuICAgICAgICAgICAgcmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiAocHJvdG8pIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb2MgPSBfdGhpcy5zZXJpYWxpemVyLmZyb21NYXliZURvY3VtZW50KHByb3RvKTtcclxuICAgICAgICAgICAgICAgIGRvY3MgPSBkb2NzLmluc2VydChkb2Mua2V5LCBkb2MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG4gICAgICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IGRvY3MuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoISFkb2MsICdNaXNzaW5nIGVudGl0eSBpbiB3cml0ZSByZXNwb25zZSBmb3IgJyArIGtleSk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChkb2MpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKiogR2V0cyBhbiBhdXRoIHRva2VuIGFuZCBpbnZva2VzIHRoZSBwcm92aWRlZCBSUEMuICovXHJcbiAgICBEYXRhc3RvcmUucHJvdG90eXBlLmludm9rZVJQQyA9IGZ1bmN0aW9uIChycGNOYW1lLCByZXF1ZXN0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVkZW50aWFsc1xyXG4gICAgICAgICAgICAuZ2V0VG9rZW4oKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmNvbm5lY3Rpb24uaW52b2tlUlBDKHJwY05hbWUsIHJlcXVlc3QsIHRva2VuKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSBDb2RlLlVOQVVUSEVOVElDQVRFRCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEdldHMgYW4gYXV0aCB0b2tlbiBhbmQgaW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDIHdpdGggc3RyZWFtZWQgcmVzdWx0cy4gKi9cclxuICAgIERhdGFzdG9yZS5wcm90b3R5cGUuaW52b2tlU3RyZWFtaW5nUlBDID0gZnVuY3Rpb24gKHJwY05hbWUsIHJlcXVlc3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWRlbnRpYWxzXHJcbiAgICAgICAgICAgIC5nZXRUb2tlbigpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY29ubmVjdGlvbi5pbnZva2VTdHJlYW1pbmdSUEMocnBjTmFtZSwgcmVxdWVzdCwgdG9rZW4pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IENvZGUuVU5BVVRIRU5USUNBVEVEKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGF0YXN0b3JlO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVybmFsIHRyYW5zYWN0aW9uIG9iamVjdCByZXNwb25zaWJsZSBmb3IgYWNjdW11bGF0aW5nIHRoZSBtdXRhdGlvbnMgdG9cclxuICogcGVyZm9ybSBhbmQgdGhlIGJhc2UgdmVyc2lvbnMgZm9yIGFueSBkb2N1bWVudHMgcmVhZC5cclxuICovXHJcbnZhciBUcmFuc2FjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRyYW5zYWN0aW9uKGRhdGFzdG9yZSkge1xyXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gZGF0YXN0b3JlO1xyXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cclxuICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IGRvY3VtZW50VmVyc2lvbk1hcCgpO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5jb21taXR0ZWQgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGRlZmVycmVkIHVzYWdlIGVycm9yIHRoYXQgb2NjdXJyZWQgcHJldmlvdXNseSBpbiB0aGlzIHRyYW5zYWN0aW9uIHRoYXRcclxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmxhc3RXcml0ZUVycm9yID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHdyaXR0ZW4gaW4gdGhlIHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV2hlbiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgd3JpdGUgdG8gdGhlIHNhbWUga2V5IGluIGEgdHJhbnNhY3Rpb24sIGFueVxyXG4gICAgICAgICAqIHdyaXRlcyBhZnRlciBodGUgZmlyc3QgYXJlIGhhbmRsZWQgZGlmZmVyZW50bHkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy53cml0dGVuRG9jcyA9IG5ldyBTZXQoKTtcclxuICAgIH1cclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5sb29rdXAgPSBmdW5jdGlvbiAoa2V5cykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRvY3M7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm11dGF0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRhdGFzdG9yZS5sb29rdXAoa2V5cyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jcyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jcy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50IHx8IGRvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVjb3JkVmVyc2lvbihkb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbCgnRG9jdW1lbnQgaW4gYSB0cmFuc2FjdGlvbiB3YXMgYSAnICsgZG9jLmNvbnN0cnVjdG9yLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRvY3NdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgZGF0YSkge1xyXG4gICAgICAgIHRoaXMud3JpdGUoZGF0YS50b011dGF0aW9ucyhrZXksIHRoaXMucHJlY29uZGl0aW9uKGtleSkpKTtcclxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzLmFkZChrZXkpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoa2V5LCBkYXRhKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy53cml0ZShkYXRhLnRvTXV0YXRpb25zKGtleSwgdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUoa2V5KSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RXcml0ZUVycm9yID0gZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQoa2V5KTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHRoaXMud3JpdGUoW25ldyBEZWxldGVNdXRhdGlvbihrZXksIHRoaXMucHJlY29uZGl0aW9uKGtleSkpXSk7XHJcbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQoa2V5KTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuY29tbWl0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHVud3JpdHRlbjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdFdyaXRlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdW53cml0dGVuID0gdGhpcy5yZWFkVmVyc2lvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBlYWNoIG11dGF0aW9uLCBub3RlIHRoYXQgdGhlIGRvYyB3YXMgd3JpdHRlbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobXV0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVud3JpdHRlbiA9IHVud3JpdHRlbi5yZW1vdmUobXV0YXRpb24ua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdW53cml0dGVuLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0V2ZXJ5IGRvY3VtZW50IHJlYWQgaW4gYSB0cmFuc2FjdGlvbiBtdXN0IGFsc28gYmUgd3JpdHRlbi4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRhdGFzdG9yZS5jb21taXQodGhpcy5tdXRhdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21taXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5yZWNvcmRWZXJzaW9uID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBkb2NWZXJzaW9uO1xyXG4gICAgICAgIGlmIChkb2MgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xyXG4gICAgICAgICAgICBkb2NWZXJzaW9uID0gZG9jLnZlcnNpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgLy8gRm9yIGRlbGV0ZWQgZG9jcywgd2UgbXVzdCB1c2UgYmFzZVZlcnNpb24gMCB3aGVuIHdlIG92ZXJ3cml0ZSB0aGVtLlxyXG4gICAgICAgICAgICBkb2NWZXJzaW9uID0gU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ0RvY3VtZW50IGluIGEgdHJhbnNhY3Rpb24gd2FzIGEgJyArIGRvYy5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGV4aXN0aW5nVmVyc2lvbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldChkb2Mua2V5KTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdWZXJzaW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICghZG9jVmVyc2lvbi5pc0VxdWFsKGV4aXN0aW5nVmVyc2lvbikpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgdHJhbnNhY3Rpb24gd2lsbCBmYWlsIG5vIG1hdHRlciB3aGF0LlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuQUJPUlRFRCwgJ0RvY3VtZW50IHZlcnNpb24gY2hhbmdlZCBiZXR3ZWVuIHR3byByZWFkcy4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSB0aGlzLnJlYWRWZXJzaW9ucy5pbnNlcnQoZG9jLmtleSwgZG9jVmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcclxuICAgICAqIGFzIGEgcHJlY29uZGl0aW9uLCBvciBubyBwcmVjb25kaXRpb24gaWYgaXQgd2FzIG5vdCByZWFkLlxyXG4gICAgICovXHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUucHJlY29uZGl0aW9uID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyhrZXkpICYmIHZlcnNpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbi51cGRhdGVUaW1lKHZlcnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbi5OT05FO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cclxuICAgICAqL1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnByZWNvbmRpdGlvbkZvclVwZGF0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldChrZXkpO1xyXG4gICAgICAgIC8vIFRoZSBmaXJzdCB0aW1lIGEgZG9jdW1lbnQgaXMgd3JpdHRlbiwgd2Ugd2FudCB0byB0YWtlIGludG8gYWNjb3VudCB0aGVcclxuICAgICAgICAvLyByZWFkIHRpbWUgYW5kIGV4aXN0ZW5jZVxyXG4gICAgICAgIGlmICghdGhpcy53cml0dGVuRG9jcy5oYXMoa2V5KSAmJiB2ZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLmZvckRlbGV0ZWREb2MoKSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBzbyBmYWlsIHRoZSB0cmFuc2FjdGlvbi5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIHZhbGlkYXRlZCBsb2NhbGx5IGJlY2F1c2UgeW91IGNhbid0IHNlbmQgYVxyXG4gICAgICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9uIHRoYXQgYSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCB3aXRob3V0IGNoYW5naW5nIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBiYWNrZW5kIHdyaXRlIHRvIGJlIGFuIGluc2VydC4gVGhpcyBpcyB0aGUgcmV2ZXJzZVxyXG4gICAgICAgICAgICAgICAgLy8gb2Ygd2hhdCB3ZSB3YW50LCBzaW5jZSB3ZSB3YW50IHRvIGFzc2VydCB0aGF0IHRoZSBkb2N1bWVudCBkb2Vzbid0XHJcbiAgICAgICAgICAgICAgICAvLyBleGlzdCBidXQgdGhlbiBzZW5kIHRoZSB1cGRhdGUgYW5kIGhhdmUgaXQgZmFpbC4gU2luY2Ugd2UgY2FuJ3RcclxuICAgICAgICAgICAgICAgIC8vIGV4cHJlc3MgdGhhdCB0byB0aGUgYmFja2VuZCwgd2UgaGF2ZSB0byB2YWxpZGF0ZSBsb2NhbGx5LlxyXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBjYW4gY2hhbmdlIG9uY2Ugd2UgY2FuIHNlbmQgc2VwYXJhdGUgdmVyaWZ5IHdyaXRlcyBpbiB0aGVcclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCB1cGRhdGUgYSBkb2N1bWVudCB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGV4aXN0cywgYmFzZSBwcmVjb25kaXRpb24gb24gZG9jdW1lbnQgdXBkYXRlIHRpbWUuXHJcbiAgICAgICAgICAgIHJldHVybiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh2ZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIERvY3VtZW50IHdhcyBub3QgcmVhZCwgc28gd2UganVzdCB1c2UgdGhlIHByZWNvbmRpdGlvbnMgZm9yIGEgYmxpbmRcclxuICAgICAgICAgICAgLy8gdXBkYXRlLlxyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLmV4aXN0cyh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCk7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnMgPSB0aGlzLm11dGF0aW9ucy5jb25jYXQobXV0YXRpb25zKTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5jb21taXR0ZWQsICdBIHRyYW5zYWN0aW9uIG9iamVjdCBjYW5ub3QgYmUgdXNlZCBhZnRlciBpdHMgdXBkYXRlIGNhbGxiYWNrIGhhcyBiZWVuIGludm9rZWQuJyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyYW5zYWN0aW9uO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlc2NyaWJlcyB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBGaXJlc3RvcmUgY2xpZW50LiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdFxyXG4gKiBpbmRpY2F0ZSB3aGV0aGVyIG9yIG5vdCB0aGUgcmVtb3RlIHN0b3JlIGlzIHRyeWluZyB0byBjb25uZWN0IG9yIG5vdC4gVGhpcyBpc1xyXG4gKiBwcmltYXJpbHkgdXNlZCBieSB0aGUgVmlldyAvIEV2ZW50TWFuYWdlciBjb2RlIHRvIGNoYW5nZSB0aGVpciBiZWhhdmlvciB3aGlsZVxyXG4gKiBvZmZsaW5lIChlLmcuIGdldCgpIGNhbGxzIHNob3VsZG4ndCB3YWl0IGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciBhbmRcclxuICogc25hcHNob3QgZXZlbnRzIHNob3VsZCBzZXQgbWV0YWRhdGEuaXNGcm9tQ2FjaGU9dHJ1ZSkuXHJcbiAqL1xyXG52YXIgT25saW5lU3RhdGU7XHJcbihmdW5jdGlvbiAoT25saW5lU3RhdGUpIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIEZpcmVzdG9yZSBjbGllbnQgaXMgaW4gYW4gdW5rbm93biBvbmxpbmUgc3RhdGUuIFRoaXMgbWVhbnMgdGhlIGNsaWVudFxyXG4gICAgICogaXMgZWl0aGVyIG5vdCBhY3RpdmVseSB0cnlpbmcgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiBvciBpdCBpcyBjdXJyZW50bHlcclxuICAgICAqIHRyeWluZyB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uLCBidXQgaXQgaGFzIG5vdCBzdWNjZWVkZWQgb3IgZmFpbGVkIHlldC5cclxuICAgICAqIEhpZ2hlci1sZXZlbCBjb21wb25lbnRzIHNob3VsZCBub3Qgb3BlcmF0ZSBpbiBvZmZsaW5lIG1vZGUuXHJcbiAgICAgKi9cclxuICAgIE9ubGluZVN0YXRlW09ubGluZVN0YXRlW1wiVW5rbm93blwiXSA9IDBdID0gXCJVbmtub3duXCI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjbGllbnQgaXMgY29ubmVjdGVkIGFuZCB0aGUgY29ubmVjdGlvbnMgYXJlIGhlYWx0aHkuIFRoaXMgc3RhdGUgaXNcclxuICAgICAqIHJlYWNoZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIGNvbm5lY3Rpb24gYW5kIHRoZXJlIGhhcyBiZWVuIGF0IGxlYXN0IG9uZVxyXG4gICAgICogc3VjY2Vzc2Z1bCBtZXNzYWdlIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmRzLlxyXG4gICAgICovXHJcbiAgICBPbmxpbmVTdGF0ZVtPbmxpbmVTdGF0ZVtcIk9ubGluZVwiXSA9IDFdID0gXCJPbmxpbmVcIjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGNsaWVudCBpcyBlaXRoZXIgdHJ5aW5nIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gYnV0IGZhaWxpbmcsIG9yIGl0XHJcbiAgICAgKiBoYXMgYmVlbiBleHBsaWNpdGx5IG1hcmtlZCBvZmZsaW5lIHZpYSBhIGNhbGwgdG8gZGlzYWJsZU5ldHdvcmsoKS5cclxuICAgICAqIEhpZ2hlci1sZXZlbCBjb21wb25lbnRzIHNob3VsZCBvcGVyYXRlIGluIG9mZmxpbmUgbW9kZS5cclxuICAgICAqL1xyXG4gICAgT25saW5lU3RhdGVbT25saW5lU3RhdGVbXCJPZmZsaW5lXCJdID0gMl0gPSBcIk9mZmxpbmVcIjtcclxufSkoT25saW5lU3RhdGUgfHwgKE9ubGluZVN0YXRlID0ge30pKTtcclxuLyoqIFRoZSBzb3VyY2Ugb2YgYW4gb25saW5lIHN0YXRlIGV2ZW50LiAqL1xyXG52YXIgT25saW5lU3RhdGVTb3VyY2U7XHJcbihmdW5jdGlvbiAoT25saW5lU3RhdGVTb3VyY2UpIHtcclxuICAgIE9ubGluZVN0YXRlU291cmNlW09ubGluZVN0YXRlU291cmNlW1wiUmVtb3RlU3RvcmVcIl0gPSAwXSA9IFwiUmVtb3RlU3RvcmVcIjtcclxuICAgIE9ubGluZVN0YXRlU291cmNlW09ubGluZVN0YXRlU291cmNlW1wiU2hhcmVkQ2xpZW50U3RhdGVcIl0gPSAxXSA9IFwiU2hhcmVkQ2xpZW50U3RhdGVcIjtcclxufSkoT25saW5lU3RhdGVTb3VyY2UgfHwgKE9ubGluZVN0YXRlU291cmNlID0ge30pKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJDYgPSAnT25saW5lU3RhdGVUcmFja2VyJztcclxuLy8gVG8gZGVhbCB3aXRoIHRyYW5zaWVudCBmYWlsdXJlcywgd2UgYWxsb3cgbXVsdGlwbGUgc3RyZWFtIGF0dGVtcHRzIGJlZm9yZVxyXG4vLyBnaXZpbmcgdXAgYW5kIHRyYW5zaXRpb25pbmcgZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9mZmxpbmUuXHJcbi8vIFRPRE8obWlrZWxlaGVuKTogVGhpcyB1c2VkIHRvIGJlIHNldCB0byAyIGFzIGEgbWl0aWdhdGlvbiBmb3IgYi82NjIyODM5NC5cclxuLy8gQGpkaW1vbmQgdGhpbmtzIHRoYXQgYnVnIGlzIHN1ZmZpY2llbnRseSBmaXhlZCBzbyB0aGF0IHdlIGNhbiBzZXQgdGhpcyBiYWNrXHJcbi8vIHRvIDEuIElmIHRoYXQgd29ya3Mgb2theSwgd2UgY291bGQgcG90ZW50aWFsbHkgcmVtb3ZlIHRoaXMgbG9naWMgZW50aXJlbHkuXHJcbnZhciBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTID0gMTtcclxuLy8gVG8gZGVhbCB3aXRoIHN0cmVhbSBhdHRlbXB0cyB0aGF0IGRvbid0IHN1Y2NlZWQgb3IgZmFpbCBpbiBhIHRpbWVseSBtYW5uZXIsXHJcbi8vIHdlIGhhdmUgYSB0aW1lb3V0IGZvciBPbmxpbmVTdGF0ZSB0byByZWFjaCBPbmxpbmUgb3IgT2ZmbGluZS5cclxuLy8gSWYgdGhlIHRpbWVvdXQgaXMgcmVhY2hlZCwgd2UgdHJhbnNpdGlvbiB0byBPZmZsaW5lIHJhdGhlciB0aGFuIHdhaXRpbmdcclxuLy8gaW5kZWZpbml0ZWx5LlxyXG52YXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMgPSAxMCAqIDEwMDA7XHJcbi8qKlxyXG4gKiBBIGNvbXBvbmVudCB1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0byB0cmFjayB0aGUgT25saW5lU3RhdGUgKHRoYXQgaXMsXHJcbiAqIHdoZXRoZXIgb3Igbm90IHRoZSBjbGllbnQgYXMgYSB3aG9sZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0byBiZSBvbmxpbmUgb3JcclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cclxuICpcclxuICogSW4gcGFydGljdWxhciwgd2hlbiB0aGUgY2xpZW50IGlzIHRyeWluZyB0byBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLCB3ZVxyXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcclxuICogYSBjb25uZWN0aW9uIHRvIHN1Y2NlZWQuIElmIHdlIGhhdmUgdG9vIG1hbnkgZmFpbHVyZXMgb3IgdGhlIHRpbWVvdXQgZWxhcHNlcyxcclxuICogdGhlbiB3ZSBzZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUsIGFuZCB0aGUgY2xpZW50IHdpbGwgYmVoYXZlIGFzIGlmXHJcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXHJcbiAqL1xyXG52YXIgT25saW5lU3RhdGVUcmFja2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gT25saW5lU3RhdGVUcmFja2VyKGFzeW5jUXVldWUsIG9ubGluZVN0YXRlSGFuZGxlcikge1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IGFzeW5jUXVldWU7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBvbmxpbmVTdGF0ZUhhbmRsZXI7XHJcbiAgICAgICAgLyoqIFRoZSBjdXJyZW50IE9ubGluZVN0YXRlLiAqL1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBPbmxpbmVTdGF0ZS5Vbmtub3duO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgY291bnQgb2YgY29uc2VjdXRpdmUgZmFpbHVyZXMgdG8gb3BlbiB0aGUgc3RyZWFtLiBJZiBpdCByZWFjaGVzIHRoZVxyXG4gICAgICAgICAqIG1heGltdW0gZGVmaW5lZCBieSBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTLCB3ZSdsbCBzZXQgdGhlIE9ubGluZVN0YXRlIHRvXHJcbiAgICAgICAgICogT2ZmbGluZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLndhdGNoU3RyZWFtRmFpbHVyZXMgPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgdGltZXIgdGhhdCBlbGFwc2VzIGFmdGVyIE9OTElORV9TVEFURV9USU1FT1VUX01TLCBhdCB3aGljaCBwb2ludCB3ZVxyXG4gICAgICAgICAqIHRyYW5zaXRpb24gZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9ubGluZVN0YXRlLk9mZmxpbmUgd2l0aG91dCB3YWl0aW5nXHJcbiAgICAgICAgICogZm9yIHRoZSBzdHJlYW0gdG8gYWN0dWFsbHkgZmFpbCAoTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB0aW1lcykuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRpbWVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBjbGllbnQgc2hvdWxkIGxvZyBhIHdhcm5pbmcgbWVzc2FnZSBpZiBpdCBmYWlscyB0byBjb25uZWN0IHRvXHJcbiAgICAgICAgICogdGhlIGJhY2tlbmQgKGluaXRpYWxseSB0cnVlLCBjbGVhcmVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBzdHJlYW0sIG9yIGlmIHdlJ3ZlXHJcbiAgICAgICAgICogbG9nZ2VkIHRoZSBtZXNzYWdlIGFscmVhZHkpLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2hvdWxkV2FybkNsaWVudElzT2ZmbGluZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCBieSBSZW1vdGVTdG9yZSB3aGVuIGEgd2F0Y2ggc3RyZWFtIGlzIHN0YXJ0ZWQgKGluY2x1ZGluZyBvbiBlYWNoXHJcbiAgICAgKiBiYWNrb2ZmIGF0dGVtcHQpLlxyXG4gICAgICpcclxuICAgICAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGF0dGVtcHQsIGl0IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gYW5kIHN0YXJ0c1xyXG4gICAgICogdGhlIG9ubGluZVN0YXRlVGltZXIuXHJcbiAgICAgKi9cclxuICAgIE9ubGluZVN0YXRlVHJhY2tlci5wcm90b3R5cGUuaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLndhdGNoU3RyZWFtRmFpbHVyZXMgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBbmRCcm9hZGNhc3QoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLm9ubGluZVN0YXRlVGltZXIgPT09IG51bGwsIFwib25saW5lU3RhdGVUaW1lciBzaG91bGRuJ3QgYmUgc3RhcnRlZCB5ZXRcIik7XHJcbiAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUaW1lciA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShUaW1lcklkLk9ubGluZVN0YXRlVGltZW91dCwgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9ubGluZVN0YXRlVGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KF90aGlzLnN0YXRlID09PSBPbmxpbmVTdGF0ZS5Vbmtub3duLCAnVGltZXIgc2hvdWxkIGJlIGNhbmNlbGVkIGlmIHdlIHRyYW5zaXRpb25lZCB0byBhIGRpZmZlcmVudCBzdGF0ZS4nKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmxvZ0NsaWVudE9mZmxpbmVXYXJuaW5nSWZOZWNlc3NhcnkoXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiBcIiArIE9OTElORV9TVEFURV9USU1FT1VUX01TIC8gMTAwMCArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcInNlY29uZHMuXCIpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0QW5kQnJvYWRjYXN0KE9ubGluZVN0YXRlLk9mZmxpbmUpO1xyXG4gICAgICAgICAgICAgICAgLy8gTk9URTogaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkgd2lsbCBjb250aW51ZSB0byBpbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIHdhdGNoU3RyZWFtRmFpbHVyZXMgZXZlbiB0aG91Z2ggd2UgYXJlIGFscmVhZHkgbWFya2VkIE9mZmxpbmUsXHJcbiAgICAgICAgICAgICAgICAvLyBidXQgdGhpcyBpcyBub24taGFybWZ1bC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcclxuICAgICAqIGZhaWx1cmUuIFRoZSBmaXJzdCBmYWlsdXJlIG1vdmVzIHVzIHRvIHRoZSAnVW5rbm93bicgc3RhdGUuIFdlIHRoZW4gbWF5XHJcbiAgICAgKiBhbGxvdyBtdWx0aXBsZSBmYWlsdXJlcyAoYmFzZWQgb24gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUykgYmVmb3JlIHdlXHJcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXHJcbiAgICAgKi9cclxuICAgIE9ubGluZVN0YXRlVHJhY2tlci5wcm90b3R5cGUuaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IE9ubGluZVN0YXRlLk9ubGluZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEFuZEJyb2FkY2FzdChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgLy8gVG8gZ2V0IHRvIE9ubGluZVN0YXRlLk9ubGluZSwgc2V0KCkgbXVzdCBoYXZlIGJlZW4gY2FsbGVkIHdoaWNoIHdvdWxkXHJcbiAgICAgICAgICAgIC8vIGhhdmUgcmVzZXQgb3VyIGhldXJpc3RpY3MuXHJcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLndhdGNoU3RyZWFtRmFpbHVyZXMgPT09IDAsICd3YXRjaFN0cmVhbUZhaWx1cmVzIG11c3QgYmUgMCcpO1xyXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5vbmxpbmVTdGF0ZVRpbWVyID09PSBudWxsLCAnb25saW5lU3RhdGVUaW1lciBtdXN0IGJlIG51bGwnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMud2F0Y2hTdHJlYW1GYWlsdXJlcysrO1xyXG4gICAgICAgICAgICBpZiAodGhpcy53YXRjaFN0cmVhbUZhaWx1cmVzID49IE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJPbmxpbmVTdGF0ZVRpbWVyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0NsaWVudE9mZmxpbmVXYXJuaW5nSWZOZWNlc3NhcnkoXCJDb25uZWN0aW9uIGZhaWxlZCBcIiArIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgKyBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwidGltZXMuIE1vc3QgcmVjZW50IGVycm9yOiBcIiArIGVycm9yLnRvU3RyaW5nKCkpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QW5kQnJvYWRjYXN0KE9ubGluZVN0YXRlLk9mZmxpbmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRXhwbGljaXRseSBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byB0aGUgc3BlY2lmaWVkIHN0YXRlLlxyXG4gICAgICpcclxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxyXG4gICAgICogT2ZmbGluZSBoZXVyaXN0aWNzLCBzbyBtdXN0IG5vdCBiZSB1c2VkIGluIHBsYWNlIG9mXHJcbiAgICAgKiBoYW5kbGVXYXRjaFN0cmVhbVN0YXJ0KCkgYW5kIGhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZSgpLlxyXG4gICAgICovXHJcbiAgICBPbmxpbmVTdGF0ZVRyYWNrZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChuZXdTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuY2xlYXJPbmxpbmVTdGF0ZVRpbWVyKCk7XHJcbiAgICAgICAgdGhpcy53YXRjaFN0cmVhbUZhaWx1cmVzID0gMDtcclxuICAgICAgICBpZiAobmV3U3RhdGUgPT09IE9ubGluZVN0YXRlLk9ubGluZSkge1xyXG4gICAgICAgICAgICAvLyBXZSd2ZSBjb25uZWN0ZWQgdG8gd2F0Y2ggYXQgbGVhc3Qgb25jZS4gRG9uJ3Qgd2FybiB0aGUgZGV2ZWxvcGVyXHJcbiAgICAgICAgICAgIC8vIGFib3V0IGJlaW5nIG9mZmxpbmUgZ29pbmcgZm9yd2FyZC5cclxuICAgICAgICAgICAgdGhpcy5zaG91bGRXYXJuQ2xpZW50SXNPZmZsaW5lID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0QW5kQnJvYWRjYXN0KG5ld1N0YXRlKTtcclxuICAgIH07XHJcbiAgICBPbmxpbmVTdGF0ZVRyYWNrZXIucHJvdG90eXBlLnNldEFuZEJyb2FkY2FzdCA9IGZ1bmN0aW9uIChuZXdTdGF0ZSkge1xyXG4gICAgICAgIGlmIChuZXdTdGF0ZSAhPT0gdGhpcy5zdGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gbmV3U3RhdGU7XHJcbiAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKG5ld1N0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT25saW5lU3RhdGVUcmFja2VyLnByb3RvdHlwZS5sb2dDbGllbnRPZmZsaW5lV2FybmluZ0lmTmVjZXNzYXJ5ID0gZnVuY3Rpb24gKGRldGFpbHMpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IFwiQ291bGQgbm90IHJlYWNoIENsb3VkIEZpcmVzdG9yZSBiYWNrZW5kLiBcIiArIGRldGFpbHMgKyBcIlxcblwiICtcclxuICAgICAgICAgICAgXCJUaGlzIHR5cGljYWxseSBpbmRpY2F0ZXMgdGhhdCB5b3VyIGRldmljZSBkb2VzIG5vdCBoYXZlIGEgaGVhbHRoeSBcIiArXHJcbiAgICAgICAgICAgIFwiSW50ZXJuZXQgY29ubmVjdGlvbiBhdCB0aGUgbW9tZW50LiBUaGUgY2xpZW50IHdpbGwgb3BlcmF0ZSBpbiBvZmZsaW5lIFwiICtcclxuICAgICAgICAgICAgXCJtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuXCI7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkV2FybkNsaWVudElzT2ZmbGluZSkge1xyXG4gICAgICAgICAgICBlcnJvcihtZXNzYWdlKTtcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRXYXJuQ2xpZW50SXNPZmZsaW5lID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDYsIG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPbmxpbmVTdGF0ZVRyYWNrZXIucHJvdG90eXBlLmNsZWFyT25saW5lU3RhdGVUaW1lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5vbmxpbmVTdGF0ZVRpbWVyICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUaW1lci5jYW5jZWwoKTtcclxuICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9ubGluZVN0YXRlVHJhY2tlcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFcnJvciBDb2RlcyBkZXNjcmliaW5nIHRoZSBkaWZmZXJlbnQgd2F5cyBHUlBDIGNhbiBmYWlsLiBUaGVzZSBhcmUgY29waWVkXHJcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcclxuICpcclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcclxuICpcclxuICogSW1wb3J0YW50ISBUaGUgbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgbWF0dGVyIGJlY2F1c2UgdGhlIHN0cmluZyBmb3Jtc1xyXG4gKiBhcmUgdXNlZCBmb3IgcmV2ZXJzZSBsb29rdXBzIGZyb20gdGhlIHdlYmNoYW5uZWwgc3RyZWFtLiBEbyBOT1QgY2hhbmdlIHRoZVxyXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycy5cclxuICovXHJcbnZhciBScGNDb2RlO1xyXG4oZnVuY3Rpb24gKFJwY0NvZGUpIHtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIk9LXCJdID0gMF0gPSBcIk9LXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJDQU5DRUxMRURcIl0gPSAxXSA9IFwiQ0FOQ0VMTEVEXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJVTktOT1dOXCJdID0gMl0gPSBcIlVOS05PV05cIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIklOVkFMSURfQVJHVU1FTlRcIl0gPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiREVBRExJTkVfRVhDRUVERURcIl0gPSA0XSA9IFwiREVBRExJTkVfRVhDRUVERURcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIk5PVF9GT1VORFwiXSA9IDVdID0gXCJOT1RfRk9VTkRcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIkFMUkVBRFlfRVhJU1RTXCJdID0gNl0gPSBcIkFMUkVBRFlfRVhJU1RTXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJQRVJNSVNTSU9OX0RFTklFRFwiXSA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiVU5BVVRIRU5USUNBVEVEXCJdID0gMTZdID0gXCJVTkFVVEhFTlRJQ0FURURcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIlJFU09VUkNFX0VYSEFVU1RFRFwiXSA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIkZBSUxFRF9QUkVDT05ESVRJT05cIl0gPSA5XSA9IFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiQUJPUlRFRFwiXSA9IDEwXSA9IFwiQUJPUlRFRFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiT1VUX09GX1JBTkdFXCJdID0gMTFdID0gXCJPVVRfT0ZfUkFOR0VcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIlVOSU1QTEVNRU5URURcIl0gPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIjtcclxuICAgIFJwY0NvZGVbUnBjQ29kZVtcIklOVEVSTkFMXCJdID0gMTNdID0gXCJJTlRFUk5BTFwiO1xyXG4gICAgUnBjQ29kZVtScGNDb2RlW1wiVU5BVkFJTEFCTEVcIl0gPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCI7XHJcbiAgICBScGNDb2RlW1JwY0NvZGVbXCJEQVRBX0xPU1NcIl0gPSAxNV0gPSBcIkRBVEFfTE9TU1wiO1xyXG59KShScGNDb2RlIHx8IChScGNDb2RlID0ge30pKTtcclxuLyoqXHJcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxyXG4gKiBpbiByZXNwb25zZSB0byBhIG5vbi13cml0ZSBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cclxuICovXHJcbmZ1bmN0aW9uIGlzUGVybWFuZW50RXJyb3IoY29kZSkge1xyXG4gICAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICAgICAgY2FzZSBDb2RlLk9LOlxyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVHJlYXRlZCBzdGF0dXMgT0sgYXMgZXJyb3InKTtcclxuICAgICAgICBjYXNlIENvZGUuQ0FOQ0VMTEVEOlxyXG4gICAgICAgIGNhc2UgQ29kZS5VTktOT1dOOlxyXG4gICAgICAgIGNhc2UgQ29kZS5ERUFETElORV9FWENFRURFRDpcclxuICAgICAgICBjYXNlIENvZGUuUkVTT1VSQ0VfRVhIQVVTVEVEOlxyXG4gICAgICAgIGNhc2UgQ29kZS5JTlRFUk5BTDpcclxuICAgICAgICBjYXNlIENvZGUuVU5BVkFJTEFCTEU6XHJcbiAgICAgICAgLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXHJcbiAgICAgICAgLy8gdG8gcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMgd2hpY2ggd2lsbCBoYXBwZW4gYXV0b21hdGljYWxseS5cclxuICAgICAgICBjYXNlIENvZGUuVU5BVVRIRU5USUNBVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgY2FzZSBDb2RlLklOVkFMSURfQVJHVU1FTlQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLk5PVF9GT1VORDpcclxuICAgICAgICBjYXNlIENvZGUuQUxSRUFEWV9FWElTVFM6XHJcbiAgICAgICAgY2FzZSBDb2RlLlBFUk1JU1NJT05fREVOSUVEOlxyXG4gICAgICAgIGNhc2UgQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OOlxyXG4gICAgICAgIC8vIEFib3J0ZWQgbWlnaHQgYmUgcmV0cmllZCBpbiBzb21lIHNjZW5hcmlvcywgYnV0IHRoYXQgaXMgZGVwZW5kYW50IG9uXHJcbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxyXG4gICAgICAgIC8vIFNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxyXG4gICAgICAgIGNhc2UgQ29kZS5BQk9SVEVEOlxyXG4gICAgICAgIGNhc2UgQ29kZS5PVVRfT0ZfUkFOR0U6XHJcbiAgICAgICAgY2FzZSBDb2RlLlVOSU1QTEVNRU5URUQ6XHJcbiAgICAgICAgY2FzZSBDb2RlLkRBVEFfTE9TUzpcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gc3RhdHVzIGNvZGU6ICcgKyBjb2RlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXHJcbiAqIGluIHJlc3BvbnNlIHRvIGEgd3JpdGUgb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBXcml0ZSBvcGVyYXRpb25zIG11c3QgYmUgaGFuZGxlZCBzcGVjaWFsbHkgYmVjYXVzZSBhcyBvZiBiLzExOTQzNzc2NCwgQUJPUlRFRFxyXG4gKiBlcnJvcnMgb24gdGhlIHdyaXRlIHN0cmVhbSBzaG91bGQgYmUgcmV0cmllZCB0b28gKGV2ZW4gdGhvdWdoIEFCT1JURUQgZXJyb3JzXHJcbiAqIGFyZSBub3QgZ2VuZXJhbGx5IHJldHJ5YWJsZSkuXHJcbiAqXHJcbiAqIE5vdGUgdGhhdCBkdXJpbmcgdGhlIGluaXRpYWwgaGFuZHNoYWtlIG9uIHRoZSB3cml0ZSBzdHJlYW0gYW4gQUJPUlRFRCBlcnJvclxyXG4gKiBzaWduYWxzIHRoYXQgd2Ugc2hvdWxkIGRpc2NhcmQgb3VyIHN0cmVhbSB0b2tlbiAoaS5lLiBpdCBpcyBwZXJtYW5lbnQpLiBUaGlzXHJcbiAqIG1lYW5zIGEgaGFuZHNoYWtlIGVycm9yIHNob3VsZCBiZSBjbGFzc2lmaWVkIHdpdGggaXNQZXJtYW5lbnRFcnJvciwgYWJvdmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1Blcm1hbmVudFdyaXRlRXJyb3IoY29kZSkge1xyXG4gICAgcmV0dXJuIGlzUGVybWFuZW50RXJyb3IoY29kZSkgJiYgY29kZSAhPT0gQ29kZS5BQk9SVEVEO1xyXG59XHJcbi8qKlxyXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBhIEdSUEMgc3RhdHVzIGlkZW50aWZpZXIgbGlrZSAnTk9UX0ZPVU5EJy5cclxuICpcclxuICogQHJldHVybnMgVGhlIENvZGUgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gc3RhdHVzIHN0cmluZyBvciB1bmRlZmluZWQgaWZcclxuICogICAgIHRoZXJlIGlzIG5vIG1hdGNoLlxyXG4gKi9cclxuZnVuY3Rpb24gbWFwQ29kZUZyb21ScGNTdGF0dXMoc3RhdHVzKSB7XHJcbiAgICAvLyBsb29rdXAgYnkgc3RyaW5nXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgdmFyIGNvZGUgPSBScGNDb2RlW3N0YXR1c107XHJcbiAgICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHJldHVybiBtYXBDb2RlRnJvbVJwY0NvZGUoY29kZSk7XHJcbn1cclxuLyoqXHJcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIEdSUEMgc3RhdHVzIGNvZGUgbnVtYmVyLCBsaWtlIDAsIDEsIG9yIDE0LiBUaGVzZVxyXG4gKiBhcmUgbm90IHRoZSBzYW1lIGFzIEhUVFAgc3RhdHVzIGNvZGVzLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBHUlBDIHN0YXR1cyBjb2RlLiBGYWlscyBpZiB0aGVyZVxyXG4gKiAgICAgaXMgbm8gbWF0Y2guXHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBDb2RlRnJvbVJwY0NvZGUoY29kZSkge1xyXG4gICAgaWYgKGNvZGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vIFRoaXMgc2hvdWxkbid0IG5vcm1hbGx5IGhhcHBlbiwgYnV0IGluIGNlcnRhaW4gZXJyb3IgY2FzZXMgKGxpa2UgdHJ5aW5nXHJcbiAgICAgICAgLy8gdG8gc2VuZCBpbnZhbGlkIHByb3RvIG1lc3NhZ2VzKSB3ZSBtYXkgZ2V0IGFuIGVycm9yIHdpdGggbm8gR1JQQyBjb2RlLlxyXG4gICAgICAgIGVycm9yKCdHUlBDIGVycm9yIGhhcyBubyAuY29kZScpO1xyXG4gICAgICAgIHJldHVybiBDb2RlLlVOS05PV047XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGNvZGUpIHtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuT0s6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLk9LO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5DQU5DRUxMRUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLkNBTkNFTExFRDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuVU5LTk9XTjpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuVU5LTk9XTjtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuREVBRExJTkVfRVhDRUVERUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLkRFQURMSU5FX0VYQ0VFREVEO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5SRVNPVVJDRV9FWEhBVVNURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLlJFU09VUkNFX0VYSEFVU1RFRDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuSU5URVJOQUw6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLklOVEVSTkFMO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5VTkFWQUlMQUJMRTpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuVU5BVkFJTEFCTEU7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLlVOQVVUSEVOVElDQVRFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuVU5BVVRIRU5USUNBVEVEO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5JTlZBTElEX0FSR1VNRU5UOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5JTlZBTElEX0FSR1VNRU5UO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5OT1RfRk9VTkQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLk5PVF9GT1VORDtcclxuICAgICAgICBjYXNlIFJwY0NvZGUuQUxSRUFEWV9FWElTVFM6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLkFMUkVBRFlfRVhJU1RTO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5QRVJNSVNTSU9OX0RFTklFRDpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuUEVSTUlTU0lPTl9ERU5JRUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLkZBSUxFRF9QUkVDT05ESVRJT046XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLkZBSUxFRF9QUkVDT05ESVRJT047XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLkFCT1JURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLkFCT1JURUQ7XHJcbiAgICAgICAgY2FzZSBScGNDb2RlLk9VVF9PRl9SQU5HRTpcclxuICAgICAgICAgICAgcmV0dXJuIENvZGUuT1VUX09GX1JBTkdFO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5VTklNUExFTUVOVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gQ29kZS5VTklNUExFTUVOVEVEO1xyXG4gICAgICAgIGNhc2UgUnBjQ29kZS5EQVRBX0xPU1M6XHJcbiAgICAgICAgICAgIHJldHVybiBDb2RlLkRBVEFfTE9TUztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBzdGF0dXMgY29kZTogJyArIGNvZGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBNYXBzIGFuIFJQQyBjb2RlIGZyb20gYSBDb2RlLiBUaGlzIGlzIHRoZSByZXZlcnNlIG9wZXJhdGlvbiBmcm9tXHJcbiAqIG1hcENvZGVGcm9tUnBjQ29kZSBhbmQgc2hvdWxkIHJlYWxseSBvbmx5IGJlIHVzZWQgaW4gdGVzdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBScGNDb2RlRnJvbUNvZGUoY29kZSkge1xyXG4gICAgaWYgKGNvZGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBScGNDb2RlLk9LO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChjb2RlKSB7XHJcbiAgICAgICAgY2FzZSBDb2RlLk9LOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5PSztcclxuICAgICAgICBjYXNlIENvZGUuQ0FOQ0VMTEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5DQU5DRUxMRUQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLlVOS05PV046XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLlVOS05PV047XHJcbiAgICAgICAgY2FzZSBDb2RlLkRFQURMSU5FX0VYQ0VFREVEOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5ERUFETElORV9FWENFRURFRDtcclxuICAgICAgICBjYXNlIENvZGUuUkVTT1VSQ0VfRVhIQVVTVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5SRVNPVVJDRV9FWEhBVVNURUQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLklOVEVSTkFMOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5JTlRFUk5BTDtcclxuICAgICAgICBjYXNlIENvZGUuVU5BVkFJTEFCTEU6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLlVOQVZBSUxBQkxFO1xyXG4gICAgICAgIGNhc2UgQ29kZS5VTkFVVEhFTlRJQ0FURUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLlVOQVVUSEVOVElDQVRFRDtcclxuICAgICAgICBjYXNlIENvZGUuSU5WQUxJRF9BUkdVTUVOVDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuSU5WQUxJRF9BUkdVTUVOVDtcclxuICAgICAgICBjYXNlIENvZGUuTk9UX0ZPVU5EOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5OT1RfRk9VTkQ7XHJcbiAgICAgICAgY2FzZSBDb2RlLkFMUkVBRFlfRVhJU1RTOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5BTFJFQURZX0VYSVNUUztcclxuICAgICAgICBjYXNlIENvZGUuUEVSTUlTU0lPTl9ERU5JRUQ6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLlBFUk1JU1NJT05fREVOSUVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OO1xyXG4gICAgICAgIGNhc2UgQ29kZS5BQk9SVEVEOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5BQk9SVEVEO1xyXG4gICAgICAgIGNhc2UgQ29kZS5PVVRfT0ZfUkFOR0U6XHJcbiAgICAgICAgICAgIHJldHVybiBScGNDb2RlLk9VVF9PRl9SQU5HRTtcclxuICAgICAgICBjYXNlIENvZGUuVU5JTVBMRU1FTlRFRDpcclxuICAgICAgICAgICAgcmV0dXJuIFJwY0NvZGUuVU5JTVBMRU1FTlRFRDtcclxuICAgICAgICBjYXNlIENvZGUuREFUQV9MT1NTOlxyXG4gICAgICAgICAgICByZXR1cm4gUnBjQ29kZS5EQVRBX0xPU1M7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gc3RhdHVzIGNvZGU6ICcgKyBjb2RlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ29udmVydHMgYW4gSFRUUCByZXNwb25zZSdzIGVycm9yIHN0YXR1cyB0byB0aGUgZXF1aXZhbGVudCBlcnJvciBjb2RlLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RhdHVzIEFuIEhUVFAgZXJyb3IgcmVzcG9uc2Ugc3RhdHVzIChcIkZBSUxFRF9QUkVDT05ESVRJT05cIixcclxuICogXCJVTktOT1dOXCIsIGV0Yy4pXHJcbiAqIEByZXR1cm5zIFRoZSBlcXVpdmFsZW50IENvZGUuIE5vbi1tYXRjaGluZyByZXNwb25zZXMgYXJlIG1hcHBlZCB0b1xyXG4gKiAgICAgQ29kZS5VTktOT1dOLlxyXG4gKi9cclxuZnVuY3Rpb24gbWFwQ29kZUZyb21IdHRwUmVzcG9uc2VFcnJvclN0YXR1cyhzdGF0dXMpIHtcclxuICAgIHZhciBzZXJ2ZXJFcnJvciA9IHN0YXR1cy50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ18nLCAnLScpO1xyXG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoQ29kZSkuaW5kZXhPZihzZXJ2ZXJFcnJvcikgPj0gMFxyXG4gICAgICAgID8gc2VydmVyRXJyb3JcclxuICAgICAgICA6IENvZGUuVU5LTk9XTjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERvY3VtZW50U2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGRvY3VtZW50c1xyXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuIFdlIGFsd2F5cyBhZGQgYSBkb2N1bWVudCBrZXlcclxuICogY29tcGFyYXRvciBvbiB0b3Agb2Ygd2hhdCBpcyBwcm92aWRlZCB0byBndWFyYW50ZWUgZG9jdW1lbnQgZXF1YWxpdHkgYmFzZWQgb25cclxuICogdGhlIGtleS5cclxuICovXHJcbnZhciBEb2N1bWVudFNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKiBUaGUgZGVmYXVsdCBvcmRlcmluZyBpcyBieSBrZXkgaWYgdGhlIGNvbXBhcmF0b3IgaXMgb21pdHRlZCAqL1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRTZXQoY29tcCkge1xyXG4gICAgICAgIC8vIFdlIGFyZSBhZGRpbmcgZG9jdW1lbnQga2V5IGNvbXBhcmF0b3IgdG8gdGhlIGVuZCBhcyBpdCdzIHRoZSBvbmx5XHJcbiAgICAgICAgLy8gZ3VhcmFudGVlZCB1bmlxdWUgcHJvcGVydHkgb2YgYSBkb2N1bWVudC5cclxuICAgICAgICBpZiAoY29tcCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoZDEsIGQyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcChkMSwgZDIpIHx8IERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZDEua2V5LCBkMi5rZXkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gZnVuY3Rpb24gKGQxLCBkMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZDEua2V5LCBkMi5rZXkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmtleWVkTWFwID0gZG9jdW1lbnRNYXAoKTtcclxuICAgICAgICB0aGlzLnNvcnRlZFNldCA9IG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBlbXB0eSBjb3B5IG9mIHRoZSBleGlzdGluZyBEb2N1bWVudFNldCwgdXNpbmcgdGhlIHNhbWVcclxuICAgICAqIGNvbXBhcmF0b3IuXHJcbiAgICAgKi9cclxuICAgIERvY3VtZW50U2V0LmVtcHR5U2V0ID0gZnVuY3Rpb24gKG9sZFNldCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRTZXQob2xkU2V0LmNvbXBhcmF0b3IpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ZWRNYXAuZ2V0KGtleSkgIT0gbnVsbDtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldChrZXkpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWluS2V5KCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1heEtleSgpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5pc0VtcHR5KCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgcHJvdmlkZWQga2V5IGluIHRoZSBkb2N1bWVudCBzZXQsIG9yIC0xIGlmIHRoZVxyXG4gICAgICogZG9jdW1lbnQga2V5IGlzIG5vdCBwcmVzZW50IGluIHRoZSBzZXQ7XHJcbiAgICAgKi9cclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciBkb2MgPSB0aGlzLmtleWVkTWFwLmdldChrZXkpO1xyXG4gICAgICAgIHJldHVybiBkb2MgPyB0aGlzLnNvcnRlZFNldC5pbmRleE9mKGRvYykgOiAtMTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRTZXQucHJvdG90eXBlLCBcInNpemVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuc2l6ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKiBJdGVyYXRlcyBkb2N1bWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqL1xyXG4gICAgRG9jdW1lbnRTZXQucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICB0aGlzLnNvcnRlZFNldC5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICAgICAgICAgIGNiKGspO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUga2V5ICovXHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIC8vIEZpcnN0IHJlbW92ZSB0aGUgZWxlbWVudCBpZiB3ZSBoYXZlIGl0LlxyXG4gICAgICAgIHZhciBzZXQgPSB0aGlzLmRlbGV0ZShkb2Mua2V5KTtcclxuICAgICAgICByZXR1cm4gc2V0LmNvcHkoc2V0LmtleWVkTWFwLmluc2VydChkb2Mua2V5LCBkb2MpLCBzZXQuc29ydGVkU2V0Lmluc2VydChkb2MsIG51bGwpKTtcclxuICAgIH07XHJcbiAgICAvKiogRGVsZXRlcyBhIGRvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgKi9cclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIGRvYyA9IHRoaXMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCFkb2MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5rZXllZE1hcC5yZW1vdmUoa2V5KSwgdGhpcy5zb3J0ZWRTZXQucmVtb3ZlKGRvYykpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBEb2N1bWVudFNldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zaXplICE9PSBvdGhlci5zaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRoaXNJdCA9IHRoaXMuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCk7XHJcbiAgICAgICAgdmFyIG90aGVySXQgPSBvdGhlci5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcclxuICAgICAgICB3aGlsZSAodGhpc0l0Lmhhc05leHQoKSkge1xyXG4gICAgICAgICAgICB2YXIgdGhpc0RvYyA9IHRoaXNJdC5nZXROZXh0KCkua2V5O1xyXG4gICAgICAgICAgICB2YXIgb3RoZXJEb2MgPSBvdGhlckl0LmdldE5leHQoKS5rZXk7XHJcbiAgICAgICAgICAgIGlmICghdGhpc0RvYy5pc0VxdWFsKG90aGVyRG9jKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U2V0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZG9jU3RyaW5ncyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgIGRvY1N0cmluZ3MucHVzaChkb2MudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGRvY1N0cmluZ3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnRG9jdW1lbnRTZXQgKCknO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICdEb2N1bWVudFNldCAoXFxuICAnICsgZG9jU3RyaW5ncy5qb2luKCcgIFxcbicpICsgJ1xcbiknO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNldC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChrZXllZE1hcCwgc29ydGVkU2V0KSB7XHJcbiAgICAgICAgdmFyIG5ld1NldCA9IG5ldyBEb2N1bWVudFNldCgpO1xyXG4gICAgICAgIG5ld1NldC5jb21wYXJhdG9yID0gdGhpcy5jb21wYXJhdG9yO1xyXG4gICAgICAgIG5ld1NldC5rZXllZE1hcCA9IGtleWVkTWFwO1xyXG4gICAgICAgIG5ld1NldC5zb3J0ZWRTZXQgPSBzb3J0ZWRTZXQ7XHJcbiAgICAgICAgcmV0dXJuIG5ld1NldDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jdW1lbnRTZXQ7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgQ2hhbmdlVHlwZTtcclxuKGZ1bmN0aW9uIChDaGFuZ2VUeXBlKSB7XHJcbiAgICBDaGFuZ2VUeXBlW0NoYW5nZVR5cGVbXCJBZGRlZFwiXSA9IDBdID0gXCJBZGRlZFwiO1xyXG4gICAgQ2hhbmdlVHlwZVtDaGFuZ2VUeXBlW1wiUmVtb3ZlZFwiXSA9IDFdID0gXCJSZW1vdmVkXCI7XHJcbiAgICBDaGFuZ2VUeXBlW0NoYW5nZVR5cGVbXCJNb2RpZmllZFwiXSA9IDJdID0gXCJNb2RpZmllZFwiO1xyXG4gICAgQ2hhbmdlVHlwZVtDaGFuZ2VUeXBlW1wiTWV0YWRhdGFcIl0gPSAzXSA9IFwiTWV0YWRhdGFcIjtcclxufSkoQ2hhbmdlVHlwZSB8fCAoQ2hhbmdlVHlwZSA9IHt9KSk7XHJcbnZhciBTeW5jU3RhdGU7XHJcbihmdW5jdGlvbiAoU3luY1N0YXRlKSB7XHJcbiAgICBTeW5jU3RhdGVbU3luY1N0YXRlW1wiTG9jYWxcIl0gPSAwXSA9IFwiTG9jYWxcIjtcclxuICAgIFN5bmNTdGF0ZVtTeW5jU3RhdGVbXCJTeW5jZWRcIl0gPSAxXSA9IFwiU3luY2VkXCI7XHJcbn0pKFN5bmNTdGF0ZSB8fCAoU3luY1N0YXRlID0ge30pKTtcclxuLyoqXHJcbiAqIERvY3VtZW50Q2hhbmdlU2V0IGtlZXBzIHRyYWNrIG9mIGEgc2V0IG9mIGNoYW5nZXMgdG8gZG9jcyBpbiBhIHF1ZXJ5LCBtZXJnaW5nXHJcbiAqIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGRvYy5cclxuICovXHJcbnZhciBEb2N1bWVudENoYW5nZVNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50Q2hhbmdlU2V0KCkge1xyXG4gICAgICAgIHRoaXMuY2hhbmdlTWFwID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuICAgIH1cclxuICAgIERvY3VtZW50Q2hhbmdlU2V0LnByb3RvdHlwZS50cmFjayA9IGZ1bmN0aW9uIChjaGFuZ2UpIHtcclxuICAgICAgICB2YXIga2V5ID0gY2hhbmdlLmRvYy5rZXk7XHJcbiAgICAgICAgdmFyIG9sZENoYW5nZSA9IHRoaXMuY2hhbmdlTWFwLmdldChrZXkpO1xyXG4gICAgICAgIGlmICghb2xkQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAuaW5zZXJ0KGtleSwgY2hhbmdlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IGNoYW5nZSB3aXRoIHRoZSBleGlzdGluZyBjaGFuZ2UuXHJcbiAgICAgICAgaWYgKGNoYW5nZS50eXBlICE9PSBDaGFuZ2VUeXBlLkFkZGVkICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLk1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAuaW5zZXJ0KGtleSwgY2hhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuTWV0YWRhdGEgJiZcclxuICAgICAgICAgICAgb2xkQ2hhbmdlLnR5cGUgIT09IENoYW5nZVR5cGUuUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZU1hcCA9IHRoaXMuY2hhbmdlTWFwLmluc2VydChrZXksIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IG9sZENoYW5nZS50eXBlLFxyXG4gICAgICAgICAgICAgICAgZG9jOiBjaGFuZ2UuZG9jXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5Nb2RpZmllZCAmJlxyXG4gICAgICAgICAgICBvbGRDaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5Nb2RpZmllZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZU1hcCA9IHRoaXMuY2hhbmdlTWFwLmluc2VydChrZXksIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IENoYW5nZVR5cGUuTW9kaWZpZWQsXHJcbiAgICAgICAgICAgICAgICBkb2M6IGNoYW5nZS5kb2NcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLk1vZGlmaWVkICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLkFkZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAuaW5zZXJ0KGtleSwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5BZGRlZCxcclxuICAgICAgICAgICAgICAgIGRvYzogY2hhbmdlLmRvY1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2hhbmdlLnR5cGUgPT09IENoYW5nZVR5cGUuUmVtb3ZlZCAmJlxyXG4gICAgICAgICAgICBvbGRDaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5BZGRlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZU1hcCA9IHRoaXMuY2hhbmdlTWFwLnJlbW92ZShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5SZW1vdmVkICYmXHJcbiAgICAgICAgICAgIG9sZENoYW5nZS50eXBlID09PSBDaGFuZ2VUeXBlLk1vZGlmaWVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAuaW5zZXJ0KGtleSwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5SZW1vdmVkLFxyXG4gICAgICAgICAgICAgICAgZG9jOiBvbGRDaGFuZ2UuZG9jXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5BZGRlZCAmJlxyXG4gICAgICAgICAgICBvbGRDaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5SZW1vdmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFwID0gdGhpcy5jaGFuZ2VNYXAuaW5zZXJ0KGtleSwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogQ2hhbmdlVHlwZS5Nb2RpZmllZCxcclxuICAgICAgICAgICAgICAgIGRvYzogY2hhbmdlLmRvY1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgdGhlc2UgY2FzZXMsIHdoaWNoIGRvbid0IG1ha2Ugc2Vuc2U6XHJcbiAgICAgICAgICAgIC8vIEFkZGVkLT5BZGRlZFxyXG4gICAgICAgICAgICAvLyBSZW1vdmVkLT5SZW1vdmVkXHJcbiAgICAgICAgICAgIC8vIE1vZGlmaWVkLT5BZGRlZFxyXG4gICAgICAgICAgICAvLyBSZW1vdmVkLT5Nb2RpZmllZFxyXG4gICAgICAgICAgICAvLyBNZXRhZGF0YS0+QWRkZWRcclxuICAgICAgICAgICAgLy8gUmVtb3ZlZC0+TWV0YWRhdGFcclxuICAgICAgICAgICAgZmFpbCgndW5zdXBwb3J0ZWQgY29tYmluYXRpb24gb2YgY2hhbmdlczogJyArXHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShjaGFuZ2UpICtcclxuICAgICAgICAgICAgICAgICcgYWZ0ZXIgJyArXHJcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShvbGRDaGFuZ2UpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRDaGFuZ2VTZXQucHJvdG90eXBlLmdldENoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNoYW5nZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmNoYW5nZU1hcC5pbm9yZGVyVHJhdmVyc2FsKGZ1bmN0aW9uIChrZXksIGNoYW5nZSkge1xyXG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goY2hhbmdlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY2hhbmdlcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jdW1lbnRDaGFuZ2VTZXQ7XHJcbn0oKSk7XHJcbnZhciBWaWV3U25hcHNob3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBWaWV3U25hcHNob3QocXVlcnksIGRvY3MsIG9sZERvY3MsIGRvY0NoYW5nZXMsIG11dGF0ZWRLZXlzLCBmcm9tQ2FjaGUsIHN5bmNTdGF0ZUNoYW5nZWQsIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xyXG4gICAgICAgIHRoaXMuZG9jcyA9IGRvY3M7XHJcbiAgICAgICAgdGhpcy5vbGREb2NzID0gb2xkRG9jcztcclxuICAgICAgICB0aGlzLmRvY0NoYW5nZXMgPSBkb2NDaGFuZ2VzO1xyXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBtdXRhdGVkS2V5cztcclxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IGZyb21DYWNoZTtcclxuICAgICAgICB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPSBzeW5jU3RhdGVDaGFuZ2VkO1xyXG4gICAgICAgIHRoaXMuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMgPSBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcztcclxuICAgIH1cclxuICAgIC8qKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiBhbGwgZG9jdW1lbnRzIGluIHRoZSBzbmFwc2hvdCB3ZXJlIGFkZGVkLiAqL1xyXG4gICAgVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzID0gZnVuY3Rpb24gKHF1ZXJ5LCBkb2N1bWVudHMsIG11dGF0ZWRLZXlzLCBmcm9tQ2FjaGUpIHtcclxuICAgICAgICB2YXIgY2hhbmdlcyA9IFtdO1xyXG4gICAgICAgIGRvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHsgdHlwZTogQ2hhbmdlVHlwZS5BZGRlZCwgZG9jOiBkb2MgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3U25hcHNob3QocXVlcnksIGRvY3VtZW50cywgRG9jdW1lbnRTZXQuZW1wdHlTZXQoZG9jdW1lbnRzKSwgY2hhbmdlcywgbXV0YXRlZEtleXMsIGZyb21DYWNoZSwgXHJcbiAgICAgICAgLyogc3luY1N0YXRlQ2hhbmdlZD0gKi8gdHJ1ZSwgXHJcbiAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovIGZhbHNlKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmlld1NuYXBzaG90LnByb3RvdHlwZSwgXCJoYXNQZW5kaW5nV3JpdGVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICF0aGlzLm11dGF0ZWRLZXlzLmlzRW1wdHkoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFZpZXdTbmFwc2hvdC5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmZyb21DYWNoZSAhPT0gb3RoZXIuZnJvbUNhY2hlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCAhPT0gb3RoZXIuc3luY1N0YXRlQ2hhbmdlZCB8fFxyXG4gICAgICAgICAgICAhdGhpcy5tdXRhdGVkS2V5cy5pc0VxdWFsKG90aGVyLm11dGF0ZWRLZXlzKSB8fFxyXG4gICAgICAgICAgICAhdGhpcy5xdWVyeS5pc0VxdWFsKG90aGVyLnF1ZXJ5KSB8fFxyXG4gICAgICAgICAgICAhdGhpcy5kb2NzLmlzRXF1YWwob3RoZXIuZG9jcykgfHxcclxuICAgICAgICAgICAgIXRoaXMub2xkRG9jcy5pc0VxdWFsKG90aGVyLm9sZERvY3MpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNoYW5nZXMgPSB0aGlzLmRvY0NoYW5nZXM7XHJcbiAgICAgICAgdmFyIG90aGVyQ2hhbmdlcyA9IG90aGVyLmRvY0NoYW5nZXM7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMubGVuZ3RoICE9PSBvdGhlckNoYW5nZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFuZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGFuZ2VzW2ldLnR5cGUgIT09IG90aGVyQ2hhbmdlc1tpXS50eXBlIHx8XHJcbiAgICAgICAgICAgICAgICAhY2hhbmdlc1tpXS5kb2MuaXNFcXVhbChvdGhlckNoYW5nZXNbaV0uZG9jKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWaWV3U25hcHNob3Q7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gZXZlbnQgZnJvbSB0aGUgUmVtb3RlU3RvcmUuIEl0IGlzIHNwbGl0IGludG8gdGFyZ2V0Q2hhbmdlcyAoY2hhbmdlcyB0byB0aGVcclxuICogc3RhdGUgb3IgdGhlIHNldCBvZiBkb2N1bWVudHMgaW4gb3VyIHdhdGNoZWQgdGFyZ2V0cykgYW5kIGRvY3VtZW50VXBkYXRlc1xyXG4gKiAoY2hhbmdlcyB0byB0aGUgYWN0dWFsIGRvY3VtZW50cykuXHJcbiAqL1xyXG52YXIgUmVtb3RlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZW1vdGVFdmVudChcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNuYXBzaG90IHZlcnNpb24gdGhpcyBldmVudCBicmluZ3MgdXMgdXAgdG8sIG9yIE1JTiBpZiBub3Qgc2V0LlxyXG4gICAgICovXHJcbiAgICBzbmFwc2hvdFZlcnNpb24sIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIG1hcCBmcm9tIHRhcmdldCB0byBjaGFuZ2VzIHRvIHRoZSB0YXJnZXQuIFNlZSBUYXJnZXRDaGFuZ2UuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldENoYW5nZXMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHNldCBvZiB0YXJnZXRzIHRoYXQgaXMga25vd24gdG8gYmUgaW5jb25zaXN0ZW50LiBMaXN0ZW5zIGZvciB0aGVzZVxyXG4gICAgICogdGFyZ2V0cyBzaG91bGQgYmUgcmUtZXN0YWJsaXNoZWQgd2l0aG91dCByZXN1bWUgdG9rZW5zLlxyXG4gICAgICovXHJcbiAgICB0YXJnZXRNaXNtYXRjaGVzLCBcclxuICAgIC8qKlxyXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnRzIGhhdmUgY2hhbmdlZCBvciBiZWVuIGRlbGV0ZWQsIGFsb25nIHdpdGggdGhlXHJcbiAgICAgKiBkb2MncyBuZXcgdmFsdWVzIChpZiBub3QgZGVsZXRlZCkuXHJcbiAgICAgKi9cclxuICAgIGRvY3VtZW50VXBkYXRlcywgXHJcbiAgICAvKipcclxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50IHVwZGF0ZXMgYXJlIGR1ZSBvbmx5IHRvIGxpbWJvIHJlc29sdXRpb24gdGFyZ2V0cy5cclxuICAgICAqL1xyXG4gICAgcmVzb2x2ZWRMaW1ib0RvY3VtZW50cykge1xyXG4gICAgICAgIHRoaXMuc25hcHNob3RWZXJzaW9uID0gc25hcHNob3RWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q2hhbmdlcyA9IHRhcmdldENoYW5nZXM7XHJcbiAgICAgICAgdGhpcy50YXJnZXRNaXNtYXRjaGVzID0gdGFyZ2V0TWlzbWF0Y2hlcztcclxuICAgICAgICB0aGlzLmRvY3VtZW50VXBkYXRlcyA9IGRvY3VtZW50VXBkYXRlcztcclxuICAgICAgICB0aGlzLnJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSByZXNvbHZlZExpbWJvRG9jdW1lbnRzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBIQUNLOiBWaWV3cyByZXF1aXJlIFJlbW90ZUV2ZW50cyBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgdmlldyBpc1xyXG4gICAgICogQ1VSUkVOVCwgYnV0IHNlY29uZGFyeSB0YWJzIGRvbid0IHJlY2VpdmUgcmVtb3RlIGV2ZW50cy4gU28gdGhpcyBtZXRob2QgaXNcclxuICAgICAqIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBhcHBseSBhXHJcbiAgICAgKiBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3LCBmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudCB0YWIuXHJcbiAgICAgKi9cclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFJlbW90ZUV2ZW50LmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlID0gZnVuY3Rpb24gKHRhcmdldElkLCBjdXJyZW50KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHZhciB0YXJnZXRDaGFuZ2VzID0gKF9hID0ge30sXHJcbiAgICAgICAgICAgIF9hW3RhcmdldElkXSA9IFRhcmdldENoYW5nZS5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UodGFyZ2V0SWQsIGN1cnJlbnQpLFxyXG4gICAgICAgICAgICBfYSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZW1vdGVFdmVudChTbmFwc2hvdFZlcnNpb24uTUlOLCB0YXJnZXRDaGFuZ2VzLCB0YXJnZXRJZFNldCgpLCBtYXliZURvY3VtZW50TWFwKCksIGRvY3VtZW50S2V5U2V0KCkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZW1vdGVFdmVudDtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgVGFyZ2V0Q2hhbmdlIHNwZWNpZmllcyB0aGUgc2V0IG9mIGNoYW5nZXMgZm9yIGEgc3BlY2lmaWMgdGFyZ2V0IGFzIHBhcnQgb2ZcclxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxyXG4gKiByZW1vdmVkLCBhcyB3ZWxsIGFzIHRoZSB0YXJnZXQncyByZXN1bWUgdG9rZW4gYW5kIHdoZXRoZXIgdGhlIHRhcmdldCBpc1xyXG4gKiBtYXJrZWQgQ1VSUkVOVC5cclxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXHJcbiAqIGRvY3VtZW50cyBtYXkgYmUgcGFydCBvZiBtdWx0aXBsZSB0YXJnZXRzLlxyXG4gKi9cclxudmFyIFRhcmdldENoYW5nZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRhcmdldENoYW5nZShcclxuICAgIC8qKlxyXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSBxdWVyeSB0byBiZSByZXN1bWVkXHJcbiAgICAgKiBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXQgbWF0Y2hlcyB0aGVcclxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcclxuICAgICAqIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXHJcbiAgICAgKi9cclxuICAgIHJlc3VtZVRva2VuLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIFwiY3VycmVudFwiIChzeW5jZWQpIHN0YXR1cyBvZiB0aGlzIHRhcmdldC4gTm90ZSB0aGF0IFwiY3VycmVudFwiXHJcbiAgICAgKiBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2wgdGhhdCBpbXBsaWVzIHRoYXQgYSB0YXJnZXQgaXNcclxuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXHJcbiAgICAgKi9cclxuICAgIGN1cnJlbnQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgbmV3bHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYXMgcGFydCBvZlxyXG4gICAgICogdGhpcyByZW1vdGUgZXZlbnQuXHJcbiAgICAgKi9cclxuICAgIGFkZGVkRG9jdW1lbnRzLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIGFscmVhZHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYnV0IHJlY2VpdmVkXHJcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxyXG4gICAgICovXHJcbiAgICBtb2RpZmllZERvY3VtZW50cywgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXHJcbiAgICAgKiByZW1vdGUgZXZlbnQuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZWREb2N1bWVudHMpIHtcclxuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gcmVzdW1lVG9rZW47XHJcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gY3VycmVudDtcclxuICAgICAgICB0aGlzLmFkZGVkRG9jdW1lbnRzID0gYWRkZWREb2N1bWVudHM7XHJcbiAgICAgICAgdGhpcy5tb2RpZmllZERvY3VtZW50cyA9IG1vZGlmaWVkRG9jdW1lbnRzO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IHJlbW92ZWREb2N1bWVudHM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXHJcbiAgICAgKiBhcHBseSBhIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcgKGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50XHJcbiAgICAgKiB0YWIpIG9yIGZvciBuZXcgcXVlcmllcyAodG8gcmFpc2Ugc25hcHNob3RzIHdpdGggY29ycmVjdCBDVVJSRU5UIHN0YXR1cykuXHJcbiAgICAgKi9cclxuICAgIFRhcmdldENoYW5nZS5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGN1cnJlbnQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRhcmdldENoYW5nZShlbXB0eUJ5dGVTdHJpbmcoKSwgY3VycmVudCwgZG9jdW1lbnRLZXlTZXQoKSwgZG9jdW1lbnRLZXlTZXQoKSwgZG9jdW1lbnRLZXlTZXQoKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRhcmdldENoYW5nZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgY2hhbmdlZCBkb2N1bWVudCBhbmQgYSBsaXN0IG9mIHRhcmdldCBpZHMgdG8gd2hpY2ggdGhpcyBjaGFuZ2VcclxuICogYXBwbGllcy5cclxuICpcclxuICogSWYgZG9jdW1lbnQgaGFzIGJlZW4gZGVsZXRlZCBOb0RvY3VtZW50IHdpbGwgYmUgcHJvdmlkZWQuXHJcbiAqL1xyXG52YXIgRG9jdW1lbnRXYXRjaENoYW5nZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50V2F0Y2hDaGFuZ2UoXHJcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xyXG4gICAgdXBkYXRlZFRhcmdldElkcywgXHJcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBpcyByZW1vdmVkIGZyb20gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXHJcbiAgICByZW1vdmVkVGFyZ2V0SWRzLCBcclxuICAgIC8qKiBUaGUga2V5IG9mIHRoZSBkb2N1bWVudCBmb3IgdGhpcyBjaGFuZ2UuICovXHJcbiAgICBrZXksIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbmV3IGRvY3VtZW50IG9yIE5vRG9jdW1lbnQgaWYgaXQgd2FzIGRlbGV0ZWQuIElzIG51bGwgaWYgdGhlXHJcbiAgICAgKiBkb2N1bWVudCB3ZW50IG91dCBvZiB2aWV3IHdpdGhvdXQgdGhlIHNlcnZlciBzZW5kaW5nIGEgbmV3IGRvY3VtZW50LlxyXG4gICAgICovXHJcbiAgICBuZXdEb2MpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZWRUYXJnZXRJZHMgPSB1cGRhdGVkVGFyZ2V0SWRzO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlZFRhcmdldElkcyA9IHJlbW92ZWRUYXJnZXRJZHM7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy5uZXdEb2MgPSBuZXdEb2M7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRG9jdW1lbnRXYXRjaENoYW5nZTtcclxufSgpKTtcclxudmFyIEV4aXN0ZW5jZUZpbHRlckNoYW5nZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV4aXN0ZW5jZUZpbHRlckNoYW5nZSh0YXJnZXRJZCwgZXhpc3RlbmNlRmlsdGVyKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMuZXhpc3RlbmNlRmlsdGVyID0gZXhpc3RlbmNlRmlsdGVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEV4aXN0ZW5jZUZpbHRlckNoYW5nZTtcclxufSgpKTtcclxudmFyIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGU7XHJcbihmdW5jdGlvbiAoV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSkge1xyXG4gICAgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtXYXRjaFRhcmdldENoYW5nZVN0YXRlW1wiTm9DaGFuZ2VcIl0gPSAwXSA9IFwiTm9DaGFuZ2VcIjtcclxuICAgIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtcIkFkZGVkXCJdID0gMV0gPSBcIkFkZGVkXCI7XHJcbiAgICBXYXRjaFRhcmdldENoYW5nZVN0YXRlW1dhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbXCJSZW1vdmVkXCJdID0gMl0gPSBcIlJlbW92ZWRcIjtcclxuICAgIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGVbV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtcIkN1cnJlbnRcIl0gPSAzXSA9IFwiQ3VycmVudFwiO1xyXG4gICAgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZVtXYXRjaFRhcmdldENoYW5nZVN0YXRlW1wiUmVzZXRcIl0gPSA0XSA9IFwiUmVzZXRcIjtcclxufSkoV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSB8fCAoV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZSA9IHt9KSk7XHJcbnZhciBXYXRjaFRhcmdldENoYW5nZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdhdGNoVGFyZ2V0Q2hhbmdlKFxyXG4gICAgLyoqIFdoYXQga2luZCBvZiBjaGFuZ2Ugb2NjdXJyZWQgdG8gdGhlIHdhdGNoIHRhcmdldC4gKi9cclxuICAgIHN0YXRlLCBcclxuICAgIC8qKiBUaGUgdGFyZ2V0IElEcyB0aGF0IHdlcmUgYWRkZWQvcmVtb3ZlZC9zZXQuICovXHJcbiAgICB0YXJnZXRJZHMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxyXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcclxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cclxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxyXG4gICAgICovXHJcbiAgICByZXN1bWVUb2tlbiwgXHJcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovXHJcbiAgICBjYXVzZSkge1xyXG4gICAgICAgIGlmIChyZXN1bWVUb2tlbiA9PT0gdm9pZCAwKSB7IHJlc3VtZVRva2VuID0gZW1wdHlCeXRlU3RyaW5nKCk7IH1cclxuICAgICAgICBpZiAoY2F1c2UgPT09IHZvaWQgMCkgeyBjYXVzZSA9IG51bGw7IH1cclxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZHMgPSB0YXJnZXRJZHM7XHJcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHJlc3VtZVRva2VuO1xyXG4gICAgICAgIHRoaXMuY2F1c2UgPSBjYXVzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBXYXRjaFRhcmdldENoYW5nZTtcclxufSgpKTtcclxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovXHJcbnZhciBUYXJnZXRTdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRhcmdldFN0YXRlKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgKGFkZHMgb3IgcmVtb3ZlcykgdGhhdCB3ZSBhcmUgd2FpdGluZyBvbi5cclxuICAgICAgICAgKiBXZSBvbmx5IGNvbnNpZGVyIHRhcmdldHMgYWN0aXZlIHRoYXQgaGF2ZSBubyBwZW5kaW5nIHJlc3BvbnNlcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBlbmRpbmdSZXNwb25zZXMgPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoZXNlIGNoYW5nZXMgYXJlIGNvbnRpbnVvdXNseSB1cGRhdGVkIGFzIHdlIHJlY2VpdmUgZG9jdW1lbnQgdXBkYXRlcyBhbmRcclxuICAgICAgICAgKiBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcyBhZ2FpbnN0IHRoZSBsYXN0IGlzc3VlZCBzbmFwc2hvdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmRvY3VtZW50Q2hhbmdlcyA9IHNuYXBzaG90Q2hhbmdlc01hcCgpO1xyXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXHJcbiAgICAgICAgdGhpcy5fcmVzdW1lVG9rZW4gPSBlbXB0eUJ5dGVTdHJpbmcoKTtcclxuICAgICAgICB0aGlzLl9jdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXHJcbiAgICAgICAgICogaW5pdGlhbGl6ZSB0byB0cnVlIHNvIHRoYXQgbmV3bHktYWRkZWQgdGFyZ2V0cyBhcmUgaW5jbHVkZWQgaW4gdGhlIG5leHRcclxuICAgICAgICAgKiBSZW1vdGVFdmVudC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGFyZ2V0U3RhdGUucHJvdG90eXBlLCBcImN1cnJlbnRcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIGJlZW4gbWFya2VkICdjdXJyZW50Jy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICdDdXJyZW50JyBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2w6IEl0IGltcGxpZXMgdGhhdCB0aGVcclxuICAgICAgICAgKiBXYXRjaCBiYWNrZW5kIGhhcyBzZW50IHVzIGFsbCBjaGFuZ2VzIHVwIHRvIHRoZSBwb2ludCBhdCB3aGljaCB0aGUgdGFyZ2V0XHJcbiAgICAgICAgICogd2FzIGFkZGVkIGFuZCB0aGF0IHRoZSB0YXJnZXQgaXMgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaFxyXG4gICAgICAgICAqIHN0cmVhbS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGFyZ2V0U3RhdGUucHJvdG90eXBlLCBcInJlc3VtZVRva2VuXCIsIHtcclxuICAgICAgICAvKiogVGhlIGxhc3QgcmVzdW1lIHRva2VuIHNlbnQgdG8gdXMgZm9yIHRoaXMgdGFyZ2V0LiAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdW1lVG9rZW47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGFyZ2V0U3RhdGUucHJvdG90eXBlLCBcImlzUGVuZGluZ1wiLCB7XHJcbiAgICAgICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBlbmRpbmdSZXNwb25zZXMgIT09IDA7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGFyZ2V0U3RhdGUucHJvdG90eXBlLCBcImhhc1BlbmRpbmdDaGFuZ2VzXCIsIHtcclxuICAgICAgICAvKiogV2hldGhlciB3ZSBoYXZlIG1vZGlmaWVkIGFueSBzdGF0ZSB0aGF0IHNob3VsZCB0cmlnZ2VyIGEgc25hcHNob3QuICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XHJcbiAgICAgKiB2YWx1ZS4gRW1wdHkgcmVzdW1lVG9rZW5zIGFyZSBkaXNjYXJkZWQuXHJcbiAgICAgKi9cclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS51cGRhdGVSZXN1bWVUb2tlbiA9IGZ1bmN0aW9uIChyZXN1bWVUb2tlbikge1xyXG4gICAgICAgIGlmIChyZXN1bWVUb2tlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhc1BlbmRpbmdDaGFuZ2VzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fcmVzdW1lVG9rZW4gPSByZXN1bWVUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgdGFyZ2V0IGNoYW5nZSBmcm9tIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxyXG4gICAgICpcclxuICAgICAqIFRvIHJlc2V0IHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFmdGVyIHJhaXNpbmcgdGhpcyBzbmFwc2hvdCwgY2FsbFxyXG4gICAgICogYGNsZWFyUGVuZGluZ0NoYW5nZXMoKWAuXHJcbiAgICAgKi9cclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS50b1RhcmdldENoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYWRkZWREb2N1bWVudHMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHZhciBtb2RpZmllZERvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdmFyIHJlbW92ZWREb2N1bWVudHMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGtleSwgY2hhbmdlVHlwZSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNoYW5nZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5BZGRlZDpcclxuICAgICAgICAgICAgICAgICAgICBhZGRlZERvY3VtZW50cyA9IGFkZGVkRG9jdW1lbnRzLmFkZChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLk1vZGlmaWVkOlxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGlmaWVkRG9jdW1lbnRzID0gbW9kaWZpZWREb2N1bWVudHMuYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuUmVtb3ZlZDpcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkRG9jdW1lbnRzID0gcmVtb3ZlZERvY3VtZW50cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZmFpbCgnRW5jb3VudGVyZWQgaW52YWxpZCBjaGFuZ2UgdHlwZTogJyArIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXRDaGFuZ2UodGhpcy5fcmVzdW1lVG9rZW4sIHRoaXMuX2N1cnJlbnQsIGFkZGVkRG9jdW1lbnRzLCBtb2RpZmllZERvY3VtZW50cywgcmVtb3ZlZERvY3VtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhlIGRvY3VtZW50IGNoYW5nZXMgYW5kIHNldHMgYGhhc1BlbmRpbmdDaGFuZ2VzYCB0byBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLmNsZWFyUGVuZGluZ0NoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faGFzUGVuZGluZ0NoYW5nZXMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRvY3VtZW50Q2hhbmdlcyA9IHNuYXBzaG90Q2hhbmdlc01hcCgpO1xyXG4gICAgfTtcclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5hZGREb2N1bWVudENoYW5nZSA9IGZ1bmN0aW9uIChrZXksIGNoYW5nZVR5cGUpIHtcclxuICAgICAgICB0aGlzLl9oYXNQZW5kaW5nQ2hhbmdlcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudENoYW5nZXMgPSB0aGlzLmRvY3VtZW50Q2hhbmdlcy5pbnNlcnQoa2V5LCBjaGFuZ2VUeXBlKTtcclxuICAgIH07XHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUucmVtb3ZlRG9jdW1lbnRDaGFuZ2UgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5faGFzUGVuZGluZ0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRDaGFuZ2VzID0gdGhpcy5kb2N1bWVudENoYW5nZXMucmVtb3ZlKGtleSk7XHJcbiAgICB9O1xyXG4gICAgVGFyZ2V0U3RhdGUucHJvdG90eXBlLnJlY29yZFBlbmRpbmdUYXJnZXRSZXF1ZXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Jlc3BvbnNlcyArPSAxO1xyXG4gICAgfTtcclxuICAgIFRhcmdldFN0YXRlLnByb3RvdHlwZS5yZWNvcmRUYXJnZXRSZXNwb25zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBlbmRpbmdSZXNwb25zZXMgLT0gMTtcclxuICAgIH07XHJcbiAgICBUYXJnZXRTdGF0ZS5wcm90b3R5cGUubWFya0N1cnJlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faGFzUGVuZGluZ0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnQgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUYXJnZXRTdGF0ZTtcclxufSgpKTtcclxudmFyIExPR19UQUckNyA9ICdXYXRjaENoYW5nZUFnZ3JlZ2F0b3InO1xyXG4vKipcclxuICogQSBoZWxwZXIgY2xhc3MgdG8gYWNjdW11bGF0ZSB3YXRjaCBjaGFuZ2VzIGludG8gYSBSZW1vdGVFdmVudC5cclxuICovXHJcbnZhciBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IobWV0YWRhdGFQcm92aWRlcikge1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGFQcm92aWRlciA9IG1ldGFkYXRhUHJvdmlkZXI7XHJcbiAgICAgICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhbGwgdHJhY2tlZCB0YXJnZXRzLiAqL1xyXG4gICAgICAgIHRoaXMudGFyZ2V0U3RhdGVzID0ge307XHJcbiAgICAgICAgLyoqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudHMgdG8gdXBkYXRlIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC4gKi9cclxuICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMgPSBtYXliZURvY3VtZW50TWFwKCk7XHJcbiAgICAgICAgLyoqIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXlzIHRvIHRoZWlyIHNldCBvZiB0YXJnZXQgSURzLiAqL1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZyA9IGRvY3VtZW50VGFyZ2V0TWFwKCk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBsaXN0IG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXHJcbiAgICAgICAgICoga25vd24gdG8gYmUgaW5jb25zaXN0ZW50IGFuZCB0aGVpciBsaXN0ZW5zIG5lZWRzIHRvIGJlIHJlLWVzdGFibGlzaGVkIGJ5XHJcbiAgICAgICAgICogUmVtb3RlU3RvcmUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVGFyZ2V0UmVzZXRzID0gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBEb2N1bWVudFdhdGNoQ2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmhhbmRsZURvY3VtZW50Q2hhbmdlID0gZnVuY3Rpb24gKGRvY0NoYW5nZSkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBkb2NDaGFuZ2UudXBkYXRlZFRhcmdldElkczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldElkID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBpZiAoZG9jQ2hhbmdlLm5ld0RvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZERvY3VtZW50VG9UYXJnZXQodGFyZ2V0SWQsIGRvY0NoYW5nZS5uZXdEb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRvY0NoYW5nZS5uZXdEb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZURvY3VtZW50RnJvbVRhcmdldCh0YXJnZXRJZCwgZG9jQ2hhbmdlLmtleSwgZG9jQ2hhbmdlLm5ld0RvYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IGRvY0NoYW5nZS5yZW1vdmVkVGFyZ2V0SWRzOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSBfY1tfYl07XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0KHRhcmdldElkLCBkb2NDaGFuZ2Uua2V5LCBkb2NDaGFuZ2UubmV3RG9jKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIFByb2Nlc3NlcyBhbmQgYWRkcyB0aGUgV2F0Y2hUYXJnZXRDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmhhbmRsZVRhcmdldENoYW5nZSA9IGZ1bmN0aW9uICh0YXJnZXRDaGFuZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldCh0YXJnZXRDaGFuZ2UsIGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSBfdGhpcy5lbnN1cmVUYXJnZXRTdGF0ZSh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGFyZ2V0Q2hhbmdlLnN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQWN0aXZlVGFyZ2V0KHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS51cGRhdGVSZXN1bWVUb2tlbih0YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZDpcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLnJlY29yZFRhcmdldFJlc3BvbnNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRTdGF0ZS5pc1BlbmRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGZyZXNobHkgYWRkZWQgdGFyZ2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGhhZCBwcmV2aW91c2x5LiBUaGlzIGNhbiBoYXBwZW4gZS5nLiB3aGVuIHJlbW92ZSBhbmQgYWRkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2sgYSB0YXJnZXQgZm9yIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUuY2xlYXJQZW5kaW5nQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS51cGRhdGVSZXN1bWVUb2tlbih0YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHJlbW92ZWQgdGFyZ2V0cyB0byB3ZSBjYW4gcG9zdC1maWx0ZXIgYW5kXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSB0YXJnZXQgY2hhbmdlcy5cclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFN0YXRlLnJlY29yZFRhcmdldFJlc3BvbnNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRTdGF0ZS5pc1BlbmRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCF0YXJnZXRDaGFuZ2UuY2F1c2UsICdXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgZG9lcyBub3QgaGFuZGxlIGVycm9yZWQgdGFyZ2V0cycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkN1cnJlbnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQWN0aXZlVGFyZ2V0KHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS5tYXJrQ3VycmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS51cGRhdGVSZXN1bWVUb2tlbih0YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNBY3RpdmVUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0YXJnZXQgYW5kIHN5bnRoZXNpemVzIHJlbW92ZXMgZm9yIGFsbCBleGlzdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaCB0aGUgdGFyZ2V0IGJlZm9yZSBpdCBzZW5kcyB0aGUgbmV4dCBnbG9iYWwgc25hcHNob3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0VGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3RhdGUudXBkYXRlUmVzdW1lVG9rZW4odGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGZhaWwoJ1Vua25vd24gdGFyZ2V0IHdhdGNoIGNoYW5nZSBzdGF0ZTogJyArIHRhcmdldENoYW5nZS5zdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYWxsIHRhcmdldElkcyB0aGF0IHRoZSB3YXRjaCBjaGFuZ2UgYXBwbGllcyB0bzogZWl0aGVyIHRoZVxyXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XHJcbiAgICAgKiBhY3RpdmUgdGFyZ2V0cy5cclxuICAgICAqL1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5mb3JFYWNoVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldENoYW5nZSwgZm4pIHtcclxuICAgICAgICBpZiAodGFyZ2V0Q2hhbmdlLnRhcmdldElkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRhcmdldENoYW5nZS50YXJnZXRJZHMuZm9yRWFjaChmbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3JFYWNoTnVtYmVyKHRoaXMudGFyZ2V0U3RhdGVzLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyBleGlzdGVuY2UgZmlsdGVycyBhbmQgc3ludGhlc2l6ZXMgZGVsZXRlcyBmb3IgZmlsdGVyIG1pc21hdGNoZXMuXHJcbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xyXG4gICAgICogYHBlbmRpbmdUYXJnZXRSZXNldHNgLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmhhbmRsZUV4aXN0ZW5jZUZpbHRlciA9IGZ1bmN0aW9uICh3YXRjaENoYW5nZSkge1xyXG4gICAgICAgIHZhciB0YXJnZXRJZCA9IHdhdGNoQ2hhbmdlLnRhcmdldElkO1xyXG4gICAgICAgIHZhciBleHBlY3RlZENvdW50ID0gd2F0Y2hDaGFuZ2UuZXhpc3RlbmNlRmlsdGVyLmNvdW50O1xyXG4gICAgICAgIHZhciB0YXJnZXREYXRhID0gdGhpcy50YXJnZXREYXRhRm9yQWN0aXZlVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICBpZiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGFyZ2V0RGF0YS50YXJnZXQ7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuaXNEb2N1bWVudFF1ZXJ5KCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChleHBlY3RlZENvdW50ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGV4aXN0ZW5jZSBmaWx0ZXIgdG9sZCB1cyB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QuIFdlIGRlZHVjZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhpcyBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCBhbmQgYXBwbHkgYSBkZWxldGVkIGRvY3VtZW50IHRvXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3VyIHVwZGF0ZXMuIFdpdGhvdXQgYXBwbHlpbmcgdGhpcyBkZWxldGVkIGRvY3VtZW50IHRoZXJlIG1pZ2h0IGJlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5vdGhlciBxdWVyeSB0aGF0IHdpbGwgcmFpc2UgdGhpcyBkb2N1bWVudCBhcyBwYXJ0IG9mIGEgc25hcHNob3RcclxuICAgICAgICAgICAgICAgICAgICAvLyB1bnRpbCBpdCBpcyByZXNvbHZlZCwgZXNzZW50aWFsbHkgZXhwb3NpbmcgaW5jb25zaXN0ZW5jeSBiZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcXVlcmllcy5cclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gbmV3IERvY3VtZW50S2V5KHRhcmdldC5wYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZURvY3VtZW50RnJvbVRhcmdldCh0YXJnZXRJZCwga2V5LCBuZXcgTm9Eb2N1bWVudChrZXksIFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydChleHBlY3RlZENvdW50ID09PSAxLCAnU2luZ2xlIGRvY3VtZW50IGV4aXN0ZW5jZSBmaWx0ZXIgd2l0aCBjb3VudDogJyArIGV4cGVjdGVkQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRTaXplID0gdGhpcy5nZXRDdXJyZW50RG9jdW1lbnRDb3VudEZvclRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNpemUgIT09IGV4cGVjdGVkQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBFeGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoOiBXZSByZXNldCB0aGUgbWFwcGluZyBhbmQgcmFpc2UgYSBuZXdcclxuICAgICAgICAgICAgICAgICAgICAvLyBzbmFwc2hvdCB3aXRoIGBpc0Zyb21DYWNoZTp0cnVlYC5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdUYXJnZXRSZXNldHMgPSB0aGlzLnBlbmRpbmdUYXJnZXRSZXNldHMuYWRkKHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoZSBjdXJyZW50bHkgYWNjdW11bGF0ZWQgc3RhdGUgaW50byBhIHJlbW90ZSBldmVudCBhdCB0aGVcclxuICAgICAqIHByb3ZpZGVkIHNuYXBzaG90IHZlcnNpb24uIFJlc2V0cyB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBiZWZvcmUgcmV0dXJuaW5nLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmNyZWF0ZVJlbW90ZUV2ZW50ID0gZnVuY3Rpb24gKHNuYXBzaG90VmVyc2lvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHRhcmdldENoYW5nZXMgPSB7fTtcclxuICAgICAgICBmb3JFYWNoTnVtYmVyKHRoaXMudGFyZ2V0U3RhdGVzLCBmdW5jdGlvbiAodGFyZ2V0SWQsIHRhcmdldFN0YXRlKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXREYXRhID0gX3RoaXMudGFyZ2V0RGF0YUZvckFjdGl2ZVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0U3RhdGUuY3VycmVudCAmJiB0YXJnZXREYXRhLnRhcmdldC5pc0RvY3VtZW50UXVlcnkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvY3VtZW50IHF1ZXJpZXMgZm9yIGRvY3VtZW50IHRoYXQgZG9uJ3QgZXhpc3QgY2FuIHByb2R1Y2UgYW4gZW1wdHlcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgc2V0LiBUbyB1cGRhdGUgb3VyIGxvY2FsIGNhY2hlLCB3ZSBzeW50aGVzaXplIGEgZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgaWYgd2UgaGF2ZSBub3QgcHJldmlvdXNseSByZWNlaXZlZCB0aGUgZG9jdW1lbnQuIFRoaXNcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgbGltYm8gc3RhdGUgb2YgdGhlIGRvY3VtZW50LCByZW1vdmluZyBpdCBmcm9tXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGltYm9Eb2N1bWVudFJlZnMuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElkZWFsbHkgd2Ugd291bGQgaGF2ZSBhbiBleHBsaWNpdCBsb29rdXAgdGFyZ2V0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCByZXN1bHRpbmcgaW4gYW4gZXhwbGljaXQgZGVsZXRlIG1lc3NhZ2UgYW5kIHdlIGNvdWxkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoaXMgc3BlY2lhbCBsb2dpYy5cclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gbmV3IERvY3VtZW50S2V5KHRhcmdldERhdGEudGFyZ2V0LnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzLmdldChrZXkpID09PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFfdGhpcy50YXJnZXRDb250YWluc0RvY3VtZW50KHRhcmdldElkLCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZURvY3VtZW50RnJvbVRhcmdldCh0YXJnZXRJZCwga2V5LCBuZXcgTm9Eb2N1bWVudChrZXksIHNuYXBzaG90VmVyc2lvbikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTdGF0ZS5oYXNQZW5kaW5nQ2hhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldENoYW5nZXNbdGFyZ2V0SWRdID0gdGFyZ2V0U3RhdGUudG9UYXJnZXRDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRTdGF0ZS5jbGVhclBlbmRpbmdDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgcmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcclxuICAgICAgICAvLyBzcGVjaWFsLWNhc2VzIGRvY3VtZW50cyB0aGF0IGRvIG5vdCBhcHBlYXIgaW4gdGhlIHRhcmdldCBjYWNoZS5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFRPRE8oZ3NvbHRpcyk6IEV4cGFuZCBvbiB0aGlzIGNvbW1lbnQgb25jZSBHQyBpcyBhdmFpbGFibGUgaW4gdGhlIEpTXHJcbiAgICAgICAgLy8gY2xpZW50LlxyXG4gICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIHRhcmdldHMpIHtcclxuICAgICAgICAgICAgdmFyIGlzT25seUxpbWJvVGFyZ2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0cy5mb3JFYWNoV2hpbGUoZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0RGF0YSA9IF90aGlzLnRhcmdldERhdGFGb3JBY3RpdmVUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldERhdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhLnB1cnBvc2UgIT09IFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNPbmx5TGltYm9UYXJnZXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChpc09ubHlMaW1ib1RhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IHJlc29sdmVkTGltYm9Eb2N1bWVudHMuYWRkKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgcmVtb3RlRXZlbnQgPSBuZXcgUmVtb3RlRXZlbnQoc25hcHNob3RWZXJzaW9uLCB0YXJnZXRDaGFuZ2VzLCB0aGlzLnBlbmRpbmdUYXJnZXRSZXNldHMsIHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcywgcmVzb2x2ZWRMaW1ib0RvY3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRVcGRhdGVzID0gbWF5YmVEb2N1bWVudE1hcCgpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VGFyZ2V0TWFwcGluZyA9IGRvY3VtZW50VGFyZ2V0TWFwKCk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVGFyZ2V0UmVzZXRzID0gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICByZXR1cm4gcmVtb3RlRXZlbnQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxyXG4gICAgICogaXRzIGRvY3VtZW50IGtleSB0byB0aGUgZ2l2ZW4gdGFyZ2V0J3MgbWFwcGluZy5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuYWRkRG9jdW1lbnRUb1RhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCwgZG9jdW1lbnQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmVUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNoYW5nZVR5cGUgPSB0aGlzLnRhcmdldENvbnRhaW5zRG9jdW1lbnQodGFyZ2V0SWQsIGRvY3VtZW50LmtleSlcclxuICAgICAgICAgICAgPyBDaGFuZ2VUeXBlLk1vZGlmaWVkXHJcbiAgICAgICAgICAgIDogQ2hhbmdlVHlwZS5BZGRlZDtcclxuICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSB0aGlzLmVuc3VyZVRhcmdldFN0YXRlKHRhcmdldElkKTtcclxuICAgICAgICB0YXJnZXRTdGF0ZS5hZGREb2N1bWVudENoYW5nZShkb2N1bWVudC5rZXksIGNoYW5nZVR5cGUpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcyA9IHRoaXMucGVuZGluZ0RvY3VtZW50VXBkYXRlcy5pbnNlcnQoZG9jdW1lbnQua2V5LCBkb2N1bWVudCk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nID0gdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nLmluc2VydChkb2N1bWVudC5rZXksIHRoaXMuZW5zdXJlRG9jdW1lbnRUYXJnZXRNYXBwaW5nKGRvY3VtZW50LmtleSkuYWRkKHRhcmdldElkKSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBwcm92aWRlZCBkb2N1bWVudCBmcm9tIHRoZSB0YXJnZXQgbWFwcGluZy4gSWYgdGhlXHJcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcclxuICAgICAqIGtub3duIChlLmcuIHdlIGtub3cgdGhhdCB0aGUgZG9jdW1lbnQgd2FzIGRlbGV0ZWQgb3Igd2UgcmVjZWl2ZWQgdGhlIGNoYW5nZVxyXG4gICAgICogdGhhdCBjYXVzZWQgdGhlIGZpbHRlciBtaXNtYXRjaCksIHRoZSBuZXcgZG9jdW1lbnQgY2FuIGJlIHByb3ZpZGVkXHJcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUucmVtb3ZlRG9jdW1lbnRGcm9tVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkLCBrZXksIHVwZGF0ZWREb2N1bWVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZVRhcmdldCh0YXJnZXRJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSB0aGlzLmVuc3VyZVRhcmdldFN0YXRlKHRhcmdldElkKTtcclxuICAgICAgICBpZiAodGhpcy50YXJnZXRDb250YWluc0RvY3VtZW50KHRhcmdldElkLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldFN0YXRlLmFkZERvY3VtZW50Q2hhbmdlKGtleSwgQ2hhbmdlVHlwZS5SZW1vdmVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBtYXkgaGF2ZSBlbnRlcmVkIGFuZCBsZWZ0IHRoZSB0YXJnZXQgYmVmb3JlIHdlIHJhaXNlZCBhXHJcbiAgICAgICAgICAgIC8vIHNuYXBzaG90LCBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGNoYW5nZS5cclxuICAgICAgICAgICAgdGFyZ2V0U3RhdGUucmVtb3ZlRG9jdW1lbnRDaGFuZ2Uoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nID0gdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nLmluc2VydChrZXksIHRoaXMuZW5zdXJlRG9jdW1lbnRUYXJnZXRNYXBwaW5nKGtleSkuZGVsZXRlKHRhcmdldElkKSk7XHJcbiAgICAgICAgaWYgKHVwZGF0ZWREb2N1bWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMgPSB0aGlzLnBlbmRpbmdEb2N1bWVudFVwZGF0ZXMuaW5zZXJ0KGtleSwgdXBkYXRlZERvY3VtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5yZW1vdmVUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXHJcbiAgICAgKiB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0byBiZSBwYXJ0IG9mIHRoZVxyXG4gICAgICogdGFyZ2V0IGFzIHdlbGwgYXMgYW55IGFjY3VtdWxhdGVkIGNoYW5nZXMuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuZ2V0Q3VycmVudERvY3VtZW50Q291bnRGb3JUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSB0aGlzLmVuc3VyZVRhcmdldFN0YXRlKHRhcmdldElkKTtcclxuICAgICAgICB2YXIgdGFyZ2V0Q2hhbmdlID0gdGFyZ2V0U3RhdGUudG9UYXJnZXRDaGFuZ2UoKTtcclxuICAgICAgICByZXR1cm4gKHRoaXMubWV0YWRhdGFQcm92aWRlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHRhcmdldElkKS5zaXplICtcclxuICAgICAgICAgICAgdGFyZ2V0Q2hhbmdlLmFkZGVkRG9jdW1lbnRzLnNpemUgLVxyXG4gICAgICAgICAgICB0YXJnZXRDaGFuZ2UucmVtb3ZlZERvY3VtZW50cy5zaXplKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcclxuICAgICAqIHNlcnZlciB0byBiZSAnaW4tc3luYycgd2l0aCB0aGUgY2xpZW50J3MgYWN0aXZlIHRhcmdldHMuXHJcbiAgICAgKi9cclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUucmVjb3JkUGVuZGluZ1RhcmdldFJlcXVlc3QgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAvLyBGb3IgZWFjaCByZXF1ZXN0IHdlIGdldCB3ZSBuZWVkIHRvIHJlY29yZCB3ZSBuZWVkIGEgcmVzcG9uc2UgZm9yIGl0LlxyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IHRoaXMuZW5zdXJlVGFyZ2V0U3RhdGUodGFyZ2V0SWQpO1xyXG4gICAgICAgIHRhcmdldFN0YXRlLnJlY29yZFBlbmRpbmdUYXJnZXRSZXF1ZXN0KCk7XHJcbiAgICB9O1xyXG4gICAgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnByb3RvdHlwZS5lbnN1cmVUYXJnZXRTdGF0ZSA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIGlmICghdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0U3RhdGVzW3RhcmdldElkXSA9IG5ldyBUYXJnZXRTdGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRTdGF0ZXNbdGFyZ2V0SWRdO1xyXG4gICAgfTtcclxuICAgIFdhdGNoQ2hhbmdlQWdncmVnYXRvci5wcm90b3R5cGUuZW5zdXJlRG9jdW1lbnRUYXJnZXRNYXBwaW5nID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHZhciB0YXJnZXRNYXBwaW5nID0gdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nLmdldChrZXkpO1xyXG4gICAgICAgIGlmICghdGFyZ2V0TWFwcGluZykge1xyXG4gICAgICAgICAgICB0YXJnZXRNYXBwaW5nID0gbmV3IFNvcnRlZFNldChwcmltaXRpdmVDb21wYXJhdG9yKTtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nID0gdGhpcy5wZW5kaW5nRG9jdW1lbnRUYXJnZXRNYXBwaW5nLmluc2VydChrZXksIHRhcmdldE1hcHBpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGFyZ2V0TWFwcGluZztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIHVzZXIgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldCAoYnkgY2FsbGluZ1xyXG4gICAgICogYGdldFRhcmdldERhdGFGb3JUYXJnZXQoKWApIGFuZCB0aGF0IHdlIGFyZSBub3Qgd2FpdGluZyBmb3IgcGVuZGluZyBBRERzXHJcbiAgICAgKiBmcm9tIHdhdGNoLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLmlzQWN0aXZlVGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldEFjdGl2ZSA9IHRoaXMudGFyZ2V0RGF0YUZvckFjdGl2ZVRhcmdldCh0YXJnZXRJZCkgIT09IG51bGw7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRBY3RpdmUpIHtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ3LCAnRGV0ZWN0ZWQgaW5hY3RpdmUgdGFyZ2V0JywgdGFyZ2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGFyZ2V0QWN0aXZlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBmb3IgYW4gYWN0aXZlIHRhcmdldCAoaS5lLiBhIHRhcmdldCB0aGF0IHRoZSB1c2VyXHJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLnRhcmdldERhdGFGb3JBY3RpdmVUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0U3RhdGUgPSB0aGlzLnRhcmdldFN0YXRlc1t0YXJnZXRJZF07XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldFN0YXRlICYmIHRhcmdldFN0YXRlLmlzUGVuZGluZ1xyXG4gICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgOiB0aGlzLm1ldGFkYXRhUHJvdmlkZXIuZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhlIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0IHRvIGl0cyBpbml0aWFsIHN0YXRlIChlLmcuIHNldHNcclxuICAgICAqICdjdXJyZW50JyB0byBmYWxzZSwgY2xlYXJzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHJlbW92ZXMgaXRzIHRhcmdldCBtYXBwaW5nXHJcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLnJlc2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoIXRoaXMudGFyZ2V0U3RhdGVzW3RhcmdldElkXS5pc1BlbmRpbmcsICdTaG91bGQgb25seSByZXNldCBhY3RpdmUgdGFyZ2V0cycpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0U3RhdGVzW3RhcmdldElkXSA9IG5ldyBUYXJnZXRTdGF0ZSgpO1xyXG4gICAgICAgIC8vIFRyaWdnZXIgcmVtb3ZhbCBmb3IgYW55IGRvY3VtZW50cyBjdXJyZW50bHkgbWFwcGVkIHRvIHRoaXMgdGFyZ2V0LlxyXG4gICAgICAgIC8vIFRoZXNlIHJlbW92YWxzIHdpbGwgYmUgcGFydCBvZiB0aGUgaW5pdGlhbCBzbmFwc2hvdCBpZiBXYXRjaCBkb2VzIG5vdFxyXG4gICAgICAgIC8vIHJlc2VuZCB0aGVzZSBkb2N1bWVudHMuXHJcbiAgICAgICAgdmFyIGV4aXN0aW5nS2V5cyA9IHRoaXMubWV0YWRhdGFQcm92aWRlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICBleGlzdGluZ0tleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnJlbW92ZURvY3VtZW50RnJvbVRhcmdldCh0YXJnZXRJZCwga2V5LCAvKnVwZGF0ZWREb2N1bWVudD0qLyBudWxsKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdGhlIGRvY3VtZW50IHRvIGJlIHBhcnQgb2YgdGhlXHJcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxyXG4gICAgICovXHJcbiAgICBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IucHJvdG90eXBlLnRhcmdldENvbnRhaW5zRG9jdW1lbnQgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGtleSkge1xyXG4gICAgICAgIHZhciBleGlzdGluZ0tleXMgPSB0aGlzLm1ldGFkYXRhUHJvdmlkZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nS2V5cy5oYXMoa2V5KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBkb2N1bWVudFRhcmdldE1hcCgpIHtcclxuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG59XHJcbmZ1bmN0aW9uIHNuYXBzaG90Q2hhbmdlc01hcCgpIHtcclxuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQ4ID0gJ1JlbW90ZVN0b3JlJztcclxuLy8gVE9ETyhiLzM1ODUzNDAyKTogTmVnb3RpYXRlIHRoaXMgd2l0aCB0aGUgc3RyZWFtLlxyXG52YXIgTUFYX1BFTkRJTkdfV1JJVEVTID0gMTA7XHJcbi8qKlxyXG4gKiBSZW1vdGVTdG9yZSAtIEFuIGludGVyZmFjZSB0byByZW1vdGVseSBzdG9yZWQgZGF0YSwgYmFzaWNhbGx5IHByb3ZpZGluZyBhXHJcbiAqIHdyYXBwZXIgYXJvdW5kIHRoZSBEYXRhc3RvcmUgdGhhdCBpcyBtb3JlIHJlbGlhYmxlIGZvciB0aGUgcmVzdCBvZiB0aGVcclxuICogc3lzdGVtLlxyXG4gKlxyXG4gKiBSZW1vdGVTdG9yZSBpcyByZXNwb25zaWJsZSBmb3IgbWFpbnRhaW5pbmcgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlci5cclxuICogLSBtYWludGFpbmluZyBhIGxpc3Qgb2YgYWN0aXZlIGxpc3RlbnMuXHJcbiAqIC0gcmVjb25uZWN0aW5nIHdoZW4gdGhlIGNvbm5lY3Rpb24gaXMgZHJvcHBlZC5cclxuICogLSByZXN1bWluZyBhbGwgdGhlIGFjdGl2ZSBsaXN0ZW5zIG9uIHJlY29ubmVjdC5cclxuICpcclxuICogUmVtb3RlU3RvcmUgaGFuZGxlcyBhbGwgaW5jb21pbmcgZXZlbnRzIGZyb20gdGhlIERhdGFzdG9yZS5cclxuICogLSBsaXN0ZW5pbmcgdG8gdGhlIHdhdGNoIHN0cmVhbSBhbmQgcmVwYWNrYWdpbmcgdGhlIGV2ZW50cyBhcyBSZW1vdGVFdmVudHNcclxuICogLSBub3RpZnlpbmcgU3luY0VuZ2luZSBvZiBhbnkgY2hhbmdlcyB0byB0aGUgYWN0aXZlIGxpc3RlbnMuXHJcbiAqXHJcbiAqIFJlbW90ZVN0b3JlIHRha2VzIHdyaXRlcyBmcm9tIG90aGVyIGNvbXBvbmVudHMgYW5kIGhhbmRsZXMgdGhlbSByZWxpYWJseS5cclxuICogLSBwdWxsaW5nIHBlbmRpbmcgbXV0YXRpb25zIGZyb20gTG9jYWxTdG9yZSBhbmQgc2VuZGluZyB0aGVtIHRvIERhdGFzdG9yZS5cclxuICogLSByZXRyeWluZyBtdXRhdGlvbnMgdGhhdCBmYWlsZWQgYmVjYXVzZSBvZiBuZXR3b3JrIHByb2JsZW1zLlxyXG4gKiAtIGFja2luZyBtdXRhdGlvbnMgdG8gdGhlIFN5bmNFbmdpbmUgb25jZSB0aGV5IGFyZSBhY2NlcHRlZCBvciByZWplY3RlZC5cclxuICovXHJcbnZhciBSZW1vdGVTdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlbW90ZVN0b3JlKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXHJcbiAgICAgKi9cclxuICAgIGxvY2FsU3RvcmUsIFxyXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cclxuICAgIGRhdGFzdG9yZSwgYXN5bmNRdWV1ZSwgb25saW5lU3RhdGVIYW5kbGVyLCBjb25uZWN0aXZpdHlNb25pdG9yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBsb2NhbFN0b3JlO1xyXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gZGF0YXN0b3JlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbGlzdCBvZiB1cCB0byBNQVhfUEVORElOR19XUklURVMgd3JpdGVzIHRoYXQgd2UgaGF2ZSBmZXRjaGVkIGZyb20gdGhlXHJcbiAgICAgICAgICogTG9jYWxTdG9yZSB2aWEgZmlsbFdyaXRlUGlwZWxpbmUoKSBhbmQgaGF2ZSBvciB3aWxsIHNlbmQgdG8gdGhlIHdyaXRlXHJcbiAgICAgICAgICogc3RyZWFtLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV2hlbmV2ZXIgd3JpdGVQaXBlbGluZS5sZW5ndGggPiAwIHRoZSBSZW1vdGVTdG9yZSB3aWxsIGF0dGVtcHQgdG8gc3RhcnQgb3JcclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxyXG4gICAgICAgICAqIHBpcGVsaW5lIHdpbGwgYmUgc2VudCBpbiBvcmRlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcclxuICAgICAgICAgKiBhbmQgdGh1cyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcmUtc2VudCBpZiB0aGUgc3RyZWFtIGlzIGludGVycnVwdGVkIC9cclxuICAgICAgICAgKiByZXN0YXJ0ZWQgYmVmb3JlIHRoZXkncmUgYWNrbm93bGVkZ2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogV3JpdGUgcmVzcG9uc2VzIGZyb20gdGhlIGJhY2tlbmQgYXJlIGxpbmtlZCB0byB0aGVpciBvcmlnaW5hdGluZyByZXF1ZXN0XHJcbiAgICAgICAgICogcHVyZWx5IGJhc2VkIG9uIG9yZGVyLCBhbmQgc28gd2UgY2FuIGp1c3Qgc2hpZnQoKSB3cml0ZXMgZnJvbSB0aGUgZnJvbnQgb2ZcclxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLndyaXRlUGlwZWxpbmUgPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXHJcbiAgICAgICAgICogdXNlciBoYXMgZXhwbGljaXRseSBjYWxsZWQgYSAnbGlzdGVuJyBmb3IgdGhpcyB0YXJnZXQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcclxuICAgICAgICAgKiBzZXJ2ZXIuIE9uIHJlLWVzdGFibGlzaGluZyB0aGUgbGlzdGVuIHN0cmVhbSwgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgc2VudFxyXG4gICAgICAgICAqIHRvIHRoZSBzZXJ2ZXIuIFRoZSB0YXJnZXRzIHJlbW92ZWQgd2l0aCB1bmxpc3RlbnMgYXJlIHJlbW92ZWQgZWFnZXJseVxyXG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5saXN0ZW5UYXJnZXRzID0ge307XHJcbiAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCB0byB0cnVlIGJ5IGVuYWJsZU5ldHdvcmsoKSBhbmQgZmFsc2UgYnkgZGlzYWJsZU5ldHdvcmsoKSBhbmQgaW5kaWNhdGVzXHJcbiAgICAgICAgICogdGhlIHVzZXItcHJlZmVycmVkIG5ldHdvcmsgc3RhdGUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNQcmltYXJ5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aXZpdHlNb25pdG9yID0gY29ubmVjdGl2aXR5TW9uaXRvcjtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpdml0eU1vbml0b3IuYWRkQ2FsbGJhY2soZnVuY3Rpb24gKHN0YXR1cykge1xyXG4gICAgICAgICAgICBhc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhblVzZU5ldHdvcmsoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDgsICdSZXN0YXJ0aW5nIHN0cmVhbXMgZm9yIG5ldHdvcmsgcmVhY2hhYmlsaXR5IGNoYW5nZS4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVzdGFydE5ldHdvcmsoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlciA9IG5ldyBPbmxpbmVTdGF0ZVRyYWNrZXIoYXN5bmNRdWV1ZSwgb25saW5lU3RhdGVIYW5kbGVyKTtcclxuICAgICAgICAvLyBDcmVhdGUgc3RyZWFtcyAoYnV0IG5vdGUgdGhleSdyZSBub3Qgc3RhcnRlZCB5ZXQpLlxyXG4gICAgICAgIHRoaXMud2F0Y2hTdHJlYW0gPSB0aGlzLmRhdGFzdG9yZS5uZXdQZXJzaXN0ZW50V2F0Y2hTdHJlYW0oe1xyXG4gICAgICAgICAgICBvbk9wZW46IHRoaXMub25XYXRjaFN0cmVhbU9wZW4uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25DbG9zZTogdGhpcy5vbldhdGNoU3RyZWFtQ2xvc2UuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgb25XYXRjaENoYW5nZTogdGhpcy5vbldhdGNoU3RyZWFtQ2hhbmdlLmJpbmQodGhpcylcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLndyaXRlU3RyZWFtID0gdGhpcy5kYXRhc3RvcmUubmV3UGVyc2lzdGVudFdyaXRlU3RyZWFtKHtcclxuICAgICAgICAgICAgb25PcGVuOiB0aGlzLm9uV3JpdGVTdHJlYW1PcGVuLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIG9uQ2xvc2U6IHRoaXMub25Xcml0ZVN0cmVhbUNsb3NlLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIG9uSGFuZHNoYWtlQ29tcGxldGU6IHRoaXMub25Xcml0ZUhhbmRzaGFrZUNvbXBsZXRlLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIG9uTXV0YXRpb25SZXN1bHQ6IHRoaXMub25NdXRhdGlvblJlc3VsdC5iaW5kKHRoaXMpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyB1cCB0aGUgcmVtb3RlIHN0b3JlLCBjcmVhdGluZyBzdHJlYW1zLCByZXN0b3Jpbmcgc3RhdGUgZnJvbVxyXG4gICAgICogTG9jYWxTdG9yZSwgZXRjLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlTmV0d29yaygpO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZS1lbmFibGVzIHRoZSBuZXR3b3JrLiBJZGVtcG90ZW50LiAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmVuYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2FuVXNlTmV0d29yaygpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzLndyaXRlU3RyZWFtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZ2V0TGFzdFN0cmVhbVRva2VuKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFzdFN0cmVhbVRva2VuID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG91bGRTdGFydFdhdGNoU3RyZWFtKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRXYXRjaFN0cmVhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBzdGFydCB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5maWxsV3JpdGVQaXBlbGluZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBzdGFydCB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGVtcG9yYXJpbHkgZGlzYWJsZXMgdGhlIG5ldHdvcmsuIFRoZSBuZXR3b3JrIGNhbiBiZSByZS1lbmFibGVkIHVzaW5nXHJcbiAgICAgKiBlbmFibGVOZXR3b3JrKCkuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5kaXNhYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kaXNhYmxlTmV0d29ya0ludGVybmFsKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUgc28gZ2V0KClzIHJldHVybiBmcm9tIGNhY2hlLCBldGMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5PZmZsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMud3JpdGVTdHJlYW0uc3RvcCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy53YXRjaFN0cmVhbS5zdG9wKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOCwgXCJTdG9wcGluZyB3cml0ZSBzdHJlYW0gd2l0aCBcIiArIHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggKyBcIiBwZW5kaW5nIHdyaXRlc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVQaXBlbGluZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYW5VcFdhdGNoU3RyZWFtU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc2h1dGRvd24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDgsICdSZW1vdGVTdG9yZSBzaHV0dGluZyBkb3duLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aXZpdHlNb25pdG9yLnNodXRkb3duKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlcmluZyBzcHVyaW91cyBsaXN0ZW5lciBldmVudHMgd2l0aCBjYWNoZWQgZGF0YSwgZXRjLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgbmV3IGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldC4gVXNlcyByZXN1bWUgdG9rZW4gaWYgcHJvdmlkZWQuIEl0XHJcbiAgICAgKiBpcyBhIG5vLW9wIGlmIHRoZSB0YXJnZXQgb2YgZ2l2ZW4gYFRhcmdldERhdGFgIGlzIGFscmVhZHkgYmVpbmcgbGlzdGVuZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIGlmIChjb250YWlucyh0aGlzLmxpc3RlblRhcmdldHMsIHRhcmdldERhdGEudGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTWFyayB0aGlzIGFzIHNvbWV0aGluZyB0aGUgY2xpZW50IGlzIGN1cnJlbnRseSBsaXN0ZW5pbmcgZm9yLlxyXG4gICAgICAgIHRoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXREYXRhLnRhcmdldElkXSA9IHRhcmdldERhdGE7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSgpKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBsaXN0ZW4gd2lsbCBiZSBzZW50IGluIG9uV2F0Y2hTdHJlYW1PcGVuXHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRXYXRjaFN0cmVhbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLndhdGNoU3RyZWFtLmlzT3BlbigpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZFdhdGNoUmVxdWVzdCh0YXJnZXREYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBsaXN0ZW4gZnJvbSBzZXJ2ZXIuIEl0IGlzIGEgbm8tb3AgaWYgdGhlIGdpdmVuIHRhcmdldCBpZCBpc1xyXG4gICAgICogbm90IGJlaW5nIGxpc3RlbmVkIHRvLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUudW5saXN0ZW4gPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICBhc3NlcnQoY29udGFpbnModGhpcy5saXN0ZW5UYXJnZXRzLCB0YXJnZXRJZCksIFwidW5saXN0ZW4gY2FsbGVkIG9uIHRhcmdldCBubyBjdXJyZW50bHkgd2F0Y2hlZDogXCIgKyB0YXJnZXRJZCk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXRJZF07XHJcbiAgICAgICAgaWYgKHRoaXMud2F0Y2hTdHJlYW0uaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kVW53YXRjaFJlcXVlc3QodGFyZ2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNFbXB0eSh0aGlzLmxpc3RlblRhcmdldHMpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndhdGNoU3RyZWFtLmlzT3BlbigpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndhdGNoU3RyZWFtLm1hcmtJZGxlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jYW5Vc2VOZXR3b3JrKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJldmVydCB0byBPbmxpbmVTdGF0ZS5Vbmtub3duIGlmIHRoZSB3YXRjaCBzdHJlYW0gaXMgbm90IG9wZW4gYW5kIHdlXHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIG5vIGxpc3RlbmVycywgc2luY2Ugd2l0aG91dCBhbnkgbGlzdGVucyB0byBzZW5kIHdlIGNhbm5vdFxyXG4gICAgICAgICAgICAgICAgLy8gY29uZmlybSBpZiB0aGUgc3RyZWFtIGlzIGhlYWx0aHkgYW5kIHVwZ3JhZGUgdG8gT25saW5lU3RhdGUuT25saW5lLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKiB7QGxpbmsgVGFyZ2V0TWV0YWRhdGFQcm92aWRlci5nZXRUYXJnZXREYXRhRm9yVGFyZ2V0fSAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmdldFRhcmdldERhdGFGb3JUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXSB8fCBudWxsO1xyXG4gICAgfTtcclxuICAgIC8qKiB7QGxpbmsgVGFyZ2V0TWV0YWRhdGFQcm92aWRlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0fSAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXHJcbiAgICAgKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSBhY2sgdG8gcHJvY2VzcyBhbnkgbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnNlbmRXYXRjaFJlcXVlc3QgPSBmdW5jdGlvbiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnJlY29yZFBlbmRpbmdUYXJnZXRSZXF1ZXN0KHRhcmdldERhdGEudGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMud2F0Y2hTdHJlYW0ud2F0Y2godGFyZ2V0RGF0YSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxyXG4gICAgICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgcmVtb3ZhbCBvbiB0aGUgc2VydmVyIGJlZm9yZSB3ZSBwcm9jZXNzIGFueVxyXG4gICAgICogbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnNlbmRVbndhdGNoUmVxdWVzdCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLnJlY29yZFBlbmRpbmdUYXJnZXRSZXF1ZXN0KHRhcmdldElkKTtcclxuICAgICAgICB0aGlzLndhdGNoU3RyZWFtLnVud2F0Y2godGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zdGFydFdhdGNoU3RyZWFtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oKSwgJ3N0YXJ0V2F0Y2hTdHJlYW0oKSBjYWxsZWQgd2hlbiBzaG91bGRTdGFydFdhdGNoU3RyZWFtKCkgaXMgZmFsc2UuJyk7XHJcbiAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IgPSBuZXcgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yKHRoaXMpO1xyXG4gICAgICAgIHRoaXMud2F0Y2hTdHJlYW0uc3RhcnQoKTtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5oYW5kbGVXYXRjaFN0cmVhbVN0YXJ0KCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHdhdGNoIHN0cmVhbSBzaG91bGQgYmUgc3RhcnRlZCBiZWNhdXNlIGl0J3MgbmVjZXNzYXJ5XHJcbiAgICAgKiBhbmQgaGFzIG5vdCB5ZXQgYmVlbiBzdGFydGVkLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuc2hvdWxkU3RhcnRXYXRjaFN0cmVhbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuY2FuVXNlTmV0d29yaygpICYmXHJcbiAgICAgICAgICAgICF0aGlzLndhdGNoU3RyZWFtLmlzU3RhcnRlZCgpICYmXHJcbiAgICAgICAgICAgICFpc0VtcHR5KHRoaXMubGlzdGVuVGFyZ2V0cykpO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5jYW5Vc2VOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzUHJpbWFyeSAmJiB0aGlzLm5ldHdvcmtFbmFibGVkO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvciA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm9uV2F0Y2hTdHJlYW1PcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgZm9yRWFjaE51bWJlcih0aGlzLmxpc3RlblRhcmdldHMsIGZ1bmN0aW9uICh0YXJnZXRJZCwgdGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNlbmRXYXRjaFJlcXVlc3QodGFyZ2V0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm9uV2F0Y2hTdHJlYW1DbG9zZSA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBHcmFjZWZ1bCBzdG9wIChkdWUgdG8gc3RvcCgpIG9yIGlkbGUgdGltZW91dCkuIE1ha2Ugc3VyZSB0aGF0J3NcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZXNpcmFibGUuXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLnNob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oKSwgJ1dhdGNoIHN0cmVhbSB3YXMgc3RvcHBlZCBncmFjZWZ1bGx5IHdoaWxlIHN0aWxsIG5lZWRlZC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYW5VcFdhdGNoU3RyZWFtU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIC8vIElmIHdlIHN0aWxsIG5lZWQgdGhlIHdhdGNoIHN0cmVhbSwgcmV0cnkgdGhlIGNvbm5lY3Rpb24uXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG91bGRTdGFydFdhdGNoU3RyZWFtKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5oYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRXYXRjaFN0cmVhbSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm8gbmVlZCB0byByZXN0YXJ0IHdhdGNoIHN0cmVhbSBiZWNhdXNlIHRoZXJlIGFyZSBubyBhY3RpdmUgdGFyZ2V0cy5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgb25saW5lIHN0YXRlIGlzIHNldCB0byB1bmtub3duIGJlY2F1c2UgdGhlcmUgaXMgbm8gYWN0aXZlIGF0dGVtcHRcclxuICAgICAgICAgICAgICAgICAgICAvLyBhdCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZVRyYWNrZXIuc2V0KE9ubGluZVN0YXRlLlVua25vd24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25XYXRjaFN0cmVhbUNoYW5nZSA9IGZ1bmN0aW9uICh3YXRjaENoYW5nZSwgc25hcHNob3RWZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBtZXNzYWdlIGZyb20gdGhlIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuT25saW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgV2F0Y2hUYXJnZXRDaGFuZ2UgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoQ2hhbmdlLnN0YXRlID09PSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoQ2hhbmdlLmNhdXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igb24gYSB0YXJnZXQsIGRvbid0IHdhaXQgZm9yIGEgY29uc2lzdGVudCBzbmFwc2hvdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gcmFpc2UgZXZlbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVUYXJnZXRFcnJvcih3YXRjaENoYW5nZSldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3YXRjaENoYW5nZSBpbnN0YW5jZW9mIERvY3VtZW50V2F0Y2hDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLmhhbmRsZURvY3VtZW50Q2hhbmdlKHdhdGNoQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh3YXRjaENoYW5nZSBpbnN0YW5jZW9mIEV4aXN0ZW5jZUZpbHRlckNoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXRjaENoYW5nZUFnZ3JlZ2F0b3IuaGFuZGxlRXhpc3RlbmNlRmlsdGVyKHdhdGNoQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh3YXRjaENoYW5nZSBpbnN0YW5jZW9mIFdhdGNoVGFyZ2V0Q2hhbmdlLCAnRXhwZWN0ZWQgd2F0Y2hDaGFuZ2UgdG8gYmUgYW4gaW5zdGFuY2Ugb2YgV2F0Y2hUYXJnZXRDaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLmhhbmRsZVRhcmdldENoYW5nZSh3YXRjaENoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhc25hcHNob3RWZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8obGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbikgPj0gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHJlY2VpdmVkIGEgdGFyZ2V0IGNoYW5nZSB3aXRoIGEgZ2xvYmFsIHNuYXBzaG90IGlmIHRoZSBzbmFwc2hvdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2ZXJzaW9uIGlzIG5vdCBlcXVhbCB0byBTbmFwc2hvdFZlcnNpb24uTUlOLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJhaXNlV2F0Y2hTbmFwc2hvdChzbmFwc2hvdFZlcnNpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgcmVjZWl2ZWQgYSB0YXJnZXQgY2hhbmdlIHdpdGggYSBnbG9iYWwgc25hcHNob3QgaWYgdGhlIHNuYXBzaG90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZlcnNpb24gaXMgbm90IGVxdWFsIHRvIFNuYXBzaG90VmVyc2lvbi5NSU4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRha2VzIGEgYmF0Y2ggb2YgY2hhbmdlcyBmcm9tIHRoZSBEYXRhc3RvcmUsIHJlcGFja2FnZXMgdGhlbSBhcyBhXHJcbiAgICAgKiBSZW1vdGVFdmVudCwgYW5kIHBhc3NlcyB0aGF0IG9uIHRvIHRoZSBsaXN0ZW5lciwgd2hpY2ggaXMgdHlwaWNhbGx5IHRoZVxyXG4gICAgICogU3luY0VuZ2luZS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLnJhaXNlV2F0Y2hTbmFwc2hvdCA9IGZ1bmN0aW9uIChzbmFwc2hvdFZlcnNpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghc25hcHNob3RWZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLk1JTiksIFwiQ2FuJ3QgcmFpc2UgZXZlbnQgZm9yIHVua25vd24gU25hcHNob3RWZXJzaW9uXCIpO1xyXG4gICAgICAgIHZhciByZW1vdGVFdmVudCA9IHRoaXMud2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yLmNyZWF0ZVJlbW90ZUV2ZW50KHNuYXBzaG90VmVyc2lvbik7XHJcbiAgICAgICAgLy8gVXBkYXRlIGluLW1lbW9yeSByZXN1bWUgdG9rZW5zLiBMb2NhbFN0b3JlIHdpbGwgdXBkYXRlIHRoZVxyXG4gICAgICAgIC8vIHBlcnNpc3RlbnQgdmlldyBvZiB0aGVzZSB3aGVuIGFwcGx5aW5nIHRoZSBjb21wbGV0ZWQgUmVtb3RlRXZlbnQuXHJcbiAgICAgICAgZm9yRWFjaE51bWJlcihyZW1vdGVFdmVudC50YXJnZXRDaGFuZ2VzLCBmdW5jdGlvbiAodGFyZ2V0SWQsIGNoYW5nZSkge1xyXG4gICAgICAgICAgICBpZiAoY2hhbmdlLnJlc3VtZVRva2VuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXREYXRhID0gX3RoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXRJZF07XHJcbiAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0SWRdID0gdGFyZ2V0RGF0YS53aXRoUmVzdW1lVG9rZW4oY2hhbmdlLnJlc3VtZVRva2VuLCBzbmFwc2hvdFZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gUmUtZXN0YWJsaXNoIGxpc3RlbnMgZm9yIHRoZSB0YXJnZXRzIHRoYXQgaGF2ZSBiZWVuIGludmFsaWRhdGVkIGJ5XHJcbiAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxyXG4gICAgICAgIHJlbW90ZUV2ZW50LnRhcmdldE1pc21hdGNoZXMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldERhdGEgPSBfdGhpcy5saXN0ZW5UYXJnZXRzW3RhcmdldElkXTtcclxuICAgICAgICAgICAgaWYgKCF0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHJlc3VtZSB0b2tlbiBmb3IgdGhlIHRhcmdldCwgc2luY2Ugd2UncmUgaW4gYSBrbm93biBtaXNtYXRjaFxyXG4gICAgICAgICAgICAvLyBzdGF0ZS5cclxuICAgICAgICAgICAgX3RoaXMubGlzdGVuVGFyZ2V0c1t0YXJnZXRJZF0gPSB0YXJnZXREYXRhLndpdGhSZXN1bWVUb2tlbihlbXB0eUJ5dGVTdHJpbmcoKSwgdGFyZ2V0RGF0YS5zbmFwc2hvdFZlcnNpb24pO1xyXG4gICAgICAgICAgICAvLyBDYXVzZSBhIGhhcmQgcmVzZXQgYnkgdW53YXRjaGluZyBhbmQgcmV3YXRjaGluZyBpbW1lZGlhdGVseSwgYnV0XHJcbiAgICAgICAgICAgIC8vIGRlbGliZXJhdGVseSBkb24ndCBzZW5kIGEgcmVzdW1lIHRva2VuIHNvIHRoYXQgd2UgZ2V0IGEgZnVsbCB1cGRhdGUuXHJcbiAgICAgICAgICAgIF90aGlzLnNlbmRVbndhdGNoUmVxdWVzdCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIC8vIE1hcmsgdGhlIHRhcmdldCB3ZSBzZW5kIGFzIGJlaW5nIG9uIGJlaGFsZiBvZiBhbiBleGlzdGVuY2UgZmlsdGVyXHJcbiAgICAgICAgICAgIC8vIG1pc21hdGNoLCBidXQgZG9uJ3QgYWN0dWFsbHkgcmV0YWluIHRoYXQgaW4gbGlzdGVuVGFyZ2V0cy4gVGhpcyBlbnN1cmVzXHJcbiAgICAgICAgICAgIC8vIHRoYXQgd2UgZmxhZyB0aGUgZmlyc3QgcmUtbGlzdGVuIHRoaXMgd2F5IHdpdGhvdXQgaW1wYWN0aW5nIGZ1dHVyZVxyXG4gICAgICAgICAgICAvLyBsaXN0ZW5zIG9mIHRoaXMgdGFyZ2V0ICh0aGF0IG1pZ2h0IGhhcHBlbiBlLmcuIG9uIHJlY29ubmVjdCkuXHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0VGFyZ2V0RGF0YSA9IG5ldyBUYXJnZXREYXRhKHRhcmdldERhdGEudGFyZ2V0LCB0YXJnZXRJZCwgVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCwgdGFyZ2V0RGF0YS5zZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgIF90aGlzLnNlbmRXYXRjaFJlcXVlc3QocmVxdWVzdFRhcmdldERhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEZpbmFsbHkgcmFpc2UgcmVtb3RlIGV2ZW50XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5hcHBseVJlbW90ZUV2ZW50KHJlbW90ZUV2ZW50KTtcclxuICAgIH07XHJcbiAgICAvKiogSGFuZGxlcyBhbiBlcnJvciBvbiBhIHRhcmdldCAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmhhbmRsZVRhcmdldEVycm9yID0gZnVuY3Rpb24gKHdhdGNoQ2hhbmdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoISF3YXRjaENoYW5nZS5jYXVzZSwgJ0hhbmRsaW5nIHRhcmdldCBlcnJvciB3aXRob3V0IGEgY2F1c2UnKTtcclxuICAgICAgICB2YXIgZXJyb3IgPSB3YXRjaENoYW5nZS5jYXVzZTtcclxuICAgICAgICB2YXIgcHJvbWlzZUNoYWluID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgd2F0Y2hDaGFuZ2UudGFyZ2V0SWRzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgIHByb21pc2VDaGFpbiA9IHByb21pc2VDaGFpbi50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5zKHRoaXMubGlzdGVuVGFyZ2V0cywgdGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlblRhcmdldHNbdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhdGNoQ2hhbmdlQWdncmVnYXRvci5yZW1vdmVUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zeW5jRW5naW5lLnJlamVjdExpc3Rlbih0YXJnZXRJZCwgZXJyb3IpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pOyB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZUNoYWluO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cclxuICAgICAqXHJcbiAgICAgKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcclxuICAgICAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cclxuICAgICAqXHJcbiAgICAgKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXHJcbiAgICAgKi9cclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5maWxsV3JpdGVQaXBlbGluZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0QmF0Y2hJZFJldHJpZXZlZCwgYmF0Y2g7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYW5BZGRUb1dyaXRlUGlwZWxpbmUoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RCYXRjaElkUmV0cmlldmVkID0gdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy53cml0ZVBpcGVsaW5lW3RoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggLSAxXS5iYXRjaElkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IEJBVENISURfVU5LTk9XTjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLm5leHRNdXRhdGlvbkJhdGNoKGxhc3RCYXRjaElkUmV0cmlldmVkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXRjaCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYmF0Y2ggPT09IG51bGwpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVTdHJlYW0ubWFya0lkbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVG9Xcml0ZVBpcGVsaW5lKGJhdGNoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5maWxsV3JpdGVQaXBlbGluZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0V3JpdGVTdHJlYW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGNhbiBhZGQgdG8gdGhlIHdyaXRlIHBpcGVsaW5lIChpLmUuIHRoZSBuZXR3b3JrIGlzXHJcbiAgICAgKiBlbmFibGVkIGFuZCB0aGUgd3JpdGUgcGlwZWxpbmUgaXMgbm90IGZ1bGwpLlxyXG4gICAgICovXHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuY2FuQWRkVG9Xcml0ZVBpcGVsaW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5jYW5Vc2VOZXR3b3JrKCkgJiYgdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCA8IE1BWF9QRU5ESU5HX1dSSVRFUyk7XHJcbiAgICB9O1xyXG4gICAgLy8gRm9yIHRlc3RpbmdcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vdXRzdGFuZGluZ1dyaXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFF1ZXVlcyBhZGRpdGlvbmFsIHdyaXRlcyB0byBiZSBzZW50IHRvIHRoZSB3cml0ZSBzdHJlYW0sIHNlbmRpbmcgdGhlbVxyXG4gICAgICogaW1tZWRpYXRlbHkgaWYgdGhlIHdyaXRlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmFkZFRvV3JpdGVQaXBlbGluZSA9IGZ1bmN0aW9uIChiYXRjaCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmNhbkFkZFRvV3JpdGVQaXBlbGluZSgpLCAnYWRkVG9Xcml0ZVBpcGVsaW5lIGNhbGxlZCB3aGVuIHBpcGVsaW5lIGlzIGZ1bGwnKTtcclxuICAgICAgICB0aGlzLndyaXRlUGlwZWxpbmUucHVzaChiYXRjaCk7XHJcbiAgICAgICAgaWYgKHRoaXMud3JpdGVTdHJlYW0uaXNPcGVuKCkgJiYgdGhpcy53cml0ZVN0cmVhbS5oYW5kc2hha2VDb21wbGV0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlU3RyZWFtLndyaXRlTXV0YXRpb25zKGJhdGNoLm11dGF0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zaG91bGRTdGFydFdyaXRlU3RyZWFtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5jYW5Vc2VOZXR3b3JrKCkgJiZcclxuICAgICAgICAgICAgIXRoaXMud3JpdGVTdHJlYW0uaXNTdGFydGVkKCkgJiZcclxuICAgICAgICAgICAgdGhpcy53cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDApO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5zdGFydFdyaXRlU3RyZWFtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnNob3VsZFN0YXJ0V3JpdGVTdHJlYW0oKSwgJ3N0YXJ0V3JpdGVTdHJlYW0oKSBjYWxsZWQgd2hlbiBzaG91bGRTdGFydFdyaXRlU3RyZWFtKCkgaXMgZmFsc2UuJyk7XHJcbiAgICAgICAgdGhpcy53cml0ZVN0cmVhbS5zdGFydCgpO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vbldyaXRlU3RyZWFtT3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVTdHJlYW0ud3JpdGVIYW5kc2hha2UoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLm9uV3JpdGVIYW5kc2hha2VDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFJlY29yZCB0aGUgc3RyZWFtIHRva2VuLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmVcclxuICAgICAgICAgICAgLnNldExhc3RTdHJlYW1Ub2tlbih0aGlzLndyaXRlU3RyZWFtLmxhc3RTdHJlYW1Ub2tlbilcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBTZW5kIHRoZSB3cml0ZSBwaXBlbGluZSBub3cgdGhhdCB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMud3JpdGVQaXBlbGluZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYXRjaCA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIF90aGlzLndyaXRlU3RyZWFtLndyaXRlTXV0YXRpb25zKGJhdGNoLm11dGF0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUub25NdXRhdGlvblJlc3VsdCA9IGZ1bmN0aW9uIChjb21taXRWZXJzaW9uLCByZXN1bHRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBUaGlzIGlzIGEgcmVzcG9uc2UgdG8gYSB3cml0ZSBjb250YWluaW5nIG11dGF0aW9ucyBhbmQgc2hvdWxkIGJlXHJcbiAgICAgICAgLy8gY29ycmVsYXRlZCB0byB0aGUgZmlyc3Qgd3JpdGUgaW4gb3VyIHdyaXRlIHBpcGVsaW5lLlxyXG4gICAgICAgIGFzc2VydCh0aGlzLndyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCwgJ0dvdCByZXN1bHQgZm9yIGVtcHR5IHdyaXRlIHBpcGVsaW5lJyk7XHJcbiAgICAgICAgdmFyIGJhdGNoID0gdGhpcy53cml0ZVBpcGVsaW5lLnNoaWZ0KCk7XHJcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBNdXRhdGlvbkJhdGNoUmVzdWx0LmZyb20oYmF0Y2gsIGNvbW1pdFZlcnNpb24sIHJlc3VsdHMsIHRoaXMud3JpdGVTdHJlYW0ubGFzdFN0cmVhbVRva2VuKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlKHN1Y2Nlc3MpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcclxuICAgICAgICAgICAgLy8gc2xvdCBoYXMgZnJlZWQgdXAuXHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5maWxsV3JpdGVQaXBlbGluZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5vbldyaXRlU3RyZWFtQ2xvc2UgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBlcnJvckhhbmRsaW5nO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdyYWNlZnVsIHN0b3AgKGR1ZSB0byBzdG9wKCkgb3IgaWRsZSB0aW1lb3V0KS4gTWFrZSBzdXJlIHRoYXQnc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlc2lyYWJsZS5cclxuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoIXRoaXMuc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSgpLCAnV3JpdGUgc3RyZWFtIHdhcyBzdG9wcGVkIGdyYWNlZnVsbHkgd2hpbGUgc3RpbGwgbmVlZGVkLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHdyaXRlIHN0cmVhbSBjbG9zZWQgZHVlIHRvIGFuIGVycm9yLCBpbnZva2UgdGhlIGVycm9yIGNhbGxiYWNrcyBpZlxyXG4gICAgICAgICAgICAgICAgLy8gdGhlcmUgYXJlIHBlbmRpbmcgd3JpdGVzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yICYmIHRoaXMud3JpdGVQaXBlbGluZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53cml0ZVN0cmVhbS5oYW5kc2hha2VDb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGVycm9yIGFmZmVjdHMgdGhlIGFjdHVhbCB3cml0ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGluZyA9IHRoaXMuaGFuZGxlV3JpdGVFcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSB3YXMgYW4gZXJyb3IgYmVmb3JlIHRoZSBoYW5kc2hha2UgaGFzIGZpbmlzaGVkLCBpdCdzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc3NpYmxlIHRoYXQgdGhlIHNlcnZlciBpcyB1bmFibGUgdG8gcHJvY2VzcyB0aGUgc3RyZWFtIHRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIHNlbmRpbmcuIChQZXJoYXBzIGl0J3MgdG9vIG9sZD8pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxpbmcgPSB0aGlzLmhhbmRsZUhhbmRzaGFrZUVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGVycm9ySGFuZGxpbmcudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgd3JpdGUgc3RyZWFtIG1pZ2h0IGhhdmUgYmVlbiBzdGFydGVkIGJ5IHJlZmlsbGluZyB0aGUgd3JpdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBpcGVsaW5lIGZvciBmYWlsZWQgd3JpdGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RhcnRXcml0ZVN0cmVhbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5oYW5kbGVIYW5kc2hha2VFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRva2VuIGlmIGl0J3MgYSBwZXJtYW5lbnQgZXJyb3IsIHNpZ25hbGluZyB0aGUgd3JpdGUgc3RyZWFtIGlzXHJcbiAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgdmFsaWQuIE5vdGUgdGhhdCB0aGUgaGFuZHNoYWtlIGRvZXMgbm90IGNvdW50IGFzIGEgd3JpdGU6IHNlZVxyXG4gICAgICAgICAgICAgICAgLy8gY29tbWVudHMgb24gaXNQZXJtYW5lbnRXcml0ZUVycm9yIGZvciBkZXRhaWxzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGlzUGVybWFuZW50RXJyb3IoZXJyb3IuY29kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDgsICdSZW1vdGVTdG9yZSBlcnJvciBiZWZvcmUgY29tcGxldGVkIGhhbmRzaGFrZTsgcmVzZXR0aW5nIHN0cmVhbSB0b2tlbjogJywgdGhpcy53cml0ZVN0cmVhbS5sYXN0U3RyZWFtVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVTdHJlYW0ubGFzdFN0cmVhbVRva2VuID0gZW1wdHlCeXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMubG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldExhc3RTdHJlYW1Ub2tlbihlbXB0eUJ5dGVTdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmhhbmRsZVdyaXRlRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBiYXRjaDtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSBoYW5kbGUgcGVybWFuZW50IGVycm9ycyBoZXJlLiBJZiBpdCdzIHRyYW5zaWVudCwganVzdCBsZXQgdGhlIHJldHJ5XHJcbiAgICAgICAgICAgICAgICAvLyBsb2dpYyBraWNrIGluLlxyXG4gICAgICAgICAgICAgICAgaWYgKGlzUGVybWFuZW50V3JpdGVFcnJvcihlcnJvci5jb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhdGNoID0gdGhpcy53cml0ZVBpcGVsaW5lLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcclxuICAgICAgICAgICAgICAgICAgICAvLyBkb3duIC0tIHRoaXMgd2FzIGp1c3QgYSBiYWQgcmVxdWVzdCBzbyBpbmhpYml0IGJhY2tvZmYgb24gdGhlIG5leHRcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXN0YXJ0LlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVTdHJlYW0uaW5oaWJpdEJhY2tvZmYoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5zeW5jRW5naW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVqZWN0RmFpbGVkV3JpdGUoYmF0Y2guYmF0Y2hJZCwgZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbm90aGVyIHNsb3QgaGFzIGZyZWVkIHVwLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZpbGxXcml0ZVBpcGVsaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmNyZWF0ZVRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb24odGhpcy5kYXRhc3RvcmUpO1xyXG4gICAgfTtcclxuICAgIFJlbW90ZVN0b3JlLnByb3RvdHlwZS5yZXN0YXJ0TmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kaXNhYmxlTmV0d29ya0ludGVybmFsKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlVHJhY2tlci5zZXQoT25saW5lU3RhdGUuVW5rbm93bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW5hYmxlTmV0d29yaygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZW1vdGVTdG9yZS5wcm90b3R5cGUuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYW5Vc2VOZXR3b3JrKCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUZWFyIGRvd24gYW5kIHJlLWNyZWF0ZSBvdXIgbmV0d29yayBzdHJlYW1zLiBUaGlzIHdpbGwgZW5zdXJlIHdlIGdldCBhIGZyZXNoIGF1dGggdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRoZSBuZXcgdXNlciBhbmQgcmUtZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBuZXcgbXV0YXRpb25zIGZyb20gdGhlIExvY2FsU3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gKHNpbmNlIG11dGF0aW9ucyBhcmUgcGVyLXVzZXIpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDgsICdSZW1vdGVTdG9yZSByZXN0YXJ0aW5nIHN0cmVhbXMgZm9yIG5ldyBjcmVkZW50aWFsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVzdGFydE5ldHdvcmsoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUb2dnbGVzIHRoZSBuZXR3b3JrIHN0YXRlIHdoZW4gdGhlIGNsaWVudCBnYWlucyBvciBsb3NlcyBpdHMgcHJpbWFyeSBsZWFzZS5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlU3RvcmUucHJvdG90eXBlLmFwcGx5UHJpbWFyeVN0YXRlID0gZnVuY3Rpb24gKGlzUHJpbWFyeSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSBpc1ByaW1hcnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGlzUHJpbWFyeSAmJiB0aGlzLm5ldHdvcmtFbmFibGVkKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW5hYmxlTmV0d29yaygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFpc1ByaW1hcnkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRpc2FibGVOZXR3b3JrSW50ZXJuYWwoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25saW5lU3RhdGVUcmFja2VyLnNldChPbmxpbmVTdGF0ZS5Vbmtub3duKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVtb3RlU3RvcmU7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW1tdXRhYmxlIGNsYXNzIHJlcHJlc2VudGluZyBhIGdlbyBwb2ludCBhcyBsYXRpdHVkZS1sb25naXR1ZGUgcGFpci5cclxuICogVGhpcyBjbGFzcyBpcyBkaXJlY3RseSBleHBvc2VkIGluIHRoZSBwdWJsaWMgQVBJLCBpbmNsdWRpbmcgaXRzIGNvbnN0cnVjdG9yLlxyXG4gKi9cclxudmFyIEdlb1BvaW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gR2VvUG9pbnQobGF0aXR1ZGUsIGxvbmdpdHVkZSkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ0dlb1BvaW50JywgYXJndW1lbnRzLCAyKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0dlb1BvaW50JywgJ251bWJlcicsIDEsIGxhdGl0dWRlKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0dlb1BvaW50JywgJ251bWJlcicsIDIsIGxvbmdpdHVkZSk7XHJcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShsYXRpdHVkZSkgfHwgbGF0aXR1ZGUgPCAtOTAgfHwgbGF0aXR1ZGUgPiA5MCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnTGF0aXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAsIGJ1dCB3YXM6ICcgKyBsYXRpdHVkZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNGaW5pdGUobG9uZ2l0dWRlKSB8fCBsb25naXR1ZGUgPCAtMTgwIHx8IGxvbmdpdHVkZSA+IDE4MCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnTG9uZ2l0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAsIGJ1dCB3YXM6ICcgKyBsb25naXR1ZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sYXQgPSBsYXRpdHVkZTtcclxuICAgICAgICB0aGlzLl9sb25nID0gbG9uZ2l0dWRlO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdlb1BvaW50LnByb3RvdHlwZSwgXCJsYXRpdHVkZVwiLCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgbGF0aXR1ZGUgb2YgdGhpcyBnZW8gcG9pbnQsIGEgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xhdDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHZW9Qb2ludC5wcm90b3R5cGUsIFwibG9uZ2l0dWRlXCIsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBsb25naXR1ZGUgb2YgdGhpcyBnZW8gcG9pbnQsIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9uZztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEdlb1BvaW50LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdCA9PT0gb3RoZXIuX2xhdCAmJiB0aGlzLl9sb25nID09PSBvdGhlci5fbG9uZztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFjdHVhbGx5IHByaXZhdGUgdG8gSlMgY29uc3VtZXJzIG9mIG91ciBBUEksIHNvIHRoaXMgZnVuY3Rpb24gaXMgcHJlZml4ZWRcclxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cclxuICAgICAqL1xyXG4gICAgR2VvUG9pbnQucHJvdG90eXBlLl9jb21wYXJlVG8gPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKHByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5fbGF0LCBvdGhlci5fbGF0KSB8fFxyXG4gICAgICAgICAgICBwcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuX2xvbmcsIG90aGVyLl9sb25nKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEdlb1BvaW50O1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIFRyYW5zZm9ybXMgYSB2YWx1ZSBpbnRvIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAuICovXHJcbnZhciBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0oKSB7XHJcbiAgICB9XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0ucHJvdG90eXBlLmFwcGx5VG9Mb2NhbFZpZXcgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgbG9jYWxXcml0ZVRpbWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNlcnZlclRpbWVzdGFtcFZhbHVlKGxvY2FsV3JpdGVUaW1lLCBwcmV2aW91c1ZhbHVlKTtcclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCB0cmFuc2Zvcm1SZXN1bHQpIHtcclxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtUmVzdWx0O1xyXG4gICAgfTtcclxuICAgIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybS5wcm90b3R5cGUuY29tcHV0ZUJhc2VWYWx1ZSA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIFNlcnZlciB0aW1lc3RhbXBzIGFyZSBpZGVtcG90ZW50IGFuZCBkb24ndCByZXF1aXJlIGEgYmFzZSB2YWx1ZS5cclxuICAgIH07XHJcbiAgICBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm07XHJcbiAgICB9O1xyXG4gICAgU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtLmluc3RhbmNlID0gbmV3IFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSgpO1xyXG4gICAgcmV0dXJuIFNlcnZlclRpbWVzdGFtcFRyYW5zZm9ybTtcclxufSgpKTtcclxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgdW5pb24gb3BlcmF0aW9uLiAqL1xyXG52YXIgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24oZWxlbWVudHMpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7XHJcbiAgICB9XHJcbiAgICBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHkocHJldmlvdXNWYWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuYXBwbHlUb1JlbW90ZURvY3VtZW50ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIHRyYW5zZm9ybVJlc3VsdCkge1xyXG4gICAgICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxyXG4gICAgICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxyXG4gICAgICAgIC8vIGFwcGxpY2F0aW9ucy5cclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseShwcmV2aW91c1ZhbHVlKTtcclxuICAgIH07XHJcbiAgICBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNvZXJjZWRGaWVsZFZhbHVlc0FycmF5KHByZXZpb3VzVmFsdWUpO1xyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHRvVW5pb24pIHtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHQuZmluZChmdW5jdGlvbiAoZWxlbWVudCkgeyByZXR1cm4gZWxlbWVudC5pc0VxdWFsKHRvVW5pb24pOyB9KSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godG9Vbmlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmVsZW1lbnRzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgdG9VbmlvbiA9IF9hW19pXTtcclxuICAgICAgICAgICAgX2xvb3BfMSh0b1VuaW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheVZhbHVlKHJlc3VsdCk7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuY29tcHV0ZUJhc2VWYWx1ZSA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIEFycmF5IHRyYW5zZm9ybXMgYXJlIGlkZW1wb3RlbnQgYW5kIGRvbid0IHJlcXVpcmUgYSBiYXNlIHZhbHVlLlxyXG4gICAgfTtcclxuICAgIEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiAmJlxyXG4gICAgICAgICAgICBhcnJheUVxdWFscyhvdGhlci5lbGVtZW50cywgdGhpcy5lbGVtZW50cykpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uO1xyXG59KCkpO1xyXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSByZW1vdmUgb3BlcmF0aW9uLiAqL1xyXG52YXIgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlbGVtZW50cykge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcclxuICAgIH1cclxuICAgIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHkocHJldmlvdXNWYWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5VG9SZW1vdGVEb2N1bWVudCA9IGZ1bmN0aW9uIChwcmV2aW91c1ZhbHVlLCB0cmFuc2Zvcm1SZXN1bHQpIHtcclxuICAgICAgICAvLyBUaGUgc2VydmVyIGp1c3Qgc2VuZHMgbnVsbCBhcyB0aGUgdHJhbnNmb3JtIHJlc3VsdCBmb3IgYXJyYXkgb3BlcmF0aW9ucyxcclxuICAgICAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBhIHJlc3VsdCB0aGUgc2FtZSBhcyB3ZSBkbyBmb3IgbG9jYWxcclxuICAgICAgICAvLyBhcHBsaWNhdGlvbnMuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHkocHJldmlvdXNWYWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkocHJldmlvdXNWYWx1ZSk7XHJcbiAgICAgICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAodG9SZW1vdmUpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkgeyByZXR1cm4gIWVsZW1lbnQuaXNFcXVhbCh0b1JlbW92ZSk7IH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZWxlbWVudHM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0b1JlbW92ZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgX2xvb3BfMih0b1JlbW92ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlWYWx1ZShyZXN1bHQpO1xyXG4gICAgfTtcclxuICAgIEFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5jb21wdXRlQmFzZVZhbHVlID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDsgLy8gQXJyYXkgdHJhbnNmb3JtcyBhcmUgaWRlbXBvdGVudCBhbmQgZG9uJ3QgcmVxdWlyZSBhIGJhc2UgdmFsdWUuXHJcbiAgICB9O1xyXG4gICAgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24ucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gKG90aGVyIGluc3RhbmNlb2YgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gJiZcclxuICAgICAgICAgICAgYXJyYXlFcXVhbHMob3RoZXIuZWxlbWVudHMsIHRoaXMuZWxlbWVudHMpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb247XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBiYWNrZW5kIHNlbWFudGljcyBmb3IgbG9jYWxseSBjb21wdXRlZCBOVU1FUklDX0FERCAoaW5jcmVtZW50KVxyXG4gKiB0cmFuc2Zvcm1zLiBDb252ZXJ0cyBhbGwgZmllbGQgdmFsdWVzIHRvIGludGVnZXJzIG9yIGRvdWJsZXMsIGJ1dCB1bmxpa2UgdGhlXHJcbiAqIGJhY2tlbmQgZG9lcyBub3QgY2FwIGludGVnZXIgdmFsdWVzIGF0IDJeNjMuIEluc3RlYWQsIEphdmFTY3JpcHQgbnVtYmVyXHJcbiAqIGFyaXRobWV0aWMgaXMgdXNlZCBhbmQgcHJlY2lzaW9uIGxvc3MgY2FuIG9jY3VyIGZvciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDJeNTMuXHJcbiAqL1xyXG52YXIgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE51bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24ob3BlcmFuZCkge1xyXG4gICAgICAgIHRoaXMub3BlcmFuZCA9IG9wZXJhbmQ7XHJcbiAgICB9XHJcbiAgICBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5hcHBseVRvTG9jYWxWaWV3ID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUsIGxvY2FsV3JpdGVUaW1lKSB7XHJcbiAgICAgICAgdmFyIGJhc2VWYWx1ZSA9IHRoaXMuY29tcHV0ZUJhc2VWYWx1ZShwcmV2aW91c1ZhbHVlKTtcclxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFNpbmNlIEphdmFTY3JpcHQncyBpbnRlZ2VyIGFyaXRobWV0aWMgaXMgbGltaXRlZCB0byA1MyBiaXRcclxuICAgICAgICAvLyBwcmVjaXNpb24gYW5kIHJlc29sdmVzIG92ZXJmbG93cyBieSByZWR1Y2luZyBwcmVjaXNpb24sIHdlIGRvIG5vdFxyXG4gICAgICAgIC8vIG1hbnVhbGx5IGNhcCBvdmVyZmxvd3MgYXQgMl42My5cclxuICAgICAgICAvLyBSZXR1cm4gYW4gaW50ZWdlciB2YWx1ZSBpZmYgdGhlIHByZXZpb3VzIHZhbHVlIGFuZCB0aGUgb3BlcmFuZCBpcyBhblxyXG4gICAgICAgIC8vIGludGVnZXIuXHJcbiAgICAgICAgaWYgKGJhc2VWYWx1ZSBpbnN0YW5jZW9mIEludGVnZXJWYWx1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLm9wZXJhbmQgaW5zdGFuY2VvZiBJbnRlZ2VyVmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHN1bSA9IGJhc2VWYWx1ZS5pbnRlcm5hbFZhbHVlICsgdGhpcy5vcGVyYW5kLmludGVybmFsVmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50ZWdlclZhbHVlKHN1bSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgc3VtID0gYmFzZVZhbHVlLmludGVybmFsVmFsdWUgKyB0aGlzLm9wZXJhbmQuaW50ZXJuYWxWYWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEb3VibGVWYWx1ZShzdW0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5hcHBseVRvUmVtb3RlRG9jdW1lbnQgPSBmdW5jdGlvbiAocHJldmlvdXNWYWx1ZSwgdHJhbnNmb3JtUmVzdWx0KSB7XHJcbiAgICAgICAgYXNzZXJ0KHRyYW5zZm9ybVJlc3VsdCAhPT0gbnVsbCwgXCJEaWRuJ3QgcmVjZWl2ZSB0cmFuc2Zvcm1SZXN1bHQgZm9yIE5VTUVSSUNfQUREIHRyYW5zZm9ybVwiKTtcclxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtUmVzdWx0O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW5zcGVjdHMgdGhlIHByb3ZpZGVkIHZhbHVlLCByZXR1cm5pbmcgdGhlIHByb3ZpZGVkIHZhbHVlIGlmIGl0IGlzIGFscmVhZHlcclxuICAgICAqIGEgTnVtYmVyVmFsdWUsIG90aGVyd2lzZSByZXR1cm5pbmcgYSBjb2VyY2VkIEludGVnZXJWYWx1ZSBvZiAwLlxyXG4gICAgICovXHJcbiAgICBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uLnByb3RvdHlwZS5jb21wdXRlQmFzZVZhbHVlID0gZnVuY3Rpb24gKHByZXZpb3VzVmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gcHJldmlvdXNWYWx1ZSBpbnN0YW5jZW9mIE51bWJlclZhbHVlXHJcbiAgICAgICAgICAgID8gcHJldmlvdXNWYWx1ZVxyXG4gICAgICAgICAgICA6IG5ldyBJbnRlZ2VyVmFsdWUoMCk7XHJcbiAgICB9O1xyXG4gICAgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbi5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAob3RoZXIgaW5zdGFuY2VvZiBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uICYmXHJcbiAgICAgICAgICAgIHRoaXMub3BlcmFuZC5pc0VxdWFsKG90aGVyLm9wZXJhbmQpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbjtcclxufSgpKTtcclxuZnVuY3Rpb24gY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkodmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5VmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWUuaW50ZXJuYWxWYWx1ZS5zbGljZSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gY29lcmNlIHRvIGVtcHR5IGFycmF5LlxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIEV4aXN0ZW5jZUZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIFRPRE8oYi8zMzA3ODE2Myk6IGp1c3QgdXNlIHNpbXBsZXN0IGZvcm0gb2YgZXhpc3RlbmNlIGZpbHRlciBmb3Igbm93XHJcbiAgICBmdW5jdGlvbiBFeGlzdGVuY2VGaWx0ZXIoY291bnQpIHtcclxuICAgICAgICB0aGlzLmNvdW50ID0gY291bnQ7XHJcbiAgICB9XHJcbiAgICBFeGlzdGVuY2VGaWx0ZXIucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gb3RoZXIgJiYgb3RoZXIuY291bnQgPT09IHRoaXMuY291bnQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4aXN0ZW5jZUZpbHRlcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBESVJFQ1RJT05TID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBkaXJzID0ge307XHJcbiAgICBkaXJzW0RpcmVjdGlvbi5BU0NFTkRJTkcubmFtZV0gPSAnQVNDRU5ESU5HJztcclxuICAgIGRpcnNbRGlyZWN0aW9uLkRFU0NFTkRJTkcubmFtZV0gPSAnREVTQ0VORElORyc7XHJcbiAgICByZXR1cm4gZGlycztcclxufSkoKTtcclxudmFyIE9QRVJBVE9SUyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgb3BzID0ge307XHJcbiAgICBvcHNbT3BlcmF0b3IuTEVTU19USEFOLm5hbWVdID0gJ0xFU1NfVEhBTic7XHJcbiAgICBvcHNbT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMLm5hbWVdID0gJ0xFU1NfVEhBTl9PUl9FUVVBTCc7XHJcbiAgICBvcHNbT3BlcmF0b3IuR1JFQVRFUl9USEFOLm5hbWVdID0gJ0dSRUFURVJfVEhBTic7XHJcbiAgICBvcHNbT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMLm5hbWVdID0gJ0dSRUFURVJfVEhBTl9PUl9FUVVBTCc7XHJcbiAgICBvcHNbT3BlcmF0b3IuRVFVQUwubmFtZV0gPSAnRVFVQUwnO1xyXG4gICAgb3BzW09wZXJhdG9yLkFSUkFZX0NPTlRBSU5TLm5hbWVdID0gJ0FSUkFZX0NPTlRBSU5TJztcclxuICAgIG9wc1tPcGVyYXRvci5JTi5uYW1lXSA9ICdJTic7XHJcbiAgICBvcHNbT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZLm5hbWVdID0gJ0FSUkFZX0NPTlRBSU5TX0FOWSc7XHJcbiAgICByZXR1cm4gb3BzO1xyXG59KSgpO1xyXG4vLyBBIFJlZ0V4cCBtYXRjaGluZyBJU08gODYwMSBVVEMgdGltZXN0YW1wcyB3aXRoIG9wdGlvbmFsIGZyYWN0aW9uLlxyXG52YXIgSVNPX1JFR19FWFAgPSBuZXcgUmVnRXhwKC9eXFxkezR9LVxcZFxcZC1cXGRcXGRUXFxkXFxkOlxcZFxcZDpcXGRcXGQoPzpcXC4oXFxkKykpP1okLyk7XHJcbmZ1bmN0aW9uIGFzc2VydFByZXNlbnQodmFsdWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICBhc3NlcnQoIWlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSwgZGVzY3JpcHRpb24gKyAnIGlzIG1pc3NpbmcnKTtcclxufVxyXG5mdW5jdGlvbiBwYXJzZUludDY0KHZhbHVlKSB7XHJcbiAgICAvLyBUT0RPKGJqb3JuaWNrKTogSGFuZGxlIGludDY0IGdyZWF0ZXIgdGhhbiA1MyBiaXRzLlxyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFpbChcImNhbid0IHBhcnNlIFwiICsgdmFsdWUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgSnNvbk9iamVjdCB2YWx1ZXMgZm9yIHRoZSBEYXRhc3RvcmUgQVBJIHN1aXRhYmxlIGZvciBzZW5kaW5nIHRvXHJcbiAqIGVpdGhlciBHUlBDIHN0dWIgbWV0aG9kcyBvciB2aWEgdGhlIEpTT04vSFRUUCBSRVNUIEFQSS5cclxuICogVE9ETyhrbGltdCk6IFdlIGNhbiByZW1vdmUgdGhlIGRhdGFiYXNlSWQgYXJndW1lbnQgaWYgd2Uga2VlcCB0aGUgZnVsbFxyXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cclxuICovXHJcbnZhciBKc29uUHJvdG9TZXJpYWxpemVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSnNvblByb3RvU2VyaWFsaXplcihkYXRhYmFzZUlkLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gZGF0YWJhc2VJZDtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgfVxyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZW1wdHlCeXRlU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnVuc2FmZUNhc3RQcm90b0J5dGVTdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZVN0cmluZykge1xyXG4gICAgICAgIC8vIGJ5dGVTdHJpbmdzIGNhbiBiZSBlaXRoZXIgc3RyaW5nIG9yIFVJbnQ4QXJyYXksIGJ1dCB0aGUgdHlwaW5ncyBzYXlcclxuICAgICAgICAvLyBpdCdzIGFsd2F5cyBhIHN0cmluZy4gQ2FzdCBhcyBzdHJpbmcgdG8gYXZvaWQgdHlwZSBjaGVjayBmYWlsaW5nXHJcbiAgICAgICAgcmV0dXJuIGJ5dGVTdHJpbmc7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVJwY1N0YXR1cyA9IGZ1bmN0aW9uIChzdGF0dXMpIHtcclxuICAgICAgICB2YXIgY29kZSA9IHN0YXR1cy5jb2RlID09PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyBDb2RlLlVOS05PV05cclxuICAgICAgICAgICAgOiBtYXBDb2RlRnJvbVJwY0NvZGUoc3RhdHVzLmNvZGUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmlyZXN0b3JlRXJyb3IoY29kZSwgc3RhdHVzLm1lc3NhZ2UgfHwgJycpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXHJcbiAgICAgKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxyXG4gICAgICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxyXG4gICAgICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcclxuICAgICAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxyXG4gICAgICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxyXG4gICAgICovXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0ludDMyVmFsdWUgPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uIHx8IGlzTnVsbE9yVW5kZWZpbmVkKHZhbCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFByb3RvYnVmSlMgcmVxdWlyZXMgdGhhdCB3ZSB3cmFwIEludDMyVmFsdWVzLlxyXG4gICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2Ugd2UgbmVlZCB0byBtYXRjaCBnZW5lcmF0ZWQgUHJvdG8gdHlwZXMuXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2YWwgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXHJcbiAgICAgKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgYWNjZXB0aW5nIFwibnVtYmVyXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxyXG4gICAgICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBJbnQzMlZhbHVlIG11c3QgYmUsIGJ1dCBpdCBhY3R1YWxseVxyXG4gICAgICogYWNjZXB0cyB7IHZhbHVlOiBudW1iZXIgfSB0byBtYXRjaCBvdXIgc2VyaWFsaXphdGlvbiBpbiB0b0ludDMyVmFsdWUoKS5cclxuICAgICAqL1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUludDMyVmFsdWUgPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgLy8gVXNlIGFueSBiZWNhdXNlIHdlIG5lZWQgdG8gbWF0Y2ggZ2VuZXJhdGVkIFByb3RvIHR5cGVzLlxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICByZXN1bHQgPSB2YWwudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBXZSBhY2NlcHQgcmF3IG51bWJlcnMgKHdpdGhvdXQgdGhlIHt2YWx1ZTogLi4uIH0gd3JhcHBlcikgZm9yXHJcbiAgICAgICAgICAgIC8vIGNvbXBhdGliaWxpdHkgd2l0aCBsZWdhY3kgcGVyc2lzdGVkIGRhdGEuXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGlzTnVsbE9yVW5kZWZpbmVkKHJlc3VsdCkgPyBudWxsIDogcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHZhbHVlIGZvciBhIERhdGUgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXHJcbiAgICAgKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwic3RyaW5nXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxyXG4gICAgICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBkYXRlcyBtdXN0IGJlLiBCdXQgaXQncyBlYXNpZXIgYW5kIHNhZmVyXHJcbiAgICAgKiB0byBhY3R1YWxseSByZXR1cm4gYSBUaW1lc3RhbXAgcHJvdG8uXHJcbiAgICAgKi9cclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvVGltZXN0YW1wID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbikge1xyXG4gICAgICAgICAgICAvLyBTZXJpYWxpemUgdG8gSVNPLTg2MDEgZGF0ZSBmb3JtYXQsIGJ1dCB3aXRoIGZ1bGwgbmFubyByZXNvbHV0aW9uLlxyXG4gICAgICAgICAgICAvLyBTaW5jZSBKUyBEYXRlIGhhcyBvbmx5IG1pbGxpcywgbGV0J3Mgb25seSB1c2UgaXQgZm9yIHRoZSBzZWNvbmRzIGFuZFxyXG4gICAgICAgICAgICAvLyB0aGVuIG1hbnVhbGx5IGFkZCB0aGUgZnJhY3Rpb25zIHRvIHRoZSBlbmQuXHJcbiAgICAgICAgICAgIHZhciBqc0RhdGVTdHIgPSBuZXcgRGF0ZSh0aW1lc3RhbXAuc2Vjb25kcyAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSAueHh4IGZyYWMgcGFydCBhbmQgWiBpbiB0aGUgZW5kLlxyXG4gICAgICAgICAgICB2YXIgc3RyVW50aWxTZWNvbmRzID0ganNEYXRlU3RyLnJlcGxhY2UoL1xcLlxcZCovLCAnJykucmVwbGFjZSgnWicsICcnKTtcclxuICAgICAgICAgICAgLy8gUGFkIHRoZSBmcmFjdGlvbiBvdXQgdG8gOSBkaWdpdHMgKG5hbm9zKS5cclxuICAgICAgICAgICAgdmFyIG5hbm9TdHIgPSAoJzAwMDAwMDAwMCcgKyB0aW1lc3RhbXAubmFub3NlY29uZHMpLnNsaWNlKC05KTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0clVudGlsU2Vjb25kcyArIFwiLlwiICsgbmFub1N0ciArIFwiWlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHNlY29uZHM6ICcnICsgdGltZXN0YW1wLnNlY29uZHMsXHJcbiAgICAgICAgICAgICAgICBuYW5vczogdGltZXN0YW1wLm5hbm9zZWNvbmRzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tVGltZXN0YW1wID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgICAgICAvLyBUaGUganNvbiBpbnRlcmZhY2UgKGZvciB0aGUgYnJvd3Nlcikgd2lsbCByZXR1cm4gYW4gaXNvIHRpbWVzdGFtcCBzdHJpbmcsXHJcbiAgICAgICAgLy8gd2hpbGUgdGhlIHByb3RvIGpzIGxpYnJhcnkgKGZvciBub2RlKSB3aWxsIHJldHVybiBhXHJcbiAgICAgICAgLy8gZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBpbnN0YW5jZS5cclxuICAgICAgICBpZiAodHlwZW9mIGRhdGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8oYi8zNzI4MjIzNyk6IFVzZSBzdHJpbmdzIGZvciBQcm90bzMgdGltZXN0YW1wc1xyXG4gICAgICAgICAgICAvLyBhc3NlcnQodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24sXHJcbiAgICAgICAgICAgIC8vICAgJ1RoZSB0aW1lc3RhbXAgc3RyaW5nIGZvcm1hdCByZXF1aXJlcyBQcm90bzMuJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21Jc284NjAxU3RyaW5nKGRhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXNzZXJ0KCEhZGF0ZSwgJ0Nhbm5vdCBkZXNlcmlhbGl6ZSBudWxsIG9yIHVuZGVmaW5lZCB0aW1lc3RhbXAuJyk7XHJcbiAgICAgICAgICAgIC8vIFRPRE8oYi8zNzI4MjIzNyk6IFVzZSBzdHJpbmdzIGZvciBQcm90bzMgdGltZXN0YW1wc1xyXG4gICAgICAgICAgICAvLyBhc3NlcnQoIXRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uLFxyXG4gICAgICAgICAgICAvLyAgICdUaGUgdGltZXN0YW1wIGluc3RhbmNlIGZvcm1hdCByZXF1aXJlcyBQcm90byBKUy4nKTtcclxuICAgICAgICAgICAgdmFyIHNlY29uZHMgPSBwYXJzZUludDY0KGRhdGUuc2Vjb25kcyB8fCAnMCcpO1xyXG4gICAgICAgICAgICB2YXIgbmFub3MgPSBkYXRlLm5hbm9zIHx8IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wKHNlY29uZHMsIG5hbm9zKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUlzbzg2MDFTdHJpbmcgPSBmdW5jdGlvbiAodXRjKSB7XHJcbiAgICAgICAgLy8gVGhlIGRhdGUgc3RyaW5nIGNhbiBoYXZlIGhpZ2hlciBwcmVjaXNpb24gKG5hbm9zKSB0aGFuIHRoZSBEYXRlIGNsYXNzXHJcbiAgICAgICAgLy8gKG1pbGxpcyksIHNvIHdlIGRvIHNvbWUgY3VzdG9tIHBhcnNpbmcgaGVyZS5cclxuICAgICAgICAvLyBQYXJzZSB0aGUgbmFub3MgcmlnaHQgb3V0IG9mIHRoZSBzdHJpbmcuXHJcbiAgICAgICAgdmFyIG5hbm9zID0gMDtcclxuICAgICAgICB2YXIgZnJhY3Rpb24gPSBJU09fUkVHX0VYUC5leGVjKHV0Yyk7XHJcbiAgICAgICAgYXNzZXJ0KCEhZnJhY3Rpb24sICdpbnZhbGlkIHRpbWVzdGFtcDogJyArIHV0Yyk7XHJcbiAgICAgICAgaWYgKGZyYWN0aW9uWzFdKSB7XHJcbiAgICAgICAgICAgIC8vIFBhZCB0aGUgZnJhY3Rpb24gb3V0IHRvIDkgZGlnaXRzIChuYW5vcykuXHJcbiAgICAgICAgICAgIHZhciBuYW5vU3RyID0gZnJhY3Rpb25bMV07XHJcbiAgICAgICAgICAgIG5hbm9TdHIgPSAobmFub1N0ciArICcwMDAwMDAwMDAnKS5zdWJzdHIoMCwgOSk7XHJcbiAgICAgICAgICAgIG5hbm9zID0gTnVtYmVyKG5hbm9TdHIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQYXJzZSB0aGUgZGF0ZSB0byBnZXQgdGhlIHNlY29uZHMuXHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh1dGMpO1xyXG4gICAgICAgIHZhciBzZWNvbmRzID0gTWF0aC5mbG9vcihkYXRlLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wKHNlY29uZHMsIG5hbm9zKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYnl0ZXMgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbiBhIHByb3RvLlxyXG4gICAgICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxyXG4gICAgICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcInN0cmluZ1wiIGJlY2F1c2UgdGhhdCdzIHdoYXRcclxuICAgICAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgYnl0ZXMgbXVzdCBiZS4gQnV0IGl0IHNob3VsZCByZXR1cm5cclxuICAgICAqIGFuIFVpbnQ4QXJyYXkgaW4gTm9kZS5cclxuICAgICAqL1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChieXRlcykge1xyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlUHJvdG8zSnNvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gYnl0ZXMudG9CYXNlNjQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSB0eXBpbmdzIHNheSBpdCdzIGEgc3RyaW5nLCBidXQgaXQgbmVlZHMgdG8gYmUgYSBVaW50OEFycmF5IGluIE5vZGUuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVuc2FmZUNhc3RQcm90b0J5dGVTdHJpbmcoYnl0ZXMudG9VaW50OEFycmF5KCkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlIHRoZSBibG9iIGZyb20gdGhlIHByb3RvcyBpbnRvIHRoZSBpbnRlcm5hbCBCbG9iIGNsYXNzLiBOb3RlIHRoYXQgdGhlXHJcbiAgICAgKiB0eXBpbmdzIGFzc3VtZSBhbGwgYmxvYnMgYXJlIHN0cmluZ3MsIGJ1dCB0aGV5IGFyZSBhY3R1YWxseSBVaW50OEFycmF5c1xyXG4gICAgICogb24gTm9kZS5cclxuICAgICAqL1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbUJsb2IgPSBmdW5jdGlvbiAoYmxvYikge1xyXG4gICAgICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMub3B0aW9ucy51c2VQcm90bzNKc29uLCAnRXhwZWN0ZWQgYnl0ZXMgdG8gYmUgcGFzc2VkIGluIGFzIFVpbnQ4QXJyYXksIGJ1dCBnb3QgYSBzdHJpbmcgaW5zdGVhZC4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIEJsb2IuZnJvbUJhc2U2NFN0cmluZyhibG9iKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFzc2VydCghdGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24sICdFeHBlY3RlZCBieXRlcyB0byBiZSBwYXNzZWQgaW4gYXMgVWludDhBcnJheSwgYnV0IGdvdCBhIHN0cmluZyBpbnN0ZWFkLicpO1xyXG4gICAgICAgICAgICByZXR1cm4gQmxvYi5mcm9tVWludDhBcnJheShibG9iKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9WZXJzaW9uID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1RpbWVzdGFtcCh2ZXJzaW9uLnRvVGltZXN0YW1wKCkpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21WZXJzaW9uID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcclxuICAgICAgICBhc3NlcnQoISF2ZXJzaW9uLCBcIlRyeWluZyB0byBkZXNlcmlhbGl6ZSB2ZXJzaW9uIHRoYXQgaXNuJ3Qgc2V0XCIpO1xyXG4gICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcCh0aGlzLmZyb21UaW1lc3RhbXAodmVyc2lvbikpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvUmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKGRhdGFiYXNlSWQsIHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mdWxseVF1YWxpZmllZFByZWZpeFBhdGgoZGF0YWJhc2VJZClcclxuICAgICAgICAgICAgLmNoaWxkKCdkb2N1bWVudHMnKVxyXG4gICAgICAgICAgICAuY2hpbGQocGF0aClcclxuICAgICAgICAgICAgLmNhbm9uaWNhbFN0cmluZygpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21SZXNvdXJjZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHZhciByZXNvdXJjZSA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKG5hbWUpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLmlzVmFsaWRSZXNvdXJjZU5hbWUocmVzb3VyY2UpLCAnVHJpZWQgdG8gZGVzZXJpYWxpemUgaW52YWxpZCBrZXkgJyArIHJlc291cmNlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJldHVybiByZXNvdXJjZTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b05hbWUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9SZXNvdXJjZU5hbWUodGhpcy5kYXRhYmFzZUlkLCBrZXkucGF0aCk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHZhciByZXNvdXJjZSA9IHRoaXMuZnJvbVJlc291cmNlTmFtZShuYW1lKTtcclxuICAgICAgICBhc3NlcnQocmVzb3VyY2UuZ2V0KDEpID09PSB0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkLCAnVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IHByb2plY3Q6ICcgK1xyXG4gICAgICAgICAgICByZXNvdXJjZS5nZXQoMSkgK1xyXG4gICAgICAgICAgICAnIHZzICcgK1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkKTtcclxuICAgICAgICBhc3NlcnQoKCFyZXNvdXJjZS5nZXQoMykgJiYgIXRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSkgfHxcclxuICAgICAgICAgICAgcmVzb3VyY2UuZ2V0KDMpID09PSB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UsICdUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2U6ICcgK1xyXG4gICAgICAgICAgICByZXNvdXJjZS5nZXQoMykgK1xyXG4gICAgICAgICAgICAnIHZzICcgK1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXkodGhpcy5leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZShyZXNvdXJjZSkpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvUXVlcnlQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1Jlc291cmNlTmFtZSh0aGlzLmRhdGFiYXNlSWQsIHBhdGgpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21RdWVyeVBhdGggPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHZhciByZXNvdXJjZU5hbWUgPSB0aGlzLmZyb21SZXNvdXJjZU5hbWUobmFtZSk7XHJcbiAgICAgICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xyXG4gICAgICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXHJcbiAgICAgICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxyXG4gICAgICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXHJcbiAgICAgICAgaWYgKHJlc291cmNlTmFtZS5sZW5ndGggPT09IDQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlc291cmNlUGF0aC5FTVBUWV9QQVRIO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZShyZXNvdXJjZU5hbWUpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZSwgXCJlbmNvZGVkRGF0YWJhc2VJZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gbmV3IFJlc291cmNlUGF0aChbXHJcbiAgICAgICAgICAgICAgICAncHJvamVjdHMnLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCxcclxuICAgICAgICAgICAgICAgICdkYXRhYmFzZXMnLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZ1bGx5UXVhbGlmaWVkUHJlZml4UGF0aCA9IGZ1bmN0aW9uIChkYXRhYmFzZUlkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoW1xyXG4gICAgICAgICAgICAncHJvamVjdHMnLFxyXG4gICAgICAgICAgICBkYXRhYmFzZUlkLnByb2plY3RJZCxcclxuICAgICAgICAgICAgJ2RhdGFiYXNlcycsXHJcbiAgICAgICAgICAgIGRhdGFiYXNlSWQuZGF0YWJhc2VcclxuICAgICAgICBdKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZSA9IGZ1bmN0aW9uIChyZXNvdXJjZU5hbWUpIHtcclxuICAgICAgICBhc3NlcnQocmVzb3VyY2VOYW1lLmxlbmd0aCA+IDQgJiYgcmVzb3VyY2VOYW1lLmdldCg0KSA9PT0gJ2RvY3VtZW50cycsICd0cmllZCB0byBkZXNlcmlhbGl6ZSBpbnZhbGlkIGtleSAnICsgcmVzb3VyY2VOYW1lLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHJldHVybiByZXNvdXJjZU5hbWUucG9wRmlyc3QoNSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuaXNWYWxpZFJlc291cmNlTmFtZSA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgLy8gUmVzb3VyY2UgbmFtZXMgaGF2ZSBhdCBsZWFzdCA0IGNvbXBvbmVudHMgKHByb2plY3QgSUQsIGRhdGFiYXNlIElEKVxyXG4gICAgICAgIHJldHVybiAocGF0aC5sZW5ndGggPj0gNCAmJlxyXG4gICAgICAgICAgICBwYXRoLmdldCgwKSA9PT0gJ3Byb2plY3RzJyAmJlxyXG4gICAgICAgICAgICBwYXRoLmdldCgyKSA9PT0gJ2RhdGFiYXNlcycpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvVmFsdWUgPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIE51bGxWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBudWxsVmFsdWU6ICdOVUxMX1ZBTFVFJyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBCb29sZWFuVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgYm9vbGVhblZhbHVlOiB2YWwudmFsdWUoKSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBJbnRlZ2VyVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgaW50ZWdlclZhbHVlOiAnJyArIHZhbC52YWx1ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIERvdWJsZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBkb3VibGVWYWx1ZSA9IHZhbC52YWx1ZSgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFByb3RvIDMgbGV0J3MgdXMgZW5jb2RlIE5hTiBhbmQgSW5maW5pdHkgYXMgc3RyaW5nIHZhbHVlcyBhc1xyXG4gICAgICAgICAgICAgICAgLy8gZXhwZWN0ZWQgYnkgdGhlIGJhY2tlbmQuIFRoaXMgaXMgY3VycmVudGx5IG5vdCBjaGVja2VkIGJ5IG91ciB1bml0XHJcbiAgICAgICAgICAgICAgICAvLyB0ZXN0cyBiZWNhdXNlIHRoZXkgcmVseSBvbiBwcm90b2J1Zi5qcy5cclxuICAgICAgICAgICAgICAgIGlmIChpc05hTihkb3VibGVWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkb3VibGVWYWx1ZTogJ05hTicgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRvdWJsZVZhbHVlID09PSBJbmZpbml0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRvdWJsZVZhbHVlOiAnSW5maW5pdHknIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkb3VibGVWYWx1ZSA9PT0gLUluZmluaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZG91YmxlVmFsdWU6ICctSW5maW5pdHknIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHsgZG91YmxlVmFsdWU6IHZhbC52YWx1ZSgpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIFN0cmluZ1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN0cmluZ1ZhbHVlOiB2YWwudmFsdWUoKSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBtYXBWYWx1ZTogdGhpcy50b01hcFZhbHVlKHZhbCkgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgQXJyYXlWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBhcnJheVZhbHVlOiB0aGlzLnRvQXJyYXlWYWx1ZSh2YWwpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIFRpbWVzdGFtcFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogdGhpcy50b1RpbWVzdGFtcCh2YWwuaW50ZXJuYWxWYWx1ZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgR2VvUG9pbnRWYWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiB2YWwudmFsdWUoKS5sYXRpdHVkZSxcclxuICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHZhbC52YWx1ZSgpLmxvbmdpdHVkZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBCbG9iVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzVmFsdWU6IHRoaXMudG9CeXRlcyh2YWwudmFsdWUoKSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgUmVmVmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZVZhbHVlOiB0aGlzLnRvUmVzb3VyY2VOYW1lKHZhbC5kYXRhYmFzZUlkLCB2YWwua2V5LnBhdGgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBGaWVsZFZhbHVlICcgKyBKU09OLnN0cmluZ2lmeSh2YWwpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVZhbHVlID0gZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCdudWxsVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gTnVsbFZhbHVlLklOU1RBTkNFO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnYm9vbGVhblZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW5WYWx1ZS5vZihvYmouYm9vbGVhblZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2ludGVnZXJWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50ZWdlclZhbHVlKHBhcnNlSW50NjQob2JqLmludGVnZXJWYWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnZG91YmxlVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnVzZVByb3RvM0pzb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIFByb3RvIDMgdXNlcyB0aGUgc3RyaW5nIHZhbHVlcyAnTmFOJyBhbmQgJ0luZmluaXR5Jy5cclxuICAgICAgICAgICAgICAgIGlmIChvYmouZG91YmxlVmFsdWUgPT09ICdOYU4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERvdWJsZVZhbHVlLk5BTjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9iai5kb3VibGVWYWx1ZSA9PT0gJ0luZmluaXR5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEb3VibGVWYWx1ZS5QT1NJVElWRV9JTkZJTklUWTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9iai5kb3VibGVWYWx1ZSA9PT0gJy1JbmZpbml0eScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRG91YmxlVmFsdWUuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEb3VibGVWYWx1ZShvYmouZG91YmxlVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnc3RyaW5nVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1ZhbHVlKG9iai5zdHJpbmdWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdtYXBWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21GaWVsZHMob2JqLm1hcFZhbHVlLmZpZWxkcyB8fCB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdhcnJheVZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgLy8gXCJ2YWx1ZXNcIiBpcyBub3QgcHJlc2VudCBpZiB0aGUgYXJyYXkgaXMgZW1wdHlcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChvYmouYXJyYXlWYWx1ZSwgJ2FycmF5VmFsdWUnKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IG9iai5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheVZhbHVlKHZhbHVlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIF90aGlzLmZyb21WYWx1ZSh2KTsgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgndGltZXN0YW1wVmFsdWUnIGluIG9iaikge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KG9iai50aW1lc3RhbXBWYWx1ZSwgJ3RpbWVzdGFtcFZhbHVlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wVmFsdWUodGhpcy5mcm9tVGltZXN0YW1wKG9iai50aW1lc3RhbXBWYWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnZ2VvUG9pbnRWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQob2JqLmdlb1BvaW50VmFsdWUsICdnZW9Qb2ludFZhbHVlJyk7XHJcbiAgICAgICAgICAgIHZhciBsYXRpdHVkZSA9IG9iai5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlIHx8IDA7XHJcbiAgICAgICAgICAgIHZhciBsb25naXR1ZGUgPSBvYmouZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUgfHwgMDtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW9Qb2ludFZhbHVlKG5ldyBHZW9Qb2ludChsYXRpdHVkZSwgbG9uZ2l0dWRlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdieXRlc1ZhbHVlJyBpbiBvYmopIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChvYmouYnl0ZXNWYWx1ZSwgJ2J5dGVzVmFsdWUnKTtcclxuICAgICAgICAgICAgdmFyIGJsb2IgPSB0aGlzLmZyb21CbG9iKG9iai5ieXRlc1ZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9iVmFsdWUoYmxvYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdyZWZlcmVuY2VWYWx1ZScgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQob2JqLnJlZmVyZW5jZVZhbHVlLCAncmVmZXJlbmNlVmFsdWUnKTtcclxuICAgICAgICAgICAgdmFyIHJlc291cmNlTmFtZSA9IHRoaXMuZnJvbVJlc291cmNlTmFtZShvYmoucmVmZXJlbmNlVmFsdWUpO1xyXG4gICAgICAgICAgICB2YXIgZGJJZCA9IG5ldyBEYXRhYmFzZUlkKHJlc291cmNlTmFtZS5nZXQoMSksIHJlc291cmNlTmFtZS5nZXQoMykpO1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gbmV3IERvY3VtZW50S2V5KHRoaXMuZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUocmVzb3VyY2VOYW1lKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVmVmFsdWUoZGJJZCwga2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIFZhbHVlIHByb3RvICcgKyBKU09OLnN0cmluZ2lmeShvYmopKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqIENyZWF0ZXMgYW4gYXBpLkRvY3VtZW50IGZyb20ga2V5IGFuZCBmaWVsZHMgKGJ1dCBubyBjcmVhdGUvdXBkYXRlIHRpbWUpICovXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b011dGF0aW9uRG9jdW1lbnQgPSBmdW5jdGlvbiAoa2V5LCBmaWVsZHMpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnRvTmFtZShrZXkpLFxyXG4gICAgICAgICAgICBmaWVsZHM6IHRoaXMudG9GaWVsZHMoZmllbGRzKVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9Eb2N1bWVudCA9IGZ1bmN0aW9uIChkb2N1bWVudCkge1xyXG4gICAgICAgIGFzc2VydCghZG9jdW1lbnQuaGFzTG9jYWxNdXRhdGlvbnMsIFwiQ2FuJ3Qgc2VyaWFsaXplIGRvY3VtZW50cyB3aXRoIG11dGF0aW9ucy5cIik7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy50b05hbWUoZG9jdW1lbnQua2V5KSxcclxuICAgICAgICAgICAgZmllbGRzOiB0aGlzLnRvRmllbGRzKGRvY3VtZW50LmRhdGEoKSksXHJcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHRoaXMudG9UaW1lc3RhbXAoZG9jdW1lbnQudmVyc2lvbi50b1RpbWVzdGFtcCgpKVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbURvY3VtZW50ID0gZnVuY3Rpb24gKGRvY3VtZW50LCBoYXNDb21taXR0ZWRNdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKGRvY3VtZW50Lm5hbWUpO1xyXG4gICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tVmVyc2lvbihkb2N1bWVudC51cGRhdGVUaW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50KGtleSwgdmVyc2lvbiwgeyBoYXNDb21taXR0ZWRNdXRhdGlvbnM6ICEhaGFzQ29tbWl0dGVkTXV0YXRpb25zIH0sIHVuZGVmaW5lZCwgZG9jdW1lbnQsIGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy5mcm9tVmFsdWUodik7IH0pO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRmllbGRzID0gZnVuY3Rpb24gKGZpZWxkcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIGZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gX3RoaXMudG9WYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRmllbGRzID0gZnVuY3Rpb24gKG9iamVjdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gUHJvdG8gbWFwPHN0cmluZywgVmFsdWU+IGdldHMgbWFwcGVkIHRvIE9iamVjdCwgc28gY2FzdCBpdC5cclxuICAgICAgICB2YXIgbWFwID0gb2JqZWN0O1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBPYmplY3RWYWx1ZS5FTVBUWTtcclxuICAgICAgICBmb3JFYWNoKG1hcCwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNldChuZXcgRmllbGRQYXRoKFtrZXldKSwgX3RoaXMuZnJvbVZhbHVlKHZhbHVlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b01hcFZhbHVlID0gZnVuY3Rpb24gKG1hcCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpZWxkczogdGhpcy50b0ZpZWxkcyhtYXApXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0FycmF5VmFsdWUgPSBmdW5jdGlvbiAoYXJyYXkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChfdGhpcy50b1ZhbHVlKHZhbHVlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHsgdmFsdWVzOiByZXN1bHQgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRm91bmQgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBhc3NlcnQoISFkb2MuZm91bmQsICdUcmllZCB0byBkZXNlcmlhbGl6ZSBhIGZvdW5kIGRvY3VtZW50IGZyb20gYSBtaXNzaW5nIGRvY3VtZW50LicpO1xyXG4gICAgICAgIGFzc2VydFByZXNlbnQoZG9jLmZvdW5kLm5hbWUsICdkb2MuZm91bmQubmFtZScpO1xyXG4gICAgICAgIGFzc2VydFByZXNlbnQoZG9jLmZvdW5kLnVwZGF0ZVRpbWUsICdkb2MuZm91bmQudXBkYXRlVGltZScpO1xyXG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKGRvYy5mb3VuZC5uYW1lKTtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMuZnJvbVZlcnNpb24oZG9jLmZvdW5kLnVwZGF0ZVRpbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCB7fSwgdW5kZWZpbmVkLCBkb2MuZm91bmQsIGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5mcm9tVmFsdWUodik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbU1pc3NpbmcgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgYXNzZXJ0KCEhcmVzdWx0Lm1pc3NpbmcsICdUcmllZCB0byBkZXNlcmlhbGl6ZSBhIG1pc3NpbmcgZG9jdW1lbnQgZnJvbSBhIGZvdW5kIGRvY3VtZW50LicpO1xyXG4gICAgICAgIGFzc2VydCghIXJlc3VsdC5yZWFkVGltZSwgJ1RyaWVkIHRvIGRlc2VyaWFsaXplIGEgbWlzc2luZyBkb2N1bWVudCB3aXRob3V0IGEgcmVhZCB0aW1lLicpO1xyXG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKHJlc3VsdC5taXNzaW5nKTtcclxuICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMuZnJvbVZlcnNpb24ocmVzdWx0LnJlYWRUaW1lKTtcclxuICAgICAgICByZXR1cm4gbmV3IE5vRG9jdW1lbnQoa2V5LCB2ZXJzaW9uKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tTWF5YmVEb2N1bWVudCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICBpZiAoJ2ZvdW5kJyBpbiByZXN1bHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbUZvdW5kKHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdtaXNzaW5nJyBpbiByZXN1bHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbU1pc3NpbmcocmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhaWwoJ2ludmFsaWQgYmF0Y2ggZ2V0IHJlc3BvbnNlOiAnICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9XYXRjaFRhcmdldENoYW5nZVN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQWRkZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0FERCc7XHJcbiAgICAgICAgICAgIGNhc2UgV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdDVVJSRU5UJztcclxuICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLk5vQ2hhbmdlOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdOT19DSEFOR0UnO1xyXG4gICAgICAgICAgICBjYXNlIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnUkVNT1ZFJztcclxuICAgICAgICAgICAgY2FzZSBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdSRVNFVCc7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBXYXRjaFRhcmdldENoYW5nZVN0YXRlOiAnICsgc3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1Rlc3RXYXRjaENoYW5nZSA9IGZ1bmN0aW9uICh3YXRjaENoYW5nZSkge1xyXG4gICAgICAgIGlmICh3YXRjaENoYW5nZSBpbnN0YW5jZW9mIEV4aXN0ZW5jZUZpbHRlckNoYW5nZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IHdhdGNoQ2hhbmdlLmV4aXN0ZW5jZUZpbHRlci5jb3VudCxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogd2F0Y2hDaGFuZ2UudGFyZ2V0SWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHdhdGNoQ2hhbmdlIGluc3RhbmNlb2YgRG9jdW1lbnRXYXRjaENoYW5nZSkge1xyXG4gICAgICAgICAgICBpZiAod2F0Y2hDaGFuZ2UubmV3RG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb2MgPSB3YXRjaENoYW5nZS5uZXdEb2M7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50Q2hhbmdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnRvTmFtZShkb2Mua2V5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogdGhpcy50b0ZpZWxkcyhkb2MuZGF0YSgpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHRoaXMudG9WZXJzaW9uKGRvYy52ZXJzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZHM6IHdhdGNoQ2hhbmdlLnVwZGF0ZWRUYXJnZXRJZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRUYXJnZXRJZHM6IHdhdGNoQ2hhbmdlLnJlbW92ZWRUYXJnZXRJZHNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHdhdGNoQ2hhbmdlLm5ld0RvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb2MgPSB3YXRjaENoYW5nZS5uZXdEb2M7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50RGVsZXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLnRvTmFtZShkb2Mua2V5KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZFRpbWU6IHRoaXMudG9WZXJzaW9uKGRvYy52ZXJzaW9uKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZFRhcmdldElkczogd2F0Y2hDaGFuZ2UucmVtb3ZlZFRhcmdldElkc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAod2F0Y2hDaGFuZ2UubmV3RG9jID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50UmVtb3ZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLnRvTmFtZSh3YXRjaENoYW5nZS5rZXkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVkVGFyZ2V0SWRzOiB3YXRjaENoYW5nZS5yZW1vdmVkVGFyZ2V0SWRzXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAod2F0Y2hDaGFuZ2UgaW5zdGFuY2VvZiBXYXRjaFRhcmdldENoYW5nZSkge1xyXG4gICAgICAgICAgICB2YXIgY2F1c2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGlmICh3YXRjaENoYW5nZS5jYXVzZSkge1xyXG4gICAgICAgICAgICAgICAgY2F1c2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogbWFwUnBjQ29kZUZyb21Db2RlKHdhdGNoQ2hhbmdlLmNhdXNlLmNvZGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHdhdGNoQ2hhbmdlLmNhdXNlLm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldENoYW5nZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldENoYW5nZVR5cGU6IHRoaXMudG9XYXRjaFRhcmdldENoYW5nZVN0YXRlKHdhdGNoQ2hhbmdlLnN0YXRlKSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZHM6IHdhdGNoQ2hhbmdlLnRhcmdldElkcyxcclxuICAgICAgICAgICAgICAgICAgICByZXN1bWVUb2tlbjogdGhpcy51bnNhZmVDYXN0UHJvdG9CeXRlU3RyaW5nKHdhdGNoQ2hhbmdlLnJlc3VtZVRva2VuKSxcclxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogY2F1c2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhaWwoJ1VucmVjb2duaXplZCB3YXRjaCBjaGFuZ2U6ICcgKyBKU09OLnN0cmluZ2lmeSh3YXRjaENoYW5nZSkpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21XYXRjaENoYW5nZSA9IGZ1bmN0aW9uIChjaGFuZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB3YXRjaENoYW5nZTtcclxuICAgICAgICBpZiAoJ3RhcmdldENoYW5nZScgaW4gY2hhbmdlKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoY2hhbmdlLnRhcmdldENoYW5nZSwgJ3RhcmdldENoYW5nZScpO1xyXG4gICAgICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcclxuICAgICAgICAgICAgLy8gaWYgdW5zZXRcclxuICAgICAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5mcm9tV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZShjaGFuZ2UudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgJ05PX0NIQU5HRScpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWRzID0gY2hhbmdlLnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW107XHJcbiAgICAgICAgICAgIHZhciByZXN1bWVUb2tlbiA9IGNoYW5nZS50YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4gfHwgdGhpcy5lbXB0eUJ5dGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgdmFyIGNhdXNlUHJvdG8gPSBjaGFuZ2UudGFyZ2V0Q2hhbmdlLmNhdXNlO1xyXG4gICAgICAgICAgICB2YXIgY2F1c2UgPSBjYXVzZVByb3RvICYmIHRoaXMuZnJvbVJwY1N0YXR1cyhjYXVzZVByb3RvKTtcclxuICAgICAgICAgICAgd2F0Y2hDaGFuZ2UgPSBuZXcgV2F0Y2hUYXJnZXRDaGFuZ2Uoc3RhdGUsIHRhcmdldElkcywgcmVzdW1lVG9rZW4sIGNhdXNlIHx8IG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnZG9jdW1lbnRDaGFuZ2UnIGluIGNoYW5nZSkge1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGNoYW5nZS5kb2N1bWVudENoYW5nZSwgJ2RvY3VtZW50Q2hhbmdlJyk7XHJcbiAgICAgICAgICAgIHZhciBlbnRpdHlDaGFuZ2UgPSBjaGFuZ2UuZG9jdW1lbnRDaGFuZ2U7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQoZW50aXR5Q2hhbmdlLmRvY3VtZW50LCAnZG9jdW1lbnRDaGFuZ2UubmFtZScpO1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGVudGl0eUNoYW5nZS5kb2N1bWVudC5uYW1lLCAnZG9jdW1lbnRDaGFuZ2UuZG9jdW1lbnQubmFtZScpO1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGVudGl0eUNoYW5nZS5kb2N1bWVudC51cGRhdGVUaW1lLCAnZG9jdW1lbnRDaGFuZ2UuZG9jdW1lbnQudXBkYXRlVGltZScpO1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5mcm9tTmFtZShlbnRpdHlDaGFuZ2UuZG9jdW1lbnQubmFtZSk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gdGhpcy5mcm9tVmVyc2lvbihlbnRpdHlDaGFuZ2UuZG9jdW1lbnQudXBkYXRlVGltZSk7XHJcbiAgICAgICAgICAgIHZhciBkb2MgPSBuZXcgRG9jdW1lbnQoa2V5LCB2ZXJzaW9uLCB7fSwgdW5kZWZpbmVkLCBlbnRpdHlDaGFuZ2UuZG9jdW1lbnQsIGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy5mcm9tVmFsdWUodik7IH0pO1xyXG4gICAgICAgICAgICB2YXIgdXBkYXRlZFRhcmdldElkcyA9IGVudGl0eUNoYW5nZS50YXJnZXRJZHMgfHwgW107XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVkVGFyZ2V0SWRzID0gZW50aXR5Q2hhbmdlLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XHJcbiAgICAgICAgICAgIHdhdGNoQ2hhbmdlID0gbmV3IERvY3VtZW50V2F0Y2hDaGFuZ2UodXBkYXRlZFRhcmdldElkcywgcmVtb3ZlZFRhcmdldElkcywgZG9jLmtleSwgZG9jKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2RvY3VtZW50RGVsZXRlJyBpbiBjaGFuZ2UpIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChjaGFuZ2UuZG9jdW1lbnREZWxldGUsICdkb2N1bWVudERlbGV0ZScpO1xyXG4gICAgICAgICAgICB2YXIgZG9jRGVsZXRlID0gY2hhbmdlLmRvY3VtZW50RGVsZXRlO1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGRvY0RlbGV0ZS5kb2N1bWVudCwgJ2RvY3VtZW50RGVsZXRlLmRvY3VtZW50Jyk7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKGRvY0RlbGV0ZS5kb2N1bWVudCk7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gZG9jRGVsZXRlLnJlYWRUaW1lXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuZnJvbVZlcnNpb24oZG9jRGVsZXRlLnJlYWRUaW1lKVxyXG4gICAgICAgICAgICAgICAgOiBTbmFwc2hvdFZlcnNpb24uZm9yRGVsZXRlZERvYygpO1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gbmV3IE5vRG9jdW1lbnQoa2V5LCB2ZXJzaW9uKTtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZWRUYXJnZXRJZHMgPSBkb2NEZWxldGUucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcclxuICAgICAgICAgICAgd2F0Y2hDaGFuZ2UgPSBuZXcgRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgcmVtb3ZlZFRhcmdldElkcywgZG9jLmtleSwgZG9jKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ2RvY3VtZW50UmVtb3ZlJyBpbiBjaGFuZ2UpIHtcclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChjaGFuZ2UuZG9jdW1lbnRSZW1vdmUsICdkb2N1bWVudFJlbW92ZScpO1xyXG4gICAgICAgICAgICB2YXIgZG9jUmVtb3ZlID0gY2hhbmdlLmRvY3VtZW50UmVtb3ZlO1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGRvY1JlbW92ZS5kb2N1bWVudCwgJ2RvY3VtZW50UmVtb3ZlJyk7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKGRvY1JlbW92ZS5kb2N1bWVudCk7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVkVGFyZ2V0SWRzID0gZG9jUmVtb3ZlLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XHJcbiAgICAgICAgICAgIHdhdGNoQ2hhbmdlID0gbmV3IERvY3VtZW50V2F0Y2hDaGFuZ2UoW10sIHJlbW92ZWRUYXJnZXRJZHMsIGtleSwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdmaWx0ZXInIGluIGNoYW5nZSkge1xyXG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IGltcGxlbWVudCBleGlzdGVuY2UgZmlsdGVyIHBhcnNpbmcgd2l0aCBzdHJhdGVneS5cclxuICAgICAgICAgICAgYXNzZXJ0UHJlc2VudChjaGFuZ2UuZmlsdGVyLCAnZmlsdGVyJyk7XHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBjaGFuZ2UuZmlsdGVyO1xyXG4gICAgICAgICAgICBhc3NlcnRQcmVzZW50KGZpbHRlci50YXJnZXRJZCwgJ2ZpbHRlci50YXJnZXRJZCcpO1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSBmaWx0ZXIuY291bnQgfHwgMDtcclxuICAgICAgICAgICAgdmFyIGV4aXN0ZW5jZUZpbHRlciA9IG5ldyBFeGlzdGVuY2VGaWx0ZXIoY291bnQpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQgPSBmaWx0ZXIudGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgIHdhdGNoQ2hhbmdlID0gbmV3IEV4aXN0ZW5jZUZpbHRlckNoYW5nZSh0YXJnZXRJZCwgZXhpc3RlbmNlRmlsdGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIGNoYW5nZSB0eXBlICcgKyBKU09OLnN0cmluZ2lmeShjaGFuZ2UpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHdhdGNoQ2hhbmdlO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21XYXRjaFRhcmdldENoYW5nZVN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgaWYgKHN0YXRlID09PSAnTk9fQ0hBTkdFJykge1xyXG4gICAgICAgICAgICByZXR1cm4gV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICdBREQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzdGF0ZSA9PT0gJ1JFTU9WRScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc3RhdGUgPT09ICdDVVJSRU5UJykge1xyXG4gICAgICAgICAgICByZXR1cm4gV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzdGF0ZSA9PT0gJ1JFU0VUJykge1xyXG4gICAgICAgICAgICByZXR1cm4gV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdHb3QgdW5leHBlY3RlZCBUYXJnZXRDaGFuZ2Uuc3RhdGU6ICcgKyBzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnZlcnNpb25Gcm9tTGlzdGVuUmVzcG9uc2UgPSBmdW5jdGlvbiAoY2hhbmdlKSB7XHJcbiAgICAgICAgLy8gV2UgaGF2ZSBvbmx5IHJlYWNoZWQgYSBjb25zaXN0ZW50IHNuYXBzaG90IGZvciB0aGUgZW50aXJlIHN0cmVhbSBpZiB0aGVyZVxyXG4gICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxyXG4gICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXHJcbiAgICAgICAgaWYgKCEoJ3RhcmdldENoYW5nZScgaW4gY2hhbmdlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLk1JTjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRhcmdldENoYW5nZSA9IGNoYW5nZS50YXJnZXRDaGFuZ2U7XHJcbiAgICAgICAgaWYgKHRhcmdldENoYW5nZS50YXJnZXRJZHMgJiYgdGFyZ2V0Q2hhbmdlLnRhcmdldElkcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5NSU47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGFyZ2V0Q2hhbmdlLnJlYWRUaW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTbmFwc2hvdFZlcnNpb24uTUlOO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5mcm9tVmVyc2lvbih0YXJnZXRDaGFuZ2UucmVhZFRpbWUpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvTXV0YXRpb24gPSBmdW5jdGlvbiAobXV0YXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgaWYgKG11dGF0aW9uIGluc3RhbmNlb2YgU2V0TXV0YXRpb24pIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlOiB0aGlzLnRvTXV0YXRpb25Eb2N1bWVudChtdXRhdGlvbi5rZXksIG11dGF0aW9uLnZhbHVlKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtdXRhdGlvbiBpbnN0YW5jZW9mIERlbGV0ZU11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHsgZGVsZXRlOiB0aGlzLnRvTmFtZShtdXRhdGlvbi5rZXkpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG11dGF0aW9uIGluc3RhbmNlb2YgUGF0Y2hNdXRhdGlvbikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHRoaXMudG9NdXRhdGlvbkRvY3VtZW50KG11dGF0aW9uLmtleSwgbXV0YXRpb24uZGF0YSksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVNYXNrOiB0aGlzLnRvRG9jdW1lbnRNYXNrKG11dGF0aW9uLmZpZWxkTWFzaylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobXV0YXRpb24gaW5zdGFuY2VvZiBUcmFuc2Zvcm1NdXRhdGlvbikge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudDogdGhpcy50b05hbWUobXV0YXRpb24ua2V5KSxcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFRyYW5zZm9ybXM6IG11dGF0aW9uLmZpZWxkVHJhbnNmb3Jtcy5tYXAoZnVuY3Rpb24gKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudG9GaWVsZFRyYW5zZm9ybSh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBtdXRhdGlvbiB0eXBlICcgKyBtdXRhdGlvbi50eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFtdXRhdGlvbi5wcmVjb25kaXRpb24uaXNOb25lKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5jdXJyZW50RG9jdW1lbnQgPSB0aGlzLnRvUHJlY29uZGl0aW9uKG11dGF0aW9uLnByZWNvbmRpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbU11dGF0aW9uID0gZnVuY3Rpb24gKHByb3RvKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcHJlY29uZGl0aW9uID0gcHJvdG8uY3VycmVudERvY3VtZW50XHJcbiAgICAgICAgICAgID8gdGhpcy5mcm9tUHJlY29uZGl0aW9uKHByb3RvLmN1cnJlbnREb2N1bWVudClcclxuICAgICAgICAgICAgOiBQcmVjb25kaXRpb24uTk9ORTtcclxuICAgICAgICBpZiAocHJvdG8udXBkYXRlKSB7XHJcbiAgICAgICAgICAgIGFzc2VydFByZXNlbnQocHJvdG8udXBkYXRlLm5hbWUsICduYW1lJyk7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKHByb3RvLnVwZGF0ZS5uYW1lKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5mcm9tRmllbGRzKHByb3RvLnVwZGF0ZS5maWVsZHMgfHwge30pO1xyXG4gICAgICAgICAgICBpZiAocHJvdG8udXBkYXRlTWFzaykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkTWFzayA9IHRoaXMuZnJvbURvY3VtZW50TWFzayhwcm90by51cGRhdGVNYXNrKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGF0Y2hNdXRhdGlvbihrZXksIHZhbHVlLCBmaWVsZE1hc2ssIHByZWNvbmRpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNldE11dGF0aW9uKGtleSwgdmFsdWUsIHByZWNvbmRpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocHJvdG8uZGVsZXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSB0aGlzLmZyb21OYW1lKHByb3RvLmRlbGV0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGVsZXRlTXV0YXRpb24oa2V5LCBwcmVjb25kaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwcm90by50cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZnJvbU5hbWUocHJvdG8udHJhbnNmb3JtLmRvY3VtZW50KTtcclxuICAgICAgICAgICAgdmFyIGZpZWxkVHJhbnNmb3JtcyA9IHByb3RvLnRyYW5zZm9ybS5maWVsZFRyYW5zZm9ybXMubWFwKGZ1bmN0aW9uICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5mcm9tRmllbGRUcmFuc2Zvcm0odHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFzc2VydChwcmVjb25kaXRpb24uZXhpc3RzID09PSB0cnVlLCAnVHJhbnNmb3JtcyBvbmx5IHN1cHBvcnQgcHJlY29uZGl0aW9uIFwiZXhpc3RzID09IHRydWVcIicpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybU11dGF0aW9uKGtleSwgZmllbGRUcmFuc2Zvcm1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCd1bmtub3duIG11dGF0aW9uIHByb3RvOiAnICsgSlNPTi5zdHJpbmdpZnkocHJvdG8pKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9QcmVjb25kaXRpb24gPSBmdW5jdGlvbiAocHJlY29uZGl0aW9uKSB7XHJcbiAgICAgICAgYXNzZXJ0KCFwcmVjb25kaXRpb24uaXNOb25lLCBcIkNhbid0IHNlcmlhbGl6ZSBhbiBlbXB0eSBwcmVjb25kaXRpb25cIik7XHJcbiAgICAgICAgaWYgKHByZWNvbmRpdGlvbi51cGRhdGVUaW1lICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHRoaXMudG9WZXJzaW9uKHByZWNvbmRpdGlvbi51cGRhdGVUaW1lKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwcmVjb25kaXRpb24uZXhpc3RzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgZXhpc3RzOiBwcmVjb25kaXRpb24uZXhpc3RzIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBwcmVjb25kaXRpb24nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVByZWNvbmRpdGlvbiA9IGZ1bmN0aW9uIChwcmVjb25kaXRpb24pIHtcclxuICAgICAgICBpZiAocHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUodGhpcy5mcm9tVmVyc2lvbihwcmVjb25kaXRpb24udXBkYXRlVGltZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwcmVjb25kaXRpb24uZXhpc3RzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbi5leGlzdHMocHJlY29uZGl0aW9uLmV4aXN0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLk5PTkU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Xcml0ZVJlc3VsdCA9IGZ1bmN0aW9uIChwcm90bywgY29tbWl0VGltZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gTk9URTogRGVsZXRlcyBkb24ndCBoYXZlIGFuIHVwZGF0ZVRpbWUuXHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBwcm90by51cGRhdGVUaW1lXHJcbiAgICAgICAgICAgID8gdGhpcy5mcm9tVmVyc2lvbihwcm90by51cGRhdGVUaW1lKVxyXG4gICAgICAgICAgICA6IHRoaXMuZnJvbVZlcnNpb24oY29tbWl0VGltZSk7XHJcbiAgICAgICAgaWYgKHZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24uTUlOKSkge1xyXG4gICAgICAgICAgICAvLyBUaGUgRmlyZXN0b3JlIEVtdWxhdG9yIGN1cnJlbnRseSByZXR1cm5zIGFuIHVwZGF0ZSB0aW1lIG9mIDAgZm9yXHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZXMgb2Ygbm9uLWV4aXN0aW5nIGRvY3VtZW50cyAocmF0aGVyIHRoYW4gbnVsbCkuIFRoaXMgYnJlYWtzIHRoZVxyXG4gICAgICAgICAgICAvLyB0ZXN0IFwiZ2V0IGRlbGV0ZWQgZG9jIHdoaWxlIG9mZmxpbmUgd2l0aCBzb3VyY2U9Y2FjaGVcIiBhcyBOb0RvY3VtZW50c1xyXG4gICAgICAgICAgICAvLyB3aXRoIHZlcnNpb24gMCBhcmUgZmlsdGVyZWQgYnkgSW5kZXhlZERiJ3MgUmVtb3RlRG9jdW1lbnRDYWNoZS5cclxuICAgICAgICAgICAgLy8gVE9ETygjMjE0OSk6IFJlbW92ZSB0aGlzIHdoZW4gRW11bGF0b3IgaXMgZml4ZWRcclxuICAgICAgICAgICAgdmVyc2lvbiA9IHRoaXMuZnJvbVZlcnNpb24oY29tbWl0VGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0cmFuc2Zvcm1SZXN1bHRzID0gbnVsbDtcclxuICAgICAgICBpZiAocHJvdG8udHJhbnNmb3JtUmVzdWx0cyAmJiBwcm90by50cmFuc2Zvcm1SZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdHJhbnNmb3JtUmVzdWx0cyA9IHByb3RvLnRyYW5zZm9ybVJlc3VsdHMubWFwKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5mcm9tVmFsdWUocmVzdWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25SZXN1bHQodmVyc2lvbiwgdHJhbnNmb3JtUmVzdWx0cyk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVdyaXRlUmVzdWx0cyA9IGZ1bmN0aW9uIChwcm90b3MsIGNvbW1pdFRpbWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChwcm90b3MgJiYgcHJvdG9zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgYXNzZXJ0KGNvbW1pdFRpbWUgIT09IHVuZGVmaW5lZCwgJ1JlY2VpdmVkIGEgd3JpdGUgcmVzdWx0IHdpdGhvdXQgYSBjb21taXQgdGltZScpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG9zLm1hcChmdW5jdGlvbiAocHJvdG8pIHsgcmV0dXJuIF90aGlzLmZyb21Xcml0ZVJlc3VsdChwcm90bywgY29tbWl0VGltZSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0ZpZWxkVHJhbnNmb3JtID0gZnVuY3Rpb24gKGZpZWxkVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgdHJhbnNmb3JtID0gZmllbGRUcmFuc2Zvcm0udHJhbnNmb3JtO1xyXG4gICAgICAgIGlmICh0cmFuc2Zvcm0gaW5zdGFuY2VvZiBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpZWxkUGF0aDogZmllbGRUcmFuc2Zvcm0uZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICBzZXRUb1NlcnZlclZhbHVlOiAnUkVRVUVTVF9USU1FJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0cmFuc2Zvcm0gaW5zdGFuY2VvZiBBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZFBhdGg6IGZpZWxkVHJhbnNmb3JtLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiB0cmFuc2Zvcm0uZWxlbWVudHMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy50b1ZhbHVlKHYpOyB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0cmFuc2Zvcm0gaW5zdGFuY2VvZiBBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZmllbGRQYXRoOiBmaWVsZFRyYW5zZm9ybS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHJlbW92ZUFsbEZyb21BcnJheToge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogdHJhbnNmb3JtLmVsZW1lbnRzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gX3RoaXMudG9WYWx1ZSh2KTsgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHJhbnNmb3JtIGluc3RhbmNlb2YgTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZmllbGRQYXRoOiBmaWVsZFRyYW5zZm9ybS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIGluY3JlbWVudDogdGhpcy50b1ZhbHVlKHRyYW5zZm9ybS5vcGVyYW5kKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgZmFpbCgnVW5rbm93biB0cmFuc2Zvcm06ICcgKyBmaWVsZFRyYW5zZm9ybS50cmFuc2Zvcm0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRmllbGRUcmFuc2Zvcm0gPSBmdW5jdGlvbiAocHJvdG8pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0cmFuc2Zvcm0gPSBudWxsO1xyXG4gICAgICAgIGlmICgnc2V0VG9TZXJ2ZXJWYWx1ZScgaW4gcHJvdG8pIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHByb3RvLnNldFRvU2VydmVyVmFsdWUgPT09ICdSRVFVRVNUX1RJTUUnLCAnVW5rbm93biBzZXJ2ZXIgdmFsdWUgdHJhbnNmb3JtIHByb3RvOiAnICsgSlNPTi5zdHJpbmdpZnkocHJvdG8pKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtID0gU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtLmluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgnYXBwZW5kTWlzc2luZ0VsZW1lbnRzJyBpbiBwcm90bykge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gcHJvdG8uYXBwZW5kTWlzc2luZ0VsZW1lbnRzLnZhbHVlcyB8fCBbXTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtID0gbmV3IEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24odmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKHYpOyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdyZW1vdmVBbGxGcm9tQXJyYXknIGluIHByb3RvKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBwcm90by5yZW1vdmVBbGxGcm9tQXJyYXkudmFsdWVzIHx8IFtdO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSBuZXcgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24odmFsdWVzLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gX3RoaXMuZnJvbVZhbHVlKHYpOyB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCdpbmNyZW1lbnQnIGluIHByb3RvKSB7XHJcbiAgICAgICAgICAgIHZhciBvcGVyYW5kID0gdGhpcy5mcm9tVmFsdWUocHJvdG8uaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgYXNzZXJ0KG9wZXJhbmQgaW5zdGFuY2VvZiBOdW1iZXJWYWx1ZSwgJ05VTUVSSUNfQUREIHRyYW5zZm9ybSByZXF1aXJlcyBhIE51bWJlclZhbHVlJyk7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IG5ldyBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKG9wZXJhbmQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZmFpbCgnVW5rbm93biB0cmFuc2Zvcm0gcHJvdG86ICcgKyBKU09OLnN0cmluZ2lmeShwcm90bykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmllbGRQYXRoID0gRmllbGRQYXRoLmZyb21TZXJ2ZXJGb3JtYXQocHJvdG8uZmllbGRQYXRoKTtcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGZpZWxkUGF0aCwgdHJhbnNmb3JtKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0RvY3VtZW50c1RhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICByZXR1cm4geyBkb2N1bWVudHM6IFt0aGlzLnRvUXVlcnlQYXRoKHRhcmdldC5wYXRoKV0gfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRG9jdW1lbnRzVGFyZ2V0ID0gZnVuY3Rpb24gKGRvY3VtZW50c1RhcmdldCkge1xyXG4gICAgICAgIHZhciBjb3VudCA9IGRvY3VtZW50c1RhcmdldC5kb2N1bWVudHMubGVuZ3RoO1xyXG4gICAgICAgIGFzc2VydChjb3VudCA9PT0gMSwgJ0RvY3VtZW50c1RhcmdldCBjb250YWluZWQgb3RoZXIgdGhhbiAxIGRvY3VtZW50OiAnICsgY291bnQpO1xyXG4gICAgICAgIHZhciBuYW1lID0gZG9jdW1lbnRzVGFyZ2V0LmRvY3VtZW50c1swXTtcclxuICAgICAgICByZXR1cm4gUXVlcnkuYXRQYXRoKHRoaXMuZnJvbVF1ZXJ5UGF0aChuYW1lKSkudG9UYXJnZXQoKTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1F1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIC8vIERpc3NlY3QgdGhlIHBhdGggaW50byBwYXJlbnQsIGNvbGxlY3Rpb25JZCwgYW5kIG9wdGlvbmFsIGtleSBmaWx0ZXIuXHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHsgc3RydWN0dXJlZFF1ZXJ5OiB7fSB9O1xyXG4gICAgICAgIHZhciBwYXRoID0gdGFyZ2V0LnBhdGg7XHJcbiAgICAgICAgaWYgKHRhcmdldC5jb2xsZWN0aW9uR3JvdXAgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHBhdGgubGVuZ3RoICUgMiA9PT0gMCwgJ0NvbGxlY3Rpb24gR3JvdXAgcXVlcmllcyBzaG91bGQgYmUgd2l0aGluIGEgZG9jdW1lbnQgcGF0aCBvciByb290LicpO1xyXG4gICAgICAgICAgICByZXN1bHQucGFyZW50ID0gdGhpcy50b1F1ZXJ5UGF0aChwYXRoKTtcclxuICAgICAgICAgICAgcmVzdWx0LnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogdGFyZ2V0LmNvbGxlY3Rpb25Hcm91cCxcclxuICAgICAgICAgICAgICAgICAgICBhbGxEZXNjZW5kYW50czogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXNzZXJ0KHBhdGgubGVuZ3RoICUgMiAhPT0gMCwgJ0RvY3VtZW50IHF1ZXJpZXMgd2l0aCBmaWx0ZXJzIGFyZSBub3Qgc3VwcG9ydGVkLicpO1xyXG4gICAgICAgICAgICByZXN1bHQucGFyZW50ID0gdGhpcy50b1F1ZXJ5UGF0aChwYXRoLnBvcExhc3QoKSk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFt7IGNvbGxlY3Rpb25JZDogcGF0aC5sYXN0U2VnbWVudCgpIH1dO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgd2hlcmUgPSB0aGlzLnRvRmlsdGVyKHRhcmdldC5maWx0ZXJzKTtcclxuICAgICAgICBpZiAod2hlcmUpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IHdoZXJlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb3JkZXJCeSA9IHRoaXMudG9PcmRlcih0YXJnZXQub3JkZXJCeSk7XHJcbiAgICAgICAgaWYgKG9yZGVyQnkpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnN0cnVjdHVyZWRRdWVyeS5vcmRlckJ5ID0gb3JkZXJCeTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxpbWl0ID0gdGhpcy50b0ludDMyVmFsdWUodGFyZ2V0LmxpbWl0KTtcclxuICAgICAgICBpZiAobGltaXQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IGxpbWl0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGFyZ2V0LnN0YXJ0QXQpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0gdGhpcy50b0N1cnNvcih0YXJnZXQuc3RhcnRBdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0YXJnZXQuZW5kQXQpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnN0cnVjdHVyZWRRdWVyeS5lbmRBdCA9IHRoaXMudG9DdXJzb3IodGFyZ2V0LmVuZEF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLmZyb21RdWVyeVBhdGgodGFyZ2V0LnBhcmVudCk7XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0gdGFyZ2V0LnN0cnVjdHVyZWRRdWVyeTtcclxuICAgICAgICB2YXIgZnJvbUNvdW50ID0gcXVlcnkuZnJvbSA/IHF1ZXJ5LmZyb20ubGVuZ3RoIDogMDtcclxuICAgICAgICB2YXIgY29sbGVjdGlvbkdyb3VwID0gbnVsbDtcclxuICAgICAgICBpZiAoZnJvbUNvdW50ID4gMCkge1xyXG4gICAgICAgICAgICBhc3NlcnQoZnJvbUNvdW50ID09PSAxLCAnU3RydWN0dXJlZFF1ZXJ5LmZyb20gd2l0aCBtb3JlIHRoYW4gb25lIGNvbGxlY3Rpb24gaXMgbm90IHN1cHBvcnRlZC4nKTtcclxuICAgICAgICAgICAgdmFyIGZyb20gPSBxdWVyeS5mcm9tWzBdO1xyXG4gICAgICAgICAgICBpZiAoZnJvbS5hbGxEZXNjZW5kYW50cykge1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwID0gZnJvbS5jb2xsZWN0aW9uSWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gcGF0aC5jaGlsZChmcm9tLmNvbGxlY3Rpb25JZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpbHRlckJ5ID0gW107XHJcbiAgICAgICAgaWYgKHF1ZXJ5LndoZXJlKSB7XHJcbiAgICAgICAgICAgIGZpbHRlckJ5ID0gdGhpcy5mcm9tRmlsdGVyKHF1ZXJ5LndoZXJlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9yZGVyQnkgPSBbXTtcclxuICAgICAgICBpZiAocXVlcnkub3JkZXJCeSkge1xyXG4gICAgICAgICAgICBvcmRlckJ5ID0gdGhpcy5mcm9tT3JkZXIocXVlcnkub3JkZXJCeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBsaW1pdCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHF1ZXJ5LmxpbWl0KSB7XHJcbiAgICAgICAgICAgIGxpbWl0ID0gdGhpcy5mcm9tSW50MzJWYWx1ZShxdWVyeS5saW1pdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzdGFydEF0ID0gbnVsbDtcclxuICAgICAgICBpZiAocXVlcnkuc3RhcnRBdCkge1xyXG4gICAgICAgICAgICBzdGFydEF0ID0gdGhpcy5mcm9tQ3Vyc29yKHF1ZXJ5LnN0YXJ0QXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZW5kQXQgPSBudWxsO1xyXG4gICAgICAgIGlmIChxdWVyeS5lbmRBdCkge1xyXG4gICAgICAgICAgICBlbmRBdCA9IHRoaXMuZnJvbUN1cnNvcihxdWVyeS5lbmRBdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkocGF0aCwgY29sbGVjdGlvbkdyb3VwLCBvcmRlckJ5LCBmaWx0ZXJCeSwgbGltaXQsIExpbWl0VHlwZS5GaXJzdCwgc3RhcnRBdCwgZW5kQXQpLnRvVGFyZ2V0KCk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9MaXN0ZW5SZXF1ZXN0TGFiZWxzID0gZnVuY3Rpb24gKHRhcmdldERhdGEpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnRvTGFiZWwodGFyZ2V0RGF0YS5wdXJwb3NlKTtcclxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAnZ29vZy1saXN0ZW4tdGFncyc6IHZhbHVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvTGFiZWwgPSBmdW5jdGlvbiAocHVycG9zZSkge1xyXG4gICAgICAgIHN3aXRjaCAocHVycG9zZSkge1xyXG4gICAgICAgICAgICBjYXNlIFRhcmdldFB1cnBvc2UuTGlzdGVuOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIGNhc2UgVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnZXhpc3RlbmNlLWZpbHRlci1taXNtYXRjaCc7XHJcbiAgICAgICAgICAgIGNhc2UgVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb246XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2xpbWJvLWRvY3VtZW50JztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbnJlY29nbml6ZWQgcXVlcnkgcHVycG9zZTogJyArIHB1cnBvc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b1RhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gdGFyZ2V0RGF0YS50YXJnZXQ7XHJcbiAgICAgICAgaWYgKHRhcmdldC5pc0RvY3VtZW50UXVlcnkoKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7IGRvY3VtZW50czogdGhpcy50b0RvY3VtZW50c1RhcmdldCh0YXJnZXQpIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7IHF1ZXJ5OiB0aGlzLnRvUXVlcnlUYXJnZXQodGFyZ2V0KSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXN1bHQudGFyZ2V0SWQgPSB0YXJnZXREYXRhLnRhcmdldElkO1xyXG4gICAgICAgIGlmICh0YXJnZXREYXRhLnJlc3VtZVRva2VuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmVzdWx0LnJlc3VtZVRva2VuID0gdGhpcy51bnNhZmVDYXN0UHJvdG9CeXRlU3RyaW5nKHRhcmdldERhdGEucmVzdW1lVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChmaWx0ZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwcm90b3MgPSBmaWx0ZXJzLm1hcChmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXIgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnRvVW5hcnlPckZpZWxkRmlsdGVyKGZpbHRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5yZWNvZ25pemVkIGZpbHRlcjogJyArIEpTT04uc3RyaW5naWZ5KGZpbHRlcikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHByb3Rvcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb3Rvc1swXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgY29tcG9zaXRlRmlsdGVyOiB7IG9wOiAnQU5EJywgZmlsdGVyczogcHJvdG9zIH0gfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCFmaWx0ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWx0ZXIudW5hcnlGaWx0ZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuZnJvbVVuYXJ5RmlsdGVyKGZpbHRlcildO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWx0ZXIuZmllbGRGaWx0ZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuZnJvbUZpZWxkRmlsdGVyKGZpbHRlcildO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWx0ZXIuY29tcG9zaXRlRmlsdGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlci5jb21wb3NpdGVGaWx0ZXJcclxuICAgICAgICAgICAgICAgIC5maWx0ZXJzLm1hcChmdW5jdGlvbiAoZikgeyByZXR1cm4gX3RoaXMuZnJvbUZpbHRlcihmKTsgfSlcclxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoZnVuY3Rpb24gKGFjY3VtLCBjdXJyZW50KSB7IHJldHVybiBhY2N1bS5jb25jYXQoY3VycmVudCk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gZmlsdGVyOiAnICsgSlNPTi5zdHJpbmdpZnkoZmlsdGVyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvT3JkZXIgPSBmdW5jdGlvbiAob3JkZXJCeXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChvcmRlckJ5cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3JkZXJCeXMubWFwKGZ1bmN0aW9uIChvcmRlcikgeyByZXR1cm4gX3RoaXMudG9Qcm9wZXJ0eU9yZGVyKG9yZGVyKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbU9yZGVyID0gZnVuY3Rpb24gKG9yZGVyQnlzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gb3JkZXJCeXMubWFwKGZ1bmN0aW9uIChvcmRlcikgeyByZXR1cm4gX3RoaXMuZnJvbVByb3BlcnR5T3JkZXIob3JkZXIpOyB9KTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b0N1cnNvciA9IGZ1bmN0aW9uIChjdXJzb3IpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJlZm9yZTogY3Vyc29yLmJlZm9yZSxcclxuICAgICAgICAgICAgdmFsdWVzOiBjdXJzb3IucG9zaXRpb24ubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHsgcmV0dXJuIF90aGlzLnRvVmFsdWUoY29tcG9uZW50KTsgfSlcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21DdXJzb3IgPSBmdW5jdGlvbiAoY3Vyc29yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYmVmb3JlID0gISFjdXJzb3IuYmVmb3JlO1xyXG4gICAgICAgIHZhciBwb3NpdGlvbiA9IGN1cnNvci52YWx1ZXMubWFwKGZ1bmN0aW9uIChjb21wb25lbnQpIHsgcmV0dXJuIF90aGlzLmZyb21WYWx1ZShjb21wb25lbnQpOyB9KTtcclxuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKHBvc2l0aW9uLCBiZWZvcmUpO1xyXG4gICAgfTtcclxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRGlyZWN0aW9uID0gZnVuY3Rpb24gKGRpcikge1xyXG4gICAgICAgIHJldHVybiBESVJFQ1RJT05TW2Rpci5uYW1lXTtcclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRGlyZWN0aW9uID0gZnVuY3Rpb24gKGRpcikge1xyXG4gICAgICAgIHN3aXRjaCAoZGlyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ0FTQ0VORElORyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGlyZWN0aW9uLkFTQ0VORElORztcclxuICAgICAgICAgICAgY2FzZSAnREVTQ0VORElORyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gRGlyZWN0aW9uLkRFU0NFTkRJTkc7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS50b09wZXJhdG9yTmFtZSA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHJldHVybiBPUEVSQVRPUlNbb3AubmFtZV07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbU9wZXJhdG9yTmFtZSA9IGZ1bmN0aW9uIChvcCkge1xyXG4gICAgICAgIHN3aXRjaCAob3ApIHtcclxuICAgICAgICAgICAgY2FzZSAnRVFVQUwnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkVRVUFMO1xyXG4gICAgICAgICAgICBjYXNlICdHUkVBVEVSX1RIQU4nOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkdSRUFURVJfVEhBTjtcclxuICAgICAgICAgICAgY2FzZSAnR1JFQVRFUl9USEFOX09SX0VRVUFMJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUw7XHJcbiAgICAgICAgICAgIGNhc2UgJ0xFU1NfVEhBTic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuTEVTU19USEFOO1xyXG4gICAgICAgICAgICBjYXNlICdMRVNTX1RIQU5fT1JfRVFVQUwnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTDtcclxuICAgICAgICAgICAgY2FzZSAnQVJSQVlfQ09OVEFJTlMnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TO1xyXG4gICAgICAgICAgICBjYXNlICdJTic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuSU47XHJcbiAgICAgICAgICAgIGNhc2UgJ0FSUkFZX0NPTlRBSU5TX0FOWSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZO1xyXG4gICAgICAgICAgICBjYXNlICdPUEVSQVRPUl9VTlNQRUNJRklFRCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5zcGVjaWZpZWQgb3BlcmF0b3InKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIG9wZXJhdG9yJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLnRvRmllbGRQYXRoUmVmZXJlbmNlID0gZnVuY3Rpb24gKHBhdGgpIHtcclxuICAgICAgICByZXR1cm4geyBmaWVsZFBhdGg6IHBhdGguY2Fub25pY2FsU3RyaW5nKCkgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tRmllbGRQYXRoUmVmZXJlbmNlID0gZnVuY3Rpb24gKGZpZWxkUmVmZXJlbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIEZpZWxkUGF0aC5mcm9tU2VydmVyRm9ybWF0KGZpZWxkUmVmZXJlbmNlLmZpZWxkUGF0aCk7XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9Qcm9wZXJ0eU9yZGVyID0gZnVuY3Rpb24gKG9yZGVyQnkpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWVsZDogdGhpcy50b0ZpZWxkUGF0aFJlZmVyZW5jZShvcmRlckJ5LmZpZWxkKSxcclxuICAgICAgICAgICAgZGlyZWN0aW9uOiB0aGlzLnRvRGlyZWN0aW9uKG9yZGVyQnkuZGlyKVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUuZnJvbVByb3BlcnR5T3JkZXIgPSBmdW5jdGlvbiAob3JkZXJCeSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgT3JkZXJCeSh0aGlzLmZyb21GaWVsZFBhdGhSZWZlcmVuY2Uob3JkZXJCeS5maWVsZCksIHRoaXMuZnJvbURpcmVjdGlvbihvcmRlckJ5LmRpcmVjdGlvbikpO1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21GaWVsZEZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKHRoaXMuZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShmaWx0ZXIuZmllbGRGaWx0ZXIuZmllbGQpLCB0aGlzLmZyb21PcGVyYXRvck5hbWUoZmlsdGVyLmZpZWxkRmlsdGVyLm9wKSwgdGhpcy5mcm9tVmFsdWUoZmlsdGVyLmZpZWxkRmlsdGVyLnZhbHVlKSk7XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9VbmFyeU9yRmllbGRGaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgaWYgKGZpbHRlci5vcCA9PT0gT3BlcmF0b3IuRVFVQUwpIHtcclxuICAgICAgICAgICAgaWYgKGZpbHRlci52YWx1ZS5pc0VxdWFsKERvdWJsZVZhbHVlLk5BTikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMudG9GaWVsZFBhdGhSZWZlcmVuY2UoZmlsdGVyLmZpZWxkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICdJU19OQU4nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChmaWx0ZXIudmFsdWUuaXNFcXVhbChOdWxsVmFsdWUuSU5TVEFOQ0UpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLnRvRmllbGRQYXRoUmVmZXJlbmNlKGZpbHRlci5maWVsZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAnSVNfTlVMTCdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpZWxkRmlsdGVyOiB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZDogdGhpcy50b0ZpZWxkUGF0aFJlZmVyZW5jZShmaWx0ZXIuZmllbGQpLFxyXG4gICAgICAgICAgICAgICAgb3A6IHRoaXMudG9PcGVyYXRvck5hbWUoZmlsdGVyLm9wKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnRvVmFsdWUoZmlsdGVyLnZhbHVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBKc29uUHJvdG9TZXJpYWxpemVyLnByb3RvdHlwZS5mcm9tVW5hcnlGaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgc3dpdGNoIChmaWx0ZXIudW5hcnlGaWx0ZXIub3ApIHtcclxuICAgICAgICAgICAgY2FzZSAnSVNfTkFOJzpcclxuICAgICAgICAgICAgICAgIHZhciBuYW5GaWVsZCA9IHRoaXMuZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShmaWx0ZXIudW5hcnlGaWx0ZXIuZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZShuYW5GaWVsZCwgT3BlcmF0b3IuRVFVQUwsIERvdWJsZVZhbHVlLk5BTik7XHJcbiAgICAgICAgICAgIGNhc2UgJ0lTX05VTEwnOlxyXG4gICAgICAgICAgICAgICAgdmFyIG51bGxGaWVsZCA9IHRoaXMuZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShmaWx0ZXIudW5hcnlGaWx0ZXIuZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZShudWxsRmllbGQsIE9wZXJhdG9yLkVRVUFMLCBOdWxsVmFsdWUuSU5TVEFOQ0UpO1xyXG4gICAgICAgICAgICBjYXNlICdPUEVSQVRPUl9VTlNQRUNJRklFRCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5zcGVjaWZpZWQgZmlsdGVyJyk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBmaWx0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSnNvblByb3RvU2VyaWFsaXplci5wcm90b3R5cGUudG9Eb2N1bWVudE1hc2sgPSBmdW5jdGlvbiAoZmllbGRNYXNrKSB7XHJcbiAgICAgICAgdmFyIGNhbm9uaWNhbEZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGZpZWxkTWFzay5maWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbm9uaWNhbEZpZWxkcy5wdXNoKGZpZWxkLmNhbm9uaWNhbFN0cmluZygpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWVsZFBhdGhzOiBjYW5vbmljYWxGaWVsZHNcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIEpzb25Qcm90b1NlcmlhbGl6ZXIucHJvdG90eXBlLmZyb21Eb2N1bWVudE1hc2sgPSBmdW5jdGlvbiAocHJvdG8pIHtcclxuICAgICAgICB2YXIgcGF0aHMgPSBwcm90by5maWVsZFBhdGhzIHx8IFtdO1xyXG4gICAgICAgIHZhciBmaWVsZHMgPSBwYXRocy5tYXAoZnVuY3Rpb24gKHBhdGgpIHsgcmV0dXJuIEZpZWxkUGF0aC5mcm9tU2VydmVyRm9ybWF0KHBhdGgpOyB9KTtcclxuICAgICAgICByZXR1cm4gRmllbGRNYXNrLmZyb21BcnJheShmaWVsZHMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBKc29uUHJvdG9TZXJpYWxpemVyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEhvbGRzIHRoZSBsaXN0ZW5lcnMgYW5kIHRoZSBsYXN0IHJlY2VpdmVkIFZpZXdTbmFwc2hvdCBmb3IgYSBxdWVyeSBiZWluZ1xyXG4gKiB0cmFja2VkIGJ5IEV2ZW50TWFuYWdlci5cclxuICovXHJcbnZhciBRdWVyeUxpc3RlbmVyc0luZm8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBRdWVyeUxpc3RlbmVyc0luZm8oKSB7XHJcbiAgICAgICAgdGhpcy52aWV3U25hcCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IDA7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcclxuICAgIH1cclxuICAgIHJldHVybiBRdWVyeUxpc3RlbmVyc0luZm87XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBFdmVudE1hbmFnZXIgaXMgcmVzcG9uc2libGUgZm9yIG1hcHBpbmcgcXVlcmllcyB0byBxdWVyeSBldmVudCBlbWl0dGVycy5cclxuICogSXQgaGFuZGxlcyBcImZhbi1vdXRcIi4gLS0gSWRlbnRpY2FsIHF1ZXJpZXMgd2lsbCByZS11c2UgdGhlIHNhbWUgd2F0Y2ggb24gdGhlXHJcbiAqIGJhY2tlbmQuXHJcbiAqL1xyXG52YXIgRXZlbnRNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXZlbnRNYW5hZ2VyKHN5bmNFbmdpbmUpIHtcclxuICAgICAgICB0aGlzLnN5bmNFbmdpbmUgPSBzeW5jRW5naW5lO1xyXG4gICAgICAgIHRoaXMucXVlcmllcyA9IG5ldyBPYmplY3RNYXAoZnVuY3Rpb24gKHEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHEuY2Fub25pY2FsSWQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gT25saW5lU3RhdGUuVW5rbm93bjtcclxuICAgICAgICB0aGlzLnNuYXBzaG90c0luU3luY0xpc3RlbmVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnN5bmNFbmdpbmUuc3Vic2NyaWJlKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgcXVlcnkgPSBsaXN0ZW5lci5xdWVyeTtcclxuICAgICAgICB2YXIgZmlyc3RMaXN0ZW4gPSBmYWxzZTtcclxuICAgICAgICB2YXIgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeSk7XHJcbiAgICAgICAgaWYgKCFxdWVyeUluZm8pIHtcclxuICAgICAgICAgICAgZmlyc3RMaXN0ZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICBxdWVyeUluZm8gPSBuZXcgUXVlcnlMaXN0ZW5lcnNJbmZvKCk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5zZXQocXVlcnksIHF1ZXJ5SW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHF1ZXJ5SW5mby5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICAgICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXHJcbiAgICAgICAgdmFyIHJhaXNlZEV2ZW50ID0gbGlzdGVuZXIuYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSh0aGlzLm9ubGluZVN0YXRlKTtcclxuICAgICAgICBhc3NlcnQoIXJhaXNlZEV2ZW50LCBcImFwcGx5T25saW5lU3RhdGVDaGFuZ2UoKSBzaG91bGRuJ3QgcmFpc2UgYW4gZXZlbnQgZm9yIGJyYW5kLW5ldyBsaXN0ZW5lcnMuXCIpO1xyXG4gICAgICAgIGlmIChxdWVyeUluZm8udmlld1NuYXApIHtcclxuICAgICAgICAgICAgdmFyIHJhaXNlZEV2ZW50XzEgPSBsaXN0ZW5lci5vblZpZXdTbmFwc2hvdChxdWVyeUluZm8udmlld1NuYXApO1xyXG4gICAgICAgICAgICBpZiAocmFpc2VkRXZlbnRfMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZpcnN0TGlzdGVuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUubGlzdGVuKHF1ZXJ5KS50aGVuKGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlJbmZvLnRhcmdldElkID0gdGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShxdWVyeUluZm8udGFyZ2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBFdmVudE1hbmFnZXIucHJvdG90eXBlLnVubGlzdGVuID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnksIGxhc3RMaXN0ZW4sIHF1ZXJ5SW5mbywgaTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnkgPSBsaXN0ZW5lci5xdWVyeTtcclxuICAgICAgICAgICAgICAgIGxhc3RMaXN0ZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mbyA9IHRoaXMucXVlcmllcy5nZXQocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHF1ZXJ5SW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgIGkgPSBxdWVyeUluZm8ubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlJbmZvLmxpc3RlbmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RMaXN0ZW4gPSBxdWVyeUluZm8ubGlzdGVuZXJzLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdExpc3Rlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcmllcy5kZWxldGUocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnN5bmNFbmdpbmUudW5saXN0ZW4ocXVlcnkpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5vbldhdGNoQ2hhbmdlID0gZnVuY3Rpb24gKHZpZXdTbmFwcykge1xyXG4gICAgICAgIHZhciByYWlzZWRFdmVudCA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgdmlld1NuYXBzXzEgPSB2aWV3U25hcHM7IF9pIDwgdmlld1NuYXBzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB2aWV3U25hcCA9IHZpZXdTbmFwc18xW19pXTtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gdmlld1NuYXAucXVlcnk7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeUluZm8gPSB0aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICAgICAgaWYgKHF1ZXJ5SW5mbykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IHF1ZXJ5SW5mby5saXN0ZW5lcnM7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gX2JbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lci5vblZpZXdTbmFwc2hvdCh2aWV3U25hcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2VkRXZlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHF1ZXJ5SW5mby52aWV3U25hcCA9IHZpZXdTbmFwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyYWlzZWRFdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnJhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5vbldhdGNoRXJyb3IgPSBmdW5jdGlvbiAocXVlcnksIGVycm9yKSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5SW5mbyA9IHRoaXMucXVlcmllcy5nZXQocXVlcnkpO1xyXG4gICAgICAgIGlmIChxdWVyeUluZm8pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHF1ZXJ5SW5mby5saXN0ZW5lcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lci5vbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycy4gTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHN5bmNFbmdpbmUudW5saXN0ZW4oKVxyXG4gICAgICAgIC8vIGFmdGVyIGFuIGVycm9yLlxyXG4gICAgICAgIHRoaXMucXVlcmllcy5kZWxldGUocXVlcnkpO1xyXG4gICAgfTtcclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUub25PbmxpbmVTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBvbmxpbmVTdGF0ZTtcclxuICAgICAgICB2YXIgcmFpc2VkRXZlbnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAoXywgcXVlcnlJbmZvKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBxdWVyeUluZm8ubGlzdGVuZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIuYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZShvbmxpbmVTdGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByYWlzZWRFdmVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocmFpc2VkRXZlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUuYWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICB0aGlzLnNuYXBzaG90c0luU3luY0xpc3RlbmVycy5hZGQob2JzZXJ2ZXIpO1xyXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXHJcbiAgICAgICAgLy8gYXJlIGluLXN5bmMuXHJcbiAgICAgICAgb2JzZXJ2ZXIubmV4dCgpO1xyXG4gICAgfTtcclxuICAgIEV2ZW50TWFuYWdlci5wcm90b3R5cGUucmVtb3ZlU25hcHNob3RzSW5TeW5jTGlzdGVuZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICB0aGlzLnNuYXBzaG90c0luU3luY0xpc3RlbmVycy5kZWxldGUob2JzZXJ2ZXIpO1xyXG4gICAgfTtcclxuICAgIC8vIENhbGwgYWxsIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgdGhhdCBoYXZlIGJlZW4gc2V0LlxyXG4gICAgRXZlbnRNYW5hZ2VyLnByb3RvdHlwZS5yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc25hcHNob3RzSW5TeW5jTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXZlbnRNYW5hZ2VyO1xyXG59KCkpO1xyXG4vKipcclxuICogUXVlcnlMaXN0ZW5lciB0YWtlcyBhIHNlcmllcyBvZiBpbnRlcm5hbCB2aWV3IHNuYXBzaG90cyBhbmQgZGV0ZXJtaW5lc1xyXG4gKiB3aGVuIHRvIHJhaXNlIHRoZSBldmVudC5cclxuICpcclxuICogSXQgdXNlcyBhbiBPYnNlcnZlciB0byBkaXNwYXRjaCBldmVudHMuXHJcbiAqL1xyXG52YXIgUXVlcnlMaXN0ZW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5TGlzdGVuZXIocXVlcnksIHF1ZXJ5T2JzZXJ2ZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy5xdWVyeU9ic2VydmVyID0gcXVlcnlPYnNlcnZlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbml0aWFsIHNuYXBzaG90cyAoZS5nLiBmcm9tIGNhY2hlKSBtYXkgbm90IGJlIHByb3BhZ2F0ZWQgdG8gdGhlIHdyYXBwZWRcclxuICAgICAgICAgKiBvYnNlcnZlci4gVGhpcyBmbGFnIGlzIHNldCB0byB0cnVlIG9uY2Ugd2UndmUgYWN0dWFsbHkgcmFpc2VkIGFuIGV2ZW50LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucmFpc2VkSW5pdGlhbEV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zbmFwID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gT25saW5lU3RhdGUuVW5rbm93bjtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIHRoZSBuZXcgVmlld1NuYXBzaG90IHRvIHRoaXMgbGlzdGVuZXIsIHJhaXNpbmcgYSB1c2VyLWZhY2luZyBldmVudFxyXG4gICAgICogaWYgYXBwbGljYWJsZSAoZGVwZW5kaW5nIG9uIHdoYXQgY2hhbmdlZCwgd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgaW50b1xyXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXHJcbiAgICAgKiBpbmRlZWQgcmFpc2VkLlxyXG4gICAgICovXHJcbiAgICBRdWVyeUxpc3RlbmVyLnByb3RvdHlwZS5vblZpZXdTbmFwc2hvdCA9IGZ1bmN0aW9uIChzbmFwKSB7XHJcbiAgICAgICAgYXNzZXJ0KHNuYXAuZG9jQ2hhbmdlcy5sZW5ndGggPiAwIHx8IHNuYXAuc3luY1N0YXRlQ2hhbmdlZCwgJ1dlIGdvdCBhIG5ldyBzbmFwc2hvdCB3aXRoIG5vIGNoYW5nZXM/Jyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcykge1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cclxuICAgICAgICAgICAgdmFyIGRvY0NoYW5nZXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHNuYXAuZG9jQ2hhbmdlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBkb2NDaGFuZ2UgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jQ2hhbmdlLnR5cGUgIT09IENoYW5nZVR5cGUuTWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2NDaGFuZ2VzLnB1c2goZG9jQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzbmFwID0gbmV3IFZpZXdTbmFwc2hvdChzbmFwLnF1ZXJ5LCBzbmFwLmRvY3MsIHNuYXAub2xkRG9jcywgZG9jQ2hhbmdlcywgc25hcC5tdXRhdGVkS2V5cywgc25hcC5mcm9tQ2FjaGUsIHNuYXAuc3luY1N0YXRlQ2hhbmdlZCwgXHJcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJhaXNlZEV2ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJhaXNlZEluaXRpYWxFdmVudCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG91bGRSYWlzZUluaXRpYWxFdmVudChzbmFwLCB0aGlzLm9ubGluZVN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYWlzZUluaXRpYWxFdmVudChzbmFwKTtcclxuICAgICAgICAgICAgICAgIHJhaXNlZEV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnNob3VsZFJhaXNlRXZlbnQoc25hcCkpIHtcclxuICAgICAgICAgICAgdGhpcy5xdWVyeU9ic2VydmVyLm5leHQoc25hcCk7XHJcbiAgICAgICAgICAgIHJhaXNlZEV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zbmFwID0gc25hcDtcclxuICAgICAgICByZXR1cm4gcmFpc2VkRXZlbnQ7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlMaXN0ZW5lci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHRoaXMucXVlcnlPYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICB9O1xyXG4gICAgLyoqIFJldHVybnMgd2hldGhlciBhIHNuYXBzaG90IHdhcyByYWlzZWQuICovXHJcbiAgICBRdWVyeUxpc3RlbmVyLnByb3RvdHlwZS5hcHBseU9ubGluZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IG9ubGluZVN0YXRlO1xyXG4gICAgICAgIHZhciByYWlzZWRFdmVudCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLnNuYXAgJiZcclxuICAgICAgICAgICAgIXRoaXMucmFpc2VkSW5pdGlhbEV2ZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkUmFpc2VJbml0aWFsRXZlbnQodGhpcy5zbmFwLCBvbmxpbmVTdGF0ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5yYWlzZUluaXRpYWxFdmVudCh0aGlzLnNuYXApO1xyXG4gICAgICAgICAgICByYWlzZWRFdmVudCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByYWlzZWRFdmVudDtcclxuICAgIH07XHJcbiAgICBRdWVyeUxpc3RlbmVyLnByb3RvdHlwZS5zaG91bGRSYWlzZUluaXRpYWxFdmVudCA9IGZ1bmN0aW9uIChzbmFwLCBvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5yYWlzZWRJbml0aWFsRXZlbnQsICdEZXRlcm1pbmluZyB3aGV0aGVyIHRvIHJhaXNlIGZpcnN0IGV2ZW50IGJ1dCBhbHJlYWR5IGhhZCBmaXJzdCBldmVudCcpO1xyXG4gICAgICAgIC8vIEFsd2F5cyByYWlzZSB0aGUgZmlyc3QgZXZlbnQgd2hlbiB3ZSdyZSBzeW5jZWRcclxuICAgICAgICBpZiAoIXNuYXAuZnJvbUNhY2hlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBOT1RFOiBXZSBjb25zaWRlciBPbmxpbmVTdGF0ZS5Vbmtub3duIGFzIG9ubGluZSAoaXQgc2hvdWxkIGJlY29tZSBPZmZsaW5lXHJcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxyXG4gICAgICAgIHZhciBtYXliZU9ubGluZSA9IG9ubGluZVN0YXRlICE9PSBPbmxpbmVTdGF0ZS5PZmZsaW5lO1xyXG4gICAgICAgIC8vIERvbid0IHJhaXNlIHRoZSBldmVudCBpZiB3ZSdyZSBvbmxpbmUsIGFyZW4ndCBzeW5jZWQgeWV0IChjaGVja2VkXHJcbiAgICAgICAgLy8gYWJvdmUpIGFuZCBhcmUgd2FpdGluZyBmb3IgYSBzeW5jLlxyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMud2FpdEZvclN5bmNXaGVuT25saW5lICYmIG1heWJlT25saW5lKSB7XHJcbiAgICAgICAgICAgIGFzc2VydChzbmFwLmZyb21DYWNoZSwgJ1dhaXRpbmcgZm9yIHN5bmMsIGJ1dCBzbmFwc2hvdCBpcyBub3QgZnJvbSBjYWNoZScpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJhaXNlIGRhdGEgZnJvbSBjYWNoZSBpZiB3ZSBoYXZlIGFueSBkb2N1bWVudHMgb3Igd2UgYXJlIG9mZmxpbmVcclxuICAgICAgICByZXR1cm4gIXNuYXAuZG9jcy5pc0VtcHR5KCkgfHwgb25saW5lU3RhdGUgPT09IE9ubGluZVN0YXRlLk9mZmxpbmU7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlMaXN0ZW5lci5wcm90b3R5cGUuc2hvdWxkUmFpc2VFdmVudCA9IGZ1bmN0aW9uIChzbmFwKSB7XHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaW5jbHVkZURvY3VtZW50TWV0YWRhdGFDaGFuZ2VzIGhlcmUgYmVjYXVzZVxyXG4gICAgICAgIC8vIHRoZSBNZXRhZGF0YSBvbmx5IGNoYW5nZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc3RyaXBwZWQgb3V0IGlmIG5lZWRlZC5cclxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHRoZSBvbmx5IGNoYW5nZXMgd2Ugd2lsbCBzZWUgYXJlIHRoZSBvbmVzIHdlIHNob3VsZFxyXG4gICAgICAgIC8vIHByb3BhZ2F0ZS5cclxuICAgICAgICBpZiAoc25hcC5kb2NDaGFuZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBoYXNQZW5kaW5nV3JpdGVzQ2hhbmdlZCA9IHRoaXMuc25hcCAmJiB0aGlzLnNuYXAuaGFzUGVuZGluZ1dyaXRlcyAhPT0gc25hcC5oYXNQZW5kaW5nV3JpdGVzO1xyXG4gICAgICAgIGlmIChzbmFwLnN5bmNTdGF0ZUNoYW5nZWQgfHwgaGFzUGVuZGluZ1dyaXRlc0NoYW5nZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID09PSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBHZW5lcmFsbHkgd2Ugc2hvdWxkIGhhdmUgaGl0IG9uZSBvZiB0aGUgY2FzZXMgYWJvdmUsIGJ1dCBpdCdzIHBvc3NpYmxlXHJcbiAgICAgICAgLy8gdG8gZ2V0IGhlcmUgaWYgdGhlcmUgd2VyZSBvbmx5IG1ldGFkYXRhIGRvY0NoYW5nZXMgYW5kIHRoZXkgZ290XHJcbiAgICAgICAgLy8gc3RyaXBwZWQgb3V0LlxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBRdWVyeUxpc3RlbmVyLnByb3RvdHlwZS5yYWlzZUluaXRpYWxFdmVudCA9IGZ1bmN0aW9uIChzbmFwKSB7XHJcbiAgICAgICAgYXNzZXJ0KCF0aGlzLnJhaXNlZEluaXRpYWxFdmVudCwgJ1RyeWluZyB0byByYWlzZSBpbml0aWFsIGV2ZW50cyBmb3Igc2Vjb25kIHRpbWUnKTtcclxuICAgICAgICBzbmFwID0gVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzKHNuYXAucXVlcnksIHNuYXAuZG9jcywgc25hcC5tdXRhdGVkS2V5cywgc25hcC5mcm9tQ2FjaGUpO1xyXG4gICAgICAgIHRoaXMucmFpc2VkSW5pdGlhbEV2ZW50ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnF1ZXJ5T2JzZXJ2ZXIubmV4dChzbmFwKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUXVlcnlMaXN0ZW5lcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHNldCBvZiBjaGFuZ2VzIHRvIHdoYXQgZG9jdW1lbnRzIGFyZSBjdXJyZW50bHkgaW4gdmlldyBhbmQgb3V0IG9mIHZpZXcgZm9yXHJcbiAqIGEgZ2l2ZW4gcXVlcnkuIFRoZXNlIGNoYW5nZXMgYXJlIHNlbnQgdG8gdGhlIExvY2FsU3RvcmUgYnkgdGhlIFZpZXcgKHZpYVxyXG4gKiB0aGUgU3luY0VuZ2luZSkgYW5kIGFyZSB1c2VkIHRvIHBpbiAvIHVucGluIGRvY3VtZW50cyBhcyBhcHByb3ByaWF0ZS5cclxuICovXHJcbnZhciBMb2NhbFZpZXdDaGFuZ2VzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTG9jYWxWaWV3Q2hhbmdlcyh0YXJnZXRJZCwgZnJvbUNhY2hlLCBhZGRlZEtleXMsIHJlbW92ZWRLZXlzKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gZnJvbUNhY2hlO1xyXG4gICAgICAgIHRoaXMuYWRkZWRLZXlzID0gYWRkZWRLZXlzO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlZEtleXMgPSByZW1vdmVkS2V5cztcclxuICAgIH1cclxuICAgIExvY2FsVmlld0NoYW5nZXMuZnJvbVNuYXBzaG90ID0gZnVuY3Rpb24gKHRhcmdldElkLCB2aWV3U25hcHNob3QpIHtcclxuICAgICAgICB2YXIgYWRkZWRLZXlzID0gZG9jdW1lbnRLZXlTZXQoKTtcclxuICAgICAgICB2YXIgcmVtb3ZlZEtleXMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB2aWV3U25hcHNob3QuZG9jQ2hhbmdlczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGRvY0NoYW5nZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgc3dpdGNoIChkb2NDaGFuZ2UudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLkFkZGVkOlxyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkS2V5cyA9IGFkZGVkS2V5cy5hZGQoZG9jQ2hhbmdlLmRvYy5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLlJlbW92ZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZEtleXMgPSByZW1vdmVkS2V5cy5hZGQoZG9jQ2hhbmdlLmRvYy5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgTG9jYWxWaWV3Q2hhbmdlcyh0YXJnZXRJZCwgdmlld1NuYXBzaG90LmZyb21DYWNoZSwgYWRkZWRLZXlzLCByZW1vdmVkS2V5cyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvY2FsVmlld0NoYW5nZXM7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgQWRkZWRMaW1ib0RvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQWRkZWRMaW1ib0RvY3VtZW50KGtleSkge1xyXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEFkZGVkTGltYm9Eb2N1bWVudDtcclxufSgpKTtcclxudmFyIFJlbW92ZWRMaW1ib0RvY3VtZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVtb3ZlZExpbWJvRG9jdW1lbnQoa2V5KSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUmVtb3ZlZExpbWJvRG9jdW1lbnQ7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBWaWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0IGRvY3MgYXJlIGluXHJcbiAqIGEgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzIHRvIGRvY3MsIGFuZCBhcHBsaWVzXHJcbiAqIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3QgcG9zc2libGUgcmVzdWx0cy5cclxuICovXHJcbnZhciBWaWV3ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVmlldyhxdWVyeSwgXHJcbiAgICAvKiogRG9jdW1lbnRzIGluY2x1ZGVkIGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXHJcbiAgICBfc3luY2VkRG9jdW1lbnRzKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xyXG4gICAgICAgIHRoaXMuX3N5bmNlZERvY3VtZW50cyA9IF9zeW5jZWREb2N1bWVudHM7XHJcbiAgICAgICAgdGhpcy5zeW5jU3RhdGUgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgZmxhZyB3aGV0aGVyIHRoZSB2aWV3IGlzIGN1cnJlbnQgd2l0aCB0aGUgYmFja2VuZC4gQSB2aWV3IGlzIGNvbnNpZGVyZWRcclxuICAgICAgICAgKiBjdXJyZW50IGFmdGVyIGl0IGhhcyBzZWVuIHRoZSBjdXJyZW50IGZsYWcgZnJvbSB0aGUgYmFja2VuZCBhbmQgZGlkIG5vdFxyXG4gICAgICAgICAqIGxvc2UgY29uc2lzdGVuY3kgd2l0aGluIHRoZSB3YXRjaCBzdHJlYW0gKGUuZy4gYmVjYXVzZSBvZiBhbiBleGlzdGVuY2VcclxuICAgICAgICAgKiBmaWx0ZXIgbWlzbWF0Y2gpLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgICAgIC8qKiBEb2N1bWVudHMgaW4gdGhlIHZpZXcgYnV0IG5vdCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xyXG4gICAgICAgIHRoaXMubGltYm9Eb2N1bWVudHMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIC8qKiBEb2N1bWVudCBLZXlzIHRoYXQgaGF2ZSBsb2NhbCBjaGFuZ2VzICovXHJcbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgdGhpcy5kb2N1bWVudFNldCA9IG5ldyBEb2N1bWVudFNldChxdWVyeS5kb2NDb21wYXJhdG9yLmJpbmQocXVlcnkpKTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWaWV3LnByb3RvdHlwZSwgXCJzeW5jZWREb2N1bWVudHNcIiwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBzZXQgb2YgcmVtb3RlIGRvY3VtZW50cyB0aGF0IHRoZSBzZXJ2ZXIgaGFzIHRvbGQgdXMgYmVsb25ncyB0byB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICAgICAqIHRoaXMgdmlldy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N5bmNlZERvY3VtZW50cztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKlxyXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHNldCBvZiBkb2MgY2hhbmdlcywgYXBwbGllcyB0aGUgcXVlcnkgbGltaXQsIGFuZCBjb21wdXRlc1xyXG4gICAgICogd2hhdCB0aGUgbmV3IHJlc3VsdHMgc2hvdWxkIGJlLCB3aGF0IHRoZSBjaGFuZ2VzIHdlcmUsIGFuZCB3aGV0aGVyIHdlIG1heVxyXG4gICAgICogbmVlZCB0byBnbyBiYWNrIHRvIHRoZSBsb2NhbCBjYWNoZSBmb3IgbW9yZSByZXN1bHRzLiBEb2VzIG5vdCBtYWtlIGFueVxyXG4gICAgICogY2hhbmdlcyB0byB0aGUgdmlldy5cclxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIFRoZSBkb2MgY2hhbmdlcyB0byBhcHBseSB0byB0aGlzIHZpZXcuXHJcbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDaGFuZ2VzIElmIHRoaXMgaXMgYmVpbmcgY2FsbGVkIHdpdGggYSByZWZpbGwsIHRoZW4gc3RhcnRcclxuICAgICAqICAgICAgICB3aXRoIHRoaXMgc2V0IG9mIGRvY3MgYW5kIGNoYW5nZXMgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2aWV3LlxyXG4gICAgICogQHJldHVybiBhIG5ldyBzZXQgb2YgZG9jcywgY2hhbmdlcywgYW5kIHJlZmlsbCBmbGFnLlxyXG4gICAgICovXHJcbiAgICBWaWV3LnByb3RvdHlwZS5jb21wdXRlRG9jQ2hhbmdlcyA9IGZ1bmN0aW9uIChkb2NDaGFuZ2VzLCBwcmV2aW91c0NoYW5nZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBjaGFuZ2VTZXQgPSBwcmV2aW91c0NoYW5nZXNcclxuICAgICAgICAgICAgPyBwcmV2aW91c0NoYW5nZXMuY2hhbmdlU2V0XHJcbiAgICAgICAgICAgIDogbmV3IERvY3VtZW50Q2hhbmdlU2V0KCk7XHJcbiAgICAgICAgdmFyIG9sZERvY3VtZW50U2V0ID0gcHJldmlvdXNDaGFuZ2VzXHJcbiAgICAgICAgICAgID8gcHJldmlvdXNDaGFuZ2VzLmRvY3VtZW50U2V0XHJcbiAgICAgICAgICAgIDogdGhpcy5kb2N1bWVudFNldDtcclxuICAgICAgICB2YXIgbmV3TXV0YXRlZEtleXMgPSBwcmV2aW91c0NoYW5nZXNcclxuICAgICAgICAgICAgPyBwcmV2aW91c0NoYW5nZXMubXV0YXRlZEtleXNcclxuICAgICAgICAgICAgOiB0aGlzLm11dGF0ZWRLZXlzO1xyXG4gICAgICAgIHZhciBuZXdEb2N1bWVudFNldCA9IG9sZERvY3VtZW50U2V0O1xyXG4gICAgICAgIHZhciBuZWVkc1JlZmlsbCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIFRyYWNrIHRoZSBsYXN0IGRvYyBpbiBhIChmdWxsKSBsaW1pdC4gVGhpcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugc29tZVxyXG4gICAgICAgIC8vIHVwZGF0ZSAoYSBkZWxldGUsIG9yIGFuIHVwZGF0ZSBtb3ZpbmcgYSBkb2MgcGFzdCB0aGUgb2xkIGxpbWl0KSBtaWdodFxyXG4gICAgICAgIC8vIG1lYW4gdGhlcmUgaXMgc29tZSBvdGhlciBkb2N1bWVudCBpbiB0aGUgbG9jYWwgY2FjaGUgdGhhdCBlaXRoZXIgc2hvdWxkXHJcbiAgICAgICAgLy8gY29tZSAoMSkgYmV0d2VlbiB0aGUgb2xkIGxhc3QgbGltaXQgZG9jIGFuZCB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZVxyXG4gICAgICAgIC8vIGNhc2Ugb2YgdXBkYXRlcywgb3IgKDIpIGFmdGVyIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlIGNhc2Ugb2ZcclxuICAgICAgICAvLyBkZWxldGVzLiBTbyB3ZSBrZWVwIHRoaXMgZG9jIGF0IHRoZSBvbGQgbGltaXQgdG8gY29tcGFyZSB0aGUgdXBkYXRlcyB0by5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBuZXZlciBnZXQgdXNlZCBpbiBhIHJlZmlsbCAod2hlbiBwcmV2aW91c0NoYW5nZXMgaXNcclxuICAgICAgICAvLyBzZXQpLCBiZWNhdXNlIHRoZXJlIHdpbGwgb25seSBiZSBhZGRzIC0tIG5vIGRlbGV0ZXMgb3IgdXBkYXRlcy5cclxuICAgICAgICB2YXIgbGFzdERvY0luTGltaXQgPSB0aGlzLnF1ZXJ5Lmhhc0xpbWl0VG9GaXJzdCgpICYmIG9sZERvY3VtZW50U2V0LnNpemUgPT09IHRoaXMucXVlcnkubGltaXRcclxuICAgICAgICAgICAgPyBvbGREb2N1bWVudFNldC5sYXN0KClcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIHZhciBmaXJzdERvY0luTGltaXQgPSB0aGlzLnF1ZXJ5Lmhhc0xpbWl0VG9MYXN0KCkgJiYgb2xkRG9jdW1lbnRTZXQuc2l6ZSA9PT0gdGhpcy5xdWVyeS5saW1pdFxyXG4gICAgICAgICAgICA/IG9sZERvY3VtZW50U2V0LmZpcnN0KClcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGRvY0NoYW5nZXMuaW5vcmRlclRyYXZlcnNhbChmdW5jdGlvbiAoa2V5LCBuZXdNYXliZURvYykge1xyXG4gICAgICAgICAgICB2YXIgb2xkRG9jID0gb2xkRG9jdW1lbnRTZXQuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIHZhciBuZXdEb2MgPSBuZXdNYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50ID8gbmV3TWF5YmVEb2MgOiBudWxsO1xyXG4gICAgICAgICAgICBpZiAobmV3RG9jKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoa2V5LmlzRXF1YWwobmV3RG9jLmtleSksICdNaXNtYXRjaGluZyBrZXlzIGZvdW5kIGluIGRvY3VtZW50IGNoYW5nZXM6ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIGtleSArXHJcbiAgICAgICAgICAgICAgICAgICAgJyAhPSAnICtcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2Mua2V5KTtcclxuICAgICAgICAgICAgICAgIG5ld0RvYyA9IF90aGlzLnF1ZXJ5Lm1hdGNoZXMobmV3RG9jKSA/IG5ld0RvYyA6IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG9sZERvY0hhZFBlbmRpbmdNdXRhdGlvbnMgPSBvbGREb2NcclxuICAgICAgICAgICAgICAgID8gX3RoaXMubXV0YXRlZEtleXMuaGFzKG9sZERvYy5rZXkpXHJcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgbmV3RG9jSGFzUGVuZGluZ011dGF0aW9ucyA9IG5ld0RvY1xyXG4gICAgICAgICAgICAgICAgPyBuZXdEb2MuaGFzTG9jYWxNdXRhdGlvbnMgfHxcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IGNvbnNpZGVyIGNvbW1pdHRlZCBtdXRhdGlvbnMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmVcclxuICAgICAgICAgICAgICAgICAgICAvLyBtdXRhdGVkIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhlIHZpZXcuXHJcbiAgICAgICAgICAgICAgICAgICAgKF90aGlzLm11dGF0ZWRLZXlzLmhhcyhuZXdEb2Mua2V5KSAmJiBuZXdEb2MuaGFzQ29tbWl0dGVkTXV0YXRpb25zKVxyXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGNoYW5nZUFwcGxpZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGNoYW5nZVxyXG4gICAgICAgICAgICBpZiAob2xkRG9jICYmIG5ld0RvYykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRvY3NFcXVhbCA9IG9sZERvYy5kYXRhKCkuaXNFcXVhbChuZXdEb2MuZGF0YSgpKTtcclxuICAgICAgICAgICAgICAgIGlmICghZG9jc0VxdWFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5zaG91bGRXYWl0Rm9yU3luY2VkRG9jdW1lbnQob2xkRG9jLCBuZXdEb2MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVNldC50cmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBDaGFuZ2VUeXBlLk1vZGlmaWVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiBuZXdEb2NcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUFwcGxpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGxhc3REb2NJbkxpbWl0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5xdWVyeS5kb2NDb21wYXJhdG9yKG5ld0RvYywgbGFzdERvY0luTGltaXQpID4gMCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmaXJzdERvY0luTGltaXQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5xdWVyeS5kb2NDb21wYXJhdG9yKG5ld0RvYywgZmlyc3REb2NJbkxpbWl0KSA8IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGRvYyBtb3ZlZCBmcm9tIGluc2lkZSB0aGUgbGltaXQgdG8gb3V0c2lkZSB0aGUgbGltaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGF0IG1lYW5zIHRoZXJlIG1heSBiZSBzb21lIG90aGVyIGRvYyBpbiB0aGUgbG9jYWwgY2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluc3RlYWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWVkc1JlZmlsbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvbGREb2NIYWRQZW5kaW5nTXV0YXRpb25zICE9PSBuZXdEb2NIYXNQZW5kaW5nTXV0YXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlU2V0LnRyYWNrKHsgdHlwZTogQ2hhbmdlVHlwZS5NZXRhZGF0YSwgZG9jOiBuZXdEb2MgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQXBwbGllZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIW9sZERvYyAmJiBuZXdEb2MpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZVNldC50cmFjayh7IHR5cGU6IENoYW5nZVR5cGUuQWRkZWQsIGRvYzogbmV3RG9jIH0pO1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlQXBwbGllZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAob2xkRG9jICYmICFuZXdEb2MpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZVNldC50cmFjayh7IHR5cGU6IENoYW5nZVR5cGUuUmVtb3ZlZCwgZG9jOiBvbGREb2MgfSk7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VBcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChsYXN0RG9jSW5MaW1pdCB8fCBmaXJzdERvY0luTGltaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBIGRvYyB3YXMgcmVtb3ZlZCBmcm9tIGEgZnVsbCBsaW1pdCBxdWVyeS4gV2UnbGwgbmVlZCB0b1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcXVlcnkgZnJvbSB0aGUgbG9jYWwgY2FjaGUgdG8gc2VlIGlmIHdlIGtub3cgYWJvdXQgc29tZSBvdGhlclxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvYyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgcmVzdWx0cy5cclxuICAgICAgICAgICAgICAgICAgICBuZWVkc1JlZmlsbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNoYW5nZUFwcGxpZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdEb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdEb2N1bWVudFNldCA9IG5ld0RvY3VtZW50U2V0LmFkZChuZXdEb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdEb2NIYXNQZW5kaW5nTXV0YXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld011dGF0ZWRLZXlzID0gbmV3TXV0YXRlZEtleXMuYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNdXRhdGVkS2V5cyA9IG5ld011dGF0ZWRLZXlzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RvY3VtZW50U2V0ID0gbmV3RG9jdW1lbnRTZXQuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3TXV0YXRlZEtleXMgPSBuZXdNdXRhdGVkS2V5cy5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIERyb3AgZG9jdW1lbnRzIG91dCB0byBtZWV0IGxpbWl0L2xpbWl0VG9MYXN0IHJlcXVpcmVtZW50LlxyXG4gICAgICAgIGlmICh0aGlzLnF1ZXJ5Lmhhc0xpbWl0VG9GaXJzdCgpIHx8IHRoaXMucXVlcnkuaGFzTGltaXRUb0xhc3QoKSkge1xyXG4gICAgICAgICAgICB3aGlsZSAobmV3RG9jdW1lbnRTZXQuc2l6ZSA+IHRoaXMucXVlcnkubGltaXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvbGREb2MgPSB0aGlzLnF1ZXJ5Lmhhc0xpbWl0VG9GaXJzdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBuZXdEb2N1bWVudFNldC5sYXN0KClcclxuICAgICAgICAgICAgICAgICAgICA6IG5ld0RvY3VtZW50U2V0LmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBuZXdEb2N1bWVudFNldCA9IG5ld0RvY3VtZW50U2V0LmRlbGV0ZShvbGREb2Mua2V5KTtcclxuICAgICAgICAgICAgICAgIG5ld011dGF0ZWRLZXlzID0gbmV3TXV0YXRlZEtleXMuZGVsZXRlKG9sZERvYy5rZXkpO1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlU2V0LnRyYWNrKHsgdHlwZTogQ2hhbmdlVHlwZS5SZW1vdmVkLCBkb2M6IG9sZERvYyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhc3NlcnQoIW5lZWRzUmVmaWxsIHx8ICFwcmV2aW91c0NoYW5nZXMsICdWaWV3IHdhcyByZWZpbGxlZCB1c2luZyBkb2NzIHRoYXQgdGhlbXNlbHZlcyBuZWVkZWQgcmVmaWxsaW5nLicpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50U2V0OiBuZXdEb2N1bWVudFNldCxcclxuICAgICAgICAgICAgY2hhbmdlU2V0OiBjaGFuZ2VTZXQsXHJcbiAgICAgICAgICAgIG5lZWRzUmVmaWxsOiBuZWVkc1JlZmlsbCxcclxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IG5ld011dGF0ZWRLZXlzXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBWaWV3LnByb3RvdHlwZS5zaG91bGRXYWl0Rm9yU3luY2VkRG9jdW1lbnQgPSBmdW5jdGlvbiAob2xkRG9jLCBuZXdEb2MpIHtcclxuICAgICAgICAvLyBXZSBzdXBwcmVzcyB0aGUgaW5pdGlhbCBjaGFuZ2UgZXZlbnQgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgbW9kaWZpZWQgYXNcclxuICAgICAgICAvLyBwYXJ0IG9mIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgKGUuZy4gd2hlbiB0aGUgdmFsdWUgb2YgYSBzZXJ2ZXIgdHJhbnNmb3JtXHJcbiAgICAgICAgLy8gaXMgYXBwbGllZCkgYXMgV2F0Y2ggd2lsbCBzZW5kIHVzIHRoZSBzYW1lIGRvY3VtZW50IGFnYWluLlxyXG4gICAgICAgIC8vIEJ5IHN1cHByZXNzaW5nIHRoZSBldmVudCwgd2Ugb25seSByYWlzZSB0d28gdXNlciB2aXNpYmxlIGV2ZW50cyAob25lIHdpdGhcclxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpIGluc3RlYWQgb2YgdGhyZWVcclxuICAgICAgICAvLyAob25lIHdpdGggYGhhc1BlbmRpbmdXcml0ZXNgLCB0aGUgbW9kaWZpZWQgZG9jdW1lbnQgd2l0aFxyXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkuXHJcbiAgICAgICAgcmV0dXJuIChvbGREb2MuaGFzTG9jYWxNdXRhdGlvbnMgJiZcclxuICAgICAgICAgICAgbmV3RG9jLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJlxyXG4gICAgICAgICAgICAhbmV3RG9jLmhhc0xvY2FsTXV0YXRpb25zKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIHZpZXcgd2l0aCB0aGUgZ2l2ZW4gVmlld0RvY3VtZW50Q2hhbmdlcyBhbmQgb3B0aW9uYWxseSB1cGRhdGVzXHJcbiAgICAgKiBsaW1ibyBkb2NzIGFuZCBzeW5jIHN0YXRlIGZyb20gdGhlIHByb3ZpZGVkIHRhcmdldCBjaGFuZ2UuXHJcbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyBUaGUgc2V0IG9mIGNoYW5nZXMgdG8gbWFrZSB0byB0aGUgdmlldydzIGRvY3MuXHJcbiAgICAgKiBAcGFyYW0gdXBkYXRlTGltYm9Eb2N1bWVudHMgV2hldGhlciB0byB1cGRhdGUgbGltYm8gZG9jdW1lbnRzIGJhc2VkIG9uIHRoaXNcclxuICAgICAqICAgICAgICBjaGFuZ2UuXHJcbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q2hhbmdlIEEgdGFyZ2V0IGNoYW5nZSB0byBhcHBseSBmb3IgY29tcHV0aW5nIGxpbWJvIGRvY3MgYW5kXHJcbiAgICAgKiAgICAgICAgc3luYyBzdGF0ZS5cclxuICAgICAqIEByZXR1cm4gQSBuZXcgVmlld0NoYW5nZSB3aXRoIHRoZSBnaXZlbiBkb2NzLCBjaGFuZ2VzLCBhbmQgc3luYyBzdGF0ZS5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGUgaU9TL0FuZHJvaWQgY2xpZW50cyBhbHdheXMgY29tcHV0ZSBsaW1ibyBkb2N1bWVudCBjaGFuZ2VzLlxyXG4gICAgVmlldy5wcm90b3R5cGUuYXBwbHlDaGFuZ2VzID0gZnVuY3Rpb24gKGRvY0NoYW5nZXMsIHVwZGF0ZUxpbWJvRG9jdW1lbnRzLCB0YXJnZXRDaGFuZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCghZG9jQ2hhbmdlcy5uZWVkc1JlZmlsbCwgJ0Nhbm5vdCBhcHBseSBjaGFuZ2VzIHRoYXQgbmVlZCBhIHJlZmlsbCcpO1xyXG4gICAgICAgIHZhciBvbGREb2NzID0gdGhpcy5kb2N1bWVudFNldDtcclxuICAgICAgICB0aGlzLmRvY3VtZW50U2V0ID0gZG9jQ2hhbmdlcy5kb2N1bWVudFNldDtcclxuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gZG9jQ2hhbmdlcy5tdXRhdGVkS2V5cztcclxuICAgICAgICAvLyBTb3J0IGNoYW5nZXMgYmFzZWQgb24gdHlwZSBhbmQgcXVlcnkgY29tcGFyYXRvclxyXG4gICAgICAgIHZhciBjaGFuZ2VzID0gZG9jQ2hhbmdlcy5jaGFuZ2VTZXQuZ2V0Q2hhbmdlcygpO1xyXG4gICAgICAgIGNoYW5nZXMuc29ydChmdW5jdGlvbiAoYzEsIGMyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoY29tcGFyZUNoYW5nZVR5cGUoYzEudHlwZSwgYzIudHlwZSkgfHxcclxuICAgICAgICAgICAgICAgIF90aGlzLnF1ZXJ5LmRvY0NvbXBhcmF0b3IoYzEuZG9jLCBjMi5kb2MpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0Q2hhbmdlKHRhcmdldENoYW5nZSk7XHJcbiAgICAgICAgdmFyIGxpbWJvQ2hhbmdlcyA9IHVwZGF0ZUxpbWJvRG9jdW1lbnRzXHJcbiAgICAgICAgICAgID8gdGhpcy51cGRhdGVMaW1ib0RvY3VtZW50cygpXHJcbiAgICAgICAgICAgIDogW107XHJcbiAgICAgICAgdmFyIHN5bmNlZCA9IHRoaXMubGltYm9Eb2N1bWVudHMuc2l6ZSA9PT0gMCAmJiB0aGlzLmN1cnJlbnQ7XHJcbiAgICAgICAgdmFyIG5ld1N5bmNTdGF0ZSA9IHN5bmNlZCA/IFN5bmNTdGF0ZS5TeW5jZWQgOiBTeW5jU3RhdGUuTG9jYWw7XHJcbiAgICAgICAgdmFyIHN5bmNTdGF0ZUNoYW5nZWQgPSBuZXdTeW5jU3RhdGUgIT09IHRoaXMuc3luY1N0YXRlO1xyXG4gICAgICAgIHRoaXMuc3luY1N0YXRlID0gbmV3U3luY1N0YXRlO1xyXG4gICAgICAgIGlmIChjaGFuZ2VzLmxlbmd0aCA9PT0gMCAmJiAhc3luY1N0YXRlQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAvLyBubyBjaGFuZ2VzXHJcbiAgICAgICAgICAgIHJldHVybiB7IGxpbWJvQ2hhbmdlczogbGltYm9DaGFuZ2VzIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgc25hcCA9IG5ldyBWaWV3U25hcHNob3QodGhpcy5xdWVyeSwgZG9jQ2hhbmdlcy5kb2N1bWVudFNldCwgb2xkRG9jcywgY2hhbmdlcywgZG9jQ2hhbmdlcy5tdXRhdGVkS2V5cywgbmV3U3luY1N0YXRlID09PSBTeW5jU3RhdGUuTG9jYWwsIHN5bmNTdGF0ZUNoYW5nZWQsIFxyXG4gICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IHNuYXAsXHJcbiAgICAgICAgICAgICAgICBsaW1ib0NoYW5nZXM6IGxpbWJvQ2hhbmdlc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSB2aWV3LCBwb3RlbnRpYWxseSBnZW5lcmF0aW5nIGFcclxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cclxuICAgICAqL1xyXG4gICAgVmlldy5wcm90b3R5cGUuYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnQgJiYgb25saW5lU3RhdGUgPT09IE9ubGluZVN0YXRlLk9mZmxpbmUpIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UncmUgb2ZmbGluZSwgc2V0IGBjdXJyZW50YCB0byBmYWxzZSBhbmQgdGhlbiBjYWxsIGFwcGx5Q2hhbmdlcygpXHJcbiAgICAgICAgICAgIC8vIHRvIHJlZnJlc2ggb3VyIHN5bmNTdGF0ZSBhbmQgZ2VuZXJhdGUgYSBWaWV3Q2hhbmdlIGFzIGFwcHJvcHJpYXRlLiBXZVxyXG4gICAgICAgICAgICAvLyBhcmUgZ3VhcmFudGVlZCB0byBnZXQgYSBuZXcgVGFyZ2V0Q2hhbmdlIHRoYXQgc2V0cyBgY3VycmVudGAgYmFjayB0b1xyXG4gICAgICAgICAgICAvLyB0cnVlIG9uY2UgdGhlIGNsaWVudCBpcyBiYWNrIG9ubGluZS5cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGx5Q2hhbmdlcyh7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudFNldDogdGhpcy5kb2N1bWVudFNldCxcclxuICAgICAgICAgICAgICAgIGNoYW5nZVNldDogbmV3IERvY3VtZW50Q2hhbmdlU2V0KCksXHJcbiAgICAgICAgICAgICAgICBtdXRhdGVkS2V5czogdGhpcy5tdXRhdGVkS2V5cyxcclxuICAgICAgICAgICAgICAgIG5lZWRzUmVmaWxsOiBmYWxzZVxyXG4gICAgICAgICAgICB9LCBcclxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE5vIGVmZmVjdCwganVzdCByZXR1cm4gYSBuby1vcCBWaWV3Q2hhbmdlLlxyXG4gICAgICAgICAgICByZXR1cm4geyBsaW1ib0NoYW5nZXM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxyXG4gICAgICovXHJcbiAgICBWaWV3LnByb3RvdHlwZS5zaG91bGRCZUluTGltYm8gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlbW90ZSBlbmQgc2F5cyBpdCdzIHBhcnQgb2YgdGhpcyBxdWVyeSwgaXQncyBub3QgaW4gbGltYm8uXHJcbiAgICAgICAgaWYgKHRoaXMuX3N5bmNlZERvY3VtZW50cy5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBkb2Vzbid0IHRoaW5rIGl0J3MgYSByZXN1bHQsIHNvIGl0IHNob3VsZG4ndCBiZSBpbiBsaW1iby5cclxuICAgICAgICBpZiAoIXRoaXMuZG9jdW1lbnRTZXQuaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbG9jYWwgY2hhbmdlcyB0byB0aGUgZG9jLCB0aGV5IG1pZ2h0IGV4cGxhaW4gd2h5IHRoZSBzZXJ2ZXJcclxuICAgICAgICAvLyBkb2Vzbid0IGtub3cgdGhhdCBpdCdzIHBhcnQgb2YgdGhlIHF1ZXJ5LiBTbyBkb24ndCBwdXQgaXQgaW4gbGltYm8uXHJcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IElkZWFsbHksIHdlIHdvdWxkIG9ubHkgY29uc2lkZXIgY2hhbmdlcyB0aGF0IG1pZ2h0IGFjdHVhbGx5XHJcbiAgICAgICAgLy8gYWZmZWN0IHRoaXMgc3BlY2lmaWMgcXVlcnkuXHJcbiAgICAgICAgaWYgKHRoaXMuZG9jdW1lbnRTZXQuZ2V0KGtleSkuaGFzTG9jYWxNdXRhdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFdmVyeXRoaW5nIGVsc2UgaXMgaW4gbGltYm8uXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHN5bmNlZERvY3VtZW50cywgY3VycmVudCwgYW5kIGxpbWJvIGRvY3MgYmFzZWQgb24gdGhlIGdpdmVuIGNoYW5nZS5cclxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cclxuICAgICAqL1xyXG4gICAgVmlldy5wcm90b3R5cGUuYXBwbHlUYXJnZXRDaGFuZ2UgPSBmdW5jdGlvbiAodGFyZ2V0Q2hhbmdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGFyZ2V0Q2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHRhcmdldENoYW5nZS5hZGRlZERvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChfdGhpcy5fc3luY2VkRG9jdW1lbnRzID0gX3RoaXMuX3N5bmNlZERvY3VtZW50cy5hZGQoa2V5KSk7IH0pO1xyXG4gICAgICAgICAgICB0YXJnZXRDaGFuZ2UubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXNzZXJ0KF90aGlzLl9zeW5jZWREb2N1bWVudHMuaGFzKGtleSksIFwiTW9kaWZpZWQgZG9jdW1lbnQgXCIgKyBrZXkgKyBcIiBub3QgZm91bmQgaW4gdmlldy5cIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0YXJnZXRDaGFuZ2UucmVtb3ZlZERvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIChfdGhpcy5fc3luY2VkRG9jdW1lbnRzID0gX3RoaXMuX3N5bmNlZERvY3VtZW50cy5kZWxldGUoa2V5KSk7IH0pO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSB0YXJnZXRDaGFuZ2UuY3VycmVudDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVmlldy5wcm90b3R5cGUudXBkYXRlTGltYm9Eb2N1bWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPKGtsaW10KTogRG8gdGhpcyBpbmNyZW1lbnRhbGx5IHNvIHRoYXQgaXQncyBub3QgcXVhZHJhdGljIHdoZW5cclxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cclxuICAgICAgICB2YXIgb2xkTGltYm9Eb2N1bWVudHMgPSB0aGlzLmxpbWJvRG9jdW1lbnRzO1xyXG4gICAgICAgIHRoaXMubGltYm9Eb2N1bWVudHMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTZXQuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5zaG91bGRCZUluTGltYm8oZG9jLmtleSkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmxpbWJvRG9jdW1lbnRzID0gX3RoaXMubGltYm9Eb2N1bWVudHMuYWRkKGRvYy5rZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gRGlmZiB0aGUgbmV3IGxpbWJvIGRvY3Mgd2l0aCB0aGUgb2xkIGxpbWJvIGRvY3MuXHJcbiAgICAgICAgdmFyIGNoYW5nZXMgPSBbXTtcclxuICAgICAgICBvbGRMaW1ib0RvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy5saW1ib0RvY3VtZW50cy5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoKG5ldyBSZW1vdmVkTGltYm9Eb2N1bWVudChrZXkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubGltYm9Eb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIGlmICghb2xkTGltYm9Eb2N1bWVudHMuaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaChuZXcgQWRkZWRMaW1ib0RvY3VtZW50KGtleSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNoYW5nZXM7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3IHdpdGggdGhlIHN0YXRlIHJlYWQgZnJvbVxyXG4gICAgICogcGVyc2lzdGVuY2UuXHJcbiAgICAgKlxyXG4gICAgICogV2UgdXBkYXRlIHRoZSBxdWVyeSB2aWV3IHdoZW5ldmVyIGEgY2xpZW50J3MgcHJpbWFyeSBzdGF0dXMgY2hhbmdlczpcclxuICAgICAqIC0gV2hlbiBhIGNsaWVudCB0cmFuc2l0aW9ucyBmcm9tIHByaW1hcnkgdG8gc2Vjb25kYXJ5LCBpdCBjYW4gbWlzc1xyXG4gICAgICogICBMb2NhbFN0b3JhZ2UgdXBkYXRlcyBhbmQgaXRzIHF1ZXJ5IHZpZXdzIG1heSB0ZW1wb3JhcmlseSBub3QgYmVcclxuICAgICAqICAgc3luY2hyb25pemVkIHdpdGggdGhlIHN0YXRlIG9uIGRpc2suXHJcbiAgICAgKiAtIEZvciBzZWNvbmRhcnkgdG8gcHJpbWFyeSB0cmFuc2l0aW9ucywgdGhlIGNsaWVudCBuZWVkcyB0byB1cGRhdGUgdGhlIGxpc3RcclxuICAgICAqICAgb2YgYHN5bmNlZERvY3VtZW50c2Agc2luY2Ugc2Vjb25kYXJ5IGNsaWVudHMgdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzXHJcbiAgICAgKiAgIGJhc2VkIHB1cmVseSBvbiBzeW50aGVzaXplZCBSZW1vdGVFdmVudHMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgYWNjb3JkaW5nXHJcbiAgICAgKiB0byB0aGUgTG9jYWxTdG9yZS5cclxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZVxyXG4gICAgICogcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBiYWNrZW5kLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gVGhlIFZpZXdDaGFuZ2UgdGhhdCByZXN1bHRlZCBmcm9tIHRoaXMgc3luY2hyb25pemF0aW9uLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgVmlldy5wcm90b3R5cGUuc3luY2hyb25pemVXaXRoUGVyc2lzdGVkU3RhdGUgPSBmdW5jdGlvbiAocXVlcnlSZXN1bHQpIHtcclxuICAgICAgICB0aGlzLl9zeW5jZWREb2N1bWVudHMgPSBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzO1xyXG4gICAgICAgIHRoaXMubGltYm9Eb2N1bWVudHMgPSBkb2N1bWVudEtleVNldCgpO1xyXG4gICAgICAgIHZhciBkb2NDaGFuZ2VzID0gdGhpcy5jb21wdXRlRG9jQ2hhbmdlcyhxdWVyeVJlc3VsdC5kb2N1bWVudHMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5Q2hhbmdlcyhkb2NDaGFuZ2VzLCAvKnVwZGF0ZUxpbWJvRG9jdW1lbnRzPSovIHRydWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgdGhpcyBxdWVyeSB3YXMganVzdCBsaXN0ZW5lZCB0by4gQ29udGFpbnNcclxuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxyXG4gICAgICogYGhhc1BlbmRpbmdXcml0ZXNgIHN0YXR1cyBvZiB0aGUgYWxyZWFkeSBlc3RhYmxpc2hlZCB2aWV3LlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgVmlldy5wcm90b3R5cGUuY29tcHV0ZUluaXRpYWxTbmFwc2hvdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzKHRoaXMucXVlcnksIHRoaXMuZG9jdW1lbnRTZXQsIHRoaXMubXV0YXRlZEtleXMsIHRoaXMuc3luY1N0YXRlID09PSBTeW5jU3RhdGUuTG9jYWwpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWaWV3O1xyXG59KCkpO1xyXG5mdW5jdGlvbiBjb21wYXJlQ2hhbmdlVHlwZShjMSwgYzIpIHtcclxuICAgIHZhciBvcmRlciA9IGZ1bmN0aW9uIChjaGFuZ2UpIHtcclxuICAgICAgICBzd2l0Y2ggKGNoYW5nZSkge1xyXG4gICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuQWRkZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgY2FzZSBDaGFuZ2VUeXBlLk1vZGlmaWVkOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5NZXRhZGF0YTpcclxuICAgICAgICAgICAgICAgIC8vIEEgbWV0YWRhdGEgY2hhbmdlIGlzIGNvbnZlcnRlZCB0byBhIG1vZGlmaWVkIGNoYW5nZSBhdCB0aGUgcHVibGljXHJcbiAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcclxuICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhIGFuZCBtb2RpZmllZCBjaGFuZ2VzIG11c3QgYmUgc29ydGVkIGVxdWl2YWxlbnRseS5cclxuICAgICAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgICAgICBjYXNlIENoYW5nZVR5cGUuUmVtb3ZlZDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoJ1Vua25vd24gQ2hhbmdlVHlwZTogJyArIGNoYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBvcmRlcihjMSkgLSBvcmRlcihjMik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBSRVRSWV9DT1VOVCA9IDU7XHJcbi8qKlxyXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xyXG4gKiB3aXRoIGJhY2tvZmYuXHJcbiAqL1xyXG52YXIgVHJhbnNhY3Rpb25SdW5uZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUcmFuc2FjdGlvblJ1bm5lcihhc3luY1F1ZXVlLCByZW1vdGVTdG9yZSwgdXBkYXRlRnVuY3Rpb24sIGRlZmVycmVkKSB7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gYXN5bmNRdWV1ZTtcclxuICAgICAgICB0aGlzLnJlbW90ZVN0b3JlID0gcmVtb3RlU3RvcmU7XHJcbiAgICAgICAgdGhpcy51cGRhdGVGdW5jdGlvbiA9IHVwZGF0ZUZ1bmN0aW9uO1xyXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBkZWZlcnJlZDtcclxuICAgICAgICB0aGlzLnJldHJpZXMgPSBSRVRSWV9DT1VOVDtcclxuICAgICAgICB0aGlzLmJhY2tvZmYgPSBuZXcgRXhwb25lbnRpYWxCYWNrb2ZmKHRoaXMuYXN5bmNRdWV1ZSwgVGltZXJJZC5SZXRyeVRyYW5zYWN0aW9uKTtcclxuICAgIH1cclxuICAgIC8qKiBSdW5zIHRoZSB0cmFuc2FjdGlvbiBhbmQgc2V0cyB0aGUgcmVzdWx0IG9uIGRlZmVycmVkLiAqL1xyXG4gICAgVHJhbnNhY3Rpb25SdW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJ1bldpdGhCYWNrT2ZmKCk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb25SdW5uZXIucHJvdG90eXBlLnJ1bldpdGhCYWNrT2ZmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5iYWNrb2ZmLmJhY2tvZmZBbmRSdW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb24sIHVzZXJQcm9taXNlO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbiA9IHRoaXMucmVtb3RlU3RvcmUuY3JlYXRlVHJhbnNhY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIHVzZXJQcm9taXNlID0gdGhpcy50cnlSdW5VcGRhdGVGdW5jdGlvbih0cmFuc2FjdGlvbik7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlclByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyUHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29tbWl0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGNvbW1pdEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlVHJhbnNhY3Rpb25FcnJvcihjb21taXRFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICh1c2VyUHJvbWlzZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZVRyYW5zYWN0aW9uRXJyb3IodXNlclByb21pc2VFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvblJ1bm5lci5wcm90b3R5cGUudHJ5UnVuVXBkYXRlRnVuY3Rpb24gPSBmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgdXNlclByb21pc2UgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKHRyYW5zYWN0aW9uKTtcclxuICAgICAgICAgICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHVzZXJQcm9taXNlKSB8fFxyXG4gICAgICAgICAgICAgICAgIXVzZXJQcm9taXNlLmNhdGNoIHx8XHJcbiAgICAgICAgICAgICAgICAhdXNlclByb21pc2UudGhlbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoJ1RyYW5zYWN0aW9uIGNhbGxiYWNrIG11c3QgcmV0dXJuIGEgUHJvbWlzZScpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1c2VyUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIERvIG5vdCByZXRyeSBlcnJvcnMgdGhyb3duIGJ5IHVzZXIgcHJvdmlkZWQgdXBkYXRlRnVuY3Rpb24uXHJcbiAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uUnVubmVyLnByb3RvdHlwZS5oYW5kbGVUcmFuc2FjdGlvbkVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5yZXRyaWVzID4gMCAmJiB0aGlzLmlzUmV0cnlhYmxlVHJhbnNhY3Rpb25FcnJvcihlcnJvcikpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXRyaWVzIC09IDE7XHJcbiAgICAgICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnJ1bldpdGhCYWNrT2ZmKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUcmFuc2FjdGlvblJ1bm5lci5wcm90b3R5cGUuaXNSZXRyeWFibGVUcmFuc2FjdGlvbkVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdGaXJlYmFzZUVycm9yJykge1xyXG4gICAgICAgICAgICAvLyBJbiB0cmFuc2FjdGlvbnMsIHRoZSBiYWNrZW5kIHdpbGwgZmFpbCBvdXRkYXRlZCByZWFkcyB3aXRoIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXHJcbiAgICAgICAgICAgIC8vIG5vbi1tYXRjaGluZyBkb2N1bWVudCB2ZXJzaW9ucyB3aXRoIEFCT1JURUQuIFRoZXNlIGVycm9ycyBzaG91bGQgYmUgcmV0cmllZC5cclxuICAgICAgICAgICAgdmFyIGNvZGUgPSBlcnJvci5jb2RlO1xyXG4gICAgICAgICAgICByZXR1cm4gKGNvZGUgPT09ICdhYm9ydGVkJyB8fFxyXG4gICAgICAgICAgICAgICAgY29kZSA9PT0gJ2ZhaWxlZC1wcmVjb25kaXRpb24nIHx8XHJcbiAgICAgICAgICAgICAgICAhaXNQZXJtYW5lbnRFcnJvcihjb2RlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHJhbnNhY3Rpb25SdW5uZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyQ5ID0gJ1N5bmNFbmdpbmUnO1xyXG4vKipcclxuICogUXVlcnlWaWV3IGNvbnRhaW5zIGFsbCBvZiB0aGUgZGF0YSB0aGF0IFN5bmNFbmdpbmUgbmVlZHMgdG8ga2VlcCB0cmFjayBvZiBmb3JcclxuICogYSBwYXJ0aWN1bGFyIHF1ZXJ5LlxyXG4gKi9cclxudmFyIFF1ZXJ5VmlldyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5VmlldyhcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHF1ZXJ5IGl0c2VsZi5cclxuICAgICAqL1xyXG4gICAgcXVlcnksIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgdGFyZ2V0IG51bWJlciBjcmVhdGVkIGJ5IHRoZSBjbGllbnQgdGhhdCBpcyB1c2VkIGluIHRoZSB3YXRjaFxyXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXHJcbiAgICAgKi9cclxuICAgIHRhcmdldElkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcclxuICAgICAqIGRvY3MgYXJlIGluIHRoZSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMsXHJcbiAgICAgKiBhbmQgYXBwbGllcyB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0XHJcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxyXG4gICAgICovXHJcbiAgICB2aWV3KSB7XHJcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFF1ZXJ5VmlldztcclxufSgpKTtcclxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovXHJcbnZhciBMaW1ib1Jlc29sdXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMaW1ib1Jlc29sdXRpb24oa2V5KSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IHRvIHRydWUgb25jZSB3ZSd2ZSByZWNlaXZlZCBhIGRvY3VtZW50LiBUaGlzIGlzIHVzZWQgaW5cclxuICAgICAgICAgKiBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KCkgYW5kIHVsdGltYXRlbHkgdXNlZCBieSBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgdG9cclxuICAgICAgICAgKiBkZWNpZGUgd2hldGhlciBpdCBuZWVkcyB0byBtYW51ZmFjdHVyZSBhIGRlbGV0ZSBldmVudCBmb3IgdGhlIHRhcmdldCBvbmNlXHJcbiAgICAgICAgICogdGhlIHRhcmdldCBpcyBDVVJSRU5ULlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZWREb2N1bWVudCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIExpbWJvUmVzb2x1dGlvbjtcclxufSgpKTtcclxuLyoqXHJcbiAqIFN5bmNFbmdpbmUgaXMgdGhlIGNlbnRyYWwgY29udHJvbGxlciBpbiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUuIEl0IGlzXHJcbiAqIHRoZSBnbHVlIGNvZGUgYmV0d2VlbiB0aGUgRXZlbnRNYW5hZ2VyLCBMb2NhbFN0b3JlLCBhbmQgUmVtb3RlU3RvcmUuIFNvbWUgb2ZcclxuICogU3luY0VuZ2luZSdzIHJlc3BvbnNpYmlsaXRpZXMgaW5jbHVkZTpcclxuICogMS4gQ29vcmRpbmF0aW5nIGNsaWVudCByZXF1ZXN0cyBhbmQgcmVtb3RlIGV2ZW50cyBiZXR3ZWVuIHRoZSBFdmVudE1hbmFnZXJcclxuICogICAgYW5kIHRoZSBsb2NhbCBhbmQgcmVtb3RlIGRhdGEgc3RvcmVzLlxyXG4gKiAyLiBNYW5hZ2luZyBhIFZpZXcgb2JqZWN0IGZvciBlYWNoIHF1ZXJ5LCBwcm92aWRpbmcgdGhlIHVuaWZpZWQgdmlldyBiZXR3ZWVuXHJcbiAqICAgIHRoZSBsb2NhbCBhbmQgcmVtb3RlIGRhdGEgc3RvcmVzLlxyXG4gKiAzLiBOb3RpZnlpbmcgdGhlIFJlbW90ZVN0b3JlIHdoZW4gdGhlIExvY2FsU3RvcmUgaGFzIG5ldyBtdXRhdGlvbnMgaW4gaXRzXHJcbiAqICAgIHF1ZXVlIHRoYXQgbmVlZCBzZW5kaW5nIHRvIHRoZSBiYWNrZW5kLlxyXG4gKlxyXG4gKiBUaGUgU3luY0VuZ2luZeKAmXMgbWV0aG9kcyBzaG91bGQgb25seSBldmVyIGJlIGNhbGxlZCBieSBtZXRob2RzIHJ1bm5pbmcgaW4gdGhlXHJcbiAqIGdsb2JhbCBhc3luYyBxdWV1ZS5cclxuICovXHJcbnZhciBTeW5jRW5naW5lID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3luY0VuZ2luZShsb2NhbFN0b3JlLCByZW1vdGVTdG9yZSwgXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXHJcbiAgICBzaGFyZWRDbGllbnRTdGF0ZSwgY3VycmVudFVzZXIpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBsb2NhbFN0b3JlO1xyXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUgPSByZW1vdGVTdG9yZTtcclxuICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gc2hhcmVkQ2xpZW50U3RhdGU7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xyXG4gICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5ID0gbmV3IE9iamVjdE1hcChmdW5jdGlvbiAocSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcS5jYW5vbmljYWxJZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucXVlcmllc0J5VGFyZ2V0ID0ge307XHJcbiAgICAgICAgdGhpcy5saW1ib1RhcmdldHNCeUtleSA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XHJcbiAgICAgICAgdGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXQgPSB7fTtcclxuICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRSZWZzID0gbmV3IFJlZmVyZW5jZVNldCgpO1xyXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjb21wbGV0aW9uIGhhbmRsZXJzLCBpbmRleGVkIGJ5IFVzZXIgYW5kIEJhdGNoSWQuICovXHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblVzZXJDYWxsYmFja3MgPSB7fTtcclxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIGFsbCBwZW5kaW5nIHdyaXRlcyB0byBiZSBhY2tub3dsZWRnZWQuICovXHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzQ2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMubGltYm9UYXJnZXRJZEdlbmVyYXRvciA9IFRhcmdldElkR2VuZXJhdG9yLmZvclN5bmNFbmdpbmUoKTtcclxuICAgICAgICAvLyBUaGUgcHJpbWFyeSBzdGF0ZSBpcyBzZXQgdG8gYHRydWVgIG9yIGBmYWxzZWAgaW1tZWRpYXRlbHkgYWZ0ZXIgRmlyZXN0b3JlXHJcbiAgICAgICAgLy8gc3RhcnR1cC4gSW4gdGhlIGludGVyaW0sIGEgY2xpZW50IHNob3VsZCBvbmx5IGJlIGNvbnNpZGVyZWQgcHJpbWFyeSBpZlxyXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXHJcbiAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IE9ubGluZVN0YXRlLlVua25vd247XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3luY0VuZ2luZS5wcm90b3R5cGUsIFwiaXNQcmltYXJ5Q2xpZW50XCIsIHtcclxuICAgICAgICAvLyBPbmx5IHVzZWQgZm9yIHRlc3RpbmcuXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzUHJpbWFyeSA9PT0gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIC8qKiBTdWJzY3JpYmVzIHRvIFN5bmNFbmdpbmUgbm90aWZpY2F0aW9ucy4gSGFzIHRvIGJlIGNhbGxlZCBleGFjdGx5IG9uY2UuICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3luY0VuZ2luZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgYXNzZXJ0KHN5bmNFbmdpbmVMaXN0ZW5lciAhPT0gbnVsbCwgJ1N5bmNFbmdpbmUgbGlzdGVuZXIgY2Fubm90IGJlIG51bGwnKTtcclxuICAgICAgICBhc3NlcnQodGhpcy5zeW5jRW5naW5lTGlzdGVuZXIgPT09IG51bGwsICdTeW5jRW5naW5lIGFscmVhZHkgaGFzIGEgc3Vic2NyaWJlci4nKTtcclxuICAgICAgICB0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lciA9IHN5bmNFbmdpbmVMaXN0ZW5lcjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYXRlcyB0aGUgbmV3IGxpc3RlbiwgcmVzb2x2ZXMgcHJvbWlzZSB3aGVuIGxpc3RlbiBlbnF1ZXVlZCB0byB0aGVcclxuICAgICAqIHNlcnZlci4gQWxsIHRoZSBzdWJzZXF1ZW50IHZpZXcgc25hcHNob3RzIG9yIGVycm9ycyBhcmUgc2VudCB0byB0aGVcclxuICAgICAqIHN1YnNjcmliZWQgaGFuZGxlcnMuIFJldHVybnMgdGhlIHRhcmdldElkIG9mIHRoZSBxdWVyeS5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUubGlzdGVuID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0SWQsIHZpZXdTbmFwc2hvdCwgcXVlcnlWaWV3LCB0YXJnZXREYXRhLCBzdGF0dXNfMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCdsaXN0ZW4oKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVZpZXcgPSB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmdldChxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcXVlcnlWaWV3KSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUE9SVElORyBOT1RFOiBXaXRoIE11bHRpLVRhYiBXZWIsIGl0IGlzIHBvc3NpYmxlIHRoYXQgYSBxdWVyeSB2aWV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgZXhpc3RzIHdoZW4gRXZlbnRNYW5hZ2VyIGNhbGxzIHVzIGZvciB0aGUgZmlyc3QgdGltZS4gVGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVoYWxmIG9mIGFub3RoZXIgdGFiIGFuZCB0aGUgdXNlciBvZiB0aGUgcHJpbWFyeSBhbHNvIHN0YXJ0cyBsaXN0ZW5pbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gdGhlIHF1ZXJ5LiBFdmVudE1hbmFnZXIgd2lsbCBub3QgaGF2ZSBhbiBhc3NpZ25lZCB0YXJnZXQgSUQgaW4gdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQgPSBxdWVyeVZpZXcudGFyZ2V0SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdTbmFwc2hvdCA9IHF1ZXJ5Vmlldy52aWV3LmNvbXB1dGVJbml0aWFsU25hcHNob3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuYWxsb2NhdGVUYXJnZXQocXVlcnkudG9UYXJnZXQoKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXzEgPSB0aGlzLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQodGFyZ2V0RGF0YS50YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkID0gdGFyZ2V0RGF0YS50YXJnZXRJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChxdWVyeSwgdGFyZ2V0SWQsIHN0YXR1c18xID09PSAnY3VycmVudCcpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdTbmFwc2hvdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLmxpc3Rlbih0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lci5vbldhdGNoQ2hhbmdlKFt2aWV3U25hcHNob3RdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRhcmdldElkXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgYSB2aWV3IGZvciBhIHByZXZpb3VzbHkgdW5rbm93biBxdWVyeSBhbmQgY29tcHV0ZXMgaXRzIGluaXRpYWxcclxuICAgICAqIHNuYXBzaG90LlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdCA9IGZ1bmN0aW9uIChxdWVyeSwgdGFyZ2V0SWQsIGN1cnJlbnQpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeVJlc3VsdCwgdmlldywgdmlld0RvY0NoYW5nZXMsIHN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlLCB2aWV3Q2hhbmdlLCBkYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyB0cnVlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldyA9IG5ldyBWaWV3KHF1ZXJ5LCBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld0RvY0NoYW5nZXMgPSB2aWV3LmNvbXB1dGVEb2NDaGFuZ2VzKHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlID0gVGFyZ2V0Q2hhbmdlLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0YXJnZXRJZCwgY3VycmVudCAmJiB0aGlzLm9ubGluZVN0YXRlICE9PSBPbmxpbmVTdGF0ZS5PZmZsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld0NoYW5nZSA9IHZpZXcuYXBwbHlDaGFuZ2VzKHZpZXdEb2NDaGFuZ2VzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIHRoaXMuaXNQcmltYXJ5ID09PSB0cnVlLCBzeW50aGVzaXplZFRhcmdldENoYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh2aWV3Q2hhbmdlLmxpbWJvQ2hhbmdlcy5sZW5ndGggPT09IDAsICdWaWV3IHJldHVybmVkIGxpbWJvIGRvY3MgYmVmb3JlIHRhcmdldCBhY2sgZnJvbSB0aGUgc2VydmVyLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoISF2aWV3Q2hhbmdlLnNuYXBzaG90LCAnYXBwbHlDaGFuZ2VzIGZvciBuZXcgdmlldyBzaG91bGQgYWx3YXlzIHJldHVybiBhIHNuYXBzaG90Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgUXVlcnlWaWV3KHF1ZXJ5LCB0YXJnZXRJZCwgdmlldyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuc2V0KHF1ZXJ5LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXS5wdXNoKHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHZpZXdDaGFuZ2Uuc25hcHNob3RdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlY29uY2lsZSB0aGUgbGlzdCBvZiBzeW5jZWQgZG9jdW1lbnRzIGluIGFuIGV4aXN0aW5nIHZpZXcgd2l0aCB0aG9zZVxyXG4gICAgICogZnJvbSBwZXJzaXN0ZW5jZS5cclxuICAgICAqL1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnN5bmNocm9uaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdCA9IGZ1bmN0aW9uIChxdWVyeVZpZXcpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeVJlc3VsdCwgdmlld1NuYXBzaG90O1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5Vmlldy5xdWVyeSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gdHJ1ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlSZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdTbmFwc2hvdCA9IHF1ZXJ5Vmlldy52aWV3LnN5bmNocm9uaXplV2l0aFBlcnNpc3RlZFN0YXRlKHF1ZXJ5UmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYWNrZWRMaW1ib3MocXVlcnlWaWV3LnRhcmdldElkLCB2aWV3U25hcHNob3QubGltYm9DaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdmlld1NuYXBzaG90XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFN0b3BzIGxpc3RlbmluZyB0byB0aGUgcXVlcnkuICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS51bmxpc3RlbiA9IGZ1bmN0aW9uIChxdWVyeSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5VmlldywgcXVlcmllcywgdGFyZ2V0UmVtYWluc0FjdGl2ZTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRTdWJzY3JpYmVkKCd1bmxpc3RlbigpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5VmlldyA9IHRoaXMucXVlcnlWaWV3c0J5UXVlcnkuZ2V0KHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCEhcXVlcnlWaWV3LCAnVHJ5aW5nIHRvIHVubGlzdGVuIG9uIHF1ZXJ5IG5vdCBmb3VuZDonICsgcXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyaWVzID0gdGhpcy5xdWVyaWVzQnlUYXJnZXRbcXVlcnlWaWV3LnRhcmdldElkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJpZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyaWVzQnlUYXJnZXRbcXVlcnlWaWV3LnRhcmdldElkXSA9IHF1ZXJpZXMuZmlsdGVyKGZ1bmN0aW9uIChxKSB7IHJldHVybiAhcS5pc0VxdWFsKHF1ZXJ5KTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmRlbGV0ZShxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBsb2NhbCBxdWVyeSB0YXJnZXQgZmlyc3QgdG8gYWxsb3cgdXMgdG8gdmVyaWZ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZXRoZXIgYW55IG90aGVyIGNsaWVudCBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQocXVlcnlWaWV3LnRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0UmVtYWluc0FjdGl2ZSA9IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuaXNBY3RpdmVRdWVyeVRhcmdldChxdWVyeVZpZXcudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0YXJnZXRSZW1haW5zQWN0aXZlKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbGVhc2VUYXJnZXQocXVlcnlWaWV3LnRhcmdldElkLCAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5jbGVhclF1ZXJ5U3RhdGUocXVlcnlWaWV3LnRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdGVTdG9yZS51bmxpc3RlbihxdWVyeVZpZXcudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZUFuZENsZWFudXBUYXJnZXQocXVlcnlWaWV3LnRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQW5kQ2xlYW51cFRhcmdldChxdWVyeVZpZXcudGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUucmVsZWFzZVRhcmdldChxdWVyeVZpZXcudGFyZ2V0SWQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyB0cnVlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWF0ZXMgdGhlIHdyaXRlIG9mIGxvY2FsIG11dGF0aW9uIGJhdGNoIHdoaWNoIGludm9sdmVzIGFkZGluZyB0aGVcclxuICAgICAqIHdyaXRlcyB0byB0aGUgbXV0YXRpb24gcXVldWUsIG5vdGlmeWluZyB0aGUgcmVtb3RlIHN0b3JlIGFib3V0IG5ld1xyXG4gICAgICogbXV0YXRpb25zIGFuZCByYWlzaW5nIGV2ZW50cyBmb3IgYW55IGNoYW5nZXMgdGhpcyB3cml0ZSBjYXVzZWQuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhpcyBjYWxsIGlzIHJlc29sdmVkIHdoZW4gdGhlIGFib3ZlIHN0ZXBzXHJcbiAgICAgKiBoYXZlIGNvbXBsZXRlZCwgKm5vdCogd2hlbiB0aGUgd3JpdGUgd2FzIGFja2VkIGJ5IHRoZSBiYWNrZW5kLiBUaGVcclxuICAgICAqIHVzZXJDYWxsYmFjayBpcyByZXNvbHZlZCBvbmNlIHRoZSB3cml0ZSB3YXMgYWNrZWQvcmVqZWN0ZWQgYnkgdGhlXHJcbiAgICAgKiBiYWNrZW5kIChvciBmYWlsZWQgbG9jYWxseSBmb3IgYW55IG90aGVyIHJlYXNvbikuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGJhdGNoLCB1c2VyQ2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgnd3JpdGUoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUubG9jYWxXcml0ZShiYXRjaCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLmFkZFBlbmRpbmdNdXRhdGlvbihyZXN1bHQuYmF0Y2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTXV0YXRpb25DYWxsYmFjayhyZXN1bHQuYmF0Y2hJZCwgdXNlckNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKHJlc3VsdC5jaGFuZ2VzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuZmlsbFdyaXRlUGlwZWxpbmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUYWtlcyBhbiB1cGRhdGVGdW5jdGlvbiBpbiB3aGljaCBhIHNldCBvZiByZWFkcyBhbmQgd3JpdGVzIGNhbiBiZSBwZXJmb3JtZWRcclxuICAgICAqIGF0b21pY2FsbHkuIEluIHRoZSB1cGRhdGVGdW5jdGlvbiwgdGhlIGNsaWVudCBjYW4gcmVhZCBhbmQgd3JpdGUgdmFsdWVzXHJcbiAgICAgKiB1c2luZyB0aGUgc3VwcGxpZWQgdHJhbnNhY3Rpb24gb2JqZWN0LiBBZnRlciB0aGUgdXBkYXRlRnVuY3Rpb24sIGFsbFxyXG4gICAgICogY2hhbmdlcyB3aWxsIGJlIGNvbW1pdHRlZC4gSWYgYSByZXRyeWFibGUgZXJyb3Igb2NjdXJzIChleDogc29tZSBvdGhlclxyXG4gICAgICogY2xpZW50IGhhcyBjaGFuZ2VkIGFueSBvZiB0aGUgZGF0YSByZWZlcmVuY2VkKSwgdGhlbiB0aGUgdXBkYXRlRnVuY3Rpb25cclxuICAgICAqIHdpbGwgYmUgY2FsbGVkIGFnYWluIGFmdGVyIGEgYmFja29mZi4gSWYgdGhlIHVwZGF0ZUZ1bmN0aW9uIHN0aWxsIGZhaWxzXHJcbiAgICAgKiBhZnRlciBhbGwgcmV0cmllcywgdGhlbiB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSByZWplY3RlZC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgdHJhbnNhY3Rpb24gb2JqZWN0IHBhc3NlZCB0byB0aGUgdXBkYXRlRnVuY3Rpb24gY29udGFpbnMgbWV0aG9kcyBmb3JcclxuICAgICAqIGFjY2Vzc2luZyBkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zLiBVbmxpa2Ugb3RoZXIgZGF0YXN0b3JlIGFjY2VzcywgZGF0YVxyXG4gICAgICogYWNjZXNzZWQgd2l0aCB0aGUgdHJhbnNhY3Rpb24gd2lsbCBub3QgcmVmbGVjdCBsb2NhbCBjaGFuZ2VzIHRoYXQgaGF2ZSBub3RcclxuICAgICAqIGJlZW4gY29tbWl0dGVkLiBGb3IgdGhpcyByZWFzb24sIGl0IGlzIHJlcXVpcmVkIHRoYXQgYWxsIHJlYWRzIGFyZVxyXG4gICAgICogcGVyZm9ybWVkIGJlZm9yZSBhbnkgd3JpdGVzLiBUcmFuc2FjdGlvbnMgbXVzdCBiZSBwZXJmb3JtZWQgd2hpbGUgb25saW5lLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBEZWZlcnJlZCBpbnB1dCBpcyByZXNvbHZlZCB3aGVuIHRoZSB0cmFuc2FjdGlvbiBpcyBmdWxseSBjb21taXR0ZWQuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnJ1blRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKGFzeW5jUXVldWUsIHVwZGF0ZUZ1bmN0aW9uLCBkZWZlcnJlZCkge1xyXG4gICAgICAgIG5ldyBUcmFuc2FjdGlvblJ1bm5lcihhc3luY1F1ZXVlLCB0aGlzLnJlbW90ZVN0b3JlLCB1cGRhdGVGdW5jdGlvbiwgZGVmZXJyZWQpLnJ1bigpO1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFwcGx5UmVtb3RlRXZlbnQgPSBmdW5jdGlvbiAocmVtb3RlRXZlbnQpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFuZ2VzLCBlcnJvcl8xO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ2FwcGx5UmVtb3RlRXZlbnQoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDQsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuYXBwbHlSZW1vdGVFdmVudChyZW1vdGVFdmVudCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2gocmVtb3RlRXZlbnQudGFyZ2V0Q2hhbmdlcywgZnVuY3Rpb24gKHRhcmdldElkLCB0YXJnZXRDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW1ib1Jlc29sdXRpb24gPSBfdGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXRbTnVtYmVyKHRhcmdldElkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGltYm9SZXNvbHV0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBhIGxpbWJvIHJlc29sdXRpb24gbG9va3VwLCBpdCdzIGZvciBhIHNpbmdsZSBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQodGFyZ2V0Q2hhbmdlLmFkZGVkRG9jdW1lbnRzLnNpemUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDaGFuZ2UubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldENoYW5nZS5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSwgJ0xpbWJvIHJlc29sdXRpb24gZm9yIHNpbmdsZSBkb2N1bWVudCBjb250YWlucyBtdWx0aXBsZSBjaGFuZ2VzLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRDaGFuZ2UuYWRkZWREb2N1bWVudHMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltYm9SZXNvbHV0aW9uLnJlY2VpdmVkRG9jdW1lbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXJnZXRDaGFuZ2UubW9kaWZpZWREb2N1bWVudHMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGxpbWJvUmVzb2x1dGlvbi5yZWNlaXZlZERvY3VtZW50LCAnUmVjZWl2ZWQgY2hhbmdlIGZvciBsaW1ibyB0YXJnZXQgZG9jdW1lbnQgd2l0aG91dCBhZGQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldENoYW5nZS5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydChsaW1ib1Jlc29sdXRpb24ucmVjZWl2ZWREb2N1bWVudCwgJ1JlY2VpdmVkIHJlbW92ZSBmb3IgbGltYm8gdGFyZ2V0IGRvY3VtZW50IHdpdGhvdXQgYWRkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1ib1Jlc29sdXRpb24ucmVjZWl2ZWREb2N1bWVudCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShjaGFuZ2VzLCByZW1vdGVFdmVudCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGlnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlcnJvcl8xKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXHJcbiAgICAgKiB0aGUgY2hhbmdlLlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hcHBseU9ubGluZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlLCBzb3VyY2UpIHtcclxuICAgICAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xyXG4gICAgICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcclxuICAgICAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXHJcbiAgICAgICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXHJcbiAgICAgICAgaWYgKCh0aGlzLmlzUHJpbWFyeSAmJiBzb3VyY2UgPT09IE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlKSB8fFxyXG4gICAgICAgICAgICAoIXRoaXMuaXNQcmltYXJ5ICYmIHNvdXJjZSA9PT0gT25saW5lU3RhdGVTb3VyY2UuU2hhcmVkQ2xpZW50U3RhdGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgnYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSgpJyk7XHJcbiAgICAgICAgICAgIHZhciBuZXdWaWV3U25hcHNob3RzXzEgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5mb3JFYWNoKGZ1bmN0aW9uIChxdWVyeSwgcXVlcnlWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmlld0NoYW5nZSA9IHF1ZXJ5Vmlldy52aWV3LmFwcGx5T25saW5lU3RhdGVDaGFuZ2Uob25saW5lU3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KHZpZXdDaGFuZ2UubGltYm9DaGFuZ2VzLmxlbmd0aCA9PT0gMCwgJ09ubGluZVN0YXRlIHNob3VsZCBub3QgYWZmZWN0IGxpbWJvIGRvY3VtZW50cy4nKTtcclxuICAgICAgICAgICAgICAgIGlmICh2aWV3Q2hhbmdlLnNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3Vmlld1NuYXBzaG90c18xLnB1c2godmlld0NoYW5nZS5zbmFwc2hvdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lci5vbk9ubGluZVN0YXRlQ2hhbmdlKG9ubGluZVN0YXRlKTtcclxuICAgICAgICAgICAgdGhpcy5zeW5jRW5naW5lTGlzdGVuZXIub25XYXRjaENoYW5nZShuZXdWaWV3U25hcHNob3RzXzEpO1xyXG4gICAgICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gb25saW5lU3RhdGU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zZXRPbmxpbmVTdGF0ZShvbmxpbmVTdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVqZWN0TGlzdGVuID0gZnVuY3Rpb24gKHRhcmdldElkLCBlcnIpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW1ib1Jlc29sdXRpb24sIGxpbWJvS2V5LCBkb2N1bWVudFVwZGF0ZXMsIHJlc29sdmVkTGltYm9Eb2N1bWVudHMsIGV2ZW50XzE7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgncmVqZWN0TGlzdGVucygpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZSh0YXJnZXRJZCwgJ3JlamVjdGVkJywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGltYm9SZXNvbHV0aW9uID0gdGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXRbdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW1ib0tleSA9IGxpbWJvUmVzb2x1dGlvbiAmJiBsaW1ib1Jlc29sdXRpb24ua2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbWJvS2V5KSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBxdWVyeSBmYWlsZWQsIHdlIHdvbid0IHdhbnQgdG8gbWFudWFsbHkgdW5saXN0ZW4gdG8gaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvIGdvIGFoZWFkIGFuZCByZW1vdmUgaXQgZnJvbSBib29ra2VlcGluZy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW1ib1RhcmdldHNCeUtleSA9IHRoaXMubGltYm9UYXJnZXRzQnlLZXkucmVtb3ZlKGxpbWJvS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGltYm9SZXNvbHV0aW9uc0J5VGFyZ2V0W3RhcmdldElkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRVcGRhdGVzID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRVcGRhdGVzID0gZG9jdW1lbnRVcGRhdGVzLmluc2VydChsaW1ib0tleSwgbmV3IE5vRG9jdW1lbnQobGltYm9LZXksIFNuYXBzaG90VmVyc2lvbi5mb3JEZWxldGVkRG9jKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IGRvY3VtZW50S2V5U2V0KCkuYWRkKGxpbWJvS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRfMSA9IG5ldyBSZW1vdGVFdmVudChTbmFwc2hvdFZlcnNpb24uTUlOLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogdGFyZ2V0Q2hhbmdlcz0gKi8ge30sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiB0YXJnZXRNaXNtYXRjaGVzPSAqLyBuZXcgU29ydGVkU2V0KHByaW1pdGl2ZUNvbXBhcmF0b3IpLCBkb2N1bWVudFVwZGF0ZXMsIHJlc29sdmVkTGltYm9Eb2N1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5hcHBseVJlbW90ZUV2ZW50KGV2ZW50XzEpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbGVhc2VUYXJnZXQodGFyZ2V0SWQsIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMucmVtb3ZlQW5kQ2xlYW51cFRhcmdldCh0YXJnZXRJZCwgZXJyKTsgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5hcHBseUJhdGNoU3RhdGUgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgYmF0Y2hTdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkb2N1bWVudHM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgnYXBwbHlCYXRjaFN0YXRlKCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmxvb2t1cE11dGF0aW9uRG9jdW1lbnRzKGJhdGNoSWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50cyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50cyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUsIGluIHdoaWNoIGNhc2Ugd2Ugd29uJ3QgaGF2ZSBjYWNoZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMuIEluIHRoaXMgY2FzZSB3ZSBjYW4gc2FmZWx5IGlnbm9yZSB0aGUgdXBkYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoYWQsIHdlIHdvdWxkIGhhdmUgY2FjaGVkIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMpLCBhbmQgc28gd2Ugd2lsbCBqdXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWUgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzIHZpYSBub3JtYWwgcmVtb3RlIGRvY3VtZW50IHVwZGF0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzIGFwcGxpY2FibGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDksICdDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogJyArIGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGJhdGNoU3RhdGUgPT09ICdwZW5kaW5nJykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uIGlzIGRpc2FibGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbW90ZVN0b3JlLmZpbGxXcml0ZVBpcGVsaW5lKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tlbmQuIFNlY29uZGFyeSBjbGllbnRzIHdpbGwgaWdub3JlIHRoZXNlIHdyaXRlcyBzaW5jZSB0aGVpciByZW1vdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiYXRjaFN0YXRlID09PSAnYWNrbm93bGVkZ2VkJyB8fCBiYXRjaFN0YXRlID09PSAncmVqZWN0ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBCb3RoIHRoZXNlIG1ldGhvZHMgYXJlIG5vLW9wcyBmb3IgYmF0Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgZnJvbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXIgY2xpZW50cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1VzZXJDYWxsYmFjayhiYXRjaElkLCBlcnJvciA/IGVycm9yIDogbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmUucmVtb3ZlQ2FjaGVkTXV0YXRpb25CYXRjaE1ldGFkYXRhKGJhdGNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbChcIlVua25vd24gYmF0Y2hTdGF0ZTogXCIgKyBiYXRjaFN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoZG9jdW1lbnRzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBmdW5jdGlvbiAobXV0YXRpb25CYXRjaFJlc3VsdCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGJhdGNoSWQsIGNoYW5nZXMsIGVycm9yXzI7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0U3Vic2NyaWJlZCgnYXBwbHlTdWNjZXNzZnVsV3JpdGUoKScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXRjaElkID0gbXV0YXRpb25CYXRjaFJlc3VsdC5iYXRjaC5iYXRjaElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1cCksIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZSBsaXN0ZW4gZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NVc2VyQ2FsbGJhY2soYmF0Y2hJZCwgLyplcnJvcj0qLyBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA0LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmFja25vd2xlZGdlQmF0Y2gobXV0YXRpb25CYXRjaFJlc3VsdCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKGJhdGNoSWQsICdhY2tub3dsZWRnZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGNoYW5nZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8yID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZXJyb3JfMildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVqZWN0RmFpbGVkV3JpdGUgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFuZ2VzLCBlcnJvcl8zO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFzc2VydFN1YnNjcmliZWQoJ3JlamVjdEZhaWxlZFdyaXRlKCknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHQgdXApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlbiBiZWZvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGlzdGVuIGV2ZW50cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVXNlckNhbGxiYWNrKGJhdGNoSWQsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhiYXRjaElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA0LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLnJlamVjdEJhdGNoKGJhdGNoSWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShiYXRjaElkLCAncmVqZWN0ZWQnLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShjaGFuZ2VzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKGVycm9yXzMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xyXG4gICAgICogYXJlIGFja25vd2xlZGdlZCAuXHJcbiAgICAgKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnJlZ2lzdGVyUGVuZGluZ1dyaXRlc0NhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaGlnaGVzdEJhdGNoSWQsIGNhbGxiYWNrcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJlbW90ZVN0b3JlLmNhblVzZU5ldHdvcmsoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ5LCAnVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiJ2F3YWl0UGVuZGluZ1dyaXRlcygpJyB3aWxsIG5vdCBjb21wbGV0ZSB1bnRpbCB0aGUgbmV0d29yayBpcyBlbmFibGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hlc3RCYXRjaElkID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGlnaGVzdEJhdGNoSWQgPT09IEJBVENISURfVU5LTk9XTikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheSBpZiB0aGVyZSBpcyBubyBwZW5kaW5nIHdyaXRlcyBhdCB0aGUgbW9tZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcyA9IHRoaXMucGVuZGluZ1dyaXRlc0NhbGxiYWNrcy5nZXQoaGlnaGVzdEJhdGNoSWQpIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1dyaXRlc0NhbGxiYWNrcy5zZXQoaGlnaGVzdEJhdGNoSWQsIGNhbGxiYWNrcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUcmlnZ2VycyB0aGUgY2FsbGJhY2tzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHRoaXMgYmF0Y2ggaWQgdG8gZ2V0IGFja25vd2xlZGdlZCBieSBzZXJ2ZXIsXHJcbiAgICAgKiBpZiB0aGVyZSBhcmUgYW55LlxyXG4gICAgICovXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS50cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyA9IGZ1bmN0aW9uIChiYXRjaElkKSB7XHJcbiAgICAgICAgKHRoaXMucGVuZGluZ1dyaXRlc0NhbGxiYWNrcy5nZXQoYmF0Y2hJZCkgfHwgW10pLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLnJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXNDYWxsYmFja3MuZGVsZXRlKGJhdGNoSWQpO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZWplY3QgYWxsIG91dHN0YW5kaW5nIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyB0byBjb21wbGV0ZS4gKi9cclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnJlamVjdE91dHN0YW5kaW5nUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyA9IGZ1bmN0aW9uIChlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXNDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkNBTkNFTExFRCwgZXJyb3JNZXNzYWdlKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlc0NhbGxiYWNrcy5jbGVhcigpO1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFkZE11dGF0aW9uQ2FsbGJhY2sgPSBmdW5jdGlvbiAoYmF0Y2hJZCwgY2FsbGJhY2spIHtcclxuICAgICAgICB2YXIgbmV3Q2FsbGJhY2tzID0gdGhpcy5tdXRhdGlvblVzZXJDYWxsYmFja3NbdGhpcy5jdXJyZW50VXNlci50b0tleSgpXTtcclxuICAgICAgICBpZiAoIW5ld0NhbGxiYWNrcykge1xyXG4gICAgICAgICAgICBuZXdDYWxsYmFja3MgPSBuZXcgU29ydGVkTWFwKHByaW1pdGl2ZUNvbXBhcmF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuZXdDYWxsYmFja3MgPSBuZXdDYWxsYmFja3MuaW5zZXJ0KGJhdGNoSWQsIGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uVXNlckNhbGxiYWNrc1t0aGlzLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gbmV3Q2FsbGJhY2tzO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXHJcbiAgICAgKiBpdC5cclxuICAgICAqL1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucHJvY2Vzc1VzZXJDYWxsYmFjayA9IGZ1bmN0aW9uIChiYXRjaElkLCBlcnJvcikge1xyXG4gICAgICAgIHZhciBuZXdDYWxsYmFja3MgPSB0aGlzLm11dGF0aW9uVXNlckNhbGxiYWNrc1t0aGlzLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xyXG4gICAgICAgIC8vIE5PVEU6IE11dGF0aW9ucyByZXN0b3JlZCBmcm9tIHBlcnNpc3RlbmNlIHdvbid0IGhhdmUgY2FsbGJhY2tzLCBzbyBpdCdzXHJcbiAgICAgICAgLy8gb2theSBmb3IgdGhlcmUgdG8gYmUgbm8gY2FsbGJhY2sgZm9yIHRoaXMgSUQuXHJcbiAgICAgICAgaWYgKG5ld0NhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBuZXdDYWxsYmFja3MuZ2V0KGJhdGNoSWQpO1xyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGFzc2VydChiYXRjaElkID09PSBuZXdDYWxsYmFja3MubWluS2V5KCksICdNdXRhdGlvbiBjYWxsYmFja3MgcHJvY2Vzc2VkIG91dC1vZi1vcmRlcj8nKTtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBuZXdDYWxsYmFja3MgPSBuZXdDYWxsYmFja3MucmVtb3ZlKGJhdGNoSWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25Vc2VyQ2FsbGJhY2tzW3RoaXMuY3VycmVudFVzZXIudG9LZXkoKV0gPSBuZXdDYWxsYmFja3M7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLnJlbW92ZUFuZENsZWFudXBUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIGVycm9yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoZXJyb3IgPT09IHZvaWQgMCkgeyBlcnJvciA9IG51bGw7IH1cclxuICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF0gJiZcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdLmxlbmd0aCAhPT0gMCwgXCJUaGVyZSBhcmUgbm8gcXVlcmllcyBtYXBwZWQgdG8gdGFyZ2V0IGlkIFwiICsgdGFyZ2V0SWQpO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF07IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5kZWxldGUocXVlcnkpO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyLm9uV2F0Y2hFcnJvcihxdWVyeSwgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF07XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgIHZhciBsaW1ib0tleXMgPSB0aGlzLmxpbWJvRG9jdW1lbnRSZWZzLnJlZmVyZW5jZXNGb3JJZCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgIHRoaXMubGltYm9Eb2N1bWVudFJlZnMucmVtb3ZlUmVmZXJlbmNlc0ZvcklkKHRhcmdldElkKTtcclxuICAgICAgICAgICAgbGltYm9LZXlzLmZvckVhY2goZnVuY3Rpb24gKGxpbWJvS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNSZWZlcmVuY2VkID0gX3RoaXMubGltYm9Eb2N1bWVudFJlZnMuY29udGFpbnNLZXkobGltYm9LZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1JlZmVyZW5jZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdmVMaW1ib1RhcmdldChsaW1ib0tleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5yZW1vdmVMaW1ib1RhcmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC4gSW4gdGhhdCBjYXNlLFxyXG4gICAgICAgIC8vIHRoZSBrZXkgd29uJ3QgZXhpc3QgaW4gYGxpbWJvVGFyZ2V0c0J5S2V5YC4gT25seSBkbyB0aGUgY2xlYW51cCBpZiB3ZSBzdGlsbCBoYXZlIHRoZSB0YXJnZXQuXHJcbiAgICAgICAgdmFyIGxpbWJvVGFyZ2V0SWQgPSB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5LmdldChrZXkpO1xyXG4gICAgICAgIGlmIChsaW1ib1RhcmdldElkID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgdGFyZ2V0IGFscmVhZHkgZ290IHJlbW92ZWQsIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLnVubGlzdGVuKGxpbWJvVGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMubGltYm9UYXJnZXRzQnlLZXkgPSB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5LnJlbW92ZShrZXkpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldFtsaW1ib1RhcmdldElkXTtcclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS51cGRhdGVUcmFja2VkTGltYm9zID0gZnVuY3Rpb24gKHRhcmdldElkLCBsaW1ib0NoYW5nZXMpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGxpbWJvQ2hhbmdlc18xID0gbGltYm9DaGFuZ2VzOyBfaSA8IGxpbWJvQ2hhbmdlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgbGltYm9DaGFuZ2UgPSBsaW1ib0NoYW5nZXNfMVtfaV07XHJcbiAgICAgICAgICAgIGlmIChsaW1ib0NoYW5nZSBpbnN0YW5jZW9mIEFkZGVkTGltYm9Eb2N1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50UmVmcy5hZGRSZWZlcmVuY2UobGltYm9DaGFuZ2Uua2V5LCB0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrTGltYm9DaGFuZ2UobGltYm9DaGFuZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGxpbWJvQ2hhbmdlIGluc3RhbmNlb2YgUmVtb3ZlZExpbWJvRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckOSwgJ0RvY3VtZW50IG5vIGxvbmdlciBpbiBsaW1ibzogJyArIGxpbWJvQ2hhbmdlLmtleSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbWJvRG9jdW1lbnRSZWZzLnJlbW92ZVJlZmVyZW5jZShsaW1ib0NoYW5nZS5rZXksIHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgIHZhciBpc1JlZmVyZW5jZWQgPSB0aGlzLmxpbWJvRG9jdW1lbnRSZWZzLmNvbnRhaW5zS2V5KGxpbWJvQ2hhbmdlLmtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUmVmZXJlbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTGltYm9UYXJnZXQobGltYm9DaGFuZ2Uua2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZhaWwoJ1Vua25vd24gbGltYm8gY2hhbmdlOiAnICsgSlNPTi5zdHJpbmdpZnkobGltYm9DaGFuZ2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS50cmFja0xpbWJvQ2hhbmdlID0gZnVuY3Rpb24gKGxpbWJvQ2hhbmdlKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGxpbWJvQ2hhbmdlLmtleTtcclxuICAgICAgICBpZiAoIXRoaXMubGltYm9UYXJnZXRzQnlLZXkuZ2V0KGtleSkpIHtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRyQ5LCAnTmV3IGRvY3VtZW50IGluIGxpbWJvOiAnICsga2V5KTtcclxuICAgICAgICAgICAgdmFyIGxpbWJvVGFyZ2V0SWQgPSB0aGlzLmxpbWJvVGFyZ2V0SWRHZW5lcmF0b3IubmV4dCgpO1xyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBRdWVyeS5hdFBhdGgoa2V5LnBhdGgpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbWJvUmVzb2x1dGlvbnNCeVRhcmdldFtsaW1ib1RhcmdldElkXSA9IG5ldyBMaW1ib1Jlc29sdXRpb24oa2V5KTtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5saXN0ZW4obmV3IFRhcmdldERhdGEocXVlcnkudG9UYXJnZXQoKSwgbGltYm9UYXJnZXRJZCwgVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24sIExpc3RlblNlcXVlbmNlLklOVkFMSUQpKTtcclxuICAgICAgICAgICAgdGhpcy5saW1ib1RhcmdldHNCeUtleSA9IHRoaXMubGltYm9UYXJnZXRzQnlLZXkuaW5zZXJ0KGtleSwgbGltYm9UYXJnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmN1cnJlbnRMaW1ib0RvY3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGltYm9UYXJnZXRzQnlLZXk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZSA9IGZ1bmN0aW9uIChjaGFuZ2VzLCByZW1vdGVFdmVudCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld1NuYXBzLCBkb2NDaGFuZ2VzSW5BbGxWaWV3cywgcXVlcmllc1Byb2Nlc3NlZDtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U25hcHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jQ2hhbmdlc0luQWxsVmlld3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcmllc1Byb2Nlc3NlZCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5Vmlld3NCeVF1ZXJ5LmZvckVhY2goZnVuY3Rpb24gKF8sIHF1ZXJ5Vmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcmllc1Byb2Nlc3NlZC5wdXNoKFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWV3RG9jQ2hhbmdlcyA9IHF1ZXJ5Vmlldy52aWV3LmNvbXB1dGVEb2NDaGFuZ2VzKGNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmlld0RvY0NoYW5nZXMubmVlZHNSZWZpbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZXdEb2NDaGFuZ2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcXVlcnkgaGFzIGEgbGltaXQgYW5kIHNvbWUgZG9jcyB3ZXJlIHJlbW92ZWQsIHNvIHdlIG5lZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byByZS1ydW4gdGhlIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIHRvIG1ha2Ugc3VyZSB3ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZG4ndCBsb3NlIGFueSBnb29kIGRvY3MgdGhhdCBoYWQgYmVlbiBwYXN0IHRoZSBsaW1pdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubG9jYWxTdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5Vmlldy5xdWVyeSwgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb2N1bWVudHMgPSBfYS5kb2N1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxdWVyeVZpZXcudmlldy5jb21wdXRlRG9jQ2hhbmdlcyhkb2N1bWVudHMsIHZpZXdEb2NDaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZpZXdEb2NDaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldENoYW5nZSA9IHJlbW90ZUV2ZW50ICYmIHJlbW90ZUV2ZW50LnRhcmdldENoYW5nZXNbcXVlcnlWaWV3LnRhcmdldElkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlld0NoYW5nZSA9IHF1ZXJ5Vmlldy52aWV3LmFwcGx5Q2hhbmdlcyh2aWV3RG9jQ2hhbmdlcywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIF90aGlzLmlzUHJpbWFyeSA9PT0gdHJ1ZSwgdGFyZ2V0Q2hhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVUcmFja2VkTGltYm9zKHF1ZXJ5Vmlldy50YXJnZXRJZCwgdmlld0NoYW5nZS5saW1ib0NoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWV3Q2hhbmdlLnNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUocXVlcnlWaWV3LnRhcmdldElkLCB2aWV3Q2hhbmdlLnNuYXBzaG90LmZyb21DYWNoZSA/ICdub3QtY3VycmVudCcgOiAnY3VycmVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NuYXBzLnB1c2godmlld0NoYW5nZS5zbmFwc2hvdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb2NDaGFuZ2VzID0gTG9jYWxWaWV3Q2hhbmdlcy5mcm9tU25hcHNob3QocXVlcnlWaWV3LnRhcmdldElkLCB2aWV3Q2hhbmdlLnNuYXBzaG90KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jQ2hhbmdlc0luQWxsVmlld3MucHVzaChkb2NDaGFuZ2VzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChxdWVyaWVzUHJvY2Vzc2VkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyLm9uV2F0Y2hDaGFuZ2UobmV3U25hcHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUubm90aWZ5TG9jYWxWaWV3Q2hhbmdlcyhkb2NDaGFuZ2VzSW5BbGxWaWV3cyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFzc2VydFN1YnNjcmliZWQgPSBmdW5jdGlvbiAoZm5OYW1lKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMuc3luY0VuZ2luZUxpc3RlbmVyICE9PSBudWxsLCAnVHJ5aW5nIHRvIGNhbGwgJyArIGZuTmFtZSArICcgYmVmb3JlIGNhbGxpbmcgc3Vic2NyaWJlKCkuJyk7XHJcbiAgICB9O1xyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdXNlckNoYW5nZWQsIHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckNoYW5nZWQgPSAhdGhpcy5jdXJyZW50VXNlci5pc0VxdWFsKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2VyQ2hhbmdlZCkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhaWxzIHRhc2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHJlcXVlc3RlZCBieSBwcmV2aW91cyB1c2VyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdE91dHN0YW5kaW5nUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhcIid3YWl0Rm9yUGVuZGluZ1dyaXRlcycgcHJvbWlzZSBpcyByZWplY3RlZCBkdWUgdG8gYSB1c2VyIGNoYW5nZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5oYW5kbGVVc2VyQ2hhbmdlKHVzZXIpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjQxNyk6IENvbnNpZGVyIGNhbGxpbmcgdGhpcyBvbmx5IGluIHRoZSBwcmltYXJ5IHRhYi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5oYW5kbGVVc2VyQ2hhbmdlKHVzZXIsIHJlc3VsdC5yZW1vdmVkQmF0Y2hJZHMsIHJlc3VsdC5hZGRlZEJhdGNoSWRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5lbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKHJlc3VsdC5hZmZlY3RlZERvY3VtZW50cyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbW90ZVN0b3JlLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuYXBwbHlQcmltYXJ5U3RhdGUgPSBmdW5jdGlvbiAoaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlVGFyZ2V0cywgYWN0aXZlUXVlcmllcywgX2ksIGFjdGl2ZVF1ZXJpZXNfMSwgdGFyZ2V0RGF0YSwgYWN0aXZlVGFyZ2V0c18xLCBwXzE7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGlzUHJpbWFyeSA9PT0gdHJ1ZSAmJiB0aGlzLmlzUHJpbWFyeSAhPT0gdHJ1ZSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuYXBwbHlQcmltYXJ5U3RhdGUodHJ1ZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVUYXJnZXRzID0gdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyhhY3RpdmVUYXJnZXRzLnRvQXJyYXkoKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUXVlcmllcyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChfaSA9IDAsIGFjdGl2ZVF1ZXJpZXNfMSA9IGFjdGl2ZVF1ZXJpZXM7IF9pIDwgYWN0aXZlUXVlcmllc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9IGFjdGl2ZVF1ZXJpZXNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLmxpc3Rlbih0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGlzUHJpbWFyeSA9PT0gZmFsc2UgJiYgdGhpcy5pc1ByaW1hcnkgIT09IGZhbHNlKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNQcmltYXJ5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhcmdldHNfMSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwXzEgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaE51bWJlcih0aGlzLnF1ZXJpZXNCeVRhcmdldCwgZnVuY3Rpb24gKHRhcmdldElkLCBfKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KHRhcmdldElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhcmdldHNfMS5wdXNoKHRhcmdldElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBfMSA9IHBfMS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3ZlQW5kQ2xlYW51cFRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2NhbFN0b3JlLnJlbGVhc2VUYXJnZXQodGFyZ2V0SWQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVtb3RlU3RvcmUudW5saXN0ZW4odGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcF8xXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyhhY3RpdmVUYXJnZXRzXzEpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldExpbWJvRG9jdW1lbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVtb3RlU3RvcmUuYXBwbHlQcmltYXJ5U3RhdGUoZmFsc2UpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA3O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUucmVzZXRMaW1ib0RvY3VtZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGZvckVhY2hOdW1iZXIodGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXQsIGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZW1vdGVTdG9yZS51bmxpc3Rlbih0YXJnZXRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5saW1ib0RvY3VtZW50UmVmcy5yZW1vdmVBbGxSZWZlcmVuY2VzKCk7XHJcbiAgICAgICAgdGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXQgPSBbXTtcclxuICAgICAgICB0aGlzLmxpbWJvVGFyZ2V0c0J5S2V5ID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxyXG4gICAgICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxyXG4gICAgICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuc3luY2hyb25pemVRdWVyeVZpZXdzQW5kUmFpc2VTbmFwc2hvdHMgPSBmdW5jdGlvbiAodGFyZ2V0cykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFjdGl2ZVF1ZXJpZXMsIG5ld1ZpZXdTbmFwc2hvdHMsIF9pLCB0YXJnZXRzXzEsIHRhcmdldElkLCB0YXJnZXREYXRhLCBxdWVyaWVzLCBfYSwgcXVlcmllc18xLCBxdWVyeSwgcXVlcnlWaWV3LCB2aWV3Q2hhbmdlLCB0YXJnZXQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVF1ZXJpZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Vmlld1NuYXBzaG90cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaSA9IDAsIHRhcmdldHNfMSA9IHRhcmdldHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9pIDwgdGFyZ2V0c18xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDE0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQgPSB0YXJnZXRzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyaWVzID0gdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShxdWVyaWVzICYmIHF1ZXJpZXMubGVuZ3RoICE9PSAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgaGF2ZSBhIGxvY2FsIFZpZXcsIHdlIG5lZWQgdG8gdXBkYXRlIHRoZWlyIHN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIExvY2FsU3RvcmUgKGFzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHRoZSBzbmFwc2hvdCB2ZXJzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCkgYW5kIHJlY29uY2lsZSB0aGVpciB2aWV3cyB3aXRoIHRoZSBwZXJzaXN0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhdGUgKHRoZSBsaXN0IG9mIHN5bmNlZERvY3VtZW50cyBtYXkgaGF2ZSBnb3R0ZW4gb3V0IG9mIHN5bmMpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUucmVsZWFzZVRhcmdldCh0YXJnZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovIHRydWUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgaGF2ZSBhIGxvY2FsIFZpZXcsIHdlIG5lZWQgdG8gdXBkYXRlIHRoZWlyIHN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIExvY2FsU3RvcmUgKGFzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHRoZSBzbmFwc2hvdCB2ZXJzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCkgYW5kIHJlY29uY2lsZSB0aGVpciB2aWV3cyB3aXRoIHRoZSBwZXJzaXN0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhdGUgKHRoZSBsaXN0IG9mIHN5bmNlZERvY3VtZW50cyBtYXkgaGF2ZSBnb3R0ZW4gb3V0IG9mIHN5bmMpLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5hbGxvY2F0ZVRhcmdldChxdWVyaWVzWzBdLnRvVGFyZ2V0KCkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gMCwgcXVlcmllc18xID0gcXVlcmllcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2EgPCBxdWVyaWVzXzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcmllc18xW19hXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlWaWV3ID0gdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5nZXQocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoISFxdWVyeVZpZXcsIFwiTm8gcXVlcnkgdmlldyBmb3VuZCBmb3IgXCIgKyBxdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3luY2hyb25pemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHF1ZXJ5VmlldyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld0NoYW5nZSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdDaGFuZ2Uuc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZpZXdTbmFwc2hvdHMucHVzaCh2aWV3Q2hhbmdlLnNuYXBzaG90KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IHJldHVybiBbMyAvKmJyZWFrKi8sIDEyXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLmlzUHJpbWFyeSA9PT0gdHJ1ZSwgJ0Egc2Vjb25kYXJ5IHRhYiBzaG91bGQgbmV2ZXIgaGF2ZSBhbiBhY3RpdmUgdGFyZ2V0IHdpdGhvdXQgYW4gYWN0aXZlIHF1ZXJ5LicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZ2V0VGFyZ2V0KHRhcmdldElkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghIXRhcmdldCwgXCJUYXJnZXQgZm9yIGlkIFwiICsgdGFyZ2V0SWQgKyBcIiBub3QgZm91bmRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5hbGxvY2F0ZVRhcmdldCh0YXJnZXQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmluaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHRoaXMuc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkodGFyZ2V0KSwgdGFyZ2V0SWQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypjdXJyZW50PSovIGZhbHNlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDEyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVF1ZXJpZXMucHVzaCh0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAxMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNFbmdpbmVMaXN0ZW5lci5vbldhdGNoQ2hhbmdlKG5ld1ZpZXdTbmFwc2hvdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYWN0aXZlUXVlcmllc107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGBRdWVyeWAgb2JqZWN0IGZyb20gdGhlIHNwZWNpZmllZCBgVGFyZ2V0YC4gVGhlcmUgaXMgbm8gd2F5IHRvXHJcbiAgICAgKiBvYnRhaW4gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIHNvIHdlIHN5bnRoZXNpemUgYSBgUXVlcnlgIGZyb20gdGhlIGBUYXJnZXRgXHJcbiAgICAgKiBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHN5bnRoZXNpemVkIHJlc3VsdCBtaWdodCBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgYnV0XHJcbiAgICAgKiBzaW5jZSB0aGUgc3ludGhlc2l6ZWQgYFF1ZXJ5YCBzaG91bGQgcmV0dXJuIHRoZSBzYW1lIHJlc3VsdHMgYXMgdGhlXHJcbiAgICAgKiBvcmlnaW5hbCBvbmUgKG9ubHkgdGhlIHByZXNlbnRhdGlvbiBvZiByZXN1bHRzIG1pZ2h0IGRpZmZlciksIHRoZSBwb3RlbnRpYWxcclxuICAgICAqIGRpZmZlcmVuY2Ugd2lsbCBub3QgY2F1c2UgaXNzdWVzLlxyXG4gICAgICovXHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5zeW50aGVzaXplVGFyZ2V0VG9RdWVyeSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRhcmdldC5wYXRoLCB0YXJnZXQuY29sbGVjdGlvbkdyb3VwLCB0YXJnZXQub3JkZXJCeSwgdGFyZ2V0LmZpbHRlcnMsIHRhcmdldC5saW1pdCwgTGltaXRUeXBlLkZpcnN0LCB0YXJnZXQuc3RhcnRBdCwgdGFyZ2V0LmVuZEF0KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5nZXRBY3RpdmVDbGllbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmUuZ2V0QWN0aXZlQ2xpZW50cygpO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFwcGx5VGFyZ2V0U3RhdGUgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9hLCBjaGFuZ2VzLCBzeW50aGVzaXplZFJlbW90ZUV2ZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmUgYSB0YXJnZXQgc3RhdGUgbm90aWZpY2F0aW9uIHZpYSBXZWJTdG9yYWdlLCB3ZSBhcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVpdGhlciBhbHJlYWR5IHNlY29uZGFyeSBvciBhbm90aGVyIHRhYiBoYXMgdGFrZW4gdGhlIHByaW1hcnkgbGVhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJDksICdJZ25vcmluZyB1bmV4cGVjdGVkIHF1ZXJ5IHN0YXRlIG5vdGlmaWNhdGlvbi4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXSkgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gc3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2N1cnJlbnQnOiByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vdC1jdXJyZW50JzogcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZWplY3RlZCc6IHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLmdldE5ld0RvY3VtZW50Q2hhbmdlcygpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5bnRoZXNpemVkUmVtb3RlRXZlbnQgPSBSZW1vdGVFdmVudC5jcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSh0YXJnZXRJZCwgc3RhdGUgPT09ICdjdXJyZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShjaGFuZ2VzLCBzeW50aGVzaXplZFJlbW90ZUV2ZW50KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2NhbFN0b3JlLnJlbGVhc2VUYXJnZXQodGFyZ2V0SWQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyB0cnVlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQW5kQ2xlYW51cFRhcmdldCh0YXJnZXRJZCwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWwoJ1VuZXhwZWN0ZWQgdGFyZ2V0IHN0YXRlOiAnICsgc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDc7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmFwcGx5QWN0aXZlVGFyZ2V0c0NoYW5nZSA9IGZ1bmN0aW9uIChhZGRlZCwgcmVtb3ZlZCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9pLCBhZGRlZF8xLCB0YXJnZXRJZCwgdGFyZ2V0LCB0YXJnZXREYXRhLCBfbG9vcF8xLCB0aGlzXzEsIF9hLCByZW1vdmVkXzEsIHRhcmdldElkO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCBhZGRlZF8xID0gYWRkZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9pIDwgYWRkZWRfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQgPSBhZGRlZF8xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KCF0aGlzLnF1ZXJpZXNCeVRhcmdldFt0YXJnZXRJZF0sICdUcnlpbmcgdG8gYWRkIGFuIGFscmVhZHkgYWN0aXZlIHRhcmdldCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZ2V0VGFyZ2V0KHRhcmdldElkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghIXRhcmdldCwgXCJRdWVyeSBkYXRhIGZvciBhY3RpdmUgdGFyZ2V0IFwiICsgdGFyZ2V0SWQgKyBcIiBub3QgZm91bmRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9jYWxTdG9yZS5hbGxvY2F0ZVRhcmdldCh0YXJnZXQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGEgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QodGhpcy5zeW50aGVzaXplVGFyZ2V0VG9RdWVyeSh0YXJnZXQpLCB0YXJnZXREYXRhLnRhcmdldElkLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qY3VycmVudD0qLyBmYWxzZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLmxpc3Rlbih0YXJnZXREYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA1O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2krKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9vcF8xID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlIHNpbmNlIHRoZSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmVkIGlmIGl0IGhhcyBiZWVuIHJlamVjdGVkIGJ5IHRoZSBiYWNrZW5kLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzXzEucXVlcmllc0J5VGFyZ2V0W3RhcmdldElkXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBcImNvbnRpbnVlXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVsZWFzZSBxdWVyaWVzIHRoYXQgYXJlIHN0aWxsIGFjdGl2ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXNfMS5sb2NhbFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWxlYXNlVGFyZ2V0KHRhcmdldElkLCAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZW1vdGVTdG9yZS51bmxpc3Rlbih0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbW92ZUFuZENsZWFudXBUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChpZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVsZWFzZSBxdWVyaWVzIHRoYXQgYXJlIHN0aWxsIGFjdGl2ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSAwLCByZW1vdmVkXzEgPSByZW1vdmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDc7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfYSA8IHJlbW92ZWRfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCAxMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkID0gcmVtb3ZlZF8xW19hXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs1IC8qeWllbGQqKi8sIF9sb29wXzEodGFyZ2V0SWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA5O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2ErKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LiBJbiBvdGhlciBjbGllbnRzLCBMb2NhbFN0b3JlIGlzIHVuYXdhcmUgb2ZcclxuICAgIC8vIHRoZSBvbmxpbmUgc3RhdGUuXHJcbiAgICBTeW5jRW5naW5lLnByb3RvdHlwZS5lbmFibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxTdG9yZS5zZXROZXR3b3JrRW5hYmxlZCh0cnVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVTdG9yZS5lbmFibGVOZXR3b3JrKCk7XHJcbiAgICB9O1xyXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS4gSW4gb3RoZXIgY2xpZW50cywgTG9jYWxTdG9yZSBpcyB1bmF3YXJlIG9mXHJcbiAgICAvLyB0aGUgb25saW5lIHN0YXRlLlxyXG4gICAgU3luY0VuZ2luZS5wcm90b3R5cGUuZGlzYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlLnNldE5ldHdvcmtFbmFibGVkKGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVTdG9yZS5kaXNhYmxlTmV0d29yaygpO1xyXG4gICAgfTtcclxuICAgIFN5bmNFbmdpbmUucHJvdG90eXBlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB2YXIgbGltYm9SZXNvbHV0aW9uID0gdGhpcy5saW1ib1Jlc29sdXRpb25zQnlUYXJnZXRbdGFyZ2V0SWRdO1xyXG4gICAgICAgIGlmIChsaW1ib1Jlc29sdXRpb24gJiYgbGltYm9SZXNvbHV0aW9uLnJlY2VpdmVkRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50S2V5U2V0KCkuYWRkKGxpbWJvUmVzb2x1dGlvbi5rZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGtleVNldCA9IGRvY3VtZW50S2V5U2V0KCk7XHJcbiAgICAgICAgICAgIHZhciBxdWVyaWVzID0gdGhpcy5xdWVyaWVzQnlUYXJnZXRbdGFyZ2V0SWRdO1xyXG4gICAgICAgICAgICBpZiAoIXF1ZXJpZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBrZXlTZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBxdWVyaWVzXzIgPSBxdWVyaWVzOyBfaSA8IHF1ZXJpZXNfMi5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IHF1ZXJpZXNfMltfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlWaWV3ID0gdGhpcy5xdWVyeVZpZXdzQnlRdWVyeS5nZXQocXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KCEhcXVlcnlWaWV3LCBcIk5vIHF1ZXJ5IHZpZXcgZm91bmQgZm9yIFwiICsgcXVlcnkpO1xyXG4gICAgICAgICAgICAgICAga2V5U2V0ID0ga2V5U2V0LnVuaW9uV2l0aChxdWVyeVZpZXcudmlldy5zeW5jZWREb2N1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBrZXlTZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTeW5jRW5naW5lO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxyXG4gKiByZWFkYWJsZS5cclxuICovXHJcbnZhciBVc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVXNlcih1aWQpIHtcclxuICAgICAgICB0aGlzLnVpZCA9IHVpZDtcclxuICAgIH1cclxuICAgIFVzZXIucHJvdG90eXBlLmlzQXV0aGVudGljYXRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51aWQgIT0gbnVsbDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBrZXkgcmVwcmVzZW50aW5nIHRoaXMgdXNlciwgc3VpdGFibGUgZm9yIGluY2x1c2lvbiBpbiBhXHJcbiAgICAgKiBkaWN0aW9uYXJ5LlxyXG4gICAgICovXHJcbiAgICBVc2VyLnByb3RvdHlwZS50b0tleSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ3VpZDonICsgdGhpcy51aWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2Fub255bW91cy11c2VyJztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVXNlci5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlclVzZXIpIHtcclxuICAgICAgICByZXR1cm4gb3RoZXJVc2VyLnVpZCA9PT0gdGhpcy51aWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovXHJcbiAgICBVc2VyLlVOQVVUSEVOVElDQVRFRCA9IG5ldyBVc2VyKG51bGwpO1xyXG4gICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3JcclxuICAgIC8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxyXG4gICAgVXNlci5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgVXNlcignZ29vZ2xlLWNyZWRlbnRpYWxzLXVpZCcpO1xyXG4gICAgVXNlci5GSVJTVF9QQVJUWSA9IG5ldyBVc2VyKCdmaXJzdC1wYXJ0eS11aWQnKTtcclxuICAgIHJldHVybiBVc2VyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgY2xpZW50IHN0YXRlIGlzOlxyXG4vLyAgICAgZmlyZXN0b3JlX2NsaWVudHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGluc3RhbmNlX2tleT5cclxudmFyIENMSUVOVF9TVEFURV9LRVlfUFJFRklYID0gJ2ZpcmVzdG9yZV9jbGllbnRzJztcclxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleShwZXJzaXN0ZW5jZUtleSwgY2xpZW50SWQpIHtcclxuICAgIGFzc2VydChjbGllbnRJZC5pbmRleE9mKCdfJykgPT09IC0xLCBcIkNsaWVudCBrZXkgY2Fubm90IGNvbnRhaW4gJ18nLCBidXQgd2FzICdcIiArIGNsaWVudElkICsgXCInXCIpO1xyXG4gICAgcmV0dXJuIENMSUVOVF9TVEFURV9LRVlfUFJFRklYICsgXCJfXCIgKyBwZXJzaXN0ZW5jZUtleSArIFwiX1wiICsgY2xpZW50SWQ7XHJcbn1cclxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIG11dGF0aW9uIHN0YXRlIGlzOlxyXG4vLyAgICAgZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+XHJcbi8vICAgICAoZm9yIHVuYXV0aGVudGljYXRlZCB1c2VycylcclxuLy8gb3I6IGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPl88dXNlcl91aWQ+XHJcbi8vXHJcbi8vICd1c2VyX3VpZCcgaXMgbGFzdCB0byBhdm9pZCBuZWVkaW5nIHRvIGVzY2FwZSAnXycgY2hhcmFjdGVycyB0aGF0IGl0IG1pZ2h0XHJcbi8vIGNvbnRhaW4uXHJcbnZhciBNVVRBVElPTl9CQVRDSF9LRVlfUFJFRklYID0gJ2ZpcmVzdG9yZV9tdXRhdGlvbnMnO1xyXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgbXV0YXRpb24gYmF0Y2ggaW4gV2ViU3RvcmFnZSAqL1xyXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleShwZXJzaXN0ZW5jZUtleSwgdXNlciwgYmF0Y2hJZCkge1xyXG4gICAgdmFyIG11dGF0aW9uS2V5ID0gTVVUQVRJT05fQkFUQ0hfS0VZX1BSRUZJWCArIFwiX1wiICsgcGVyc2lzdGVuY2VLZXkgKyBcIl9cIiArIGJhdGNoSWQ7XHJcbiAgICBpZiAodXNlci5pc0F1dGhlbnRpY2F0ZWQoKSkge1xyXG4gICAgICAgIG11dGF0aW9uS2V5ICs9IFwiX1wiICsgdXNlci51aWQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbXV0YXRpb25LZXk7XHJcbn1cclxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgYSBxdWVyeSB0YXJnZXQncyBtZXRhZGF0YSBpczpcclxuLy8gICAgIGZpcmVzdG9yZV90YXJnZXRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Xzx0YXJnZXRfaWQ+XHJcbnZhciBRVUVSWV9UQVJHRVRfS0VZX1BSRUZJWCA9ICdmaXJlc3RvcmVfdGFyZ2V0cyc7XHJcbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBxdWVyeSBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5KHBlcnNpc3RlbmNlS2V5LCB0YXJnZXRJZCkge1xyXG4gICAgcmV0dXJuIFFVRVJZX1RBUkdFVF9LRVlfUFJFRklYICsgXCJfXCIgKyBwZXJzaXN0ZW5jZUtleSArIFwiX1wiICsgdGFyZ2V0SWQ7XHJcbn1cclxuLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgc3RvcmVzIHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZS4gVGhlXHJcbi8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxyXG4vLyAgICAgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV88cGVyc2lzdGVuY2VfcHJlZml4PlxyXG52YXIgT05MSU5FX1NUQVRFX0tFWV9QUkVGSVggPSAnZmlyZXN0b3JlX29ubGluZV9zdGF0ZSc7XHJcbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIG9ubGluZSBzdGF0ZSBvZiB0aGUgcHJpbWFyeSB0YWIuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VPbmxpbmVTdGF0ZUtleShwZXJzaXN0ZW5jZUtleSkge1xyXG4gICAgcmV0dXJuIE9OTElORV9TVEFURV9LRVlfUFJFRklYICsgXCJfXCIgKyBwZXJzaXN0ZW5jZUtleTtcclxufVxyXG4vLyBUaGUgV2ViU3RvcmFnZSBrZXkgcHJlZml4IGZvciB0aGUga2V5IHRoYXQgc3RvcmVzIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhbGxvY2F0ZWQuIFRoZSBrZXlcclxuLy8gbG9va3MgbGlrZSAnZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl88cGVyc2lzdGVuY2VfcHJlZml4PicuXHJcbnZhciBTRVFVRU5DRV9OVU1CRVJfS0VZX1BSRUZJWCA9ICdmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyJztcclxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcktleShwZXJzaXN0ZW5jZUtleSkge1xyXG4gICAgcmV0dXJuIFNFUVVFTkNFX05VTUJFUl9LRVlfUFJFRklYICsgXCJfXCIgKyBwZXJzaXN0ZW5jZUtleTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIExPR19UQUckYSA9ICdTaGFyZWRDbGllbnRTdGF0ZSc7XHJcbi8qKlxyXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBtdXRhdGlvbiBiYXRjaCwgaW5jbHVkaW5nIGl0cyB1c2VyIElELCBiYXRjaCBJRCBhbmRcclxuICogd2hldGhlciB0aGUgYmF0Y2ggaXMgJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJyBvciAncmVqZWN0ZWQnLlxyXG4gKi9cclxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG52YXIgTXV0YXRpb25NZXRhZGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE11dGF0aW9uTWV0YWRhdGEodXNlciwgYmF0Y2hJZCwgc3RhdGUsIGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmJhdGNoSWQgPSBiYXRjaElkO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgYXNzZXJ0KChlcnJvciAhPT0gdW5kZWZpbmVkKSA9PT0gKHN0YXRlID09PSAncmVqZWN0ZWQnKSwgXCJNdXRhdGlvbk1ldGFkYXRhIG11c3QgY29udGFpbiBhbiBlcnJvciBpZmYgc3RhdGUgaXMgJ3JlamVjdGVkJ1wiKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgTXV0YXRpb25NZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXHJcbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvbk1ldGFkYXRhLmZyb21XZWJTdG9yYWdlRW50cnkgPSBmdW5jdGlvbiAodXNlciwgYmF0Y2hJZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgbXV0YXRpb25CYXRjaCA9IEpTT04ucGFyc2UodmFsdWUpO1xyXG4gICAgICAgIHZhciB2YWxpZERhdGEgPSB0eXBlb2YgbXV0YXRpb25CYXRjaCA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgWydwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcsICdyZWplY3RlZCddLmluZGV4T2YobXV0YXRpb25CYXRjaC5zdGF0ZSkgIT09XHJcbiAgICAgICAgICAgICAgICAtMSAmJlxyXG4gICAgICAgICAgICAobXV0YXRpb25CYXRjaC5lcnJvciA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgbXV0YXRpb25CYXRjaC5lcnJvciA9PT0gJ29iamVjdCcpO1xyXG4gICAgICAgIHZhciBmaXJlc3RvcmVFcnJvciA9IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAodmFsaWREYXRhICYmIG11dGF0aW9uQmF0Y2guZXJyb3IpIHtcclxuICAgICAgICAgICAgdmFsaWREYXRhID1cclxuICAgICAgICAgICAgICAgIHR5cGVvZiBtdXRhdGlvbkJhdGNoLmVycm9yLm1lc3NhZ2UgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIG11dGF0aW9uQmF0Y2guZXJyb3IuY29kZSA9PT0gJ3N0cmluZyc7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZERhdGEpIHtcclxuICAgICAgICAgICAgICAgIGZpcmVzdG9yZUVycm9yID0gbmV3IEZpcmVzdG9yZUVycm9yKG11dGF0aW9uQmF0Y2guZXJyb3IuY29kZSwgbXV0YXRpb25CYXRjaC5lcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsaWREYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25NZXRhZGF0YSh1c2VyLCBiYXRjaElkLCBtdXRhdGlvbkJhdGNoLnN0YXRlLCBmaXJlc3RvcmVFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlcnJvcihMT0dfVEFHJGEsIFwiRmFpbGVkIHRvIHBhcnNlIG11dGF0aW9uIHN0YXRlIGZvciBJRCAnXCIgKyBiYXRjaElkICsgXCInOiBcIiArIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE11dGF0aW9uTWV0YWRhdGEucHJvdG90eXBlLnRvV2ViU3RvcmFnZUpTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhdGNoTWV0YWRhdGEgPSB7XHJcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxyXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KCkgLy8gTW9kaWZ5IHRoZSBleGlzdGluZyB2YWx1ZSB0byB0cmlnZ2VyIHVwZGF0ZS5cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLmVycm9yKSB7XHJcbiAgICAgICAgICAgIGJhdGNoTWV0YWRhdGEuZXJyb3IgPSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGJhdGNoTWV0YWRhdGEpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNdXRhdGlvbk1ldGFkYXRhO1xyXG59KCkpO1xyXG4vKipcclxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgcXVlcnkgdGFyZ2V0LCBpbmNsdWRpbmcgaXRzIHRhcmdldCBJRCBhbmQgd2hldGhlciB0aGVcclxuICogdGFyZ2V0IGlzICdub3QtY3VycmVudCcsICdjdXJyZW50JyBvciAncmVqZWN0ZWQnLlxyXG4gKi9cclxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG52YXIgUXVlcnlUYXJnZXRNZXRhZGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEodGFyZ2V0SWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0YXJnZXRJZDtcclxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgIGFzc2VydCgoZXJyb3IgIT09IHVuZGVmaW5lZCkgPT09IChzdGF0ZSA9PT0gJ3JlamVjdGVkJyksIFwiUXVlcnlUYXJnZXRNZXRhZGF0YSBtdXN0IGNvbnRhaW4gYW4gZXJyb3IgaWZmIHN0YXRlIGlzICdyZWplY3RlZCdcIik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxyXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgUXVlcnlUYXJnZXRNZXRhZGF0YS5mcm9tV2ViU3RvcmFnZUVudHJ5ID0gZnVuY3Rpb24gKHRhcmdldElkLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciB0YXJnZXRTdGF0ZSA9IEpTT04ucGFyc2UodmFsdWUpO1xyXG4gICAgICAgIHZhciB2YWxpZERhdGEgPSB0eXBlb2YgdGFyZ2V0U3RhdGUgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgIFsnbm90LWN1cnJlbnQnLCAnY3VycmVudCcsICdyZWplY3RlZCddLmluZGV4T2YodGFyZ2V0U3RhdGUuc3RhdGUpICE9PVxyXG4gICAgICAgICAgICAgICAgLTEgJiZcclxuICAgICAgICAgICAgKHRhcmdldFN0YXRlLmVycm9yID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgIHR5cGVvZiB0YXJnZXRTdGF0ZS5lcnJvciA9PT0gJ29iamVjdCcpO1xyXG4gICAgICAgIHZhciBmaXJlc3RvcmVFcnJvciA9IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAodmFsaWREYXRhICYmIHRhcmdldFN0YXRlLmVycm9yKSB7XHJcbiAgICAgICAgICAgIHZhbGlkRGF0YSA9XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgdGFyZ2V0U3RhdGUuZXJyb3IubWVzc2FnZSA9PT0gJ3N0cmluZycgJiZcclxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdGFyZ2V0U3RhdGUuZXJyb3IuY29kZSA9PT0gJ3N0cmluZyc7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZERhdGEpIHtcclxuICAgICAgICAgICAgICAgIGZpcmVzdG9yZUVycm9yID0gbmV3IEZpcmVzdG9yZUVycm9yKHRhcmdldFN0YXRlLmVycm9yLmNvZGUsIHRhcmdldFN0YXRlLmVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWxpZERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeVRhcmdldE1ldGFkYXRhKHRhcmdldElkLCB0YXJnZXRTdGF0ZS5zdGF0ZSwgZmlyZXN0b3JlRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZXJyb3IoTE9HX1RBRyRhLCBcIkZhaWxlZCB0byBwYXJzZSB0YXJnZXQgc3RhdGUgZm9yIElEICdcIiArIHRhcmdldElkICsgXCInOiBcIiArIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEucHJvdG90eXBlLnRvV2ViU3RvcmFnZUpTT04gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhcmdldFN0YXRlID0ge1xyXG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcclxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpIC8vIE1vZGlmeSB0aGUgZXhpc3RpbmcgdmFsdWUgdG8gdHJpZ2dlciB1cGRhdGUuXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5lcnJvcikge1xyXG4gICAgICAgICAgICB0YXJnZXRTdGF0ZS5lcnJvciA9IHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGFyZ2V0U3RhdGUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeVRhcmdldE1ldGFkYXRhO1xyXG59KCkpO1xyXG4vKipcclxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBpbW11dGFibGUgQ2xpZW50U3RhdGUgZm9yIGEgY2xpZW50IHJlYWQgZnJvbVxyXG4gKiBXZWJTdG9yYWdlLCBjb250YWluaW5nIHRoZSBsaXN0IG9mIGFjdGl2ZSBxdWVyeSB0YXJnZXRzLlxyXG4gKi9cclxudmFyIFJlbW90ZUNsaWVudFN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVtb3RlQ2xpZW50U3RhdGUoY2xpZW50SWQsIGFjdGl2ZVRhcmdldElkcykge1xyXG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IGFjdGl2ZVRhcmdldElkcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxyXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cclxuICAgICAqL1xyXG4gICAgUmVtb3RlQ2xpZW50U3RhdGUuZnJvbVdlYlN0b3JhZ2VFbnRyeSA9IGZ1bmN0aW9uIChjbGllbnRJZCwgdmFsdWUpIHtcclxuICAgICAgICB2YXIgY2xpZW50U3RhdGUgPSBKU09OLnBhcnNlKHZhbHVlKTtcclxuICAgICAgICB2YXIgdmFsaWREYXRhID0gdHlwZW9mIGNsaWVudFN0YXRlID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICBjbGllbnRTdGF0ZS5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheTtcclxuICAgICAgICB2YXIgYWN0aXZlVGFyZ2V0SWRzU2V0ID0gdGFyZ2V0SWRTZXQoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgdmFsaWREYXRhICYmIGkgPCBjbGllbnRTdGF0ZS5hY3RpdmVUYXJnZXRJZHMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFsaWREYXRhID0gaXNTYWZlSW50ZWdlcihjbGllbnRTdGF0ZS5hY3RpdmVUYXJnZXRJZHNbaV0pO1xyXG4gICAgICAgICAgICBhY3RpdmVUYXJnZXRJZHNTZXQgPSBhY3RpdmVUYXJnZXRJZHNTZXQuYWRkKGNsaWVudFN0YXRlLmFjdGl2ZVRhcmdldElkc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWxpZERhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZW1vdGVDbGllbnRTdGF0ZShjbGllbnRJZCwgYWN0aXZlVGFyZ2V0SWRzU2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVycm9yKExPR19UQUckYSwgXCJGYWlsZWQgdG8gcGFyc2UgY2xpZW50IGRhdGEgZm9yIGluc3RhbmNlICdcIiArIGNsaWVudElkICsgXCInOiBcIiArIHZhbHVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBSZW1vdGVDbGllbnRTdGF0ZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgb25saW5lIHN0YXRlIGZvciBhbGwgY2xpZW50cyBwYXJ0aWNpcGF0aW5nIGluXHJcbiAqIG11bHRpLXRhYi4gVGhlIG9ubGluZSBzdGF0ZSBpcyBvbmx5IHdyaXR0ZW4gdG8gYnkgdGhlIHByaW1hcnkgY2xpZW50LCBhbmRcclxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXHJcbiAqL1xyXG52YXIgU2hhcmVkT25saW5lU3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaGFyZWRPbmxpbmVTdGF0ZShjbGllbnRJZCwgb25saW5lU3RhdGUpIHtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IG9ubGluZVN0YXRlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBTaGFyZWRPbmxpbmVTdGF0ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXHJcbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxyXG4gICAgICovXHJcbiAgICBTaGFyZWRPbmxpbmVTdGF0ZS5mcm9tV2ViU3RvcmFnZUVudHJ5ID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG9ubGluZVN0YXRlID0gSlNPTi5wYXJzZSh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIHZhbGlkRGF0YSA9IHR5cGVvZiBvbmxpbmVTdGF0ZSA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgb25saW5lU3RhdGUub25saW5lU3RhdGUgaW4gT25saW5lU3RhdGUgJiZcclxuICAgICAgICAgICAgdHlwZW9mIG9ubGluZVN0YXRlLmNsaWVudElkID09PSAnc3RyaW5nJztcclxuICAgICAgICBpZiAodmFsaWREYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2hhcmVkT25saW5lU3RhdGUob25saW5lU3RhdGUuY2xpZW50SWQsIE9ubGluZVN0YXRlW29ubGluZVN0YXRlLm9ubGluZVN0YXRlXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlcnJvcihMT0dfVEFHJGEsIFwiRmFpbGVkIHRvIHBhcnNlIG9ubGluZSBzdGF0ZTogXCIgKyB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gU2hhcmVkT25saW5lU3RhdGU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBNZXRhZGF0YSBzdGF0ZSBvZiB0aGUgbG9jYWwgY2xpZW50LiBVbmxpa2UgYFJlbW90ZUNsaWVudFN0YXRlYCwgdGhpcyBjbGFzcyBpc1xyXG4gKiBtdXRhYmxlIGFuZCBrZWVwcyB0cmFjayBvZiBhbGwgcGVuZGluZyBtdXRhdGlvbnMsIHdoaWNoIGFsbG93cyB1cyB0b1xyXG4gKiB1cGRhdGUgdGhlIHJhbmdlIG9mIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2ggSURzIGFzIG5ldyBtdXRhdGlvbnMgYXJlIGFkZGVkIG9yXHJcbiAqIHJlbW92ZWQuXHJcbiAqXHJcbiAqIFRoZSBkYXRhIGluIGBMb2NhbENsaWVudFN0YXRlYCBpcyBub3QgcmVhZCBmcm9tIFdlYlN0b3JhZ2UgYW5kIGluc3RlYWRcclxuICogdXBkYXRlZCB2aWEgaXRzIGluc3RhbmNlIG1ldGhvZHMuIFRoZSB1cGRhdGVkIHN0YXRlIGNhbiBiZSBzZXJpYWxpemVkIHZpYVxyXG4gKiBgdG9XZWJTdG9yYWdlSlNPTigpYC5cclxuICovXHJcbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXHJcbnZhciBMb2NhbENsaWVudFN0YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTG9jYWxDbGllbnRTdGF0ZSgpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRhcmdldElkU2V0KCk7XHJcbiAgICB9XHJcbiAgICBMb2NhbENsaWVudFN0YXRlLnByb3RvdHlwZS5hZGRRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICBMb2NhbENsaWVudFN0YXRlLnByb3RvdHlwZS5yZW1vdmVRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoaXMgZW50cnkgaW50byBhIEpTT04tZW5jb2RlZCBmb3JtYXQgd2UgY2FuIHVzZSBmb3IgV2ViU3RvcmFnZS5cclxuICAgICAqIERvZXMgbm90IGVuY29kZSBgY2xpZW50SWRgIGFzIGl0IGlzIHBhcnQgb2YgdGhlIGtleSBpbiBXZWJTdG9yYWdlLlxyXG4gICAgICovXHJcbiAgICBMb2NhbENsaWVudFN0YXRlLnByb3RvdHlwZS50b1dlYlN0b3JhZ2VKU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBhY3RpdmVUYXJnZXRJZHM6IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLnRvQXJyYXkoKSxcclxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpIC8vIE1vZGlmeSB0aGUgZXhpc3RpbmcgdmFsdWUgdG8gdHJpZ2dlciB1cGRhdGUuXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvY2FsQ2xpZW50U3RhdGU7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCB1c2VzIFdlYlN0b3JhZ2UgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGFzIHRoZVxyXG4gKiBiYWNraW5nIHN0b3JlIGZvciB0aGUgU2hhcmVkQ2xpZW50U3RhdGUuIEl0IGtlZXBzIHRyYWNrIG9mIGFsbCBhY3RpdmVcclxuICogY2xpZW50cyBhbmQgc3VwcG9ydHMgbW9kaWZpY2F0aW9ucyBvZiB0aGUgbG9jYWwgY2xpZW50J3MgZGF0YS5cclxuICovXHJcbnZhciBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUocXVldWUsIHBsYXRmb3JtLCBwZXJzaXN0ZW5jZUtleSwgbG9jYWxDbGllbnRJZCwgaW5pdGlhbFVzZXIpIHtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XHJcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHBsYXRmb3JtO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBwZXJzaXN0ZW5jZUtleTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2xpZW50SWQgPSBsb2NhbENsaWVudElkO1xyXG4gICAgICAgIHRoaXMuc3luY0VuZ2luZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFjdGl2ZUNsaWVudHMgPSB7fTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2VMaXN0ZW5lciA9IHRoaXMuaGFuZGxlV2ViU3RvcmFnZUV2ZW50LmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FwdHVyZXMgV2ViU3RvcmFnZSBldmVudHMgdGhhdCBvY2N1ciBiZWZvcmUgYHN0YXJ0KClgIGlzIGNhbGxlZC4gVGhlc2VcclxuICAgICAgICAgKiBldmVudHMgYXJlIHJlcGxheWVkIG9uY2UgYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgaXMgc3RhcnRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmVhcmx5RXZlbnRzID0gW107XHJcbiAgICAgICAgaWYgKCFXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUuaXNBdmFpbGFibGUodGhpcy5wbGF0Zm9ybSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuVU5JTVBMRU1FTlRFRCwgJ0xvY2FsU3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlIG9uIHRoaXMgcGxhdGZvcm0uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEVzY2FwZSB0aGUgc3BlY2lhbCBjaGFyYWN0ZXJzIG1lbnRpb25lZCBoZXJlOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9uc1xyXG4gICAgICAgIHZhciBlc2NhcGVkUGVyc2lzdGVuY2VLZXkgPSBwZXJzaXN0ZW5jZUtleS5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHRoaXMucGxhdGZvcm0ud2luZG93LmxvY2FsU3RvcmFnZTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaW5pdGlhbFVzZXI7XHJcbiAgICAgICAgdGhpcy5sb2NhbENsaWVudFN0b3JhZ2VLZXkgPSBjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5sb2NhbENsaWVudElkKTtcclxuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVyS2V5ID0gY3JlYXRlV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyS2V5KHRoaXMucGVyc2lzdGVuY2VLZXkpO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQ2xpZW50c1t0aGlzLmxvY2FsQ2xpZW50SWRdID0gbmV3IExvY2FsQ2xpZW50U3RhdGUoKTtcclxuICAgICAgICB0aGlzLmNsaWVudFN0YXRlS2V5UmUgPSBuZXcgUmVnRXhwKFwiXlwiICsgQ0xJRU5UX1NUQVRFX0tFWV9QUkVGSVggKyBcIl9cIiArIGVzY2FwZWRQZXJzaXN0ZW5jZUtleSArIFwiXyhbXl9dKikkXCIpO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25CYXRjaEtleVJlID0gbmV3IFJlZ0V4cChcIl5cIiArIE1VVEFUSU9OX0JBVENIX0tFWV9QUkVGSVggKyBcIl9cIiArIGVzY2FwZWRQZXJzaXN0ZW5jZUtleSArIFwiXyhcXFxcZCspKD86XyguKikpPyRcIik7XHJcbiAgICAgICAgdGhpcy5xdWVyeVRhcmdldEtleVJlID0gbmV3IFJlZ0V4cChcIl5cIiArIFFVRVJZX1RBUkdFVF9LRVlfUFJFRklYICsgXCJfXCIgKyBlc2NhcGVkUGVyc2lzdGVuY2VLZXkgKyBcIl8oXFxcXGQrKSRcIik7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUtleSA9IGNyZWF0ZVdlYlN0b3JhZ2VPbmxpbmVTdGF0ZUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5KTtcclxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcclxuICAgICAgICAvLyBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBpbml0aWFsaXphdGlvbi4gVGhpcyBlbnN1cmVzIHRoYXQgd2UgY29sbGVjdFxyXG4gICAgICAgIC8vIGV2ZW50cyBiZWZvcmUgb3RoZXIgY29tcG9uZW50cyBwb3B1bGF0ZSB0aGVpciBpbml0aWFsIHN0YXRlIChkdXJpbmcgdGhlaXJcclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxyXG4gICAgICAgIC8vIG11dGF0aW9uIHRoYXQgaXMgYWRkZWQgYWZ0ZXIgTG9jYWxTdG9yZSdzIHN0YXJ0KCkgcHJvY2Vzc2VkIHRoZSBleGlzdGluZ1xyXG4gICAgICAgIC8vIG11dGF0aW9ucyBidXQgYmVmb3JlIHdlIG9ic2VydmUgV2ViU3RvcmFnZSBldmVudHMuXHJcbiAgICAgICAgdGhpcy5wbGF0Zm9ybS53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuc3RvcmFnZUxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi9cclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5pc0F2YWlsYWJsZSA9IGZ1bmN0aW9uIChwbGF0Zm9ybSkge1xyXG4gICAgICAgIHJldHVybiAhIShwbGF0Zm9ybS53aW5kb3cgJiYgcGxhdGZvcm0ud2luZG93LmxvY2FsU3RvcmFnZSAhPSBudWxsKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYi5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGV4aXN0aW5nQ2xpZW50cywgX2ksIGV4aXN0aW5nQ2xpZW50c18xLCBjbGllbnRJZCwgc3RvcmFnZUl0ZW0sIGNsaWVudFN0YXRlLCBvbmxpbmVTdGF0ZUpTT04sIG9ubGluZVN0YXRlLCBfYSwgX2IsIGV2ZW50XzE7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghdGhpcy5zdGFydGVkLCAnV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlIGFscmVhZHkgc3RhcnRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQodGhpcy5zeW5jRW5naW5lICE9PSBudWxsLCAnc3luY0VuZ2luZSBwcm9wZXJ0eSBtdXN0IGJlIHNldCBiZWZvcmUgY2FsbGluZyBzdGFydCgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLm9ubGluZVN0YXRlSGFuZGxlciAhPT0gbnVsbCwgJ29ubGluZVN0YXRlSGFuZGxlciBwcm9wZXJ0eSBtdXN0IGJlIHNldCBiZWZvcmUgY2FsbGluZyBzdGFydCgpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3luY0VuZ2luZS5nZXRBY3RpdmVDbGllbnRzKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdDbGllbnRzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgZXhpc3RpbmdDbGllbnRzXzEgPSBleGlzdGluZ0NsaWVudHM7IF9pIDwgZXhpc3RpbmdDbGllbnRzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRJZCA9IGV4aXN0aW5nQ2xpZW50c18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGllbnRJZCA9PT0gdGhpcy5sb2NhbENsaWVudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlSXRlbSA9IHRoaXMuZ2V0SXRlbShjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgY2xpZW50SWQpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yYWdlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudFN0YXRlID0gUmVtb3RlQ2xpZW50U3RhdGUuZnJvbVdlYlN0b3JhZ2VFbnRyeShjbGllbnRJZCwgc3RvcmFnZUl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGllbnRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUNsaWVudHNbY2xpZW50U3RhdGUuY2xpZW50SWRdID0gY2xpZW50U3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdENsaWVudFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ubGluZVN0YXRlSlNPTiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMub25saW5lU3RhdGVLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25saW5lU3RhdGVKU09OKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxpbmVTdGF0ZSA9IHRoaXMuZnJvbVdlYlN0b3JhZ2VPbmxpbmVTdGF0ZShvbmxpbmVTdGF0ZUpTT04pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVPbmxpbmVTdGF0ZUV2ZW50KG9ubGluZVN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9hID0gMCwgX2IgPSB0aGlzLmVhcmx5RXZlbnRzOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRfMSA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlV2ViU3RvcmFnZUV2ZW50KGV2ZW50XzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWFybHlFdmVudHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVnaXN0ZXIgYSB3aW5kb3cgdW5sb2FkIGhvb2sgdG8gcmVtb3ZlIHRoZSBjbGllbnQgbWV0YWRhdGEgZW50cnkgZnJvbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZWJTdG9yYWdlIGV2ZW4gaWYgYHNodXRkb3duKClgIHdhcyBub3QgY2FsbGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXRmb3JtLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmxvYWQnLCBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zaHV0ZG93bigpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLndyaXRlU2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5zZXF1ZW5jZU51bWJlcktleSwgSlNPTi5zdHJpbmdpZnkoc2VxdWVuY2VOdW1iZXIpKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYWN0aXZlVGFyZ2V0cyA9IHRhcmdldElkU2V0KCk7XHJcbiAgICAgICAgZm9yRWFjaCh0aGlzLmFjdGl2ZUNsaWVudHMsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldHMgPSBhY3RpdmVUYXJnZXRzLnVuaW9uV2l0aCh2YWx1ZS5hY3RpdmVUYXJnZXRJZHMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBhY3RpdmVUYXJnZXRzO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaXNBY3RpdmVRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIC8vIFRoaXMgaXMgbm90IHVzaW5nIGBvYmouZm9yRWFjaGAgc2luY2UgYGZvckVhY2hgIGRvZXNuJ3Qgc3VwcG9ydCBlYXJseVxyXG4gICAgICAgIC8vIHJldHVybi5cclxuICAgICAgICBmb3IgKHZhciBjbGllbnRJZCBpbiB0aGlzLmFjdGl2ZUNsaWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQ2xpZW50cy5oYXNPd25Qcm9wZXJ0eShjbGllbnRJZCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUNsaWVudHNbY2xpZW50SWRdLmFjdGl2ZVRhcmdldElkcy5oYXModGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuYWRkUGVuZGluZ011dGF0aW9uID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RNdXRhdGlvblN0YXRlKGJhdGNoSWQsICdwZW5kaW5nJyk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS51cGRhdGVNdXRhdGlvblN0YXRlID0gZnVuY3Rpb24gKGJhdGNoSWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdE11dGF0aW9uU3RhdGUoYmF0Y2hJZCwgc3RhdGUsIGVycm9yKTtcclxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXHJcbiAgICAgICAgLy8gYWNjZXNzIHRoZSBtdXRhdGlvbidzIG1ldGFkYXRhIGVudHJ5LiBTaW5jZSBXZWJTdG9yYWdlIHJlcGxheXMgZXZlbnRzXHJcbiAgICAgICAgLy8gaW4gb3JkZXIsIGl0IGlzIHNhZmUgdG8gZGVsZXRlIHRoZSBlbnRyeSByaWdodCBhZnRlciB1cGRhdGluZyBpdC5cclxuICAgICAgICB0aGlzLnJlbW92ZU11dGF0aW9uU3RhdGUoYmF0Y2hJZCk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5U3RhdGUgPSAnbm90LWN1cnJlbnQnO1xyXG4gICAgICAgIC8vIExvb2t1cCBhbiBleGlzdGluZyBxdWVyeSBzdGF0ZSBpZiB0aGUgdGFyZ2V0IElEIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWRcclxuICAgICAgICAvLyBieSBhbm90aGVyIHRhYlxyXG4gICAgICAgIGlmICh0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQodGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgIHZhciBzdG9yYWdlSXRlbSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHRhcmdldElkKSk7XHJcbiAgICAgICAgICAgIGlmIChzdG9yYWdlSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1ldGFkYXRhID0gUXVlcnlUYXJnZXRNZXRhZGF0YS5mcm9tV2ViU3RvcmFnZUVudHJ5KHRhcmdldElkLCBzdG9yYWdlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeVN0YXRlID0gbWV0YWRhdGEuc3RhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sb2NhbENsaWVudFN0YXRlLmFkZFF1ZXJ5VGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBxdWVyeVN0YXRlO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxDbGllbnRTdGF0ZS5yZW1vdmVRdWVyeVRhcmdldCh0YXJnZXRJZCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0Q2xpZW50U3RhdGUoKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmlzTG9jYWxRdWVyeVRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsQ2xpZW50U3RhdGUuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0YXJnZXRJZCk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5jbGVhclF1ZXJ5U3RhdGUgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGFyZ2V0SWQpKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnVwZGF0ZVF1ZXJ5U3RhdGUgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdFF1ZXJ5VGFyZ2V0U3RhdGUodGFyZ2V0SWQsIHN0YXRlLCBlcnJvcik7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5oYW5kbGVVc2VyQ2hhbmdlID0gZnVuY3Rpb24gKHVzZXIsIHJlbW92ZWRCYXRjaElkcywgYWRkZWRCYXRjaElkcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmVtb3ZlZEJhdGNoSWRzLmZvckVhY2goZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAgICAgX3RoaXMucmVtb3ZlTXV0YXRpb25TdGF0ZShiYXRjaElkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgICAgICBhZGRlZEJhdGNoSWRzLmZvckVhY2goZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICAgICAgX3RoaXMuYWRkUGVuZGluZ011dGF0aW9uKGJhdGNoSWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc2V0T25saW5lU3RhdGUgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RPbmxpbmVTdGF0ZShvbmxpbmVTdGF0ZSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxhdGZvcm0ud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLnN0b3JhZ2VMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbSh0aGlzLmxvY2FsQ2xpZW50U3RvcmFnZUtleSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGEsICdSRUFEJywga2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc2V0SXRlbSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRhLCAnU0VUJywga2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckYSwgJ1JFTU9WRScsIGtleSk7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmhhbmRsZVdlYlN0b3JhZ2VFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKGV2ZW50LnN0b3JhZ2VBcmVhID09PSB0aGlzLnN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRhLCAnRVZFTlQnLCBldmVudC5rZXksIGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gdGhpcy5sb2NhbENsaWVudFN0b3JhZ2VLZXkpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yKCdSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudFN0YXRlLCBjbGllbnRJZCwgbXV0YXRpb25NZXRhZGF0YSwgcXVlcnlUYXJnZXRNZXRhZGF0YSwgb25saW5lU3RhdGUsIHNlcXVlbmNlTnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWFybHlFdmVudHMucHVzaChldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudFN0YXRlS2V5UmUudGVzdChldmVudC5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRTdGF0ZSA9IHRoaXMuZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZShldmVudC5rZXksIGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGllbnRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmhhbmRsZUNsaWVudFN0YXRlRXZlbnQoY2xpZW50U3RhdGUuY2xpZW50SWQsIGNsaWVudFN0YXRlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRJZCA9IHRoaXMuZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleShldmVudC5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlQ2xpZW50U3RhdGVFdmVudChjbGllbnRJZCwgbnVsbCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubXV0YXRpb25CYXRjaEtleVJlLnRlc3QoZXZlbnQua2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uTWV0YWRhdGEgPSB0aGlzLmZyb21XZWJTdG9yYWdlTXV0YXRpb25NZXRhZGF0YShldmVudC5rZXksIGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbk1ldGFkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaGFuZGxlTXV0YXRpb25CYXRjaEV2ZW50KG11dGF0aW9uTWV0YWRhdGEpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnF1ZXJ5VGFyZ2V0S2V5UmUudGVzdChldmVudC5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5uZXdWYWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlUYXJnZXRNZXRhZGF0YSA9IHRoaXMuZnJvbVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhKGV2ZW50LmtleSwgZXZlbnQubmV3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5VGFyZ2V0TWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVRdWVyeVRhcmdldEV2ZW50KHF1ZXJ5VGFyZ2V0TWV0YWRhdGEpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXkgPT09IHRoaXMub25saW5lU3RhdGVLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxpbmVTdGF0ZSA9IHRoaXMuZnJvbVdlYlN0b3JhZ2VPbmxpbmVTdGF0ZShldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5oYW5kbGVPbmxpbmVTdGF0ZUV2ZW50KG9ubGluZVN0YXRlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5ID09PSB0aGlzLnNlcXVlbmNlTnVtYmVyS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCghIXRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyLCAnTWlzc2luZyBzZXF1ZW5jZU51bWJlckhhbmRsZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXIgPSBmcm9tV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyKGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcXVlbmNlTnVtYmVyICE9PSBMaXN0ZW5TZXF1ZW5jZS5JTlZBTElEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcihzZXF1ZW5jZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pOyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUsIFwibG9jYWxDbGllbnRTdGF0ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZUNsaWVudHNbdGhpcy5sb2NhbENsaWVudElkXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUucGVyc2lzdENsaWVudFN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLmxvY2FsQ2xpZW50U3RvcmFnZUtleSwgdGhpcy5sb2NhbENsaWVudFN0YXRlLnRvV2ViU3RvcmFnZUpTT04oKSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5wZXJzaXN0TXV0YXRpb25TdGF0ZSA9IGZ1bmN0aW9uIChiYXRjaElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICB2YXIgbXV0YXRpb25TdGF0ZSA9IG5ldyBNdXRhdGlvbk1ldGFkYXRhKHRoaXMuY3VycmVudFVzZXIsIGJhdGNoSWQsIHN0YXRlLCBlcnJvcik7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uS2V5ID0gY3JlYXRlV2ViU3RvcmFnZU11dGF0aW9uQmF0Y2hLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgYmF0Y2hJZCk7XHJcbiAgICAgICAgdGhpcy5zZXRJdGVtKG11dGF0aW9uS2V5LCBtdXRhdGlvblN0YXRlLnRvV2ViU3RvcmFnZUpTT04oKSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5yZW1vdmVNdXRhdGlvblN0YXRlID0gZnVuY3Rpb24gKGJhdGNoSWQpIHtcclxuICAgICAgICB2YXIgbXV0YXRpb25LZXkgPSBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCBiYXRjaElkKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0obXV0YXRpb25LZXkpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUucGVyc2lzdE9ubGluZVN0YXRlID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgdmFyIGVudHJ5ID0ge1xyXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5sb2NhbENsaWVudElkLFxyXG4gICAgICAgICAgICBvbmxpbmVTdGF0ZTogT25saW5lU3RhdGVbb25saW5lU3RhdGVdXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLm9ubGluZVN0YXRlS2V5LCBKU09OLnN0cmluZ2lmeShlbnRyeSkpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUucGVyc2lzdFF1ZXJ5VGFyZ2V0U3RhdGUgPSBmdW5jdGlvbiAodGFyZ2V0SWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIHZhciB0YXJnZXRLZXkgPSBjcmVhdGVXZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YUtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0YXJnZXRJZCk7XHJcbiAgICAgICAgdmFyIHRhcmdldE1ldGFkYXRhID0gbmV3IFF1ZXJ5VGFyZ2V0TWV0YWRhdGEodGFyZ2V0SWQsIHN0YXRlLCBlcnJvcik7XHJcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRhcmdldEtleSwgdGFyZ2V0TWV0YWRhdGEudG9XZWJTdG9yYWdlSlNPTigpKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcclxuICAgICAqIG1hdGNoIHRoZSBleHBlY3RlZCBrZXkgZm9ybWF0LlxyXG4gICAgICovXHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmZyb21XZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgdmFyIG1hdGNoID0gdGhpcy5jbGllbnRTdGF0ZUtleVJlLmV4ZWMoa2V5KTtcclxuICAgICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6IG51bGw7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxyXG4gICAgICogYmUgcGFyc2VkLlxyXG4gICAgICovXHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmZyb21XZWJTdG9yYWdlQ2xpZW50U3RhdGUgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBjbGllbnRJZCA9IHRoaXMuZnJvbVdlYlN0b3JhZ2VDbGllbnRTdGF0ZUtleShrZXkpO1xyXG4gICAgICAgIGFzc2VydChjbGllbnRJZCAhPT0gbnVsbCwgXCJDYW5ub3QgcGFyc2UgY2xpZW50IHN0YXRlIGtleSAnXCIgKyBrZXkgKyBcIidcIik7XHJcbiAgICAgICAgcmV0dXJuIFJlbW90ZUNsaWVudFN0YXRlLmZyb21XZWJTdG9yYWdlRW50cnkoY2xpZW50SWQsIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyBhIG11dGF0aW9uIGJhdGNoIHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxyXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cclxuICAgICAqL1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5mcm9tV2ViU3RvcmFnZU11dGF0aW9uTWV0YWRhdGEgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHRoaXMubXV0YXRpb25CYXRjaEtleVJlLmV4ZWMoa2V5KTtcclxuICAgICAgICBhc3NlcnQobWF0Y2ggIT09IG51bGwsIFwiQ2Fubm90IHBhcnNlIG11dGF0aW9uIGJhdGNoIGtleSAnXCIgKyBrZXkgKyBcIidcIik7XHJcbiAgICAgICAgdmFyIGJhdGNoSWQgPSBOdW1iZXIobWF0Y2hbMV0pO1xyXG4gICAgICAgIHZhciB1c2VySWQgPSBtYXRjaFsyXSAhPT0gdW5kZWZpbmVkID8gbWF0Y2hbMl0gOiBudWxsO1xyXG4gICAgICAgIHJldHVybiBNdXRhdGlvbk1ldGFkYXRhLmZyb21XZWJTdG9yYWdlRW50cnkobmV3IFVzZXIodXNlcklkKSwgYmF0Y2hJZCwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGEgcXVlcnkgdGFyZ2V0IHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXHJcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxyXG4gICAgICovXHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmZyb21XZWJTdG9yYWdlUXVlcnlUYXJnZXRNZXRhZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG1hdGNoID0gdGhpcy5xdWVyeVRhcmdldEtleVJlLmV4ZWMoa2V5KTtcclxuICAgICAgICBhc3NlcnQobWF0Y2ggIT09IG51bGwsIFwiQ2Fubm90IHBhcnNlIHF1ZXJ5IHRhcmdldCBrZXkgJ1wiICsga2V5ICsgXCInXCIpO1xyXG4gICAgICAgIHZhciB0YXJnZXRJZCA9IE51bWJlcihtYXRjaFsxXSk7XHJcbiAgICAgICAgcmV0dXJuIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEuZnJvbVdlYlN0b3JhZ2VFbnRyeSh0YXJnZXRJZCwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGFuIG9ubGluZSBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxyXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cclxuICAgICAqL1xyXG4gICAgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5mcm9tV2ViU3RvcmFnZU9ubGluZVN0YXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIFNoYXJlZE9ubGluZVN0YXRlLmZyb21XZWJTdG9yYWdlRW50cnkodmFsdWUpO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlTXV0YXRpb25CYXRjaEV2ZW50ID0gZnVuY3Rpb24gKG11dGF0aW9uQmF0Y2gpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbkJhdGNoLnVzZXIudWlkICE9PSB0aGlzLmN1cnJlbnRVc2VyLnVpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckYSwgXCJJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyIFwiICsgbXV0YXRpb25CYXRjaC51c2VyLnVpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuc3luY0VuZ2luZS5hcHBseUJhdGNoU3RhdGUobXV0YXRpb25CYXRjaC5iYXRjaElkLCBtdXRhdGlvbkJhdGNoLnN0YXRlLCBtdXRhdGlvbkJhdGNoLmVycm9yKV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuaGFuZGxlUXVlcnlUYXJnZXRFdmVudCA9IGZ1bmN0aW9uICh0YXJnZXRNZXRhZGF0YSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuYXBwbHlUYXJnZXRTdGF0ZSh0YXJnZXRNZXRhZGF0YS50YXJnZXRJZCwgdGFyZ2V0TWV0YWRhdGEuc3RhdGUsIHRhcmdldE1ldGFkYXRhLmVycm9yKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmhhbmRsZUNsaWVudFN0YXRlRXZlbnQgPSBmdW5jdGlvbiAoY2xpZW50SWQsIGNsaWVudFN0YXRlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZXhpc3RpbmdUYXJnZXRzID0gdGhpcy5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKTtcclxuICAgICAgICBpZiAoY2xpZW50U3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVDbGllbnRzW2NsaWVudElkXSA9IGNsaWVudFN0YXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWN0aXZlQ2xpZW50c1tjbGllbnRJZF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBuZXdUYXJnZXRzID0gdGhpcy5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKTtcclxuICAgICAgICB2YXIgYWRkZWRUYXJnZXRzID0gW107XHJcbiAgICAgICAgdmFyIHJlbW92ZWRUYXJnZXRzID0gW107XHJcbiAgICAgICAgbmV3VGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRJZCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nVGFyZ2V0cy5oYXModGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRUYXJnZXRzLnB1c2godGFyZ2V0SWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgZXhpc3RpbmdUYXJnZXRzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldElkKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICghbmV3VGFyZ2V0cy5oYXModGFyZ2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZFRhcmdldHMucHVzaCh0YXJnZXRJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmFwcGx5QWN0aXZlVGFyZ2V0c0NoYW5nZShhZGRlZFRhcmdldHMsIHJlbW92ZWRUYXJnZXRzKTtcclxuICAgIH07XHJcbiAgICBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmhhbmRsZU9ubGluZVN0YXRlRXZlbnQgPSBmdW5jdGlvbiAob25saW5lU3RhdGUpIHtcclxuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcclxuICAgICAgICAvLyBieSBjb21wYXJpbmcgaXRzIGNsaWVudCBJRCB0byB0aGUgbGlzdCBvZiBjbGllbnRzIGtlcHQgYWN0aXZlIGluXHJcbiAgICAgICAgLy8gSW5kZXhlZERiLiBJZiBhIGNsaWVudCBkb2VzIG5vdCB1cGRhdGUgdGhlaXIgSW5kZXhlZERiIGNsaWVudCBzdGF0ZVxyXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXHJcbiAgICAgICAgLy8gc3RhdGUgZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlQ2xpZW50c1tvbmxpbmVTdGF0ZS5jbGllbnRJZF0pIHtcclxuICAgICAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIob25saW5lU3RhdGUub25saW5lU3RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBmcm9tV2ViU3RvcmFnZVNlcXVlbmNlTnVtYmVyKHNlcVN0cmluZykge1xyXG4gICAgdmFyIHNlcXVlbmNlTnVtYmVyID0gTGlzdGVuU2VxdWVuY2UuSU5WQUxJRDtcclxuICAgIGlmIChzZXFTdHJpbmcgIT0gbnVsbCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJzZWQgPSBKU09OLnBhcnNlKHNlcVN0cmluZyk7XHJcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgcGFyc2VkID09PSAnbnVtYmVyJywgJ0ZvdW5kIG5vbi1udW1lcmljIHNlcXVlbmNlIG51bWJlcicpO1xyXG4gICAgICAgICAgICBzZXF1ZW5jZU51bWJlciA9IHBhcnNlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgZXJyb3IoTE9HX1RBRyRhLCAnRmFpbGVkIHRvIHJlYWQgc2VxdWVuY2UgbnVtYmVyIGZyb20gV2ViU3RvcmFnZScsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzZXF1ZW5jZU51bWJlcjtcclxufVxyXG4vKipcclxuICogYE1lbW9yeVNoYXJlZENsaWVudFN0YXRlYCBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBTaGFyZWRDbGllbnRTdGF0ZSBmb3JcclxuICogY2xpZW50cyB1c2luZyBtZW1vcnkgcGVyc2lzdGVuY2UuIFRoZSBzdGF0ZSBpbiB0aGlzIGNsYXNzIHJlbWFpbnMgZnVsbHlcclxuICogaXNvbGF0ZWQgYW5kIG5vIHN5bmNocm9uaXphdGlvbiBpcyBwZXJmb3JtZWQuXHJcbiAqL1xyXG52YXIgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZSgpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RhdGUgPSBuZXcgTG9jYWxDbGllbnRTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMucXVlcnlTdGF0ZSA9IHt9O1xyXG4gICAgICAgIHRoaXMuc3luY0VuZ2luZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5hZGRQZW5kaW5nTXV0YXRpb24gPSBmdW5jdGlvbiAoYmF0Y2hJZCkge1xyXG4gICAgICAgIC8vIE5vIG9wLlxyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS51cGRhdGVNdXRhdGlvblN0YXRlID0gZnVuY3Rpb24gKGJhdGNoSWQsIHN0YXRlLCBlcnJvcikge1xyXG4gICAgICAgIC8vIE5vIG9wLlxyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0YXRlLmFkZFF1ZXJ5VGFyZ2V0KHRhcmdldElkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVN0YXRlW3RhcmdldElkXSB8fCAnbm90LWN1cnJlbnQnO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS51cGRhdGVRdWVyeVN0YXRlID0gZnVuY3Rpb24gKHRhcmdldElkLCBzdGF0ZSwgZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnF1ZXJ5U3RhdGVbdGFyZ2V0SWRdID0gc3RhdGU7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICB0aGlzLmxvY2FsU3RhdGUucmVtb3ZlUXVlcnlUYXJnZXQodGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5pc0xvY2FsUXVlcnlUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0YXRlLmFjdGl2ZVRhcmdldElkcy5oYXModGFyZ2V0SWQpO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5jbGVhclF1ZXJ5U3RhdGUgPSBmdW5jdGlvbiAodGFyZ2V0SWQpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5xdWVyeVN0YXRlW3RhcmdldElkXTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RhdGUuYWN0aXZlVGFyZ2V0SWRzO1xyXG4gICAgfTtcclxuICAgIE1lbW9yeVNoYXJlZENsaWVudFN0YXRlLnByb3RvdHlwZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTdGF0ZS5hY3RpdmVUYXJnZXRJZHMuaGFzKHRhcmdldElkKTtcclxuICAgIH07XHJcbiAgICBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbFN0YXRlID0gbmV3IExvY2FsQ2xpZW50U3RhdGUoKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLmhhbmRsZVVzZXJDaGFuZ2UgPSBmdW5jdGlvbiAodXNlciwgcmVtb3ZlZEJhdGNoSWRzLCBhZGRlZEJhdGNoSWRzKSB7XHJcbiAgICAgICAgLy8gTm8gb3AuXHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnNldE9ubGluZVN0YXRlID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgLy8gTm8gb3AuXHJcbiAgICB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLnNodXRkb3duID0gZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUucHJvdG90eXBlLndyaXRlU2VxdWVuY2VOdW1iZXIgPSBmdW5jdGlvbiAoc2VxdWVuY2VOdW1iZXIpIHsgfTtcclxuICAgIHJldHVybiBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZTtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBMT0dfVEFHJGIgPSAnRmlyZXN0b3JlQ2xpZW50JztcclxuLyoqIERPTUV4Y2VwdGlvbiBlcnJvciBjb2RlIGNvbnN0YW50cy4gKi9cclxudmFyIERPTV9FWENFUFRJT05fSU5WQUxJRF9TVEFURSA9IDExO1xyXG52YXIgRE9NX0VYQ0VQVElPTl9BQk9SVEVEID0gMjA7XHJcbnZhciBET01fRVhDRVBUSU9OX1FVT1RBX0VYQ0VFREVEID0gMjI7XHJcbnZhciBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSW5kZXhlZERiUGVyc2lzdGVuY2VTZXR0aW5ncyhjYWNoZVNpemVCeXRlcywgc3luY2hyb25pemVUYWJzKSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGNhY2hlU2l6ZUJ5dGVzO1xyXG4gICAgICAgIHRoaXMuc3luY2hyb25pemVUYWJzID0gc3luY2hyb25pemVUYWJzO1xyXG4gICAgfVxyXG4gICAgSW5kZXhlZERiUGVyc2lzdGVuY2VTZXR0aW5ncy5wcm90b3R5cGUubHJ1UGFyYW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBMcnVQYXJhbXMud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSW5kZXhlZERiUGVyc2lzdGVuY2VTZXR0aW5ncztcclxufSgpKTtcclxudmFyIE1lbW9yeVBlcnNpc3RlbmNlU2V0dGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZW1vcnlQZXJzaXN0ZW5jZVNldHRpbmdzKCkge1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE1lbW9yeVBlcnNpc3RlbmNlU2V0dGluZ3M7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBGaXJlc3RvcmVDbGllbnQgaXMgYSB0b3AtbGV2ZWwgY2xhc3MgdGhhdCBjb25zdHJ1Y3RzIGFuZCBvd25zIGFsbCBvZiB0aGVcclxuICogcGllY2VzIG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZS4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZVxyXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS5cclxuICovXHJcbnZhciBGaXJlc3RvcmVDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaXJlc3RvcmVDbGllbnQocGxhdGZvcm0sIGRhdGFiYXNlSW5mbywgY3JlZGVudGlhbHMsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBc3luY2hyb25vdXMgcXVldWUgcmVzcG9uc2libGUgZm9yIGFsbCBvZiBvdXIgaW50ZXJuYWwgcHJvY2Vzc2luZy4gV2hlblxyXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXHJcbiAgICAgKiAoaW5jb21pbmcgR1JQQyBtZXNzYWdlcyksIHdlIHNob3VsZCBhbHdheXMgc2NoZWR1bGUgb250byB0aGlzIHF1ZXVlLlxyXG4gICAgICogVGhpcyBlbnN1cmVzIGFsbCBvZiBvdXIgd29yayBpcyBwcm9wZXJseSBzZXJpYWxpemVkIChlLmcuIHdlIGRvbid0XHJcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXHJcbiAgICAgKiBhbiBhc3luYyBJL08gdG8gY29tcGxldGUpLlxyXG4gICAgICovXHJcbiAgICBhc3luY1F1ZXVlKSB7XHJcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHBsYXRmb3JtO1xyXG4gICAgICAgIHRoaXMuZGF0YWJhc2VJbmZvID0gZGF0YWJhc2VJbmZvO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBjcmVkZW50aWFscztcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBhc3luY1F1ZXVlO1xyXG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBBdXRvSWQubmV3SWQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIHVwIHRoZSBGaXJlc3RvcmVDbGllbnQsIHJldHVybmluZyBvbmx5IHdoZXRoZXIgb3Igbm90IGVuYWJsaW5nXHJcbiAgICAgKiBwZXJzaXN0ZW5jZSBzdWNjZWVkZWQuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIGludGVudCBoZXJlIGlzIHRvIFwiZG8gdGhlIHJpZ2h0IHRoaW5nXCIgYXMgZmFyIGFzIHVzZXJzIGFyZSBjb25jZXJuZWQuXHJcbiAgICAgKiBOYW1lbHksIGluIGNhc2VzIHdoZXJlIG9mZmxpbmUgcGVyc2lzdGVuY2UgaXMgcmVxdWVzdGVkIGFuZCBwb3NzaWJsZSxcclxuICAgICAqIGVuYWJsZSBpdCwgYnV0IG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gcGVyc2lzdGVuY2UgZGlzYWJsZWQuIEZvciB0aGUgbW9zdFxyXG4gICAgICogcGFydCB3ZSBleHBlY3QgdGhpcyB0byBzdWNjZWVkIG9uZSB3YXkgb3IgdGhlIG90aGVyIHNvIHdlIGRvbid0IGV4cGVjdCBvdXJcclxuICAgICAqIHVzZXJzIHRvIGFjdHVhbGx5IHdhaXQgb24gdGhlIGZpcmVzdG9yZS5lbmFibGVQZXJzaXN0ZW5jZSBQcm9taXNlIHNpbmNlXHJcbiAgICAgKiB0aGV5IGdlbmVyYWxseSB3b24ndCBjYXJlLlxyXG4gICAgICpcclxuICAgICAqIE9mIGNvdXJzZSBzb21lIHVzZXJzIGFjdHVhbGx5IGRvIGNhcmUgYWJvdXQgd2hldGhlciBvciBub3QgcGVyc2lzdGVuY2VcclxuICAgICAqIHdhcyBzdWNjZXNzZnVsbHkgZW5hYmxlZCwgc28gdGhlIFByb21pc2UgcmV0dXJuZWQgZnJvbSB0aGlzIG1ldGhvZFxyXG4gICAgICogaW5kaWNhdGVzIHRoaXMgb3V0Y29tZS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIHByZXNlbnRzIGEgcHJvYmxlbSB0aG91Z2g6IGV2ZW4gYmVmb3JlIGVuYWJsZVBlcnNpc3RlbmNlIHJlc29sdmVzIG9yXHJcbiAgICAgKiByZWplY3RzLCB1c2VycyBtYXkgaGF2ZSBtYWRlIGNhbGxzIHRvIGUuZy4gZmlyZXN0b3JlLmNvbGxlY3Rpb24oKSB3aGljaFxyXG4gICAgICogbWVhbnMgdGhhdCB0aGUgRmlyZXN0b3JlQ2xpZW50IGluIHRoZXJlIHdpbGwgYmUgYXZhaWxhYmxlIGFuZCB3aWxsIGJlXHJcbiAgICAgKiBlbnF1ZXVpbmcgYWN0aW9ucyBvbiB0aGUgYXN5bmMgcXVldWUuXHJcbiAgICAgKlxyXG4gICAgICogTWVhbndoaWxlIGFueSBmYWlsdXJlIG9mIGFuIG9wZXJhdGlvbiBvbiB0aGUgYXN5bmMgcXVldWUgY2F1c2VzIGl0IHRvXHJcbiAgICAgKiBwYW5pYyBhbmQgcmVqZWN0IGFueSBmdXJ0aGVyIHdvcmssIG9uIHRoZSBwcmVtaXNlIHRoYXQgdW5oYW5kbGVkIGVycm9yc1xyXG4gICAgICogYXJlIGZhdGFsLlxyXG4gICAgICpcclxuICAgICAqIENvbnNlcXVlbnRseSB0aGUgZmFsbGJhY2sgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGhlcmUgaW4gc3RhcnQsIGFuZCBpZiB0aGVcclxuICAgICAqIGZhbGxiYWNrIHN1Y2NlZWRzIHdlIHNpZ25hbCBzdWNjZXNzIHRvIHRoZSBhc3luYyBxdWV1ZSBldmVuIHRob3VnaCB0aGVcclxuICAgICAqIHN0YXJ0KCkgaXRzZWxmIHNpZ25hbHMgZmFpbHVyZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VTZXR0aW5ncyBTZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIG9mZmxpbmVcclxuICAgICAqICAgICBwZXJzaXN0ZW5jZS5cclxuICAgICAqIEByZXR1cm5zIEEgZGVmZXJyZWQgcmVzdWx0IGluZGljYXRpbmcgdGhlIHVzZXItdmlzaWJsZSByZXN1bHQgb2YgZW5hYmxpbmdcclxuICAgICAqICAgICBvZmZsaW5lIHBlcnNpc3RlbmNlLiBUaGlzIG1ldGhvZCB3aWxsIHJlamVjdCB0aGlzIGlmIEluZGV4ZWREQiBmYWlscyB0b1xyXG4gICAgICogICAgIHN0YXJ0IGZvciBhbnkgcmVhc29uLiBJZiB1c2VQZXJzaXN0ZW5jZSBpcyBmYWxzZSB0aGlzIGlzXHJcbiAgICAgKiAgICAgdW5jb25kaXRpb25hbGx5IHJlc29sdmVkLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKHBlcnNpc3RlbmNlU2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIC8vIFdlIGRlZmVyIG91ciBpbml0aWFsaXphdGlvbiB1bnRpbCB3ZSBnZXQgdGhlIGN1cnJlbnQgdXNlciBmcm9tXHJcbiAgICAgICAgLy8gc2V0Q2hhbmdlTGlzdGVuZXIoKS4gV2UgYmxvY2sgdGhlIGFzeW5jIHF1ZXVlIHVudGlsIHdlIGdvdCB0aGUgaW5pdGlhbFxyXG4gICAgICAgIC8vIHVzZXIgYW5kIHRoZSBpbml0aWFsaXphdGlvbiBpcyBjb21wbGV0ZWQuIFRoaXMgd2lsbCBwcmV2ZW50IGFueSBzY2hlZHVsZWRcclxuICAgICAgICAvLyB3b3JrIGZyb20gaGFwcGVuaW5nIGJlZm9yZSBpbml0aWFsaXphdGlvbiBpcyBjb21wbGV0ZWQuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBJZiBpbml0aWFsaXphdGlvbkRvbmUgcmVzb2x2ZWQgdGhlbiB0aGUgRmlyZXN0b3JlQ2xpZW50IGlzIGluIGEgdXNhYmxlXHJcbiAgICAgICAgLy8gc3RhdGUuXHJcbiAgICAgICAgdmFyIGluaXRpYWxpemF0aW9uRG9uZSA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIC8vIElmIHVzZVBlcnNpc3RlbmNlIGlzIHRydWUsIGNlcnRhaW4gY2xhc3NlcyBvZiBlcnJvcnMgd2hpbGUgc3RhcnRpbmcgYXJlXHJcbiAgICAgICAgLy8gcmVjb3ZlcmFibGUgYnV0IG9ubHkgYnkgZmFsbGluZyBiYWNrIHRvIHBlcnNpc3RlbmNlIGRpc2FibGVkLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gSWYgdGhlcmUncyBhbiBlcnJvciBpbiB0aGUgZmlyc3QgY2FzZSBidXQgbm90IGluIHJlY292ZXJ5IHdlIGNhbm5vdFxyXG4gICAgICAgIC8vIHJlamVjdCB0aGUgcHJvbWlzZSBibG9ja2luZyB0aGUgYXN5bmMgcXVldWUgYmVjYXVzZSB0aGlzIHdpbGwgY2F1c2UgdGhlXHJcbiAgICAgICAgLy8gYXN5bmMgcXVldWUgdG8gcGFuaWMuXHJcbiAgICAgICAgdmFyIHBlcnNpc3RlbmNlUmVzdWx0ID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgdmFyIGluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscy5zZXRDaGFuZ2VMaXN0ZW5lcihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICBpZiAoIWluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pbml0aWFsaXplUGVyc2lzdGVuY2UocGVyc2lzdGVuY2VTZXR0aW5ncywgcGVyc2lzdGVuY2VSZXN1bHQsIHVzZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG1heWJlTHJ1R2MpIHsgcmV0dXJuIF90aGlzLmluaXRpYWxpemVSZXN0KHVzZXIsIG1heWJlTHJ1R2MpOyB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGluaXRpYWxpemF0aW9uRG9uZS5yZXNvbHZlLCBpbml0aWFsaXphdGlvbkRvbmUucmVqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UodXNlcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEJsb2NrIHRoZSBhc3luYyBxdWV1ZSB1bnRpbCBpbml0aWFsaXphdGlvbiBpcyBkb25lXHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbGl6YXRpb25Eb25lLnByb21pc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gUmV0dXJuIG9ubHkgdGhlIHJlc3VsdCBvZiBlbmFibGluZyBwZXJzaXN0ZW5jZS4gTm90ZSB0aGF0IHRoaXMgZG9lcyBub3RcclxuICAgICAgICAvLyBuZWVkIHRvIGF3YWl0IHRoZSBjb21wbGV0aW9uIG9mIGluaXRpYWxpemF0aW9uRG9uZSBiZWNhdXNlIHRoZSByZXN1bHQgb2ZcclxuICAgICAgICAvLyB0aGlzIG1ldGhvZCBzaG91bGQgbm90IHJlZmxlY3QgYW55IG90aGVyIGtpbmQgb2YgZmFpbHVyZSB0byBzdGFydC5cclxuICAgICAgICByZXR1cm4gcGVyc2lzdGVuY2VSZXN1bHQucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICAvKiogRW5hYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uIGFuZCByZXF1ZXVlcyBhbGwgcGVuZGluZyBvcGVyYXRpb25zLiAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5lbmFibGVOZXR3b3JrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNFbmdpbmUuZW5hYmxlTmV0d29yaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgcGVyc2lzdGVudCBzdG9yYWdlLCBhdHRlbXB0aW5nIHRvIHVzZSBJbmRleGVkREIgaWZcclxuICAgICAqIHVzZVBlcnNpc3RlbmNlIGlzIHRydWUgb3IgbWVtb3J5LW9ubHkgaWYgZmFsc2UuXHJcbiAgICAgKlxyXG4gICAgICogSWYgSW5kZXhlZERCIGZhaWxzIGJlY2F1c2UgaXQncyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciB0YWIgb3IgYmVjYXVzZSB0aGVcclxuICAgICAqIHBsYXRmb3JtIGNhbid0IHBvc3NpYmx5IHN1cHBvcnQgb3VyIGltcGxlbWVudGF0aW9uIHRoZW4gdGhpcyBtZXRob2QgcmVqZWN0c1xyXG4gICAgICogdGhlIHBlcnNpc3RlbmNlUmVzdWx0IGFuZCBmYWxscyBiYWNrIG9uIG1lbW9yeS1vbmx5IHBlcnNpc3RlbmNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIFNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmUgb2ZmbGluZSBwZXJzaXN0ZW5jZVxyXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlUmVzdWx0IEEgZGVmZXJyZWQgcmVzdWx0IGluZGljYXRpbmcgdGhlIHVzZXItdmlzaWJsZVxyXG4gICAgICogICAgIHJlc3VsdCBvZiBlbmFibGluZyBvZmZsaW5lIHBlcnNpc3RlbmNlLiBUaGlzIG1ldGhvZCB3aWxsIHJlamVjdCB0aGlzIGlmXHJcbiAgICAgKiAgICAgSW5kZXhlZERCIGZhaWxzIHRvIHN0YXJ0IGZvciBhbnkgcmVhc29uLiBJZiB1c2VQZXJzaXN0ZW5jZSBpcyBmYWxzZVxyXG4gICAgICogICAgIHRoaXMgaXMgdW5jb25kaXRpb25hbGx5IHJlc29sdmVkLlxyXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgaW5pdGlhbGl6YXRpb24gc2hvdWxkXHJcbiAgICAgKiAgICAgY29udGludWUsIGkuZS4gdGhhdCBvbmUgb2YgdGhlIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9ucyBhY3R1YWxseVxyXG4gICAgICogICAgIHN1Y2NlZWRlZC5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5pbml0aWFsaXplUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAocGVyc2lzdGVuY2VTZXR0aW5ncywgcGVyc2lzdGVuY2VSZXN1bHQsIHVzZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChwZXJzaXN0ZW5jZVNldHRpbmdzIGluc3RhbmNlb2YgSW5kZXhlZERiUGVyc2lzdGVuY2VTZXR0aW5ncykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGFydEluZGV4ZWREYlBlcnNpc3RlbmNlKHVzZXIsIHBlcnNpc3RlbmNlU2V0dGluZ3MpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobWF5YmVMcnVHYykge1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2VSZXN1bHQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heWJlTHJ1R2M7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgb3Igbm90IHRoZSByZXRyeSBzdWNjZWVkcywgZnJvbSBhbiB1c2VyXHJcbiAgICAgICAgICAgICAgICAvLyBwZXJzcGVjdGl2ZSwgb2ZmbGluZSBwZXJzaXN0ZW5jZSBoYXMgZmFpbGVkLlxyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2VSZXN1bHQucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIEFuIHVua25vd24gZmFpbHVyZSBvbiB0aGUgZmlyc3Qgc3RhZ2Ugc2h1dHMgZXZlcnl0aGluZyBkb3duLlxyXG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5jYW5GYWxsYmFjayhlcnJvcikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZW5hYmxpbmcgb2ZmbGluZSBwZXJzaXN0ZW5jZS4gRmFsbGluZyBiYWNrIHRvJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJyBwZXJzaXN0ZW5jZSBkaXNhYmxlZDogJyArXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN0YXJ0TWVtb3J5UGVyc2lzdGVuY2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHVzZVBlcnNpc3RlbmNlID09IGZhbHNlLCBlbmFibGluZyBvZmZsaW5lIHBlcnNpc3RlbmNlIGlzIGRlZmluZWRcclxuICAgICAgICAgICAgLy8gdG8gdW5jb25kaXRpb25hbGx5IHN1Y2NlZWQuIFRoaXMgYWxsb3dzIHN0YXJ0KCkgdG8gaGF2ZSB0aGUgc2FtZVxyXG4gICAgICAgICAgICAvLyBzaWduYXR1cmUgZm9yIGJvdGggY2FzZXMsIGRlc3BpdGUgdGhlIGZhY3QgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZVxyXG4gICAgICAgICAgICAvLyBpcyBvbmx5IHVzZWQgaW4gdGhlIGVuYWJsZVBlcnNpc3RlbmNlIGNhbGwuXHJcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlUmVzdWx0LnJlc29sdmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRNZW1vcnlQZXJzaXN0ZW5jZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxyXG4gICAgICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuY2FuRmFsbGJhY2sgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBGaXJlc3RvcmVFcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gKGVycm9yLmNvZGUgPT09IENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiB8fFxyXG4gICAgICAgICAgICAgICAgZXJyb3IuY29kZSA9PT0gQ29kZS5VTklNUExFTUVOVEVEKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIERPTUV4Y2VwdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgYXJlIGEgZmV3IGtub3duIGNpcmN1bXN0YW5jZXMgd2hlcmUgd2UgY2FuIG9wZW4gSW5kZXhlZERiIGJ1dFxyXG4gICAgICAgICAgICAvLyB0cnlpbmcgdG8gcmVhZC93cml0ZSB3aWxsIGZhaWwgKGUuZy4gcXVvdGEgZXhjZWVkZWQpLiBGb3JcclxuICAgICAgICAgICAgLy8gd2VsbC11bmRlcnN0b29kIGNhc2VzLCB3ZSBhdHRlbXB0IHRvIGRldGVjdCB0aGVzZSBhbmQgdGhlbiBncmFjZWZ1bGx5XHJcbiAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBtZW1vcnkgcGVyc2lzdGVuY2UuXHJcbiAgICAgICAgICAgIC8vIE5PVEU6IFJhdGhlciB0aGFuIGNvbnRpbnVlIHRvIGFkZCB0byB0aGlzIGxpc3QsIHdlIGNvdWxkIGRlY2lkZSB0b1xyXG4gICAgICAgICAgICAvLyBhbHdheXMgZmFsbCBiYWNrLCB3aXRoIHRoZSByaXNrIHRoYXQgd2UgbWlnaHQgYWNjaWRlbnRhbGx5IGhpZGUgZXJyb3JzXHJcbiAgICAgICAgICAgIC8vIHJlcHJlc2VudGluZyBhY3R1YWwgU0RLIGJ1Z3MuXHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIC8vIFdoZW4gdGhlIGJyb3dzZXIgaXMgb3V0IG9mIHF1b3RhIHdlIGNvdWxkIGdldCBlaXRoZXIgcXVvdGEgZXhjZWVkZWRcclxuICAgICAgICAgICAgLy8gb3IgYW4gYWJvcnRlZCBlcnJvciBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgZXJyb3IgaGFwcGVuZWQgZHVyaW5nXHJcbiAgICAgICAgICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXHJcbiAgICAgICAgICAgIGVycm9yLmNvZGUgPT09IERPTV9FWENFUFRJT05fUVVPVEFfRVhDRUVERUQgfHxcclxuICAgICAgICAgICAgICAgIGVycm9yLmNvZGUgPT09IERPTV9FWENFUFRJT05fQUJPUlRFRCB8fFxyXG4gICAgICAgICAgICAgICAgLy8gRmlyZWZveCBQcml2YXRlIEJyb3dzaW5nIG1vZGUgZGlzYWJsZXMgSW5kZXhlZERiIGFuZCByZXR1cm5zXHJcbiAgICAgICAgICAgICAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXHJcbiAgICAgICAgICAgICAgICBlcnJvci5jb2RlID09PSBET01fRVhDRVBUSU9OX0lOVkFMSURfU1RBVEUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyB0aGF0IHRoZSBjbGllbnQgaGFzIG5vdCBiZWVuIHRlcm1pbmF0ZWQuIEVuc3VyZXMgdGhhdCBvdGhlciBtZXRob2RzIG9uXHJcbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLnZlcmlmeU5vdFRlcm1pbmF0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXN5bmNRdWV1ZS5pc1NodXR0aW5nRG93bikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCAnVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIEluZGV4ZWREQi1iYXNlZCBwZXJzaXN0ZW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUuXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuc3RhcnRJbmRleGVkRGJQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uICh1c2VyLCBzZXR0aW5ncykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gVE9ETyhodHRwOi8vYi8zMzM4NDUyMyk6IEZvciBub3cgd2UganVzdCBkaXNhYmxlIGdhcmJhZ2UgY29sbGVjdGlvblxyXG4gICAgICAgIC8vIHdoZW4gcGVyc2lzdGVuY2UgaXMgZW5hYmxlZC5cclxuICAgICAgICB2YXIgcGVyc2lzdGVuY2VLZXkgPSBJbmRleGVkRGJQZXJzaXN0ZW5jZS5idWlsZFN0b3JhZ2VQcmVmaXgodGhpcy5kYXRhYmFzZUluZm8pO1xyXG4gICAgICAgIC8vIE9wdCB0byB1c2UgcHJvdG8zIEpTT04gaW4gY2FzZSB0aGUgcGxhdGZvcm0gZG9lc24ndCBzdXBwb3J0IFVpbnQ4QXJyYXkuXHJcbiAgICAgICAgdmFyIHNlcmlhbGl6ZXIgPSBuZXcgSnNvblByb3RvU2VyaWFsaXplcih0aGlzLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCB7XHJcbiAgICAgICAgICAgIHVzZVByb3RvM0pzb246IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBscnVQYXJhbXMsIHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc3luY2hyb25pemVUYWJzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlLmlzQXZhaWxhYmxlKHRoaXMucGxhdGZvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxydVBhcmFtcyA9IHNldHRpbmdzLmxydVBhcmFtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gc2V0dGluZ3Muc3luY2hyb25pemVUYWJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGUodGhpcy5hc3luY1F1ZXVlLCB0aGlzLnBsYXRmb3JtLCBwZXJzaXN0ZW5jZUtleSwgdGhpcy5jbGllbnRJZCwgdXNlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IE1lbW9yeVNoYXJlZENsaWVudFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEluZGV4ZWREYlBlcnNpc3RlbmNlLmNyZWF0ZUluZGV4ZWREYlBlcnNpc3RlbmNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd1RhYlN5bmNocm9uaXphdGlvbjogc2V0dGluZ3Muc3luY2hyb25pemVUYWJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlS2V5OiBwZXJzaXN0ZW5jZUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogdGhpcy5wbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTogdGhpcy5hc3luY1F1ZXVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbGl6ZXI6IHNlcmlhbGl6ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbHJ1UGFyYW1zOiBscnVQYXJhbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJTeW5jZXI6IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBwZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5nYXJiYWdlQ29sbGVjdG9yXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIE1lbW9yeS1iYWNrZWQgcGVyc2lzdGVuY2UuIEluIHByYWN0aWNlIHRoaXMgY2Fubm90IGZhaWwuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgd2lsbCBzdWNjZXNzZnVsbHkgcmVzb2x2ZS5cclxuICAgICAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5zdGFydE1lbW9yeVBlcnNpc3RlbmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBNZW1vcnlQZXJzaXN0ZW5jZS5jcmVhdGVFYWdlclBlcnNpc3RlbmNlKHRoaXMuY2xpZW50SWQpO1xyXG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBuZXcgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUoKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIHJlc3Qgb2YgdGhlIEZpcmVzdG9yZUNsaWVudCwgYXNzdW1pbmcgdGhlIGluaXRpYWwgdXNlclxyXG4gICAgICogaGFzIGJlZW4gb2J0YWluZWQgZnJvbSB0aGUgY3JlZGVudGlhbCBwcm92aWRlciBhbmQgc29tZSBwZXJzaXN0ZW5jZVxyXG4gICAgICogaW1wbGVtZW50YXRpb24gaXMgYXZhaWxhYmxlIGluIHRoaXMucGVyc2lzdGVuY2UuXHJcbiAgICAgKi9cclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuaW5pdGlhbGl6ZVJlc3QgPSBmdW5jdGlvbiAodXNlciwgbWF5YmVMcnVHYykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgZGVidWcoTE9HX1RBRyRiLCAnSW5pdGlhbGl6aW5nLiB1c2VyPScsIHVzZXIudWlkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbGF0Zm9ybVxyXG4gICAgICAgICAgICAubG9hZENvbm5lY3Rpb24odGhpcy5kYXRhYmFzZUluZm8pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjb25uZWN0aW9uKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeUVuZ2luZSwgY29ubmVjdGl2aXR5TW9uaXRvciwgc2VyaWFsaXplciwgZGF0YXN0b3JlLCByZW1vdGVTdG9yZU9ubGluZVN0YXRlQ2hhbmdlZEhhbmRsZXIsIHNoYXJlZENsaWVudFN0YXRlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlcjtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlFbmdpbmUgPSBuZXcgSW5kZXhGcmVlUXVlcnlFbmdpbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gbmV3IExvY2FsU3RvcmUodGhpcy5wZXJzaXN0ZW5jZSwgcXVlcnlFbmdpbmUsIHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuc3RhcnQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXliZUxydUdjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSdyZSBydW5uaW5nIExSVSBHYXJiYWdlIGNvbGxlY3Rpb24uIFNldCB1cCB0aGUgc2NoZWR1bGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5scnVTY2hlZHVsZXIgPSBuZXcgTHJ1U2NoZWR1bGVyKG1heWJlTHJ1R2MsIHRoaXMuYXN5bmNRdWV1ZSwgdGhpcy5sb2NhbFN0b3JlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aXZpdHlNb25pdG9yID0gdGhpcy5wbGF0Zm9ybS5uZXdDb25uZWN0aXZpdHlNb25pdG9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbGl6ZXIgPSB0aGlzLnBsYXRmb3JtLm5ld1NlcmlhbGl6ZXIodGhpcy5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzdG9yZSA9IG5ldyBEYXRhc3RvcmUodGhpcy5hc3luY1F1ZXVlLCBjb25uZWN0aW9uLCB0aGlzLmNyZWRlbnRpYWxzLCBzZXJpYWxpemVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlU3RvcmVPbmxpbmVTdGF0ZUNoYW5nZWRIYW5kbGVyID0gZnVuY3Rpb24gKG9ubGluZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY0VuZ2luZS5hcHBseU9ubGluZVN0YXRlQ2hhbmdlKG9ubGluZVN0YXRlLCBPbmxpbmVTdGF0ZVNvdXJjZS5SZW1vdGVTdG9yZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZENsaWVudFN0YXRlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciA9IGZ1bmN0aW9uIChvbmxpbmVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN5bmNFbmdpbmUuYXBwbHlPbmxpbmVTdGF0ZUNoYW5nZShvbmxpbmVTdGF0ZSwgT25saW5lU3RhdGVTb3VyY2UuU2hhcmVkQ2xpZW50U3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZVN0b3JlID0gbmV3IFJlbW90ZVN0b3JlKHRoaXMubG9jYWxTdG9yZSwgZGF0YXN0b3JlLCB0aGlzLmFzeW5jUXVldWUsIHJlbW90ZVN0b3JlT25saW5lU3RhdGVDaGFuZ2VkSGFuZGxlciwgY29ubmVjdGl2aXR5TW9uaXRvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3luY0VuZ2luZSA9IG5ldyBTeW5jRW5naW5lKHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSwgdXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gc2hhcmVkQ2xpZW50U3RhdGVPbmxpbmVTdGF0ZUNoYW5nZWRIYW5kbGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdXAgd2lyaW5nIGJldHdlZW4gc3luYyBlbmdpbmUgYW5kIG90aGVyIGNvbXBvbmVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5zeW5jRW5naW5lID0gdGhpcy5zeW5jRW5naW5lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB0aGlzLnN5bmNFbmdpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNZ3IgPSBuZXcgRXZlbnRNYW5hZ2VyKHRoaXMuc3luY0VuZ2luZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBPUlRJTkcgTk9URTogTG9jYWxTdG9yZSBkb2Vzbid0IG5lZWQgYW4gZXhwbGljaXQgc3RhcnQoKSBvbiB0aGUgV2ViLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUE9SVElORyBOT1RFOiBMb2NhbFN0b3JlIGRvZXNuJ3QgbmVlZCBhbiBleHBsaWNpdCBzdGFydCgpIG9uIHRoZSBXZWIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW1vdGVTdG9yZS5zdGFydCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wZXJzaXN0ZW5jZS5zZXRQcmltYXJ5U3RhdGVMaXN0ZW5lcihmdW5jdGlvbiAoaXNQcmltYXJ5KSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3luY0VuZ2luZS5hcHBseVByaW1hcnlTdGF0ZShpc1ByaW1hcnkpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubHJ1U2NoZWR1bGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ByaW1hcnkgJiYgIXRoaXMubHJ1U2NoZWR1bGVyLnN0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubHJ1U2NoZWR1bGVyLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzUHJpbWFyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5scnVTY2hlZHVsZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gYmUgdGVybWluYXRlZCB0byBhbGxvdyB0aGUgZGVsZXRlIHRvIHN1Y2NlZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucGVyc2lzdGVuY2Uuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnRlcm1pbmF0ZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gYmUgdGVybWluYXRlZCB0byBhbGxvdyB0aGUgZGVsZXRlIHRvIHN1Y2NlZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckYiwgJ0NyZWRlbnRpYWwgQ2hhbmdlZC4gQ3VycmVudCB1c2VyOiAnICsgdXNlci51aWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSh1c2VyKTtcclxuICAgIH07XHJcbiAgICAvKiogRGlzYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbi4gUGVuZGluZyBvcGVyYXRpb25zIHdpbGwgbm90IGNvbXBsZXRlLiAqL1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5kaXNhYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zeW5jRW5naW5lLmRpc2FibGVOZXR3b3JrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS50ZXJtaW5hdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRJbml0aWF0ZVNodXRkb3duKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUE9SVElORyBOT1RFOiBMb2NhbFN0b3JlIGRvZXMgbm90IG5lZWQgYW4gZXhwbGljaXQgc2h1dGRvd24gb24gd2ViLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5scnVTY2hlZHVsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubHJ1U2NoZWR1bGVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbW90ZVN0b3JlLnNodXRkb3duKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBgcmVtb3ZlQ2hhbmdlTGlzdGVuZXJgIG11c3QgYmUgY2FsbGVkIGFmdGVyIHNodXR0aW5nIGRvd24gdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW90ZVN0b3JlIGFzIGl0IHdpbGwgcHJldmVudCB0aGUgUmVtb3RlU3RvcmUgZnJvbSByZXRyaWV2aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF1dGggdG9rZW5zLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWRlbnRpYWxzLnJlbW92ZUNoYW5nZUxpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCB3cml0ZXMgdGhhdCB3ZXJlIHBlbmRpbmcgYXQgdGhlIHRpbWUgdGhpc1xyXG4gICAgICogbWV0aG9kIHdhcyBjYWxsZWQgcmVjZWl2ZWQgc2VydmVyIGFja25vd2xlZGdlbWVudC4gQW4gYWNrbm93bGVkZ2VtZW50IGNhbiBiZSBlaXRoZXIgYWNjZXB0YW5jZVxyXG4gICAgICogb3IgcmVqZWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLndhaXRGb3JQZW5kaW5nV3JpdGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc3luY0VuZ2luZS5yZWdpc3RlclBlbmRpbmdXcml0ZXNDYWxsYmFjayhkZWZlcnJlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlQ2xpZW50LnByb3RvdHlwZS5saXN0ZW4gPSBmdW5jdGlvbiAocXVlcnksIG9ic2VydmVyLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICB2YXIgbGlzdGVuZXIgPSBuZXcgUXVlcnlMaXN0ZW5lcihxdWVyeSwgb2JzZXJ2ZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmV2ZW50TWdyLmxpc3RlbihsaXN0ZW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUudW5saXN0ZW4gPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIENoZWNrcyBmb3IgdGVybWluYXRpb24gYnV0IGRvZXMgbm90IHJhaXNlIGVycm9yLCBhbGxvd2luZyB1bmxpc3RlbiBhZnRlclxyXG4gICAgICAgIC8vIHRlcm1pbmF0aW9uIHRvIGJlIGEgbm8tb3AuXHJcbiAgICAgICAgaWYgKHRoaXMuY2xpZW50VGVybWluYXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmV2ZW50TWdyLnVubGlzdGVuKGxpc3RlbmVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmdldERvY3VtZW50RnJvbUxvY2FsQ2FjaGUgPSBmdW5jdGlvbiAoZG9jS2V5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlXHJcbiAgICAgICAgICAgIC5lbnF1ZXVlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvY2FsU3RvcmUucmVhZERvY3VtZW50KGRvY0tleSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG1heWJlRG9jKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXliZURvYyBpbnN0YW5jZW9mIERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF5YmVEb2M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobWF5YmVEb2MgaW5zdGFuY2VvZiBOb0RvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIGNhY2hlLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBtYXkgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJleGlzdCBvbiB0aGUgc2VydmVyLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nICdzb3VyY2UnIGluIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAndGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3NlcnZlci4pJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmdldERvY3VtZW50c0Zyb21Mb2NhbENhY2hlID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWUoZnVuY3Rpb24gKCkgeyByZXR1cm4gdHNsaWIuX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlSZXN1bHQsIHZpZXcsIHZpZXdEb2NDaGFuZ2VzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWIuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvY2FsU3RvcmUuZXhlY3V0ZVF1ZXJ5KHF1ZXJ5LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyB0cnVlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlldyA9IG5ldyBWaWV3KHF1ZXJ5LCBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld0RvY0NoYW5nZXMgPSB2aWV3LmNvbXB1dGVEb2NDaGFuZ2VzKHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2aWV3LmFwcGx5Q2hhbmdlcyh2aWV3RG9jQ2hhbmdlcywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gZmFsc2UpLnNuYXBzaG90XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zeW5jRW5naW5lLndyaXRlKG11dGF0aW9ucywgZGVmZXJyZWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUuZGF0YWJhc2VJZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZDtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmVDbGllbnQucHJvdG90eXBlLmFkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnZlcmlmeU5vdFRlcm1pbmF0ZWQoKTtcclxuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmV2ZW50TWdyLmFkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyKG9ic2VydmVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUucmVtb3ZlU25hcHNob3RzSW5TeW5jTGlzdGVuZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAvLyBDaGVja3MgZm9yIHNodXRkb3duIGJ1dCBkb2VzIG5vdCByYWlzZSBlcnJvciwgYWxsb3dpbmcgcmVtb3ZlIGFmdGVyXHJcbiAgICAgICAgLy8gc2h1dGRvd24gdG8gYmUgYSBuby1vcC5cclxuICAgICAgICBpZiAodGhpcy5jbGllbnRUZXJtaW5hdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ldmVudE1nci5yZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihvYnNlcnZlcik7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUsIFwiY2xpZW50VGVybWluYXRlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5LCB0aGUgYXN5bmNRdWV1ZSBpcyBzdGlsbCBydW5uaW5nLCBidXQgb25seSBhY2NlcHRpbmcgb3BlcmF0aW9uc1xyXG4gICAgICAgICAgICAvLyByZWxhdGVkIHRvIHRlcm1pbmF0aW9uIG9yIHN1cHBvc2VkIHRvIGJlIHJ1biBhZnRlciB0ZXJtaW5hdGlvbi4gSXQgaXMgZWZmZWN0aXZlbHlcclxuICAgICAgICAgICAgLy8gdGVybWluYXRlZCB0byB0aGUgZXllcyBvZiB1c2Vycy5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5pc1NodXR0aW5nRG93bjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEZpcmVzdG9yZUNsaWVudC5wcm90b3R5cGUudHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAodXBkYXRlRnVuY3Rpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90VGVybWluYXRlZCgpO1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc3luY0VuZ2luZS5ydW5UcmFuc2FjdGlvbihfdGhpcy5hc3luY1F1ZXVlLCB1cGRhdGVGdW5jdGlvbiwgZGVmZXJyZWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpcmVzdG9yZUNsaWVudDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qXHJcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXHJcbiAqIGFzeW5jaHJvbm91c2x5LiBUbyBhbGxvdyBpbW1lZGlhdGUgc2lsZW5jaW5nLCBhIG11dGUgY2FsbCBpcyBhZGRlZCB3aGljaFxyXG4gKiBjYXVzZXMgZXZlbnRzIHNjaGVkdWxlZCB0byBubyBsb25nZXIgYmUgcmFpc2VkLlxyXG4gKi9cclxudmFyIEFzeW5jT2JzZXJ2ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBc3luY09ic2VydmVyKG9ic2VydmVyKSB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcclxuICAgICAgICAgKiBhc3luYyBkZXRhY2htZW50IG9mIGxpc3RlbmVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubXV0ZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIEFzeW5jT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlRXZlbnQodGhpcy5vYnNlcnZlci5uZXh0LCB2YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgQXN5bmNPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlRXZlbnQodGhpcy5vYnNlcnZlci5lcnJvciwgZXJyb3IpO1xyXG4gICAgfTtcclxuICAgIEFzeW5jT2JzZXJ2ZXIucHJvdG90eXBlLm11dGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5tdXRlZCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgQXN5bmNPYnNlcnZlci5wcm90b3R5cGUuc2NoZWR1bGVFdmVudCA9IGZ1bmN0aW9uIChldmVudEhhbmRsZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMubXV0ZWQpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLm11dGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRIYW5kbGVyKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBBc3luY09ic2VydmVyO1xyXG59KCkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhlIG9iamVjdHMgdGhhdCBhcmUgYSBwYXJ0IG9mIHRoaXMgQVBJIGFyZSBleHBvc2VkIHRvIHRoaXJkLXBhcnRpZXMgYXNcclxuLy8gY29tcGlsZWQgamF2YXNjcmlwdCBzbyB3ZSB3YW50IHRvIGZsYWcgb3VyIHByaXZhdGUgbWVtYmVycyB3aXRoIGEgbGVhZGluZ1xyXG4vLyB1bmRlcnNjb3JlIHRvIGRpc2NvdXJhZ2UgdGhlaXIgdXNlLlxyXG4vKipcclxuICogQSBGaWVsZFBhdGggcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYSBzaW5nbGVcclxuICogZmllbGQgbmFtZSAocmVmZXJyaW5nIHRvIGEgdG9wLWxldmVsIGZpZWxkIGluIHRoZSBkb2N1bWVudCksIG9yIGEgbGlzdCBvZlxyXG4gKiBmaWVsZCBuYW1lcyAocmVmZXJyaW5nIHRvIGEgbmVzdGVkIGZpZWxkIGluIHRoZSBkb2N1bWVudCkuXHJcbiAqL1xyXG52YXIgRmllbGRQYXRoJDEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBGaWVsZFBhdGggZnJvbSB0aGUgcHJvdmlkZWQgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcclxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZmllbGROYW1lcyBBIGxpc3Qgb2YgZmllbGQgbmFtZXMuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIEZpZWxkUGF0aCQxKCkge1xyXG4gICAgICAgIHZhciBmaWVsZE5hbWVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZmllbGROYW1lc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZU5hbWVkQXJyYXlBdExlYXN0TnVtYmVyT2ZFbGVtZW50cygnRmllbGRQYXRoJywgZmllbGROYW1lcywgJ2ZpZWxkTmFtZXMnLCAxKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkTmFtZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaWVsZFBhdGgnLCAnc3RyaW5nJywgaSwgZmllbGROYW1lc1tpXSk7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzW2ldLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAnRmllbGQgbmFtZXMgbXVzdCBub3QgYmUgZW1wdHkuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IEZpZWxkUGF0aChmaWVsZE5hbWVzKTtcclxuICAgIH1cclxuICAgIEZpZWxkUGF0aCQxLmRvY3VtZW50SWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEZpZWxkUGF0aCQxLl9ET0NVTUVOVF9JRDtcclxuICAgIH07XHJcbiAgICBGaWVsZFBhdGgkMS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRmllbGRQYXRoJDEpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKCdpc0VxdWFsJywgJ0ZpZWxkUGF0aCcsIDEsIG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsUGF0aC5pc0VxdWFsKG90aGVyLl9pbnRlcm5hbFBhdGgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgTm90ZTogVGhlIGJhY2tlbmQgZG9lc24ndCB0ZWNobmljYWxseSBzdXBwb3J0IHF1ZXJ5aW5nIGJ5XHJcbiAgICAgKiBkb2N1bWVudCBJRC4gSW5zdGVhZCBpdCBxdWVyaWVzIGJ5IHRoZSBlbnRpcmUgZG9jdW1lbnQgbmFtZSAoZnVsbCBwYXRoXHJcbiAgICAgKiBpbmNsdWRlZCksIGJ1dCBpbiB0aGUgY2FzZXMgd2UgY3VycmVudGx5IHN1cHBvcnQgZG9jdW1lbnRJZCgpLCB0aGUgbmV0XHJcbiAgICAgKiBlZmZlY3QgaXMgdGhlIHNhbWUuXHJcbiAgICAgKi9cclxuICAgIEZpZWxkUGF0aCQxLl9ET0NVTUVOVF9JRCA9IG5ldyBGaWVsZFBhdGgkMShGaWVsZFBhdGgua2V5RmllbGQoKS5jYW5vbmljYWxTdHJpbmcoKSk7XHJcbiAgICByZXR1cm4gRmllbGRQYXRoJDE7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBNYXRjaGVzIGFueSBjaGFyYWN0ZXJzIGluIGEgZmllbGQgcGF0aCBzdHJpbmcgdGhhdCBhcmUgcmVzZXJ2ZWQuXHJcbiAqL1xyXG52YXIgUkVTRVJWRUQgPSBuZXcgUmVnRXhwKCdbflxcXFwqL1xcXFxbXFxcXF1dJyk7XHJcbi8qKlxyXG4gKiBQYXJzZXMgYSBmaWVsZCBwYXRoIHN0cmluZyBpbnRvIGEgRmllbGRQYXRoLCB0cmVhdGluZyBkb3RzIGFzIHNlcGFyYXRvcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKHBhdGgpIHtcclxuICAgIHZhciBmb3VuZCA9IHBhdGguc2VhcmNoKFJFU0VSVkVEKTtcclxuICAgIGlmIChmb3VuZCA+PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIHBhdGggKFwiICsgcGF0aCArIFwiKS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiBcIiArXHJcbiAgICAgICAgICAgIFwiJ34nLCAnKicsICcvJywgJ1snLCBvciAnXSdcIik7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBuZXcgKEZpZWxkUGF0aCQxLmJpbmQuYXBwbHkoRmllbGRQYXRoJDEsIHRzbGliLl9fc3ByZWFkQXJyYXlzKFt2b2lkIDBdLCBwYXRoLnNwbGl0KCcuJykpKSkoKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIHBhdGggKFwiICsgcGF0aCArIFwiKS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIFwiICtcclxuICAgICAgICAgICAgXCJiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidcIik7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBPQXV0aFRva2VuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gT0F1dGhUb2tlbih2YWx1ZSwgdXNlcikge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy50eXBlID0gJ09BdXRoJztcclxuICAgICAgICB0aGlzLmF1dGhIZWFkZXJzID0ge307XHJcbiAgICAgICAgLy8gU2V0IHRoZSBoZWFkZXJzIHVzaW5nIE9iamVjdCBMaXRlcmFsIG5vdGF0aW9uIHRvIGF2b2lkIG1pbmlmaWNhdGlvblxyXG4gICAgICAgIHRoaXMuYXV0aEhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IFwiQmVhcmVyIFwiICsgdmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gT0F1dGhUb2tlbjtcclxufSgpKTtcclxuLyoqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uICovXHJcbnZhciBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxyXG4gICAgICAgICAqIFRoaXMgaXNuJ3QgYWN0dWFsbHkgbmVjZXNzYXJ5IHNpbmNlIHRoZSBVSUQgbmV2ZXIgY2hhbmdlcywgYnV0IHdlIHVzZSB0aGlzXHJcbiAgICAgICAgICogdG8gdmVyaWZ5IHRoZSBsaXN0ZW4gY29udHJhY3QgaXMgYWRoZXJlZCB0byBpbiB0ZXN0cy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuZ2V0VG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcclxuICAgIH07XHJcbiAgICBFbXB0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmludmFsaWRhdGVUb2tlbiA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuc2V0Q2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoY2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuY2hhbmdlTGlzdGVuZXIsICdDYW4gb25seSBjYWxsIHNldENoYW5nZUxpc3RlbmVyKCkgb25jZS4nKTtcclxuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gY2hhbmdlTGlzdGVuZXI7XHJcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cclxuICAgICAgICBjaGFuZ2VMaXN0ZW5lcihVc2VyLlVOQVVUSEVOVElDQVRFRCk7XHJcbiAgICB9O1xyXG4gICAgRW1wdHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhc3NlcnQodGhpcy5jaGFuZ2VMaXN0ZW5lciAhPT0gbnVsbCwgJ3JlbW92ZUNoYW5nZUxpc3RlbmVyKCkgd2hlbiBubyBsaXN0ZW5lciByZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlcjtcclxufSgpKTtcclxudmFyIEZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlcihhdXRoUHJvdmlkZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBhdXRoIHRva2VuIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZUFwcCwgcmV0YWluZWQgaGVyZSBzbyB3ZVxyXG4gICAgICAgICAqIGNhbiB1bnJlZ2lzdGVyIGl0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG9rZW5MaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgLyoqIFRyYWNrcyB0aGUgY3VycmVudCBVc2VyLiAqL1xyXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBVc2VyLlVOQVVUSEVOVElDQVRFRDtcclxuICAgICAgICB0aGlzLnJlY2VpdmVkSW5pdGlhbFVzZXIgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb3VudGVyIHVzZWQgdG8gZGV0ZWN0IGlmIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIGEgZ2V0VG9rZW4gcmVxdWVzdCB3YXNcclxuICAgICAgICAgKiBvdXRzdGFuZGluZy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRva2VuQ291bnRlciA9IDA7XHJcbiAgICAgICAgLyoqIFRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKS4gKi9cclxuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudG9rZW5MaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMudG9rZW5Db3VudGVyKys7XHJcbiAgICAgICAgICAgIF90aGlzLmN1cnJlbnRVc2VyID0gX3RoaXMuZ2V0VXNlcigpO1xyXG4gICAgICAgICAgICBfdGhpcy5yZWNlaXZlZEluaXRpYWxVc2VyID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmNoYW5nZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jaGFuZ2VMaXN0ZW5lcihfdGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudG9rZW5Db3VudGVyID0gMDtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguYWRkQXV0aFRva2VuTGlzdGVuZXIodGhpcy50b2tlbkxpc3RlbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGlmIGF1dGggaXMgbm90IGF2YWlsYWJsZSwgaW52b2tlIHRva2VuTGlzdGVuZXIgb25jZSB3aXRoIG51bGwgdG9rZW5cclxuICAgICAgICAgICAgdGhpcy50b2tlbkxpc3RlbmVyKG51bGwpO1xyXG4gICAgICAgICAgICBhdXRoUHJvdmlkZXIuZ2V0KCkudGhlbihmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMudG9rZW5MaXN0ZW5lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRva2VuTGlzdGVuZXIgY2FuIGJlIHJlbW92ZWQgYnkgcmVtb3ZlQ2hhbmdlTGlzdGVuZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmF1dGguYWRkQXV0aFRva2VuTGlzdGVuZXIoX3RoaXMudG9rZW5MaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8qIHRoaXMuYXV0aFByb3ZpZGVyLmdldCgpIG5ldmVyIHJlamVjdHMgKi9cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5nZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGFzc2VydCh0aGlzLnRva2VuTGlzdGVuZXIgIT0gbnVsbCwgJ2dldFRva2VuIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgbGlzdGVuZXIgcmVtb3ZlZC4nKTtcclxuICAgICAgICAvLyBUYWtlIG5vdGUgb2YgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHRva2VuQ291bnRlciBzbyB0aGF0IHRoaXMgbWV0aG9kXHJcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXHJcbiAgICAgICAgLy8gcmVxdWVzdCBpcyBvdXRzdGFuZGluZy5cclxuICAgICAgICB2YXIgaW5pdGlhbFRva2VuQ291bnRlciA9IHRoaXMudG9rZW5Db3VudGVyO1xyXG4gICAgICAgIHZhciBmb3JjZVJlZnJlc2ggPSB0aGlzLmZvcmNlUmVmcmVzaDtcclxuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICghdGhpcy5hdXRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmF1dGguZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKS50aGVuKGZ1bmN0aW9uICh0b2tlbkRhdGEpIHtcclxuICAgICAgICAgICAgLy8gQ2FuY2VsIHRoZSByZXF1ZXN0IHNpbmNlIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIHRoZSByZXF1ZXN0IHdhc1xyXG4gICAgICAgICAgICAvLyBvdXRzdGFuZGluZyBzbyB0aGUgcmVzcG9uc2UgaXMgcG90ZW50aWFsbHkgZm9yIGEgcHJldmlvdXMgdXNlciAod2hpY2hcclxuICAgICAgICAgICAgLy8gdXNlciwgd2UgY2FuJ3QgYmUgc3VyZSkuXHJcbiAgICAgICAgICAgIGlmIChfdGhpcy50b2tlbkNvdW50ZXIgIT09IGluaXRpYWxUb2tlbkNvdW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkFCT1JURUQsICdnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodG9rZW5EYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiB0b2tlbkRhdGEuYWNjZXNzVG9rZW4gPT09ICdzdHJpbmcnLCAnSW52YWxpZCB0b2tlbkRhdGEgcmV0dXJuZWQgZnJvbSBnZXRUb2tlbigpOicgKyB0b2tlbkRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT0F1dGhUb2tlbih0b2tlbkRhdGEuYWNjZXNzVG9rZW4sIF90aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlyZWJhc2VDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5pbnZhbGlkYXRlVG9rZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIEZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuc2V0Q2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoY2hhbmdlTGlzdGVuZXIpIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMuY2hhbmdlTGlzdGVuZXIsICdDYW4gb25seSBjYWxsIHNldENoYW5nZUxpc3RlbmVyKCkgb25jZS4nKTtcclxuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gY2hhbmdlTGlzdGVuZXI7XHJcbiAgICAgICAgLy8gRmlyZSB0aGUgaW5pdGlhbCBldmVudFxyXG4gICAgICAgIGlmICh0aGlzLnJlY2VpdmVkSW5pdGlhbFVzZXIpIHtcclxuICAgICAgICAgICAgY2hhbmdlTGlzdGVuZXIodGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMudG9rZW5MaXN0ZW5lciAhPSBudWxsLCAncmVtb3ZlQ2hhbmdlTGlzdGVuZXIoKSBjYWxsZWQgdHdpY2UnKTtcclxuICAgICAgICBhc3NlcnQodGhpcy5jaGFuZ2VMaXN0ZW5lciAhPT0gbnVsbCwgJ3JlbW92ZUNoYW5nZUxpc3RlbmVyKCkgY2FsbGVkIHdoZW4gbm8gbGlzdGVuZXIgcmVnaXN0ZXJlZCcpO1xyXG4gICAgICAgIGlmICh0aGlzLmF1dGgpIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMudG9rZW5MaXN0ZW5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudG9rZW5MaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgLy8gQXV0aC5nZXRVaWQoKSBjYW4gcmV0dXJuIG51bGwgZXZlbiB3aXRoIGEgdXNlciBsb2dnZWQgaW4uIEl0IGlzIGJlY2F1c2VcclxuICAgIC8vIGdldFVpZCgpIGlzIHN5bmNocm9ub3VzLCBidXQgdGhlIGF1dGggY29kZSBwb3B1bGF0aW5nIFVpZCBpcyBhc3luY2hyb25vdXMuXHJcbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgaW4gdGhlIEF1dGhUb2tlbkxpc3RlbmVyIGNhbGxiYWNrXHJcbiAgICAvLyB0byBndWFyYW50ZWUgdG8gZ2V0IHRoZSBhY3R1YWwgdXNlci5cclxuICAgIEZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlci5wcm90b3R5cGUuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudFVpZCA9IHRoaXMuYXV0aCAmJiB0aGlzLmF1dGguZ2V0VWlkKCk7XHJcbiAgICAgICAgYXNzZXJ0KGN1cnJlbnRVaWQgPT09IG51bGwgfHwgdHlwZW9mIGN1cnJlbnRVaWQgPT09ICdzdHJpbmcnLCAnUmVjZWl2ZWQgaW52YWxpZCBVSUQ6ICcgKyBjdXJyZW50VWlkKTtcclxuICAgICAgICByZXR1cm4gbmV3IFVzZXIoY3VycmVudFVpZCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlcjtcclxufSgpKTtcclxuLypcclxuICogRmlyc3RQYXJ0eVRva2VuIHByb3ZpZGVzIGEgZnJlc2ggdG9rZW4gZWFjaCB0aW1lIGl0cyB2YWx1ZVxyXG4gKiBpcyByZXF1ZXN0ZWQsIGJlY2F1c2UgaWYgdGhlIHRva2VuIGlzIHRvbyBvbGQsIHJlcXVlc3RzIHdpbGwgYmUgcmVqZWN0ZWQuXHJcbiAqIFRlY2huaWNhbGx5IHRoaXMgbWF5IG5vIGxvbmdlciBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIFNESyBzaG91bGQgZ3JhY2VmdWxseVxyXG4gKiByZWNvdmVyIGZyb20gdW5hdXRoZW50aWNhdGVkIGVycm9ycyAoc2VlIGIvMzMxNDc4MTggZm9yIGNvbnRleHQpLCBidXQgaXQnc1xyXG4gKiBzYWZlciB0byBrZWVwIHRoZSBpbXBsZW1lbnRhdGlvbiBhcy1pcy5cclxuICovXHJcbnZhciBGaXJzdFBhcnR5VG9rZW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaXJzdFBhcnR5VG9rZW4oZ2FwaSwgc2Vzc2lvbkluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5nYXBpID0gZ2FwaTtcclxuICAgICAgICB0aGlzLnNlc3Npb25JbmRleCA9IHNlc3Npb25JbmRleDtcclxuICAgICAgICB0aGlzLnR5cGUgPSAnRmlyc3RQYXJ0eSc7XHJcbiAgICAgICAgdGhpcy51c2VyID0gVXNlci5GSVJTVF9QQVJUWTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJzdFBhcnR5VG9rZW4ucHJvdG90eXBlLCBcImF1dGhIZWFkZXJzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSB7XHJcbiAgICAgICAgICAgICAgICAnWC1Hb29nLUF1dGhVc2VyJzogdGhpcy5zZXNzaW9uSW5kZXhcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIGF1dGhIZWFkZXIgPSB0aGlzLmdhcGkuYXV0aC5nZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5KFtdKTtcclxuICAgICAgICAgICAgaWYgKGF1dGhIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGF1dGhIZWFkZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGhlYWRlcnM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gRmlyc3RQYXJ0eVRva2VuO1xyXG59KCkpO1xyXG4vKlxyXG4gKiBQcm92aWRlcyB1c2VyIGNyZWRlbnRpYWxzIHJlcXVpcmVkIGZvciB0aGUgRmlyZXN0b3JlIEphdmFTY3JpcHQgU0RLXHJcbiAqIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlciwgdXNpbmcgdGVjaG5pcXVlIHRoYXQgaXMgb25seSBhdmFpbGFibGVcclxuICogdG8gYXBwbGljYXRpb25zIGhvc3RlZCBieSBHb29nbGUuXHJcbiAqL1xyXG52YXIgRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaXJzdFBhcnR5Q3JlZGVudGlhbHNQcm92aWRlcihnYXBpLCBzZXNzaW9uSW5kZXgpIHtcclxuICAgICAgICB0aGlzLmdhcGkgPSBnYXBpO1xyXG4gICAgICAgIHRoaXMuc2Vzc2lvbkluZGV4ID0gc2Vzc2lvbkluZGV4O1xyXG4gICAgfVxyXG4gICAgRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEZpcnN0UGFydHlUb2tlbih0aGlzLmdhcGksIHRoaXMuc2Vzc2lvbkluZGV4KSk7XHJcbiAgICB9O1xyXG4gICAgRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXIucHJvdG90eXBlLnNldENoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKGNoYW5nZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdWlkLlxyXG4gICAgICAgIGNoYW5nZUxpc3RlbmVyKFVzZXIuRklSU1RfUEFSVFkpO1xyXG4gICAgfTtcclxuICAgIEZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHsgfTtcclxuICAgIEZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyLnByb3RvdHlwZS5pbnZhbGlkYXRlVG9rZW4gPSBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICByZXR1cm4gRmlyc3RQYXJ0eUNyZWRlbnRpYWxzUHJvdmlkZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBCdWlsZHMgYSBDcmVkZW50aWFsc1Byb3ZpZGVyIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZlxyXG4gKiB0aGUgY3JlZGVudGlhbHMgcGFzc2VkIGluLlxyXG4gKi9cclxuZnVuY3Rpb24gbWFrZUNyZWRlbnRpYWxzUHJvdmlkZXIoY3JlZGVudGlhbHMpIHtcclxuICAgIGlmICghY3JlZGVudGlhbHMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlcigpO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChjcmVkZW50aWFscy50eXBlKSB7XHJcbiAgICAgICAgY2FzZSAnZ2FwaSc6XHJcbiAgICAgICAgICAgIHZhciBjbGllbnQgPSBjcmVkZW50aWFscy5jbGllbnQ7XHJcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIHJlYWxseSBpcyBhIEdhcGkgY2xpZW50LlxyXG4gICAgICAgICAgICBhc3NlcnQoISEodHlwZW9mIGNsaWVudCA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICAgICAgICAgIGNsaWVudCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICAgICAgICAgY2xpZW50WydhdXRoJ10gJiZcclxuICAgICAgICAgICAgICAgIGNsaWVudFsnYXV0aCddWydnZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5J10pLCAndW5leHBlY3RlZCBnYXBpIGludGVyZmFjZScpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpcnN0UGFydHlDcmVkZW50aWFsc1Byb3ZpZGVyKGNsaWVudCwgY3JlZGVudGlhbHMuc2Vzc2lvbkluZGV4IHx8ICcwJyk7XHJcbiAgICAgICAgY2FzZSAncHJvdmlkZXInOlxyXG4gICAgICAgICAgICByZXR1cm4gY3JlZGVudGlhbHMuY2xpZW50O1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdtYWtlQ3JlZGVudGlhbHNQcm92aWRlciBmYWlsZWQgZHVlIHRvIGludmFsaWQgY3JlZGVudGlhbCB0eXBlJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGlzUGFydGlhbE9ic2VydmVyKG9iaikge1xyXG4gICAgcmV0dXJuIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgWyduZXh0JywgJ2Vycm9yJywgJ2NvbXBsZXRlJ10pO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGFuIG9iamVjdCBhbmQgY29udGFpbnMgYXQgbGVhc3Qgb25lIG9mIHRoZSBzcGVjaWZpZWRcclxuICogbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHZhciBvYmplY3QgPSBvYmo7XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIG1ldGhvZHNfMSA9IG1ldGhvZHM7IF9pIDwgbWV0aG9kc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzXzFbX2ldO1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqZWN0ICYmIHR5cGVvZiBvYmplY3RbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBbiBvcGFxdWUgYmFzZSBjbGFzcyBmb3IgRmllbGRWYWx1ZSBzZW50aW5lbCBvYmplY3RzIGluIG91ciBwdWJsaWMgQVBJLFxyXG4gKiB3aXRoIHB1YmxpYyBzdGF0aWMgbWV0aG9kcyBmb3IgY3JlYXRpbmcgc2FpZCBzZW50aW5lbCBvYmplY3RzLlxyXG4gKi9cclxudmFyIEZpZWxkVmFsdWVJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmllbGRWYWx1ZUltcGwoX21ldGhvZE5hbWUpIHtcclxuICAgICAgICB0aGlzLl9tZXRob2ROYW1lID0gX21ldGhvZE5hbWU7XHJcbiAgICB9XHJcbiAgICBGaWVsZFZhbHVlSW1wbC5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFsaWRhdGVOb0FyZ3MoJ0ZpZWxkVmFsdWUuZGVsZXRlJywgYXJndW1lbnRzKTtcclxuICAgICAgICByZXR1cm4gRGVsZXRlRmllbGRWYWx1ZUltcGwuaW5zdGFuY2U7XHJcbiAgICB9O1xyXG4gICAgRmllbGRWYWx1ZUltcGwuc2VydmVyVGltZXN0YW1wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhbGlkYXRlTm9BcmdzKCdGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCcsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgcmV0dXJuIFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsLmluc3RhbmNlO1xyXG4gICAgfTtcclxuICAgIEZpZWxkVmFsdWVJbXBsLmFycmF5VW5pb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZWxlbWVudHNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdGaWVsZFZhbHVlLmFycmF5VW5pb24nLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxyXG4gICAgICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlIG5lZWQgYWNjZXNzIHRvIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheVVuaW9uRmllbGRWYWx1ZUltcGwoZWxlbWVudHMpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkVmFsdWVJbXBsLmFycmF5UmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnRmllbGRWYWx1ZS5hcnJheVJlbW92ZScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXHJcbiAgICAgICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UgbmVlZCBhY2Nlc3MgdG8gdGhlIEZpcmVzdG9yZSBpbnN0YW5jZS5cclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwoZWxlbWVudHMpO1xyXG4gICAgfTtcclxuICAgIEZpZWxkVmFsdWVJbXBsLmluY3JlbWVudCA9IGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaWVsZFZhbHVlLmluY3JlbWVudCcsICdudW1iZXInLCAxLCBuKTtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaWVsZFZhbHVlLmluY3JlbWVudCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBOdW1lcmljSW5jcmVtZW50RmllbGRWYWx1ZUltcGwobik7XHJcbiAgICB9O1xyXG4gICAgRmllbGRWYWx1ZUltcGwucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcyA9PT0gb3RoZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpZWxkVmFsdWVJbXBsO1xyXG59KCkpO1xyXG52YXIgRGVsZXRlRmllbGRWYWx1ZUltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoRGVsZXRlRmllbGRWYWx1ZUltcGwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEZWxldGVGaWVsZFZhbHVlSW1wbCgpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgJ0ZpZWxkVmFsdWUuZGVsZXRlJykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIC8qKiBTaW5nbGV0b24gaW5zdGFuY2UuICovXHJcbiAgICBEZWxldGVGaWVsZFZhbHVlSW1wbC5pbnN0YW5jZSA9IG5ldyBEZWxldGVGaWVsZFZhbHVlSW1wbCgpO1xyXG4gICAgcmV0dXJuIERlbGV0ZUZpZWxkVmFsdWVJbXBsO1xyXG59KEZpZWxkVmFsdWVJbXBsKSk7XHJcbnZhciBTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhTZXJ2ZXJUaW1lc3RhbXBGaWVsZFZhbHVlSW1wbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsKCkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCAnRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAnKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqIFNpbmdsZXRvbiBpbnN0YW5jZS4gKi9cclxuICAgIFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsLmluc3RhbmNlID0gbmV3IFNlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsKCk7XHJcbiAgICByZXR1cm4gU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGw7XHJcbn0oRmllbGRWYWx1ZUltcGwpKTtcclxudmFyIEFycmF5VW5pb25GaWVsZFZhbHVlSW1wbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhBcnJheVVuaW9uRmllbGRWYWx1ZUltcGwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBcnJheVVuaW9uRmllbGRWYWx1ZUltcGwoX2VsZW1lbnRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ0ZpZWxkVmFsdWUuYXJyYXlVbmlvbicpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX2VsZW1lbnRzID0gX2VsZW1lbnRzO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBBcnJheVVuaW9uRmllbGRWYWx1ZUltcGw7XHJcbn0oRmllbGRWYWx1ZUltcGwpKTtcclxudmFyIEFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYi5fX2V4dGVuZHMoQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEFycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwoX2VsZW1lbnRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgJ0ZpZWxkVmFsdWUuYXJyYXlSZW1vdmUnKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9lbGVtZW50cyA9IF9lbGVtZW50cztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQXJyYXlSZW1vdmVGaWVsZFZhbHVlSW1wbDtcclxufShGaWVsZFZhbHVlSW1wbCkpO1xyXG52YXIgTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWIuX19leHRlbmRzKE51bWVyaWNJbmNyZW1lbnRGaWVsZFZhbHVlSW1wbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE51bWVyaWNJbmNyZW1lbnRGaWVsZFZhbHVlSW1wbChfb3BlcmFuZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsICdGaWVsZFZhbHVlLmluY3JlbWVudCcpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuX29wZXJhbmQgPSBfb3BlcmFuZDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsO1xyXG59KEZpZWxkVmFsdWVJbXBsKSk7XHJcbi8vIFB1YmxpYyBpbnN0YW5jZSB0aGF0IGRpc2FsbG93cyBjb25zdHJ1Y3Rpb24gYXQgcnVudGltZS4gVGhpcyBjb25zdHJ1Y3RvciBpc1xyXG4vLyB1c2VkIHdoZW4gZXhwb3J0aW5nIEZpZWxkVmFsdWVJbXBsIG9uIGZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlIGFuZCB3aWxsXHJcbi8vIGJlIGNhbGxlZCBGaWVsZFZhbHVlIHB1YmxpY2x5LiBJbnRlcm5hbGx5IHdlIHN0aWxsIHVzZSBGaWVsZFZhbHVlSW1wbCB3aGljaFxyXG4vLyBoYXMgYSB0eXBlLWNoZWNrZWQgcHJpdmF0ZSBjb25zdHJ1Y3Rvci4gTm90ZSB0aGF0IEZpZWxkVmFsdWVJbXBsIGFuZFxyXG4vLyBQdWJsaWNGaWVsZFZhbHVlIGNhbiBiZSB1c2VkIGludGVyY2hhbmdlYWJseSBpbiBpbnN0YW5jZW9mIGNoZWNrcy5cclxuLy8gRm9yIG91ciBpbnRlcm5hbCBUeXBlU2NyaXB0IGNvZGUgUHVibGljRmllbGRWYWx1ZSBkb2Vzbid0IGV4aXN0IGFzIGEgdHlwZSxcclxuLy8gYW5kIHNvIHdlIG5lZWQgdG8gdXNlIEZpZWxkVmFsdWVJbXBsIGFzIHR5cGUgYW5kIGV4cG9ydCBpdCB0b28uXHJcbnZhciBQdWJsaWNGaWVsZFZhbHVlID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShGaWVsZFZhbHVlSW1wbCwgJ1VzZSBGaWVsZFZhbHVlLjxmaWVsZD4oKSBpbnN0ZWFkLicpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFJFU0VSVkVEX0ZJRUxEX1JFR0VYID0gL15fXy4qX18kLztcclxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBkb2N1bWVudCBkYXRhIChlLmcuIGZvciBhIHNldERhdGEgY2FsbCkuICovXHJcbnZhciBQYXJzZWRTZXREYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGFyc2VkU2V0RGF0YShkYXRhLCBmaWVsZE1hc2ssIGZpZWxkVHJhbnNmb3Jtcykge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5maWVsZE1hc2sgPSBmaWVsZE1hc2s7XHJcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBmaWVsZFRyYW5zZm9ybXM7XHJcbiAgICB9XHJcbiAgICBQYXJzZWRTZXREYXRhLnByb3RvdHlwZS50b011dGF0aW9ucyA9IGZ1bmN0aW9uIChrZXksIHByZWNvbmRpdGlvbikge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnMgPSBbXTtcclxuICAgICAgICBpZiAodGhpcy5maWVsZE1hc2sgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgbXV0YXRpb25zLnB1c2gobmV3IFBhdGNoTXV0YXRpb24oa2V5LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBwcmVjb25kaXRpb24pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5wdXNoKG5ldyBTZXRNdXRhdGlvbihrZXksIHRoaXMuZGF0YSwgcHJlY29uZGl0aW9uKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5wdXNoKG5ldyBUcmFuc2Zvcm1NdXRhdGlvbihrZXksIHRoaXMuZmllbGRUcmFuc2Zvcm1zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBhcnNlZFNldERhdGE7XHJcbn0oKSk7XHJcbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgXCJ1cGRhdGVcIiBkYXRhIChpLmUuIGZvciBhbiB1cGRhdGVEYXRhIGNhbGwpLiAqL1xyXG52YXIgUGFyc2VkVXBkYXRlRGF0YSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBhcnNlZFVwZGF0ZURhdGEoZGF0YSwgZmllbGRNYXNrLCBmaWVsZFRyYW5zZm9ybXMpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuZmllbGRNYXNrID0gZmllbGRNYXNrO1xyXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gZmllbGRUcmFuc2Zvcm1zO1xyXG4gICAgfVxyXG4gICAgUGFyc2VkVXBkYXRlRGF0YS5wcm90b3R5cGUudG9NdXRhdGlvbnMgPSBmdW5jdGlvbiAoa2V5LCBwcmVjb25kaXRpb24pIHtcclxuICAgICAgICB2YXIgbXV0YXRpb25zID0gW1xyXG4gICAgICAgICAgICBuZXcgUGF0Y2hNdXRhdGlvbihrZXksIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIHByZWNvbmRpdGlvbilcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmICh0aGlzLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5wdXNoKG5ldyBUcmFuc2Zvcm1NdXRhdGlvbihrZXksIHRoaXMuZmllbGRUcmFuc2Zvcm1zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBhcnNlZFVwZGF0ZURhdGE7XHJcbn0oKSk7XHJcbi8qXHJcbiAqIFJlcHJlc2VudHMgd2hhdCB0eXBlIG9mIEFQSSBtZXRob2QgcHJvdmlkZWQgdGhlIGRhdGEgYmVpbmcgcGFyc2VkOyB1c2VmdWxcclxuICogZm9yIGRldGVybWluaW5nIHdoaWNoIGVycm9yIGNvbmRpdGlvbnMgYXBwbHkgZHVyaW5nIHBhcnNpbmcgYW5kIHByb3ZpZGluZ1xyXG4gKiBiZXR0ZXIgZXJyb3IgbWVzc2FnZXMuXHJcbiAqL1xyXG52YXIgVXNlckRhdGFTb3VyY2U7XHJcbihmdW5jdGlvbiAoVXNlckRhdGFTb3VyY2UpIHtcclxuICAgIFVzZXJEYXRhU291cmNlW1VzZXJEYXRhU291cmNlW1wiU2V0XCJdID0gMF0gPSBcIlNldFwiO1xyXG4gICAgVXNlckRhdGFTb3VyY2VbVXNlckRhdGFTb3VyY2VbXCJVcGRhdGVcIl0gPSAxXSA9IFwiVXBkYXRlXCI7XHJcbiAgICBVc2VyRGF0YVNvdXJjZVtVc2VyRGF0YVNvdXJjZVtcIk1lcmdlU2V0XCJdID0gMl0gPSBcIk1lcmdlU2V0XCI7XHJcbiAgICAvKipcclxuICAgICAqIEluZGljYXRlcyB0aGUgc291cmNlIGlzIGEgd2hlcmUgY2xhdXNlLCBjdXJzb3IgYm91bmQsIGFycmF5VW5pb24oKVxyXG4gICAgICogZWxlbWVudCwgZXRjLiBPZiBub3RlLCBpc1dyaXRlKHNvdXJjZSkgd2lsbCByZXR1cm4gZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIFVzZXJEYXRhU291cmNlW1VzZXJEYXRhU291cmNlW1wiQXJndW1lbnRcIl0gPSAzXSA9IFwiQXJndW1lbnRcIjtcclxuICAgIC8qKlxyXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHNvdXJjZSBpcyBhbiBBcmd1bWVudCB0aGF0IG1heSBkaXJlY3RseSBjb250YWluIG5lc3RlZFxyXG4gICAgICogYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxyXG4gICAgICovXHJcbiAgICBVc2VyRGF0YVNvdXJjZVtVc2VyRGF0YVNvdXJjZVtcIkFycmF5QXJndW1lbnRcIl0gPSA0XSA9IFwiQXJyYXlBcmd1bWVudFwiO1xyXG59KShVc2VyRGF0YVNvdXJjZSB8fCAoVXNlckRhdGFTb3VyY2UgPSB7fSkpO1xyXG5mdW5jdGlvbiBpc1dyaXRlKGRhdGFTb3VyY2UpIHtcclxuICAgIHN3aXRjaCAoZGF0YVNvdXJjZSkge1xyXG4gICAgICAgIGNhc2UgVXNlckRhdGFTb3VyY2UuU2V0OiAvLyBmYWxsIHRocm91Z2hcclxuICAgICAgICBjYXNlIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0OiAvLyBmYWxsIHRocm91Z2hcclxuICAgICAgICBjYXNlIFVzZXJEYXRhU291cmNlLlVwZGF0ZTpcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgY2FzZSBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudDpcclxuICAgICAgICBjYXNlIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBmYWlsKFwiVW5leHBlY3RlZCBjYXNlIGZvciBVc2VyRGF0YVNvdXJjZTogXCIgKyBkYXRhU291cmNlKTtcclxuICAgIH1cclxufVxyXG4vKiogQSBcImNvbnRleHRcIiBvYmplY3QgcGFzc2VkIGFyb3VuZCB3aGlsZSBwYXJzaW5nIHVzZXIgZGF0YS4gKi9cclxudmFyIFBhcnNlQ29udGV4dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkYXRhU291cmNlIEluZGljYXRlcyB3aGF0IGtpbmQgb2YgQVBJIG1ldGhvZCB0aGlzIGRhdGEgY2FtZSBmcm9tLlxyXG4gICAgICogQHBhcmFtIG1ldGhvZE5hbWUgVGhlIG5hbWUgb2YgdGhlIG1ldGhvZCB0aGUgdXNlciBjYWxsZWQgdG8gY3JlYXRlIHRoaXNcclxuICAgICAqICAgICBQYXJzZUNvbnRleHQuXHJcbiAgICAgKiBAcGFyYW0gcGF0aCBBIHBhdGggd2l0aGluIHRoZSBvYmplY3QgYmVpbmcgcGFyc2VkLiBUaGlzIGNvdWxkIGJlIGFuIGVtcHR5XHJcbiAgICAgKiAgICAgcGF0aCAoaW4gd2hpY2ggY2FzZSB0aGUgY29udGV4dCByZXByZXNlbnRzIHRoZSByb290IG9mIHRoZSBkYXRhIGJlaW5nXHJcbiAgICAgKiAgICAgcGFyc2VkKSwgb3IgYSBub25lbXB0eSBwYXRoIChpbmRpY2F0aW5nIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgYSBuZXN0ZWRcclxuICAgICAqICAgICBsb2NhdGlvbiB3aXRoaW4gdGhlIGRhdGEpLlxyXG4gICAgICogQHBhcmFtIGFycmF5RWxlbWVudCBXaGV0aGVyIG9yIG5vdCB0aGlzIGNvbnRleHQgY29ycmVzcG9uZHMgdG8gYW4gZWxlbWVudFxyXG4gICAgICogICAgIG9mIGFuIGFycmF5LlxyXG4gICAgICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCB0cmFuc2Zvcm1zIGVuY291bnRlcmVkIHdoaWxlXHJcbiAgICAgKiAgICAgcGFyc2luZyB0aGUgZGF0YS5cclxuICAgICAqIEBwYXJhbSBmaWVsZE1hc2sgQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgcGF0aHMgZW5jb3VudGVyZWQgd2hpbGUgcGFyc2luZ1xyXG4gICAgICogICAgIHRoZSBkYXRhLlxyXG4gICAgICpcclxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxyXG4gICAgICogbnVsbCB0byBpbmRpY2F0ZSB0aGUgY29udGV4dCByZXByZXNlbnRzIGFueSBsb2NhdGlvbiB3aXRoaW4gYW4gYXJyYXkgKGluXHJcbiAgICAgKiB3aGljaCBjYXNlIGNlcnRhaW4gZmVhdHVyZXMgd2lsbCBub3Qgd29yayBhbmQgZXJyb3JzIHdpbGwgYmUgc29tZXdoYXRcclxuICAgICAqIGNvbXByb21pc2VkKS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gUGFyc2VDb250ZXh0KGRhdGFTb3VyY2UsIG1ldGhvZE5hbWUsIHBhdGgsIGFycmF5RWxlbWVudCwgZmllbGRUcmFuc2Zvcm1zLCBmaWVsZE1hc2spIHtcclxuICAgICAgICB0aGlzLmRhdGFTb3VyY2UgPSBkYXRhU291cmNlO1xyXG4gICAgICAgIHRoaXMubWV0aG9kTmFtZSA9IG1ldGhvZE5hbWU7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLmFycmF5RWxlbWVudCA9IGFycmF5RWxlbWVudDtcclxuICAgICAgICAvLyBNaW5vciBoYWNrOiBJZiBmaWVsZFRyYW5zZm9ybXMgaXMgdW5kZWZpbmVkLCB3ZSBhc3N1bWUgdGhpcyBpcyBhblxyXG4gICAgICAgIC8vIGV4dGVybmFsIGNhbGwgYW5kIHdlIG5lZWQgdG8gdmFsaWRhdGUgdGhlIGVudGlyZSBwYXRoLlxyXG4gICAgICAgIGlmIChmaWVsZFRyYW5zZm9ybXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlUGF0aCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFycmF5RWxlbWVudCA9IGFycmF5RWxlbWVudCAhPT0gdW5kZWZpbmVkID8gYXJyYXlFbGVtZW50IDogZmFsc2U7XHJcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBmaWVsZFRyYW5zZm9ybXMgfHwgW107XHJcbiAgICAgICAgdGhpcy5maWVsZE1hc2sgPSBmaWVsZE1hc2sgfHwgW107XHJcbiAgICB9XHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLmNoaWxkQ29udGV4dEZvckZpZWxkID0gZnVuY3Rpb24gKGZpZWxkKSB7XHJcbiAgICAgICAgdmFyIGNoaWxkUGF0aCA9IHRoaXMucGF0aCA9PSBudWxsID8gbnVsbCA6IHRoaXMucGF0aC5jaGlsZChmaWVsZCk7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KHRoaXMuZGF0YVNvdXJjZSwgdGhpcy5tZXRob2ROYW1lLCBjaGlsZFBhdGgsIFxyXG4gICAgICAgIC8qYXJyYXlFbGVtZW50PSovIGZhbHNlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcywgdGhpcy5maWVsZE1hc2spO1xyXG4gICAgICAgIGNvbnRleHQudmFsaWRhdGVQYXRoU2VnbWVudChmaWVsZCk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XHJcbiAgICB9O1xyXG4gICAgUGFyc2VDb250ZXh0LnByb3RvdHlwZS5jaGlsZENvbnRleHRGb3JGaWVsZFBhdGggPSBmdW5jdGlvbiAoZmllbGQpIHtcclxuICAgICAgICB2YXIgY2hpbGRQYXRoID0gdGhpcy5wYXRoID09IG51bGwgPyBudWxsIDogdGhpcy5wYXRoLmNoaWxkKGZpZWxkKTtcclxuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQodGhpcy5kYXRhU291cmNlLCB0aGlzLm1ldGhvZE5hbWUsIGNoaWxkUGF0aCwgXHJcbiAgICAgICAgLyphcnJheUVsZW1lbnQ9Ki8gZmFsc2UsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XHJcbiAgICAgICAgY29udGV4dC52YWxpZGF0ZVBhdGgoKTtcclxuICAgICAgICByZXR1cm4gY29udGV4dDtcclxuICAgIH07XHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLmNoaWxkQ29udGV4dEZvckFycmF5ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3c7IHNvIG1ha2UgcGF0aFxyXG4gICAgICAgIC8vIG51bGwuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJzZUNvbnRleHQodGhpcy5kYXRhU291cmNlLCB0aGlzLm1ldGhvZE5hbWUsIFxyXG4gICAgICAgIC8qcGF0aD0qLyBudWxsLCBcclxuICAgICAgICAvKmFycmF5RWxlbWVudD0qLyB0cnVlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcywgdGhpcy5maWVsZE1hc2spO1xyXG4gICAgfTtcclxuICAgIFBhcnNlQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlRXJyb3IgPSBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkRGVzY3JpcHRpb24gPSB0aGlzLnBhdGggPT09IG51bGwgfHwgdGhpcy5wYXRoLmlzRW1wdHkoKVxyXG4gICAgICAgICAgICA/ICcnXHJcbiAgICAgICAgICAgIDogXCIgKGZvdW5kIGluIGZpZWxkIFwiICsgdGhpcy5wYXRoLnRvU3RyaW5nKCkgKyBcIilcIjtcclxuICAgICAgICByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIHRoaXMubWV0aG9kTmFtZSArIFwiKCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhLiBcIiArXHJcbiAgICAgICAgICAgIHJlYXNvbiArXHJcbiAgICAgICAgICAgIGZpZWxkRGVzY3JpcHRpb24pO1xyXG4gICAgfTtcclxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiAnZmllbGRQYXRoJyB3YXMgdHJhdmVyc2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBjb250ZXh0LiAqL1xyXG4gICAgUGFyc2VDb250ZXh0LnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChmaWVsZFBhdGgpIHtcclxuICAgICAgICByZXR1cm4gKHRoaXMuZmllbGRNYXNrLmZpbmQoZnVuY3Rpb24gKGZpZWxkKSB7IHJldHVybiBmaWVsZFBhdGguaXNQcmVmaXhPZihmaWVsZCk7IH0pICE9PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMuZmluZChmdW5jdGlvbiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRQYXRoLmlzUHJlZml4T2YodHJhbnNmb3JtLmZpZWxkKTtcclxuICAgICAgICAgICAgfSkgIT09IHVuZGVmaW5lZCk7XHJcbiAgICB9O1xyXG4gICAgUGFyc2VDb250ZXh0LnByb3RvdHlwZS52YWxpZGF0ZVBhdGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogUmVtb3ZlIG51bGwgY2hlY2sgb25jZSB3ZSBoYXZlIHByb3BlciBwYXRocyBmb3IgZmllbGRzXHJcbiAgICAgICAgLy8gd2l0aGluIGFycmF5cy5cclxuICAgICAgICBpZiAodGhpcy5wYXRoID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhdGgubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVBhdGhTZWdtZW50KHRoaXMucGF0aC5nZXQoaSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQYXJzZUNvbnRleHQucHJvdG90eXBlLnZhbGlkYXRlUGF0aFNlZ21lbnQgPSBmdW5jdGlvbiAoc2VnbWVudCkge1xyXG4gICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyB0aGlzLmNyZWF0ZUVycm9yKCdEb2N1bWVudCBmaWVsZHMgbXVzdCBub3QgYmUgZW1wdHknKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzV3JpdGUodGhpcy5kYXRhU291cmNlKSAmJiBSRVNFUlZFRF9GSUVMRF9SRUdFWC50ZXN0KHNlZ21lbnQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IHRoaXMuY3JlYXRlRXJyb3IoJ0RvY3VtZW50IGZpZWxkcyBjYW5ub3QgYmVnaW4gYW5kIGVuZCB3aXRoIFwiX19cIicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gUGFyc2VDb250ZXh0O1xyXG59KCkpO1xyXG4vKipcclxuICogQSBwbGFjZWhvbGRlciBvYmplY3QgZm9yIERvY3VtZW50UmVmZXJlbmNlcyBpbiB0aGlzIGZpbGUsIGluIG9yZGVyIHRvXHJcbiAqIGF2b2lkIGEgY2lyY3VsYXIgZGVwZW5kZW5jeS4gU2VlIHRoZSBjb21tZW50cyBmb3IgYERhdGFQcmVDb252ZXJ0ZXJgIGZvclxyXG4gKiB0aGUgZnVsbCBjb250ZXh0LlxyXG4gKi9cclxudmFyIERvY3VtZW50S2V5UmVmZXJlbmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRLZXlSZWZlcmVuY2UoZGF0YWJhc2VJZCwga2V5KSB7XHJcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gZGF0YWJhc2VJZDtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgIH1cclxuICAgIHJldHVybiBEb2N1bWVudEtleVJlZmVyZW5jZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIEhlbHBlciBmb3IgcGFyc2luZyByYXcgdXNlciBpbnB1dCAocHJvdmlkZWQgdmlhIHRoZSBBUEkpIGludG8gaW50ZXJuYWwgbW9kZWxcclxuICogY2xhc3Nlcy5cclxuICovXHJcbnZhciBVc2VyRGF0YUNvbnZlcnRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFVzZXJEYXRhQ29udmVydGVyKHByZUNvbnZlcnRlcikge1xyXG4gICAgICAgIHRoaXMucHJlQ29udmVydGVyID0gcHJlQ29udmVydGVyO1xyXG4gICAgfVxyXG4gICAgLyoqIFBhcnNlIGRvY3VtZW50IGRhdGEgZnJvbSBhIG5vbi1tZXJnZSBzZXQoKSBjYWxsLiAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlU2V0RGF0YSA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBpbnB1dCkge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dChVc2VyRGF0YVNvdXJjZS5TZXQsIG1ldGhvZE5hbWUsIEZpZWxkUGF0aC5FTVBUWV9QQVRIKTtcclxuICAgICAgICB2YWxpZGF0ZVBsYWluT2JqZWN0KCdEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOicsIGNvbnRleHQsIGlucHV0KTtcclxuICAgICAgICB2YXIgdXBkYXRlRGF0YSA9IHRoaXMucGFyc2VEYXRhKGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICByZXR1cm4gbmV3IFBhcnNlZFNldERhdGEodXBkYXRlRGF0YSwgXHJcbiAgICAgICAgLyogZmllbGRNYXNrPSAqLyBudWxsLCBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqIFBhcnNlIGRvY3VtZW50IGRhdGEgZnJvbSBhIHNldCgpIGNhbGwgd2l0aCAne21lcmdlOnRydWV9Jy4gKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZU1lcmdlRGF0YSA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBpbnB1dCwgZmllbGRQYXRocykge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dChVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCwgbWV0aG9kTmFtZSwgRmllbGRQYXRoLkVNUFRZX1BBVEgpO1xyXG4gICAgICAgIHZhbGlkYXRlUGxhaW5PYmplY3QoJ0RhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6JywgY29udGV4dCwgaW5wdXQpO1xyXG4gICAgICAgIHZhciB1cGRhdGVEYXRhID0gdGhpcy5wYXJzZURhdGEoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgIHZhciBmaWVsZE1hc2s7XHJcbiAgICAgICAgdmFyIGZpZWxkVHJhbnNmb3JtcztcclxuICAgICAgICBpZiAoIWZpZWxkUGF0aHMpIHtcclxuICAgICAgICAgICAgZmllbGRNYXNrID0gRmllbGRNYXNrLmZyb21BcnJheShjb250ZXh0LmZpZWxkTWFzayk7XHJcbiAgICAgICAgICAgIGZpZWxkVHJhbnNmb3JtcyA9IGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHZhbGlkYXRlZEZpZWxkUGF0aHMgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aC5jb21wYXJhdG9yKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBmaWVsZFBhdGhzXzEgPSBmaWVsZFBhdGhzOyBfaSA8IGZpZWxkUGF0aHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdHJpbmdPckZpZWxkUGF0aCA9IGZpZWxkUGF0aHNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgZmllbGRQYXRoID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0cmluZ09yRmllbGRQYXRoIGluc3RhbmNlb2YgRmllbGRQYXRoJDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFBhdGggPSBzdHJpbmdPckZpZWxkUGF0aC5faW50ZXJuYWxQYXRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHN0cmluZ09yRmllbGRQYXRoID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkUGF0aCA9IGZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcobWV0aG9kTmFtZSwgc3RyaW5nT3JGaWVsZFBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZmFpbCgnRXhwZWN0ZWQgc3RyaW5nT3JGaWVsZFBhdGggdG8gYmUgYSBzdHJpbmcgb3IgYSBGaWVsZFBhdGgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghY29udGV4dC5jb250YWlucyhmaWVsZFBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGaWVsZCAnXCIgKyBmaWVsZFBhdGggKyBcIicgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZWRGaWVsZFBhdGhzID0gdmFsaWRhdGVkRmllbGRQYXRocy5hZGQoZmllbGRQYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaWVsZE1hc2sgPSBGaWVsZE1hc2suZnJvbVNldCh2YWxpZGF0ZWRGaWVsZFBhdGhzKTtcclxuICAgICAgICAgICAgZmllbGRUcmFuc2Zvcm1zID0gY29udGV4dC5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKGZ1bmN0aW9uICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZE1hc2suY292ZXJzKHRyYW5zZm9ybS5maWVsZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFBhcnNlZFNldERhdGEodXBkYXRlRGF0YSwgZmllbGRNYXNrLCBmaWVsZFRyYW5zZm9ybXMpO1xyXG4gICAgfTtcclxuICAgIC8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGFuIHVwZGF0ZSgpIGNhbGwuICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VVcGRhdGVEYXRhID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGlucHV0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBQYXJzZUNvbnRleHQoVXNlckRhdGFTb3VyY2UuVXBkYXRlLCBtZXRob2ROYW1lLCBGaWVsZFBhdGguRU1QVFlfUEFUSCk7XHJcbiAgICAgICAgdmFsaWRhdGVQbGFpbk9iamVjdCgnRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczonLCBjb250ZXh0LCBpbnB1dCk7XHJcbiAgICAgICAgdmFyIGZpZWxkTWFza1BhdGhzID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGguY29tcGFyYXRvcik7XHJcbiAgICAgICAgdmFyIHVwZGF0ZURhdGEgPSBPYmplY3RWYWx1ZS5FTVBUWTtcclxuICAgICAgICBmb3JFYWNoKGlucHV0LCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IGZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcobWV0aG9kTmFtZSwga2V5KTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkQ29udGV4dCA9IGNvbnRleHQuY2hpbGRDb250ZXh0Rm9yRmllbGRQYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IF90aGlzLnJ1blByZUNvbnZlcnRlcih2YWx1ZSwgY2hpbGRDb250ZXh0KTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGVsZXRlRmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxyXG4gICAgICAgICAgICAgICAgZmllbGRNYXNrUGF0aHMgPSBmaWVsZE1hc2tQYXRocy5hZGQocGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkVmFsdWUgPSBfdGhpcy5wYXJzZURhdGEodmFsdWUsIGNoaWxkQ29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkVmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTWFza1BhdGhzID0gZmllbGRNYXNrUGF0aHMuYWRkKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZURhdGEgPSB1cGRhdGVEYXRhLnNldChwYXRoLCBwYXJzZWRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbWFzayA9IEZpZWxkTWFzay5mcm9tU2V0KGZpZWxkTWFza1BhdGhzKTtcclxuICAgICAgICByZXR1cm4gbmV3IFBhcnNlZFVwZGF0ZURhdGEodXBkYXRlRGF0YSwgbWFzaywgY29udGV4dC5maWVsZFRyYW5zZm9ybXMpO1xyXG4gICAgfTtcclxuICAgIC8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovXHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VVcGRhdGVWYXJhcmdzID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGZpZWxkLCB2YWx1ZSwgbW9yZUZpZWxkc0FuZFZhbHVlcykge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dChVc2VyRGF0YVNvdXJjZS5VcGRhdGUsIG1ldGhvZE5hbWUsIEZpZWxkUGF0aC5FTVBUWV9QQVRIKTtcclxuICAgICAgICB2YXIga2V5cyA9IFtmaWVsZFBhdGhGcm9tQXJndW1lbnQobWV0aG9kTmFtZSwgZmllbGQpXTtcclxuICAgICAgICB2YXIgdmFsdWVzID0gW3ZhbHVlXTtcclxuICAgICAgICBpZiAobW9yZUZpZWxkc0FuZFZhbHVlcy5sZW5ndGggJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiRnVuY3Rpb24gXCIgKyBtZXRob2ROYW1lICsgXCIoKSBuZWVkcyB0byBiZSBjYWxsZWQgd2l0aCBhbiBldmVuIG51bWJlciBcIiArXHJcbiAgICAgICAgICAgICAgICAnb2YgYXJndW1lbnRzIHRoYXQgYWx0ZXJuYXRlIGJldHdlZW4gZmllbGQgbmFtZXMgYW5kIHZhbHVlcy4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb3JlRmllbGRzQW5kVmFsdWVzLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIGtleXMucHVzaChmaWVsZFBhdGhGcm9tQXJndW1lbnQobWV0aG9kTmFtZSwgbW9yZUZpZWxkc0FuZFZhbHVlc1tpXSkpO1xyXG4gICAgICAgICAgICB2YWx1ZXMucHVzaChtb3JlRmllbGRzQW5kVmFsdWVzW2kgKyAxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmaWVsZE1hc2tQYXRocyA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoLmNvbXBhcmF0b3IpO1xyXG4gICAgICAgIHZhciB1cGRhdGVEYXRhID0gT2JqZWN0VmFsdWUuRU1QVFk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgdmFyIGNoaWxkQ29udGV4dCA9IGNvbnRleHQuY2hpbGRDb250ZXh0Rm9yRmllbGRQYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVfMSA9IHRoaXMucnVuUHJlQ29udmVydGVyKHZhbHVlc1tpXSwgY2hpbGRDb250ZXh0KTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlXzEgaW5zdGFuY2VvZiBEZWxldGVGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXHJcbiAgICAgICAgICAgICAgICBmaWVsZE1hc2tQYXRocyA9IGZpZWxkTWFza1BhdGhzLmFkZChwYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJzZWRWYWx1ZSA9IHRoaXMucGFyc2VEYXRhKHZhbHVlXzEsIGNoaWxkQ29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkVmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkTWFza1BhdGhzID0gZmllbGRNYXNrUGF0aHMuYWRkKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZURhdGEgPSB1cGRhdGVEYXRhLnNldChwYXRoLCBwYXJzZWRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1hc2sgPSBGaWVsZE1hc2suZnJvbVNldChmaWVsZE1hc2tQYXRocyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJzZWRVcGRhdGVEYXRhKHVwZGF0ZURhdGEsIG1hc2ssIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlIGEgXCJxdWVyeSB2YWx1ZVwiIChlLmcuIHZhbHVlIGluIGEgd2hlcmUgZmlsdGVyIG9yIGEgdmFsdWUgaW4gYSBjdXJzb3JcclxuICAgICAqIGJvdW5kKS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWxsb3dBcnJheXMgV2hldGhlciB0aGUgcXVlcnkgdmFsdWUgaXMgYW4gYXJyYXkgdGhhdCBtYXkgZGlyZWN0bHlcclxuICAgICAqIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXHJcbiAgICAgKi9cclxuICAgIFVzZXJEYXRhQ29udmVydGVyLnByb3RvdHlwZS5wYXJzZVF1ZXJ5VmFsdWUgPSBmdW5jdGlvbiAobWV0aG9kTmFtZSwgaW5wdXQsIGFsbG93QXJyYXlzKSB7XHJcbiAgICAgICAgaWYgKGFsbG93QXJyYXlzID09PSB2b2lkIDApIHsgYWxsb3dBcnJheXMgPSBmYWxzZTsgfVxyXG4gICAgICAgIHZhciBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dChhbGxvd0FycmF5cyA/IFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgOiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCwgbWV0aG9kTmFtZSwgRmllbGRQYXRoLkVNUFRZX1BBVEgpO1xyXG4gICAgICAgIHZhciBwYXJzZWQgPSB0aGlzLnBhcnNlRGF0YShpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgYXNzZXJ0KHBhcnNlZCAhPSBudWxsLCAnUGFyc2VkIGRhdGEgc2hvdWxkIG5vdCBiZSBudWxsLicpO1xyXG4gICAgICAgIGFzc2VydChjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggPT09IDAsICdGaWVsZCB0cmFuc2Zvcm1zIHNob3VsZCBoYXZlIGJlZW4gZGlzYWxsb3dlZC4nKTtcclxuICAgICAgICByZXR1cm4gcGFyc2VkO1xyXG4gICAgfTtcclxuICAgIC8qKiBTZW5kcyBkYXRhIHRocm91Z2ggdGhpcy5wcmVDb252ZXJ0ZXIsIGhhbmRsaW5nIGFueSB0aHJvd24gZXJyb3JzLiAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnJ1blByZUNvbnZlcnRlciA9IGZ1bmN0aW9uIChpbnB1dCwgY29udGV4dCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByZUNvbnZlcnRlcihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gZXJyb3JNZXNzYWdlKGUpO1xyXG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGhlbHBlciBmb3IgcGFyc2luZyB1c2VyIGRhdGEuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IERhdGEgdG8gYmUgcGFyc2VkLlxyXG4gICAgICogQHBhcmFtIGNvbnRleHQgQSBjb250ZXh0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcGF0aCBiZWluZyBwYXJzZWQsXHJcbiAgICAgKiB0aGUgc291cmNlIG9mIHRoZSBkYXRhIGJlaW5nIHBhcnNlZCwgZXRjLlxyXG4gICAgICogQHJldHVybiBUaGUgcGFyc2VkIHZhbHVlLCBvciBudWxsIGlmIHRoZSB2YWx1ZSB3YXMgYSBGaWVsZFZhbHVlIHNlbnRpbmVsXHJcbiAgICAgKiB0aGF0IHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBwYXJzZWQgZGF0YS5cclxuICAgICAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlRGF0YSA9IGZ1bmN0aW9uIChpbnB1dCwgY29udGV4dCkge1xyXG4gICAgICAgIGlucHV0ID0gdGhpcy5ydW5QcmVDb252ZXJ0ZXIoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgIGlmIChsb29rc0xpa2VKc29uT2JqZWN0KGlucHV0KSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZVBsYWluT2JqZWN0KCdVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTonLCBjb250ZXh0LCBpbnB1dCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlT2JqZWN0KGlucHV0LCBjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaW5wdXQgaW5zdGFuY2VvZiBGaWVsZFZhbHVlSW1wbCkge1xyXG4gICAgICAgICAgICAvLyBGaWVsZFZhbHVlcyB1c3VhbGx5IHBhcnNlIGludG8gdHJhbnNmb3JtcyAoZXhjZXB0IEZpZWxkVmFsdWUuZGVsZXRlKCkpXHJcbiAgICAgICAgICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxyXG4gICAgICAgICAgICAvLyAoYXMgZG9pbmcgc28gd2lsbCBvdmVyd3JpdGUgdGhlIGZpZWxkIGRpcmVjdGx5IHByaW9yIHRvIHRoZSB0cmFuc2Zvcm1cclxuICAgICAgICAgICAgLy8gdHJ5aW5nIHRvIHRyYW5zZm9ybSBpdCkuIFNvIHdlIGRvbid0IGFkZCB0aGlzIGxvY2F0aW9uIHRvXHJcbiAgICAgICAgICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXHJcbiAgICAgICAgICAgIHRoaXMucGFyc2VTZW50aW5lbEZpZWxkVmFsdWUoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIGNvbnRleHQucGF0aCBpcyBudWxsIHdlIGFyZSBpbnNpZGUgYW4gYXJyYXkgYW5kIHdlIGRvbid0IHN1cHBvcnRcclxuICAgICAgICAgICAgLy8gZmllbGQgbWFzayBwYXRocyBtb3JlIGdyYW51bGFyIHRoYW4gdGhlIHRvcC1sZXZlbCBhcnJheS5cclxuICAgICAgICAgICAgaWYgKGNvbnRleHQucGF0aCkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5maWVsZE1hc2sucHVzaChjb250ZXh0LnBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBJbmNsdWRlIHRoZSBwYXRoIGNvbnRhaW5pbmcgdGhlIGFycmF5IGluIHRoZSBlcnJvclxyXG4gICAgICAgICAgICAgICAgLy8gbWVzc2FnZS5cclxuICAgICAgICAgICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgc2V0IG9mIHZhbHVlcyB0byBiZSBpbmNsdWRlZCBmb3IgdGhlIElOIHF1ZXJ5KSB0aGF0IG1heSBkaXJlY3RseVxyXG4gICAgICAgICAgICAgICAgLy8gY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZWFjaCByZXByZXNlbnRpbmcgYW4gaW5kaXZpZHVhbCBmaWVsZFxyXG4gICAgICAgICAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cclxuICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LmFycmF5RWxlbWVudCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZGF0YVNvdXJjZSAhPT0gVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IoJ05lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlQXJyYXkoaW5wdXQsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTY2FsYXJWYWx1ZShpbnB1dCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlT2JqZWN0ID0gZnVuY3Rpb24gKG9iaiwgY29udGV4dCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTb3J0ZWRNYXAocHJpbWl0aXZlQ29tcGFyYXRvcik7XHJcbiAgICAgICAgaWYgKGlzRW1wdHkob2JqKSkge1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZW1wdHkgb2JqZWN0LCB3ZSBleHBsaWNpdGx5IGFkZCBpdCB0byB0aGUgdXBkYXRlXHJcbiAgICAgICAgICAgIC8vIG1hc2sgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBjcmVhdGVzIGEgbWFwIGVudHJ5LlxyXG4gICAgICAgICAgICBpZiAoY29udGV4dC5wYXRoICYmIGNvbnRleHQucGF0aC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpZWxkTWFzay5wdXNoKGNvbnRleHQucGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvckVhY2gob2JqLCBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJzZWRWYWx1ZSA9IF90aGlzLnBhcnNlRGF0YSh2YWwsIGNvbnRleHQuY2hpbGRDb250ZXh0Rm9yRmllbGQoa2V5KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkVmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5pbnNlcnQoa2V5LCBwYXJzZWRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IE9iamVjdFZhbHVlKHJlc3VsdCk7XHJcbiAgICB9O1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlQXJyYXkgPSBmdW5jdGlvbiAoYXJyYXksIGNvbnRleHQpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgdmFyIGVudHJ5SW5kZXggPSAwO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgYXJyYXlfMSA9IGFycmF5OyBfaSA8IGFycmF5XzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IGFycmF5XzFbX2ldO1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VkRW50cnkgPSB0aGlzLnBhcnNlRGF0YShlbnRyeSwgY29udGV4dC5jaGlsZENvbnRleHRGb3JBcnJheShlbnRyeUluZGV4KSk7XHJcbiAgICAgICAgICAgIGlmIChwYXJzZWRFbnRyeSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBKdXN0IGluY2x1ZGUgbnVsbHMgaW4gdGhlIGFycmF5IGZvciBmaWVsZHMgYmVpbmcgcmVwbGFjZWQgd2l0aCBhXHJcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cclxuICAgICAgICAgICAgICAgIHBhcnNlZEVudHJ5ID0gTnVsbFZhbHVlLklOU1RBTkNFO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHBhcnNlZEVudHJ5KTtcclxuICAgICAgICAgICAgZW50cnlJbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IEFycmF5VmFsdWUocmVzdWx0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFwiUGFyc2VzXCIgdGhlIHByb3ZpZGVkIEZpZWxkVmFsdWVJbXBsLCBhZGRpbmcgYW55IG5lY2Vzc2FyeSB0cmFuc2Zvcm1zIHRvXHJcbiAgICAgKiBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5cclxuICAgICAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlU2VudGluZWxGaWVsZFZhbHVlID0gZnVuY3Rpb24gKHZhbHVlLCBjb250ZXh0KSB7XHJcbiAgICAgICAgLy8gU2VudGluZWxzIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIHdyaXRlcywgYW5kIG5vdCB3aXRoaW4gYXJyYXlzLlxyXG4gICAgICAgIGlmICghaXNXcml0ZShjb250ZXh0LmRhdGFTb3VyY2UpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IodmFsdWUuX21ldGhvZE5hbWUgKyBcIigpIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB1cGRhdGUoKSBhbmQgc2V0KClcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb250ZXh0LnBhdGggPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcih2YWx1ZS5fbWV0aG9kTmFtZSArIFwiKCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgRGVsZXRlRmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgaWYgKGNvbnRleHQuZGF0YVNvdXJjZSA9PT0gVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXHJcbiAgICAgICAgICAgICAgICAvLyBmaWVsZE1hc2sgc28gaXQgZ2V0cyBkZWxldGVkLlxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5maWVsZE1hc2sucHVzaChjb250ZXh0LnBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRleHQuZGF0YVNvdXJjZSA9PT0gVXNlckRhdGFTb3VyY2UuVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NlcnQoY29udGV4dC5wYXRoLmxlbmd0aCA+IDAsICdGaWVsZFZhbHVlLmRlbGV0ZSgpIGF0IHRoZSB0b3AgbGV2ZWwgc2hvdWxkIGhhdmUgYWxyZWFkeScgK1xyXG4gICAgICAgICAgICAgICAgICAgICcgYmVlbiBoYW5kbGVkLicpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgY29udGV4dC5jcmVhdGVFcnJvcignRmllbGRWYWx1ZS5kZWxldGUoKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCAnICtcclxuICAgICAgICAgICAgICAgICAgICAnb2YgeW91ciB1cGRhdGUgZGF0YScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkbid0IGVuY291bnRlciBkZWxldGUgc2VudGluZWxzIGZvciBxdWVyaWVzIG9yIG5vbi1tZXJnZSBzZXQoKSBjYWxscy5cclxuICAgICAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IoJ0ZpZWxkVmFsdWUuZGVsZXRlKCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3MgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3ttZXJnZTp0cnVlfScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgY29udGV4dC5maWVsZFRyYW5zZm9ybXMucHVzaChuZXcgRmllbGRUcmFuc2Zvcm0oY29udGV4dC5wYXRoLCBTZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0uaW5zdGFuY2UpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheVVuaW9uRmllbGRWYWx1ZUltcGwpIHtcclxuICAgICAgICAgICAgdmFyIHBhcnNlZEVsZW1lbnRzID0gdGhpcy5wYXJzZUFycmF5VHJhbnNmb3JtRWxlbWVudHModmFsdWUuX21ldGhvZE5hbWUsIHZhbHVlLl9lbGVtZW50cyk7XHJcbiAgICAgICAgICAgIHZhciBhcnJheVVuaW9uID0gbmV3IEFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24ocGFyc2VkRWxlbWVudHMpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG5ldyBGaWVsZFRyYW5zZm9ybShjb250ZXh0LnBhdGgsIGFycmF5VW5pb24pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheVJlbW92ZUZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJzZWRFbGVtZW50cyA9IHRoaXMucGFyc2VBcnJheVRyYW5zZm9ybUVsZW1lbnRzKHZhbHVlLl9tZXRob2ROYW1lLCB2YWx1ZS5fZWxlbWVudHMpO1xyXG4gICAgICAgICAgICB2YXIgYXJyYXlSZW1vdmUgPSBuZXcgQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24ocGFyc2VkRWxlbWVudHMpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG5ldyBGaWVsZFRyYW5zZm9ybShjb250ZXh0LnBhdGgsIGFycmF5UmVtb3ZlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsKSB7XHJcbiAgICAgICAgICAgIHZhciBvcGVyYW5kID0gdGhpcy5wYXJzZVF1ZXJ5VmFsdWUoJ0ZpZWxkVmFsdWUuaW5jcmVtZW50JywgdmFsdWUuX29wZXJhbmQpO1xyXG4gICAgICAgICAgICB2YXIgbnVtZXJpY0luY3JlbWVudCA9IG5ldyBOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uKG9wZXJhbmQpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG5ldyBGaWVsZFRyYW5zZm9ybShjb250ZXh0LnBhdGgsIG51bWVyaWNJbmNyZW1lbnQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZhaWwoJ1Vua25vd24gRmllbGRWYWx1ZSB0eXBlOiAnICsgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBwYXJzZWQgdmFsdWVcclxuICAgICAqL1xyXG4gICAgVXNlckRhdGFDb252ZXJ0ZXIucHJvdG90eXBlLnBhcnNlU2NhbGFyVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUsIGNvbnRleHQpIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE51bGxWYWx1ZS5JTlNUQU5DRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICBpZiAoaXNTYWZlSW50ZWdlcih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW50ZWdlclZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG91YmxlVmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuVmFsdWUub2YodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nVmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXBWYWx1ZShUaW1lc3RhbXAuZnJvbURhdGUodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBUaW1lc3RhbXApIHtcclxuICAgICAgICAgICAgLy8gRmlyZXN0b3JlIGJhY2tlbmQgdHJ1bmNhdGVzIHByZWNpc2lvbiBkb3duIHRvIG1pY3Jvc2Vjb25kcy4gVG8gZW5zdXJlXHJcbiAgICAgICAgICAgIC8vIG9mZmxpbmUgbW9kZSB3b3JrcyB0aGUgc2FtZSB3aXRoIHJlZ2FyZHMgdG8gdHJ1bmNhdGlvbiwgcGVyZm9ybSB0aGVcclxuICAgICAgICAgICAgLy8gdHJ1bmNhdGlvbiBpbW1lZGlhdGVseSB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBiYWNrZW5kIHRvIGRvIHRoYXQuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wVmFsdWUobmV3IFRpbWVzdGFtcCh2YWx1ZS5zZWNvbmRzLCBNYXRoLmZsb29yKHZhbHVlLm5hbm9zZWNvbmRzIC8gMTAwMCkgKiAxMDAwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgR2VvUG9pbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW9Qb2ludFZhbHVlKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYlZhbHVlKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBEb2N1bWVudEtleVJlZmVyZW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZlZhbHVlKHZhbHVlLmRhdGFiYXNlSWQsIHZhbHVlLmtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKFwiVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6IFwiICsgdmFsdWVEZXNjcmlwdGlvbih2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBVc2VyRGF0YUNvbnZlcnRlci5wcm90b3R5cGUucGFyc2VBcnJheVRyYW5zZm9ybUVsZW1lbnRzID0gZnVuY3Rpb24gKG1ldGhvZE5hbWUsIGVsZW1lbnRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZWxlbWVudHMubWFwKGZ1bmN0aW9uIChlbGVtZW50LCBpKSB7XHJcbiAgICAgICAgICAgIC8vIEFsdGhvdWdoIGFycmF5IHRyYW5zZm9ybXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIHRoZSBhY3R1YWwgZWxlbWVudHNcclxuICAgICAgICAgICAgLy8gYmVpbmcgdW5pb25lZCBvciByZW1vdmVkIGFyZSBub3QgY29uc2lkZXJlZCB3cml0ZXMgc2luY2UgdGhleSBjYW5ub3RcclxuICAgICAgICAgICAgLy8gY29udGFpbiBhbnkgRmllbGRWYWx1ZSBzZW50aW5lbHMsIGV0Yy5cclxuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KFVzZXJEYXRhU291cmNlLkFyZ3VtZW50LCBtZXRob2ROYW1lLCBGaWVsZFBhdGguRU1QVFlfUEFUSCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5wYXJzZURhdGEoZWxlbWVudCwgY29udGV4dC5jaGlsZENvbnRleHRGb3JBcnJheShpKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFVzZXJEYXRhQ29udmVydGVyO1xyXG59KCkpO1xyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgYW4gb2JqZWN0IGxvb2tzIGxpa2UgYSBKU09OIG9iamVjdCB0aGF0IHNob3VsZCBiZSBjb252ZXJ0ZWRcclxuICogaW50byBhIHN0cnVjdC4gTm9ybWFsIGNsYXNzL3Byb3RvdHlwZSBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlXHJcbiAqIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJ1Y3QgdmFsdWUuIEFycmF5cywgRGF0ZXMsXHJcbiAqIEdlb1BvaW50cywgZXRjLiBhcmUgbm90IGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IG1hcFxyXG4gKiB0byBzcGVjaWZpYyBGaWVsZFZhbHVlIHR5cGVzIG90aGVyIHRoYW4gT2JqZWN0VmFsdWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBsb29rc0xpa2VKc29uT2JqZWN0KGlucHV0KSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiZcclxuICAgICAgICBpbnB1dCAhPT0gbnVsbCAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBBcnJheSkgJiZcclxuICAgICAgICAhKGlucHV0IGluc3RhbmNlb2YgRGF0ZSkgJiZcclxuICAgICAgICAhKGlucHV0IGluc3RhbmNlb2YgVGltZXN0YW1wKSAmJlxyXG4gICAgICAgICEoaW5wdXQgaW5zdGFuY2VvZiBHZW9Qb2ludCkgJiZcclxuICAgICAgICAhKGlucHV0IGluc3RhbmNlb2YgQmxvYikgJiZcclxuICAgICAgICAhKGlucHV0IGluc3RhbmNlb2YgRG9jdW1lbnRLZXlSZWZlcmVuY2UpICYmXHJcbiAgICAgICAgIShpbnB1dCBpbnN0YW5jZW9mIEZpZWxkVmFsdWVJbXBsKSk7XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVQbGFpbk9iamVjdChtZXNzYWdlLCBjb250ZXh0LCBpbnB1dCkge1xyXG4gICAgaWYgKCFsb29rc0xpa2VKc29uT2JqZWN0KGlucHV0KSB8fCAhaXNQbGFpbk9iamVjdChpbnB1dCkpIHtcclxuICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSB2YWx1ZURlc2NyaXB0aW9uKGlucHV0KTtcclxuICAgICAgICBpZiAoZGVzY3JpcHRpb24gPT09ICdhbiBvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIC8vIE1hc3NhZ2UgdGhlIGVycm9yIGlmIGl0IHdhcyBhbiBvYmplY3QuXHJcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuY3JlYXRlRXJyb3IobWVzc2FnZSArICcgYSBjdXN0b20gb2JqZWN0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmNyZWF0ZUVycm9yKG1lc3NhZ2UgKyAnICcgKyBkZXNjcmlwdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKCkgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWVsZFBhdGhGcm9tQXJndW1lbnQobWV0aG9kTmFtZSwgcGF0aCkge1xyXG4gICAgaWYgKHBhdGggaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkge1xyXG4gICAgICAgIHJldHVybiBwYXRoLl9pbnRlcm5hbFBhdGg7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhtZXRob2ROYW1lLCBwYXRoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0gJ0ZpZWxkIHBhdGggYXJndW1lbnRzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3IgRmllbGRQYXRoLic7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIG1ldGhvZE5hbWUgKyBcIigpIGNhbGxlZCB3aXRoIGludmFsaWQgZGF0YS4gXCIgKyBtZXNzYWdlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogV3JhcHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZyB3aXRoIGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgdGhlIG1ldGhvZCB0aGF0XHJcbiAqIHdhcyB0aHJvd24uXHJcbiAqIEBwYXJhbSBtZXRob2ROYW1lIFRoZSBwdWJsaWNseSB2aXNpYmxlIG1ldGhvZCBuYW1lXHJcbiAqIEBwYXJhbSBwYXRoIFRoZSBkb3Qtc2VwYXJhdGVkIHN0cmluZyBmb3JtIG9mIGEgZmllbGQgcGF0aCB3aGljaCB3aWxsIGJlIHNwbGl0XHJcbiAqIG9uIGRvdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKG1ldGhvZE5hbWUsIHBhdGgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcocGF0aCkuX2ludGVybmFsUGF0aDtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UoZSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJGdW5jdGlvbiBcIiArIG1ldGhvZE5hbWUgKyBcIigpIGNhbGxlZCB3aXRoIGludmFsaWQgZGF0YS4gXCIgKyBtZXNzYWdlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRXh0cmFjdHMgdGhlIG1lc3NhZ2UgZnJvbSBhIGNhdWdodCBleGNlcHRpb24sIHdoaWNoIHNob3VsZCBiZSBhbiBFcnJvciBvYmplY3RcclxuICogdGhvdWdoIEpTIGRvZXNuJ3QgZ3VhcmFudGVlIHRoYXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBlcnJvck1lc3NhZ2UoZXJyb3IpIHtcclxuICAgIHJldHVybiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IGVycm9yLnRvU3RyaW5nKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIHNldHRpbmdzKCkgZGVmYXVsdHM6XHJcbnZhciBERUZBVUxUX0hPU1QgPSAnZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tJztcclxudmFyIERFRkFVTFRfU1NMID0gdHJ1ZTtcclxudmFyIERFRkFVTFRfVElNRVNUQU1QU19JTl9TTkFQU0hPVFMgPSB0cnVlO1xyXG52YXIgREVGQVVMVF9GT1JDRV9MT05HX1BPTExJTkcgPSBmYWxzZTtcclxuLyoqXHJcbiAqIENvbnN0YW50IHVzZWQgdG8gaW5kaWNhdGUgdGhlIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24gc2hvdWxkIGJlIGRpc2FibGVkLlxyXG4gKiBTZXQgdGhpcyB2YWx1ZSBhcyB0aGUgYGNhY2hlU2l6ZUJ5dGVzYCBvbiB0aGUgc2V0dGluZ3MgcGFzc2VkIHRvIHRoZVxyXG4gKiBgRmlyZXN0b3JlYCBpbnN0YW5jZS5cclxuICovXHJcbnZhciBDQUNIRV9TSVpFX1VOTElNSVRFRCA9IExydVBhcmFtcy5DT0xMRUNUSU9OX0RJU0FCTEVEO1xyXG4vLyBlbmFibGVQZXJzaXN0ZW5jZSgpIGRlZmF1bHRzOlxyXG52YXIgREVGQVVMVF9TWU5DSFJPTklaRV9UQUJTID0gZmFsc2U7XHJcbi8qKlxyXG4gKiBBIGNvbmNyZXRlIHR5cGUgZGVzY3JpYmluZyBhbGwgdGhlIHZhbHVlcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHZpYSBhXHJcbiAqIHVzZXItc3VwcGxpZWQgZmlyZXN0b3JlLlNldHRpbmdzIG9iamVjdC4gVGhpcyBpcyBhIHNlcGFyYXRlIHR5cGUgc28gdGhhdFxyXG4gKiBkZWZhdWx0cyBjYW4gYmUgc3VwcGxpZWQgYW5kIHRoZSB2YWx1ZSBjYW4gYmUgY2hlY2tlZCBmb3IgZXF1YWxpdHkuXHJcbiAqL1xyXG52YXIgRmlyZXN0b3JlU2V0dGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaXJlc3RvcmVTZXR0aW5ncyhzZXR0aW5ncykge1xyXG4gICAgICAgIGlmIChzZXR0aW5ncy5ob3N0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNzbCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHByb3ZpZGUgc3NsIG9wdGlvbiBpZiBob3N0IG9wdGlvbiBpcyBub3Qgc2V0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IERFRkFVTFRfSE9TVDtcclxuICAgICAgICAgICAgdGhpcy5zc2wgPSBERUZBVUxUX1NTTDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlTmFtZWRUeXBlKCdzZXR0aW5ncycsICdub24tZW1wdHkgc3RyaW5nJywgJ2hvc3QnLCBzZXR0aW5ncy5ob3N0KTtcclxuICAgICAgICAgICAgdGhpcy5ob3N0ID0gc2V0dGluZ3MuaG9zdDtcclxuICAgICAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnc2V0dGluZ3MnLCAnYm9vbGVhbicsICdzc2wnLCBzZXR0aW5ncy5zc2wpO1xyXG4gICAgICAgICAgICB0aGlzLnNzbCA9IGRlZmF1bHRlZChzZXR0aW5ncy5zc2wsIERFRkFVTFRfU1NMKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVPcHRpb25OYW1lcygnc2V0dGluZ3MnLCBzZXR0aW5ncywgW1xyXG4gICAgICAgICAgICAnaG9zdCcsXHJcbiAgICAgICAgICAgICdzc2wnLFxyXG4gICAgICAgICAgICAnY3JlZGVudGlhbHMnLFxyXG4gICAgICAgICAgICAndGltZXN0YW1wc0luU25hcHNob3RzJyxcclxuICAgICAgICAgICAgJ2NhY2hlU2l6ZUJ5dGVzJyxcclxuICAgICAgICAgICAgJ2V4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcnXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnc2V0dGluZ3MnLCAnb2JqZWN0JywgJ2NyZWRlbnRpYWxzJywgc2V0dGluZ3MuY3JlZGVudGlhbHMpO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBzZXR0aW5ncy5jcmVkZW50aWFscztcclxuICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdzZXR0aW5ncycsICdib29sZWFuJywgJ3RpbWVzdGFtcHNJblNuYXBzaG90cycsIHNldHRpbmdzLnRpbWVzdGFtcHNJblNuYXBzaG90cyk7XHJcbiAgICAgICAgLy8gTm9ib2R5IHNob3VsZCBzZXQgdGltZXN0YW1wc0luU25hcHNob3RzIGFueW1vcmUsIGJ1dCB0aGUgZXJyb3IgZGVwZW5kcyBvblxyXG4gICAgICAgIC8vIHdoZXRoZXIgdGhleSBzZXQgaXQgdG8gdHJ1ZSBvciBmYWxzZS4uLlxyXG4gICAgICAgIGlmIChzZXR0aW5ncy50aW1lc3RhbXBzSW5TbmFwc2hvdHMgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgZXJyb3IoXCJcXG4gIFRoZSB0aW1lc3RhbXBzSW5TbmFwc2hvdHMgc2V0dGluZyBub3cgZGVmYXVsdHMgdG8gdHJ1ZSBhbmQgeW91IG5vXFxuICBsb25nZXIgbmVlZCB0byBleHBsaWNpdGx5IHNldCBpdC4gSW4gYSBmdXR1cmUgcmVsZWFzZSwgdGhlIHNldHRpbmdcXG4gIHdpbGwgYmUgcmVtb3ZlZCBlbnRpcmVseSBhbmQgc28gaXQgaXMgcmVjb21tZW5kZWQgdGhhdCB5b3UgcmVtb3ZlIGl0XFxuICBmcm9tIHlvdXIgZmlyZXN0b3JlLnNldHRpbmdzKCkgY2FsbCBub3cuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzZXR0aW5ncy50aW1lc3RhbXBzSW5TbmFwc2hvdHMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGVycm9yKFwiXFxuICBUaGUgdGltZXN0YW1wc0luU25hcHNob3RzIHNldHRpbmcgd2lsbCBzb29uIGJlIHJlbW92ZWQuIFlPVSBNVVNUIFVQREFURVxcbiAgWU9VUiBDT0RFLlxcblxcbiAgVG8gaGlkZSB0aGlzIHdhcm5pbmcsIHN0b3AgdXNpbmcgdGhlIHRpbWVzdGFtcHNJblNuYXBzaG90cyBzZXR0aW5nIGluIHlvdXJcXG4gIGZpcmVzdG9yZS5zZXR0aW5ncyh7IC4uLiB9KSBjYWxsLlxcblxcbiAgT25jZSB5b3UgcmVtb3ZlIHRoZSBzZXR0aW5nLCBUaW1lc3RhbXBzIHN0b3JlZCBpbiBDbG91ZCBGaXJlc3RvcmUgd2lsbCBiZVxcbiAgcmVhZCBiYWNrIGFzIEZpcmViYXNlIFRpbWVzdGFtcCBvYmplY3RzIGluc3RlYWQgb2YgYXMgc3lzdGVtIERhdGUgb2JqZWN0cy5cXG4gIFNvIHlvdSB3aWxsIGFsc28gbmVlZCB0byB1cGRhdGUgY29kZSBleHBlY3RpbmcgYSBEYXRlIHRvIGluc3RlYWQgZXhwZWN0IGFcXG4gIFRpbWVzdGFtcC4gRm9yIGV4YW1wbGU6XFxuXFxuICAvLyBPbGQ6XFxuICBjb25zdCBkYXRlID0gc25hcHNob3QuZ2V0KCdjcmVhdGVkX2F0Jyk7XFxuICAvLyBOZXc6XFxuICBjb25zdCB0aW1lc3RhbXAgPSBzbmFwc2hvdC5nZXQoJ2NyZWF0ZWRfYXQnKTsgY29uc3QgZGF0ZSA9XFxuICB0aW1lc3RhbXAudG9EYXRlKCk7XFxuXFxuICBQbGVhc2UgYXVkaXQgYWxsIGV4aXN0aW5nIHVzYWdlcyBvZiBEYXRlIHdoZW4geW91IGVuYWJsZSB0aGUgbmV3XFxuICBiZWhhdmlvci5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGltZXN0YW1wc0luU25hcHNob3RzID0gZGVmYXVsdGVkKHNldHRpbmdzLnRpbWVzdGFtcHNJblNuYXBzaG90cywgREVGQVVMVF9USU1FU1RBTVBTX0lOX1NOQVBTSE9UUyk7XHJcbiAgICAgICAgdmFsaWRhdGVOYW1lZE9wdGlvbmFsVHlwZSgnc2V0dGluZ3MnLCAnbnVtYmVyJywgJ2NhY2hlU2l6ZUJ5dGVzJywgc2V0dGluZ3MuY2FjaGVTaXplQnl0ZXMpO1xyXG4gICAgICAgIGlmIChzZXR0aW5ncy5jYWNoZVNpemVCeXRlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBMcnVQYXJhbXMuREVGQVVMVF9DQUNIRV9TSVpFX0JZVEVTO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmNhY2hlU2l6ZUJ5dGVzICE9PSBDQUNIRV9TSVpFX1VOTElNSVRFRCAmJlxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuY2FjaGVTaXplQnl0ZXMgPCBMcnVQYXJhbXMuTUlOSU1VTV9DQUNIRV9TSVpFX0JZVEVTKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgXCIgKyBMcnVQYXJhbXMuTUlOSU1VTV9DQUNIRV9TSVpFX0JZVEVTKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBzZXR0aW5ncy5jYWNoZVNpemVCeXRlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdzZXR0aW5ncycsICdib29sZWFuJywgJ2V4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcnLCBzZXR0aW5ncy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nKTtcclxuICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPVxyXG4gICAgICAgICAgICBzZXR0aW5ncy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID09PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgID8gREVGQVVMVF9GT1JDRV9MT05HX1BPTExJTkdcclxuICAgICAgICAgICAgICAgIDogc2V0dGluZ3MuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZztcclxuICAgIH1cclxuICAgIEZpcmVzdG9yZVNldHRpbmdzLnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmhvc3QgPT09IG90aGVyLmhvc3QgJiZcclxuICAgICAgICAgICAgdGhpcy5zc2wgPT09IG90aGVyLnNzbCAmJlxyXG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcHNJblNuYXBzaG90cyA9PT0gb3RoZXIudGltZXN0YW1wc0luU25hcHNob3RzICYmXHJcbiAgICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPT09IG90aGVyLmNyZWRlbnRpYWxzICYmXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPT09IG90aGVyLmNhY2hlU2l6ZUJ5dGVzICYmXHJcbiAgICAgICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9PT0gb3RoZXIuZm9yY2VMb25nUG9sbGluZyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpcmVzdG9yZVNldHRpbmdzO1xyXG59KCkpO1xyXG4vKipcclxuICogVGhlIHJvb3QgcmVmZXJlbmNlIHRvIHRoZSBkYXRhYmFzZS5cclxuICovXHJcbnZhciBGaXJlc3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaXJlc3RvcmUoZGF0YWJhc2VJZE9yQXBwLCBhdXRoUHJvdmlkZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX2ZpcmViYXNlQXBwID0gbnVsbDtcclxuICAgICAgICAvLyBQdWJsaWMgZm9yIHVzZSBpbiB0ZXN0cy5cclxuICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IFVzZSBtb2R1bGFyaXplZCBpbml0aWFsaXphdGlvbiBpbnN0ZWFkLlxyXG4gICAgICAgIHRoaXMuX3F1ZXVlID0gbmV3IEFzeW5jUXVldWUoKTtcclxuICAgICAgICB0aGlzLklOVEVSTkFMID0ge1xyXG4gICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRzbGliLl9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjbGllbnQgbXVzdCBiZSBpbml0YWxpemVkIHRvIGVuc3VyZSB0aGF0IGFsbCBzdWJzZXF1ZW50IEFQSSB1c2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhyb3dzIGFuIGV4Y2VwdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnRlcm1pbmF0ZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTsgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhYmFzZUlkT3JBcHAub3B0aW9ucyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyB2ZXJ5IGxpa2VseSBhIEZpcmViYXNlIGFwcCBvYmplY3RcclxuICAgICAgICAgICAgLy8gVE9ETyhiLzM0MTc3NjA1KTogQ2FuIHdlIHNvbWVob3cgdXNlIGluc3RhbmNlb2Y/XHJcbiAgICAgICAgICAgIHZhciBhcHAgPSBkYXRhYmFzZUlkT3JBcHA7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpcmViYXNlQXBwID0gYXBwO1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhYmFzZUlkID0gRmlyZXN0b3JlLmRhdGFiYXNlSWRGcm9tQXBwKGFwcCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gYXBwLm5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2NyZWRlbnRpYWxzID0gbmV3IEZpcmViYXNlQ3JlZGVudGlhbHNQcm92aWRlcihhdXRoUHJvdmlkZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGV4dGVybmFsXzEgPSBkYXRhYmFzZUlkT3JBcHA7XHJcbiAgICAgICAgICAgIGlmICghZXh0ZXJuYWxfMS5wcm9qZWN0SWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdNdXN0IHByb3ZpZGUgcHJvamVjdElkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZGF0YWJhc2VJZCA9IG5ldyBEYXRhYmFzZUlkKGV4dGVybmFsXzEucHJvamVjdElkLCBleHRlcm5hbF8xLmRhdGFiYXNlKTtcclxuICAgICAgICAgICAgLy8gVXNlIGEgZGVmYXVsdCBwZXJzaXN0ZW5jZUtleSB0aGF0IGxpbmVzIHVwIHdpdGggRmlyZWJhc2VBcHAuXHJcbiAgICAgICAgICAgIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gJ1tERUZBVUxUXSc7XHJcbiAgICAgICAgICAgIHRoaXMuX2NyZWRlbnRpYWxzID0gbmV3IEVtcHR5Q3JlZGVudGlhbHNQcm92aWRlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBGaXJlc3RvcmVTZXR0aW5ncyh7fSk7XHJcbiAgICAgICAgdGhpcy5fZGF0YUNvbnZlcnRlciA9IHRoaXMuY3JlYXRlRGF0YUNvbnZlcnRlcih0aGlzLl9kYXRhYmFzZUlkKTtcclxuICAgIH1cclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuc2V0dGluZ3MgPSBmdW5jdGlvbiAoc2V0dGluZ3NMaXRlcmFsKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRmlyZXN0b3JlLnNldHRpbmdzJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5zZXR0aW5ncycsICdvYmplY3QnLCAxLCBzZXR0aW5nc0xpdGVyYWwpO1xyXG4gICAgICAgIGlmIChjb250YWlucyhzZXR0aW5nc0xpdGVyYWwsICdwZXJzaXN0ZW5jZScpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdcInBlcnNpc3RlbmNlXCIgaXMgbm93IHNwZWNpZmllZCB3aXRoIGEgc2VwYXJhdGUgY2FsbCB0byAnICtcclxuICAgICAgICAgICAgICAgICdmaXJlc3RvcmUuZW5hYmxlUGVyc2lzdGVuY2UoKS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5ld1NldHRpbmdzID0gbmV3IEZpcmVzdG9yZVNldHRpbmdzKHNldHRpbmdzTGl0ZXJhbCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2ZpcmVzdG9yZUNsaWVudCAmJiAhdGhpcy5fc2V0dGluZ3MuaXNFcXVhbChuZXdTZXR0aW5ncykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgJ0ZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyICcgK1xyXG4gICAgICAgICAgICAgICAgJ2JlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBjYWxsIHNldHRpbmdzKCkgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyICcgK1xyXG4gICAgICAgICAgICAgICAgJ21ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ld1NldHRpbmdzO1xyXG4gICAgICAgIGlmIChuZXdTZXR0aW5ncy5jcmVkZW50aWFscyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NyZWRlbnRpYWxzID0gbWFrZUNyZWRlbnRpYWxzUHJvdmlkZXIobmV3U2V0dGluZ3MuY3JlZGVudGlhbHMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmVuYWJsZU5ldHdvcmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC5lbmFibGVOZXR3b3JrKCk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5kaXNhYmxlTmV0d29yayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LmRpc2FibGVOZXR3b3JrKCk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5lbmFibGVQZXJzaXN0ZW5jZSA9IGZ1bmN0aW9uIChzZXR0aW5ncykge1xyXG4gICAgICAgIGlmICh0aGlzLl9maXJlc3RvcmVDbGllbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuRkFJTEVEX1BSRUNPTkRJVElPTiwgJ0ZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIHBlcnNpc3RlbmNlIGNhbiBubyBsb25nZXIgJyArXHJcbiAgICAgICAgICAgICAgICAnYmUgZW5hYmxlZC4gWW91IGNhbiBvbmx5IGNhbGwgZW5hYmxlUGVyc2lzdGVuY2UoKSBiZWZvcmUgY2FsbGluZyAnICtcclxuICAgICAgICAgICAgICAgICdhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzeW5jaHJvbml6ZVRhYnMgPSBmYWxzZTtcclxuICAgICAgICBpZiAoc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmV4cGVyaW1lbnRhbFRhYlN5bmNocm9uaXphdGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcihcIlRoZSAnZXhwZXJpbWVudGFsVGFiU3luY2hyb25pemF0aW9uJyBzZXR0aW5nIGhhcyBiZWVuIHJlbmFtZWQgdG8gXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiJ3N5bmNocm9uaXplVGFicycuIEluIGEgZnV0dXJlIHJlbGVhc2UsIHRoZSBzZXR0aW5nIHdpbGwgYmUgcmVtb3ZlZCBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgJ2FuZCBpdCBpcyByZWNvbW1lbmRlZCB0aGF0IHlvdSB1cGRhdGUgeW91ciAnICtcclxuICAgICAgICAgICAgICAgICAgICBcImZpcmVzdG9yZS5lbmFibGVQZXJzaXN0ZW5jZSgpIGNhbGwgdG8gdXNlICdzeW5jaHJvbml6ZVRhYnMnLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzeW5jaHJvbml6ZVRhYnMgPSBkZWZhdWx0ZWQoc2V0dGluZ3Muc3luY2hyb25pemVUYWJzICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgID8gc2V0dGluZ3Muc3luY2hyb25pemVUYWJzXHJcbiAgICAgICAgICAgICAgICA6IHNldHRpbmdzLmV4cGVyaW1lbnRhbFRhYlN5bmNocm9uaXphdGlvbiwgREVGQVVMVF9TWU5DSFJPTklaRV9UQUJTKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlndXJlQ2xpZW50KG5ldyBJbmRleGVkRGJQZXJzaXN0ZW5jZVNldHRpbmdzKHRoaXMuX3NldHRpbmdzLmNhY2hlU2l6ZUJ5dGVzLCBzeW5jaHJvbml6ZVRhYnMpKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmNsZWFyUGVyc2lzdGVuY2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcGVyc2lzdGVuY2VLZXkgPSBJbmRleGVkRGJQZXJzaXN0ZW5jZS5idWlsZFN0b3JhZ2VQcmVmaXgodGhpcy5tYWtlRGF0YWJhc2VJbmZvKCkpO1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgIHRoaXMuX3F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuQWZ0ZXJTaHV0ZG93bihmdW5jdGlvbiAoKSB7IHJldHVybiB0c2xpYi5fX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBlXzE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9maXJlc3RvcmVDbGllbnQgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuX2ZpcmVzdG9yZUNsaWVudC5jbGllbnRUZXJtaW5hdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5GQUlMRURfUFJFQ09ORElUSU9OLCAnUGVyc2lzdGVuY2UgY2Fubm90IGJlIGNsZWFyZWQgYWZ0ZXIgdGhpcyBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgSW5kZXhlZERiUGVyc2lzdGVuY2UuY2xlYXJQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZUtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZV8xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLnRlcm1pbmF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmFwcC5fcmVtb3ZlU2VydmljZUluc3RhbmNlKCdmaXJlc3RvcmUnKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5JTlRFUk5BTC5kZWxldGUoKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlyZXN0b3JlLnByb3RvdHlwZSwgXCJfaXNUZXJtaW5hdGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQuY2xpZW50VGVybWluYXRlZDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUud2FpdEZvclBlbmRpbmdXcml0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC53YWl0Rm9yUGVuZGluZ1dyaXRlcygpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUub25TbmFwc2hvdHNJblN5bmMgPSBmdW5jdGlvbiAoYXJnKSB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgaWYgKGlzUGFydGlhbE9ic2VydmVyKGFyZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25TbmFwc2hvdHNJblN5bmNJbnRlcm5hbChhcmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaXJlc3RvcmUub25TbmFwc2hvdHNJblN5bmMnLCAnZnVuY3Rpb24nLCAxLCBhcmcpO1xyXG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBhcmdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub25TbmFwc2hvdHNJblN5bmNJbnRlcm5hbChvYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUub25TbmFwc2hvdHNJblN5bmNJbnRlcm5hbCA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGVyckhhbmRsZXIgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHRocm93IGZhaWwoJ1VuY2F1Z2h0IEVycm9yIGluIG9uU25hcHNob3RzSW5TeW5jJyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgYXN5bmNPYnNlcnZlciA9IG5ldyBBc3luY09ic2VydmVyKHtcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyLm5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJIYW5kbGVyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlQ2xpZW50LmFkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyKGFzeW5jT2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFzeW5jT2JzZXJ2ZXIubXV0ZSgpO1xyXG4gICAgICAgICAgICBfdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnJlbW92ZVNuYXBzaG90c0luU3luY0xpc3RlbmVyKGFzeW5jT2JzZXJ2ZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5lbnN1cmVDbGllbnRDb25maWd1cmVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZmlyZXN0b3JlQ2xpZW50KSB7XHJcbiAgICAgICAgICAgIC8vIEtpY2sgb2ZmIHN0YXJ0aW5nIHRoZSBjbGllbnQgYnV0IGRvbid0IGFjdHVhbGx5IHdhaXQgZm9yIGl0LlxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJlQ2xpZW50KG5ldyBNZW1vcnlQZXJzaXN0ZW5jZVNldHRpbmdzKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50O1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUubWFrZURhdGFiYXNlSW5mbyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlSW5mbyh0aGlzLl9kYXRhYmFzZUlkLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSwgdGhpcy5fc2V0dGluZ3MuaG9zdCwgdGhpcy5fc2V0dGluZ3Muc3NsLCB0aGlzLl9zZXR0aW5ncy5mb3JjZUxvbmdQb2xsaW5nKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmNvbmZpZ3VyZUNsaWVudCA9IGZ1bmN0aW9uIChwZXJzaXN0ZW5jZVNldHRpbmdzKSB7XHJcbiAgICAgICAgYXNzZXJ0KCEhdGhpcy5fc2V0dGluZ3MuaG9zdCwgJ0ZpcmVzdG9yZVNldHRpbmdzLmhvc3QgaXMgbm90IHNldCcpO1xyXG4gICAgICAgIGFzc2VydCghdGhpcy5fZmlyZXN0b3JlQ2xpZW50LCAnY29uZmlndXJlQ2xpZW50KCkgY2FsbGVkIG11bHRpcGxlIHRpbWVzJyk7XHJcbiAgICAgICAgdmFyIGRhdGFiYXNlSW5mbyA9IHRoaXMubWFrZURhdGFiYXNlSW5mbygpO1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCA9IG5ldyBGaXJlc3RvcmVDbGllbnQoUGxhdGZvcm1TdXBwb3J0LmdldFBsYXRmb3JtKCksIGRhdGFiYXNlSW5mbywgdGhpcy5fY3JlZGVudGlhbHMsIHRoaXMuX3F1ZXVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnN0YXJ0KHBlcnNpc3RlbmNlU2V0dGluZ3MpO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuY3JlYXRlRGF0YUNvbnZlcnRlciA9IGZ1bmN0aW9uIChkYXRhYmFzZUlkKSB7XHJcbiAgICAgICAgdmFyIHByZUNvbnZlcnRlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoaXNEYiA9IGRhdGFiYXNlSWQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3RoZXJEYiA9IHZhbHVlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZDtcclxuICAgICAgICAgICAgICAgIGlmICghb3RoZXJEYi5pc0VxdWFsKHRoaXNEYikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKG90aGVyRGIucHJvamVjdElkICsgXCIvXCIgKyBvdGhlckRiLmRhdGFiYXNlICsgXCIgYnV0IHNob3VsZCBiZSBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCJmb3IgZGF0YWJhc2UgXCIgKyB0aGlzRGIucHJvamVjdElkICsgXCIvXCIgKyB0aGlzRGIuZGF0YWJhc2UpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRLZXlSZWZlcmVuY2UoZGF0YWJhc2VJZCwgdmFsdWUuX2tleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckRhdGFDb252ZXJ0ZXIocHJlQ29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUuZGF0YWJhc2VJZEZyb21BcHAgPSBmdW5jdGlvbiAoYXBwKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcHAub3B0aW9ucztcclxuICAgICAgICBpZiAoIWNvbnRhaW5zKG9wdGlvbnMsICdwcm9qZWN0SWQnKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnXCJwcm9qZWN0SWRcIiBub3QgcHJvdmlkZWQgaW4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHByb2plY3RJZCA9IG9wdGlvbnNbJ3Byb2plY3RJZCddO1xyXG4gICAgICAgIGlmICghcHJvamVjdElkIHx8IHR5cGVvZiBwcm9qZWN0SWQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdwcm9qZWN0SWQgbXVzdCBiZSBhIHN0cmluZyBpbiBGaXJlYmFzZUFwcC5vcHRpb25zJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgRGF0YWJhc2VJZChwcm9qZWN0SWQpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlc3RvcmUucHJvdG90eXBlLCBcImFwcFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fZmlyZWJhc2VBcHApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICdub3QgYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmViYXNlQXBwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5jb2xsZWN0aW9uID0gZnVuY3Rpb24gKHBhdGhTdHJpbmcpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUuY29sbGVjdGlvbicsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaXJlc3RvcmUuY29sbGVjdGlvbicsICdub24tZW1wdHkgc3RyaW5nJywgMSwgcGF0aFN0cmluZyk7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHBhdGhTdHJpbmcpLCB0aGlzKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLmRvYyA9IGZ1bmN0aW9uIChwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRmlyZXN0b3JlLmRvYycsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaXJlc3RvcmUuZG9jJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAxLCBwYXRoU3RyaW5nKTtcclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gRG9jdW1lbnRSZWZlcmVuY2UuZm9yUGF0aChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhwYXRoU3RyaW5nKSwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgRmlyZXN0b3JlLnByb3RvdHlwZS5jb2xsZWN0aW9uR3JvdXAgPSBmdW5jdGlvbiAoY29sbGVjdGlvbklkKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdGaXJlc3RvcmUuY29sbGVjdGlvbkdyb3VwJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAxLCBjb2xsZWN0aW9uSWQpO1xyXG4gICAgICAgIGlmIChjb2xsZWN0aW9uSWQuaW5kZXhPZignLycpID49IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGNvbGxlY3Rpb24gSUQgJ1wiICsgY29sbGVjdGlvbklkICsgXCInIHBhc3NlZCB0byBmdW5jdGlvbiBcIiArXHJcbiAgICAgICAgICAgICAgICBcIkZpcmVzdG9yZS5jb2xsZWN0aW9uR3JvdXAoKS4gQ29sbGVjdGlvbiBJRHMgbXVzdCBub3QgY29udGFpbiAnLycuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5JDEobmV3IFF1ZXJ5KFJlc291cmNlUGF0aC5FTVBUWV9QQVRILCBjb2xsZWN0aW9uSWQpLCB0aGlzKTtcclxuICAgIH07XHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLnJ1blRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKHVwZGF0ZUZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdGaXJlc3RvcmUucnVuVHJhbnNhY3Rpb24nLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnRmlyZXN0b3JlLnJ1blRyYW5zYWN0aW9uJywgJ2Z1bmN0aW9uJywgMSwgdXBkYXRlRnVuY3Rpb24pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKS50cmFuc2FjdGlvbihmdW5jdGlvbiAodHJhbnNhY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUZ1bmN0aW9uKG5ldyBUcmFuc2FjdGlvbiQxKF90aGlzLCB0cmFuc2FjdGlvbikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpcmVzdG9yZS5wcm90b3R5cGUuYmF0Y2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVDbGllbnRDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBXcml0ZUJhdGNoKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaXJlc3RvcmUsIFwibG9nTGV2ZWxcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGdldExvZ0xldmVsKCkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgTG9nTGV2ZWwuREVCVUc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdkZWJ1Zyc7XHJcbiAgICAgICAgICAgICAgICBjYXNlIExvZ0xldmVsLkVSUk9SOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnZXJyb3InO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5TSUxFTlQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdzaWxlbnQnO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnVW5rbm93biBsb2cgbGV2ZWw6ICcgKyBnZXRMb2dMZXZlbCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRmlyZXN0b3JlLnNldExvZ0xldmVsID0gZnVuY3Rpb24gKGxldmVsKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRmlyZXN0b3JlLnNldExvZ0xldmVsJywgYXJndW1lbnRzLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0ZpcmVzdG9yZS5zZXRMb2dMZXZlbCcsICdub24tZW1wdHkgc3RyaW5nJywgMSwgbGV2ZWwpO1xyXG4gICAgICAgIHN3aXRjaCAobGV2ZWwpIHtcclxuICAgICAgICAgICAgY2FzZSAnZGVidWcnOlxyXG4gICAgICAgICAgICAgICAgc2V0TG9nTGV2ZWwoTG9nTGV2ZWwuREVCVUcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICAgICAgICAgIHNldExvZ0xldmVsKExvZ0xldmVsLkVSUk9SKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdzaWxlbnQnOlxyXG4gICAgICAgICAgICAgICAgc2V0TG9nTGV2ZWwoTG9nTGV2ZWwuU0lMRU5UKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgbG9nIGxldmVsOiAnICsgbGV2ZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBOb3RlOiB0aGlzIGlzIG5vdCBhIHByb3BlcnR5IGJlY2F1c2UgdGhlIG1pbmlmaWVyIGNhbid0IHdvcmsgY29ycmVjdGx5IHdpdGhcclxuICAgIC8vIHRoZSB3YXkgVHlwZVNjcmlwdCBjb21waWxlciBvdXRwdXRzIHByb3BlcnRpZXMuXHJcbiAgICBGaXJlc3RvcmUucHJvdG90eXBlLl9hcmVUaW1lc3RhbXBzSW5TbmFwc2hvdHNFbmFibGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy50aW1lc3RhbXBzSW5TbmFwc2hvdHM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpcmVzdG9yZTtcclxufSgpKTtcclxuLyoqXHJcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXHJcbiAqL1xyXG52YXIgVHJhbnNhY3Rpb24kMSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRyYW5zYWN0aW9uKF9maXJlc3RvcmUsIF90cmFuc2FjdGlvbikge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24gPSBfdHJhbnNhY3Rpb247XHJcbiAgICB9XHJcbiAgICBUcmFuc2FjdGlvbi5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdUcmFuc2FjdGlvbi5nZXQnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhciByZWYgPSB2YWxpZGF0ZVJlZmVyZW5jZSgnVHJhbnNhY3Rpb24uZ2V0JywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uXHJcbiAgICAgICAgICAgIC5sb29rdXAoW3JlZi5fa2V5XSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRvY3MpIHtcclxuICAgICAgICAgICAgaWYgKCFkb2NzIHx8IGRvY3MubGVuZ3RoICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgnTWlzbWF0Y2ggaW4gZG9jcyByZXR1cm5lZCBmcm9tIGRvY3VtZW50IGxvb2t1cC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZG9jID0gZG9jc1swXTtcclxuICAgICAgICAgICAgaWYgKGRvYyBpbnN0YW5jZW9mIE5vRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdChfdGhpcy5fZmlyZXN0b3JlLCByZWYuX2tleSwgbnVsbCwgXHJcbiAgICAgICAgICAgICAgICAvKiBmcm9tQ2FjaGU9ICovIGZhbHNlLCBcclxuICAgICAgICAgICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovIGZhbHNlLCByZWYuX2NvbnZlcnRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZG9jIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdChfdGhpcy5fZmlyZXN0b3JlLCByZWYuX2tleSwgZG9jLCBcclxuICAgICAgICAgICAgICAgIC8qIGZyb21DYWNoZT0gKi8gZmFsc2UsIFxyXG4gICAgICAgICAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gZmFsc2UsIHJlZi5fY29udmVydGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGZhaWwoXCJCYXRjaEdldERvY3VtZW50c1JlcXVlc3QgcmV0dXJuZWQgdW5leHBlY3RlZCBkb2N1bWVudCB0eXBlOiBcIiArIGRvYy5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFRyYW5zYWN0aW9uLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoZG9jdW1lbnRSZWYsIHZhbHVlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdUcmFuc2FjdGlvbi5zZXQnLCBhcmd1bWVudHMsIDIsIDMpO1xyXG4gICAgICAgIHZhciByZWYgPSB2YWxpZGF0ZVJlZmVyZW5jZSgnVHJhbnNhY3Rpb24uc2V0JywgZG9jdW1lbnRSZWYsIHRoaXMuX2ZpcmVzdG9yZSk7XHJcbiAgICAgICAgb3B0aW9ucyA9IHZhbGlkYXRlU2V0T3B0aW9ucygnVHJhbnNhY3Rpb24uc2V0Jywgb3B0aW9ucyk7XHJcbiAgICAgICAgdmFyIF9hID0gYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKHJlZi5fY29udmVydGVyLCB2YWx1ZSwgJ1RyYW5zYWN0aW9uLnNldCcpLCBjb252ZXJ0ZWRWYWx1ZSA9IF9hWzBdLCBmdW5jdGlvbk5hbWUgPSBfYVsxXTtcclxuICAgICAgICB2YXIgcGFyc2VkID0gb3B0aW9ucy5tZXJnZSB8fCBvcHRpb25zLm1lcmdlRmllbGRzXHJcbiAgICAgICAgICAgID8gdGhpcy5fZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlTWVyZ2VEYXRhKGZ1bmN0aW9uTmFtZSwgY29udmVydGVkVmFsdWUsIG9wdGlvbnMubWVyZ2VGaWVsZHMpXHJcbiAgICAgICAgICAgIDogdGhpcy5fZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlU2V0RGF0YShmdW5jdGlvbk5hbWUsIGNvbnZlcnRlZFZhbHVlKTtcclxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi5zZXQocmVmLl9rZXksIHBhcnNlZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkb2N1bWVudFJlZiwgZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG1vcmVGaWVsZHNBbmRWYWx1ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBtb3JlRmllbGRzQW5kVmFsdWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmVmO1xyXG4gICAgICAgIHZhciBwYXJzZWQ7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZE9yVXBkYXRlRGF0YSA9PT0gJ3N0cmluZycgfHxcclxuICAgICAgICAgICAgZmllbGRPclVwZGF0ZURhdGEgaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ1RyYW5zYWN0aW9uLnVwZGF0ZScsIGFyZ3VtZW50cywgMyk7XHJcbiAgICAgICAgICAgIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdUcmFuc2FjdGlvbi51cGRhdGUnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICAgICAgcGFyc2VkID0gdGhpcy5fZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlVXBkYXRlVmFyYXJncygnVHJhbnNhY3Rpb24udXBkYXRlJywgZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlLCBtb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ1RyYW5zYWN0aW9uLnVwZGF0ZScsIGFyZ3VtZW50cywgMik7XHJcbiAgICAgICAgICAgIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdUcmFuc2FjdGlvbi51cGRhdGUnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICAgICAgcGFyc2VkID0gdGhpcy5fZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlVXBkYXRlRGF0YSgnVHJhbnNhY3Rpb24udXBkYXRlJywgZmllbGRPclVwZGF0ZURhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi51cGRhdGUocmVmLl9rZXksIHBhcnNlZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNhY3Rpb24ucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChkb2N1bWVudFJlZikge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ1RyYW5zYWN0aW9uLmRlbGV0ZScsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdUcmFuc2FjdGlvbi5kZWxldGUnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUocmVmLl9rZXkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUcmFuc2FjdGlvbjtcclxufSgpKTtcclxudmFyIFdyaXRlQmF0Y2ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXcml0ZUJhdGNoKF9maXJlc3RvcmUpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX211dGF0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2NvbW1pdHRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgV3JpdGVCYXRjaC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmLCB2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnV3JpdGVCYXRjaC5zZXQnLCBhcmd1bWVudHMsIDIsIDMpO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90Q29tbWl0dGVkKCk7XHJcbiAgICAgICAgdmFyIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdXcml0ZUJhdGNoLnNldCcsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWxpZGF0ZVNldE9wdGlvbnMoJ1dyaXRlQmF0Y2guc2V0Jywgb3B0aW9ucyk7XHJcbiAgICAgICAgdmFyIF9hID0gYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKHJlZi5fY29udmVydGVyLCB2YWx1ZSwgJ1dyaXRlQmF0Y2guc2V0JyksIGNvbnZlcnRlZFZhbHVlID0gX2FbMF0sIGZ1bmN0aW9uTmFtZSA9IF9hWzFdO1xyXG4gICAgICAgIHZhciBwYXJzZWQgPSBvcHRpb25zLm1lcmdlIHx8IG9wdGlvbnMubWVyZ2VGaWVsZHNcclxuICAgICAgICAgICAgPyB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VNZXJnZURhdGEoZnVuY3Rpb25OYW1lLCBjb252ZXJ0ZWRWYWx1ZSwgb3B0aW9ucy5tZXJnZUZpZWxkcylcclxuICAgICAgICAgICAgOiB0aGlzLl9maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VTZXREYXRhKGZ1bmN0aW9uTmFtZSwgY29udmVydGVkVmFsdWUpO1xyXG4gICAgICAgIHRoaXMuX211dGF0aW9ucyA9IHRoaXMuX211dGF0aW9ucy5jb25jYXQocGFyc2VkLnRvTXV0YXRpb25zKHJlZi5fa2V5LCBQcmVjb25kaXRpb24uTk9ORSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFdyaXRlQmF0Y2gucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkb2N1bWVudFJlZiwgZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG1vcmVGaWVsZHNBbmRWYWx1ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBtb3JlRmllbGRzQW5kVmFsdWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnZlcmlmeU5vdENvbW1pdHRlZCgpO1xyXG4gICAgICAgIHZhciByZWY7XHJcbiAgICAgICAgdmFyIHBhcnNlZDtcclxuICAgICAgICBpZiAodHlwZW9mIGZpZWxkT3JVcGRhdGVEYXRhID09PSAnc3RyaW5nJyB8fFxyXG4gICAgICAgICAgICBmaWVsZE9yVXBkYXRlRGF0YSBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnV3JpdGVCYXRjaC51cGRhdGUnLCBhcmd1bWVudHMsIDMpO1xyXG4gICAgICAgICAgICByZWYgPSB2YWxpZGF0ZVJlZmVyZW5jZSgnV3JpdGVCYXRjaC51cGRhdGUnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICAgICAgcGFyc2VkID0gdGhpcy5fZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlVXBkYXRlVmFyYXJncygnV3JpdGVCYXRjaC51cGRhdGUnLCBmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUsIG1vcmVGaWVsZHNBbmRWYWx1ZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnV3JpdGVCYXRjaC51cGRhdGUnLCBhcmd1bWVudHMsIDIpO1xyXG4gICAgICAgICAgICByZWYgPSB2YWxpZGF0ZVJlZmVyZW5jZSgnV3JpdGVCYXRjaC51cGRhdGUnLCBkb2N1bWVudFJlZiwgdGhpcy5fZmlyZXN0b3JlKTtcclxuICAgICAgICAgICAgcGFyc2VkID0gdGhpcy5fZmlyZXN0b3JlLl9kYXRhQ29udmVydGVyLnBhcnNlVXBkYXRlRGF0YSgnV3JpdGVCYXRjaC51cGRhdGUnLCBmaWVsZE9yVXBkYXRlRGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX211dGF0aW9ucyA9IHRoaXMuX211dGF0aW9ucy5jb25jYXQocGFyc2VkLnRvTXV0YXRpb25zKHJlZi5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKHRydWUpKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgV3JpdGVCYXRjaC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGRvY3VtZW50UmVmKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnV3JpdGVCYXRjaC5kZWxldGUnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5Tm90Q29tbWl0dGVkKCk7XHJcbiAgICAgICAgdmFyIHJlZiA9IHZhbGlkYXRlUmVmZXJlbmNlKCdXcml0ZUJhdGNoLmRlbGV0ZScsIGRvY3VtZW50UmVmLCB0aGlzLl9maXJlc3RvcmUpO1xyXG4gICAgICAgIHRoaXMuX211dGF0aW9ucyA9IHRoaXMuX211dGF0aW9ucy5jb25jYXQobmV3IERlbGV0ZU11dGF0aW9uKHJlZi5fa2V5LCBQcmVjb25kaXRpb24uTk9ORSkpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFdyaXRlQmF0Y2gucHJvdG90eXBlLmNvbW1pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWIuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYi5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVyaWZ5Tm90Q29tbWl0dGVkKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jb21taXR0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX211dGF0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuX2ZpcmVzdG9yZS5lbnN1cmVDbGllbnRDb25maWd1cmVkKCkud3JpdGUodGhpcy5fbXV0YXRpb25zKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFdyaXRlQmF0Y2gucHJvdG90eXBlLnZlcmlmeU5vdENvbW1pdHRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLkZBSUxFRF9QUkVDT05ESVRJT04sICdBIHdyaXRlIGJhdGNoIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlciBjb21taXQoKSAnICtcclxuICAgICAgICAgICAgICAgICdoYXMgYmVlbiBjYWxsZWQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBXcml0ZUJhdGNoO1xyXG59KCkpO1xyXG4vKipcclxuICogQSByZWZlcmVuY2UgdG8gYSBwYXJ0aWN1bGFyIGRvY3VtZW50IGluIGEgY29sbGVjdGlvbiBpbiB0aGUgZGF0YWJhc2UuXHJcbiAqL1xyXG52YXIgRG9jdW1lbnRSZWZlcmVuY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudFJlZmVyZW5jZShfa2V5LCBmaXJlc3RvcmUsIF9jb252ZXJ0ZXIpIHtcclxuICAgICAgICB0aGlzLl9rZXkgPSBfa2V5O1xyXG4gICAgICAgIHRoaXMuZmlyZXN0b3JlID0gZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IF9jb252ZXJ0ZXI7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlQ2xpZW50ID0gdGhpcy5maXJlc3RvcmUuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgfVxyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UuZm9yUGF0aCA9IGZ1bmN0aW9uIChwYXRoLCBmaXJlc3RvcmUsIGNvbnZlcnRlcikge1xyXG4gICAgICAgIGlmIChwYXRoLmxlbmd0aCAlIDIgIT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgZG9jdW1lbnQgcmVmZXJlbmNlLiBEb2N1bWVudCAnICtcclxuICAgICAgICAgICAgICAgICdyZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICcgK1xyXG4gICAgICAgICAgICAgICAgKHBhdGguY2Fub25pY2FsU3RyaW5nKCkgKyBcIiBoYXMgXCIgKyBwYXRoLmxlbmd0aCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKG5ldyBEb2N1bWVudEtleShwYXRoKSwgZmlyZXN0b3JlLCBjb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUsIFwiaWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUsIFwicGFyZW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLCBcInBhdGhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuY29sbGVjdGlvbiA9IGZ1bmN0aW9uIChwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnRG9jdW1lbnRSZWZlcmVuY2UuY29sbGVjdGlvbicsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdEb2N1bWVudFJlZmVyZW5jZS5jb2xsZWN0aW9uJywgJ25vbi1lbXB0eSBzdHJpbmcnLCAxLCBwYXRoU3RyaW5nKTtcclxuICAgICAgICBpZiAoIXBhdGhTdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ011c3QgcHJvdmlkZSBhIG5vbi1lbXB0eSBjb2xsZWN0aW9uIG5hbWUgdG8gY29sbGVjdGlvbigpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXRoID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcocGF0aFN0cmluZyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuX2tleS5wYXRoLmNoaWxkKHBhdGgpLCB0aGlzLmZpcmVzdG9yZSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLmlzRXF1YWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2xhc3NFcnJvcignaXNFcXVhbCcsICdEb2N1bWVudFJlZmVyZW5jZScsIDEsIG90aGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLmZpcmVzdG9yZSA9PT0gb3RoZXIuZmlyZXN0b3JlICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2tleS5pc0VxdWFsKG90aGVyLl9rZXkpICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnZlcnRlciA9PT0gb3RoZXIuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnRG9jdW1lbnRSZWZlcmVuY2Uuc2V0JywgYXJndW1lbnRzLCAxLCAyKTtcclxuICAgICAgICBvcHRpb25zID0gdmFsaWRhdGVTZXRPcHRpb25zKCdEb2N1bWVudFJlZmVyZW5jZS5zZXQnLCBvcHRpb25zKTtcclxuICAgICAgICB2YXIgX2EgPSBhcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIodGhpcy5fY29udmVydGVyLCB2YWx1ZSwgJ0RvY3VtZW50UmVmZXJlbmNlLnNldCcpLCBjb252ZXJ0ZWRWYWx1ZSA9IF9hWzBdLCBmdW5jdGlvbk5hbWUgPSBfYVsxXTtcclxuICAgICAgICB2YXIgcGFyc2VkID0gb3B0aW9ucy5tZXJnZSB8fCBvcHRpb25zLm1lcmdlRmllbGRzXHJcbiAgICAgICAgICAgID8gdGhpcy5maXJlc3RvcmUuX2RhdGFDb252ZXJ0ZXIucGFyc2VNZXJnZURhdGEoZnVuY3Rpb25OYW1lLCBjb252ZXJ0ZWRWYWx1ZSwgb3B0aW9ucy5tZXJnZUZpZWxkcylcclxuICAgICAgICAgICAgOiB0aGlzLmZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVNldERhdGEoZnVuY3Rpb25OYW1lLCBjb252ZXJ0ZWRWYWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC53cml0ZShwYXJzZWQudG9NdXRhdGlvbnModGhpcy5fa2V5LCBQcmVjb25kaXRpb24uTk9ORSkpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIG1vcmVGaWVsZHNBbmRWYWx1ZXMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBtb3JlRmllbGRzQW5kVmFsdWVzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGFyc2VkO1xyXG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRPclVwZGF0ZURhdGEgPT09ICdzdHJpbmcnIHx8XHJcbiAgICAgICAgICAgIGZpZWxkT3JVcGRhdGVEYXRhIGluc3RhbmNlb2YgRmllbGRQYXRoJDEpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdEb2N1bWVudFJlZmVyZW5jZS51cGRhdGUnLCBhcmd1bWVudHMsIDIpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLmZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVVwZGF0ZVZhcmFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLnVwZGF0ZScsIGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSwgbW9yZUZpZWxkc0FuZFZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdEb2N1bWVudFJlZmVyZW5jZS51cGRhdGUnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgICAgICBwYXJzZWQgPSB0aGlzLmZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVVwZGF0ZURhdGEoJ0RvY3VtZW50UmVmZXJlbmNlLnVwZGF0ZScsIGZpZWxkT3JVcGRhdGVEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC53cml0ZShwYXJzZWQudG9NdXRhdGlvbnModGhpcy5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKHRydWUpKSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YWxpZGF0ZUV4YWN0TnVtYmVyT2ZBcmdzKCdEb2N1bWVudFJlZmVyZW5jZS5kZWxldGUnLCBhcmd1bWVudHMsIDApO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQud3JpdGUoW1xyXG4gICAgICAgICAgICBuZXcgRGVsZXRlTXV0YXRpb24odGhpcy5fa2V5LCBQcmVjb25kaXRpb24uTk9ORSlcclxuICAgICAgICBdKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUub25TbmFwc2hvdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdEb2N1bWVudFJlZmVyZW5jZS5vblNuYXBzaG90JywgYXJndW1lbnRzLCAxLCA0KTtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBvYnNlcnZlcjtcclxuICAgICAgICB2YXIgY3VyckFyZyA9IDA7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzW2N1cnJBcmddID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICAhaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1tjdXJyQXJnXSkpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IGFyZ3NbY3VyckFyZ107XHJcbiAgICAgICAgICAgIHZhbGlkYXRlT3B0aW9uTmFtZXMoJ0RvY3VtZW50UmVmZXJlbmNlLm9uU25hcHNob3QnLCBvcHRpb25zLCBbXHJcbiAgICAgICAgICAgICAgICAnaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcydcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ0RvY3VtZW50UmVmZXJlbmNlLm9uU25hcHNob3QnLCAnYm9vbGVhbicsICdpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzJywgb3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKTtcclxuICAgICAgICAgICAgY3VyckFyZysrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW50ZXJuYWxPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiBvcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXNcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChpc1BhcnRpYWxPYnNlcnZlcihhcmdzW2N1cnJBcmddKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IGFyZ3NbY3VyckFyZ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ0RvY3VtZW50UmVmZXJlbmNlLm9uU25hcHNob3QnLCAnZnVuY3Rpb24nLCBjdXJyQXJnLCBhcmdzW2N1cnJBcmddKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUoJ0RvY3VtZW50UmVmZXJlbmNlLm9uU25hcHNob3QnLCAnZnVuY3Rpb24nLCBjdXJyQXJnICsgMSwgYXJnc1tjdXJyQXJnICsgMV0pO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU9wdGlvbmFsQXJnVHlwZSgnRG9jdW1lbnRSZWZlcmVuY2Uub25TbmFwc2hvdCcsICdmdW5jdGlvbicsIGN1cnJBcmcgKyAyLCBhcmdzW2N1cnJBcmcgKyAyXSk7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogYXJnc1tjdXJyQXJnXSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBhcmdzW2N1cnJBcmcgKyAxXSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBhcmdzW2N1cnJBcmcgKyAyXVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5vblNuYXBzaG90SW50ZXJuYWwoaW50ZXJuYWxPcHRpb25zLCBvYnNlcnZlcik7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLm9uU25hcHNob3RJbnRlcm5hbCA9IGZ1bmN0aW9uIChvcHRpb25zLCBvYnNlcnZlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGVyckhhbmRsZXIgPSBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuY2F1Z2h0IEVycm9yIGluIG9uU25hcHNob3Q6JywgZXJyKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvcikge1xyXG4gICAgICAgICAgICBlcnJIYW5kbGVyID0gb2JzZXJ2ZXIuZXJyb3IuYmluZChvYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhc3luY09ic2VydmVyID0gbmV3IEFzeW5jT2JzZXJ2ZXIoe1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvYnNlcnZlci5uZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHNuYXBzaG90LmRvY3Muc2l6ZSA8PSAxLCAnVG9vIG1hbnkgZG9jdW1lbnRzIHJldHVybmVkIG9uIGEgZG9jdW1lbnQgcXVlcnknKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZG9jID0gc25hcHNob3QuZG9jcy5nZXQoX3RoaXMuX2tleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChuZXcgRG9jdW1lbnRTbmFwc2hvdChfdGhpcy5maXJlc3RvcmUsIF90aGlzLl9rZXksIGRvYywgc25hcHNob3QuZnJvbUNhY2hlLCBzbmFwc2hvdC5oYXNQZW5kaW5nV3JpdGVzLCBfdGhpcy5fY29udmVydGVyKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJIYW5kbGVyXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGludGVybmFsTGlzdGVuZXIgPSB0aGlzLl9maXJlc3RvcmVDbGllbnQubGlzdGVuKFF1ZXJ5LmF0UGF0aCh0aGlzLl9rZXkucGF0aCksIGFzeW5jT2JzZXJ2ZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFzeW5jT2JzZXJ2ZXIubXV0ZSgpO1xyXG4gICAgICAgICAgICBfdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnVubGlzdGVuKGludGVybmFsTGlzdGVuZXIpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRSZWZlcmVuY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ0RvY3VtZW50UmVmZXJlbmNlLmdldCcsIGFyZ3VtZW50cywgMCwgMSk7XHJcbiAgICAgICAgdmFsaWRhdGVHZXRPcHRpb25zKCdEb2N1bWVudFJlZmVyZW5jZS5nZXQnLCBvcHRpb25zKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnNvdXJjZSA9PT0gJ2NhY2hlJykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmlyZXN0b3JlXHJcbiAgICAgICAgICAgICAgICAgICAgLmVuc3VyZUNsaWVudENvbmZpZ3VyZWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXREb2N1bWVudEZyb21Mb2NhbENhY2hlKF90aGlzLl9rZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IERvY3VtZW50U25hcHNob3QoX3RoaXMuZmlyZXN0b3JlLCBfdGhpcy5fa2V5LCBkb2MsIFxyXG4gICAgICAgICAgICAgICAgICAgIC8qZnJvbUNhY2hlPSovIHRydWUsIGRvYyBpbnN0YW5jZW9mIERvY3VtZW50ID8gZG9jLmhhc0xvY2FsTXV0YXRpb25zIDogZmFsc2UsIF90aGlzLl9jb252ZXJ0ZXIpKTtcclxuICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5nZXRWaWFTbmFwc2hvdExpc3RlbmVyKHJlc29sdmUsIHJlamVjdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZS5wcm90b3R5cGUuZ2V0VmlhU25hcHNob3RMaXN0ZW5lciA9IGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgdW5saXN0ZW4gPSB0aGlzLm9uU25hcHNob3RJbnRlcm5hbCh7XHJcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IHRydWUsXHJcbiAgICAgICAgICAgIHdhaXRGb3JTeW5jV2hlbk9ubGluZTogdHJ1ZVxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHNuYXApIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXHJcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXHJcbiAgICAgICAgICAgICAgICB1bmxpc3RlbigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzbmFwLmV4aXN0cyAmJiBzbmFwLm1ldGFkYXRhLmZyb21DYWNoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWYgd2UncmUgb25saW5lIGFuZCB0aGUgZG9jdW1lbnQgZG9lc24ndFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0IHRoZW4gd2UgcmVzb2x2ZSB3aXRoIGEgZG9jLmV4aXN0cyBzZXQgdG8gZmFsc2UuIElmXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UncmUgb2ZmbGluZSBob3dldmVyLCB3ZSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhc2UuIFR3byBvcHRpb25zOiAxKSBDYWNoZSB0aGUgbmVnYXRpdmUgcmVzcG9uc2UgZnJvbVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIgc28gd2UgY2FuIGRlbGl2ZXIgdGhhdCBldmVuIHdoZW4geW91J3JlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gb2ZmbGluZSAyKSBBY3R1YWxseSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhlIG9ubGluZSBjYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgJyArICdvZmZsaW5lLicpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNuYXAuZXhpc3RzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgc25hcC5tZXRhZGF0YS5mcm9tQ2FjaGUgJiZcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zICYmXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zb3VyY2UgPT09ICdzZXJ2ZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoaXMgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkb2N1bWVudCBkb2VzIGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAncmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudC4pJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzbmFwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IHJlamVjdFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLnByb3RvdHlwZS53aXRoQ29udmVydGVyID0gZnVuY3Rpb24gKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5fa2V5LCB0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jdW1lbnRSZWZlcmVuY2U7XHJcbn0oKSk7XHJcbnZhciBTbmFwc2hvdE1ldGFkYXRhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU25hcHNob3RNZXRhZGF0YShoYXNQZW5kaW5nV3JpdGVzLCBmcm9tQ2FjaGUpIHtcclxuICAgICAgICB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPSBoYXNQZW5kaW5nV3JpdGVzO1xyXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gZnJvbUNhY2hlO1xyXG4gICAgfVxyXG4gICAgU25hcHNob3RNZXRhZGF0YS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5oYXNQZW5kaW5nV3JpdGVzID09PSBvdGhlci5oYXNQZW5kaW5nV3JpdGVzICYmXHJcbiAgICAgICAgICAgIHRoaXMuZnJvbUNhY2hlID09PSBvdGhlci5mcm9tQ2FjaGUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTbmFwc2hvdE1ldGFkYXRhO1xyXG59KCkpO1xyXG52YXIgRG9jdW1lbnRTbmFwc2hvdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50U25hcHNob3QoX2ZpcmVzdG9yZSwgX2tleSwgX2RvY3VtZW50LCBfZnJvbUNhY2hlLCBfaGFzUGVuZGluZ1dyaXRlcywgX2NvbnZlcnRlcikge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fa2V5ID0gX2tleTtcclxuICAgICAgICB0aGlzLl9kb2N1bWVudCA9IF9kb2N1bWVudDtcclxuICAgICAgICB0aGlzLl9mcm9tQ2FjaGUgPSBfZnJvbUNhY2hlO1xyXG4gICAgICAgIHRoaXMuX2hhc1BlbmRpbmdXcml0ZXMgPSBfaGFzUGVuZGluZ1dyaXRlcztcclxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBfY29udmVydGVyO1xyXG4gICAgfVxyXG4gICAgRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUuZGF0YSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdEb2N1bWVudFNuYXBzaG90LmRhdGEnLCBhcmd1bWVudHMsIDAsIDEpO1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWxpZGF0ZVNuYXBzaG90T3B0aW9ucygnRG9jdW1lbnRTbmFwc2hvdC5kYXRhJywgb3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kb2N1bWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxyXG4gICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNuYXBzaG90ID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIHRoaXMuX2Zyb21DYWNoZSwgdGhpcy5faGFzUGVuZGluZ1dyaXRlcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoc25hcHNob3QsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9KU09iamVjdCh0aGlzLl9kb2N1bWVudC5kYXRhKCksIEZpZWxkVmFsdWVPcHRpb25zLmZyb21TbmFwc2hvdE9wdGlvbnMob3B0aW9ucywgdGhpcy5fZmlyZXN0b3JlLl9hcmVUaW1lc3RhbXBzSW5TbmFwc2hvdHNFbmFibGVkKCkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoZmllbGRQYXRoLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdEb2N1bWVudFNuYXBzaG90LmdldCcsIGFyZ3VtZW50cywgMSwgMik7XHJcbiAgICAgICAgb3B0aW9ucyA9IHZhbGlkYXRlU25hcHNob3RPcHRpb25zKCdEb2N1bWVudFNuYXBzaG90LmdldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9kb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgLmRhdGEoKVxyXG4gICAgICAgICAgICAgICAgLmZpZWxkKGZpZWxkUGF0aEZyb21Bcmd1bWVudCgnRG9jdW1lbnRTbmFwc2hvdC5nZXQnLCBmaWVsZFBhdGgpKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTVmFsdWUodmFsdWUsIEZpZWxkVmFsdWVPcHRpb25zLmZyb21TbmFwc2hvdE9wdGlvbnMob3B0aW9ucywgdGhpcy5fZmlyZXN0b3JlLl9hcmVUaW1lc3RhbXBzSW5TbmFwc2hvdHNFbmFibGVkKCkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZSwgXCJpZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLCBcInJlZlwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5fa2V5LCB0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUsIFwiZXhpc3RzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RvY3VtZW50ICE9PSBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLCBcIm1ldGFkYXRhXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTbmFwc2hvdE1ldGFkYXRhKHRoaXMuX2hhc1BlbmRpbmdXcml0ZXMsIHRoaXMuX2Zyb21DYWNoZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBEb2N1bWVudFNuYXBzaG90KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2xhc3NFcnJvcignaXNFcXVhbCcsICdEb2N1bWVudFNuYXBzaG90JywgMSwgb3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKHRoaXMuX2ZpcmVzdG9yZSA9PT0gb3RoZXIuX2ZpcmVzdG9yZSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9mcm9tQ2FjaGUgPT09IG90aGVyLl9mcm9tQ2FjaGUgJiZcclxuICAgICAgICAgICAgdGhpcy5fa2V5LmlzRXF1YWwob3RoZXIuX2tleSkgJiZcclxuICAgICAgICAgICAgKHRoaXMuX2RvY3VtZW50ID09PSBudWxsXHJcbiAgICAgICAgICAgICAgICA/IG90aGVyLl9kb2N1bWVudCA9PT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgOiB0aGlzLl9kb2N1bWVudC5pc0VxdWFsKG90aGVyLl9kb2N1bWVudCkpICYmXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnZlcnRlciA9PT0gb3RoZXIuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUudG9KU09iamVjdCA9IGZ1bmN0aW9uIChkYXRhLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gX3RoaXMudG9KU1ZhbHVlKHZhbHVlLCBvcHRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50U25hcHNob3QucHJvdG90eXBlLnRvSlNWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvSlNPYmplY3QodmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9KU0FycmF5KHZhbHVlLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBSZWZWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gdmFsdWUudmFsdWUob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhYmFzZSA9IHRoaXMuX2ZpcmVzdG9yZS5lbnN1cmVDbGllbnRDb25maWd1cmVkKCkuZGF0YWJhc2VJZCgpO1xyXG4gICAgICAgICAgICBpZiAoIXZhbHVlLmRhdGFiYXNlSWQuaXNFcXVhbChkYXRhYmFzZSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi82NDEzMDIwMik6IFNvbWVob3cgc3VwcG9ydCBmb3JlaWduIHJlZmVyZW5jZXMuXHJcbiAgICAgICAgICAgICAgICBlcnJvcihcIkRvY3VtZW50IFwiICsgdGhpcy5fa2V5LnBhdGggKyBcIiBjb250YWlucyBhIGRvY3VtZW50IFwiICtcclxuICAgICAgICAgICAgICAgICAgICBcInJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKFwiICtcclxuICAgICAgICAgICAgICAgICAgICAodmFsdWUuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9cIiArIHZhbHVlLmRhdGFiYXNlSWQuZGF0YWJhc2UgKyBcIikgd2hpY2ggaXMgbm90IFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiZGF0YWJhc2UgKFwiICsgZGF0YWJhc2UucHJvamVjdElkICsgXCIvXCIgKyBkYXRhYmFzZS5kYXRhYmFzZSArIFwiKSBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiaW5zdGVhZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZShrZXksIHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS52YWx1ZShvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRTbmFwc2hvdC5wcm90b3R5cGUudG9KU0FycmF5ID0gZnVuY3Rpb24gKGRhdGEsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBkYXRhLmludGVybmFsVmFsdWUubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMudG9KU1ZhbHVlKHZhbHVlLCBvcHRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jdW1lbnRTbmFwc2hvdDtcclxufSgpKTtcclxudmFyIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhRdWVyeURvY3VtZW50U25hcHNob3QsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBRdWVyeURvY3VtZW50U25hcHNob3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgUXVlcnlEb2N1bWVudFNuYXBzaG90LnByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IF9zdXBlci5wcm90b3R5cGUuZGF0YS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xyXG4gICAgICAgIGFzc2VydChkYXRhICE9PSB1bmRlZmluZWQsICdEb2N1bWVudCBpbiBhIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCBzaG91bGQgZXhpc3QnKTtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUXVlcnlEb2N1bWVudFNuYXBzaG90O1xyXG59KERvY3VtZW50U25hcHNob3QpKTtcclxudmFyIFF1ZXJ5JDEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBRdWVyeShfcXVlcnksIGZpcmVzdG9yZSwgX2NvbnZlcnRlcikge1xyXG4gICAgICAgIHRoaXMuX3F1ZXJ5ID0gX3F1ZXJ5O1xyXG4gICAgICAgIHRoaXMuZmlyZXN0b3JlID0gZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IF9jb252ZXJ0ZXI7XHJcbiAgICB9XHJcbiAgICBRdWVyeS5wcm90b3R5cGUud2hlcmUgPSBmdW5jdGlvbiAoZmllbGQsIG9wU3RyLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhbGlkYXRlRXhhY3ROdW1iZXJPZkFyZ3MoJ1F1ZXJ5LndoZXJlJywgYXJndW1lbnRzLCAzKTtcclxuICAgICAgICB2YWxpZGF0ZURlZmluZWQoJ1F1ZXJ5LndoZXJlJywgMywgdmFsdWUpO1xyXG4gICAgICAgIC8vIEVudW1lcmF0ZWQgZnJvbSB0aGUgV2hlcmVGaWx0ZXJPcCB0eXBlIGluIGluZGV4LmQudHMuXHJcbiAgICAgICAgdmFyIHdoZXJlRmlsdGVyT3BFbnVtcyA9IFtcclxuICAgICAgICAgICAgJzwnLFxyXG4gICAgICAgICAgICAnPD0nLFxyXG4gICAgICAgICAgICAnPT0nLFxyXG4gICAgICAgICAgICAnPj0nLFxyXG4gICAgICAgICAgICAnPicsXHJcbiAgICAgICAgICAgICdhcnJheS1jb250YWlucycsXHJcbiAgICAgICAgICAgICdpbicsXHJcbiAgICAgICAgICAgICdhcnJheS1jb250YWlucy1hbnknXHJcbiAgICAgICAgXTtcclxuICAgICAgICB2YWxpZGF0ZVN0cmluZ0VudW0oJ1F1ZXJ5LndoZXJlJywgd2hlcmVGaWx0ZXJPcEVudW1zLCAyLCBvcFN0cik7XHJcbiAgICAgICAgdmFyIGZpZWxkVmFsdWU7XHJcbiAgICAgICAgdmFyIGZpZWxkUGF0aCA9IGZpZWxkUGF0aEZyb21Bcmd1bWVudCgnUXVlcnkud2hlcmUnLCBmaWVsZCk7XHJcbiAgICAgICAgdmFyIG9wZXJhdG9yID0gT3BlcmF0b3IuZnJvbVN0cmluZyhvcFN0cik7XHJcbiAgICAgICAgaWYgKGZpZWxkUGF0aC5pc0tleUZpZWxkKCkpIHtcclxuICAgICAgICAgICAgaWYgKG9wZXJhdG9yID09PSBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyB8fFxyXG4gICAgICAgICAgICAgICAgb3BlcmF0b3IgPT09IE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIFF1ZXJ5LiBZb3UgY2FuJ3QgcGVyZm9ybSAnXCIgKyBvcGVyYXRvci50b1N0cmluZygpICsgXCInIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAncXVlcmllcyBvbiBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG9wZXJhdG9yID09PSBPcGVyYXRvci5JTikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHModmFsdWUsIG9wZXJhdG9yKTtcclxuICAgICAgICAgICAgICAgIHZhciByZWZlcmVuY2VMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdmFsdWU7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5VmFsdWUgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlTGlzdC5wdXNoKHRoaXMucGFyc2VEb2N1bWVudElkVmFsdWUoYXJyYXlWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IG5ldyBBcnJheVZhbHVlKHJlZmVyZW5jZUxpc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IHRoaXMucGFyc2VEb2N1bWVudElkVmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09IE9wZXJhdG9yLklOIHx8XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRvciA9PT0gT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyh2YWx1ZSwgb3BlcmF0b3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpZWxkVmFsdWUgPSB0aGlzLmZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVF1ZXJ5VmFsdWUoJ1F1ZXJ5LndoZXJlJywgdmFsdWUsIFxyXG4gICAgICAgICAgICAvLyBXZSBvbmx5IGFsbG93IG5lc3RlZCBhcnJheXMgZm9yIElOIHF1ZXJpZXMuXHJcbiAgICAgICAgICAgIC8qKiBhbGxvd0FycmF5cyA9ICovIG9wZXJhdG9yID09PSBPcGVyYXRvci5JTiA/IHRydWUgOiBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmaWx0ZXIgPSBGaWVsZEZpbHRlci5jcmVhdGUoZmllbGRQYXRoLCBvcGVyYXRvciwgZmllbGRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZU5ld0ZpbHRlcihmaWx0ZXIpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5fcXVlcnkuYWRkRmlsdGVyKGZpbHRlciksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5vcmRlckJ5ID0gZnVuY3Rpb24gKGZpZWxkLCBkaXJlY3Rpb25TdHIpIHtcclxuICAgICAgICB2YWxpZGF0ZUJldHdlZW5OdW1iZXJPZkFyZ3MoJ1F1ZXJ5Lm9yZGVyQnknLCBhcmd1bWVudHMsIDEsIDIpO1xyXG4gICAgICAgIHZhbGlkYXRlT3B0aW9uYWxBcmdUeXBlKCdRdWVyeS5vcmRlckJ5JywgJ25vbi1lbXB0eSBzdHJpbmcnLCAyLCBkaXJlY3Rpb25TdHIpO1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb247XHJcbiAgICAgICAgaWYgKGRpcmVjdGlvblN0ciA9PT0gdW5kZWZpbmVkIHx8IGRpcmVjdGlvblN0ciA9PT0gJ2FzYycpIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uID0gRGlyZWN0aW9uLkFTQ0VORElORztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uU3RyID09PSAnZGVzYycpIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uID0gRGlyZWN0aW9uLkRFU0NFTkRJTkc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkZ1bmN0aW9uIFF1ZXJ5Lm9yZGVyQnkoKSBoYXMgdW5rbm93biBkaXJlY3Rpb24gJ1wiICsgZGlyZWN0aW9uU3RyICsgXCInLCBcIiArXHJcbiAgICAgICAgICAgICAgICBcImV4cGVjdGVkICdhc2MnIG9yICdkZXNjJy5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9xdWVyeS5zdGFydEF0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBRdWVyeS5zdGFydEF0KCkgb3IgJyArXHJcbiAgICAgICAgICAgICAgICAnUXVlcnkuc3RhcnRBZnRlcigpIGJlZm9yZSBjYWxsaW5nIFF1ZXJ5Lm9yZGVyQnkoKS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5LmVuZEF0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBRdWVyeS5lbmRBdCgpIG9yICcgK1xyXG4gICAgICAgICAgICAgICAgJ1F1ZXJ5LmVuZEJlZm9yZSgpIGJlZm9yZSBjYWxsaW5nIFF1ZXJ5Lm9yZGVyQnkoKS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpZWxkUGF0aCA9IGZpZWxkUGF0aEZyb21Bcmd1bWVudCgnUXVlcnkub3JkZXJCeScsIGZpZWxkKTtcclxuICAgICAgICB2YXIgb3JkZXJCeSA9IG5ldyBPcmRlckJ5KGZpZWxkUGF0aCwgZGlyZWN0aW9uKTtcclxuICAgICAgICB0aGlzLnZhbGlkYXRlTmV3T3JkZXJCeShvcmRlckJ5KTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LmFkZE9yZGVyQnkob3JkZXJCeSksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5saW1pdCA9IGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnUXVlcnkubGltaXQnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnUXVlcnkubGltaXQnLCAnbnVtYmVyJywgMSwgbik7XHJcbiAgICAgICAgdmFsaWRhdGVQb3NpdGl2ZU51bWJlcignUXVlcnkubGltaXQnLCAxLCBuKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LndpdGhMaW1pdFRvRmlyc3QobiksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5saW1pdFRvTGFzdCA9IGZ1bmN0aW9uIChuKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnUXVlcnkubGltaXRUb0xhc3QnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnUXVlcnkubGltaXRUb0xhc3QnLCAnbnVtYmVyJywgMSwgbik7XHJcbiAgICAgICAgdmFsaWRhdGVQb3NpdGl2ZU51bWJlcignUXVlcnkubGltaXRUb0xhc3QnLCAxLCBuKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LndpdGhMaW1pdFRvTGFzdChuKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnN0YXJ0QXQgPSBmdW5jdGlvbiAoZG9jT3JGaWVsZCkge1xyXG4gICAgICAgIHZhciBmaWVsZHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBmaWVsZHNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnUXVlcnkuc3RhcnRBdCcsIGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgdmFyIGJvdW5kID0gdGhpcy5ib3VuZEZyb21Eb2NPckZpZWxkcygnUXVlcnkuc3RhcnRBdCcsIGRvY09yRmllbGQsIGZpZWxkcywgXHJcbiAgICAgICAgLypiZWZvcmU9Ki8gdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeS53aXRoU3RhcnRBdChib3VuZCksIHRoaXMuZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5zdGFydEFmdGVyID0gZnVuY3Rpb24gKGRvY09yRmllbGQpIHtcclxuICAgICAgICB2YXIgZmllbGRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZmllbGRzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YWxpZGF0ZUF0TGVhc3ROdW1iZXJPZkFyZ3MoJ1F1ZXJ5LnN0YXJ0QWZ0ZXInLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhciBib3VuZCA9IHRoaXMuYm91bmRGcm9tRG9jT3JGaWVsZHMoJ1F1ZXJ5LnN0YXJ0QWZ0ZXInLCBkb2NPckZpZWxkLCBmaWVsZHMsIFxyXG4gICAgICAgIC8qYmVmb3JlPSovIGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LndpdGhTdGFydEF0KGJvdW5kKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmVuZEJlZm9yZSA9IGZ1bmN0aW9uIChkb2NPckZpZWxkKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZpZWxkc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBdExlYXN0TnVtYmVyT2ZBcmdzKCdRdWVyeS5lbmRCZWZvcmUnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhciBib3VuZCA9IHRoaXMuYm91bmRGcm9tRG9jT3JGaWVsZHMoJ1F1ZXJ5LmVuZEJlZm9yZScsIGRvY09yRmllbGQsIGZpZWxkcywgXHJcbiAgICAgICAgLypiZWZvcmU9Ki8gdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeS53aXRoRW5kQXQoYm91bmQpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZW5kQXQgPSBmdW5jdGlvbiAoZG9jT3JGaWVsZCkge1xyXG4gICAgICAgIHZhciBmaWVsZHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBmaWVsZHNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhbGlkYXRlQXRMZWFzdE51bWJlck9mQXJncygnUXVlcnkuZW5kQXQnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhciBib3VuZCA9IHRoaXMuYm91bmRGcm9tRG9jT3JGaWVsZHMoJ1F1ZXJ5LmVuZEF0JywgZG9jT3JGaWVsZCwgZmllbGRzLCBcclxuICAgICAgICAvKmJlZm9yZT0qLyBmYWxzZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9xdWVyeS53aXRoRW5kQXQoYm91bmQpLCB0aGlzLmZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuaXNFcXVhbCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgUXVlcnkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IGludmFsaWRDbGFzc0Vycm9yKCdpc0VxdWFsJywgJ1F1ZXJ5JywgMSwgb3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKHRoaXMuZmlyZXN0b3JlID09PSBvdGhlci5maXJlc3RvcmUgJiYgdGhpcy5fcXVlcnkuaXNFcXVhbChvdGhlci5fcXVlcnkpKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUud2l0aENvbnZlcnRlciA9IGZ1bmN0aW9uIChjb252ZXJ0ZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX3F1ZXJ5LCB0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICAvKiogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGJvdW5kIGZyb20gYSBkb2N1bWVudCBvciBmaWVsZHMgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5ib3VuZEZyb21Eb2NPckZpZWxkcyA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBkb2NPckZpZWxkLCBmaWVsZHMsIGJlZm9yZSkge1xyXG4gICAgICAgIHZhbGlkYXRlRGVmaW5lZChtZXRob2ROYW1lLCAxLCBkb2NPckZpZWxkKTtcclxuICAgICAgICBpZiAoZG9jT3JGaWVsZCBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIlRvbyBtYW55IGFyZ3VtZW50cyBwcm92aWRlZCB0byBcIiArIG1ldGhvZE5hbWUgKyBcIigpLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc25hcCA9IGRvY09yRmllbGQ7XHJcbiAgICAgICAgICAgIGlmICghc25hcC5leGlzdHMpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLk5PVF9GT1VORCwgXCJDYW4ndCB1c2UgYSBEb2N1bWVudFNuYXBzaG90IHRoYXQgZG9lc24ndCBleGlzdCBmb3IgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIChtZXRob2ROYW1lICsgXCIoKS5cIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJvdW5kRnJvbURvY3VtZW50KG1ldGhvZE5hbWUsIHNuYXAuX2RvY3VtZW50LCBiZWZvcmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGFsbEZpZWxkcyA9IFtkb2NPckZpZWxkXS5jb25jYXQoZmllbGRzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm91bmRGcm9tRmllbGRzKG1ldGhvZE5hbWUsIGFsbEZpZWxkcywgYmVmb3JlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBCb3VuZCBmcm9tIGEgcXVlcnkgYW5kIGEgZG9jdW1lbnQuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHRoZSBCb3VuZCB3aWxsIGFsd2F5cyBpbmNsdWRlIHRoZSBrZXkgb2YgdGhlIGRvY3VtZW50XHJcbiAgICAgKiBhbmQgc28gb25seSB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgd2lsbCBjb21wYXJlIGVxdWFsIHRvIHRoZSByZXR1cm5lZFxyXG4gICAgICogcG9zaXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogV2lsbCB0aHJvdyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgY29udGFpbiBhbGwgZmllbGRzIG9mIHRoZSBvcmRlciBieVxyXG4gICAgICogb2YgdGhlIHF1ZXJ5IG9yIGlmIGFueSBvZiB0aGUgZmllbGRzIGluIHRoZSBvcmRlciBieSBhcmUgYW4gdW5jb21taXR0ZWRcclxuICAgICAqIHNlcnZlciB0aW1lc3RhbXAuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5ib3VuZEZyb21Eb2N1bWVudCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBkb2MsIGJlZm9yZSkge1xyXG4gICAgICAgIHZhciBjb21wb25lbnRzID0gW107XHJcbiAgICAgICAgLy8gQmVjYXVzZSBwZW9wbGUgZXhwZWN0IHRvIGNvbnRpbnVlL2VuZCBhIHF1ZXJ5IGF0IHRoZSBleGFjdCBkb2N1bWVudFxyXG4gICAgICAgIC8vIHByb3ZpZGVkLCB3ZSBuZWVkIHRvIHVzZSB0aGUgaW1wbGljaXQgc29ydCBvcmRlciByYXRoZXIgdGhhbiB0aGUgZXhwbGljaXRcclxuICAgICAgICAvLyBzb3J0IG9yZGVyLCBiZWNhdXNlIGl0J3MgZ3VhcmFudGVlZCB0byBjb250YWluIHRoZSBkb2N1bWVudCBrZXkuIFRoYXQgd2F5XHJcbiAgICAgICAgLy8gdGhlIHBvc2l0aW9uIGJlY29tZXMgdW5hbWJpZ3VvdXMgYW5kIHRoZSBxdWVyeSBjb250aW51ZXMvZW5kcyBleGFjdGx5IGF0XHJcbiAgICAgICAgLy8gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiBXaXRob3V0IHRoZSBrZXkgKGJ5IHVzaW5nIHRoZSBleHBsaWNpdCBzb3J0XHJcbiAgICAgICAgLy8gb3JkZXJzKSwgbXVsdGlwbGUgZG9jdW1lbnRzIGNvdWxkIG1hdGNoIHRoZSBwb3NpdGlvbiwgeWllbGRpbmcgZHVwbGljYXRlXHJcbiAgICAgICAgLy8gcmVzdWx0cy5cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5fcXVlcnkub3JkZXJCeTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG9yZGVyQnkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGlmIChvcmRlckJ5LmZpZWxkLmlzS2V5RmllbGQoKSkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKG5ldyBSZWZWYWx1ZSh0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgZG9jLmtleSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gZG9jLmZpZWxkKG9yZGVyQnkuZmllbGQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgU2VydmVyVGltZXN0YW1wVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgXCInICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJCeS5maWVsZCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdcIiBpcyBhbiB1bmNvbW1pdHRlZCBzZXJ2ZXIgdGltZXN0YW1wLiAoU2luY2UgdGhlIHZhbHVlIG9mICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndGhpcyBmaWVsZCBpcyB1bmtub3duLCB5b3UgY2Fubm90IHN0YXJ0L2VuZCBhIHF1ZXJ5IHdpdGggaXQuKScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gb3JkZXJCeS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCJkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkICdcIiArIGZpZWxkICsgXCInICh1c2VkIGFzIHRoZSBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKGNvbXBvbmVudHMsIGJlZm9yZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0cyBhIGxpc3Qgb2YgZmllbGQgdmFsdWVzIHRvIGEgQm91bmQgZm9yIHRoZSBnaXZlbiBxdWVyeS5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmJvdW5kRnJvbUZpZWxkcyA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCB2YWx1ZXMsIGJlZm9yZSkge1xyXG4gICAgICAgIC8vIFVzZSBleHBsaWNpdCBvcmRlciBieSdzIGJlY2F1c2UgaXQgaGFzIHRvIG1hdGNoIHRoZSBxdWVyeSB0aGUgdXNlciBtYWRlXHJcbiAgICAgICAgdmFyIG9yZGVyQnkgPSB0aGlzLl9xdWVyeS5leHBsaWNpdE9yZGVyQnk7XHJcbiAgICAgICAgaWYgKHZhbHVlcy5sZW5ndGggPiBvcmRlckJ5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIlRvbyBtYW55IGFyZ3VtZW50cyBwcm92aWRlZCB0byBcIiArIG1ldGhvZE5hbWUgKyBcIigpLiBcIiArXHJcbiAgICAgICAgICAgICAgICBcIlRoZSBudW1iZXIgb2YgYXJndW1lbnRzIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBcIiArXHJcbiAgICAgICAgICAgICAgICBcIm51bWJlciBvZiBRdWVyeS5vcmRlckJ5KCkgY2xhdXNlc1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcmF3VmFsdWUgPSB2YWx1ZXNbaV07XHJcbiAgICAgICAgICAgIHZhciBvcmRlckJ5Q29tcG9uZW50ID0gb3JkZXJCeVtpXTtcclxuICAgICAgICAgICAgaWYgKG9yZGVyQnlDb21wb25lbnQuZmllbGQuaXNLZXlGaWVsZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJhd1ZhbHVlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIGRvY3VtZW50IElEIGluIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKG1ldGhvZE5hbWUgKyBcIigpLCBidXQgZ290IGEgXCIgKyB0eXBlb2YgcmF3VmFsdWUpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fcXVlcnkuaXNDb2xsZWN0aW9uR3JvdXBRdWVyeSgpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgcmF3VmFsdWUuaW5kZXhPZignLycpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYW5kIG9yZGVyaW5nIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIFwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKFwidGhlIHZhbHVlIHBhc3NlZCB0byBcIiArIG1ldGhvZE5hbWUgKyBcIigpIG11c3QgYmUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0IFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcIidcIiArIHJhd1ZhbHVlICsgXCInIGNvbnRhaW5zIGEgc2xhc2guXCIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5fcXVlcnkucGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhyYXdWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KHBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBhbmQgb3JkZXJpbmcgYnkgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCJGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvIFwiICsgbWV0aG9kTmFtZSArIFwiKCkgbXVzdCByZXN1bHQgaW4gYSBcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCJ2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJ1wiICsgcGF0aCArIFwiJyBpcyBub3QgYmVjYXVzZSBpdCBjb250YWlucyBhbiBvZGQgbnVtYmVyIFwiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwib2Ygc2VnbWVudHMuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IG5ldyBEb2N1bWVudEtleShwYXRoKTtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHMucHVzaChuZXcgUmVmVmFsdWUodGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGtleSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWQgPSB0aGlzLmZpcmVzdG9yZS5fZGF0YUNvbnZlcnRlci5wYXJzZVF1ZXJ5VmFsdWUobWV0aG9kTmFtZSwgcmF3VmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKHdyYXBwZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgQm91bmQoY29tcG9uZW50cywgYmVmb3JlKTtcclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUub25TbmFwc2hvdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVCZXR3ZWVuTnVtYmVyT2ZBcmdzKCdRdWVyeS5vblNuYXBzaG90JywgYXJndW1lbnRzLCAxLCA0KTtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIHZhciBvYnNlcnZlcjtcclxuICAgICAgICB2YXIgY3VyckFyZyA9IDA7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzW2N1cnJBcmddID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgICAgICAhaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1tjdXJyQXJnXSkpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IGFyZ3NbY3VyckFyZ107XHJcbiAgICAgICAgICAgIHZhbGlkYXRlT3B0aW9uTmFtZXMoJ1F1ZXJ5Lm9uU25hcHNob3QnLCBvcHRpb25zLCBbXHJcbiAgICAgICAgICAgICAgICAnaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcydcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFR5cGUoJ1F1ZXJ5Lm9uU25hcHNob3QnLCAnYm9vbGVhbicsICdpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzJywgb3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKTtcclxuICAgICAgICAgICAgY3VyckFyZysrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1tjdXJyQXJnXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBhcmdzW2N1cnJBcmddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdRdWVyeS5vblNuYXBzaG90JywgJ2Z1bmN0aW9uJywgY3VyckFyZywgYXJnc1tjdXJyQXJnXSk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlT3B0aW9uYWxBcmdUeXBlKCdRdWVyeS5vblNuYXBzaG90JywgJ2Z1bmN0aW9uJywgY3VyckFyZyArIDEsIGFyZ3NbY3VyckFyZyArIDFdKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUoJ1F1ZXJ5Lm9uU25hcHNob3QnLCAnZnVuY3Rpb24nLCBjdXJyQXJnICsgMiwgYXJnc1tjdXJyQXJnICsgMl0pO1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IGFyZ3NbY3VyckFyZ10sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogYXJnc1tjdXJyQXJnICsgMV0sXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogYXJnc1tjdXJyQXJnICsgMl1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0KHRoaXMuX3F1ZXJ5KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vblNuYXBzaG90SW50ZXJuYWwob3B0aW9ucywgb2JzZXJ2ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS5vblNuYXBzaG90SW50ZXJuYWwgPSBmdW5jdGlvbiAob3B0aW9ucywgb2JzZXJ2ZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBlcnJIYW5kbGVyID0gZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmNhdWdodCBFcnJvciBpbiBvblNuYXBzaG90OicsIGVycik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IpIHtcclxuICAgICAgICAgICAgZXJySGFuZGxlciA9IG9ic2VydmVyLmVycm9yLmJpbmQob2JzZXJ2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYXN5bmNPYnNlcnZlciA9IG5ldyBBc3luY09ic2VydmVyKHtcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyLm5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KG5ldyBRdWVyeVNuYXBzaG90KF90aGlzLmZpcmVzdG9yZSwgX3RoaXMuX3F1ZXJ5LCByZXN1bHQsIF90aGlzLl9jb252ZXJ0ZXIpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGVyckhhbmRsZXJcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgZmlyZXN0b3JlQ2xpZW50ID0gdGhpcy5maXJlc3RvcmUuZW5zdXJlQ2xpZW50Q29uZmlndXJlZCgpO1xyXG4gICAgICAgIHZhciBpbnRlcm5hbExpc3RlbmVyID0gZmlyZXN0b3JlQ2xpZW50Lmxpc3Rlbih0aGlzLl9xdWVyeSwgYXN5bmNPYnNlcnZlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYXN5bmNPYnNlcnZlci5tdXRlKCk7XHJcbiAgICAgICAgICAgIGZpcmVzdG9yZUNsaWVudC51bmxpc3RlbihpbnRlcm5hbExpc3RlbmVyKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS52YWxpZGF0ZUhhc0V4cGxpY2l0T3JkZXJCeUZvckxpbWl0VG9MYXN0ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgaWYgKHF1ZXJ5Lmhhc0xpbWl0VG9MYXN0KCkgJiYgcXVlcnkuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTklNUExFTUVOVEVELCAnbGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZScpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnUXVlcnkuZ2V0JywgYXJndW1lbnRzLCAwLCAxKTtcclxuICAgICAgICB2YWxpZGF0ZUdldE9wdGlvbnMoJ1F1ZXJ5LmdldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdCh0aGlzLl9xdWVyeSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5zb3VyY2UgPT09ICdjYWNoZScpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZpcmVzdG9yZVxyXG4gICAgICAgICAgICAgICAgICAgIC5lbnN1cmVDbGllbnRDb25maWd1cmVkKClcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0RG9jdW1lbnRzRnJvbUxvY2FsQ2FjaGUoX3RoaXMuX3F1ZXJ5KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh2aWV3U25hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IFF1ZXJ5U25hcHNob3QoX3RoaXMuZmlyZXN0b3JlLCBfdGhpcy5fcXVlcnksIHZpZXdTbmFwLCBfdGhpcy5fY29udmVydGVyKSk7XHJcbiAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0VmlhU25hcHNob3RMaXN0ZW5lcihyZXNvbHZlLCByZWplY3QsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnkucHJvdG90eXBlLmdldFZpYVNuYXBzaG90TGlzdGVuZXIgPSBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHVubGlzdGVuID0gdGhpcy5vblNuYXBzaG90SW50ZXJuYWwoe1xyXG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiB0cnVlLFxyXG4gICAgICAgICAgICB3YWl0Rm9yU3luY1doZW5PbmxpbmU6IHRydWVcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXHJcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXHJcbiAgICAgICAgICAgICAgICB1bmxpc3RlbigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5tZXRhZGF0YS5mcm9tQ2FjaGUgJiZcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zICYmXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zb3VyY2UgPT09ICdzZXJ2ZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RvY3VtZW50cyBtYXkgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogcmVqZWN0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGdpdmVuIGRvY3VtZW50SWRWYWx1ZSBpbnRvIGEgUmVmZXJlbmNlVmFsdWUsIHRocm93aW5nXHJcbiAgICAgKiBhcHByb3ByaWF0ZSBlcnJvcnMgaWYgdGhlIHZhbHVlIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYSBEb2N1bWVudFJlZmVyZW5jZVxyXG4gICAgICogb3IgU3RyaW5nLCBvciBpZiB0aGUgc3RyaW5nIGlzIG1hbGZvcm1lZC5cclxuICAgICAqL1xyXG4gICAgUXVlcnkucHJvdG90eXBlLnBhcnNlRG9jdW1lbnRJZFZhbHVlID0gZnVuY3Rpb24gKGRvY3VtZW50SWRWYWx1ZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnRJZFZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnRJZFZhbHVlID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ211c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3F1ZXJ5LmlzQ29sbGVjdGlvbkdyb3VwUXVlcnkoKSAmJlxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRJZFZhbHVlLmluZGV4T2YoJy8nKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYnkgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIChcIidcIiArIGRvY3VtZW50SWRWYWx1ZSArIFwiJyBjb250YWlucyBhICcvJyBjaGFyYWN0ZXIuXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMuX3F1ZXJ5LnBhdGguY2hpbGQoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZG9jdW1lbnRJZFZhbHVlKSk7XHJcbiAgICAgICAgICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShwYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBieSBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgXCJGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcHJvdmlkZWQgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiYnV0ICdcIiArIHBhdGggKyBcIicgaXMgbm90IGJlY2F1c2UgaXQgaGFzIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMgKFwiICsgcGF0aC5sZW5ndGggKyBcIikuXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZlZhbHVlKHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBuZXcgRG9jdW1lbnRLZXkocGF0aCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkb2N1bWVudElkVmFsdWUgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVmID0gZG9jdW1lbnRJZFZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlZlZhbHVlKHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCByZWYuX2tleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IGl0IHdhczogXCIgK1xyXG4gICAgICAgICAgICAgICAgKHZhbHVlRGVzY3JpcHRpb24oZG9jdW1lbnRJZFZhbHVlKSArIFwiLlwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbnRvIGEgZGlzanVuY3RyaXZlIGZpbHRlciBzYXRpc2ZpZXMgYWxsXHJcbiAgICAgKiBhcnJheSByZXF1aXJlbWVudHMuXHJcbiAgICAgKi9cclxuICAgIFF1ZXJ5LnByb3RvdHlwZS52YWxpZGF0ZURpc2p1bmN0aXZlRmlsdGVyRWxlbWVudHMgPSBmdW5jdGlvbiAodmFsdWUsIG9wZXJhdG9yKSB7XHJcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSB8fCB2YWx1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgUXVlcnkuIEEgbm9uLWVtcHR5IGFycmF5IGlzIHJlcXVpcmVkIGZvciAnICtcclxuICAgICAgICAgICAgICAgIChcIidcIiArIG9wZXJhdG9yLnRvU3RyaW5nKCkgKyBcIicgZmlsdGVycy5cIikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMTApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIFF1ZXJ5LiAnXCIgKyBvcGVyYXRvci50b1N0cmluZygpICsgXCInIGZpbHRlcnMgc3VwcG9ydCBhIFwiICtcclxuICAgICAgICAgICAgICAgICdtYXhpbXVtIG9mIDEwIGVsZW1lbnRzIGluIHRoZSB2YWx1ZSBhcnJheS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YobnVsbCkgPj0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgUXVlcnkuICdcIiArIG9wZXJhdG9yLnRvU3RyaW5nKCkgKyBcIicgZmlsdGVycyBjYW5ub3QgY29udGFpbiAnbnVsbCcgXCIgK1xyXG4gICAgICAgICAgICAgICAgJ2luIHRoZSB2YWx1ZSBhcnJheS4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbHVlLmZpbHRlcihmdW5jdGlvbiAoZWxlbWVudCkgeyByZXR1cm4gTnVtYmVyLmlzTmFOKGVsZW1lbnQpOyB9KS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBRdWVyeS4gJ1wiICsgb3BlcmF0b3IudG9TdHJpbmcoKSArIFwiJyBmaWx0ZXJzIGNhbm5vdCBjb250YWluICdOYU4nIFwiICtcclxuICAgICAgICAgICAgICAgICdpbiB0aGUgdmFsdWUgYXJyYXkuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS52YWxpZGF0ZU5ld0ZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICBpZiAoZmlsdGVyIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHtcclxuICAgICAgICAgICAgdmFyIGFycmF5T3BzID0gW09wZXJhdG9yLkFSUkFZX0NPTlRBSU5TLCBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlldO1xyXG4gICAgICAgICAgICB2YXIgZGlzanVuY3RpdmVPcHMgPSBbT3BlcmF0b3IuSU4sIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWV07XHJcbiAgICAgICAgICAgIHZhciBpc0FycmF5T3AgPSBhcnJheU9wcy5pbmRleE9mKGZpbHRlci5vcCkgPj0gMDtcclxuICAgICAgICAgICAgdmFyIGlzRGlzanVuY3RpdmVPcCA9IGRpc2p1bmN0aXZlT3BzLmluZGV4T2YoZmlsdGVyLm9wKSA+PSAwO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyLmlzSW5lcXVhbGl0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdGaWVsZCA9IHRoaXMuX3F1ZXJ5LmdldEluZXF1YWxpdHlGaWx0ZXJGaWVsZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmllbGQgIT09IG51bGwgJiYgIWV4aXN0aW5nRmllbGQuaXNFcXVhbChmaWx0ZXIuZmllbGQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIEFsbCB3aGVyZSBmaWx0ZXJzIHdpdGggYW4gaW5lcXVhbGl0eScgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnICg8LCA8PSwgPiwgb3IgPj0pIG11c3QgYmUgb24gdGhlIHNhbWUgZmllbGQuIEJ1dCB5b3UgaGF2ZScgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoXCIgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uICdcIiArIGV4aXN0aW5nRmllbGQudG9TdHJpbmcoKSArIFwiJ1wiKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChcIiBhbmQgJ1wiICsgZmlsdGVyLmZpZWxkLnRvU3RyaW5nKCkgKyBcIidcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0T3JkZXJCeUZpZWxkID0gdGhpcy5fcXVlcnkuZ2V0Rmlyc3RPcmRlckJ5RmllbGQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdE9yZGVyQnlGaWVsZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVPcmRlckJ5QW5kSW5lcXVhbGl0eU1hdGNoKGZpbHRlci5maWVsZCwgZmlyc3RPcmRlckJ5RmllbGQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzRGlzanVuY3RpdmVPcCB8fCBpc0FycmF5T3ApIHtcclxuICAgICAgICAgICAgICAgIC8vIFlvdSBjYW4gaGF2ZSBhdCBtb3N0IDEgZGlzanVuY3RpdmUgZmlsdGVyIGFuZCAxIGFycmF5IGZpbHRlci4gQ2hlY2sgaWZcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBuZXcgZmlsdGVyIGNvbmZsaWN0cyB3aXRoIGFuIGV4aXN0aW5nIG9uZS5cclxuICAgICAgICAgICAgICAgIHZhciBjb25mbGljdGluZ09wID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmIChpc0Rpc2p1bmN0aXZlT3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25mbGljdGluZ09wID0gdGhpcy5fcXVlcnkuZmluZEZpbHRlck9wZXJhdG9yKGRpc2p1bmN0aXZlT3BzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjb25mbGljdGluZ09wID09PSBudWxsICYmIGlzQXJyYXlPcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0aW5nT3AgPSB0aGlzLl9xdWVyeS5maW5kRmlsdGVyT3BlcmF0b3IoYXJyYXlPcHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZsaWN0aW5nT3AgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHNwZWNpYWwgY2FzZSB3aGVuIGl0J3MgYSBkdXBsaWNhdGUgb3AgdG8gZ2l2ZSBhIHNsaWdodGx5IGNsZWFyZXIgZXJyb3IgbWVzc2FnZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmxpY3RpbmdPcCA9PT0gZmlsdGVyLm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFwiJ1wiICsgZmlsdGVyLm9wLnRvU3RyaW5nKCkgKyBcIicgZmlsdGVyLlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlICdcIiArIGZpbHRlci5vcC50b1N0cmluZygpICsgXCInIGZpbHRlcnMgXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFwid2l0aCAnXCIgKyBjb25mbGljdGluZ09wLnRvU3RyaW5nKCkgKyBcIicgZmlsdGVycy5cIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBRdWVyeS5wcm90b3R5cGUudmFsaWRhdGVOZXdPcmRlckJ5ID0gZnVuY3Rpb24gKG9yZGVyQnkpIHtcclxuICAgICAgICBpZiAodGhpcy5fcXVlcnkuZ2V0Rmlyc3RPcmRlckJ5RmllbGQoKSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBvcmRlciBieS4gSXQgbXVzdCBtYXRjaCBhbnkgaW5lcXVhbGl0eS5cclxuICAgICAgICAgICAgdmFyIGluZXF1YWxpdHlGaWVsZCA9IHRoaXMuX3F1ZXJ5LmdldEluZXF1YWxpdHlGaWx0ZXJGaWVsZCgpO1xyXG4gICAgICAgICAgICBpZiAoaW5lcXVhbGl0eUZpZWxkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlT3JkZXJCeUFuZEluZXF1YWxpdHlNYXRjaChpbmVxdWFsaXR5RmllbGQsIG9yZGVyQnkuZmllbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFF1ZXJ5LnByb3RvdHlwZS52YWxpZGF0ZU9yZGVyQnlBbmRJbmVxdWFsaXR5TWF0Y2ggPSBmdW5jdGlvbiAoaW5lcXVhbGl0eSwgb3JkZXJCeSkge1xyXG4gICAgICAgIGlmICghb3JkZXJCeS5pc0VxdWFsKGluZXF1YWxpdHkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IGhhdmUgYSB3aGVyZSBmaWx0ZXIgd2l0aCBhbiBpbmVxdWFsaXR5IFwiICtcclxuICAgICAgICAgICAgICAgIChcIig8LCA8PSwgPiwgb3IgPj0pIG9uIGZpZWxkICdcIiArIGluZXF1YWxpdHkudG9TdHJpbmcoKSArIFwiJyBcIikgK1xyXG4gICAgICAgICAgICAgICAgKFwiYW5kIHNvIHlvdSBtdXN0IGFsc28gdXNlICdcIiArIGluZXF1YWxpdHkudG9TdHJpbmcoKSArIFwiJyBcIikgK1xyXG4gICAgICAgICAgICAgICAgXCJhcyB5b3VyIGZpcnN0IFF1ZXJ5Lm9yZGVyQnkoKSwgYnV0IHlvdXIgZmlyc3QgUXVlcnkub3JkZXJCeSgpIFwiICtcclxuICAgICAgICAgICAgICAgIChcImlzIG9uIGZpZWxkICdcIiArIG9yZGVyQnkudG9TdHJpbmcoKSArIFwiJyBpbnN0ZWFkLlwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeTtcclxufSgpKTtcclxudmFyIFF1ZXJ5U25hcHNob3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBRdWVyeVNuYXBzaG90KF9maXJlc3RvcmUsIF9vcmlnaW5hbFF1ZXJ5LCBfc25hcHNob3QsIF9jb252ZXJ0ZXIpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX29yaWdpbmFsUXVlcnkgPSBfb3JpZ2luYWxRdWVyeTtcclxuICAgICAgICB0aGlzLl9zbmFwc2hvdCA9IF9zbmFwc2hvdDtcclxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBfY29udmVydGVyO1xyXG4gICAgICAgIHRoaXMuX2NhY2hlZENoYW5nZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IFNuYXBzaG90TWV0YWRhdGEoX3NuYXBzaG90Lmhhc1BlbmRpbmdXcml0ZXMsIF9zbmFwc2hvdC5mcm9tQ2FjaGUpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLCBcImRvY3NcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7IHJldHVybiByZXN1bHQucHVzaChkb2MpOyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeVNuYXBzaG90LnByb3RvdHlwZSwgXCJlbXB0eVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLmlzRW1wdHkoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdWVyeVNuYXBzaG90LnByb3RvdHlwZSwgXCJzaXplXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NuYXBzaG90LmRvY3Muc2l6ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnUXVlcnlTbmFwc2hvdC5mb3JFYWNoJywgYXJndW1lbnRzLCAxLCAyKTtcclxuICAgICAgICB2YWxpZGF0ZUFyZ1R5cGUoJ1F1ZXJ5U25hcHNob3QuZm9yRWFjaCcsICdmdW5jdGlvbicsIDEsIGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLl9zbmFwc2hvdC5kb2NzLmZvckVhY2goZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIF90aGlzLmNvbnZlcnRUb0RvY3VtZW50SW1wbChkb2MpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUsIFwicXVlcnlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5JDEodGhpcy5fb3JpZ2luYWxRdWVyeSwgdGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUuZG9jQ2hhbmdlcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVPcHRpb25OYW1lcygnUXVlcnlTbmFwc2hvdC5kb2NDaGFuZ2VzJywgb3B0aW9ucywgW1xyXG4gICAgICAgICAgICAgICAgJ2luY2x1ZGVNZXRhZGF0YUNoYW5nZXMnXHJcbiAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKCdRdWVyeVNuYXBzaG90LmRvY0NoYW5nZXMnLCAnYm9vbGVhbicsICdpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzJywgb3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPSAhIShvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyk7XHJcbiAgICAgICAgaWYgKGluY2x1ZGVNZXRhZGF0YUNoYW5nZXMgJiYgdGhpcy5fc25hcHNob3QuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1RvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgJyArXHJcbiAgICAgICAgICAgICAgICAnYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlZENoYW5nZXMgfHxcclxuICAgICAgICAgICAgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgIT09IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FjaGVkQ2hhbmdlcyA9IGNoYW5nZXNGcm9tU25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzLCB0aGlzLl9zbmFwc2hvdCwgdGhpcy5fY29udmVydGVyKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPSBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkQ2hhbmdlcztcclxuICAgIH07XHJcbiAgICAvKiogQ2hlY2sgdGhlIGVxdWFsaXR5LiBUaGUgY2FsbCBjYW4gYmUgdmVyeSBleHBlbnNpdmUuICovXHJcbiAgICBRdWVyeVNuYXBzaG90LnByb3RvdHlwZS5pc0VxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBRdWVyeVNuYXBzaG90KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBpbnZhbGlkQ2xhc3NFcnJvcignaXNFcXVhbCcsICdRdWVyeVNuYXBzaG90JywgMSwgb3RoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKHRoaXMuX2ZpcmVzdG9yZSA9PT0gb3RoZXIuX2ZpcmVzdG9yZSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9vcmlnaW5hbFF1ZXJ5LmlzRXF1YWwob3RoZXIuX29yaWdpbmFsUXVlcnkpICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3NuYXBzaG90LmlzRXF1YWwob3RoZXIuX3NuYXBzaG90KSAmJlxyXG4gICAgICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPT09IG90aGVyLl9jb252ZXJ0ZXIpO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLmNvbnZlcnRUb0RvY3VtZW50SW1wbCA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIGRvYy5rZXksIGRvYywgdGhpcy5tZXRhZGF0YS5mcm9tQ2FjaGUsIHRoaXMuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhkb2Mua2V5KSwgdGhpcy5fY29udmVydGVyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUXVlcnlTbmFwc2hvdDtcclxufSgpKTtcclxuLy8gVE9ETygyMDE4LzExLzAxKTogQXMgb2YgMjAxOC8wNC8xNyB3ZSdyZSBjaGFuZ2luZyBkb2NDaGFuZ2VzIGZyb20gYW4gYXJyYXlcclxuLy8gaW50byBhIG1ldGhvZC4gQmVjYXVzZSB0aGlzIGlzIGEgcnVudGltZSBicmVha2luZyBjaGFuZ2UgYW5kIHNvbWV3aGF0IHN1YnRsZVxyXG4vLyAoYm90aCBBcnJheSBhbmQgRnVuY3Rpb24gaGF2ZSBhIC5sZW5ndGgsIGV0Yy4pLCB3ZSdsbCByZXBsYWNlIGNvbW1vbmx5LXVzZWRcclxuLy8gcHJvcGVydGllcyAoaW5jbHVkaW5nIFN5bWJvbC5pdGVyYXRvcikgdG8gdGhyb3cgYSBjdXN0b20gZXJyb3IgbWVzc2FnZS4gSW5cclxuLy8gfjYgbW9udGhzIHdlIGNhbiBkZWxldGUgdGhlIGN1c3RvbSBlcnJvciBhcyBtb3N0IGZvbGtzIHdpbGwgaGF2ZSBob3BlZnVsbHlcclxuLy8gbWlncmF0ZWQuXHJcbmZ1bmN0aW9uIHRocm93RG9jQ2hhbmdlc01ldGhvZEVycm9yKCkge1xyXG4gICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ1F1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlcyBoYXMgYmVlbiBjaGFuZ2VkIGZyb20gYSBwcm9wZXJ0eSBpbnRvIGEgJyArXHJcbiAgICAgICAgJ21ldGhvZCwgc28gdXNhZ2VzIGxpa2UgXCJxdWVyeVNuYXBzaG90LmRvY0NoYW5nZXNcIiBzaG91bGQgYmVjb21lICcgK1xyXG4gICAgICAgICdcInF1ZXJ5U25hcHNob3QuZG9jQ2hhbmdlcygpXCInKTtcclxufVxyXG52YXIgZG9jQ2hhbmdlc1Byb3BlcnRpZXNUb092ZXJyaWRlID0gdHNsaWIuX19zcHJlYWRBcnJheXMoW1xyXG4gICAgJ2xlbmd0aCcsXHJcbiAgICAnZm9yRWFjaCcsXHJcbiAgICAnbWFwJ1xyXG5dLCAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgPyBbU3ltYm9sLml0ZXJhdG9yXSA6IFtdKSk7XHJcbmRvY0NoYW5nZXNQcm9wZXJ0aWVzVG9PdmVycmlkZS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBXZSBhcmUgKHJlLSlkZWZpbmluZyBwcm9wZXJ0aWVzIG9uIFF1ZXJ5U25hcHNob3QucHJvdG90eXBlLmRvY0NoYW5nZXMgd2hpY2hcclxuICAgICAqIGlzIGEgRnVuY3Rpb24uIFRoaXMgY291bGQgZmFpbCwgaW4gcGFydGljdWxhciBpbiB0aGUgY2FzZSBvZiAnbGVuZ3RoJyB3aGljaFxyXG4gICAgICogYWxyZWFkeSBleGlzdHMgb24gRnVuY3Rpb24ucHJvdG90eXBlIGFuZCBvbiBJRTExIGlzIGltcHJvcGVybHkgZGVmaW5lZCB3aXRoXHJcbiAgICAgKiBgeyBjb25maWd1cmFibGU6IGZhbHNlIH1gLiBTbyB3ZSB3cmFwIHRoaXMgaW4gYSB0cnkvY2F0Y2ggdG8gZW5zdXJlIHRoYXQgd2VcclxuICAgICAqIHN0aWxsIGhhdmUgYSBmdW5jdGlvbmFsIFNESy5cclxuICAgICAqL1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUXVlcnlTbmFwc2hvdC5wcm90b3R5cGUuZG9jQ2hhbmdlcywgcHJvcGVydHksIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aHJvd0RvY0NoYW5nZXNNZXRob2RFcnJvcigpOyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyKSB7IH0gLy8gSWdub3JlIHRoaXMgZmFpbHVyZSBpbnRlbnRpb25hbGx5XHJcbn0pO1xyXG52YXIgQ29sbGVjdGlvblJlZmVyZW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliLl9fZXh0ZW5kcyhDb2xsZWN0aW9uUmVmZXJlbmNlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29sbGVjdGlvblJlZmVyZW5jZShfcGF0aCwgZmlyZXN0b3JlLCBfY29udmVydGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgUXVlcnkuYXRQYXRoKF9wYXRoKSwgZmlyZXN0b3JlLCBfY29udmVydGVyKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLl9wYXRoID0gX3BhdGg7XHJcbiAgICAgICAgaWYgKF9wYXRoLmxlbmd0aCAlIDIgIT09IDEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKENvZGUuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgY29sbGVjdGlvbiByZWZlcmVuY2UuIENvbGxlY3Rpb24gJyArXHJcbiAgICAgICAgICAgICAgICAncmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICcgK1xyXG4gICAgICAgICAgICAgICAgKF9wYXRoLmNhbm9uaWNhbFN0cmluZygpICsgXCIgaGFzIFwiICsgX3BhdGgubGVuZ3RoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2xsZWN0aW9uUmVmZXJlbmNlLnByb3RvdHlwZSwgXCJpZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29sbGVjdGlvblJlZmVyZW5jZS5wcm90b3R5cGUsIFwicGFyZW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBhcmVudFBhdGggPSB0aGlzLl9xdWVyeS5wYXRoLnBvcExhc3QoKTtcclxuICAgICAgICAgICAgaWYgKHBhcmVudFBhdGguaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UobmV3IERvY3VtZW50S2V5KHBhcmVudFBhdGgpLCB0aGlzLmZpcmVzdG9yZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb2xsZWN0aW9uUmVmZXJlbmNlLnByb3RvdHlwZSwgXCJwYXRoXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBDb2xsZWN0aW9uUmVmZXJlbmNlLnByb3RvdHlwZS5kb2MgPSBmdW5jdGlvbiAocGF0aFN0cmluZykge1xyXG4gICAgICAgIHZhbGlkYXRlQmV0d2Vlbk51bWJlck9mQXJncygnQ29sbGVjdGlvblJlZmVyZW5jZS5kb2MnLCBhcmd1bWVudHMsIDAsIDEpO1xyXG4gICAgICAgIC8vIFdlIGFsbG93IG9taXNzaW9uIG9mICdwYXRoU3RyaW5nJyBidXQgZXhwbGljaXRseSBwcm9oaWJpdCBwYXNzaW5nIGluIGJvdGhcclxuICAgICAgICAvLyAndW5kZWZpbmVkJyBhbmQgJ251bGwnLlxyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHBhdGhTdHJpbmcgPSBBdXRvSWQubmV3SWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFsaWRhdGVBcmdUeXBlKCdDb2xsZWN0aW9uUmVmZXJlbmNlLmRvYycsICdub24tZW1wdHkgc3RyaW5nJywgMSwgcGF0aFN0cmluZyk7XHJcbiAgICAgICAgaWYgKHBhdGhTdHJpbmcgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsICdEb2N1bWVudCBwYXRoIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXRoID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcocGF0aFN0cmluZyk7XHJcbiAgICAgICAgcmV0dXJuIERvY3VtZW50UmVmZXJlbmNlLmZvclBhdGgodGhpcy5fcXVlcnkucGF0aC5jaGlsZChwYXRoKSwgdGhpcy5maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvblJlZmVyZW5jZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdmFsaWRhdGVFeGFjdE51bWJlck9mQXJncygnQ29sbGVjdGlvblJlZmVyZW5jZS5hZGQnLCBhcmd1bWVudHMsIDEpO1xyXG4gICAgICAgIHZhbGlkYXRlQXJnVHlwZSgnQ29sbGVjdGlvblJlZmVyZW5jZS5hZGQnLCAnb2JqZWN0JywgMSwgdmFsdWUpO1xyXG4gICAgICAgIHZhciBkb2NSZWYgPSB0aGlzLmRvYygpO1xyXG4gICAgICAgIHJldHVybiBkb2NSZWYuc2V0KHZhbHVlKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY1JlZjsgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvblJlZmVyZW5jZS5wcm90b3R5cGUud2l0aENvbnZlcnRlciA9IGZ1bmN0aW9uIChjb252ZXJ0ZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcy5fcGF0aCwgdGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbGxlY3Rpb25SZWZlcmVuY2U7XHJcbn0oUXVlcnkkMSkpO1xyXG5mdW5jdGlvbiB2YWxpZGF0ZVNldE9wdGlvbnMobWV0aG9kTmFtZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1lcmdlOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKG1ldGhvZE5hbWUsIG9wdGlvbnMsIFsnbWVyZ2UnLCAnbWVyZ2VGaWVsZHMnXSk7XHJcbiAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxUeXBlKG1ldGhvZE5hbWUsICdib29sZWFuJywgJ21lcmdlJywgb3B0aW9ucy5tZXJnZSk7XHJcbiAgICB2YWxpZGF0ZU9wdGlvbmFsQXJyYXlFbGVtZW50cyhtZXRob2ROYW1lLCAnbWVyZ2VGaWVsZHMnLCAnYSBzdHJpbmcgb3IgYSBGaWVsZFBhdGgnLCBvcHRpb25zLm1lcmdlRmllbGRzLCBmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycgfHwgZWxlbWVudCBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxO1xyXG4gICAgfSk7XHJcbiAgICBpZiAob3B0aW9ucy5tZXJnZUZpZWxkcyAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubWVyZ2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBvcHRpb25zIHBhc3NlZCB0byBmdW5jdGlvbiBcIiArIG1ldGhvZE5hbWUgKyBcIigpOiBZb3UgY2Fubm90IHNwZWNpZnkgYm90aCBcXFwibWVyZ2VcXFwiIFwiICtcclxuICAgICAgICAgICAgXCJhbmQgXFxcIm1lcmdlRmllbGRzXFxcIi5cIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZVNuYXBzaG90T3B0aW9ucyhtZXRob2ROYW1lLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG4gICAgdmFsaWRhdGVPcHRpb25OYW1lcyhtZXRob2ROYW1lLCBvcHRpb25zLCBbJ3NlcnZlclRpbWVzdGFtcHMnXSk7XHJcbiAgICB2YWxpZGF0ZU5hbWVkT3B0aW9uYWxQcm9wZXJ0eUVxdWFscyhtZXRob2ROYW1lLCAnb3B0aW9ucycsICdzZXJ2ZXJUaW1lc3RhbXBzJywgb3B0aW9ucy5zZXJ2ZXJUaW1lc3RhbXBzLCBbJ2VzdGltYXRlJywgJ3ByZXZpb3VzJywgJ25vbmUnXSk7XHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUdldE9wdGlvbnMobWV0aG9kTmFtZSwgb3B0aW9ucykge1xyXG4gICAgdmFsaWRhdGVPcHRpb25hbEFyZ1R5cGUobWV0aG9kTmFtZSwgJ29iamVjdCcsIDEsIG9wdGlvbnMpO1xyXG4gICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICB2YWxpZGF0ZU9wdGlvbk5hbWVzKG1ldGhvZE5hbWUsIG9wdGlvbnMsIFsnc291cmNlJ10pO1xyXG4gICAgICAgIHZhbGlkYXRlTmFtZWRPcHRpb25hbFByb3BlcnR5RXF1YWxzKG1ldGhvZE5hbWUsICdvcHRpb25zJywgJ3NvdXJjZScsIG9wdGlvbnMuc291cmNlLCBbJ2RlZmF1bHQnLCAnc2VydmVyJywgJ2NhY2hlJ10pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlUmVmZXJlbmNlKG1ldGhvZE5hbWUsIGRvY3VtZW50UmVmLCBmaXJlc3RvcmUpIHtcclxuICAgIGlmICghKGRvY3VtZW50UmVmIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UpKSB7XHJcbiAgICAgICAgdGhyb3cgaW52YWxpZENsYXNzRXJyb3IobWV0aG9kTmFtZSwgJ0RvY3VtZW50UmVmZXJlbmNlJywgMSwgZG9jdW1lbnRSZWYpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZG9jdW1lbnRSZWYuZmlyZXN0b3JlICE9PSBmaXJlc3RvcmUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5JTlZBTElEX0FSR1VNRU5ULCAnUHJvdmlkZWQgZG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIGluc3RhbmNlLicpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50UmVmO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBhcnJheSBvZiBmaXJlc3RvcmUuRG9jdW1lbnRDaGFuZ2UncyBmb3IgYSBnaXZlbiBWaWV3U25hcHNob3QuXHJcbiAqXHJcbiAqIEV4cG9ydGVkIGZvciB0ZXN0aW5nLlxyXG4gKi9cclxuZnVuY3Rpb24gY2hhbmdlc0Zyb21TbmFwc2hvdChmaXJlc3RvcmUsIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXMsIHNuYXBzaG90LCBjb252ZXJ0ZXIpIHtcclxuICAgIGlmIChzbmFwc2hvdC5vbGREb2NzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgIC8vIFNwZWNpYWwgY2FzZSB0aGUgZmlyc3Qgc25hcHNob3QgYmVjYXVzZSBpbmRleCBjYWxjdWxhdGlvbiBpcyBlYXN5IGFuZFxyXG4gICAgICAgIC8vIGZhc3RcclxuICAgICAgICB2YXIgbGFzdERvY18xO1xyXG4gICAgICAgIHZhciBpbmRleF8xID0gMDtcclxuICAgICAgICByZXR1cm4gc25hcHNob3QuZG9jQ2hhbmdlcy5tYXAoZnVuY3Rpb24gKGNoYW5nZSkge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdChmaXJlc3RvcmUsIGNoYW5nZS5kb2Mua2V5LCBjaGFuZ2UuZG9jLCBzbmFwc2hvdC5mcm9tQ2FjaGUsIHNuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhjaGFuZ2UuZG9jLmtleSksIGNvbnZlcnRlcik7XHJcbiAgICAgICAgICAgIGFzc2VydChjaGFuZ2UudHlwZSA9PT0gQ2hhbmdlVHlwZS5BZGRlZCwgJ0ludmFsaWQgZXZlbnQgdHlwZSBmb3IgZmlyc3Qgc25hcHNob3QnKTtcclxuICAgICAgICAgICAgYXNzZXJ0KCFsYXN0RG9jXzEgfHwgc25hcHNob3QucXVlcnkuZG9jQ29tcGFyYXRvcihsYXN0RG9jXzEsIGNoYW5nZS5kb2MpIDwgMCwgJ0dvdCBhZGRlZCBldmVudHMgaW4gd3Jvbmcgb3JkZXInKTtcclxuICAgICAgICAgICAgbGFzdERvY18xID0gY2hhbmdlLmRvYztcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdhZGRlZCcsXHJcbiAgICAgICAgICAgICAgICBkb2M6IGRvYyxcclxuICAgICAgICAgICAgICAgIG9sZEluZGV4OiAtMSxcclxuICAgICAgICAgICAgICAgIG5ld0luZGV4OiBpbmRleF8xKytcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIEEgRG9jdW1lbnRTZXQgdGhhdCBpcyB1cGRhdGVkIGluY3JlbWVudGFsbHkgYXMgY2hhbmdlcyBhcmUgYXBwbGllZCB0byB1c2VcclxuICAgICAgICAvLyB0byBsb29rdXAgdGhlIGluZGV4IG9mIGEgZG9jdW1lbnQuXHJcbiAgICAgICAgdmFyIGluZGV4VHJhY2tlcl8xID0gc25hcHNob3Qub2xkRG9jcztcclxuICAgICAgICByZXR1cm4gc25hcHNob3QuZG9jQ2hhbmdlc1xyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChjaGFuZ2UpIHsgcmV0dXJuIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXMgfHwgY2hhbmdlLnR5cGUgIT09IENoYW5nZVR5cGUuTWV0YWRhdGE7IH0pXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGNoYW5nZSkge1xyXG4gICAgICAgICAgICB2YXIgZG9jID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdChmaXJlc3RvcmUsIGNoYW5nZS5kb2Mua2V5LCBjaGFuZ2UuZG9jLCBzbmFwc2hvdC5mcm9tQ2FjaGUsIHNuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhjaGFuZ2UuZG9jLmtleSksIGNvbnZlcnRlcik7XHJcbiAgICAgICAgICAgIHZhciBvbGRJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgbmV3SW5kZXggPSAtMTtcclxuICAgICAgICAgICAgaWYgKGNoYW5nZS50eXBlICE9PSBDaGFuZ2VUeXBlLkFkZGVkKSB7XHJcbiAgICAgICAgICAgICAgICBvbGRJbmRleCA9IGluZGV4VHJhY2tlcl8xLmluZGV4T2YoY2hhbmdlLmRvYy5rZXkpO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0KG9sZEluZGV4ID49IDAsICdJbmRleCBmb3IgZG9jdW1lbnQgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgICAgICAgICBpbmRleFRyYWNrZXJfMSA9IGluZGV4VHJhY2tlcl8xLmRlbGV0ZShjaGFuZ2UuZG9jLmtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNoYW5nZS50eXBlICE9PSBDaGFuZ2VUeXBlLlJlbW92ZWQpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4VHJhY2tlcl8xID0gaW5kZXhUcmFja2VyXzEuYWRkKGNoYW5nZS5kb2MpO1xyXG4gICAgICAgICAgICAgICAgbmV3SW5kZXggPSBpbmRleFRyYWNrZXJfMS5pbmRleE9mKGNoYW5nZS5kb2Mua2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiByZXN1bHRDaGFuZ2VUeXBlKGNoYW5nZS50eXBlKSwgZG9jOiBkb2MsIG9sZEluZGV4OiBvbGRJbmRleCwgbmV3SW5kZXg6IG5ld0luZGV4IH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVzdWx0Q2hhbmdlVHlwZSh0eXBlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIENoYW5nZVR5cGUuQWRkZWQ6XHJcbiAgICAgICAgICAgIHJldHVybiAnYWRkZWQnO1xyXG4gICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5Nb2RpZmllZDpcclxuICAgICAgICBjYXNlIENoYW5nZVR5cGUuTWV0YWRhdGE6XHJcbiAgICAgICAgICAgIHJldHVybiAnbW9kaWZpZWQnO1xyXG4gICAgICAgIGNhc2UgQ2hhbmdlVHlwZS5SZW1vdmVkOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3JlbW92ZWQnO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWlsKCdVbmtub3duIGNoYW5nZSB0eXBlOiAnICsgdHlwZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENvbnZlcnRzIGN1c3RvbSBtb2RlbCBvYmplY3Qgb2YgdHlwZSBUIGludG8gRG9jdW1lbnREYXRhIGJ5IGFwcGx5aW5nIHRoZVxyXG4gKiBjb252ZXJ0ZXIgaWYgaXQgZXhpc3RzLlxyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBEb2N1bWVudERhdGFcclxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxyXG4gKiB0aGVpciBzZXQoKSBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSB0b0ZpcmVzdG9yZSgpXHJcbiAqIGNhbGwuXHJcbiAqL1xyXG5mdW5jdGlvbiBhcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoY29udmVydGVyLCB2YWx1ZSwgZnVuY3Rpb25OYW1lKSB7XHJcbiAgICB2YXIgY29udmVydGVkVmFsdWU7XHJcbiAgICBpZiAoY29udmVydGVyKSB7XHJcbiAgICAgICAgY29udmVydGVkVmFsdWUgPSBjb252ZXJ0ZXIudG9GaXJlc3RvcmUodmFsdWUpO1xyXG4gICAgICAgIGZ1bmN0aW9uTmFtZSA9ICd0b0ZpcmVzdG9yZSgpIGluICcgKyBmdW5jdGlvbk5hbWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb252ZXJ0ZWRWYWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtjb252ZXJ0ZWRWYWx1ZSwgZnVuY3Rpb25OYW1lXTtcclxufVxyXG4vLyBFeHBvcnQgdGhlIGNsYXNzZXMgd2l0aCBhIHByaXZhdGUgY29uc3RydWN0b3IgKGl0IHdpbGwgZmFpbCBpZiBpbnZva2VkXHJcbi8vIGF0IHJ1bnRpbWUpLiBOb3RlIHRoYXQgdGhpcyBzdGlsbCBhbGxvd3MgaW5zdGFuY2VvZiBjaGVja3MuXHJcbi8vIFdlJ3JlIHRyZWF0aW5nIHRoZSB2YXJpYWJsZXMgYXMgY2xhc3MgbmFtZXMsIHNvIGRpc2FibGUgY2hlY2tpbmcgZm9yIGxvd2VyXHJcbi8vIGNhc2UgdmFyaWFibGUgbmFtZXMuXHJcbnZhciBQdWJsaWNGaXJlc3RvcmUgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKEZpcmVzdG9yZSwgJ1VzZSBmaXJlYmFzZS5maXJlc3RvcmUoKSBpbnN0ZWFkLicpO1xyXG52YXIgUHVibGljVHJhbnNhY3Rpb24gPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKFRyYW5zYWN0aW9uJDEsICdVc2UgZmlyZWJhc2UuZmlyZXN0b3JlKCkucnVuVHJhbnNhY3Rpb24oKSBpbnN0ZWFkLicpO1xyXG52YXIgUHVibGljV3JpdGVCYXRjaCA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoV3JpdGVCYXRjaCwgJ1VzZSBmaXJlYmFzZS5maXJlc3RvcmUoKS5iYXRjaCgpIGluc3RlYWQuJyk7XHJcbnZhciBQdWJsaWNEb2N1bWVudFJlZmVyZW5jZSA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoRG9jdW1lbnRSZWZlcmVuY2UsICdVc2UgZmlyZWJhc2UuZmlyZXN0b3JlKCkuZG9jKCkgaW5zdGVhZC4nKTtcclxudmFyIFB1YmxpY0RvY3VtZW50U25hcHNob3QgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKERvY3VtZW50U25hcHNob3QpO1xyXG52YXIgUHVibGljUXVlcnlEb2N1bWVudFNuYXBzaG90ID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShRdWVyeURvY3VtZW50U25hcHNob3QpO1xyXG52YXIgUHVibGljUXVlcnkgPSBtYWtlQ29uc3RydWN0b3JQcml2YXRlKFF1ZXJ5JDEpO1xyXG52YXIgUHVibGljUXVlcnlTbmFwc2hvdCA9IG1ha2VDb25zdHJ1Y3RvclByaXZhdGUoUXVlcnlTbmFwc2hvdCk7XHJcbnZhciBQdWJsaWNDb2xsZWN0aW9uUmVmZXJlbmNlID0gbWFrZUNvbnN0cnVjdG9yUHJpdmF0ZShDb2xsZWN0aW9uUmVmZXJlbmNlLCAnVXNlIGZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oKSBpbnN0ZWFkLicpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIGZpcmVzdG9yZU5hbWVzcGFjZSA9IHtcclxuICAgIEZpcmVzdG9yZTogUHVibGljRmlyZXN0b3JlLFxyXG4gICAgR2VvUG9pbnQ6IEdlb1BvaW50LFxyXG4gICAgVGltZXN0YW1wOiBUaW1lc3RhbXAsXHJcbiAgICBCbG9iOiBQdWJsaWNCbG9iLFxyXG4gICAgVHJhbnNhY3Rpb246IFB1YmxpY1RyYW5zYWN0aW9uLFxyXG4gICAgV3JpdGVCYXRjaDogUHVibGljV3JpdGVCYXRjaCxcclxuICAgIERvY3VtZW50UmVmZXJlbmNlOiBQdWJsaWNEb2N1bWVudFJlZmVyZW5jZSxcclxuICAgIERvY3VtZW50U25hcHNob3Q6IFB1YmxpY0RvY3VtZW50U25hcHNob3QsXHJcbiAgICBRdWVyeTogUHVibGljUXVlcnksXHJcbiAgICBRdWVyeURvY3VtZW50U25hcHNob3Q6IFB1YmxpY1F1ZXJ5RG9jdW1lbnRTbmFwc2hvdCxcclxuICAgIFF1ZXJ5U25hcHNob3Q6IFB1YmxpY1F1ZXJ5U25hcHNob3QsXHJcbiAgICBDb2xsZWN0aW9uUmVmZXJlbmNlOiBQdWJsaWNDb2xsZWN0aW9uUmVmZXJlbmNlLFxyXG4gICAgRmllbGRQYXRoOiBGaWVsZFBhdGgkMSxcclxuICAgIEZpZWxkVmFsdWU6IFB1YmxpY0ZpZWxkVmFsdWUsXHJcbiAgICBzZXRMb2dMZXZlbDogRmlyZXN0b3JlLnNldExvZ0xldmVsLFxyXG4gICAgQ0FDSEVfU0laRV9VTkxJTUlURUQ6IENBQ0hFX1NJWkVfVU5MSU1JVEVEXHJcbn07XHJcbi8qKlxyXG4gKiBDb25maWd1cmVzIEZpcmVzdG9yZSBhcyBwYXJ0IG9mIHRoZSBGaXJlYmFzZSBTREsgYnkgY2FsbGluZyByZWdpc3RlclNlcnZpY2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb25maWd1cmVGb3JGaXJlYmFzZShmaXJlYmFzZSkge1xyXG4gICAgZmlyZWJhc2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IGNvbXBvbmVudC5Db21wb25lbnQoJ2ZpcmVzdG9yZScsIGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICB2YXIgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICByZXR1cm4gbmV3IEZpcmVzdG9yZShhcHAsIGNvbnRhaW5lci5nZXRQcm92aWRlcignYXV0aC1pbnRlcm5hbCcpKTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKS5zZXRTZXJ2aWNlUHJvcHMoc2hhbGxvd0NvcHkoZmlyZXN0b3JlTmFtZXNwYWNlKSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTm9vcENvbm5lY3Rpdml0eU1vbml0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBOb29wQ29ubmVjdGl2aXR5TW9uaXRvcigpIHtcclxuICAgIH1cclxuICAgIE5vb3BDb25uZWN0aXZpdHlNb25pdG9yLnByb3RvdHlwZS5hZGRDYWxsYmFjayA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIE5vLW9wLlxyXG4gICAgfTtcclxuICAgIE5vb3BDb25uZWN0aXZpdHlNb25pdG9yLnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBOby1vcC5cclxuICAgIH07XHJcbiAgICByZXR1cm4gTm9vcENvbm5lY3Rpdml0eU1vbml0b3I7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyRjID0gJ0Nvbm5lY3Rpdml0eU1vbml0b3InO1xyXG4vKipcclxuICogQnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBDb25uZWN0aXZpdHlNb25pdG9yLlxyXG4gKi9cclxudmFyIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm5ldHdvcmtBdmFpbGFibGVMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9uTmV0d29ya0F2YWlsYWJsZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5uZXR3b3JrVW5hdmFpbGFibGVMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9uTmV0d29ya1VuYXZhaWxhYmxlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29uZmlndXJlTmV0d29ya01vbml0b3JpbmcoKTtcclxuICAgIH1cclxuICAgIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLnByb3RvdHlwZS5hZGRDYWxsYmFjayA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLnByb3RvdHlwZS5zaHV0ZG93biA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb25saW5lJywgdGhpcy5uZXR3b3JrQXZhaWxhYmxlTGlzdGVuZXIpO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgdGhpcy5uZXR3b3JrVW5hdmFpbGFibGVMaXN0ZW5lcik7XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IucHJvdG90eXBlLmNvbmZpZ3VyZU5ldHdvcmtNb25pdG9yaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCB0aGlzLm5ldHdvcmtBdmFpbGFibGVMaXN0ZW5lcik7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCB0aGlzLm5ldHdvcmtVbmF2YWlsYWJsZUxpc3RlbmVyKTtcclxuICAgIH07XHJcbiAgICBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5wcm90b3R5cGUub25OZXR3b3JrQXZhaWxhYmxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckYywgJ05ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRScpO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmNhbGxiYWNrczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBjYWxsYmFjaygwIC8qIEFWQUlMQUJMRSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLnByb3RvdHlwZS5vbk5ldHdvcmtVbmF2YWlsYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkZWJ1ZyhMT0dfVEFHJGMsICdOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRScpO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLmNhbGxiYWNrczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBjYWxsYmFjaygxIC8qIFVOQVZBSUxBQkxFICovKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gVE9ETyhjaGVuYnJpYW4pOiBDb25zaWRlciBwYXNzaW5nIGluIHdpbmRvdyBlaXRoZXIgaW50byB0aGlzIGNvbXBvbmVudCBvclxyXG4gICAgLy8gaGVyZSBmb3IgdGVzdGluZyB2aWEgRmFrZVdpbmRvdy5cclxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xyXG4gICAgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IuaXNBdmFpbGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyICE9PSB1bmRlZmluZWQpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlcyBhIHNpbXBsZSBoZWxwZXIgY2xhc3MgdGhhdCBpbXBsZW1lbnRzIHRoZSBTdHJlYW0gaW50ZXJmYWNlIHRvXHJcbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcclxuICogaW50ZXJmYWNlLiBUaGUgc3RyZWFtIGNhbGxiYWNrcyBhcmUgaW52b2tlZCB3aXRoIHRoZSBjYWxsT24uLi4gbWV0aG9kcy5cclxuICovXHJcbnZhciBTdHJlYW1CcmlkZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTdHJlYW1CcmlkZ2UoYXJncykge1xyXG4gICAgICAgIHRoaXMuc2VuZEZuID0gYXJncy5zZW5kRm47XHJcbiAgICAgICAgdGhpcy5jbG9zZUZuID0gYXJncy5jbG9zZUZuO1xyXG4gICAgfVxyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5vbk9wZW4gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMud3JhcHBlZE9uT3BlbiwgJ0NhbGxlZCBvbk9wZW4gb24gc3RyZWFtIHR3aWNlIScpO1xyXG4gICAgICAgIHRoaXMud3JhcHBlZE9uT3BlbiA9IGNhbGxiYWNrO1xyXG4gICAgfTtcclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUub25DbG9zZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIGFzc2VydCghdGhpcy53cmFwcGVkT25DbG9zZSwgJ0NhbGxlZCBvbkNsb3NlIG9uIHN0cmVhbSB0d2ljZSEnKTtcclxuICAgICAgICB0aGlzLndyYXBwZWRPbkNsb3NlID0gY2FsbGJhY2s7XHJcbiAgICB9O1xyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICBhc3NlcnQoIXRoaXMud3JhcHBlZE9uTWVzc2FnZSwgJ0NhbGxlZCBvbk1lc3NhZ2Ugb24gc3RyZWFtIHR3aWNlIScpO1xyXG4gICAgICAgIHRoaXMud3JhcHBlZE9uTWVzc2FnZSA9IGNhbGxiYWNrO1xyXG4gICAgfTtcclxuICAgIFN0cmVhbUJyaWRnZS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZUZuKCk7XHJcbiAgICB9O1xyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHRoaXMuc2VuZEZuKG1zZyk7XHJcbiAgICB9O1xyXG4gICAgU3RyZWFtQnJpZGdlLnByb3RvdHlwZS5jYWxsT25PcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLndyYXBwZWRPbk9wZW4gIT09IHVuZGVmaW5lZCwgJ0Nhbm5vdCBjYWxsIG9uT3BlbiBiZWNhdXNlIG5vIGNhbGxiYWNrIHdhcyBzZXQnKTtcclxuICAgICAgICB0aGlzLndyYXBwZWRPbk9wZW4oKTtcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLmNhbGxPbkNsb3NlID0gZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgIGFzc2VydCh0aGlzLndyYXBwZWRPbkNsb3NlICE9PSB1bmRlZmluZWQsICdDYW5ub3QgY2FsbCBvbkNsb3NlIGJlY2F1c2Ugbm8gY2FsbGJhY2sgd2FzIHNldCcpO1xyXG4gICAgICAgIHRoaXMud3JhcHBlZE9uQ2xvc2UoZXJyKTtcclxuICAgIH07XHJcbiAgICBTdHJlYW1CcmlkZ2UucHJvdG90eXBlLmNhbGxPbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgYXNzZXJ0KHRoaXMud3JhcHBlZE9uTWVzc2FnZSAhPT0gdW5kZWZpbmVkLCAnQ2Fubm90IGNhbGwgb25NZXNzYWdlIGJlY2F1c2Ugbm8gY2FsbGJhY2sgd2FzIHNldCcpO1xyXG4gICAgICAgIHRoaXMud3JhcHBlZE9uTWVzc2FnZShtc2cpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdHJlYW1CcmlkZ2U7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgTE9HX1RBRyRkID0gJ0Nvbm5lY3Rpb24nO1xyXG52YXIgUlBDX1NUUkVBTV9TRVJWSUNFID0gJ2dvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlJztcclxudmFyIFJQQ19VUkxfVkVSU0lPTiA9ICd2MSc7XHJcbi8qKlxyXG4gKiBNYXBzIFJQQyBuYW1lcyB0byB0aGUgY29ycmVzcG9uZGluZyBSRVNUIGVuZHBvaW50IG5hbWUuXHJcbiAqIFVzZXMgT2JqZWN0IExpdGVyYWwgbm90YXRpb24gdG8gYXZvaWQgcmVuYW1pbmcuXHJcbiAqL1xyXG52YXIgUlBDX05BTUVfUkVTVF9NQVBQSU5HID0ge307XHJcblJQQ19OQU1FX1JFU1RfTUFQUElOR1snQmF0Y2hHZXREb2N1bWVudHMnXSA9ICdiYXRjaEdldCc7XHJcblJQQ19OQU1FX1JFU1RfTUFQUElOR1snQ29tbWl0J10gPSAnY29tbWl0JztcclxuLy8gVE9ETyhiLzM4MjAzMzQ0KTogVGhlIFNES19WRVJTSU9OIGlzIHNldCBpbmRlcGVuZGVudGx5IGZyb20gRmlyZWJhc2UgYmVjYXVzZVxyXG4vLyB3ZSBhcmUgZG9pbmcgb3V0LW9mLWJhbmQgcmVsZWFzZXMuIE9uY2Ugd2UgcmVsZWFzZSBhcyBwYXJ0IG9mIEZpcmViYXNlLCB3ZVxyXG4vLyBzaG91bGQgdXNlIHRoZSBGaXJlYmFzZSB2ZXJzaW9uIGluc3RlYWQuXHJcbnZhciBYX0dPT0dfQVBJX0NMSUVOVF9WQUxVRSA9ICdnbC1qcy8gZmlyZS8nICsgU0RLX1ZFUlNJT047XHJcbnZhciBYSFJfVElNRU9VVF9TRUNTID0gMTU7XHJcbnZhciBXZWJDaGFubmVsQ29ubmVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdlYkNoYW5uZWxDb25uZWN0aW9uKGluZm8pIHtcclxuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBpbmZvLmRhdGFiYXNlSWQ7XHJcbiAgICAgICAgdmFyIHByb3RvID0gaW5mby5zc2wgPyAnaHR0cHMnIDogJ2h0dHAnO1xyXG4gICAgICAgIHRoaXMuYmFzZVVybCA9IHByb3RvICsgJzovLycgKyBpbmZvLmhvc3Q7XHJcbiAgICAgICAgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gaW5mby5mb3JjZUxvbmdQb2xsaW5nO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBNb2RpZmllcyB0aGUgaGVhZGVycyBmb3IgYSByZXF1ZXN0LCBhZGRpbmcgYW55IGF1dGhvcml6YXRpb24gdG9rZW4gaWZcclxuICAgICAqIHByZXNlbnQgYW5kIGFueSBhZGRpdGlvbmFsIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0LlxyXG4gICAgICovXHJcbiAgICBXZWJDaGFubmVsQ29ubmVjdGlvbi5wcm90b3R5cGUubW9kaWZ5SGVhZGVyc0ZvclJlcXVlc3QgPSBmdW5jdGlvbiAoaGVhZGVycywgdG9rZW4pIHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaGVhZGVyIGluIHRva2VuLmF1dGhIZWFkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodG9rZW4uYXV0aEhlYWRlcnMuaGFzT3duUHJvcGVydHkoaGVhZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbaGVhZGVyXSA9IHRva2VuLmF1dGhIZWFkZXJzW2hlYWRlcl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaGVhZGVyc1snWC1Hb29nLUFwaS1DbGllbnQnXSA9IFhfR09PR19BUElfQ0xJRU5UX1ZBTFVFO1xyXG4gICAgfTtcclxuICAgIFdlYkNoYW5uZWxDb25uZWN0aW9uLnByb3RvdHlwZS5pbnZva2VSUEMgPSBmdW5jdGlvbiAocnBjTmFtZSwgcmVxdWVzdCwgdG9rZW4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB1cmwgPSB0aGlzLm1ha2VVcmwocnBjTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyB3ZWJjaGFubmVsV3JhcHBlci5YaHJJbygpO1xyXG4gICAgICAgICAgICB4aHIubGlzdGVuT25jZSh3ZWJjaGFubmVsV3JhcHBlci5FdmVudFR5cGUuQ09NUExFVEUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh4aHIuZ2V0TGFzdEVycm9yQ29kZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2ViY2hhbm5lbFdyYXBwZXIuRXJyb3JDb2RlLk5PX0VSUk9SOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzb24gPSB4aHIuZ2V0UmVzcG9uc2VKc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdYSFIgcmVjZWl2ZWQ6JywgSlNPTi5zdHJpbmdpZnkoanNvbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShqc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIHdlYmNoYW5uZWxXcmFwcGVyLkVycm9yQ29kZS5USU1FT1VUOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnUlBDIFwiJyArIHJwY05hbWUgKyAnXCIgdGltZWQgb3V0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKENvZGUuREVBRExJTkVfRVhDRUVERUQsICdSZXF1ZXN0IHRpbWUgb3V0JykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2ViY2hhbm5lbFdyYXBwZXIuRXJyb3JDb2RlLkhUVFBfRVJST1I6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzXzEgPSB4aHIuZ2V0U3RhdHVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdSUEMgXCInICsgcnBjTmFtZSArICdcIiBmYWlsZWQgd2l0aCBzdGF0dXM6Jywgc3RhdHVzXzEsICdyZXNwb25zZSB0ZXh0OicsIHhoci5nZXRSZXNwb25zZVRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzXzEgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlRXJyb3IgPSB4aHIuZ2V0UmVzcG9uc2VKc29uKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXJlc3BvbnNlRXJyb3IgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgISFyZXNwb25zZUVycm9yLnN0YXR1cyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIXJlc3BvbnNlRXJyb3IubWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlyZXN0b3JlRXJyb3JDb2RlID0gbWFwQ29kZUZyb21IdHRwUmVzcG9uc2VFcnJvclN0YXR1cyhyZXNwb25zZUVycm9yLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoZmlyZXN0b3JlRXJyb3JDb2RlLCByZXNwb25zZUVycm9yLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTktOT1dOLCAnU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyAnICsgeGhyLmdldFN0YXR1cygpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgcmVjZWl2ZWQgYW4gSFRUUF9FUlJPUiBidXQgdGhlcmUncyBubyBzdGF0dXMgY29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnUlBDIFwiJyArIHJwY05hbWUgKyAnXCIgZmFpbGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihDb2RlLlVOQVZBSUxBQkxFLCAnQ29ubmVjdGlvbiBmYWlsZWQuJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsKCdSUEMgXCInICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBycGNOYW1lICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIgZmFpbGVkIHdpdGggdW5hbnRpY2lwYXRlZCAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd2ViY2hhbm5lbCBlcnJvciAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuZ2V0TGFzdEVycm9yQ29kZSgpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnOiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuZ2V0TGFzdEVycm9yKCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcsIGdpdmluZyB1cC4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdSUEMgXCInICsgcnBjTmFtZSArICdcIiBjb21wbGV0ZWQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBUaGUgZGF0YWJhc2UgZmllbGQgaXMgYWxyZWFkeSBlbmNvZGVkIGluIFVSTC4gU3BlY2lmeWluZyBpdCBhZ2FpbiBpblxyXG4gICAgICAgICAgICAvLyB0aGUgYm9keSBpcyBub3QgbmVjZXNzYXJ5IGluIHByb2R1Y3Rpb24sIGFuZCB3aWxsIGNhdXNlIGR1cGxpY2F0ZSBmaWVsZFxyXG4gICAgICAgICAgICAvLyBlcnJvcnMgaW4gdGhlIEZpcmVzdG9yZSBFbXVsYXRvci4gTGV0J3MgcmVtb3ZlIGl0LlxyXG4gICAgICAgICAgICB2YXIganNvbk9iaiA9IHRzbGliLl9fYXNzaWduKHt9LCByZXF1ZXN0KTtcclxuICAgICAgICAgICAgZGVsZXRlIGpzb25PYmouZGF0YWJhc2U7XHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0U3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoanNvbk9iaik7XHJcbiAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1hIUiBzZW5kaW5nOiAnLCB1cmwgKyAnICcgKyByZXF1ZXN0U3RyaW5nKTtcclxuICAgICAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XHJcbiAgICAgICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXHJcbiAgICAgICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGVcclxuICAgICAgICAgICAgLy8gJGh0dHBPdmVyd3JpdGUgcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWRcclxuICAgICAgICAgICAgLy8gdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXHJcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0geyAnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nIH07XHJcbiAgICAgICAgICAgIF90aGlzLm1vZGlmeUhlYWRlcnNGb3JSZXF1ZXN0KGhlYWRlcnMsIHRva2VuKTtcclxuICAgICAgICAgICAgeGhyLnNlbmQodXJsLCAnUE9TVCcsIHJlcXVlc3RTdHJpbmcsIGhlYWRlcnMsIFhIUl9USU1FT1VUX1NFQ1MpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFdlYkNoYW5uZWxDb25uZWN0aW9uLnByb3RvdHlwZS5pbnZva2VTdHJlYW1pbmdSUEMgPSBmdW5jdGlvbiAocnBjTmFtZSwgcmVxdWVzdCwgdG9rZW4pIHtcclxuICAgICAgICAvLyBUaGUgUkVTVCBBUEkgYXV0b21hdGljYWxseSBhZ2dyZWdhdGVzIGFsbCBvZiB0aGUgc3RyZWFtZWQgcmVzdWx0cywgc28gd2VcclxuICAgICAgICAvLyBjYW4ganVzdCB1c2UgdGhlIG5vcm1hbCBpbnZva2UoKSBtZXRob2QuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW52b2tlUlBDKHJwY05hbWUsIHJlcXVlc3QsIHRva2VuKTtcclxuICAgIH07XHJcbiAgICBXZWJDaGFubmVsQ29ubmVjdGlvbi5wcm90b3R5cGUub3BlblN0cmVhbSA9IGZ1bmN0aW9uIChycGNOYW1lLCB0b2tlbikge1xyXG4gICAgICAgIHZhciB1cmxQYXJ0cyA9IFtcclxuICAgICAgICAgICAgdGhpcy5iYXNlVXJsLFxyXG4gICAgICAgICAgICAnLycsXHJcbiAgICAgICAgICAgIFJQQ19TVFJFQU1fU0VSVklDRSxcclxuICAgICAgICAgICAgJy8nLFxyXG4gICAgICAgICAgICBycGNOYW1lLFxyXG4gICAgICAgICAgICAnL2NoYW5uZWwnXHJcbiAgICAgICAgXTtcclxuICAgICAgICB2YXIgd2ViY2hhbm5lbFRyYW5zcG9ydCA9IHdlYmNoYW5uZWxXcmFwcGVyLmNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQoKTtcclxuICAgICAgICB2YXIgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgLy8gQmFja2dyb3VuZCBjaGFubmVsIHRlc3QgYXZvaWRzIHRoZSBpbml0aWFsIHR3byB0ZXN0IGNhbGxzIGFuZCBkZWNyZWFzZXNcclxuICAgICAgICAgICAgLy8gaW5pdGlhbCBjb2xkIHN0YXJ0IHRpbWUuXHJcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogd2VuYm96QCBtZW50aW9uZWQgdGhpcyBtaWdodCBhZmZlY3QgdXNlIHdpdGggcHJveGllcyBhbmRcclxuICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIG1vbml0b3IgY2xvc2VseSBmb3IgYW55IHJlcG9ydHMuXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDaGFubmVsVGVzdDogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGJhY2tlbmQgc3RpY2tpbmVzcywgcm91dGluZyBiZWhhdmlvciBpcyBiYXNlZCBvbiB0aGlzXHJcbiAgICAgICAgICAgIC8vIHBhcmFtZXRlci5cclxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiAnZ3Nlc3Npb25pZCcsXHJcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXHJcbiAgICAgICAgICAgIG1lc3NhZ2VVcmxQYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgcGFyYW0gaXMgdXNlZCB0byBpbXByb3ZlIHJvdXRpbmcgYW5kIHByb2plY3QgaXNvbGF0aW9uIGJ5IHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxyXG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IFwicHJvamVjdHMvXCIgKyB0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkICsgXCIvZGF0YWJhc2VzL1wiICsgdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiB0cnVlLFxyXG4gICAgICAgICAgICBzdXBwb3J0c0Nyb3NzRG9tYWluWGhyOiB0cnVlLFxyXG4gICAgICAgICAgICBpbnRlcm5hbENoYW5uZWxQYXJhbXM6IHtcclxuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHRpbWVvdXQgKHJhbmRvbWl6ZWQgYmV0d2VlbiAxMC0yMCBzZWNvbmRzKSBzaW5jZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcclxuICAgICAgICAgICAgICAgIC8vIHRpbWUgdG8gc2VuZCB0byB0aGUgYmFja2VuZC4gUmF0aGVyIHRoYW4gaGF2ZSBXZWJDaGFubmVsIGltcG9zZSBhXHJcbiAgICAgICAgICAgICAgICAvLyB0aWdodCB0aW1lb3V0IHdoaWNoIGNvdWxkIGxlYWQgdG8gaW5maW5pdGUgdGltZW91dHMgYW5kIHJldHJpZXMsIHdlXHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cclxuICAgICAgICAgICAgICAgIC8vIHRpbWVvdXRzIHRvIGtpY2sgaW4gaWYgdGhlIHJlcXVlc3QgaXNuJ3Qgd29ya2luZy5cclxuICAgICAgICAgICAgICAgIGZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNczogMTAgKiA2MCAqIDEwMDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZm9yY2VMb25nUG9sbGluZzogdGhpcy5mb3JjZUxvbmdQb2xsaW5nXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm1vZGlmeUhlYWRlcnNGb3JSZXF1ZXN0KHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzLCB0b2tlbik7XHJcbiAgICAgICAgLy8gU2VuZGluZyB0aGUgY3VzdG9tIGhlYWRlcnMgd2UganVzdCBhZGRlZCB0byByZXF1ZXN0LmluaXRNZXNzYWdlSGVhZGVyc1xyXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XHJcbiAgICAgICAgLy8gcmVxdWVzdCBiZWNhdXNlIHRoZSBYSFIgd2lsbCBubyBsb25nZXIgbWVldCB0aGUgY3JpdGVyaWEgZm9yIGEgXCJzaW1wbGVcIlxyXG4gICAgICAgIC8vIENPUlMgcmVxdWVzdDpcclxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBUaGVyZWZvcmUgdG8gYXZvaWQgdGhlIENPUlMgcHJlZmxpZ2h0IHJlcXVlc3QgKGFuIGV4dHJhIG5ldHdvcmtcclxuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0gb3B0aW9uIHRvIHNwZWNpZnkgdGhhdFxyXG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW50byBhIHNwZWNpYWwgXCIkaHR0cEhlYWRlcnNcIiBxdWVyeVxyXG4gICAgICAgIC8vIHBhcmFtZXRlciwgd2hpY2ggaXMgcmVjb2duaXplZCBieSB0aGUgd2ViY2hhbm5lbCBiYWNrZW5kLiBUaGlzIGlzXHJcbiAgICAgICAgLy8gZm9ybWFsbHkgZGVmaW5lZCBoZXJlOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvYjBlMTgxNWIxM2ZiOTJhNDZkN2M5YjNjMzBkZTVkNmEzOTZhMzI0NS9jbG9zdXJlL2dvb2cvbmV0L3JwYy9odHRwY29ycy5qcyNMMzJcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIEJ1dCBmb3Igc29tZSB1bmNsZWFyIHJlYXNvbiAoc2VlXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNzAzKSwgdGhpcyBicmVha3NcclxuICAgICAgICAvLyBSZWFjdE5hdGl2ZSBhbmQgc28gd2UgZXhjbHVkZSBpdCwgd2hpY2gganVzdCBtZWFucyBSZWFjdE5hdGl2ZSBtYXkgYmVcclxuICAgICAgICAvLyBzdWJqZWN0IHRvIHRoZSBleHRyYSBuZXR3b3JrIHJvdW5kdHJpcCBmb3IgQ09SUyBwcmVmbGlnaHQuXHJcbiAgICAgICAgaWYgKCF1dGlsLmlzUmVhY3ROYXRpdmUoKSkge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lmh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0gPSAnJGh0dHBIZWFkZXJzJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVybCA9IHVybFBhcnRzLmpvaW4oJycpO1xyXG4gICAgICAgIGRlYnVnKExPR19UQUckZCwgJ0NyZWF0aW5nIFdlYkNoYW5uZWw6ICcgKyB1cmwgKyAnICcgKyByZXF1ZXN0KTtcclxuICAgICAgICB2YXIgY2hhbm5lbCA9IHdlYmNoYW5uZWxUcmFuc3BvcnQuY3JlYXRlV2ViQ2hhbm5lbCh1cmwsIHJlcXVlc3QpO1xyXG4gICAgICAgIC8vIFdlYkNoYW5uZWwgc3VwcG9ydHMgc2VuZGluZyB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBoYW5kc2hha2UgLSBzYXZpbmdcclxuICAgICAgICAvLyBhIG5ldHdvcmsgcm91bmQgdHJpcC4gSG93ZXZlciwgaXQgd2lsbCBoYXZlIHRvIGNhbGwgc2VuZCBpbiB0aGUgc2FtZVxyXG4gICAgICAgIC8vIEpTIGV2ZW50IGxvb3AgYXMgb3Blbi4gSW4gb3JkZXIgdG8gZW5mb3JjZSB0aGlzLCB3ZSBkZWxheSBhY3R1YWxseVxyXG4gICAgICAgIC8vIG9wZW5pbmcgdGhlIFdlYkNoYW5uZWwgdW50aWwgc2VuZCBpcyBjYWxsZWQuIFdoZXRoZXIgd2UgaGF2ZSBjYWxsZWRcclxuICAgICAgICAvLyBvcGVuIGlzIHRyYWNrZWQgd2l0aCB0aGlzIHZhcmlhYmxlLlxyXG4gICAgICAgIHZhciBvcGVuZWQgPSBmYWxzZTtcclxuICAgICAgICAvLyBBIGZsYWcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHN0cmVhbSB3YXMgY2xvc2VkIChieSB1cyBvciB0aHJvdWdoIGFuXHJcbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcclxuICAgICAgICAvLyBvbiBhIGNsb3NlZCBzdHJlYW1cclxuICAgICAgICB2YXIgY2xvc2VkID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIHN0cmVhbUJyaWRnZSA9IG5ldyBTdHJlYW1CcmlkZ2Uoe1xyXG4gICAgICAgICAgICBzZW5kRm46IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcGVuZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnT3BlbmluZyBXZWJDaGFubmVsIHRyYW5zcG9ydC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbC5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1dlYkNoYW5uZWwgc2VuZGluZzonLCBtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWwuc2VuZChtc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWcoTE9HX1RBRyRkLCAnTm90IHNlbmRpbmcgYmVjYXVzZSBXZWJDaGFubmVsIGlzIGNsb3NlZDonLCBtc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbG9zZUZuOiBmdW5jdGlvbiAoKSB7IHJldHVybiBjaGFubmVsLmNsb3NlKCk7IH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBDbG9zdXJlIGV2ZW50cyBhcmUgZ3VhcmRlZCBhbmQgZXhjZXB0aW9ucyBhcmUgc3dhbGxvd2VkLCBzbyBjYXRjaCBhbnlcclxuICAgICAgICAvLyBleGNlcHRpb24gYW5kIHJldGhyb3cgdXNpbmcgYSBzZXRUaW1lb3V0IHNvIHRoZXkgYmVjb21lIHZpc2libGUgYWdhaW4uXHJcbiAgICAgICAgLy8gTm90ZSB0aGF0IGV2ZW50dWFsbHkgdGhpcyBmdW5jdGlvbiBjb3VsZCBnbyBhd2F5IGlmIHdlIGFyZSBjb25maWRlbnRcclxuICAgICAgICAvLyBlbm91Z2ggdGhlIGNvZGUgaXMgZXhjZXB0aW9uIGZyZWUuXHJcbiAgICAgICAgdmFyIHVuZ3VhcmRlZEV2ZW50TGlzdGVuID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogY2xvc3VyZSB0eXBpbmcgc2VlbXMgYnJva2VuIGJlY2F1c2UgV2ViQ2hhbm5lbCBkb2VzXHJcbiAgICAgICAgICAgIC8vIG5vdCBpbXBsZW1lbnQgZ29vZy5ldmVudHMuTGlzdGVuYWJsZVxyXG4gICAgICAgICAgICBjaGFubmVsLmxpc3Rlbih0eXBlLCBmdW5jdGlvbiAocGFyYW0pIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4ocGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmd1YXJkZWRFdmVudExpc3Rlbih3ZWJjaGFubmVsV3JhcHBlci5XZWJDaGFubmVsLkV2ZW50VHlwZS5PUEVOLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdXZWJDaGFubmVsIHRyYW5zcG9ydCBvcGVuZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB1bmd1YXJkZWRFdmVudExpc3Rlbih3ZWJjaGFubmVsV3JhcHBlci5XZWJDaGFubmVsLkV2ZW50VHlwZS5DTE9TRSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoIWNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgY2xvc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1dlYkNoYW5uZWwgdHJhbnNwb3J0IGNsb3NlZCcpO1xyXG4gICAgICAgICAgICAgICAgc3RyZWFtQnJpZGdlLmNhbGxPbkNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB1bmd1YXJkZWRFdmVudExpc3Rlbih3ZWJjaGFubmVsV3JhcHBlci5XZWJDaGFubmVsLkV2ZW50VHlwZS5FUlJPUiwgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICBpZiAoIWNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgY2xvc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGRlYnVnKExPR19UQUckZCwgJ1dlYkNoYW5uZWwgdHJhbnNwb3J0IGVycm9yZWQ6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgIHN0cmVhbUJyaWRnZS5jYWxsT25DbG9zZShuZXcgRmlyZXN0b3JlRXJyb3IoQ29kZS5VTkFWQUlMQUJMRSwgJ1RoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVuZ3VhcmRlZEV2ZW50TGlzdGVuKHdlYmNoYW5uZWxXcmFwcGVyLldlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsIGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBpZiAoIWNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1zZ0RhdGEgPSBtc2cuZGF0YVswXTtcclxuICAgICAgICAgICAgICAgIGFzc2VydCghIW1zZ0RhdGEsICdHb3QgYSB3ZWJjaGFubmVsIG1lc3NhZ2Ugd2l0aG91dCBkYXRhLicpO1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xyXG4gICAgICAgICAgICAgICAgLy8gKGFuZCBvbmx5IGVycm9ycykgdG8gYmUgd3JhcHBlZCBpbiBhbiBleHRyYSBhcnJheS4gVG8gYmUgZm9yd2FyZFxyXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBidWcgd2UgbmVlZCB0byBjaGVjayBlaXRoZXIgY29uZGl0aW9uLiBUaGUgbGF0dGVyXHJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cclxuICAgICAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSBtc2dEYXRhLmVycm9yIGlzIG5vdCB0eXBlZC5cclxuICAgICAgICAgICAgICAgIHZhciBtc2dEYXRhT3JFcnJvciA9IG1zZ0RhdGE7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBtc2dEYXRhT3JFcnJvci5lcnJvciB8fCAoKF9hID0gbXNnRGF0YU9yRXJyb3JbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdXZWJDaGFubmVsIHJlY2VpdmVkIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvci5zdGF0dXMgd2lsbCBiZSBhIHN0cmluZyBsaWtlICdPSycgb3IgJ05PVF9GT1VORCcuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1c18yID0gZXJyb3Iuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2RlID0gbWFwQ29kZUZyb21ScGNTdGF0dXMoc3RhdHVzXzIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSBDb2RlLklOVEVSTkFMO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVbmtub3duIGVycm9yIHN0YXR1czogJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXzIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgd2l0aCBtZXNzYWdlICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgY2xvc2VkIHNvIG5vIGZ1cnRoZXIgZXZlbnRzIGFyZSBwcm9wYWdhdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBzdHJlYW1CcmlkZ2UuY2FsbE9uQ2xvc2UobmV3IEZpcmVzdG9yZUVycm9yKGNvZGUsIG1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFubmVsLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhMT0dfVEFHJGQsICdXZWJDaGFubmVsIHJlY2VpdmVkOicsIG1zZ0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbUJyaWRnZS5jYWxsT25NZXNzYWdlKG1zZ0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5IHdlIGNvdWxkL3Nob3VsZCB3YWl0IGZvciB0aGUgV2ViQ2hhbm5lbCBvcGVuZWQgZXZlbnQsXHJcbiAgICAgICAgICAgIC8vIGJ1dCBiZWNhdXNlIHdlIHdhbnQgdG8gc2VuZCB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBXZWJDaGFubmVsXHJcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxyXG4gICAgICAgICAgICAvLyB0aGVuIGRlbGF5IHRoZSBhY3R1YWwgb3BlbiB1bnRpbCB0aGUgZmlyc3QgbWVzc2FnZSBpcyBzZW50LlxyXG4gICAgICAgICAgICBzdHJlYW1CcmlkZ2UuY2FsbE9uT3BlbigpO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgICAgIHJldHVybiBzdHJlYW1CcmlkZ2U7XHJcbiAgICB9O1xyXG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgV2ViQ2hhbm5lbENvbm5lY3Rpb24ucHJvdG90eXBlLm1ha2VVcmwgPSBmdW5jdGlvbiAocnBjTmFtZSkge1xyXG4gICAgICAgIHZhciB1cmxScGNOYW1lID0gUlBDX05BTUVfUkVTVF9NQVBQSU5HW3JwY05hbWVdO1xyXG4gICAgICAgIGFzc2VydCh1cmxScGNOYW1lICE9PSB1bmRlZmluZWQsICdVbmtub3duIFJFU1QgbWFwcGluZyBmb3I6ICcgKyBycGNOYW1lKTtcclxuICAgICAgICByZXR1cm4gKHRoaXMuYmFzZVVybCArXHJcbiAgICAgICAgICAgICcvJyArXHJcbiAgICAgICAgICAgIFJQQ19VUkxfVkVSU0lPTiArXHJcbiAgICAgICAgICAgICcvcHJvamVjdHMvJyArXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgK1xyXG4gICAgICAgICAgICAnL2RhdGFiYXNlcy8nICtcclxuICAgICAgICAgICAgdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlICtcclxuICAgICAgICAgICAgJy9kb2N1bWVudHM6JyArXHJcbiAgICAgICAgICAgIHVybFJwY05hbWUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXZWJDaGFubmVsQ29ubmVjdGlvbjtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBCcm93c2VyUGxhdGZvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCcm93c2VyUGxhdGZvcm0oKSB7XHJcbiAgICAgICAgdGhpcy5lbXB0eUJ5dGVTdHJpbmcgPSAnJztcclxuICAgICAgICB0aGlzLmJhc2U2NEF2YWlsYWJsZSA9IHR5cGVvZiBhdG9iICE9PSAndW5kZWZpbmVkJztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLCBcImRvY3VtZW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgPyBkb2N1bWVudCA6IG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnJvd3NlclBsYXRmb3JtLnByb3RvdHlwZSwgXCJ3aW5kb3dcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQnJvd3NlclBsYXRmb3JtLnByb3RvdHlwZS5sb2FkQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChkYXRhYmFzZUluZm8pIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBXZWJDaGFubmVsQ29ubmVjdGlvbihkYXRhYmFzZUluZm8pKTtcclxuICAgIH07XHJcbiAgICBCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLm5ld0Nvbm5lY3Rpdml0eU1vbml0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wQ29ubmVjdGl2aXR5TW9uaXRvcigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLm5ld1NlcmlhbGl6ZXIgPSBmdW5jdGlvbiAoZGF0YWJhc2VJZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgSnNvblByb3RvU2VyaWFsaXplcihkYXRhYmFzZUlkLCB7IHVzZVByb3RvM0pzb246IHRydWUgfSk7XHJcbiAgICB9O1xyXG4gICAgQnJvd3NlclBsYXRmb3JtLnByb3RvdHlwZS5mb3JtYXRKU09OID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBCcm93c2VyUGxhdGZvcm0ucHJvdG90eXBlLmF0b2IgPSBmdW5jdGlvbiAoZW5jb2RlZCkge1xyXG4gICAgICAgIHJldHVybiBhdG9iKGVuY29kZWQpO1xyXG4gICAgfTtcclxuICAgIEJyb3dzZXJQbGF0Zm9ybS5wcm90b3R5cGUuYnRvYSA9IGZ1bmN0aW9uIChyYXcpIHtcclxuICAgICAgICByZXR1cm4gYnRvYShyYXcpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCcm93c2VyUGxhdGZvcm07XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhpcyBjb2RlIG5lZWRzIHRvIHJ1biBiZWZvcmUgRmlyZXN0b3JlIGlzIHVzZWQuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGluXHJcbiAqIHNldmVyYWwgd2F5czpcclxuICogICAxKSBUaHJvdWdoIHRoZSBKU0NvbXBpbGVyIGNvbXBpbGluZyB0aGlzIGNvZGUgYW5kIHRoZW4gKGF1dG9tYXRpY2FsbHkpXHJcbiAqICAgICAgZXhlY3V0aW5nIGl0IGJlZm9yZSBleHBvcnRpbmcgdGhlIEZpcmVzdG9yZSBzeW1ib2xzLlxyXG4gKiAgIDIpIFRocm91Z2ggaW1wb3J0aW5nIHRoaXMgbW9kdWxlIGZpcnN0IGluIGEgRmlyZXN0b3JlIG1haW4gbW9kdWxlXHJcbiAqL1xyXG5QbGF0Zm9ybVN1cHBvcnQuc2V0UGxhdGZvcm0obmV3IEJyb3dzZXJQbGF0Zm9ybSgpKTtcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmVcIjtcbnZhciB2ZXJzaW9uID0gXCIxLjkuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJGaXJlc3RvcmUoaW5zdGFuY2UpIHtcclxuICAgIGNvbmZpZ3VyZUZvckZpcmViYXNlKGluc3RhbmNlKTtcclxuICAgIGluc3RhbmNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxufVxyXG5yZWdpc3RlckZpcmVzdG9yZShmaXJlYmFzZSk7XG5cbmV4cG9ydHMucmVnaXN0ZXJGaXJlc3RvcmUgPSByZWdpc3RlckZpcmVzdG9yZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmNqcy5qcy5tYXBcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGcsZ29vZz1nb29nfHx7fSxrPWNvbW1vbmpzR2xvYmFsO2Z1bmN0aW9uIG0oYSl7cmV0dXJuIFwic3RyaW5nXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIGFhKGEpe3JldHVybiBcIm51bWJlclwiPT10eXBlb2YgYX1mdW5jdGlvbiBuKGEsYil7YT1hLnNwbGl0KFwiLlwiKTtiPWJ8fGs7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYj1iW2FbY11dLG51bGw9PWIpcmV0dXJuIG51bGw7cmV0dXJuIGJ9ZnVuY3Rpb24gYmEoKXt9XG5mdW5jdGlvbiBwKGEpe3ZhciBiPXR5cGVvZiBhO2lmKFwib2JqZWN0XCI9PWIpaWYoYSl7aWYoYSBpbnN0YW5jZW9mIEFycmF5KXJldHVybiBcImFycmF5XCI7aWYoYSBpbnN0YW5jZW9mIE9iamVjdClyZXR1cm4gYjt2YXIgYz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSk7aWYoXCJbb2JqZWN0IFdpbmRvd11cIj09YylyZXR1cm4gXCJvYmplY3RcIjtpZihcIltvYmplY3QgQXJyYXldXCI9PWN8fFwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuc3BsaWNlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5wcm9wZXJ0eUlzRW51bWVyYWJsZSYmIWEucHJvcGVydHlJc0VudW1lcmFibGUoXCJzcGxpY2VcIikpcmV0dXJuIFwiYXJyYXlcIjtpZihcIltvYmplY3QgRnVuY3Rpb25dXCI9PWN8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmNhbGwmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLnByb3BlcnR5SXNFbnVtZXJhYmxlJiYhYS5wcm9wZXJ0eUlzRW51bWVyYWJsZShcImNhbGxcIikpcmV0dXJuIFwiZnVuY3Rpb25cIn1lbHNlIHJldHVybiBcIm51bGxcIjtcbmVsc2UgaWYoXCJmdW5jdGlvblwiPT1iJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgYS5jYWxsKXJldHVybiBcIm9iamVjdFwiO3JldHVybiBifWZ1bmN0aW9uIHEoYSl7cmV0dXJuIFwiYXJyYXlcIj09cChhKX1mdW5jdGlvbiBjYShhKXt2YXIgYj1wKGEpO3JldHVybiBcImFycmF5XCI9PWJ8fFwib2JqZWN0XCI9PWImJlwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aH1mdW5jdGlvbiByKGEpe3ZhciBiPXR5cGVvZiBhO3JldHVybiBcIm9iamVjdFwiPT1iJiZudWxsIT1hfHxcImZ1bmN0aW9uXCI9PWJ9dmFyIHQ9XCJjbG9zdXJlX3VpZF9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKSxkYT0wO2Z1bmN0aW9uIGVhKGEsYixjKXtyZXR1cm4gYS5jYWxsLmFwcGx5KGEuYmluZCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gZmEoYSxiLGMpe2lmKCFhKXRocm93IEVycm9yKCk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShlLGQpO3JldHVybiBhLmFwcGx5KGIsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gdShhLGIsYyl7RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJi0xIT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC50b1N0cmluZygpLmluZGV4T2YoXCJuYXRpdmUgY29kZVwiKT91PWVhOnU9ZmE7cmV0dXJuIHUuYXBwbHkobnVsbCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gdihhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX12YXIgdz1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4gK25ldyBEYXRlfTtmdW5jdGlvbiB4KGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLk49Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLnhiPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxsPTI7bDxhcmd1bWVudHMubGVuZ3RoO2wrKyloW2wtMl09YXJndW1lbnRzW2xdO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24geSgpe3RoaXMuaj10aGlzLmo7dGhpcy5pPXRoaXMuaTt9dmFyIGhhPTA7eS5wcm90b3R5cGUuaj0hMTt5LnByb3RvdHlwZS5sYT1mdW5jdGlvbigpe2lmKCF0aGlzLmomJih0aGlzLmo9ITAsdGhpcy5HKCksMCE9aGEpKXt2YXIgYT10aGlzW3RdfHwodGhpc1t0XT0rK2RhKTt9fTt5LnByb3RvdHlwZS5HPWZ1bmN0aW9uKCl7aWYodGhpcy5pKWZvcig7dGhpcy5pLmxlbmd0aDspdGhpcy5pLnNoaWZ0KCkoKTt9O3ZhciBqYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKG0oYSkpcmV0dXJuIG0oYikmJjE9PWIubGVuZ3RoP2EuaW5kZXhPZihiLDApOi0xO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGMgaW4gYSYmYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuIC0xfSxsYT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaD9mdW5jdGlvbihhLGIsYyl7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGIsYyk7fTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9bShhKT9hLnNwbGl0KFwiXCIpOmEsZj0wO2Y8ZDtmKyspZiBpbiBlJiZiLmNhbGwoYyxlW2ZdLGYsYSk7fTtcbmZ1bmN0aW9uIG1hKGEpe2E6e3ZhciBiPW5hO2Zvcih2YXIgYz1hLmxlbmd0aCxkPW0oYSk/YS5zcGxpdChcIlwiKTphLGU9MDtlPGM7ZSsrKWlmKGUgaW4gZCYmYi5jYWxsKHZvaWQgMCxkW2VdLGUsYSkpe2I9ZTticmVhayBhfWI9LTE7fXJldHVybiAwPmI/bnVsbDptKGEpP2EuY2hhckF0KGIpOmFbYl19ZnVuY3Rpb24gb2EoYSl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sYXJndW1lbnRzKX1mdW5jdGlvbiBwYShhKXt2YXIgYj1hLmxlbmd0aDtpZigwPGIpe2Zvcih2YXIgYz1BcnJheShiKSxkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfWZ1bmN0aW9uIHFhKGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX12YXIgcmE9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBhLnRyaW0oKX06ZnVuY3Rpb24oYSl7cmV0dXJuIC9eW1xcc1xceGEwXSooW1xcc1xcU10qPylbXFxzXFx4YTBdKiQvLmV4ZWMoYSlbMV19O2Z1bmN0aW9uIHooYSxiKXtyZXR1cm4gLTEhPWEuaW5kZXhPZihiKX1mdW5jdGlvbiBzYShhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH12YXIgQTthOnt2YXIgdGE9ay5uYXZpZ2F0b3I7aWYodGEpe3ZhciB1YT10YS51c2VyQWdlbnQ7aWYodWEpe0E9dWE7YnJlYWsgYX19QT1cIlwiO31mdW5jdGlvbiB2YShhLGIsYyl7Zm9yKHZhciBkIGluIGEpYi5jYWxsKGMsYVtkXSxkLGEpO31mdW5jdGlvbiB3YShhKXt2YXIgYj17fSxjO2ZvcihjIGluIGEpYltjXT1hW2NdO3JldHVybiBifXZhciB4YT1cImNvbnN0cnVjdG9yIGhhc093blByb3BlcnR5IGlzUHJvdG90eXBlT2YgcHJvcGVydHlJc0VudW1lcmFibGUgdG9Mb2NhbGVTdHJpbmcgdG9TdHJpbmcgdmFsdWVPZlwiLnNwbGl0KFwiIFwiKTtmdW5jdGlvbiB5YShhLGIpe2Zvcih2YXIgYyxkLGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IodmFyIGY9MDtmPHhhLmxlbmd0aDtmKyspYz14YVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiB6YShhKXt6YVtcIiBcIl0oYSk7cmV0dXJuIGF9emFbXCIgXCJdPWJhO2Z1bmN0aW9uIEFhKGEsYil7dmFyIGM9QmE7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjLGEpP2NbYV06Y1thXT1iKGEpfXZhciBDYT16KEEsXCJPcGVyYVwiKSxCPXooQSxcIlRyaWRlbnRcIil8fHooQSxcIk1TSUVcIiksRGE9eihBLFwiRWRnZVwiKSxFYT1EYXx8QixGYT16KEEsXCJHZWNrb1wiKSYmISh6KEEudG9Mb3dlckNhc2UoKSxcIndlYmtpdFwiKSYmIXooQSxcIkVkZ2VcIikpJiYhKHooQSxcIlRyaWRlbnRcIil8fHooQSxcIk1TSUVcIikpJiYheihBLFwiRWRnZVwiKSxHYT16KEEudG9Mb3dlckNhc2UoKSxcIndlYmtpdFwiKSYmIXooQSxcIkVkZ2VcIik7ZnVuY3Rpb24gSGEoKXt2YXIgYT1rLmRvY3VtZW50O3JldHVybiBhP2EuZG9jdW1lbnRNb2RlOnZvaWQgMH12YXIgSWE7XG5hOnt2YXIgSmE9XCJcIixLYT1mdW5jdGlvbigpe3ZhciBhPUE7aWYoRmEpcmV0dXJuIC9ydjooW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZihEYSlyZXR1cm4gL0VkZ2VcXC8oW1xcZFxcLl0rKS8uZXhlYyhhKTtpZihCKXJldHVybiAvXFxiKD86TVNJRXxydilbOiBdKFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoR2EpcmV0dXJuIC9XZWJLaXRcXC8oXFxTKykvLmV4ZWMoYSk7aWYoQ2EpcmV0dXJuIC8oPzpWZXJzaW9uKVsgXFwvXT8oXFxTKykvLmV4ZWMoYSl9KCk7S2EmJihKYT1LYT9LYVsxXTpcIlwiKTtpZihCKXt2YXIgTGE9SGEoKTtpZihudWxsIT1MYSYmTGE+cGFyc2VGbG9hdChKYSkpe0lhPVN0cmluZyhMYSk7YnJlYWsgYX19SWE9SmE7fXZhciBCYT17fTtcbmZ1bmN0aW9uIE1hKGEpe3JldHVybiBBYShhLGZ1bmN0aW9uKCl7Zm9yKHZhciBiPTAsYz1yYShTdHJpbmcoSWEpKS5zcGxpdChcIi5cIiksZD1yYShTdHJpbmcoYSkpLnNwbGl0KFwiLlwiKSxlPU1hdGgubWF4KGMubGVuZ3RoLGQubGVuZ3RoKSxmPTA7MD09YiYmZjxlO2YrKyl7dmFyIGg9Y1tmXXx8XCJcIixsPWRbZl18fFwiXCI7ZG97aD0vKFxcZCopKFxcRCopKC4qKS8uZXhlYyhoKXx8W1wiXCIsXCJcIixcIlwiLFwiXCJdO2w9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMobCl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtpZigwPT1oWzBdLmxlbmd0aCYmMD09bFswXS5sZW5ndGgpYnJlYWs7Yj1zYSgwPT1oWzFdLmxlbmd0aD8wOnBhcnNlSW50KGhbMV0sMTApLDA9PWxbMV0ubGVuZ3RoPzA6cGFyc2VJbnQobFsxXSwxMCkpfHxzYSgwPT1oWzJdLmxlbmd0aCwwPT1sWzJdLmxlbmd0aCl8fHNhKGhbMl0sbFsyXSk7aD1oWzNdO2w9bFszXTt9d2hpbGUoMD09Yil9cmV0dXJuIDA8PWJ9KX12YXIgTmE7dmFyIE9hPWsuZG9jdW1lbnQ7XG5OYT1PYSYmQj9IYSgpfHwoXCJDU1MxQ29tcGF0XCI9PU9hLmNvbXBhdE1vZGU/cGFyc2VJbnQoSWEsMTApOjUpOnZvaWQgMDt2YXIgUGE9IUJ8fDk8PU51bWJlcihOYSksUWE9QiYmIU1hKFwiOVwiKSxSYT1mdW5jdGlvbigpe2lmKCFrLmFkZEV2ZW50TGlzdGVuZXJ8fCFPYmplY3QuZGVmaW5lUHJvcGVydHkpcmV0dXJuICExO3ZhciBhPSExLGI9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwicGFzc2l2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXthPSEwO319KTt0cnl7ay5hZGRFdmVudExpc3RlbmVyKFwidGVzdFwiLGJhLGIpLGsucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RcIixiYSxiKTt9Y2F0Y2goYyl7fXJldHVybiBhfSgpO2Z1bmN0aW9uIEMoYSxiKXt0aGlzLnR5cGU9YTt0aGlzLmE9dGhpcy50YXJnZXQ9Yjt0aGlzLklhPSEwO31DLnByb3RvdHlwZS5iPWZ1bmN0aW9uKCl7dGhpcy5JYT0hMTt9O2Z1bmN0aW9uIEQoYSxiKXtDLmNhbGwodGhpcyxhP2EudHlwZTpcIlwiKTt0aGlzLnJlbGF0ZWRUYXJnZXQ9dGhpcy5hPXRoaXMudGFyZ2V0PW51bGw7dGhpcy5idXR0b249dGhpcy5zY3JlZW5ZPXRoaXMuc2NyZWVuWD10aGlzLmNsaWVudFk9dGhpcy5jbGllbnRYPTA7dGhpcy5rZXk9XCJcIjt0aGlzLm1ldGFLZXk9dGhpcy5zaGlmdEtleT10aGlzLmFsdEtleT10aGlzLmN0cmxLZXk9ITE7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5jPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuYT1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZihGYSl7YTp7dHJ5e3phKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9ITE7fWV8fChiPW51bGwpO319ZWxzZVwibW91c2VvdmVyXCI9PVxuYz9iPWEuZnJvbUVsZW1lbnQ6XCJtb3VzZW91dFwiPT1jJiYoYj1hLnRvRWxlbWVudCk7dGhpcy5yZWxhdGVkVGFyZ2V0PWI7ZD8odGhpcy5jbGllbnRYPXZvaWQgMCE9PWQuY2xpZW50WD9kLmNsaWVudFg6ZC5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09ZC5jbGllbnRZP2QuY2xpZW50WTpkLnBhZ2VZLHRoaXMuc2NyZWVuWD1kLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWQuc2NyZWVuWXx8MCk6KHRoaXMuY2xpZW50WD12b2lkIDAhPT1hLmNsaWVudFg/YS5jbGllbnRYOmEucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWEuY2xpZW50WT9hLmNsaWVudFk6YS5wYWdlWSx0aGlzLnNjcmVlblg9YS5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1hLnNjcmVlbll8fDApO3RoaXMuYnV0dG9uPWEuYnV0dG9uO3RoaXMua2V5PWEua2V5fHxcIlwiO3RoaXMuY3RybEtleT1hLmN0cmxLZXk7dGhpcy5hbHRLZXk9YS5hbHRLZXk7dGhpcy5zaGlmdEtleT1hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1cbmEubWV0YUtleTt0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZHx8MDt0aGlzLnBvaW50ZXJUeXBlPW0oYS5wb2ludGVyVHlwZSk/YS5wb2ludGVyVHlwZTpTYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLmM9YTthLmRlZmF1bHRQcmV2ZW50ZWQmJnRoaXMuYigpO319eChELEMpO3ZhciBTYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtELnByb3RvdHlwZS5iPWZ1bmN0aW9uKCl7RC5OLmIuY2FsbCh0aGlzKTt2YXIgYT10aGlzLmM7aWYoYS5wcmV2ZW50RGVmYXVsdClhLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBpZihhLnJldHVyblZhbHVlPSExLFFhKXRyeXtpZihhLmN0cmxLZXl8fDExMjw9YS5rZXlDb2RlJiYxMjM+PWEua2V5Q29kZSlhLmtleUNvZGU9LTE7fWNhdGNoKGIpe319O3ZhciBGPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKSxUYT0wO2Z1bmN0aW9uIFVhKGEsYixjLGQsZSl7dGhpcy5saXN0ZW5lcj1hO3RoaXMucHJveHk9bnVsbDt0aGlzLnNyYz1iO3RoaXMudHlwZT1jO3RoaXMuY2FwdHVyZT0hIWQ7dGhpcy5kYT1lO3RoaXMua2V5PSsrVGE7dGhpcy5YPXRoaXMuWj0hMTt9ZnVuY3Rpb24gVmEoYSl7YS5YPSEwO2EubGlzdGVuZXI9bnVsbDthLnByb3h5PW51bGw7YS5zcmM9bnVsbDthLmRhPW51bGw7fWZ1bmN0aW9uIFdhKGEpe3RoaXMuc3JjPWE7dGhpcy5hPXt9O3RoaXMuYj0wO31XYS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS50b1N0cmluZygpO2E9dGhpcy5hW2ZdO2F8fChhPXRoaXMuYVtmXT1bXSx0aGlzLmIrKyk7dmFyIGg9WGEoYSxiLGQsZSk7LTE8aD8oYj1hW2hdLGN8fChiLlo9ITEpKTooYj1uZXcgVWEoYix0aGlzLnNyYyxmLCEhZCxlKSxiLlo9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBZYShhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuYSl7dmFyIGQ9YS5hW2NdLGU9amEoZCxiKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihWYShiKSwwPT1hLmFbY10ubGVuZ3RoJiYoZGVsZXRlIGEuYVtjXSxhLmItLSkpO319XG5mdW5jdGlvbiBYYShhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5YJiZmLmxpc3RlbmVyPT1iJiZmLmNhcHR1cmU9PSEhYyYmZi5kYT09ZClyZXR1cm4gZX1yZXR1cm4gLTF9dmFyIFphPVwiY2xvc3VyZV9sbV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksJGE9e307ZnVuY3Rpb24gYmIoYSxiLGMsZCxlKXtpZihkJiZkLm9uY2UpcmV0dXJuIGNiKGEsYixjLGQsZSk7aWYocShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspYmIoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWRiKGMpO3JldHVybiBhJiZhW0ZdP2EuemEoYixjLHIoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmViKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBlYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cihlKT8hIWUuY2FwdHVyZTohIWU7aWYoaCYmIVBhKXJldHVybiBudWxsO3ZhciBsPWZiKGEpO2x8fChhW1phXT1sPW5ldyBXYShhKSk7Yz1sLmFkZChiLGMsZCxoLGYpO2lmKGMucHJveHkpcmV0dXJuIGM7ZD1nYigpO2MucHJveHk9ZDtkLnNyYz1hO2QubGlzdGVuZXI9YztpZihhLmFkZEV2ZW50TGlzdGVuZXIpUmF8fChlPWgpLHZvaWQgMD09PWUmJihlPSExKSxhLmFkZEV2ZW50TGlzdGVuZXIoYi50b1N0cmluZygpLGQsZSk7ZWxzZSBpZihhLmF0dGFjaEV2ZW50KWEuYXR0YWNoRXZlbnQoaGIoYi50b1N0cmluZygpKSxkKTtlbHNlIGlmKGEuYWRkTGlzdGVuZXImJmEucmVtb3ZlTGlzdGVuZXIpYS5hZGRMaXN0ZW5lcihkKTtlbHNlIHRocm93IEVycm9yKFwiYWRkRXZlbnRMaXN0ZW5lciBhbmQgYXR0YWNoRXZlbnQgYXJlIHVuYXZhaWxhYmxlLlwiKTtyZXR1cm4gY31mdW5jdGlvbiBnYigpe3ZhciBhPWliLGI9UGE/ZnVuY3Rpb24oYyl7cmV0dXJuIGEuY2FsbChiLnNyYyxiLmxpc3RlbmVyLGMpfTpmdW5jdGlvbihjKXtjPWEuY2FsbChiLnNyYyxiLmxpc3RlbmVyLGMpO2lmKCFjKXJldHVybiBjfTtyZXR1cm4gYn1mdW5jdGlvbiBjYihhLGIsYyxkLGUpe2lmKHEoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWNiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1kYihjKTtyZXR1cm4gYSYmYVtGXT9hLkFhKGIsYyxyKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTplYihhLGIsYywhMCxkLGUpfVxuZnVuY3Rpb24gamIoYSxiLGMsZCxlKXtpZihxKGIpKWZvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWpiKGEsYltmXSxjLGQsZSk7ZWxzZShkPXIoZCk/ISFkLmNhcHR1cmU6ISFkLGM9ZGIoYyksYSYmYVtGXSk/KGE9YS5jLGI9U3RyaW5nKGIpLnRvU3RyaW5nKCksYiBpbiBhLmEmJihmPWEuYVtiXSxjPVhhKGYsYyxkLGUpLC0xPGMmJihWYShmW2NdKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZixjLDEpLDA9PWYubGVuZ3RoJiYoZGVsZXRlIGEuYVtiXSxhLmItLSkpKSk6YSYmKGE9ZmIoYSkpJiYoYj1hLmFbYi50b1N0cmluZygpXSxhPS0xLGImJihhPVhhKGIsYyxkLGUpKSwoYz0tMTxhP2JbYV06bnVsbCkmJmtiKGMpKTt9XG5mdW5jdGlvbiBrYihhKXtpZighYWEoYSkmJmEmJiFhLlgpe3ZhciBiPWEuc3JjO2lmKGImJmJbRl0pWWEoYi5jLGEpO2Vsc2V7dmFyIGM9YS50eXBlLGQ9YS5wcm94eTtiLnJlbW92ZUV2ZW50TGlzdGVuZXI/Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZCxhLmNhcHR1cmUpOmIuZGV0YWNoRXZlbnQ/Yi5kZXRhY2hFdmVudChoYihjKSxkKTpiLmFkZExpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyKGQpOyhjPWZiKGIpKT8oWWEoYyxhKSwwPT1jLmImJihjLnNyYz1udWxsLGJbWmFdPW51bGwpKTpWYShhKTt9fX1mdW5jdGlvbiBoYihhKXtyZXR1cm4gYSBpbiAkYT8kYVthXTokYVthXT1cIm9uXCIrYX1mdW5jdGlvbiBsYihhLGIpe3ZhciBjPWEubGlzdGVuZXIsZD1hLmRhfHxhLnNyYzthLlomJmtiKGEpO3JldHVybiBjLmNhbGwoZCxiKX1cbmZ1bmN0aW9uIGliKGEsYil7cmV0dXJuIGEuWD8hMDpQYT9sYihhLG5ldyBEKGIsdGhpcykpOihiPW5ldyBEKGJ8fG4oXCJ3aW5kb3cuZXZlbnRcIiksdGhpcyksbGIoYSxiKSl9ZnVuY3Rpb24gZmIoYSl7YT1hW1phXTtyZXR1cm4gYSBpbnN0YW5jZW9mIFdhP2E6bnVsbH12YXIgbWI9XCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApO2Z1bmN0aW9uIGRiKGEpe2lmKFwiZnVuY3Rpb25cIj09cChhKSlyZXR1cm4gYTthW21iXXx8KGFbbWJdPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhbmRsZUV2ZW50KGIpfSk7cmV0dXJuIGFbbWJdfWZ1bmN0aW9uIEcoKXt5LmNhbGwodGhpcyk7dGhpcy5jPW5ldyBXYSh0aGlzKTt0aGlzLko9dGhpczt0aGlzLkI9bnVsbDt9eChHLHkpO0cucHJvdG90eXBlW0ZdPSEwO2c9Ry5wcm90b3R5cGU7Zy5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjLGQpe2JiKHRoaXMsYSxiLGMsZCk7fTtnLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7amIodGhpcyxhLGIsYyxkKTt9O1xuZy5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5CO2lmKGMpZm9yKGI9W107YztjPWMuQiliLnB1c2goYyk7Yz10aGlzLko7dmFyIGQ9YS50eXBlfHxhO2lmKG0oYSkpYT1uZXcgQyhhLGMpO2Vsc2UgaWYoYSBpbnN0YW5jZW9mIEMpYS50YXJnZXQ9YS50YXJnZXR8fGM7ZWxzZXt2YXIgZT1hO2E9bmV3IEMoZCxjKTt5YShhLGUpO31lPSEwO2lmKGIpZm9yKHZhciBmPWIubGVuZ3RoLTE7MDw9ZjtmLS0pe3ZhciBoPWEuYT1iW2ZdO2U9bmIoaCxkLCEwLGEpJiZlO31oPWEuYT1jO2U9bmIoaCxkLCEwLGEpJiZlO2U9bmIoaCxkLCExLGEpJiZlO2lmKGIpZm9yKGY9MDtmPGIubGVuZ3RoO2YrKyloPWEuYT1iW2ZdLGU9bmIoaCxkLCExLGEpJiZlO3JldHVybiBlfTtcbmcuRz1mdW5jdGlvbigpe0cuTi5HLmNhbGwodGhpcyk7aWYodGhpcy5jKXt2YXIgYT10aGlzLmMsYztmb3IoYyBpbiBhLmEpe2Zvcih2YXIgZD1hLmFbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKVZhKGRbZV0pO2RlbGV0ZSBhLmFbY107YS5iLS07fX10aGlzLkI9bnVsbDt9O2cuemE9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuYy5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Zy5BYT1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5jLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIG5iKGEsYixjLGQpe2I9YS5jLmFbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguWCYmaC5jYXB0dXJlPT1jKXt2YXIgbD1oLmxpc3RlbmVyLEU9aC5kYXx8aC5zcmM7aC5aJiZZYShhLmMsaCk7ZT0hMSE9PWwuY2FsbChFLGQpJiZlO319cmV0dXJuIGUmJjAhPWQuSWF9dmFyIG9iPWsuSlNPTi5zdHJpbmdpZnk7ZnVuY3Rpb24gcGIoYSxiKXt0aGlzLmM9YTt0aGlzLmY9Yjt0aGlzLmI9MDt0aGlzLmE9bnVsbDt9cGIucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe2lmKDA8dGhpcy5iKXt0aGlzLmItLTt2YXIgYT10aGlzLmE7dGhpcy5hPWEubmV4dDthLm5leHQ9bnVsbDt9ZWxzZSBhPXRoaXMuYygpO3JldHVybiBhfTtmdW5jdGlvbiBxYigpe3RoaXMuYj10aGlzLmE9bnVsbDt9dmFyIHNiPW5ldyBwYihmdW5jdGlvbigpe3JldHVybiBuZXcgcmJ9LGZ1bmN0aW9uKGEpe2EucmVzZXQoKTt9KTtxYi5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYil7dmFyIGM9c2IuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmI/dGhpcy5iLm5leHQ9Yzp0aGlzLmE9Yzt0aGlzLmI9Yzt9O2Z1bmN0aW9uIHRiKCl7dmFyIGE9dWIsYj1udWxsO2EuYSYmKGI9YS5hLGEuYT1hLmEubmV4dCxhLmF8fChhLmI9bnVsbCksYi5uZXh0PW51bGwpO3JldHVybiBifWZ1bmN0aW9uIHJiKCl7dGhpcy5uZXh0PXRoaXMuYj10aGlzLmE9bnVsbDt9cmIucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIpe3RoaXMuYT1hO3RoaXMuYj1iO3RoaXMubmV4dD1udWxsO307cmIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5uZXh0PXRoaXMuYj10aGlzLmE9bnVsbDt9O2Z1bmN0aW9uIHZiKGEpe2suc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGE7fSwwKTt9ZnVuY3Rpb24gd2IoYSxiKXt4Ynx8eWIoKTt6Ynx8KHhiKCksemI9ITApO3ViLmFkZChhLGIpO312YXIgeGI7ZnVuY3Rpb24geWIoKXt2YXIgYT1rLlByb21pc2UucmVzb2x2ZSh2b2lkIDApO3hiPWZ1bmN0aW9uKCl7YS50aGVuKEFiKTt9O312YXIgemI9ITEsdWI9bmV3IHFiO2Z1bmN0aW9uIEFiKCl7Zm9yKHZhciBhO2E9dGIoKTspe3RyeXthLmEuY2FsbChhLmIpO31jYXRjaChjKXt2YihjKTt9dmFyIGI9c2I7Yi5mKGEpOzEwMD5iLmImJihiLmIrKyxhLm5leHQ9Yi5hLGIuYT1hKTt9emI9ITE7fWZ1bmN0aW9uIENiKGEsYil7Ry5jYWxsKHRoaXMpO3RoaXMuYj1hfHwxO3RoaXMuYT1ifHxrO3RoaXMuZj11KHRoaXMuZmIsdGhpcyk7dGhpcy5nPXcoKTt9eChDYixHKTtnPUNiLnByb3RvdHlwZTtnLmJhPSExO2cuTD1udWxsO2cuZmI9ZnVuY3Rpb24oKXtpZih0aGlzLmJhKXt2YXIgYT13KCktdGhpcy5nOzA8YSYmYTwuOCp0aGlzLmI/dGhpcy5MPXRoaXMuYS5zZXRUaW1lb3V0KHRoaXMuZix0aGlzLmItYSk6KHRoaXMuTCYmKHRoaXMuYS5jbGVhclRpbWVvdXQodGhpcy5MKSx0aGlzLkw9bnVsbCksdGhpcy5kaXNwYXRjaEV2ZW50KFwidGlja1wiKSx0aGlzLmJhJiYoRGIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07Zy5zdGFydD1mdW5jdGlvbigpe3RoaXMuYmE9ITA7dGhpcy5MfHwodGhpcy5MPXRoaXMuYS5zZXRUaW1lb3V0KHRoaXMuZix0aGlzLmIpLHRoaXMuZz13KCkpO307ZnVuY3Rpb24gRGIoYSl7YS5iYT0hMTthLkwmJihhLmEuY2xlYXJUaW1lb3V0KGEuTCksYS5MPW51bGwpO31cbmcuRz1mdW5jdGlvbigpe0NiLk4uRy5jYWxsKHRoaXMpO0RiKHRoaXMpO2RlbGV0ZSB0aGlzLmE7fTtmdW5jdGlvbiBFYihhLGIsYyl7aWYoXCJmdW5jdGlvblwiPT1wKGEpKWMmJihhPXUoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9dShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTprLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiBGYihhLGIsYyl7eS5jYWxsKHRoaXMpO3RoaXMuZj1udWxsIT1jP3UoYSxjKTphO3RoaXMuYz1iO3RoaXMuYj11KHRoaXMuJGEsdGhpcyk7dGhpcy5hPVtdO314KEZiLHkpO2c9RmIucHJvdG90eXBlO2cuZWE9ITE7Zy5VPW51bGw7Zy5UYT1mdW5jdGlvbihhKXt0aGlzLmE9YXJndW1lbnRzO3RoaXMuVT90aGlzLmVhPSEwOkdiKHRoaXMpO307Zy5HPWZ1bmN0aW9uKCl7RmIuTi5HLmNhbGwodGhpcyk7dGhpcy5VJiYoay5jbGVhclRpbWVvdXQodGhpcy5VKSx0aGlzLlU9bnVsbCx0aGlzLmVhPSExLHRoaXMuYT1bXSk7fTtnLiRhPWZ1bmN0aW9uKCl7dGhpcy5VPW51bGw7dGhpcy5lYSYmKHRoaXMuZWE9ITEsR2IodGhpcykpO307ZnVuY3Rpb24gR2IoYSl7YS5VPUViKGEuYixhLmMpO2EuZi5hcHBseShudWxsLGEuYSk7fWZ1bmN0aW9uIEgoYSl7eS5jYWxsKHRoaXMpO3RoaXMuYj1hO3RoaXMuYT17fTt9eChILHkpO3ZhciBIYj1bXTtmdW5jdGlvbiBJYihhLGIsYyxkKXtxKGMpfHwoYyYmKEhiWzBdPWMudG9TdHJpbmcoKSksYz1IYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWJiKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuYnx8YSk7aWYoIWYpYnJlYWs7YS5hW2Yua2V5XT1mO319ZnVuY3Rpb24gSmIoYSl7dmEoYS5hLGZ1bmN0aW9uKGIsYyl7dGhpcy5hLmhhc093blByb3BlcnR5KGMpJiZrYihiKTt9LGEpO2EuYT17fTt9SC5wcm90b3R5cGUuRz1mdW5jdGlvbigpe0guTi5HLmNhbGwodGhpcyk7SmIodGhpcyk7fTtILnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIEtiKCl7fXZhciBJPW5ldyBHO2Z1bmN0aW9uIExiKGEpe0MuY2FsbCh0aGlzLFwic2VydmVycmVhY2hhYmlsaXR5XCIsYSk7fXgoTGIsQyk7ZnVuY3Rpb24gSihhKXtJLmRpc3BhdGNoRXZlbnQobmV3IExiKEksYSkpO31mdW5jdGlvbiBNYihhKXtDLmNhbGwodGhpcyxcInN0YXRldmVudFwiLGEpO314KE1iLEMpO2Z1bmN0aW9uIEsoYSl7SS5kaXNwYXRjaEV2ZW50KG5ldyBNYihJLGEpKTt9ZnVuY3Rpb24gTmIoYSl7Qy5jYWxsKHRoaXMsXCJ0aW1pbmdldmVudFwiLGEpO314KE5iLEMpO2Z1bmN0aW9uIE9iKGEsYil7aWYoXCJmdW5jdGlvblwiIT1wKGEpKXRocm93IEVycm9yKFwiRm4gbXVzdCBub3QgYmUgbnVsbCBhbmQgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiBrLnNldFRpbWVvdXQoZnVuY3Rpb24oKXthKCk7fSxiKX12YXIgUGI9e05PX0VSUk9SOjAsZ2I6MSxuYjoyLG1iOjMsamI6NCxsYjo1LG9iOjYsTGE6NyxUSU1FT1VUOjgscmI6OX07dmFyIFFiPXtpYjpcImNvbXBsZXRlXCIsdmI6XCJzdWNjZXNzXCIsTWE6XCJlcnJvclwiLExhOlwiYWJvcnRcIix0YjpcInJlYWR5XCIsdWI6XCJyZWFkeXN0YXRlY2hhbmdlXCIsVElNRU9VVDpcInRpbWVvdXRcIixwYjpcImluY3JlbWVudGFsZGF0YVwiLHNiOlwicHJvZ3Jlc3NcIixrYjpcImRvd25sb2FkcHJvZ3Jlc3NcIix3YjpcInVwbG9hZHByb2dyZXNzXCJ9O2Z1bmN0aW9uIFJiKCl7fVJiLnByb3RvdHlwZS5hPW51bGw7ZnVuY3Rpb24gU2IoYSl7dmFyIGI7KGI9YS5hKXx8KGI9YS5hPXt9KTtyZXR1cm4gYn1mdW5jdGlvbiBUYigpe312YXIgTD17T1BFTjpcImFcIixoYjpcImJcIixNYTpcImNcIixxYjpcImRcIn07ZnVuY3Rpb24gVWIoKXtDLmNhbGwodGhpcyxcImRcIik7fXgoVWIsQyk7ZnVuY3Rpb24gVmIoKXtDLmNhbGwodGhpcyxcImNcIik7fXgoVmIsQyk7dmFyIFdiO2Z1bmN0aW9uIFhiKCl7fXgoWGIsUmIpO1diPW5ldyBYYjtmdW5jdGlvbiBNKGEsYixjKXt0aGlzLmc9YTt0aGlzLlc9Yjt0aGlzLlY9Y3x8MTt0aGlzLkk9bmV3IEgodGhpcyk7dGhpcy5PPVliO2E9RWE/MTI1OnZvaWQgMDt0aGlzLlA9bmV3IENiKGEpO3RoaXMuaD1udWxsO3RoaXMuYj0hMTt0aGlzLmw9dGhpcy5EPXRoaXMuZj10aGlzLkY9dGhpcy52PXRoaXMuUj10aGlzLmk9bnVsbDt0aGlzLmo9W107dGhpcy5hPW51bGw7dGhpcy5BPTA7dGhpcy5jPXRoaXMudz1udWxsO3RoaXMubz0tMTt0aGlzLm09ITE7dGhpcy5KPTA7dGhpcy5CPW51bGw7dGhpcy5zPXRoaXMuUz10aGlzLkg9ITE7fXZhciBZYj00NUUzLFpiPXt9LCRiPXt9O2c9TS5wcm90b3R5cGU7Zy5zZXRUaW1lb3V0PWZ1bmN0aW9uKGEpe3RoaXMuTz1hO307ZnVuY3Rpb24gYWMoYSxiLGMpe2EuRj0xO2EuZj1iYyhOKGIpKTthLmw9YzthLkg9ITA7Y2MoYSxudWxsKTt9ZnVuY3Rpb24gZGMoYSxiLGMsZCl7YS5GPTE7YS5mPWJjKE4oYikpO2EubD1udWxsO2EuSD1jO2NjKGEsZCk7fVxuZnVuY3Rpb24gY2MoYSxiKXthLnY9dygpO2VjKGEpO2EuRD1OKGEuZik7ZmMoYS5ELFwidFwiLGEuVik7YS5BPTA7YS5hPWEuZy4kKGEuZy5ZKCk/YjpudWxsKTswPGEuSiYmKGEuQj1uZXcgRmIodShhLkphLGEsYS5hKSxhLkopKTtJYihhLkksYS5hLFwicmVhZHlzdGF0ZWNoYW5nZVwiLGEuY2IpO2I9YS5oP3dhKGEuaCk6e307YS5sPyhhLnd8fChhLnc9XCJQT1NUXCIpLGJbXCJDb250ZW50LVR5cGVcIl09XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixhLmEuY2EoYS5ELGEudyxhLmwsYikpOihhLnc9XCJHRVRcIixhLmEuY2EoYS5ELGEudyxudWxsLGIpKTtKKDEpO31nLmNiPWZ1bmN0aW9uKGEpe2E9YS50YXJnZXQ7dmFyIGI9dGhpcy5CO2ImJjM9PU8oYSk/Yi5UYSgpOnRoaXMuSmEoYSk7fTtcbmcuSmE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuYSlhOnt2YXIgYj1PKHRoaXMuYSksYz10aGlzLmEueWEoKSxkPXRoaXMuYS5UKCk7aWYoISgzPmJ8fDM9PWImJiFFYSYmIXRoaXMuYS5hYSgpKSl7dGhpcy5tfHw0IT1ifHw3PT1jfHwoOD09Y3x8MD49ZD9KKDMpOkooMikpO2djKHRoaXMpO3ZhciBlPXRoaXMuYS5UKCk7dGhpcy5vPWU7dmFyIGY9dGhpcy5hLmFhKCk7aWYodGhpcy5iPTIwMD09ZSl7aWYodGhpcy5TJiYhdGhpcy5zKXtiOntpZih0aGlzLmEpe3ZhciBoPWhjKHRoaXMuYSxcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpO2lmKGgmJiFxYShoKSl7dmFyIGw9aDticmVhayBifX1sPW51bGw7fWlmKGwpdGhpcy5zPSEwLGljKHRoaXMsbCk7ZWxzZXt0aGlzLmI9ITE7dGhpcy5jPTM7SygxMik7UCh0aGlzKTtqYyh0aGlzKTticmVhayBhfX10aGlzLkg/KGtjKHRoaXMsYixmKSxFYSYmdGhpcy5iJiYzPT1iJiYoSWIodGhpcy5JLHRoaXMuUCxcInRpY2tcIix0aGlzLmJiKSx0aGlzLlAuc3RhcnQoKSkpOlxuaWModGhpcyxmKTs0PT1iJiZQKHRoaXMpO3RoaXMuYiYmIXRoaXMubSYmKDQ9PWI/dGhpcy5nLm5hKHRoaXMpOih0aGlzLmI9ITEsZWModGhpcykpKTt9ZWxzZSA0MDA9PWUmJjA8Zi5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMuYz0zLEsoMTIpKToodGhpcy5jPTAsSygxMykpLFAodGhpcyksamModGhpcyk7fX19Y2F0Y2goRSl7fWZpbmFsbHl7fX07ZnVuY3Rpb24ga2MoYSxiLGMpe2Zvcih2YXIgZD0hMDshYS5tJiZhLkE8Yy5sZW5ndGg7KXt2YXIgZT1sYyhhLGMpO2lmKGU9PSRiKXs0PT1iJiYoYS5jPTQsSygxNCksZD0hMSk7YnJlYWt9ZWxzZSBpZihlPT1aYil7YS5jPTQ7SygxNSk7ZD0hMTticmVha31lbHNlIGljKGEsZSk7fTQ9PWImJjA9PWMubGVuZ3RoJiYoYS5jPTEsSygxNiksZD0hMSk7YS5iPWEuYiYmZDtkfHwoUChhKSxqYyhhKSk7fVxuZy5iYj1mdW5jdGlvbigpe2lmKHRoaXMuYSl7dmFyIGE9Tyh0aGlzLmEpLGI9dGhpcy5hLmFhKCk7dGhpcy5BPGIubGVuZ3RoJiYoZ2ModGhpcyksa2ModGhpcyxhLGIpLHRoaXMuYiYmNCE9YSYmZWModGhpcykpO319O2Z1bmN0aW9uIGxjKGEsYil7dmFyIGM9YS5BLGQ9Yi5pbmRleE9mKFwiXFxuXCIsYyk7aWYoLTE9PWQpcmV0dXJuICRiO2M9TnVtYmVyKGIuc3Vic3RyaW5nKGMsZCkpO2lmKGlzTmFOKGMpKXJldHVybiBaYjtkKz0xO2lmKGQrYz5iLmxlbmd0aClyZXR1cm4gJGI7Yj1iLnN1YnN0cihkLGMpO2EuQT1kK2M7cmV0dXJuIGJ9Zy5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLm09ITA7UCh0aGlzKTt9O2Z1bmN0aW9uIGVjKGEpe2EuUj13KCkrYS5PO21jKGEsYS5PKTt9ZnVuY3Rpb24gbWMoYSxiKXtpZihudWxsIT1hLmkpdGhyb3cgRXJyb3IoXCJXYXRjaERvZyB0aW1lciBub3QgbnVsbFwiKTthLmk9T2IodShhLmFiLGEpLGIpO31cbmZ1bmN0aW9uIGdjKGEpe2EuaSYmKGsuY2xlYXJUaW1lb3V0KGEuaSksYS5pPW51bGwpO31nLmFiPWZ1bmN0aW9uKCl7dGhpcy5pPW51bGw7dmFyIGE9dygpOzA8PWEtdGhpcy5SPygyIT10aGlzLkYmJihKKDMpLEsoMTcpKSxQKHRoaXMpLHRoaXMuYz0yLGpjKHRoaXMpKTptYyh0aGlzLHRoaXMuUi1hKTt9O2Z1bmN0aW9uIGpjKGEpe2EuZy5DYSgpfHxhLm18fGEuZy5uYShhKTt9ZnVuY3Rpb24gUChhKXtnYyhhKTt2YXIgYj1hLkI7YiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYi5sYSYmYi5sYSgpO2EuQj1udWxsO0RiKGEuUCk7SmIoYS5JKTthLmEmJihiPWEuYSxhLmE9bnVsbCxiLmFib3J0KCksYi5sYSgpKTt9ZnVuY3Rpb24gaWMoYSxiKXt0cnl7YS5nLkZhKGEsYiksSig0KTt9Y2F0Y2goYyl7fX1mdW5jdGlvbiBuYyhhKXtpZihhLkMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuQylyZXR1cm4gYS5DKCk7aWYobShhKSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihjYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBvYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihjYShhKXx8bShhKSlsYShhLGIsdm9pZCAwKTtlbHNle2lmKGEuSyYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5LKXZhciBjPWEuSygpO2Vsc2UgaWYoYS5DJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLkMpYz12b2lkIDA7ZWxzZSBpZihjYShhKXx8bShhKSl7Yz1bXTtmb3IodmFyIGQ9YS5sZW5ndGgsZT0wO2U8ZDtlKyspYy5wdXNoKGUpO31lbHNlIGZvcihlIGluIGM9W10sZD0wLGEpY1tkKytdPWU7ZD1uYyhhKTtlPWQubGVuZ3RoO2Zvcih2YXIgZj0wO2Y8ZTtmKyspYi5jYWxsKHZvaWQgMCxkW2ZdLGMmJmNbZl0sYSk7fX1mdW5jdGlvbiBRKGEsYil7dGhpcy5iPXt9O3RoaXMuYT1bXTt0aGlzLmM9MDt2YXIgYz1hcmd1bWVudHMubGVuZ3RoO2lmKDE8Yyl7aWYoYyUyKXRocm93IEVycm9yKFwiVW5ldmVuIG51bWJlciBvZiBhcmd1bWVudHNcIik7Zm9yKHZhciBkPTA7ZDxjO2QrPTIpdGhpcy5zZXQoYXJndW1lbnRzW2RdLGFyZ3VtZW50c1tkKzFdKTt9ZWxzZSBpZihhKWlmKGEgaW5zdGFuY2VvZiBRKWZvcihjPWEuSygpLGQ9MDtkPGMubGVuZ3RoO2QrKyl0aGlzLnNldChjW2RdLGEuZ2V0KGNbZF0pKTtlbHNlIGZvcihkIGluIGEpdGhpcy5zZXQoZCxhW2RdKTt9Zz1RLnByb3RvdHlwZTtnLkM9ZnVuY3Rpb24oKXtwYyh0aGlzKTtmb3IodmFyIGE9W10sYj0wO2I8dGhpcy5hLmxlbmd0aDtiKyspYS5wdXNoKHRoaXMuYlt0aGlzLmFbYl1dKTtyZXR1cm4gYX07Zy5LPWZ1bmN0aW9uKCl7cGModGhpcyk7cmV0dXJuIHRoaXMuYS5jb25jYXQoKX07XG5mdW5jdGlvbiBxYyhhKXthLmI9e307YS5hLmxlbmd0aD0wO2EuYz0wO31mdW5jdGlvbiByYyhhLGIpe1IoYS5iLGIpJiYoZGVsZXRlIGEuYltiXSxhLmMtLSxhLmEubGVuZ3RoPjIqYS5jJiZwYyhhKSk7fWZ1bmN0aW9uIHBjKGEpe2lmKGEuYyE9YS5hLmxlbmd0aCl7Zm9yKHZhciBiPTAsYz0wO2I8YS5hLmxlbmd0aDspe3ZhciBkPWEuYVtiXTtSKGEuYixkKSYmKGEuYVtjKytdPWQpO2IrKzt9YS5hLmxlbmd0aD1jO31pZihhLmMhPWEuYS5sZW5ndGgpe3ZhciBlPXt9O2ZvcihjPWI9MDtiPGEuYS5sZW5ndGg7KWQ9YS5hW2JdLFIoZSxkKXx8KGEuYVtjKytdPWQsZVtkXT0xKSxiKys7YS5hLmxlbmd0aD1jO319Zy5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUih0aGlzLmIsYSk/dGhpcy5iW2FdOmJ9O2cuc2V0PWZ1bmN0aW9uKGEsYil7Uih0aGlzLmIsYSl8fCh0aGlzLmMrKyx0aGlzLmEucHVzaChhKSk7dGhpcy5iW2FdPWI7fTtcbmcuZm9yRWFjaD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLksoKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0sZj10aGlzLmdldChlKTthLmNhbGwoYixmLGUsdGhpcyk7fX07ZnVuY3Rpb24gUihhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX12YXIgc2M9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXi8/I10qKUApPyhbXi8jP10qPykoPzo6KFswLTldKykpPyg/PVsvIz9dfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIHRjKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gUyhhLGIpe3RoaXMuYj10aGlzLmo9dGhpcy5mPVwiXCI7dGhpcy5pPW51bGw7dGhpcy5nPXRoaXMuYT1cIlwiO3RoaXMuaD0hMTt2YXIgYzthIGluc3RhbmNlb2YgUz8odGhpcy5oPXZvaWQgMCE9PWI/YjphLmgsdWModGhpcyxhLmYpLHRoaXMuaj1hLmosdmModGhpcyxhLmIpLHdjKHRoaXMsYS5pKSx0aGlzLmE9YS5hLHhjKHRoaXMseWMoYS5jKSksdGhpcy5nPWEuZyk6YSYmKGM9U3RyaW5nKGEpLm1hdGNoKHNjKSk/KHRoaXMuaD0hIWIsdWModGhpcyxjWzFdfHxcIlwiLCEwKSx0aGlzLmo9emMoY1syXXx8XCJcIiksdmModGhpcyxjWzNdfHxcIlwiLCEwKSx3Yyh0aGlzLGNbNF0pLHRoaXMuYT16YyhjWzVdfHxcIlwiLCEwKSx4Yyh0aGlzLGNbNl18fFwiXCIsITApLHRoaXMuZz16YyhjWzddfHxcIlwiKSk6KHRoaXMuaD0hIWIsdGhpcy5jPW5ldyBBYyhudWxsLHRoaXMuaCkpO31cblMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGE9W10sYj10aGlzLmY7YiYmYS5wdXNoKEJjKGIsQ2MsITApLFwiOlwiKTt2YXIgYz10aGlzLmI7aWYoY3x8XCJmaWxlXCI9PWIpYS5wdXNoKFwiLy9cIiksKGI9dGhpcy5qKSYmYS5wdXNoKEJjKGIsQ2MsITApLFwiQFwiKSxhLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSkucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxjPXRoaXMuaSxudWxsIT1jJiZhLnB1c2goXCI6XCIsU3RyaW5nKGMpKTtpZihjPXRoaXMuYSl0aGlzLmImJlwiL1wiIT1jLmNoYXJBdCgwKSYmYS5wdXNoKFwiL1wiKSxhLnB1c2goQmMoYyxcIi9cIj09Yy5jaGFyQXQoMCk/RGM6RWMsITApKTsoYz10aGlzLmMudG9TdHJpbmcoKSkmJmEucHVzaChcIj9cIixjKTsoYz10aGlzLmcpJiZhLnB1c2goXCIjXCIsQmMoYyxGYykpO3JldHVybiBhLmpvaW4oXCJcIil9O1xuUy5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbihhKXt2YXIgYj1OKHRoaXMpLGM9ISFhLmY7Yz91YyhiLGEuZik6Yz0hIWEuajtjP2Iuaj1hLmo6Yz0hIWEuYjtjP3ZjKGIsYS5iKTpjPW51bGwhPWEuaTt2YXIgZD1hLmE7aWYoYyl3YyhiLGEuaSk7ZWxzZSBpZihjPSEhYS5hKXtpZihcIi9cIiE9ZC5jaGFyQXQoMCkpaWYodGhpcy5iJiYhdGhpcy5hKWQ9XCIvXCIrZDtlbHNle3ZhciBlPWIuYS5sYXN0SW5kZXhPZihcIi9cIik7LTEhPWUmJihkPWIuYS5zdWJzdHIoMCxlKzEpK2QpO31lPWQ7aWYoXCIuLlwiPT1lfHxcIi5cIj09ZSlkPVwiXCI7ZWxzZSBpZih6KGUsXCIuL1wiKXx8eihlLFwiLy5cIikpe2Q9MD09ZS5sYXN0SW5kZXhPZihcIi9cIiwwKTtlPWUuc3BsaXQoXCIvXCIpO2Zvcih2YXIgZj1bXSxoPTA7aDxlLmxlbmd0aDspe3ZhciBsPWVbaCsrXTtcIi5cIj09bD9kJiZoPT1lLmxlbmd0aCYmZi5wdXNoKFwiXCIpOlwiLi5cIj09bD8oKDE8Zi5sZW5ndGh8fDE9PWYubGVuZ3RoJiZcIlwiIT1mWzBdKSYmZi5wb3AoKSxkJiZcbmg9PWUubGVuZ3RoJiZmLnB1c2goXCJcIikpOihmLnB1c2gobCksZD0hMCk7fWQ9Zi5qb2luKFwiL1wiKTt9ZWxzZSBkPWU7fWM/Yi5hPWQ6Yz1cIlwiIT09YS5jLnRvU3RyaW5nKCk7Yz94YyhiLHljKGEuYykpOmM9ISFhLmc7YyYmKGIuZz1hLmcpO3JldHVybiBifTtmdW5jdGlvbiBOKGEpe3JldHVybiBuZXcgUyhhKX1mdW5jdGlvbiB1YyhhLGIsYyl7YS5mPWM/emMoYiwhMCk6YjthLmYmJihhLmY9YS5mLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIHZjKGEsYixjKXthLmI9Yz96YyhiLCEwKTpiO31mdW5jdGlvbiB3YyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5pPWI7fWVsc2UgYS5pPW51bGw7fWZ1bmN0aW9uIHhjKGEsYixjKXtiIGluc3RhbmNlb2YgQWM/KGEuYz1iLEdjKGEuYyxhLmgpKTooY3x8KGI9QmMoYixIYykpLGEuYz1uZXcgQWMoYixhLmgpKTt9XG5mdW5jdGlvbiBUKGEsYixjKXthLmMuc2V0KGIsYyk7fWZ1bmN0aW9uIGZjKGEsYixjKXtxKGMpfHwoYz1bU3RyaW5nKGMpXSk7SWMoYS5jLGIsYyk7fWZ1bmN0aW9uIGJjKGEpe1QoYSxcInp4XCIsTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KStNYXRoLmFicyhNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSledygpKS50b1N0cmluZygzNikpO3JldHVybiBhfWZ1bmN0aW9uIEpjKGEpe3JldHVybiBhIGluc3RhbmNlb2YgUz9OKGEpOm5ldyBTKGEsdm9pZCAwKX1mdW5jdGlvbiBLYyhhLGIsYyxkKXt2YXIgZT1uZXcgUyhudWxsLHZvaWQgMCk7YSYmdWMoZSxhKTtiJiZ2YyhlLGIpO2MmJndjKGUsYyk7ZCYmKGUuYT1kKTtyZXR1cm4gZX1mdW5jdGlvbiB6YyhhLGIpe3JldHVybiBhP2I/ZGVjb2RlVVJJKGEucmVwbGFjZSgvJTI1L2csXCIlMjUyNVwiKSk6ZGVjb2RlVVJJQ29tcG9uZW50KGEpOlwiXCJ9XG5mdW5jdGlvbiBCYyhhLGIsYyl7cmV0dXJuIG0oYSk/KGE9ZW5jb2RlVVJJKGEpLnJlcGxhY2UoYixMYyksYyYmKGE9YS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGEpOm51bGx9ZnVuY3Rpb24gTGMoYSl7YT1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIFwiJVwiKyhhPj40JjE1KS50b1N0cmluZygxNikrKGEmMTUpLnRvU3RyaW5nKDE2KX12YXIgQ2M9L1sjXFwvXFw/QF0vZyxFYz0vWyNcXD86XS9nLERjPS9bI1xcP10vZyxIYz0vWyNcXD9AXS9nLEZjPS8jL2c7ZnVuY3Rpb24gQWMoYSxiKXt0aGlzLmI9dGhpcy5hPW51bGw7dGhpcy5jPWF8fG51bGw7dGhpcy5mPSEhYjt9ZnVuY3Rpb24gVShhKXthLmF8fChhLmE9bmV3IFEsYS5iPTAsYS5jJiZ0YyhhLmMsZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9Zz1BYy5wcm90b3R5cGU7XG5nLmFkZD1mdW5jdGlvbihhLGIpe1UodGhpcyk7dGhpcy5jPW51bGw7YT1WKHRoaXMsYSk7dmFyIGM9dGhpcy5hLmdldChhKTtjfHx0aGlzLmEuc2V0KGEsYz1bXSk7Yy5wdXNoKGIpO3RoaXMuYis9MTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gTWMoYSxiKXtVKGEpO2I9VihhLGIpO1IoYS5hLmIsYikmJihhLmM9bnVsbCxhLmItPWEuYS5nZXQoYikubGVuZ3RoLHJjKGEuYSxiKSk7fWZ1bmN0aW9uIE5jKGEsYil7VShhKTtiPVYoYSxiKTtyZXR1cm4gUihhLmEuYixiKX1nLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtVKHRoaXMpO3RoaXMuYS5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7bGEoYyxmdW5jdGlvbihlKXthLmNhbGwoYixlLGQsdGhpcyk7fSx0aGlzKTt9LHRoaXMpO307XG5nLks9ZnVuY3Rpb24oKXtVKHRoaXMpO2Zvcih2YXIgYT10aGlzLmEuQygpLGI9dGhpcy5hLksoKSxjPVtdLGQ9MDtkPGIubGVuZ3RoO2QrKylmb3IodmFyIGU9YVtkXSxmPTA7ZjxlLmxlbmd0aDtmKyspYy5wdXNoKGJbZF0pO3JldHVybiBjfTtnLkM9ZnVuY3Rpb24oYSl7VSh0aGlzKTt2YXIgYj1bXTtpZihtKGEpKU5jKHRoaXMsYSkmJihiPW9hKGIsdGhpcy5hLmdldChWKHRoaXMsYSkpKSk7ZWxzZXthPXRoaXMuYS5DKCk7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYj1vYShiLGFbY10pO31yZXR1cm4gYn07Zy5zZXQ9ZnVuY3Rpb24oYSxiKXtVKHRoaXMpO3RoaXMuYz1udWxsO2E9Vih0aGlzLGEpO05jKHRoaXMsYSkmJih0aGlzLmItPXRoaXMuYS5nZXQoYSkubGVuZ3RoKTt0aGlzLmEuc2V0KGEsW2JdKTt0aGlzLmIrPTE7cmV0dXJuIHRoaXN9O1xuZy5nZXQ9ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gYjthPXRoaXMuQyhhKTtyZXR1cm4gMDxhLmxlbmd0aD9TdHJpbmcoYVswXSk6Yn07ZnVuY3Rpb24gSWMoYSxiLGMpe01jKGEsYik7MDxjLmxlbmd0aCYmKGEuYz1udWxsLGEuYS5zZXQoVihhLGIpLHBhKGMpKSxhLmIrPWMubGVuZ3RoKTt9Zy50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuYylyZXR1cm4gdGhpcy5jO2lmKCF0aGlzLmEpcmV0dXJuIFwiXCI7Zm9yKHZhciBhPVtdLGI9dGhpcy5hLksoKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY10sZT1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGQpKTtkPXRoaXMuQyhkKTtmb3IodmFyIGY9MDtmPGQubGVuZ3RoO2YrKyl7dmFyIGg9ZTtcIlwiIT09ZFtmXSYmKGgrPVwiPVwiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZFtmXSkpKTthLnB1c2goaCk7fX1yZXR1cm4gdGhpcy5jPWEuam9pbihcIiZcIil9O1xuZnVuY3Rpb24geWMoYSl7dmFyIGI9bmV3IEFjO2IuYz1hLmM7YS5hJiYoYi5hPW5ldyBRKGEuYSksYi5iPWEuYik7cmV0dXJuIGJ9ZnVuY3Rpb24gVihhLGIpe2I9U3RyaW5nKGIpO2EuZiYmKGI9Yi50b0xvd2VyQ2FzZSgpKTtyZXR1cm4gYn1mdW5jdGlvbiBHYyhhLGIpe2ImJiFhLmYmJihVKGEpLGEuYz1udWxsLGEuYS5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7dmFyIGU9ZC50b0xvd2VyQ2FzZSgpO2QhPWUmJihNYyh0aGlzLGQpLEljKHRoaXMsZSxjKSk7fSxhKSk7YS5mPWI7fWZ1bmN0aW9uIFFjKCl7fWZ1bmN0aW9uIFJjKCl7fXgoUmMsUWMpO2Z1bmN0aW9uIFNjKGEpe3RoaXMuYT1hO3RoaXMuYj10aGlzLmg9bnVsbDt0aGlzLmc9ITE7dGhpcy5pPW51bGw7dGhpcy5jPS0xO3RoaXMubD10aGlzLmY9bnVsbDt9Zz1TYy5wcm90b3R5cGU7Zy5NPW51bGw7ZnVuY3Rpb24gVWMoYSl7dmFyIGI9YS5hLkYuYTtpZihudWxsIT1iKUsoNCksYj8oSygxMCksVmMoYS5hLGEsITEpKTooSygxMSksVmMoYS5hLGEsITApKTtlbHNle2EuYj1uZXcgTShhLHZvaWQgMCx2b2lkIDApO2EuYi5oPWEuaDtiPWEuYTtiPVdjKGIsYi5ZKCk/YS5mOm51bGwsYS5pKTtLKDQpO2ZjKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO3ZhciBjPWEuYS5qLGQ9YS5hLkk7YyYmZCYmVChiLGMsZCk7ZGMoYS5iLGIsITEsYS5mKTt9fWcuJD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hLiQoYSl9O2cuYWJvcnQ9ZnVuY3Rpb24oKXt0aGlzLmImJih0aGlzLmIuY2FuY2VsKCksdGhpcy5iPW51bGwpO3RoaXMuYz0tMTt9O2cuQ2E9ZnVuY3Rpb24oKXtyZXR1cm4gITF9O1xuZy5GYT1mdW5jdGlvbihhLGIpe3RoaXMuYz1hLm87aWYoMD09dGhpcy5NKXtpZighdGhpcy5hLm8mJihhPWEuYSkpe3ZhciBjPWhjKGEsXCJYLUNsaWVudC1XaXJlLVByb3RvY29sXCIpO3RoaXMubD1jP2M6bnVsbDt0aGlzLmEuaiYmKGE9aGMoYSxcIlgtSFRUUC1TZXNzaW9uLUlkXCIpKSYmKHRoaXMuYS5JPWEpO31pZihiKXt0cnl7dmFyIGQ9dGhpcy5hLmphLmEucGFyc2UoYik7fWNhdGNoKGUpe2I9dGhpcy5hO2IubT10aGlzLmM7VyhiLDIpO3JldHVybn10aGlzLmY9ZFswXTt9ZWxzZSBiPXRoaXMuYSxiLm09dGhpcy5jLFcoYiwyKTt9ZWxzZSBpZigxPT10aGlzLk0paWYodGhpcy5nKUsoNik7ZWxzZSBpZihcIjExMTExXCI9PWIpe2lmKEsoNSksdGhpcy5nPSEwLCFCfHwxMDw9TnVtYmVyKE5hKSl0aGlzLmM9MjAwLHRoaXMuYi5jYW5jZWwoKSxLKDExKSxWYyh0aGlzLmEsdGhpcywhMCk7fWVsc2UgSyg3KSx0aGlzLmc9ITE7fTtcbmcubmE9ZnVuY3Rpb24oKXt0aGlzLmM9dGhpcy5iLm87aWYodGhpcy5iLmIpMD09dGhpcy5NPyh0aGlzLk09MSxVYyh0aGlzKSk6MT09dGhpcy5NJiYodGhpcy5nPyhLKDExKSxWYyh0aGlzLmEsdGhpcywhMCkpOihLKDEwKSxWYyh0aGlzLmEsdGhpcywhMSkpKTtlbHNlezA9PXRoaXMuTT9LKDgpOjE9PXRoaXMuTSYmSyg5KTt2YXIgYT10aGlzLmE7YS5tPXRoaXMuYztXKGEsMik7fX07Zy5ZPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5ZKCl9O2cubWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLm1hKCl9O2Z1bmN0aW9uIFhjKCl7dGhpcy5hPXRoaXMuYj1udWxsO31mdW5jdGlvbiBZYygpe3RoaXMuYT1uZXcgUTt9ZnVuY3Rpb24gWmMoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJmF8fFwiZnVuY3Rpb25cIj09Yj9cIm9cIisoYVt0XXx8KGFbdF09KytkYSkpOmIuY2hhckF0KDApK2F9WWMucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhKXt0aGlzLmEuc2V0KFpjKGEpLGEpO307WWMucHJvdG90eXBlLkM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLkMoKX07ZnVuY3Rpb24gJGMoYSxiKXt0aGlzLmI9YTt0aGlzLmE9Yjt9ZnVuY3Rpb24gYWQoYSl7dGhpcy5nPWF8fGJkO2suUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWsucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEoay5rYSYmay5rYS5EYSYmay5rYS5EYSgpJiZrLmthLkRhKCkueWIpO3RoaXMuZj1hP3RoaXMuZzoxO3RoaXMuYT1udWxsOzE8dGhpcy5mJiYodGhpcy5hPW5ldyBZYyk7dGhpcy5iPW51bGw7dGhpcy5jPVtdO312YXIgYmQ9MTA7ZnVuY3Rpb24gY2QoYSxiKXshYS5hJiYoeihiLFwic3BkeVwiKXx8eihiLFwicXVpY1wiKXx8eihiLFwiaDJcIikpJiYoYS5mPWEuZyxhLmE9bmV3IFljLGEuYiYmKGRkKGEsYS5iKSxhLmI9bnVsbCkpO31mdW5jdGlvbiBlZChhKXtyZXR1cm4gYS5iPyEwOmEuYT9hLmEuYS5jPj1hLmY6ITF9XG5mdW5jdGlvbiBmZChhKXtyZXR1cm4gYS5iPzE6YS5hP2EuYS5hLmM6MH1mdW5jdGlvbiBnZChhLGIpe2EuYj9hPWEuYj09YjphLmE/KGI9WmMoYiksYT1SKGEuYS5hLmIsYikpOmE9ITE7cmV0dXJuIGF9ZnVuY3Rpb24gZGQoYSxiKXthLmE/YS5hLmFkZChiKTphLmI9Yjt9ZnVuY3Rpb24gaGQoYSxiKXtpZihhLmImJmEuYj09YilhLmI9bnVsbDtlbHNle3ZhciBjO2lmKGM9YS5hKWM9WmMoYiksYz1SKGEuYS5hLmIsYyk7YyYmcmMoYS5hLmEsWmMoYikpO319YWQucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuYz1pZCh0aGlzKTt0aGlzLmI/KHRoaXMuYi5jYW5jZWwoKSx0aGlzLmI9bnVsbCk6dGhpcy5hJiYwIT10aGlzLmEuYS5jJiYobGEodGhpcy5hLkMoKSxmdW5jdGlvbihhKXthLmNhbmNlbCgpO30pLHFjKHRoaXMuYS5hKSk7fTtcbmZ1bmN0aW9uIGlkKGEpe2lmKG51bGwhPWEuYilyZXR1cm4gYS5jLmNvbmNhdChhLmIuaik7aWYobnVsbCE9YS5hJiYwIT1hLmEuYS5jKXt2YXIgYj1hLmM7bGEoYS5hLkMoKSxmdW5jdGlvbihjKXtiPWIuY29uY2F0KGMuaik7fSk7cmV0dXJuIGJ9cmV0dXJuIHBhKGEuYyl9ZnVuY3Rpb24gamQoKXt9amQucHJvdG90eXBlLnN0cmluZ2lmeT1mdW5jdGlvbihhKXtyZXR1cm4gay5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9O2pkLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhKXtyZXR1cm4gay5KU09OLnBhcnNlKGEsdm9pZCAwKX07ZnVuY3Rpb24ga2QoKXt0aGlzLmE9bmV3IGpkO31mdW5jdGlvbiBsZChhLGIsYyl7dmFyIGQ9Y3x8XCJcIjt0cnl7b2MoYSxmdW5jdGlvbihlLGYpe3ZhciBoPWU7cihlKSYmKGg9b2IoZSkpO2IucHVzaChkK2YrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGgpKTt9KTt9Y2F0Y2goZSl7dGhyb3cgYi5wdXNoKGQrXCJ0eXBlPVwiK2VuY29kZVVSSUNvbXBvbmVudChcIl9iYWRtYXBcIikpLGU7fX1mdW5jdGlvbiBtZChhLGIpe3ZhciBjPW5ldyBLYjtpZihrLkltYWdlKXt2YXIgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9dihuZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBsb2FkZWRcIiwhMCxiKTtkLm9uZXJyb3I9dihuZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBlcnJvclwiLCExLGIpO2Qub25hYm9ydD12KG5kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9dihuZCxjLGQsXCJUZXN0TG9hZEltYWdlOiB0aW1lb3V0XCIsITEsYik7ay5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoZC5vbnRpbWVvdXQpZC5vbnRpbWVvdXQoKTt9LDFFNCk7ZC5zcmM9YTt9ZWxzZSBiKCExKTt9ZnVuY3Rpb24gbmQoYSxiLGMsZCxlKXt0cnl7Yi5vbmxvYWQ9bnVsbCxiLm9uZXJyb3I9bnVsbCxiLm9uYWJvcnQ9bnVsbCxiLm9udGltZW91dD1udWxsLGUoZCk7fWNhdGNoKGYpe319dmFyIG9kPWsuSlNPTi5wYXJzZTtmdW5jdGlvbiBYKGEpe0cuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IFE7dGhpcy5IPWF8fG51bGw7dGhpcy5iPSExO3RoaXMucz10aGlzLmE9bnVsbDt0aGlzLkE9XCJcIjt0aGlzLmg9MDt0aGlzLmY9XCJcIjt0aGlzLmc9dGhpcy53PXRoaXMubD10aGlzLnY9ITE7dGhpcy5vPTA7dGhpcy5tPW51bGw7dGhpcy5JPXBkO3RoaXMuRD10aGlzLkY9ITE7fXgoWCxHKTt2YXIgcGQ9XCJcIixxZD0vXmh0dHBzPyQvaSxyZD1bXCJQT1NUXCIsXCJQVVRcIl07Zz1YLnByb3RvdHlwZTtcbmcuY2E9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5hKXRocm93IEVycm9yKFwiW2dvb2cubmV0LlhocklvXSBPYmplY3QgaXMgYWN0aXZlIHdpdGggYW5vdGhlciByZXF1ZXN0PVwiK3RoaXMuQStcIjsgbmV3VXJpPVwiK2EpO2I9Yj9iLnRvVXBwZXJDYXNlKCk6XCJHRVRcIjt0aGlzLkE9YTt0aGlzLmY9XCJcIjt0aGlzLmg9MDt0aGlzLnY9ITE7dGhpcy5iPSEwO3RoaXMuYT1uZXcgWE1MSHR0cFJlcXVlc3Q7dGhpcy5zPXRoaXMuSD9TYih0aGlzLkgpOlNiKFdiKTt0aGlzLmEub25yZWFkeXN0YXRlY2hhbmdlPXUodGhpcy5FYSx0aGlzKTt0cnl7dGhpcy53PSEwLHRoaXMuYS5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLnc9ITE7fWNhdGNoKGYpe3NkKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjt2YXIgZT1uZXcgUSh0aGlzLmhlYWRlcnMpO2QmJm9jKGQsZnVuY3Rpb24oZixoKXtlLnNldChoLGYpO30pO2Q9bWEoZS5LKCkpO2M9ay5Gb3JtRGF0YSYmYSBpbnN0YW5jZW9mIGsuRm9ybURhdGE7ISgwPD1cbmphKHJkLGIpKXx8ZHx8Y3x8ZS5zZXQoXCJDb250ZW50LVR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04XCIpO2UuZm9yRWFjaChmdW5jdGlvbihmLGgpe3RoaXMuYS5zZXRSZXF1ZXN0SGVhZGVyKGgsZik7fSx0aGlzKTt0aGlzLkkmJih0aGlzLmEucmVzcG9uc2VUeXBlPXRoaXMuSSk7XCJ3aXRoQ3JlZGVudGlhbHNcImluIHRoaXMuYSYmdGhpcy5hLndpdGhDcmVkZW50aWFscyE9PXRoaXMuRiYmKHRoaXMuYS53aXRoQ3JlZGVudGlhbHM9dGhpcy5GKTt0cnl7dGQodGhpcyksMDx0aGlzLm8mJigodGhpcy5EPXVkKHRoaXMuYSkpPyh0aGlzLmEudGltZW91dD10aGlzLm8sdGhpcy5hLm9udGltZW91dD11KHRoaXMuQmEsdGhpcykpOnRoaXMubT1FYih0aGlzLkJhLHRoaXMubyx0aGlzKSksdGhpcy5sPSEwLHRoaXMuYS5zZW5kKGEpLHRoaXMubD0hMTt9Y2F0Y2goZil7c2QodGhpcyxmKTt9fTtcbmZ1bmN0aW9uIHVkKGEpe3JldHVybiBCJiZNYSg5KSYmYWEoYS50aW1lb3V0KSYmdm9pZCAwIT09YS5vbnRpbWVvdXR9ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIFwiY29udGVudC10eXBlXCI9PWEudG9Mb3dlckNhc2UoKX1nLkJhPWZ1bmN0aW9uKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdvb2cmJnRoaXMuYSYmKHRoaXMuZj1cIlRpbWVkIG91dCBhZnRlciBcIit0aGlzLm8rXCJtcywgYWJvcnRpbmdcIix0aGlzLmg9OCx0aGlzLmRpc3BhdGNoRXZlbnQoXCJ0aW1lb3V0XCIpLHRoaXMuYWJvcnQoOCkpO307ZnVuY3Rpb24gc2QoYSxiKXthLmI9ITE7YS5hJiYoYS5nPSEwLGEuYS5hYm9ydCgpLGEuZz0hMSk7YS5mPWI7YS5oPTU7dmQoYSk7d2QoYSk7fWZ1bmN0aW9uIHZkKGEpe2Eudnx8KGEudj0hMCxhLmRpc3BhdGNoRXZlbnQoXCJjb21wbGV0ZVwiKSxhLmRpc3BhdGNoRXZlbnQoXCJlcnJvclwiKSk7fVxuZy5hYm9ydD1mdW5jdGlvbihhKXt0aGlzLmEmJnRoaXMuYiYmKHRoaXMuYj0hMSx0aGlzLmc9ITAsdGhpcy5hLmFib3J0KCksdGhpcy5nPSExLHRoaXMuaD1hfHw3LHRoaXMuZGlzcGF0Y2hFdmVudChcImNvbXBsZXRlXCIpLHRoaXMuZGlzcGF0Y2hFdmVudChcImFib3J0XCIpLHdkKHRoaXMpKTt9O2cuRz1mdW5jdGlvbigpe3RoaXMuYSYmKHRoaXMuYiYmKHRoaXMuYj0hMSx0aGlzLmc9ITAsdGhpcy5hLmFib3J0KCksdGhpcy5nPSExKSx3ZCh0aGlzLCEwKSk7WC5OLkcuY2FsbCh0aGlzKTt9O2cuRWE9ZnVuY3Rpb24oKXt0aGlzLmp8fCh0aGlzLnd8fHRoaXMubHx8dGhpcy5nP3hkKHRoaXMpOnRoaXMuWmEoKSk7fTtnLlphPWZ1bmN0aW9uKCl7eGQodGhpcyk7fTtcbmZ1bmN0aW9uIHhkKGEpe2lmKGEuYiYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdvb2cmJighYS5zWzFdfHw0IT1PKGEpfHwyIT1hLlQoKSkpaWYoYS5sJiY0PT1PKGEpKUViKGEuRWEsMCxhKTtlbHNlIGlmKGEuZGlzcGF0Y2hFdmVudChcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09TyhhKSl7YS5iPSExO3RyeXt2YXIgYj1hLlQoKTthOnN3aXRjaChiKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGM9ITA7YnJlYWsgYTtkZWZhdWx0OmM9ITE7fXZhciBkO2lmKCEoZD1jKSl7dmFyIGU7aWYoZT0wPT09Yil7dmFyIGY9U3RyaW5nKGEuQSkubWF0Y2goc2MpWzFdfHxudWxsO2lmKCFmJiZrLnNlbGYmJmsuc2VsZi5sb2NhdGlvbil7dmFyIGg9ay5zZWxmLmxvY2F0aW9uLnByb3RvY29sO2Y9aC5zdWJzdHIoMCxoLmxlbmd0aC0xKTt9ZT0hcWQudGVzdChmP2YudG9Mb3dlckNhc2UoKTpcIlwiKTt9ZD1lO31pZihkKWEuZGlzcGF0Y2hFdmVudChcImNvbXBsZXRlXCIpLFxuYS5kaXNwYXRjaEV2ZW50KFwic3VjY2Vzc1wiKTtlbHNle2EuaD02O3RyeXt2YXIgbD0yPE8oYSk/YS5hLnN0YXR1c1RleHQ6XCJcIjt9Y2F0Y2goRSl7bD1cIlwiO31hLmY9bCtcIiBbXCIrYS5UKCkrXCJdXCI7dmQoYSk7fX1maW5hbGx5e3dkKGEpO319fWZ1bmN0aW9uIHdkKGEsYil7aWYoYS5hKXt0ZChhKTt2YXIgYz1hLmEsZD1hLnNbMF0/YmE6bnVsbDthLmE9bnVsbDthLnM9bnVsbDtifHxhLmRpc3BhdGNoRXZlbnQoXCJyZWFkeVwiKTt0cnl7Yy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDt9Y2F0Y2goZSl7fX19ZnVuY3Rpb24gdGQoYSl7YS5hJiZhLkQmJihhLmEub250aW1lb3V0PW51bGwpO2EubSYmKGsuY2xlYXJUaW1lb3V0KGEubSksYS5tPW51bGwpO31mdW5jdGlvbiBPKGEpe3JldHVybiBhLmE/YS5hLnJlYWR5U3RhdGU6MH1nLlQ9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIDI8Tyh0aGlzKT90aGlzLmEuc3RhdHVzOi0xfWNhdGNoKGEpe3JldHVybiAtMX19O1xuZy5hYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5hP3RoaXMuYS5yZXNwb25zZVRleHQ6XCJcIn1jYXRjaChhKXtyZXR1cm4gXCJcIn19O2cuVWE9ZnVuY3Rpb24oYSl7aWYodGhpcy5hKXt2YXIgYj10aGlzLmEucmVzcG9uc2VUZXh0O2EmJjA9PWIuaW5kZXhPZihhKSYmKGI9Yi5zdWJzdHJpbmcoYS5sZW5ndGgpKTtyZXR1cm4gb2QoYil9fTtmdW5jdGlvbiBoYyhhLGIpe3JldHVybiBhLmE/YS5hLmdldFJlc3BvbnNlSGVhZGVyKGIpOm51bGx9Zy55YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmh9O2cuWGE9ZnVuY3Rpb24oKXtyZXR1cm4gbSh0aGlzLmYpP3RoaXMuZjpTdHJpbmcodGhpcy5mKX07ZnVuY3Rpb24geWQoYSl7dmFyIGI9XCJcIjt2YShhLGZ1bmN0aW9uKGMsZCl7Yis9ZDtiKz1cIjpcIjtiKz1jO2IrPVwiXFxyXFxuXCI7fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gemQoYSxiLGMpe2E6e2ZvcihkIGluIGMpe3ZhciBkPSExO2JyZWFrIGF9ZD0hMDt9aWYoZClyZXR1cm4gYTtjPXlkKGMpO2lmKG0oYSkpe2I9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhiKSk7Yz1udWxsIT1jP1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpOlwiXCI7aWYoYis9Yyl7Yz1hLmluZGV4T2YoXCIjXCIpOzA+YyYmKGM9YS5sZW5ndGgpO2Q9YS5pbmRleE9mKFwiP1wiKTtpZigwPmR8fGQ+Yyl7ZD1jO3ZhciBlPVwiXCI7fWVsc2UgZT1hLnN1YnN0cmluZyhkKzEsYyk7YT1bYS5zdWJzdHIoMCxkKSxlLGEuc3Vic3RyKGMpXTtjPWFbMV07YVsxXT1iP2M/YytcIiZcIitiOmI6YzthPWFbMF0rKGFbMV0/XCI/XCIrYVsxXTpcIlwiKSthWzJdO31yZXR1cm4gYX1UKGEsYixjKTtyZXR1cm4gYX1mdW5jdGlvbiBBZChhKXt0aGlzLmY9W107dGhpcy5GPW5ldyBYYzt0aGlzLmdhPXRoaXMucGE9dGhpcy5CPXRoaXMuaGE9dGhpcy5hPXRoaXMuST10aGlzLmo9dGhpcy5WPXRoaXMuZz10aGlzLko9dGhpcy5pPW51bGw7dGhpcy5RYT10aGlzLlA9MDt0aGlzLk9hPSEhbihcImludGVybmFsQ2hhbm5lbFBhcmFtcy5mYWlsRmFzdFwiLGEpO3RoaXMuaWE9dGhpcy53PXRoaXMucz10aGlzLmw9dGhpcy5oPXRoaXMuYz1udWxsO3RoaXMub2E9ITA7dGhpcy5tPXRoaXMucmE9dGhpcy5PPS0xO3RoaXMuUz10aGlzLnY9dGhpcy5BPTA7dGhpcy5OYT1uKFwiaW50ZXJuYWxDaGFubmVsUGFyYW1zLmJhc2VSZXRyeURlbGF5TXNcIixhKXx8NUUzO3RoaXMuUmE9bihcImludGVybmFsQ2hhbm5lbFBhcmFtcy5yZXRyeURlbGF5U2VlZE1zXCIsYSl8fDFFNDt0aGlzLlBhPW4oXCJpbnRlcm5hbENoYW5uZWxQYXJhbXMuZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsYSl8fDI7dGhpcy5xYT1uKFwiaW50ZXJuYWxDaGFubmVsUGFyYW1zLmZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNc1wiLFxuYSl8fDJFNDt0aGlzLkthPWEmJmEuemJ8fHZvaWQgMDt0aGlzLkQ9dm9pZCAwO3RoaXMuUj1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSD1cIlwiO3RoaXMuYj1uZXcgYWQoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLmphPW5ldyBrZDt0aGlzLm89YSYmdm9pZCAwIT09YS5iYWNrZ3JvdW5kQ2hhbm5lbFRlc3Q/YS5iYWNrZ3JvdW5kQ2hhbm5lbFRlc3Q6ITA7KHRoaXMuVz1hJiZhLmZhc3RIYW5kc2hha2V8fCExKSYmIXRoaXMubyYmKHRoaXMubz0hMCk7YSYmYS5mb3JjZUxvbmdQb2xsaW5nJiYodGhpcy5vYT0hMSk7dGhpcy5mYT12b2lkIDA7fWc9QWQucHJvdG90eXBlO2cud2E9ODtnLnU9MTtcbmZ1bmN0aW9uIEJkKGEpe0NkKGEpO2lmKDM9PWEudSl7dmFyIGI9YS5QKyssYz1OKGEuQik7VChjLFwiU0lEXCIsYS5IKTtUKGMsXCJSSURcIixiKTtUKGMsXCJUWVBFXCIsXCJ0ZXJtaW5hdGVcIik7RGQoYSxjKTtiPW5ldyBNKGEsYix2b2lkIDApO2IuRj0yO2IuZj1iYyhOKGMpKTtjPSExO2submF2aWdhdG9yJiZrLm5hdmlnYXRvci5zZW5kQmVhY29uJiYoYz1rLm5hdmlnYXRvci5zZW5kQmVhY29uKGIuZi50b1N0cmluZygpLFwiXCIpKTshYyYmay5JbWFnZSYmKChuZXcgSW1hZ2UpLnNyYz1iLmYsYz0hMCk7Y3x8KGIuYT1iLmcuJChudWxsKSxiLmEuY2EoYi5mKSk7Yi52PXcoKTtlYyhiKTt9RWQoYSk7fVxuZnVuY3Rpb24gQ2QoYSl7YS53JiYoYS53LmFib3J0KCksYS53PW51bGwpO2EuYSYmKGEuYS5jYW5jZWwoKSxhLmE9bnVsbCk7YS5sJiYoay5jbGVhclRpbWVvdXQoYS5sKSxhLmw9bnVsbCk7RmQoYSk7YS5iLmNhbmNlbCgpO2EuaCYmKGFhKGEuaCkmJmsuY2xlYXJUaW1lb3V0KGEuaCksYS5oPW51bGwpO31mdW5jdGlvbiBHZChhLGIpe2EuZi5wdXNoKG5ldyAkYyhhLlFhKyssYikpOzM9PWEudSYmSGQoYSk7fWcuQ2E9ZnVuY3Rpb24oKXtyZXR1cm4gMD09dGhpcy51fTtmdW5jdGlvbiBIZChhKXtlZChhLmIpfHxhLmh8fChhLmg9ITAsd2IoYS5IYSxhKSxhLkE9MCk7fVxuZnVuY3Rpb24gSWQoYSxiKXtpZihmZChhLmIpPj1hLmIuZi0oYS5oPzE6MCkpcmV0dXJuICExO2lmKGEuaClyZXR1cm4gYS5mPWIuai5jb25jYXQoYS5mKSwhMDtpZigxPT1hLnV8fDI9PWEudXx8YS5BPj0oYS5PYT8wOmEuUGEpKXJldHVybiAhMTthLmg9T2IodShhLkhhLGEsYiksSmQoYSxhLkEpKTthLkErKztyZXR1cm4gITB9XG5nLkhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuaClpZih0aGlzLmg9bnVsbCwxPT10aGlzLnUpe2lmKCFhKXt0aGlzLlA9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlArKzt2YXIgYj1uZXcgTSh0aGlzLGEsdm9pZCAwKSxjPXRoaXMuaTt0aGlzLkomJihjPyhjPXdhKGMpLHlhKGMsdGhpcy5KKSk6Yz10aGlzLkopO251bGw9PT10aGlzLmcmJihiLmg9Yyk7dmFyIGQ7aWYodGhpcy5XKWE6e2Zvcih2YXIgZT1kPTA7ZTx0aGlzLmYubGVuZ3RoO2UrKyl7Yjp7dmFyIGY9dGhpcy5mW2VdO2lmKFwiX19kYXRhX19cImluIGYuYSYmKGY9Zi5hLl9fZGF0YV9fLG0oZikpKXtmPWYubGVuZ3RoO2JyZWFrIGJ9Zj12b2lkIDA7fWlmKHZvaWQgMD09PWYpYnJlYWs7ZCs9ZjtpZig0MDk2PGQpe2Q9ZTticmVhayBhfWlmKDQwOTY9PT1kfHxlPT09dGhpcy5mLmxlbmd0aC0xKXtkPWUrMTticmVhayBhfX1kPTFFMzt9ZWxzZSBkPTFFMztkPUtkKHRoaXMsYixkKTtlPU4odGhpcy5CKTtUKGUsXG5cIlJJRFwiLGEpO1QoZSxcIkNWRVJcIiwyMik7dGhpcy5vJiZ0aGlzLmomJlQoZSxcIlgtSFRUUC1TZXNzaW9uLUlkXCIsdGhpcy5qKTtEZCh0aGlzLGUpO3RoaXMuZyYmYyYmemQoZSx0aGlzLmcsYyk7ZGQodGhpcy5iLGIpO3RoaXMuVz8oVChlLFwiJHJlcVwiLGQpLFQoZSxcIlNJRFwiLFwibnVsbFwiKSxiLlM9ITAsYWMoYixlLG51bGwpKTphYyhiLGUsZCk7dGhpcy51PTI7fX1lbHNlIDM9PXRoaXMudSYmKGE/TGQodGhpcyxhKTowPT10aGlzLmYubGVuZ3RofHxlZCh0aGlzLmIpfHxMZCh0aGlzKSk7fTtcbmZ1bmN0aW9uIExkKGEsYil7dmFyIGM7Yj9jPWIuVzpjPWEuUCsrO3ZhciBkPU4oYS5CKTtUKGQsXCJTSURcIixhLkgpO1QoZCxcIlJJRFwiLGMpO1QoZCxcIkFJRFwiLGEuTyk7RGQoYSxkKTthLmcmJmEuaSYmemQoZCxhLmcsYS5pKTtjPW5ldyBNKGEsYyxhLkErMSk7bnVsbD09PWEuZyYmKGMuaD1hLmkpO2ImJihhLmY9Yi5qLmNvbmNhdChhLmYpKTtiPUtkKGEsYywxRTMpO2Muc2V0VGltZW91dChNYXRoLnJvdW5kKC41KmEucWEpK01hdGgucm91bmQoLjUqYS5xYSpNYXRoLnJhbmRvbSgpKSk7ZGQoYS5iLGMpO2FjKGMsZCxiKTt9ZnVuY3Rpb24gRGQoYSxiKXthLmMmJm9jKHt9LGZ1bmN0aW9uKGMsZCl7VChiLGQsYyk7fSk7fVxuZnVuY3Rpb24gS2QoYSxiLGMpe2M9TWF0aC5taW4oYS5mLmxlbmd0aCxjKTt2YXIgZD1hLmM/dShhLmMuU2EsYS5jLGEpOm51bGw7YTpmb3IodmFyIGU9YS5mLGY9LTE7Oyl7dmFyIGg9W1wiY291bnQ9XCIrY107LTE9PWY/MDxjPyhmPWVbMF0uYixoLnB1c2goXCJvZnM9XCIrZikpOmY9MDpoLnB1c2goXCJvZnM9XCIrZik7Zm9yKHZhciBsPSEwLEU9MDtFPGM7RSsrKXt2YXIgQmI9ZVtFXS5iLFRjPWVbRV0uYTtCYi09ZjtpZigwPkJiKWY9TWF0aC5tYXgoMCxlW0VdLmItMTAwKSxsPSExO2Vsc2UgdHJ5e2xkKFRjLGgsXCJyZXFcIitCYitcIl9cIik7fWNhdGNoKFVkKXtkJiZkKFRjKTt9fWlmKGwpe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX1hPWEuZi5zcGxpY2UoMCxjKTtiLmo9YTtyZXR1cm4gZH1mdW5jdGlvbiBNZChhKXthLmF8fGEubHx8KGEuUz0xLHdiKGEuR2EsYSksYS52PTApO31cbmZ1bmN0aW9uIE5kKGEpe2lmKGEuYXx8YS5sfHwzPD1hLnYpcmV0dXJuICExO2EuUysrO2EubD1PYih1KGEuR2EsYSksSmQoYSxhLnYpKTthLnYrKztyZXR1cm4gITB9Zy5HYT1mdW5jdGlvbigpe3RoaXMubD1udWxsO3RoaXMuYT1uZXcgTSh0aGlzLFwicnBjXCIsdGhpcy5TKTtudWxsPT09dGhpcy5nJiYodGhpcy5hLmg9dGhpcy5pKTt0aGlzLmEuSj0wO3ZhciBhPU4odGhpcy5wYSk7VChhLFwiUklEXCIsXCJycGNcIik7VChhLFwiU0lEXCIsdGhpcy5IKTtUKGEsXCJDSVwiLHRoaXMuaWE/XCIwXCI6XCIxXCIpO1QoYSxcIkFJRFwiLHRoaXMuTyk7RGQodGhpcyxhKTtUKGEsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO3RoaXMuZyYmdGhpcy5pJiZ6ZChhLHRoaXMuZyx0aGlzLmkpO3RoaXMuRCYmdGhpcy5hLnNldFRpbWVvdXQodGhpcy5EKTtkYyh0aGlzLmEsYSwhMCx0aGlzLmdhKTt9O1xuZnVuY3Rpb24gVmMoYSxiLGMpe3ZhciBkPWIubDtkJiZjZChhLmIsZCk7YS5pYT1hLm9hJiZjO2EubT1iLmM7YS5CPVdjKGEsbnVsbCxhLmhhKTtIZChhKTt9XG5nLkZhPWZ1bmN0aW9uKGEsYil7aWYoMCE9dGhpcy51JiYodGhpcy5hPT1hfHxnZCh0aGlzLmIsYSkpKWlmKHRoaXMubT1hLm8sIWEucyYmZ2QodGhpcy5iLGEpJiYzPT10aGlzLnUpe3RyeXt2YXIgYz10aGlzLmphLmEucGFyc2UoYik7fWNhdGNoKGYpe2M9bnVsbDt9aWYocShjKSYmMz09Yy5sZW5ndGgpe2I9YztpZigwPT1iWzBdKWE6e2lmKCF0aGlzLmwpe2lmKHRoaXMuYSlpZih0aGlzLmEudiszRTM8YS52KUZkKHRoaXMpLHRoaXMuYS5jYW5jZWwoKSx0aGlzLmE9bnVsbDtlbHNlIGJyZWFrIGE7TmQodGhpcyk7SygxOCk7fX1lbHNlIHRoaXMucmE9YlsxXSwwPHRoaXMucmEtdGhpcy5PJiYzNzUwMD5iWzJdJiZ0aGlzLmlhJiYwPT10aGlzLnYmJiF0aGlzLnMmJih0aGlzLnM9T2IodSh0aGlzLllhLHRoaXMpLDZFMykpO2lmKDE+PWZkKHRoaXMuYikmJnRoaXMuZmEpe3RyeXt0aGlzLmZhKCk7fWNhdGNoKGYpe310aGlzLmZhPXZvaWQgMDt9fWVsc2UgVyh0aGlzLDExKTt9ZWxzZSBpZigoYS5zfHxcbnRoaXMuYT09YSkmJkZkKHRoaXMpLCFxYShiKSlmb3IoYj1jPXRoaXMuamEuYS5wYXJzZShiKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY107dGhpcy5PPWRbMF07ZD1kWzFdO2lmKDI9PXRoaXMudSlpZihcImNcIj09ZFswXSl7dGhpcy5IPWRbMV07dGhpcy5nYT1kWzJdO3ZhciBlPWRbM107bnVsbCE9ZSYmKHRoaXMud2E9ZSk7ZD1kWzVdO251bGwhPWQmJmFhKGQpJiYwPGQmJih0aGlzLkQ9MS41KmQpO3RoaXMubyYmKGQ9YS5hKSYmKChlPWhjKGQsXCJYLUNsaWVudC1XaXJlLVByb3RvY29sXCIpKSYmY2QodGhpcy5iLGUpLHRoaXMuaiYmKGQ9aGMoZCxcIlgtSFRUUC1TZXNzaW9uLUlkXCIpKSkmJih0aGlzLkk9ZCxUKHRoaXMuQix0aGlzLmosZCkpO3RoaXMudT0zO3RoaXMuYyYmdGhpcy5jLnZhKCk7ZD1hO3RoaXMucGE9V2ModGhpcyx0aGlzLlkoKT90aGlzLmdhOm51bGwsdGhpcy5oYSk7ZC5zPyhoZCh0aGlzLmIsZCksKGU9dGhpcy5EKSYmZC5zZXRUaW1lb3V0KGUpLGQuaSYmKGdjKGQpLFxuZWMoZCkpLHRoaXMuYT1kKTpNZCh0aGlzKTswPHRoaXMuZi5sZW5ndGgmJkhkKHRoaXMpO31lbHNlXCJzdG9wXCIhPWRbMF0mJlwiY2xvc2VcIiE9ZFswXXx8Vyh0aGlzLDcpO2Vsc2UgMz09dGhpcy51JiYoXCJzdG9wXCI9PWRbMF18fFwiY2xvc2VcIj09ZFswXT9cInN0b3BcIj09ZFswXT9XKHRoaXMsNyk6QmQodGhpcyk6XCJub29wXCIhPWRbMF0mJnRoaXMuYyYmdGhpcy5jLnVhKGQpLHRoaXMudj0wKTt9fTtnLllhPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy5zJiYodGhpcy5zPW51bGwsdGhpcy5hLmNhbmNlbCgpLHRoaXMuYT1udWxsLE5kKHRoaXMpLEsoMTkpKTt9O2Z1bmN0aW9uIEZkKGEpe251bGwhPWEucyYmKGsuY2xlYXJUaW1lb3V0KGEucyksYS5zPW51bGwpO31cbmcubmE9ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtpZih0aGlzLmE9PWEpe0ZkKHRoaXMpO3RoaXMuYT1udWxsO3ZhciBjPTI7fWVsc2UgaWYoZ2QodGhpcy5iLGEpKWI9YS5qLGhkKHRoaXMuYixhKSxjPTE7ZWxzZSByZXR1cm47dGhpcy5tPWEubztpZigwIT10aGlzLnUpaWYoYS5iKTE9PWM/KGI9dygpLWEudixJLmRpc3BhdGNoRXZlbnQobmV3IE5iKEksYS5sP2EubC5sZW5ndGg6MCxiLHRoaXMuQSkpLEhkKHRoaXMpKTpNZCh0aGlzKTtlbHNle3ZhciBkPWEuYztpZigzPT1kfHwwPT1kJiYwPHRoaXMubXx8ISgxPT1jJiZJZCh0aGlzLGEpfHwyPT1jJiZOZCh0aGlzKSkpc3dpdGNoKGImJjA8Yi5sZW5ndGgmJihhPXRoaXMuYixhLmM9YS5jLmNvbmNhdChiKSksZCl7Y2FzZSAxOlcodGhpcyw1KTticmVhaztjYXNlIDQ6Vyh0aGlzLDEwKTticmVhaztjYXNlIDM6Vyh0aGlzLDYpO2JyZWFrO2RlZmF1bHQ6Vyh0aGlzLDIpO319fTtcbmZ1bmN0aW9uIEpkKGEsYil7dmFyIGM9YS5OYStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYS5SYSk7YS5tYSgpfHwoYyo9Mik7cmV0dXJuIGMqYn1mdW5jdGlvbiBXKGEsYil7aWYoMj09Yil7dmFyIGM9bnVsbDthLmMmJihjPW51bGwpO3ZhciBkPXUoYS5lYixhKTtjfHwoYz1uZXcgUyhcIi8vd3d3Lmdvb2dsZS5jb20vaW1hZ2VzL2NsZWFyZG90LmdpZlwiKSxrLmxvY2F0aW9uJiZcImh0dHBcIj09ay5sb2NhdGlvbi5wcm90b2NvbHx8dWMoYyxcImh0dHBzXCIpLGJjKGMpKTttZChjLnRvU3RyaW5nKCksZCk7fWVsc2UgSygyKTthLnU9MDthLmMmJmEuYy50YShiKTtFZChhKTtDZChhKTt9Zy5lYj1mdW5jdGlvbihhKXthP0soMik6SygxKTt9O2Z1bmN0aW9uIEVkKGEpe2EudT0wO2EubT0tMTtpZihhLmMpe2lmKDAhPWlkKGEuYikubGVuZ3RofHwwIT1hLmYubGVuZ3RoKWEuYi5jLmxlbmd0aD0wLHBhKGEuZiksYS5mLmxlbmd0aD0wO2EuYy5zYSgpO319XG5mdW5jdGlvbiBXYyhhLGIsYyl7dmFyIGQ9SmMoYyk7aWYoXCJcIiE9ZC5iKWImJnZjKGQsYitcIi5cIitkLmIpLHdjKGQsZC5pKTtlbHNle3ZhciBlPWsubG9jYXRpb24sZjtiP2Y9YitcIi5cIitlLmhvc3RuYW1lOmY9ZS5ob3N0bmFtZTtkPUtjKGUucHJvdG9jb2wsZiwrZS5wb3J0LGMpO31hLlYmJnZhKGEuVixmdW5jdGlvbihoLGwpe1QoZCxsLGgpO30pO2I9YS5qO2M9YS5JO2ImJmMmJlQoZCxiLGMpO1QoZCxcIlZFUlwiLGEud2EpO0RkKGEsZCk7cmV0dXJuIGR9Zy4kPWZ1bmN0aW9uKGEpe2lmKGEmJiF0aGlzLlIpdGhyb3cgRXJyb3IoXCJDYW4ndCBjcmVhdGUgc2Vjb25kYXJ5IGRvbWFpbiBjYXBhYmxlIFhocklvIG9iamVjdC5cIik7YT1uZXcgWCh0aGlzLkthKTthLkY9dGhpcy5SO3JldHVybiBhfTtnLm1hPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5jJiYhMH07Zy5ZPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuUn07ZnVuY3Rpb24gT2QoKXt9Zz1PZC5wcm90b3R5cGU7Zy52YT1mdW5jdGlvbigpe307XG5nLnVhPWZ1bmN0aW9uKCl7fTtnLnRhPWZ1bmN0aW9uKCl7fTtnLnNhPWZ1bmN0aW9uKCl7fTtnLlNhPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBQZChhKXtmb3IodmFyIGI9YXJndW1lbnRzWzBdLGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKXt2YXIgZD1hcmd1bWVudHNbY107aWYoMD09ZC5sYXN0SW5kZXhPZihcIi9cIiwwKSliPWQ7ZWxzZXt2YXIgZTsoZT1cIlwiPT1iKXx8KGU9Yi5sZW5ndGgtMSxlPTA8PWUmJmIuaW5kZXhPZihcIi9cIixlKT09ZSk7ZT9iKz1kOmIrPVwiL1wiK2Q7fX1yZXR1cm4gYn1mdW5jdGlvbiBRZCgpe2lmKEImJiEoMTA8PU51bWJlcihOYSkpKXRocm93IEVycm9yKFwiRW52aXJvbm1lbnRhbCBlcnJvcjogbm8gYXZhaWxhYmxlIHRyYW5zcG9ydC5cIik7fVFkLnByb3RvdHlwZS5hPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBZKGEsYil9O1xuZnVuY3Rpb24gWShhLGIpe0cuY2FsbCh0aGlzKTt0aGlzLmE9bmV3IEFkKGIpO3RoaXMuZz1hO3RoaXMubT1iJiZiLnRlc3RVcmw/Yi50ZXN0VXJsOlBkKHRoaXMuZyxcInRlc3RcIik7dGhpcy5iPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5hLmk9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIueGEmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi54YTpcbmE9e1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCI6Yi54YX0pO3RoaXMuYS5KPWE7KGE9YiYmYi5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtKSYmIXFhKGEpJiYodGhpcy5hLmc9YSk7dGhpcy5sPWImJmIuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy5oPWImJmIuc2VuZFJhd0pzb258fCExOyhiPWImJmIuaHR0cFNlc3Npb25JZFBhcmFtKSYmIXFhKGIpJiYodGhpcy5hLmo9YixhPXRoaXMuYixudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmIsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuZj1uZXcgWih0aGlzKTt9eChZLEcpO2c9WS5wcm90b3R5cGU7Zy5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYixjLGQpe1kuTi5hZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcyxhLGIsYyxkKTt9O2cucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtZLk4ucmVtb3ZlRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsYSxiLGMsZCk7fTtcbmcuVmE9ZnVuY3Rpb24oKXt0aGlzLmEuYz10aGlzLmY7dGhpcy5sJiYodGhpcy5hLlI9ITApO3ZhciBhPXRoaXMuYSxiPXRoaXMubSxjPXRoaXMuZyxkPXRoaXMuYnx8dm9pZCAwO0soMCk7YS5oYT1jO2EuVj1kfHx7fTthLm8mJihhLkYuYj1bXSxhLkYuYT0hMSk7YS53PW5ldyBTYyhhKTtudWxsPT09YS5nJiYoYS53Lmg9YS5pKTtjPWI7YS5nJiZhLmkmJihjPXpkKGIsYS5nLGEuaSkpO2E9YS53O2EuaT1jO2I9V2MoYS5hLG51bGwsYS5pKTtLKDMpO2M9YS5hLkYuYjtudWxsIT1jPyhhLmY9Y1swXSxhLk09MSxVYyhhKSk6KGZjKGIsXCJNT0RFXCIsXCJpbml0XCIpLCFhLmEubyYmYS5hLmomJmZjKGIsXCJYLUhUVFAtU2Vzc2lvbi1JZFwiLGEuYS5qKSxhLmI9bmV3IE0oYSx2b2lkIDAsdm9pZCAwKSxhLmIuaD1hLmgsZGMoYS5iLGIsITEsbnVsbCksYS5NPTApO307Zy5jbG9zZT1mdW5jdGlvbigpe0JkKHRoaXMuYSk7fTtcbmcuV2E9ZnVuY3Rpb24oYSl7aWYobShhKSl7dmFyIGI9e307Yi5fX2RhdGFfXz1hO0dkKHRoaXMuYSxiKTt9ZWxzZSB0aGlzLmg/KGI9e30sYi5fX2RhdGFfXz1vYihhKSxHZCh0aGlzLmEsYikpOkdkKHRoaXMuYSxhKTt9O2cuRz1mdW5jdGlvbigpe3RoaXMuYS5jPW51bGw7ZGVsZXRlIHRoaXMuZjtCZCh0aGlzLmEpO2RlbGV0ZSB0aGlzLmE7WS5OLkcuY2FsbCh0aGlzKTt9O2Z1bmN0aW9uIFJkKGEpe1ViLmNhbGwodGhpcyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKHZhciBjIGluIGIpe2E9YzticmVhayBhfWE9dm9pZCAwO30odGhpcy5jPWEpPyhhPXRoaXMuYyx0aGlzLmRhdGE9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMCk6dGhpcy5kYXRhPWI7fWVsc2UgdGhpcy5kYXRhPWE7fXgoUmQsVWIpO2Z1bmN0aW9uIFNkKCl7VmIuY2FsbCh0aGlzKTt0aGlzLnN0YXR1cz0xO314KFNkLFZiKTtmdW5jdGlvbiBaKGEpe3RoaXMuYT1hO314KFosT2QpO1oucHJvdG90eXBlLnZhPWZ1bmN0aW9uKCl7dGhpcy5hLmRpc3BhdGNoRXZlbnQoXCJhXCIpO307XG5aLnByb3RvdHlwZS51YT1mdW5jdGlvbihhKXt0aGlzLmEuZGlzcGF0Y2hFdmVudChuZXcgUmQoYSkpO307Wi5wcm90b3R5cGUudGE9ZnVuY3Rpb24oYSl7dGhpcy5hLmRpc3BhdGNoRXZlbnQobmV3IFNkKGEpKTt9O1oucHJvdG90eXBlLnNhPWZ1bmN0aW9uKCl7dGhpcy5hLmRpc3BhdGNoRXZlbnQoXCJiXCIpO307dmFyIFRkPXYoZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWEucHJvdG90eXBlO3ZhciBkPW5ldyBjO2EuYXBwbHkoZCxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpO3JldHVybiBkfSxRZCk7LypcblxuIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXG5cbiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cbiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5RZC5wcm90b3R5cGUuY3JlYXRlV2ViQ2hhbm5lbD1RZC5wcm90b3R5cGUuYTtZLnByb3RvdHlwZS5zZW5kPVkucHJvdG90eXBlLldhO1kucHJvdG90eXBlLm9wZW49WS5wcm90b3R5cGUuVmE7WS5wcm90b3R5cGUuY2xvc2U9WS5wcm90b3R5cGUuY2xvc2U7UGIuTk9fRVJST1I9MDtQYi5USU1FT1VUPTg7UGIuSFRUUF9FUlJPUj02O1FiLkNPTVBMRVRFPVwiY29tcGxldGVcIjtUYi5FdmVudFR5cGU9TDtMLk9QRU49XCJhXCI7TC5DTE9TRT1cImJcIjtMLkVSUk9SPVwiY1wiO0wuTUVTU0FHRT1cImRcIjtHLnByb3RvdHlwZS5saXN0ZW49Ry5wcm90b3R5cGUuemE7WC5wcm90b3R5cGUubGlzdGVuT25jZT1YLnByb3RvdHlwZS5BYTtYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9WC5wcm90b3R5cGUuWGE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1YLnByb3RvdHlwZS55YTtYLnByb3RvdHlwZS5nZXRTdGF0dXM9WC5wcm90b3R5cGUuVDtYLnByb3RvdHlwZS5nZXRSZXNwb25zZUpzb249WC5wcm90b3R5cGUuVWE7XG5YLnByb3RvdHlwZS5nZXRSZXNwb25zZVRleHQ9WC5wcm90b3R5cGUuYWE7WC5wcm90b3R5cGUuc2VuZD1YLnByb3RvdHlwZS5jYTt2YXIgdG1wPXtjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0OlRkLEVycm9yQ29kZTpQYixFdmVudFR5cGU6UWIsV2ViQ2hhbm5lbDpUYixYaHJJbzpYfTtcbnZhciB0bXBfMSA9IHRtcC5jcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0O1xudmFyIHRtcF8yID0gdG1wLkVycm9yQ29kZTtcbnZhciB0bXBfMyA9IHRtcC5FdmVudFR5cGU7XG52YXIgdG1wXzQgPSB0bXAuV2ViQ2hhbm5lbDtcbnZhciB0bXBfNSA9IHRtcC5YaHJJbztcblxuZXhwb3J0IGRlZmF1bHQgdG1wO1xuZXhwb3J0IHsgdG1wXzIgYXMgRXJyb3JDb2RlLCB0bXBfMyBhcyBFdmVudFR5cGUsIHRtcF80IGFzIFdlYkNoYW5uZWwsIHRtcF81IGFzIFhocklvLCB0bXBfMSBhcyBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJleHBvcnQgY2xhc3MgUG9pbnQyZCB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHggPSB4O1xyXG4gICAgeSA9IHk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTGluZSB7XHJcbiAgMDogUG9pbnQyZDtcclxuICAxOiBQb2ludDJkO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwb2ludDE6IFBvaW50MmQsIHBvaW50MjogUG9pbnQyZCkge1xyXG4gICAgdGhpc1swXSA9IHBvaW50MTtcclxuICAgIHRoaXNbMV0gPSBwb2ludDI7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZW51bSBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZSB7XHJcbiAgTm90aGluZyxcclxuICBJbnRlcnNlY3QsXHJcbiAgT3ZlcmxhcFxyXG59XHJcblxyXG5leHBvcnQgZW51bSBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUge1xyXG4gIERpc2pvaW50LFxyXG4gIE1hdGNoLFxyXG4gIEludGVyc2VjdCxcclxuICBBSW5zaWRlQixcclxuICBCSW5zaWRlQSxcclxuICBUYW5nZW50IFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcCB7XHJcbiAgdHlwZTogT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGU7XHJcbiAgaW50ZXJzZWN0aW9uOiBQb2ludDJkO1xyXG4gIG92ZXJsYXA6IExpbmU7XHJcblxyXG4gIC8vIChvcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZSwge2ludGVyc2VjdGlvbj11bmRlZmluZWQsIG92ZXJsYXA9dW5kZWZpbmVkfSA9IHt9KVxyXG4gIGNvbnN0cnVjdG9yKG9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlOiBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZSwgaW50ZXJzZWN0aW9uOiBQb2ludDJkID0gdW5kZWZpbmVkLCBvdmVybGFwOiBMaW5lID0gdW5kZWZpbmVkKSB7XHJcbiAgICB0aGlzLnR5cGUgPSBvcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZTtcclxuICAgIHRoaXMuaW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0aW9uO1xyXG4gICAgdGhpcy5vdmVybGFwID0gb3ZlcmxhcDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSZWN0YW5nbGUge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcbiAgd2lkdGg6IG51bWJlcjtcclxuICBoZWlnaHQ6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICB4ID0geDtcclxuICAgIHkgPSB5O1xyXG4gICAgd2lkdGggPSB3aWR0aDtcclxuICAgIGhlaWdodCA9IGhlaWdodDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9tZXRyeUNhbGMge1xyXG5cclxuICBzdGF0aWMgcHRzRGlzdGFuY2UocHQxOiBQb2ludDJkLCBwdDI6IFBvaW50MmQpIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coKHB0Mi54IC0gcHQxLngpLCAyKSArIChNYXRoLnBvdygocHQyLnkgLSBwdDEueSksIDIpKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbGluZU1pZGRsZVB0KGxpbmU6IExpbmUpIHtcclxuICAgIHJldHVybiB7IHg6IChsaW5lWzBdLnggKyBsaW5lWzFdLngpIC8gMiwgeTogKGxpbmVbMF0ueSArIGxpbmVbMV0ueSkgLyAyIH07XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXJlTGluZXNFcXVhbChsaW5lMTogTGluZSwgbGluZTI6IExpbmUpIHtcclxuICAgIHJldHVybiAodGhpcy5hcmVQb2ludHNFcXVhbChsaW5lMVswXSwgbGluZTJbMF0pICYmIHRoaXMuYXJlUG9pbnRzRXF1YWwobGluZTFbMV0sIGxpbmUyWzFdKSkgfHwgKHRoaXMuYXJlUG9pbnRzRXF1YWwobGluZTFbMF0sIGxpbmUyWzFdKSAmJiB0aGlzLmFyZVBvaW50c0VxdWFsKGxpbmUxWzFdLCBsaW5lMlswXSkpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFyZVBvaW50c0VxdWFsKHBvaW50MTogUG9pbnQyZCwgcG9pbnQyOiBQb2ludDJkKSB7XHJcbiAgICByZXR1cm4gcG9pbnQxLnggPT09IHBvaW50Mi54ICYmIHBvaW50MS55ID09PSBwb2ludDIueTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAsIE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLCBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUsIEdlb21ldHJ5Q2FsYywgUmVjdGFuZ2xlLCBMaW5lLCBQb2ludDJkIH0gZnJvbSAnLi9nZW9tZXRyeSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB7XHJcblxyXG4gIC8qKlxyXG4gICogUmVhZCB0aGUgY29udGVudCBvZiBhIGZpbGUuXHJcbiAgKi9cclxuICBzdGF0aWMgcmVhZElucHV0RmlsZShmaWxlOiBCbG9iKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUsIFwiVVRGLThcIik7XHJcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgcmVzKHJlYWRlci5yZXN1bHQpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlYWRlci5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgcmVhZGluZyB0aGUgZmlsZS5cIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBHZXQgdGhlIFVSTCBwYXJhbWV0ZXJzLlxyXG4gICogU291cmNlOiBodHRwczovL2Nzcy10cmlja3MuY29tL3NuaXBwZXRzL2phdmFzY3JpcHQvZ2V0LXVybC12YXJpYWJsZXMvXHJcbiAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICBUaGUgVVJMIHBhcmFtZXRlcnNcclxuICAqL1xyXG4gIHN0YXRpYyBnZXRVcmxQYXJhbXModXJsOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHBhcmFtczogYW55ID0ge307XHJcbiAgICBjb25zdCBwYXJzZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICBwYXJzZXIuaHJlZiA9IHVybDtcclxuICAgIGNvbnN0IHZhcnMgPSBwYXJzZXIuc2VhcmNoLnN1YnN0cmluZygxKS5zcGxpdCgnJicpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IHBhaXIgPSB2YXJzW2ldLnNwbGl0KCc9Jyk7XHJcbiAgICAgIHBhcmFtc1twYWlyWzBdXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGFsbCB0aGUgY2hpbGRzIG9mIHRoZSBIVE1MIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgc3RhdGljIGVtcHR5Tm9kZShub2RlOiBIVE1MRWxlbWVudCkge1xyXG4gICAgd2hpbGUgKG5vZGUuZmlyc3RDaGlsZCAmJiBub2RlLnJlbW92ZUNoaWxkKG5vZGUuZmlyc3RDaGlsZCkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhIGZpbGxldCBib3VuZGluZyBib3ggYXJvdW5kIHRoZSBwcm92aWRlZCBlbGVtZW50LlxyXG4gICAqIEBwYXJhbSBvZmZzZXQgZGVmYXVsdCA1LlxyXG4gICAqIEBwYXJhbSBmaWxsZXQgZGVmYXVsdCA1LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBjcmVhdGVCQm94KGVsZW1lbnQ6IFNWR0dyYXBoaWNzRWxlbWVudCwgb2Zmc2V0ID0gNSwgZmlsbGV0ID0gNSkge1xyXG4gICAgY29uc3QgcmVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncmVjdCcpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3gnLCAoZWxlbWVudC5nZXRCQm94KCkueCAtIG9mZnNldCkudG9TdHJpbmcoKSk7XHJcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgneScsIChlbGVtZW50LmdldEJCb3goKS55IC0gb2Zmc2V0KS50b1N0cmluZygpKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCd3aWR0aCcsIChlbGVtZW50LmdldEJCb3goKS53aWR0aCArIG9mZnNldCAqIDIpLnRvU3RyaW5nKCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIChlbGVtZW50LmdldEJCb3goKS5oZWlnaHQgKyBvZmZzZXQgKiAyKS50b1N0cmluZygpKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdyeCcsIGZpbGxldC50b1N0cmluZygpKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdyeScsIGZpbGxldC50b1N0cmluZygpKTtcclxuICAgIHJldHVybiByZWN0O1xyXG4gIH1cclxuXHJcbiAgLy8gUmVuYW1lIHRoZSBhYm92ZSBhcyBjcmVhdGVTVkdCQm94XHJcbiAgLy8gVGhpcyBvbmUgcmV0dXJucyBhIHJlY3Qgb2JqZWN0IHt4LHksd2lkdGgsaGVpZ2h0fVxyXG4gIC8vIHNhbWUgYXMgZGVmYXVsdCBiYm94IGJ1dCB3aXRoIG9wdGlvbmFsIG9mZnNldFxyXG4gIHN0YXRpYyBjcmVhdGVCQm94MihlbGVtZW50OiBTVkdHcmFwaGljc0VsZW1lbnQsIG9mZnNldCA9IDApIHsgLy8gVE9ETyBpcyBkZXByZWNhdGVkP1xyXG4gICAgaWYgKG9mZnNldCAhPT0gMCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHg6IGVsZW1lbnQuZ2V0QkJveCgpLnggLSBvZmZzZXQsXHJcbiAgICAgICAgeTogZWxlbWVudC5nZXRCQm94KCkueSAtIG9mZnNldCxcclxuICAgICAgICB3aWR0aDogZWxlbWVudC5nZXRCQm94KCkud2lkdGggKyBvZmZzZXQgKiAyLFxyXG4gICAgICAgIGhlaWdodDogZWxlbWVudC5nZXRCQm94KCkuaGVpZ2h0ICsgb2Zmc2V0ICogMlxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QkJveCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRnVuY3Rpb24gdG8gZ2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbW91c2Ugb24gdGhlIFNWRyBjYW52YXMuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldFJlbGF0aXZlQ29vcmRzKGU6IE1vdXNlRXZlbnQsIHN2Z0RvYzogU1ZHU1ZHRWxlbWVudCk6IERPTVBvaW50IHtcclxuICAgIGNvbnN0IG9yaWdpblB0ID0gc3ZnRG9jLmNyZWF0ZVNWR1BvaW50KCk7XHJcbiAgICBvcmlnaW5QdC54ID0gZS5jbGllbnRYO1xyXG4gICAgb3JpZ2luUHQueSA9IGUuY2xpZW50WTtcclxuICAgIC8vIFRoZSBjdXJzb3IgcG9pbnQsIHRyYW5zbGF0ZWQgaW50byBzdmcgY29vcmRpbmF0ZXNcclxuICAgIHJldHVybiBvcmlnaW5QdC5tYXRyaXhUcmFuc2Zvcm0oc3ZnRG9jLmdldFNjcmVlbkNUTSgpLmludmVyc2UoKSk7XHJcbiAgfVxyXG5cclxuICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvY3JlYXRlLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0XHJcbiAgc3RhdGljIHV1aWR2NCgpIHtcclxuICAgIHJldHVybiAoKDFlNykudG9TdHJpbmcoKSArIC0xZTMgKyAtNGUzICsgLThlMyArIC0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLCBjID0+XHJcbiAgICAgIChOdW1iZXIoYykgXiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmIDE1ID4+IE51bWJlcihjKSAvIDQpLnRvU3RyaW5nKDE2KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG5cclxuICBzdGF0aWMgZ2V0UmVjdFNlZ21lbnRzKHJlY3Q6IFJlY3RhbmdsZSk6IExpbmVbXSB7XHJcbiAgICBjb25zdCBjb3JuZXJBID0geyB4OiByZWN0LngsIHk6IHJlY3QueSB9O1xyXG4gICAgY29uc3QgY29ybmVyQiA9IHsgeDogcmVjdC54ICsgcmVjdC53aWR0aCwgeTogcmVjdC55IH07XHJcbiAgICBjb25zdCBjb3JuZXJDID0geyB4OiByZWN0LnggKyByZWN0LndpZHRoLCB5OiByZWN0LnkgKyByZWN0LmhlaWdodCB9O1xyXG4gICAgY29uc3QgY29ybmVyRCA9IHsgeDogcmVjdC54LCB5OiByZWN0LnkgKyByZWN0LmhlaWdodCB9O1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgW2Nvcm5lckEsIGNvcm5lckJdLFxyXG4gICAgICBbY29ybmVyQiwgY29ybmVyQ10sXHJcbiAgICAgIFtjb3JuZXJDLCBjb3JuZXJEXSxcclxuICAgICAgW2Nvcm5lckQsIGNvcm5lckFdXHJcbiAgICBdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogXHJcbiAgICogQHBhcmFtIGluY2x1c2l2ZSBJbmNsdWRlIHBvaW50cyBvbiB0aGUgZWRnZXMuIERlZmF1bHQgdHJ1ZS5cclxuICAgKi9cclxuICBzdGF0aWMgaXNQdEluUmVjdChyZWN0OiBSZWN0YW5nbGUsIHB0OiBQb2ludDJkLCBpbmNsdXNpdmUgPSB0cnVlKSB7XHJcbiAgICBpZiAoaW5jbHVzaXZlKSB7XHJcbiAgICAgIHJldHVybiAocHQueCA+PSByZWN0LnggJiYgcHQueCA8PSAocmVjdC54ICsgcmVjdC53aWR0aCkpICYmIChwdC55ID49IHJlY3QueSAmJiBwdC55IDw9IChyZWN0LnkgKyByZWN0LmhlaWdodCkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIChwdC54ID4gcmVjdC54ICYmIHB0LnggPCAocmVjdC54ICsgcmVjdC53aWR0aCkpICYmIChwdC55ID4gcmVjdC55ICYmIHB0LnkgPCAocmVjdC55ICsgcmVjdC5oZWlnaHQpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENoZWNrcyBpZiBhIGxpbmUgaXMgY29tcGxldGVseSBpbnNpZGUgYSByZWN0YW5nbGUuXHJcbiAgICogRXZlbiBpZiB0aGUgbGluZSBpcyBjb21wbGV0ZWx5IGluc2lkZSBidXQgdG91Y2hpbmcgYSBzZWdtZW50IG9mIHRoZSByZWN0YW5nbGUgaXQncyBjb25zaWRlcmVkIGluc2lkZSxcclxuICAgKiB0aGlzIGluY2x1ZGVzIGEgbGluZSB0aGF0IGlzIGNvbXBsZXRlbHkgb3ZlcmxhcHBlZCB3aXRoIGEgc2VnbWVudCBvZiB0aGUgcmVjdGFuZ2xlLlxyXG4gICAqIEBwYXJhbSB7TGluZX0gbGluZSBUaGUgbGluZSB0byB0ZXN0LlxyXG4gICAqIEBwYXJhbSB7UmVjdGFuZ2xlfSByZWN0IFRoZSByZWN0YW5nbGUgdG8gdGVzdCBhZ2FpbnN0LlxyXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBCb29sIGluZGljYXRpbmcgaWYgaXQgaXMgY29tcGxldGVseSBpbnNpZGUgb3Igbm90LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBpc0xpbmVJblJlY3QobGluZTogTGluZSwgcmVjdDogUmVjdGFuZ2xlKSB7XHJcbiAgICByZXR1cm4gKHRoaXMuaXNQdEluUmVjdChyZWN0LCBsaW5lWzBdIGFzIFBvaW50MmQpICYmIHRoaXMuaXNQdEluUmVjdChyZWN0LCBsaW5lWzFdKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBhIG51bWVyaWNhbCB2YWx1ZSBpcyBiZXR3ZWVuIHR3byBsaW1pdHMuXHJcbiAgICogQHBhcmFtIHZhbHVlIFZhbHVlIHRvIGNvbXBhcmUuXHJcbiAgICogQHBhcmFtIGxpbWl0MSBGaXJzdCBsaW1pdC5cclxuICAgKiBAcGFyYW0gbGltaXQyIFNlY29uZCBsaW1pdCwgb3Bvc2l0ZSB0byB0aGUgZmlyc3Qgb25lLlxyXG4gICAqIEBwYXJhbSBpbmNsdXNpdmUgV2VhdGhlciB0byBpbmNsdWRlIHRoZSBsaW1pdHMgaW4gdGhlIGNvbXBhcmlzb24gb3Igbm90LiBEZWZhdWx0IHRydWUuXHJcbiAgICovXHJcbiAgc3RhdGljIGlzTnVtQmV0d2Vlbih2YWx1ZTogbnVtYmVyLCBsaW1pdDE6IG51bWJlciwgbGltaXQyOiBudW1iZXIsIGluY2x1c2l2ZSA9IHRydWUpOiBib29sZWFuIHtcclxuICAgIGlmIChpbmNsdXNpdmUpIHtcclxuICAgICAgcmV0dXJuIHZhbHVlID49IE1hdGgubWluKGxpbWl0MSwgbGltaXQyKSAmJiB2YWx1ZSA8PSBNYXRoLm1heChsaW1pdDEsIGxpbWl0Mik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdmFsdWUgPiBNYXRoLm1pbihsaW1pdDEsIGxpbWl0MikgJiYgdmFsdWUgPCBNYXRoLm1heChsaW1pdDEsIGxpbWl0Mik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNMaW5lSG9yaXpvbnRhbChsaW5lOiBMaW5lKSB7XHJcbiAgICByZXR1cm4gbGluZVswXS55ID09PSBsaW5lWzFdLnk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNMaW5lVmVydGljYWwobGluZTogTGluZSkge1xyXG4gICAgcmV0dXJuIGxpbmVbMF0ueCA9PT0gbGluZVsxXS54O1xyXG4gIH1cclxuXHJcbiAgLy8gSWYgcmVmUHQgaXMgcHJvdmlkZWQgd2lsbCBiZSBjYWxjdWxhdGVkIGZyb20gdGhpc1xyXG4gIC8vIElmIG5vdCBwcm92aWRlZCB3aWxsIGJlIGNhbGN1bGF0ZWQgZnJvbSB0aGUgZmlyc3QgcG9pbnRcclxuICBzdGF0aWMgc29ydFB0c0J5RGlzdGFuY2UocHRzOiBQb2ludDJkW10sIHJlZlB0OiBQb2ludDJkID0gdW5kZWZpbmVkLCBpbmNsdWRlUmVmUHQgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgcmVmZXJlbmNlUHQgPSByZWZQdCAhPT0gdW5kZWZpbmVkID8gcmVmUHQgOiBwdHNbMF07XHJcbiAgICBjb25zdCBzb3J0ZWRQdHMgPSBwdHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICBpZiAoR2VvbWV0cnlDYWxjLnB0c0Rpc3RhbmNlKHJlZmVyZW5jZVB0LCBhKSA8IEdlb21ldHJ5Q2FsYy5wdHNEaXN0YW5jZShyZWZlcmVuY2VQdCwgYikpXHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICBlbHNlIGlmIChHZW9tZXRyeUNhbGMucHRzRGlzdGFuY2UocmVmZXJlbmNlUHQsIGEpID4gR2VvbWV0cnlDYWxjLnB0c0Rpc3RhbmNlKHJlZmVyZW5jZVB0LCBiKSlcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gKHJlZlB0ICE9PSB1bmRlZmluZWQgJiYgaW5jbHVkZVJlZlB0ID09PSB0cnVlKSA/IFtyZWZQdCwgLi4uc29ydGVkUHRzXSA6IHNvcnRlZFB0cztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdpdmVuIGFuIGFycmF5IG9mIHBvaW50cyByZXR1cm5zIGFuIGFycmF5IG9mIGxpbmVzIGJldHdlZW4gdGhlIHBvaW50cy5cclxuICAgKi9cclxuICBzdGF0aWMgbGluZXNCZXR3ZWVuUHRzKHB0czogUG9pbnQyZFtdKTogTGluZVtdIHtcclxuICAgIGlmIChwdHMubGVuZ3RoID4gMSkge1xyXG4gICAgICBjb25zdCBzZWdtZW50czogTGluZVtdID0gW107XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgIHNlZ21lbnRzLnB1c2goW3B0c1tpXSwgcHRzW2kgKyAxXV0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZWdtZW50cztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8vIGlmIGEgcmVjdGFuZ2xlIGlzIHRvdGFseSBvdmVybGFwcGVkIG9yIHBhcnRpYWxseSBhbmQgY29tcGxldGVseSBpbnNpZGUgaXQgaXMgbm90IGNvbnNpZGVyZWQgaW50ZXJzZWN0aW9uIGJ1dCBJbnNpZGUuIGZ1bGxDb250YWlubWVudEludGVyc2VjdGlvbnMgXHJcbiAgLy8gaW50ZXJzZWN0aW9uIGluY2x1ZGVzIG92ZXJsYXBlZCBwYXJ0aWFsbHkgYnV0IG5vIG9uZSBpbnNpZGUgdGhlIG90aGVyXHJcbiAgc3RhdGljIHJlY3RSZWN0UmVsYXRpb25zaGlwKHJlY3QxOiBSZWN0YW5nbGUsIHJlY3QyOiBSZWN0YW5nbGUpIHtcclxuICAgIGlmIChyZWN0MS54ID09PSByZWN0Mi54ICYmIHJlY3QxLnkgPT09IHJlY3QyLnkgJiYgcmVjdDEud2lkdGggPT09IHJlY3QyLndpZHRoICYmIHJlY3QxLmhlaWdodCA9PT0gcmVjdDIuaGVpZ2h0KSB7XHJcbiAgICAgIHJldHVybiBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuTWF0Y2g7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54LCB5OiByZWN0MS55IH0pICYmXHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54ICsgcmVjdDEud2lkdGgsIHk6IHJlY3QxLnkgfSkgJiZcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLnggKyByZWN0MS53aWR0aCwgeTogcmVjdDEueSArIHJlY3QxLmhlaWdodCB9KSAmJlxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCwgeTogcmVjdDEueSArIHJlY3QxLmhlaWdodCB9KSkge1xyXG4gICAgICByZXR1cm4gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLkFJbnNpZGVCO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCwgeTogcmVjdDIueSB9KSAmJlxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCArIHJlY3QyLndpZHRoLCB5OiByZWN0Mi55IH0pICYmXHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54ICsgcmVjdDIud2lkdGgsIHk6IHJlY3QyLnkgKyByZWN0Mi5oZWlnaHQgfSkgJiZcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLngsIHk6IHJlY3QyLnkgKyByZWN0Mi5oZWlnaHQgfSkpIHtcclxuICAgICAgcmV0dXJuIFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5CSW5zaWRlQTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLngsIHk6IHJlY3QxLnkgfSwgZmFsc2UpIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54ICsgcmVjdDEud2lkdGgsIHk6IHJlY3QxLnkgfSwgZmFsc2UpIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54ICsgcmVjdDEud2lkdGgsIHk6IHJlY3QxLnkgKyByZWN0MS5oZWlnaHQgfSwgZmFsc2UpIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54LCB5OiByZWN0MS55ICsgcmVjdDEuaGVpZ2h0IH0sIGZhbHNlKSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCwgeTogcmVjdDIueSB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLnggKyByZWN0Mi53aWR0aCwgeTogcmVjdDIueSB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLnggKyByZWN0Mi53aWR0aCwgeTogcmVjdDIueSArIHJlY3QyLmhlaWdodCB9LCBmYWxzZSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLngsIHk6IHJlY3QyLnkgKyByZWN0Mi5oZWlnaHQgfSwgZmFsc2UpIHx8XHJcbiAgICAgICh0aGlzLmlzTnVtQmV0d2VlbihyZWN0MS55LCByZWN0Mi55LCByZWN0Mi55ICsgcmVjdDIuaGVpZ2h0LCBmYWxzZSkgJiYgcmVjdDEueCA8PSByZWN0Mi54ICYmIChyZWN0MS54ICsgcmVjdDEud2lkdGgpID49IChyZWN0Mi54ICsgcmVjdDIud2lkdGgpKSB8fCAvLyBpc051bUJldHdlZW4ocmVjdDIueCwgcmVjdDEueCwgcmVjdDEueCArIHJlY3QxLndpZHRoKSAmJiBpc051bUJldHdlZW4oKSkgfHxcclxuICAgICAgKHRoaXMuaXNOdW1CZXR3ZWVuKHJlY3QyLnksIHJlY3QxLnksIHJlY3QxLnkgKyByZWN0MS5oZWlnaHQsIGZhbHNlKSAmJiByZWN0Mi54IDw9IHJlY3QxLnggJiYgKHJlY3QyLnggKyByZWN0Mi53aWR0aCkgPj0gKHJlY3QxLnggKyByZWN0MS53aWR0aCkpKSB7IC8vIGlzTnVtQmV0d2VlbihyZWN0MS54LCByZWN0Mi54LCByZWN0Mi54ICsgcmVjdDIud2lkdGgpKSkge1xyXG4gICAgICByZXR1cm4gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLkludGVyc2VjdDtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLngsIHk6IHJlY3QxLnkgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QyLCB7IHg6IHJlY3QxLnggKyByZWN0MS53aWR0aCwgeTogcmVjdDEueSB9KSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDIsIHsgeDogcmVjdDEueCArIHJlY3QxLndpZHRoLCB5OiByZWN0MS55ICsgcmVjdDEuaGVpZ2h0IH0pIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MiwgeyB4OiByZWN0MS54LCB5OiByZWN0MS55ICsgcmVjdDEuaGVpZ2h0IH0pIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54LCB5OiByZWN0Mi55IH0pIHx8XHJcbiAgICAgIHRoaXMuaXNQdEluUmVjdChyZWN0MSwgeyB4OiByZWN0Mi54ICsgcmVjdDIud2lkdGgsIHk6IHJlY3QyLnkgfSkgfHxcclxuICAgICAgdGhpcy5pc1B0SW5SZWN0KHJlY3QxLCB7IHg6IHJlY3QyLnggKyByZWN0Mi53aWR0aCwgeTogcmVjdDIueSArIHJlY3QyLmhlaWdodCB9KSB8fFxyXG4gICAgICB0aGlzLmlzUHRJblJlY3QocmVjdDEsIHsgeDogcmVjdDIueCwgeTogcmVjdDIueSArIHJlY3QyLmhlaWdodCB9KSkge1xyXG4gICAgICByZXR1cm4gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLlRhbmdlbnQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLkRpc2pvaW50O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVsYXRpb25zaGlwIGJldHdlZW4gdHdvIG9ydGhvZ29uYWwgbGluZXMuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAobGluZTE6IExpbmUsIGxpbmUyOiBMaW5lKSB7XHJcbiAgICBpZiAodGhpcy5pc0xpbmVIb3Jpem9udGFsKGxpbmUxKSAmJiB0aGlzLmlzTGluZVZlcnRpY2FsKGxpbmUyKSkge1xyXG4gICAgICBpZiAodGhpcy5pc051bUJldHdlZW4obGluZTFbMF0ueSwgbGluZTJbMF0ueSwgbGluZTJbMV0ueSkgJiYgdGhpcy5pc051bUJldHdlZW4obGluZTJbMF0ueCwgbGluZTFbMF0ueCwgbGluZTFbMV0ueCkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuSW50ZXJzZWN0LCB7IHg6IGxpbmUyWzBdLngsIHk6IGxpbmUxWzBdLnkgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNMaW5lSG9yaXpvbnRhbChsaW5lMikgJiYgdGhpcy5pc0xpbmVWZXJ0aWNhbChsaW5lMSkpIHtcclxuICAgICAgaWYgKHRoaXMuaXNOdW1CZXR3ZWVuKGxpbmUyWzBdLnksIGxpbmUxWzBdLnksIGxpbmUxWzFdLnkpICYmIHRoaXMuaXNOdW1CZXR3ZWVuKGxpbmUxWzBdLngsIGxpbmUyWzBdLngsIGxpbmUyWzFdLngpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLkludGVyc2VjdCwgeyB4OiBsaW5lMVswXS54LCB5OiBsaW5lMlswXS55IH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5Ob3RoaW5nKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzTGluZUhvcml6b250YWwobGluZTEpICYmIHRoaXMuaXNMaW5lSG9yaXpvbnRhbChsaW5lMikpIHtcclxuICAgICAgaWYgKGxpbmUxWzBdLnkgPT09IGxpbmUyWzBdLnkpIHtcclxuICAgICAgICBjb25zdCBzdGFydFBvaW50WCA9IE1hdGgubWluKE1hdGgubWF4KGxpbmUxWzBdLngsIGxpbmUxWzFdLngpLCBNYXRoLm1heChsaW5lMlswXS54LCBsaW5lMlsxXS54KSk7XHJcbiAgICAgICAgY29uc3QgZW5kUG9pbnRYID0gTWF0aC5tYXgoTWF0aC5taW4obGluZTFbMF0ueCwgbGluZTFbMV0ueCksIE1hdGgubWluKGxpbmUyWzBdLngsIGxpbmUyWzFdLngpKTtcclxuICAgICAgICBpZiAoc3RhcnRQb2ludFggPj0gZW5kUG9pbnRYKSB7XHJcbiAgICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuT3ZlcmxhcCwgdW5kZWZpbmVkLCBbeyB4OiBzdGFydFBvaW50WCwgeTogbGluZTFbMF0ueSB9LCB7IHg6IGVuZFBvaW50WCwgeTogbGluZTFbMF0ueSB9XSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5Ob3RoaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNMaW5lVmVydGljYWwobGluZTEpICYmIHRoaXMuaXNMaW5lVmVydGljYWwobGluZTIpKSB7XHJcbiAgICAgIGlmIChsaW5lMVswXS54ID09PSBsaW5lMlswXS54KSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRQb2ludFkgPSBNYXRoLm1pbihNYXRoLm1heChsaW5lMVswXS55LCBsaW5lMVsxXS55KSwgTWF0aC5tYXgobGluZTJbMF0ueSwgbGluZTJbMV0ueSkpO1xyXG4gICAgICAgIGNvbnN0IGVuZFBvaW50WSA9IE1hdGgubWF4KE1hdGgubWluKGxpbmUxWzBdLnksIGxpbmUxWzFdLnkpLCBNYXRoLm1pbihsaW5lMlswXS55LCBsaW5lMlsxXS55KSk7XHJcbiAgICAgICAgaWYgKHN0YXJ0UG9pbnRZID49IGVuZFBvaW50WSkge1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk92ZXJsYXAsIHVuZGVmaW5lZCwgW3sgeDogbGluZTFbMF0ueCwgeTogc3RhcnRQb2ludFkgfSwgeyB4OiBsaW5lMVswXS54LCB5OiBlbmRQb2ludFkgfV0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gbmV3IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXAoT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcFR5cGUuTm90aGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgT3J0aG9MaW5lTGluZVJlbGF0aW9uc2hpcChPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5Ob3RoaW5nKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG5ldyBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk5vdGhpbmcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIHN0YXRpYyByZWN0YW5nbGVzU2lsaG91ZXR0ZShyZWN0czogUmVjdGFuZ2xlW10pOiBMaW5lW10ge1xyXG4gICAgY29uc3QgcmVjdHNTZWdtZW50cyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKylcclxuICAgICAgcmVjdHNTZWdtZW50cy5wdXNoKHRoaXMuZ2V0UmVjdFNlZ21lbnRzKHJlY3RzW2ldKSk7XHJcbiAgICBjb25zdCBmaW5hbFNlZ21lbnRzID0gW107XHJcbiAgICBjb25zdCBvdmVybGFwcGVkU2VnbWVudHM6IExpbmVbXSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBsZXQgY3VycmVudFJlY3RTZWdtZW50cyA9IHRoaXMuZ2V0UmVjdFNlZ21lbnRzKHJlY3RzW2ldKTtcclxuICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCByZWN0cy5sZW5ndGg7IGIrKykge1xyXG4gICAgICAgIC8vIFNraXAgY2hlY2tpbmcgd2l0aCB0aGUgcmVjdGFuZ2xlIGl0c2VsZi5cclxuICAgICAgICBpZiAoYiAhPSBpKSB7XHJcbiAgICAgICAgICBjb25zdCBuZXdDdXJyZW50UmVjdFNlZ21lbnRzID0gW107XHJcbiAgICAgICAgICBjb25zdCByZWN0c1JlbGF0aW9uID0gdGhpcy5yZWN0UmVjdFJlbGF0aW9uc2hpcChyZWN0c1tiXSwgcmVjdHNbaV0pO1xyXG4gICAgICAgICAgLy8gSWYgdGhlICdpJyByZWN0YW5nbGUgaXMgaW5zaWRlIG9mIHRoZSAnYicgb3IgaWYgdGhlICdpJyBpcyBlcXVhbCB0byBhIHByZXZpb3VzICdiJyB0aGVuIHNraXAgaXRzIHNlZ21lbnRzLlxyXG4gICAgICAgICAgaWYgKHJlY3RzUmVsYXRpb24gPT09IFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5CSW5zaWRlQSB8fCAoaSA+IGIgJiYgcmVjdHNSZWxhdGlvbiA9PT0gUmVjdFJlY3RSZWxhdGlvbnNoaXBUeXBlLk1hdGNoKSkge1xyXG4gICAgICAgICAgICBjdXJyZW50UmVjdFNlZ21lbnRzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChyZWN0c1JlbGF0aW9uID09PSBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuSW50ZXJzZWN0IHx8IHJlY3RzUmVsYXRpb24gPT09IFJlY3RSZWN0UmVsYXRpb25zaGlwVHlwZS5UYW5nZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXBPdmVybGFwcGVkU2VnbWVudHM6IExpbmVbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGN1cnJlbnRSZWN0U2VnbWVudHMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICBjb25zdCBzZWdtZW50SW50ZXJzZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGxpbmUxID0gY3VycmVudFJlY3RTZWdtZW50c1trXTtcclxuICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNMaW5lSW5SZWN0KGxpbmUxLCByZWN0c1tiXSkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgcmVjdHNTZWdtZW50c1tiXS5sZW5ndGg7IG4rKykge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBsaW5lMiA9IHJlY3RzU2VnbWVudHNbYl1bbl07XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzUmVsYXRpb25zaGlwID0gdGhpcy5nZXRPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwKGxpbmUxLCBsaW5lMik7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1JlbGF0aW9uc2hpcC50eXBlID09PSBPcnRob0xpbmVMaW5lUmVsYXRpb25zaGlwVHlwZS5JbnRlcnNlY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluZXNSZWxhdGlvbnNoaXAuaW50ZXJzZWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgc2VnbWVudEludGVyc2VjdGlvbnMucHVzaChsaW5lc1JlbGF0aW9uc2hpcC5pbnRlcnNlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmVzUmVsYXRpb25zaGlwLnR5cGUgPT09IE9ydGhvTGluZUxpbmVSZWxhdGlvbnNoaXBUeXBlLk92ZXJsYXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluZXNSZWxhdGlvbnNoaXAub3ZlcmxhcClcclxuICAgICAgICAgICAgICAgICAgICAgIHRlbXBPdmVybGFwcGVkU2VnbWVudHMucHVzaChsaW5lc1JlbGF0aW9uc2hpcC5vdmVybGFwKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHNlZ21lbnRJbnRlcnNlY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkSW50ZXJzZWN0aW9ucyA9IHRoaXMuc29ydFB0c0J5RGlzdGFuY2Uoc2VnbWVudEludGVyc2VjdGlvbnMsIGN1cnJlbnRSZWN0U2VnbWVudHNba11bMF0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBzcGxpdGVkU2VnbWVudHMgPSB0aGlzLmxpbmVzQmV0d2VlblB0cyhbLi4uc29ydGVkSW50ZXJzZWN0aW9ucywgY3VycmVudFJlY3RTZWdtZW50c1trXVsxXV0pO1xyXG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCA8IHNwbGl0ZWRTZWdtZW50cy5sZW5ndGg7IHArKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1B0SW5SZWN0KHJlY3RzW2JdLCBHZW9tZXRyeUNhbGMubGluZU1pZGRsZVB0KHNwbGl0ZWRTZWdtZW50c1twXSkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgbmV3Q3VycmVudFJlY3RTZWdtZW50cy5wdXNoKHNwbGl0ZWRTZWdtZW50c1twXSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIG5ld0N1cnJlbnRSZWN0U2VnbWVudHMucHVzaChjdXJyZW50UmVjdFNlZ21lbnRzW2tdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRlbXBPdmVybGFwcGVkU2VnbWVudHMubGVuZ3RoID4gMCAmJiByZWN0c1JlbGF0aW9uICE9PSBSZWN0UmVjdFJlbGF0aW9uc2hpcFR5cGUuVGFuZ2VudCkge1xyXG4gICAgICAgICAgICAgIGZvciAobGV0IG0gPSAwOyBtIDwgdGVtcE92ZXJsYXBwZWRTZWdtZW50cy5sZW5ndGg7IG0rKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvdmVybGFwcGVkU2VnbWVudHMuZmluZChzZWdtZW50ID0+IEdlb21ldHJ5Q2FsYy5hcmVMaW5lc0VxdWFsKHNlZ21lbnQsIHRlbXBPdmVybGFwcGVkU2VnbWVudHNbbV0pKSlcclxuICAgICAgICAgICAgICAgICAgb3ZlcmxhcHBlZFNlZ21lbnRzLnB1c2godGVtcE92ZXJsYXBwZWRTZWdtZW50c1ttXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2VnbWVudHMgYWZ0ZXIgcHJvY2Vzc2luZyB0aGVtIHdpdGggdGhpcyBpdGVyYXRpb24gcmVjdGFuZ2xlLlxyXG4gICAgICAgICAgICBjdXJyZW50UmVjdFNlZ21lbnRzID0gbmV3Q3VycmVudFJlY3RTZWdtZW50cztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGN1cnJlbnRSZWN0U2VnbWVudHMubGVuZ3RoID4gMClcclxuICAgICAgICBmaW5hbFNlZ21lbnRzLnB1c2goLi4uY3VycmVudFJlY3RTZWdtZW50cyk7XHJcbiAgICB9XHJcbiAgICBpZiAob3ZlcmxhcHBlZFNlZ21lbnRzLmxlbmd0aCA+IDApXHJcbiAgICAgIGZpbmFsU2VnbWVudHMucHVzaCguLi5vdmVybGFwcGVkU2VnbWVudHMpO1xyXG4gICAgcmV0dXJuIGZpbmFsU2VnbWVudHM7XHJcbiAgfVxyXG5cclxuXHJcbiAgc3RhdGljIHN2Z1BhdGhGcm9tTGluZXMoc2VnbWVudHM6IExpbmVbXSkge1xyXG4gICAgY29uc3QgcGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xyXG4gICAgY29uc3QgcGF0aENvbnRlbnQgPSBbXTtcclxuICAgIGNvbnN0IHByZWNpc2lvbiA9IDM7IC8vIFRPRE8gVGFrZSBmcm9tIHRoZSBkb2N1bWVudD9cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgcGF0aENvbnRlbnQucHVzaChgTSR7c2VnbWVudHNbaV1bMF0ueC50b0ZpeGVkKHByZWNpc2lvbil9LCR7c2VnbWVudHNbaV1bMF0ueS50b0ZpeGVkKHByZWNpc2lvbil9ICR7c2VnbWVudHNbaV1bMV0ueC50b0ZpeGVkKHByZWNpc2lvbil9LCR7c2VnbWVudHNbaV1bMV0ueS50b0ZpeGVkKHByZWNpc2lvbil9YCk7XHJcbiAgICB9XHJcbiAgICBwYXRoLnNldEF0dHJpYnV0ZSgnZCcsIHBhdGhDb250ZW50LmpvaW4oJycpKTtcclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH1cclxufSIsImltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEcmF3aW5nIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgaWQ6IGFueTsgLy8gVE9ET1xyXG4gIGNvbnRlbnQ6IEhUTUxFbGVtZW50O1xyXG4gIHN2Z0NhbnZhczogU1ZHU1ZHRWxlbWVudDtcclxuICBjb21tZW50c0dyb3VwOiBTVkdHRWxlbWVudDtcclxuICBjb21tZW50c0NoYW5nZWQ6IGJvb2xlYW47XHJcbiAgbW91c2VQb3NpdGlvbjogRE9NUG9pbnQ7XHJcbiAgLy8gWm9vbVxyXG4gIHJlYWRvbmx5IFNWR1dJRFRIID0gNTAwO1xyXG4gIHJlYWRvbmx5IFpPT01TUEVFRCA9IDEuMjU7XHJcbiAgLy8gUGFuXHJcbiAgYWxsb3dQYW5uaW5nID0gZmFsc2U7XHJcbiAgc3ZnSW5pdGlhbENsaWNrOiBET01Qb2ludDtcclxuICBwcmV2Vmlld0JveDogU1ZHUmVjdDtcclxuXHJcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBpZDogYW55KSB7IC8vIFRPRE8gc3RyaW5nIG9yIG51bWJlcj9cclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB0aGlzLmNvbnRlbnQ7XHJcblxyXG4gICAgdGhpcy56b29tID0gdGhpcy56b29tLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBzZXRDb250ZW50KGNvbnRlbnQ6IHN0cmluZykge1xyXG4gICAgdGhpcy5jb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBkb21wYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XHJcbiAgICB0aGlzLnN2Z0NhbnZhcyA9IGRvbXBhcnNlci5wYXJzZUZyb21TdHJpbmcoY29udGVudCwgJ2ltYWdlL3N2Zyt4bWwnKS5kb2N1bWVudEVsZW1lbnQgYXMgdW5rbm93biBhcyBTVkdTVkdFbGVtZW50O1xyXG4gICAgdGhpcy5jb250ZW50LmFwcGVuZENoaWxkKHRoaXMuc3ZnQ2FudmFzKTtcclxuICAgIC8vIFpvb21cclxuICAgIHRoaXMuc3ZnQ2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy56b29tKTtcclxuICAgIC8vIFBhblxyXG4gICAgdGhpcy5zdmdDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB7XHJcbiAgICAgIGlmIChlLmJ1dHRvbnMgPT09IDIpIHtcclxuICAgICAgICB0aGlzLmFsbG93UGFubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zdmdJbml0aWFsQ2xpY2sgPSBHZW5lcmljcy5nZXRSZWxhdGl2ZUNvb3JkcyhlLCB0aGlzLnN2Z0NhbnZhcyk7XHJcbiAgICAgICAgdGhpcy5wcmV2Vmlld0JveCA9IHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbDsgLy8gVmlld0JveCB2YWx1ZSBhdCBzdGFydCAgXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5zdmdDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHRoaXMuYWxsb3dQYW5uaW5nID0gZmFsc2UpO1xyXG4gICAgdGhpcy5zdmdDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHRoaXMuYWxsb3dQYW5uaW5nID0gZmFsc2UpO1xyXG4gICAgdGhpcy5zdmdDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZSA9PiB7XHJcbiAgICAgIGlmIChlLmJ1dHRvbnMgPT09IDIgJiYgdGhpcy5hbGxvd1Bhbm5pbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5hbGxvd1Bhbm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3ZnSW5pdGlhbENsaWNrID0gR2VuZXJpY3MuZ2V0UmVsYXRpdmVDb29yZHMoZSwgdGhpcy5zdmdDYW52YXMpO1xyXG4gICAgICAgIHRoaXMucHJldlZpZXdCb3ggPSB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWw7IC8vIFZpZXdCb3ggdmFsdWUgYXQgc3RhcnRcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5hbGxvd1Bhbm5pbmcpIHtcclxuICAgICAgICB0aGlzLm1vdXNlUG9zaXRpb24gPSBHZW5lcmljcy5nZXRSZWxhdGl2ZUNvb3JkcyhlLCB0aGlzLnN2Z0NhbnZhcyk7XHJcbiAgICAgICAgdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLnggPSAtdGhpcy5tb3VzZVBvc2l0aW9uLnggLSAoLXRoaXMuc3ZnSW5pdGlhbENsaWNrLnggLSB0aGlzLnByZXZWaWV3Qm94LngpO1xyXG4gICAgICAgIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC55ID0gLXRoaXMubW91c2VQb3NpdGlvbi55IC0gKC10aGlzLnN2Z0luaXRpYWxDbGljay55IC0gdGhpcy5wcmV2Vmlld0JveC55KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDb21tZW50c0dyb3VwKCkge1xyXG4gICAgdGhpcy5jb21tZW50c0dyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XHJcbiAgICAvLyBncm91cC5zZXRBdHRyaWJ1dGUoJ2NvbW1lbnRzJywgJycpO1xyXG4gICAgdGhpcy5zdmdDYW52YXMuYXBwZW5kQ2hpbGQodGhpcy5jb21tZW50c0dyb3VwKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgem9vbShlOiBXaGVlbEV2ZW50KSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLm1vdXNlUG9zaXRpb24gPSBHZW5lcmljcy5nZXRSZWxhdGl2ZUNvb3JkcyhlLCB0aGlzLnN2Z0NhbnZhcyk7XHJcbiAgICBsZXQgem9vbUZhY3RvciA9IChlLmRlbHRhWSA+IDAgPyB0aGlzLlpPT01TUEVFRCA6IDEgLyB0aGlzLlpPT01TUEVFRCk7XHJcbiAgICBsZXQgeFByb3AgPSAodGhpcy5tb3VzZVBvc2l0aW9uLnggLSB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwueCkgLyB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwud2lkdGg7XHJcbiAgICBsZXQgeEluYyA9IHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC53aWR0aCAqIHpvb21GYWN0b3IgLSB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwud2lkdGg7XHJcbiAgICBsZXQgeVByb3AgPSAodGhpcy5tb3VzZVBvc2l0aW9uLnkgLSB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwueSkgLyB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwuaGVpZ2h0O1xyXG4gICAgbGV0IHlJbmMgPSB0aGlzLnN2Z0NhbnZhcy52aWV3Qm94LmJhc2VWYWwuaGVpZ2h0ICogem9vbUZhY3RvciAtIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC5oZWlnaHQ7XHJcbiAgICBpZiAoZS5kZWx0YVkgPiAwID8gdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLndpZHRoIDwgdGhpcy5TVkdXSURUSCAqIDEwIDogdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLndpZHRoID4gdGhpcy5TVkdXSURUSCAvIDEwKSB7XHJcbiAgICAgIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC54IC09IHhJbmMgKiB4UHJvcDtcclxuICAgICAgdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLndpZHRoICs9IHhJbmM7XHJcbiAgICAgIHRoaXMuc3ZnQ2FudmFzLnZpZXdCb3guYmFzZVZhbC55IC09IHlJbmMgKiB5UHJvcDtcclxuICAgICAgdGhpcy5zdmdDYW52YXMudmlld0JveC5iYXNlVmFsLmhlaWdodCArPSB5SW5jO1xyXG4gICAgfVxyXG4gIH1cclxufSIsImltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuaW1wb3J0IHsgRHJhd2luZyB9IGZyb20gJy4vZHJhd2luZyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB7XHJcblxyXG4gIC8qKioqKiogQkFTSUMgR09PR0xFIEFQSSBGVU5DVElPTlMgKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZXMgaWQgYW5kIG5hbWUgb2YgdGhlIGZpbGVzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5IG9iamVjdC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnkgT2JqZWN0IHdpdGggb3B0aW9uYWwgZW50cmllczogbmFtZSAoc3RyKSwgcGFyZW50SWQgKHN0ciksIHRyYXNoZWQgKGJvb2wpLCBleGNsdWRlTmFtZSAoc3RyKSwgYW5kIG9ubHlGb2xkZXIgKGJvb2wpXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGFkYXRhRmllbGRzIE9wdGlvbmFsLCBieSBkZWZhdWx0IGl0IGluY2x1ZGVzIGlkIGFuZCBuYW1lIG9mIHRoZSBmaWxlLCBidXQgYW55IG90aGVyIGNhbiBiZSBhZGRlZDogJ2ZpZWxkLCBmaWVsZCdcclxuICAgKi9cclxuICBzdGF0aWMgbGlzdEZpbGVzKHF1ZXJ5LCBtZXRhZGF0YUZpZWxkcykge1xyXG4gICAgY29uc3QgcXVlcnlJdGVtcyA9IFtdO1xyXG4gICAgaWYgKHF1ZXJ5Lm5hbWUpIHF1ZXJ5SXRlbXMucHVzaCgnbmFtZT1cXCcnICsgcXVlcnkubmFtZSArICdcXCcnKTtcclxuICAgIGlmIChxdWVyeS5wYXJlbnRJZCkgcXVlcnlJdGVtcy5wdXNoKCdcXCcnICsgcXVlcnkucGFyZW50SWQgKyAnXFwnIGluIHBhcmVudHMnKTtcclxuICAgIGlmIChxdWVyeS50cmFzaGVkID09PSBmYWxzZSkgcXVlcnlJdGVtcy5wdXNoKCd0cmFzaGVkPWZhbHNlJyk7XHJcbiAgICBpZiAocXVlcnkuZXhjbHVkZU5hbWUpIHF1ZXJ5SXRlbXMucHVzaCgnbm90IG5hbWUgY29udGFpbnMgXFwnJyArIHF1ZXJ5LmV4Y2x1ZGVOYW1lICsgJ1xcJycpO1xyXG4gICAgaWYgKHF1ZXJ5Lm9ubHlGb2xkZXIpIHF1ZXJ5SXRlbXMucHVzaCgnbWltZVR5cGU9XFwnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlclxcJycpO1xyXG4gICAgbGV0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5saXN0KHtcclxuICAgICAgJ3BhZ2VTaXplJzogMTUsXHJcbiAgICAgICdmaWVsZHMnOiBgbmV4dFBhZ2VUb2tlbiwgZmlsZXMoaWQsIG5hbWUke21ldGFkYXRhRmllbGRzID8gJywgJyArIG1ldGFkYXRhRmllbGRzIDogJyd9KWAsXHJcbiAgICAgICdxJzogcXVlcnlJdGVtcy5qb2luKCcgYW5kICcpXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zdCBmaWxlcyA9IHJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZmlsZXMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBmaWxlcyBmb3VuZCB3aXRoIHRoaXMgcXVlcnk6JywgcXVlcnlJdGVtcy5qb2luKCcgYW5kICcpKTtcclxuICAgICAgfVxyXG4gICAgfSwgZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIuYm9keSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHdpdGggdGhlIGNvbnRlbnRzIG9mIHRoZSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWRcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0RmlsZUNvbnRlbnQoZmlsZUlkKSB7XHJcbiAgICBsZXQgcmVxdWVzdCA9IGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmdldCh7XHJcbiAgICAgIGZpbGVJZDogZmlsZUlkLFxyXG4gICAgICBhbHQ6ICdtZWRpYSdcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgd2l0aCBpZCAnICsgZmlsZUlkICsgJyBmZXRjaGVkIHN1Y2Nlc3NmdWxseS4nKTtcclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLmJvZHkpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB3aXRoIHRoZSByZXF1ZXN0ZWQgZGF0YSBvZiB0aGUgZmlsZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIFRoZSBpZCBvZiB0aGUgZmlsZSB0byBnZXQgdGhlIGRhdGEgb2YuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpZWxkcyBUaGUgZGF0YSB0byBiZSBmZXRjaGVkIGluIGZvcm1hdDogJ2ZpZWxkMSwgZmllbGQyJy5cclxuICAgKi9cclxuICBzdGF0aWMgZ2V0RmlsZURhdGEoZmlsZUlkLCBmaWVsZHMpIHtcclxuICAgIGxldCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZ2V0KHtcclxuICAgICAgZmlsZUlkOiBmaWxlSWQsXHJcbiAgICAgIGZpZWxkczogZmllbGRzXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUgZGF0YSBmZXRjaGVkIHN1Y2Nlc2Z1bGx5LicpO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBuZXcgZm9sZGVyIGFuZCByZXR1cm5zIGl0cyBpZC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGUgVGhlIG5hbWUgb2YgdGhlIGZvbGRlci5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGFyZW50SWQgT3B0aW9uYWwgaWQgb2YgdGhlIHBhcmVudCBmb2xkZXIsIGlmIG5vbmUgaXQgd2lsbCBiZSBjcmVhdGVkIG9uIHRoZSByb290LlxyXG4gICAqL1xyXG4gIHN0YXRpYyBjcmVhdGVGb2xkZXIodGl0bGUsIHBhcmVudElkID0gJ2RyaXZlJykge1xyXG4gICAgY29uc3QgYm9keSA9IHtcclxuICAgICAgXCJuYW1lXCI6IHRpdGxlLFxyXG4gICAgICBcIm1pbWVUeXBlXCI6IFwiYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlclwiLFxyXG4gICAgICBcInBhcmVudHNcIjogcGFyZW50SWQgIT09ICdkcml2ZScgPyBbcGFyZW50SWRdIDogW11cclxuICAgIH1cclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAgICAgJ3BhdGgnOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvJyxcclxuICAgICAgJ21ldGhvZCc6ICdQT1NUJyxcclxuICAgICAgJ2JvZHknOiBib2R5XHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyh0aXRsZSArICcgZm9sZGVyIGNyZWF0ZWQuIElkOiAnICsgSlNPTi5wYXJzZShyZXMuYm9keSkuaWQpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBVcGxvYWQgYSBmaWxlIHRvIHRoZSBzcGVjaWZpYyBmb2xkZXIuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVDb250ZW50IFRoZSBjb250ZW50IG9mIHRoZSBmaWxlIGFzIGEgc3RyaW5nLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlTWltZVR5cGUgVGhlIE1JTUUgVHlwZSBvZiB0aGUgZmlsZS4gRm9yIGV4YW1wbGU6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlTmFtZSBOYW1lIGZvciB0aGUgZmlsZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZm9sZGVySWQgSWQgb2YgdGhlIHBhcmVudCBmb2xkZXIuXHJcbiAgICovXHJcbiAgc3RhdGljIHVwbG9hZEZpbGUoZmlsZUNvbnRlbnQsIGZpbGVNaW1lVHlwZSwgZmlsZU5hbWUsIGZvbGRlcklkKSB7XHJcbiAgICBjb25zdCBmaWxlID0gbmV3IEJsb2IoW2ZpbGVDb250ZW50XSwgeyB0eXBlOiBmaWxlTWltZVR5cGUgfSk7XHJcbiAgICBjb25zdCBtZXRhZGF0YSA9IHtcclxuICAgICAgJ25hbWUnOiBmaWxlTmFtZSxcclxuICAgICAgJ21pbWVUeXBlJzogZmlsZU1pbWVUeXBlLFxyXG4gICAgICAncGFyZW50cyc6IFtmb2xkZXJJZF1cclxuICAgIH07XHJcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGdhcGkuYXV0aC5nZXRUb2tlbigpLmFjY2Vzc190b2tlbjsgLy8gR2FwaSBpcyB1c2VkIGZvciByZXRyaWV2aW5nIHRoZSBhY2Nlc3MgdG9rZW4uXHJcbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBmb3JtLmFwcGVuZCgnbWV0YWRhdGEnLCBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkobWV0YWRhdGEpXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSkpO1xyXG4gICAgZm9ybS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuXHJcbiAgICBsZXQgcmVxdWVzdCA9IGZldGNoKCdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS91cGxvYWQvZHJpdmUvdjMvZmlsZXM/dXBsb2FkVHlwZT1tdWx0aXBhcnQmZmllbGRzPWlkJywge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIGFjY2Vzc1Rva2VuIH0pLFxyXG4gICAgICBib2R5OiBmb3JtXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rID09PSB0cnVlICYmIHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWQgb2YgJyArIGZpbGVOYW1lICsgJyBzdWNjZXNzZnVsLicpO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZSB0aGUgY29udGVudHMgb2YgYSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlQ29udGVudCBUaGUgY29udGVudCBvZiB0aGUgZmlsZSBhcyBhIHN0cmluZy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZU1pbWVUeXBlIFRoZSBNSU1FIFR5cGUgb2YgdGhlIGZpbGUuIEZvciBleGFtcGxlOiAnYXBwbGljYXRpb24vanNvbicuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBJRCBvZiB0aGUgZmlsZSB0byB1cGRhdGUgaXRzIGNvbnRlbnQuXHJcbiAgICovXHJcbiAgc3RhdGljIHVwZGF0ZUZpbGVDb250ZW50KGZpbGVDb250ZW50LCBmaWxlTWltZVR5cGUsIGZpbGVJZCkge1xyXG4gICAgY29uc3QgZmlsZSA9IG5ldyBCbG9iKFtmaWxlQ29udGVudF0sIHsgdHlwZTogZmlsZU1pbWVUeXBlIH0pO1xyXG4gICAgY29uc3QgbWV0YWRhdGEgPSB7XHJcbiAgICAgICdtaW1lVHlwZSc6IGZpbGVNaW1lVHlwZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gZ2FwaS5hdXRoLmdldFRva2VuKCkuYWNjZXNzX3Rva2VuOyAvLyBHYXBpIGlzIHVzZWQgZm9yIHJldHJpZXZpbmcgdGhlIGFjY2VzcyB0b2tlbi5cclxuICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm0uYXBwZW5kKCdtZXRhZGF0YScsIG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShtZXRhZGF0YSldLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KSk7XHJcbiAgICBmb3JtLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xyXG5cclxuICAgIGxldCByZXF1ZXN0ID0gZmV0Y2goYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3VwbG9hZC9kcml2ZS92My9maWxlcy8ke2ZpbGVJZH0/dXBsb2FkVHlwZT1tdWx0aXBhcnRgLCB7IC8vIE90aGVyd2lzZSB0cnkgdXBsb2FkVHlwZT1tZWRpYVxyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBhY2Nlc3NUb2tlbiB9KSxcclxuICAgICAgYm9keTogZm9ybSxcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmIChyZXMub2sgPT09IHRydWUgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZSBzdWNjZXNzZnVsLicpO1xyXG4gICAgICB9XHJcbiAgICB9LCBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFZlcnNpb24gb2YgdXBsb2FkIGZpbGUgZnJvbSBkb2N1bWVudGF0aW9uIHRoYXQgZG9lc250IHdvcmsuXHJcbiAgICogSXQganVzdCBjcmVhdGVzIGFuIHVudGl0bGVkIGVtcHR5IGZpbGUgaW4gdGhlIGRyaXZlIHJvb3QuXHJcbiAgICogQHBhcmFtIHsqfSBmaWxlQ29udGVudCBcclxuICAgKiBAcGFyYW0geyp9IGZpbGVNaW1lVHlwZSBcclxuICAgKiBAcGFyYW0geyp9IGZpbGVOYW1lIFxyXG4gICAqIEBwYXJhbSB7Kn0gZm9sZGVySWQgXHJcbiAgICovXHJcbiAgLy8gc3RhdGljIHVwbG9hZEZpbGUyKGZpbGVDb250ZW50LCBmaWxlTWltZVR5cGUsIGZpbGVOYW1lLCBmb2xkZXJJZCkge1xyXG4gIC8vICAgY29uc3QgZmlsZSA9IG5ldyBCbG9iKFtmaWxlQ29udGVudF0sIHsgdHlwZTogZmlsZU1pbWVUeXBlIH0pO1xyXG4gIC8vICAgY29uc3QgZmlsZU1ldGFkYXRhID0ge1xyXG4gIC8vICAgICAnbmFtZSc6IGZpbGVOYW1lLFxyXG4gIC8vICAgICAncGFyZW50cyc6IFtmb2xkZXJJZF1cclxuICAvLyAgIH07XHJcbiAgLy8gICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgLy8gICBmb3JtLmFwcGVuZCgnbWV0YWRhdGEnLCBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoZmlsZU1ldGFkYXRhKV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pKTtcclxuICAvLyAgIGZvcm0uYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgLy8gICBjb25zdCBtZWRpYSA9IHtcclxuICAvLyAgICAgbWltZVR5cGU6IGZpbGVNaW1lVHlwZSxcclxuICAvLyAgICAgYm9keTogZm9ybVxyXG4gIC8vICAgfTtcclxuICAvLyAgIHJldHVybiBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5jcmVhdGUoe1xyXG4gIC8vICAgICByZXNvdXJjZTogZmlsZU1ldGFkYXRhLFxyXG4gIC8vICAgICBtZWRpYTogbWVkaWEsXHJcbiAgLy8gICAgIGZpZWxkczogJ2lkJ1xyXG4gIC8vICAgfSwgKGVyciwgZmlsZSkgPT4ge1xyXG4gIC8vICAgICBpZiAoZXJyKSB7XHJcbiAgLy8gICAgICAgLy8gSGFuZGxlIGVycm9yXHJcbiAgLy8gICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIC8vICAgICB9IGVsc2Uge1xyXG4gIC8vICAgICAgIGNvbnNvbGUubG9nKCdGaWxlIElkOiAnLCBmaWxlLmlkKTtcclxuICAvLyAgICAgfVxyXG4gIC8vICAgfSk7XHJcbiAgLy8gfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVuYW1lIGEgZmlsZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIElEIG9mIHRoZSBmaWxlIHRvIHJlbmFtZS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmV3VGl0bGUgTmV3IHRpdGxlIGZvciB0aGUgZmlsZS5cclxuICAgKi9cclxuICBzdGF0aWMgcmVuYW1lRmlsZShmaWxlSWQsIG5ld1RpdGxlKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMudXBkYXRlKHtcclxuICAgICAgJ2ZpbGVJZCc6IGZpbGVJZCxcclxuICAgICAgJ25hbWUnOiBuZXdUaXRsZSxcclxuICAgICAgJ3VwbG9hZFR5cGUnOiAnbWVkaWEnXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICAvL2NvbnNvbGUubG9nKHJlcyk7XHJcbiAgICB9LCByZWogPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW5hbWluZyBmaWxlOiAnICsgZmlsZUlkLCByZWopO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNb3ZlcyBhIGZpbGUgb3IgZm9sZGVyIGluc2lkZSBhbm90aGVyIGZvbGRlci5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIFxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJlbnRJZCBcclxuICAgKi9cclxuICBzdGF0aWMgbW92ZUZpbGVWMihmaWxlSWQsIHBhcmVudElkKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgICAgICdwYXRoJzogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YyL2ZpbGVzLycgKyBmaWxlSWQgKyAnL3BhcmVudHMnLFxyXG4gICAgICAnbWV0aG9kJzogJ1BPU1QnLFxyXG4gICAgICAnaGVhZGVycyc6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICAgICdib2R5Jzoge1xyXG4gICAgICAgICdpZCc6IHBhcmVudElkXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICB9LCByZWogPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZWopO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICBzdGF0aWMgbW92ZUZpbGUoZmlsZUlkLCBwYXJlbnRJZCkge1xyXG4gICAgY29uc3QgYm9keSA9IHsgJ2lkJzogcGFyZW50SWQgfTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5wYXJlbnRzLmluc2VydCh7XHJcbiAgICAgICdmaWxlSWQnOiBmaWxlSWQsXHJcbiAgICAgICdyZXNvdXJjZSc6IGJvZHlcclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC5leGVjdXRlKGZ1bmN0aW9uIChyZXNwKSB7IH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFBlcm1hbmVudGx5IGRlbGV0ZSBhIGZpbGUsIHNraXBwaW5nIHRoZSB0cmFzaC5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZUlkIElEIG9mIHRoZSBmaWxlIHRvIGRlbGV0ZS5cclxuICAgKi9cclxuICBzdGF0aWMgZGVsZXRlRmlsZShmaWxlSWQpIHtcclxuICAgIGxldCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZGVsZXRlKHtcclxuICAgICAgJ2ZpbGVJZCc6IGZpbGVJZFxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0sIHJlaiA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE5PVCBXT1JLSU5HLiBUSElTIFdPVUxEIE9OTFkgTUFLRSBTRU5TRSBJTiBBIFNFUlZFUi5cclxuICAgKiBTdWJzY3JpYmVzIHRvIGNoYW5nZXMgdG8gYSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlSWQgSUQgb2YgdGhlIGZpbGUgdG8gd2F0Y2guXHJcbiAgICovXHJcbiAgLy8gc3RhdGljIHdhdGNoRmlsZShmaWxlSWQpIHtcclxuICAvLyAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgLy8gICAgIFwia2luZFwiOiBcImFwaSNjaGFubmVsXCIsXHJcbiAgLy8gICAgIFwiaWRcIjogXCIwMTIzNDU2Ny04OWFiLWNkZWYtMDEyMzQ1Njc4OWFiXCIsIC8vIFRPRE8gVXNlIGEgdXVpZCBnZW5lcmF0b3JcclxuICAvLyAgICAgLy9cInJlc291cmNlSWRcIjogc3RyaW5nLFxyXG4gIC8vICAgICAvL1wicmVzb3VyY2VVcmlcIjogc3RyaW5nLFxyXG4gIC8vICAgICBcInR5cGVcIjogXCJ3ZWJfaG9va1wiLFxyXG4gIC8vICAgICBcImFkZHJlc3NcIjogXCJodHRwczovL3Zpc3VhbGFycWFwcC5yYW1vbmNhcmNlbGVzLmNvbVwiXHJcbiAgLy8gICB9XHJcbiAgLy8gICBjb25zdCByZXF1ZXN0ID0gZ2FwaS5jbGllbnQucmVxdWVzdCh7XHJcbiAgLy8gICAgICdwYXRoJzogYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzLyR7ZmlsZUlkfS93YXRjaGAsXHJcbiAgLy8gICAgICdtZXRob2QnOiAnUE9TVCcsXHJcbiAgLy8gICAgICdib2R5JzogYm9keVxyXG4gIC8vICAgfSk7XHJcbiAgLy8gICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAvLyAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAvLyAgIH0pO1xyXG4gIC8vICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgLy8gfVxyXG5cclxuICAvLyBOT1QgV09SS0lORy4gVEhJUyBXT1VMRCBPTkxZIE1BS0UgU0VOU0UgSU4gQSBTRVJWRVIuXHJcbiAgLy8gc3RhdGljIHN0b3BXYXRjaGluZyhjaGFubmVsSWQsIHJlc291cmNlSWQpIHtcclxuICAvLyAgIGNvbnN0IGJvZHkgPSB7XHJcbiAgLy8gICAgIFwiaWRcIjogY2hhbm5lbElkLCAvLyBTaG91bGQgYmUgdGhlIG9uZSB0byBzdG9wIGNyZWF0ZWQgcHJldmlvdXNseS5cclxuICAvLyAgICAgXCJyZXNvdXJjZUlkXCI6IHJlc291cmNlSWRcclxuICAvLyAgIH1cclxuICAvLyAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAvLyAgICAgJ3BhdGgnOiBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvY2hhbm5lbHMvc3RvcGAsXHJcbiAgLy8gICAgICdtZXRob2QnOiAnUE9TVCcsXHJcbiAgLy8gICAgICdib2R5JzogYm9keVxyXG4gIC8vICAgfSk7XHJcbiAgLy8gICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAvLyAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAvLyAgIH0pO1xyXG4gIC8vICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgLy8gfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBwZXJtaXNzaW9ucyBmb3IgYSBzcGVjaWZpYyBmaWxlLlxyXG4gICAqIFRoZSBkZWxheSBoYXMgYmVlbiBhZGRlZCBiZWNhdXNlIHRoZSBHRCBBUEkgZG9lc250IGFsbG93IHRvIGNyZWF0ZSBzZXZlcmFsIHBlcm1pc3Npb25zIGF0IHRoZSBzYW1lIHRpbWUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW1haWxBZGRyZXNzXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5IEFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgc2VuZGluZyB0aGUgcmVxdWVzdC5cclxuICAgKi9cclxuICBzdGF0aWMgc2hhcmVGaWxlKGZpbGVJZCwgZW1haWxBZGRyZXNzLCBkZWxheSA9IDApIHtcclxuICAgIGNvbnN0IGRlbGF5ZWRQcm9taXNlID0gbmV3IFByb21pc2UocmVzID0+IHNldFRpbWVvdXQocmVzLCBkZWxheSkpO1xyXG4gICAgcmV0dXJuIGRlbGF5ZWRQcm9taXNlLnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gICAgICAgICdwYXRoJzogYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzLyR7ZmlsZUlkfS9wZXJtaXNzaW9ucz9zZW5kTm90aWZpY2F0aW9uRW1haWw9ZmFsc2UmZmllbGRzPWlkLGRpc3BsYXlOYW1lLGVtYWlsQWRkcmVzcyxwaG90b0xpbmsscm9sZWAsXHJcbiAgICAgICAgJ21ldGhvZCc6ICdQT1NUJyxcclxuICAgICAgICAnaGVhZGVycyc6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9LFxyXG4gICAgICAgICdib2R5Jzoge1xyXG4gICAgICAgICAgJ3JvbGUnOiAnd3JpdGVyJywgLy8gb3duZXIsIHdyaXRlciwgY29tbWVudGVyLCByZWFkZXJcclxuICAgICAgICAgICd0eXBlJzogJ3VzZXInLFxyXG4gICAgICAgICAgJ2VtYWlsQWRkcmVzcyc6IGVtYWlsQWRkcmVzc1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gcmVxdWVzdDtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9SSUdJTkFMIENPREUgV0lUSE9VVCBERUxBWVxyXG4gICAgLy8gY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gICAgLy8gICAncGF0aCc6ICdzYW1lIHBhdGggYXMgYWJvdmUnLFxyXG4gICAgLy8gICAnbWV0aG9kJzogJ1BPU1QnLFxyXG4gICAgLy8gICAnaGVhZGVycyc6IHtcclxuICAgIC8vICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAvLyAgIH0sXHJcbiAgICAvLyAgICdib2R5Jzoge1xyXG4gICAgLy8gICAgICdyb2xlJzogJ3dyaXRlcicsIC8vIG93bmVyLCB3cml0ZXIsIGNvbW1lbnRlciwgcmVhZGVyXHJcbiAgICAvLyAgICAgJ3R5cGUnOiAndXNlcicsXHJcbiAgICAvLyAgICAgJ2VtYWlsQWRkcmVzcyc6IGVtYWlsQWRkcmVzc1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgLy8gICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBEZWxldGVzIHBlcm1pc3Npb25zIGZvciBhIHNwZWNpZmljIGZpbGUuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVJZCBcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGVybWlzc2lvbklkIFxyXG4gICAqL1xyXG4gIHN0YXRpYyBzdG9wU2hhcmluZ0ZpbGUoZmlsZUlkLCBwZXJtaXNzaW9uSWQpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5yZXF1ZXN0KHtcclxuICAgICAgJ3BhdGgnOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvJyArIGZpbGVJZCArICcvcGVybWlzc2lvbnMvJyArIHBlcm1pc3Npb25JZCxcclxuICAgICAgJ21ldGhvZCc6ICdERUxFVEUnLFxyXG4gICAgICAnaGVhZGVycyc6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE9idGFpbnMgZGF0YSBvZiB0aGUgdXNlcnMgc2hhcmluZyBhIHByb2plY3QuIE1pbmltdW0gcmVzdWx0IHdvdWxkIGJlIHRoZSBvbmx5IHRoZSBvd25lci5cclxuICAgKiBGb3IgZWFjaCB1c2VyIHJldHVybnMgdGhlIGlkIG9mIHRoZSBzaGFyaW5nIHBlcm1pc3Npb24sIG5hbWUsIGVtYWlsIGFkZHJlc3MsIHJvbGUgYW5kIHByb2ZpbGUgaW1hZ2UgdXJsLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9qZWN0SWQgVGhlIHByb2plY3QgaWQuXHJcbiAgICovXHJcbiAgc3RhdGljIGdldFByb2plY3RUZWFtRGF0YShwcm9qZWN0SWQpIHtcclxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2RyaXZlL2FwaS92My9yZWZlcmVuY2UvcGVybWlzc2lvbnMvbGlzdFxyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnJlcXVlc3Qoe1xyXG4gICAgICAncGF0aCc6IGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy8ke3Byb2plY3RJZH0vcGVybWlzc2lvbnM/ZmllbGRzPXBlcm1pc3Npb25zKGlkLGRpc3BsYXlOYW1lLGVtYWlsQWRkcmVzcyxyb2xlLHBob3RvTGluaylgLFxyXG4gICAgICAnbWV0aG9kJzogJ0dFVCcsXHJcbiAgICAgICdoZWFkZXJzJzogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cclxuICAgIH0pO1xyXG4gICAgcmVxdWVzdC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICB9LCByZWogPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZWopO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IHVzZXIgbG9nZ2VkIGluIHdpdGggR29vZ2xlLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnYXBpLmNsaWVudC5kcml2ZS5hYm91dC5nZXQoe1xyXG4gICAgICBmaWVsZHM6ICd1c2VyJ1xyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2coSlNPTi5wYXJzZShyZXMuYm9keSkudXNlcik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFNlbmRzIGFuIGVtYWlsIGluZGljYXRpbmcgdGhhdCBhIHByb2plY3QgYXMgYmVlbiBzaGFyZWQgd2l0aCB0aGUgcmVjZWl2ZXIuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNoYXJlciBOYW1lIG9mIHRoZSB1c2VyIHdobyBzaGFyZWQgdGhlIHByb2plY3QuXHJcbiAgICogQHBhcmFtIHtTdHJpbmcgfCBTdHJpbmdbXX0gcmVjaXBpZW50cyBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvciBhbiBhcnJheSBvZiByZWNpcGllbnRzIGVtYWlsIGFkZHJlc3Nlcy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvamVjdE5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb2plY3QgdGhhdCBoYXMgYmVlbiBzaGFyZWQuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb2plY3RJZCBUaGlzIGlzIHJlcXVpcmVkIHRvIGNyZWF0ZSB0aGUgdXJsIGxpbmsgdG8gdGhlIHByb2plY3QuXHJcbiAgICovXHJcbiAgc3RhdGljIHNlbmRTaGFyaW5nUHJvamVjdEVtYWlsKHNoYXJlciwgcmVjaXBpZW50cywgcHJvamVjdE5hbWUsIHByb2plY3RJZCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGZldGNoKCdodHRwczovL3VzLWNlbnRyYWwxLXRlc3RnZHByb2plY3QtMTU3MDAzNjQzOTkzMS5jbG91ZGZ1bmN0aW9ucy5uZXQvc2VuZE1haWwnLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgICAvLyBib2R5IGRhdGEgdHlwZSBtdXN0IG1hdGNoIFwiQ29udGVudC1UeXBlXCIgaGVhZGVyLlxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNoYXJlciwgcmVjaXBpZW50cywgcHJvamVjdE5hbWUsIHByb2plY3RJZCB9KVxyXG4gICAgfSk7XHJcbiAgICByZXF1ZXN0LnRoZW4ocmVzID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgLy8gaWYgKHJlcy5vayA9PT0gdHJ1ZSAmJiByZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgLy8gICBjb25zb2xlLmxvZygnU2VuZCBzdWNjZXNzZnVsLicpO1xyXG4gICAgICAvLyB9XHJcbiAgICB9LCBlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFNlbmRzIGEgcHVzaCBub3RpZmljYXRpb24gdG8gYSB1c2VyIGlkZW50aWZpZWQgYnkgaGlzL2hlciBlbWFpbCBhZGRyZXNzLlxyXG4gICAqIEl0IHVzZXMgdGhlIEZpcmViYXNlIGRhdGFiYXNlIHRvIG9idGFpbiB0aGUgZGV2aWNlIHRva2VucyBhc3NvY2lhdGVkIHRvIGVhY2ggZW1haWwgYWRkcmVzcy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBlbWFpbHMgYXJyYXkgb2YgZW1haWxzIG9mIHRoZSB1c2VycyB0byBzZW5kIHRoZSBub3RpZmljYXRpb24gdG8uXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGF1dGhvciBuYW1lIG9mIHRoZSBhdXRob3IgdGhhdCBnZW5lcmF0ZWQgdGhlIG5vdGlmaWNhdGlvbi5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGhvdG9MaW5rIHVybCBvZiB0aGUgaW1hZ2UgdG8gaWRlbnRpZnkgdGhlIG1lc3NhZ2UuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHRleHR1YWwgY29udGVudCBvZiB0aGUgbm90aWZpY2F0aW9uIG1lc3NhZ2UuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb2plY3ROYW1lIHRoZSBuYW1lIG9mIHRoZSBwcm9qZWN0IGZvciB3aGljaCB0aGUgbm90aWZpY2F0aW9uIGlzIHNlbnQuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb2plY3RJZCB0aGUgaWQgb2YgdGhlIHByb2plY3QgZm9yIHdoaWNoIHRoZSBub3RpZmljYXRpb24gaXMgc2VudC5cclxuICAgKi9cclxuICBzdGF0aWMgc2VuZE5vdGlmaWNhdGlvbihlbWFpbHMsIGF1dGhvciwgcGhvdG9MaW5rLCB0ZXh0LCBwcm9qZWN0TmFtZSwgcHJvamVjdElkKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZmV0Y2goJ2h0dHBzOi8vdXMtY2VudHJhbDEtdGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxLmNsb3VkZnVuY3Rpb25zLm5ldC9zZW5kUHVzaE5vdGlmaWNhdGlvbicsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZW1haWxzLCBhdXRob3IsIHBob3RvTGluaywgdGV4dCwgcHJvamVjdE5hbWUsIHByb2plY3RJZCB9KSAvLyBib2R5IGRhdGEgdHlwZSBtdXN0IG1hdGNoIFwiQ29udGVudC1UeXBlXCIgaGVhZGVyXHJcbiAgICB9KTtcclxuICAgIHJlcXVlc3QudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgICAvLyBpZiAocmVzLm9rID09PSB0cnVlICYmIHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdTZW5kIHN1Y2Nlc3NmdWwuJyk7XHJcbiAgICAgIC8vIH1cclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgLyoqKioqKioqKioqKioqKioqIEFQUExJQ0FUSU9OIFNQRUNJRklDIEZVTkNUSU9OUyAqKioqKioqKioqKioqKioqKiovXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBuZXcgcHJvamVjdCBmb2xkZXIgYW5kIGEgc3VidHJ1Y3R1cmUgd2l0aCBhbGwgdGhlIGNvbnRlbnRzIG9mIHRoZSBwcm9qZWN0IG9uIHRoZSBmaWxlLlxyXG4gICAqIEBwYXJhbSB7RmlsZX0gZmlsZSBUaGUgVmlzdWFsQVJRIERyYXdpbmdzIGZpbGUgY3JlYXRlZCBieSB0aGUgZXhwb3J0ZXIuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IEFwcERhdGEgVGhlIEFwcERhdGEgb2JqZWN0IHRoYXQgY29udGFpbnMgaW5mbyBhYm91dCB0aGUgYXBwIHJlc291cmNlcy5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gbGFzdFVwbG9hZGVkUHJvamVjdCBPYmplY3Qgd2l0aCB0aGUgY29udGVudHMgb2YgdGhlIGxhc3QgdXBsb2FkZWQgcHJvamVjdC5cclxuICAgKi9cclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlUHJvamVjdChmaWxlLCBBcHBEYXRhLCBsYXN0VXBsb2FkZWRQcm9qZWN0KSB7XHJcbiAgICAvLyBFcnJvciBtZXNzYWdlIHdpbGwgYmUgc3RvcmVkIGhlcmUgaWYgbmVlZGVkLlxyXG4gICAgbGV0IGVycm9yTXNnO1xyXG5cclxuICAgIGNvbnN0IGZpbGVDb250ZW50UmF3ID0gYXdhaXQgR2VuZXJpY3MucmVhZElucHV0RmlsZShmaWxlKTtcclxuICAgIGNvbnN0IGZpbGVDb250ZW50ID0gSlNPTi5wYXJzZShmaWxlQ29udGVudFJhdyk7XHJcbiAgICBjb25zb2xlLmxvZygnRmlsZSBjb250ZW50czonLCBmaWxlQ29udGVudCk7XHJcbiAgICAvLyBUT0RPOiBDaGVjayBpZiB0aGUgZmlsZSBpcyB2YWxpZC4uLiBtaW5pbXVtIHJlcXVpcmVkIGZpZWxkcz8gY29udGVudHM/Li4uXHJcblxyXG4gICAgLy8gVGhlIGNvbnRlbnRzIG9mIHRoZSBmaWxlIGlmIHZhbGlkIHdpbGwgYmUgc2F2ZWQgaW4gdGhlIGxhc3RVcGxvYWRlZFByb2plY3QgdmFyaWFibGUgdG8gYmUgdXNlZFxyXG4gICAgLy8gd2l0aG91dCB0aGUgbmVlZCB0byBmZXRjaCB0aGVtLiBUaGlzIGFsbG93cyB0byB2aWV3IHRoZSBwcm9qZWN0IGV2ZW4gd2l0aG91dCBpbnRlcm5ldCBjb25uZXhpb24uXHJcbiAgICBsYXN0VXBsb2FkZWRQcm9qZWN0Lm5hbWUgPSBmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZTtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB0aGUgaWQgb2YgdGhlIGFwcE1haW5Gb2xkZXIgaXMgaW4gdGhlIGFwcERhdGEgZ2xvYmFsIG9iamVjdC5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vbmUgdGhlbiB0cnkgdG8gZ2V0IGl0LCBhbmQgaWYgdGhlcmUgaXMgbm9uZSBvbmUgc2hvdWxkIGJlIGNyZWF0ZWQuXHJcbiAgICBpZiAoIUFwcERhdGEuYXBwTWFpbkZvbGRlcklkKSB7XHJcbiAgICAgIGNvbnN0IGFwcE1haW5Gb2xkZXJSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IG5hbWU6ICdWQXZpZXdlckRhdGEnLCBvbmx5Rm9sZGVyOiB0cnVlLCB0cmFzaGVkOiBmYWxzZSB9KTtcclxuICAgICAgY29uc3QgYXBwTWFpbkZvbGRlckRhdGEgPSBhcHBNYWluRm9sZGVyUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGFwcE1haW5Gb2xkZXJEYXRhICYmIGFwcE1haW5Gb2xkZXJEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBBcHBEYXRhLmFwcE1haW5Gb2xkZXJJZCA9IGFwcE1haW5Gb2xkZXJEYXRhWzBdLmlkO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIHJldHVybiBhIHByb21pc2UgdG8ga25vdyBpZiBzb21ldGhpbmcgd2VudCB3cm9uZy5cclxuICAgICAgICBjb25zdCBhcHBNYWluRm9sZGVyUmVzID0gYXdhaXQgdGhpcy5jcmVhdGVGb2xkZXIoJ1ZBdmlld2VyRGF0YScpO1xyXG4gICAgICAgIEFwcERhdGEuYXBwTWFpbkZvbGRlcklkID0gSlNPTi5wYXJzZShhcHBNYWluRm9sZGVyUmVzLmJvZHkpLmlkO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBhcHBGb2xkZXIgZm91bmQsIG9uZSBpcyBnb2luZyB0byBiZSBjcmVhdGVkLicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHByb2plY3RGb2xkZXJJZDtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbHJlYWR5IGEgcHJvamVjdCB3aXRoIHRoaXMgbmFtZSBpbiB0aGUgYXBwRGF0YSBvYmplY3QuXHJcbiAgICBpZiAoQXBwRGF0YS5wcm9qZWN0c0RhdGEgPT09IHVuZGVmaW5lZCB8fCAhQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZChwcm9qID0+IHByb2oubmFtZSA9PT0gZmlsZUNvbnRlbnQucHJvamVjdEluZm8udGl0bGUpKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZm9sZGVyQ3JlYXRpb25Qcm9taXNlID0gYXdhaXQgdGhpcy5jcmVhdGVGb2xkZXIoZmlsZUNvbnRlbnQucHJvamVjdEluZm8udGl0bGUsIEFwcERhdGEuYXBwTWFpbkZvbGRlcklkKTtcclxuICAgICAgICBwcm9qZWN0Rm9sZGVySWQgPSBKU09OLnBhcnNlKGZvbGRlckNyZWF0aW9uUHJvbWlzZS5ib2R5KS5pZDtcclxuICAgICAgICBsYXN0VXBsb2FkZWRQcm9qZWN0LmlkID0gcHJvamVjdEZvbGRlcklkO1xyXG4gICAgICAgIGNvbnN0IHByb2plY3RGb2xkZXJEYXRhID0geyBpZDogcHJvamVjdEZvbGRlcklkLCBuYW1lOiBmaWxlQ29udGVudC5wcm9qZWN0SW5mby50aXRsZSB9O1xyXG4gICAgICAgIGlmIChBcHBEYXRhLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YSA9IFtwcm9qZWN0Rm9sZGVyRGF0YV07XHJcbiAgICAgICAgfSBlbHNlIGlmICghQXBwRGF0YS5wcm9qZWN0c0RhdGEuZmluZChwcm9qID0+IHByb2oubmFtZSA9PT0gZmlsZUNvbnRlbnQucHJvamVjdEluZm8udGl0bGUpKSB7XHJcbiAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YS5wdXNoKHByb2plY3RGb2xkZXJEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgbGFzdFVwbG9hZGVkUHJvamVjdC5pZCA9ICd0ZW1wb3JhbCc7XHJcbiAgICAgICAgZXJyb3JNc2cgPSBKU09OLnBhcnNlKGVyci5ib2R5KS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKEFwcERhdGEucHJvamVjdHNEYXRhLmZpbmQocHJvaiA9PiBwcm9qLm5hbWUgPT09IGZpbGVDb250ZW50LnByb2plY3RJbmZvLnRpdGxlKSkge1xyXG4gICAgICAvLyBUT0RPOiBJbiBjYXNlIG5vdCBhbGwgcHJvamVjdHMgYXJlIGxvYWRlZCBob3cgdG8gY2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBvbmUgd2l0aCB0aGlzIG5hbWUgaW4gdGhlIGJhY2tlbmQ/XHJcbiAgICAgIC8vIFRPRE86IElmIHRoZXJlIGlzIG9uZSBhbHJlYWR5LCBwcm92aWRlIGFuIG9wdGlvbiB0byBwcm9wb3NlIGFub3RoZXIgbmFtZS5cclxuICAgICAgZXJyb3JNc2cgPSAnTm8gcHJvamVjdCB3YXMgY3JlYXRlZCBiZWNhdXNlIHRoZXJlIGlzIGFscmVhZHkgYSBwcm9qZWN0IHdpdGggdGhpcyBuYW1lLic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdVbmtub3duIGVycm9yIHdoaWxlIGF0dGVtcHRpbmcgdG8gY3JlYXRlIHRoZSBwcm9qZWN0IGZvbGRlci4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgdGhlIGRyYXdpbmdzIHN1YmZvbGRlciBvbmx5IGlmIHRoZXJlIGFyZSBkcmF3aW5ncyBhbmQgaWYgdGhlIHByb2plY3QgZm9sZGVyIHdhcyBjcmVhdGVkIHN1Y2Nlc2Z1bGx5LlxyXG4gICAgaWYgKHByb2plY3RGb2xkZXJJZCAmJiBmaWxlQ29udGVudC5kcmF3aW5ncykge1xyXG4gICAgICBjb25zdCBkcmF3aW5nc0ZvbGRlclByb21pc2UgPSBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlcignZHJhd2luZ3MnLCBwcm9qZWN0Rm9sZGVySWQpO1xyXG4gICAgICBjb25zdCBkcmF3aW5nc0ZvbGRlcklkID0gSlNPTi5wYXJzZShkcmF3aW5nc0ZvbGRlclByb21pc2UuYm9keSkuaWQ7XHJcbiAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW0FwcERhdGEucHJvamVjdHNEYXRhLmxlbmd0aCAtIDFdLmRyYXdpbmdzRm9sZGVySWQgPSBkcmF3aW5nc0ZvbGRlcklkO1xyXG4gICAgICAvLyBUbyBzdG9yZSBhbGwgdGhlIHVwbG9hZCBkcmF3aW5ncyBwcm9taXNlcy5cclxuICAgICAgY29uc3QgZHJhd2luZ3NQcm9taXNlcyA9IFtdO1xyXG4gICAgICAvLyBWYXJpYWJsZSBmb3IgdGhlIGxhc3QgdXBsb2FkZWQgZGF0YS5cclxuICAgICAgbGFzdFVwbG9hZGVkUHJvamVjdC5kcmF3aW5ncyA9IFtdO1xyXG4gICAgICBmb3IgKGNvbnN0IGRyYXdpbmcgaW4gZmlsZUNvbnRlbnQuZHJhd2luZ3MpIHtcclxuICAgICAgICBjb25zdCBkcmF3aW5nUHJvbWlzZSA9IHRoaXMudXBsb2FkRmlsZShmaWxlQ29udGVudC5kcmF3aW5nc1tkcmF3aW5nXSwgJ2ltYWdlL3N2Zyt4bWwnLCBkcmF3aW5nLmNvbmNhdCgnLnN2ZycpLCBkcmF3aW5nc0ZvbGRlcklkKTtcclxuICAgICAgICBkcmF3aW5nc1Byb21pc2VzLnB1c2goZHJhd2luZ1Byb21pc2UpO1xyXG4gICAgICAgIC8vIFN0b3JlIG9uIGxhc3RVcGxvYWRlZFByb2plY3QgdmFyaWFibGUuXHJcbiAgICAgICAgY29uc3QgZHJhd2luZ09iaiA9IG5ldyBEcmF3aW5nKGRyYXdpbmcsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgZHJhd2luZ09iai5zZXRDb250ZW50KGZpbGVDb250ZW50LmRyYXdpbmdzW2RyYXdpbmddKTtcclxuICAgICAgICBsYXN0VXBsb2FkZWRQcm9qZWN0LmRyYXdpbmdzLnB1c2goZHJhd2luZ09iaik7XHJcbiAgICAgIH1cclxuICAgICAgLy8gUmVxdWlyZWQgdG8gZGVjb2RlIHRoZSBib2R5IG9mIHRoZSByZXNwb25zZS5cclxuICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZHJhd2luZ3NQcm9taXNlcykudGhlbihyZXNwb25zZXMgPT4ge1xyXG4gICAgICAgIHJlc3BvbnNlcy5mb3JFYWNoKChyZXMsIGkpID0+IHtcclxuICAgICAgICAgIGlmIChyZXMub2sgPT09IHRydWUgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgIHJlcy5ib2R5LmdldFJlYWRlcigpLnJlYWQoKS50aGVuKCh7IHZhbHVlLCBkb25lIH0pID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBpZCA9IEpTT04ucGFyc2UoZGVjb2Rlci5kZWNvZGUodmFsdWUpKS5pZDtcclxuICAgICAgICAgICAgICAvLyBTZXQgdGhlIGlkIG9mIHRoZSBkcmF3aW5nIGZpbGUgdGhhdCBoYXMgYmVlbiBjcmVhdGVkLlxyXG4gICAgICAgICAgICAgIGxhc3RVcGxvYWRlZFByb2plY3QuZHJhd2luZ3NbaV0uaWQgPSBpZDtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRHJhd2luZyB3aXRoIGlkICcgKyBpZCArICcgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5LicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSB0aGUgZWxlbWVudHNEYXRhIHN1YmZvbGRlciBvbmx5IGlmIHRoZXJlIGlzIGRhdGEgYW5kIGlmIHRoZSBwcm9qZWN0IGZvbGRlciB3YXMgY3JlYXRlZCBzdWNjZXNmdWxseS5cclxuICAgIGlmIChwcm9qZWN0Rm9sZGVySWQgJiYgZmlsZUNvbnRlbnQuZWxlbWVudHNEYXRhKSB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnRzRGF0YUZvbGRlclByb21pc2UgPSBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlcignZWxlbWVudHNEYXRhJywgcHJvamVjdEZvbGRlcklkKTtcclxuICAgICAgY29uc3QgZWxlbWVudHNEYXRhRm9sZGVySWQgPSBKU09OLnBhcnNlKGVsZW1lbnRzRGF0YUZvbGRlclByb21pc2UuYm9keSkuaWQ7XHJcbiAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW0FwcERhdGEucHJvamVjdHNEYXRhLmxlbmd0aCAtIDFdLmVsZW1lbnRzRGF0YUZvbGRlcklkID0gZWxlbWVudHNEYXRhRm9sZGVySWQ7XHJcbiAgICAgIC8vIFN0b3JlIG9uIHRoZSBsYXN0IHVwbG9hZGVkIHZhcmlhYmxlLlxyXG4gICAgICBsYXN0VXBsb2FkZWRQcm9qZWN0LmVsZW1lbnRzRGF0YSA9IGZpbGVDb250ZW50LmVsZW1lbnRzRGF0YTtcclxuICAgICAgLy8gVXBsb2FkIHRoZSBlbGVtZW50cyBkYXRhIGZpbGVzLlxyXG4gICAgICBjb25zdCBlbGVtZW50c0RhdGFQcm9taXNlcyA9IFtdO1xyXG4gICAgICBmb3IgKGNvbnN0IGVsZW1lbnREYXRhIGluIGZpbGVDb250ZW50LmVsZW1lbnRzRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnREYXRhUHJvbWlzZSA9IHRoaXMudXBsb2FkRmlsZShKU09OLnN0cmluZ2lmeShmaWxlQ29udGVudC5lbGVtZW50c0RhdGFbZWxlbWVudERhdGFdKSwgJ2FwcGxpY2F0aW9uL2pzb24nLCBlbGVtZW50RGF0YS5jb25jYXQoJy5qc29uJyksIGVsZW1lbnRzRGF0YUZvbGRlcklkKTtcclxuICAgICAgICBlbGVtZW50c0RhdGFQcm9taXNlcy5wdXNoKGVsZW1lbnREYXRhUHJvbWlzZSk7XHJcbiAgICAgIH1cclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoZWxlbWVudHNEYXRhUHJvbWlzZXMpXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgIC8vIFRPRE86IElzIGl0IG5lY2Vzc2FyeSB0byBjaGVjayBpZiBlYWNoIHJlc3BvbnNlIHdhcyAocmVzLm9rID09PSB0cnVlICYmIHJlcy5zdGF0dXMgPT09IDIwMCk/XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnRWxlbWVudHNEYXRhIGZpbGVzIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseS4nKTtcclxuICAgICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86IENoZWNrIGluIG1vcmUgZGV0YWlsIGlmIHRoZSBwcm9qZWN0IHdhcyBjcmVhdGVkIHN1Y2Nlc3NmdWxseS5cclxuICAgIGlmIChwcm9qZWN0Rm9sZGVySWQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ1VwbG9hZCBzdWNjZXNzZnVsLiBVcGxvYWRlZCAnICsgT2JqZWN0LmtleXMoZmlsZUNvbnRlbnQuZHJhd2luZ3MpLmxlbmd0aCArICcgZHJhd2luZ3MuJyk7XHJcbiAgICAgIHJldHVybiB7IGlkOiBwcm9qZWN0Rm9sZGVySWQsIG5hbWU6IGZpbGVDb250ZW50LnByb2plY3RJbmZvLnRpdGxlIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBUT0RPOiBJZiB0aGUgcHJvamVjdCB1cGxvYWQgZmFpbHMgdGhlIHByb2plY3QgZm9sZGVyLCBpZiBjcmVhdGVkLCBzaG91bGQgYmUgZGVsZXRlZC5cclxuICAgICAgLy8gVE9ETzogQ3JlYXRlIG1lc3NhZ2Ugd2l0aCBjb250ZW50OiBSZXRyeSBhZ2FpbiBvciB3b3JrIG9mZmxpbmUgd2l0aCB0aGUgdXBsb2FkZWQgcHJvamVjdC5cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignUHJvamVjdCB1cGxvYWQgZmFpbGVkLiAnICsgZXJyb3JNc2cpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBMaXN0cyB0aGUgcHJvamVjdCBpdGVtcy5cclxuICAgKiBUT0RPOiBMaW1pdCB0aGUgYW1vdW50IG9mIHByb2plY3RzIHRvIGZldGNoLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBBcHBEYXRhIFRoZSBBcHBEYXRhIG9iamVjdCB0aGF0IGNvbnRhaW5zIGluZm8gYWJvdXQgdGhlIGFwcCByZXNvdXJjZXMuXHJcbiAgICovXHJcbiAgc3RhdGljIGFzeW5jIGxpc3RQcm9qZWN0SXRlbXMoQXBwRGF0YSkge1xyXG4gICAgLy8gR2V0cyB0aGUgaWQgb2YgdGhlIGFwcCBmb2xkZXIgdXNpbmcgaXRzIG5hbWUgaWYgaXQgd2FzIG5vdCBhbHJlYWR5IGluIHRoZSBhcHBEYXRhIG9iamVjdC5cclxuICAgIGlmICghQXBwRGF0YS5hcHBNYWluRm9sZGVySWQpIHtcclxuICAgICAgY29uc3QgYXBwTWFpbkZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgbmFtZTogJ1ZBdmlld2VyRGF0YScsIG9ubHlGb2xkZXI6IHRydWUsIHRyYXNoZWQ6IGZhbHNlIH0pO1xyXG4gICAgICBjb25zdCBhcHBNYWluRm9sZGVyRGF0YSA9IGFwcE1haW5Gb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAoYXBwTWFpbkZvbGRlckRhdGEgJiYgYXBwTWFpbkZvbGRlckRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIEFwcERhdGEuYXBwTWFpbkZvbGRlcklkID0gYXBwTWFpbkZvbGRlckRhdGFbMF0uaWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGFwcEZvbGRlciBmb3VuZC4nKTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdObyBhcHBGb2xkZXIgZm91bmQuJykpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0cyB0aGUgcHJvamVjdCBmb2xkZXJzIG5hbWVzIGFuZCBpZHMuXHJcbiAgICBjb25zdCBwcm9qZWN0c0ZvbGRlcnNSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBBcHBEYXRhLmFwcE1haW5Gb2xkZXJJZCwgb25seUZvbGRlcjogdHJ1ZSwgZXhjbHVkZU5hbWU6ICdhcHBTZXR0aW5ncycsIHRyYXNoZWQ6IGZhbHNlIH0sICdzaGFyZWQsIHBlcm1pc3Npb25zJyk7XHJcbiAgICBsZXQgbmV3UHJvamVjdHM7XHJcbiAgICBjb25zdCBwcm9qZWN0c0ZvbGRlcnNEYXRhID0gcHJvamVjdHNGb2xkZXJzUmVzLnJlc3VsdC5maWxlcztcclxuICAgIGlmIChwcm9qZWN0c0ZvbGRlcnNEYXRhICYmIHByb2plY3RzRm9sZGVyc0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICBpZiAoQXBwRGF0YS5wcm9qZWN0c0RhdGEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIG5ld1Byb2plY3RzID0gcHJvamVjdHNGb2xkZXJzRGF0YTtcclxuICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YSA9IG5ld1Byb2plY3RzO1xyXG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoQXBwRGF0YS5wcm9qZWN0c0RhdGEpKSB7XHJcbiAgICAgICAgbmV3UHJvamVjdHMgPSBwcm9qZWN0c0ZvbGRlcnNSZXMucmVzdWx0LmZpbGVzLmZpbHRlcihuZXdQcm9qID0+IEFwcERhdGEucHJvamVjdHNEYXRhLmZpbmQocHJvaiA9PiBwcm9qLmlkID09PSBuZXdQcm9qLmlkKSA9PT0gdW5kZWZpbmVkKTtcclxuICAgICAgICBuZXdQcm9qZWN0cy5mb3JFYWNoKHByb2ogPT4ge1xyXG4gICAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGEucHVzaChwcm9qKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc29sZS5hc3NlcnQoQXBwRGF0YS5wcm9qZWN0c0RhdGEubGVuZ3RoID4gMCwgJ1RoZXJlIGFyZSBubyBwcm9qZWN0IGZvbGRlcnMuJyk7XHJcblxyXG4gICAgLy8gR2V0cyB0aGUgaWQgb2YgdGhlIGFwcFNldHRpbmdzIGZvbGRlci5cclxuICAgIGNvbnN0IGFwcFNldHRGb2xkZXJSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBBcHBEYXRhLmFwcE1haW5Gb2xkZXJJZCwgbmFtZTogJ2FwcFNldHRpbmdzJywgb25seUZvbGRlcjogdHJ1ZSB9KTtcclxuICAgIGNvbnN0IGFwcFNldHRGb2xkZXJEYXRhID0gYXBwU2V0dEZvbGRlclJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICBpZiAoYXBwU2V0dEZvbGRlckRhdGEgJiYgYXBwU2V0dEZvbGRlckRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICBBcHBEYXRhLmFwcFNldHRpbmdzRm9sZGVySWQgPSBhcHBTZXR0Rm9sZGVyRGF0YVswXS5pZDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdObyBzZXR0aW5ncyBmb2xkZXIgZm91bmQuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0cyB0aGUgaWQgb2YgdGhlIHByb2plY3RzVGh1bWJzIGZvbGRlci5cclxuICAgIGNvbnN0IHRodW1ic0ZvbGRlclJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IEFwcERhdGEuYXBwU2V0dGluZ3NGb2xkZXJJZCwgbmFtZTogJ3Byb2plY3RzVGh1bWJzJywgb25seUZvbGRlcjogdHJ1ZSB9KTtcclxuICAgIGNvbnN0IHRodW1ic0ZvbGRlckRhdGEgPSB0aHVtYnNGb2xkZXJSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgaWYgKHRodW1ic0ZvbGRlckRhdGEgJiYgdGh1bWJzRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIEFwcERhdGEudGh1bWJzRm9sZGVySWQgPSB0aHVtYnNGb2xkZXJEYXRhWzBdLmlkO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIHRodW1icyBmb2xkZXIgZm91bmQuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0cyB0aGUgZGF0YSBvZiBlYWNoIHRodW1ibmFpbCBhbmQgYXNzaWduIGl0IHRvIGl0cyBjb3JyZXNwb25kaW5nIHByb2plY3QuXHJcbiAgICBjb25zdCBpbWdSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBBcHBEYXRhLnRodW1ic0ZvbGRlcklkIH0pO1xyXG4gICAgY29uc3QgaW1nRGF0YSA9IGltZ1Jlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICBBcHBEYXRhLnByb2plY3RzRGF0YS5mb3JFYWNoKHByb2ogPT4ge1xyXG4gICAgICBjb25zdCBwcm9qZWN0VGh1bWJEYXRhID0gaW1nRGF0YS5maW5kKGltZyA9PiBwcm9qLmlkID09PSBpbWcubmFtZS5yZXBsYWNlKCcuanBnJywgJycpKTtcclxuICAgICAgaWYgKHByb2plY3RUaHVtYkRhdGEpIHtcclxuICAgICAgICBwcm9qLnRodW1iSWQgPSBwcm9qZWN0VGh1bWJEYXRhLmlkO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUuYXNzZXJ0KGltZ0RhdGEubGVuZ3RoID4gMCwgJ1RoZXJlIGFyZSBubyB0aHVtYm5haWxzLicpO1xyXG5cclxuICAgIC8vIFRPRE86IE1pc3NpbmcgdGhlIG1hbmFnZW1lbnQgb2YgYW4gZXJyb3Igd2hpbGUgbGlzdGluZyB0aGUgcHJvamVjdHMuXHJcblxyXG4gICAgLy8gSWYgYWxsIHRoZSByZXF1aXJlZCBkYXRhIGFib3V0IHRoZSBwcm9qZWN0cyB3YXMgZmV0Y2hlZCBzdWNjZXNzZnVsbHkgaXQgaXMgcmV0dXJuZWQuXHJcbiAgICByZXR1cm4gbmV3UHJvamVjdHM7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2hlcyB0aGUgcHJvamVjdCBjb250ZW50cy4gU3BlY2lmaWNhbGx5IHRoZSBpZCBhbmQgdGhlIG5hbWUgb2YgYWxsIHRoZSBkcmF3aW5ncyBhbmQgZWxlbWVudHNEYXRhIGZpbGVzLlxyXG4gICAqIEl0IG9ubHkgZmV0Y2hlcyB0aGUgcmVzb3VyY2VzIHRoYXQgYXJlIG5vdCBhbHJlYWR5IGluIHRoZSBhcHBEYXRhIG9iamVjdC5cclxuICAgKiBUT0RPOiBJbXByb3ZlIHRoZSBkZXRlY3Rpb24gb2YgcmVzb3VyY2VzIHRoYXQgc2hvdWxkIGJlIGZldGNoZWQuIEN1cnJlbnRseSBpZiB0aGVyZSBpcyBhbHJlYWR5IGFueSBwcm9qZWN0XHJcbiAgICogZGF0YSBmb3IgdGhhdCBjYXRlZ29yeSAoZS5nOiBkcmF3aW5ncykgaW4gdGhlIGZyb250IGl0IGRvZW5zdCBmZXRjaCBhbnkgbmV3IGZpbGUgb2YgdGhhdCBjYXRlZ29yeS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvamVjdElkIFRoZSBpZCBvZiB0aGUgcHJvamVjdC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gQXBwRGF0YSBUaGUgQXBwRGF0YSBvYmplY3QgdGhhdCBjb250YWlucyBpbmZvIGFib3V0IHRoZSBhcHAgcmVzb3VyY2VzLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBhc3luYyBmZXRjaFByb2plY3QocHJvamVjdElkLCBBcHBEYXRhKSB7XHJcbiAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgcHJvamVjdDogJyArIHByb2plY3RJZCk7XHJcblxyXG4gICAgbGV0IHByb2plY3RJbmRleDtcclxuICAgIC8vIEluIGNhc2UgdGhlIHByb2plY3RzRGF0YSBlbnRyeSBpcyBzdGlsbCB1bmRlZmluZWQgdGhpcyB3aWxsIGJlIHRoZSBmaXJzdCBwcm9qZWN0IHRvIGJlIGZldGNoZWQuXHJcbiAgICAvLyBUaGlzIHdpbGwgaGFwcGVuIHdoZW4gc29tZW9uZSBhY2Nlc3MgYSBwcm9qZWN0IGRpcmVjdGx5IHdpdGggaXRzIGlkIGluIHRoZSB1cmwuXHJcbiAgICBpZiAoQXBwRGF0YS5wcm9qZWN0c0RhdGEgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBjb25zdCBwcm9qZWN0TmFtZVJlcyA9IGF3YWl0IHRoaXMuZ2V0RmlsZURhdGEocHJvamVjdElkLCAnbmFtZSwgdHJhc2hlZCcpO1xyXG4gICAgICBpZiAoIUpTT04ucGFyc2UocHJvamVjdE5hbWVSZXMuYm9keSkudHJhc2hlZCkge1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhID0gW3sgaWQ6IHByb2plY3RJZCwgbmFtZTogSlNPTi5wYXJzZShwcm9qZWN0TmFtZVJlcy5ib2R5KS5uYW1lIH1dO1xyXG4gICAgICAgIHByb2plY3RJbmRleCA9IDA7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAocHJvamVjdElkICE9PSAndGVtcG9yYWwnKSB7XHJcbiAgICAgIHByb2plY3RJbmRleCA9IEFwcERhdGEucHJvamVjdHNEYXRhLmZpbmRJbmRleChwcm9qID0+IHByb2ouaWQgPT09IHByb2plY3RJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0cyB0aGUgcHJvamVjdCB0ZWFtIG1lbWJlcnMgZGF0YSBhbmQgYWRkcyBpdCB0byB0aGUgY29ycmVzcG9uZGluZyBwcm9qZWN0RGF0YSBvYmplY3QuXHJcbiAgICBpZiAocHJvamVjdEluZGV4ID49IDAgJiYgIUFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0ucGVybWlzc2lvbnMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwcm9qUGVybWlzc2lvbnNSZXMgPSBhd2FpdCB0aGlzLmdldFByb2plY3RUZWFtRGF0YShwcm9qZWN0SWQpO1xyXG4gICAgICAgIGNvbnN0IHByb2pQZXJtaXNzaW9uc0RhdGEgPSBwcm9qUGVybWlzc2lvbnNSZXMucmVzdWx0LnBlcm1pc3Npb25zO1xyXG4gICAgICAgIGlmIChwcm9qUGVybWlzc2lvbnNEYXRhICYmIHByb2pQZXJtaXNzaW9uc0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5wZXJtaXNzaW9ucyA9IHByb2pQZXJtaXNzaW9uc0RhdGE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBwcm9qZWN0IHRlYW0gbWVtYmVycyBmb3VuZC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGZldGNoaW5nIHRoZSB0ZWFtIG1lbWJlcnMgZGF0YS4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgZm9yIHByb2plY3RTZXR0aW5ncy5qc29uIGZpbGUgaW4gdGhlIGFwcERhdGEgeWV0IGZldGNoIGl0LlxyXG4gICAgaWYgKHByb2plY3RJbmRleCA+PSAwICYmICFBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLnByb2pTZXR0aW5ncykge1xyXG4gICAgICBjb25zdCBwcm9qU2V0dGluZ3NSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBwcm9qZWN0SWQsIG5hbWU6ICdwcm9qZWN0U2V0dGluZ3MuanNvbicgfSk7XHJcbiAgICAgIGNvbnN0IHByb2pTZXR0aW5nc0RhdGEgPSBwcm9qU2V0dGluZ3NSZXMucmVzdWx0LmZpbGVzO1xyXG4gICAgICBpZiAocHJvalNldHRpbmdzRGF0YSAmJiBwcm9qU2V0dGluZ3NEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBwcm9qU2V0dGluZ3NDb250ZW50UmVzID0gYXdhaXQgdGhpcy5nZXRGaWxlQ29udGVudChwcm9qU2V0dGluZ3NEYXRhWzBdLmlkKTtcclxuICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLnByb2pTZXR0aW5ncyA9IHByb2pTZXR0aW5nc0NvbnRlbnRSZXMuYm9keTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gcHJvamVjdFNldHRpbmdzLmpzb24gZm91bmQuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGVyZSBpcyBubyBkYXRhIGZvciBkcmF3aW5ncyBhbHJlYWR5IGZldGNoIHRoZSBpZCBvZiB0aGUgZHJhd2luZ3MgZm9sZGVyIGFuZCB0aGUgbmFtZSBhbmQgaWQgb2YgZWFjaCBvbmUuXHJcbiAgICBpZiAocHJvamVjdEluZGV4ID49IDAgJiYgIUFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uZHJhd2luZ3MpIHtcclxuICAgICAgY29uc3QgZHJhd2luZ3NGb2xkZXJSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBwcm9qZWN0SWQsIG9ubHlGb2xkZXI6IHRydWUsIG5hbWU6ICdkcmF3aW5ncycgfSk7XHJcbiAgICAgIGNvbnN0IGRyYXdpbmdzRm9sZGVyRGF0YSA9IGRyYXdpbmdzRm9sZGVyUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGRyYXdpbmdzRm9sZGVyRGF0YSAmJiBkcmF3aW5nc0ZvbGRlckRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGRyYXdpbmdzUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogZHJhd2luZ3NGb2xkZXJEYXRhWzBdLmlkLCB0cmFzaGVkOiBmYWxzZSB9KTtcclxuICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmRyYXdpbmdzID0gW107XHJcbiAgICAgICAgZHJhd2luZ3NSZXMucmVzdWx0LmZpbGVzLmZvckVhY2goZHJhd2luZyA9PiB7XHJcbiAgICAgICAgICBpZiAoZHJhd2luZy5uYW1lID09PSAnZHJhd2luZ3NTdHlsZXMuY3NzJykge1xyXG4gICAgICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmRyYXdpbmdzU3R5bGVzSWQgPSBkcmF3aW5nLmlkO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5kcmF3aW5ncy5wdXNoKG5ldyBEcmF3aW5nKGRyYXdpbmcubmFtZS5yZXBsYWNlKC8uc3ZnJC8sICcnKSwgZHJhd2luZy5pZCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBkcmF3aW5ncyBmb2xkZXIgZm91bmQuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGVyZSBpcyBubyBkYXRhIGZvciBlbGVtZW50c0RhdGEgYWxyZWFkeSBmZXRjaCB0aGUgaWQgb2YgdGhlIGVsZW1lbnRzRGF0YSBmb2xkZXIgYW5kIHRoZSBuYW1lIGFuZCBpZCBvZiBlYWNoIG9uZS5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCAmJiAhQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5lbGVtZW50c0RhdGEpIHtcclxuICAgICAgY29uc3QgZWxlbWVudHNEYXRhRm9sZGVyUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogcHJvamVjdElkLCBvbmx5Rm9sZGVyOiB0cnVlLCBuYW1lOiAnZWxlbWVudHNEYXRhJyB9KTtcclxuICAgICAgY29uc3QgZWxlbWVudHNEYXRhRm9sZGVyRGF0YSA9IGVsZW1lbnRzRGF0YUZvbGRlclJlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChlbGVtZW50c0RhdGFGb2xkZXJEYXRhICYmIGVsZW1lbnRzRGF0YUZvbGRlckRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzRGF0YVJlcyA9IGF3YWl0IHRoaXMubGlzdEZpbGVzKHsgcGFyZW50SWQ6IGVsZW1lbnRzRGF0YUZvbGRlckRhdGFbMF0uaWQsIHRyYXNoZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgIEFwcERhdGEucHJvamVjdHNEYXRhW3Byb2plY3RJbmRleF0uZWxlbWVudHNEYXRhID0gZWxlbWVudHNEYXRhUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gZWxlbWVudHNEYXRhIGZvbGRlciBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgZm9yIGNvbW1lbnRzIGluIHRoZSBhcHBEYXRhIHlldCBmZXRjaCBpdC5cclxuICAgIGlmIChwcm9qZWN0SW5kZXggPj0gMCAmJiAhQXBwRGF0YS5wcm9qZWN0c0RhdGFbcHJvamVjdEluZGV4XS5jb21tZW50cykge1xyXG4gICAgICAvLyBUT0RPOiBDb3VsZCBiZSB0aGF0IHRoZSBpZCBvZiB0aGUgZmlsZSBpcyBhbHJlYWR5IGluIHRoZSBwcm9qZWN0c0RhdGEgYW5kIGxpc3RGaWxlcyBpcyBubyBuZWNlc3Nhcnk/XHJcbiAgICAgIGNvbnN0IGNvbW1lbnRzUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogcHJvamVjdElkLCBuYW1lOiAnY29tbWVudHMuanNvbicsIHRyYXNoZWQ6IGZhbHNlIH0pO1xyXG4gICAgICBjb25zdCBjb21tZW50c0RhdGEgPSBjb21tZW50c1Jlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIGlmIChjb21tZW50c0RhdGEgJiYgY29tbWVudHNEYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmNvbW1lbnRzRmlsZUlkID0gY29tbWVudHNEYXRhWzBdLmlkO1xyXG4gICAgICAgIGNvbnN0IGNvbW1lbnRzQ29udGVudFJlcyA9IGF3YWl0IHRoaXMuZ2V0RmlsZUNvbnRlbnQoY29tbWVudHNEYXRhWzBdLmlkKTtcclxuICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmNvbW1lbnRzID0gSlNPTi5wYXJzZShjb21tZW50c0NvbnRlbnRSZXMuYm9keSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGNvbW1lbnRzLmpzb24gZmlsZSBmb3VuZC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgZm9yIGltYWdlcyBhbHJlYWR5IGZldGNoIHRoZSBpZCBvZiB0aGUgaW1hZ2VzIGZvbGRlciBhbmQgdGhlIG5hbWUgYW5kIGlkIG9mIGVhY2ggb25lLlxyXG4gICAgaWYgKHByb2plY3RJbmRleCA+PSAwICYmICFBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmltYWdlcykge1xyXG4gICAgICBjb25zdCBpbWFnZXNGb2xkZXJSZXMgPSBhd2FpdCB0aGlzLmxpc3RGaWxlcyh7IHBhcmVudElkOiBwcm9qZWN0SWQsIG9ubHlGb2xkZXI6IHRydWUsIG5hbWU6ICdpbWFnZXMnIH0pO1xyXG4gICAgICBjb25zdCBpbWFnZXNGb2xkZXJEYXRhID0gaW1hZ2VzRm9sZGVyUmVzLnJlc3VsdC5maWxlcztcclxuICAgICAgaWYgKGltYWdlc0ZvbGRlckRhdGEgJiYgaW1hZ2VzRm9sZGVyRGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VzUmVzID0gYXdhaXQgdGhpcy5saXN0RmlsZXMoeyBwYXJlbnRJZDogaW1hZ2VzRm9sZGVyRGF0YVswXS5pZCB9KTtcclxuICAgICAgICBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdLmltYWdlcyA9IGltYWdlc1Jlcy5yZXN1bHQuZmlsZXM7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGltYWdlcyBmb2xkZXIgZm91bmQuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocHJvamVjdEluZGV4ID49IDApIHtcclxuICAgICAgY29uc29sZS5sb2coJ1Byb2plY3QgcmVzb3VyY2VzIGZldGNoZWQgc3VjY2VzZnVsbHkuJyk7XHJcbiAgICAgIHJldHVybiBBcHBEYXRhLnByb2plY3RzRGF0YVtwcm9qZWN0SW5kZXhdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignUHJvamVjdCByZXNvdXJjZXMgY291bGQgbm90IGJlIGZldGNoZWQuJykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0iLCJpbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ29tbWVudCB7XHJcbiAgZWxlbWVudHNJZHM6IHN0cmluZ1tdID0gW107XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG4gIG1lbnRpb25zOiBzdHJpbmdbXTtcclxuICBpZDogc3RyaW5nO1xyXG4gIHJlcHJlc2VudGF0aW9uczogU1ZHRWxlbWVudFtdID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnRzSWRzOiBzdHJpbmdbXSwgY29udGVudDogc3RyaW5nLCBtZW50aW9uczogc3RyaW5nW10gPSBbXSkge1xyXG4gICAgdGhpcy5lbGVtZW50c0lkcy5wdXNoKC4uLmVsZW1lbnRzSWRzKTtcclxuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB0aGlzLm1lbnRpb25zID0gbWVudGlvbnM7XHJcbiAgICB0aGlzLmlkID0gJ2MtJyArIEdlbmVyaWNzLnV1aWR2NCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhbiBzdmcgcmVwcmVzZW50YXRpb24gZm9yIHRoZSBjb21tZW50IG9uIHRoZSBwcm92aWRlZCBlbGVtZW50IGFuZFxyXG4gICAqIGFkZHMgaXQgdG8gdGhlIGdyb3VwIG9mIGNvbW1lbnQgcmVwcmVzZW50YXRpb25zIG9uIHRoZSBzdmcgZHJhd2luZy5cclxuICAgKiBAcGFyYW0ge1NWR0dFbGVtZW50fSBjb21tZW50c0dyb3VwXHJcbiAgICogQHBhcmFtIHtTVkdFbGVtZW50fSBlbGVtZW50IFxyXG4gICAqL1xyXG4gIC8vIGNyZWF0ZVJlcHJlc2VudGF0aW9uKGNvbW1lbnRzR3JvdXAsIGVsZW1lbnQpIHtcclxuICAvLyAgIGNvbnN0IHJlcHJlc2VudGF0aW9uID0gR2VuZXJpY3MuY3JlYXRlQkJveChlbGVtZW50LCAxNSwgMTUpO1xyXG4gIC8vICAgLy8gVE9ETzogdGhlIHN0eWxlIHZhbHVlcyB3aWxsIGNvbWUgZnJvbSB0aGUgYXBwIHNldHRpbmdzIGZpbGUgaWYgYW55LlxyXG4gIC8vICAgcmVwcmVzZW50YXRpb24uc2V0QXR0cmlidXRlKCdzdHlsZScsICdmaWxsOm5vbmU7c3Ryb2tlOiNlMjJhMmE7c3Ryb2tlLXdpZHRoOjhweDtzdHJva2UtZGFzaGFycmF5OjE4OycpO1xyXG4gIC8vICAgcmVwcmVzZW50YXRpb24uZGF0YXNldC5pZCA9IHRoaXMuaWQ7XHJcbiAgLy8gICBjb21tZW50c0dyb3VwLmFwcGVuZENoaWxkKHJlcHJlc2VudGF0aW9uKTtcclxuICAvLyAgIHRoaXMucmVwcmVzZW50YXRpb25zLnB1c2gocmVwcmVzZW50YXRpb24pO1xyXG4gIC8vIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVwbGFjZXMgdGhlIHByZXZpb3VzIG9uZVxyXG4gICAqL1xyXG4gIGNyZWF0ZVJlcHJlc2VudGF0aW9uKGNvbW1lbnRzR3JvdXA6IFNWR0dFbGVtZW50LCBlbGVtZW50czogU1ZHR0VsZW1lbnRbXSkge1xyXG4gICAgLy8gVE9ETyBuZXcgZnVuY3Rpb25cclxuICAgIGNvbnN0IHJlY3RhbmdsZXMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgcmVjdGFuZ2xlcy5wdXNoKEdlbmVyaWNzLmNyZWF0ZUJCb3gyKGVsZW1lbnRzW2ldLCAxNSkpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VnbWVudHMgPSBHZW5lcmljcy5yZWN0YW5nbGVzU2lsaG91ZXR0ZShyZWN0YW5nbGVzKTtcclxuICAgIGNvbnN0IHJlcHJlc2VudGF0aW9uID0gR2VuZXJpY3Muc3ZnUGF0aEZyb21MaW5lcyhzZWdtZW50cyk7XHJcbiAgICByZXByZXNlbnRhdGlvbi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZpbGw6bm9uZTtzdHJva2U6I2UyMmEyYTtzdHJva2Utd2lkdGg6OHB4O3N0cm9rZS1kYXNoYXJyYXk6MzA7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7Jyk7XHJcbiAgICByZXByZXNlbnRhdGlvbi5kYXRhc2V0LmlkID0gdGhpcy5pZDtcclxuICAgIGNvbW1lbnRzR3JvdXAuYXBwZW5kQ2hpbGQocmVwcmVzZW50YXRpb24pO1xyXG4gICAgdGhpcy5yZXByZXNlbnRhdGlvbnMucHVzaChyZXByZXNlbnRhdGlvbik7XHJcbiAgfVxyXG5cclxuXHJcblxyXG5cclxufSIsImV4cG9ydCBjbGFzcyBNYWluUGFuZWwge1xyXG4gIGNvbnN0cnVjdG9yKHBhbmVsc1N0b3JhZ2UsIFdvcmtzcGFjZSkge1xyXG4gICAgdGhpcy5wYW5lbHNTdG9yYWdlID0gcGFuZWxzU3RvcmFnZTtcclxuXHJcbiAgICAvLyBDcmVhdGlvbiBvZiBIVE1MIHN0cnVjdHVyZS5cclxuICAgIHRoaXMucGFuZWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbWFpblBhbmVsJywgJ3JpZ2h0Jyk7XHJcbiAgICB0aGlzLnBhbmVsR3JpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5wYW5lbEdyaXAuY2xhc3NMaXN0LmFkZCgncGFuZWwtZ3JpcCcpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnBhbmVsR3JpcCk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRlbnQuY2xhc3NMaXN0LmFkZCgncGFuZWwtY29udGVudCcpO1xyXG4gICAgdGhpcy5wYW5lbEhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5wYW5lbEhlYWRlci5jbGFzc0xpc3QuYWRkKCdwYW5lbC1oZWFkZXInKTtcclxuICAgIHRoaXMucGFuZWxCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnBhbmVsQm9keS5jbGFzc0xpc3QuYWRkKCdwYW5lbC1ib2R5Jyk7XHJcbiAgICB0aGlzLnBhbmVsRm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnBhbmVsRm9vdGVyLmNsYXNzTGlzdC5hZGQoJ3BhbmVsLWZvb3RlcicpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRlbnQuYXBwZW5kQ2hpbGQodGhpcy5wYW5lbEhlYWRlcik7XHJcbiAgICB0aGlzLnBhbmVsQ29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnBhbmVsQm9keSk7XHJcbiAgICB0aGlzLnBhbmVsQ29udGVudC5hcHBlbmRDaGlsZCh0aGlzLnBhbmVsRm9vdGVyKTtcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5wYW5lbENvbnRlbnQpO1xyXG5cclxuXHJcbiAgICAvLyBUT0RPIFJlbW92ZSB0aGlzIGV2ZW50IGxpc3RlbmVycyB3aGVuIHRoZSBwYW5lbCBpcyBkZWxldGVkLlxyXG4gICAgV29ya3NwYWNlLndvcmtzcGFjZUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcclxuICAgICAgaWYgKHRoaXMucmVzaXppbmdXaWR0aCkge1xyXG4gICAgICAgIHRoaXMucmVzaXplV2lkdGgoZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXNpemluZ0hlaWdodCkge1xyXG4gICAgICAgIHRoaXMucmVzaXplSGVpZ2h0KGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIFdvcmtzcGFjZS53b3Jrc3BhY2VDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHsgLy8gQWRkIGFsc28gdGhlIHNhbWUgZm9yIG1vdXNlbGVhdmU/XHJcbiAgICAgIHRoaXMucmVzaXppbmdXaWR0aCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnJlc2l6aW5nSGVpZ2h0ID0gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFjdGl2ZVNlY3Rpb247XHJcbiAgICB0aGlzLmlzT3BlbjtcclxuICAgIHRoaXMucGFuZWxTaWRlO1xyXG4gICAgdGhpcy5zZWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5zZXRBY3RpdmUgPSB0aGlzLnNldEFjdGl2ZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5wYW5lbEhlYWRlci5vbmNsaWNrID0gZSA9PiB7XHJcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGUudGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLWJ0bl0nKTtcclxuICAgICAgaWYgKGJ1dHRvbiAmJiAhYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpXHJcbiAgICAgICAgdGhpcy5zZXRBY3RpdmUoYnV0dG9uLmlubmVyVGV4dCk7XHJcbiAgICB9O1xyXG4gICAgLy8gTWVkaWEgYnJlYWtwb2ludCB0byBkZXRlcm1pbmUgdGhlIHBhbmVsIHBvc2l0aW9uLlxyXG4gICAgdGhpcy5tZWRpdW1CcmVha3BvaW50ID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDcwMHB4KScpO1xyXG4gICAgdGhpcy5wYW5lbFBvc2l0b24gPSB0aGlzLnBhbmVsUG9zaXRvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5tZWRpdW1CcmVha3BvaW50LmFkZExpc3RlbmVyKHRoaXMucGFuZWxQb3NpdG9uKTtcclxuICAgIHRoaXMucGFuZWxTaWRlcyA9IHtcclxuICAgICAgcmlnaHQ6ICdyJyxcclxuICAgICAgYm90dG9tOiAnYidcclxuICAgIH1cclxuICAgIHRoaXMucGFuZWxQb3NpdG9uKHRoaXMubWVkaXVtQnJlYWtwb2ludCk7XHJcbiAgICAvLyBQYW5lbCBkaW1lbnNpb25zIGFuZCByZXNpemluZy5cclxuICAgIHRoaXMucGFuZWxXaWR0aCA9IDI1MDtcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCItLXdpZHRoXCIsIHRoaXMucGFuZWxXaWR0aCArICdweCcpO1xyXG4gICAgdGhpcy5wYW5lbEhlaWdodCA9IDIwMDtcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCItLWhlaWdodFwiLCB0aGlzLnBhbmVsSGVpZ2h0ICsgJ3B4Jyk7XHJcbiAgICB0aGlzLnJlc2l6aW5nV2lkdGggPSBmYWxzZTtcclxuICAgIHRoaXMucmVzaXppbmdIZWlnaHQgPSBmYWxzZTtcclxuICAgIHRoaXMuc3RhcnRYO1xyXG4gICAgdGhpcy5zdGFydFdpZHRoO1xyXG4gICAgdGhpcy5zdGFydFk7XHJcbiAgICB0aGlzLnN0YXJ0SGVpZ2h0O1xyXG4gICAgdGhpcy5wYW5lbEdyaXAub25tb3VzZWRvd24gPSBlID0+IHtcclxuICAgICAgaWYgKHRoaXMucGFuZWxTaWRlID09PSB0aGlzLnBhbmVsU2lkZXMucmlnaHQpIHtcclxuICAgICAgICB0aGlzLnJlc2l6aW5nV2lkdGggPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucmVzaXppbmdIZWlnaHQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnN0YXJ0WCA9IGUucGFnZVg7XHJcbiAgICAgICAgdGhpcy5zdGFydFdpZHRoID0gdGhpcy5wYW5lbFdpZHRoO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMucGFuZWxTaWRlID09PSB0aGlzLnBhbmVsU2lkZXMuYm90dG9tKSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZ0hlaWdodCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5yZXNpemluZ1dpZHRoID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdGFydFkgPSBlLnBhZ2VZO1xyXG4gICAgICAgIHRoaXMuc3RhcnRIZWlnaHQgPSB0aGlzLnBhbmVsSGVpZ2h0O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgV29ya3NwYWNlLndvcmtzcGFjZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnBhbmVsQ29udGFpbmVyKTtcclxuICB9XHJcblxyXG4gIHJlc2l6ZVdpZHRoKG1vdXNlRXZlbnQpIHtcclxuICAgIHRoaXMucGFuZWxXaWR0aCA9IHRoaXMuc3RhcnRXaWR0aCAtIChtb3VzZUV2ZW50LnBhZ2VYIC0gdGhpcy5zdGFydFgpO1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcIi0td2lkdGhcIiwgdGhpcy5wYW5lbFdpZHRoICsgJ3B4Jyk7XHJcbiAgfVxyXG5cclxuICByZXNpemVIZWlnaHQobW91c2VFdmVudCkge1xyXG4gICAgdGhpcy5wYW5lbEhlaWdodCA9IHRoaXMuc3RhcnRIZWlnaHQgLSAobW91c2VFdmVudC5wYWdlWSAtIHRoaXMuc3RhcnRZKTtcclxuICAgIHRoaXMucGFuZWxDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCItLWhlaWdodFwiLCB0aGlzLnBhbmVsSGVpZ2h0ICsgJ3B4Jyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5wYW5lbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XHJcbiAgICB0aGlzLnBhbmVsUG9zaXRvbih0aGlzLm1lZGl1bUJyZWFrcG9pbnQpO1xyXG4gICAgdGhpcy5pc09wZW4gPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEb2NrcyB0aGUgcGFuZWwgb24gdGhlIHNwZWNpZmllZCBzaWRlLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0IGZpZWxkfSBzaWRlIFVzZSB0aGUgTWFpblBhbmVsLnBhbmVsc1NpZGVzIGZpZWxkcy5cclxuICAgKi9cclxuICBkb2NrVG8oc2lkZSkge1xyXG4gICAgaWYgKHNpZGUgPT09IHRoaXMucGFuZWxTaWRlcy5yaWdodCkge1xyXG4gICAgICB0aGlzLnBhbmVsU2lkZSA9IHNpZGU7XHJcbiAgICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYm90dG9tJyk7XHJcbiAgICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncmlnaHQnKTtcclxuICAgICAgdGhpcy5wYW5lbEJvZHkuY2hpbGROb2Rlcy5mb3JFYWNoKGNvbnRlbnQgPT4ge1xyXG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaG9yaXpvbnRhbCcpO1xyXG4gICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgndmVydGljYWwnKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHNpZGUgPT09IHRoaXMucGFuZWxTaWRlcy5ib3R0b20pIHtcclxuICAgICAgdGhpcy5wYW5lbFNpZGUgPSBzaWRlO1xyXG4gICAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3JpZ2h0Jyk7XHJcbiAgICAgIHRoaXMucGFuZWxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYm90dG9tJyk7XHJcbiAgICAgIHRoaXMucGFuZWxCb2R5LmNoaWxkTm9kZXMuZm9yRWFjaChjb250ZW50ID0+IHtcclxuICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3ZlcnRpY2FsJyk7XHJcbiAgICAgICAgY29udGVudC5jbGFzc0xpc3QuYWRkKCdob3Jpem9udGFsJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0cyBhIHNlY3Rpb24gYXMgYWN0aXZlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZWN0aW9uIHRvIGFjdGl2YXRlLlxyXG4gICAqL1xyXG4gIHNldEFjdGl2ZShuYW1lKSB7XHJcbiAgICBpZiAodGhpcy5hY3RpdmVTZWN0aW9uKVxyXG4gICAgICB0aGlzLnNldEluYWN0aXZlKHRoaXMuYWN0aXZlU2VjdGlvbik7XHJcbiAgICAvLyBUaGlzIG1lYW5zIHRoYXQgc2VjdGlvbnMgc2hvdWxkIGhhdmUgdW5pcXVlIG5hbWVzLlxyXG4gICAgdGhpcy5hY3RpdmVTZWN0aW9uID0gdGhpcy5zZWN0aW9ucy5maW5kKHMgPT4gcy5uYW1lID09PSBuYW1lKTtcclxuICAgIHRoaXMuYWN0aXZlU2VjdGlvbi5idXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB0aGlzLmFjdGl2ZVNlY3Rpb24uYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgYSBzZWN0aW9uIGFzIGluYWN0aXZlLCBzbyBpbiB0aGUgYmFjay5cclxuICAgKiBJZiB0aGVyZSBpcyBvbmx5IG9uZSBhbmQgaXQgaXMgaW5hY3RpdmUgdGhlIGJvZHkgd29udCBiZSB2aXNpYmxlLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzZWN0aW9uIFNlY3Rpb24gb2JqZWN0IHtuYW1lOiBzdHJpbmcsIGJ1dHRvbjogU3BhbkVsZW1lbnQsIGJvZHk6IEhUTUxFbGVtZW50IH1cclxuICAgKi9cclxuICBzZXRJbmFjdGl2ZShzZWN0aW9uKSB7XHJcbiAgICBzZWN0aW9uLmJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIHNlY3Rpb24uYm9keS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYSBuZXcgc2VjdGlvbiB0byB0aGUgcGFuZWwgY29udGVudHMgYW5kIHNldHMgaXQgYXMgYWN0aXZlLlxyXG4gICAqIElmIGEgc2VjdGlvbiB3aXRoIHRoaXMgbmFtZSBhbHJlYWR5IGV4aXN0cyB0aGVuIGl0IGlzIG9ubHkgYWN0aXZhdGVkLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXHJcbiAgICogQHBhcmFtIHtITUxURWxlbWVudH0gYm9keVxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gYWN0aXZhdGUgU2V0IHRoZSBzZWN0aW9uIGFzIGFjdGl2ZSAodGhlIG9uZSB2aXNpYmxlKS4gRGVmYXVsdCB0cnVlLlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZmlyc3QgSWYgdHJ1ZSBzZXRzIHRoZSBzZWN0aW9uIGFzIHRoZSBmaXJzdCBvbmUgKGxlZnQgc2lkZSkuIERlZmF1bHQgZmFsc2UuXHJcbiAgICovXHJcbiAgYWRkU2VjdGlvbihuYW1lLCBib2R5LCBhY3RpdmF0ZSA9IHRydWUsIGZpcnN0ID0gZmFsc2UpIHtcclxuICAgIGxldCBzZWN0aW9uID0gdGhpcy5zZWN0aW9ucy5maW5kKHMgPT4gcy5uYW1lID09PSBuYW1lKTtcclxuICAgIGlmIChzZWN0aW9uID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgLy8gVGhlIHNlY3Rpb24gYnV0dG9uLlxyXG4gICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSBuYW1lO1xyXG4gICAgICBidXR0b24uZGF0YXNldC5idG4gPSAnJztcclxuICAgICAgdGhpcy5wYW5lbEhlYWRlci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICB0aGlzLnBhbmVsQm9keS5hcHBlbmRDaGlsZChib2R5KTtcclxuICAgICAgc2VjdGlvbiA9IHsgbmFtZSwgYnV0dG9uLCBib2R5IH07XHJcbiAgICAgIC8vIEFkZGVkIHRvIHNlY3Rpb25zIGFycmF5LlxyXG4gICAgICBpZiAoZmlyc3QpXHJcbiAgICAgICAgdGhpcy5zZWN0aW9ucy51bnNoaWZ0KHNlY3Rpb24pO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5zZWN0aW9ucy5wdXNoKHNlY3Rpb24pO1xyXG4gICAgfVxyXG4gICAgaWYgKGFjdGl2YXRlKVxyXG4gICAgICB0aGlzLnNldEFjdGl2ZShzZWN0aW9uLm5hbWUpO1xyXG4gICAgZWxzZVxyXG4gICAgICB0aGlzLnNldEluYWN0aXZlKHNlY3Rpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkcyBhIHNldCBvZiBzZWN0aW9ucyB0byB0aGUgcGFuZWwuXHJcbiAgICogVGhlIGZpcnN0IG9uZSBpbiB0aGUgYXJyYXkgd2lsbCBiZSBzZXQgYXMgYWN0aXZlLlxyXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNlY3Rpb25zQXJyYXkgRWFjaCBvYmplY3QgaW4gdGhlIGFycmF5IHNob3VsZCBoYXZlIGEgbmFtZSBhbmQgYSBib2R5IGVudHJ5LlxyXG4gICAqL1xyXG4gIGFkZFNlY3Rpb25zKHNlY3Rpb25zQXJyYXkpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VjdGlvbnNBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLmFkZFNlY3Rpb24oc2VjdGlvbnNBcnJheVtpXS5uYW1lLCBzZWN0aW9uc0FycmF5W2ldLmJvZHksIGkgPT09IDAgPyB0cnVlIDogZmFsc2UpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGEgc2VjdGlvbiBmcm9tIHRoZSBwYW5lbCBjb250ZW50cy5cclxuICAgKiBJZiB0aGlzIHdhcyB0aGUgb25seSBzZWN0aW9uIHRoZSBwYW5lbCB3aWxsIGNsb3NlLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFxyXG4gICAqL1xyXG4gIHJlbW92ZVNlY3Rpb24obmFtZSkge1xyXG4gICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5zZWN0aW9ucy5maW5kSW5kZXgocyA9PiBzLm5hbWUgPT09IG5hbWUpO1xyXG4gICAgaWYgKHNlY3Rpb25JbmRleCA+PSAwKSB7XHJcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zLnNwbGljZShzZWN0aW9uSW5kZXgsIDEpWzBdO1xyXG4gICAgICBzZWN0aW9uLmJ1dHRvbi5yZW1vdmUoKTtcclxuICAgICAgdGhpcy5wYW5lbHNTdG9yYWdlLmFwcGVuZENoaWxkKHNlY3Rpb24uYm9keSk7XHJcbiAgICAgIGlmICh0aGlzLnNlY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyBJIHNldCBhcyBhY3RpdmUgdGhlIGZpcnN0LlxyXG4gICAgICAgIHRoaXMuc2V0QWN0aXZlKHRoaXMuc2VjdGlvbnNbMF0ubmFtZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ0ltcG9zc2libGUgdG8gcmVtb3ZlIHRoZSBzZWN0aW9uLiBObyBzZWN0aW9uIHdhcyBmb3VuZCB3aXRoIHRoYXQgbmFtZS4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHBhbmVsUG9zaXRvbihicmVha3BvaW50KSB7XHJcbiAgICBpZiAoYnJlYWtwb2ludC5tYXRjaGVzKSB7XHJcbiAgICAgIHRoaXMuZG9ja1RvKHRoaXMucGFuZWxTaWRlcy5ib3R0b20pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kb2NrVG8odGhpcy5wYW5lbFNpZGVzLnJpZ2h0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGtpbGwoKSB7XHJcbiAgICAvLyBSZW1vdmUgZXZlbnQgbGlzZW5lcnNcclxuICAgIHRoaXMucGFuZWxIZWFkZXIub25jbGljayA9IG51bGw7XHJcbiAgICB0aGlzLnBhbmVsR3JpcC5vbm1vdXNlZG93biA9IG51bGw7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbW1lbnRGb3JtIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgd29ya3NwYWNlKSB7XHJcbiAgICB0aGlzLmZvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLndvcmtzcGFjZSA9IHdvcmtzcGFjZTtcclxuICAgIGZvcm1FbGVtZW50Lm9uc3VibWl0ID0gZSA9PiB7IGUucHJldmVudERlZmF1bHQoKSB9XHJcbiAgICB0aGlzLmNhbmNlbENyZWF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50Rm9ybUNhbmNlbCcpO1xyXG4gICAgdGhpcy5hZGRDb21tZW50QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZENvbW1lbnRCdG4nKTtcclxuICAgIHRoaXMuZGVsZXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRGb3JtRGVsZXRlJyk7XHJcbiAgICB0aGlzLmRlbGV0ZUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5kZWxldGVDb21tZW50KHRoaXMuY29tbWVudElkKTtcclxuICAgIHRoaXMuZWRpdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50Rm9ybUVkaXQnKTtcclxuICAgIHRoaXMuZWRpdEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5lbmFibGVFZGl0Q29tbWVudCh0aGlzLmNvbW1lbnRJZCk7XHJcbiAgICB0aGlzLmNhbmNlbFVwZGF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXNjYXJkQ2hhbmdlcycpO1xyXG4gICAgdGhpcy5jYW5jZWxVcGRhdGVCdG4ub25jbGljayA9ICgpID0+IHRoaXMuZGlzY2FyZFVwZGF0ZSgpO1xyXG4gICAgdGhpcy5jb25maXJtVXBkYXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1DaGFuZ2VzJyk7XHJcbiAgICB0aGlzLnRleHRJbnB1dCA9IGZvcm1FbGVtZW50LmVsZW1lbnRzW1wiY29tbWVudFwiXTtcclxuICAgIHRoaXMubWVudGlvbnNTZWN0aW9uID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1lbWJlcnMnKTtcclxuICAgIHRoaXMubWVudGlvbnNJbnB1dCA9IGZvcm1FbGVtZW50LmVsZW1lbnRzW1wibWVtYmVyc1wiXTtcclxuICAgIHRoaXMuYnV0dG9uc01vZGVzID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1CdXR0b25zTW9kZXMnKTtcclxuICAgIHRoaXMuY29tbWVudElkO1xyXG4gIH1cclxuXHJcbiAgc2hvd01lbnRpb25zU2VjdGlvbigpIHtcclxuICAgIHRoaXMubWVudGlvbnNTZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgaGlkZU1lbnRpb25zU2VjdGlvbigpIHtcclxuICAgIHRoaXMubWVudGlvbnNTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gIH1cclxuXHJcbiAgLy8gVE9ETzogaGVyZSBpIGNhbiBjaGFuZ2Ugb3RoZXIgdGhpbmdzIGxpa2UgaW5wdXQgbGFiZWxzP1xyXG4gIC8qKlxyXG4gICAqIE1vZGVzIGNvdWxkIGJlICdjcmVhdGUnLCAndmlldycsICdlZGl0J1xyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtb2RlIFxyXG4gICAqL1xyXG4gIGJ1dHRvbnNWaXNpYmlsaXR5TW9kZShtb2RlKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnV0dG9uc01vZGVzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICh0aGlzLmJ1dHRvbnNNb2Rlcy5jaGlsZHJlbltpXS5kYXRhc2V0Lm1vZGUgIT09IG1vZGUpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbnNNb2Rlcy5jaGlsZHJlbltpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYnV0dG9uc01vZGVzLmNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRlbGV0ZUNvbW1lbnQoY29tbWVudElkKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IGNvbW1lbnRJZCk7XHJcbiAgICAvLyBEZWxldGUgcmVwcmVzZW50YXRpb25zIGZyb20gdGhlIFNWR3MuXHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50c1tpbmRleF0ucmVwcmVzZW50YXRpb25zLmZvckVhY2gociA9PiByLnJlbW92ZSgpKTtcclxuICAgIC8vIFJlbW92ZSBjb21tZW50IG9iamVjdCBmcm9tIHRoZSBhcnJheS5cclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAvLyBJbmRpY2F0ZSB0aGF0IHRoZXJlIGFyZSBjaGFuZ2VzIHRvIHNhdmUuXHJcbiAgICB0aGlzLndvcmtzcGFjZS51bnNhdmVkQ29tbWVudHNEYXRhKCk7XHJcblxyXG4gICAgLy8gSU1QT1JUQU5UIHRoaXMgbWF5IGJhIHdyb25nIHNob3VsZCBiZSBvdXRzaWRlIG9mIHRoaXMgbWV0aG9kXHJcbiAgICAvLyBJZiBpdCBoYXMgYmVlbiBjYWxsZWQgZnJvbSB0aGUgcGFuZWwgdGhlbiByZW1vdmUgdGhlIENvbW1lbnQgc2VjdGlvbiA/PyBtYXliZSBub3QgaW5zaWRlIHRoaXMgZnVuY3Rpb25cclxuICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5yZW1vdmVTZWN0aW9uKCdDb21tZW50Jyk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlRm9ybSgpIHtcclxuICAgIHRoaXMudGV4dElucHV0LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIHRoaXMubWVudGlvbnNJbnB1dC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBlbmFibGVGb3JtKCkge1xyXG4gICAgdGhpcy50ZXh0SW5wdXQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHRoaXMubWVudGlvbnNJbnB1dC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgdmlld0NvbW1lbnQoY29tbWVudElkKSB7XHJcbiAgICBjb25zdCBjb21tZW50ID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudHMuZmluZChjID0+IGMuaWQgPT09IGNvbW1lbnRJZCk7XHJcbiAgICBpZiAoY29tbWVudCkge1xyXG4gICAgICB0aGlzLmZpbGxJbnB1dHMoY29tbWVudCk7XHJcbiAgICAgIHRoaXMuY29tbWVudElkID0gY29tbWVudC5pZDtcclxuICAgICAgdGhpcy5kaXNhYmxlRm9ybSgpO1xyXG4gICAgICB0aGlzLmJ1dHRvbnNWaXNpYmlsaXR5TW9kZSgndmlldycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdObyBjb21tZW50IGZvdW5kIHdpdGggdGhhdCBpZDonLCBjb21tZW50SWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZW5hYmxlRWRpdENvbW1lbnQoY29tbWVudElkKSB7XHJcbiAgICBjb25zdCBjb21tZW50ID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudHMuZmluZChjID0+IGMuaWQgPT09IGNvbW1lbnRJZCk7XHJcbiAgICBpZiAoY29tbWVudCkge1xyXG4gICAgICB0aGlzLmZpbGxJbnB1dHMoY29tbWVudCk7XHJcbiAgICAgIHRoaXMuY29tbWVudElkID0gY29tbWVudElkO1xyXG4gICAgICB0aGlzLmVuYWJsZUZvcm0oKTtcclxuICAgICAgdGhpcy5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ2VkaXQnKTtcclxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5vbmNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmNvbmZpcm1VcGRhdGVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgICB0aGlzLmNvbmZpcm1VcGRhdGVCdG4ub25jbGljayA9ICgpID0+IHRoaXMudXBkYXRlQ29tbWVudChjb21tZW50SWQsIHRoaXMudGV4dElucHV0LnZhbHVlLCB0aGlzLmdldFNlbGVjdGVkTWVtYmVycygpKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdObyBjb21tZW50IGZvdW5kIHdpdGggdGhhdCBpZDonLCBjb21tZW50SWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlQ29tbWVudChjb21tZW50SWQsIHRleHQsIG1lbnRpb25zKSB7XHJcbiAgICBjb25zdCBjb21tZW50ID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudHMuZmluZChjID0+IGMuaWQgPT09IGNvbW1lbnRJZCk7XHJcbiAgICBpZiAoY29tbWVudCkge1xyXG4gICAgICBjb21tZW50LmNvbnRlbnQgPSB0ZXh0O1xyXG4gICAgICBjb21tZW50Lm1lbnRpb25zID0gbWVudGlvbnM7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLnVuc2F2ZWRDb21tZW50c0RhdGEoKTtcclxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5vbmNoYW5nZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUZvcm0oKTtcclxuICAgICAgdGhpcy5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ3ZpZXcnKTtcclxuICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuY2FuY2VsVXBkYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuY29uZmlybVVwZGF0ZUJ0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgICAgdGhpcy5jYW5jZWxVcGRhdGVCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ05vIGNvbW1lbnQgZm91bmQgd2l0aCB0aGF0IGlkOicsIGNvbW1lbnRJZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNjYXJkVXBkYXRlKCkge1xyXG4gICAgY29uc3QgY29tbWVudCA9IHRoaXMud29ya3NwYWNlLmNvbW1lbnRzLmZpbmQoYyA9PiBjLmlkID09PSB0aGlzLmNvbW1lbnRJZCk7XHJcbiAgICBpZiAoY29tbWVudCkge1xyXG4gICAgICB0aGlzLnRleHRJbnB1dC52YWx1ZSA9IGNvbW1lbnQuY29udGVudDtcclxuICAgICAgLy8gVE9ETyB0aGlzLm1lbnRpb25zSW5wdXQgPSAnJyBpZiBzZWxlY3Rpb24gY2hhbmdlZCBwdXQgaW5pdGlhbCBzZWxlY3Rpb25cclxuICAgICAgdGhpcy5mb3JtRWxlbWVudC5vbmNoYW5nZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUZvcm0oKTtcclxuICAgICAgdGhpcy5idXR0b25zVmlzaWJpbGl0eU1vZGUoJ3ZpZXcnKTtcclxuICAgICAgdGhpcy5jb25maXJtVXBkYXRlQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIHRoaXMuY29uZmlybVVwZGF0ZUJ0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignTm8gY29tbWVudCBmb3VuZCB3aXRoIHRoYXQgaWQ6JywgY29tbWVudElkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHZhbHVlcyBvZiB0aGUgc2VsZWN0ZWQgb3B0aW9ucy5cclxuICAgKi9cclxuICBnZXRTZWxlY3RlZE1lbWJlcnMoKSB7XHJcbiAgICBjb25zdCBzZWxlY3RlZE9wdGlvbnMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW50aW9uc0lucHV0LnNlbGVjdGVkT3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBzZWxlY3RlZE9wdGlvbnMucHVzaCh0aGlzLm1lbnRpb25zSW5wdXQuc2VsZWN0ZWRPcHRpb25zW2ldLnZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZWxlY3RlZE9wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBmaWxsSW5wdXRzKGNvbW1lbnQpIHtcclxuICAgIHRoaXMudGV4dElucHV0LnZhbHVlID0gY29tbWVudC5jb250ZW50O1xyXG4gICAgaWYgKGNvbW1lbnQubWVudGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBtZW50aW9ucyA9IFtdO1xyXG4gICAgICAvLyBJdCBzaG91bGQgYmUgc3RpbGwgYSBtZW1iZXIgb2YgdGhlIHRlYW0gb3RoZXJ3aXNlIGl0cyBuYW1lIGlzIHNldCB0byAncmVtb3ZlZCB1c2VyJ1xyXG4gICAgICAvLyBUT0RPOiBpZiBhIG1lbnRpb25lZCB0ZWFtIG1lbWJlciB3YXMgcmVtb3ZlZCBpdCBzaG91bGQgYmUgcmVtb3ZlZCBmcm9tIGFueSBtZW50aW9uID8gd2hlbiA/XHJcbiAgICAgIC8vID8gQWxsIG1lbWJlcnMgc2hvdWxkIGJlIGFkZGVkIGhlcmUgP1xyXG4gICAgICBjb21tZW50Lm1lbnRpb25zLmZvckVhY2gobWVudGlvbkVtYWlsID0+IHtcclxuICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gdGhpcy53b3Jrc3BhY2UucGVybWlzc2lvbnMuZmluZChwID0+IHAuZW1haWxBZGRyZXNzID09PSBtZW50aW9uRW1haWwpO1xyXG4gICAgICAgIG1lbnRpb25zLnB1c2goYDxvcHRpb24gdmFsdWU9XCIke21lbnRpb25FbWFpbH1cIj4ke3Blcm1pc3Npb24gPyBwZXJtaXNzaW9uLmRpc3BsYXlOYW1lIDogJ1JlbW92ZWQgdXNlcid9PC9vcHRpb24+YCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLm1lbnRpb25zSW5wdXQuaW5uZXJIVE1MID0gbWVudGlvbnMuam9pbignJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBUT0RPIFNob3cgYSBtZXNzYWdlIGluZGljYXRpbmcgbm8gbWVudGlvbnM/IHNob3cgdGhlIGVtcHR5IHNlbGVjdD9cclxuICAgICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMubWVudGlvbnNJbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMuZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgR2VuZXJpY3MgZnJvbSAnLi9nZW5lcmljcyc7XHJcbmltcG9ydCB7IENvbW1lbnQgfSBmcm9tICcuL2NvbW1lbnQnO1xyXG5pbXBvcnQgeyBNYWluUGFuZWwgfSBmcm9tICcuL21haW5QYW5lbCc7XHJcbmltcG9ydCB7IENvbW1lbnRGb3JtIH0gZnJvbSAnLi9jb21tZW50Rm9ybSc7XHJcbmltcG9ydCB0eXBlIHsgRHJhd2luZyB9IGZyb20gJy4vZHJhd2luZyc7XHJcbmltcG9ydCB0eXBlIHsgQXBwbGljYXRpb24gfSBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCB0eXBlIHsgRWxlbWVudFNlbGVjdGlvbiB9IGZyb20gJy4vYXBwVG9vbHMvZWxlbWVudFNlbGVjdGlvbic7XHJcblxyXG5leHBvcnQgY2xhc3MgV29ya3NwYWNlIHtcclxuICB3b3Jrc3BhY2VDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gIHByb2plY3ROYW1lOiBzdHJpbmc7XHJcbiAgcHJvamVjdElkOiBzdHJpbmc7XHJcbiAgcGVybWlzc2lvbnM6IGdhcGkuY2xpZW50LmRyaXZlLlBlcm1pc3Npb25bXTtcclxuICBwcm9qZWN0SW5kZXg6IG51bWJlcjtcclxuICBkcmF3aW5nczogRHJhd2luZ1tdO1xyXG4gIGVsZW1lbnRzRGF0YTogYW55OyAvLyBUT0RPIGNyZWF0ZSBpbnRlcmZhY2VcclxuICBkcmF3aW5nc1N0eWxlc0lkOiBhbnk7IC8vIFRPRE8gbnVtYmVyIG9yIHN0cmluZz9cclxuICBhY3RpdmVUb29sOiBFbGVtZW50U2VsZWN0aW9uO1xyXG4gIC8vIHRvb2xTZXR0aW5nczogYW55O1xyXG4gIGFwcGVuZGVkRHJhd2luZ3NJZHM6IHN0cmluZ1tdID0gW107XHJcbiAgYWN0aXZlRHJhd2luZzogRHJhd2luZztcclxuICBkcmF3aW5nc0J0bnM6IEhUTUxFbGVtZW50O1xyXG4gIGRyYXdpbmdzU3R5bGVzVGFnOiBIVE1MU3R5bGVFbGVtZW50O1xyXG4gIHNhdmVCdG46IEhUTUxFbGVtZW50O1xyXG4gIHByb2plY3RzRGF0YTogYW55IC8vIFByb2plY3REYXRhW11cclxuICBwcm9wc1RhYmxlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgcGFyYW1zVGFibGVzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBjb21tZW50c0NoYW5nZXNVbnNhdmVkOiBib29sZWFuO1xyXG4gIGNvbW1lbnRzRmlsZUlkOiBhbnk7IC8vIHN0cmluZyBvciBudW1iZXI/XHJcbiAgY29tbWVudHM6IENvbW1lbnRbXSA9IFtdO1xyXG4gIC8vIFVzZWQgdG8gc3RvcmUgYXJyYXlzIG9mIGFsbCB0aGUgY29tbWVudHMgdGhhdCBlYWNoIGVsZW1lbnQgaGFzLCBuZWNlc3Nhcnkgd2hlbiBhbiBlbGVtZW50IGlzIGNsaWNrZWQuXHJcbiAgZWxlbWVudHNDb21tZW50czogYW55ID0ge307IC8vIFRPRE8gaXMgYW4gb2JqZWN0IGJ1dCB3aGljaCB0eXBlP1xyXG4gIHBlbmRpbmdOb3RpZmljYXRpb25zVG9TZW5kOiBhbnk7IC8vIFRPRE8gaXMgYW4gYXJyYXkgYnV0IG9mP1xyXG4gIG1haW5QYW5lbDogTWFpblBhbmVsO1xyXG4gIGNvbW1lbnRGb3JtOiBDb21tZW50Rm9ybTtcclxuICBkcmF3aW5nc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb2plY3REYXRhOiBhbnksIEFwcDogQXBwbGljYXRpb24pIHsgLy8gVE9ETyB1c2UgcHJvamVjdERhdGEgaW5zdGVhZFxyXG4gICAgLy8gQ3JlYXRlIHRoZSB3b3Jrc3BhY2UgSFRNTCBjb250YWluZXIuXHJcbiAgICB0aGlzLndvcmtzcGFjZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnd29ya3NwYWNlJyk7XHJcbiAgICAvLyBUT0RPIGNyZWF0ZSB2aWV3cG9ydCBtZXNzYWdlIGFzIGNvbXBvbmVudC4gVGhpcyBlbGVtZW50IGN1cnJlbnRseSBoYXMgaWQgdmlld3BvcnRNZXNzYWdlXHJcbiAgICAvL3RoaXMudmlld3BvcnRNZXNzYWdlID0gbmV3IFZpZXdwb3J0TWVzc2FnZSgpOyAgICBcclxuXHJcbiAgICB0aGlzLnByb2plY3ROYW1lID0gcHJvamVjdERhdGEubmFtZTtcclxuICAgIHRoaXMucHJvamVjdElkID0gcHJvamVjdERhdGEuaWQ7XHJcbiAgICB0aGlzLnBlcm1pc3Npb25zID0gcHJvamVjdERhdGEucGVybWlzc2lvbnM7XHJcbiAgICB0aGlzLnByb2plY3RJbmRleCA9IEFwcC5wcm9qZWN0c0RhdGEuZmluZEluZGV4KChvYmo6IGFueSkgPT4gb2JqLm5hbWUgPT09IHByb2plY3REYXRhLm5hbWUpOyAvLyBUT0RPIHVzZSB0eXBlIHByb2plY3REYXRhIGluc3RlYWRcclxuICAgIGlmIChBcHAubGFzdFVwbG9hZGVkUHJvamVjdCAmJiBwcm9qZWN0RGF0YS5pZCA9PT0gQXBwLmxhc3RVcGxvYWRlZFByb2plY3QuaWQpIHtcclxuICAgICAgLy90aGlzLmRyYXdpbmdzID0gQXBwLmxhc3RVcGxvYWRlZFByb2plY3QuZHJhd2luZ3M7IC8vIFRPRE8gd2hlbiBsYXN0VXBsb2FkZWRQcm9qZWN0IGludGVyZmFjZSBpcyBhdmFpYWJsZSB1bmNvbW1lbnQgaXRcclxuICAgICAgLy90aGlzLmRyYXdpbmdzU3R5bGVzSWQgPSBBcHAubGFzdFVwbG9hZGVkUHJvamVjdC5kcmF3aW5nc1N0eWxlc0lkO1xyXG4gICAgICB0aGlzLmVsZW1lbnRzRGF0YSA9IEFwcC5sYXN0VXBsb2FkZWRQcm9qZWN0LmVsZW1lbnRzRGF0YTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFN0b3JlIHRoZSBjb250ZW50IG9mIHRoZSBkcmF3aW5ncyBhcyBlbnRyaWVzIG5hbWU6J2NvbnRlbnQnXHJcbiAgICAgIHRoaXMuZHJhd2luZ3MgPSBwcm9qZWN0RGF0YS5kcmF3aW5ncztcclxuICAgICAgdGhpcy5kcmF3aW5nc1N0eWxlc0lkID0gcHJvamVjdERhdGEuZHJhd2luZ3NTdHlsZXNJZDtcclxuICAgICAgLy8gVE9ETzogRWxlbWVudHMgZGF0YSBjb3VsZCBiZSBjaGFuZ2VkIHRvIGEgc2ltaWxhciBzeXN0ZW0gbGlrZSB0aGUgZHJhd2luZyBvYmplY3RzLlxyXG4gICAgICB0aGlzLmVsZW1lbnRzRGF0YSA9IHt9O1xyXG4gICAgfVxyXG4gICAgLy8gU2V0IHRpdGxlIG9mIHRoZSBwcm9qZWN0IGluIHRoZSBidXR0b24gdG8gbGlzdCB0aGUgcHJvamVjdHMuXHJcbiAgICBBcHAucHJvamVjdHNMaXN0QnRuLmlubmVySFRNTCA9ICc8c3Bhbj4nICsgcHJvamVjdERhdGEubmFtZSArICc8L3NwYW4+JztcclxuICAgIHRoaXMuZHJhd2luZ3NCdG5zID0gQXBwLmRyYXdpbmdzQnRucztcclxuICAgIHRoaXMuc2F2ZUJ0biA9IEFwcC5zYXZlQnRuO1xyXG4gICAgdGhpcy5jcmVhdGVEcmF3aW5nc0J0bnModGhpcy5kcmF3aW5ncyk7XHJcbiAgICAvLyBTaG93IGRyYXdpbmdzIGFuZCB0b29scyBidXR0b25zLlxyXG4gICAgKHRoaXMuZHJhd2luZ3NCdG5zLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQgPSAnUGljayBhIGRyYXdpbmcnO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICBBcHAudG9vbGJhcnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgIHRoaXMucHJvamVjdHNEYXRhID0gQXBwLnByb2plY3RzRGF0YTtcclxuICAgIHRoaXMucHJvcHNUYWJsZXNDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvcHNUYWJsZXNDb250YWluZXInKTtcclxuICAgIHRoaXMucGFyYW1zVGFibGVzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhcmFtc1RhYmxlc0NvbnRhaW5lcicpO1xyXG4gICAgaWYgKHByb2plY3REYXRhLmNvbW1lbnRzRmlsZUlkKSB7XHJcbiAgICAgIHRoaXMuY29tbWVudHNGaWxlSWQgPSBwcm9qZWN0RGF0YS5jb21tZW50c0ZpbGVJZDtcclxuICAgIH1cclxuICAgIGlmIChwcm9qZWN0RGF0YS5jb21tZW50cykge1xyXG4gICAgICBwcm9qZWN0RGF0YS5jb21tZW50cy5mb3JFYWNoKChjb21tZW50RGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgY29uc3QgY29tbWVudE9iaiA9IG5ldyBDb21tZW50KGNvbW1lbnREYXRhLmVsZW1lbnRzSWRzLCBjb21tZW50RGF0YS5jb250ZW50LCBjb21tZW50RGF0YS5tZW50aW9ucyk7XHJcbiAgICAgICAgdGhpcy5jb21tZW50cy5wdXNoKGNvbW1lbnRPYmopO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tbWVudERhdGEuZWxlbWVudHNJZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50c0NvbW1lbnRzLmhhc093blByb3BlcnR5KGNvbW1lbnREYXRhLmVsZW1lbnRzSWRzW2ldKSlcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50c0NvbW1lbnRzW2NvbW1lbnREYXRhLmVsZW1lbnRzSWRzW2ldXSA9IFtdO1xyXG4gICAgICAgICAgdGhpcy5lbGVtZW50c0NvbW1lbnRzW2NvbW1lbnREYXRhLmVsZW1lbnRzSWRzW2ldXS5wdXNoKGNvbW1lbnRPYmouaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuZHJhd2luZ3MuZm9yRWFjaChkcmF3aW5nID0+IGRyYXdpbmcuY29tbWVudHNDaGFuZ2VkID0gdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm1haW5QYW5lbCA9IG5ldyBNYWluUGFuZWwoQXBwLnBhbmVsc1N0b3JhZ2UsIHRoaXMpO1xyXG4gICAgdGhpcy5jb21tZW50Rm9ybSA9IG5ldyBDb21tZW50Rm9ybShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudEZvcm0nKSwgdGhpcyk7XHJcbiAgICAvLyBDcmVhdGUgYW5kIGFwcGVuZCB0aGUgSFRNTCBkcmF3aW5ncyBjb250YWluZXIuXHJcbiAgICB0aGlzLmRyYXdpbmdzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLmRyYXdpbmdzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2RyYXdpbmdzQ29udGFpbmVyJyk7XHJcbiAgICB0aGlzLndvcmtzcGFjZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmRyYXdpbmdzQ29udGFpbmVyKTtcclxuICAgIC8vIEFwcGVuZCB0aGUgd29ya3NwYWNlIGNvbnRhaW5lciB0byB0aGUgRE9NLlxyXG4gICAgQXBwLndvcmtzcGFjZXNDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy53b3Jrc3BhY2VDb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgLy8gVE9ETzogU2V0IGEgZGVmYXVsdCAnYWN0aXZlRHJhd2luZycgd2l0aCB0aGUgJ2VsZW1lbnRzRGF0YScgdG9vbCBhY3RpdmUgYnkgZGVmYXVsdD8gdGhpcy5hY3RpdmVUb29sID0gbmV3IEVsZW1lbnRzRGF0YSgnZWxlbWVudHNEYXRhVG9vbCcsIHRoaXMpO1xyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqIFRPT0xTIE1BTkFHRU1FTlQgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBzZWxlY3RlZCB0b29sIGFzIGFjdGl2ZSBhbmQgdHVybnMgb2ZmIHRoZSBwcmV2aW91cyBvbmUgaWYgc3RpbGwgYWN0aXZlLlxyXG4gICAqL1xyXG4gIG1hbmFnZVRvb2xzKGU6IEV2ZW50LCBUb29sOiB0eXBlb2YgRWxlbWVudFNlbGVjdGlvbiwgbmFtZTogc3RyaW5nKSB7XHJcbiAgICBpZiAodGhpcy5hY3RpdmVEcmF3aW5nID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgLy8gVE9ETzogU2hvdyBhIG1lc3NhZ2Ugc2F5aW5nIHRoYXQgYSBkcmF3aW5nIG11c3QgYmUgYWN0aXZlLlxyXG4gICAgICBjb25zb2xlLmxvZygnQSBkcmF3aW5nIG11c3QgYmUgYWN0aXZlLicpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5hY3RpdmVUb29sID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sID0gbmV3IFRvb2wobmFtZSwgZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50LCB0aGlzKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVUb29sLm5hbWUgIT09IG5hbWUpIHtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sLmtpbGwoKTtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sID0gbmV3IFRvb2wobmFtZSwgZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50LCB0aGlzKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVUb29sLm5hbWUgPT09IG5hbWUpIHtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sLmtpbGwoKTtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIHVuc2F2ZWRDb21tZW50c0RhdGEoKSB7XHJcbiAgICB0aGlzLmNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5zYXZlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICB0aGlzLnNhdmVCdG4uY2xhc3NMaXN0LmFkZCgnZW5hYmxlZCcpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqIERSQVdJTkdTIE1BTkFHRU1FTlQgKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogTWFuYWdlcyB0aGUgZHJhd2luZ3MgdmlzaWJpbGl0eS4gVGhlIHByb3ZpZGVkIGRyYXdpbmcgb2JqZWN0XHJcbiAgICogc2hvdWxkIGhhdmUgdGhlICdjb250ZW50JyBwcm9wZXJ0eSBhbHJlYWR5IHdpdGggdmFsdWUuXHJcbiAgICovXHJcbiAgc2V0RHJhd2luZyhkcmF3aW5nOiBEcmF3aW5nKSB7XHJcbiAgICAvLyBJZiB0aGVyZSBpcyBhIHByZXZpb3VzIHZpc2libGUgZHJhd2luZyBoaWRlIGl0LlxyXG4gICAgaWYgKHRoaXMuYWN0aXZlRHJhd2luZyAmJiB0aGlzLmFjdGl2ZURyYXdpbmcubmFtZSAhPT0gZHJhd2luZy5uYW1lKSB7XHJcbiAgICAgIC8vIElmIGluIHRoZSBkcmF3aW5nIHRvIGJlIGhpZGRlbiB0aGVyZSBhcmUgc2VsZWN0ZWQgZWxlbWVudHMgcmVtb3ZlIHRoZWlyIHNlbGVjdGlvbiBhcHBlYXJhbmNlLlxyXG4gICAgICBpZiAodGhpcy5hY3RpdmVUb29sICYmIHRoaXMuYWN0aXZlVG9vbC5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZVRvb2wucmVtb3ZlRHJhd2luZ1NlbGVjdGlvbkFwcGVhcmFuY2UodGhpcy5hY3RpdmVEcmF3aW5nKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmFjdGl2ZURyYXdpbmcuY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZURyYXdpbmcgJiYgdGhpcy5hY3RpdmVEcmF3aW5nLm5hbWUgPT09IGRyYXdpbmcubmFtZSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFrZSBpdCBub3QgdmlzaWJsZSB1bnRpbCB0aGUgZW5kIG9mIHRoZSBwcm9jZXNzLiBVc2UgdmlzaWJpbGl0eVxyXG4gICAgLy8gYmVjYXVzZSBzb21lIGJyb3dzZXJzIGxpa2UgQ2hyb21lIGNhbm5vdCBkcmF3IG5ldyBzdmcgZWxlbWVudHMgaWZcclxuICAgIC8vIHRoZSBjYW52YXMgaGFzICdkaXNwbGF5Om5vbmUnLlxyXG4gICAgZHJhd2luZy5jb250ZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuXHJcbiAgICAvLyBJZiBpdCBpcyBub3QgaW4gdGhlIERPTSBhbHJlYWR5IGFwcGVuZCBpdC5cclxuICAgIC8vIElmIGl0IGlzIGFscmVhZHkgaW4gdGhlIERPTSB0aGVuIHJlbW92ZSB0aGUgJ2Rpc3BsYXk6bm9uZScuXHJcbiAgICBpZiAoIXRoaXMuYXBwZW5kZWREcmF3aW5nc0lkcy5pbmNsdWRlcyhkcmF3aW5nLmlkKSkge1xyXG4gICAgICB0aGlzLmFwcGVuZGVkRHJhd2luZ3NJZHMucHVzaChkcmF3aW5nLmlkKTtcclxuICAgICAgdGhpcy5kcmF3aW5nc0NvbnRhaW5lci5hcHBlbmQoZHJhd2luZy5jb250ZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRyYXdpbmcuY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JztcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiB0aGUgdmFsdWUgb2YgY29tbWVudHNDaGFuZ2VkIGlzIHVuZGVmaW5lZCB0aGVuIHRoZXJlIGFyZSBzdGlsbFxyXG4gICAgLy8gbm8gY29tbWVudHMgaW4gdGhlIHByb2plY3QuIElmIGl0IGlzIGZhbHNlIHRoZW4gdGhlcmUgYXJlIG5vIGNoYW5nZXMuXHJcbiAgICBpZiAoZHJhd2luZy5jb21tZW50c0NoYW5nZWQpIHtcclxuICAgICAgLy8gVXBkYXRlIHRoZSBjb21tZW50cyByZXByZXNlbnRhdGlvbnMgZm9yIHRoZSBuZXcgZHJhd2luZy5cclxuICAgICAgLy8gSWYgc3RpbGwgdGhlcmUgaXMgbm8gY29tbWVudHMgZ3JvdXAgY2hlY2sgdGhlIGRyYXdpbmcsIG90aGVyd2lzZSBjaGVja1xyXG4gICAgICAvLyB0aGUgb25lcyB3aXRob3V0IHJlcHJlc2VudGF0aW9uIGluIHRoZSBjb21tZW50cyBncm91cC5cclxuICAgICAgaWYgKGRyYXdpbmcuY29tbWVudHNHcm91cCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwQ3JlYXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5jb21tZW50cy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgY29uc3QgZWxlbXNGb3JDb21tZW50UmVwcmVzZW50YXRpb246IFNWR0dFbGVtZW50W10gPSBbXTtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb21tZW50c1tqXS5lbGVtZW50c0lkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZHJhd2luZy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiJyArIHRoaXMuY29tbWVudHNbal0uZWxlbWVudHNJZHNbaV0gKyAnXCJdJykgYXMgU1ZHR0VsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgIGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBJZiBhdCBsZWFzdCBvbmUgaXMgZm91bmQgY3JlYXRlIHRoZSByZXByZXNlbnRhdGlvbi5cclxuICAgICAgICAgIGlmIChlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgaWYgYXQgbGVhc3Qgb25lIGNvbW1lbnQgcmVxdWlyZXMgcmVwcmVzZW50YXRpb24gdGhlIGNvbW1lbnRzIGdyb3VwIGlzIGNyZWF0ZWQuXHJcbiAgICAgICAgICAgIGlmICghZ3JvdXBDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgZHJhd2luZy5jcmVhdGVDb21tZW50c0dyb3VwKCk7XHJcbiAgICAgICAgICAgICAgLy8gVE9ETzogU2V0IHZpc2liaWxpdHkgb2YgdGhlIGdyb3VwLlxyXG4gICAgICAgICAgICAgIGdyb3VwQ3JlYXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb21tZW50c1tqXS5jcmVhdGVSZXByZXNlbnRhdGlvbihkcmF3aW5nLmNvbW1lbnRzR3JvdXAsIGVsZW1zRm9yQ29tbWVudFJlcHJlc2VudGF0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTG9vayBmb3IgaW4gdGhlIGNvbW1lbnRzIGdyb3VwLCBhbmQgYWRkIHRoZSBtaXNzaW5nIG9uZXMuXHJcbiAgICAgICAgLy8gT25seSBpZiB0aGUgZWxlbWVudCBpcyBpbiB0aGUgZHJhd2luZyBhbmQgaXQgZG9lc250IGhhdmUgcmVwcmVzZW50YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmNvbW1lbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAvLyBJZiB0aGlzIGVsZW1lbnQgYWxyZWFkeSBoYXMgYSByZXByZXNlbnRhdGlvbiBpbiB0aGlzIGRyYXdpbmcgc2tpcCBpdC5cclxuICAgICAgICAgIGlmIChkcmF3aW5nLmNvbW1lbnRzR3JvdXAucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jb21tZW50c1tqXS5pZCArICdcIl0nKSAhPT0gbnVsbCkgY29udGludWU7XHJcbiAgICAgICAgICAvLyBUT0RPIERvIHNvbWV0aGluZyB0byBhdm9pZCBjaGVja2luZyBjb21tZW50cyB0aGF0IGRvZXNudCBoYXZlIGFueSBlbGVtZW50IGluIHRoaXMgZHJhd2luZy5cclxuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHJlcHJlc2VudGF0aW9uIGZvciBpdCBnZXQgYWxsIGl0cyBlbGVtZW50cyBhbmQgaWYgYXQgbGVhc3Qgb25lIGlzIGZvdW5kIGNyZWF0ZSB0aGUgcmVwcmVzZW50YXRpb24uXHJcbiAgICAgICAgICBjb25zdCBlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbjogU1ZHR0VsZW1lbnRbXSA9IFtdO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbW1lbnRzW2pdLmVsZW1lbnRzSWRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jb21tZW50c1tqXS5lbGVtZW50c0lkc1tpXSArICdcIl0nKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgZWxlbXNGb3JDb21tZW50UmVwcmVzZW50YXRpb24ucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tbWVudHNbal0uY3JlYXRlUmVwcmVzZW50YXRpb24oZHJhd2luZy5jb21tZW50c0dyb3VwLCBlbGVtc0ZvckNvbW1lbnRSZXByZXNlbnRhdGlvbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE86IFNldCB2aXNpYmlsaXR5IG9mIHRoZSBncm91cC5cclxuICAgICAgfVxyXG4gICAgICAvLyBTZXQgdGhlIGNvbW1lbnRzQ2hhbmdlZCBwcm9wZXJ0eSB0byBmYWxzZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGlzIHVwZGF0ZWQuXHJcbiAgICAgIGRyYXdpbmcuY29tbWVudHNDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETyBDb3VsZCBiZSByZW1vdmVkIGJlY2F1c2UgdG9vbCB0YWtlcyB0aGUgYWN0aXZlIGRyYXdpZ24gZnJvbSB0aGUgd29ya3NwYWNlXHJcbiAgICAvLyBVcGRhdGUgdGhlICdhY3RpdmVEcmF3aW5nJyBpbiB0aGUgJ2FjdGl2ZVRvb2wnLlxyXG4gICAgLy8gaWYgKHRoaXMuYWN0aXZlVG9vbCkge1xyXG4gICAgLy8gICB0aGlzLmFjdGl2ZVRvb2wuYWN0aXZlRHJhd2luZyA9IGRyYXdpbmc7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmUgYXJlIHNlbGVjdGVkIGVsZW1lbnRzIGluIHRoZSBuZXcgZHJhd2luZyBhZGQgdGhlIHNlbGVjdGlvbiBhcHBlYXJhbmNlIHRvIHRoZW0uXHJcbiAgICBpZiAodGhpcy5hY3RpdmVUb29sICYmIHRoaXMuYWN0aXZlVG9vbC5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5hY3RpdmVUb29sLmFkZERyYXdpbmdTZWxlY3Rpb25BcHBlYXJhbmNlKGRyYXdpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdpbmcuY29udGVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Vuc2V0JztcclxuXHJcbiAgICAvLyBTZXQgdGhlIGRyYXdpbmcgYXMgYWN0aXZlLlxyXG4gICAgdGhpcy5hY3RpdmVEcmF3aW5nID0gZHJhd2luZztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIGJ1dHRvbnMgZm9yIHRoZSBkcmF3aW5ncyB0byBiZSBkaXNwbGF5ZWQuXHJcbiAgICogQHBhcmFtIHtBcnJheX0gZHJhd2luZ3MgQXJyYXkgd2l0aCB0aGUgZHJhd2luZyBvYmplY3RzLlxyXG4gICAqL1xyXG4gIGNyZWF0ZURyYXdpbmdzQnRucyhkcmF3aW5nczogRHJhd2luZ1tdKSB7XHJcbiAgICBsZXQgZHJhd2luZ3NJdGVtczogc3RyaW5nW10gPSBbXTtcclxuICAgIGRyYXdpbmdzLmZvckVhY2goZHJhd2luZyA9PiB7XHJcbiAgICAgIC8vIENvdWxkIGJlIHRoYXQgdGhlcmUgaXMgbm8gaWQgaWYgdGhlIHByb2plY3Qgd2FzIHVwbG9hZGVkIGFuZCBpdCBpcyBvbmx5IGxvY2FsLlxyXG4gICAgICBkcmF3aW5nc0l0ZW1zLnB1c2goYDxsaSAke2RyYXdpbmcuaWQgPyAnZGF0YS1pZD1cXFwiJyArIGRyYXdpbmcuaWQgKyAnXFxcIicgOiAnJ30+JHtkcmF3aW5nLm5hbWV9PC9saT5gKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKS5pbm5lckhUTUwgPSBkcmF3aW5nc0l0ZW1zLmpvaW4oJycpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYW5zIHRoZSB3b3Jrc3BhY2UgYnkgZW1wdHlpbmcgdGhlIGRyYXdpbmcgY29udGFpbmVyIGFuZCB0aGUgbGlzdCBvZiBkcmF3aW5ncy5cclxuICAgKiBUT0RPOiBSZW1vdmUgcG9zc2libGUgZXZlbnQgbGlzdGVuZXJzIGJlZm9yZSBlbXB0eWluZyBjb250YWluZXJzID9cclxuICAgKi9cclxuICBjbG9zZSgpIHtcclxuICAgIC8vIEVtcHR5IHRoZSBkcmF3aW5ncyBidXR0b25zIGNvbnRhaW5lci5cclxuICAgIEdlbmVyaWNzLmVtcHR5Tm9kZSh0aGlzLmRyYXdpbmdzQnRucy5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpKTtcclxuICAgIC8vIFJlbW92ZSB0aGUgY3JlYXRlIHN0eWxlIHRhZyBmb3IgdGhlIHN0eWxlcyBvZiB0aGUgZHJhd2luZ3MuXHJcbiAgICBpZiAodGhpcy5kcmF3aW5nc1N0eWxlc1RhZyAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICB0aGlzLmRyYXdpbmdzU3R5bGVzVGFnLnJlbW92ZSgpO1xyXG4gICAgLy8gUmVtb3ZlIHRoZSBtYWluIHBhbmVsLiAgIFxyXG4gICAgLy90aGlzLm1haW5QYW5lbC5raWxsKCk7XHJcbiAgICAvLyBUT0RPOiBJZiBpbiBmdXR1cmUgdmVyc2lvbiB0aGVyZSBhcmUgZWxlbWVudHMgaW4gdGhlIHN2ZyB3aXRoIGV2ZW50IGxpc3RlbmVycyB0aG9zZSBzaG91bGQgYmUgZGVsZXRlZFxyXG4gICAgdGhpcy5kcmF3aW5nc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICB9XHJcbn0iLCJpbXBvcnQgdHlwZSB7IFdvcmtzcGFjZSB9IGZyb20gXCIuLi93b3Jrc3BhY2VcIjtcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUb29sIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdG9vbEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgd29ya3NwYWNlOiBXb3Jrc3BhY2U7XHJcbiAgXHJcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCB0b29sQnRuOiBIVE1MRWxlbWVudCwgd29ya3NwYWNlOiBXb3Jrc3BhY2UpIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLnRvb2xCdG4gPSB0b29sQnRuO1xyXG4gICAgdGhpcy53b3Jrc3BhY2UgPSB3b3Jrc3BhY2U7XHJcbiAgICB0aGlzLnRvb2xCdG4uY2xhc3NMaXN0LmFkZCgnYnRuLXRvb2wtZW5hYmxlZCcpO1xyXG4gIH1cclxuXHJcbiAga2lsbCgpIHtcclxuICAgIHRoaXMudG9vbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdidG4tdG9vbC1lbmFibGVkJyk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgVG9vbCB9IGZyb20gJy4vdG9vbCc7XHJcbmltcG9ydCB0eXBlIHsgV29ya3NwYWNlIH0gZnJvbSAnLi4vd29ya3NwYWNlJztcclxuaW1wb3J0IHR5cGUgeyBEcmF3aW5nIH0gZnJvbSAnLi4vZHJhd2luZyc7XHJcblxyXG5leHBvcnQgY2xhc3MgRWxlbWVudFNlbGVjdGlvbiBleHRlbmRzIFRvb2wge1xyXG4gIGN1cnJlbnRTZWxlY3Rpb246IGFueSA9IFtdOyAvLyBUT0RPIGFycmF5IG9mIHdoYXQ/IFRPRE8gVGhpcyBjb3VsZCBiZSBhIHByb3BlcnR5IG9mIHRoZSB3b3Jrc3BhY2U/XHJcbiAgc2VsZWN0aW9uOiBTVkdHRWxlbWVudDsgLy8gVE9ETzogUmVuYW1lIGFzIGNsaWNrZWRFbGVtZW50ID9cclxuICAvKipcclxuICAgKiBPdmVycmlkZSB0aGlzIHZhbHVlIHRvIGFsbG93IG11bHRpcGxlIHNlbGVjdGlvbiBvbiBhIHRvb2wuIERlZmF1bHQgZmFsc2UuXHJcbiAgICovXHJcbiAgbXVsdGlwbGVTZWxlY3Rpb24gPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCB0b29sQnRuOiBIVE1MRWxlbWVudCwgd29ya3NwYWNlOiBXb3Jrc3BhY2UpIHtcclxuICAgIHN1cGVyKG5hbWUsIHRvb2xCdG4sIHdvcmtzcGFjZSk7XHJcblxyXG4gICAgdGhpcy5tYW5hZ2VTZWxlY3Rpb24gPSB0aGlzLm1hbmFnZVNlbGVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgd29ya3NwYWNlLmRyYXdpbmdzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5tYW5hZ2VTZWxlY3Rpb24pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKiogU0VMRUNUSU9OIE9GIEVMRU1FTlRTICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogTWFuYWdlcyB0aGUgc2VsZWN0aW9uIGFuZCBkZXNlbGVjdGlvbiBvZiB0aGUgc3ZnIGVsZW1lbnRzLlxyXG4gICAqIFRoaXMgc2hvdWxkIGJlIGV4dGVuZGVkIHRvIG9idGFpbiB0aGUgc2VsZWN0ZWQgZWxlbWVudC9zLlxyXG4gICAqIElmIG11bHRpcGxlIHNlbGVjdGlvbiBpcyByZXF1aXJlZCBzZXQgdGhlIGluaGVyaXRlZCBmaWVsZCAnbXVsdGlwbGVTZWxlY3Rpb24nXHJcbiAgICogdG8gdHJ1ZSBmb3IgZXhhbXBsZSBpbiB0aGUgY29uc3RydWN0b3Igb2YgdGhlIGV4dGVuZGluZyBjbGFzcy4gRGVmYXVsdCBpcyBmYWxzZS5cclxuICAgKi9cclxuICBtYW5hZ2VTZWxlY3Rpb24oZTogTW91c2VFdmVudCkge1xyXG4gICAgdGhpcy5zZWxlY3Rpb24gPSAoZS50YXJnZXQgYXMgU1ZHRWxlbWVudCkuY2xvc2VzdCgnW3NlbGVjdGFibGVdJyk7XHJcbiAgICBpZiAodGhpcy5zZWxlY3Rpb24gIT09IG51bGwpIHtcclxuICAgICAgaWYgKHRoaXMubXVsdGlwbGVTZWxlY3Rpb24pIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuY3VycmVudFNlbGVjdGlvbi5pbmRleE9mKHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuaWQpO1xyXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0aW9uKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5kZXNlbGVjdCh0aGlzLnNlbGVjdGlvbi5kYXRhc2V0LmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuc2VsZWN0aW9uKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuaWQgIT09IHRoaXMuY3VycmVudFNlbGVjdGlvblswXSkge1xyXG4gICAgICAgICAgdGhpcy5kZXNlbGVjdCh0aGlzLmN1cnJlbnRTZWxlY3Rpb25bMF0pO1xyXG4gICAgICAgICAgdGhpcy5zZWxlY3QodGhpcy5zZWxlY3Rpb24pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5pZCA9PT0gdGhpcy5jdXJyZW50U2VsZWN0aW9uWzBdKSB7XHJcbiAgICAgICAgICB0aGlzLmRlc2VsZWN0KHRoaXMuY3VycmVudFNlbGVjdGlvblswXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsZWFyQWxsU2VsZWN0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnU2VsZWN0aW9uICcsIHRoaXMuY3VycmVudFNlbGVjdGlvbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZWxlY3RzIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBieSBhZGRpbmcgaXQgdG8gdGhlIGFycmF5IG9mIHNlbGVjdGVkXHJcbiAgICogZWxlbWVudHMgYW5kIHNldHRpbmcgaXRzIGFwcGVhcmFuY2UgYXMgc2VsZWN0ZWQuXHJcbiAgICogQHBhcmFtIGVsZW1lbnQgQW4gU1ZHIHNlbGVjdGFibGUgZWxlbWVudC5cclxuICAgKi9cclxuICBzZWxlY3QoZWxlbWVudDogU1ZHR0VsZW1lbnQpIHtcclxuICAgIHRoaXMuY3VycmVudFNlbGVjdGlvbi5wdXNoKGVsZW1lbnQuZGF0YXNldC5pZCk7XHJcbiAgICB0aGlzLmFkZFNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZXNlbGVjdHMgdGhlIHNwZWNpZmllZCBlbGVtZW50IGJ5IHJlbW92aW5nIGl0IGZyb20gdGhlIGFycmF5IG9mIHNlbGVjdGVkIGVsZW1lbnRzXHJcbiAgICogYW5kIHJlbW92aW5nIHRoZSBzZWxlY3RlZCBhcHBlYXJhbmNlIGl0IGhhcyBpbiB0aGUgYWN0aXZlIGRyYXdpbmcuXHJcbiAgICogQHBhcmFtIGVsZW1lbnRJZCBBbiBTVkcgc2VsZWN0YWJsZSBlbGVtZW50LlxyXG4gICAqL1xyXG4gIGRlc2VsZWN0KGVsZW1lbnRJZDogc3RyaW5nKSB7XHJcbiAgICAvL2NvbnN0IGluZGV4ID0gdGhpcy5jdXJyZW50U2VsZWN0aW9uLmZpbmRJbmRleChlbCA9PiBlbC5kYXRhc2V0LmlkID09PSBlbGVtZW50LmRhdGFzZXQuaWQpO1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmN1cnJlbnRTZWxlY3Rpb24uaW5kZXhPZihlbGVtZW50SWQpO1xyXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIGNvbnN0IGVsID0gdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiJyArIGVsZW1lbnRJZCArICdcIl0nKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgaWYgKGVsKSB0aGlzLmNsZWFyU2VsZWN0aW9uQXBwZWFyYW5jZShlbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIHRoZSBzZWxlY3Rpb24gYXBwZWFyYW5jZSBmcm9tIGFueSBzZWxlY3RlZCBlbGVtZW50IGluIHRoZSBwcm92aWRlZCBkcmF3aW5nLlxyXG4gICAqIEl0IGRvZXMgbm90IHJlbW92ZSBpdHMgaWQgZnJvbSB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWQgZWxlbWVudHMuIFxyXG4gICAqL1xyXG4gIHJlbW92ZURyYXdpbmdTZWxlY3Rpb25BcHBlYXJhbmNlKGRyYXdpbmc6IERyYXdpbmcpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICBpZiAoZWxlbWVudCkgdGhpcy5jbGVhclNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIHRoZSBzZWxlY3Rpb24gYXBwZWFyYW5jZSB0byBhbnkgZWxlbWVudCBpbiB0aGUgYXJyYXkgb2Ygc2VsZWN0ZWQgZWxlbWVudHMgdGhhdFxyXG4gICAqIGlzIGluIHRoZSBwcm92aWRlZCBkcmF3aW5nLlxyXG4gICAqL1xyXG4gIGFkZERyYXdpbmdTZWxlY3Rpb25BcHBlYXJhbmNlKGRyYXdpbmc6IERyYXdpbmcpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkcmF3aW5nLmNvbnRlbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCInICsgdGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldICsgJ1wiXScpIGFzIFNWR0dFbGVtZW50O1xyXG4gICAgICBpZiAoZWxlbWVudCkgdGhpcy5hZGRTZWxlY3Rpb25BcHBlYXJhbmNlKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyB0aGUgc2VsZWN0ZWQgYXBwZWFyYW5jZSBvZiB0aGUgcHJvdmlkZWQgZWxlbWVudC5cclxuICAgKiBJdCBkb2VzIG5vdCByZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIGFycmF5IG9mIHNlbGVjdGVkIGVsZW1lbnRzLlxyXG4gICAqIEBwYXJhbSBlbGVtZW50IEFuIFNWRyBzZWxlY3RhYmxlIGVsZW1lbnQuXHJcbiAgICovXHJcbiAgY2xlYXJTZWxlY3Rpb25BcHBlYXJhbmNlKGVsZW1lbnQ6IFNWR0dFbGVtZW50KSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICAgIGVsZW1lbnQuY2hpbGRyZW5baV0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIGFwcGVhcmFuY2Ugb2YgdGhlIHByb3ZpZGVkIGVsZW1lbnQgYXMgc2VsZWN0ZWQuXHJcbiAgICogSXQgZG9lcyBub3QgYWRkIHRoZSBlbGVtZW50IHRvIHRoZSBhcnJheSBvZiBzZWxlY3RlZCBlbGVtZW50cy5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBBbiBTVkcgc2VsZWN0YWJsZSBlbGVtZW50LlxyXG4gICAqL1xyXG4gIGFkZFNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudDogU1ZHR0VsZW1lbnQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgICAgZWxlbWVudC5jaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyB0aGUgc2VsZWN0aW9uIGZyb20gYWxsIHRoZSBzZWxlY3RlZCBlbGVtZW50cyBhcyB3ZWxsIGFzIHRoZVxyXG4gICAqIHNlbGVjdGlvbiBhcHBlYXJhbmNlIGZyb20gYWxsIHRoZSBzZWxlY3RlZCBlbGVtZW50cyBpbiB0aGUgYWN0aXZlIGRyYXdpbmcuXHJcbiAgICovXHJcbiAgY2xlYXJBbGxTZWxlY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiJyArIHRoaXMuY3VycmVudFNlbGVjdGlvbltpXSArICdcIl0nKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgICBpZiAoZWxlbWVudCkgdGhpcy5jbGVhclNlbGVjdGlvbkFwcGVhcmFuY2UoZWxlbWVudCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGFuIGFycmF5IG9mIHJlZmVyZW5jZXMgb2YgU1ZHR0VsZW1lbnRzIGluIHRoZSBkcmF3aW5nIHRoYXQgYXJlIGN1cnJlbnRseSBzZWxlY3RlZC5cclxuICAgKiBOZWVkZWQgYmVjYXVzZSBub3QgYWxsIHNlbGVjdGVkIGVsZW1lbnRzIG1heSBhcHBlYXIgaW4gYSBkcmF3aW5nLiBcclxuICAgKi9cclxuICBnZXREcmF3aW5nU2VsZWN0ZWRFbGVtZW50c1JlZnMoZHJhd2luZzogRHJhd2luZykge1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRFbGVtZW50cyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGRyYXdpbmcuY29udGVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cIicgKyB0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV0gKyAnXCJdJyk7XHJcbiAgICAgIGlmIChlbGVtZW50KSBzZWxlY3RlZEVsZW1lbnRzLnB1c2goZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VsZWN0ZWRFbGVtZW50cztcclxuICB9XHJcblxyXG4gIGtpbGwoKSB7XHJcbiAgICBzdXBlci5raWxsKCk7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5kcmF3aW5nc0NvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubWFuYWdlU2VsZWN0aW9uKTtcclxuICAgIHRoaXMuY2xlYXJBbGxTZWxlY3Rpb24oKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBFbGVtZW50U2VsZWN0aW9uIH0gZnJvbSAnLi9lbGVtZW50U2VsZWN0aW9uJztcclxuaW1wb3J0IHsgQ29tbWVudCB9IGZyb20gJy4vLi4vY29tbWVudCc7XHJcbmltcG9ydCBBUEkgZnJvbSAnLi8uLi9hcGknO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFkZENvbW1lbnQgZXh0ZW5kcyBFbGVtZW50U2VsZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihuYW1lLCB0b29sQnRuLCB3b3Jrc3BhY2UpIHtcclxuICAgIHN1cGVyKG5hbWUsIHRvb2xCdG4sIHdvcmtzcGFjZSk7XHJcbiAgICBjb25zb2xlLmxvZygnQ29tbWVudCBlbGVtZW50IHRvb2wgZW5hYmxlZC4nKTtcclxuICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSB0cnVlO1xyXG4gICAgdGhpcy5ib3VuZGluZ0JveDtcclxuICAgIHRoaXMud2FpdGluZ0ZvckNvbW1lbnQgPSBmYWxzZTsgLy8gVE9ETyB1c2UgdGhpcyBpbnN0ZWFkIHRvIGF2b2lkIGNoYW5naW5nIGRyYXdpbmc/XHJcbiAgICB0aGlzLmNhbmNlbENvbW1lbnQgPSB0aGlzLmNhbmNlbENvbW1lbnQuYmluZCh0aGlzKTtcclxuICAgIHdvcmtzcGFjZS5jb21tZW50Rm9ybS5jYW5jZWxDcmVhdGVCdG4ub25jbGljayA9IHRoaXMuY2FuY2VsQ29tbWVudDtcclxuICAgIGlmICh3b3Jrc3BhY2UucGVybWlzc2lvbnMubGVuZ3RoID4gMSkgeyAvLyBUaGVyZSBpcyBhbHdheXMgYXQgbGVhc3QgdGhlIG93bmVyLlxyXG4gICAgICBjb25zdCBtZW1iZXJzRW1haWxzID0gW107XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyRW1haWwgPSB3aW5kb3cuZ2V0Q3VycmVudFVzZXIoKS5lbWFpbEFkZHJlc3M7XHJcbiAgICAgIHdvcmtzcGFjZS5wZXJtaXNzaW9ucy5mb3JFYWNoKG1lbWJlciA9PiB7XHJcbiAgICAgICAgaWYgKG1lbWJlci5lbWFpbEFkZHJlc3MgIT09IGN1cnJlbnRVc2VyRW1haWwpIHtcclxuICAgICAgICAgIG1lbWJlcnNFbWFpbHMucHVzaChgPG9wdGlvbiB2YWx1ZT1cIiR7bWVtYmVyLmVtYWlsQWRkcmVzc31cIj4ke21lbWJlci5kaXNwbGF5TmFtZX08L29wdGlvbj5gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0ubWVudGlvbnNJbnB1dC5pbm5lckhUTUwgPSBtZW1iZXJzRW1haWxzLmpvaW4oJycpO1xyXG4gICAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0uc2hvd01lbnRpb25zU2VjdGlvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd29ya3NwYWNlLmNvbW1lbnRGb3JtLmhpZGVNZW50aW9uc1NlY3Rpb24oKTtcclxuICAgIH1cclxuICAgIHRoaXMuYWRkQ29tbWVudCA9IHRoaXMuYWRkQ29tbWVudC5iaW5kKHRoaXMpO1xyXG4gICAgd29ya3NwYWNlLmNvbW1lbnRGb3JtLmFkZENvbW1lbnRCdG4ub25jbGljayA9IHRoaXMuYWRkQ29tbWVudDtcclxuICAgIC8vIEl0IGNvdWxkIGJlIGRpc2FibGVkIGFuZCBvciBmdWxsIGlmIHRoZSBwcmV2aW91cyB1c2Ugd2FzIHZpZXcgbW9kZS5cclxuICAgIHdvcmtzcGFjZS5jb21tZW50Rm9ybS5lbmFibGVGb3JtKCk7XHJcbiAgICB3b3Jrc3BhY2UuY29tbWVudEZvcm0ucmVzZXQoKTtcclxuICAgIC8vIFRoaXMgY291bGQgYmUgYSBwcm9wZXJ0eSBvZiB0aGUgVG9vbCBjbGFzcy5cclxuICAgIHRoaXMuaGFzVXNlZFBhbmVsID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRXh0ZW5kcyB0aGUgbWV0aG9kIG9mIHRoZSBzdXBlciBjbGFzcyB0byBnZXQgdGhlIHNlbGVjdGVkIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlIFRoZSBjbGljayBldmVudC5cclxuICAgKi9cclxuICBtYW5hZ2VTZWxlY3Rpb24oZSkge1xyXG4gICAgc3VwZXIubWFuYWdlU2VsZWN0aW9uKGUpO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMud2FpdGluZ0ZvckNvbW1lbnQgPSB0cnVlO1xyXG4gICAgICAvLyBTaG93IHRoZSBmb3JtIHRvIGFkZCB0aGUgY29tbWVudC5cclxuICAgICAgLy8gVE9ETyBPcGVuIHRoZSBwYW5lbCB3aGVuIGFjdGl2YXRpbmcgdGhlIHRvb2wgaW5zdGVhZC5cclxuICAgICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0uYnV0dG9uc1Zpc2liaWxpdHlNb2RlKCdjcmVhdGUnKTtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmFkZFNlY3Rpb24oJ0NvbW1lbnQnLCB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5mb3JtRWxlbWVudCk7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5vcGVuKCk7XHJcbiAgICAgIHRoaXMuaGFzVXNlZFBhbmVsID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMud2FpdGluZ0ZvckNvbW1lbnQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBhZGRDb21tZW50KCkge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgIC8vIElmICdhY3RpdmVEcmF3aW5nJyBkb2VzbnQgaGF2ZSBhIGdyb3VwIGZvciBjb21tZW50cyBjcmVhdGUgaXQuXHJcbiAgICBpZiAodGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb21tZW50c0dyb3VwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jcmVhdGVDb21tZW50c0dyb3VwKCk7XHJcbiAgICB9XHJcbiAgICAvLyBNZW50aW9ucyBpcyBvbmx5IHRyZWF0ZWQgaWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSBtZW1iZXIgaW4gdGhlIHRlYW0uXHJcbiAgICBsZXQgc2VsZWN0ZWRFbWFpbHM7XHJcbiAgICBpZiAodGhpcy53b3Jrc3BhY2UucGVybWlzc2lvbnMubGVuZ3RoID4gMSkgeyAvLyB0aGVyZSBpcyBhbHdheXMgYXQgbGVhc3QgdGhlIG93bmVyXHJcbiAgICAgIHNlbGVjdGVkRW1haWxzID0gdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0uZ2V0U2VsZWN0ZWRNZW1iZXJzKCk7XHJcbiAgICAgIGlmIChzZWxlY3RlZEVtYWlscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXJOYW1lID0gd2luZG93LmdldEN1cnJlbnRVc2VyKCkuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXJQaG90byA9IHdpbmRvdy5nZXRDdXJyZW50VXNlcigpLnBob3RvTGluaztcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5wZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZC5wdXNoKHtcclxuICAgICAgICAgIGVtYWlsczogc2VsZWN0ZWRFbWFpbHMsXHJcbiAgICAgICAgICB1c2VyTmFtZTogY3VycmVudFVzZXJOYW1lLFxyXG4gICAgICAgICAgdXNlclBob3RvOiBjdXJyZW50VXNlclBob3RvLFxyXG4gICAgICAgICAgdGV4dENvbnRlbnQ6IHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnRleHRJbnB1dC52YWx1ZSxcclxuICAgICAgICAgIHByb2plY3ROYW1lOiB0aGlzLndvcmtzcGFjZS5wcm9qZWN0TmFtZSxcclxuICAgICAgICAgIHByb2plY3RJZDogdGhpcy53b3Jrc3BhY2UucHJvamVjdElkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbW1lbnQgPSBuZXcgQ29tbWVudCh0aGlzLmN1cnJlbnRTZWxlY3Rpb24sIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnRleHRJbnB1dC52YWx1ZSwgc2VsZWN0ZWRFbWFpbHMpO1xyXG4gICAgLy8gR2V0IHJlZmVyZW5jZXMgdG8gdGhlIGVsZW1lbnRzIGluIHRoZSBkcmF3aW5nIHRvIHBhc3MgdGhlbVxyXG4gICAgY29uc3Qgc2VsRWxlbWVudHNSZWYgPSB0aGlzLmdldERyYXdpbmdTZWxlY3RlZEVsZW1lbnRzUmVmcyh0aGlzLndvcmtzcGFjZS5hY3RpdmVEcmF3aW5nKTtcclxuICAgIGNvbW1lbnQuY3JlYXRlUmVwcmVzZW50YXRpb24odGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5jb21tZW50c0dyb3VwLCBzZWxFbGVtZW50c1JlZik7IC8vIFRPRE8gcmVwbGFjZSBieSB0aGUgbmV3IG1ldGhvZCEhIVxyXG4gICAgLy8gQWRkIGNvbW1lbnQgaWQgdG8gYWxsIHRoZSBlbGVtZW50IGFycmF5cyBpbiB0aGUgb2JqIFdvcmtzcGFjZS5lbGVtZW50c0NvbW1lbnRzLlxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRTZWxlY3Rpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKCF0aGlzLndvcmtzcGFjZS5lbGVtZW50c0NvbW1lbnRzLmhhc093blByb3BlcnR5KHRoaXMuY3VycmVudFNlbGVjdGlvbltpXSkpXHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UuZWxlbWVudHNDb21tZW50c1t0aGlzLmN1cnJlbnRTZWxlY3Rpb25baV1dID0gW107XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLmVsZW1lbnRzQ29tbWVudHNbdGhpcy5jdXJyZW50U2VsZWN0aW9uW2ldXS5wdXNoKGNvbW1lbnQuaWQpO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ2VsZW1lbnRzQ29tbWVudHMgJywgdGhpcy53b3Jrc3BhY2UuZWxlbWVudHNDb21tZW50cyk7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50cy5wdXNoKGNvbW1lbnQpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy53b3Jrc3BhY2UuY29tbWVudHMpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5jbG9zZSgpO1xyXG4gICAgdGhpcy53YWl0aW5nRm9yQ29tbWVudCA9IGZhbHNlO1xyXG4gICAgLy8gV29ya3NwYWNlIG1ldGhvZCB0byBpbmRpY2F0ZSB0aGF0IHRoZXJlIGFyZSB1bnNhdmVkIGNoYW5nZXMgb24gY29tbWVudHMuXHJcbiAgICB0aGlzLndvcmtzcGFjZS51bnNhdmVkQ29tbWVudHNEYXRhKCk7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5kcmF3aW5ncy5mb3JFYWNoKGRyYXdpbmcgPT4ge1xyXG4gICAgICBpZiAoZHJhd2luZy5pZCAhPT0gdGhpcy53b3Jrc3BhY2UuYWN0aXZlRHJhd2luZy5pZCkge1xyXG4gICAgICAgIGRyYXdpbmcuY29tbWVudHNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBzdXBlci5jbGVhckFsbFNlbGVjdGlvbigpO1xyXG4gIH1cclxuXHJcblxyXG4gIGNhbmNlbENvbW1lbnQoKSB7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuY2xvc2UoKTtcclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLnJlc2V0KCk7XHJcbiAgICB0aGlzLndhaXRpbmdGb3JDb21tZW50ID0gZmFsc2U7XHJcbiAgICBzdXBlci5jbGVhckFsbFNlbGVjdGlvbigpO1xyXG4gIH1cclxuXHJcblxyXG4gIGtpbGwoKSB7XHJcbiAgICBzdXBlci5raWxsKCk7XHJcbiAgICBjb25zb2xlLmxvZygnQ29tbWVudCBlbGVtZW50IHRvb2wgZGlzYWJsZWQuJyk7XHJcbiAgICBpZiAodGhpcy53YWl0aW5nRm9yQ29tbWVudCkge1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5yZXNldCgpO1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmhhc1VzZWRQYW5lbCkge1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwucmVtb3ZlU2VjdGlvbignQ29tbWVudCcpO1xyXG4gICAgfVxyXG4gICAgLy8gUmVtb3ZlIHRoZSB0b29sIGV2ZW50IGxpc3RlbmVycy5cclxuICAgIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLmFkZENvbW1lbnRCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB0aGlzLndvcmtzcGFjZS5jb21tZW50Rm9ybS5jYW5jZWxDcmVhdGVCdG4ub25jbGljayA9IG51bGw7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEFQSSBmcm9tICcuLi9hcGknO1xyXG5pbXBvcnQgeyBFbGVtZW50U2VsZWN0aW9uIH0gZnJvbSAnLi9lbGVtZW50U2VsZWN0aW9uJztcclxuaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4uL2dlbmVyaWNzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBFbGVtZW50RGF0YSBleHRlbmRzIEVsZW1lbnRTZWxlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUsIHRvb2xCdG4sIHdvcmtzcGFjZSkge1xyXG4gICAgc3VwZXIobmFtZSwgdG9vbEJ0biwgd29ya3NwYWNlKTtcclxuICAgIGNvbnNvbGUubG9nKCdFbGVtZW50cyBkYXRhIHRvb2wgZW5hYmxlZC4nKTtcclxuICAgIHRoaXMuZWxlbWVudHNEYXRhID0gd29ya3NwYWNlLmVsZW1lbnRzRGF0YTtcclxuICAgIHRoaXMucHJvamVjdHNEYXRhID0gd29ya3NwYWNlLnByb2plY3RzRGF0YTtcclxuICAgIHRoaXMucHJvamVjdEluZGV4ID0gd29ya3NwYWNlLnByb2plY3RJbmRleDtcclxuICAgIHRoaXMuY3VycmVudEVsZW1lbnREYXRhO1xyXG4gICAgLy8gSWYgYSB0b29sIHJlcXVpcmVzIHRoZSBwYW5lbCBpdCBpcyBzcGVjaWZpZWQgaGVyZS5cclxuICAgIC8vIFRoaXMgY291bGQgYmUgYSBwcm9wZXJ0eSBvZiB0aGUgVG9vbCBjbGFzcy5cclxuICAgIHRoaXMuaGFzVXNlZFBhbmVsID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFeHRlbmRzIHRoZSBtZXRob2Qgb2YgdGhlIHN1cGVyIGNsYXNzIHRvIGdldCB0aGUgc2VsZWN0ZWQgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGUgVGhlIGNsaWNrIGV2ZW50LlxyXG4gICAqL1xyXG4gIG1hbmFnZVNlbGVjdGlvbihlKSB7XHJcbiAgICBzdXBlci5tYW5hZ2VTZWxlY3Rpb24oZSk7XHJcbiAgICAvLyBPbmx5IGlmIGFuIGVsZW1lbnQgaGFzIGJlZW4gY2xpY2tlZCBhbmQgYWRkZWQsIHNpbmNlIGl0IGNvdWxkIGhhdmUgYmVlbiByZW1vdmVkLlxyXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uICE9PSBudWxsICYmIHRoaXMuY3VycmVudFNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuc2hvd0VsZW1lbnREYXRhKHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuY2F0ZWdvcnksIHRoaXMuc2VsZWN0aW9uLmRhdGFzZXQuaWQpO1xyXG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5jb21tZW50KSB7XHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UuY29tbWVudEZvcm0udmlld0NvbW1lbnQodGhpcy5zZWxlY3Rpb24uZGF0YXNldC5jb21tZW50KTtcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuYWRkU2VjdGlvbignQ29tbWVudCcsIHRoaXMud29ya3NwYWNlLmNvbW1lbnRGb3JtLmZvcm1FbGVtZW50KTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuc2VjdGlvbnMuZmluZChzID0+IHMubmFtZSA9PT0gJ0NvbW1lbnQnKSkge1xyXG4gICAgICAgIC8vIElmIHRoZSBjb21tZW50cyBzZWN0aW9uIGlzIHRoZXJlIGZyb20gdGhlIHByZXZpb3VzIHNlbGVjdGVkIGVsZW1lbnQgaXQgc2hvdWxkIGJlIHJlbW92ZWQuXHJcbiAgICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLnJlbW92ZVNlY3Rpb24oJ0NvbW1lbnQnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSA9IHVuZGVmaW5lZDtcclxuICAgICAgdGhpcy53b3Jrc3BhY2UubWFpblBhbmVsLmNsb3NlKCk7XHJcbiAgICAgIC8vIFRPRE86IENsZWFuIGRhdGEgdGFibGVzIGNvbnRlbnQuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdEYXRhIHRhYmxlIGNsZWFuZWQuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqIEVMRU1FTlRTIEFTU09DSUFURUQgREFUQSAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBTaG93cyB0aGUgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIHNlbGVjdGVkIGVsZW1lbnQgYnkgZmV0Y2hpbmcgaXQgaWYgbmVlZGVkLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYXRlZ29yeSBcclxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgXHJcbiAgICovXHJcbiAgYXN5bmMgc2hvd0VsZW1lbnREYXRhKGNhdGVnb3J5LCBpZCkge1xyXG4gICAgbGV0IHN1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgaWYgKHRoaXMuZWxlbWVudHNEYXRhW2NhdGVnb3J5XSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSA9IHRoaXMuZWxlbWVudHNEYXRhW2NhdGVnb3J5XS5pbnN0YW5jZXNbaWRdO1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBjYXRlZ29yeURhdGEgPSB0aGlzLnByb2plY3RzRGF0YVt0aGlzLnByb2plY3RJbmRleF0uZWxlbWVudHNEYXRhLmZpbmQob2JqID0+IG9iai5uYW1lLnJlcGxhY2UoJy5qc29uJywgJycpID09PSBjYXRlZ29yeSk7XHJcbiAgICAgIGlmIChjYXRlZ29yeURhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vIFRPRE86IHNob3cgYSBsb2FkZXIgaW4gdGhlIHRhYmxlLlxyXG4gICAgICAgIGF3YWl0IEFQSS5nZXRGaWxlQ29udGVudChjYXRlZ29yeURhdGEuaWQpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgIHRoaXMuZWxlbWVudHNEYXRhW2NhdGVnb3J5XSA9IEpTT04ucGFyc2UocmVzLmJvZHkpO1xyXG4gICAgICAgICAgLy8gVE9ETzogaGlkZSB0aGUgbG9hZGVyIGluIHRoZSB0YWJsZS5cclxuICAgICAgICAgIHRoaXMuY3VycmVudEVsZW1lbnREYXRhID0gdGhpcy5lbGVtZW50c0RhdGFbY2F0ZWdvcnldLmluc3RhbmNlc1tpZF07XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YSk7XHJcbiAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgIC8vIFRPRE86IGhpZGUgdGhlIGxvYWRlciBpbiB0aGUgdGFibGUuXHJcbiAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAvLyBUT0RPOiBzaG93IGVycm9yIG1lc3NhZ2UuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUaGVyZSBpcyBubyBkYXRhIGZvciB0aGF0IGVsZW1lbnQuJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgIC8vIFNldHMgdGhlIGNvbnRlbnRzIG9uIHRoZSBwcm9wZXJ0aWVzIGFuZCBwYXJhbWV0ZXJzIHBhbmVscy5cclxuICAgICAgdGhpcy53b3Jrc3BhY2UucHJvcHNUYWJsZXNDb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVEYXRhVGFibGUodGhpcy5jdXJyZW50RWxlbWVudERhdGEucHJvcGVydGllcyk7XHJcbiAgICAgIGNvbnN0IHNlY3Rpb25zID0gW3tcclxuICAgICAgICBuYW1lOiAnUHJvcGVydGllcycsXHJcbiAgICAgICAgYm9keTogdGhpcy53b3Jrc3BhY2UucHJvcHNUYWJsZXNDb250YWluZXJcclxuICAgICAgfV07XHJcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRFbGVtZW50RGF0YS5wYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLndvcmtzcGFjZS5wYXJhbXNUYWJsZXNDb250YWluZXIuaW5uZXJIVE1MID0gdGhpcy5jcmVhdGVEYXRhVGFibGUodGhpcy5jdXJyZW50RWxlbWVudERhdGEucGFyYW1ldGVycyk7XHJcbiAgICAgICAgc2VjdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICBuYW1lOiAnUGFyYW1ldGVycycsXHJcbiAgICAgICAgICBib2R5OiB0aGlzLndvcmtzcGFjZS5wYXJhbXNUYWJsZXNDb250YWluZXJcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuYWRkU2VjdGlvbnMoc2VjdGlvbnMpO1xyXG4gICAgICB0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwub3BlbigpO1xyXG4gICAgICB0aGlzLmhhc1VzZWRQYW5lbCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyB2YXJpb3VzIEhUTUwgdGFibGVzIHdpdGggdGhlIGRhdGEgb2YgdGhlIG9iamVjdHMgYXJyYXkuXHJcbiAgICogRWFjaCBvYmplY3QgaW4gdGhlIGFycmF5IHNob3VsZCBjb250YWluICduYW1lJywgJ3ZhbHVlJyBhbmQgJ2NhdGVnb3J5Jy5cclxuICAgKiBAcGFyYW0ge0FycmF5fSBlbnRyaWVzQXJyYXkgXHJcbiAgICovXHJcbiAgY3JlYXRlRGF0YVRhYmxlKGVudHJpZXNBcnJheSkge1xyXG4gICAgY29uc3QgY2F0ZWdvcmllc1RpdGxlcyA9IFtdO1xyXG4gICAgY29uc3QgZGF0YUJ5Q2F0ZWdvcmllcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBlbnRyaWVzQXJyYXlbaV0uY2F0ZWdvcnk7XHJcbiAgICAgIGNvbnN0IGNhdGVnb3J5SW5kZXggPSBjYXRlZ29yaWVzVGl0bGVzLmluZGV4T2YoY2F0ZWdvcnkpO1xyXG4gICAgICBjb25zdCB0YWJsZVJvdyA9IGA8dHI+PHRoPiR7ZW50cmllc0FycmF5W2ldLm5hbWV9PC90aD48dGQ+JHtlbnRyaWVzQXJyYXlbaV0udmFsdWV9PC90ZD48L3RyPmA7XHJcbiAgICAgIGlmIChjYXRlZ29yeUluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgIGRhdGFCeUNhdGVnb3JpZXNbY2F0ZWdvcnlJbmRleF0ucHVzaCh0YWJsZVJvdyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgZGF0YUJ5Q2F0ZWdvcmllcy5wdXNoKFtgPHRhYmxlIGNsYXNzPVwiZGF0YS10YWJsZVwiPjx0aGVhZD48dHI+PHRoIGNvbHNwYW49XCIyXCI+JHtjYXRlZ29yeX08L3RoPjwvdHI+PC90aGVhZD5gLCB0YWJsZVJvd10pO1xyXG4gICAgICAgIGNhdGVnb3JpZXNUaXRsZXMucHVzaChjYXRlZ29yeSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGRhdGFUYWJsZSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhQnlDYXRlZ29yaWVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICBkYXRhVGFibGUucHVzaChkYXRhQnlDYXRlZ29yaWVzW2ldLmpvaW4oJycpICsgJzwvdGJvZHk+PC90YWJsZT4nKTtcclxuXHJcbiAgICByZXR1cm4gZGF0YVRhYmxlLmpvaW4oJycpO1xyXG4gIH1cclxuXHJcblxyXG4gIGtpbGwoKSB7XHJcbiAgICBzdXBlci5raWxsKCk7XHJcbiAgICAvLyBUT0RPOiBDbGVhciB0aGUgZGF0YSB0YWJsZS5cclxuICAgIC8vIFRPRE86IElmIHRoZSB1c2VyIGhhcyB0aGUgb3B0aW9uIHRvIGFuY2hvciB0aGUgcGFuZWwgdGhpcyB3b3VsZCBiZSB3cm9uZy5cclxuICAgIGlmICh0aGlzLndvcmtzcGFjZS5tYWluUGFuZWwuaXNPcGVuKSB7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaGFzVXNlZFBhbmVsKSB7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5yZW1vdmVTZWN0aW9uKCdQcm9wZXJ0aWVzJyk7XHJcbiAgICAgIHRoaXMud29ya3NwYWNlLm1haW5QYW5lbC5yZW1vdmVTZWN0aW9uKCdQYXJhbWV0ZXJzJyk7XHJcbiAgICAgIC8vIFRPRE8gSWYgaXQgaGFzIHVzZWQgYWxzbyB0aGUgQ29tbWVudCBzZWN0aW9uIGl0IHNob3VsZCBiZSByZW1vdmVkLlxyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ0VsZW1lbnRzIGRhdGEgdG9vbCBkaXNhYmxlZC4nKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgQVBJIGZyb20gJy4vYXBpJztcclxuaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5pbXBvcnQgdHlwZSB7IEFwcGxpY2F0aW9uIH0gZnJvbSAnLi9hcHAnO1xyXG5pbXBvcnQgeyBQcm9qZWN0RGF0YSB9IGZyb20gJy4vcHJvamVjdERhdGEnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNoYXJlUHJvamVjdCB7XHJcbiAgaHRtbENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgc2hhcmVGb3JtOiBIVE1MRWxlbWVudDtcclxuICBzaGFyZUZvcm1FcnJvck1zZzogSFRNTEVsZW1lbnQ7XHJcbiAgY29uZmlybUNoYW5nZXNCdG5zOiBIVE1MRWxlbWVudDtcclxuICBzYXZlQ2hhbmdlc0J0bjogSFRNTEVsZW1lbnQ7XHJcbiAgY2FuY2VsQ2hhbmdlc0J0bjogSFRNTEVsZW1lbnQ7XHJcbiAgd2FpdGluZ0FuaW1hdGlvbjogSFRNTEVsZW1lbnQ7XHJcbiAgY3VycmVudFVzZXJzQ29udGVudDogSFRNTEVsZW1lbnQ7XHJcbiAgY3VycmVudFVzZXJzVGFibGU6IEhUTUxFbGVtZW50O1xyXG4gIHBlbmRpbmdVc2Vyc0NvbnRlbnQ6IEhUTUxFbGVtZW50O1xyXG4gIHBlbmRpbmdVc2Vyc1RvQWRkVGFibGU6IEhUTUxFbGVtZW50O1xyXG4gIHNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBzaGFyZU5vdGlmaWNhdGlvbklucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIGFwcDogQXBwbGljYXRpb247XHJcbiAgLy8gVGhlIEFwcCBwcm9qZWN0c0xpc3QgaXMgbmVlZGVkIHRvIGdldCB0aGUgSFRNTCBpdGVtIG9mIHRoZSBwcm9qZWN0IHRvIHNoYXJlLlxyXG4gIHByb2plY3RzTGlzdDogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdERhdGE6IFByb2plY3REYXRhO1xyXG4gIC8vIFJlZmVyZW5jZSB0byB0aGUgcHJvamVjdCBIVE1MIGl0ZW0gZWxlbWVudCBpbiB0aGUgbGlzdC5cclxuICBwcm9qZWN0SXRlbTogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gUGVybWlzc2lvbiBpZHMgcGVuZGluZyB0byBkZWxldGUgZm9yIHRoZSBjdXJyZW50IHByb2plY3QuXHJcbiAgcGVuZGluZ1RvUmVtb3ZlOiBzdHJpbmdbXSA9IFtdO1xyXG4gIC8vIEVtYWlscyB0byBzaGFyZSB3aXRoLlxyXG4gIHBlbmRpbmdUb0FkZDogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3Ioc2hhcmVQcm9qZWN0Q29udGFpbmVyOiBIVE1MRWxlbWVudCwgQXBwOiBBcHBsaWNhdGlvbikge1xyXG4gICAgdGhpcy5odG1sQ29udGFpbmVyID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyOyAvLyBUaGlzIGlzIHVzZWQgaW4gdGhlIGNvbnRleHQgbWVudSB0byBwYXNzIGl0IHRvIHRoZSBzaG93TW9kYWxEaWFsb2coKVxyXG4gICAgdGhpcy5zaGFyZUZvcm0gPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnNoYXJlLWZvcm0nKTtcclxuICAgIHRoaXMuc2hhcmVGb3JtRXJyb3JNc2cgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLnNoYXJlLWZvcm0gPiAuZXJyb3ItbXNnJyk7XHJcbiAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucyA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubW9kYWwtbWFpbi1idG5zJyk7XHJcbiAgICB0aGlzLnNhdmVDaGFuZ2VzQnRuID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zYXZlLWNoYW5nZXMtYnRuJyk7XHJcbiAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4gPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmNhbmNlbC1jaGFuZ2VzLWJ0bicpO1xyXG4gICAgdGhpcy53YWl0aW5nQW5pbWF0aW9uID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5sb2FkZXItY29udGFpbmVyJyk7XHJcbiAgICB0aGlzLmN1cnJlbnRVc2Vyc0NvbnRlbnQgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmN1cnJlbnQtdXNlcnMnKTtcclxuICAgIHRoaXMuY3VycmVudFVzZXJzVGFibGUgPSBzaGFyZVByb2plY3RDb250YWluZXIucXVlcnlTZWxlY3RvcignLmN1cnJlbnQtdXNlcnMgdGJvZHknKTtcclxuICAgIHRoaXMucGVuZGluZ1VzZXJzQ29udGVudCA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucGVuZGluZy11c2VycycpO1xyXG4gICAgdGhpcy5wZW5kaW5nVXNlcnNUb0FkZFRhYmxlID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wZW5kaW5nLXVzZXJzIHRib2R5Jyk7XHJcbiAgICB0aGlzLnNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyID0gc2hhcmVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZS1ub3RpZmljYXRpb24nKTtcclxuICAgIHRoaXMuc2hhcmVOb3RpZmljYXRpb25JbnB1dCA9IHNoYXJlUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2hhcmUtbm90aWZpY2F0aW9uID4gaW5wdXQnKTtcclxuXHJcbiAgICAvLyBUaGUgQXBwIGlzIG5lZWRlZCB0byBhY2Nlc3Mgc29tZSBvZiBpdHMgbWV0aG9kcy5cclxuICAgIHRoaXMuYXBwID0gQXBwO1xyXG4gICAgXHJcbiAgICB0aGlzLnByb2plY3RzTGlzdCA9IEFwcC5wcm9qZWN0c0xpc3Q7XHJcblxyXG4gICAgdGhpcy5jdXJyZW50VXNlcnNUYWJsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICBpZiAoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1hY3Rpb25dJykpIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25CdG4gPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLWFjdGlvbl0nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAoYWN0aW9uQnRuLmRhdGFzZXQuYWN0aW9uID09PSAnc3RhZ2UnKSB7XHJcbiAgICAgICAgICB0aGlzLnN0YWdlTWVtYmVyVG9SZW1vdmUoYWN0aW9uQnRuLnBhcmVudEVsZW1lbnQgYXMgSFRNTFRhYmxlUm93RWxlbWVudCk7XHJcbiAgICAgICAgfSBlbHNlIHsgLy8gZS50YXJnZXQuZGF0YXNldC5hY3Rpb24gPT09ICd1bnN0YWdlJ1xyXG4gICAgICAgICAgdGhpcy51bnN0YWdlTWVtYmVyVG9SZW1vdmUoYWN0aW9uQnRuLnBhcmVudEVsZW1lbnQgYXMgSFRNTFRhYmxlUm93RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnBlbmRpbmdVc2Vyc1RvQWRkVGFibGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdCgnW2RhdGEtYWN0aW9uXScpKSB7XHJcbiAgICAgICAgdGhpcy51bnN0YWdlTWVtYmVyVG9BZGQoKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbG9zZXN0KCdbZGF0YS1hY3Rpb25dJykucGFyZW50RWxlbWVudCBhcyBIVE1MVGFibGVSb3dFbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5zYXZlQ2hhbmdlcyA9IHRoaXMuc2F2ZUNoYW5nZXMuYmluZCh0aGlzKTtcclxuXHJcbiAgICB0aGlzLnN0YWdlTWVtYmVyVG9BZGQgPSB0aGlzLnN0YWdlTWVtYmVyVG9BZGQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc2hhcmVGb3JtLm9uc3VibWl0ID0gdGhpcy5zdGFnZU1lbWJlclRvQWRkO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFdoZW4gdGhlIG1vZGFsIGRpYWxvZyB0aGF0IGNvbnRhaW5zIHRoaXMgaXMgb3BlbiB0aGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLlxyXG4gICAqL1xyXG4gIHNldFVwRGlhbG9nKHByb2plY3REYXRhOiBQcm9qZWN0RGF0YSkge1xyXG4gICAgLy8gUmVzZXQgdG8gYW4gaW5pdGlhbCBzdGF0ZS4gTWF5YmUgaXQgaXMgYmV0dGVyIHRvIGRvIHRoaXMgd2hlbiB0aGUgcHJldmlvdXMgZGlhbG9nIGlzIGNsb3NlZD9cclxuICAgIHRoaXMucGVuZGluZ1RvUmVtb3ZlID0gW107XHJcbiAgICBHZW5lcmljcy5lbXB0eU5vZGUodGhpcy5jdXJyZW50VXNlcnNUYWJsZSk7XHJcbiAgICB0aGlzLnBlbmRpbmdUb0FkZCA9IFtdO1xyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMucGVuZGluZ1VzZXJzVG9BZGRUYWJsZSk7XHJcbiAgICB0aGlzLnBlbmRpbmdVc2Vyc0NvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICB0aGlzLnNoYXJlTm90aWZpY2F0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbltpXS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgfVxyXG4gICAgLy8gRGlzYWJsZSB0aGUgbWFuYWdlIGNoYW5nZXMgYnV0dG9ucy5cclxuICAgIHRoaXMuc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICAvLyBHZXQgdGhlIHByb2plY3QgaW5mby5cclxuICAgIHRoaXMucHJvamVjdERhdGEgPSBwcm9qZWN0RGF0YTtcclxuICAgIHRoaXMucHJvamVjdEl0ZW0gPSB0aGlzLnByb2plY3RzTGlzdC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1wcm9qLWlkPVwiJyArIHByb2plY3REYXRhLmlkICsgJ1wiXScpO1xyXG4gICAgLy8gQ3JlYXRlIGxpc3Qgb2YgdXNlcnMgaWYgYW55LlxyXG4gICAgaWYgKHByb2plY3REYXRhLnNoYXJlZCkge1xyXG4gICAgICBjb25zdCB1c2Vyczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgY29uc3QgY3VycmVudFVzZXJFbWFpbCA9IHdpbmRvdy5nZXRDdXJyZW50VXNlcigpLmVtYWlsQWRkcmVzcztcclxuICAgICAgY29uc3Qgb3duZXIgPSAnPHRkIHRpdGxlPVwiUHJvamVjdCBvd25lclwiPjxzdmc+PHVzZSBocmVmPVwiI2tleUljb25cIj48L3VzZT48L3N2Zz48L3RkPic7XHJcbiAgICAgIGNvbnN0IGNvbGxhYiA9ICc8dGQgY2xhc3M9XCJhY3Rpb24tYnRuXCIgZGF0YS1hY3Rpb249XCJzdGFnZVwiPjxzdmc+PHVzZSBocmVmPVwiI2Nyb3NzSWNvblwiPjwvdXNlPjwvc3ZnPjwvdGQ+JztcclxuICAgICAgcHJvamVjdERhdGEucGVybWlzc2lvbnMuZm9yRWFjaCh1c2VyID0+IHtcclxuICAgICAgICB1c2Vycy5wdXNoKGBcclxuICAgICAgICAgIDx0ciBkYXRhLXBlcm1pc3Npb249XCIke3VzZXIuaWR9XCI+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cInVzZXItZGF0YVwiPlxyXG4gICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHt1c2VyLnBob3RvTGlua31cIj5cclxuICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPHNwYW4+JHt1c2VyLmVtYWlsQWRkcmVzcyA9PT0gY3VycmVudFVzZXJFbWFpbCA/ICdZb3UnIDogdXNlci5kaXNwbGF5TmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3Bhbj4ke3VzZXIuZW1haWxBZGRyZXNzfTwvc3Bhbj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgJHt1c2VyLnJvbGUgPT09ICdvd25lcicgPyBvd25lciA6IGNvbGxhYn1cclxuICAgICAgICAgIDwvdHI+YCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmN1cnJlbnRVc2Vyc1RhYmxlLmlubmVySFRNTCA9IHVzZXJzLmpvaW4oJycpO1xyXG4gICAgICAvLyBTaG93IHRoZSB0YWJsZSBiZWNhdXNlIGl0IGNvdWxkIGJlIGhpZGRlbiBmcm9tIHRoZSBwcmV2aW91cyB0aW1lLlxyXG4gICAgICB0aGlzLmN1cnJlbnRVc2Vyc0NvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnZW1wdHknKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY3VycmVudFVzZXJzQ29udGVudC5jbGFzc0xpc3QuYWRkKCdlbXB0eScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhIG1lbWJlciBlbWFpbCB0byB0aGUgd2FpdGluZyBsaXN0IHRvIGJlIGFkZGVkIGFzIG1lbWJlci5cclxuICAgKiBAcGFyYW0gZSBUaGUgc3VibWl0IGV2ZW50IG9mIHRoZSBmb3JtIHRvIHN0YWdlIG1lbWJlcnMgdG8gYWRkLlxyXG4gICAqL1xyXG4gIHN0YWdlTWVtYmVyVG9BZGQoZTogRXZlbnQpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGVtYWlsQWRkcmVzcyA9ICgoZS50YXJnZXQgYXMgSFRNTEZvcm1FbGVtZW50KS5lbGVtZW50cy5uYW1lZEl0ZW0oJ2VtYWlsJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICBpZiAoZW1haWxBZGRyZXNzICE9PSAnJyAmJiAhdGhpcy5wZW5kaW5nVG9BZGQuaW5jbHVkZXMoZW1haWxBZGRyZXNzKSAmJiB0aGlzLnByb2plY3REYXRhLnBlcm1pc3Npb25zLmZpbmQocCA9PiBwLmVtYWlsQWRkcmVzcyA9PT0gZW1haWxBZGRyZXNzKSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuc2hhcmVGb3JtRXJyb3JNc2cuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgIHRoaXMucGVuZGluZ1RvQWRkLnB1c2goZW1haWxBZGRyZXNzKTtcclxuICAgICAgdGhpcy5wZW5kaW5nVXNlcnNUb0FkZFRhYmxlLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYFxyXG4gICAgICAgIDx0ciBkYXRhLWVtYWlsPVwiJHtlbWFpbEFkZHJlc3N9XCI+XHJcbiAgICAgICAgICA8dGQgY2xhc3M9XCJ1c2VyLWRhdGFcIj48c3Bhbj4ke2VtYWlsQWRkcmVzc308L3NwYW4+PC90ZD5cclxuICAgICAgICAgIDx0ZCBjbGFzcz1cImFjdGlvbi1idG5cIiBkYXRhLWFjdGlvbj1cInN0YWdlXCI+PHN2Zz48dXNlIGhyZWY9XCIjY3Jvc3NJY29uXCI+PC91c2U+PC9zdmc+PC90ZD5cclxuICAgICAgICA8L3RyPmApO1xyXG4gICAgICAoKGUudGFyZ2V0IGFzIEhUTUxGb3JtRWxlbWVudCkuZWxlbWVudHMubmFtZWRJdGVtKCdlbWFpbCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gJyc7XHJcbiAgICAgIC8vIEFjdGlvbnMgd2hlbiB0aGUgZmlyc3QgZW1haWwgaXMgYWRkZWQgdG8gdGhlIHRhYmxlLlxyXG4gICAgICBpZiAodGhpcy5wZW5kaW5nVG9BZGQubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVXNlcnNDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgIHRoaXMuc2hhcmVOb3RpZmljYXRpb25Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgdGhpcy5zaGFyZU5vdGlmaWNhdGlvbklucHV0LmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIElmIHRoaXMgbWFrZXMgdGhhdCB0aGVyZSBhcmUgY2hhbmdlcyB0byBzYXZlIGVuYWJsZSB0aGUgYnV0dG9ucy5cclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nVG9SZW1vdmUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBFbmFibGUgdGhlIG1hbmFnZSBjaGFuZ2VzIGJ1dHRvbnMuXHJcbiAgICAgICAgICB0aGlzLnNhdmVDaGFuZ2VzQnRuLm9uY2xpY2sgPSB0aGlzLnNhdmVDaGFuZ2VzO1xyXG4gICAgICAgICAgdGhpcy5jYW5jZWxDaGFuZ2VzQnRuLm9uY2xpY2sgPSB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zaGFyZUZvcm1FcnJvck1zZy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgY29uc29sZS5sb2coJ05vdCB2YWxpZCBpbnB1dC4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGZyb20gdGhlIHN0YWdlZCBzdGF0ZSBhIG1lbWJlciBwZW5kaW5nIHRvIGJlIGFkZGVkLlxyXG4gICAqIEBwYXJhbSBlbGVtZW50IFRhYmxlIHJvdyBIVE1MIGVsZW1lbnQgd2l0aCB0aGUgZGF0YSBvZiB0aGUgbWVtYmVyIHRvIHVuc3RhZ2UuIEl0IHNob3VsZCBoYXZlIGEgZGF0YSBhdHRyIHdpdGggdGhlIGVtYWlsLlxyXG4gICAqL1xyXG4gIHVuc3RhZ2VNZW1iZXJUb0FkZChlbGVtZW50OiBIVE1MVGFibGVSb3dFbGVtZW50KSB7XHJcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLnBlbmRpbmdUb0FkZC5pbmRleE9mKGVsZW1lbnQuZGF0YXNldC5lbWFpbCk7XHJcbiAgICB0aGlzLnBlbmRpbmdUb0FkZC5zcGxpY2UoaXRlbUluZGV4LCAxKTtcclxuICAgIGVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAvLyBBY3Rpb25zIHdoZW4gdGhlIHRhYmxlIGhhcyBiZWNvbWUgZW1wdHkuXHJcbiAgICBpZiAodGhpcy5wZW5kaW5nVG9BZGQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMucGVuZGluZ1VzZXJzQ29udGVudC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgdGhpcy5zaGFyZU5vdGlmaWNhdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgaWYgKHRoaXMucGVuZGluZ1RvUmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERpc2FibGUgdGhlIG1hbmFnZSBjaGFuZ2VzIGJ1dHRvbnMuXHJcbiAgICAgICAgdGhpcy5zYXZlQ2hhbmdlc0J0bi5vbmNsaWNrID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBBZGRzIGEgY3VycmVudCBtZW1iZXIgdG8gdGhlIHdhaXRpbmcgbGlzdCB0byBiZSByZW1vdmVkIGFzIG1lbWJlci5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBUYWJsZSByb3cgSFRNTCBlbGVtZW50IHdpdGggdGhlIGRhdGEgb2YgdGhlIG1lbWJlciB0byBkZWxldGUuIEl0IHNob3VsZCBoYXZlIGEgZGF0YSBhdHRyIHdpdGggdGhlIHBlcm1pc3Npb24gaWQuXHJcbiAgICovXHJcbiAgc3RhZ2VNZW1iZXJUb1JlbW92ZShlbGVtZW50OiBIVE1MVGFibGVSb3dFbGVtZW50KSB7XHJcbiAgICB0aGlzLnBlbmRpbmdUb1JlbW92ZS5wdXNoKGVsZW1lbnQuZGF0YXNldC5wZXJtaXNzaW9uKTtcclxuICAgIC8vIFNldCB0aGUgcm93IGVsZW1lbnQgYXMgcGVuZGluZyB0byBkZWxldGUuXHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RvLWRlbGV0ZScpO1xyXG4gICAgLy8gQ2hhbmdlIHRoZSByb3cgYnV0dG9uIGFjdGlvbiBhbmQgaWNvbi5cclxuICAgIGNvbnN0IGFjdGlvbkJ0biA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi1idG4nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGFjdGlvbkJ0bi5pbm5lckhUTUwgPSAnPHN2Zz48dXNlIGhyZWY9XCIjcmVsb2FkSWNvblwiPjwvdXNlPjwvc3ZnPic7XHJcbiAgICBhY3Rpb25CdG4uZGF0YXNldC5hY3Rpb24gPSBcInVuc3RhZ2VcIjtcclxuICAgIC8vIElmIHRoaXMgbWFrZXMgdGhhdCB0aGVyZSBhcmUgY2hhbmdlcyB0byBzYXZlIGVuYWJsZSB0aGUgJ2NvbmZpcm0gY2hhbmdlcycgYnV0dG9ucy5cclxuICAgIGlmICh0aGlzLnBlbmRpbmdUb0FkZC5sZW5ndGggPT09IDAgJiYgdGhpcy5wZW5kaW5nVG9SZW1vdmUubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEVuYWJsZSB0aGUgbWFuYWdlIGNoYW5nZXMgYnV0dG9ucy5cclxuICAgICAgdGhpcy5zYXZlQ2hhbmdlc0J0bi5vbmNsaWNrID0gdGhpcy5zYXZlQ2hhbmdlcztcclxuICAgICAgdGhpcy5jYW5jZWxDaGFuZ2VzQnRuLm9uY2xpY2sgPSB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgZnJvbSB0aGUgc3RhZ2VkIHN0YXRlIGEgbWVtYmVyIHBlbmRpbmcgdG8gYmUgcmVtb3ZlZC5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBUYWJsZSByb3cgSFRNTCBlbGVtZW50IHdpdGggdGhlIGRhdGEgb2YgdGhlIG1lbWJlciB0byBkZWxldGUuIEl0IHNob3VsZCBoYXZlIGEgZGF0YSBhdHRyIHdpdGggdGhlIHBlcm1pc3Npb24gaWQuXHJcbiAgICovXHJcbiAgdW5zdGFnZU1lbWJlclRvUmVtb3ZlKGVsZW1lbnQ6IEhUTUxUYWJsZVJvd0VsZW1lbnQpIHtcclxuICAgIC8vIFJlbW92ZSB0aGUgcGVybWlzc2lvbiBpZCBmcm9tIHRoZSBhcnJheS5cclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wZW5kaW5nVG9SZW1vdmUuaW5kZXhPZihlbGVtZW50LmRhdGFzZXQucGVybWlzc2lvbik7XHJcbiAgICB0aGlzLnBlbmRpbmdUb1JlbW92ZS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgLy8gUmVtb3ZlIGl0cyB0by1kZWxldGUgY2xhc3MuXHJcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3RvLWRlbGV0ZScpO1xyXG4gICAgLy8gQ2hhbmdlIHRoZSByb3cgYnV0dG9uIGFjdGlvbiBhbmQgaWNvbi5cclxuICAgIGNvbnN0IGFjdGlvbkJ0biA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGlvbi1idG4nKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGFjdGlvbkJ0bi5pbm5lckhUTUwgPSAnPHN2Zz48dXNlIGhyZWY9XCIjY3Jvc3NJY29uXCI+PC91c2U+PC9zdmc+JztcclxuICAgIGFjdGlvbkJ0bi5kYXRhc2V0LmFjdGlvbiA9IFwic3RhZ2VcIjtcclxuICAgIC8vIElmIHRoaXMgbWFrZXMgdGhhdCB0aGVyZSBhcmUgbm8gY2hhbmdlcyB0aGVuIGRpc2FibGUgdGhlICdjb25maXJtIGNoYW5nZXMnIGJ1dHRvbnMuXHJcbiAgICBpZiAodGhpcy5wZW5kaW5nVG9SZW1vdmUubGVuZ3RoID09PSAwICYmIHRoaXMucGVuZGluZ1RvQWRkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5jb25maXJtQ2hhbmdlc0J0bnMuY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBEaXNhYmxlIHRoZSBtYW5hZ2UgY2hhbmdlcyBidXR0b25zLlxyXG4gICAgICB0aGlzLnNhdmVDaGFuZ2VzQnRuLm9uY2xpY2sgPSBudWxsO1xyXG4gICAgICB0aGlzLmNhbmNlbENoYW5nZXNCdG4ub25jbGljayA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogUmVtb3ZlcyBmcm9tIHRoZSBzdGFnZWQgc3RhdGUgYWxsIGN1cnJlbnQgbWVtYmVycyB0aGF0IHdlcmUgcGVuZGluZyB0byBiZSByZW1vdmVkLlxyXG4gICAqL1xyXG4gIC8vIFRPRE86IENoYW5nZSB0byBhIHJlc2V0IG1ldGhvZCB0aGF0IGNsZWFucyBhbnkgc3RhZ2VkIG1lbWJlcj9cclxuICAvLyB1bnN0YWdlQWxsTWVtYmVyc1RvUmVtb3ZlKCkge1xyXG4gIC8vICAgLy8gUmVtb3ZlIHRoZSBwZW5kaW5nIHRvIGRlbHRlIHN0YXRlIGZyb20gdGhlIHJvdyBlbGVtZW50cy5cclxuICAvLyAgIHRoaXMucGVuZGluZ1RvUmVtb3ZlLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgLy8gICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndG8tZGVsZXRlJyk7XHJcbiAgLy8gICB9KTtcclxuICAvLyAgIC8vIENsZWFyIHRoZSBzdGFnZWQgdXNlcnMuXHJcbiAgLy8gICB0aGlzLnBlbmRpbmdUb1JlbW92ZSA9IFtdO1xyXG4gIC8vICAgLy8gSWYgdGhpcyBtYWtlcyB0aGF0IHRoZXJlIGFyZSBubyBjaGFuZ2VzIHRoZW4gZGlzYWJsZSB0aGUgJ2NvbmZpcm0gY2hhbmdlcycgYnV0dG9ucy5cclxuICAvLyAgIGlmICh0aGlzLnBlbmRpbmdUb0FkZC5sZW5ndGggPT09IDApIHtcclxuICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpcm1DaGFuZ2VzQnRucy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gIC8vICAgICAgIHRoaXMuY29uZmlybUNoYW5nZXNCdG5zLmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XHJcbiAgLy8gICAgIH1cclxuICAvLyAgICAgLy8gVE9ETyB0byBkaXNhYmxlIHRoZSBidG5zIGFkZCB0aGUgZXZlbnQgbGlzdGVuZXIgb3IgY2hhbmdlIGEgYm9vbFxyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZHMgYWxsIG1lbWJlcnMgdGhhdCB3ZXJlIGluIHRoZSBwZW5kaW5nVG9BZGQgYXJyYXkgdG8gdGhlIHRlYW0uXHJcbiAgICovXHJcbiAgYWRkU3RhZ2VkTWVtYmVycygpIHtcclxuICAgIGNvbnN0IGFkZE1lbWJlcnNQcm9taXNlczogUHJvbWlzZTxnYXBpLmNsaWVudC5SZXNwb25zZTxnYXBpLmNsaWVudC5kcml2ZS5QZXJtaXNzaW9uPj5bXSA9IFtdO1xyXG4gICAgLy8gRGVsYXkgaXMgcmVxdWlyZWQgYmVjYXVzZSBHRCBBUEkgZG9lc250IGFsbG93IHRvIGNyZWF0ZSBzZXZlcmFsIHBlcm1pc3Npb25zIGF0IHRoZSBzYW1lIHRpbWUuXHJcbiAgICBjb25zdCBkZWxheSA9IDYwMDtcclxuICAgIHRoaXMucGVuZGluZ1RvQWRkLmZvckVhY2goKGVtYWlsLCBpKSA9PiB7XHJcbiAgICAgIGFkZE1lbWJlcnNQcm9taXNlcy5wdXNoKEFQSS5zaGFyZUZpbGUodGhpcy5wcm9qZWN0RGF0YS5pZCwgZW1haWwsIGRlbGF5ICogaSkpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoYWRkTWVtYmVyc1Byb21pc2VzKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmVzIGFsbCBjdXJyZW50IG1lbWJlcnMgdGhhdCB3ZXJlIGluIHRoZSBwZW5kaW5nVG9SZW1vdmUgYXJyYXkgZnJvbSB0aGUgdGVhbS5cclxuICAgKi9cclxuICByZW1vdmVTdGFnZWRNZW1iZXJzKCkge1xyXG4gICAgY29uc3QgcmVtb3ZlTWVtYmVyc1Byb21pc2VzOiBQcm9taXNlPGdhcGkuY2xpZW50LlJlc3BvbnNlPHt9Pj5bXSA9IFtdO1xyXG4gICAgdGhpcy5wZW5kaW5nVG9SZW1vdmUuZm9yRWFjaChwZXJtaXNzaW9uSWQgPT4ge1xyXG4gICAgICByZW1vdmVNZW1iZXJzUHJvbWlzZXMucHVzaChBUEkuc3RvcFNoYXJpbmdGaWxlKHRoaXMucHJvamVjdERhdGEuaWQsIHBlcm1pc3Npb25JZCkpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVtb3ZlTWVtYmVyc1Byb21pc2VzKTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBTYXZlIGFsbCB0aGUgY2hhbmdlcyBvZiBhZGRpdGlvbiBhbmQgcmVtb3ZhbCBvZiBtZW1iZXJzLlxyXG4gICAqL1xyXG4gIGFzeW5jIHNhdmVDaGFuZ2VzKCkge1xyXG4gICAgdGhpcy53YWl0aW5nQW5pbWF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgbGV0IGFkZGl0aW9uU3VjY2VzcyA9IHRydWU7XHJcbiAgICBsZXQgcmVtb3ZhbFN1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgLy8gUmVtb3ZhbCBwcm9jZXNzLlxyXG4gICAgaWYgKHRoaXMucGVuZGluZ1RvUmVtb3ZlLmxlbmd0aCA+IDApIHtcclxuICAgICAgYXdhaXQgdGhpcy5yZW1vdmVTdGFnZWRNZW1iZXJzKCkudGhlbihyZXNBcnIgPT4ge1xyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcGVybWlzc2lvbklkcyBhbHNvIGZyb20gdGhlIGNvcnJlc3BvbmRpbmcgcHJvamVjdHNEYXRhIG9iamVjdC5cclxuICAgICAgICB0aGlzLnBlbmRpbmdUb1JlbW92ZS5mb3JFYWNoKHBlcm1pc3Npb25JZCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMucHJvamVjdERhdGEucGVybWlzc2lvbnMuZmluZEluZGV4KHBlcm1pc3Npb24gPT4gcGVybWlzc2lvbi5pZCA9PT0gcGVybWlzc2lvbklkKTtcclxuICAgICAgICAgIHRoaXMucHJvamVjdERhdGEucGVybWlzc2lvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSwgcmVqID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZWopO1xyXG4gICAgICAgIHJlbW92YWxTdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gQWRkaXRpb24gcHJvY2Vzcy5cclxuICAgIGlmICh0aGlzLnBlbmRpbmdUb0FkZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuYWRkU3RhZ2VkTWVtYmVycygpLnRoZW4ocmVzQXJyID0+IHtcclxuICAgICAgICAvLyAncmVzQXJyJyBpcyBhbiBhcnJheSB3aXRoIGFsbCB0aGUgcmVzb2x2ZWQgcHJvbWlzZXMuXHJcbiAgICAgICAgcmVzQXJyLmZvckVhY2goKHJlcywgaSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0RGF0YS5wZXJtaXNzaW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgaWQ6IHJlcy5yZXN1bHQuaWQsXHJcbiAgICAgICAgICAgIGVtYWlsQWRkcmVzczogdGhpcy5wZW5kaW5nVG9BZGRbaV0sXHJcbiAgICAgICAgICAgIHJvbGU6IHJlcy5yZXN1bHQucm9sZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHJlcy5yZXN1bHQuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgIHBob3RvTGluazogcmVzLnJlc3VsdC5waG90b0xpbmtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnNoYXJlTm90aWZpY2F0aW9uSW5wdXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgQVBJLnNlbmRTaGFyaW5nUHJvamVjdEVtYWlsKHdpbmRvdy5nZXRDdXJyZW50VXNlcigpLmRpc3BsYXlOYW1lLCB0aGlzLnBlbmRpbmdUb0FkZCwgdGhpcy5wcm9qZWN0RGF0YS5uYW1lLCB0aGlzLnByb2plY3REYXRhLmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSXQgY291bGQgYmUgdGhhdCBpcyB0aGUgZmlyc3QgdGltZSBhIGNvbGxhYm9yYXRvclxyXG4gICAgICAgIC8vIGlzIGFkZGVkIHNvIHRoZSBGQ00gZGV2aWNlIHRva2VuIHdpbGwgYmUgYXNrZWQuXHJcbiAgICAgICAgd2luZG93LnNhdmVNZXNzYWdpbmdEZXZpY2VUb2tlbigpO1xyXG4gICAgICB9LCByZWogPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlaik7XHJcbiAgICAgICAgYWRkaXRpb25TdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gQWN0aW9ucyBkZXBlbmRpbmcgb24gdGhlIHN1Y2Nlc3Mgb3IgZmFpbHVyZS5cclxuICAgIGlmIChhZGRpdGlvblN1Y2Nlc3MgJiYgcmVtb3ZhbFN1Y2Nlc3MpIHtcclxuICAgICAgaWYgKHRoaXMucHJvamVjdERhdGEucGVybWlzc2lvbnMubGVuZ3RoID09PSAxKSB7IC8vIDEgYmVjYXVzZSB0aGVyZSBpcyBhbHdheXMgYXQgbGVhc3QgdGhlIG93bmVyLlxyXG4gICAgICAgIHRoaXMucHJvamVjdERhdGEuc2hhcmVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvamVjdEl0ZW0ucXVlcnlTZWxlY3RvcignLnNoYXJlZEljb24nKSkge1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0SXRlbS5xdWVyeVNlbGVjdG9yKCcuc2hhcmVkSWNvbicpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnByb2plY3REYXRhLnNoYXJlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByb2plY3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zaGFyZWRJY29uJykpIHtcclxuICAgICAgICAgIHRoaXMucHJvamVjdEl0ZW0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgJzxpbWcgY2xhc3M9XCJzaGFyZWRJY29uXCIgc3JjPVwic3JjL2Fzc2V0cy9pY29ucy9zaGFyZUljb24uc3ZnXCI+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuYXBwLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgJ1Byb2plY3QgbWVtYmVycyB1cGRhdGVkIHN1Y2Nlc3NmdWxseS4nLCA1MDAwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYXBwLnNob3dNZXNzYWdlKCdlcnJvcicsICdTb21ldGhpbmcgd2VudCB3cm9uZywgbWVtYmVyIGNoYW5nZXMgY291bGQgbm8gYmUgc2F2ZWQuJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLndhaXRpbmdBbmltYXRpb24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5vdGlmaWNhdGlvbnNNYW5hZ2VyIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpZmljYXRpb25CdG4nKTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub3RpZmljYXRpb25zQ29udGFpbmVyJyk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25vdGlmaWNhdGlvbnNDb250YWluZXIgPiAubm90aWZpY2F0aW9ucy1ib2R5Jyk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNCdG4ub25jbGljayA9ICgpID0+IHRoaXMubm90aWZpY2F0aW9uc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCdsaScpKSB0aGlzLnZpZXdOb3RpZmljYXRpb24oZS50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmlkKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5ub3RpZmljYXRpb25zID0gW107XHJcbiAgfVxyXG5cclxuICAvLyBTaG93IG5vdGlmaWNhdGlvbnMgcGFuZWxcclxuICAvLyBzaG93Tm90aWZpY2F0aW9uc1BhbmVsKCkge1xyXG5cclxuICAvLyB9XHJcblxyXG4gIC8vIEhpZGUgbm90aWZpY2F0aW9ucyBwYW5lbFxyXG4gIC8vIGhpZGVOb3RpZmljYXRpb25zUGFuZWwoKSB7XHJcblxyXG4gIC8vIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBub3RpZmljYXRpb24gcmVwcmVzZW50YXRpb24gdGhhdCBhcHBlYXJzIGluIHRoZSBVSSBhbmQgYWRkcyBhbiBvYmplY3RcclxuICAgKiB3aXRoIGFsbCB0aGUgbm90aWZpY2F0aW9uIGRhdGEgdG8gdGhlIG5vdGlmaWNhdGlvbnMgYXJyYXkuXHJcbiAgICogICBzcmMvYXNzZXRzL2F2YXRhci1wbGFjZWhvbGRlci5wbmdcclxuICAgKiBAcGFyYW0ge09iamVjdH0gbm90aWZpY2F0aW9uT2JqIEl0IHNob3VsZCBoYXZlIGF1dGhvciwgcHJvamVjdE5hbWUsIHByb2plY3RJZCwgdGV4dCBhbmQgcGhvdG9MaW5rIGVudHJpZXMuXHJcbiAgICovXHJcbiAgY3JlYXRlTm90aWZpY2FjdGlvbihub3RpZmljYXRpb25PYmopIHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uSWQgPSBHZW5lcmljcy51dWlkdjQoKTtcclxuICAgIG5vdGlmaWNhdGlvbkVsZW1lbnQuZGF0YXNldC5pZCA9IG5vdGlmaWNhdGlvbklkO1xyXG4gICAgbm90aWZpY2F0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwZW5kaW5nJyk7XHJcbiAgICBub3RpZmljYXRpb25FbGVtZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgPGltZyBjbGFzcz1cIm5vdGlmaWNhdGlvbi10aHVtYlwiIHNyYz1cIiR7bm90aWZpY2F0aW9uT2JqLnBob3RvTGlua31cIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1jb250ZW50XCI+XHJcbiAgICAgICAgPGg0PiR7bm90aWZpY2F0aW9uT2JqLmF1dGhvcn0gbWVudGlvbmVkIHlvdSBpbiBhIGNvbW1lbnQgb24gdGhlIHByb2plY3QgJHtub3RpZmljYXRpb25PYmoucHJvamVjdE5hbWV9PC9oND5cclxuICAgICAgICA8cD4ke25vdGlmaWNhdGlvbk9iai50ZXh0fTwvcD5cclxuICAgICAgPC9kaXY+YDtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0xpc3QucHJlcGVuZChub3RpZmljYXRpb25FbGVtZW50KTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9ucy5wdXNoKHsgaWQ6IG5vdGlmaWNhdGlvbklkLCByZXByZXNlbnRhdGlvbjogbm90aWZpY2F0aW9uRWxlbWVudCwgc3RhdGU6ICdwZW5kaW5nJywgZGF0YTogbm90aWZpY2F0aW9uT2JqIH0pO1xyXG4gICAgLy8gRW5hYmxlcyB0aGUgaWNvbiB0byBpbmRpY2F0ZSB0aGF0IHRoZXJlIGFyZSBwZW5kaW5nIG5vdGlmaWNhdGlvbnMuXHJcbiAgICAvLyBUT0RPOiBEb250IGRvIGl0IGVhY2ggdGltZS5cclxuICAgIHRoaXMubm90aWZpY2F0aW9uc0J0bi5jbGFzc0xpc3QuYWRkKCdlbmFibGVkJyk7XHJcbiAgICBpZiAodGhpcy5ub3RpZmljYXRpb25zLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICB0aGlzLm5vdGlmaWNhdGlvbnNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZW1wdHknKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEN1cnJlbnRseSB3aGVuIGEgbm90aWZpY2F0aW9uIGlzIHZpc2l0ZWQgaXQgaXMgcmVtb3ZlZFxyXG4gIC8vIGJ1dCBpdCBjYW4gYmUgY2hhbmdlZCB0byBrZWVwIHRoZW0gaW4gaGlzdG9yeS5cclxuXHJcbiAgLyoqXHJcbiAgICogbWF4aW11bSBvZiAxMCByZWFkIG5vdGlmaWNhdGlvbnMgb3Igbm8gbGltaXQgaWYgdGhleSBhcmUgdW5yZWFkXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5vdGlmaWNhdGlvbklkIFxyXG4gICAqL1xyXG4gIGRlbGV0ZU5vdGlmaWNhY3Rpb24obm90aWZpY2F0aW9uSWQpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5ub3RpZmljYXRpb25zLmZpbmRJbmRleChuID0+IG4uaWQgPT09IG5vdGlmaWNhdGlvbklkKTtcclxuICAgIHRoaXMubm90aWZpY2F0aW9uc1tpbmRleF0ucmVwcmVzZW50YXRpb24ucmVtb3ZlKCk7XHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIC8vIFRPRE86IElmIHRoZXJlIGFyZSBubyBtb3JlIG5vdGlmaWNhdGlvbnMgdGhlbiBhZGQgdGhlIGVtcHR5IGNsYXNzIHRvIHRoaXMubm90aWZpY2F0aW9uc0NvbnRhaW5lclxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVE9ETzogc2VwYXJhdGUgZ29Ub05vdGlmaWNhdGlvbiBhbmQgbWFya0FzUmVhZCA/XHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5vdGlmaWNhdGlvbklkIFxyXG4gICAqL1xyXG4gIHZpZXdOb3RpZmljYXRpb24obm90aWZpY2F0aW9uSWQpIHtcclxuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHRoaXMubm90aWZpY2F0aW9ucy5maW5kKG4gPT4gbi5pZCA9PT0gbm90aWZpY2F0aW9uSWQpO1xyXG4gICAgbm90aWZpY2F0aW9uLnN0YXRlID0gJ3JlYWQnO1xyXG4gICAgbm90aWZpY2F0aW9uLnJlcHJlc2VudGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3BlbmRpbmcnKTtcclxuICAgIC8vIFRPRE86IGdvIHRvIHRoZSBub3RpZmljYXRpb24sIGluIGEgbmV3IHRhYj8gdGhlIHByb2plY3QgaWQgaXMgaW4gbm90aWZpY2F0aW9uLmRhdGEucHJvamVjdElkXHJcbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gbW9yZSBwZW5kaW5nIG5vdGlmaWNhdGlvbnMgc2V0IHRoZSBpY29uIG5vcm1hbC5cclxuICAgIGlmICh0aGlzLm5vdGlmaWNhdGlvbnMuZmluZChuID0+IG4uc3RhdGUgPT09ICdwZW5kaW5nJykgPT09IHVuZGVmaW5lZClcclxuICAgICAgdGhpcy5ub3RpZmljYXRpb25zQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZWQnKTtcclxuICAgIC8vIFRPRE86IERlbGV0ZSBub3RpZmljYXRpb24gb3Iga2VlcCBpdCBpbiBoaXN0b3J5ID9cclxuICAgIC8vIHRoaXMuZGVsZXRlTm90aWZpY2FjdGlvbihub3RpZmljYXRpb25JZCk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgQVBJIGZyb20gJy4vYXBpJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZW5hbWVQcm9qZWN0IHtcclxuICBjb25zdHJ1Y3RvcihyZW5hbWVQcm9qZWN0Q29udGFpbmVyLCBBcHApIHtcclxuICAgIHRoaXMuaHRtbENvbnRhaW5lciA9IHJlbmFtZVByb2plY3RDb250YWluZXI7XHJcbiAgICB0aGlzLnJlbmFtZUZvcm0gPSByZW5hbWVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcclxuICAgIHRoaXMuaW5wdXQgPSByZW5hbWVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0gPiBkaXY6Zmlyc3QtY2hpbGQgPiBpbnB1dCcpO1xyXG4gICAgdGhpcy5yZW5hbWVQcm9qZWN0RXJyb3JNc2cgPSByZW5hbWVQcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci1tc2cnKTtcclxuICAgIHRoaXMuY2FuY2VsQnRuID0gcmVuYW1lUHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdmb3JtID4gZGl2Omxhc3QtY2hpbGQgPiAuY2FuY2VsLWJ0bicpO1xyXG5cclxuICAgIC8vIFRoZSBBcHAgaXMgbmVlZGVkIHRvIGFjY2VzcyBzb21lIG9mIGl0cyBtZXRob2RzLlxyXG4gICAgdGhpcy5hcHAgPSBBcHA7XHJcblxyXG4gICAgdGhpcy5wcm9qZWN0TGlzdEl0ZW07XHJcblxyXG4gICAgdGhpcy5wcm9qZWN0SWQ7XHJcbiAgICB0aGlzLmN1cnJlbnROYW1lO1xyXG5cclxuICAgIHRoaXMuZW1wdHlJbnB1dFZhbHVlID0gbmV3IFJlZ0V4cCgvXihcXHN8XFx0KSokLyk7XHJcblxyXG4gICAgdGhpcy5yZW5hbWVQcm9qZWN0ID0gdGhpcy5yZW5hbWVQcm9qZWN0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnJlbmFtZUZvcm0ub25zdWJtaXQgPSB0aGlzLnJlbmFtZVByb2plY3Q7XHJcblxyXG4gICAgdGhpcy5jYW5jZWxCdG4ub25jbGljayA9IGUgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgnJyk7XHJcbiAgICAgIEFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXaGVuIHRoZSBtb2RhbCBkaWFsb2cgdGhhdCBjb250YWlucyB0aGlzIGlzIG9wZW4gdGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBwcm9qZWN0TGlzdEl0ZW0gXHJcbiAgICovXHJcbiAgc2V0VXBEaWFsb2cocHJvamVjdExpc3RJdGVtKSB7XHJcbiAgICB0aGlzLnByb2plY3RMaXN0SXRlbSA9IHByb2plY3RMaXN0SXRlbTtcclxuICAgIHRoaXMucHJvamVjdElkID0gcHJvamVjdExpc3RJdGVtLmRhdGFzZXQucHJvaklkO1xyXG4gICAgdGhpcy5jdXJyZW50TmFtZSA9IHByb2plY3RMaXN0SXRlbS5kYXRhc2V0Lm5hbWU7XHJcbiAgICB0aGlzLnJlbmFtZVByb2plY3RFcnJvck1zZy5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh0aGlzLmN1cnJlbnROYW1lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlbmFtZVByb2plY3QoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKHRoaXMuaW5wdXQudmFsdWUgPT09ICcnIHx8IHRoaXMuZW1wdHlJbnB1dFZhbHVlLnRlc3QodGhpcy5pbnB1dC52YWx1ZSkpIHtcclxuICAgICAgdGhpcy5yZW5hbWVQcm9qZWN0RXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXQudmFsdWUudHJpbSgpID09PSB0aGlzLmN1cnJlbnROYW1lKSB7XHJcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgnJyk7XHJcbiAgICAgIHRoaXMuYXBwLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucmVuYW1lUHJvamVjdEVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIFRPRE8gZGlzYWJsZSBidXR0b24gd2hpbGUgcHJvY2Vzc2luZyBhbmQgbWF5YmUgYWRkIHdhaXRpbmcgYW5pbWF0aW9uLlxyXG4gICAgICAgIGNvbnN0IHByb2plY3RSZW5hbWVkUmVzID0gYXdhaXQgQVBJLnJlbmFtZUZpbGUodGhpcy5wcm9qZWN0SWQsIHRoaXMuaW5wdXQudmFsdWUudHJpbSgpKTtcclxuICAgICAgICBpZiAocHJvamVjdFJlbmFtZWRSZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgIHRoaXMucHJvamVjdExpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2g0JykuaW5uZXJUZXh0ID0gcHJvamVjdFJlbmFtZWRSZXMucmVzdWx0Lm5hbWU7XHJcbiAgICAgICAgICB0aGlzLnByb2plY3RMaXN0SXRlbS5kYXRhc2V0Lm5hbWUgPSBwcm9qZWN0UmVuYW1lZFJlcy5yZXN1bHQubmFtZTtcclxuICAgICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgnJyk7XHJcbiAgICAgICAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgICB0aGlzLmFwcC5zaG93TWVzc2FnZSgnc3VjY2VzcycsICdQcm9qZWN0IHJlbmFtZWQgc3VjY2Vzc2Z1bGx5LicsIDUwMDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLmFwcC5zaG93TWVzc2FnZSgnZXJyb3InLCAnSXQgd2FzIG5vdCBwb3NzaWJsZSB0byByZW5hbWUgdGhlIHByb2plY3QuJyk7XHJcbiAgICAgICAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZyByZW5hbWluZyBhIHByb2plY3QuICcsIHByb2plY3RSZW5hbWVkUmVzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHRoaXMuYXBwLnNob3dNZXNzYWdlKCdlcnJvcicsICdJdCB3YXMgbm90IHBvc3NpYmxlIHRvIHJlbmFtZSB0aGUgcHJvamVjdC4nKTtcclxuICAgICAgICB0aGlzLmFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcgcmVuYW1pbmcgYSBwcm9qZWN0LiAnLCBlcnIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlKHZhbHVlKSB7XHJcbiAgICB0aGlzLmlucHV0LnZhbHVlID0gdmFsdWU7XHJcbiAgfVxyXG59IiwiaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRleHRNZW51IHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuSFRNTENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmlkID0gJ2NvbnRleHRNZW51JztcclxuICAgIHRoaXMubWVudUxpc3RDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMubWVudUxpc3RDb250YWluZXIpO1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMudmlzaWJsZSkgdGhpcy50b2dnbGVNZW51KCdoaWRlJyk7XHJcbiAgICB9KTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGUgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBlLnRhcmdldC5jbG9zZXN0KCdbZGF0YS1jeG1lbnVdJyk7XHJcbiAgICAgIGlmICh0YXJnZXRFbGVtZW50ICYmIHRhcmdldEVsZW1lbnQuY29udGV4dE1lbnVEYXRhKSB7XHJcbiAgICAgICAgLy8gQ2xlYW4gcHJldmlvdXMgY29udGVudCBvZiB0aGUgY29udGV4dCBtZW51LlxyXG4gICAgICAgIHRoaXMuY2xlYXJNZW51KCk7XHJcbiAgICAgICAgLy8gU2V0IHRoZSBuZXcgY29udGVudC5cclxuICAgICAgICB0aGlzLmdlbmVyYXRlTWVudSh0YXJnZXRFbGVtZW50LmNvbnRleHRNZW51RGF0YSk7XHJcbiAgICAgICAgLy8gVGhlIHBvc2l0aW9uLlxyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24oZS5wYWdlWSwgZS5wYWdlWCk7XHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy52aXNpYmxlKSB7XHJcbiAgICAgICAgdGhpcy50b2dnbGVNZW51KFwiaGlkZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLkhUTUxDb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVG9nZ2xlcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgY29udGV4dCBtZW51LlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjb21tYW5kIFZhbHVlcyAnc2hvdycgb3IgJ2hpZGUnLlxyXG4gICAqL1xyXG4gIHRvZ2dsZU1lbnUoY29tbWFuZCkge1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBjb21tYW5kID09PSBcInNob3dcIiA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xyXG4gICAgdGhpcy52aXNpYmxlID0gIXRoaXMudmlzaWJsZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHBvc2l0aW9uIG9mIHRoZSBjb250ZXh0IG1lbnUgb24gdGhlIHdpbmRvdy5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gdG9wIFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IFxyXG4gICAqL1xyXG4gIHNldFBvc2l0aW9uKHRvcCwgbGVmdCkge1xyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHtsZWZ0fXB4YDtcclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xyXG4gICAgdGhpcy50b2dnbGVNZW51KFwic2hvd1wiKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbW92ZXMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjb250ZXh0IG1lbnUgYXMgd2VsbCBhcyBhbnkgYXNzb2NpYXRlZCBldmVudCBsaXN0ZW5lci5cclxuICAgKi9cclxuICBjbGVhck1lbnUoKSB7XHJcbiAgICB0aGlzLm1lbnVMaXN0Q29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChidG4gPT4gYnRuLm9uY2xpY2sgPSBudWxsKTtcclxuICAgIEdlbmVyaWNzLmVtcHR5Tm9kZSh0aGlzLm1lbnVMaXN0Q29udGFpbmVyKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIGNvbnRlbnRzIG9mIHRoZSBjb250ZXh0IG1lbnUgYW5kIGFwcGVuZHMgdGhlbS5cclxuICAgKiBAcGFyYW0ge0NvbnRleHRNZW51RGF0YVtdfSBjb250ZXh0TWVudURhdGEgU3RydWN0dXJlIGlzIGFuIGFycmF5IG9mIG9iamVjdHMgeyBuYW1lOiAnJywgYWN0aW9uOiBmdW5jdGlvbiB9XHJcbiAgICovXHJcbiAgZ2VuZXJhdGVNZW51KGNvbnRleHRNZW51RGF0YSkge1xyXG4gICAgY29uc3QgaXRlbXNDb250YWluZXIgPSBuZXcgRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250ZXh0TWVudURhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgIGl0ZW0uaW5uZXJUZXh0ID0gY29udGV4dE1lbnVEYXRhW2ldLm5hbWU7XHJcbiAgICAgIGl0ZW0ub25jbGljayA9IGNvbnRleHRNZW51RGF0YVtpXS5hY3Rpb247XHJcbiAgICAgIGl0ZW1zQ29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5tZW51TGlzdENvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtc0NvbnRhaW5lcik7XHJcbiAgfVxyXG5cclxufSIsImltcG9ydCBBUEkgZnJvbSAnLi9hcGknO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3RJdGVtIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge1Byb2plY3REYXRhfSBwcm9qZWN0RGF0YSBPYmplY3Qgd2l0aCBuYW1lLCBpZCBhbmQgb3B0aW9uYWwgdGh1bWJJZCBlbnRyaWVzLlxyXG4gICAqIEBwYXJhbSB7QXBwbGljYXRpb259IGFwcCBSZWZlcmVuY2UgdG8gdGhlIGFwcCB0byBhY2Nlc3Mgc29tZSBvZiBpdHMgcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcihwcm9qZWN0RGF0YSwgYXBwKSB7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIC8vIFByb2plY3RzIHRoYXQgaGF2ZSBiZWVuIHVwbG9hZGVkIGJ1dCBub3Qgc2VuZCB0byB0aGUgYmFja2VuZCBoYXZlIGFuIGlkIG9mICd0ZW1wb3JhbCcuXHJcbiAgICBpZiAocHJvamVjdERhdGEuaWQgPT09ICd0ZW1wb3JhbCcpIHtcclxuICAgICAgdGhpcy5IVE1MQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Vuc3luYycpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmRhdGFzZXQucHJvaklkID0gcHJvamVjdERhdGEuaWQ7XHJcbiAgICB0aGlzLkhUTUxDb250YWluZXIuZGF0YXNldC5uYW1lID0gcHJvamVjdERhdGEubmFtZTtcclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0SXRlbScpO1xyXG4gICAgbGV0IHByb2pJdGVtQ29udGVudCA9IFtdO1xyXG4gICAgaWYgKHByb2plY3REYXRhLnNoYXJlZCkge1xyXG4gICAgICBwcm9qSXRlbUNvbnRlbnQucHVzaCgnPHN2ZyBjbGFzcz1cInNoYXJlZEljb25cIj48dXNlIGhyZWY9XCIjc2hhcmVkSWNvblwiIC8+PC9zdmc+Jyk7XHJcbiAgICB9XHJcbiAgICBpZiAocHJvamVjdERhdGEudGh1bWJJZCkge1xyXG4gICAgICBwcm9qSXRlbUNvbnRlbnQucHVzaChgPGltZyBjbGFzcz1cInRodW1iXCIgc3JjPVwiaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL3VjP2lkPSR7cHJvamVjdERhdGEudGh1bWJJZH1cIj5gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHByb2pJdGVtQ29udGVudC5wdXNoKGA8c3ZnIGNsYXNzPVwidGh1bWJcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIi0xMDAgLTUwIDM1MCAyMTBcIj48cGF0aCBkPVwiTTE0MywxMC40NEg2NS4yN1Y3YTcsNywwLDAsMC03LTdIN0E3LDcsMCwwLDAsMCw3VjEwM2E3LDcsMCwwLDAsNyw3SDY1VjcwLjE4SDg1VjExMGg1OGE3LDcsMCwwLDAsNy03VjE3LjQxQTcsNywwLDAsMCwxNDMsMTAuNDRaTTEyNSw1My40OUgxMDV2LTIwaDIwWlwiIHN0eWxlPVwiZmlsbDojZTZlNmU2XCIvPjwvc3ZnPmApO1xyXG4gICAgfVxyXG4gICAgcHJvakl0ZW1Db250ZW50LnB1c2goYDxoND4ke3Byb2plY3REYXRhLm5hbWV9PC9oND5gKTtcclxuICAgIHRoaXMuSFRNTENvbnRhaW5lci5pbm5lckhUTUwgPSBwcm9qSXRlbUNvbnRlbnQuam9pbignJyk7XHJcblxyXG4gICAgLy8gSW5kaWNhdGUgdGhhdCB0aGlzIG9iamVjdCBoYXMgY29udGV4dCBtZW51LlxyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmRhdGFzZXQuY3htZW51ID0gJyc7XHJcblxyXG4gICAgLy8gQXBwZW5kIGEgbmV3IHByb3BlcnR5IHRvIHRoZSBIVE1MIGNvbnRhaW5lciBlbGVtZW50IHdpdGggdGhlIGNvbnRleHQgbWVudSBkYXRhLlxyXG4gICAgdGhpcy5IVE1MQ29udGFpbmVyLmNvbnRleHRNZW51RGF0YSA9IFtcclxuICAgICAge1xyXG4gICAgICAgIG5hbWU6ICdEZWxldGUnLFxyXG4gICAgICAgIGFjdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgYXBwLnNob3dWaWV3cG9ydERpYWxvZygnYWN0aW9uJywgYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhlICR7cHJvamVjdERhdGEubmFtZX0gcHJvamVjdD9gLCBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBuYW1lOiAnRGVsZXRlJyxcclxuICAgICAgICAgICAgICBmdW5jdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBwLnNob3dWaWV3cG9ydERpYWxvZygnbG9hZGVyJywgYERlbGV0aW5nICR7cHJvamVjdERhdGEubmFtZX0gcHJvamVjdC5gKTtcclxuICAgICAgICAgICAgICAgIEFQSS5kZWxldGVGaWxlKHByb2plY3REYXRhLmlkKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuSFRNTENvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgcHJvakluZGV4ID0gYXBwLnByb2plY3RzRGF0YS5maW5kSW5kZXgocHJvaiA9PiBwcm9qLmlkID09PSBwcm9qZWN0RGF0YS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgIGFwcC5wcm9qZWN0c0RhdGEuc3BsaWNlKHByb2pJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgIC8vIFRPRE8gY2hlY2sgYWxzbyBpZiBpdCBpcyBpbiB0aGUgdmFsdWUgb2YgY3VycmVudFByb2plY3Qgb3IgbGFzdFVwbG9hZGVkUHJvamVjdCBhbmQgZGVsZXRlIGl0IGFzIHdlbGxcclxuICAgICAgICAgICAgICAgICAgYXBwLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgYXBwLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgJ1Byb2plY3QgZGVsZXRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG5hbWU6ICdDYW5jZWwnLFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcHAuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogJ1NoYXJlIHByb2plY3QnLFxyXG4gICAgICAgIGFjdGlvbjogKCkgPT4ge1xyXG4gICAgICAgICAgYXBwLnNoYXJlUHJvamVjdERpYWxvZy5zZXRVcERpYWxvZyhwcm9qZWN0RGF0YSk7XHJcbiAgICAgICAgICBhcHAuc2hvd01vZGFsRGlhbG9nKGFwcC5zaGFyZVByb2plY3REaWFsb2cuaHRtbENvbnRhaW5lcik7XHJcbiAgICAgICAgICBhcHAubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZ3JheVRyYW5zbHVjZW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgbmFtZTogJ1JlbmFtZScsXHJcbiAgICAgICAgYWN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICBhcHAucmVuYW1lUHJvamVjdERpYWxvZy5zZXRVcERpYWxvZyh0aGlzLkhUTUxDb250YWluZXIpO1xyXG4gICAgICAgICAgYXBwLnNob3dNb2RhbERpYWxvZyhhcHAucmVuYW1lUHJvamVjdERpYWxvZy5odG1sQ29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIF07XHJcbiAgfVxyXG59IiwiaW1wb3J0IGZpcmViYXNlIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBfX2F3YWl0ZXIsIF9fZ2VuZXJhdG9yLCBfX3NwcmVhZCwgX19hc3NpZ24sIF9fdmFsdWVzIH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRiIH0gZnJvbSAnaWRiJztcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG52YXIgdmVyc2lvbiA9IFwiMC4zLjhcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBQRU5ESU5HX1RJTUVPVVRfTVMgPSAxMDAwMDtcclxudmFyIFBBQ0tBR0VfVkVSU0lPTiA9IFwidzpcIiArIHZlcnNpb247XHJcbnZhciBJTlRFUk5BTF9BVVRIX1ZFUlNJT04gPSAnRklTX3YyJztcclxudmFyIElOU1RBTExBVElPTlNfQVBJX1VSTCA9ICdodHRwczovL2ZpcmViYXNlaW5zdGFsbGF0aW9ucy5nb29nbGVhcGlzLmNvbS92MSc7XHJcbnZhciBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUiA9IDYwICogNjAgKiAxMDAwOyAvLyBPbmUgaG91clxyXG52YXIgU0VSVklDRSA9ICdpbnN0YWxsYXRpb25zJztcclxudmFyIFNFUlZJQ0VfTkFNRSA9ICdJbnN0YWxsYXRpb25zJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBfYTtcclxudmFyIEVSUk9SX0RFU0NSSVBUSU9OX01BUCA9IChfYSA9IHt9LFxyXG4gICAgX2FbXCJtaXNzaW5nLWFwcC1jb25maWctdmFsdWVzXCIgLyogTUlTU0lOR19BUFBfQ09ORklHX1ZBTFVFUyAqL10gPSAnTWlzc2luZyBBcHAgY29uZmlndXJhdGlvbiB2YWx1ZTogXCJ7JHZhbHVlTmFtZX1cIicsXHJcbiAgICBfYVtcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi9dID0gJ0ZpcmViYXNlIEluc3RhbGxhdGlvbiBpcyBub3QgcmVnaXN0ZXJlZC4nLFxyXG4gICAgX2FbXCJpbnN0YWxsYXRpb24tbm90LWZvdW5kXCIgLyogSU5TVEFMTEFUSU9OX05PVF9GT1VORCAqL10gPSAnRmlyZWJhc2UgSW5zdGFsbGF0aW9uIG5vdCBmb3VuZC4nLFxyXG4gICAgX2FbXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovXSA9ICd7JHJlcXVlc3ROYW1lfSByZXF1ZXN0IGZhaWxlZCB3aXRoIGVycm9yIFwieyRzZXJ2ZXJDb2RlfSB7JHNlcnZlclN0YXR1c306IHskc2VydmVyTWVzc2FnZX1cIicsXHJcbiAgICBfYVtcImFwcC1vZmZsaW5lXCIgLyogQVBQX09GRkxJTkUgKi9dID0gJ0NvdWxkIG5vdCBwcm9jZXNzIHJlcXVlc3QuIEFwcGxpY2F0aW9uIG9mZmxpbmUuJyxcclxuICAgIF9hW1wiZGVsZXRlLXBlbmRpbmctcmVnaXN0cmF0aW9uXCIgLyogREVMRVRFX1BFTkRJTkdfUkVHSVNUUkFUSU9OICovXSA9IFwiQ2FuJ3QgZGVsZXRlIGluc3RhbGxhdGlvbiB3aGlsZSB0aGVyZSBpcyBhIHBlbmRpbmcgcmVnaXN0cmF0aW9uIHJlcXVlc3QuXCIsXHJcbiAgICBfYSk7XHJcbnZhciBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeShTRVJWSUNFLCBTRVJWSUNFX05BTUUsIEVSUk9SX0RFU0NSSVBUSU9OX01BUCk7XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgZXJyb3IgaXMgYSBGaXJlYmFzZUVycm9yIHRoYXQgaXMgYmFzZWQgb24gYW4gZXJyb3IgZnJvbSB0aGUgc2VydmVyLiAqL1xyXG5mdW5jdGlvbiBpc1NlcnZlckVycm9yKGVycm9yKSB7XHJcbiAgICByZXR1cm4gKGVycm9yIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvciAmJlxyXG4gICAgICAgIGVycm9yLmNvZGUuaW5jbHVkZXMoXCJyZXF1ZXN0LWZhaWxlZFwiIC8qIFJFUVVFU1RfRkFJTEVEICovKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldEluc3RhbGxhdGlvbnNFbmRwb2ludChfYSkge1xyXG4gICAgdmFyIHByb2plY3RJZCA9IF9hLnByb2plY3RJZDtcclxuICAgIHJldHVybiBJTlNUQUxMQVRJT05TX0FQSV9VUkwgKyBcIi9wcm9qZWN0cy9cIiArIHByb2plY3RJZCArIFwiL2luc3RhbGxhdGlvbnNcIjtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0b2tlbjogcmVzcG9uc2UudG9rZW4sXHJcbiAgICAgICAgcmVxdWVzdFN0YXR1czogMiAvKiBDT01QTEVURUQgKi8sXHJcbiAgICAgICAgZXhwaXJlc0luOiBnZXRFeHBpcmVzSW5Gcm9tUmVzcG9uc2VFeHBpcmVzSW4ocmVzcG9uc2UuZXhwaXJlc0luKSxcclxuICAgICAgICBjcmVhdGlvblRpbWU6IERhdGUubm93KClcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZ2V0RXJyb3JGcm9tUmVzcG9uc2UocmVxdWVzdE5hbWUsIHJlc3BvbnNlKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc3BvbnNlSnNvbiwgZXJyb3JEYXRhO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSnNvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvckRhdGEgPSByZXNwb25zZUpzb24uZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwicmVxdWVzdC1mYWlsZWRcIiAvKiBSRVFVRVNUX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdE5hbWU6IHJlcXVlc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyQ29kZTogZXJyb3JEYXRhLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJNZXNzYWdlOiBlcnJvckRhdGEubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclN0YXR1czogZXJyb3JEYXRhLnN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhlYWRlcnMoX2EpIHtcclxuICAgIHZhciBhcGlLZXkgPSBfYS5hcGlLZXk7XHJcbiAgICByZXR1cm4gbmV3IEhlYWRlcnMoe1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ3gtZ29vZy1hcGkta2V5JzogYXBpS2V5XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRIZWFkZXJzV2l0aEF1dGgoYXBwQ29uZmlnLCBfYSkge1xyXG4gICAgdmFyIHJlZnJlc2hUb2tlbiA9IF9hLnJlZnJlc2hUb2tlbjtcclxuICAgIHZhciBoZWFkZXJzID0gZ2V0SGVhZGVycyhhcHBDb25maWcpO1xyXG4gICAgaGVhZGVycy5hcHBlbmQoJ0F1dGhvcml6YXRpb24nLCBnZXRBdXRob3JpemF0aW9uSGVhZGVyKHJlZnJlc2hUb2tlbikpO1xyXG4gICAgcmV0dXJuIGhlYWRlcnM7XHJcbn1cclxuLyoqXHJcbiAqIENhbGxzIHRoZSBwYXNzZWQgaW4gZmV0Y2ggd3JhcHBlciBhbmQgcmV0dXJucyB0aGUgcmVzcG9uc2UuXHJcbiAqIElmIHRoZSByZXR1cm5lZCByZXNwb25zZSBoYXMgYSBzdGF0dXMgb2YgNXh4LCByZS1ydW5zIHRoZSBmdW5jdGlvbiBvbmNlIGFuZFxyXG4gKiByZXR1cm5zIHRoZSByZXNwb25zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJldHJ5SWZTZXJ2ZXJFcnJvcihmbikge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGZuKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA+PSA1MDAgJiYgcmVzdWx0LnN0YXR1cyA8IDYwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IuIFJldHJ5IHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBmbigpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3VsdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEV4cGlyZXNJbkZyb21SZXNwb25zZUV4cGlyZXNJbihyZXNwb25zZUV4cGlyZXNJbikge1xyXG4gICAgLy8gVGhpcyB3b3JrcyBiZWNhdXNlIHRoZSBzZXJ2ZXIgd2lsbCBuZXZlciByZXNwb25kIHdpdGggZnJhY3Rpb25zIG9mIGEgc2Vjb25kLlxyXG4gICAgcmV0dXJuIE51bWJlcihyZXNwb25zZUV4cGlyZXNJbi5yZXBsYWNlKCdzJywgJzAwMCcpKTtcclxufVxyXG5mdW5jdGlvbiBnZXRBdXRob3JpemF0aW9uSGVhZGVyKHJlZnJlc2hUb2tlbikge1xyXG4gICAgcmV0dXJuIElOVEVSTkFMX0FVVEhfVkVSU0lPTiArIFwiIFwiICsgcmVmcmVzaFRva2VuO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZywgX2EpIHtcclxuICAgIHZhciBmaWQgPSBfYS5maWQ7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVuZHBvaW50LCBoZWFkZXJzLCBib2R5LCByZXF1ZXN0LCByZXNwb25zZSwgcmVzcG9uc2VWYWx1ZSwgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGVuZHBvaW50ID0gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IGdldEhlYWRlcnMoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICBib2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWQ6IGZpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFZlcnNpb246IElOVEVSTkFMX0FVVEhfVkVSU0lPTixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwSWQ6IGFwcENvbmZpZy5hcHBJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2RrVmVyc2lvbjogUEFDS0FHRV9WRVJTSU9OXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJldHJ5SWZTZXJ2ZXJFcnJvcihmdW5jdGlvbiAoKSB7IHJldHVybiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCk7IH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVmFsdWUgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWQ6IHJlc3BvbnNlVmFsdWUuZmlkIHx8IGZpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAyIC8qIENPTVBMRVRFRCAqLyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZVZhbHVlLnJlZnJlc2hUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuOiBleHRyYWN0QXV0aFRva2VuSW5mb0Zyb21SZXNwb25zZShyZXNwb25zZVZhbHVlLmF1dGhUb2tlbilcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRFcnJvckZyb21SZXNwb25zZSgnQ3JlYXRlIEluc3RhbGxhdGlvbicsIHJlc3BvbnNlKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHRocm93IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGdpdmVuIHRpbWUgcGFzc2VzLiAqL1xyXG5mdW5jdGlvbiBzbGVlcChtcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYnVmZmVyVG9CYXNlNjRVcmxTYWZlKGFycmF5KSB7XHJcbiAgICB2YXIgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgX19zcHJlYWQoYXJyYXkpKSk7XHJcbiAgICByZXR1cm4gYjY0LnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgVkFMSURfRklEX1BBVFRFUk4gPSAvXltjZGVmXVtcXHctXXsyMX0kLztcclxudmFyIElOVkFMSURfRklEID0gJyc7XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBuZXcgRklEIHVzaW5nIHJhbmRvbSB2YWx1ZXMgZnJvbSBXZWIgQ3J5cHRvIEFQSS5cclxuICogUmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgaWYgRklEIGdlbmVyYXRpb24gZmFpbHMgZm9yIGFueSByZWFzb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBnZW5lcmF0ZUZpZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQSB2YWxpZCBGSUQgaGFzIGV4YWN0bHkgMjIgYmFzZTY0IGNoYXJhY3RlcnMsIHdoaWNoIGlzIDEzMiBiaXRzLCBvciAxNi41XHJcbiAgICAgICAgLy8gYnl0ZXMuIG91ciBpbXBsZW1lbnRhdGlvbiBnZW5lcmF0ZXMgYSAxNyBieXRlIGFycmF5IGluc3RlYWQuXHJcbiAgICAgICAgdmFyIGZpZEJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KDE3KTtcclxuICAgICAgICB2YXIgY3J5cHRvXzEgPSBzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvO1xyXG4gICAgICAgIGNyeXB0b18xLmdldFJhbmRvbVZhbHVlcyhmaWRCeXRlQXJyYXkpO1xyXG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGZpcnN0IDQgcmFuZG9tIGJpdHMgd2l0aCB0aGUgY29uc3RhbnQgRklEIGhlYWRlciBvZiAwYjAxMTEuXHJcbiAgICAgICAgZmlkQnl0ZUFycmF5WzBdID0gMTEyICsgKGZpZEJ5dGVBcnJheVswXSAlIDE2KTtcclxuICAgICAgICB2YXIgZmlkID0gZW5jb2RlKGZpZEJ5dGVBcnJheSk7XHJcbiAgICAgICAgcmV0dXJuIFZBTElEX0ZJRF9QQVRURVJOLnRlc3QoZmlkKSA/IGZpZCA6IElOVkFMSURfRklEO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgLy8gRklEIGdlbmVyYXRpb24gZXJyb3JlZFxyXG4gICAgICAgIHJldHVybiBJTlZBTElEX0ZJRDtcclxuICAgIH1cclxufVxyXG4vKiogQ29udmVydHMgYSBGSUQgVWludDhBcnJheSB0byBhIGJhc2U2NCBzdHJpbmcgcmVwcmVzZW50YXRpb24uICovXHJcbmZ1bmN0aW9uIGVuY29kZShmaWRCeXRlQXJyYXkpIHtcclxuICAgIHZhciBiNjRTdHJpbmcgPSBidWZmZXJUb0Jhc2U2NFVybFNhZmUoZmlkQnl0ZUFycmF5KTtcclxuICAgIC8vIFJlbW92ZSB0aGUgMjNyZCBjaGFyYWN0ZXIgdGhhdCB3YXMgYWRkZWQgYmVjYXVzZSBvZiB0aGUgZXh0cmEgNCBiaXRzIGF0IHRoZVxyXG4gICAgLy8gZW5kIG9mIG91ciAxNyBieXRlIGFycmF5LCBhbmQgdGhlICc9JyBwYWRkaW5nLlxyXG4gICAgcmV0dXJuIGI2NFN0cmluZy5zdWJzdHIoMCwgMjIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgREFUQUJBU0VfTkFNRSA9ICdmaXJlYmFzZS1pbnN0YWxsYXRpb25zLWRhdGFiYXNlJztcclxudmFyIERBVEFCQVNFX1ZFUlNJT04gPSAxO1xyXG52YXIgT0JKRUNUX1NUT1JFX05BTUUgPSAnZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1zdG9yZSc7XHJcbnZhciBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EYihEQVRBQkFTRV9OQU1FLCBEQVRBQkFTRV9WRVJTSU9OLCBmdW5jdGlvbiAodXBncmFkZURCKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxyXG4gICAgICAgICAgICAvLyBiZWhhdmlvciBpcyB3aGF0IHdlIHdhbnQsIGJlY2F1c2UgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIGJldHdlZW5cclxuICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZWZhdWx0LWNhc2VcclxuICAgICAgICAgICAgc3dpdGNoICh1cGdyYWRlREIub2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHVwZ3JhZGVEQi5jcmVhdGVPYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuLyoqIEFzc2lnbnMgb3Igb3ZlcndyaXRlcyB0aGUgcmVjb3JkIGZvciB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlIGdpdmVuIHZhbHVlLiAqL1xyXG5mdW5jdGlvbiBzZXQoYXBwQ29uZmlnLCB2YWx1ZSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBrZXksIGRiLCB0eDtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBnZXRLZXkoYXBwQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXREYlByb21pc2UoKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHggPSBkYi50cmFuc2FjdGlvbihPQkpFQ1RfU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKS5wdXQodmFsdWUsIGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5jb21wbGV0ZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2YWx1ZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKiBSZW1vdmVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbmZ1bmN0aW9uIHJlbW92ZShhcHBDb25maWcpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIga2V5LCBkYiwgdHg7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RGJQcm9taXNlKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5vYmplY3RTdG9yZShPQkpFQ1RfU1RPUkVfTkFNRSkuZGVsZXRlKGtleSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0eC5jb21wbGV0ZV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEF0b21pY2FsbHkgdXBkYXRlcyBhIHJlY29yZCB3aXRoIHRoZSByZXN1bHQgb2YgdXBkYXRlRm4sIHdoaWNoIGdldHNcclxuICogY2FsbGVkIHdpdGggdGhlIGN1cnJlbnQgdmFsdWUuIElmIG5ld1ZhbHVlIGlzIHVuZGVmaW5lZCwgdGhlIHJlY29yZCBpc1xyXG4gKiBkZWxldGVkIGluc3RlYWQuXHJcbiAqIEByZXR1cm4gVXBkYXRlZCB2YWx1ZVxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlKGFwcENvbmZpZywgdXBkYXRlRm4pIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIga2V5LCBkYiwgdHgsIHN0b3JlLCBvbGRWYWx1ZSwgbmV3VmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0S2V5KGFwcENvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RGJQcm9taXNlKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHR4ID0gZGIudHJhbnNhY3Rpb24oT0JKRUNUX1NUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKE9CSkVDVF9TVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzdG9yZS5nZXQoa2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB1cGRhdGVGbihvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEobmV3VmFsdWUgPT09IHVuZGVmaW5lZCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHN0b3JlLmRlbGV0ZShrZXkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIHN0b3JlLnB1dChuZXdWYWx1ZSwga2V5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFs0IC8qeWllbGQqLywgdHguY29tcGxldGVdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3VmFsdWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRLZXkoYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gYXBwQ29uZmlnLmFwcE5hbWUgKyBcIiFcIiArIGFwcENvbmZpZy5hcHBJZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYW5kIHJldHVybnMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGZyb20gdGhlIGRhdGFiYXNlLlxyXG4gKiBBbHNvIHRyaWdnZXJzIGEgcmVnaXN0cmF0aW9uIHJlcXVlc3QgaWYgaXQgaXMgbmVjZXNzYXJ5IGFuZCBwb3NzaWJsZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldEluc3RhbGxhdGlvbkVudHJ5KGFwcENvbmZpZykge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZWdpc3RyYXRpb25Qcm9taXNlLCBpbnN0YWxsYXRpb25FbnRyeSwgX2E7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZShhcHBDb25maWcsIGZ1bmN0aW9uIChvbGRFbnRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFsbGF0aW9uRW50cnkgPSB1cGRhdGVPckNyZWF0ZUluc3RhbGxhdGlvbkVudHJ5KG9sZEVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudHJ5V2l0aFByb21pc2UgPSB0cmlnZ2VyUmVnaXN0cmF0aW9uSWZOZWNlc3NhcnkoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UgPSBlbnRyeVdpdGhQcm9taXNlLnJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeVdpdGhQcm9taXNlLmluc3RhbGxhdGlvbkVudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShpbnN0YWxsYXRpb25FbnRyeS5maWQgPT09IElOVkFMSURfRklEKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZWdpc3RyYXRpb25Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjogXHJcbiAgICAgICAgICAgICAgICAvLyBGSUQgZ2VuZXJhdGlvbiBmYWlsZWQuIFdhaXRpbmcgZm9yIHRoZSBGSUQgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIChfYS5pbnN0YWxsYXRpb25FbnRyeSA9IF9iLnNlbnQoKSwgX2EpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFsbGF0aW9uRW50cnk6IGluc3RhbGxhdGlvbkVudHJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlOiByZWdpc3RyYXRpb25Qcm9taXNlXHJcbiAgICAgICAgICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IEluc3RhbGxhdGlvbiBFbnRyeSBpZiBvbmUgZG9lcyBub3QgZXhpc3QuXHJcbiAqIEFsc28gY2xlYXJzIHRpbWVkIG91dCBwZW5kaW5nIHJlcXVlc3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlT3JDcmVhdGVJbnN0YWxsYXRpb25FbnRyeShvbGRFbnRyeSkge1xyXG4gICAgdmFyIGVudHJ5ID0gb2xkRW50cnkgfHwge1xyXG4gICAgICAgIGZpZDogZ2VuZXJhdGVGaWQoKSxcclxuICAgICAgICByZWdpc3RyYXRpb25TdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi9cclxuICAgIH07XHJcbiAgICByZXR1cm4gY2xlYXJUaW1lZE91dFJlcXVlc3QoZW50cnkpO1xyXG59XHJcbi8qKlxyXG4gKiBJZiB0aGUgRmlyZWJhc2UgSW5zdGFsbGF0aW9uIGlzIG5vdCByZWdpc3RlcmVkIHlldCwgdGhpcyB3aWxsIHRyaWdnZXIgdGhlXHJcbiAqIHJlZ2lzdHJhdGlvbiBhbmQgcmV0dXJuIGFuIEluUHJvZ3Jlc3NJbnN0YWxsYXRpb25FbnRyeS5cclxuICpcclxuICogSWYgcmVnaXN0cmF0aW9uUHJvbWlzZSBkb2VzIG5vdCBleGlzdCwgdGhlIGluc3RhbGxhdGlvbkVudHJ5IGlzIGd1YXJhbnRlZWRcclxuICogdG8gYmUgcmVnaXN0ZXJlZC5cclxuICovXHJcbmZ1bmN0aW9uIHRyaWdnZXJSZWdpc3RyYXRpb25JZk5lY2Vzc2FyeShhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICBpZiAoaW5zdGFsbGF0aW9uRW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSB7XHJcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiByZXF1aXJlZCBidXQgYXBwIGlzIG9mZmxpbmUuXHJcbiAgICAgICAgICAgIHZhciByZWdpc3RyYXRpb25Qcm9taXNlV2l0aEVycm9yID0gUHJvbWlzZS5yZWplY3QoRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeTogaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlOiByZWdpc3RyYXRpb25Qcm9taXNlV2l0aEVycm9yXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRyeSByZWdpc3RlcmluZy4gQ2hhbmdlIHN0YXR1cyB0byBJTl9QUk9HUkVTUy5cclxuICAgICAgICB2YXIgaW5Qcm9ncmVzc0VudHJ5ID0ge1xyXG4gICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAxIC8qIElOX1BST0dSRVNTICovLFxyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25UaW1lOiBEYXRlLm5vdygpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgcmVnaXN0cmF0aW9uUHJvbWlzZSA9IHJlZ2lzdGVySW5zdGFsbGF0aW9uKGFwcENvbmZpZywgaW5Qcm9ncmVzc0VudHJ5KTtcclxuICAgICAgICByZXR1cm4geyBpbnN0YWxsYXRpb25FbnRyeTogaW5Qcm9ncmVzc0VudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlOiByZWdpc3RyYXRpb25Qcm9taXNlIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpbnN0YWxsYXRpb25FbnRyeTogaW5zdGFsbGF0aW9uRW50cnksXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2U6IHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihhcHBDb25maWcpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB7IGluc3RhbGxhdGlvbkVudHJ5OiBpbnN0YWxsYXRpb25FbnRyeSB9O1xyXG4gICAgfVxyXG59XHJcbi8qKiBUaGlzIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBvbmNlIGZvciBlYWNoIG5ldyBGaXJlYmFzZSBJbnN0YWxsYXRpb24uICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFsbGF0aW9uKGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVnaXN0ZXJlZEluc3RhbGxhdGlvbkVudHJ5LCBlXzE7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDddKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjcmVhdGVJbnN0YWxsYXRpb25SZXF1ZXN0KGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlcmVkSW5zdGFsbGF0aW9uRW50cnkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHNldChhcHBDb25maWcsIHJlZ2lzdGVyZWRJbnN0YWxsYXRpb25FbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGVfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIShpc1NlcnZlckVycm9yKGVfMSkgJiYgZV8xLnNlcnZlckNvZGUgPT09IDQwOSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIGNhbiBub3QgYmUgdXNlZFwiIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgbmV3IElEIG5leHQgdGltZS5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW1vdmUoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgY2FuIG5vdCBiZSB1c2VkXCIgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgbmV4dCB0aW1lLlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXHJcbiAgICAgICAgICAgICAgICAvLyBSZWdpc3RyYXRpb24gZmFpbGVkLiBTZXQgRklEIGFzIG5vdCByZWdpc3RlcmVkLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2V0KGFwcENvbmZpZywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWQ6IGluc3RhbGxhdGlvbkVudHJ5LmZpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uU3RhdHVzOiAwIC8qIE5PVF9TVEFSVEVEICovXHJcbiAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlZ2lzdHJhdGlvbiBmYWlsZWQuIFNldCBGSUQgYXMgbm90IHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjogdGhyb3cgZV8xO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKiBDYWxsIGlmIEZJRCByZWdpc3RyYXRpb24gaXMgcGVuZGluZyBpbiBhbm90aGVyIHJlcXVlc3QuICovXHJcbmZ1bmN0aW9uIHdhaXRVbnRpbEZpZFJlZ2lzdHJhdGlvbihhcHBDb25maWcpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW50cnksIF9hLCBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3Qgc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2xlZXAoMTAwKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlSW5zdGFsbGF0aW9uIHJlcXVlc3Qgc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAwIC8qIE5PVF9TVEFSVEVEICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0SW5zdGFsbGF0aW9uRW50cnkoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCksIGluc3RhbGxhdGlvbkVudHJ5ID0gX2EuaW5zdGFsbGF0aW9uRW50cnksIHJlZ2lzdHJhdGlvblByb21pc2UgPSBfYS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyYXRpb25Qcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZWdpc3RyYXRpb25Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIHJlZ2lzdHJhdGlvblByb21pc2UsIGVudHJ5IGlzIHJlZ2lzdGVyZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBpbnN0YWxsYXRpb25FbnRyeV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gWzIgLypyZXR1cm4qLywgZW50cnldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQ2FsbGVkIG9ubHkgaWYgdGhlcmUgaXMgYSBDcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpbiBwcm9ncmVzcy5cclxuICpcclxuICogVXBkYXRlcyB0aGUgSW5zdGFsbGF0aW9uRW50cnkgaW4gdGhlIERCIGJhc2VkIG9uIHRoZSBzdGF0dXMgb2YgdGhlXHJcbiAqIENyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlSW5zdGFsbGF0aW9uUmVxdWVzdChhcHBDb25maWcpIHtcclxuICAgIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBmdW5jdGlvbiAob2xkRW50cnkpIHtcclxuICAgICAgICBpZiAoIW9sZEVudHJ5KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW5zdGFsbGF0aW9uLW5vdC1mb3VuZFwiIC8qIElOU1RBTExBVElPTl9OT1RfRk9VTkQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xlYXJUaW1lZE91dFJlcXVlc3Qob2xkRW50cnkpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY2xlYXJUaW1lZE91dFJlcXVlc3QoZW50cnkpIHtcclxuICAgIGlmIChoYXNJbnN0YWxsYXRpb25SZXF1ZXN0VGltZWRPdXQoZW50cnkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZmlkOiBlbnRyeS5maWQsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvblN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqL1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZW50cnk7XHJcbn1cclxuZnVuY3Rpb24gaGFzSW5zdGFsbGF0aW9uUmVxdWVzdFRpbWVkT3V0KGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblN0YXR1cyA9PT0gMSAvKiBJTl9QUk9HUkVTUyAqLyAmJlxyXG4gICAgICAgIGluc3RhbGxhdGlvbkVudHJ5LnJlZ2lzdHJhdGlvblRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2VuZXJhdGVBdXRoVG9rZW5SZXF1ZXN0KF9hLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgdmFyIGFwcENvbmZpZyA9IF9hLmFwcENvbmZpZywgcGxhdGZvcm1Mb2dnZXJQcm92aWRlciA9IF9hLnBsYXRmb3JtTG9nZ2VyUHJvdmlkZXI7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVuZHBvaW50LCBoZWFkZXJzLCBwbGF0Zm9ybUxvZ2dlciwgYm9keSwgcmVxdWVzdCwgcmVzcG9uc2UsIHJlc3BvbnNlVmFsdWUsIGNvbXBsZXRlZEF1dGhUb2tlbjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBlbmRwb2ludCA9IGdldEdlbmVyYXRlQXV0aFRva2VuRW5kcG9pbnQoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IGdldEhlYWRlcnNXaXRoQXV0aChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybUxvZ2dlciA9IHBsYXRmb3JtTG9nZ2VyUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGxhdGZvcm1Mb2dnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoJ3gtZmlyZWJhc2UtY2xpZW50JywgcGxhdGZvcm1Mb2dnZXIuZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBib2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNka1ZlcnNpb246IFBBQ0tBR0VfVkVSU0lPTlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJldHJ5SWZTZXJ2ZXJFcnJvcihmdW5jdGlvbiAoKSB7IHJldHVybiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCk7IH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVmFsdWUgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkQXV0aFRva2VuID0gZXh0cmFjdEF1dGhUb2tlbkluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2VWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGNvbXBsZXRlZEF1dGhUb2tlbl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEVycm9yRnJvbVJlc3BvbnNlKCdHZW5lcmF0ZSBBdXRoIFRva2VuJywgcmVzcG9uc2UpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogdGhyb3cgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRHZW5lcmF0ZUF1dGhUb2tlbkVuZHBvaW50KGFwcENvbmZpZywgX2EpIHtcclxuICAgIHZhciBmaWQgPSBfYS5maWQ7XHJcbiAgICByZXR1cm4gZ2V0SW5zdGFsbGF0aW9uc0VuZHBvaW50KGFwcENvbmZpZykgKyBcIi9cIiArIGZpZCArIFwiL2F1dGhUb2tlbnM6Z2VuZXJhdGVcIjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbiBmb3IgdGhlIGluc3RhbGxhdGlvbi4gR2VuZXJhdGVzIGEgbmV3XHJcbiAqIHRva2VuIGlmIG9uZSBkb2Vzbid0IGV4aXN0LCBpcyBleHBpcmVkIG9yIGFib3V0IHRvIGV4cGlyZS5cclxuICpcclxuICogU2hvdWxkIG9ubHkgYmUgY2FsbGVkIGlmIHRoZSBGaXJlYmFzZSBJbnN0YWxsYXRpb24gaXMgcmVnaXN0ZXJlZC5cclxuICovXHJcbmZ1bmN0aW9uIHJlZnJlc2hBdXRoVG9rZW4oZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpIHtcclxuICAgIGlmIChmb3JjZVJlZnJlc2ggPT09IHZvaWQgMCkgeyBmb3JjZVJlZnJlc2ggPSBmYWxzZTsgfVxyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0b2tlblByb21pc2UsIGVudHJ5LCBhdXRoVG9rZW4sIF9hO1xyXG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGUoZGVwZW5kZW5jaWVzLmFwcENvbmZpZywgZnVuY3Rpb24gKG9sZEVudHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNFbnRyeVJlZ2lzdGVyZWQob2xkRW50cnkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRBdXRoVG9rZW4gPSBvbGRFbnRyeS5hdXRoVG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmIGlzQXV0aFRva2VuVmFsaWQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYSB2YWxpZCB0b2tlbiBpbiB0aGUgREIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob2xkQXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFscmVhZHkgaXMgYSB0b2tlbiByZXF1ZXN0IGluIHByb2dyZXNzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5Qcm9taXNlID0gd2FpdFVudGlsQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyB0b2tlbiBvciB0b2tlbiBleHBpcmVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtb2ZmbGluZVwiIC8qIEFQUF9PRkZMSU5FICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpblByb2dyZXNzRW50cnkgPSBtYWtlQXV0aFRva2VuUmVxdWVzdEluUHJvZ3Jlc3NFbnRyeShvbGRFbnRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlblByb21pc2UgPSBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoZGVwZW5kZW5jaWVzLCBpblByb2dyZXNzRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluUHJvZ3Jlc3NFbnRyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuUHJvbWlzZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdG9rZW5Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aFRva2VuID0gX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGF1dGhUb2tlbl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxsIG9ubHkgaWYgRklEIGlzIHJlZ2lzdGVyZWQgYW5kIEF1dGggVG9rZW4gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy5cclxuICpcclxuICogV2FpdHMgdW50aWwgdGhlIGN1cnJlbnQgcGVuZGluZyByZXF1ZXN0IGZpbmlzaGVzLiBJZiB0aGUgcmVxdWVzdCB0aW1lcyBvdXQsXHJcbiAqIHRyaWVzIG9uY2UgaW4gdGhpcyB0aHJlYWQgYXMgd2VsbC5cclxuICovXHJcbmZ1bmN0aW9uIHdhaXRVbnRpbEF1dGhUb2tlblJlcXVlc3QoZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW50cnksIGF1dGhUb2tlbjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdXBkYXRlQXV0aFRva2VuUmVxdWVzdChkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGVudHJ5LmF1dGhUb2tlbi5yZXF1ZXN0U3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGVBdXRoVG9rZW4gc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2xlZXAoMTAwKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGVBdXRoVG9rZW4gc3RpbGwgaW4gcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHVwZGF0ZUF1dGhUb2tlblJlcXVlc3QoZGVwZW5kZW5jaWVzLmFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhUb2tlbiA9IGVudHJ5LmF1dGhUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlcXVlc3QgdGltZWQgb3V0IG9yIGZhaWxlZCBpbiBhIGRpZmZlcmVudCBjYWxsLiBUcnkgYWdhaW4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZWZyZXNoQXV0aFRva2VuKGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYXV0aFRva2VuXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxsZWQgb25seSBpZiB0aGVyZSBpcyBhIEdlbmVyYXRlQXV0aFRva2VuIHJlcXVlc3QgaW4gcHJvZ3Jlc3MuXHJcbiAqXHJcbiAqIFVwZGF0ZXMgdGhlIEluc3RhbGxhdGlvbkVudHJ5IGluIHRoZSBEQiBiYXNlZCBvbiB0aGUgc3RhdHVzIG9mIHRoZVxyXG4gKiBHZW5lcmF0ZUF1dGhUb2tlbiByZXF1ZXN0LlxyXG4gKlxyXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIEluc3RhbGxhdGlvbkVudHJ5LlxyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQXV0aFRva2VuUmVxdWVzdChhcHBDb25maWcpIHtcclxuICAgIHJldHVybiB1cGRhdGUoYXBwQ29uZmlnLCBmdW5jdGlvbiAob2xkRW50cnkpIHtcclxuICAgICAgICBpZiAoIWlzRW50cnlSZWdpc3RlcmVkKG9sZEVudHJ5KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vdC1yZWdpc3RlcmVkXCIgLyogTk9UX1JFR0lTVEVSRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb2xkQXV0aFRva2VuID0gb2xkRW50cnkuYXV0aFRva2VuO1xyXG4gICAgICAgIGlmIChoYXNBdXRoVG9rZW5SZXF1ZXN0VGltZWRPdXQob2xkQXV0aFRva2VuKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIG9sZEVudHJ5KSwgeyBhdXRoVG9rZW46IHsgcmVxdWVzdFN0YXR1czogMCAvKiBOT1RfU1RBUlRFRCAqLyB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2xkRW50cnk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBmZXRjaEF1dGhUb2tlbkZyb21TZXJ2ZXIoZGVwZW5kZW5jaWVzLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhdXRoVG9rZW4sIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSwgZV8xLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnk7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAzLCAsIDhdKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBnZW5lcmF0ZUF1dGhUb2tlblJlcXVlc3QoZGVwZW5kZW5jaWVzLCBpbnN0YWxsYXRpb25FbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhUb2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaW5zdGFsbGF0aW9uRW50cnkpLCB7IGF1dGhUb2tlbjogYXV0aFRva2VuIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNldChkZXBlbmRlbmNpZXMuYXBwQ29uZmlnLCB1cGRhdGVkSW5zdGFsbGF0aW9uRW50cnkpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGF1dGhUb2tlbl07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGlzU2VydmVyRXJyb3IoZV8xKSAmJiAoZV8xLnNlcnZlckNvZGUgPT09IDQwMSB8fCBlXzEuc2VydmVyQ29kZSA9PT0gNDA0KSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlcnZlciByZXR1cm5lZCBhIFwiRklEIG5vdCBmb3VuZFwiIG9yIGEgXCJJbnZhbGlkIGF1dGhlbnRpY2F0aW9uXCIgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgbmV4dCB0aW1lLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlbW92ZShkZXBlbmRlbmNpZXMuYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VydmVyIHJldHVybmVkIGEgXCJGSUQgbm90IGZvdW5kXCIgb3IgYSBcIkludmFsaWQgYXV0aGVudGljYXRpb25cIiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBhIG5ldyBJRCBuZXh0IHRpbWUuXHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRJbnN0YWxsYXRpb25FbnRyeSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnN0YWxsYXRpb25FbnRyeSksIHsgYXV0aFRva2VuOiB7IHJlcXVlc3RTdGF0dXM6IDAgLyogTk9UX1NUQVJURUQgKi8gfSB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzZXQoZGVwZW5kZW5jaWVzLmFwcENvbmZpZywgdXBkYXRlZEluc3RhbGxhdGlvbkVudHJ5KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNztcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogdGhyb3cgZV8xO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA4OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGlzRW50cnlSZWdpc3RlcmVkKGluc3RhbGxhdGlvbkVudHJ5KSB7XHJcbiAgICByZXR1cm4gKGluc3RhbGxhdGlvbkVudHJ5ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICBpbnN0YWxsYXRpb25FbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDIgLyogQ09NUExFVEVEICovKTtcclxufVxyXG5mdW5jdGlvbiBpc0F1dGhUb2tlblZhbGlkKGF1dGhUb2tlbikge1xyXG4gICAgcmV0dXJuIChhdXRoVG9rZW4ucmVxdWVzdFN0YXR1cyA9PT0gMiAvKiBDT01QTEVURUQgKi8gJiZcclxuICAgICAgICAhaXNBdXRoVG9rZW5FeHBpcmVkKGF1dGhUb2tlbikpO1xyXG59XHJcbmZ1bmN0aW9uIGlzQXV0aFRva2VuRXhwaXJlZChhdXRoVG9rZW4pIHtcclxuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgcmV0dXJuIChub3cgPCBhdXRoVG9rZW4uY3JlYXRpb25UaW1lIHx8XHJcbiAgICAgICAgYXV0aFRva2VuLmNyZWF0aW9uVGltZSArIGF1dGhUb2tlbi5leHBpcmVzSW4gPCBub3cgKyBUT0tFTl9FWFBJUkFUSU9OX0JVRkZFUik7XHJcbn1cclxuLyoqIFJldHVybnMgYW4gdXBkYXRlZCBJbnN0YWxsYXRpb25FbnRyeSB3aXRoIGFuIEluUHJvZ3Jlc3NBdXRoVG9rZW4uICovXHJcbmZ1bmN0aW9uIG1ha2VBdXRoVG9rZW5SZXF1ZXN0SW5Qcm9ncmVzc0VudHJ5KG9sZEVudHJ5KSB7XHJcbiAgICB2YXIgaW5Qcm9ncmVzc0F1dGhUb2tlbiA9IHtcclxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAxIC8qIElOX1BST0dSRVNTICovLFxyXG4gICAgICAgIHJlcXVlc3RUaW1lOiBEYXRlLm5vdygpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBvbGRFbnRyeSksIHsgYXV0aFRva2VuOiBpblByb2dyZXNzQXV0aFRva2VuIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGhhc0F1dGhUb2tlblJlcXVlc3RUaW1lZE91dChhdXRoVG9rZW4pIHtcclxuICAgIHJldHVybiAoYXV0aFRva2VuLnJlcXVlc3RTdGF0dXMgPT09IDEgLyogSU5fUFJPR1JFU1MgKi8gJiZcclxuICAgICAgICBhdXRoVG9rZW4ucmVxdWVzdFRpbWUgKyBQRU5ESU5HX1RJTUVPVVRfTVMgPCBEYXRlLm5vdygpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SWQoZGVwZW5kZW5jaWVzKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBpbnN0YWxsYXRpb25FbnRyeSwgcmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0SW5zdGFsbGF0aW9uRW50cnkoZGVwZW5kZW5jaWVzLmFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gX2Iuc2VudCgpLCBpbnN0YWxsYXRpb25FbnRyeSA9IF9hLmluc3RhbGxhdGlvbkVudHJ5LCByZWdpc3RyYXRpb25Qcm9taXNlID0gX2EucmVnaXN0cmF0aW9uUHJvbWlzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVnaXN0cmF0aW9uUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb25Qcm9taXNlLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGluc3RhbGxhdGlvbiBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHVwZGF0ZSB0aGUgYXV0aGVudGljYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9rZW4gaWYgbmVlZGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoQXV0aFRva2VuKGRlcGVuZGVuY2llcykuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBpbnN0YWxsYXRpb25FbnRyeS5maWRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VG9rZW4oZGVwZW5kZW5jaWVzLCBmb3JjZVJlZnJlc2gpIHtcclxuICAgIGlmIChmb3JjZVJlZnJlc2ggPT09IHZvaWQgMCkgeyBmb3JjZVJlZnJlc2ggPSBmYWxzZTsgfVxyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhdXRoVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGNvbXBsZXRlSW5zdGFsbGF0aW9uUmVnaXN0cmF0aW9uKGRlcGVuZGVuY2llcy5hcHBDb25maWcpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVmcmVzaEF1dGhUb2tlbihkZXBlbmRlbmNpZXMsIGZvcmNlUmVmcmVzaCldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIGF1dGhUb2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYXV0aFRva2VuLnRva2VuXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY29tcGxldGVJbnN0YWxsYXRpb25SZWdpc3RyYXRpb24oYXBwQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvblByb21pc2U7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEluc3RhbGxhdGlvbkVudHJ5KGFwcENvbmZpZyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvblByb21pc2UgPSAoX2Euc2VudCgpKS5yZWdpc3RyYXRpb25Qcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVnaXN0cmF0aW9uUHJvbWlzZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBjcmVhdGVJbnN0YWxsYXRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy4gV2FpdCB1bnRpbCBpdCBmaW5pc2hlcy5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZWdpc3RyYXRpb25Qcm9taXNlXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAvLyBBIGNyZWF0ZUluc3RhbGxhdGlvbiByZXF1ZXN0IGlzIGluIHByb2dyZXNzLiBXYWl0IHVudGlsIGl0IGZpbmlzaGVzLlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBpbnN0YWxsYXRpb25FbnRyeSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbmRwb2ludCwgaGVhZGVycywgcmVxdWVzdCwgcmVzcG9uc2U7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQgPSBnZXREZWxldGVFbmRwb2ludChhcHBDb25maWcsIGluc3RhbGxhdGlvbkVudHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gZ2V0SGVhZGVyc1dpdGhBdXRoKGFwcENvbmZpZywgaW5zdGFsbGF0aW9uRW50cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJldHJ5SWZTZXJ2ZXJFcnJvcihmdW5jdGlvbiAoKSB7IHJldHVybiBmZXRjaChlbmRwb2ludCwgcmVxdWVzdCk7IH0pXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISFyZXNwb25zZS5vaykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZ2V0RXJyb3JGcm9tUmVzcG9uc2UoJ0RlbGV0ZSBJbnN0YWxsYXRpb24nLCByZXNwb25zZSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RGVsZXRlRW5kcG9pbnQoYXBwQ29uZmlnLCBfYSkge1xyXG4gICAgdmFyIGZpZCA9IF9hLmZpZDtcclxuICAgIHJldHVybiBnZXRJbnN0YWxsYXRpb25zRW5kcG9pbnQoYXBwQ29uZmlnKSArIFwiL1wiICsgZmlkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWxldGVJbnN0YWxsYXRpb24oZGVwZW5kZW5jaWVzKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFwcENvbmZpZywgZW50cnk7XHJcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwQ29uZmlnID0gZGVwZW5kZW5jaWVzLmFwcENvbmZpZztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB1cGRhdGUoYXBwQ29uZmlnLCBmdW5jdGlvbiAob2xkRW50cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbGRFbnRyeSAmJiBvbGRFbnRyeS5yZWdpc3RyYXRpb25TdGF0dXMgPT09IDAgLyogTk9UX1NUQVJURUQgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgdGhlIHVucmVnaXN0ZXJlZCBlbnRyeSB3aXRob3V0IHNlbmRpbmcgYSBkZWxldGVJbnN0YWxsYXRpb24gcmVxdWVzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9sZEVudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbnRyeSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAxIC8qIElOX1BST0dSRVNTICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FuJ3QgZGVsZXRlIHdoaWxlIHRyeWluZyB0byByZWdpc3Rlci5cclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImRlbGV0ZS1wZW5kaW5nLXJlZ2lzdHJhdGlvblwiIC8qIERFTEVURV9QRU5ESU5HX1JFR0lTVFJBVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW50cnkucmVnaXN0cmF0aW9uU3RhdHVzID09PSAyIC8qIENPTVBMRVRFRCAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIW5hdmlnYXRvci5vbkxpbmUpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLW9mZmxpbmVcIiAvKiBBUFBfT0ZGTElORSAqLyk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIGRlbGV0ZUluc3RhbGxhdGlvblJlcXVlc3QoYXBwQ29uZmlnLCBlbnRyeSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW1vdmUoYXBwQ29uZmlnKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdEFwcENvbmZpZyhhcHApIHtcclxuICAgIHZhciBlXzEsIF9hO1xyXG4gICAgaWYgKCFhcHAgfHwgIWFwcC5vcHRpb25zKSB7XHJcbiAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3IoJ0FwcCBDb25maWd1cmF0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFwcC5uYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3IoJ0FwcCBOYW1lJyk7XHJcbiAgICB9XHJcbiAgICAvLyBSZXF1aXJlZCBhcHAgY29uZmlnIGtleXNcclxuICAgIHZhciBjb25maWdLZXlzID0gW1xyXG4gICAgICAgICdwcm9qZWN0SWQnLFxyXG4gICAgICAgICdhcGlLZXknLFxyXG4gICAgICAgICdhcHBJZCdcclxuICAgIF07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGZvciAodmFyIGNvbmZpZ0tleXNfMSA9IF9fdmFsdWVzKGNvbmZpZ0tleXMpLCBjb25maWdLZXlzXzFfMSA9IGNvbmZpZ0tleXNfMS5uZXh0KCk7ICFjb25maWdLZXlzXzFfMS5kb25lOyBjb25maWdLZXlzXzFfMSA9IGNvbmZpZ0tleXNfMS5uZXh0KCkpIHtcclxuICAgICAgICAgICAgdmFyIGtleU5hbWUgPSBjb25maWdLZXlzXzFfMS52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKCFhcHAub3B0aW9uc1trZXlOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZ2V0TWlzc2luZ1ZhbHVlRXJyb3Ioa2V5TmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGNvbmZpZ0tleXNfMV8xICYmICFjb25maWdLZXlzXzFfMS5kb25lICYmIChfYSA9IGNvbmZpZ0tleXNfMS5yZXR1cm4pKSBfYS5jYWxsKGNvbmZpZ0tleXNfMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYXBwTmFtZTogYXBwLm5hbWUsXHJcbiAgICAgICAgcHJvamVjdElkOiBhcHAub3B0aW9ucy5wcm9qZWN0SWQsXHJcbiAgICAgICAgYXBpS2V5OiBhcHAub3B0aW9ucy5hcGlLZXksXHJcbiAgICAgICAgYXBwSWQ6IGFwcC5vcHRpb25zLmFwcElkXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldE1pc3NpbmdWYWx1ZUVycm9yKHZhbHVlTmFtZSkge1xyXG4gICAgcmV0dXJuIEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibWlzc2luZy1hcHAtY29uZmlnLXZhbHVlc1wiIC8qIE1JU1NJTkdfQVBQX0NPTkZJR19WQUxVRVMgKi8sIHtcclxuICAgICAgICB2YWx1ZU5hbWU6IHZhbHVlTmFtZVxyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVySW5zdGFsbGF0aW9ucyhpbnN0YW5jZSkge1xyXG4gICAgdmFyIGluc3RhbGxhdGlvbnNOYW1lID0gJ2luc3RhbGxhdGlvbnMnO1xyXG4gICAgaW5zdGFuY2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChpbnN0YWxsYXRpb25zTmFtZSwgZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHZhciBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIC8vIFRocm93cyBpZiBhcHAgaXNuJ3QgY29uZmlndXJlZCBwcm9wZXJseS5cclxuICAgICAgICB2YXIgYXBwQ29uZmlnID0gZXh0cmFjdEFwcENvbmZpZyhhcHApO1xyXG4gICAgICAgIHZhciBwbGF0Zm9ybUxvZ2dlclByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdwbGF0Zm9ybS1sb2dnZXInKTtcclxuICAgICAgICB2YXIgZGVwZW5kZW5jaWVzID0ge1xyXG4gICAgICAgICAgICBhcHBDb25maWc6IGFwcENvbmZpZyxcclxuICAgICAgICAgICAgcGxhdGZvcm1Mb2dnZXJQcm92aWRlcjogcGxhdGZvcm1Mb2dnZXJQcm92aWRlclxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYXBwOiBhcHAsXHJcbiAgICAgICAgICAgIGdldElkOiBmdW5jdGlvbiAoKSB7IHJldHVybiBnZXRJZChkZXBlbmRlbmNpZXMpOyB9LFxyXG4gICAgICAgICAgICBnZXRUb2tlbjogZnVuY3Rpb24gKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRva2VuKGRlcGVuZGVuY2llcywgZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkZWxldGVJbnN0YWxsYXRpb24oZGVwZW5kZW5jaWVzKTsgfVxyXG4gICAgICAgIH07XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVySW5zdGFsbGF0aW9ucyhmaXJlYmFzZSk7XG5cbmV4cG9ydCB7IHJlZ2lzdGVySW5zdGFsbGF0aW9ucyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IEFQSSBmcm9tICcuL2FwaSc7XHJcbmltcG9ydCB7IFdvcmtzcGFjZSB9IGZyb20gJy4vd29ya3NwYWNlJztcclxuaW1wb3J0IHsgUHJvamVjdERhdGEgfSBmcm9tICcuL3Byb2plY3REYXRhJztcclxuaW1wb3J0IEdlbmVyaWNzIGZyb20gJy4vZ2VuZXJpY3MnO1xyXG5pbXBvcnQgeyBBZGRDb21tZW50IH0gZnJvbSAnLi9hcHBUb29scy9hZGRDb21tZW50JztcclxuaW1wb3J0IHsgRWxlbWVudERhdGEgfSBmcm9tICcuL2FwcFRvb2xzL2VsZW1lbnREYXRhJztcclxuaW1wb3J0IHsgU2hhcmVQcm9qZWN0IH0gZnJvbSAnLi9zaGFyZVByb2plY3QnO1xyXG5pbXBvcnQgeyBOb3RpZmljYXRpb25zTWFuYWdlciB9IGZyb20gJy4vbm90aWZpY2F0aW9uc01hbmFnZXInO1xyXG5pbXBvcnQgeyBSZW5hbWVQcm9qZWN0IH0gZnJvbSAnLi9yZW5hbWVQcm9qZWN0JztcclxuaW1wb3J0IHsgQ29udGV4dE1lbnUgfSBmcm9tICcuL2NvbnRleHRNZW51JztcclxuaW1wb3J0IHsgUHJvamVjdEl0ZW0gfSBmcm9tICcuL3Byb2plY3RJdGVtJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBcHBsaWNhdGlvbiB7XHJcbiAgYXBwTWFpbkZvbGRlcklkOiBzdHJpbmc7XHJcbiAgLy8gQXJyYXkgb2Ygb2JqZWN0cyB3aXRoIGRhdGEgbGlrZSAnbmFtZScgYW5kICdpZCcgb2YgdGhlIHByb2plY3RzLlxyXG4gIHByb2plY3RzRGF0YTogYW55OyAvLyBUT0RPIGFycmF5IG9mID9cclxuICBhcHBTZXR0aW5nc0ZvbGRlcklkOiBzdHJpbmc7XHJcbiAgdGh1bWJzRm9sZGVySWQ6IHN0cmluZztcclxuICAvLyBJZiBhIHVzZXIgaXMgbG9nZ2VkIGl0IHByb2ZpbGUgaW5mbyBpcyBzdG9yZWQgaGVyZS5cclxuICB1c2VySW5mbzogZ2FwaS5jbGllbnQuZHJpdmUuVXNlcjtcclxuICB1c2VySW5mb0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gVGhlIGN1cnJlbnQgd29ya3NwYWNlIG9iamVjdCB3aWxsIGJlIHJlZmVyZW5jZWQgaGVyZS5cclxuICBjdXJyZW50V29ya3NwYWNlOiBXb3Jrc3BhY2U7XHJcbiAgd29ya3NwYWNlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgbGFzdFVwbG9hZGVkUHJvamVjdDogUHJvamVjdERhdGE7XHJcbiAgLy8gU3RvcmVzIHRoZSBhY3RpdmUgaXRlbSBpbiB0aGUgcHJvamVjdHMgbGlzdC5cclxuICBwcmV2aW91c0FjdGl2ZUl0ZW06IGFueTsgLy8gVE9ET1xyXG4gIHByb2plY3RzTGlzdEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgZHJhd2luZ3NCdG5zOiBIVE1MRWxlbWVudDtcclxuICB0b29sYmFyc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gTW9kYWwgZGlhbG9nLlxyXG4gIG1vZGFsRGlhbG9nQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBtb2RhbERpYWxvZ0NvbnRlbnQ6IEhUTUxFbGVtZW50O1xyXG4gIG1vZGFsRGlhbG9nc1N0b3JhZ2U6IEhUTUxFbGVtZW50O1xyXG4gIGNsb3NlTW9kYWxCdG46IEhUTUxFbGVtZW50O1xyXG4gIC8vIFZpZXdwb3J0IG1lc3NhZ2UuXHJcbiAgdmlld3BvcnRNZXNzYWdlOiBIVE1MRWxlbWVudDtcclxuICAvLyBQcm9qZWN0cyBsaXN0LlxyXG4gIHByb2plY3RzTGlzdENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgcHJvamVjdHNMaXN0OiBIVE1MRWxlbWVudDtcclxuICBjbG9zZVByb2plY3RzTGlzdEJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gUGFuZWxzIHN0b3JhZ2UuXHJcbiAgcGFuZWxzU3RvcmFnZTogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gU2F2ZSBidXR0b24uXHJcbiAgc2F2ZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gVXBsb2FkIHByb2plY3QgZm9ybVxyXG4gIHVwbG9hZEZpbGVGb3JtOiBIVE1MRWxlbWVudDtcclxuICBmaWxlSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgc3VibWl0RmlsZUJ0bjogSFRNTEVsZW1lbnQ7XHJcbiAgLy8gUmVuYW1lIHByb2plY3QgZm9ybVxyXG4gIHJlbmFtZVByb2plY3REaWFsb2c6IFJlbmFtZVByb2plY3Q7XHJcbiAgLy8gU2hhcmUgcHJvamVjdCBmb3JtXHJcbiAgc2hhcmVQcm9qZWN0RGlhbG9nOiBTaGFyZVByb2plY3Q7XHJcbiAgLy8gTWVzc2FnZSBjb250YWluZXJcclxuICBtZXNzYWdlQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICBtZXNzYWdlVGltZXJJZDogbnVtYmVyO1xyXG4gIC8vIE5vdGlmaWNhdGlvbnMgbWFuYWdlclxyXG4gIG5vdGlmaWNhdGlvbnNNYW5hZ2VyOiBOb3RpZmljYXRpb25zTWFuYWdlcjtcclxuICAvLyBDb250ZXh0IG1lbnVcclxuICBjb250ZXh0TWVudTogQ29udGV4dE1lbnU7XHJcbiAgY29tbWVudHNDaGFuZ2VzVW5zYXZlZDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnVzZXJJbmZvQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXItaW5mbycpO1xyXG4gICAgdGhpcy53b3Jrc3BhY2VzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dvcmtzcGFjZXMnKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzTGlzdEJ0bicpO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJhd2luZ3NCdG5zJyk7XHJcbiAgICB0aGlzLnRvb2xiYXJzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rvb2xiYXJzQ29udGFpbmVyJyk7XHJcbiAgICAvLyBNb2RhbCBkaWFsb2cuXHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsRGlhbG9nQ29udGFpbmVyJyk7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGVudCA9IHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1vZGFsLWNvbnRlbnQnKTtcclxuICAgIHRoaXMubW9kYWxEaWFsb2dzU3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbERpYWxvZ3NTdG9yYWdlJyk7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWxCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VNb2RhbEJ0bicpO1xyXG4gICAgdGhpcy5jbG9zZU1vZGFsRGlhbG9nID0gdGhpcy5jbG9zZU1vZGFsRGlhbG9nLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmNsb3NlTW9kYWxCdG4ub25jbGljayA9IHRoaXMuY2xvc2VNb2RhbERpYWxvZztcclxuICAgIC8vIFZpZXdwb3J0IG1lc3NhZ2UuXHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3cG9ydE1lc3NhZ2UnKTsgLy8gVE9ETyBDcmVhdGUgYXMgYSBuZXcgY29tcG9uZW50IG9mIHRoZSB3b3Jrc3BhY2VcclxuICAgIC8vIFByb2plY3RzIGxpc3QuXHJcbiAgICB0aGlzLnByb2plY3RzTGlzdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0c0xpc3RDb250YWluZXInKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzTGlzdCcpO1xyXG4gICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZVByb2plY3RzTGlzdEJ0bicpO1xyXG4gICAgLy8gUGFuZWxzIHN0b3JhZ2UuXHJcbiAgICB0aGlzLnBhbmVsc1N0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuZWxzU3RvcmFnZScpO1xyXG4gICAgLy8gU2F2ZSBidXR0b24uXHJcbiAgICB0aGlzLnNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZUJ0bicpO1xyXG4gICAgdGhpcy5zYXZlQ29tbWVudHNEYXRhID0gdGhpcy5zYXZlQ29tbWVudHNEYXRhLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnNhdmVCdG4ub25jbGljayA9IHRoaXMuc2F2ZUNvbW1lbnRzRGF0YTtcclxuICAgIC8vIFByb2plY3RzIGxpc3QuXHJcbiAgICB0aGlzLmNsb3NlUHJvamVjdHNMaXN0ID0gdGhpcy5jbG9zZVByb2plY3RzTGlzdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMucHJvamVjdHNMaXN0QnRuLmRhdGFzZXQub3BlbiA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZVByb2plY3RzTGlzdCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKHRoaXMucHJvamVjdHNMaXN0QnRuLmRhdGFzZXQub3BlbiA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICAgIHRoaXMub3BlblByb2plY3RzTGlzdCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmNsb3NlUHJvamVjdHNMaXN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVByb2plY3RzTGlzdCk7XHJcbiAgICB0aGlzLmdvVG9Qcm9qZWN0ID0gdGhpcy5nb1RvUHJvamVjdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdvVG9Qcm9qZWN0KTtcclxuICAgIC8qKioqKioqKioqKioqKioqKioqKiogVXBsb2FkIHByb2plY3QgZm9ybSAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLnVwbG9hZEZpbGVGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZEZpbGVGb3JtJyk7XHJcbiAgICB0aGlzLmZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgdGhpcy5zdWJtaXRGaWxlQnRuID0gdGhpcy51cGxvYWRGaWxlRm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG4gICAgLy8gU2hvdyB0aGUgdXBsb2FkIHByb2plY3QgZm9ybS5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdQcm9qZWN0QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuc2hvd01vZGFsRGlhbG9nKHRoaXMudXBsb2FkRmlsZUZvcm0pO1xyXG4gICAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2dyYXlUcmFuc2x1Y2VudCcpO1xyXG4gICAgfSk7XHJcbiAgICAvLyBIaWRlIHRoZSB1cGxvYWQgcHJvamVjdCBmb3JtLlxyXG4gICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlVXBsb2FkRm9ybScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgLy8gICB0aGlzLmNsb3NlTW9kYWxEaWFsb2codGhpcy51cGxvYWRGaWxlRm9ybSk7XHJcbiAgICAvLyAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZ3JheVRyYW5zbHVjZW50Jyk7XHJcbiAgICAvLyB9KTtcclxuICAgIC8vIExpc3RlbiB0byBmaWxlIGlucHV0IGNoYW5nZXMuXHJcbiAgICB0aGlzLmZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmZpbGVJbnB1dC5maWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5maWxlSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLmlubmVySFRNTCA9IHRoaXMuZmlsZUlucHV0LmZpbGVzWzBdLm5hbWU7XHJcbiAgICAgICAgdGhpcy5zdWJtaXRGaWxlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5maWxlSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLmlubmVySFRNTCA9ICdDaG9vc2UgYSBmaWxlJztcclxuICAgICAgICB0aGlzLnN1Ym1pdEZpbGVCdG4uY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvLyBTdWJtaXQgZmlsZSBsb2dpYy5cclxuICAgIHRoaXMudXBsb2FkRmlsZUZvcm0ub25zdWJtaXQgPSBlID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAvLyBTZXQgbG9hZGluZyBzdGF0ZSBvbiBVSS5cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdGaWxlJykuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICAgIHRoaXMuc3VibWl0RmlsZUJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgICB0aGlzLnN1Ym1pdEZpbGVCdG4uaW5uZXJIVE1MID0gJ1VwbG9hZGluZyBmaWxlJztcclxuICAgICAgKHRoaXMuZmlsZUlucHV0Lm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgY29uc3QgZmlsZSA9ICgoZS50YXJnZXQgYXMgSFRNTEZvcm1FbGVtZW50KS5lbGVtZW50cy5uYW1lZEl0ZW0oXCJmaWxlXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLmZpbGVzWzBdO1xyXG4gICAgICAvLyBUT0RPOiBTaG93IHNvbWUgcmVhbCBwcm9ncmVzcyB3aGlsZSBjcmVhdGluZyB0aGUgcHJvamVjdC5cclxuICAgICAgQVBJLmNyZWF0ZVByb2plY3QoZmlsZSwgdGhpcywgdGhpcy5sYXN0VXBsb2FkZWRQcm9qZWN0KS50aGVuKChyZXM6IFByb2plY3REYXRhKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9qZWN0c0xpc3QocmVzKTtcclxuICAgICAgICB0aGlzLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgJ1Byb2plY3QgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5LicpO1xyXG4gICAgICAgIHRoaXMuZmlsZUlucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgLy8gUmVzZXQgdXBsb2FkIGZvcm0gVUkuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdGaWxlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB0aGlzLmZpbGVJbnB1dC5uZXh0RWxlbWVudFNpYmxpbmcuaW5uZXJIVE1MID0gJ0Nob29zZSBhIGZpbGUnO1xyXG4gICAgICAgIHRoaXMuc3VibWl0RmlsZUJ0bi5pbm5lckhUTUwgPSAnVXBsb2FkJztcclxuICAgICAgICAodGhpcy5maWxlSW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ3Vuc2V0JztcclxuICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICB0aGlzLmNsb3NlTW9kYWxEaWFsb2coKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVByb2plY3RzTGlzdCh0aGlzLmxhc3RVcGxvYWRlZFByb2plY3QpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKiogUmVuYW1lIHByb2plY3QgZm9ybSAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLnJlbmFtZVByb2plY3REaWFsb2cgPSBuZXcgUmVuYW1lUHJvamVjdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVuYW1lUHJvamVjdEZvcm0nKSwgdGhpcyk7XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqIFNoYXJlIHByb2plY3QgZm9ybSAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLnNoYXJlUHJvamVjdERpYWxvZyA9IG5ldyBTaGFyZVByb2plY3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoYXJlUHJvamVjdERpYWxvZycpLCB0aGlzKTtcclxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqIE1lc3NhZ2UgY29udGFpbmVyICoqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZUNvbnRhaW5lcicpO1xyXG4gICAgdGhpcy5jbG9zZU1lc3NhZ2UgPSB0aGlzLmNsb3NlTWVzc2FnZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpLm9uY2xpY2sgPSB0aGlzLmNsb3NlTWVzc2FnZTtcclxuICAgIC8qKioqKioqKioqKioqKiogUHJvamVjdHMgbGlzdCBpdGVtcyBkaXN0cmlidXRpb24gKioqKioqKioqKioqKiovXHJcbiAgICB3aW5kb3cub25yZXNpemUgPSB0aGlzLmFkanVzdEl0ZW1zO1xyXG4gICAgLyoqKioqKioqKioqKioqKiogVG9vbHMgYnV0dG9ucyBldmVudCBsaXN0ZW5lcnMgKioqKioqKioqKioqKioqKi9cclxuICAgIC8vIFRPRE86IFRoaXMgd291bGQgbWFrZSBtb3JlIHNlbnNlIGFzIHBhcnQgb2YgdGhlIHdvcmtzcGFjZSA/XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9vbC00JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5jdXJyZW50V29ya3NwYWNlLm1hbmFnZVRvb2xzKGUsIEVsZW1lbnREYXRhLCAnZWxlbWVudHNEYXRhVG9vbCcpKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b29sLTUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UubWFuYWdlVG9vbHMoZSwgQWRkQ29tbWVudCwgJ2NvbW1lbnRzVG9vbCcpKTtcclxuICAgIC8qKioqKioqKioqKioqKioqKioqKiBOb3RpZmljYXRpb25zIG1hbmFnZXIgKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnNNYW5hZ2VyID0gbmV3IE5vdGlmaWNhdGlvbnNNYW5hZ2VyKCk7XHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqIENvbnRleHQgbWVudSAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgdGhpcy5jb250ZXh0TWVudSA9IG5ldyBDb250ZXh0TWVudSgpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3JlcyB0aGUgY3VycmVudCBsb2dnZWQgdXNlciBpbmZvIGFzIGEgcHJvcGVydHkgb2YgdGhlIGFwcCBhbmRcclxuICAgKiBwb3B1bGF0ZXMgdGhlIFVJIHdpdGggdGhlIHVzZXIgaW5mby5cclxuICAgKi9cclxuICBhc3luYyBzZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJJbmZvUmVzID0gYXdhaXQgQVBJLmdldFVzZXJJbmZvKCk7XHJcbiAgICB0aGlzLnVzZXJJbmZvID0gSlNPTi5wYXJzZSh1c2VySW5mb1Jlcy5ib2R5KS51c2VyO1xyXG4gICAgdGhpcy51c2VySW5mb0NvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxpbWcgc3JjPSR7dGhpcy51c2VySW5mby5waG90b0xpbmt9PlxyXG4gICAgICA8c3Bhbj5cclxuICAgICAgICA8c3Bhbj4ke3RoaXMudXNlckluZm8uZGlzcGxheU5hbWV9PC9zcGFuPjxzcGFuIGNsYXNzPVwiZW1haWxcIj4ke3RoaXMudXNlckluZm8uZW1haWxBZGRyZXNzfTwvc3Bhbj5cclxuICAgICAgPC9zcGFuPmA7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogU2F2ZXMgdGhlIGNvbW1lbnRzIGRhdGEgdXNpbmcgdGhlIGNvbW1lbnRzIGFycmF5IGZyb20gdGhlIGN1cnJlbnQgd29ya3NwYWNlLlxyXG4gICAqIEl0IGFsc28gbm90aWZpZXMgdGhlIG1lbnRpb25lZCBjb2xsYWJvcmF0b3JzIGluIHRoZSBjb21tZW50cyBpZiBhbnkgd2FzIG1lbnRpb25lZCBpbiBuZXcgY29tbWVudHMuXHJcbiAgICogSXQgY3JlYXRlcyB0aGUgZmlsZSAoY29tbWVudHMuanNvbikgaWYgaXQgc3RpbGwgZG9lc250IGV4aXN0IG9yIHVwZGF0ZXMgaXRzIGNvbnRlbnRzIGlmIGl0IGV4aXN0cy5cclxuICAgKi9cclxuICBhc3luYyBzYXZlQ29tbWVudHNEYXRhKCkge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFdvcmtzcGFjZSAmJiB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UuY29tbWVudHNDaGFuZ2VzVW5zYXZlZCkge1xyXG4gICAgICB0aGlzLmNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5zYXZlQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2VuYWJsZWQnKTtcclxuICAgICAgdGhpcy5zYXZlQnRuLmNsYXNzTGlzdC5hZGQoJ3Byb2dyZXNzJyk7XHJcbiAgICAgIGxldCBzYXZpbmdTdWNjZXNzZnVsO1xyXG4gICAgICAvLyBDb2xsZWN0IHRoZSBkYXRhIHRvIHNhdmUgaW4gYmFja2VuZC5cclxuICAgICAgY29uc3QgZGF0YVRvU2F2ZTogT2JqZWN0W10gPSBbXTtcclxuICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLmNvbW1lbnRzLmZvckVhY2goY29tbWVudCA9PiB7XHJcbiAgICAgICAgZGF0YVRvU2F2ZS5wdXNoKHtcclxuICAgICAgICAgIGVsZW1lbnRzSWRzOiBjb21tZW50LmVsZW1lbnRzSWRzLFxyXG4gICAgICAgICAgY29udGVudDogY29tbWVudC5jb250ZW50LFxyXG4gICAgICAgICAgbWVudGlvbnM6IGNvbW1lbnQubWVudGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnN0IGpzb25EYXRhVG9TYXZlID0gSlNPTi5zdHJpbmdpZnkoZGF0YVRvU2F2ZSk7XHJcbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGlkIGZvciB0aGUgY29tbWVudHMuanNvbiBmaWxlIGNyZWF0ZSB0aGUgZmlsZSB3aXRoIHRoZSBjb250ZW50cyBhbmQgZ2V0IHRoZSBpZCBvZiBpdC5cclxuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRXb3Jrc3BhY2UuY29tbWVudHNGaWxlSWQpIHtcclxuICAgICAgICBjb25zdCBjb21tZW50c0ZpbGVDcmVhdGlvblJlcyA9IGF3YWl0IEFQSS51cGxvYWRGaWxlKGpzb25EYXRhVG9TYXZlLCAnYXBwbGljYXRpb24vanNvbicsICdjb21tZW50cy5qc29uJywgdGhpcy5jdXJyZW50V29ya3NwYWNlLnByb2plY3RJZCk7XHJcbiAgICAgICAgaWYgKGNvbW1lbnRzRmlsZUNyZWF0aW9uUmVzLm9rICYmIGNvbW1lbnRzRmlsZUNyZWF0aW9uUmVzLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpO1xyXG4gICAgICAgICAgICBsZXQgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgY29tbWVudHNGaWxlQ3JlYXRpb25SZXMuYm9keS5nZXRSZWFkZXIoKS5yZWFkKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gSlNPTi5wYXJzZShkZWNvZGVyLmRlY29kZSh2YWx1ZSkpLmlkO1xyXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGlkIG9mIHRoZSBjb21tZW50cy5qc29uIGZpbGUgdGhhdCBoYXMgYmVlbiBjcmVhdGVkLlxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UuY29tbWVudHNGaWxlSWQgPSBpZDtcclxuICAgICAgICAgICAgc2F2aW5nU3VjY2Vzc2Z1bCA9IHRydWU7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRlY29kaW5nIHRoZSBuZXcgY29tbWVudHMuanNvbiBmaWxlIGlkOiAnLCBlcnIpOyAvLyBKU09OLnBhcnNlKGVyci5ib2R5KS5lcnJvci5tZXNzYWdlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNhdmluZ1N1Y2Nlc3NmdWwgPSBmYWxzZTtcclxuICAgICAgICAgIC8vIFRPRE86IERlbGV0ZSBleGlzdGluZyBjcmVhdGVkIGZpbGUvcyB3aXRoIG5hbWUgJ2NvbW1lbnRzLmpzb24nLCBpZiB0aGVyZSBpcyBubyBpZCB0aGVuIHVzZSB0aGUgbmFtZT9cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBleGlzdGluZyBjb21tZW50cy5qc29uIGZpbGUuXHJcbiAgICAgICAgY29uc3QgY29tbWVudHNGaWxlVXBkYXRlUmVzID0gYXdhaXQgQVBJLnVwZGF0ZUZpbGVDb250ZW50KGpzb25EYXRhVG9TYXZlLCAnYXBwbGljYXRpb24vanNvbicsIHRoaXMuY3VycmVudFdvcmtzcGFjZS5jb21tZW50c0ZpbGVJZCk7XHJcbiAgICAgICAgaWYgKGNvbW1lbnRzRmlsZVVwZGF0ZVJlcy5vayAmJiBjb21tZW50c0ZpbGVVcGRhdGVSZXMuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgIHNhdmluZ1N1Y2Nlc3NmdWwgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBJZiBzYXZpbmdTdWNjZXNzZnVsIHByb2NlZWQgd2l0aCB0aGUgbm90aWZpY2F0aW9ucyBpZiBhbnkuXHJcbiAgICAgIGlmIChzYXZpbmdTdWNjZXNzZnVsICYmIHRoaXMuY3VycmVudFdvcmtzcGFjZS5wZW5kaW5nTm90aWZpY2F0aW9uc1RvU2VuZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uc1Byb21pc2VzOiBQcm9taXNlPFJlc3BvbnNlPltdID0gW107XHJcbiAgICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLnBlbmRpbmdOb3RpZmljYXRpb25zVG9TZW5kLmZvckVhY2goKG46IGFueSkgPT4geyAvLyBUT0RPIGNoYW5nZSBhbnlcclxuICAgICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvblByb21pc2UgPSBBUEkuc2VuZE5vdGlmaWNhdGlvbihuLmVtYWlscywgbi51c2VyTmFtZSwgbi51c2VyUGhvdG8sIG4udGV4dENvbnRlbnQsIG4ucHJvamVjdE5hbWUsIG4ucHJvamVjdElkKTtcclxuICAgICAgICAgIG5vdGlmaWNhdGlvbnNQcm9taXNlcy5wdXNoKG5vdGlmaWNhdGlvblByb21pc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKG5vdGlmaWNhdGlvbnNQcm9taXNlcykudGhlbihyZXNwb25zZXMgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1VzZXJzIG5vdGlmaWVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgdGhpcy5jdXJyZW50V29ya3NwYWNlLnBlbmRpbmdOb3RpZmljYXRpb25zVG9TZW5kLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAvLyByZXNwb25zZXMuZm9yRWFjaChyZXMgPT4gY29uc29sZS5sb2cocmVzKSk7XHJcbiAgICAgICAgfSwgZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybignVXNlcnMgY291bGRuXFwndCBiZSBub3RpZmllZC4gJywgZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc2F2aW5nU3VjY2Vzc2Z1bCkge1xyXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwcm9ncmVzcycpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseS4nKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNvbW1lbnRzQ2hhbmdlc1Vuc2F2ZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwcm9ncmVzcycpO1xyXG4gICAgICAgIHRoaXMuc2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKCdlbmFibGVkJyk7XHJcbiAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgnZXJyb3InLCAnU29tZXRoaW5nIHdlbnQgd3JvbmcgYW5kIGRhdGEgY291bGQgbm90IGJlIHNhdmVkLicpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nIHRyeWluZyB0byBzYXZlLiBSZXRyeSBhZ2Fpbi4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKiogVEhFIFBST0pFQ1RTIExJU1QgKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBTZWxlY3RzIGEgcHJvamVjdCBmcm9tIHRoZSBsaXN0IGFuZCBtYW5hZ2VzIGl0cyByZXNvdXJjZXMgYmVmb3JlIG9wZW5pbmcgdGhlIHByb2plY3QuXHJcbiAgICogQHBhcmFtIGUgTW91c2UgY2xpY2sgZXZlbnQuXHJcbiAgICovXHJcbiAgZ29Ub1Byb2plY3QoZTogTW91c2VFdmVudCkge1xyXG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsb3Nlc3QoJ1tkYXRhLXByb2otaWRdJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBpZiAocHJvamVjdEl0ZW0gPT09IG51bGwpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgaXQgaXMgdGhlIGN1cnJlbnQgcHJvamVjdCBjbG9zZSB0aGUgbGlzdCB3aW5kb3cuXHJcbiAgICBpZiAodGhpcy5jdXJyZW50V29ya3NwYWNlICYmIHRoaXMuY3VycmVudFdvcmtzcGFjZS5wcm9qZWN0SWQgPT09IHByb2plY3RJdGVtLmRhdGFzZXQucHJvaklkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IElmIHRoZXJlIGhhdmUgYmVlbiBjaGFuZ2VzIGluIHRoZSBwcm9qZWN0IGFzayB0byBzYXZlIG9yIGRpc2NhcmQgdGhlbSBiZWZvcmUgY2xvc2luZyBpdC5cclxuICAgIC8vIFRPRE86IElmIGl0IHdhcyBhbiBvZmZsaW5lIHByb2plY3QgdHJ5IHRvIHN5bmMgaXQgYmVmb3JlIGNsb3NpbmcgaXQuIFRoZSBpZCB3b3VsZCBiZSAndGVtcG9yYWwnIGFuZCB0aGUgY29udGVudHMgaW4gY3VycmVudFByb2plY3RcclxuICAgIGlmICh0aGlzLmxhc3RVcGxvYWRlZFByb2plY3QgJiYgcHJvamVjdEl0ZW0uZGF0YXNldC5wcm9qSWQgPT09IHRoaXMubGFzdFVwbG9hZGVkUHJvamVjdC5pZCkge1xyXG4gICAgICBpZiAodGhpcy5sYXN0VXBsb2FkZWRQcm9qZWN0LmlkID09PSAndGVtcG9yYWwnKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Nob3cgYSBtZXNzYWdlIGluZGljYXRpbmcgdGhhdCB0aGUgcHJvamVjdCBjYW4gYmUgYWNjZXNzZWQgYnV0IGluIHZpZXdlciBtb2RlIGJlY2F1c2UgaXQgY291bGRudCBiZSBzYXZlZC4nKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLm9wZW5Qcm9qZWN0KHRoaXMubGFzdFVwbG9hZGVkUHJvamVjdCk7XHJcbiAgICAgIGlmICh0aGlzLnByZXZpb3VzQWN0aXZlSXRlbSkge1xyXG4gICAgICAgIHRoaXMucHJldmlvdXNBY3RpdmVJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQnKTtcclxuICAgICAgfVxyXG4gICAgICBwcm9qZWN0SXRlbS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XHJcbiAgICAgIHRoaXMucHJldmlvdXNBY3RpdmVJdGVtID0gcHJvamVjdEl0ZW07XHJcbiAgICAgIHRoaXMucHJvamVjdHNMaXN0QnRuLnN0eWxlLmRpc3BsYXkgPSAndW5zZXQnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zaG93Vmlld3BvcnREaWFsb2coJ2xvYWRlcicsIGBMb2FkaW5nIHByb2plY3QgJHtwcm9qZWN0SXRlbS5kYXRhc2V0Lm5hbWV9YCk7XHJcbiAgICAgIEFQSS5mZXRjaFByb2plY3QocHJvamVjdEl0ZW0uZGF0YXNldC5wcm9qSWQsIHRoaXMpXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgIHRoaXMub3BlblByb2plY3QocmVzKTtcclxuICAgICAgICAgIGlmICh0aGlzLnByZXZpb3VzQWN0aXZlSXRlbSkge1xyXG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzQWN0aXZlSXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwcm9qZWN0SXRlbS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XHJcbiAgICAgICAgICB0aGlzLnByZXZpb3VzQWN0aXZlSXRlbSA9IHByb2plY3RJdGVtO1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4uc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICAgICAgICB0aGlzLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgICB9LCBlcnIgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSB3b3Jrc3BhY2Ugd2l0aCB0aGUgcHJvdmlkZWQgcHJvamVjdC5cclxuICAgKi9cclxuICBvcGVuUHJvamVjdChwcm9qZWN0OiBQcm9qZWN0RGF0YSkge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFdvcmtzcGFjZSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIHRoaXMuY3VycmVudFdvcmtzcGFjZSA9IG5ldyBXb3Jrc3BhY2UocHJvamVjdCwgdGhpcyk7XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBwcm9qZWN0VGl0bGU6IHByb2plY3QubmFtZSB9LCBwcm9qZWN0Lm5hbWUsIFwiP2lkPVwiICsgcHJvamVjdC5pZCk7IC8vIGVuY29kZVVSSUNvbXBvbmVudCA/IHVzZSBwdXNoU3RhdGUoKSA/XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbG9zZXMgdGhlIHByb2plY3RzIGxpc3QgYW5kIHNob3dzIHRoZSBjdXJyZW50IHByb2plY3QgdG9vbGJhci5cclxuICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGUgdWkgYXMgcHJvamVjdHMgbGlzdCBjbG9zZWQuXHJcbiAgICovXHJcbiAgY2xvc2VQcm9qZWN0c0xpc3QoKSB7XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMuc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICB0aGlzLnRvb2xiYXJzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdEJ0bi5kYXRhc2V0Lm9wZW4gPSAnZmFsc2UnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT3BlbnMgdGhlIGxpc3Qgb2YgcHJvamVjdHMgY29udGFpbmVyIGFuZCBmZXRjaGVzIHByb2plY3RzIGlmIHJlcXVpcmVkLlxyXG4gICAqIFNldHMgdGhlIHN0YXRlIG9mIHRoZSB1aSBhcyBwcm9qZWN0cyBsaXN0IGNsb3NlZC5cclxuICAgKi9cclxuICBvcGVuUHJvamVjdHNMaXN0KCkge1xyXG4gICAgaWYgKHRoaXMuY3VycmVudFdvcmtzcGFjZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VQcm9qZWN0c0xpc3RCdG4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsb3NlUHJvamVjdHNMaXN0QnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICB0aGlzLnByb2plY3RzTGlzdEJ0bi5kYXRhc2V0Lm9wZW4gPSAndHJ1ZSc7XHJcbiAgICAvLyBIaWRlIHRoZSBkcmF3aW5ncyBhbmQgdG9vbHMgYnV0dG9uc1xyXG4gICAgdGhpcy5kcmF3aW5nc0J0bnMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIHRoaXMudG9vbGJhcnNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIHByb2plY3RzRGF0YSBvciBpZiB0aGVyZSBpcyBvbmx5IG9uZSBmZXRjaCBwcm9qZWN0cy5cclxuICAgIGlmICh0aGlzLnByb2plY3RzRGF0YSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMucHJvamVjdHNEYXRhLmxlbmd0aCA8PSAxKSB7XHJcbiAgICAgIHRoaXMuc2hvd1ZpZXdwb3J0RGlhbG9nKCdsb2FkZXInLCAnTG9hZGluZyBwcm9qZWN0cycpO1xyXG4gICAgICBBUEkubGlzdFByb2plY3RJdGVtcyh0aGlzKS50aGVuKChyZXM6IFByb2plY3REYXRhW10pID0+IHtcclxuICAgICAgICB0aGlzLmNyZWF0ZUhUTUxQcm9qZWN0c0xpc3QocmVzKTtcclxuICAgICAgICAvLyBTZXQgdGhlICdjdXJyZW50JyBjbGFzcyBpbiB0aGUgY3VycmVudCBwcm9qZWN0LlxyXG4gICAgICAgIHRoaXMucHJvamVjdHNMaXN0LmNoaWxkTm9kZXMuZm9yRWFjaCgocHJvajogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgIGlmIChwcm9qLmRhdGFzZXQgJiYgcHJvai5kYXRhc2V0LnByb2pJZCA9PT0gdGhpcy5jdXJyZW50V29ya3NwYWNlLnByb2plY3RJZCkge1xyXG4gICAgICAgICAgICBwcm9qLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQnKTtcclxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c0FjdGl2ZUl0ZW0gPSBwcm9qO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaGlkZVZpZXdwb3J0TWVzc2FnZSgpO1xyXG4gICAgICB9LCByZWogPT4ge1xyXG4gICAgICAgIHRoaXMucHJvamVjdHNMaXN0LmlubmVySFRNTCA9ICc8cCBjbGFzcz1cImVtcHR5LW1zZ1wiPlRoZXJlIGFyZSBubyBwcm9qZWN0cy4gVXBsb2FkIG9uZSE8L3A+JztcclxuICAgICAgICB0aGlzLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZWNlaXZlcyBhbiBhcnJheSBvZiBwcm9qZWN0cyBkYXRhIGFuZCBjcmVhdGVzIGFuZCBhcHBlbmRzIHRoZSBIVE1MIGl0ZW1zLlxyXG4gICAqL1xyXG4gIGNyZWF0ZUhUTUxQcm9qZWN0c0xpc3QocHJvamVjdHNEYXRhOiBQcm9qZWN0RGF0YVtdKSB7XHJcbiAgICBwcm9qZWN0c0RhdGEuZm9yRWFjaChwcm9qRGF0YSA9PiB7XHJcbiAgICAgIGNvbnN0IHByb2plY3RJdGVtID0gbmV3IFByb2plY3RJdGVtKHByb2pEYXRhLCB0aGlzKTtcclxuICAgICAgdGhpcy5wcm9qZWN0c0xpc3QuYXBwZW5kQ2hpbGQocHJvamVjdEl0ZW0uSFRNTENvbnRhaW5lcik7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuYWRqdXN0SXRlbXMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkanVzdHMgdGhlIHBvc2l0aW9uIG9mIHByb2plY3QgaXRlbXMgaW4gdGhlIGNvbnRhaW5lci5cclxuICAgKi9cclxuICBhZGp1c3RJdGVtcygpIHtcclxuICAgIGNvbnN0IGl0ZW1zSCA9IE51bWJlcihnZXRDb21wdXRlZFN0eWxlKHRoaXMucHJvamVjdHNMaXN0KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWl0ZW1zLWgnKSk7XHJcbiAgICBjb25zdCBpdGVtc1RvdGFsID0gdGhpcy5wcm9qZWN0c0xpc3QuY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgdGhpcy5wcm9qZWN0c0xpc3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tcmVtYWluaW5nLWl0ZW1zJywgKChNYXRoLmNlaWwoaXRlbXNUb3RhbCAvIGl0ZW1zSCkgKiBpdGVtc0gpIC0gaXRlbXNUb3RhbCkudG9TdHJpbmcoKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiAgQWRkcyBhIG5ldyBIVE1MIGVsZW1lbnQgaXRlbSB0byB0aGUgbGlzdCBvZiBwcm9qZWN0cy5cclxuICAgKi9cclxuICB1cGRhdGVQcm9qZWN0c0xpc3QocHJvakRhdGE6IFByb2plY3REYXRhKSB7XHJcbiAgICAvLyBSZW1vdmUgdGhlICdubyBwcm9qZWN0cyB5ZXQnIG1lc3NhZ2UgaWYgaXQgaXMgdGhlIGZpcnN0LlxyXG4gICAgaWYgKHRoaXMucHJvamVjdHNEYXRhLmxlbmd0aCA8PSAxKSB7XHJcbiAgICAgIHRoaXMucHJvamVjdHNMaXN0LnF1ZXJ5U2VsZWN0b3IoJy5lbXB0eS1tc2cnKS5yZW1vdmUoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHByb2plY3RJdGVtID0gbmV3IFByb2plY3RJdGVtKHByb2pEYXRhLCB0aGlzKTtcclxuICAgIHRoaXMucHJvamVjdHNMaXN0LnByZXBlbmQocHJvamVjdEl0ZW0uSFRNTENvbnRhaW5lcik7XHJcbiAgICB0aGlzLmFkanVzdEl0ZW1zKCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqIE1FU1NBR0UgQ09OVEFJTkVSICoqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gIC8qXHJcbiAgICogQSBtZXNzYWdlIHRoYXQgd29ya3MgYXMgYSBmZWVkYmFjayBhbmQgdGhhdCBkb2VzbnQgaW50ZXJydXB0LlxyXG4gICAqL1xyXG5cclxuICAvKipcclxuICAqIERpc2FwbGF5cyBmZWVkYmFjayBtZXNzYWdlLlxyXG4gICogQHBhcmFtIHR5cGUgVXNlIGtleXdvcmRzICdzdWNjZXNzJywgJ3dhcm5pbmcnIG9yICdlcnJvcicgdG8gc3BlY2lmeSB0aGUgdHlwZSBvZiBtZXNzYWdlLlxyXG4gICogQHBhcmFtIG1lc3NhZ2UgVGhlIGFjdHVhbCBtZXNzYWdlLlxyXG4gICogQHBhcmFtIHRpbWVyIE9wdGlvbmFsLiBUaW1lIChtcykgYmVmb3JlIGl0IGF1dG9jbG9zZXMuXHJcbiAgKi9cclxuICBzaG93TWVzc2FnZSh0eXBlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgdGltZXI6IG51bWJlciA9IHVuZGVmaW5lZCkge1xyXG4gICAgLy8gSWYgdGhlIGRhdGEtdHlwZSBhdHRyIGhhcyB2YWx1ZSBpcyBiZWNhdXNlIHRoZSBtZXNzYWdlIGlzIHN0aWxsIG9wZW4uXHJcbiAgICBpZiAodGhpcy5tZXNzYWdlQ29udGFpbmVyLmRhdGFzZXQudHlwZSAhPT0gJycpIHtcclxuICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5tZXNzYWdlQ29udGFpbmVyLmRhdGFzZXQudHlwZSk7XHJcbiAgICAgIGlmICh0aGlzLm1lc3NhZ2VUaW1lcklkKSB7XHJcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLm1lc3NhZ2VUaW1lcklkKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VUaW1lcklkID0gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgIH1cclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5kYXRhc2V0LnR5cGUgPSB0eXBlO1xyXG4gICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3AnKS5pbm5lclRleHQgPSBtZXNzYWdlO1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgJ3N1Y2Nlc3MnOlxyXG4gICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3dhcm5pbmcnOlxyXG4gICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd3YXJuaW5nJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Vycm9yJzpcclxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGlmICh0aW1lcikge1xyXG4gICAgICB0aGlzLm1lc3NhZ2VUaW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5jbG9zZU1lc3NhZ2UoKSwgdGltZXIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xvc2VzIHRoZSBtZXNzYWdlIGNvbnRhaW5lciBhbmQgcmVtb3ZlcyB0aGUgY2xhc3MgdGhhdCBnaXZlcyB0aGUgdHlwZSBvZiBtZXNzYWdlIHN0eWxlLlxyXG4gICAqL1xyXG4gIGNsb3NlTWVzc2FnZSgpIHtcclxuICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5tZXNzYWdlQ29udGFpbmVyLmRhdGFzZXQudHlwZSk7XHJcbiAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuZGF0YXNldC50eXBlID0gJyc7XHJcbiAgICBpZiAodGhpcy5tZXNzYWdlVGltZXJJZCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5tZXNzYWdlVGltZXJJZCk7XHJcbiAgICAgIHRoaXMubWVzc2FnZVRpbWVySWQgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqIFZJRVdQT1JUIE1FU1NBR0VTICoqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gIC8qXHJcbiAgICogQSBtZXNzYWdlIG9uIHRoZSBtaWRkbGUgb2YgdGhlIHZpZXdwb3J0IHRoYXQgaW50ZXJydXB0cy5cclxuICAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogTWFuYWdlcyB0aGUgY3JlYXRpb24gb2YgYSBtZXNzYWdlIG9uIHRoZSB2aWV3cG9ydC5cclxuICAgKiBAcGFyYW0gdHlwZSBJZiBhY3Rpb24gYW4gb2JqZWN0IHdpdGggYSBmdW5jdGlvbiByZWZlcmVuY2UgYW5kIGEgbmFtZSBzaG91bGQgYmUgcHJvdmlkZWQuXHJcbiAgICogQHBhcmFtIG1lc3NhZ2UgXHJcbiAgICogQHBhcmFtIGFjdGlvbnMgQXJyYXkgb2Ygb2JqZWN0cyB3aXRoIG5hbWUgYW5kIGZ1bmN0aW9uIGVudHJpZXMuXHJcbiAgICovXHJcbiAgc2hvd1ZpZXdwb3J0RGlhbG9nKHR5cGU6ICdsb2FkZXInIHwgJ21lc3NhZ2UnIHwgJ2FjdGlvbicsIG1lc3NhZ2U6IHN0cmluZywgYWN0aW9uczogYW55W10gPSBbXSkgeyAvLyBUT0RPIHNldCB0aGUgYW55IGFycmF5IHR5cGVcclxuICAgIGlmICh0aGlzLnZpZXdwb3J0TWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcuYnRucy1jb250YWluZXInKSkge1xyXG4gICAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5xdWVyeVNlbGVjdG9yQWxsKCcuYnRucy1jb250YWluZXIgPiBidXR0b24nKS5mb3JFYWNoKChidG46IEhUTUxFbGVtZW50KSA9PiBidG4ub25jbGljayA9IG51bGwpO1xyXG4gICAgfVxyXG4gICAgR2VuZXJpY3MuZW1wdHlOb2RlKHRoaXMudmlld3BvcnRNZXNzYWdlKTtcclxuICAgIC8vIENyZWF0ZSB0aGUgbmV3IGNvbnRlbnQuXHJcbiAgICBjb25zdCBpbm5lckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgaWYgKHR5cGUgPT09ICdsb2FkZXInKSB7XHJcbiAgICAgIGlubmVyQ29udGFpbmVyLmlubmVySFRNTCA9IGA8cD4ke21lc3NhZ2V9PC9wPjxzdmcgY2xhc3M9XCJzdmctbG9hZGVyXCI+PHVzZSBocmVmPVwiI3ZhTG9hZGVyXCIvPjwvc3ZnPmA7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdhY3Rpb24nICYmIGFjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBpbm5lckNvbnRhaW5lci5pbm5lckhUTUwgPSBgPHA+JHttZXNzYWdlfTwvcD5gO1xyXG4gICAgICBjb25zdCBidG5zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGJ0bnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnYnRucy1jb250YWluZXInKTtcclxuICAgICAgYWN0aW9ucy5mb3JFYWNoKGFjdGlvbiA9PiB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uLmlubmVySFRNTCA9IGFjdGlvbi5uYW1lO1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidXR0b25CYXNlJywgJ2xpZ2h0Jyk7XHJcbiAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSBhY3Rpb24uZnVuY3Rpb247XHJcbiAgICAgICAgYnRuc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICB9KTtcclxuICAgICAgaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnRuc0NvbnRhaW5lcik7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdtZXNzYWdlJykgeyAvLyBJcyB0aGlzIG9uZSB1c2VmdWw/IE1heWJlIHdpdGggYSBzZXRUaW1lb3V0P1xyXG4gICAgICBpbm5lckNvbnRhaW5lci5pbm5lckhUTUwgPSAnPHA+JyArIG1lc3NhZ2UgKyAnPC9wPic7XHJcbiAgICB9XHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5hcHBlbmRDaGlsZChpbm5lckNvbnRhaW5lcik7XHJcbiAgICB0aGlzLnZpZXdwb3J0TWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhpZGVzIHRoZSB2aWV3cG9ydCBtZXNzYWdlIGlmIHZpc2libGUuXHJcbiAgICovXHJcbiAgaGlkZVZpZXdwb3J0TWVzc2FnZSgpIHtcclxuICAgIHRoaXMudmlld3BvcnRNZXNzYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKioqKioqKioqKioqKioqKioqKiogTU9EQUwgRElBTE9HUyAqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgLypcclxuICAgKiBBbGwgbW9kYWwgZGlhbG9nIGNvbnRlbnRzIGFyZSBzdG9yZWQgaW4gYSBjb250YWluZXIgYW5kIGZldGNoZWQgd2hlbiBuZWVkZWQuXHJcbiAgICovXHJcblxyXG4gIC8qKlxyXG4gICAqIFNob3dzIHRoZSBtb2RhbCBkaWFsb2cgcHJvdmlkZWQgZnJvbSB0aGUgc2FtZSBkb2N1bWVudC5cclxuICAgKiBAcGFyYW0gY29udGVudCBSZWZlcmVuY2UgdG8gdGhlIG91dGVyIEhUTUwgZWxlbWVudCBvZiB0aGUgZGlhbG9nLlxyXG4gICAqIEBwYXJhbSBiYWNrZ3JvdW5kIEl0IGNhbiBiZSAndHJhbnNsdWNlbnQnIG9yICdvcGFxdWUnLiBEZWZhdWx0IHZhbHVlIGlzICd0cmFuc2x1Y2VudCcuXHJcbiAgICogQHBhcmFtIGNsb3NhYmxlIFdoZWF0ZXIgdG8gc2hvdyBhIGJ1dHRvbiB0byBjbG9zZSBpdCBvciBub3QuIEJ5IGRlYWZ1bHQgaXQgaGFzIGEgYnV0dG9uLlxyXG4gICAqL1xyXG4gIHNob3dNb2RhbERpYWxvZyhjb250ZW50OiBIVE1MRWxlbWVudCwgYmFja2dyb3VuZCA9ICd0cmFuc2x1Y2VudCcsIGNsb3NhYmxlID0gdHJ1ZSkge1xyXG4gICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRhaW5lci5jbGFzc0xpc3QudmFsdWUgPSAnJztcclxuICAgIGlmIChiYWNrZ3JvdW5kID09PSAndHJhbnNsdWNlbnQnKSB7XHJcbiAgICAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZ3JheVRyYW5zbHVjZW50Jyk7XHJcbiAgICB9IGVsc2UgaWYgKGJhY2tncm91bmQgPT09ICdvcGFxdWUnKSB7XHJcbiAgICAgIHRoaXMubW9kYWxEaWFsb2dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbGlnaHRPcGFxdWUnKTtcclxuICAgIH1cclxuICAgIGlmIChjbG9zYWJsZSkge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWxCdG4uc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNsb3NlTW9kYWxCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIH1cclxuICAgIHRoaXMubW9kYWxEaWFsb2dDb250ZW50LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG4gICAgdGhpcy5tb2RhbERpYWxvZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGlkZXMgdGhlIGN1cnJlbnQgbW9kYWwgZGlhbG9nLlxyXG4gICAqL1xyXG4gIGNsb3NlTW9kYWxEaWFsb2coKSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5tb2RhbERpYWxvZ0NvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB0aGlzLm1vZGFsRGlhbG9nc1N0b3JhZ2UuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqKioqKioqKioqKioqKioqKioqKiBTVEFSVCBUSEUgQVBQTElDQVRJT04gKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAvKipcclxuICAgKiBTdGFydHMgdGhlIGFwcCwgaWYgYSBwcm9qZWN0IGlkIGlzIHByb3ZpZGVkIGl0IHdpbGwgc3RhcnQgZnJvbSB0aGF0IHByb2plYyB2aWV3LlxyXG4gICAqIElmIG5vIHByb2plY3QgaWQgaXMgcHJvdmlkZWQgaXQgd2lsbCBzdGFydCBmcm9tIHRoZSBwcm9qZWN0cyBsaXN0IHZpZXcuXHJcbiAgICovXHJcbiAgc3RhcnQocHJvamVjdElkOiBzdHJpbmcgPSAnJykge1xyXG4gICAgLy8gU2hvdyB0aGUgYXBwIGludGVyZmFjZS5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAvLyBTdGFydCBvcHRpb25zIGRlcGVuZGluZyBpZiB0aGVyZSBpcyBhIHByb2plY3RJZC5cclxuICAgIGlmIChwcm9qZWN0SWQgIT09ICcnKSB7XHJcbiAgICAgIHRoaXMuc2hvd1ZpZXdwb3J0RGlhbG9nKCdsb2FkZXInLCAnTG9hZGluZyBwcm9qZWN0Jyk7XHJcbiAgICAgIEFQSS5mZXRjaFByb2plY3QocHJvamVjdElkLCB0aGlzKVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnRXb3Jrc3BhY2UgPSBuZXcgV29ya3NwYWNlKHJlcywgdGhpcyk7XHJcbiAgICAgICAgICB0aGlzLmNyZWF0ZUhUTUxQcm9qZWN0c0xpc3QoW3Jlc10pO1xyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0c0xpc3RCdG4uc3R5bGUuZGlzcGxheSA9ICd1bnNldCc7XHJcbiAgICAgICAgICB0aGlzLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgICAgIC8vIElmIHRoZSBwcm9qZWN0IGhhcyBjb2xsYWJvcmF0b3JzIGFza3MgdGhlIGRldmljZSB0b2tlblxyXG4gICAgICAgICAgLy8gaW4gY2FzZSBpdCBpcyBuZWVkZWQgdG8gcmVjZWl2ZSBub3RpZmljYXRpb25zLlxyXG4gICAgICAgICAgLy8gVE9ETzogSWYgdGhpcyBwcm9qZWN0IGRvZXN0IGhhdmUgY29sbGFib3JhdG9ycyBidXQgb3RoZXIgeWVzIElcclxuICAgICAgICAgIC8vIHdvdWxkIG5lZWQgdG8ga25vdyBvdGhlcndpc2UgdGhlIGRldmljZSB0b2tlbiB3b3VsZCBub3QgYmUgYXNrZWQuXHJcbiAgICAgICAgICAvLyBUT0RPOiBDaGVjayBpZiBhbnkgb2YgdGhlIHByb2plY3QgZm9sZGVycyBoYXMgbW9yZSB0aGFuIG9uZSBwZXJtaXNzaW9uLlxyXG4gICAgICAgICAgaWYgKHJlcy5wZXJtaXNzaW9ucy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5zYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCByZWogPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVqKTtcclxuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlai5ib2R5ID09PSB1bmRlZmluZWQgPyByZWogOiBgTWVzc2FnZTogJHtKU09OLnBhcnNlKHJlai5ib2R5KS5lcnJvci5tZXNzYWdlfSBDb2RlOiAke0pTT04ucGFyc2UocmVqLmJvZHkpLmVycm9yLmNvZGV9YDtcclxuICAgICAgICAgIHRoaXMuc2hvd1ZpZXdwb3J0RGlhbG9nKCdhY3Rpb24nLCBlcnJvck1lc3NhZ2UsIFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG5hbWU6ICdWaWV3IHByb2plY3RzIGxpc3QnLFxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qcm9qZWN0c0xpc3QoKTtcclxuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2ggIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBwYWdlOiAnUHJvamVjdHMgbGlzdCcgfSwgJ1Byb2plY3RzIGxpc3QnLCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UobG9jYXRpb24uc2VhcmNoLCAnJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBEZWxldGUgYW55IGludmFsaWQgc2VhcmNoIHBhcmFtZXRlciBpZiBhbnkuXHJcbiAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2ggIT09IFwiXCIpIHtcclxuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7IHBhZ2U6ICdQcm9qZWN0cyBsaXN0JyB9LCAnUHJvamVjdHMgbGlzdCcsIGxvY2F0aW9uLmhyZWYucmVwbGFjZShsb2NhdGlvbi5zZWFyY2gsICcnKSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5wcm9qZWN0c0xpc3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgIHRoaXMuc2hvd1ZpZXdwb3J0RGlhbG9nKCdsb2FkZXInLCAnTG9hZGluZyBwcm9qZWN0cycpO1xyXG4gICAgICAvLyBUT0RPOiBMaW1pdCB0aGUgbnVtYmVyIG9mIHByb2plY3RzIHRvIGxpc3RcclxuICAgICAgQVBJLmxpc3RQcm9qZWN0SXRlbXModGhpcykudGhlbigocmVzOiBQcm9qZWN0RGF0YVtdKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVIVE1MUHJvamVjdHNMaXN0KHJlcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgICAgLy8gQ2hlY2tzIGlmIGF0IGxlYXN0IG9uZSBwcm9qZWN0IGhhcyBjb2xsYWJvcmF0b3JzIGFuZCBpZiBzbyBhc2tzIGZvciB0aGVcclxuICAgICAgICAvLyBkZXZpY2UgbWVzc2FnaW5nIHRva2VuIHRoYXQgY291bGQgYmUgbmVlZGVkIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucy5cclxuICAgICAgICBpZiAod2luZG93LnRoZXJlSXNNZXNzYWdpbmcpIHtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXNbaV0ucGVybWlzc2lvbnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgIHdpbmRvdy5zYXZlTWVzc2FnaW5nRGV2aWNlVG9rZW4oKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSwgcmVqID0+IHtcclxuICAgICAgICB0aGlzLnByb2plY3RzTGlzdC5pbm5lckhUTUwgPSAnPHAgY2xhc3M9XCJlbXB0eS1tc2dcIj5UaGVyZSBhcmUgbm8gcHJvamVjdHMuIFVwbG9hZCBvbmUhPC9wPic7XHJcbiAgICAgICAgdGhpcy5oaWRlVmlld3BvcnRNZXNzYWdlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufSIsImltcG9ydCBmaXJlYmFzZSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCAnQGZpcmViYXNlL2luc3RhbGxhdGlvbnMnO1xuaW1wb3J0IHsgX19hc3NpZ24sIF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBBTkFMWVRJQ1NfSURfRklFTEQgPSAnbWVhc3VyZW1lbnRJZCc7XHJcbi8vIEtleSB0byBhdHRhY2ggRklEIHRvIGluIGd0YWcgcGFyYW1zLlxyXG52YXIgR0FfRklEX0tFWSA9ICdmaXJlYmFzZV9pZCc7XHJcbnZhciBPUklHSU5fS0VZID0gJ29yaWdpbic7XHJcbnZhciBHVEFHX1VSTCA9ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2pzJztcclxudmFyIEd0YWdDb21tYW5kO1xyXG4oZnVuY3Rpb24gKEd0YWdDb21tYW5kKSB7XHJcbiAgICBHdGFnQ29tbWFuZFtcIkVWRU5UXCJdID0gXCJldmVudFwiO1xyXG4gICAgR3RhZ0NvbW1hbmRbXCJTRVRcIl0gPSBcInNldFwiO1xyXG4gICAgR3RhZ0NvbW1hbmRbXCJDT05GSUdcIl0gPSBcImNvbmZpZ1wiO1xyXG59KShHdGFnQ29tbWFuZCB8fCAoR3RhZ0NvbW1hbmQgPSB7fSkpO1xyXG4vKlxyXG4gKiBPZmZpY2lhbGx5IHJlY29tbWVuZGVkIGV2ZW50IG5hbWVzIGZvciBndGFnLmpzXHJcbiAqIEFueSBvdGhlciBzdHJpbmcgaXMgYWxzbyBhbGxvd2VkLlxyXG4gKi9cclxudmFyIEV2ZW50TmFtZTtcclxuKGZ1bmN0aW9uIChFdmVudE5hbWUpIHtcclxuICAgIEV2ZW50TmFtZVtcIkFERF9QQVlNRU5UX0lORk9cIl0gPSBcImFkZF9wYXltZW50X2luZm9cIjtcclxuICAgIEV2ZW50TmFtZVtcIkFERF9UT19DQVJUXCJdID0gXCJhZGRfdG9fY2FydFwiO1xyXG4gICAgRXZlbnROYW1lW1wiQUREX1RPX1dJU0hMSVNUXCJdID0gXCJhZGRfdG9fd2lzaGxpc3RcIjtcclxuICAgIEV2ZW50TmFtZVtcIkJFR0lOX0NIRUNLT1VUXCJdID0gXCJiZWdpbl9jaGVja291dFwiO1xyXG4gICAgRXZlbnROYW1lW1wiQ0hFQ0tPVVRfUFJPR1JFU1NcIl0gPSBcImNoZWNrb3V0X3Byb2dyZXNzXCI7XHJcbiAgICBFdmVudE5hbWVbXCJFWENFUFRJT05cIl0gPSBcImV4Y2VwdGlvblwiO1xyXG4gICAgRXZlbnROYW1lW1wiR0VORVJBVEVfTEVBRFwiXSA9IFwiZ2VuZXJhdGVfbGVhZFwiO1xyXG4gICAgRXZlbnROYW1lW1wiTE9HSU5cIl0gPSBcImxvZ2luXCI7XHJcbiAgICBFdmVudE5hbWVbXCJQQUdFX1ZJRVdcIl0gPSBcInBhZ2Vfdmlld1wiO1xyXG4gICAgRXZlbnROYW1lW1wiUFVSQ0hBU0VcIl0gPSBcInB1cmNoYXNlXCI7XHJcbiAgICBFdmVudE5hbWVbXCJSRUZVTkRcIl0gPSBcInJlZnVuZFwiO1xyXG4gICAgRXZlbnROYW1lW1wiUkVNT1ZFX0ZST01fQ0FSVFwiXSA9IFwicmVtb3ZlX2Zyb21fY2FydFwiO1xyXG4gICAgRXZlbnROYW1lW1wiU0NSRUVOX1ZJRVdcIl0gPSBcInNjcmVlbl92aWV3XCI7XHJcbiAgICBFdmVudE5hbWVbXCJTRUFSQ0hcIl0gPSBcInNlYXJjaFwiO1xyXG4gICAgRXZlbnROYW1lW1wiU0VMRUNUX0NPTlRFTlRcIl0gPSBcInNlbGVjdF9jb250ZW50XCI7XHJcbiAgICBFdmVudE5hbWVbXCJTRVRfQ0hFQ0tPVVRfT1BUSU9OXCJdID0gXCJzZXRfY2hlY2tvdXRfb3B0aW9uXCI7XHJcbiAgICBFdmVudE5hbWVbXCJTSEFSRVwiXSA9IFwic2hhcmVcIjtcclxuICAgIEV2ZW50TmFtZVtcIlNJR05fVVBcIl0gPSBcInNpZ25fdXBcIjtcclxuICAgIEV2ZW50TmFtZVtcIlRJTUlOR19DT01QTEVURVwiXSA9IFwidGltaW5nX2NvbXBsZXRlXCI7XHJcbiAgICBFdmVudE5hbWVbXCJWSUVXX0lURU1cIl0gPSBcInZpZXdfaXRlbVwiO1xyXG4gICAgRXZlbnROYW1lW1wiVklFV19JVEVNX0xJU1RcIl0gPSBcInZpZXdfaXRlbV9saXN0XCI7XHJcbiAgICBFdmVudE5hbWVbXCJWSUVXX1BST01PVElPTlwiXSA9IFwidmlld19wcm9tb3Rpb25cIjtcclxuICAgIEV2ZW50TmFtZVtcIlZJRVdfU0VBUkNIX1JFU1VMVFNcIl0gPSBcInZpZXdfc2VhcmNoX3Jlc3VsdHNcIjtcclxufSkoRXZlbnROYW1lIHx8IChFdmVudE5hbWUgPSB7fSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIExvZ3MgYW4gYW5hbHl0aWNzIGV2ZW50IHRocm91Z2ggdGhlIEZpcmViYXNlIFNESy5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gZXZlbnROYW1lIEdvb2dsZSBBbmFseXRpY3MgZXZlbnQgbmFtZSwgY2hvb3NlIGZyb20gc3RhbmRhcmQgbGlzdCBvciB1c2UgYSBjdXN0b20gc3RyaW5nLlxyXG4gKiBAcGFyYW0gZXZlbnRQYXJhbXMgQW5hbHl0aWNzIGV2ZW50IHBhcmFtZXRlcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBsb2dFdmVudChndGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBldmVudE5hbWUsIGV2ZW50UGFyYW1zLCBvcHRpb25zKSB7XHJcbiAgICB2YXIgcGFyYW1zID0gZXZlbnRQYXJhbXMgfHwge307XHJcbiAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgcGFyYW1zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGV2ZW50UGFyYW1zKSwgeyAnc2VuZF90byc6IGFuYWx5dGljc0lkIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cDovL2IvMTQxMzcwNDQ5IC0gdGhpcmQgYXJndW1lbnQgY2Fubm90IGJlIHVuZGVmaW5lZC5cclxuICAgIGd0YWdGdW5jdGlvbihHdGFnQ29tbWFuZC5FVkVOVCwgZXZlbnROYW1lLCBwYXJhbXMgfHwge30pO1xyXG59XHJcbi8vIFRPRE86IEJyYWQgaXMgZ29pbmcgdG8gYWRkIGBzY3JlZW5fbmFtZWAgdG8gR0EgR29sZCBjb25maWcgcGFyYW1ldGVyIHNjaGVtYVxyXG4vKipcclxuICogU2V0IHNjcmVlbl9uYW1lIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBzY3JlZW5OYW1lIFNjcmVlbiBuYW1lIHN0cmluZyB0byBzZXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRDdXJyZW50U2NyZWVuKGd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZ2xvYmFsKSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKEd0YWdDb21tYW5kLlNFVCwgeyAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZ3RhZ0Z1bmN0aW9uKEd0YWdDb21tYW5kLkNPTkZJRywgYW5hbHl0aWNzSWQsIHtcclxuICAgICAgICAgICAgdXBkYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAnc2NyZWVuX25hbWUnOiBzY3JlZW5OYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCB1c2VyX2lkIHBhcmFtZXRlciBmb3IgdGhpcyBHb29nbGUgQW5hbHl0aWNzIElELlxyXG4gKlxyXG4gKiBAcGFyYW0gZ3RhZ0Z1bmN0aW9uIFdyYXBwZWQgZ3RhZyBmdW5jdGlvbiB0aGF0IHdhaXRzIGZvciBmaWQgdG8gYmUgc2V0IGJlZm9yZSBzZW5kaW5nIGFuIGV2ZW50XHJcbiAqIEBwYXJhbSBpZCBVc2VyIElEIHN0cmluZyB0byBzZXRcclxuICovXHJcbmZ1bmN0aW9uIHNldFVzZXJJZChndGFnRnVuY3Rpb24sIGFuYWx5dGljc0lkLCBpZCwgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuU0VULCB7ICd1c2VyX2lkJzogaWQgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuQ09ORklHLCBhbmFseXRpY3NJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICd1c2VyX2lkJzogaWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2V0IGFsbCBvdGhlciB1c2VyIHByb3BlcnRpZXMgb3RoZXIgdGhhbiB1c2VyX2lkIGFuZCBzY3JlZW5fbmFtZS5cclxuICpcclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbiBXcmFwcGVkIGd0YWcgZnVuY3Rpb24gdGhhdCB3YWl0cyBmb3IgZmlkIHRvIGJlIHNldCBiZWZvcmUgc2VuZGluZyBhbiBldmVudFxyXG4gKiBAcGFyYW0gcHJvcGVydGllcyBNYXAgb2YgdXNlciBwcm9wZXJ0aWVzIHRvIHNldFxyXG4gKi9cclxuZnVuY3Rpb24gc2V0VXNlclByb3BlcnRpZXMoZ3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgcHJvcGVydGllcywgb3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5nbG9iYWwpIHtcclxuICAgICAgICB2YXIgZmxhdFByb3BlcnRpZXMgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMocHJvcGVydGllcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIC8vIHVzZSBkb3Qgbm90YXRpb24gZm9yIG1lcmdlIGJlaGF2aW9yIGluIGd0YWcuanNcclxuICAgICAgICAgICAgZmxhdFByb3BlcnRpZXNbXCJ1c2VyX3Byb3BlcnRpZXMuXCIgKyBrZXldID0gcHJvcGVydGllc1trZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuU0VULCBmbGF0UHJvcGVydGllcyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBndGFnRnVuY3Rpb24oR3RhZ0NvbW1hbmQuQ09ORklHLCBhbmFseXRpY3NJZCwge1xyXG4gICAgICAgICAgICB1cGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgICd1c2VyX3Byb3BlcnRpZXMnOiBwcm9wZXJ0aWVzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNldCB3aGV0aGVyIGNvbGxlY3Rpb24gaXMgZW5hYmxlZCBmb3IgdGhpcyBJRC5cclxuICpcclxuICogQHBhcmFtIGVuYWJsZWQgSWYgdHJ1ZSwgY29sbGVjdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIElELlxyXG4gKi9cclxuZnVuY3Rpb24gc2V0QW5hbHl0aWNzQ29sbGVjdGlvbkVuYWJsZWQoYW5hbHl0aWNzSWQsIGVuYWJsZWQpIHtcclxuICAgIHdpbmRvd1tcImdhLWRpc2FibGUtXCIgKyBhbmFseXRpY3NJZF0gPSAhZW5hYmxlZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgdGhlIGFuYWx5dGljcyBpbnN0YW5jZSBpbiBndGFnLmpzIGJ5IGNhbGxpbmcgY29uZmlnIGNvbW1hbmQgd2l0aCBmaWQuXHJcbiAqXHJcbiAqIE5PVEU6IFdlIGNvbWJpbmUgYW5hbHl0aWNzIGluaXRpYWxpemF0aW9uIGFuZCBzZXR0aW5nIGZpZCB0b2dldGhlciBiZWNhdXNlIHdlIHdhbnQgZmlkIHRvIGJlXHJcbiAqIHBhcnQgb2YgdGhlIGBwYWdlX3ZpZXdgIGV2ZW50IHRoYXQncyBzZW50IGR1cmluZyB0aGUgaW5pdGlhbGl6YXRpb25cclxuICogQHBhcmFtIGFwcCBGaXJlYmFzZSBhcHBcclxuICogQHBhcmFtIGd0YWdDb3JlIFRoZSBndGFnIGZ1bmN0aW9uIHRoYXQncyBub3Qgd3JhcHBlZC5cclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVHQUlkKGFwcCwgaW5zdGFsbGF0aW9ucywgZ3RhZ0NvcmUpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlkO1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW5zdGFsbGF0aW9ucy5nZXRJZCgpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBmaWQgPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb21tYW5kIGluaXRpYWxpemVzIGd0YWcuanMgYW5kIG9ubHkgbmVlZHMgdG8gYmUgY2FsbGVkIG9uY2UgZm9yIHRoZSBlbnRpcmUgd2ViIGFwcCxcclxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgc2luY2UgaXQgaXMgaWRlbXBvdGVudCwgd2UgY2FuIGNhbGwgaXQgbXVsdGlwbGUgdGltZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Uga2VlcCBpdCB0b2dldGhlciB3aXRoIG90aGVyIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBiZXR0ZXIgY29kZSBzdHJ1Y3R1cmUuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgICAgICBndGFnQ29yZSgnanMnLCBuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJdCBzaG91bGQgYmUgdGhlIGZpcnN0IGNvbmZpZyBjb21tYW5kIGNhbGxlZCBvbiB0aGlzIEdBLUlEXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGlzIEdBLUlEIGFuZCBzZXQgRklEIG9uIGl0IHVzaW5nIHRoZSBndGFnIGNvbmZpZyBBUEkuXHJcbiAgICAgICAgICAgICAgICAgICAgZ3RhZ0NvcmUoR3RhZ0NvbW1hbmQuQ09ORklHLCBhcHAub3B0aW9uc1tBTkFMWVRJQ1NfSURfRklFTERdLCAoX2EgPSB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2FbR0FfRklEX0tFWV0gPSBmaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGd1YXJkIGFnYWluc3QgZGV2ZWxvcGVycyBhY2NpZGVudGFsbHkgc2V0dGluZyBwcm9wZXJ0aWVzIHdpdGggcHJlZml4IGBmaXJlYmFzZV9gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hW09SSUdJTl9LRVldID0gJ2ZpcmViYXNlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudXBkYXRlID0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGluc2VydFNjcmlwdFRhZyhkYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAvLyBXZSBhcmUgbm90IHByb3ZpZGluZyBhbiBhbmFseXRpY3NJZCBpbiB0aGUgVVJMIGJlY2F1c2UgaXQgd291bGQgdHJpZ2dlciBhIGBwYWdlX3ZpZXdgXHJcbiAgICAvLyB3aXRob3V0IGZpZC4gV2Ugd2lsbCBpbml0aWFsaXplIGdhLWlkIHVzaW5nIGd0YWcgKGNvbmZpZykgY29tbWFuZCB0b2dldGhlciB3aXRoIGZpZC5cclxuICAgIHNjcmlwdC5zcmMgPSBHVEFHX1VSTCArIFwiP2w9XCIgKyBkYXRhTGF5ZXJOYW1lO1xyXG4gICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcclxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxufVxyXG4vKiogR2V0IHJlZmVyZW5jZSB0bywgb3IgY3JlYXRlLCBnbG9iYWwgZGF0YWxheWVyLlxyXG4gKiBAcGFyYW0gZGF0YUxheWVyTmFtZSBOYW1lIG9mIGRhdGFsYXllciAobW9zdCBvZnRlbiB0aGUgZGVmYXVsdCwgXCJfZGF0YUxheWVyXCIpXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRPckNyZWF0ZURhdGFMYXllcihkYXRhTGF5ZXJOYW1lKSB7XHJcbiAgICAvLyBDaGVjayBmb3IgZXhpc3RpbmcgZGF0YUxheWVyIGFuZCBjcmVhdGUgaWYgbmVlZGVkLlxyXG4gICAgdmFyIGRhdGFMYXllciA9IFtdO1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkod2luZG93W2RhdGFMYXllck5hbWVdKSkge1xyXG4gICAgICAgIGRhdGFMYXllciA9IHdpbmRvd1tkYXRhTGF5ZXJOYW1lXTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHdpbmRvd1tkYXRhTGF5ZXJOYW1lXSA9IGRhdGFMYXllcjtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhTGF5ZXI7XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgc3RhbmRhcmQgZ3RhZyBmdW5jdGlvbiB3aXRoIGV4dHJhIGNvZGUgdG8gd2FpdCBmb3IgY29tcGxldGlvbiBvZlxyXG4gKiByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBiZWZvcmUgc2VuZGluZyByZXF1ZXN0cy5cclxuICpcclxuICogQHBhcmFtIGd0YWdDb3JlIEJhc2ljIGd0YWcgZnVuY3Rpb24gdGhhdCBqdXN0IGFwcGVuZHMgdG8gZGF0YUxheWVyXHJcbiAqIEBwYXJhbSBpbml0aWFsaXplZElkUHJvbWlzZXNNYXAgTWFwIG9mIGdhSWRzIHRvIHRoZWlyIGluaXRpYWxpemF0aW9uIHByb21pc2VzXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwR3RhZyhndGFnQ29yZSwgaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGNvbW1hbmQsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMpIHtcclxuICAgICAgICAvLyBJZiBldmVudCwgY2hlY2sgdGhhdCByZWxldmFudCBpbml0aWFsaXphdGlvbiBwcm9taXNlcyBoYXZlIGNvbXBsZXRlZC5cclxuICAgICAgICBpZiAoY29tbWFuZCA9PT0gR3RhZ0NvbW1hbmQuRVZFTlQpIHtcclxuICAgICAgICAgICAgdmFyIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBbXTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhICdzZW5kX3RvJyBwYXJhbSwgY2hlY2sgaWYgYW55IElEIHNwZWNpZmllZCBtYXRjaGVzXHJcbiAgICAgICAgICAgIC8vIGEgRklEIHdlIGhhdmUgYmVndW4gYSBmZXRjaCBvbi5cclxuICAgICAgICAgICAgaWYgKGd0YWdQYXJhbXMgJiYgZ3RhZ1BhcmFtc1snc2VuZF90byddKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2FTZW5kVG9MaXN0ID0gZ3RhZ1BhcmFtc1snc2VuZF90byddO1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBpdCBhbiBhcnJheSBpZiBpcyBpc24ndCwgc28gaXQgY2FuIGJlIGRlYWx0IHdpdGggdGhlIHNhbWUgd2F5LlxyXG4gICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGdhU2VuZFRvTGlzdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBnYVNlbmRUb0xpc3QgPSBbZ2FTZW5kVG9MaXN0XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZ2FTZW5kVG9MaXN0XzEgPSBnYVNlbmRUb0xpc3Q7IF9pIDwgZ2FTZW5kVG9MaXN0XzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbmRUb0lkID0gZ2FTZW5kVG9MaXN0XzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbml0aWFsaXphdGlvblByb21pc2UgPSBpbml0aWFsaXplZElkUHJvbWlzZXNNYXBbc2VuZFRvSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdyb3VwcyB3aWxsIG5vdCBiZSBpbiB0aGUgbWFwLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsaXphdGlvblByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvci5wdXNoKGluaXRpYWxpemF0aW9uUHJvbWlzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyBhbiBpdGVtIGluICdzZW5kX3RvJyB0aGF0IGlzIG5vdCBhc3NvY2lhdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpcmVjdGx5IHdpdGggYW4gRklELCBwb3NzaWJseSBhIGdyb3VwLiAgRW1wdHkgdGhpcyBhcnJheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgbGV0IGl0IGdldCBwb3B1bGF0ZWQgYmVsb3cuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSB1bnBvcHVsYXRlZCBpZiB0aGVyZSB3YXMgbm8gJ3NlbmRfdG8nIGZpZWxkICwgb3JcclxuICAgICAgICAgICAgLy8gaWYgbm90IGFsbCBlbnRyaWVzIGluIHRoZSAnc2VuZF90bycgZmllbGQgY291bGQgYmUgbWFwcGVkIHRvXHJcbiAgICAgICAgICAgIC8vIGEgRklELiBJbiB0aGVzZSBjYXNlcywgd2FpdCBvbiBhbGwgcGVuZGluZyBpbml0aWFsaXphdGlvbiBwcm9taXNlcy5cclxuICAgICAgICAgICAgaWYgKGluaXRpYWxpemF0aW9uUHJvbWlzZXNUb1dhaXRGb3IubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gT2JqZWN0LnZhbHVlcyhpbml0aWFsaXplZElkUHJvbWlzZXNNYXApOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZFByb21pc2UgPSBfYltfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvci5wdXNoKGlkUHJvbWlzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUnVuIGNvcmUgZ3RhZyBmdW5jdGlvbiB3aXRoIGFyZ3MgYWZ0ZXIgYWxsIHJlbGV2YW50IGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgICAgIC8vIHByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZC5cclxuICAgICAgICAgICAgUHJvbWlzZS5hbGwoaW5pdGlhbGl6YXRpb25Qcm9taXNlc1RvV2FpdEZvcilcclxuICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHA6Ly9iLzE0MTM3MDQ0OSAtIHRoaXJkIGFyZ3VtZW50IGNhbm5vdCBiZSB1bmRlZmluZWQuXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ3RhZ0NvcmUoR3RhZ0NvbW1hbmQuRVZFTlQsIGlkT3JOYW1lT3JQYXJhbXMsIGd0YWdQYXJhbXMgfHwge30pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7IHJldHVybiBjb25zb2xlLmVycm9yKGUpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY29tbWFuZCA9PT0gR3RhZ0NvbW1hbmQuQ09ORklHKSB7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsaXphdGlvblByb21pc2VUb1dhaXQgPSBpbml0aWFsaXplZElkUHJvbWlzZXNNYXBbaWRPck5hbWVPclBhcmFtc10gfHxcclxuICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvblByb21pc2VUb1dhaXRcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGd0YWdDb3JlKEd0YWdDb21tYW5kLkNPTkZJRywgaWRPck5hbWVPclBhcmFtcywgZ3RhZ1BhcmFtcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZSk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gU0VUIGNvbW1hbmQuXHJcbiAgICAgICAgICAgIC8vIFNwbGl0dGluZyBjYWxscyBmb3IgQ09ORklHIGFuZCBTRVQgdG8gbWFrZSBpdCBjbGVhciB3aGljaCBzaWduYXR1cmVcclxuICAgICAgICAgICAgLy8gVHlwZXNjcmlwdCBpcyBjaGVja2luZy5cclxuICAgICAgICAgICAgZ3RhZ0NvcmUoR3RhZ0NvbW1hbmQuU0VULCBpZE9yTmFtZU9yUGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGdsb2JhbCBndGFnIGZ1bmN0aW9uIG9yIHdyYXBzIGV4aXN0aW5nIG9uZSBpZiBmb3VuZC5cclxuICogVGhpcyB3cmFwcGVkIGZ1bmN0aW9uIGF0dGFjaGVzIEZpcmViYXNlIGluc3RhbmNlIElEIChGSUQpIHRvIGd0YWcgJ2NvbmZpZycgYW5kXHJcbiAqICdldmVudCcgY2FsbHMgdGhhdCBiZWxvbmcgdG8gdGhlIEdBSUQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgRmlyZWJhc2UgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBpbml0aWFsaXplZElkUHJvbWlzZXNNYXAgTWFwIG9mIGdhSWQgdG8gaW5pdGlhbGl6YXRpb24gcHJvbWlzZXMuXHJcbiAqIEBwYXJhbSBkYXRhTGF5ZXJOYW1lIE5hbWUgb2YgZ2xvYmFsIEdBIGRhdGFsYXllciBhcnJheS5cclxuICogQHBhcmFtIGd0YWdGdW5jdGlvbk5hbWUgTmFtZSBvZiBnbG9iYWwgZ3RhZyBmdW5jdGlvbiAoXCJndGFnXCIgaWYgbm90IHVzZXItc3BlY2lmaWVkKVxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcE9yQ3JlYXRlR3RhZyhpbml0aWFsaXplZElkUHJvbWlzZXNNYXAsIGRhdGFMYXllck5hbWUsIGd0YWdGdW5jdGlvbk5hbWUpIHtcclxuICAgIC8vIENyZWF0ZSBhIGJhc2ljIGNvcmUgZ3RhZyBmdW5jdGlvblxyXG4gICAgdmFyIGd0YWdDb3JlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIF9hcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE11c3QgcHVzaCBJQXJndW1lbnRzIG9iamVjdCwgbm90IGFuIGFycmF5LlxyXG4gICAgICAgIHdpbmRvd1tkYXRhTGF5ZXJOYW1lXS5wdXNoKGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG4gICAgLy8gUmVwbGFjZSBpdCB3aXRoIGV4aXN0aW5nIG9uZSBpZiBmb3VuZFxyXG4gICAgaWYgKHdpbmRvd1tndGFnRnVuY3Rpb25OYW1lXSAmJlxyXG4gICAgICAgIHR5cGVvZiB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgZ3RhZ0NvcmUgPSB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV07XHJcbiAgICB9XHJcbiAgICB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV0gPSB3cmFwR3RhZyhndGFnQ29yZSwgaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ3RhZ0NvcmU6IGd0YWdDb3JlLFxyXG4gICAgICAgIHdyYXBwZWRHdGFnOiB3aW5kb3dbZ3RhZ0Z1bmN0aW9uTmFtZV1cclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgZmlyc3Qgc2NyaXB0IHRhZyBpbiBET00gbWF0Y2hpbmcgb3VyIGd0YWcgdXJsIHBhdHRlcm4uXHJcbiAqL1xyXG5mdW5jdGlvbiBmaW5kR3RhZ1NjcmlwdE9uUGFnZSgpIHtcclxuICAgIHZhciBzY3JpcHRUYWdzID0gd2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcclxuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QudmFsdWVzKHNjcmlwdFRhZ3MpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciB0YWcgPSBfYVtfaV07XHJcbiAgICAgICAgaWYgKHRhZy5zcmMgJiYgdGFnLnNyYy5pbmNsdWRlcyhHVEFHX1VSTCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIF9hO1xyXG52YXIgRVJST1JTID0gKF9hID0ge30sXHJcbiAgICBfYVtcIm5vLWdhLWlkXCIgLyogTk9fR0FfSUQgKi9dID0gXCJcXFwiXCIgKyBBTkFMWVRJQ1NfSURfRklFTEQgKyBcIlxcXCIgZmllbGQgaXMgZW1wdHkgaW4gXCIgK1xyXG4gICAgICAgICdGaXJlYmFzZSBjb25maWcuIEZpcmViYXNlIEFuYWx5dGljcyAnICtcclxuICAgICAgICAncmVxdWlyZXMgdGhpcyBmaWVsZCB0byBjb250YWluIGEgdmFsaWQgbWVhc3VyZW1lbnQgSUQuJyxcclxuICAgIF9hW1wiYWxyZWFkeS1leGlzdHNcIiAvKiBBTFJFQURZX0VYSVNUUyAqL10gPSAnQSBGaXJlYmFzZSBBbmFseXRpY3MgaW5zdGFuY2Ugd2l0aCB0aGUgbWVhc3VyZW1lbnQgSUQgJHtpZH0gJyArXHJcbiAgICAgICAgJyBhbHJlYWR5IGV4aXN0cy4gJyArXHJcbiAgICAgICAgJ09ubHkgb25lIEZpcmViYXNlIEFuYWx5dGljcyBpbnN0YW5jZSBjYW4gYmUgY3JlYXRlZCBmb3IgZWFjaCBtZWFzdXJlbWVudCBJRC4nLFxyXG4gICAgX2FbXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqL10gPSAnRmlyZWJhc2UgQW5hbHl0aWNzIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWQuJyArXHJcbiAgICAgICAgJ3NldHRpbmdzKCkgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIGluaXRpYWxpemluZyBhbnkgQW5hbHl0aWNzIGluc3RhbmNlJyArXHJcbiAgICAgICAgJ29yIGl0IHdpbGwgaGF2ZSBubyBlZmZlY3QuJyxcclxuICAgIF9hW1wiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIElOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi9dID0gJ0ZpcmViYXNlIEFuYWx5dGljcyBJbnRlcm9wIENvbXBvbmVudCBmYWlsZWQgdG8gaW5zdGFudGlhdGUnLFxyXG4gICAgX2EpO1xyXG52YXIgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FuYWx5dGljcycsICdBbmFseXRpY3MnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIE1hcHMgZ2FJZCB0byBGSUQgZmV0Y2ggcHJvbWlzZXMuXHJcbiAqL1xyXG52YXIgaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwID0ge307XHJcbi8qKlxyXG4gKiBOYW1lIGZvciB3aW5kb3cgZ2xvYmFsIGRhdGEgbGF5ZXIgYXJyYXkgdXNlZCBieSBHQTogZGVmYXVsdHMgdG8gJ2RhdGFMYXllcicuXHJcbiAqL1xyXG52YXIgZGF0YUxheWVyTmFtZSA9ICdkYXRhTGF5ZXInO1xyXG4vKipcclxuICogTmFtZSBmb3Igd2luZG93IGdsb2JhbCBndGFnIGZ1bmN0aW9uIHVzZWQgYnkgR0E6IGRlZmF1bHRzIHRvICdndGFnJy5cclxuICovXHJcbnZhciBndGFnTmFtZSA9ICdndGFnJztcclxuLyoqXHJcbiAqIFJlcHJvZHVjdGlvbiBvZiBzdGFuZGFyZCBndGFnIGZ1bmN0aW9uIG9yIHJlZmVyZW5jZSB0byBleGlzdGluZ1xyXG4gKiBndGFnIGZ1bmN0aW9uIG9uIHdpbmRvdyBvYmplY3QuXHJcbiAqL1xyXG52YXIgZ3RhZ0NvcmVGdW5jdGlvbjtcclxuLyoqXHJcbiAqIFdyYXBwZXIgYXJvdW5kIGd0YWcgZnVuY3Rpb24gdGhhdCBlbnN1cmVzIEZJRCBpcyBzZW50IHdpdGggYWxsXHJcbiAqIHJlbGV2YW50IGV2ZW50IGFuZCBjb25maWcgY2FsbHMuXHJcbiAqL1xyXG52YXIgd3JhcHBlZEd0YWdGdW5jdGlvbjtcclxuLyoqXHJcbiAqIEZsYWcgdG8gZW5zdXJlIHBhZ2UgaW5pdGlhbGl6YXRpb24gc3RlcHMgKGNyZWF0aW9uIG9yIHdyYXBwaW5nIG9mXHJcbiAqIGRhdGFMYXllciBhbmQgZ3RhZyBzY3JpcHQpIGFyZSBvbmx5IHJ1biBvbmNlIHBlciBwYWdlIGxvYWQuXHJcbiAqL1xyXG52YXIgZ2xvYmFsSW5pdERvbmUgPSBmYWxzZTtcclxuLyoqXHJcbiAqIEZvciB0ZXN0aW5nXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNldEdsb2JhbFZhcnMobmV3R2xvYmFsSW5pdERvbmUsIG5ld0dhSW5pdGlhbGl6ZWRQcm9taXNlKSB7XHJcbiAgICBpZiAobmV3R2xvYmFsSW5pdERvbmUgPT09IHZvaWQgMCkgeyBuZXdHbG9iYWxJbml0RG9uZSA9IGZhbHNlOyB9XHJcbiAgICBpZiAobmV3R2FJbml0aWFsaXplZFByb21pc2UgPT09IHZvaWQgMCkgeyBuZXdHYUluaXRpYWxpemVkUHJvbWlzZSA9IHt9OyB9XHJcbiAgICBnbG9iYWxJbml0RG9uZSA9IG5ld0dsb2JhbEluaXREb25lO1xyXG4gICAgaW5pdGlhbGl6ZWRJZFByb21pc2VzTWFwID0gbmV3R2FJbml0aWFsaXplZFByb21pc2U7XHJcbiAgICBkYXRhTGF5ZXJOYW1lID0gJ2RhdGFMYXllcic7XHJcbiAgICBndGFnTmFtZSA9ICdndGFnJztcclxufVxyXG4vKipcclxuICogVGhpcyBtdXN0IGJlIHJ1biBiZWZvcmUgY2FsbGluZyBmaXJlYmFzZS5hbmFseXRpY3MoKSBvciBpdCB3b24ndFxyXG4gKiBoYXZlIGFueSBlZmZlY3QuXHJcbiAqIEBwYXJhbSBvcHRpb25zIEN1c3RvbSBndGFnIGFuZCBkYXRhTGF5ZXIgbmFtZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXR0aW5ncyhvcHRpb25zKSB7XHJcbiAgICBpZiAoZ2xvYmFsSW5pdERvbmUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmRhdGFMYXllck5hbWUpIHtcclxuICAgICAgICBkYXRhTGF5ZXJOYW1lID0gb3B0aW9ucy5kYXRhTGF5ZXJOYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMuZ3RhZ05hbWUpIHtcclxuICAgICAgICBndGFnTmFtZSA9IG9wdGlvbnMuZ3RhZ05hbWU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZmFjdG9yeShhcHAsIGluc3RhbGxhdGlvbnMpIHtcclxuICAgIHZhciBhbmFseXRpY3NJZCA9IGFwcC5vcHRpb25zW0FOQUxZVElDU19JRF9GSUVMRF07XHJcbiAgICBpZiAoIWFuYWx5dGljc0lkKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1nYS1pZFwiIC8qIE5PX0dBX0lEICovKTtcclxuICAgIH1cclxuICAgIGlmIChpbml0aWFsaXplZElkUHJvbWlzZXNNYXBbYW5hbHl0aWNzSWRdICE9IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFscmVhZHktZXhpc3RzXCIgLyogQUxSRUFEWV9FWElTVFMgKi8sIHtcclxuICAgICAgICAgICAgaWQ6IGFuYWx5dGljc0lkXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWdsb2JhbEluaXREb25lKSB7XHJcbiAgICAgICAgLy8gU3RlcHMgaGVyZSBzaG91bGQgb25seSBiZSBkb25lIG9uY2UgcGVyIHBhZ2U6IGNyZWF0aW9uIG9yIHdyYXBwaW5nXHJcbiAgICAgICAgLy8gb2YgZGF0YUxheWVyIGFuZCBnbG9iYWwgZ3RhZyBmdW5jdGlvbi5cclxuICAgICAgICAvLyBEZXRlY3QgaWYgdXNlciBoYXMgYWxyZWFkeSBwdXQgdGhlIGd0YWcgPHNjcmlwdD4gdGFnIG9uIHRoaXMgcGFnZS5cclxuICAgICAgICBpZiAoIWZpbmRHdGFnU2NyaXB0T25QYWdlKCkpIHtcclxuICAgICAgICAgICAgaW5zZXJ0U2NyaXB0VGFnKGRhdGFMYXllck5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZXRPckNyZWF0ZURhdGFMYXllcihkYXRhTGF5ZXJOYW1lKTtcclxuICAgICAgICB2YXIgX2EgPSB3cmFwT3JDcmVhdGVHdGFnKGluaXRpYWxpemVkSWRQcm9taXNlc01hcCwgZGF0YUxheWVyTmFtZSwgZ3RhZ05hbWUpLCB3cmFwcGVkR3RhZyA9IF9hLndyYXBwZWRHdGFnLCBndGFnQ29yZSA9IF9hLmd0YWdDb3JlO1xyXG4gICAgICAgIHdyYXBwZWRHdGFnRnVuY3Rpb24gPSB3cmFwcGVkR3RhZztcclxuICAgICAgICBndGFnQ29yZUZ1bmN0aW9uID0gZ3RhZ0NvcmU7XHJcbiAgICAgICAgZ2xvYmFsSW5pdERvbmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gQXN5bmMgYnV0IG5vbi1ibG9ja2luZy5cclxuICAgIGluaXRpYWxpemVkSWRQcm9taXNlc01hcFthbmFseXRpY3NJZF0gPSBpbml0aWFsaXplR0FJZChhcHAsIGluc3RhbGxhdGlvbnMsIGd0YWdDb3JlRnVuY3Rpb24pO1xyXG4gICAgdmFyIGFuYWx5dGljc0luc3RhbmNlID0ge1xyXG4gICAgICAgIGFwcDogYXBwLFxyXG4gICAgICAgIGxvZ0V2ZW50OiBmdW5jdGlvbiAoZXZlbnROYW1lLCBldmVudFBhcmFtcywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gbG9nRXZlbnQod3JhcHBlZEd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIGV2ZW50TmFtZSwgZXZlbnRQYXJhbXMsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0Q3VycmVudFNjcmVlbjogZnVuY3Rpb24gKHNjcmVlbk5hbWUsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldEN1cnJlbnRTY3JlZW4od3JhcHBlZEd0YWdGdW5jdGlvbiwgYW5hbHl0aWNzSWQsIHNjcmVlbk5hbWUsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0VXNlcklkOiBmdW5jdGlvbiAoaWQsIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldFVzZXJJZCh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgaWQsIG9wdGlvbnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0VXNlclByb3BlcnRpZXM6IGZ1bmN0aW9uIChwcm9wZXJ0aWVzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXRVc2VyUHJvcGVydGllcyh3cmFwcGVkR3RhZ0Z1bmN0aW9uLCBhbmFseXRpY3NJZCwgcHJvcGVydGllcywgb3B0aW9ucyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRBbmFseXRpY3NDb2xsZWN0aW9uRW5hYmxlZDogZnVuY3Rpb24gKGVuYWJsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldEFuYWx5dGljc0NvbGxlY3Rpb25FbmFibGVkKGFuYWx5dGljc0lkLCBlbmFibGVkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGFuYWx5dGljc0luc3RhbmNlO1xyXG59XG5cbnZhciBuYW1lID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzXCI7XG52YXIgdmVyc2lvbiA9IFwiMC4yLjlcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUeXBlIGNvbnN0YW50IGZvciBGaXJlYmFzZSBBbmFseXRpY3MuXHJcbiAqL1xyXG52YXIgQU5BTFlUSUNTX1RZUEUgPSAnYW5hbHl0aWNzJztcclxuZnVuY3Rpb24gcmVnaXN0ZXJBbmFseXRpY3MoaW5zdGFuY2UpIHtcclxuICAgIGluc3RhbmNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoQU5BTFlUSUNTX1RZUEUsIGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICAvLyBnZXRJbW1lZGlhdGUgZm9yIEZpcmViYXNlQXBwIHdpbGwgYWx3YXlzIHN1Y2NlZWRcclxuICAgICAgICB2YXIgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB2YXIgaW5zdGFsbGF0aW9ucyA9IGNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ2luc3RhbGxhdGlvbnMnKVxyXG4gICAgICAgICAgICAuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhY3RvcnkoYXBwLCBpbnN0YWxsYXRpb25zKTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKS5zZXRTZXJ2aWNlUHJvcHMoe1xyXG4gICAgICAgIHNldHRpbmdzOiBzZXR0aW5ncyxcclxuICAgICAgICBFdmVudE5hbWU6IEV2ZW50TmFtZVxyXG4gICAgfSkpO1xyXG4gICAgaW5zdGFuY2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnYW5hbHl0aWNzLWludGVybmFsJywgaW50ZXJuYWxGYWN0b3J5LCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKSk7XHJcbiAgICBpbnN0YW5jZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbiAgICBmdW5jdGlvbiBpbnRlcm5hbEZhY3RvcnkoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGFuYWx5dGljcyA9IGNvbnRhaW5lci5nZXRQcm92aWRlcihBTkFMWVRJQ1NfVFlQRSkuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBsb2dFdmVudDogYW5hbHl0aWNzLmxvZ0V2ZW50XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW50ZXJvcC1jb21wb25lbnQtcmVnLWZhaWxlZFwiIC8qIElOVEVST1BfQ09NUE9ORU5UX1JFR19GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgIHJlYXNvbjogZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxucmVnaXN0ZXJBbmFseXRpY3MoZmlyZWJhc2UpO1xuXG5leHBvcnQgeyBmYWN0b3J5LCByZWdpc3RlckFuYWx5dGljcywgcmVzZXRHbG9iYWxWYXJzLCBzZXR0aW5ncyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IGZpcmViYXNlIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0ICdAZmlyZWJhc2UvaW5zdGFsbGF0aW9ucyc7XG5pbXBvcnQgeyBfX3NwcmVhZCwgX19hd2FpdGVyLCBfX2dlbmVyYXRvciwgX19leHRlbmRzLCBfX2Fzc2lnbiB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgY3JlYXRlU3Vic2NyaWJlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgX2E7XHJcbnZhciBFUlJPUl9NQVAgPSAoX2EgPSB7fSxcclxuICAgIF9hW1wib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqL10gPSAnVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGluIGEgV2luZG93IGNvbnRleHQuJyxcclxuICAgIF9hW1wib25seS1hdmFpbGFibGUtaW4tc3dcIiAvKiBBVkFJTEFCTEVfSU5fU1cgKi9dID0gJ1RoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBpbiBhIHNlcnZpY2Ugd29ya2VyIGNvbnRleHQuJyxcclxuICAgIF9hW1wic2hvdWxkLWJlLW92ZXJyaWRlblwiIC8qIFNIT1VMRF9CRV9JTkhFUklURUQgKi9dID0gJ1RoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVycmlkZW4gYnkgZXh0ZW5kZWQgY2xhc3Nlcy4nLFxyXG4gICAgX2FbXCJiYWQtc2VuZGVyLWlkXCIgLyogQkFEX1NFTkRFUl9JRCAqL10gPSBcIlBsZWFzZSBlbnN1cmUgdGhhdCAnbWVzc2FnaW5nU2VuZGVySWQnIGlzIHNldCBcIiArXHJcbiAgICAgICAgJ2NvcnJlY3RseSBpbiB0aGUgb3B0aW9ucyBwYXNzZWQgaW50byBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCkuJyxcclxuICAgIF9hW1wicGVybWlzc2lvbi1kZWZhdWx0XCIgLyogUEVSTUlTU0lPTl9ERUZBVUxUICovXSA9ICdUaGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgd2VyZSBub3QgZ3JhbnRlZCBhbmQgZGlzbWlzc2VkIGluc3RlYWQuJyxcclxuICAgIF9hW1wicGVybWlzc2lvbi1ibG9ja2VkXCIgLyogUEVSTUlTU0lPTl9CTE9DS0VEICovXSA9ICdUaGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgd2VyZSBub3QgZ3JhbnRlZCBhbmQgYmxvY2tlZCBpbnN0ZWFkLicsXHJcbiAgICBfYVtcInVuc3VwcG9ydGVkLWJyb3dzZXJcIiAvKiBVTlNVUFBPUlRFRF9CUk9XU0VSICovXSA9IFwiVGhpcyBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgQVBJJ3MgXCIgK1xyXG4gICAgICAgICdyZXF1aXJlZCB0byB1c2UgdGhlIGZpcmViYXNlIFNESy4nLFxyXG4gICAgX2FbXCJub3RpZmljYXRpb25zLWJsb2NrZWRcIiAvKiBOT1RJRklDQVRJT05TX0JMT0NLRUQgKi9dID0gJ05vdGlmaWNhdGlvbnMgaGF2ZSBiZWVuIGJsb2NrZWQuJyxcclxuICAgIF9hW1wiZmFpbGVkLXNlcnZpY2V3b3JrZXItcmVnaXN0cmF0aW9uXCIgLyogRkFJTEVEX0RFRkFVTFRfUkVHSVNUUkFUSU9OICovXSA9ICdXZSBhcmUgdW5hYmxlIHRvIHJlZ2lzdGVyIHRoZSAnICtcclxuICAgICAgICAnZGVmYXVsdCBzZXJ2aWNlIHdvcmtlci4geyRicm93c2VyRXJyb3JNZXNzYWdlfScsXHJcbiAgICBfYVtcInN3LXJlZ2lzdHJhdGlvbi1leHBlY3RlZFwiIC8qIFNXX1JFR0lTVFJBVElPTl9FWFBFQ1RFRCAqL10gPSAnQSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gd2FzIHRoZSBleHBlY3RlZCBpbnB1dC4nLFxyXG4gICAgX2FbXCJnZXQtc3Vic2NyaXB0aW9uLWZhaWxlZFwiIC8qIEdFVF9TVUJTQ1JJUFRJT05fRkFJTEVEICovXSA9ICdUaGVyZSB3YXMgYW4gZXJyb3Igd2hlbiB0cnlpbmcgdG8gZ2V0ICcgK1xyXG4gICAgICAgICdhbnkgZXhpc3RpbmcgUHVzaCBTdWJzY3JpcHRpb25zLicsXHJcbiAgICBfYVtcImludmFsaWQtc2F2ZWQtdG9rZW5cIiAvKiBJTlZBTElEX1NBVkVEX1RPS0VOICovXSA9ICdVbmFibGUgdG8gYWNjZXNzIGRldGFpbHMgb2YgdGhlIHNhdmVkIHRva2VuLicsXHJcbiAgICBfYVtcInN3LXJlZy1yZWR1bmRhbnRcIiAvKiBTV19SRUdfUkVEVU5EQU5UICovXSA9ICdUaGUgc2VydmljZSB3b3JrZXIgYmVpbmcgdXNlZCBmb3IgcHVzaCB3YXMgbWFkZSByZWR1bmRhbnQuJyxcclxuICAgIF9hW1widG9rZW4tc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1NVQlNDUklCRV9GQUlMRUQgKi9dID0gJ0EgcHJvYmxlbSBvY2N1cmVkIHdoaWxlIHN1YnNjcmliaW5nIHRoZSB1c2VyIHRvIEZDTTogeyRlcnJvckluZm99JyxcclxuICAgIF9hW1widG9rZW4tc3Vic2NyaWJlLW5vLXRva2VuXCIgLyogVE9LRU5fU1VCU0NSSUJFX05PX1RPS0VOICovXSA9ICdGQ00gcmV0dXJuZWQgbm8gdG9rZW4gd2hlbiBzdWJzY3JpYmluZyB0aGUgdXNlciB0byBwdXNoLicsXHJcbiAgICBfYVtcInRva2VuLXVuc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1VOU1VCU0NSSUJFX0ZBSUxFRCAqL10gPSAnQSBwcm9ibGVtIG9jY3VyZWQgd2hpbGUgdW5zdWJzY3JpYmluZyB0aGUgJyArXHJcbiAgICAgICAgJ3VzZXIgZnJvbSBGQ006IHskZXJyb3JJbmZvfScsXHJcbiAgICBfYVtcInRva2VuLXVwZGF0ZS1mYWlsZWRcIiAvKiBUT0tFTl9VUERBVEVfRkFJTEVEICovXSA9ICdBIHByb2JsZW0gb2NjdXJlZCB3aGlsZSB1cGRhdGluZyB0aGUgdXNlciBmcm9tIEZDTTogeyRlcnJvckluZm99JyxcclxuICAgIF9hW1widG9rZW4tdXBkYXRlLW5vLXRva2VuXCIgLyogVE9LRU5fVVBEQVRFX05PX1RPS0VOICovXSA9ICdGQ00gcmV0dXJuZWQgbm8gdG9rZW4gd2hlbiB1cGRhdGluZyB0aGUgdXNlciB0byBwdXNoLicsXHJcbiAgICBfYVtcInVzZS1zdy1iZWZvcmUtZ2V0LXRva2VuXCIgLyogVVNFX1NXX0JFRk9SRV9HRVRfVE9LRU4gKi9dID0gJ1RoZSB1c2VTZXJ2aWNlV29ya2VyKCkgbWV0aG9kIG1heSBvbmx5IGJlIGNhbGxlZCBvbmNlIGFuZCBtdXN0IGJlICcgK1xyXG4gICAgICAgICdjYWxsZWQgYmVmb3JlIGNhbGxpbmcgZ2V0VG9rZW4oKSB0byBlbnN1cmUgeW91ciBzZXJ2aWNlIHdvcmtlciBpcyB1c2VkLicsXHJcbiAgICBfYVtcImludmFsaWQtZGVsZXRlLXRva2VuXCIgLyogSU5WQUxJRF9ERUxFVEVfVE9LRU4gKi9dID0gJ1lvdSBtdXN0IHBhc3MgYSB2YWxpZCB0b2tlbiBpbnRvICcgK1xyXG4gICAgICAgICdkZWxldGVUb2tlbigpLCBpLmUuIHRoZSB0b2tlbiBmcm9tIGdldFRva2VuKCkuJyxcclxuICAgIF9hW1wiZGVsZXRlLXRva2VuLW5vdC1mb3VuZFwiIC8qIERFTEVURV9UT0tFTl9OT1RfRk9VTkQgKi9dID0gJ1RoZSBkZWxldGlvbiBhdHRlbXB0IGZvciB0b2tlbiBjb3VsZCBub3QgJyArXHJcbiAgICAgICAgJ2JlIHBlcmZvcm1lZCBhcyB0aGUgdG9rZW4gd2FzIG5vdCBmb3VuZC4nLFxyXG4gICAgX2FbXCJkZWxldGUtc2NvcGUtbm90LWZvdW5kXCIgLyogREVMRVRFX1NDT1BFX05PVF9GT1VORCAqL10gPSAnVGhlIGRlbGV0aW9uIGF0dGVtcHQgZm9yIHNlcnZpY2Ugd29ya2VyICcgK1xyXG4gICAgICAgICdzY29wZSBjb3VsZCBub3QgYmUgcGVyZm9ybWVkIGFzIHRoZSBzY29wZSB3YXMgbm90IGZvdW5kLicsXHJcbiAgICBfYVtcImJnLWhhbmRsZXItZnVuY3Rpb24tZXhwZWN0ZWRcIiAvKiBCR19IQU5ETEVSX0ZVTkNUSU9OX0VYUEVDVEVEICovXSA9ICdUaGUgaW5wdXQgdG8gc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyKCkgbXVzdCBiZSBhIGZ1bmN0aW9uLicsXHJcbiAgICBfYVtcIm5vLXdpbmRvdy1jbGllbnQtdG8tbXNnXCIgLyogTk9fV0lORE9XX0NMSUVOVF9UT19NU0cgKi9dID0gJ0FuIGF0dGVtcHQgd2FzIG1hZGUgdG8gbWVzc2FnZSBhIG5vbi1leGlzdGFudCB3aW5kb3cgY2xpZW50LicsXHJcbiAgICBfYVtcInVuYWJsZS10by1yZXN1YnNjcmliZVwiIC8qIFVOQUJMRV9UT19SRVNVQlNDUklCRSAqL10gPSAnVGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHJlLXN1YnNjcmliaW5nICcgK1xyXG4gICAgICAgICd0aGUgRkNNIHRva2VuIGZvciBwdXNoIG1lc3NhZ2luZy4gV2lsbCBoYXZlIHRvIHJlc3Vic2NyaWJlIHRoZSAnICtcclxuICAgICAgICAndXNlciBvbiBuZXh0IHZpc2l0LiB7JGVycm9ySW5mb30nLFxyXG4gICAgX2FbXCJuby1mY20tdG9rZW4tZm9yLXJlc3Vic2NyaWJlXCIgLyogTk9fRkNNX1RPS0VOX0ZPUl9SRVNVQlNDUklCRSAqL10gPSAnQ291bGQgbm90IGZpbmQgYW4gRkNNIHRva2VuICcgK1xyXG4gICAgICAgICdhbmQgYXMgYSByZXN1bHQsIHVuYWJsZSB0byByZXN1YnNjcmliZS4gV2lsbCBoYXZlIHRvIHJlc3Vic2NyaWJlIHRoZSAnICtcclxuICAgICAgICAndXNlciBvbiBuZXh0IHZpc2l0LicsXHJcbiAgICBfYVtcImZhaWxlZC10by1kZWxldGUtdG9rZW5cIiAvKiBGQUlMRURfVE9fREVMRVRFX1RPS0VOICovXSA9ICdVbmFibGUgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHkgc2F2ZWQgdG9rZW4uJyxcclxuICAgIF9hW1wibm8tc3ctaW4tcmVnXCIgLyogTk9fU1dfSU5fUkVHICovXSA9ICdFdmVuIHRob3VnaCB0aGUgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHdhcyAnICtcclxuICAgICAgICAnc3VjY2Vzc2Z1bCwgdGhlcmUgd2FzIGEgcHJvYmxlbSBhY2Nlc3NpbmcgdGhlIHNlcnZpY2Ugd29ya2VyIGl0c2VsZi4nLFxyXG4gICAgX2FbXCJiYWQtc2NvcGVcIiAvKiBCQURfU0NPUEUgKi9dID0gJ1RoZSBzZXJ2aWNlIHdvcmtlciBzY29wZSBtdXN0IGJlIGEgc3RyaW5nIHdpdGggYXQgJyArXHJcbiAgICAgICAgJ2xlYXN0IG9uZSBjaGFyYWN0ZXIuJyxcclxuICAgIF9hW1wiYmFkLXZhcGlkLWtleVwiIC8qIEJBRF9WQVBJRF9LRVkgKi9dID0gJ1RoZSBwdWJsaWMgVkFQSUQga2V5IGlzIG5vdCBhIFVpbnQ4QXJyYXkgd2l0aCA2NSBieXRlcy4nLFxyXG4gICAgX2FbXCJiYWQtc3Vic2NyaXB0aW9uXCIgLyogQkFEX1NVQlNDUklQVElPTiAqL10gPSAnVGhlIHN1YnNjcmlwdGlvbiBtdXN0IGJlIGEgdmFsaWQgUHVzaFN1YnNjcmlwdGlvbi4nLFxyXG4gICAgX2FbXCJiYWQtdG9rZW5cIiAvKiBCQURfVE9LRU4gKi9dID0gJ1RoZSBGQ00gVG9rZW4gdXNlZCBmb3Igc3RvcmFnZSAvIGxvb2t1cCB3YXMgbm90ICcgK1xyXG4gICAgICAgICdhIHZhbGlkIHRva2VuIHN0cmluZy4nLFxyXG4gICAgX2FbXCJmYWlsZWQtZGVsZXRlLXZhcGlkLWtleVwiIC8qIEZBSUxFRF9ERUxFVEVfVkFQSURfS0VZICovXSA9ICdUaGUgVkFQSUQga2V5IGNvdWxkIG5vdCBiZSBkZWxldGVkLicsXHJcbiAgICBfYVtcImludmFsaWQtcHVibGljLXZhcGlkLWtleVwiIC8qIElOVkFMSURfUFVCTElDX1ZBUElEX0tFWSAqL10gPSAnVGhlIHB1YmxpYyBWQVBJRCBrZXkgbXVzdCBiZSBhIHN0cmluZy4nLFxyXG4gICAgX2FbXCJ1c2UtcHVibGljLWtleS1iZWZvcmUtZ2V0LXRva2VuXCIgLyogVVNFX1BVQkxJQ19LRVlfQkVGT1JFX0dFVF9UT0tFTiAqL10gPSAnVGhlIHVzZVB1YmxpY1ZhcGlkS2V5KCkgbWV0aG9kIG1heSBvbmx5IGJlIGNhbGxlZCBvbmNlIGFuZCBtdXN0IGJlICcgK1xyXG4gICAgICAgICdjYWxsZWQgYmVmb3JlIGNhbGxpbmcgZ2V0VG9rZW4oKSB0byBlbnN1cmUgeW91ciBWQVBJRCBrZXkgaXMgdXNlZC4nLFxyXG4gICAgX2FbXCJwdWJsaWMtdmFwaWQta2V5LWRlY3J5cHRpb24tZmFpbGVkXCIgLyogUFVCTElDX0tFWV9ERUNSWVBUSU9OX0ZBSUxFRCAqL10gPSAnVGhlIHB1YmxpYyBWQVBJRCBrZXkgZGlkIG5vdCBlcXVhbCA2NSBieXRlcyB3aGVuIGRlY3J5cHRlZC4nLFxyXG4gICAgX2EpO1xyXG52YXIgZXJyb3JGYWN0b3J5ID0gbmV3IEVycm9yRmFjdG9yeSgnbWVzc2FnaW5nJywgJ01lc3NhZ2luZycsIEVSUk9SX01BUCk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9QVUJMSUNfVkFQSURfS0VZID0gbmV3IFVpbnQ4QXJyYXkoW1xyXG4gICAgMHgwNCxcclxuICAgIDB4MzMsXHJcbiAgICAweDk0LFxyXG4gICAgMHhmNyxcclxuICAgIDB4ZGYsXHJcbiAgICAweGExLFxyXG4gICAgMHhlYixcclxuICAgIDB4YjEsXHJcbiAgICAweGRjLFxyXG4gICAgMHgwMyxcclxuICAgIDB4YTIsXHJcbiAgICAweDVlLFxyXG4gICAgMHgxNSxcclxuICAgIDB4NzEsXHJcbiAgICAweGRiLFxyXG4gICAgMHg0OCxcclxuICAgIDB4ZDMsXHJcbiAgICAweDJlLFxyXG4gICAgMHhlZCxcclxuICAgIDB4ZWQsXHJcbiAgICAweGIyLFxyXG4gICAgMHgzNCxcclxuICAgIDB4ZGIsXHJcbiAgICAweGI3LFxyXG4gICAgMHg0NyxcclxuICAgIDB4M2EsXHJcbiAgICAweDBjLFxyXG4gICAgMHg4ZixcclxuICAgIDB4YzQsXHJcbiAgICAweGNjLFxyXG4gICAgMHhlMSxcclxuICAgIDB4NmYsXHJcbiAgICAweDNjLFxyXG4gICAgMHg4YyxcclxuICAgIDB4ODQsXHJcbiAgICAweGRmLFxyXG4gICAgMHhhYixcclxuICAgIDB4YjYsXHJcbiAgICAweDY2LFxyXG4gICAgMHgzZSxcclxuICAgIDB4ZjIsXHJcbiAgICAweDBjLFxyXG4gICAgMHhkNCxcclxuICAgIDB4OGIsXHJcbiAgICAweGZlLFxyXG4gICAgMHhlMyxcclxuICAgIDB4ZjksXHJcbiAgICAweDc2LFxyXG4gICAgMHgyZixcclxuICAgIDB4MTQsXHJcbiAgICAweDFjLFxyXG4gICAgMHg2MyxcclxuICAgIDB4MDgsXHJcbiAgICAweDZhLFxyXG4gICAgMHg2ZixcclxuICAgIDB4MmQsXHJcbiAgICAweGIxLFxyXG4gICAgMHgxYSxcclxuICAgIDB4OTUsXHJcbiAgICAweGIwLFxyXG4gICAgMHhjZSxcclxuICAgIDB4MzcsXHJcbiAgICAweGMwLFxyXG4gICAgMHg5YyxcclxuICAgIDB4NmVcclxuXSk7XHJcbnZhciBFTkRQT0lOVCA9ICdodHRwczovL2ZjbXJlZ2lzdHJhdGlvbnMuZ29vZ2xlYXBpcy5jb20vdjEnO1xyXG52YXIgRk5fQ0FNUEFJR05fSUQgPSAnZ29vZ2xlLmMuYS5jX2lkJztcclxudmFyIEZOX0NBTVBBSUdOX05BTUUgPSAnZ29vZ2xlLmMuYS5jX2wnO1xyXG52YXIgRk5fQ0FNUEFJR05fVElNRSA9ICdnb29nbGUuYy5hLnRzJztcclxuLyoqIFNldCB0byAnMScgaWYgQW5hbHl0aWNzIGlzIGVuYWJsZWQgZm9yIHRoZSBjYW1wYWlnbiAqL1xyXG52YXIgRk5fQ0FNUEFJR05fQU5BTFlUSUNTX0VOQUJMRUQgPSAnZ29vZ2xlLmMuYS5lJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBNZXNzYWdlVHlwZTtcclxuKGZ1bmN0aW9uIChNZXNzYWdlVHlwZSkge1xyXG4gICAgTWVzc2FnZVR5cGVbXCJQVVNIX01TR19SRUNFSVZFRFwiXSA9IFwicHVzaC1tc2ctcmVjZWl2ZWRcIjtcclxuICAgIE1lc3NhZ2VUeXBlW1wiTk9USUZJQ0FUSU9OX0NMSUNLRURcIl0gPSBcIm5vdGlmaWNhdGlvbi1jbGlja2VkXCI7XHJcbn0pKE1lc3NhZ2VUeXBlIHx8IChNZXNzYWdlVHlwZSA9IHt9KSk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKGEuYnl0ZUxlbmd0aCAhPT0gYi5ieXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFyIHZpZXdBID0gbmV3IERhdGFWaWV3KGEpO1xyXG4gICAgdmFyIHZpZXdCID0gbmV3IERhdGFWaWV3KGIpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmJ5dGVMZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICh2aWV3QS5nZXRVaW50OChpKSAhPT0gdmlld0IuZ2V0VWludDgoaSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiB0b0Jhc2U2NChhcnJheUJ1ZmZlcikge1xyXG4gICAgdmFyIHVpbnQ4VmVyc2lvbiA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcclxuICAgIHJldHVybiBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBfX3NwcmVhZCh1aW50OFZlcnNpb24pKSk7XHJcbn1cclxuZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChhcnJheUJ1ZmZlcikge1xyXG4gICAgdmFyIGJhc2U2NFN0cmluZyA9IHRvQmFzZTY0KGFycmF5QnVmZmVyKTtcclxuICAgIHJldHVybiBiYXNlNjRTdHJpbmdcclxuICAgICAgICAucmVwbGFjZSgvPS9nLCAnJylcclxuICAgICAgICAucmVwbGFjZSgvXFwrL2csICctJylcclxuICAgICAgICAucmVwbGFjZSgvXFwvL2csICdfJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBTdWJzY3JpcHRpb25NYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uTWFuYWdlcigpIHtcclxuICAgIH1cclxuICAgIFN1YnNjcmlwdGlvbk1hbmFnZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24gKHNlcnZpY2VzLCBzdWJzY3JpcHRpb24sIHZhcGlkS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaGVhZGVycywgYm9keSwgc3Vic2NyaWJlT3B0aW9ucywgcmVzcG9uc2VEYXRhLCByZXNwb25zZSwgZXJyXzEsIG1lc3NhZ2U7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEhlYWRlcnMoc2VydmljZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkgPSBnZXRCb2R5KHN1YnNjcmlwdGlvbiwgdmFwaWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsyLCA1LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2goZ2V0RW5kcG9pbnQoc2VydmljZXMuYXBwKSwgc3Vic2NyaWJlT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3BvbnNlLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZURhdGEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi1zdWJzY3JpYmUtZmFpbGVkXCIgLyogVE9LRU5fU1VCU0NSSUJFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBlcnJfMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSByZXNwb25zZURhdGEuZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi1zdWJzY3JpYmUtZmFpbGVkXCIgLyogVE9LRU5fU1VCU0NSSUJFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZURhdGEudG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJ0b2tlbi1zdWJzY3JpYmUtbm8tdG9rZW5cIiAvKiBUT0tFTl9TVUJTQ1JJQkVfTk9fVE9LRU4gKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25zZURhdGEudG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgdW5kZXJseWluZyB0b2tlbiBkZXRhaWxzIGZvciBmY21Ub2tlbi5cclxuICAgICAqL1xyXG4gICAgU3Vic2NyaXB0aW9uTWFuYWdlci5wcm90b3R5cGUudXBkYXRlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW5EZXRhaWxzLCBzZXJ2aWNlcywgc3Vic2NyaXB0aW9uLCB2YXBpZEtleSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMsIGJvZHksIHVwZGF0ZU9wdGlvbnMsIHJlc3BvbnNlRGF0YSwgcmVzcG9uc2UsIGVycl8yLCBtZXNzYWdlO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRIZWFkZXJzKHNlcnZpY2VzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0gZ2V0Qm9keShzdWJzY3JpcHRpb24sIHZhcGlkS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzIsIDUsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaChnZXRFbmRwb2ludChzZXJ2aWNlcy5hcHApICsgXCIvXCIgKyB0b2tlbkRldGFpbHMuZmNtVG9rZW4sIHVwZGF0ZU9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXNwb25zZS5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8yID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tdXBkYXRlLWZhaWxlZFwiIC8qIFRPS0VOX1VQREFURV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogZXJyXzJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gcmVzcG9uc2VEYXRhLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tdXBkYXRlLWZhaWxlZFwiIC8qIFRPS0VOX1VQREFURV9GQUlMRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2VEYXRhLnRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidG9rZW4tdXBkYXRlLW5vLXRva2VuXCIgLyogVE9LRU5fVVBEQVRFX05PX1RPS0VOICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2VEYXRhLnRva2VuXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3Vic2NyaXB0aW9uTWFuYWdlci5wcm90b3R5cGUuZGVsZXRlVG9rZW4gPSBmdW5jdGlvbiAoc2VydmljZXMsIHRva2VuRGV0YWlscykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMsIHVuc3Vic2NyaWJlT3B0aW9ucywgcmVzcG9uc2UsIHJlc3BvbnNlRGF0YSwgbWVzc2FnZSwgZXJyXzM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldEhlYWRlcnMoc2VydmljZXMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNSwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKGdldEVuZHBvaW50KHNlcnZpY2VzLmFwcCkgKyBcIi9cIiArIHRva2VuRGV0YWlscy5mY21Ub2tlbiwgdW5zdWJzY3JpYmVPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzcG9uc2UuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlRGF0YS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlRGF0YS5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXVuc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1VOU1VCU0NSSUJFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ySW5mbzogbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInRva2VuLXVuc3Vic2NyaWJlLWZhaWxlZFwiIC8qIFRPS0VOX1VOU1VCU0NSSUJFX0ZBSUxFRCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JJbmZvOiBlcnJfM1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbk1hbmFnZXI7XHJcbn0oKSk7XHJcbmZ1bmN0aW9uIGdldEVuZHBvaW50KGFwcCkge1xyXG4gICAgcmV0dXJuIEVORFBPSU5UICsgXCIvcHJvamVjdHMvXCIgKyBhcHAub3B0aW9ucy5wcm9qZWN0SWQgKyBcIi9yZWdpc3RyYXRpb25zXCI7XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGVhZGVycyhfYSkge1xyXG4gICAgdmFyIGFwcCA9IF9hLmFwcCwgaW5zdGFsbGF0aW9ucyA9IF9hLmluc3RhbGxhdGlvbnM7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGF1dGhUb2tlbjtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgaW5zdGFsbGF0aW9ucy5nZXRUb2tlbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBhdXRoVG9rZW4gPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwcC5vcHRpb25zLmFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd4LWdvb2ctZmlyZWJhc2UtaW5zdGFsbGF0aW9ucy1hdXRoJzogXCJGSVMgXCIgKyBhdXRoVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRCb2R5KHN1YnNjcmlwdGlvbiwgdmFwaWRLZXkpIHtcclxuICAgIHZhciBwMjU2ZGggPSBhcnJheUJ1ZmZlclRvQmFzZTY0KHN1YnNjcmlwdGlvbi5nZXRLZXkoJ3AyNTZkaCcpKTtcclxuICAgIHZhciBhdXRoID0gYXJyYXlCdWZmZXJUb0Jhc2U2NChzdWJzY3JpcHRpb24uZ2V0S2V5KCdhdXRoJykpO1xyXG4gICAgdmFyIGJvZHkgPSB7XHJcbiAgICAgICAgd2ViOiB7XHJcbiAgICAgICAgICAgIGVuZHBvaW50OiBzdWJzY3JpcHRpb24uZW5kcG9pbnQsXHJcbiAgICAgICAgICAgIHAyNTZkaDogcDI1NmRoLFxyXG4gICAgICAgICAgICBhdXRoOiBhdXRoXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmICghaXNBcnJheUJ1ZmZlckVxdWFsKHZhcGlkS2V5LmJ1ZmZlciwgREVGQVVMVF9QVUJMSUNfVkFQSURfS0VZLmJ1ZmZlcikpIHtcclxuICAgICAgICBib2R5LndlYi5hcHBsaWNhdGlvblB1YktleSA9IGFycmF5QnVmZmVyVG9CYXNlNjQodmFwaWRLZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJvZHk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0U3RyaW5nKSB7XHJcbiAgICB2YXIgcGFkZGluZyA9ICc9Jy5yZXBlYXQoKDQgLSAoYmFzZTY0U3RyaW5nLmxlbmd0aCAlIDQpKSAlIDQpO1xyXG4gICAgdmFyIGJhc2U2NCA9IChiYXNlNjRTdHJpbmcgKyBwYWRkaW5nKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXC0vZywgJysnKVxyXG4gICAgICAgIC5yZXBsYWNlKC9fL2csICcvJyk7XHJcbiAgICB2YXIgcmF3RGF0YSA9IGF0b2IoYmFzZTY0KTtcclxuICAgIHZhciBvdXRwdXRBcnJheSA9IG5ldyBVaW50OEFycmF5KHJhd0RhdGEubGVuZ3RoKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmF3RGF0YS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIG91dHB1dEFycmF5W2ldID0gcmF3RGF0YS5jaGFyQ29kZUF0KGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dHB1dEFycmF5O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgT0xEX0RCX05BTUUgPSAndW5kZWZpbmVkJztcclxudmFyIE9MRF9PQkpFQ1RfU1RPUkVfTkFNRSA9ICdmY21fdG9rZW5fb2JqZWN0X1N0b3JlJztcclxuZnVuY3Rpb24gaGFuZGxlRGIoZGIsIHNlcnZpY2VzKSB7XHJcbiAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoT0xEX09CSkVDVF9TVE9SRV9OQU1FKSkge1xyXG4gICAgICAgIC8vIFdlIGZvdW5kIGEgZGF0YWJhc2Ugd2l0aCB0aGUgbmFtZSAndW5kZWZpbmVkJywgYnV0IG91ciBleHBlY3RlZCBvYmplY3RcclxuICAgICAgICAvLyBzdG9yZSBpc24ndCBkZWZpbmVkLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKE9MRF9PQkpFQ1RfU1RPUkVfTkFNRSk7XHJcbiAgICB2YXIgb2JqZWN0U3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShPTERfT0JKRUNUX1NUT1JFX05BTUUpO1xyXG4gICAgdmFyIHN1YnNjcmlwdGlvbk1hbmFnZXIgPSBuZXcgU3Vic2NyaXB0aW9uTWFuYWdlcigpO1xyXG4gICAgdmFyIG9wZW5DdXJzb3JSZXF1ZXN0ID0gb2JqZWN0U3RvcmUub3BlbkN1cnNvcigpO1xyXG4gICAgb3BlbkN1cnNvclJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIE5PT1AgLSBOb3RoaW5nIHdlIGNhbiBkby5cclxuICAgICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBjbGVhbnVwIG9sZCBJREIuJywgZXZlbnQpO1xyXG4gICAgfTtcclxuICAgIG9wZW5DdXJzb3JSZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3Vyc29yID0gb3BlbkN1cnNvclJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgIGlmIChjdXJzb3IpIHtcclxuICAgICAgICAgICAgLy8gY3Vyc29yLnZhbHVlIGNvbnRhaW5zIHRoZSBjdXJyZW50IHJlY29yZCBiZWluZyBpdGVyYXRlZCB0aHJvdWdoXHJcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgd2hlcmUgeW91J2QgZG8gc29tZXRoaW5nIHdpdGggdGhlIHJlc3VsdFxyXG4gICAgICAgICAgICB2YXIgdG9rZW5EZXRhaWxzID0gY3Vyc29yLnZhbHVlO1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbk1hbmFnZXIuZGVsZXRlVG9rZW4oc2VydmljZXMsIHRva2VuRGV0YWlscyk7XHJcbiAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKE9MRF9EQl9OQU1FKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGNsZWFuVjEoc2VydmljZXMpIHtcclxuICAgIHZhciByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oT0xEX0RCX05BTUUpO1xyXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKF9ldmVudCkge1xyXG4gICAgICAgIC8vIE5PT1AgLSBOb3RoaW5nIHdlIGNhbiBkby5cclxuICAgIH07XHJcbiAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uIChfZXZlbnQpIHtcclxuICAgICAgICB2YXIgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICBoYW5kbGVEYihkYiwgc2VydmljZXMpO1xyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIERiSW50ZXJmYWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGJJbnRlcmZhY2UoKSB7XHJcbiAgICAgICAgdGhpcy5kYlByb21pc2UgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqIEdldHMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGtleS4gKi9cclxuICAgIERiSW50ZXJmYWNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVHJhbnNhY3Rpb24oZnVuY3Rpb24gKG9iamVjdFN0b3JlKSB7IHJldHVybiBvYmplY3RTdG9yZS5nZXQoa2V5KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqIEdldHMgcmVjb3JkKHMpIGZyb20gdGhlIG9iamVjdFN0b3JlIHRoYXQgbWF0Y2ggdGhlIGdpdmVuIGluZGV4LiAqL1xyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBrZXkpIHtcclxuICAgICAgICBmdW5jdGlvbiBydW5SZXF1ZXN0KG9iamVjdFN0b3JlKSB7XHJcbiAgICAgICAgICAgIHZhciBpZGJJbmRleCA9IG9iamVjdFN0b3JlLmluZGV4KGluZGV4KTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkYkluZGV4LmdldChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUcmFuc2FjdGlvbihydW5SZXF1ZXN0KTtcclxuICAgIH07XHJcbiAgICAvKiogQXNzaWducyBvciBvdmVyd3JpdGVzIHRoZSByZWNvcmQgZm9yIHRoZSBnaXZlbiB2YWx1ZS4gKi9cclxuICAgIC8vIEluZGV4ZWREQiB2YWx1ZXMgYXJlIG9mIHR5cGUgXCJhbnlcIlxyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRyYW5zYWN0aW9uKGZ1bmN0aW9uIChvYmplY3RTdG9yZSkgeyByZXR1cm4gb2JqZWN0U3RvcmUucHV0KHZhbHVlKTsgfSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgfTtcclxuICAgIC8qKiBEZWxldGVzIHJlY29yZChzKSBmcm9tIHRoZSBvYmplY3RTdG9yZSB0aGF0IG1hdGNoIHRoZSBnaXZlbiBrZXkuICovXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRyYW5zYWN0aW9uKGZ1bmN0aW9uIChvYmplY3RTdG9yZSkgeyByZXR1cm4gb2JqZWN0U3RvcmUuZGVsZXRlKGtleSk7IH0sICdyZWFkd3JpdGUnKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENsb3NlIHRoZSBjdXJyZW50bHkgb3BlbiBkYXRhYmFzZS5cclxuICAgICAqL1xyXG4gICAgRGJJbnRlcmZhY2UucHJvdG90eXBlLmNsb3NlRGF0YWJhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGI7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5kYlByb21pc2UpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRiUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYlByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBJbmRleGVkREIgVHJhbnNhY3Rpb24gYW5kIHBhc3NlcyBpdHMgb2JqZWN0U3RvcmUgdG8gdGhlXHJcbiAgICAgKiBydW5SZXF1ZXN0IGZ1bmN0aW9uLCB3aGljaCBydW5zIHRoZSBkYXRhYmFzZSByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgcnVuUmVxdWVzdCBmdW5jdGlvblxyXG4gICAgICovXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUuY3JlYXRlVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAocnVuUmVxdWVzdCwgbW9kZSkge1xyXG4gICAgICAgIGlmIChtb2RlID09PSB2b2lkIDApIHsgbW9kZSA9ICdyZWFkb25seSc7IH1cclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYiwgdHJhbnNhY3Rpb24sIHJlcXVlc3QsIHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXREYigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKHRoaXMub2JqZWN0U3RvcmVOYW1lLCBtb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMub2JqZWN0U3RvcmVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcHJvbWlzaWZ5KHJ1blJlcXVlc3QocmVxdWVzdCkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QodHJhbnNhY3Rpb24uZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKiBHZXRzIHRoZSBjYWNoZWQgZGIgY29ubmVjdGlvbiBvciBvcGVucyBhIG5ldyBvbmUuICovXHJcbiAgICBEYkludGVyZmFjZS5wcm90b3R5cGUuZ2V0RGIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoaXMuZGJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGJQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihfdGhpcy5kYk5hbWUsIF90aGlzLmRiVmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLm9uRGJVcGdyYWRlKHJlcXVlc3QsIGV2ZW50KTsgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRiUHJvbWlzZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGJJbnRlcmZhY2U7XHJcbn0oKSk7XHJcbi8qKiBQcm9taXNpZmllcyBhbiBJREJSZXF1ZXN0LiBSZXNvbHZlcyB3aXRoIHRoZSBJREJSZXF1ZXN0J3MgcmVzdWx0LiAqL1xyXG5mdW5jdGlvbiBwcm9taXNpZnkocmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBUb2tlbkRldGFpbHNNb2RlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUb2tlbkRldGFpbHNNb2RlbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRva2VuRGV0YWlsc01vZGVsKHNlcnZpY2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xyXG4gICAgICAgIF90aGlzLmRiTmFtZSA9ICdmY21fdG9rZW5fZGV0YWlsc19kYic7XHJcbiAgICAgICAgX3RoaXMuZGJWZXJzaW9uID0gNDtcclxuICAgICAgICBfdGhpcy5vYmplY3RTdG9yZU5hbWUgPSAnZmNtX3Rva2VuX29iamVjdF9TdG9yZSc7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVG9rZW5EZXRhaWxzTW9kZWwucHJvdG90eXBlLm9uRGJVcGdyYWRlID0gZnVuY3Rpb24gKHJlcXVlc3QsIGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgLy8gTGFjayBvZiAnYnJlYWsnIHN0YXRlbWVudHMgaXMgaW50ZW50aW9uYWwuXHJcbiAgICAgICAgc3dpdGNoIChldmVudC5vbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDoge1xyXG4gICAgICAgICAgICAgICAgLy8gTmV3IElEQiBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlID0gZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5vYmplY3RTdG9yZU5hbWUsIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiAnc3dTY29wZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzZW5kZXIgSUQgY2FuIGJlIHNlYXJjaGVkXHJcbiAgICAgICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZmNtU2VuZGVySWQnLCAnZmNtU2VuZGVySWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RTdG9yZS5jcmVhdGVJbmRleCgnZmNtVG9rZW4nLCAnZmNtVG9rZW4nLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIDE6IHtcclxuICAgICAgICAgICAgICAgIC8vIFByaW9yIHRvIHZlcnNpb24gMiwgd2Ugd2VyZSB1c2luZyBlaXRoZXIgJ2ZjbV90b2tlbl9kZXRhaWxzX2RiJ1xyXG4gICAgICAgICAgICAgICAgLy8gb3IgJ3VuZGVmaW5lZCcgYXMgdGhlIGRhdGFiYXNlIG5hbWUgZHVlIHRvIGJ1ZyBpbiB0aGUgU0RLXHJcbiAgICAgICAgICAgICAgICAvLyBTbyByZW1vdmUgdGhlIG9sZCB0b2tlbnMgYW5kIGRhdGFiYXNlcy5cclxuICAgICAgICAgICAgICAgIGNsZWFuVjEodGhpcy5zZXJ2aWNlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAyOiB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZnJvbSB2MiB0byB2NCBkaXJlY3RseSBpbiBhIHNpbmdsZSBvcGVuQ3Vyc29yIHJlcXVlc3QuXHJcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRvIHRoaXMgYmVjYXVzZSBmb3Igc29tZSByZWFzb24sIGRvaW5nIGEgc3Vic2VxdWVudCB1cGRhdGUgb24gdGhlIHNhbWUgZGF0YVxyXG4gICAgICAgICAgICAgICAgLy8gaW4gdGhlIHNhbWUgdHJhbnNhY3Rpb24gZHJvcHMgdGhlIGZpcnN0IHVwZGF0ZS5cclxuICAgICAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZSA9IHJlcXVlc3QudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodGhpcy5vYmplY3RTdG9yZU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvclJlcXVlc3RfMSA9IG9iamVjdFN0b3JlLm9wZW5DdXJzb3IoKTtcclxuICAgICAgICAgICAgICAgIGN1cnNvclJlcXVlc3RfMS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IGN1cnNvclJlcXVlc3RfMS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnNvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjdXJzb3IudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IF9fYXNzaWduKHt9LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmFsdWUuY3JlYXRlVGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUuY3JlYXRlVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS52YXBpZEtleSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLnZhcGlkS2V5ID0gYmFzZTY0VG9BcnJheUJ1ZmZlcih2YWx1ZS52YXBpZEtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5hdXRoID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUuYXV0aCA9IGJhc2U2NFRvQXJyYXlCdWZmZXIodmFsdWUuYXV0aCkuYnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUuYXV0aCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLnAyNTZkaCA9IGJhc2U2NFRvQXJyYXlCdWZmZXIodmFsdWUucDI1NmRoKS5idWZmZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZS5mY21QdXNoU2V0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG5ld1ZhbHVlLmZjbVB1c2hTZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLnVwZGF0ZShuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvci5jb250aW51ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAvLyBCcmVhayBoZXJlIGFzIHdlJ3ZlIGFscmVhZHkgdXBkYXRlZCB0byB2NC5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgMzoge1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGZyb20gVjMgdG8gVjQuXHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmUgPSByZXF1ZXN0LnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHRoaXMub2JqZWN0U3RvcmVOYW1lKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJzb3JSZXF1ZXN0XzIgPSBvYmplY3RTdG9yZS5vcGVuQ3Vyc29yKCk7XHJcbiAgICAgICAgICAgICAgICBjdXJzb3JSZXF1ZXN0XzIub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSBjdXJzb3JSZXF1ZXN0XzIucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY3Vyc29yLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBfX2Fzc2lnbih7fSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlLmZjbVB1c2hTZXQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV3VmFsdWUuZmNtUHVzaFNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IudXBkYXRlKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmNvbnRpbnVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgdG9rZW4sIHRoaXMgbWV0aG9kIHdpbGwgbG9vayB1cCB0aGUgZGV0YWlscyBpbiBpbmRleGVkREIuXHJcbiAgICAgKi9cclxuICAgIFRva2VuRGV0YWlsc01vZGVsLnByb3RvdHlwZS5nZXRUb2tlbkRldGFpbHNGcm9tVG9rZW4gPSBmdW5jdGlvbiAoZmNtVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZmNtVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXRva2VuXCIgLyogQkFEX1RPS0VOICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSW5wdXRzKHsgZmNtVG9rZW46IGZjbVRva2VuIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuZ2V0SW5kZXgoJ2ZjbVRva2VuJywgZmNtVG9rZW4pXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIHNlcnZpY2Ugd29ya2VyIHNjb3BlLCB0aGlzIG1ldGhvZCB3aWxsIGxvb2sgdXAgdGhlIGRldGFpbHMgaW5cclxuICAgICAqIGluZGV4ZWREQi5cclxuICAgICAqIEByZXR1cm4gVGhlIGRldGFpbHMgYXNzb2NpYXRlZCB3aXRoIHRoYXQgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIFRva2VuRGV0YWlsc01vZGVsLnByb3RvdHlwZS5nZXRUb2tlbkRldGFpbHNGcm9tU1dTY29wZSA9IGZ1bmN0aW9uIChzd1Njb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN3U2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNjb3BlXCIgLyogQkFEX1NDT1BFICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSW5wdXRzKHsgc3dTY29wZTogc3dTY29wZSB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmdldChzd1Njb3BlKV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2F2ZSB0aGUgZGV0YWlscyBmb3IgdGhlIGZjbSB0b2tlbiBmb3IgcmUtdXNlIGF0IGEgbGF0ZXIgZGF0ZS5cclxuICAgICAqIEBwYXJhbSBpbnB1dCBBIHBsYWluIGpzIG9iamVjdCBjb250YWluaW5nIGFyZ3MgdG8gc2F2ZS5cclxuICAgICAqL1xyXG4gICAgVG9rZW5EZXRhaWxzTW9kZWwucHJvdG90eXBlLnNhdmVUb2tlbkRldGFpbHMgPSBmdW5jdGlvbiAodG9rZW5EZXRhaWxzKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscy5zd1Njb3BlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zY29wZVwiIC8qIEJBRF9TQ09QRSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscy52YXBpZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtdmFwaWQta2V5XCIgLyogQkFEX1ZBUElEX0tFWSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscy5lbmRwb2ludCB8fCAhdG9rZW5EZXRhaWxzLmF1dGggfHwgIXRva2VuRGV0YWlscy5wMjU2ZGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXN1YnNjcmlwdGlvblwiIC8qIEJBRF9TVUJTQ1JJUFRJT04gKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkRldGFpbHMuZmNtU2VuZGVySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNlbmRlci1pZFwiIC8qIEJBRF9TRU5ERVJfSUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbkRldGFpbHMuZmNtVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXRva2VuXCIgLyogQkFEX1RPS0VOICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSW5wdXRzKHRva2VuRGV0YWlscyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5wdXQodG9rZW5EZXRhaWxzKV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgZGVsZXRlcyBkZXRhaWxzIG9mIHRoZSBjdXJyZW50IEZDTSB0b2tlbi5cclxuICAgICAqIEl0J3MgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiBjYXNlIHdlIG5lZWQgdG8gbW92ZSB0byBhbiBhc3luY1xyXG4gICAgICogbWV0aG9kIGZvciBkZWxldGluZyBhdCBhIGxhdGVyIGRhdGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBSZXNvbHZlcyBvbmNlIHRoZSBGQ00gdG9rZW4gZGV0YWlscyBoYXZlIGJlZW4gZGVsZXRlZCBhbmQgcmV0dXJuc1xyXG4gICAgICogdGhlIGRlbGV0ZWQgZGV0YWlscy5cclxuICAgICAqL1xyXG4gICAgVG9rZW5EZXRhaWxzTW9kZWwucHJvdG90eXBlLmRlbGV0ZVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gJ3N0cmluZycgfHwgdG9rZW4ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZWplY3QoZXJyb3JGYWN0b3J5LmNyZWF0ZShcImludmFsaWQtZGVsZXRlLXRva2VuXCIgLyogSU5WQUxJRF9ERUxFVEVfVE9LRU4gKi8pKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRUb2tlbkRldGFpbHNGcm9tVG9rZW4odG9rZW4pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImRlbGV0ZS10b2tlbi1ub3QtZm91bmRcIiAvKiBERUxFVEVfVE9LRU5fTk9UX0ZPVU5EICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZShkZXRhaWxzLnN3U2NvcGUpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRldGFpbHNdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVG9rZW5EZXRhaWxzTW9kZWw7XHJcbn0oRGJJbnRlcmZhY2UpKTtcclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHRha2VzIGFuIG9iamVjdCBhbmQgd2lsbCBjaGVjayBmb3Iga25vd24gYXJndW1lbnRzIGFuZFxyXG4gKiB2YWxpZGF0ZSB0aGUgaW5wdXQuXHJcbiAqIEByZXR1cm4gUHJvbWlzZSB0aGF0IHJlc29sdmVzIGlmIGlucHV0IGlzIHZhbGlkLCByZWplY3RzIG90aGVyd2lzZS5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRzKGlucHV0KSB7XHJcbiAgICBpZiAoaW5wdXQuZmNtVG9rZW4pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmZjbVRva2VuICE9PSAnc3RyaW5nJyB8fCBpbnB1dC5mY21Ub2tlbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC10b2tlblwiIC8qIEJBRF9UT0tFTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlucHV0LnN3U2NvcGUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0LnN3U2NvcGUgIT09ICdzdHJpbmcnIHx8IGlucHV0LnN3U2NvcGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2NvcGVcIiAvKiBCQURfU0NPUEUgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC52YXBpZEtleSkge1xyXG4gICAgICAgIGlmICghKGlucHV0LnZhcGlkS2V5IGluc3RhbmNlb2YgVWludDhBcnJheSkgfHxcclxuICAgICAgICAgICAgaW5wdXQudmFwaWRLZXkubGVuZ3RoICE9PSA2NSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXZhcGlkLWtleVwiIC8qIEJBRF9WQVBJRF9LRVkgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC5lbmRwb2ludCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQuZW5kcG9pbnQgIT09ICdzdHJpbmcnIHx8IGlucHV0LmVuZHBvaW50Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXN1YnNjcmlwdGlvblwiIC8qIEJBRF9TVUJTQ1JJUFRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC5hdXRoKSB7XHJcbiAgICAgICAgaWYgKCEoaW5wdXQuYXV0aCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXN1YnNjcmlwdGlvblwiIC8qIEJBRF9TVUJTQ1JJUFRJT04gKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpbnB1dC5wMjU2ZGgpIHtcclxuICAgICAgICBpZiAoIShpbnB1dC5wMjU2ZGggaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zdWJzY3JpcHRpb25cIiAvKiBCQURfU1VCU0NSSVBUSU9OICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaW5wdXQuZmNtU2VuZGVySWQpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmZjbVNlbmRlcklkICE9PSAnc3RyaW5nJyB8fFxyXG4gICAgICAgICAgICBpbnB1dC5mY21TZW5kZXJJZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImJhZC1zZW5kZXItaWRcIiAvKiBCQURfU0VOREVSX0lEICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnZhciBVTkNPTVBSRVNTRURfUFVCTElDX0tFWV9TSVpFID0gNjU7XHJcbnZhciBWYXBpZERldGFpbHNNb2RlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhWYXBpZERldGFpbHNNb2RlbCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZhcGlkRGV0YWlsc01vZGVsKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmRiTmFtZSA9ICdmY21fdmFwaWRfZGV0YWlsc19kYic7XHJcbiAgICAgICAgX3RoaXMuZGJWZXJzaW9uID0gMTtcclxuICAgICAgICBfdGhpcy5vYmplY3RTdG9yZU5hbWUgPSAnZmNtX3ZhcGlkX29iamVjdF9TdG9yZSc7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgVmFwaWREZXRhaWxzTW9kZWwucHJvdG90eXBlLm9uRGJVcGdyYWRlID0gZnVuY3Rpb24gKHJlcXVlc3QpIHtcclxuICAgICAgICB2YXIgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZSh0aGlzLm9iamVjdFN0b3JlTmFtZSwgeyBrZXlQYXRoOiAnc3dTY29wZScgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIHNlcnZpY2Ugd29ya2VyIHNjb3BlLCB0aGlzIG1ldGhvZCB3aWxsIGxvb2sgdXAgdGhlIHZhcGlkIGtleVxyXG4gICAgICogaW4gaW5kZXhlZERCLlxyXG4gICAgICovXHJcbiAgICBWYXBpZERldGFpbHNNb2RlbC5wcm90b3R5cGUuZ2V0VmFwaWRGcm9tU1dTY29wZSA9IGZ1bmN0aW9uIChzd1Njb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN3U2NvcGUgIT09ICdzdHJpbmcnIHx8IHN3U2NvcGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmFkLXNjb3BlXCIgLyogQkFEX1NDT1BFICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldChzd1Njb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXN1bHQgPyByZXN1bHQudmFwaWRLZXkgOiB1bmRlZmluZWRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFNhdmUgYSB2YXBpZCBrZXkgYWdhaW5zdCBhIHN3U2NvcGUgZm9yIGxhdGVyIGRhdGUuXHJcbiAgICAgKi9cclxuICAgIFZhcGlkRGV0YWlsc01vZGVsLnByb3RvdHlwZS5zYXZlVmFwaWREZXRhaWxzID0gZnVuY3Rpb24gKHN3U2NvcGUsIHZhcGlkS2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzd1Njb3BlICE9PSAnc3RyaW5nJyB8fCBzd1Njb3BlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2NvcGVcIiAvKiBCQURfU0NPUEUgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHZhcGlkS2V5ID09PSBudWxsIHx8IHZhcGlkS2V5Lmxlbmd0aCAhPT0gVU5DT01QUkVTU0VEX1BVQkxJQ19LRVlfU0laRSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtdmFwaWQta2V5XCIgLyogQkFEX1ZBUElEX0tFWSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkZXRhaWxzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3U2NvcGU6IHN3U2NvcGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFwaWRLZXk6IHZhcGlkS2V5XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucHV0KGRldGFpbHMpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBkZWxldGVzIGRldGFpbHMgb2YgdGhlIGN1cnJlbnQgRkNNIFZBUElEIGtleSBmb3IgYSBTVyBzY29wZS5cclxuICAgICAqIFJlc29sdmVzIG9uY2UgdGhlIHNjb3BlL3ZhcGlkIGRldGFpbHMgaGF2ZSBiZWVuIGRlbGV0ZWQgYW5kIHJldHVybnMgdGhlXHJcbiAgICAgKiBkZWxldGVkIHZhcGlkIGtleS5cclxuICAgICAqL1xyXG4gICAgVmFwaWREZXRhaWxzTW9kZWwucHJvdG90eXBlLmRlbGV0ZVZhcGlkRGV0YWlscyA9IGZ1bmN0aW9uIChzd1Njb3BlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFwaWRLZXk7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0VmFwaWRGcm9tU1dTY29wZShzd1Njb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXBpZEtleSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YXBpZEtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImRlbGV0ZS1zY29wZS1ub3QtZm91bmRcIiAvKiBERUxFVEVfU0NPUEVfTk9UX0ZPVU5EICovKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZShzd1Njb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2YXBpZEtleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWYXBpZERldGFpbHNNb2RlbDtcclxufShEYkludGVyZmFjZSkpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVG9rZW4gc2hvdWxkIGJlIHJlZnJlc2hlZCBvbmNlIGEgd2Vlay5cclxudmFyIFRPS0VOX0VYUElSQVRJT05fTUlMTElTID0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7IC8vIDcgZGF5c1xyXG52YXIgQmFzZUNvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCYXNlQ29udHJvbGxlcihzZXJ2aWNlcykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xyXG4gICAgICAgIHRoaXMudmFwaWREZXRhaWxzTW9kZWwgPSBuZXcgVmFwaWREZXRhaWxzTW9kZWwoKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIgPSBuZXcgU3Vic2NyaXB0aW9uTWFuYWdlcigpO1xyXG4gICAgICAgIHZhciBhcHAgPSBzZXJ2aWNlcy5hcHA7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgaWYgKCFhcHAub3B0aW9ucy5tZXNzYWdpbmdTZW5kZXJJZCB8fFxyXG4gICAgICAgICAgICB0eXBlb2YgYXBwLm9wdGlvbnMubWVzc2FnaW5nU2VuZGVySWQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJiYWQtc2VuZGVyLWlkXCIgLyogQkFEX1NFTkRFUl9JRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuSU5URVJOQUwgPSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZGVsZXRlKCk7IH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudG9rZW5EZXRhaWxzTW9kZWwgPSBuZXcgVG9rZW5EZXRhaWxzTW9kZWwoc2VydmljZXMpO1xyXG4gICAgfVxyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldFRva2VuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBlcm1pc3Npb24sIHN3UmVnLCBwdWJsaWNWYXBpZEtleSwgcHVzaFN1YnNjcmlwdGlvbiwgdG9rZW5EZXRhaWxzO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uID0gdGhpcy5nZXROb3RpZmljYXRpb25QZXJtaXNzaW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBlcm1pc3Npb24gPT09ICdkZWZhdWx0JykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlcXVlc3ROb3RpZmljYXRpb25QZXJtaXNzaW9uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHVzZXIgaGFzbid0IGFsbG93ZWQgb3IgZGVuaWVkIG5vdGlmaWNhdGlvbnMgeWV0LiBBc2sgdGhlbS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVybWlzc2lvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlcm1pc3Npb24gIT09ICdncmFudGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm5vdGlmaWNhdGlvbnMtYmxvY2tlZFwiIC8qIE5PVElGSUNBVElPTlNfQkxPQ0tFRCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRTV1JlZ2lzdHJhdGlvbl8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd1JlZyA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRQdWJsaWNWYXBpZEtleV8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWNWYXBpZEtleSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRQdXNoU3Vic2NyaXB0aW9uKHN3UmVnLCBwdWJsaWNWYXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFN1YnNjcmlwdGlvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy50b2tlbkRldGFpbHNNb2RlbC5nZXRUb2tlbkRldGFpbHNGcm9tU1dTY29wZShzd1JlZy5zY29wZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5EZXRhaWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5tYW5hZ2VFeGlzdGluZ1Rva2VuKHN3UmVnLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSwgdG9rZW5EZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuZ2V0TmV3VG9rZW4oc3dSZWcsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogbWFuYWdlRXhpc3RpbmdUb2tlbiBpcyB0cmlnZ2VyZWQgaWYgdGhlcmUncyBhbiBleGlzdGluZyBGQ00gdG9rZW4gaW4gdGhlXHJcbiAgICAgKiBkYXRhYmFzZSBhbmQgaXQgY2FuIHRha2UgMyBkaWZmZXJlbnQgYWN0aW9uczpcclxuICAgICAqIDEpIFJldHJpZXZlIHRoZSBleGlzdGluZyBGQ00gdG9rZW4gZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAgICAgKiAyKSBJZiBWQVBJRCBkZXRhaWxzIGhhdmUgY2hhbmdlZDogRGVsZXRlIHRoZSBleGlzdGluZyB0b2tlbiBhbmQgY3JlYXRlIGFcclxuICAgICAqIG5ldyBvbmUgd2l0aCB0aGUgbmV3IFZBUElEIGtleS5cclxuICAgICAqIDMpIElmIHRoZSBkYXRhYmFzZSBjYWNoZSBpcyBpbnZhbGlkYXRlZDogU2VuZCBhIHJlcXVlc3QgdG8gRkNNIHRvIHVwZGF0ZVxyXG4gICAgICogdGhlIHRva2VuLCBhbmQgdG8gY2hlY2sgaWYgdGhlIHRva2VuIGlzIHN0aWxsIHZhbGlkIG9uIEZDTS1zaWRlLlxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUubWFuYWdlRXhpc3RpbmdUb2tlbiA9IGZ1bmN0aW9uIChzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXksIHRva2VuRGV0YWlscykge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGlzVG9rZW5WYWxpZCwgbm93O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1Rva2VuVmFsaWQgPSBpc1Rva2VuU3RpbGxWYWxpZChwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSwgdG9rZW5EZXRhaWxzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Rva2VuVmFsaWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm93IDwgdG9rZW5EZXRhaWxzLmNyZWF0ZVRpbWUgKyBUT0tFTl9FWFBJUkFUSU9OX01JTExJUykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRva2VuRGV0YWlscy5mY21Ub2tlbl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy51cGRhdGVUb2tlbihzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXksIHRva2VuRGV0YWlscyldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdG9rZW4gaXMgbm8gbG9uZ2VyIHZhbGlkIChmb3IgZXhhbXBsZSBpZiB0aGUgVkFQSUQgZGV0YWlsc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgY2hhbmdlZCksIGRlbGV0ZSB0aGUgZXhpc3RpbmcgdG9rZW4gZnJvbSB0aGUgRkNNIGNsaWVudCBhbmQgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YWJhc2UuIE5vIG5lZWQgdG8gdW5zdWJzY3JpYmUgZnJvbSB0aGUgU2VydmljZSBXb3JrZXIgYXMgd2UgaGF2ZSBhXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ29vZCBwdXNoIHN1YnNjcmlwdGlvbiB0aGF0IHdlJ2QgbGlrZSB0byB1c2UgaW4gZ2V0TmV3VG9rZW4uXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5kZWxldGVUb2tlbkZyb21EQih0b2tlbkRldGFpbHMuZmNtVG9rZW4pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0b2tlbiBpcyBubyBsb25nZXIgdmFsaWQgKGZvciBleGFtcGxlIGlmIHRoZSBWQVBJRCBkZXRhaWxzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhdmUgY2hhbmdlZCksIGRlbGV0ZSB0aGUgZXhpc3RpbmcgdG9rZW4gZnJvbSB0aGUgRkNNIGNsaWVudCBhbmQgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRhdGFiYXNlLiBObyBuZWVkIHRvIHVuc3Vic2NyaWJlIGZyb20gdGhlIFNlcnZpY2UgV29ya2VyIGFzIHdlIGhhdmUgYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBnb29kIHB1c2ggc3Vic2NyaXB0aW9uIHRoYXQgd2UnZCBsaWtlIHRvIHVzZSBpbiBnZXROZXdUb2tlbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5nZXROZXdUb2tlbihzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZVRva2VuID0gZnVuY3Rpb24gKHN3UmVnLCBwdXNoU3Vic2NyaXB0aW9uLCBwdWJsaWNWYXBpZEtleSwgdG9rZW5EZXRhaWxzKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdXBkYXRlZFRva2VuLCBhbGxEZXRhaWxzLCBlXzE7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgNCwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci51cGRhdGVUb2tlbih0b2tlbkRldGFpbHMsIHRoaXMuc2VydmljZXMsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVG9rZW4gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbERldGFpbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd1Njb3BlOiBzd1JlZy5zY29wZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcGlkS2V5OiBwdWJsaWNWYXBpZEtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZjbVNlbmRlcklkOiB0aGlzLnNlcnZpY2VzLmFwcC5vcHRpb25zLm1lc3NhZ2luZ1NlbmRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmNtVG9rZW46IHVwZGF0ZWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRwb2ludDogcHVzaFN1YnNjcmlwdGlvbi5lbmRwb2ludCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdhdXRoJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMjU2ZGg6IHB1c2hTdWJzY3JpcHRpb24uZ2V0S2V5KCdwMjU2ZGgnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnRva2VuRGV0YWlsc01vZGVsLnNhdmVUb2tlbkRldGFpbHMoYWxsRGV0YWlscyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnZhcGlkRGV0YWlsc01vZGVsLnNhdmVWYXBpZERldGFpbHMoc3dSZWcuc2NvcGUsIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB1cGRhdGVkVG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZVRva2VuKHRva2VuRGV0YWlscy5mY21Ub2tlbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlXzE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXROZXdUb2tlbiA9IGZ1bmN0aW9uIChzd1JlZywgcHVzaFN1YnNjcmlwdGlvbiwgcHVibGljVmFwaWRLZXkpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdUb2tlbiwgYWxsRGV0YWlscztcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmdldFRva2VuKHRoaXMuc2VydmljZXMsIHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUb2tlbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsRGV0YWlscyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3U2NvcGU6IHN3UmVnLnNjb3BlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFwaWRLZXk6IHB1YmxpY1ZhcGlkS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmNtU2VuZGVySWQ6IHRoaXMuYXBwLm9wdGlvbnMubWVzc2FnaW5nU2VuZGVySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmY21Ub2tlbjogbmV3VG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IHB1c2hTdWJzY3JpcHRpb24uZW5kcG9pbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiBwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgnYXV0aCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcDI1NmRoOiBwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgncDI1NmRoJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy50b2tlbkRldGFpbHNNb2RlbC5zYXZlVG9rZW5EZXRhaWxzKGFsbERldGFpbHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy52YXBpZERldGFpbHNNb2RlbC5zYXZlVmFwaWREZXRhaWxzKHN3UmVnLnNjb3BlLCBwdWJsaWNWYXBpZEtleSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbmV3VG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGRlbGV0ZXMgdG9rZW5zIHRoYXQgdGhlIHRva2VuIG1hbmFnZXIgbG9va3MgYWZ0ZXIsXHJcbiAgICAgKiB1bnN1YnNjcmliZXMgdGhlIHRva2VuIGZyb20gRkNNICBhbmQgdGhlbiB1bnJlZ2lzdGVycyB0aGUgcHVzaFxyXG4gICAgICogc3Vic2NyaXB0aW9uIGlmIGl0IGV4aXN0cy4gSXQgcmV0dXJucyBhIHByb21pc2UgdGhhdCBpbmRpY2F0ZXNcclxuICAgICAqIHdoZXRoZXIgb3Igbm90IHRoZSB1bnN1YnNjcmliZSByZXF1ZXN0IHdhcyBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5LlxyXG4gICAgICovXHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUuZGVsZXRlVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZWdpc3RyYXRpb24sIHB1c2hTdWJzY3JpcHRpb247XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgdG9rZW4gZGV0YWlscyBmcm9tIHRoZSBkYXRhYmFzZS5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZVRva2VuRnJvbURCKHRva2VuKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgdGhlIHRva2VuIGRldGFpbHMgZnJvbSB0aGUgZGF0YWJhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRTV1JlZ2lzdHJhdGlvbl8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RyYXRpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVnaXN0cmF0aW9uKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hTdWJzY3JpcHRpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwdXNoU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcHVzaFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiBcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIFNXLCBjb25zaWRlciBpdCBhIHN1Y2Nlc3MuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRydWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgZGVsZXRlIHRoZSB0b2tlbiBmcm9tIHRoZSBjbGllbnQgZGF0YWJhc2UsIGFuZCBtYWtlIGFcclxuICAgICAqIGNhbGwgdG8gRkNNIHRvIHJlbW92ZSBpdCBmcm9tIHRoZSBzZXJ2ZXIgREIuIERvZXMgbm90IHRlbXBlciB3aXRoIHRoZVxyXG4gICAgICogcHVzaCBzdWJzY3JpcHRpb24uXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5kZWxldGVUb2tlbkZyb21EQiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRva2VuRGV0YWlscywgZV8yO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnRva2VuRGV0YWlsc01vZGVsLmRlbGV0ZVRva2VuKHRva2VuKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbkRldGFpbHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMiwgNCwgLCA1XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5kZWxldGVUb2tlbih0aGlzLnNlcnZpY2VzLCB0b2tlbkRldGFpbHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlXzIgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgZmFpbGVkIHNlcnZlci1zaWRlIGRlbGV0ZSBkb2VzIG5vdCBuZWVkIHRvIGJyZWFrIHRoZSBhcHAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZV8yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBhIFB1c2hTdWJzY3JpcHRpb24gZm9yIHRoZSBjdXJyZW50IHVzZXIuXHJcbiAgICAgKi9cclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXRQdXNoU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN3UmVnaXN0cmF0aW9uLCBwdWJsaWNWYXBpZEtleSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgc3dSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuZ2V0U3Vic2NyaXB0aW9uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc3Vic2NyaXB0aW9uXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgc3dSZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IHB1YmxpY1ZhcGlkS2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8vXHJcbiAgICAvLyBUaGUgZm9sbG93aW5nIG1ldGhvZHMgc2hvdWxkIG9ubHkgYmUgYXZhaWxhYmxlIGluIHRoZSB3aW5kb3cuXHJcbiAgICAvL1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkgaW5zdGVhZC5cclxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob3RpZmljYXRpb24vcmVxdWVzdFBlcm1pc3Npb25cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnJlcXVlc3RQZXJtaXNzaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJvbmx5LWF2YWlsYWJsZS1pbi13aW5kb3dcIiAvKiBBVkFJTEFCTEVfSU5fV0lORE9XICovKTtcclxuICAgIH07XHJcbiAgICBCYXNlQ29udHJvbGxlci5wcm90b3R5cGUudXNlU2VydmljZVdvcmtlciA9IGZ1bmN0aW9uIChfcmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi8pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS51c2VQdWJsaWNWYXBpZEtleSA9IGZ1bmN0aW9uIChfYjY0UHVibGljS2V5KSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi8pO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAoX25leHRPck9ic2VydmVyLCBfZXJyb3IsIF9jb21wbGV0ZWQpIHtcclxuICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4td2luZG93XCIgLyogQVZBSUxBQkxFX0lOX1dJTkRPVyAqLyk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLm9uVG9rZW5SZWZyZXNoID0gZnVuY3Rpb24gKF9uZXh0T3JPYnNlcnZlciwgX2Vycm9yLCBfY29tcGxldGVkKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm9ubHktYXZhaWxhYmxlLWluLXdpbmRvd1wiIC8qIEFWQUlMQUJMRV9JTl9XSU5ET1cgKi8pO1xyXG4gICAgfTtcclxuICAgIC8vXHJcbiAgICAvLyBUaGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgYnkgdGhlIHNlcnZpY2Ugd29ya2VyIG9ubHkuXHJcbiAgICAvL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnNldEJhY2tncm91bmRNZXNzYWdlSGFuZGxlciA9IGZ1bmN0aW9uIChfY2FsbGJhY2spIHtcclxuICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwib25seS1hdmFpbGFibGUtaW4tc3dcIiAvKiBBVkFJTEFCTEVfSU5fU1cgKi8pO1xyXG4gICAgfTtcclxuICAgIC8vXHJcbiAgICAvLyBUaGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgYnkgdGhlIHNlcnZpY2UgdGhlbXNlbHZlcyBhbmQgbm90IGV4cG9zZWRcclxuICAgIC8vIHB1YmxpY2x5IG9yIG5vdCBleHBlY3RlZCB0byBiZSB1c2VkIGJ5IGRldmVsb3BlcnMuXHJcbiAgICAvL1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyByZXF1aXJlZCB0byBhZGhlcmUgdG8gdGhlIEZpcmViYXNlIGludGVyZmFjZS5cclxuICAgICAqIEl0IGNsb3NlcyBhbnkgY3VycmVudGx5IG9wZW4gaW5kZXhkYiBkYXRhYmFzZSBjb25uZWN0aW9ucy5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5EZXRhaWxzTW9kZWwuY2xvc2VEYXRhYmFzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YXBpZERldGFpbHNNb2RlbC5jbG9zZURhdGFiYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBOb3RpZmljYXRpb24gUGVybWlzc2lvbiBzdGF0ZS5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldE5vdGlmaWNhdGlvblBlcm1pc3Npb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdHMgbm90aWZpY2F0aW9uIHBlcm1pc3Npb24gZnJvbSB0aGUgdXNlci5cclxuICAgICAqL1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLnJlcXVlc3ROb3RpZmljYXRpb25QZXJtaXNzaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKSBpcyBub3QgYXZhaWxhYmxlIGluIHNlcnZpY2Ugd29ya2Vycy5cclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIGN1cnJlbnQgcGVybWlzc2lvbi5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgTm90aWZpY2F0aW9uLnBlcm1pc3Npb25dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldFRva2VuRGV0YWlsc01vZGVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuRGV0YWlsc01vZGVsO1xyXG4gICAgfTtcclxuICAgIEJhc2VDb250cm9sbGVyLnByb3RvdHlwZS5nZXRWYXBpZERldGFpbHNNb2RlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YXBpZERldGFpbHNNb2RlbDtcclxuICAgIH07XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBtYWtlIHByb3RlY3RlZFxyXG4gICAgQmFzZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldFN1YnNjcmlwdGlvbk1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQmFzZUNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdGhlIHRva2VuRGV0YWlscyBtYXRjaCB0aGUgZGV0YWlscyBwcm92aWRlZCBpbiB0aGUgY2xpZW50cy5cclxuICovXHJcbmZ1bmN0aW9uIGlzVG9rZW5TdGlsbFZhbGlkKHB1c2hTdWJzY3JpcHRpb24sIHB1YmxpY1ZhcGlkS2V5LCB0b2tlbkRldGFpbHMpIHtcclxuICAgIGlmICghdG9rZW5EZXRhaWxzLnZhcGlkS2V5IHx8XHJcbiAgICAgICAgIWlzQXJyYXlCdWZmZXJFcXVhbChwdWJsaWNWYXBpZEtleS5idWZmZXIsIHRva2VuRGV0YWlscy52YXBpZEtleS5idWZmZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdmFyIGlzRW5kcG9pbnRFcXVhbCA9IHB1c2hTdWJzY3JpcHRpb24uZW5kcG9pbnQgPT09IHRva2VuRGV0YWlscy5lbmRwb2ludDtcclxuICAgIHZhciBpc0F1dGhFcXVhbCA9IGlzQXJyYXlCdWZmZXJFcXVhbChwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgnYXV0aCcpLCB0b2tlbkRldGFpbHMuYXV0aCk7XHJcbiAgICB2YXIgaXNQMjU2ZGhFcXVhbCA9IGlzQXJyYXlCdWZmZXJFcXVhbChwdXNoU3Vic2NyaXB0aW9uLmdldEtleSgncDI1NmRoJyksIHRva2VuRGV0YWlscy5wMjU2ZGgpO1xyXG4gICAgcmV0dXJuIGlzRW5kcG9pbnRFcXVhbCAmJiBpc0F1dGhFcXVhbCAmJiBpc1AyNTZkaEVxdWFsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgRkNNX01TRyA9ICdGQ01fTVNHJztcclxudmFyIFN3Q29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTd0NvbnRyb2xsZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTd0NvbnRyb2xsZXIoc2VydmljZXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBzZXJ2aWNlcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5iZ01lc3NhZ2VIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ3B1c2gnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5vblB1c2goZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdwdXNoc3Vic2NyaXB0aW9uY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgX3RoaXMub25TdWJDaGFuZ2UoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCdub3RpZmljYXRpb25jbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm9uTm90aWZpY2F0aW9uQ2xpY2soZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uUHVzaCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LndhaXRVbnRpbCh0aGlzLm9uUHVzaF8oZXZlbnQpKTtcclxuICAgIH07XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25TdWJDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC53YWl0VW50aWwodGhpcy5vblN1YkNoYW5nZV8oZXZlbnQpKTtcclxuICAgIH07XHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25Ob3RpZmljYXRpb25DbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LndhaXRVbnRpbCh0aGlzLm9uTm90aWZpY2F0aW9uQ2xpY2tfKGV2ZW50KSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGhhbmRsZXIgZm9yIHB1c2ggZXZlbnRzIHRoYXQgc2hvd3Mgbm90aWZpY2F0aW9ucyBiYXNlZCBvbiB0aGUgY29udGVudCBvZlxyXG4gICAgICogdGhlIHBheWxvYWQuXHJcbiAgICAgKlxyXG4gICAgICogVGhlIHBheWxvYWQgbXVzdCBiZSBhIEpTT04tZW5jb2RlZCBPYmplY3Qgd2l0aCBhIGBub3RpZmljYXRpb25gIGtleS4gVGhlXHJcbiAgICAgKiB2YWx1ZSBvZiB0aGUgYG5vdGlmaWNhdGlvbmAgcHJvcGVydHkgd2lsbCBiZSB1c2VkIGFzIHRoZSBOb3RpZmljYXRpb25PcHRpb25zXHJcbiAgICAgKiBvYmplY3QgcGFzc2VkIHRvIHNob3dOb3RpZmljYXRpb24uIEFkZGl0aW9uYWxseSwgdGhlIGB0aXRsZWAgcHJvcGVydHkgb2YgdGhlXHJcbiAgICAgKiBub3RpZmljYXRpb24gb2JqZWN0IHdpbGwgYmUgdXNlZCBhcyB0aGUgdGl0bGUuXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhlcmUgaXMgbm8gbm90aWZpY2F0aW9uIGRhdGEgaW4gdGhlIHBheWxvYWQgdGhlbiBubyBub3RpZmljYXRpb24gd2lsbCBiZVxyXG4gICAgICogc2hvd24uXHJcbiAgICAgKi9cclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUub25QdXNoXyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG1zZ1BheWxvYWQsIGhhc1Zpc2libGVDbGllbnRzLCBub3RpZmljYXRpb25EZXRhaWxzLCBub3RpZmljYXRpb25UaXRsZSwgcmVnLCBhY3Rpb25zLCBtYXhBY3Rpb25zO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnUGF5bG9hZCA9IGV2ZW50LmRhdGEuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBKU09OIHNvIG5vdCBhbiBGQ00gbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaGFzVmlzaWJsZUNsaWVudHNfKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzVmlzaWJsZUNsaWVudHMgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNWaXNpYmxlQ2xpZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwIGluIGZvcmVncm91bmQuIFNlbmQgdG8gcGFnZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnNlbmRNZXNzYWdlVG9XaW5kb3dDbGllbnRzXyhtc2dQYXlsb2FkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRGV0YWlscyA9IHRoaXMuZ2V0Tm90aWZpY2F0aW9uRGF0YV8obXNnUGF5bG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbm90aWZpY2F0aW9uRGV0YWlscykgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblRpdGxlID0gbm90aWZpY2F0aW9uRGV0YWlscy50aXRsZSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRTV1JlZ2lzdHJhdGlvbl8oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWcgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnMgPSBub3RpZmljYXRpb25EZXRhaWxzLmFjdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEFjdGlvbnMgPSBOb3RpZmljYXRpb24ubWF4QWN0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbnMgJiYgbWF4QWN0aW9ucyAmJiBhY3Rpb25zLmxlbmd0aCA+IG1heEFjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlRoaXMgYnJvd3NlciBvbmx5IHN1cHBvcnRzIFwiICsgbWF4QWN0aW9ucyArIFwiIGFjdGlvbnMuXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVGhlIHJlbWFpbmluZyBhY3Rpb25zIHdpbGwgbm90IGJlIGRpc3BsYXllZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlZy5zaG93Tm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvblRpdGxlLCBub3RpZmljYXRpb25EZXRhaWxzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYmdNZXNzYWdlSGFuZGxlcikgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYmdNZXNzYWdlSGFuZGxlcihtc2dQYXlsb2FkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5vblN1YkNoYW5nZV8gPSBmdW5jdGlvbiAoX2V2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVnaXN0cmF0aW9uLCBlcnJfMSwgZXJyXzIsIHRva2VuRGV0YWlsc01vZGVsLCB0b2tlbkRldGFpbHM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0U1dSZWdpc3RyYXRpb25fKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidW5hYmxlLXRvLXJlc3Vic2NyaWJlXCIgLyogVU5BQkxFX1RPX1JFU1VCU0NSSUJFICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckluZm86IGVycl8xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFszLCA1LCAsIDhdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzTW9kZWwgPSB0aGlzLmdldFRva2VuRGV0YWlsc01vZGVsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRva2VuRGV0YWlsc01vZGVsLmdldFRva2VuRGV0YWlsc0Zyb21TV1Njb3BlKHJlZ2lzdHJhdGlvbi5zY29wZSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5EZXRhaWxzID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuRGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgcmFyZWx5IG9jY3VyZSwgYnV0IGNvdWxkIGlmIGluZGV4ZWREQlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXMgY29ycnVwdGVkIG9yIHdpcGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHRvIGRlbGV0ZSB0aGUgdG9rZW4gaWYgd2Uga25vdyBpdCdzIGJhZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmRlbGV0ZVRva2VuKHRva2VuRGV0YWlscy5mY21Ub2tlbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB0byBkZWxldGUgdGhlIHRva2VuIGlmIHdlIGtub3cgaXQncyBiYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5vbk5vdGlmaWNhdGlvbkNsaWNrXyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG1zZ1BheWxvYWQsIGxpbmssIHdpbmRvd0NsaWVudCwgaW50ZXJuYWxNc2c7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQubm90aWZpY2F0aW9uIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZXZlbnQubm90aWZpY2F0aW9uLmRhdGEgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFldmVudC5ub3RpZmljYXRpb24uZGF0YVtGQ01fTVNHXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IGFuIEZDTSBub3RpZmljYXRpb24sIGRvIG5vdGhpbmcuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIGNsaWNrZWQgb24gYW4gYWN0aW9uIGJ1dHRvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBhbGxvdyBkZXZzIHRvIGFjdCBvbiBhY3Rpb24gYnV0dG9uIGNsaWNrcyBieSB1c2luZyBhIGN1c3RvbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25Ob3RpZmljYXRpb25DbGljayBsaXN0ZW5lciB0aGF0IHRoZXkgZGVmaW5lLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgb3RoZXIgbGlzdGVuZXJzIGZyb20gcmVjZWl2aW5nIHRoZSBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQubm90aWZpY2F0aW9uLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZ1BheWxvYWQgPSBldmVudC5ub3RpZmljYXRpb24uZGF0YVtGQ01fTVNHXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90aGluZyB0byBkby5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rID0gKG1zZ1BheWxvYWQuZmNtT3B0aW9ucyAmJiBtc2dQYXlsb2FkLmZjbU9wdGlvbnMubGluaykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ1BheWxvYWQubm90aWZpY2F0aW9uLmNsaWNrX2FjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobXNnUGF5bG9hZC5kYXRhICYmIEZOX0NBTVBBSUdOX0lEIGluIG1zZ1BheWxvYWQuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsgPSBzZWxmLmxvY2F0aW9uLm9yaWdpbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgdG8gZG8uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0V2luZG93Q2xpZW50XyhsaW5rKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dDbGllbnQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXdpbmRvd0NsaWVudCkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNlbGYuY2xpZW50cy5vcGVuV2luZG93KGxpbmspXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuYWJsZSB0byBmaW5kIHdpbmRvdyBjbGllbnQgc28gbmVlZCB0byBvcGVuIG9uZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Q2xpZW50ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IHRocmVlIHNlY29uZHMgZm9yIHRoZSBjbGllbnQgdG8gaW5pdGlhbGl6ZSBhbmQgc2V0IHVwIHRoZSBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZXIgc28gdGhhdCBpdCBjYW4gcmVjZWl2ZSB0aGUgbWVzc2FnZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc2xlZXAoMzAwMCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCB0aHJlZSBzZWNvbmRzIGZvciB0aGUgY2xpZW50IHRvIGluaXRpYWxpemUgYW5kIHNldCB1cCB0aGUgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGVyIHNvIHRoYXQgaXQgY2FuIHJlY2VpdmUgdGhlIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzQgLyp5aWVsZCovLCB3aW5kb3dDbGllbnQuZm9jdXMoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dDbGllbnQgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghd2luZG93Q2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaW5kb3cgQ2xpZW50IHdpbGwgbm90IGJlIHJldHVybmVkIGlmIGl0J3MgZm9yIGEgdGhpcmQgcGFydHkgb3JpZ2luLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBub3RpZmljYXRpb24gYW5kIGZjbU9wdGlvbnMgZGF0YSBmcm9tIHBheWxvYWQgYmVmb3JlIHNlbmRpbmcgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG1zZ1BheWxvYWQuZmNtT3B0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxNc2cgPSBjcmVhdGVOZXdNc2coTWVzc2FnZVR5cGUuTk9USUZJQ0FUSU9OX0NMSUNLRUQsIG1zZ1BheWxvYWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHRvIHNlbmQgYSBtZXNzYWdlIHRvIHRoZSBjbGllbnQgdG8gaGFuZGxlIHRoZSBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElzIGFmZmVjdGVkIGJ5OiBodHRwczovL2dpdGh1Yi5jb20vc2xpZ2h0bHlvZmYvU2VydmljZVdvcmtlci9pc3N1ZXMvNzI4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmF0dGVtcHRUb01lc3NhZ2VDbGllbnRfKHdpbmRvd0NsaWVudCwgaW50ZXJuYWxNc2cpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldE5vdGlmaWNhdGlvbkRhdGFfID0gZnVuY3Rpb24gKG1zZ1BheWxvYWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKCFtc2dQYXlsb2FkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBtc2dQYXlsb2FkLm5vdGlmaWNhdGlvbiAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbm90aWZpY2F0aW9uSW5mb3JtYXRpb24gPSBfX2Fzc2lnbih7fSwgbXNnUGF5bG9hZC5ub3RpZmljYXRpb24pO1xyXG4gICAgICAgIC8vIFB1dCB0aGUgbWVzc2FnZSBwYXlsb2FkIHVuZGVyIEZDTV9NU0cgbmFtZSBzbyB3ZSBjYW4gaWRlbnRpZnkgdGhlXHJcbiAgICAgICAgLy8gbm90aWZpY2F0aW9uIGFzIGJlaW5nIGFuIEZDTSBub3RpZmljYXRpb24gdnMgYSBub3RpZmljYXRpb24gZnJvbVxyXG4gICAgICAgIC8vIHNvbWV3aGVyZSBlbHNlIChpLmUuIG5vcm1hbCB3ZWIgcHVzaCBvciBkZXZlbG9wZXIgZ2VuZXJhdGVkXHJcbiAgICAgICAgLy8gbm90aWZpY2F0aW9uKS5cclxuICAgICAgICBub3RpZmljYXRpb25JbmZvcm1hdGlvbi5kYXRhID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG1zZ1BheWxvYWQubm90aWZpY2F0aW9uLmRhdGEpLCAoX2EgPSB7fSwgX2FbRkNNX01TR10gPSBtc2dQYXlsb2FkLCBfYSkpO1xyXG4gICAgICAgIHJldHVybiBub3RpZmljYXRpb25JbmZvcm1hdGlvbjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENhbGxpbmcgc2V0QmFja2dyb3VuZE1lc3NhZ2VIYW5kbGVyIHdpbGwgb3B0IGluIHRvIHNvbWUgc3BlY2lmaWNcclxuICAgICAqIGJlaGF2aW91cnMuXHJcbiAgICAgKiAxLikgSWYgYSBub3RpZmljYXRpb24gZG9lc24ndCBuZWVkIHRvIGJlIHNob3duIGR1ZSB0byBhIHdpbmRvdyBhbHJlYWR5XHJcbiAgICAgKiBiZWluZyB2aXNpYmxlLCB0aGVuIHB1c2ggbWVzc2FnZXMgd2lsbCBiZSBzZW50IHRvIHRoZSBwYWdlLlxyXG4gICAgICogMi4pIElmIGEgbm90aWZpY2F0aW9uIG5lZWRzIHRvIGJlIHNob3duLCBhbmQgdGhlIG1lc3NhZ2UgY29udGFpbnMgbm9cclxuICAgICAqIG5vdGlmaWNhdGlvbiBkYXRhIHRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkXHJcbiAgICAgKiBhbmQgdGhlIHByb21pc2UgaXQgcmV0dXJucyB3aWxsIGJlIHBhc3NlZCB0byBldmVudC53YWl0VW50aWwuXHJcbiAgICAgKiBJZiB5b3UgZG8gbm90IHNldCB0aGlzIGNhbGxiYWNrIHRoZW4gYWxsIHB1c2ggbWVzc2FnZXMgd2lsbCBsZXQgYW5kIHRoZVxyXG4gICAgICogZGV2ZWxvcGVyIGNhbiBoYW5kbGUgdGhlbSBpbiBhIHRoZWlyIG93biAncHVzaCcgZXZlbnQgY2FsbGJhY2tcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aGVuIGEgcHVzaCBtZXNzYWdlIGlzIHJlY2VpdmVkXHJcbiAgICAgKiBhbmQgYSBub3RpZmljYXRpb24gbXVzdCBiZSBzaG93bi4gVGhlIGNhbGxiYWNrIHdpbGwgYmUgZ2l2ZW4gdGhlIGRhdGEgZnJvbVxyXG4gICAgICogdGhlIHB1c2ggbWVzc2FnZS5cclxuICAgICAqL1xyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5zZXRCYWNrZ3JvdW5kTWVzc2FnZUhhbmRsZXIgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwiYmctaGFuZGxlci1mdW5jdGlvbi1leHBlY3RlZFwiIC8qIEJHX0hBTkRMRVJfRlVOQ1RJT05fRVhQRUNURUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJnTWVzc2FnZUhhbmRsZXIgPSBjYWxsYmFjaztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB1cmwgVGhlIFVSTCB0byBsb29rIGZvciB3aGVuIGZvY3VzaW5nIGEgY2xpZW50LlxyXG4gICAgICogQHJldHVybiBSZXR1cm5zIGFuIGV4aXN0aW5nIHdpbmRvdyBjbGllbnQgb3IgYSBuZXdseSBvcGVuZWQgV2luZG93Q2xpZW50LlxyXG4gICAgICovXHJcbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAgICAvLyBUT0RPOiBNYWtlIHByaXZhdGVcclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0V2luZG93Q2xpZW50XyA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJzZWRVUkwsIGNsaWVudExpc3QsIHN1aXRhYmxlQ2xpZW50LCBpLCBwYXJzZWRDbGllbnRVcmw7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFVSTCA9IG5ldyBVUkwodXJsLCBzZWxmLmxvY2F0aW9uLmhyZWYpLmhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGdldENsaWVudExpc3QoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRMaXN0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWl0YWJsZUNsaWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjbGllbnRMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRDbGllbnRVcmwgPSBuZXcgVVJMKGNsaWVudExpc3RbaV0udXJsLCBzZWxmLmxvY2F0aW9uLmhyZWYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkQ2xpZW50VXJsID09PSBwYXJzZWRVUkwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWl0YWJsZUNsaWVudCA9IGNsaWVudExpc3RbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHN1aXRhYmxlQ2xpZW50XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1lc3NhZ2Ugd2lsbCBhdHRlbXB0IHRvIHNlbmQgdGhlIG1lc3NhZ2UgdG8gYSB3aW5kb3cgY2xpZW50LlxyXG4gICAgICogQHBhcmFtIGNsaWVudCBUaGUgV2luZG93Q2xpZW50IHRvIHNlbmQgdGhlIG1lc3NhZ2UgdG8uXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBzZW5kIHRvIHRoZSBjbGllbnQuXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHNlbmRpbmcgdGhlIG1lc3NhZ2UuIFRoaXNcclxuICAgICAqIGRvZXMgbm90IGd1YXJhbnRlZSB0aGF0IHRoZSBtZXNzYWdlIHdhcyBzdWNjZXNzZnVsbHkgcmVjZWl2ZWQuXHJcbiAgICAgKi9cclxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmdcclxuICAgIC8vIFRPRE86IE1ha2UgcHJpdmF0ZVxyXG4gICAgU3dDb250cm9sbGVyLnByb3RvdHlwZS5hdHRlbXB0VG9NZXNzYWdlQ2xpZW50XyA9IGZ1bmN0aW9uIChjbGllbnQsIG1lc3NhZ2UpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoaXMgcmV0dXJucyBhIHByb21pc2UgaW4gY2FzZSB0aGlzIEFQSSBpcyBhYnN0cmFjdGVkIGxhdGVyIG9uIHRvXHJcbiAgICAgICAgICAgICAgICAvLyBkbyBhZGRpdGlvbmFsIHdvcmtcclxuICAgICAgICAgICAgICAgIGlmICghY2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcIm5vLXdpbmRvdy1jbGllbnQtdG8tbXNnXCIgLyogTk9fV0lORE9XX0NMSUVOVF9UT19NU0cgKi8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2xpZW50LnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIElmIHRoZXJlIGlzIGN1cnJlbnRseSBhIHZpc2libGUgV2luZG93Q2xpZW50LCB0aGlzIG1ldGhvZCB3aWxsXHJcbiAgICAgKiByZXNvbHZlIHRvIHRydWUsIG90aGVyd2lzZSBmYWxzZS5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmhhc1Zpc2libGVDbGllbnRzXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGllbnRMaXN0O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBnZXRDbGllbnRMaXN0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50TGlzdCA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGNsaWVudExpc3Quc29tZShmdW5jdGlvbiAoY2xpZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgY2hyb21lLWV4dGVuc2lvbiBjbGllbnRzIGFzIHRoYXQgbWF0Y2hlcyB0aGUgYmFja2dyb3VuZCBwYWdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvZiBleHRlbnNpb25zLCB3aGljaCBhcmUgYWx3YXlzIGNvbnNpZGVyZWQgdmlzaWJsZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWNsaWVudC51cmwuc3RhcnRzV2l0aCgnY2hyb21lLWV4dGVuc2lvbjovLycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBtc2dQYXlsb2FkIFRoZSBkYXRhIGZyb20gdGhlIHB1c2ggZXZlbnQgdGhhdCBzaG91bGQgYmUgc2VudCB0byBhbGxcclxuICAgICAqIGF2YWlsYWJsZSBwYWdlcy5cclxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgbWVzc2FnZSBoYXMgYmVlbiBzZW50IHRvXHJcbiAgICAgKiBhbGwgV2luZG93Q2xpZW50cy5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLnNlbmRNZXNzYWdlVG9XaW5kb3dDbGllbnRzXyA9IGZ1bmN0aW9uIChtc2dQYXlsb2FkKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2xpZW50TGlzdCwgaW50ZXJuYWxNc2c7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGdldENsaWVudExpc3QoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRMaXN0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbE1zZyA9IGNyZWF0ZU5ld01zZyhNZXNzYWdlVHlwZS5QVVNIX01TR19SRUNFSVZFRCwgbXNnUGF5bG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGNsaWVudExpc3QubWFwKGZ1bmN0aW9uIChjbGllbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYXR0ZW1wdFRvTWVzc2FnZUNsaWVudF8oY2xpZW50LCBpbnRlcm5hbE1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIHJlZ2lzdGVyIHRoZSBkZWZhdWx0IHNlcnZpY2Ugd29ya2VyIGFuZCByZXR1cm4gdGhlIHJlZ2lzdHJhdGlvbi5cclxuICAgICAqIEByZXR1cm4gaGUgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHRvIGJlIHVzZWQgZm9yIHRoZSBwdXNoIHNlcnZpY2UuXHJcbiAgICAgKi9cclxuICAgIFN3Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0U1dSZWdpc3RyYXRpb25fID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHNlbGYucmVnaXN0cmF0aW9uXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBkZWZhdWx0IFZBUElEIGtleSBvciB0aGUgdWludDhhcnJheSB2ZXJzaW9uIG9mIHRoZVxyXG4gICAgICogcHVibGljIFZBUElEIGtleSBwcm92aWRlZCBieSB0aGUgZGV2ZWxvcGVyLlxyXG4gICAgICovXHJcbiAgICBTd0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFB1YmxpY1ZhcGlkS2V5XyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzd1JlZywgdmFwaWRLZXlGcm9tRGF0YWJhc2U7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0U1dSZWdpc3RyYXRpb25fKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dSZWcgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3dSZWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJzdy1yZWdpc3RyYXRpb24tZXhwZWN0ZWRcIiAvKiBTV19SRUdJU1RSQVRJT05fRVhQRUNURUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0VmFwaWREZXRhaWxzTW9kZWwoKS5nZXRWYXBpZEZyb21TV1Njb3BlKHN3UmVnLnNjb3BlKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXBpZEtleUZyb21EYXRhYmFzZSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhcGlkS2V5RnJvbURhdGFiYXNlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBERUZBVUxUX1BVQkxJQ19WQVBJRF9LRVldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB2YXBpZEtleUZyb21EYXRhYmFzZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTd0NvbnRyb2xsZXI7XHJcbn0oQmFzZUNvbnRyb2xsZXIpKTtcclxuZnVuY3Rpb24gZ2V0Q2xpZW50TGlzdCgpIHtcclxuICAgIHJldHVybiBzZWxmLmNsaWVudHMubWF0Y2hBbGwoe1xyXG4gICAgICAgIHR5cGU6ICd3aW5kb3cnLFxyXG4gICAgICAgIGluY2x1ZGVVbmNvbnRyb2xsZWQ6IHRydWVcclxuICAgICAgICAvLyBUUyBkb2Vzbid0IGtub3cgdGhhdCBcInR5cGU6ICd3aW5kb3cnXCIgbWVhbnMgaXQnbGwgcmV0dXJuIFdpbmRvd0NsaWVudFtdXHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVOZXdNc2cobXNnVHlwZSwgbXNnRGF0YSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBmaXJlYmFzZU1lc3NhZ2luZ1R5cGU6IG1zZ1R5cGUsXHJcbiAgICAgICAgZmlyZWJhc2VNZXNzYWdpbmdEYXRhOiBtc2dEYXRhXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHNsZWVwKG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG52YXIgREVGQVVMVF9TV19QQVRIID0gJy9maXJlYmFzZS1tZXNzYWdpbmctc3cuanMnO1xyXG52YXIgREVGQVVMVF9TV19TQ09QRSA9ICcvZmlyZWJhc2UtY2xvdWQtbWVzc2FnaW5nLXB1c2gtc2NvcGUnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxudmFyIFdpbmRvd0NvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoV2luZG93Q29udHJvbGxlciwgX3N1cGVyKTtcclxuICAgIC8qKlxyXG4gICAgICogQSBzZXJ2aWNlIHRoYXQgcHJvdmlkZXMgYSBNZXNzYWdpbmdTZXJ2aWNlIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBXaW5kb3dDb250cm9sbGVyKHNlcnZpY2VzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2VydmljZXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMucmVnaXN0cmF0aW9uVG9Vc2UgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLnB1YmxpY1ZhcGlkS2V5VG9Vc2UgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLm1lc3NhZ2VPYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZTogVW51c2VkIHZhcmlhYmxlIGVycm9yLCB0aGlzIGlzIG5vdCBpbXBsZW1lbnRlZCB5ZXQuXHJcbiAgICAgICAgX3RoaXMudG9rZW5SZWZyZXNoT2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLm9uTWVzc2FnZUludGVybmFsID0gY3JlYXRlU3Vic2NyaWJlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBfdGhpcy5tZXNzYWdlT2JzZXJ2ZXIgPSBvYnNlcnZlcjtcclxuICAgICAgICB9KTtcclxuICAgICAgICBfdGhpcy5vblRva2VuUmVmcmVzaEludGVybmFsID0gY3JlYXRlU3Vic2NyaWJlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICBfdGhpcy50b2tlblJlZnJlc2hPYnNlcnZlciA9IG9ic2VydmVyO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIF90aGlzLnNldHVwU1dNZXNzYWdlTGlzdGVuZXJfKCk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXF1ZXN0IHBlcm1pc3Npb24gaWYgaXQgaXMgbm90IGN1cnJlbnRseSBncmFudGVkXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiBSZXNvbHZlcyBpZiB0aGUgcGVybWlzc2lvbiB3YXMgZ3JhbnRlZCwgb3RoZXJ3aXNlIHJlamVjdHNcclxuICAgICAqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkgaW5zdGVhZC5cclxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob3RpZmljYXRpb24vcmVxdWVzdFBlcm1pc3Npb25cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUucmVxdWVzdFBlcm1pc3Npb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGVybWlzc2lvblJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uUmVzdWx0ID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVybWlzc2lvblJlc3VsdCA9PT0gJ2dyYW50ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGVybWlzc2lvblJlc3VsdCA9PT0gJ2RlbmllZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yRmFjdG9yeS5jcmVhdGUoXCJwZXJtaXNzaW9uLWJsb2NrZWRcIiAvKiBQRVJNSVNTSU9OX0JMT0NLRUQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcInBlcm1pc3Npb24tZGVmYXVsdFwiIC8qIFBFUk1JU1NJT05fREVGQVVMVCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBhbGxvd3MgYSBkZXZlbG9wZXIgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgc2VydmljZSB3b3JrZXIgYW5kXHJcbiAgICAgKiBpbnN0ZWFkIHVzZSBhIGN1c3RvbSBzZXJ2aWNlIHdvcmtlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcmVnaXN0cmF0aW9uIFRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gdGhhdCBzaG91bGQgYmUgdXNlZCB0b1xyXG4gICAgICogcmVjZWl2ZSB0aGUgcHVzaCBtZXNzYWdlcy5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUudXNlU2VydmljZVdvcmtlciA9IGZ1bmN0aW9uIChyZWdpc3RyYXRpb24pIHtcclxuICAgICAgICBpZiAoIShyZWdpc3RyYXRpb24gaW5zdGFuY2VvZiBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwic3ctcmVnaXN0cmF0aW9uLWV4cGVjdGVkXCIgLyogU1dfUkVHSVNUUkFUSU9OX0VYUEVDVEVEICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidXNlLXN3LWJlZm9yZS1nZXQtdG9rZW5cIiAvKiBVU0VfU1dfQkVGT1JFX0dFVF9UT0tFTiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UgPSByZWdpc3RyYXRpb247XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBhbGxvd3MgYSBkZXZlbG9wZXIgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgdmFwaWQga2V5XHJcbiAgICAgKiBhbmQgaW5zdGVhZCB1c2UgYSBjdXN0b20gVkFQSUQgcHVibGljIGtleS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHVibGljS2V5IEEgVVJMIHNhZmUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS51c2VQdWJsaWNWYXBpZEtleSA9IGZ1bmN0aW9uIChwdWJsaWNLZXkpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHB1YmxpY0tleSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImludmFsaWQtcHVibGljLXZhcGlkLWtleVwiIC8qIElOVkFMSURfUFVCTElDX1ZBUElEX0tFWSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnB1YmxpY1ZhcGlkS2V5VG9Vc2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidXNlLXB1YmxpYy1rZXktYmVmb3JlLWdldC10b2tlblwiIC8qIFVTRV9QVUJMSUNfS0VZX0JFRk9SRV9HRVRfVE9LRU4gKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGFyc2VkS2V5ID0gYmFzZTY0VG9BcnJheUJ1ZmZlcihwdWJsaWNLZXkpO1xyXG4gICAgICAgIGlmIChwYXJzZWRLZXkubGVuZ3RoICE9PSA2NSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwicHVibGljLXZhcGlkLWtleS1kZWNyeXB0aW9uLWZhaWxlZFwiIC8qIFBVQkxJQ19LRVlfREVDUllQVElPTl9GQUlMRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnB1YmxpY1ZhcGlkS2V5VG9Vc2UgPSBwYXJzZWRLZXk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZXhwb3J0XHJcbiAgICAgKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgQW4gb2JzZXJ2ZXIgb2JqZWN0IG9yIGEgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uXHJcbiAgICAgKiBtZXNzYWdlLlxyXG4gICAgICogQHBhcmFtIGVycm9yIEEgZnVuY3Rpb24gdHJpZ2dlcmVkIG9uIG1lc3NhZ2UgZXJyb3IuXHJcbiAgICAgKiBAcGFyYW0gY29tcGxldGVkIGZ1bmN0aW9uIHRyaWdnZXJlZCB3aGVuIHRoZSBvYnNlcnZlciBpcyByZW1vdmVkLlxyXG4gICAgICogQHJldHVybiBUaGUgdW5zdWJzY3JpYmUgZnVuY3Rpb24gZm9yIHRoZSBvYnNlcnZlci5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUub25NZXNzYWdlID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbk1lc3NhZ2VJbnRlcm5hbChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbk1lc3NhZ2VJbnRlcm5hbChuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG5leHRPck9ic2VydmVyIEFuIG9ic2VydmVyIG9iamVjdCBvciBhIGZ1bmN0aW9uIHRyaWdnZXJlZCBvbiB0b2tlblxyXG4gICAgICogcmVmcmVzaC5cclxuICAgICAqIEBwYXJhbSBlcnJvciBBIGZ1bmN0aW9uIHRyaWdnZXJlZCBvbiB0b2tlbiByZWZyZXNoIGVycm9yLlxyXG4gICAgICogQHBhcmFtIGNvbXBsZXRlZCBmdW5jdGlvbiB0cmlnZ2VyZWQgd2hlbiB0aGUgb2JzZXJ2ZXIgaXMgcmVtb3ZlZC5cclxuICAgICAqIEByZXR1cm4gVGhlIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIGZvciB0aGUgb2JzZXJ2ZXIuXHJcbiAgICAgKi9cclxuICAgIFdpbmRvd0NvbnRyb2xsZXIucHJvdG90eXBlLm9uVG9rZW5SZWZyZXNoID0gZnVuY3Rpb24gKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vblRva2VuUmVmcmVzaEludGVybmFsKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uVG9rZW5SZWZyZXNoSW50ZXJuYWwobmV4dE9yT2JzZXJ2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgcmVnaXN0cmF0aW9uLCB3YWl0IGZvciB0aGUgc2VydmljZSB3b3JrZXIgaXQgcmVsYXRlcyB0b1xyXG4gICAgICogYmVjb21lIGFjdGl2ZXJcclxuICAgICAqIEBwYXJhbSByZWdpc3RyYXRpb24gUmVnaXN0cmF0aW9uIHRvIHdhaXQgZm9yIHNlcnZpY2Ugd29ya2VyIHRvIGJlY29tZSBhY3RpdmVcclxuICAgICAqIEByZXR1cm4gV2FpdCBmb3Igc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIHRvIGJlY29tZSBhY3RpdmVcclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS53YWl0Rm9yUmVnaXN0cmF0aW9uVG9BY3RpdmF0ZV8gPSBmdW5jdGlvbiAocmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgICAgdmFyIHNlcnZpY2VXb3JrZXIgPSByZWdpc3RyYXRpb24uaW5zdGFsbGluZyB8fCByZWdpc3RyYXRpb24ud2FpdGluZyB8fCByZWdpc3RyYXRpb24uYWN0aXZlO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICghc2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHJhcmUgc2NlbmFyaW8gYnV0IGhhcyBvY2N1cmVkIGluIGZpcmVmb3hcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvckZhY3RvcnkuY3JlYXRlKFwibm8tc3ctaW4tcmVnXCIgLyogTk9fU1dfSU5fUkVHICovKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQmVjYXVzZSB0aGUgUHJvbWlzZSBmdW5jdGlvbiBpcyBjYWxsZWQgb24gbmV4dCB0aWNrIHRoZXJlIGlzIGFcclxuICAgICAgICAgICAgLy8gc21hbGwgY2hhbmNlIHRoYXQgdGhlIHdvcmtlciBiZWNhbWUgYWN0aXZlIG9yIHJlZHVuZGFudCBhbHJlYWR5LlxyXG4gICAgICAgICAgICBpZiAoc2VydmljZVdvcmtlci5zdGF0ZSA9PT0gJ2FjdGl2YXRlZCcpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVnaXN0cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VydmljZVdvcmtlci5zdGF0ZSA9PT0gJ3JlZHVuZGFudCcpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvckZhY3RvcnkuY3JlYXRlKFwic3ctcmVnLXJlZHVuZGFudFwiIC8qIFNXX1JFR19SRURVTkRBTlQgKi8pKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc3RhdGVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZXJ2aWNlV29ya2VyLnN0YXRlID09PSAnYWN0aXZhdGVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVnaXN0cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlcnZpY2VXb3JrZXIuc3RhdGUgPT09ICdyZWR1bmRhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yRmFjdG9yeS5jcmVhdGUoXCJzdy1yZWctcmVkdW5kYW50XCIgLyogU1dfUkVHX1JFRFVOREFOVCAqLykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIGVhcmx5IGFuZCB3YWl0IHRvIG5leHQgc3RhdGUgY2hhbmdlXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VydmljZVdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCdzdGF0ZWNoYW5nZScsIHN0YXRlQ2hhbmdlTGlzdGVuZXIpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXRlY2hhbmdlJywgc3RhdGVDaGFuZ2VMaXN0ZW5lcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHdpbGwgcmVnaXN0ZXIgdGhlIGRlZmF1bHQgc2VydmljZSB3b3JrZXIgYW5kIHJldHVybiB0aGUgcmVnaXN0cmF0aW9uXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gdG8gYmUgdXNlZCBmb3IgdGhlIHB1c2ggc2VydmljZS5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0U1dSZWdpc3RyYXRpb25fID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2FpdEZvclJlZ2lzdHJhdGlvblRvQWN0aXZhdGVfKHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBNYWtlIHRoZSByZWdpc3RyYXRpb24gbnVsbCBzbyB3ZSBrbm93IHVzZVNlcnZpY2VXb3JrZXIgd2lsbCBub3RcclxuICAgICAgICAvLyB1c2UgYSBuZXcgc2VydmljZSB3b3JrZXIgYXMgcmVnaXN0cmF0aW9uVG9Vc2UgaXMgbm8gbG9uZ2VyIHVuZGVmaW5lZFxyXG4gICAgICAgIHRoaXMucmVnaXN0cmF0aW9uVG9Vc2UgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlclxyXG4gICAgICAgICAgICAucmVnaXN0ZXIoREVGQVVMVF9TV19QQVRILCB7XHJcbiAgICAgICAgICAgIHNjb3BlOiBERUZBVUxUX1NXX1NDT1BFXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5LmNyZWF0ZShcImZhaWxlZC1zZXJ2aWNld29ya2VyLXJlZ2lzdHJhdGlvblwiIC8qIEZBSUxFRF9ERUZBVUxUX1JFR0lTVFJBVElPTiAqLywge1xyXG4gICAgICAgICAgICAgICAgYnJvd3NlckVycm9yTWVzc2FnZTogZXJyLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMud2FpdEZvclJlZ2lzdHJhdGlvblRvQWN0aXZhdGVfKHJlZ2lzdHJhdGlvbikudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5yZWdpc3RyYXRpb25Ub1VzZSA9IHJlZ2lzdHJhdGlvbjtcclxuICAgICAgICAgICAgICAgIC8vIFdlIHVwZGF0ZSBhZnRlciBhY3RpdmF0aW9uIGR1ZSB0byBhbiBpc3N1ZSB3aXRoIEZpcmVmb3ggdjQ5IHdoZXJlXHJcbiAgICAgICAgICAgICAgICAvLyBhIHJhY2UgY29uZGl0aW9uIG9jY2Fzc2lvbmFsbHkgY2F1c2VzIHRoZSBzZXJ2aWNlIHdvcmtlciB0byBub3RcclxuICAgICAgICAgICAgICAgIC8vIGluc3RhbGxcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbi51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWdpc3RyYXRpb247XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyB3aWxsIHJldHVybiB0aGUgZGVmYXVsdCBWQVBJRCBrZXkgb3IgdGhlIHVpbnQ4YXJyYXkgdmVyc2lvbiBvZiB0aGVcclxuICAgICAqIHB1YmxpYyBWQVBJRCBrZXkgcHJvdmlkZWQgYnkgdGhlIGRldmVsb3Blci5cclxuICAgICAqL1xyXG4gICAgV2luZG93Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0UHVibGljVmFwaWRLZXlfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHVibGljVmFwaWRLZXlUb1VzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnB1YmxpY1ZhcGlkS2V5VG9Vc2VdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIERFRkFVTFRfUFVCTElDX1ZBUElEX0tFWV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBzZXQgdXAgYSBtZXNzYWdlIGxpc3RlbmVyIHRvIGhhbmRsZVxyXG4gICAgICogZXZlbnRzIGZyb20gdGhlIHNlcnZpY2Ugd29ya2VyIHRoYXQgc2hvdWxkIHRyaWdnZXJcclxuICAgICAqIGV2ZW50cyBpbiB0aGUgcGFnZS5cclxuICAgICAqL1xyXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gICAgLy8gVE9ETzogTWFrZSBwcml2YXRlXHJcbiAgICBXaW5kb3dDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cFNXTWVzc2FnZUxpc3RlbmVyXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9hLCBmaXJlYmFzZU1lc3NhZ2luZ1R5cGUsIGZpcmViYXNlTWVzc2FnaW5nRGF0YSwgZGF0YSwgZXZlbnRUeXBlLCBhbmFseXRpY3M7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQuZGF0YSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWV2ZW50LmRhdGEuZmlyZWJhc2VNZXNzYWdpbmdUeXBlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZXZlbnQuZGF0YS5maXJlYmFzZU1lc3NhZ2luZ0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdCBhIG1lc3NhZ2UgZnJvbSBGQ01cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IGV2ZW50LmRhdGEsIGZpcmViYXNlTWVzc2FnaW5nVHlwZSA9IF9hLmZpcmViYXNlTWVzc2FnaW5nVHlwZSwgZmlyZWJhc2VNZXNzYWdpbmdEYXRhID0gX2EuZmlyZWJhc2VNZXNzYWdpbmdEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlT2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZU9ic2VydmVyLm5leHQoZmlyZWJhc2VNZXNzYWdpbmdEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZmlyZWJhc2VNZXNzYWdpbmdEYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGRhdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZOX0NBTVBBSUdOX0lEIGluIGRhdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbRk5fQ0FNUEFJR05fQU5BTFlUSUNTX0VOQUJMRURdID09PSAnMScpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gZ2V0RXZlbnRUeXBlKGZpcmViYXNlTWVzc2FnaW5nVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc2VydmljZXMuYW5hbHl0aWNzUHJvdmlkZXIuZ2V0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5hbHl0aWNzID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3MubG9nRXZlbnQoZXZlbnRUeXBlLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfbmFtZTogZGF0YVtGTl9DQU1QQUlHTl9OQU1FXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfaWQ6IGRhdGFbRk5fQ0FNUEFJR05fSURdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV90aW1lOiBkYXRhW0ZOX0NBTVBBSUdOX1RJTUVdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZV9kZXZpY2VfdGltZTogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIGNhbWVsY2FzZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9LCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdpbmRvd0NvbnRyb2xsZXI7XHJcbn0oQmFzZUNvbnRyb2xsZXIpKTtcclxuZnVuY3Rpb24gZ2V0RXZlbnRUeXBlKG1lc3NhZ2VUeXBlKSB7XHJcbiAgICBzd2l0Y2ggKG1lc3NhZ2VUeXBlKSB7XHJcbiAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5OT1RJRklDQVRJT05fQ0xJQ0tFRDpcclxuICAgICAgICAgICAgcmV0dXJuICdub3RpZmljYXRpb25fb3Blbic7XHJcbiAgICAgICAgY2FzZSBNZXNzYWdlVHlwZS5QVVNIX01TR19SRUNFSVZFRDpcclxuICAgICAgICAgICAgcmV0dXJuICdub3RpZmljYXRpb25fZm9yZWdyb3VuZCc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XHJcbiAgICB9XHJcbn1cblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcbnZhciB2ZXJzaW9uID0gXCIwLjYuMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJNZXNzYWdpbmcoaW5zdGFuY2UpIHtcclxuICAgIHZhciBtZXNzYWdpbmdOYW1lID0gJ21lc3NhZ2luZyc7XHJcbiAgICB2YXIgZmFjdG9yeU1ldGhvZCA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcclxuICAgICAgICAvKiBEZXBlbmRlbmNpZXMgKi9cclxuICAgICAgICB2YXIgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB2YXIgaW5zdGFsbGF0aW9ucyA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignaW5zdGFsbGF0aW9ucycpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHZhciBhbmFseXRpY3NQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYW5hbHl0aWNzLWludGVybmFsJyk7XHJcbiAgICAgICAgdmFyIGZpcmViYXNlU2VydmljZXMgPSB7XHJcbiAgICAgICAgICAgIGFwcDogYXBwLFxyXG4gICAgICAgICAgICBpbnN0YWxsYXRpb25zOiBpbnN0YWxsYXRpb25zLFxyXG4gICAgICAgICAgICBhbmFseXRpY3NQcm92aWRlcjogYW5hbHl0aWNzUHJvdmlkZXJcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghaXNTdXBwb3J0ZWQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvckZhY3RvcnkuY3JlYXRlKFwidW5zdXBwb3J0ZWQtYnJvd3NlclwiIC8qIFVOU1VQUE9SVEVEX0JST1dTRVIgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZiAmJiAnU2VydmljZVdvcmtlckdsb2JhbFNjb3BlJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIC8vIFJ1bm5pbmcgaW4gU2VydmljZVdvcmtlciBjb250ZXh0XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3dDb250cm9sbGVyKGZpcmViYXNlU2VydmljZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQXNzdW1lIHdlIGFyZSBpbiB0aGUgd2luZG93IGNvbnRleHQuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgV2luZG93Q29udHJvbGxlcihmaXJlYmFzZVNlcnZpY2VzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdmFyIG5hbWVzcGFjZUV4cG9ydHMgPSB7XHJcbiAgICAgICAgaXNTdXBwb3J0ZWQ6IGlzU3VwcG9ydGVkXHJcbiAgICB9O1xyXG4gICAgaW5zdGFuY2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChtZXNzYWdpbmdOYW1lLCBmYWN0b3J5TWV0aG9kLCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykuc2V0U2VydmljZVByb3BzKG5hbWVzcGFjZUV4cG9ydHMpKTtcclxuICAgIGluc3RhbmNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxufVxyXG5yZWdpc3Rlck1lc3NhZ2luZyhmaXJlYmFzZSk7XHJcbmZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xyXG4gICAgaWYgKHNlbGYgJiYgJ1NlcnZpY2VXb3JrZXJHbG9iYWxTY29wZScgaW4gc2VsZikge1xyXG4gICAgICAgIC8vIFJ1bm5pbmcgaW4gU2VydmljZVdvcmtlciBjb250ZXh0XHJcbiAgICAgICAgcmV0dXJuIGlzU1dDb250cm9sbGVyU3VwcG9ydGVkKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBBc3N1bWUgd2UgYXJlIGluIHRoZSB3aW5kb3cgY29udGV4dC5cclxuICAgICAgICByZXR1cm4gaXNXaW5kb3dDb250cm9sbGVyU3VwcG9ydGVkKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyB0byBzZWUgaWYgdGhlIHJlcXVpcmVkIEFQSXMgZXhpc3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1dpbmRvd0NvbnRyb2xsZXJTdXBwb3J0ZWQoKSB7XHJcbiAgICByZXR1cm4gKG5hdmlnYXRvci5jb29raWVFbmFibGVkICYmXHJcbiAgICAgICAgJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJlxyXG4gICAgICAgICdQdXNoTWFuYWdlcicgaW4gd2luZG93ICYmXHJcbiAgICAgICAgJ05vdGlmaWNhdGlvbicgaW4gd2luZG93ICYmXHJcbiAgICAgICAgJ2ZldGNoJyBpbiB3aW5kb3cgJiZcclxuICAgICAgICBTZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSgnc2hvd05vdGlmaWNhdGlvbicpICYmXHJcbiAgICAgICAgUHVzaFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ2dldEtleScpKTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgcmVxdWlyZWQgQVBJcyBleGlzdCB3aXRoaW4gU1cgQ29udGV4dC5cclxuICovXHJcbmZ1bmN0aW9uIGlzU1dDb250cm9sbGVyU3VwcG9ydGVkKCkge1xyXG4gICAgcmV0dXJuICgnUHVzaE1hbmFnZXInIGluIHNlbGYgJiZcclxuICAgICAgICAnTm90aWZpY2F0aW9uJyBpbiBzZWxmICYmXHJcbiAgICAgICAgU2VydmljZVdvcmtlclJlZ2lzdHJhdGlvbi5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoJ3Nob3dOb3RpZmljYXRpb24nKSAmJlxyXG4gICAgICAgIFB1c2hTdWJzY3JpcHRpb24ucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdnZXRLZXknKSk7XHJcbn1cblxuZXhwb3J0IHsgaXNTdXBwb3J0ZWQsIHJlZ2lzdGVyTWVzc2FnaW5nIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCIvLyBGaXJlYmFzZSBBcHAgKHRoZSBjb3JlIEZpcmViYXNlIFNESykgaXMgYWx3YXlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGxpc3RlZCBmaXJzdC5cclxuaW1wb3J0ICogYXMgZmlyZWJhc2UgZnJvbSBcImZpcmViYXNlL2FwcFwiO1xyXG5cclxuLy8gVGhlIEZpcmViYXNlIFNESyBmb3IgQW5hbHl0aWNzLlxyXG5pbXBvcnQgXCJmaXJlYmFzZS9hbmFseXRpY3NcIjtcclxuXHJcbi8vIFRoZSBGaXJlYmFzZSBwcm9kdWN0cyB0aGF0IGFyZSB1c2VkIGZvciBtZXNzYWdpbmcuXHJcbmltcG9ydCBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xyXG5pbXBvcnQgXCJmaXJlYmFzZS9tZXNzYWdpbmdcIjtcclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqIEZJUkVCQVNFIElOSVRJQUxJWkFUSU9OICoqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbi8vIFRoZSBGaXJlYmFzZSBjb25maWd1cmF0aW9uIGZvciB0aGUgYXBwLlxyXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuICBhcGlLZXk6IFwiQUl6YVN5QjlLQzlRM056TXQ3YjZUc3BOY0t4cVdxbnp6UEx2ZEZnXCIsXHJcbiAgYXV0aERvbWFpbjogXCJ0ZXN0Z2Rwcm9qZWN0LTE1NzAwMzY0Mzk5MzEuZmlyZWJhc2VhcHAuY29tXCIsXHJcbiAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly90ZXN0Z2Rwcm9qZWN0LTE1NzAwMzY0Mzk5MzEuZmlyZWJhc2Vpby5jb21cIixcclxuICBwcm9qZWN0SWQ6IFwidGVzdGdkcHJvamVjdC0xNTcwMDM2NDM5OTMxXCIsXHJcbiAgc3RvcmFnZUJ1Y2tldDogXCJ0ZXN0Z2Rwcm9qZWN0LTE1NzAwMzY0Mzk5MzEuYXBwc3BvdC5jb21cIixcclxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCIxOTk4NDQ0NTM2NDNcIixcclxuICBhcHBJZDogXCIxOjE5OTg0NDQ1MzY0Mzp3ZWI6NGFhN2JhOTdkMWFlMmU0MjhiNTYwZVwiXHJcbn07XHJcblxyXG4vLyBJbml0aWFsaXphdGlvbiBvZiBGaXJlYmFzZS5cclxuZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqIEZJUkVCQVNFIENMT1VEIE1FU1NBR0lORyAqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIE1hbmFnZXMgdGhlIGNyZWF0aW9uIG9mIGRldmljZSB0b2tlbnMgdG8gcmVjZWl2ZSBwdXNoIG5vdGlmaWNhdGlvbnMuXHJcbiovXHJcbmV4cG9ydCBjbGFzcyBNZXNzYWdpbmcge1xyXG4gIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgLy8gUmV0cmlldmUgdGhlIEZpcmViYXNlIE1lc3NhZ2luZyBvYmplY3QuXHJcbiAgICB0aGlzLm1lc3NhZ2luZyA9IGZpcmViYXNlLm1lc3NhZ2luZygpO1xyXG5cclxuICAgIC8vIEhhbmRsZSBpbmNvbWluZyBtZXNzYWdlcyB3aGVuIHRoZSBhcHAgaXMgaW4gdGhlIGZvcmVncm91bmQgLyBmb2N1cy5cclxuICAgIHRoaXMubWVzc2FnaW5nLm9uTWVzc2FnZShwYXlsb2FkID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2UgcmVjZWl2ZWQuICcsIHBheWxvYWQpO1xyXG4gICAgICBjb25zdCBkYXRhID0gcGF5bG9hZC5kYXRhO1xyXG4gICAgICBhcHAubm90aWZpY2F0aW9uc01hbmFnZXIuY3JlYXRlTm90aWZpY2FjdGlvbihkYXRhKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENhbGxiYWNrIGZpcmVkIGlmIEluc3RhbmNlIElEIHRva2VuIGlzIHVwZGF0ZWQuXHJcbiAgICB0aGlzLm1lc3NhZ2luZy5vblRva2VuUmVmcmVzaCgoKSA9PiB7XHJcbiAgICAgIHRoaXMubWVzc2FnaW5nLmdldFRva2VuKCkudGhlbihyZWZyZXNoZWRUb2tlbiA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0ZDTSB0b2tlbiByZWZyZXNoZWQ6JywgcmVmcmVzaGVkVG9rZW4pO1xyXG4gICAgICAgIC8vIFNlbmQgdGhlIG5ldyBEZXZpY2UgVG9rZW4gdG8gdGhlIGRhdGFzdG9yZS5cclxuICAgICAgICBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCdmY21Ub2tlbnMnKS5kb2MocmVmcmVzaGVkVG9rZW4pXHJcbiAgICAgICAgICAuc2V0KHsgZW1haWw6IGFwcC51c2VySW5mby5lbWFpbEFkZHJlc3MgfSk7XHJcbiAgICAgIH0pLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1VuYWJsZSB0byByZXRyaWV2ZSByZWZyZXNoZWQgdG9rZW4gJywgZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBdXhpbGlhcnkgZnVuY3Rpb24gdG8gdmlldyB0aGUgZGV2aWNlIHRva2VuIGZvciBGQ00uXHJcbiAgICAgKi9cclxuICAgIHdpbmRvdy5nZXRNZXNzYWdpbmdUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgZmlyZWJhc2UubWVzc2FnaW5nKCkuZ2V0VG9rZW4oKVxyXG4gICAgICAgIC50aGVuKHRva2VuID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHRva2VuKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTYXZlcyB0aGUgRkNNIHRva2VuIHRvIHRoZSBkYXRhc3RvcmUgYW5kIHNlc3Npb24gc3RvcmFnZS5cclxuICAgICAqIElmIG5vdGlmaWNhdGlvbiBwZXJtaXNzaW9ucyBoYXZlIG5vdCBiZWVuIGdyYW50ZWQgaXQgYXNrcyBmb3IgdGhlbS5cclxuICAgICAqL1xyXG4gICAgd2luZG93LnNhdmVNZXNzYWdpbmdEZXZpY2VUb2tlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdkZXZpY2VUb2tlbicpKSB7XHJcbiAgICAgICAgZmlyZWJhc2UubWVzc2FnaW5nKCkuZ2V0VG9rZW4oKS50aGVuKHRva2VuID0+IHtcclxuICAgICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRkNNIHRva2VuIGdlbmVyYXRlZDonLCB0b2tlbik7XHJcbiAgICAgICAgICAgIC8vIFNhdmluZyB0aGUgRkNNIHRva2VuIGluIEZpcmVzdG9yZS5cclxuICAgICAgICAgICAgZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbignZmNtVG9rZW5zJykuZG9jKHRva2VuKVxyXG4gICAgICAgICAgICAgIC5zZXQoeyBlbWFpbDogYXBwLnVzZXJJbmZvLmVtYWlsQWRkcmVzcyB9KTtcclxuICAgICAgICAgICAgLy8gU2F2aW5nIHRva2VuIGluIFNlc3Npb24gU3RvcmFnZS5cclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZGV2aWNlVG9rZW4nLCB0b2tlbik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBOZWVkIHRvIHJlcXVlc3QgcGVybWlzc2lvbnMgdG8gc2hvdyBub3RpZmljYXRpb25zLlxyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3ROb3RpZmljYXRpb25zUGVybWlzc2lvbnMoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGdldCBGQ00gdG9rZW4uJywgZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBSZXF1ZXN0cyBwZXJtaXNzaW9uIHRvIHNob3cgbm90aWZpY2F0aW9ucy5cclxuICAgKi9cclxuICByZXF1ZXN0Tm90aWZpY2F0aW9uc1Blcm1pc3Npb25zKCkge1xyXG4gICAgY29uc29sZS5sb2coJ1JlcXVlc3Rpbmcgbm90aWZpY2F0aW9ucyBwZXJtaXNzaW9uLi4uJyk7XHJcbiAgICBmaXJlYmFzZS5tZXNzYWdpbmcoKS5yZXF1ZXN0UGVybWlzc2lvbigpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnTm90aWZpY2F0aW9uIHBlcm1pc3Npb24gZ3JhbnRlZC4nKTtcclxuICAgICAgd2luZG93LnNhdmVNZXNzYWdpbmdEZXZpY2VUb2tlbigpO1xyXG4gICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGdldCBwZXJtaXNzaW9uIHRvIG5vdGlmeTonLCBlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gRXF1aXZhbGVudCB0byB0aGUgcHJldmlvdXMgYnV0IHdpdGhvdXQgRmlyZWJhc2UuXHJcbiAgLy8gZnVuY3Rpb24gcmVxdWVzdFBlcm1pc3Npb24oKSB7XHJcbiAgLy8gICBjb25zb2xlLmxvZygnUmVxdWVzdGluZyBwZXJtaXNzaW9uLi4uJyk7XHJcbiAgLy8gICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKS50aGVuKHBlcm1pc3Npb24gPT4ge1xyXG4gIC8vICAgICBpZiAocGVybWlzc2lvbiA9PT0gJ2dyYW50ZWQnKSB7XHJcbiAgLy8gICAgICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbiBwZXJtaXNzaW9uIGdyYW50ZWQuJyk7XHJcbiAgLy8gICAgICAgLy8gVE9ETzogUmV0cmlldmUgYW4gSW5zdGFuY2UgSUQgdG9rZW4gZm9yIHVzZSB3aXRoIEZDTS5cclxuICAvLyAgICAgICAvLyBJZiBhbiBhcHAgaGFzIGJlZW4gZ3JhbnRlZCBub3RpZmljYXRpb24gcGVybWlzc2lvbiBpdCBjYW4gdXBkYXRlIGl0cyBVSSByZWZsZWN0aW5nIHRoaXMuXHJcbiAgLy8gICAgICAgLy8gcmVzZXRVSSgpO1xyXG4gIC8vICAgICB9IGVsc2Uge1xyXG4gIC8vICAgICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gZ2V0IHBlcm1pc3Npb24gdG8gbm90aWZ5LicpO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICB9KTtcclxuICAvLyB9ICBcclxuXHJcbn0iLCJpbXBvcnQgJy4vc3R5bGVzL3N0eWxlcy5zY3NzJztcclxuaW1wb3J0IHsgQXBwbGljYXRpb24gfSBmcm9tICcuL2FwcCc7XHJcbmltcG9ydCBHZW5lcmljcyBmcm9tICcuL2dlbmVyaWNzJztcclxuaW1wb3J0IEFQSSBmcm9tICcuL2FwaSc7XHJcbmltcG9ydCB7IE1lc3NhZ2luZyB9IGZyb20gJy4vbWVzc2FnaW5nJztcclxuaW1wb3J0IHsgRHJhd2luZyB9IGZyb20gJy4vZHJhd2luZyc7XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKiBUSEUgR0xPQkFMIE9CSkVDVCAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XHJcbiAgICB0aGVyZUlzTWVzc2FnaW5nOiBib29sZWFuO1xyXG4gICAgZ2V0Q3VycmVudFVzZXIoKTogZ2FwaS5jbGllbnQuZHJpdmUuVXNlcjtcclxuICAgIHNhdmVNZXNzYWdpbmdEZXZpY2VUb2tlbigpOiB2b2lkO1xyXG4gIH1cclxufVxyXG5cclxuLy8gZGVjbGFyZSBnbG9iYWwge1xyXG4vLyAgIG5hbWVzcGFjZSBOb2RlSlMge1xyXG4vLyAgICAgaW50ZXJmYWNlIFByb2Nlc3NFbnYge1xyXG4vLyAgICAgICAvLyBQUk9DRVNTOiBzdHJpbmc7XHJcbi8vICAgICB9XHJcbi8vICAgfVxyXG4vLyB9XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKiBUSEUgT05MWSBJTlNUQU5DRSBPRiBUSEUgQVBQICoqKioqKioqKioqKioqKioqKiovXHJcblxyXG5jb25zdCBBcHAgPSBuZXcgQXBwbGljYXRpb24oKTtcclxuXHJcblxyXG4vKioqKioqIFRIRSBPTkxZIElOU1RBTkNFIE9GIFRIRSBNRVNTQUdJTkcgTE9HSUMgQlkgRklSRUJBU0UgKioqKioqKi9cclxuXHJcbmNvbnN0IE1zZyA9IG5ldyBNZXNzYWdpbmcoQXBwKTtcclxuXHJcbi8vIFNldCB0byB0cnVlIG9ubHkgaWYgdGhlIE1lc3NhZ2luZyBpbnN0YW5jZSBpcyBjcmVhdGVkLlxyXG53aW5kb3cudGhlcmVJc01lc3NhZ2luZyA9IHRydWU7XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKiogU0VSVklDRSBXT1JLRVIgUkVHSVNUUkFUSU9OICoqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vLyBUT0RPOiBEbyB0aGlzIG9ubHkgaWYgdGhlIHVzZXIgYXV0aGVudGljYXRlcz9cclxuaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCcvc2VydmljZS13b3JrZXIuanMnKVxyXG4gICAgICAudGhlbihyZWcgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlIHdvcmtlciByZWdpc3RlcmVkLicsIHJlZyk7XHJcbiAgICAgICAgLy8gRmlyZWJhc2UgbWVzc2FnaW5nIHJlcXVpcmVzIHRvIHVzZSBhIHNlcnZpY2Ugd29ya2VyLlxyXG4gICAgICAgIGlmICh3aW5kb3cudGhlcmVJc01lc3NhZ2luZykgTXNnLm1lc3NhZ2luZy51c2VTZXJ2aWNlV29ya2VyKHJlZyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlcnZpY2UgV29ya2VyIEVycm9yJywgZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKiBHTE9CQUwgTUVUSE9EUyAqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbndpbmRvdy5nZXRDdXJyZW50VXNlciA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gQXBwLnVzZXJJbmZvO1xyXG59XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKiBCUk9BRENBU1QgQ0hBTk5FTCAqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIFRvIGNvbXVuaWNhdGUgd2l0aCB0aGUgU2VydmljZSBXb3JrZXIgYW5kIHZpY2V2ZXJzYS5cclxuKi9cclxuXHJcbmlmICh3aW5kb3cuQnJvYWRjYXN0Q2hhbm5lbCkge1xyXG4gIGNvbnN0IGJyb2FkQ2FzdENoYW5uZWwgPSBuZXcgQnJvYWRjYXN0Q2hhbm5lbCgnYXBwLWNoYW5uZWwnKTtcclxuXHJcbiAgYnJvYWRDYXN0Q2hhbm5lbC5vbm1lc3NhZ2UgPSBlID0+IHtcclxuICAgIGlmIChlLmRhdGEuYWN0aW9uID09PSAnbmV3Tm90aWZpY2F0aW9uJykge1xyXG4gICAgICBjb25zb2xlLmxvZygnQWRkIG5vdGlmaWNhdGlvbiB0byB0aGUgbGlzdC4nKTtcclxuICAgICAgQXBwLm5vdGlmaWNhdGlvbnNNYW5hZ2VyLmNyZWF0ZU5vdGlmaWNhY3Rpb24oZS5kYXRhLmNvbnRlbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcbn0gZWxzZSB7XHJcbiAgY29uc29sZS53YXJuKCdUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBCcm9hZGNhc3RDaGFubmVsLicpO1xyXG59XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKiogVklFVyBTQU1QTEUgUFJPSkVDVCBPUFRJT04gKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5jb25zdCBzYW1wbGVQcm9qZWN0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhbXBsZVByb2plY3RCdG4nKTtcclxuXHJcbnNhbXBsZVByb2plY3RCdG4ub25jbGljayA9ICgpID0+IHtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdHNMaXN0QnRuJykub25jbGljayA9IG51bGw7XHJcbiAgQXBwLnNhdmVCdG4uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gIEFwcC5wcm9qZWN0c0xpc3RCdG4uY2xhc3NMaXN0LmFkZCgnbG9ja2VkJyk7XHJcbiAgLy8gVE9ETzogQ2hhbmdlIHRoZSBTaWduIE91dCBidXR0b24gZm9yIHRoZSBMb2cgSW4gYnV0dG9uIG9uIHRoZSBzaWRlIG1lbnUuXHJcbiAgQXBwLnN0YXJ0KCcxRDRFU1k5N3pLdkpvWjFCV2VMV1lxOEd4aFFOV3NYcGcnKTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqIEdPT0dMRSBEUklWRSBBVVRIRU5USUNBVElPTiAqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLy8gT0F1dGggMi4wIENsaWVudCBJRCBmb3IgR29vZ2xlIEFQSXMuXHJcbmNvbnN0IENMSUVOVF9JRCA9IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQ7XHJcblxyXG4vLyBBUEkga2V5IGZvciBHb29nbGUgRHJpdmUuXHJcbmxldCBBUElfS0VZOiBzdHJpbmc7XHJcbmlmIChwcm9jZXNzLmVudi5QUk9DRVNTID09PSAncHJvZHVjdGlvbicpIHsgLy8gVE9ETyB3b3JrID8gb3IgbGVhdmUganVzdCBQUk9DRVNTID9cclxuICBBUElfS0VZID0gcHJvY2Vzcy5lbnYuR09PR0xFX0FQSV9LRVlfUFJPRDtcclxufSBlbHNlIHtcclxuICBBUElfS0VZID0gcHJvY2Vzcy5lbnYuR09PR0xFX0FQSV9LRVlfREVWO1xyXG59XHJcblxyXG4vLyBBcnJheSBvZiBBUEkgZGlzY292ZXJ5IGRvYyBVUkxzIGZvciBBUElzIHVzZWQgYnkgdGhlIGFwcC5cclxuY29uc3QgRElTQ09WRVJZX0RPQ1MgPSBbXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kaXNjb3ZlcnkvdjEvYXBpcy9kcml2ZS92My9yZXN0XCJdO1xyXG5cclxuLy8gQXV0aG9yaXphdGlvbiBzY29wZXMgcmVxdWlyZWQgYnkgdGhlIEFQSTsgbXVsdGlwbGUgc2NvcGVzIGNhbiBiZSBpbmNsdWRlZCwgc2VwYXJhdGVkIGJ5IHNwYWNlcy5cclxuY29uc3QgU0NPUEVTID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlXCI7XHJcblxyXG5jb25zdCBhdXRob3JpemVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0aG9yaXplQnRuJyk7XHJcbmNvbnN0IHNpZ25vdXRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnbm91dEJ0bicpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiAgT24gbG9hZCwgY2FsbGVkIHRvIGxvYWQgdGhlIGF1dGgyIGxpYnJhcnkgYW5kIEFQSSBjbGllbnQgbGlicmFyeS5cclxuICovXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xyXG4gIHNjcmlwdC5kZWZlciA9IHRydWU7XHJcbiAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IGhhbmRsZUNsaWVudExvYWQoKTtcclxuICBzY3JpcHQuc3JjID0gJ2h0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2FwaS5qcyc7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbn0pKCk7XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2xpZW50TG9hZCgpIHtcclxuICBnYXBpLmxvYWQoJ2NsaWVudDphdXRoMicsIGluaXRDbGllbnQpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqICBJbml0aWFsaXplcyB0aGUgQVBJIGNsaWVudCBsaWJyYXJ5IGFuZCBzZXRzIHVwIHNpZ24taW4gc3RhdGUgbGlzdGVuZXJzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW5pdENsaWVudCgpIHtcclxuICBnYXBpLmNsaWVudC5pbml0KHtcclxuICAgIGFwaUtleTogQVBJX0tFWSxcclxuICAgIGNsaWVudElkOiBDTElFTlRfSUQsXHJcbiAgICBkaXNjb3ZlcnlEb2NzOiBESVNDT1ZFUllfRE9DUyxcclxuICAgIHNjb3BlOiBTQ09QRVNcclxuICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIExpc3RlbiBmb3Igc2lnbi1pbiBzdGF0ZSBjaGFuZ2VzLlxyXG4gICAgZ2FwaS5hdXRoMi5nZXRBdXRoSW5zdGFuY2UoKS5pc1NpZ25lZEluLmxpc3Rlbih1cGRhdGVTaWduaW5TdGF0dXMpO1xyXG5cclxuICAgIC8vIEhhbmRsZSB0aGUgaW5pdGlhbCBzaWduLWluIHN0YXRlLlxyXG4gICAgdXBkYXRlU2lnbmluU3RhdHVzKGdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKCkuaXNTaWduZWRJbi5nZXQoKSk7XHJcbiAgICBhdXRob3JpemVCdXR0b24ub25jbGljayA9IGhhbmRsZUF1dGhDbGljaztcclxuICAgIHNpZ25vdXRCdXR0b24ub25jbGljayA9IGhhbmRsZVNpZ25vdXRDbGljaztcclxuICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yLCBudWxsLCAyKSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogIENhbGxlZCB3aGVuIHRoZSBzaWduZWQgaW4gc3RhdHVzIGNoYW5nZXMsIHRvIHVwZGF0ZSB0aGUgVUlcclxuICogIGFwcHJvcHJpYXRlbHkuIEFmdGVyIGEgc2lnbi1pbiwgdGhlIEFQSSBpcyBjYWxsZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVTaWduaW5TdGF0dXMoaXNTaWduZWRJbjogYm9vbGVhbikge1xyXG4gIGlmIChpc1NpZ25lZEluKSB7XHJcbiAgICBjb25zb2xlLmxvZygnQXV0aG9yaXplZC4nKTtcclxuICAgIC8vIEdldCB0aGUgVVJMIHBhcmFtcy5cclxuICAgIGNvbnN0IHByb2plY3RJZCA9IEdlbmVyaWNzLmdldFVybFBhcmFtcyh3aW5kb3cubG9jYXRpb24uaHJlZikuaWQ7XHJcbiAgICAvLyBIaWRlIHRoZSBsb2dpbiBkaWFsb2cgaW4gY2FzZSBpdCB3YXMgdmlzaWJsZS5cclxuICAgIGlmIChBcHAubW9kYWxEaWFsb2dDb250ZW50LmZpcnN0RWxlbWVudENoaWxkKSB7XHJcbiAgICAgIEFwcC5jbG9zZU1vZGFsRGlhbG9nKCk7XHJcbiAgICB9XHJcbiAgICAvLyBNYW5hZ2UgdGhlIGxvZ2dlZCB1c2VyIHBlcnNvbmFsIGluZm8uXHJcbiAgICBBcHAuc2V0VXNlckluZm8oKTtcclxuICAgIC8vIElmIGEgcHJvamVjdCBpZCBpcyBwcm92aWRlZCB0byBzdGFydCgpIG1ldGhvZCB0aGUgYXBwIHdpbGwgc3RhcnQgZnJvbSB0aGUgcHJvamVjdCB2aWV3LlxyXG4gICAgQXBwLnN0YXJ0KHByb2plY3RJZCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKCdOb3QgYXV0aG9yaXplZCcpO1xyXG4gICAgc2hvd0xvZ2luRGlhbG9nKCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqICBTaWduIGluIHRoZSB1c2VyIHVwb24gYnV0dG9uIGNsaWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlQXV0aENsaWNrKCkge1xyXG4gIGdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKCkuc2lnbkluKCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogIFNpZ24gb3V0IHRoZSB1c2VyIHVwb24gYnV0dG9uIGNsaWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlU2lnbm91dENsaWNrKCkge1xyXG4gIGdhcGkuYXV0aDIuZ2V0QXV0aEluc3RhbmNlKCkuc2lnbk91dCgpO1xyXG59XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqIExPR0lOIERJQUxPRyAqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG5cclxuY29uc3QgYXV0aG9yaXplRGlhbG9nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhvcml6ZURpYWxvZycpO1xyXG5cclxuLyoqXHJcbiAqIFNob3dzIHRoZSBsb2dpbiBkaWFsb2cgYW5kIGhpZGVzIGFuZCBjbGVhcnMgYW55dGhpbmcgZWxzZS5cclxuICovXHJcbmZ1bmN0aW9uIHNob3dMb2dpbkRpYWxvZygpIHtcclxuICBBcHAuc2hvd01vZGFsRGlhbG9nKGF1dGhvcml6ZURpYWxvZywgJ29wYXF1ZScsIGZhbHNlKTtcclxuICAvLyBIaWRlIGFueXRoaW5nIGVsc2UuXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICBBcHAucHJvamVjdHNMaXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgLy8gVE9ETzogRGVsZXRlIHRoZSBjb250ZW50cyBvZiB0aGUgZ2xvYmFsIG9iamVjdHMgaWYgYW55LlxyXG4gIC8vIGFwcERhdGEuY2xlYXIoKTtcclxuICAvLyBjdXJyZW50UHJvamVjdC5jbGVhcigpO1xyXG4gIC8vIGxhc3RVcGxvYWRlZFByb2plY3QuY2xlYXIoKTtcclxuICBHZW5lcmljcy5lbXB0eU5vZGUoQXBwLnByb2plY3RzTGlzdCk7XHJcbiAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBwYWdlOiAnU2lnbiBpbiBkaWFsb2cnIH0sICdTaWduIGluIGRpYWxvZycsIGxvY2F0aW9uLmhyZWYucmVwbGFjZShsb2NhdGlvbi5zZWFyY2gsICcnKSk7XHJcbn1cclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqIFBXQSBpbnN0YWxsYXRpb24gKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuLy8gVE9ETyBDcmVhdGUgYSBzZXBhcmF0ZSBjbGFzcyBhbmQgaW1wb3J0P1xyXG5cclxubGV0IGRlZmVycmVkSW5zdGFsbFByb21wdDogQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50ID0gbnVsbDtcclxuXHJcbmNvbnN0IGluc3RhbGxCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5zdGFsbEJ0bicpO1xyXG5cclxuaW5zdGFsbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGluc3RhbGxBcHApO1xyXG5cclxuXHJcbi8vIEV2ZW50IGxpc3RlbmVyIGZvciBiZWZvcmVpbnN0YWxscHJvbXB0IGV2ZW50LlxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5zdGFsbHByb21wdCcsIHNhdmVCZWZvcmVJbnN0YWxsUHJvbXB0RXZlbnQpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBFdmVudCBoYW5kbGVyIGZvciBiZWZvcmVpbnN0YWxscHJvbXB0IGV2ZW50LlxyXG4gKiBTYXZlcyB0aGUgZXZlbnQgYW5kIHNob3dzIGluc3RhbGwgYnV0dG9uLlxyXG4gKiBAcGFyYW0ge0V2ZW50fSBlXHJcbiAqL1xyXG5mdW5jdGlvbiBzYXZlQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50KGU6IEJlZm9yZUluc3RhbGxQcm9tcHRFdmVudCkge1xyXG4gIC8vIFByZXZlbnQgZnJvbSBhdXRvbWF0aWNhbGx5IHNob3dpbmcgdGhlIHByb21wdCB3aGljaCBjb3VsZCBoYXBwZW5cclxuICAvLyBpbiBzb21lIGJyb3dzZXJzIGFuZCBjcmVhdGUgYSBjdXN0b20gb25lLlxyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICAvLyBTdGFzaCB0aGUgZXZlbnQgc28gaXQgY2FuIGJlIHRyaWdnZXJlZCBsYXRlci5cclxuICBkZWZlcnJlZEluc3RhbGxQcm9tcHQgPSBlO1xyXG4gIC8vIFVwZGF0ZSBVSSB0byBub3RpZnkgdGhlIHVzZXIgdGhleSBjYW4gYWRkIHRvIGhvbWUgc2NyZWVuXHJcbiAgaW5zdGFsbEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2hpZGRlbicpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEV2ZW50IGhhbmRsZXIgZm9yIHRoZSBpbnN0YWxsIGJ1dHRvbi5cclxuICogQHBhcmFtIHtFdmVudH0gZVxyXG4gKi9cclxuZnVuY3Rpb24gaW5zdGFsbEFwcChlOiBFdmVudCkge1xyXG4gIC8vIFNob3cgaW5zdGFsbCBwcm9tcHQuXHJcbiAgZGVmZXJyZWRJbnN0YWxsUHJvbXB0LnByb21wdCgpO1xyXG4gIC8vIEhpZGUgdGhlIGluc3RhbGwgYnV0dG9uLCBpdCBjYW50IGJlIGNhbGxlZCB0d2ljZS5cclxuICAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmhpZGRlbiA9IHRydWU7IC8vIFRPRE8gdXNlIGNzcyBpbnN0ZWFkXHJcbiAgLy8gTG9nIHVzZXIgcmVzcG9uc2UgdG8gcHJvbXB0LlxyXG4gIGRlZmVycmVkSW5zdGFsbFByb21wdC51c2VyQ2hvaWNlXHJcbiAgICAudGhlbihjaG9pY2UgPT4ge1xyXG4gICAgICBpZiAoY2hvaWNlLm91dGNvbWUgPT09ICdhY2NlcHRlZCcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBhY2NlcHRlZCB0aGUgQTJIUyBwcm9tcHQnLCBjaG9pY2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGRpc21pc3NlZCB0aGUgQTJIUyBwcm9tcHQnLCBjaG9pY2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmVycmVkSW5zdGFsbFByb21wdCA9IG51bGw7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8vIEFkZCBldmVudCBsaXN0ZW5lciBmb3IgdGhlIGFwcGluc3RhbGxlZCBldmVudC5cclxuLy8gU2luY2UgYXBwIGNhbiBiZSBpbnN0YWxsZWQgaW4gbW9yZSB0aGFuIG9uZSB3YXkgaXQgaXMgZ29vZCB0byBsaXN0ZW4gZm9yIHRoaXMgZXZlbnQuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdhcHBpbnN0YWxsZWQnLCBsb2dBcHBJbnN0YWxsZWQpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBUaGUgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGFwcGluc3RhbGxlZCBldmVudC5cclxuICogQHBhcmFtIHtFdmVudH0gZVxyXG4gKi9cclxuZnVuY3Rpb24gbG9nQXBwSW5zdGFsbGVkKGU6IEV2ZW50KSB7XHJcbiAgY29uc29sZS5sb2coJ1Zpc3VhbEFSUSBEcmF3aW5ncyBWaWV3ZXIgd2FzIGluc3RhbGxlZC4nLCBlKTtcclxuICAvLyBUT0RPOiBMb2cgdGhlIGluc3RhbGxhdGlvbiBmb3IgZXhhbXBsZSB0byBhbiBhbmFseXRpY3Mgc29mdHdhcmUgb3Igc2F2ZSB0aGUgZXZlbnQgc29tZWhvdy5cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gVE9ETyBtb3ZlIHRvIGEgc2VwYXJhdGUgZmlsZVxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKiogRFJBV0lOR1MgQlVUVE9OUyBMSVNUICoqKioqKioqKioqKioqKioqKioqKiovXHJcbi8qXHJcbiAqIEEgc2luZ2xlIGV2ZW50IGxpc3RlbmVyIGluIHRoZSBjb250YWluZXIgb2YgdGhlIGRyYXdpbmdzIGJ1dHRvbnMgbWFuYWdlcyB0aGUgY2xpY2tlZCBkcmF3aW5nLlxyXG4gKi9cclxuXHJcbmxldCBjdXJyZW50RHJhd2luZ0J0bjogSFRNTEVsZW1lbnQ7XHJcblxyXG5BcHAuZHJhd2luZ3NCdG5zLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBmdW5jdGlvbiAoZSkge1xyXG4gIGlmIChjdXJyZW50RHJhd2luZ0J0bikge1xyXG4gICAgY3VycmVudERyYXdpbmdCdG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgfVxyXG4gIGN1cnJlbnREcmF3aW5nQnRuID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KTtcclxuICBjb25zdCBkcmF3aW5nSWQgPSBjdXJyZW50RHJhd2luZ0J0bi5kYXRhc2V0LmlkO1xyXG4gIC8vIFNldCB0aGUgbmFtZSBvZiB0aGUgZHJhd2luZyBvbiB0aGUgZHJvcGRvd24gYnV0dG9uLlxyXG4gIC8vIFRPRE86IERvIHRoaXMgb25seSBpZiBpdCB3YXMgc3VjY2Vzc2Z1bC5cclxuICAoQXBwLmRyYXdpbmdzQnRucy5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudCkuaW5uZXJUZXh0ID0gY3VycmVudERyYXdpbmdCdG4uaW5uZXJUZXh0O1xyXG4gIGN1cnJlbnREcmF3aW5nQnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cclxuICAvLyBHZXQgdGhlIGNvcnJlc3BvbmRpbmcgZHJhd2luZyBvYmplY3QuXHJcbiAgY29uc3QgcmVxdWVzdGVkRHJhd2luZyA9IEFwcC5jdXJyZW50V29ya3NwYWNlLmRyYXdpbmdzLmZpbmQoZCA9PiBkLmlkID09PSBkcmF3aW5nSWQpO1xyXG5cclxuICAvLyBMb2FkIHRoZSBkcmF3aW5ncyBzdHlsZXMgaWYgaXQgaXMgdGhlIGZpcnN0IHRpbWUuXHJcbiAgLy8gVE9ETzogSWYgdGhpcyBpcyByZXF1aXJlZCBhbHdheXMgdGhlIGZpcnN0IHRpbWUgbWF5YmUgZG8gaXQgaW4gdGhlIFdvcmtzcGFjZSBjb25zdHJ1Y3Rvci5cclxuICAvLyBUT0RPOiBJZiB0aGlzIGZpbmFsbHkgZXh0cmFjdGVkIHRoZW4gdGhlIGZ1bmN0aW9uIHdvbnQgbmVlZCB0byBiZSBhc3luYyBhbnltb3JlLlxyXG4gIGlmIChBcHAuY3VycmVudFdvcmtzcGFjZS5kcmF3aW5nc1N0eWxlc1RhZyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICBpZiAoQXBwLmN1cnJlbnRXb3Jrc3BhY2UuZHJhd2luZ3NTdHlsZXNJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGxldCBzdHlsZXNSZXM7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgc3R5bGVzUmVzID0gYXdhaXQgQVBJLmdldEZpbGVDb250ZW50KEFwcC5jdXJyZW50V29ya3NwYWNlLmRyYXdpbmdzU3R5bGVzSWQpO1xyXG4gICAgICB9IGNhdGNoIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGZldGNoIHRoZSBkcmF3aW5ncyBzdHlsZXMuXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzdHlsZXNSZXMpIHtcclxuICAgICAgICBjb25zdCBzdHlsZVRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgICAgc3R5bGVUYWcuaW5uZXJUZXh0ID0gc3R5bGVzUmVzLmJvZHk7XHJcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZVRhZyk7XHJcbiAgICAgICAgQXBwLmN1cnJlbnRXb3Jrc3BhY2UuZHJhd2luZ3NTdHlsZXNUYWcgPSBzdHlsZVRhZztcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS53YXJuKCdUaGlzIHByb2plY3QgZG9lc25cXCd0IGhhdmUgYSBjc3Mgc3R5bGVzIGZpbGUgZm9yIHRoZSBkcmF3aW5ncy4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENoZWNrIGlmIHRoZSByZXF1ZXN0ZWQgZHJhd2luZyBoYXMgYWxyZWFkeSB0aGUgY29udGVudC5cclxuICBpZiAocmVxdWVzdGVkRHJhd2luZy5jb250ZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgIEFwcC5jdXJyZW50V29ya3NwYWNlLnNldERyYXdpbmcocmVxdWVzdGVkRHJhd2luZyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIEFwcC5zaG93Vmlld3BvcnREaWFsb2coJ2xvYWRlcicsICdMb2FkaW5nIGRyYXdpbmcnKTtcclxuICAgIEFQSS5nZXRGaWxlQ29udGVudChkcmF3aW5nSWQpLnRoZW4ocmVzID0+IHtcclxuICAgICAgcmVxdWVzdGVkRHJhd2luZy5zZXRDb250ZW50KHJlcy5ib2R5KTtcclxuICAgICAgQXBwLmN1cnJlbnRXb3Jrc3BhY2Uuc2V0RHJhd2luZyhyZXF1ZXN0ZWREcmF3aW5nKTtcclxuICAgICAgQXBwLmhpZGVWaWV3cG9ydE1lc3NhZ2UoKTtcclxuICAgICAgY29uc29sZS5sb2coJ0RyYXdpbmcgZmV0Y2hlZC4nKTtcclxuICAgIH0sIGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKiogRFJPUERPV05TIEZVTkNUSU9OQUxJVFkgKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3QgZHJvcGRvd25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZHJvcGRvd24tY29udGFpbmVyJyk7XHJcblxyXG5mb3IgKGxldCBpID0gMDsgaSA8IGRyb3Bkb3ducy5sZW5ndGg7IGkrKykge1xyXG4gIGRyb3Bkb3duc1tpXS5jaGlsZHJlblswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGRyb3Bkb3duc1tpXS5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XHJcbiAgfSk7XHJcbiAgZHJvcGRvd25zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBlID0+IHtcclxuICAgIChlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuICB9KTtcclxufVxyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKiogU0lERSBOQVZFIE1FTlUgKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3Qgc2lkZU5hdlRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlTmF2VG9nZ2xlJyk7XHJcblxyXG5zaWRlTmF2VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlTmF2Q29udGFpbmVyJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbiAgc2lkZU5hdlRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnKTtcclxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==